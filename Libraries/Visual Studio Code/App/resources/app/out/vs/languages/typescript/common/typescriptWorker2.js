/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/languages/typescript/common/features/converter",["require","exports"],function(e,t){function n(e,t){return e.getPositionOfLineAndCharacter(t.lineNumber-1,t.column-1)}function r(e,t){return e.getPositionOfLineAndCharacter(t.startLineNumber-1,t.startColumn-1)}function i(e,t){return e.getPositionOfLineAndCharacter(t.endLineNumber-1,t.endColumn-1)}function o(e,t){t=a(e,t);var n=e.getLineAndCharacterOfPosition(t);return{lineNumber:1+n.line,column:1+n.character}}function s(e,t,n,r){var i,o;if("number"==typeof n?o=n:r=n,"number"==typeof t?i=t:(i=t.start,o=i+t.length),i=a(e,i),o=a(e,o),r){var s=e.getLineAndCharacterOfPosition(i);return{startLineNumber:1+s.line,startColumn:1+s.character,endLineNumber:1+s.line,endColumn:1+s.character}}var s=e.getLineAndCharacterOfPosition(i),c=e.getLineAndCharacterOfPosition(o);return{startLineNumber:1+s.line,startColumn:1+s.character,endLineNumber:1+c.line,endColumn:1+c.character}}function a(e,t){var n=e.getFullWidth();return t>n?n:t}t.getOffset=n,t.getStartOffset=r,t.getEndOffset=i,t.getPosition=o,t.getRange=s}),define("vs/languages/typescript/common/features/definitions",["require","exports","vs/base/common/uri"],function(e,t,n){function r(e,t,r){var i=t.toString(),o=e.host.getScriptLineMap(i).getOffset(r),s=e.languageService.getDefinitionAtPosition(i,o);if(!s||0===s.length)return null;var a=s[0];return a.fileName?{resource:n["default"].parse(a.fileName),range:e.host.getScriptLineMap(a.fileName).getRangeFromSpan(a.textSpan)}:null}t.findDeclaration=r}),define("vs/languages/typescript/common/features/emitting",["require","exports","vs/base/common/strings"],function(e,t,n){function r(e,t,r){var i=e.getEmitOutput(t.toString()),o=i.outputFiles;if(!o)return null;for(var s=0,a=o.length;a>s;s++)if(n.endsWith(o[s].name,r))return{filename:o[s].name,content:o[s].text};return null}t.getEmitOutput=r}),define("vs/languages/typescript/common/features/format",["require","exports","vs/languages/typescript/common/features/converter"],function(e,t,n){function r(e,t,r){var i=t.toString(),o=e.getSourceFile(i);return e.getFormattingEditsForDocument(i,s(r)).map(function(e){return{text:e.newText,range:n.getRange(o,e.span)}})}function i(e,t,r,i){var o=t.toString(),a=e.getSourceFile(o),c=n.getStartOffset(a,r),u=n.getEndOffset(a,r);return e.getFormattingEditsForRange(o,c,u,s(i)).map(function(e){return{text:e.newText,range:n.getRange(a,e.span)}})}function o(e,t,r,i,o){var a=t.toString(),c=e.getSourceFile(a),u=n.getOffset(c,r);return e.getFormattingEditsAfterKeystroke(a,u,i,s(o)).map(function(e){return{text:e.newText,range:n.getRange(c,e.span)}})}function s(e){return{IndentSize:e.tabSize,TabSize:e.tabSize,NewLineCharacter:"\n",ConvertTabsToSpaces:e.insertSpaces,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,PlaceOpenBraceOnNewLineForFunctions:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1}}t.formatDocument=r,t.formatRange=i,t.formatAfterKeystroke=o}),define("vs/languages/typescript/common/features/occurrences",["require","exports","vs/languages/typescript/common/features/converter"],function(e,t,n){function r(e,t,r,i){var o=t.toString(),s=e.getSourceFile(o),a=n.getOffset(s,r),c=e.getOccurrencesAtPosition(o,a);return c?c.map(function(e){return{kind:e.isWriteAccess?"write":null,range:n.getRange(s,e.textSpan)}}):[]}t.compute=r}),define("vs/languages/typescript/common/features/previewer",["require","exports","vs/base/common/strings"],function(e,t,n){function r(e,t){if(void 0===t&&(t=n.empty),!e)return{};var r=e.map(function(e){return{tagName:"span",text:e.text,className:e.kind}});return{tagName:"div",className:"ts-symbol "+t,children:r}}function i(e){return e?e.map(function(e){return e.text}).join(n.empty):n.empty}t.html=r,t.plain=i}),define("vs/languages/typescript/common/features/extraInfo",["require","exports","vs/languages/typescript/common/features/converter","vs/languages/typescript/common/features/previewer"],function(e,t,n,r){function i(e,t,i){var o,s=t.toString(),a=e.getSourceFile(s),c=n.getOffset(a,i),u=e.getQuickInfoAtPosition(s,c);if(u){var l=[{markdown:r.plain(u.documentation)},{markdown:"```javascript\n"+r.plain(u.displayParts)+"\n```"}];o={htmlContent:l,range:n.getRange(a,u.textSpan)}}return o}t.compute=i}),define("vs/languages/typescript/common/features/parameterHints",["require","exports","vs/base/common/strings","vs/languages/typescript/common/features/converter","vs/languages/typescript/common/features/previewer"],function(e,t,n,r,i){function o(e,t,o){var s=t.toString(),a=e.getSourceFile(s),c=r.getOffset(a,o),u=e.getSignatureHelpItems(s,c);if(!u)return null;var l={currentSignature:u.selectedItemIndex,currentParameter:u.argumentIndex,signatures:[]};return u.items.forEach(function(e){var t={label:n.empty,documentation:null,parameters:[]};t.label+=i.plain(e.prefixDisplayParts),e.parameters.forEach(function(n,r,o){var s=i.plain(n.displayParts),a={label:s,documentation:i.plain(n.documentation),signatureLabelOffset:t.label.length,signatureLabelEnd:t.label.length+s.length};t.label+=s,t.parameters.push(a),r<o.length-1&&(t.label+=i.plain(e.separatorDisplayParts))}),t.label+=i.plain(e.suffixDisplayParts),l.signatures.push(t)}),l}t.compute=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/typescript/common/js/textEdits",["require","exports","vs/base/common/arrays","vs/base/common/strings"],function(e,t,n,r){function i(e,t){return-o(e,t)}function o(e,t){return e.offset===t.offset?t.length-e.length:t.offset-e.offset}function s(e,t){var i=[],s=Object.create(null);n.forEach(e,function(e,t){if(e.isInsert()){var n=s[e.offset];n?(e.origin&&(i.push(new u(e.offset+n.text.length,e.deltaLength)),i.push(e.origin)),n.text+=e.text,t()):(s[e.offset]=e,e.origin&&(i.push(e.deltaSpan),i.push(e.origin)))}});var a,c=[],p=t.length,f=[],g=[];e.sort(o);for(var m=0,d=e.length;d>m;m++)a=e[m],c.push(t.substring(a.end,p)),c.push(a.text),p=a.offset,f.push(a.deltaLength),g.push(new l(a.offset,a.text.length,t.substr(a.offset,a.length)));c.push(t.substring(0,p));for(var h=0,m=g.length-1;m>=0;m--)g[m].offset+=h,h+=f[m];return{value:c.reverse().join(r.empty),doEdits:e,undoEdits:g,derived:i}}function a(e,t,n){"undefined"==typeof n&&(n=p.None),e.sort(i);for(var r,o=0,s=0,a=e.length;a>s;s++)if(r=e[s],r.end<t)o+=r.deltaLength;else{if(r.offset>t)break;r.offset<=t&&r.end>=t&&(n===p.None?o+=Math.min(0,r.offset+(r.length+r.deltaLength)-t):n===p.StickLeft?o+=r.offset-t:n===p.StickRight&&(o+=r.end+r.deltaLength-t))}return t+o}var c;!function(e){function t(e,t){return e.offset<=t&&t<=e.offset+e.length}function n(e,n){return t(e,n.offset)||t(e,n.offset+n.length)}e.contains=t,e.overlaps=n}(c=t.ITextSpan||(t.ITextSpan={}));var u=function(){function e(e,t){this.offset=e,this.length=t}return e.from=function(t){return new e(t.offset,t.length)},Object.defineProperty(e.prototype,"end",{get:function(){return this.offset+this.length},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.offset===e.offset&&this.length===e.length},e.prototype.contains=function(e){return e.offset>=this.offset&&e.offset<this.end&&e.offset+e.length<=this.end},e.prototype.overlaps=function(e){return c.overlaps(this,e)},e}();t.TextSpan=u;var l=function(e){function t(t,n,r){e.call(this,t,n),this.text=r}return __extends(t,e),Object.defineProperty(t.prototype,"deltaLength",{get:function(){return this.text.length-this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaEnd",{get:function(){return this.end+this.deltaLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaSpan",{get:function(){return new u(this.offset,this.deltaLength)},enumerable:!0,configurable:!0}),t.prototype.isInsert=function(){return 0===this.length&&this.text.length>0},t.prototype.equals=function(t){return this.text===t.text&&e.prototype.equals.call(this,t)},t.prototype.toString=function(){return r.format("{0}-{1}/{2}",this.offset,this.length,this.text)},t}(u);t.Edit=l,t.compareAscending=i,t.compareDecending=o,t.apply=s,function(e){e[e.None=0]="None",e[e.StickLeft=1]="StickLeft",e[e.StickRight=2]="StickRight"}(t.TranslationBehaviour||(t.TranslationBehaviour={}));var p=t.TranslationBehaviour;t.translate=a}),define("vs/languages/typescript/common/lineMap",["require","exports","vs/base/common/strings"],function(e,t,n){var r;return function(e){function t(e){function t(e){return s[e.lineNumber-1]+e.column-1}function r(e){var t=s[e.startLineNumber-1]+e.startColumn-1,n=s[e.endLineNumber-1]+e.endColumn-1-t;return{start:t,length:n}}function i(e){var t=1;for(t=1;t<s.length&&!(s[t]>e);t++);return{lineNumber:t,column:1+e-s[t-1]}}function o(e){var t=i(e.start),n=i(e.start+e.length);return{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}}var s=n.computeLineStarts(e);return{getOffset:t,getSpanFromRange:r,getPositionFromOffset:i,getRangeFromSpan:o}}e.create=t}(r||(r={})),r}),define("vs/languages/typescript/common/options",["require","exports","vs/base/common/objects"],function(e,t,n){var r;return function(e){function t(e,t){return n.mixin(n.clone(t),e)}e.typeScriptOptions=Object.freeze({suggest:{alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1},validate:{enable:!0,semanticValidation:!0,syntaxValidation:!0,_surpressSuperWithoutSuperTypeError:!1,lint:{comparisonOperatorsNotStrict:"ignore",curlyBracketsMustNotBeOmitted:"ignore",emptyBlocksWithoutComment:"ignore",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",missingSemicolon:"ignore",newOnLowercaseFunctions:"ignore",semicolonsInsteadOfBlocks:"ignore",tripleSlashReferenceAlike:"ignore",unknownTypeOfResults:"ignore",unusedFunctions:"ignore",unusedImports:"ignore",unusedMembers:"ignore",unusedVariables:"ignore",forcedTypeConversion:"error",mixedTypesArithmetics:"error",newOnReturningFunctions:"error",parametersDontMatchSignature:"error",parametersOptionalButNotLast:"error",primitivesInInstanceOf:"error",redeclaredVariables:"error",undeclaredVariables:"error",unknownModule:"error",unknownProperty:"error"}}}),e.javaScriptOptions=Object.freeze({suggest:{alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1},validate:{enable:!0,semanticValidation:!0,syntaxValidation:!0,_surpressSuperWithoutSuperTypeError:!1,lint:{comparisonOperatorsNotStrict:"ignore",curlyBracketsMustNotBeOmitted:"ignore",emptyBlocksWithoutComment:"ignore",forcedTypeConversion:"warning",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",missingSemicolon:"ignore",mixedTypesArithmetics:"warning",newOnLowercaseFunctions:"warning",newOnReturningFunctions:"warning",parametersDontMatchSignature:"ignore",parametersOptionalButNotLast:"ignore",primitivesInInstanceOf:"error",redeclaredVariables:"warning",semicolonsInsteadOfBlocks:"ignore",tripleSlashReferenceAlike:"warning",undeclaredVariables:"warning",unknownModule:"ignore",unknownProperty:"ignore",unknownTypeOfResults:"warning",unusedFunctions:"ignore",unusedImports:"ignore",unusedMembers:"ignore",unusedVariables:"warning"}}}),e.withDefaultOptions=t}(r||(r={})),r}),define("vs/languages/typescript/common/project/snapshots",["require","exports"],function(e,t){function n(e){var t=e.length;return t>15e5&&(e=e.replace(/[^\r\n]/g," ")),{getLength:function(){return t},getText:e.substring.bind(e),getChangeRange:function(){return null}}}t.fromValue=n}),define("vs/nls!vs/languages/typescript/common/features/quickFix",["vs/nls","vs/nls!vs/languages/typescript/common/typescriptWorker2"],function(e,t){return e.create("vs/languages/typescript/common/features/quickFix",t)}),define("vs/nls!vs/languages/typescript/common/lint/lint",["vs/nls","vs/nls!vs/languages/typescript/common/typescriptWorker2"],function(e,t){return e.create("vs/languages/typescript/common/lint/lint",t)}),define("vs/languages/typescript/common/features/rename",["require","exports","vs/base/common/uri","vs/languages/typescript/common/typescript"],function(e,t,n,r){function i(e,t,i,o){var s,a,c=t.toString(),u=e.host.getScriptLineMap(c).getOffset(i);return s=e.languageService.getRenameInfo(c,u),a={currentName:s.displayName,edits:[]},s.canRename?(a.edits=e.languageService.findRenameLocations(c,u,!1,!1).filter(function(e){return!r.isDefaultLib(e.fileName)}).map(function(t){return{resource:n["default"].parse(t.fileName),newText:o,range:e.host.getScriptLineMap(t.fileName).getRangeFromSpan(t.textSpan)}}),a):(a.rejectReason=s.localizedErrorMessage,a)}return i}),define("vs/languages/typescript/common/features/logicalSelection",["require","exports","vs/languages/typescript/common/lib/typescriptServices","vs/languages/typescript/common/features/converter"],function(e,t,n,r){function i(e,t,i){for(var o=e.getSourceFile(t.toString()),s=r.getOffset(o,i),a=n.getTokenAtPosition(o,s),c=-1,u=-1,l=[];a;){var p=a.getStart(),f=a.getEnd();(p!==c||f!==u)&&l.unshift({type:"node",range:r.getRange(o,p,f)}),c=p,u=f,a=a.parent}return l}t.compute=i}),define("vs/languages/typescript/common/features/outline",["require","exports","vs/languages/typescript/common/features/converter","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,n,r){function i(e,t){return e.range.startLineNumber<t.range.startLineNumber?-1:e.range.startLineNumber>t.range.startLineNumber?1:e.range.startColumn<t.range.startColumn?-1:e.range.startColumn>t.range.startColumn?1:0}function o(e,t){var n=/\.js$/.test(t.fsPath);return n?c(e,t):s(e,t)}function s(e,t){var n=e.getSourceFile(t.toString()),r=e.getNavigationBarItems(n.fileName),o={type:"",label:"",range:void 0,children:[]};return r.filter(function(e){return"<global>"!==e.text}).forEach(function(e){return o.children.push(a(n,e))}),o.children.sort(i)}function a(e,t){var r=t.spans[0],o=n.getRange(e,r);return{label:t.text,type:u[t.kind]||"variable",range:o,children:t.childItems.map(function(t){return a(e,t)}).sort(i)}}function c(e,t){var o=[],s=e.getSourceFile(t.toString()),c=[];for(s.statements.forEach(function(e){183===e.kind&&e.declarationList.declarations.forEach(function(e){c.push({label:e.name.getText(),type:"variable",range:n.getRange(s,e.getStart(),e.getEnd())})}),o.push(e)});o.length;){var u=o.pop(),l="";203===u.kind?l=u.name.text:165===u.kind&&(u.name?l=u.name.text:227===u.parent.kind&&u.parent.name&&(l=r.getTextOfNode(u.parent.name)+": function()")),l&&c.push({label:l,type:"function",range:n.getRange(s,u.getStart(),u.getEnd())}),o.push.apply(o,u.getChildren())}for(var p=e.getNavigationBarItems(s.fileName),f=0;f<p.length;f++){var g=p[f];if(g.kind===r.ScriptElementKind.classElement){var m=a(s,g);c.push(m)}}return c.sort(i)}var u=Object.create(null);u[r.ScriptElementKind.moduleElement]="module",u[r.ScriptElementKind.classElement]="class",u[r.ScriptElementKind.enumElement]="enum",u[r.ScriptElementKind.interfaceElement]="interface",u[r.ScriptElementKind.memberFunctionElement]="method",u[r.ScriptElementKind.memberVariableElement]="property",u[r.ScriptElementKind.memberGetAccessorElement]="property",u[r.ScriptElementKind.memberSetAccessorElement]="property",u[r.ScriptElementKind.variableElement]="variable",u[r.ScriptElementKind.constElement]="variable",u[r.ScriptElementKind.localVariableElement]="variable",u[r.ScriptElementKind.variableElement]="variable",u[r.ScriptElementKind.functionElement]="function",u[r.ScriptElementKind.localFunctionElement]="function",t.compute=o}),define("vs/languages/typescript/common/features/quickFix",["require","exports","vs/base/common/network","vs/base/common/strings","vs/languages/typescript/common/lib/typescriptServices","vs/languages/typescript/common/features/converter","vs/nls!vs/languages/typescript/common/features/quickFix","vs/base/common/arrays"],function(e,t,n,r,i,o,s,a){function c(e,t,n,s){var a=t.toString(),c=e.getSourceFile(a),u=o.getOffset(c,{lineNumber:n.endLineNumber,column:n.endColumn}),l=i.findTokenOnLeftOfPosition(c,u);if(!l||0===l.getWidth())return null;var p=s.command.arguments[0];switch(p.type){case"rename":var f=c.getLineAndCharacterOfPosition(l.getStart()),g=c.getLineAndCharacterOfPosition(l.getEnd()),m={startLineNumber:f.line+1,startColumn:f.character+1,endLineNumber:g.line+1,endColumn:g.character+1};return{edits:[{resource:t,range:m,newText:p.name}]};case"addglobal":var d=r.format("/* global {0} */\n",p.name),m={startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1};return{edits:[{resource:t,range:m,newText:d}]}}return null}function u(e){return!!e.code}function l(e,t,n){if(!u(n))return[];var r=n,i=0;try{i=parseInt(r.code)}catch(o){}var s=[];switch(i){case 2339:p(e,t,r,s);break;case 2304:p(e,t,r,s),f(e,t,r,s)}return s}function p(e,t,n,c){var u=t.toString(),l=e.getSourceFile(u),p=o.getOffset(l,{lineNumber:n.endLineNumber,column:n.endColumn}),f=i.findTokenOnLeftOfPosition(l,p);if(f&&0!==f.getWidth()){var g=i.getTextOfNode(f);g=g.substring(0,g.length-(f.getEnd()-p));var m=e.getCompletionsAtPosition(u,p);if(m&&!a.isFalsyOrEmpty(m.entries)){var d=[];m.entries.forEach(function(e){if(e.name!==g)switch(e.kind){case i.ScriptElementKind.classElement:case i.ScriptElementKind.interfaceElement:case i.ScriptElementKind.typeElement:case i.ScriptElementKind.enumElement:case i.ScriptElementKind.variableElement:case i.ScriptElementKind.localVariableElement:case i.ScriptElementKind.functionElement:case i.ScriptElementKind.localFunctionElement:case i.ScriptElementKind.memberFunctionElement:case i.ScriptElementKind.memberGetAccessorElement:case i.ScriptElementKind.memberSetAccessorElement:case i.ScriptElementKind.memberVariableElement:case i.ScriptElementKind.constructorImplementationElement:case i.ScriptElementKind.callSignatureElement:case i.ScriptElementKind.indexSignatureElement:case i.ScriptElementKind.constructSignatureElement:case i.ScriptElementKind.parameterElement:case i.ScriptElementKind.primitiveType:var t=r.difference(g,e.name);if(t<g.length/2)return;d.push({command:{id:"ts.renameTo",title:s.localize(0,null,e.name),arguments:[{type:"rename",name:e.name}]},score:t})}}),d.sort(function(e,t){return t.score-e.score});for(var h=Math.min(3,d.length),v=0;h>v;v++)c.push(d[v])}}}function f(e,a,c,u){var l=a.toString(),p=e.getSourceFile(l),f=o.getOffset(p,{lineNumber:c.endLineNumber,column:c.endColumn}),g=i.findTokenOnLeftOfPosition(p,f);if(g&&0!==g.getWidth()&&n.schemas.inMemory!==a.scheme){var m=i.getTextOfNode(g);if(t.typingsMap.hasOwnProperty(m)){var d=t.typingsMap[m],h=Array.isArray(d)?d:[d];h.forEach(function(e,t){u.push({command:{id:"ts.downloadDts",title:s.localize(1,null,e.split("/")[1]),arguments:[{type:"typedefinitions",name:e}]},score:t})})}r.endsWith(a.path,".js")&&u.push({command:{id:"ts.addAsGlobal",title:s.localize(2,null,m),arguments:[{type:"addglobal",name:m}]},score:1})}}t.evaluate=c,t.compute=l;var g="angularjs/angular.d.ts",m="jquery/jquery.d.ts",d="node/node.d.ts",h="mocha/mocha.d.ts",v="underscore/underscore.d.ts",y="knockout/knockout.d.ts",S="backbone/backbone.d.ts",_="d3/d3.d.ts",b="qunit/qunit.d.ts",k="react/react.d.ts",E="ember/ember.d.ts",O="lodash/lodash.d.ts",x="mustache/mustache.d.ts",j="async/async.d.ts",w="browserify/browserify.d.ts",P="cordova/cordova.d.ts",N="sinon/sinon.d.ts",T="jasmine/jasmine.d.ts",L="handlebars/handlebars.d.ts";t.typingsMap={angular:g,$:m,jquery:m,jQuery:m,process:d,__dirname:d,describe:[h,T],it:[h,T],_:[v,O],ko:y,Backbone:S,d3:_,QUnit:b,React:k,Ember:E,Em:E,Handlebars:L,Mustache:x,async:j,browserify:w,cordova:P,sinon:N}}),define("vs/languages/typescript/common/features/references",["require","exports","vs/base/common/uri","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,n,r){function i(e,t,r,i,s){void 0===s&&(s=!1);var a,c=t.toString(),u=e.host.getScriptLineMap(c).getOffset(r);return a=s?e.languageService.getOccurrencesAtPosition(c,u):e.languageService.getReferencesAtPosition(c,u),a?a.filter(function(t){var n=e.languageService.getSourceFile(t.fileName);return i||!o(n,t.textSpan.start)}).map(function(t){var r={resource:n["default"].parse(t.fileName),range:e.host.getScriptLineMap(t.fileName).getRangeFromSpan(t.textSpan)};return r}):[]}function o(e,t){var n=r.getTokenAtPosition(e,t).parent;return n&&r.isDeclaration(n)}t.find=i}),define("vs/languages/typescript/common/features/suggestions",["require","exports","vs/base/common/collections","vs/languages/typescript/common/lib/typescriptServices","vs/languages/typescript/common/features/converter","vs/languages/typescript/common/features/previewer"],function(e,t,n,r,i,o){function s(e,t){for(var n=t;t>0&&/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s])/.test(e.charAt(t-1));)t-=1;return e.substring(t,n)}function a(e){return e.type+e.label+e.codeSnippet}function c(e,t,r,o){var c=t.toString(),u=e.getSourceFile(c),p=i.getOffset(u,r),f=e.getCompletionsAtPosition(c,p),g=n.createStringDictionary();if(f)for(var m=0,d=f.entries.length;d>m;m++){var h=f.entries[m];n.insert(g,{label:h.name,codeSnippet:h.name,type:l(h.kind)},a)}var v=u.getFullText(),y=s(v,p);if(o.suggest.alwaysAllWords)for(var S=v.split(/\W+/),_=0;_<S.length;_++){var b=S[_];b=b.trim(),b&&n.insert(g,{label:b,codeSnippet:b,type:"text"},a)}return{currentWord:y,suggestions:n.values(g)}}function u(e,t,n,r,s){if("snippet"===r.type)return r;var a=t.toString(),c=e.getSourceFile(a),u=i.getOffset(c,n),p=e.getCompletionEntryDetails(a,u,r.label);if(!p)return r;if(r.documentationLabel=o.plain(p.documentation),r.typeLabel=o.plain(p.displayParts),r.codeSnippet=p.name,s.suggest.useCodeSnippetsOnMethodSuggest&&"function"===l(p.kind)){var f,g=p.name;f=p.displayParts.filter(function(e){return"parameterName"===e.kind}).map(function(e){return"{{"+e.text+"}}"}),g+=f.length>0?"("+f.join(", ")+"){{}}":"()",r.codeSnippet=g}return r}function l(e){switch(e){case r.ScriptElementKind.primitiveType:case r.ScriptElementKind.keyword:return"keyword";case r.ScriptElementKind.variableElement:case r.ScriptElementKind.localVariableElement:case r.ScriptElementKind.memberVariableElement:case r.ScriptElementKind.memberGetAccessorElement:case r.ScriptElementKind.memberSetAccessorElement:return"field";case r.ScriptElementKind.functionElement:case r.ScriptElementKind.memberFunctionElement:case r.ScriptElementKind.constructSignatureElement:case r.ScriptElementKind.callSignatureElement:return"function"}return e}t.computeSuggestions=c,t.getSuggestionDetails=u}),define("vs/languages/typescript/common/js/rewriting",["require","exports","vs/base/common/strings","vs/languages/typescript/common/lib/typescriptServices","vs/languages/typescript/common/js/textEdits"],function(e,t,n,r,i){function o(e,t,n){f=Object.create(null),f._total=Date.now();var o="string"==typeof t?t:t.getText(0,t.getLength());n||(n=function(){return r.createSourceFile("afile.ts",o,2,!0)});for(var s=new m(n),a=0,c=e.length;c>a;a++)p=Date.now(),e[a].computeEdits(s),f[e[a].name]=Date.now()-p;if(0===s.edits.length)return{value:o,doEdits:[],undoEdits:[],derived:[]};p=Date.now();var u=i.apply(s.edits,o);return f._apply=Date.now()-p,f._total=Date.now()-f._total,g&&(console.info(f),console.info(u.value)),u}function s(e){return n.format(d,e.getStart(),e.getEnd())}function a(e,t){return h.lastIndex=0,e.replace(h,function(e,n,r){return t.getText(parseInt(n),parseInt(r))})}function c(e,t){if("string"==typeof e)return a(e,t);if(Array.isArray(e))for(var n=e.slice(0);n.length;){var r=n.shift();r.markdown=r.markdown&&a(r.markdown,t),r.children&&n.push.apply(n,r.children)}}function u(e){return h.lastIndex=0,h.test(e)}var l=function(){function e(){}return e.prototype.to=function(e){return e},e.prototype.from=function(e){return e},e.prototype.info=function(e){return{origin:void 0,isInserted:!1,isOverlapping:!1}},e.Instance=new e,e}();t.IdentityTranslator=l;var p,f,g=!1;t.translate=o;var m=function(){function e(e){this.sourceFile=e(),this.sourceUnitStart=this.sourceFile.getStart(),this.edits=[]}return e.prototype.addEdit=function(e){this.edits.push(e)},e.prototype.newInsert=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o;"string"==typeof e?(o=this.sourceUnitStart,t.unshift(e)):o=e,this.edits.push(new i.Edit(o,0,n.format.apply(n,t)))},e.prototype.newDerive=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var s;"string"==typeof t?(s=this.sourceUnitStart,r.unshift(t)):s=t;var a=new i.Edit(s,0,n.format.apply(n,r));a.origin=new i.TextSpan(e.getStart(),e.getWidth()),this.edits.push(a)},e.prototype.newDelete=function(e,t){this.edits.push(new i.Edit(e,t,n.empty))},e.prototype.newReplace=function(e,t,n){this.edits.push(new i.Edit(e,t,n))},e.prototype.newAppend=function(e){this.edits.push(new i.Edit(this.sourceFile.getFullWidth(),0,e))},e}();t.AnalyzerContext=m;var d="_$steroids$_{0}_{1}",h=/_\$steroids\$_(\d+)_(\d+)/g;t.encodeVariableName=s,t.decodeVariableNames=c,t.containsEncodedVariableName=u}),define("vs/languages/typescript/common/lint/rules/javascript",["require","exports","vs/base/common/strings","vs/base/common/collections","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,n,r,i){var o=function(){function e(){this.code="SA9005",this.name="ComparisonOperatorsNotStrict",this.filter=[172]}return e.prototype.checkNode=function(e,t){if(28===e.operatorToken.kind||29===e.operatorToken.kind){var n=e.right.pos-2;t.reportError(e,this.name,this.code,n,2)}},e}();t.ComparisonOperatorsNotStrict=o;var s=function(){function e(){this.code="SA9050",this.name="MissingSemicolon",this.filter=[183,185,194,134,133]}return e.prototype.checkNode=function(e,t){var n=i.findChildOfKind(e,22);if(!n){var r=i.getTokenPosOfNode(e)+e.getWidth()-1;t.reportError(e,this.name,this.code,r,1)}},e}();t.MissingSemicolon=s;var a=function(){function e(){this.code="SA9053",this.filter=[172],this.name="UnknownTypeOfResults"}return e.prototype.checkNode=function(t,o){if(t.left&&168===t.left.kind){var s=!1;if(8===t.right.kind){var a=i.getTextOfNode(t.right);a=n.trim(a,"'"),a=n.trim(a,'"'),s=!r.contains(e._AllowedStrings,a)}else 89===t.right.kind?s=!0:"undefined"===i.getTextOfNode(t.right)&&(s=!0);s&&o.reportError(t,this.name,this.code)}},e._AllowedStrings={undefined:!0,object:!0,"function":!0,"boolean":!0,number:!0,string:!0},e}();t.UnknownTypeOfResults=a;var c=function(){function e(){this.code="SA9054",this.name="SemicolonsInsteadOfBlocks",this.filter=[186,76,188,189,190]}return e.prototype.checkNode=function(e,t){if(186===e.kind){var n=e;(n.thenStatement&&184===n.thenStatement.kind||n.elseStatement&&184===n.elseStatement.kind)&&t.reportError(n,this.name,this.code)}var r=e;r&&r.statement&&184===r.statement.kind&&t.reportError(r,this.name,this.code)},e}();t.SemicolonsInsteadOfBlocks=c;var u=function(){function e(){this.code="SA9055",this.name="FunctionsInsideLoops",this.filter=[165,203,166]}return e.prototype.checkNode=function(e,t){for(var n=e.parent;n;){if(189===n.kind||190===n.kind||188===n.kind||187===n.kind){t.reportError(e,this.name,this.code);break}n=n.parent}},e}();t.FunctionsInsideLoops=u;var l=function(){function e(){this.code="SA9062",this.name="NewOnLowercaseFunctions",this.filter=[161]}return e.prototype.checkNode=function(e,t){var n;switch(e.expression.kind){case 65:n=e.expression.text;break;case 158:n=e.expression.name.text}n&&!n.charAt(0).match(/[A-Z_]/)&&t.reportError(e.expression,this.name,this.code)},e}();t.NewOnLowercaseFunctions=l}),define("vs/languages/typescript/common/lint/rules/layout",["require","exports","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,n){var r=function(){function e(){this.code="SA1503",this.name="CurlyBracketsMustNotBeOmitted",this.filter=[186,76,187,190,189,188]}return e.prototype.checkNode=function(e,t){if(186===e.kind){var n=e;if(n.elseStatement&&186===n.elseStatement.kind)return;n.thenStatement&&182!==n.thenStatement.kind&&t.reportError(n.thenStatement,this.name,this.code),n.elseStatement&&182!==n.elseStatement.kind&&t.reportError(n.elseStatement,this.name,this.code)}else{var r=e;r.statement&&182!==r.statement.kind&&t.reportError(r.statement,this.name,this.code)}},e}();t.CurlyBracketsMustNotBeOmitted=r;var i=function(){function e(){this.code="SA1514",this.name="EmptyBlocksWithoutComment",this.filter=[182]}return e.prototype.checkNode=function(e,t){e.statements.pos<e.statements.end||n.getTextOfNode(e).match(/\/\/|\/|\*/)||t.reportError(e,this.name,this.code)},e.prototype._hasComment=function(e){var t=e.getChildAt(1);if(t){var r=n.getTextOfNode(t);if(r&&r.trim().length>0)return!0}return!1},e}();t.EmptyBlocksWithoutComment=i}),define("vs/languages/typescript/common/lint/rules/typescript",["require","exports","vs/base/common/strings","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,n,r){var i=function(){function e(){this.code="SA9002",this.name="FunctionsWithoutReturnType",this.filter=[203,136,166]}return e.prototype.checkNode=function(e,t){e.type||t.reportError(e.name,this.name,this.code)},e}();t.FunctionsWithoutReturnType=i;var o=function(){function e(){this.code="SA9056",this.name="TripleSlashReferenceAlike",this.filter=[230]}return e.prototype.checkNode=function(e,t){var n=e.getLeadingTriviaWidth(),r=e.getFullText().substr(0,n);this._couldMeanTripleSlash(r)&&t.reportError(e,this.name,this.code,0,n)},e.prototype._couldMeanTripleSlash=function(t){if(e._TripleSlashReference.test(t))return!1;var r=t.split(/[\s=]/);if(!(r.length>5)){for(var i=0,o=0,s=0,a=0,c=r.length;c>a;a++)i=Math.max(i,n.difference("reference",r[a])),o=Math.max(o,n.difference("path",r[a])),s=Math.max(s,(n.startsWith(r[a],'"')||n.startsWith(r[a],"'")?1:0)+(n.endsWith(r[a],'"')||n.endsWith(r[a],"'")?1:0));return(s>0||o>5)&&i>5?!0:!1}},e._TripleSlashReference=/^(\/\/\/\s*<reference\s+path=)('|")(.+?)\2\s*(static=('|")(.+?)\2\s*)*/im,e}();t.TripleSlashReferenceAlike=o;var s=function(){function e(){this.code="SA9057",this.name="UnusedImports",this.filter=[211]}return e.prototype.checkNode=function(e,t){var n=r.getTokenPosOfNode(e.name),i=t.languageService().getOccurrencesAtPosition(t.filename(),n);i&&1===i.length&&t.reportError(e,this.name,this.code,r.getTokenPosOfNode(e))},e}();t.UnusedImports=s;var a=function(){function e(){this.code="SA9058",this.name="UnusedVariables",this.filter=[183]}return e.prototype.checkNode=function(e,t){var n=this;if(!(1&e.flags)&&230!==e.parent.kind){for(var i,o,s=e.parent;s&&!i;){switch(s.kind){case 137:case 136:case 203:case 165:case 138:case 139:i=s.body}s=s.parent}var a;if(i){var o=i.getFullText(),c=i.getFullStart();a=function(e){for(var n=0,r=0;2>n&&(r=o.indexOf(e.getText(),r),-1!==r);){r+=e.getText().length;var i=t.languageService().getDefinitionAtPosition(t.filename(),c+r);i&&i.length>0&&i[0].textSpan.start<=e.getStart()&&e.getStart()<=i[0].textSpan.start+i[0].textSpan.length&&(n+=1)}return n>1}}else a=function(e){var n,i=r.getTokenPosOfNode(e);return n=t.languageService().getOccurrencesAtPosition(t.filename(),i),n&&n.length>1};e.declarationList.declarations.forEach(function(e){if(e.name)if(65===e.name.kind)a(e.name)||t.reportError(e.name,n.name,n.code);else for(var r=[e.name];r.length;)for(var i=r.pop(),o=0,s=i.elements;o<s.length;o++){var c=s[o];65===c.name.kind?a(c.name)||t.reportError(c.name,n.name,n.code):r.push(c.name)}})}},e}();t.UnusedVariables=a;var c=function(){function e(){this.code="SA9059",this.name="UnusedFunctions",this.filter=[203]}return e.prototype.checkNode=function(e,t){if(!(1&e.flags||2048&e.flags)){var n=r.getTokenPosOfNode(e.name),i=t.languageService().getOccurrencesAtPosition(t.filename(),n);i&&i.length<=1&&t.reportError(e.name,this.name,this.code,n)}},e}();t.UnusedFunctions=c;var u=function(){function e(){this.code="SA9060",this.name="UnusedMembers",this.filter=[134,136]}return e.prototype.checkNode=function(e,t){if(32&e.flags&&e.name){var n=r.getTokenPosOfNode(e.name),i=t.languageService().getOccurrencesAtPosition(t.filename(),n);
i&&i.length<=1&&t.reportError(e.name,this.name,this.code,n)}},e}();t.UnusedMembers=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/typescript/common/lint/lint",["require","exports","vs/nls!vs/languages/typescript/common/lint/lint","vs/base/common/severity","vs/base/common/types","vs/base/common/collections","vs/languages/typescript/common/lib/typescriptServices","./rules/layout","./rules/typescript","./rules/javascript"],function(e,t,n,r,i,o,s,a,c,u){function l(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"function"==typeof r&&(t[String(n).toLowerCase()]=r)}}function p(e){var t={},n=[],s=e.validate.lint;l(a,t),l(u,t),l(c,t);for(var p in s)if(s.hasOwnProperty(p)){var f=o.lookup(t,String(p).toLowerCase());f&&n.push({rule:i.create(f),severity:r["default"].fromValue(s[p])})}return n}function f(e,t,n){var r=p(e),i=new d(t,r);return i.check(t.getSourceFile(n.toString()))}var g=function(){function e(e){this._rules={},this._errors=[];for(var t=0,n=e.length;n>t;t++)this._addRule(e[t])}return e.prototype._addRule=function(e){var t=this,n=function(n){o.lookupOrInsert(t._rules,n,[]).push(e)};e.rule.filter?e.rule.filter.forEach(n):n(-1)},e.prototype.check=function(e){return this._errors.length=0,this._currentSeverity=r["default"].Warning,this._sourceFile=e,this._visit(e),this._errors.slice(0)},e.prototype.reportError=function(e,t,n,r,i){if(e){"undefined"==typeof r&&(r=s.getTokenPosOfNode(e)),"undefined"==typeof i&&(i=e.getWidth());var o=this._sourceFile.getLineAndCharacterOfPosition(r),a=this._sourceFile.getLineAndCharacterOfPosition(r+i);this._errors.push({message:t,code:n,severity:this._currentSeverity,range:{startLineNumber:1+o.line,startColumn:1+o.character,endLineNumber:1+a.line,endColumn:1+a.character}})}},e.prototype._visit=function(e){var t=this;e&&(this._checkNodeOrToken(e),s.forEachChild(e,function(e){t._visit(e)}))},e.prototype._checkNodeOrToken=function(e){for(var t=o.lookup(this._rules,e.kind,[]).concat(o.lookup(this._rules,-1,[])),n=0,i=t.length;i>n;n++)if(this._currentSeverity=t[n].severity,this._currentSeverity!==r["default"].Ignore)try{t[n].rule.checkNode(e,this)}catch(s){console.error(s)}},e}();t.SimpleStyleRuleChecker=g;var m=function(e){function t(t,n){e.call(this,n),this._languageService=t}return __extends(t,e),t.prototype.languageService=function(){return this._languageService},t.prototype.filename=function(){return this._filename},t.prototype.check=function(t){return this._filename=t.fileName,e.prototype.check.call(this,t)},t}(g);t.LanuageServiceStyleRuleChecker=m;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.reportError=function(t,n,r,i,o){return e.prototype.reportError.call(this,t,this._lookupMessage(n,r),r,i,o)},t.prototype._lookupMessage=function(e,t){switch(t){case"SA1503":return n.localize(0,null);case"SA1514":return n.localize(1,null);case"SA9005":return n.localize(2,null);case"SA9050":return n.localize(3,null);case"SA9051":return n.localize(4,null);case"SA9052":return n.localize(5,null);case"SA9053":return n.localize(6,null);case"SA9054":return n.localize(7,null);case"SA9055":return n.localize(8,null);case"SA9062":return n.localize(9,null);case"SA9002":return n.localize(10,null);case"SA9056":return n.localize(11,null);case"SA9057":return n.localize(12,null);case"SA9058":return n.localize(13,null);case"SA9059":return n.localize(14,null);case"SA9060":return n.localize(15,null);case"SA9061":return n.localize(16,null)}return e},t}(m);t.StyleRuleCheckerWithMessages=d,t.check=f}),define("vs/languages/typescript/common/features/diagnostics",["require","exports","vs/languages/typescript/common/lib/typescriptServices","vs/base/common/severity","vs/languages/typescript/common/features/converter","vs/languages/typescript/common/lint/lint"],function(e,t,n,r,i,o){function s(e,t,n,r,i){var o=[];if(r.validate.enable&&r.validate.syntaxValidation){var s=t.toString(),a=e.getSyntacticDiagnostics(s);if(i){var c=e.getSourceFile(s);a.push.apply(a,p(c,n))}for(var f=u(r),g=0;g<a.length;g++)l(a[g],f,o)}return o}function a(e,t,n){var r=[],i=!1;if(n.validate.enable&&n.validate.semanticValidation)for(var o=e.getSemanticDiagnostics(t.toString()),s=u(n),a=0;a<o.length;a++)l(o[a],s,r),i=i||2307===o[a].code||6053===o[a].code;return{markers:r,hasMissingFiles:i}}function c(e,t,n){return n.validate.enable===!1||n.validate.semanticValidation===!1?[]:o.check(n,e,t).map(function(e){return{message:e.message,severity:e.severity,startLineNumber:e.range.startLineNumber,startColumn:e.range.startColumn,endLineNumber:e.range.endLineNumber,endColumn:e.range.endColumn}})}function u(e){var t=Object.create(null);return t[2403]=r["default"].fromValue(e.validate.lint.redeclaredVariables),t[2403]=r["default"].fromValue(e.validate.lint.redeclaredVariables),t[2304]=r["default"].fromValue(e.validate.lint.undeclaredVariables),t[2339]=r["default"].fromValue(e.validate.lint.unknownProperty),t[2459]=r["default"].fromValue(e.validate.lint.unknownProperty),t[2460]=r["default"].fromValue(e.validate.lint.unknownProperty),t[2306]=r["default"].fromValue(e.validate.lint.unknownModule),t[2307]=r["default"].fromValue(e.validate.lint.unknownModule),t[2322]=r["default"].fromValue(e.validate.lint.forcedTypeConversion),t[2323]=r["default"].fromValue(e.validate.lint.forcedTypeConversion),t[2345]=r["default"].fromValue(e.validate.lint.forcedTypeConversion),t[2362]=r["default"].fromValue(e.validate.lint.mixedTypesArithmetics),t[2363]=r["default"].fromValue(e.validate.lint.mixedTypesArithmetics),t[2365]=r["default"].fromValue(e.validate.lint.mixedTypesArithmetics),t[2356]=r["default"].fromValue(e.validate.lint.mixedTypesArithmetics),t[2357]=r["default"].fromValue(e.validate.lint.mixedTypesArithmetics),t[2359]=r["default"].fromValue(e.validate.lint.primitivesInInstanceOf),t[2358]=r["default"].fromValue(e.validate.lint.primitivesInInstanceOf),t[2350]=r["default"].fromValue(e.validate.lint.newOnReturningFunctions),t[2346]=r["default"].fromValue(e.validate.lint.parametersDontMatchSignature),t[1016]=r["default"].fromValue(e.validate.lint.parametersOptionalButNotLast),t[2335]=e.validate._surpressSuperWithoutSuperTypeError?r["default"].Ignore:r["default"].Error,function(e){var n=t[e.code];return"undefined"!=typeof n?n:f[e.category]}}function l(e,t,o){var s=t(e);if(s!==r["default"].Ignore){var a=i.getRange(e.file,e.start,e.start+e.length);o.push({severity:s,message:n.flattenDiagnosticMessageText(e.messageText,"\n"),code:e.code.toString(),startLineNumber:a.startLineNumber,startColumn:a.startColumn,endLineNumber:a.endLineNumber,endColumn:a.endColumn})}}function p(e,t){function r(l){if(!l)return!1;switch(l.kind){case 78:case 85:if(2!==t.target)return void u.push(a(l,!0));break;case 211:return u.push(a(l)),!0;case 217:return l.isExportEquals?u.push(a(l)):2!==t.target&&u.push(a(l,!0)),!0;case 204:var p=l;if(2!==t.target)return void u.push(a(p,!0));if(s(p.modifiers)||i(p.typeParameters))return!0;break;case 225:var f=l;if(102===f.token)return u.push(a(l)),!0;break;case 205:return u.push(a(l)),!0;case 208:return u.push(a(l)),!0;case 206:return u.push(a(l)),!0;case 166:2!==t.target&&u.push(a(l,!0));case 136:case 135:case 137:case 138:case 139:case 165:case 203:case 203:var g=l;if(s(g.modifiers)||i(g.typeParameters)||o(g.type))return!0;break;case 183:if(2!==t.target&&/^const|^let/.test(l.getText()))return void u.push(a(l,!0));var m=l;if(s(m.modifiers))return!0;break;case 201:var d=l;if(o(d.type))return!0;break;case 160:case 161:var h=l;if(h.typeArguments&&h.typeArguments.length>0){var v=h.typeArguments.pos;return u.push(c(e,v,h.typeArguments.end-v)),!0}break;case 131:var y=l;if(y.modifiers){var v=y.modifiers.pos;return u.push(c(e,v,y.modifiers.end-v)),!0}if(y.questionToken)return u.push(a(y.questionToken)),!0;if(y.type)return u.push(a(y.type)),!0;2!==t.target&&(y.initializer||y.dotDotDotToken)&&u.push(a(y.initializer||y.dotDotDotToken,!0));break;case 134:return u.push(a(l)),!0;case 207:return u.push(a(l)),!0;case 163:var S=l;return u.push(a(S.type)),!0;case 228:return 2!==t.target&&u.push(a(l,!0)),!0;case 132:if(!t.experimentalDecorators){var _=a(l);_.messageText="Decorators is an experimental feature which must be enabled explicitly. Use a jsconfig.json file and the 'experimentalDecorators' switch.",_.category=n.DiagnosticCategory.Warning,u.push(_)}return!0}return n.forEachChild(l,r)}function i(t){if(t){var n=t.pos;return u.push(c(e,n,t.end-n)),!0}return!1}function o(e){return e?(u.push(a(e)),!0):!1}function s(e){return e&&e.forEach(function(e){switch(e.kind){case 108:case 106:case 107:case 115:return u.push(a(e)),!0;case 109:case 78:case 70:case 73:}}),!1}function a(e,t){return void 0===t&&(t=!1),c(e.getSourceFile(),e.getStart(),e.getEnd()-e.getStart(),t)}function c(e,t,r,i){return void 0===i&&(i=!1),{file:e,start:t,length:r,messageText:i?"This can only be used with ES6. Make sure to have a jsconfig.json file which sets the target to ES6.":"This can only be used in ts files.",category:n.DiagnosticCategory.Error,code:-1}}var u=[];return r(e),u}t.getSyntacticDiagnostics=s,t.getSemanticDiagnostics=a,t.getExtraDiagnostics=c;var f=Object.create(null);f[n.DiagnosticCategory.Error]=r["default"].Error,f[n.DiagnosticCategory.Warning]=r["default"].Warning,f[n.DiagnosticCategory.Message]=r["default"].Info,t.createDiagnosticClassifier=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/typescript/common/project/projectService",["require","exports","vs/base/common/arrays","vs/languages/typescript/common/typescript","vs/base/common/paths","vs/languages/typescript/common/lib/typescriptServices","vs/languages/typescript/common/project/snapshots","vs/languages/typescript/common/js/rewriting","vs/languages/typescript/common/js/textEdits","vs/languages/typescript/common/lineMap","vs/editor/common/core/position"],function(e,t,n,r,i,o,s,a,c,u,l){function p(){function e(e){i[e]=i[e]||o++}function t(e){return i[e]?(delete i[e],!0):void 0}function n(e){void 0===e&&(e=0);var t;for(var n in i)i[n]>=e&&(t?t.push(n):t=[n]);return{generation:o,fileNames:t}}function r(){var e=n(s);return s=e.generation,e.fileNames}var i=Object.create(null),o=0,s=0;return{addMissing:e,removeMissing:t,getMissingSince:n,getMissingSinceLastTime:r}}var f=function(){function e(){this._version=0}return e.prototype.update=function(e){return e!==this._value&&(this._value=e,this._lineMap=void 0,this._snap=void 0,this._version+=1),this},e.prototype.version=function(){return this._version},e.prototype.snap=function(){return this._snap||(this._snap=s.fromValue(this._value)),this._snap},e.prototype.lineMap=function(){return this._lineMap||(this._lineMap=u.create(this._value)),this._lineMap},e}();t.Script=f;var g=function(){function e(e,t){var n=this;this._missing=p(),this._scriptLookUp=function(e){var r=t(e);return r||n._missing.addMissing(e),r},this.setRoots(e),this.setCompilationSettings(o.getDefaultCompilerOptions())}return e.prototype.addRoot=function(e){return~this._roots.indexOf(e)?void 0:(this._roots.push(e),this._projectVersion=void 0,!0)},e.prototype.addRootIfMissing=function(e){return this._missing.removeMissing(e)?this.addRoot(e):void 0},e.prototype.removeRoot=function(e){var t=this._roots.indexOf(e);return~t&&this._roots.splice(t,1)?(this._projectVersion=void 0,!0):void 0},e.prototype.isRoot=function(e){return this._roots.indexOf(e)>=0},e.prototype.setRoots=function(e){this._roots=e,this._projectVersion=void 0},e.prototype.setCompilationSettings=function(e){this._projectVersion=void 0,this._compilerOptions=e||o.getDefaultCompilerOptions(),this._compilerOptions.allowNonTsExtensions=!0,this._compilerOptions.module=1,this._compilerOptions.target=e&&void 0!==e.target?e.target:2},e.prototype.getCompilationSettings=function(){return this._compilerOptions},e.prototype.getMissingFileNamesSinceLastTime=function(){return this._missing.getMissingSinceLastTime()},e.prototype.getScriptFileNames=function(){return this._roots},e.prototype.getScriptVersion=function(e){var t=this._scriptLookUp(e);return t&&t.version().toString()},e.prototype.getScriptSnapshot=function(e){var t=this._scriptLookUp(e);return t&&t.snap()},e.prototype.getScriptLineMap=function(e){var t=this._scriptLookUp(e);return t&&t.lineMap()},e.prototype.getCurrentDirectory=function(){return""},e.prototype.getDefaultLibFileName=function(e){return!e||e.noLib?"":2===e.target?r.defaultLibES6.toString():r.defaultLib.toString()},e}();t.LanguageServiceHost=g;var m=function(){function e(e,t,n,r){this.resource=t,this.host=new g(n.map(function(e){return e.toString()}),e.lookUpScript.bind(e)),this.host.setCompilationSettings(r),this.languageService=o.createLanguageService(this.host)}return e}(),d=function(){function e(){this._scripts=Object.create(null),this._projects=Object.create(null),this._rewrittenProjects=Object.create(null),this._virtualProject=this._projects[i.dirname(r.virtualProjectResource.fsPath)]=new m(this,r.virtualProjectResource,[],void 0)}return Object.defineProperty(e.prototype,"defaultRewriter",{set:function(e){this._defaultRewriter=e},enumerable:!0,configurable:!0}),e.prototype.getProject=function(e,t){void 0===t&&(t=this._defaultRewriter);var r=this._lookUpProject(e);if(n.isFalsyOrEmpty(t))return r;var i,o=r.resource.toString()+t.map(function(e){return e.name}).join();return i=this._rewrittenProjects[o]||new h(this,r,t),this._rewrittenProjects[o]=i},e.prototype._lookUpProject=function(e){for(var t=i.dirnames(e.fsPath),n=t.next();!n.done;){var r=n.value;if(this._projects[r]&&this._projects[r].host.isRoot(e.toString()))return this._projects[r];n=t.next()}return this._virtualProject.host.addRoot(e.toString()),this._virtualProject},e.prototype.projects=function(){var e=[];for(var t in this._projects)e.push(this._projects[t]);return e},e.prototype.lookUpScript=function(e){var t=this._scripts[e];return t},Object.defineProperty(e.prototype,"version",{get:function(){return Object.keys(this._scripts).join("")},enumerable:!0,configurable:!0}),e.prototype.scriptsNames=function(){return Object.keys(this._scripts)},e.prototype._forEachProject=function(e){for(var t in this._projects)e(this._projects[t]);for(var t in this._rewrittenProjects)e(this._rewrittenProjects[t]);e(this._virtualProject)},e.prototype.getMissingScriptNamesSinceLastTime=function(){var e=Object.create(null);return this._forEachProject(function(t){var n=t.host.getMissingFileNamesSinceLastTime();if(n)for(var r=0;r<n.length;r++){var i=n[r];e[i]=0}}),Object.keys(e)},e.prototype.getTotalLength=function(){var e=0;for(var t in this._scripts)e+=this._scripts[t].snap().getLength();return e},e.prototype._removeRewrittenProject=function(e){for(var t in this._rewrittenProjects)this._rewrittenProjects[t].resource.toString()===e.toString()&&delete this._rewrittenProjects[t]},e.prototype._syncProject=function(e,t,n,o){var s=i.dirname(t.fsPath);if(e===r.ChangeKind.Added||e===r.ChangeKind.Changed){if(e===r.ChangeKind.Changed?(this._projects[s].host.setCompilationSettings(o),this._projects[s].host.setRoots(n.map(function(e){return e.toString()}))):this._projects[s]=new m(this,t,n,o),this._removeRewrittenProject(t),t.toString()!==this._virtualProject.resource.toString())for(var a=0;a<n.length;a++)t=n[a],this._virtualProject.host.removeRoot(t.toString())}else if(e===r.ChangeKind.Removed){var c=this._projects[s];c&&(delete this._projects[s],this._removeRewrittenProject(c.resource))}},e.prototype._syncFile=function(e,t,n){var i=t.toString();if(e===r.ChangeKind.Removed)delete this._scripts[i];else if(e===r.ChangeKind.Changed){var o=this._scripts[i]||new f;this._scripts[i]=o.update(n)}else e===r.ChangeKind.Added&&(this._scripts[i]=(new f).update(n),this._forEachProject(function(e){return e.host.addRootIfMissing(i)}))},e}();t.ProjectService=d;var h=function(){function e(e,t,n){var r=new y(t.host.getScriptFileNames(),e.lookUpScript.bind(e),t.languageService.getSourceFile.bind(t.languageService),n);this.resource=t.resource,this.translations=r,this.host=r,this.host.setCompilationSettings(t.host.getCompilationSettings()),this.languageService=o.createLanguageService(this.host)}return e}(),v=function(){function e(e,t,n){this._textOperationResult=e,this._lineMapModified=u.create(t.getText(0,t.getLength())),this._lineMapOriginal=u.create(n.getText(0,n.getLength()))}return e.prototype.to=function(e){if(l.Position.isIPosition(e))return this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,e,c.TranslationBehaviour.None);var t=e,n=this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,{lineNumber:t.startLineNumber,column:t.startColumn},c.TranslationBehaviour.None),r=this._doTranslate(this._textOperationResult.doEdits,this._lineMapOriginal,this._lineMapModified,{lineNumber:t.endLineNumber,column:t.endColumn},c.TranslationBehaviour.None);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:r.lineNumber,endColumn:r.column}},e.prototype.from=function(e){if(l.Position.isIPosition(e))return this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,e,c.TranslationBehaviour.None);var t=e,n=this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,{lineNumber:t.startLineNumber,column:t.startColumn},c.TranslationBehaviour.StickLeft),r=this._doTranslate(this._textOperationResult.undoEdits,this._lineMapModified,this._lineMapOriginal,{lineNumber:t.endLineNumber,column:t.endColumn},c.TranslationBehaviour.StickRight);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:r.lineNumber,endColumn:r.column}},e.prototype._doTranslate=function(e,t,n,r,i){var o=t.getOffset(r),s=c.translate(e,o,i);return n.getPositionFromOffset(s)},e.prototype.info=function(e){var t,n=this._lineMapModified.getOffset(l.Position.startPosition(e)),r=this._lineMapModified.getOffset(l.Position.endPosition(e));t=new c.TextSpan(n,r-n);for(var i,o=this._textOperationResult.undoEdits,s=!1,a=!1,u=0,p=o.length;p>u&&!s&&!a;u++)o[u].contains(t)&&(s=!0),o[u].overlaps(t)&&(a=!0);return{origin:i,isInserted:s,isOverlapping:a}},e}(),y=function(e){function t(t,n,r,i){e.call(this,t,n),this._rewrittenSnapshots=Object.create(null),this._sourceFileLookUp=r,this._syntaxRewriter=i}return __extends(t,e),t.prototype.getTranslator=function(e){var t=e.toString(),n=this._getOrCreateRewrittenSnapshot(t);return n&&n.translator||a.IdentityTranslator.Instance},t.prototype.getOriginal=function(t){return e.prototype.getScriptSnapshot.call(this,t.toString())},t.prototype.getScriptSnapshot=function(t){var n=this._getOrCreateRewrittenSnapshot(t);return n&&n.script.snap()||e.prototype.getScriptSnapshot.call(this,t)},t.prototype.getScriptLineMap=function(t){var n=this._getOrCreateRewrittenSnapshot(t);return n&&n.script.lineMap()||e.prototype.getScriptLineMap.call(this,t)},t.prototype._getOrCreateRewrittenSnapshot=function(t){if(".ts"===i.extname(t))return null;if(!e.prototype.getScriptSnapshot.call(this,t))return null;var n=this.getScriptVersion(t),r=this._rewrittenSnapshots[t];if(!r||r.versionId!==n){var o=e.prototype.getScriptSnapshot.call(this,t),s=a.translate(this._syntaxRewriter,o,this._sourceFileLookUp.bind(this,t)),c=(new f).update(s.value);r={script:c,versionId:this.getScriptVersion(t),translator:new v(s,c.snap(),o)},this._rewrittenSnapshots[t]=r}return r},t}(g)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/typescript/common/typescriptWorker2",["require","exports","vs/base/common/winjs.base","vs/base/common/paths","vs/base/common/uri","vs/base/common/lifecycle","vs/editor/common/modes/abstractModeWorker","vs/base/common/objects","vs/languages/typescript/common/options","vs/languages/typescript/common/typescript","vs/editor/common/modes/supports","vs/languages/typescript/common/project/projectService","vs/languages/typescript/common/features/format","vs/languages/typescript/common/features/logicalSelection","vs/languages/typescript/common/features/extraInfo","vs/languages/typescript/common/features/outline","vs/languages/typescript/common/features/occurrences","vs/languages/typescript/common/features/definitions","vs/languages/typescript/common/features/references","vs/languages/typescript/common/features/parameterHints","vs/languages/typescript/common/features/suggestions","vs/languages/typescript/common/features/quickFix","vs/languages/typescript/common/features/diagnostics","vs/languages/typescript/common/features/emitting","vs/languages/typescript/common/features/rename","vs/editor/common/services/resourceService","vs/platform/markers/common/markers"],function(e,t,n,r,i,o,s,a,c,u,l,p,f,g,m,d,h,v,y,S,_,b,k,E,O,x,j){var w=function(e){function t(t,n,r,i){var o=this;e.call(this,t,n,r,i),this._modelListener=Object.create(null),this._disposables=[],this._projectService=new p.ProjectService,this._disposables.push(this.resourceService.addListener2_(x.ResourceEvents.ADDED,this._onResourceAdded.bind(this))),this._disposables.push(this.resourceService.addListener2_(x.ResourceEvents.REMOVED,this._onResourceRemoved.bind(this))),this.resourceService.all().forEach(function(e){return o._onResourceAdded({url:e.getAssociatedResource(),addedElement:e})})}return __extends(t,e),t.prototype.dispose=function(){for(var e in this._modelListener)this._modelListener[e](),delete this._modelListener[e];this._disposables=o.disposeAll(this._disposables)},t.prototype._isInterestingModel=function(e){return/\.(ts|js)$/.test(e.getAssociatedResource().fsPath)||e.getMode()===this._getMode()},t.prototype._onResourceAdded=function(e){var t=this;if(this._isInterestingModel(e.addedElement)){var n,r,i=e.addedElement,o=e.url;r=function(){return t._projectService._syncFile(u.ChangeKind.Changed,o,i.getValue())},n=i.addListener("changed",function(){return r()}),this._modelListener[o.toString()]=n,r()}},t.prototype._onResourceRemoved=function(e){var t=e.url,n=this._modelListener[t.toString()];n&&(delete this._modelListener[t.toString()],n(),"file"!==t.scheme&&this._projectService._syncFile(u.ChangeKind.Removed,t,void 0))},t.prototype.canAcceptFileChanges=function(e){var t=this._projectService.getTotalLength()+e;return 36700160>t},t.prototype.acceptFileChanges=function(e){for(var t=0,n=e.length;n>t;t++)this.resourceService.get(e[t].resource)||this._projectService._syncFile(e[t].kind,e[t].resource,e[t].content);return!0},t.prototype.acceptProjectChanges=function(e){for(var t=0,n=e.length;n>t;t++)this._projectService._syncProject(e[t].kind,e[t].resource,e[t].files,e[t].options);this._validationHelper.triggerDueToConfigurationChange();var i=Object.create(null);return this._projectService.projects().forEach(function(e){return i[r.dirname(e.resource.fsPath)]=e.resource}),i},t.prototype._doConfigure=function(e,t){void 0===t&&(t=c.typeScriptOptions),e&&Array.isArray(e.validate)&&delete e.validate;var r=c.withDefaultOptions(e,t);return a.equals(r,this._options)?void 0:(this._options=r,n.TPromise.as(!0))},t.prototype._createInPlaceReplaceSupport=function(){return new l.WorkerInplaceReplaceSupport(this.resourceService,this)},t.prototype.doValidate=function(e){var t=this._projectService.getProject(e),n=[];n.push.apply(n,k.getSyntacticDiagnostics(t.languageService,e,t.host.getCompilationSettings(),this._options,"javascript"===this.resourceService.get(e).getMode().getId())),n.push.apply(n,k.getExtraDiagnostics(t.languageService,e,this._options)),this.markerService.changeOne("/"+this._getMode().getId()+"/syntactic",e,n)},t.prototype.doValidateSemantics=function(e){var t=this._projectService.getProject(e),n=k.getSemanticDiagnostics(t.languageService,e,this._options);return n?(this.markerService.changeOne("/"+this._getMode().getId()+"/semantic",e,n.markers),n.hasMissingFiles):void 0},t.prototype.getMissingFiles=function(){var e=this._projectService.getMissingScriptNamesSinceLastTime();return e&&e.map(i["default"].parse)},t.prototype._getContextForValidationParticipants=function(e){return null},t.prototype.doSuggest=function(e,t){var r=this._projectService.getProject(e),i=_.computeSuggestions(r.languageService,e,t,this._options);return n.TPromise.as(i)},t.prototype._getSuggestContext=function(e){return n.TPromise.as(this._projectService)},t.prototype.getSuggestionDetails=function(e,t,r){var i=this._projectService.getProject(e),o=_.getSuggestionDetails(i.languageService,e,t,r,this._options);return n.TPromise.as(o)},t.prototype.runQuickFixAction=function(e,t,r){var i=this._projectService.getProject(e),o=b.evaluate(i.languageService,e,t,r);return n.TPromise.as(o)},t.prototype.getQuickFixes=function(e,t){var r=this._projectService.getProject(e),i=b.compute(r.languageService,e,t);return n.TPromise.as(i)},t.prototype.getEmitOutput=function(e,t){var r=this._projectService.getProject(e),i=E.getEmitOutput(r.languageService,e,t);return n.TPromise.as(i)},t.prototype.getParameterHints=function(e,t){var r=this._projectService.getProject(e),i=S.compute(r.languageService,e,t);return n.TPromise.as(i)},t.prototype.findDeclaration=function(e,t){return this._findTypeScriptDeclaration(e,t)},t.prototype._findTypeScriptDeclaration=function(e,t){var r=this._projectService.getProject(e),i=v.findDeclaration(r,e,t);return n.TPromise.as(i)},t.prototype.textReplace=function(e,t){var n=[["true","false"],["string","number","boolean","void","any"],["private","public"]];return l.ReplaceSupport.valueSetsReplace(n,e,t)},t.prototype.findReferences=function(e,t,r){var i=this._projectService.getProject(e),o=y.find(i,e,t,r);return n.TPromise.as(o)},t.prototype.computeInfo=function(e,t){var r=this._projectService.getProject(e),i=m.compute(r.languageService,e,t);return n.TPromise.as(i)},t.prototype.findOccurrences=function(e,t,r){var i=this._projectService.getProject(e),o=h.compute(i.languageService,e,t,r);return n.TPromise.as(o)},t.prototype.getOutline=function(e){var t=this._projectService.getProject(e);return d.compute(t.languageService,e)},t.prototype.formatDocument=function(e,t){var n=this._projectService.getProject(e);return f.formatDocument(n.languageService,e,t)},t.prototype.formatRange=function(e,t,n){var r=this._projectService.getProject(e);return f.formatRange(r.languageService,e,t,n)},t.prototype.formatAfterKeystroke=function(e,t,n,r){var i=this._projectService.getProject(e);return f.formatAfterKeystroke(i.languageService,e,t,n,r)},t.prototype.getRangesToPosition=function(e,t){var n=this._projectService.getProject(e);return g.compute(n.languageService,e,t)},t.prototype.rename=function(e,t,r){var i=this._projectService.getProject(e),o=O(i,e,t,r);return n.TPromise.as(o)},t=__decorate([__param(2,x.IResourceService),__param(3,j.IMarkerService)],t)}(s.AbstractModeWorker);t.TypeScriptWorker2=w});