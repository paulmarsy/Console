define("vs/languages/html/common/htmlTags",["require","exports","vs/base/common/strings","vs/base/common/arrays"],function(e,t,n,o){function r(e){return-1!==o.binarySearch(s,e,function(e,t){return e.localeCompare(t)})}function a(){var e=[],t={html:["manifest"],head:e,title:e,noscript:e,section:e,nav:e,article:e,aside:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,hgroup:e,header:e,footer:e,address:e,p:e,hr:e,pre:e,blockquote:["cite"],ol:["reversed:v","start"],ul:e,li:["value"],dl:e,dt:e,dd:e,figure:e,figcaption:e,div:e,a:["href","target","ping","rel","media","hreflang","type"],em:e,strong:e,small:e,s:e,cite:e,q:["cite"],dfn:e,abbr:e,data:["value"],time:["datetime","pubdate"],code:e,"var":e,samp:e,kbd:e,sub:e,sup:e,i:e,b:e,u:e,mark:e,ruby:e,rt:e,rp:e,bdi:e,bdo:e,span:e,br:e,wbr:e,ins:["cite","datetime"],del:["cite","datetime"],img:["alt","src","srcset","crossorigin:xo","usemap","ismap:v","width","height"],iframe:["src","srcdoc","name","sandbox","seamless","width","height"],embed:["src","type","width","height"],object:["data","type","typemustmatch:v","name","usemap","form","width","height"],param:["name","value"],video:["src","crossorigin:xo","poster","preload","autoplay:v","mediagroup","loop:v","muted:v","controls:v","width","height"],audio:["src","crossorigin:xo","preload","autoplay:v","mediagroup","loop:v","muted:v","controls:v"],source:["src","type","media"],track:["default:v","kind","label","src","srclang"],canvas:["width","height"],map:["name"],area:["alt","coords","shape","href","target","ping","rel","media","hreflang","type"],base:["href","target"],link:["href","rel","media","hreflang","type","sizes"],meta:["name","http-equiv","content","charset"],style:["media","type","scoped:v"],script:["src","async:v","defer:v","type","charset"],body:["onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onscroll","onstorage","onunload"],table:e,caption:e,colgroup:["span"],col:["span"],tbody:e,thead:e,tfoot:e,tr:e,td:["colspan","rowspan","headers"],th:["colspan","rowspan","headers","scope","abbr"],form:["accept-charset","action","autocomplete:o","enctype","method:m","name","novalidate:v","target"],fieldset:["disabled:v","form","name"],legend:e,label:["form","for"],input:["accept","alt","autocomplete:o","autofocus:v","checked:v","dirname","disabled:v","form","formaction","formenctype","formmethod:m","formnovalidate:v","formtarget","height","inputmode","list","max","maxlength","min","multiple:v","name","pattern","placeholder","readonly:v","required","size","src","step","type:t","value","width"],button:["autofocus:v","disabled:v","form","formaction","formenctype","formmethod:m","formnovalidate:v","formtarget","name","type:bt","value"],select:["autofocus:v","disabled:v","form","multiple:v","name","required:v","size"],datalist:["option"],optgroup:["disabled:v","label"],option:["disabled:v","label","selected:v","value"],textarea:["autocomplete:o","autofocus:v","cols","dirname","disabled:v","form","inputmode","maxlength","name","placeholder","readonly:v","required:v","rows","wrap"],keygen:["autofocus:v","challenge","disabled:v","form","keytype","name"],output:["for","form","name"],progress:["value","max"],meter:["value","min","max","low","high","optimum"],details:["open:v"],summary:e,command:["type","label","icon","disabled:v","checked:v","radiogroup","command"],menu:["type","label"],dialog:["open:v"]},o=["accesskey","class","contenteditable:b","contextmenu","dir:d","draggable:a","dropzone","hidden:v","id","inert:v","itemid","itemprop","itemref","itemscope:v","itemtype","lang","role","spellcheck:b","style","tabindex","title","translate"],r=["onabort","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformchange","onforminput","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onreadystatechange","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"],a={b:["true","false"],a:["true","false","auto"],d:["ltr","rtl"],m:["get","post"],o:["on","off"],t:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],bt:["button","submit","reset"],xo:["anonymous","use-credentials"]};return{collectTags:function(e){for(var n in t)e(n)},collectAttributes:function(e,n){if(o.forEach(function(e){var t=e.split(":");n(t[0],t[1])}),r.forEach(function(e){n(e,"event")}),e){var a=t[e];a&&a.forEach(function(e){var t=e.split(":");n(t[0],t[1])})}},collectValues:function(e,r,i){var s=r+":",l=function(e){e.forEach(function(e){if(e.length>s.length&&n.startsWith(e,s)){var t=e.substr(s.length);if("v"===t)i(r);else{var o=a[t];o&&o.forEach(i)}}})},c=t[e];c&&l(c),l(o)}}}function i(){var e={input:["ng-model","ng-required","ng-minlength","ng-maxlength","ng-pattern","ng-trim"],select:["ng-model"],textarea:["ng-model","ng-required","ng-minlength","ng-maxlength","ng-pattern","ng-trim"]},t=["ng-app","ng-bind","ng-bindhtml","ng-bindtemplate","ng-blur","ng-change","ng-checked","ng-class","ng-classeven","ng-classodd","ng-click","ng-cloak","ng-controller","ng-copy","ng-csp","ng-cut","ng-dblclick","ng-disabled","ng-focus","ng-form","ng-hide","ng-href","ng-if","ng-include","ng-init","ng-jq","ng-keydown","ng-keypress","ng-keyup","ng-list","ng-modelOptions","ng-mousedown","ng-mouseenter","ng-mouseleave","ng-mousemove","ng-mouseover","ng-mouseup","ng-nonbindable","ng-open","ng-options","ng-paste","ng-pluralize","ng-readonly","ng-repeat","ng-selected","ng-show","ng-src","ng-srcset","ng-style","ng-submit","ng-switch","ng-transclude","ng-value"];return{collectTags:function(e){},collectAttributes:function(n,o){if(n){var r=e[n];r&&r.forEach(function(e){o(e,null),o("data-"+e,null)})}t.forEach(function(e){o(e,null),o("data-"+e,null)})},collectValues:function(e,t,n){}}}var s=["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"];t.isEmptyElement=r,t.getHTML5TagProvider=a,t.getAngularTagProvider=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/html/common/htmlWorker",["require","exports","vs/base/common/winjs.base","vs/editor/common/modes/abstractModeWorker","vs/languages/lib/common/beautify-html","vs/languages/html/common/htmlTags","vs/base/common/network","vs/base/common/strings","vs/editor/common/core/range"],function(e,t,n,o,r,a,i,s,l){function c(e,t){var n=t.column-1,o=t.lineNumber,r=e.getLineTokens(o),a=e.getLineContent(o),i=r.findIndexOfOffset(n),l=r.getTokenCount(),c=r.getTokenType(i),u=r.getTokenStartIndex(i),g=r.getTokenEndIndex(i,a.length);return""!==c&&!s.startsWith(c,"delimiter")||u!==n||(i--,i>=0?(c=r.getTokenType(i),u=r.getTokenStartIndex(i),g=r.getTokenEndIndex(i,a.length)):(c="",u=g=0)),{getTokenType:function(){return c},isTagToken:function(){return s.startsWith(c,d)},isAtTokenEnd:function(){return n===g},isAtTokenStart:function(){return n===u},getTokenContent:function(){return a.substring(u,g)},isOpenBrace:function(){return g>u&&"<"===a.charAt(u)},getTokenPosition:function(){return{lineNumber:o,column:u+1}},getTokenRange:function(){return{startLineNumber:o,startColumn:u+1,endLineNumber:o,endColumn:g+1}},getModel:function(){return e},scanBack:function(){if(0>=o)return!1;i--;do{for(;i>=0;){if(c=r.getTokenType(i),u=r.getTokenStartIndex(i),g=r.getTokenEndIndex(i,a.length),s.startsWith(c,"delimiter")||s.startsWith(c,"tag")||s.startsWith(c,"attribute"))return!0;i--}o--,o>0&&(r=e.getLineTokens(o),a=e.getLineContent(o),l=r.getTokenCount(),i=l-1)}while(o>0);return r=null,c=a="",u=g=l=0,!1},scanForward:function(){if(o>e.getLineCount())return!1;i++;do{for(;l>i;){if(c=r.getTokenType(i),u=r.getTokenStartIndex(i),g=r.getTokenEndIndex(i,a.length),s.startsWith(c,"delimiter")||s.startsWith(c,"tag")||s.startsWith(c,"attribute"))return!0;i++}o++,i=0,o<=e.getLineCount()&&(r=e.getLineTokens(o),a=e.getLineContent(o),l=r.getTokenCount())}while(o<=e.getLineCount());return c=a="",u=g=l=0,!1}}}function u(e){return/^\s*$/.test(e)}var g;!function(e){e[e.LOOKING_FOR_HREF_OR_SRC=1]="LOOKING_FOR_HREF_OR_SRC",e[e.AFTER_HREF_OR_SRC=2]="AFTER_HREF_OR_SRC"}(g||(g={}));var d="tag.html.tag-",m=function(e){function t(t,n,o){e.call(this,t,n,o),this._contextService=t.contextService,this._tagProviders=[],this._tagProviders.push(a.getHTML5TagProvider()),this.addCustomTagProviders(this._tagProviders)}return __extends(t,e),t.prototype.addCustomTagProviders=function(e){e.push(a.getAngularTagProvider())},t.prototype.format=function(e,t,o){var a=this.resourceService.get(e),i=t?a.getValueInRange(t):a.getValue(),s=r.html_beautify(i,{indent_size:o.insertSpaces?o.tabSize:1,indent_char:o.insertSpaces?" ":"	",wrap_line_length:120});return n.TPromise.as([{range:t,text:s}])},t.prototype.findMatchingOpenTag=function(e){for(var t={},n=!1;e.scanBack();)if(e.isTagToken()&&!n){var o=e.getTokenContent();if(e.scanBack(),"delimiter.end.html"===e.getTokenType())t[o]=(t[o]||0)+1;else if(!a.isEmptyElement(o)){if(!t[o])return o;t[o]--}}else"delimiter.start.html"===e.getTokenType()&&(n="/>"===e.getTokenContent());return null},t.prototype.collectTagSuggestions=function(e,t,n){var o=this,r=e.getModel(),a=r.getLineContent(t.lineNumber).substr(t.column-1),i=u(a)||s.startsWith(a,"<")?">":"",l=function(a){var s=e.getTokenPosition(),l=o.findMatchingOpenTag(e);if(l){var c={label:"/"+l,codeSnippet:"/"+l+i,type:"property"};if(n.suggestions.push(c),a){var g=e.getTokenPosition();if(s.lineNumber!==g.lineNumber){var d=r.getLineContent(g.lineNumber).substring(0,g.column-1),m=r.getLineContent(s.lineNumber).substring(0,s.column-1);u(d)&&u(m)&&(n.overwriteBefore=t.column-1,c.codeSnippet=d+"</"+l+i)}}return!0}return!1};if("delimiter.end.html"===e.getTokenType()){n.overwriteBefore=n.currentWord.length+1;var c=l(!0);c||(n.overwriteBefore=n.currentWord.length+1,this._tagProviders.forEach(function(e){e.collectTags(function(e){n.suggestions.push({label:"/"+e,codeSnippet:"/"+e+i,type:"property"})})}))}else l(!1),this._tagProviders.forEach(function(e){e.collectTags(function(e){n.suggestions.push({label:e,codeSnippet:e,type:"property"})})})},t.prototype.collectContentSuggestions=function(e){},t.prototype.collectAttributeSuggestions=function(e,t){var n=null;do{if(e.isTagToken()){n=e.getTokenContent();break}if("delimiter.start.html"===e.getTokenType())break}while(e.scanBack());this._tagProviders.forEach(function(e){e.collectAttributes(n,function(e,n){var o=e;"v"!==n&&(o+='="{{}}"'),t.suggestions.push({label:e,codeSnippet:o,type:"handler"===n?"function":"value"})})})},t.prototype.collectAttributeValueSuggestions=function(e,t){for(var n="delimiter.assign.html"===e.getTokenType(),o=null,r=null;e.scanBack();)if("attribute.name.html"===e.getTokenType()){o=e.getTokenContent();break}for(;e.scanBack();){if(e.isTagToken()){r=e.getTokenContent();break}if("delimiter.start.html"===e.getTokenType())return}this._tagProviders.forEach(function(e){e.collectValues(r,o,function(e){t.suggestions.push({label:e,codeSnippet:n?'"'+e+'"':e,type:"unit"})})})},t.prototype.doSuggest=function(e,t){var o=this.resourceService.get(e),r=o.getWordUntilPosition(t).word,a={currentWord:r,suggestions:[]},i=c(o,t);switch(i.getTokenType()){case"delimiter.start.html":case"delimiter.end.html":i.isOpenBrace()?this.collectTagSuggestions(i,t,a):this.collectContentSuggestions(a);break;case"attribute.name.html":this.collectAttributeSuggestions(i,a);break;case"attribute.value.html":this.collectAttributeValueSuggestions(i,a);break;case"delimiter.assign.html":i.isAtTokenEnd()&&this.collectAttributeValueSuggestions(i,a);break;case"":if(u(i.getTokenContent())&&i.scanBack())switch(i.getTokenType()){case"attribute.value.html":case"attribute.name.html":this.collectAttributeSuggestions(i,a);break;case"delimiter.assign.html":this.collectAttributeValueSuggestions(i,a);break;case"delimiter.start.html":case"delimiter.end.html":i.isOpenBrace()?this.collectTagSuggestions(i,t,a):this.collectContentSuggestions(a);break;default:i.isTagToken()&&this.collectAttributeSuggestions(i,a)}else this.collectContentSuggestions(a);break;default:i.isTagToken()&&(i.scanBack(),this.collectTagSuggestions(i,t,a))}return n.Promise.as(a)},t.prototype.findMatchingBracket=function(e,t){if(a.isEmptyElement(e))return null;var n=0;if(t.scanBack(),"delimiter.end.html"===t.getTokenType())for(var o=!1;t.scanBack();)if(t.isTagToken()&&t.getTokenContent()===e&&!o){var r=t.getTokenRange();if(t.scanBack(),"delimiter.start.html"===t.getTokenType()){if(0===n)return r;n--}else n++}else"delimiter.start.html"===t.getTokenType()&&(o="/>"===t.getTokenContent());else for(var i=!1;t.scanForward();)if(t.isTagToken()&&t.getTokenContent()===e)if(i){if(n--,0>=n)return t.getTokenRange()}else if(t.scanForward(),"delimiter.start.html"===t.getTokenType()&&"/>"===t.getTokenContent()){if(0>=n)return null}else n++;else"delimiter.start.html"===t.getTokenType()?i=!1:"delimiter.end.html"===t.getTokenType()&&(i=!0);return null},t.prototype.findOccurrences=function(e,t,o){var r=this.resourceService.get(e),a=r.getWordAtPosition(t),i=a?a.word:"",s=[],l=c(r,t);if(l.isTagToken()){var u=l.getTokenContent();s.push({range:l.getTokenRange()});var g=this.findMatchingBracket(u,l);g&&s.push({range:g})}else for(var d=r.getAllWordsWithRange(),m=Math.min(1e3,d.length),p=0;m>p;p++)d[p].text===i&&s.push({range:d[p].range});return n.TPromise.as(s)},t._stripQuotes=function(e){return e.replace(/^'([^']+)'$/,function(e,t){return t}).replace(/^"([^"]+)"$/,function(e,t){return t})},t._getWorkspaceUrl=function(e,n,o){if(o=t._stripQuotes(o),/^\s*javascript\:/i.test(o)||/^\s*\#/i.test(o))return null;if(/^\s*https?:\/\//i.test(o)||/^\s*file:\/\//i.test(o))return o.replace(/^\s*/g,"");if(/^\s*\/\//i.test(o)){var r=e.getScheme(),a="http";return r===i.schemas.https&&(a=i.schemas.https),a+":"+o.replace(/^\s*/g,"")}try{var l=e.combine(o).toString()}catch(c){return null}if(n&&e.startsWith(n)){var u=n.toString(),g=s.commonPrefixLength(u,l);return s.endsWith(u,"/")&&(g=l.lastIndexOf("/",g)+1),u+l.substr(g)}return l},t.prototype.createLink=function(e,n,o,r,a,i){var s=t._getWorkspaceUrl(e,n,o);return s?{range:{startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:i},url:s}:null},t.prototype._computeHTMLLinks=function(e){var t,n,o,r,a,s,l,c,u,d,m=e.getLineCount(),p=[],h=g.LOOKING_FOR_HREF_OR_SRC,f=e.getAssociatedResource(),v=null,b=this._contextService.getWorkspace();if(b){var k=String(b.resource);v="/"===k.charAt(k.length-1)?new i.URL(k):new i.URL(k+"/")}for(t=1;m>=t;t++)for(n=e.getLineContent(t),o=n.length,r=e.getLineTokens(t),l=0,s=r.getTokenCount();s>l;l++)switch(a=r.getTokenType(l)){case"delimiter.assign.html":case"":break;case"attribute.name.html":h===g.LOOKING_FOR_HREF_OR_SRC&&(c=r.getTokenEndIndex(l,o),u=n.substring(r.getTokenStartIndex(l),c).toLowerCase(),("src"===u||"href"===u)&&(h=g.AFTER_HREF_OR_SRC));break;case"attribute.value.html":h===g.AFTER_HREF_OR_SRC&&(c=r.getTokenEndIndex(l,o),u=n.substring(r.getTokenStartIndex(l),c),d=this.createLink(f,v,u,t,r.getTokenStartIndex(l)+2,c),d&&p.push(d),h=g.LOOKING_FOR_HREF_OR_SRC);default:0===a.indexOf("tag.html")?h=g.LOOKING_FOR_HREF_OR_SRC:h===g.AFTER_HREF_OR_SRC&&(h=g.LOOKING_FOR_HREF_OR_SRC)}return p},t.prototype.computeLinks=function(t){var n=this;return e.prototype.computeLinks.call(this,t).then(function(e){var o,r,a,i,s,c,u,g=n.resourceService.get(t),d=n._computeHTMLLinks(g),m=[];for(o=0,a=0,r=e.length,i=d.length;r>o&&i>a;)s=e[o],c=d[a],l.Range.areIntersectingOrTouching(s.range,c.range)?o++:(u=l.Range.compareRangesUsingStarts(s.range,c.range),0>u?(m.push(s),o++):(m.push(c),a++));for(;r>o;o++)m.push(e[o]);for(;i>a;a++)m.push(d[a]);return m})},t}(o.AbstractModeWorker);t.HTMLWorker=m});