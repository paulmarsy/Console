"use strict";var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/handlebars/common/handlebars",["require","exports","vs/editor/common/modes","vs/editor/common/modes/supports","vs/languages/html/common/html","vs/editor/common/modes/supports/onEnter"],function(e,t,n,r,s,a){!function(e){e[e.HTML=0]="HTML",e[e.Expression=1]="Expression",e[e.UnescapedExpression=2]="UnescapedExpression"}(t.States||(t.States={}));var i=t.States,o=function(e){function t(t,n,r,s,a,i,o,p){e.call(this,t,n,s,a,i,o,p),this.kind=n,this.handlebarsKind=r,this.lastTagName=s,this.lastAttributeName=a,this.embeddedContentType=i,this.attributeValueQuote=o,this.attributeValue=p}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.kind,this.handlebarsKind,this.lastTagName,this.lastAttributeName,this.embeddedContentType,this.attributeValueQuote,this.attributeValue)},t.prototype.equals=function(n){return n instanceof t?e.prototype.equals.call(this,n):!1},t.prototype.tokenize=function(t){switch(this.handlebarsKind){case i.HTML:if(t.advanceIfString("{{{").length>0)return this.handlebarsKind=i.UnescapedExpression,{type:"delimiter.expression.unescaped.handlebars",bracket:n.Bracket.Open};if(t.advanceIfString("{{").length>0)return this.handlebarsKind=i.Expression,{type:"delimiter.expression.handlebars",bracket:n.Bracket.Open};break;case i.Expression:case i.UnescapedExpression:if(this.handlebarsKind===i.Expression&&t.advanceIfString("}}").length>0)return this.handlebarsKind=i.HTML,{type:"delimiter.expression.handlebars",bracket:n.Bracket.Close};if(this.handlebarsKind===i.UnescapedExpression&&t.advanceIfString("}}}").length>0)return this.handlebarsKind=i.HTML,{type:"delimiter.expression.unescaped.handlebars",bracket:n.Bracket.Close};if(t.skipWhitespace().length>0)return{type:""};if("#"===t.peek())return t.advanceWhile(/^[^\s}]/),{type:"keyword.helper.handlebars",bracket:n.Bracket.Open};if("/"===t.peek())return t.advanceWhile(/^[^\s}]/),{type:"keyword.helper.handlebars",bracket:n.Bracket.Close};if(t.advanceIfString("else")){var r=t.peek();if(" "===r||"	"===r||"}"===r)return{type:"keyword.helper.handlebars"};t.goBack(4)}if(t.advanceWhile(/^[^\s}]/).length>0)return{type:"variable.identifier.handlebars"}}return e.prototype.tokenize.call(this,t)},t}(s.State);t.HandlebarsState=o;var p=function(e){function t(t,n,r){e.call(this,t,n,r),this.formattingSupport=null,this.onEnterSupport=new a.OnEnterSupport(this.getId(),{brackets:[{open:"<!--",close:"-->"},{open:"{{",close:"}}"}]})}return __extends(t,e),t.prototype.asyncCtor=function(){var t=this;return e.prototype.asyncCtor.call(this).then(function(){var e=t.characterPairSupport.getAutoClosingPairs().slice(0).concat([{open:"{",close:"}"}]);t.characterPairSupport=new r.CharacterPairSupport(t,{autoClosingPairs:e.slice(0),surroundingPairs:[{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"}]})})},t.prototype.getInitialState=function(){return new o(this,s.States.Content,i.HTML,"","","","","")},t.prototype.getLeavingNestedModeData=function(t,n){var r=e.prototype.getLeavingNestedModeData.call(this,t,n);return r&&(r.stateAfterNestedMode=new o(this,s.States.Content,i.HTML,"","","","","")),r},t}(s.HTMLMode);t.HandlebarsMode=p});