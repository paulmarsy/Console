/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/languages/handlebars/common/handlebarsTokenTypes",["require","exports"],function(e,t){t.EMBED="punctuation.expression.unescaped.handlebars",t.EMBED_UNESCAPED="punctuation.expression.handlebars",t.KEYWORD="keyword.helper.handlebars",t.VARIABLE="variable.parameter.handlebars"});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/handlebars/common/handlebars",["require","exports","vs/editor/common/modes","vs/editor/common/modes/supports","vs/languages/html/common/html","vs/editor/common/modes/supports/onEnter","vs/languages/handlebars/common/handlebarsTokenTypes","vs/platform/instantiation/common/instantiation","vs/platform/thread/common/thread","vs/editor/common/services/modeService"],function(e,t,n,r,a,s,o,i,c,p){!function(e){e[e.HTML=0]="HTML",e[e.Expression=1]="Expression",e[e.UnescapedExpression=2]="UnescapedExpression"}(t.States||(t.States={}));var u=t.States,d=function(e){function t(t,n,r,a,s,o,i,c){e.call(this,t,n,a,s,o,i,c),this.kind=n,this.handlebarsKind=r,this.lastTagName=a,this.lastAttributeName=s,this.embeddedContentType=o,this.attributeValueQuote=i,this.attributeValue=c}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.kind,this.handlebarsKind,this.lastTagName,this.lastAttributeName,this.embeddedContentType,this.attributeValueQuote,this.attributeValue)},t.prototype.equals=function(n){return n instanceof t?e.prototype.equals.call(this,n):!1},t.prototype.tokenize=function(t){switch(this.handlebarsKind){case u.HTML:if(t.advanceIfString("{{{").length>0)return this.handlebarsKind=u.UnescapedExpression,{type:o.EMBED_UNESCAPED,bracket:n.Bracket.Open};if(t.advanceIfString("{{").length>0)return this.handlebarsKind=u.Expression,{type:o.EMBED,bracket:n.Bracket.Open};break;case u.Expression:case u.UnescapedExpression:if(this.handlebarsKind===u.Expression&&t.advanceIfString("}}").length>0)return this.handlebarsKind=u.HTML,{type:o.EMBED,bracket:n.Bracket.Close};if(this.handlebarsKind===u.UnescapedExpression&&t.advanceIfString("}}}").length>0)return this.handlebarsKind=u.HTML,{type:o.EMBED_UNESCAPED,bracket:n.Bracket.Close};if(t.skipWhitespace().length>0)return{type:""};if("#"===t.peek())return t.advanceWhile(/^[^\s}]/),{type:o.KEYWORD,bracket:n.Bracket.Open};if("/"===t.peek())return t.advanceWhile(/^[^\s}]/),{type:o.KEYWORD,bracket:n.Bracket.Close};if(t.advanceIfString("else")){var r=t.peek();if(" "===r||"	"===r||"}"===r)return{type:o.KEYWORD};t.goBack(4)}if(t.advanceWhile(/^[^\s}]/).length>0)return{type:o.VARIABLE}}return e.prototype.tokenize.call(this,t)},t}(a.State);t.HandlebarsState=d;var h=function(e){function t(t,n,r,a){e.call(this,t,n,r,a),this.formattingSupport=null,this.onEnterSupport=new s.OnEnterSupport(this.getId(),{brackets:[{open:"<!--",close:"-->"},{open:"{{",close:"}}"}]})}return __extends(t,e),t.prototype.asyncCtor=function(){var t=this;return e.prototype.asyncCtor.call(this).then(function(){var e=t.characterPairSupport.getAutoClosingPairs().slice(0).concat([{open:"{",close:"}"}]);t.characterPairSupport=new r.CharacterPairSupport(t,{autoClosingPairs:e.slice(0),surroundingPairs:[{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"}]})})},t.prototype.getInitialState=function(){return new d(this,a.States.Content,u.HTML,"","","","","")},t.prototype.getLeavingNestedModeData=function(t,n){var r=e.prototype.getLeavingNestedModeData.call(this,t,n);return r&&(r.stateAfterNestedMode=new d(this,a.States.Content,u.HTML,"","","","","")),r},t=__decorate([__param(1,i.IInstantiationService),__param(2,c.IThreadService),__param(3,p.IModeService)],t)}(a.HTMLMode);t.HandlebarsMode=h});