"use strict";define("vs/languages/typescript/common/js/requireRewriter",["require","exports","vs/languages/typescript/common/js/rewriting","vs/languages/typescript/common/lib/typescriptServices"],function(e,t,r,n){var i=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"rewriter.modules.require"},enumerable:!0,configurable:!0}),e.prototype.computeEdits=function(t){var r=t.sourceFile.getFullText();for(e._pattern.lastIndex=0;e._pattern.test(r);){var i=e._pattern.lastIndex-1,a=n.getTokenAtPosition(t.sourceFile,i);a&&65===a.kind&&a.parent&&160===a.parent.kind&&e._checkCallExpression(a.parent,t)}},e._checkCallExpression=function(t,n){if(1===t.arguments.length&&8===t.arguments[0].kind){var i=t.arguments[0],a=i.getText().replace(/\.js("|')$/,function(e,t){return t}),o=r.encodeVariableName(i);n.newDerive(i,"import * as "+o+" from "+a+";\n"),e._needsLeadingSemicolon(t)?n.newReplace(t.getStart(),t.getWidth(),";(<typeof "+o+">"+t.getText()+")"):n.newReplace(t.getStart(),t.getWidth(),"(<typeof "+o+">"+t.getText()+")")}},e._needsLeadingSemicolon=function(e){var t=n.getTokenAtPosition(e.getSourceFile(),e.getFullStart()-1);if(!t||!t.parent)return!1;switch(t.parent.kind){case 160:case 183:case 185:case 194:case 134:case 133:var r=n.findChildOfKind(t.parent,22);return!r}return!1},e._pattern=/\brequire\b/g,e}();return i});