"use strict";define("vs/languages/typescript/common/js/shebangRewriter",["require","exports"],function(e,t){var r=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"rewriter.shebang"},enumerable:!0,configurable:!0}),e.prototype.computeEdits=function(t){var r=t.sourceFile.getFullText();if(r.charCodeAt(0)===e._hash&&r.charCodeAt(1)===e._bang){var a=~r.indexOf("\n")||~r.indexOf("\r");a=a?~a:r.length,t.newDelete(0,a)}},e._hash="#".charCodeAt(0),e._bang="!".charCodeAt(0),e}();return r});var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};define("vs/languages/javascript/common/javascriptWorker",["require","exports","vs/base/common/objects","vs/base/common/arrays","vs/base/common/winjs.base","vs/languages/typescript/common/typescriptWorker2","vs/languages/typescript/common/options","vs/languages/typescript/common/js/rewriting","vs/languages/typescript/common/features/suggestions","vs/languages/typescript/common/features/parameterHints","vs/languages/typescript/common/features/occurrences","vs/languages/typescript/common/features/extraInfo","vs/languages/typescript/common/features/references","vs/languages/typescript/common/features/definitions","vs/languages/typescript/common/features/quickFix","vs/languages/typescript/common/features/diagnostics","vs/languages/typescript/common/features/rename","vs/languages/typescript/common/js/shebangRewriter"],function(e,t,r,a,n,s,o,i,c,g,u,p,l,f,m,v,h,y){var d=function(e){function t(t,r,a){var n=this;e.call(this,t,r,a),this._projectService.defaultRewriter=[new y],this._fancyRewriters=[new y],a.forEach(function(e){"function"==typeof e.computeEdits&&n._fancyRewriters.push(e)})}return __extends(t,e),t.prototype._doConfigure=function(t){return e.prototype._doConfigure.call(this,t,o.javaScriptOptions)},t.prototype.doValidateSemantics=function(e){var t=[],a=this._projectService.getProject(e,this._fancyRewriters),n=v.getSemanticDiagnostics(a.languageService,e,this._options);if(n){var s=a.translations.getTranslator(e);return n.markers.forEach(function(e){var a=s.info(e);a.origin?(r.mixin(e,a.origin,!0),t.push(e)):a.isInserted||(r.mixin(e,s.from(e),!0),t.push(e))}),this.markerService.changeOne("/"+this._getMode().getId()+"/semantic",e,t),n.hasMissingFiles}},t.prototype.doSuggest=function(e,t){var r=this._projectService.getProject(e,this._fancyRewriters);t=r.translations.getTranslator(e).to(t);var s=c.computeSuggestions(r.languageService,e,t,this._options);return a.forEach(s.suggestions,function(e,t){i.containsEncodedVariableName(e.label)&&t()}),n.TPromise.as(s)},t.prototype.getSuggestionDetails=function(e,t,r){var a=this._projectService.getProject(e,this._fancyRewriters);t=a.translations.getTranslator(e).to(t);var s=c.getSuggestionDetails(a.languageService,e,t,r,this._options);return s.typeLabel=i.decodeVariableNames(s.typeLabel,a.translations.getOriginal(e)),n.TPromise.as(s)},t.prototype.getParameterHints=function(e,t){var r=this._projectService.getProject(e,this._fancyRewriters);t=r.translations.getTranslator(e).to(t);var a=g.compute(r.languageService,e,t);if(a){for(var s=r.translations.getOriginal(e),o=0,c=a.signatures;o<c.length;o++){var u=c[o];u.label=i.decodeVariableNames(u.label,s);for(var p=0,l=u.parameters;p<l.length;p++){var f=l[p];f.label=i.decodeVariableNames(f.label,s),f.signatureLabelOffset=0,f.signatureLabelEnd=0}}return n.TPromise.as(a)}},t.prototype.findOccurrences=function(e,t,r){var s=this._projectService.getProject(e,this._fancyRewriters),o=s.translations.getTranslator(e);t=o.to(t);var i=u.compute(s.languageService,e,t,r);return a.forEach(i,function(t,r){o.info(t.range).isInserted?r():t.range=s.translations.getTranslator(e).from(t.range)}),n.TPromise.as(i)},t.prototype._findTypeScriptDeclaration=function(e,t){var r=this._projectService.getProject(e,this._fancyRewriters);t=r.translations.getTranslator(e).to(t);var a=f.findDeclaration(r,e,t);if(a){var s=r.translations.getTranslator(a.resource);if(!s.info(a.range).isInserted)return a.range=s.from(a.range),n.TPromise.as(a)}},t.prototype.findReferences=function(e,t,r){var s=this._projectService.getProject(e,this._fancyRewriters);t=s.translations.getTranslator(e).to(t);var o=l.find(s,e,t,r);return a.forEach(o,function(e,t){var r=s.translations.getTranslator(e.resource);r.info(e.range).isInserted?t():e.range=r.from(e.range)}),n.TPromise.as(o)},t.prototype.computeInfo=function(e,t){var r=this._projectService.getProject(e,this._fancyRewriters);t=r.translations.getTranslator(e).to(t);var a=p.compute(r.languageService,e,t);return a&&(a.range=r.translations.getTranslator(e).from(a.range),i.decodeVariableNames(a.htmlContent,r.translations.getOriginal(e))),n.TPromise.as(a)},t.prototype.runQuickFixAction=function(e,t,a){var s=this._projectService.getProject(e,this._fancyRewriters),o=s.translations.getTranslator(e).to(t);r.mixin(o,t,!1);var i=m.evaluate(s.languageService,e,o,a);if(i)for(var c=0,g=i.edits;c<g.length;c++){var u=g[c];u.range=s.translations.getTranslator(u.resource).from(u.range)}return n.TPromise.as(i)},t.prototype.getQuickFixes=function(e,t){var a=this._projectService.getProject(e,this._fancyRewriters),s=a.translations.getTranslator(e).to(t);r.mixin(s,t,!1);var o=m.compute(a.languageService,e,s);return n.TPromise.as(o)},t.prototype.rename=function(e,t,r){for(var a=this._projectService.getProject(e,this._fancyRewriters),s=h(a,e,a.translations.getTranslator(e).to(t),r),o=0;o<s.edits.length;o++){var i=s.edits[o],c=a.translations.getTranslator(i.resource),g=c.info(i.range);if(g.isInserted)s.edits.splice(o,1),o-=1;else if(g.isOverlapping){s.edits=[];break}i.range=c.from(i.range)}return n.TPromise.as(s)},t}(s.TypeScriptWorker2);t.JavaScriptWorker=d});