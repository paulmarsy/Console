/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/languages/json/common/parser/jsonLocation",["require","exports"],function(e,t){var n=function(){function e(e){this.segments=e}return e.prototype.append=function(t){return new e(this.segments.concat(t))},e.prototype.getSegments=function(){return this.segments},e.prototype.matches=function(e){for(var t=0,n=0;t<e.length&&n<this.segments.length;n++)if(e[t]===this.segments[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length},e.prototype.toString=function(){return"["+this.segments.join("][")+"]"},e}();t.JSONLocation=n}),define("vs/languages/json/common/features/jsonFormatter",["require","exports","vs/base/common/json"],function(e,t,n){function r(e,t,r){function s(){return e.getEOL()+o(h,u+f)}function a(){var e=d.scan();for(m=!1;e===n.SyntaxKind.Trivia||e===n.SyntaxKind.LineBreakTrivia;)m=m||e===n.SyntaxKind.LineBreakTrivia,e=d.scan();return e}function c(t,n){e.getValueInRange(n)!==t&&g.push({range:n,text:t})}var u,l,p;t?(t={startLineNumber:t.startLineNumber,startColumn:1,endLineNumber:t.endLineNumber,endColumn:e.getLineMaxColumn(t.endLineNumber)},u=i(e.getLineContent(t.startLineNumber),r),l=e.getValueInRange(t),p=e.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn})):(t=e.getFullModelRange(),u=0,l=e.getValue(),p=0);var h,m=!1,f=0;h=r.insertSpaces?o(" ",r.tabSize):"	";var d=n.createScanner(l,!1),g=[],v=a();if(v!==n.SyntaxKind.EOF){var y=e.getPositionFromOffset(d.getTokenOffset()+p),S=o(h,u);c(S,{startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:y.lineNumber,endColumn:y.column})}for(;v!==n.SyntaxKind.EOF;){for(var b=e.getPositionFromOffset(d.getTokenOffset()+d.getTokenLength()+p),O=a();!m&&(O===n.SyntaxKind.LineCommentTrivia||O===n.SyntaxKind.BlockCommentTrivia);){var k=e.getPositionFromOffset(d.getTokenOffset()+p);c(" ",{startLineNumber:b.lineNumber,startColumn:b.column,endLineNumber:k.lineNumber,endColumn:k.column}),b=e.getPositionFromOffset(d.getTokenOffset()+d.getTokenLength()+p),O=a()}var j="";if(O===n.SyntaxKind.CloseBraceToken)v!==n.SyntaxKind.OpenBraceToken&&(f--,j=s());else if(O===n.SyntaxKind.CloseBracketToken)v!==n.SyntaxKind.OpenBracketToken&&(f--,j=s());else{switch(v){case n.SyntaxKind.OpenBracketToken:case n.SyntaxKind.OpenBraceToken:f++,j=s();break;case n.SyntaxKind.CommaToken:case n.SyntaxKind.LineCommentTrivia:j=s();break;case n.SyntaxKind.BlockCommentTrivia:j=m?s():" ";break;case n.SyntaxKind.ColonToken:j=" ";break;case n.SyntaxKind.NullKeyword:case n.SyntaxKind.TrueKeyword:case n.SyntaxKind.FalseKeyword:case n.SyntaxKind.NumericLiteral:(O===n.SyntaxKind.NullKeyword||O===n.SyntaxKind.FalseKeyword||O===n.SyntaxKind.NumericLiteral)&&(j=" ")}!m||O!==n.SyntaxKind.LineCommentTrivia&&O!==n.SyntaxKind.BlockCommentTrivia||(j=s())}var x=e.getPositionFromOffset(d.getTokenOffset()+p);c(j,{startLineNumber:b.lineNumber,startColumn:b.column,endLineNumber:x.lineNumber,endColumn:x.column}),v=O}return g}function o(e,t){for(var n="",r=0;t>r;r++)n+=e;return n}function i(e,t){for(var n=0,r=0,o=t.tabSize||4;n<e.length;){var i=e.charAt(n);if(" "===i)r++;else{if("	"!==i)break;r+=o}n++}return Math.floor(r/o)}t.format=r}),define("vs/nls!vs/languages/json/common/contributions/bowerJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/bowerJSONContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/globPatternContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/globPatternContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/packageJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/packageJSONContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/projectJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/projectJSONContribution",t)}),define("vs/nls!vs/languages/json/common/jsonIntellisense",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/jsonIntellisense",t)}),define("vs/nls!vs/languages/json/common/jsonSchemaService",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/jsonSchemaService",t)}),define("vs/nls!vs/languages/json/common/parser/jsonParser",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/parser/jsonParser",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/json/common/parser/jsonParser",["require","exports","vs/nls!vs/languages/json/common/parser/jsonParser","vs/base/common/arrays","vs/base/common/types","vs/base/common/json","./jsonLocation"],function(e,t,n,r,o,i,s){var a=function(){function e(e,t,n,r,o){this.type=t,this.name=n,this.start=r,this.end=o,this.parent=e}return e.prototype.getNodeLocation=function(){var e=this.parent?this.parent.getNodeLocation():new s.JSONLocation([]);return this.name&&(e=e.append(this.name)),e},e.prototype.getChildNodes=function(){return[]},e.prototype.getValue=function(){},e.prototype.contains=function(e,t){return void 0===t&&(t=!1),e>=this.start&&e<this.end||t&&e===this.end},e.prototype.visit=function(e){return e(this)},e.prototype.getNodeFromOffset=function(e){var t=function(n){if(e>=n.start&&e<n.end){for(var r=n.getChildNodes(),o=0;o<r.length&&r[o].start<=e;o++){var i=t(r[o]);if(i)return i}return n}return null};return t(this)},e.prototype.getNodeFromOffsetEndInclusive=function(e){var t=function(n){if(e>=n.start&&e<=n.end){for(var r=n.getChildNodes(),o=0;o<r.length&&r[o].start<=e;o++){var i=t(r[o]);if(i)return i}return n}return null};return t(this)},e.prototype.validate=function(e,t,o,i){var s=this;if(void 0===i&&(i=-1),-1===i||this.contains(i)){if(Array.isArray(e.type)?r.contains(e.type,this.type)===!1&&t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(0,null,e.type.join())}):e.type&&this.type!==e.type&&t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(1,null,e.type)}),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){s.validate(e,t,o,i)}),e.not){var a=new g,c=[];this.validate(e.not,a,c,i),a.hasErrors()||t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(2,null)}),o&&c.forEach(function(e){e.inverted=!e.inverted,o.push(e)})}var u=function(e,r){var i=[],a=null;return e.forEach(function(e){var t=new g,n=[];if(s.validate(e,t,n),t.hasErrors()||i.push(e),a)if(r||t.hasErrors()||a.validationResult.hasErrors()){var o=t.compare(a.validationResult);o>0?a={schema:e,validationResult:t,matchingSchemas:n}:0===o&&a.matchingSchemas.push.apply(a.matchingSchemas,n)}else a.matchingSchemas.push.apply(a.matchingSchemas,n),a.validationResult.propertiesMatches+=t.propertiesMatches,a.validationResult.propertiesValueMatches+=t.propertiesValueMatches;else a={schema:e,validationResult:t,matchingSchemas:n}}),i.length>1&&r&&t.warnings.push({location:{start:s.start,end:s.start+1},message:n.localize(3,null)}),null!==a&&(t.merge(a.validationResult),t.propertiesMatches+=a.validationResult.propertiesMatches,t.propertiesValueMatches+=a.validationResult.propertiesValueMatches,o&&o.push.apply(o,a.matchingSchemas)),i.length};Array.isArray(e.anyOf)&&u(e.anyOf,!1),Array.isArray(e.oneOf)&&u(e.oneOf,!0),Array.isArray(e["enum"])&&(r.contains(e["enum"],this.getValue())===!1?t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(4,null,JSON.stringify(e["enum"]))}):t.enumValueMatch=!0),null!==o&&o.push({node:this,schema:e})}},e}();t.ASTNode=a;var c=function(e){function t(t,n,r,o){e.call(this,t,"null",n,r,o)}return __extends(t,e),t.prototype.getValue=function(){return null},t}(a);t.NullASTNode=c;var u=function(e){function t(t,n,r,o,i){e.call(this,t,"boolean",n,o,i),this.value=r}return __extends(t,e),t.prototype.getValue=function(){return this.value},t}(a);t.BooleanASTNode=u;var l=function(e){function t(t,n,r,o){e.call(this,t,"array",n,r,o),this.items=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.items},t.prototype.getValue=function(){return this.items.map(function(e){return e.getValue()})},t.prototype.addItem=function(e){return e?(this.items.push(e),!0):!1},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.items.length&&t;n++)t=this.items[n].visit(e);return t},t.prototype.validate=function(t,r,o,i){var s=this;if(void 0===i&&(i=-1),-1===i||this.contains(i)){if(e.prototype.validate.call(this,t,r,o,i),Array.isArray(t.items)){var a=t.items;a.forEach(function(e,n){var a=new g,c=s.items[n];c?(c.validate(e,a,o,i),r.mergePropertyMatch(a)):s.items.length>=t.items.length&&r.propertiesValueMatches++}),t.additionalItems===!1&&this.items.length>a.length?r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(5,null,a.length)}):this.items.length>=t.items.length&&(r.propertiesValueMatches+=this.items.length-t.items.length)}else t.items&&this.items.forEach(function(e){var n=new g;e.validate(t.items,n,o,i),r.mergePropertyMatch(n)});if(t.minItems&&this.items.length<t.minItems&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(6,null,t.minItems)}),t.maxItems&&this.items.length>t.maxItems&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(7,null,t.minItems)}),t.uniqueItems===!0){var c=this.items.map(function(e){return e.getValue()}),u=c.some(function(e,t){return t!==c.lastIndexOf(e)});u&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(8,null)})}}},t}(a);t.ArrayASTNode=l;var p=function(e){function t(t,n,r,o){e.call(this,t,"number",n,r,o),this.isInteger=!0,this.value=Number.NaN}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,i,s,a){if(void 0===a&&(a=-1),-1===a||this.contains(a)){var c=!1;("integer"===t.type||Array.isArray(t.type)&&r.contains(t.type,"integer"))&&(c=!0),c&&this.isInteger===!0&&(this.type="integer"),e.prototype.validate.call(this,t,i,s,a),this.type="number";var u=this.getValue();o.isNumber(t.multipleOf)&&u%t.multipleOf!==0&&i.warnings.push({location:{start:this.start,end:this.end},message:n.localize(9,null,t.multipleOf)}),o.isUndefined(t.minimum)||(t.exclusiveMinimum&&u<=t.minimum&&i.warnings.push({location:{start:this.start,end:this.end},message:n.localize(10,null,t.minimum)}),!t.exclusiveMinimum&&u<t.minimum&&i.warnings.push({location:{start:this.start,end:this.end},message:n.localize(11,null,t.minimum)})),o.isUndefined(t.maximum)||(t.exclusiveMaximum&&u>=t.maximum&&i.warnings.push({location:{start:this.start,end:this.end},message:n.localize(12,null,t.maximum)}),!t.exclusiveMaximum&&u>t.maximum&&i.warnings.push({location:{start:this.start,end:this.end},message:n.localize(13,null,t.maximum)}))}},t}(a);t.NumberASTNode=p;var h=function(e){function t(t,n,r,o,i){this.isKey=r,this.value="",e.call(this,t,"string",n,o,i)}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,r,o,i){if(void 0===i&&(i=-1),(-1===i||this.contains(i))&&(e.prototype.validate.call(this,t,r,o,i),t.minLength&&this.value.length<t.minLength&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(14,null,t.minLength)}),t.maxLength&&this.value.length>t.maxLength&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(15,null,t.maxLength)}),t.pattern)){var s=new RegExp(t.pattern);s.test(this.value)||r.warnings.push({location:{start:this.start,end:this.end},message:t.errorMessage||n.localize(16,null,t.pattern)})}},t}(a);t.StringASTNode=h;var m=function(e){function t(t,n){e.call(this,t,"property",null,n.start),this.key=n,n.parent=this,n.name=n.value,this.colonOffset=-1}return __extends(t,e),t.prototype.getChildNodes=function(){return this.value?[this.key,this.value]:[this.key]},t.prototype.setValue=function(e){return this.value=e,null!==e},t.prototype.visit=function(e){return e(this)&&this.key.visit(e)&&this.value&&this.value.visit(e)},t.prototype.validate=function(e,t,n,r){void 0===r&&(r=-1),(-1===r||this.contains(r))&&this.value&&this.value.validate(e,t,n,r)},t}(a);t.PropertyASTNode=m;var f=function(e){function t(t,n,r,o){e.call(this,t,"object",n,r,o),this.properties=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.properties},t.prototype.addProperty=function(e){return e?(this.properties.push(e),!0):!1},t.prototype.getFirstProperty=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].key.value===e)return this.properties[t];return null},t.prototype.getKeyList=function(){return this.properties.map(function(e){return e.key.getValue()})},t.prototype.getValue=function(){var e={};return this.properties.forEach(function(t){var n=t.value&&t.value.getValue();n&&(e[t.key.getValue()]=n)}),e},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.properties.length&&t;n++)t=this.properties[n].visit(e);return t},t.prototype.validate=function(t,r,i,s){var a=this;if(void 0===s&&(s=-1),-1===s||this.contains(s)){e.prototype.validate.call(this,t,r,i,s);var c={},u=[];this.properties.forEach(function(e){var t=e.key.value;c[t]=e.value,u.push(t)}),Array.isArray(t.required)&&t.required.forEach(function(e){if(!c[e]){var t=a.parent&&a.parent&&a.parent.key,o=t?{start:t.start,end:t.end}:{start:a.start,end:a.start+1};r.warnings.push({location:o,message:n.localize(17,null,e)})}});var l=function(e){for(var t=u.indexOf(e);t>=0;)u.splice(t,1),t=u.indexOf(e)};t.properties&&Object.keys(t.properties).forEach(function(e){l(e);var n=t.properties[e],o=c[e];if(o){var a=new g;o.validate(n,a,i,s),r.mergePropertyMatch(a)}}),t.patternProperties&&Object.keys(t.patternProperties).forEach(function(e){var n=new RegExp(e);u.slice(0).forEach(function(o){if(n.test(o)){l(o);var a=c[o];if(a){var u=new g;a.validate(t.patternProperties[e],u,i,s),r.mergePropertyMatch(u)}}})}),o.isObject(t.additionalProperties)?u.forEach(function(e){var n=c[e];if(n){var o=new g;n.validate(t.additionalProperties,o,i,s),r.mergePropertyMatch(o)}}):t.additionalProperties===!1&&u.length>0&&u.forEach(function(e){var t=c[e];if(t){var o=t.parent;r.warnings.push({location:{start:o.key.start,end:o.key.end},message:n.localize(18,null,e)})}}),t.maxProperties&&this.properties.length>t.maxProperties&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(19,null,t.maxProperties)}),t.minProperties&&this.properties.length<t.minProperties&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(20,null,t.minProperties)}),o.isObject(t.dependencies)&&Object.keys(t.dependencies).forEach(function(e){var u=c[e];if(u)if(Array.isArray(t.dependencies[e])){var l=t.dependencies[e];l.forEach(function(t){c[t]?r.propertiesValueMatches++:r.warnings.push({location:{start:a.start,end:a.end},message:n.localize(21,null,t,e)})})}else if(o.isObject(t.dependencies[e])){var p=t.dependencies[e],h=new g;a.validate(p,h,i,s),r.mergePropertyMatch(h)}})}},t}(a);t.ObjectASTNode=f;var d=function(){function e(){this.ignoreDanglingComma=!1}return e}();t.JSONDocumentConfig=d;var g=function(){function e(){this.errors=[],this.warnings=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.enumValueMatch=!1}return e.prototype.hasErrors=function(){return!!this.errors.length||!!this.warnings.length},e.prototype.mergeAll=function(e){var t=this;e.forEach(function(e){t.merge(e)})},e.prototype.merge=function(e){this.errors=this.errors.concat(e.errors),this.warnings=this.warnings.concat(e.warnings)},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasErrors()&&e.propertiesMatches)&&this.propertiesValueMatches++},e.prototype.compare=function(e){var t=this.hasErrors();return t!==e.hasErrors()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();t.ValidationResult=g;var v=function(){function e(e){this.config=e,this.validationResult=new g}return Object.defineProperty(e.prototype,"errors",{get:function(){return this.validationResult.errors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this.validationResult.warnings},enumerable:!0,configurable:!0}),e.prototype.getNodeFromOffset=function(e){return this.root&&this.root.getNodeFromOffset(e)},e.prototype.getNodeFromOffsetEndInclusive=function(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)},e.prototype.visit=function(e){this.root&&this.root.visit(e)},e.prototype.validate=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1),this.root&&this.root.validate(e,this.validationResult,t,n)},e}();t.JSONDocument=v;var y=function(){function e(){}return e.prototype.parse=function(e,t){function r(e){return w.getToken()===e?(w.scan(),!0):!1}function o(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),0===x.errors.length||x.errors[0].location.start!==w.getTokenOffset()){var o={message:e,location:{start:w.getTokenOffset(),end:w.getTokenOffset()+w.getTokenLength()}};x.errors.push(o)}if(t&&a(t,!1),n.length+r.length>0)for(var s=w.getToken();s!==i.SyntaxKind.EOF;){if(-1!==n.indexOf(s)){w.scan();break}if(-1!==r.indexOf(s))break;s=w.scan()}return t}function s(){switch(w.getTokenError()){case i.ScanError.InvalidUnicode:return o(n.localize(22,null)),!0;case i.ScanError.InvalidEscapeCharacter:return o(n.localize(23,null)),!0;case i.ScanError.UnexpectedEndOfNumber:return o(n.localize(24,null)),!0;case i.ScanError.UnexpectedEndOfComment:return o(n.localize(25,null)),!0;case i.ScanError.UnexpectedEndOfString:return o(n.localize(26,null)),!0}return!1}function a(e,t){return e.end=w.getTokenOffset()+w.getTokenLength(),t&&w.scan(),e}function g(e,t){if(w.getToken()!==i.SyntaxKind.OpenBracketToken)return null;var s=new l(e,t,w.getTokenOffset());w.scan();var c=0;if(s.addItem(j(s,""+c++)))for(;r(i.SyntaxKind.CommaToken);)s.addItem(j(s,""+c++))||x.config.ignoreDanglingComma||o(n.localize(27,null));return w.getToken()!==i.SyntaxKind.CloseBracketToken?o(n.localize(28,null),s):a(s,!0)}function y(e,t){var r=b(null,null,!0);if(!r){if(w.getToken()===i.SyntaxKind.Unknown){var s=w.getTokenValue();s.length>0&&("'"===s.charAt(0)||i.isLetter(s.charAt(0).charCodeAt(0)))&&o(n.localize(29,null))}return null}var a=new m(e,r);return t[r.value]&&x.warnings.push({location:{start:a.key.start,end:a.key.end},message:n.localize(30,null)}),t[r.value]=!0,w.getToken()!==i.SyntaxKind.ColonToken?o(n.localize(31,null),a,[],[i.SyntaxKind.CloseBraceToken,i.SyntaxKind.CommaToken]):(a.colonOffset=w.getTokenOffset(),w.scan(),a.setValue(j(a,r.value))?(a.end=a.value.end,a):o(n.localize(32,null),a,[],[i.SyntaxKind.CloseBraceToken,i.SyntaxKind.CommaToken]))}function S(e,t){if(w.getToken()!==i.SyntaxKind.OpenBraceToken)return null;var s=new f(e,t,w.getTokenOffset());w.scan();var c={};if(s.addProperty(y(s,c)))for(;r(i.SyntaxKind.CommaToken);)s.addProperty(y(s,c))||x.config.ignoreDanglingComma||o(n.localize(33,null));return w.getToken()!==i.SyntaxKind.CloseBraceToken?o(n.localize(34,null),s):a(s,!0)}function b(e,t,n){if(w.getToken()!==i.SyntaxKind.StringLiteral)return null;var r=new h(e,t,n,w.getTokenOffset());return r.value=w.getTokenValue(),s(),a(r,!0)}function O(e,t){if(w.getToken()!==i.SyntaxKind.NumericLiteral)return null;var r=new p(e,t,w.getTokenOffset());if(!s()){var c=w.getTokenValue();try{var u=JSON.parse(c);if("number"!=typeof u)return o(n.localize(35,null),r);r.value=u}catch(l){return o(n.localize(36,null),r)}r.isInteger=-1===c.indexOf(".")}return a(r,!0)}function k(e,t){var n;switch(w.getToken()){case i.SyntaxKind.NullKeyword:n=new c(e,t,w.getTokenOffset());break;case i.SyntaxKind.TrueKeyword:n=new u(e,t,!0,w.getTokenOffset());break;case i.SyntaxKind.FalseKeyword:n=new u(e,t,!1,w.getTokenOffset());break;default:return null}return a(n,!0)}function j(e,t){return g(e,t)||S(e,t)||b(e,t,!1)||O(e,t)||k(e,t)}void 0===t&&(t=new d);var x=new v(t),w=i.createScanner(e,!0);return w.scan(),x.root=j(null,null),x.root?w.getToken()!==i.SyntaxKind.EOF&&o(n.localize(38,null)):o(n.localize(37,null)),x},e}();t.JSONParser=y}),define("vs/languages/json/common/jsonIntellisense",["require","exports","./parser/jsonParser","vs/base/common/types","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/jsonIntellisense","vs/base/common/errors"],function(e,t,n,r,o,i,s){var a=function(){function e(e,t,n){this.schemaService=e,this.requestService=t,this.contributions=n}return e.prototype.doSuggest=function(e,t,r){var i=this,a=t.getWordUntilPosition(r).word,c=new n.JSONParser,u=new n.JSONDocumentConfig;u.ignoreDanglingComma=!0;var l=c.parse(t.getValue(),u),p={currentWord:a,incomplete:!1,suggestions:[]},h=void 0,m=void 0,f={},d={add:function(e){f[e.label]||(f[e.label]=!0,e.overwriteBefore=h,e.overwriteAfter=m,p.suggestions.push(e))},setAsIncomplete:function(){p.incomplete=!0},error:function(e){s.onUnexpectedError(e)}};return this.schemaService.getSchemaForResource(e.toString(),l).then(function(n){var s=[],c=t.getOffsetFromPosition(r),u=l.getNodeFromOffsetEndInclusive(c),g=!0,v=a,y=null;if(u&&"string"===u.type){var S=u;if(S.isKey){var b=t.getRangeFromOffsetAndLength(u.start,u.end-u.start);h=r.column-b.startColumn,m=b.endColumn-r.column,g=!(u.parent&&u.parent.value),y=u.parent?u.parent:null,v=t.getValueInRange({startColumn:b.startColumn+1,startLineNumber:b.startLineNumber,endColumn:r.column,endLineNumber:r.lineNumber}),u.parent&&(u=u.parent.parent)}}if(u&&"object"===u.type){if(u.start===c)return p;var O=u.properties;if(O.forEach(function(e){y&&y===e||(f[e.key.value]=!0)}),n){var k=0===O.length||c>=O[O.length-1].start;i.getPropertySuggestions(e,n,l,u,v,g,k,d)}else u.parent&&i.getSchemaLessPropertySuggestions(l,u,d);var j=u.getNodeLocation();i.contributions.forEach(function(t){var n=t.collectPropertySuggestions(e,j,a,g,k,d);n&&s.push(n)})}if(u&&("string"===u.type||"number"===u.type||"boolean"===u.type||"null"===u.type)){var b=t.getRangeFromOffsetAndLength(u.start,u.end-u.start);h=r.column-b.startColumn,m=b.endColumn-r.column,u=u.parent}if(n?i.getValueSuggestions(e,n,l,u,c,d):i.getSchemaLessValueSuggestions(l,u,c,t,d),u){if("property"===u.type&&c>u.colonOffset){var x=u.key.value,w=u.value;if(!w||c<=w.end){var j=u.parent.getNodeLocation();i.contributions.forEach(function(t){var n=t.collectValueSuggestions(e,j,x,d);n&&s.push(n)})}}}else i.contributions.forEach(function(t){var n=t.collectDefaultSuggestions(e,d);n&&s.push(n)});return o.Promise.join(s).then(function(){return p})})},e.prototype.getPropertySuggestions=function(e,t,n,r,o,i,s,a){var c=this,u=[];n.validate(t.schema,u,r.start);u.forEach(function(e){if(e.node===r&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach(function(e){var n=t[e];a.add({type:"property",label:e,codeSnippet:c.getSnippetForProperty(e,n,i,s),documentationLabel:n.description||""})})}})},e.prototype.getSchemaLessPropertySuggestions=function(e,t,n){var r=this,o=function(e){e.properties.forEach(function(e){var t=e.key.value;n.add({type:"property",label:t,codeSnippet:r.getSnippetForSimilarProperty(t,e.value),documentationLabel:""})})};if("property"===t.parent.type){var i=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===i&&e.value&&"object"===e.value.type&&o(e.value),!0})}else"array"===t.parent.type&&t.parent.items.forEach(function(e){"object"===e.type&&e!==t&&o(e)})},e.prototype.getSchemaLessValueSuggestions=function(e,t,n,r,o){var i=this,s=function(e){var t=i.getMatchingSnippet(e,r);o.add({type:i.getSuggestionType(e.type),label:t,codeSnippet:t,documentationLabel:""}),"boolean"===e.type&&i.addBooleanSuggestion(!e.getValue(),o)};if(t){if("property"===t.type&&n>t.colonOffset){var a=t.value;if(a&&n>a.end)return;var c=t.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&s(e.value),!0})}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var c=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&"array"===e.value.type&&e.value.items.forEach(function(e){s(e)}),!0})}else t.items.forEach(function(e){s(e)})}else o.add({type:this.getSuggestionType("object"),label:"Empty object",codeSnippet:"{\n	{{}}\n}",documentationLabel:""}),o.add({type:this.getSuggestionType("array"),label:"Empty array",codeSnippet:"[\n	{{}}\n]",documentationLabel:""})},e.prototype.getValueSuggestions=function(e,t,n,r,o,i){var s=this;if(r){var a=null;if(r&&"property"===r.type&&o>r.colonOffset){var c=r.value;if(c&&o>c.end)return;a=r.key.value,r=r.parent}if(r&&(null!==a||"array"===r.type)){var u=[];n.validate(t.schema,u,r.start),u.forEach(function(e){if(e.node===r&&!e.inverted&&e.schema&&(e.schema.items&&(s.addDefaultSuggestion(e.schema.items,i),s.addEnumSuggestion(e.schema.items,i)),e.schema.properties)){var t=e.schema.properties[a];t&&(s.addDefaultSuggestion(t,i),s.addEnumSuggestion(t,i))}})}}else this.addDefaultSuggestion(t.schema,i)},e.prototype.addBooleanSuggestion=function(e,t){t.add({type:this.getSuggestionType("boolean"),label:e?"true":"false",codeSnippet:this.getSnippetForValue(e),documentationLabel:""})},e.prototype.addEnumSuggestion=function(e,t){var n=this;Array.isArray(e["enum"])?e["enum"].forEach(function(r){return t.add({type:n.getSuggestionType(e.type),label:n.getLabelForValue(r),codeSnippet:n.getSnippetForValue(r),documentationLabel:""})}):"boolean"===e.type&&(this.addBooleanSuggestion(!0,t),this.addBooleanSuggestion(!1,t)),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addEnumSuggestion(e,t)})},e.prototype.addDefaultSuggestion=function(e,t){var n=this;e["default"]&&t.add({type:this.getSuggestionType(e.type),label:this.getLabelForValue(e["default"]),codeSnippet:this.getSnippetForValue(e["default"]),typeLabel:i.localize(0,null)}),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addDefaultSuggestion(e,t)})},e.prototype.getLabelForValue=function(e){var t=JSON.stringify(e);return t=t.replace("{{","").replace("}}",""),t.length>57?t.substr(0,57).trim()+"...":t},e.prototype.getSnippetForValue=function(e){var t=JSON.stringify(e,null,"	");switch(typeof e){case"object":return null===e?"{{null}}":t;case"string":return'"{{'+t.substr(1,t.length-2)+'}}"';case"number":case"boolean":return"{{"+t+"}}"}return t},e.prototype.getSuggestionType=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return"text";switch(e){case"string":return"text";case"object":return"module";case"property":return"property";default:return"value"}},e.prototype.getMatchingSnippet=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:var n=t.getValueInRange(t.getRangeFromOffsetAndLength(e.start,e.end-e.start));return n}},e.prototype.getSnippetForProperty=function(e,t,n,o){var i='"'+e+'"';if(!n)return i;i+=": ";var s=t["default"];if(r.isUndefined(s))if(t["enum"]&&t["enum"].length>0)i+=this.getSnippetForValue(t["enum"][0]);else switch(t.type){case"boolean":i+="{{false}}";break;case"string":i+='"{{}}"';break;case"object":i+="{\n	{{}}\n}";break;case"array":i+="[\n	{{}}\n]";break;case"number":i+="{{0}}";break;case"null":i+="{{null}}";break;default:return i}else i+=this.getSnippetForValue(s);return o||(i+=","),i},e.prototype.getSnippetForSimilarProperty=function(e,t){return'"'+e+'"'},e}();t.JSONIntellisense=a});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/globPatternContribution",["require","exports","vs/base/common/strings","vs/nls!vs/languages/json/common/contributions/globPatternContribution","vs/platform/instantiation/common/instantiation"],function(e,t,n,r,o){var i=[{type:"value",label:r.localize(0,null),codeSnippet:'"**/*.{{extension}}": true',documentationLabel:r.localize(1,null)},{type:"value",label:r.localize(2,null),codeSnippet:'"**/*.{ext1,ext2,ext3}": true',documentationLabel:r.localize(3,null)},{type:"value",label:r.localize(4,null),codeSnippet:'"**/*.{{source-extension}}": { "when": "$(basename).{{target-extension}}" }',documentationLabel:r.localize(5,null)},{type:"value",label:r.localize(6,null),codeSnippet:'"{{name}}": true',documentationLabel:r.localize(7,null)},{type:"value",label:r.localize(8,null),codeSnippet:'"{folder1,folder2,folder3}": true',documentationLabel:r.localize(9,null)},{type:"value",label:r.localize(10,null),codeSnippet:'"**/{{name}}": true',documentationLabel:r.localize(11,null)}],s=[{type:"value",label:r.localize(12,null),codeSnippet:"true",documentationLabel:r.localize(13,null)},{type:"value",label:r.localize(14,null),codeSnippet:"false",documentationLabel:r.localize(15,null)},{type:"value",label:r.localize(16,null),codeSnippet:'{ "when": "$(basename).{{extension}}" }',documentationLabel:r.localize(17,null)}],a=function(){function e(e){}return e.prototype.isSettingsFile=function(e){var t=e.path;return n.endsWith(t,"/settings.json")},e.prototype.collectDefaultSuggestions=function(e,t){return null},e.prototype.collectPropertySuggestions=function(e,t,n,r,o,s){return this.isSettingsFile(e)&&(t.matches(["files.exclude"])||t.matches(["search.exclude"]))&&i.forEach(function(e){return s.add(e)}),null},e.prototype.collectValueSuggestions=function(e,t,n,r){return this.isSettingsFile(e)&&(t.matches(["files.exclude"])||t.matches(["search.exclude"]))&&s.forEach(function(e){return r.add(e)}),null},e.prototype.getInfoContribution=function(e,t){return null},e=__decorate([__param(0,o.INullService)],e)}();t.GlobPatternContribution=a});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/bowerJSONContribution",["require","exports","vs/base/common/strings","vs/nls!vs/languages/json/common/contributions/bowerJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,o){var i=function(){function e(e){this.topRanked=["twitter","bootstrap","angular-1.1.6","angular-latest","angulerjs","d3","myjquery","jq","abcdef1234567890","jQuery","jquery-1.11.1","jquery","sushi-vanilla-x-data","font-awsome","Font-Awesome","font-awesome","fontawesome","html5-boilerplate","impress.js","homebrew","backbone","moment1","momentjs","moment","linux","animate.css","animate-css","reveal.js","jquery-file-upload","blueimp-file-upload","threejs","express","chosen","normalize-css","normalize.css","semantic","semantic-ui","Semantic-UI","modernizr","underscore","underscore1","material-design-icons","ionic","chartjs","Chart.js","nnnick-chartjs","select2-ng","select2-dist","phantom","skrollr","scrollr","less.js","leancss","parser-lib","hui","bootstrap-languages","async","gulp","jquery-pjax","coffeescript","hammer.js","ace","leaflet","jquery-mobile","sweetalert","typeahead.js","soup","typehead.js","sails","codeigniter2"],
this.requestService=e}return e.prototype.isBowerFile=function(e){var t=e.path;return n.endsWith(t,"/bower.json")||n.endsWith(t,"/.bower.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isBowerFile(e)){var n={name:"{{name}}",description:"{{description}}",authors:["{{author}}"],version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"type",label:r.localize(0,null),codeSnippet:JSON.stringify(n,null,"	"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,o,i,s){if(this.isBowerFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"]))){if(n.length>0){var a="https://bower.herokuapp.com/packages/search/"+encodeURIComponent(n);return this.requestService.makeRequest({url:a}).then(function(e){if(200!==e.status)return s.error(r.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t)){for(var n=t,a=0;a<n.length;a++){var c=n[a].name,u=n[a].description||"",l=JSON.stringify(c);o&&(l+=': "{{*}}"',i||(l+=",")),s.add({type:"property",label:c,codeSnippet:l,documentationLabel:u})}s.setAsIncomplete()}}catch(p){}},function(e){return s.error(r.localize(2,null,e.responseText)),0})}this.topRanked.forEach(function(e){var t=JSON.stringify(e);o&&(t+=': "{{*}}"',i||(t+=",")),s.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),s.setAsIncomplete()}return null},e.prototype.collectValueSuggestions=function(e,t,n,r){return null},e.prototype.getInfoContribution=function(e,t){if(this.isBowerFile(e)&&(t.matches(["dependencies","*"])||t.matches(["devDependencies","*"]))){var o=t.getSegments()[t.getSegments().length-1],i=[];i.push({className:"type",text:r.localize(3,null,o)});var s="https://bower.herokuapp.com/packages/"+encodeURIComponent(o);return this.requestService.makeRequest({url:s}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.url){var r=t.url;n.startsWith(r,"git://")&&(r=r.substring(6)),n.endsWith(r,".git")&&(r=r.substring(0,r.length-4)),i.push({className:"documentation",text:r})}}catch(o){}return i},function(e){return i})}return null},e=__decorate([__param(0,o.IRequestService)],e)}();t.BowerJSONContribution=i});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/packageJSONContribution",["require","exports","vs/base/common/strings","vs/nls!vs/languages/json/common/contributions/packageJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,o){var i=40,s=function(){function e(e){this.mostDependedOn=["lodash","async","underscore","request","commander","express","debug","chalk","colors","q","coffee-script","mkdirp","optimist","through2","yeoman-generator","moment","bluebird","glob","gulp-util","minimist","cheerio","jade","redis","node-uuid","socket","io","uglify-js","winston","through","fs-extra","handlebars","body-parser","rimraf","mime","semver","mongodb","jquery","grunt","connect","yosay","underscore","string","xml2js","ejs","mongoose","marked","extend","mocha","superagent","js-yaml","xtend","shelljs","gulp","yargs","browserify","minimatch","react","less","prompt","inquirer","ws","event-stream","inherits","mysql","esprima","jsdom","stylus","when","readable-stream","aws-sdk","concat-stream","chai","promise","wrench"],this.requestService=e}return e.prototype.isPackageJSONFile=function(e){var t=e.path;return n.endsWith(t,"/package.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isPackageJSONFile(e)){var n={name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"module",label:r.localize(0,null),codeSnippet:JSON.stringify(n,null,"	"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,o,s,a){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"])||t.matches(["optionalDependencies"])||t.matches(["peerDependencies"]))){var c;if(n.length>0)return c="https://skimdb.npmjs.com/registry/_design/app/_view/browseAll?group_level=1&limit="+i+"&start_key=%5B%22"+encodeURIComponent(n)+"%22%5D&end_key=%5B%22"+encodeURIComponent(n+"z")+"%22,%7B%7D%5D",this.requestService.makeRequest({url:c}).then(function(e){if(200!==e.status)return a.error(r.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(t&&Array.isArray(t.rows)){for(var n=t.rows,c=0;c<n.length;c++){var u=n[c].key;if(Array.isArray(u)&&u.length>0){var l=u[0],p=JSON.stringify(l);o&&(p+=': "{{*}}"',s||(p+=",")),a.add({type:"property",label:l,codeSnippet:p,documentationLabel:""})}}n.length===i&&a.setAsIncomplete()}}catch(h){}},function(e){return a.error(r.localize(2,null,e.responseText)),0});this.mostDependedOn.forEach(function(e){var t=JSON.stringify(e);o&&(t+=': "{{*}}"',s||(t+=",")),a.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),a.setAsIncomplete()}return null},e.prototype.collectValueSuggestions=function(e,t,n,o){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"])||t.matches(["optionalDependencies"])||t.matches(["peerDependencies"]))){var i="http://registry.npmjs.org/"+encodeURIComponent(n)+"/latest";return this.requestService.makeRequest({url:i}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.version){var n=t.version,i=JSON.stringify(n);o.add({type:"class",label:i,codeSnippet:i,documentationLabel:r.localize(3,null)}),i=JSON.stringify("^"+n),o.add({type:"class",label:i,codeSnippet:i,documentationLabel:r.localize(4,null)}),i=JSON.stringify("~"+n),o.add({type:"class",label:i,codeSnippet:i,documentationLabel:r.localize(5,null)})}}catch(s){}return 0},function(e){return 0})}return null},e.prototype.getInfoContribution=function(e,t){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies","*"])||t.matches(["devDependencies","*"])||t.matches(["optionalDependencies","*"])||t.matches(["peerDependencies","*"]))){var n=t.getSegments()[t.getSegments().length-1],o=[];o.push({className:"type",text:r.localize(6,null,n)});var i="http://registry.npmjs.org/"+encodeURIComponent(n)+"/latest";return this.requestService.makeRequest({url:i}).then(function(e){try{var t=JSON.parse(e.responseText);t&&(t.description&&o.push({className:"documentation",text:t.description}),t.version&&o.push({className:"documentation",text:r.localize(7,null,t.version)}))}catch(n){}return o},function(e){return o})}return null},e=__decorate([__param(0,o.IRequestService)],e)}();t.PackageJSONContribution=s});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/projectJSONContribution",["require","exports","vs/base/common/strings","vs/nls!vs/languages/json/common/contributions/projectJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,o){var i=40,s=function(){function e(e){this.requestService=e}return e.prototype.isProjectJSONFile=function(e){var t=e.path;return n.endsWith(t,"/project.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isProjectJSONFile(e)){var n={version:"{{1.0.0-*}}",dependencies:{},frameworks:{dnx451:{},dnxcore50:{}}};t.add({type:"type",label:r.localize(0,null),codeSnippet:JSON.stringify(n,null,"	"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,o,s,a){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["frameworks","*","dependencies"])||t.matches(["frameworks","*","frameworkAssemblies"]))){var c;return c=n.length>0?"https://www.nuget.org/api/v2/Packages?$filter=Id%20ge%20'"+encodeURIComponent(n)+"'%20and%20Id%20lt%20'"+encodeURIComponent(n+"z")+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Id,Version,Description&$format=json&$top="+i:"https://www.nuget.org/api/v2/Packages?$filter=IsAbsoluteLatestVersion%20eq%20true&$orderby=DownloadCount%20desc&$top="+i+"&$select=Id,Version,DownloadCount,Description&$format=json",this.requestService.makeRequest({url:c}).then(function(e){if(200!==e.status)return a.error(r.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,c=0;c<n.length;c++){var u=n[c],l=u.Id,p=u.Version;if(l){var h=u.Description,m=u.Version,f=JSON.stringify(l);o&&(f+=': "{{'+p+'}}"',s||(f+=",")),a.add({type:"property",label:l,codeSnippet:f,typeLabel:m,documentationLabel:h})}}n.length===i&&a.setAsIncomplete()}}catch(d){}},function(e){return a.error(r.localize(2,null,e.responseText)),0})}return null},e.prototype.collectValueSuggestions=function(e,t,n,o){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["frameworks","*","dependencies"])||t.matches(["frameworks","*","frameworkAssemblies"]))){var s="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(n)+"'&$select=Version,IsAbsoluteLatestVersion&$format=json&$top="+i;return this.requestService.makeRequest({url:s}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,s=0;s<n.length;s++){var a=n[s],c=a.Version;if(c){var u=JSON.stringify(c),l="true"===a.IsAbsoluteLatestVersion,p=u,h="";l&&(h=r.localize(3,null)),o.add({type:"class",label:p,codeSnippet:u,documentationLabel:h})}}n.length===i&&o.setAsIncomplete()}}catch(m){}return 0},function(e){return 0})}return null},e.prototype.getInfoContribution=function(e,t){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies","*"])||t.matches(["frameworks","*","dependencies","*"])||t.matches(["frameworks","*","frameworkAssemblies","*"]))){var n=t.getSegments()[t.getSegments().length-1],o=[];o.push({className:"type",text:r.localize(4,null,n)});var i="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(n)+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Version,Description&$format=json&$top=5";return this.requestService.makeRequest({url:i}).then(function(e){var t=e.responseText;if(t)try{var n=JSON.parse(t);if(n.d&&n.d[0]){var i=n.d[0];i.Description&&o.push({className:"documentation",text:i.Description}),i.Version&&o.push({className:"documentation",text:r.localize(5,null,i.Version)})}}catch(s){}return o},function(e){return o})}return null},e=__decorate([__param(0,o.IRequestService)],e)}();t.ProjectJSONContribution=s});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/jsonSchemaService",["require","exports","vs/nls!vs/languages/json/common/jsonSchemaService","vs/base/common/objects","vs/base/common/json","vs/base/common/http","vs/base/common/strings","vs/base/common/uri","vs/base/common/types","vs/base/common/winjs.base","vs/editor/common/services/resourceService","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry"],function(e,t,n,r,o,i,s,a,c,u,l,p,h,m){function f(e){try{var t=a["default"].parse(e);if("file"===t.scheme)return t.fsPath}catch(n){}return e}var d=function(){function e(e){this.combinedSchemaId="local://combinedSchema/"+encodeURIComponent(e);try{this.patternRegExp=new RegExp(s.convertSimple2RegExpPattern(e)+"$")}catch(t){this.patternRegExp=null}this.schemas=[],this.combinedSchema=null}return e.prototype.addSchema=function(e){this.schemas.push(e),this.combinedSchema=null},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getCombinedSchema=function(e){return this.combinedSchema||(this.combinedSchema=e.createCombinedSchema(this.combinedSchemaId,this.schemas)),this.combinedSchema},e}(),g=function(){function e(e,t,n){this.service=e,this.url=t,n&&(this.unresolvedSchema=u.Promise.as(new v(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null},e}(),v=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e}();t.UnresolvedSchema=v;var y=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return this.getSectionRecursive(e,this.schema)},e.prototype.getSectionRecursive=function(e,t){var n=this;if(!t||0===e.length)return t;var r=e.shift();if(t.properties&&t.properties[r])return this.getSectionRecursive(e,t.properties[r]);if(c.isObject(t.patternProperties))Object.keys(t.patternProperties).forEach(function(o){var i=new RegExp(o);return i.test(r)?n.getSectionRecursive(e,t.patternProperties[o]):void 0});else{if(c.isObject(t.additionalProperties))return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+")){if(c.isObject(t.items))return this.getSectionRecursive(e,t.items);if(Array.isArray(t.items))try{var o=parseInt(r,10);return t.items[o]?this.getSectionRecursive(e,t.items[o]):null}catch(i){return null}}}return null},e}();t.ResolvedSchema=y;var S=function(){function e(e,t,n,r){var o=this;this.requestService=e,this.contextService=n,this.telemetryService=t,this.callOnDispose=[],r&&this.callOnDispose.push(r.addListener_(l.ResourceEvents.CHANGED,function(e){return o.onResourceChange(e)})),this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={}}return e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=e.url.toString(),n=this.schemasById[t];n&&n.clearSchema()},e.prototype.normalizeId=function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e},e.prototype.setSchemaContributions=function(e){var t=this;if(e.schemas){var n=e.schemas;for(var r in n)r=this.normalizeId(r),this.contributionSchemas[r]=this.addSchemaHandle(r,n[r])}if(e.schemaAssociations){var o=e.schemaAssociations;for(var i in o){var s=o[i];if(this.contextService){var c=this.contextService.getConfiguration().env;c&&(i=i.replace(/%APP_SETTINGS_HOME%/,a["default"].file(c.appSettingsHome).toString()))}this.contributionAssociations[i]=s;var u=this.getOrAddFilePatternAssociation(i);s.forEach(function(e){var n=t.normalizeId(e);u.addSchema(n)})}}},e.prototype.addSchemaHandle=function(e,t){var n=new g(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new d(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,n){var r=this;void 0===t&&(t=null);var o=this.normalizeId(e);return t&&t.forEach(function(t){r.getOrAddFilePatternAssociation(t).addSchema(e)}),n?this.addSchemaHandle(o,n):this.getOrAddSchemaHandle(o)},e.prototype.clearExternalSchemas=function(){var e=this;this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={};for(var t in this.contributionSchemas)this.schemasById[t]=this.contributionSchemas[t];for(var n in this.contributionAssociations){var r=this.getOrAddFilePatternAssociation(n);this.contributionAssociations[n].forEach(function(t){var n=e.normalizeId(t);r.addSchema(n)})}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),n=this.schemasById[t];return n?n.getResolvedSchema():u.TPromise.as(null)},e.prototype.loadSchema=function(e){return this.telemetryService&&s.startsWith(e,"https://schema.management.azure.com")&&this.telemetryService.publicLog("json.schema",{schemaURL:e}),this.requestService.makeRequest({url:e}).then(function(t){var r=t.responseText;if(!r){var i=n.localize(0,null,f(e));return new v({},[i])}var s={},a=[];s=o.parse(r,c);var c=a.length?[n.localize(1,null,f(e),a[0])]:[];return new v(s,c)},function(t){var r=n.localize(2,null,f(e),t.responseText||i.getErrorStatusDescription(t.status)||t.toString());return new v({},[r])})},e.prototype.resolveSchemaContent=function(e){var t=this,o=e.errors.slice(0),i=e.schema,s=function(e,t){if(!t)return e;var n=e;return t.substr(1).split("/").some(function(e){return n=n[e],!n}),n},a=function(e,t,i){var a=s(t,i);"object"==typeof a?r.mixin(e,a,!1):o.push(n.localize(3,null,i,t.id)),delete e.$ref},l=function(e,r,i){return t.getOrAddSchemaHandle(r).getUnresolvedSchema().then(function(t){if(t.errors.length){var s=i?r+"#"+i:r;o.push(n.localize(4,null,s,t.errors[0]))}return a(e,t.schema,i),p(e,t.schema)})},p=function(e,t){for(var n=[e],r=[],o=[];n.length;){var i=n.pop();if(!(r.indexOf(i)>=0))if(r.push(i),Array.isArray(i))i.forEach(function(e){n.push(e)});else if(c.isObject(i)){if(i.$ref){var s=i.$ref.split("#",2);if(s[0].length>0){o.push(l(i,s[0],s[1]));continue}a(i,t,s[1])}for(var p in i)n.push(i[p])}}return u.Promise.join(o)};return p(i,i).then(function(e){return new y(i,o)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter(function(e){return"$schema"===e.key.value&&!!e.value});if(n.length>0){var r=n[0].value.getValue();if(!s.startsWith(r,"http://")&&!s.startsWith(r,"https://")&&!s.startsWith(r,"file://")){var o=this.contextService.toResource(r);o&&(r=o.toString())}if(r){var i=this.normalizeId(r);return this.getOrAddSchemaHandle(i).getResolvedSchema()}}}for(var a=this.filePatternAssociations.length-1;a>=0;a--){var c=this.filePatternAssociations[a];if(c.matchesPattern(e))return c.getCombinedSchema(this).getResolvedSchema()}return u.TPromise.as(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var n={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(e,n)},e=__decorate([__param(0,p.IRequestService),__param(1,m.ITelemetryService),__param(2,h.IWorkspaceContextService),__param(3,l.IResourceService)],e)}();t.JSONSchemaService=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/jsonWorker",["require","exports","vs/base/common/severity","vs/editor/common/modes/abstractModeWorker","./parser/jsonParser","vs/languages/json/common/features/jsonFormatter","./jsonSchemaService","./jsonIntellisense","vs/base/common/winjs.base","vs/base/common/strings","./contributions/projectJSONContribution","vs/editor/common/modes/supports","./contributions/packageJSONContribution","./contributions/bowerJSONContribution","./contributions/globPatternContribution","vs/base/common/errors","vs/platform/markers/common/markers","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/editor/common/services/resourceService","vs/platform/instantiation/common/instantiation"],function(e,t,n,r,o,i,s,a,c,u,l,p,h,m,f,d,g,v,y,S,b){var O=function(e){function t(t,n,r,o,i,c,u){e.call(this,t,n,r,o),this.jsonMode=t,this.requestService=i,this.contextService=c,this.schemaService=u.createInstance(s.JSONSchemaService),this.contributions=[u.createInstance(l.ProjectJSONContribution),u.createInstance(h.PackageJSONContribution),u.createInstance(m.BowerJSONContribution),u.createInstance(f.GlobPatternContribution)],this.jsonIntellisense=new a.JSONIntellisense(this.schemaService,this.requestService,this.contributions)}return __extends(t,e),t.prototype._createInPlaceReplaceSupport=function(){return new p.WorkerInplaceReplaceSupport(this.resourceService,this)},t.prototype._doConfigure=function(e){var t=this;return e&&e.schemas&&(this.schemaService.clearExternalSchemas(),e.schemas.forEach(function(e){if(e.url&&(e.fileMatch||e.schema)){var n=e.url;if(!u.startsWith(n,"http://")&&!u.startsWith(n,"https://")&&!u.startsWith(n,"file://")){var r=t.contextService.toResource(n);r&&(n=r.toString())}n&&t.schemaService.registerExternalSchema(n,e.fileMatch,e.schema)}else if(e.filePattern&&e.schemaPath){var n=t.contextService.toResource(e.schemaPath).toString(),o=e.filePattern?[e.filePattern]:[];t.schemaService.registerExternalSchema(n,o)}})),c.TPromise.as(!0)},t.prototype.setSchemaContributions=function(e){return this.schemaService.setSchemaContributions(e),c.TPromise.as(!0)},t.prototype.doValidate=function(e){var t=this,r=this.resourceService.get(e),i=new o.JSONParser,s=r.getValue();if(0!==s.length){var a=i.parse(s);this.schemaService.getSchemaForResource(e.toString(),a).then(function(o){if(o)if(o.errors.length&&a.root){var i="object"===a.root.type?a.root.getFirstProperty("$schema"):null;if(i){var s=i.value||i;a.warnings.push({location:{start:s.start,end:s.end},message:o.errors[0]})}else a.warnings.push({location:{start:a.root.start,end:a.root.start+1},message:o.errors[0]})}else a.validate(o.schema);var c={},u=[];a.errors.concat(a.warnings).forEach(function(e,t){var o=e.location.start+" "+e.location.end+" "+e.message;if(!c[o]){c[o]=!0;var i=r.getPositionFromOffset(e.location.start),s=r.getPositionFromOffset(e.location.end);u.push({message:e.message,severity:t>=a.errors.length?n["default"].Warning:n["default"].Error,startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:s.lineNumber,endColumn:s.column})}}),t.markerService.changeOne(t._getMode().getId(),e,u)})}},t.prototype.doSuggest=function(e,t){var n=this.resourceService.get(e);return this.jsonIntellisense.doSuggest(e,n,t)},t.prototype.computeInfo=function(e,t){var n=this,r=this.resourceService.get(e),i=new o.JSONParser,s=i.parse(r.getValue()),a=r.getOffsetFromPosition(t),u=s.getNodeFromOffset(a),l=u;if(u&&"string"===u.type){var p=u;if(p.isKey){var h=u.parent;u=h.value}}return u?this.schemaService.getSchemaForResource(e.toString(),s).then(function(t){if(t){var o=[];s.validate(t.schema,o,u.start);var i=null,a=null;o.every(function(e){return e.node===u&&!e.inverted&&e.schema&&(i=i||e.schema.description,a=a||e.schema.id),!0});for(var c=u.getNodeLocation(),p=n.contributions.length-1;p>=0;p--){var h=n.contributions[p],m=h.getInfoContribution(e,c);if(m)return m.then(function(e){return n.createInfoResult(e,l,r)})}if(i){var f=[{className:"documentation",text:i}];return n.createInfoResult(f,l,r)}}return null}):c.Promise.as(null)},t.prototype.createInfoResult=function(e,t,n){var r=n.getRangeFromOffsetAndLength(t.start,t.end-t.start),o={value:"",htmlContent:e,className:"typeInfo json",range:r};return o},t.prototype.getOutline=function(e){function t(e,r){if("array"===r.type)r.items.forEach(function(n){t(e,n)});else if("object"===r.type){var o=r;o.properties.forEach(function(r){var o=n.getRangeFromOffsetAndLength(r.start,r.end-r.start),i=r.value;if(i){var s=t([],i),a="object"===i.type?"module":i.type;e.push({label:r.key.getValue(),icon:a,type:i.type,range:o,children:s})}})}return e}var n=this.resourceService.get(e),r=new o.JSONParser,i=r.parse(n.getValue()),s=i.root;if(!s)return c.Promise.as(null);var a=e.toString();if(("vscode://defaultsettings/keybindings.json"===a||u.endsWith(a.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){var l=[];return s.items.forEach(function(e){if("object"===e.type){var t=e.getFirstProperty("key");if(t&&t.value){var r=n.getRangeFromOffsetAndLength(e.start,e.end-e.start);l.push({label:t.value.getValue(),icon:"function",type:"string",range:r,children:[]})}}}),c.Promise.as(l)}var l=t([],s);return c.Promise.as(l)},t.prototype.textReplace=function(e,t){return p.ReplaceSupport.valueSetReplace(["true","false"],e,t)},t.prototype.format=function(e,t,n){var r=this.resourceService.get(e);return c.TPromise.as(i.format(r,t,n))},t.prototype.navigateValueSetFallback=function(e,t,n){var r=this,i=this.resourceService.get(e),s=i.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn}),a=new o.JSONParser,c=new o.JSONDocumentConfig;c.ignoreDanglingComma=!0;var l=a.parse(i.getValue(),c),p=l.getNodeFromOffsetEndInclusive(s);return!p||"string"!==p.type&&"number"!==p.type&&"boolean"!==p.type&&"null"!==p.type?null:this.schemaService.getSchemaForResource(e.toString(),l).then(function(t){if(t){var o=[],s={},a={add:function(e){s[e.label]||(s[e.label]=!0,o.push(e))},setAsIncomplete:function(){},error:function(e){d.onUnexpectedError(e)}};r.jsonIntellisense.getValueSuggestions(e,t,l,p.parent,p.start,a);for(var c=i.getRangeFromOffsetAndLength(p.start,p.end-p.start),h=i.getValueInRange(c),m=0,f=o.length;f>m;m++)if(u.equalsIgnoreCase(o[m].label,h)){var g=m;return n?g=(m+1)%f:(g=m-1,0>g&&(g=f-1)),{value:o[g].label,range:c}}return null}})},t=__decorate([__param(2,S.IResourceService),__param(3,g.IMarkerService),__param(4,v.IRequestService),__param(5,y.IWorkspaceContextService),__param(6,b.IInstantiationService)],t)}(r.AbstractModeWorker);t.JSONWorker=O});