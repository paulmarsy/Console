"use strict";define("vs/languages/json/common/features/tokenization",["require","exports","vs/base/common/json","vs/editor/common/modes"],function(t,e,o,n){function r(t,e){return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new a(t,null,null,!1)},tokenize:function(o,n,r,a){return i(t,e,o,n,r,a)}}}function i(t,e,r,i,s,c){void 0===s&&(s=0);var u=0,l=!1;switch(i.scanError){case o.ScanError.UnexpectedEndOfString:r='"'+r,u=1;break;case o.ScanError.UnexpectedEndOfComment:r="/*"+r,u=2}var p,m,h=o.createScanner(r),f=i.lastWasColon;for(m={tokens:[],actualStopOffset:r.length,endState:i.clone(),modeTransitions:[{startIndex:0,mode:t}]};;){var d=s+h.getPosition(),k=n.Bracket.None,g="";if(p=h.scan(),p===o.SyntaxKind.EOF)break;if(d===s+h.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+r.substr(h.getPosition(),3));switch(l&&(d-=u),l=u>0,p){case o.SyntaxKind.OpenBraceToken:k=n.Bracket.Open,g="delimiter.bracket.json";break;case o.SyntaxKind.CloseBraceToken:k=n.Bracket.Close,g="delimiter.bracket.json";break;case o.SyntaxKind.OpenBracketToken:k=n.Bracket.Open,g="delimiter.array.json";break;case o.SyntaxKind.CloseBracketToken:k=n.Bracket.Close,g="delimiter.array.json";break;case o.SyntaxKind.ColonToken:g="delimiter.colon.json";break;case o.SyntaxKind.CommaToken:g="delimiter.comma.json";break;case o.SyntaxKind.TrueKeyword:case o.SyntaxKind.FalseKeyword:case o.SyntaxKind.NullKeyword:g="keyword.json";break;case o.SyntaxKind.StringLiteral:g=f?"string.value.json":"string.key.json";break;case o.SyntaxKind.NumericLiteral:g="number.json"}if(e)switch(p){case o.SyntaxKind.LineCommentTrivia:g="comment.line.json";break;case o.SyntaxKind.BlockCommentTrivia:g="comment.block.json"}""!==g&&(f=p===o.SyntaxKind.ColonToken),m.endState=new a(i.getMode(),i.getStateData(),h.getTokenError(),f),m.tokens.push({startIndex:d,type:g,bracket:k})}return m}e.createTokenizationSupport=r;var a=function(){function t(t,e,o,n){this._mode=t,this._state=e,this.scanError=o,this.lastWasColon=n}return t.prototype.clone=function(){return new t(this._mode,this._state,this.scanError,this.lastWasColon)},t.prototype.equals=function(e){return e===this?!0:e&&e instanceof t?this.scanError===e.scanError&&this.lastWasColon===e.lastWasColon:!1},t.prototype.getMode=function(){return this._mode},t.prototype.tokenize=function(t){throw new Error},t.prototype.getStateData=function(){return this._state},t.prototype.setStateData=function(t){this._state=t},t}()});var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)};define("vs/languages/json/common/json",["require","exports","vs/editor/common/modes/supports","vs/platform/platform","vs/nls!vs/languages/json/common/json","vs/languages/json/common/features/tokenization","vs/editor/common/modes/abstractMode","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors","vs/editor/common/modes/supports/onEnter","vs/languages/json/common/jsonContributionRegistry"],function(t,e,o,n,r,i,a,s,c,u,l){var p=function(t){function e(e,n,a){var s=this;t.call(this,e,n,a,c.AsyncDescriptor.create("vs/languages/json/common/jsonWorker","JSONWorker")),this.tokenizationSupport=i.createTokenizationSupport(this,!0),this.electricCharacterSupport=new o.BracketElectricCharacterSupport(this,{brackets:[{tokenType:"delimiter.bracket.json",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.json",open:"[",close:"]",isElectric:!0}]}),this.extraInfoSupport=this,this.outlineSupport=this,this.outlineGroupLabel=Object.create(null),this.outlineGroupLabel.object=r.localize(0,null),this.outlineGroupLabel.array=r.localize(1,null),this.outlineGroupLabel.string=r.localize(2,null),this.outlineGroupLabel.number=r.localize(3,null),this.outlineGroupLabel["boolean"]=r.localize(4,null),this.outlineGroupLabel["null"]=r.localize(5,null),this.formattingSupport=this,this.characterPairSupport=new o.CharacterPairSupport(this,{autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]}),this.suggestSupport=new o.SuggestSupport(this,{triggerCharacters:[],excludeTokens:["comment.line.json","comment.block.json"],suggest:function(t,e){return s.suggest(t,e)}}),this.onEnterSupport=new u.OnEnterSupport(this.getId(),{brackets:[{open:"{",close:"}"},{open:"[",close:"]"}]})}return __extends(e,t),e.prototype.creationDone=function(){t.prototype.creationDone.call(this),this._threadService.isInMainThread&&this._configureWorkerSchemas(this.getSchemaConfiguration())},e.prototype.getSchemaConfiguration=function(){var t=n.Registry.as(l.Extensions.JSONContribution);return t.getSchemaContributions()},e.prototype.getSerializableState=function(){return this.getSchemaConfiguration()},e.prototype.setData=function(t){this._worker(function(e){return e.setSchemaContributions(t)})},e.prototype._worker=function(e){return t.prototype._worker.call(this,e)},e.prototype._configureWorkerSchemas=function(t){return this._worker(function(e){return e.setSchemaContributions(t)})},e.prototype.computeInfo=function(t,e){return this._worker(function(o){return o.computeInfo(t,e)})},e.prototype.getOutline=function(t){return this._worker(function(e){return e.getOutline(t)})},e.prototype.formatDocument=function(t,e){return this._worker(function(o){return o.format(t,null,e)})},e.prototype.formatRange=function(t,e,o){return this._worker(function(n){return n.format(t,e,o)})},e.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},e.prototype.getWordDefinition=function(){return e.WORD_DEFINITION},e.$_configureWorkerSchemas=s.AllWorkersAttr(e,e.prototype._configureWorkerSchemas),e.$computeInfo=s.OneWorkerAttr(e,e.prototype.computeInfo),e.$getOutline=s.OneWorkerAttr(e,e.prototype.getOutline),e.$formatDocument=s.OneWorkerAttr(e,e.prototype.formatDocument),e.$formatRange=s.OneWorkerAttr(e,e.prototype.formatRange),e.WORD_DEFINITION=a.createWordRegExp(".-"),e}(a.AbstractMode);e.JSONMode=p});