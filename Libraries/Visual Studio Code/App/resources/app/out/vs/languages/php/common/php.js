"use strict";var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};define("vs/languages/php/common/php",["require","exports","vs/base/common/objects","vs/editor/common/modes/supports","vs/editor/common/modes","vs/editor/common/modes/abstractMode","vs/editor/common/modes/abstractState","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors","vs/editor/common/modes/supports/onEnter"],function(t,e,n,r,o,i,s,a,p,c){var u=[{tokenType:"delimiter.bracket.php",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.php",open:"[",close:"]",isElectric:!0},{tokenType:"delimiter.parenthesis.php",open:"(",close:")",isElectric:!0}],h=function(){for(var t={},e=0;e<u.length;e++){var n=u[e];t[n.open]={tokenType:n.tokenType,bracketType:o.Bracket.Open},t[n.close]={tokenType:n.tokenType,bracketType:o.Bracket.Close}}return{stringIsBracket:function(e){return!!t[e]},tokenTypeFromString:function(e){return t[e].tokenType},bracketTypeFromString:function(e){return t[e].bracketType}}}(),l="+-*%&|^~!=<>(){}[]/?;:.,@",f="+-*/%&|^~!=<>(){}[]\"'\\/?;:.,#",g="	 ",d=n.createKeywordMatcher(["abstract","and","array","as","break","callable","case","catch","cfunction","class","clone","const","continue","declare","default","do","else","elseif","enddeclare","endfor","endforeach","endif","endswitch","endwhile","extends","false","final","for","foreach","function","global","goto","if","implements","interface","instanceof","insteadof","namespace","new","null","object","old_function","or","private","protected","public","resource","static","switch","throw","trait","try","true","use","var","while","xor","die","echo","empty","exit","eval","include","include_once","isset","list","require","require_once","return","print","unset","__construct"]),m=n.createKeywordMatcher(["__CLASS__","__DIR__","__FILE__","__LINE__","__NAMESPACE__","__METHOD__","__FUNCTION__","__TRAIT__"]),y=n.createKeywordMatcher(["$GLOBALS","$_SERVER","$_GET","$_POST","$_FILES","$_REQUEST","$_SESSION","$_ENV","$_COOKIE","$php_errormsg","$HTTP_RAW_POST_DATA","$http_response_header","$argc","$argv"]),k=function(t){return l.indexOf(t)>-1},_=function(t){return"$"===t[0]},S=function(t){function e(e,n,r,o){void 0===o&&(o=""),t.call(this,e),this.name=n,this.parent=r,this.whitespaceTokenType=o}return __extends(e,t),e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n)&&this.name===n.name&&this.whitespaceTokenType===n.whitespaceTokenType&&s.AbstractState.safeEquals(this.parent,n.parent):!1},e.prototype.tokenize=function(t){return t.setTokenRules(f,g),t.skipWhitespace().length>0?{type:this.whitespaceTokenType}:this.stateTokenize(t)},e.prototype.stateTokenize=function(t){throw new Error("To be implemented")},e}(s.AbstractState);e.PHPState=S;var x=function(t){function e(e,n,r,o){void 0===o&&(o=!0),t.call(this,e,"string",n,"string.php"),this.delimiter=r,this.isAtBeginning=o}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent),this.delimiter,this.isAtBeginning)},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n)&&this.delimiter===n.delimiter&&this.isAtBeginning===n.isAtBeginning:!1},e.prototype.tokenize=function(t){var e=this.isAtBeginning?1:0;for(this.isAtBeginning=!1;!t.eos();){var n=t.next();if("\\"===n){if(0!==e)return t.goBack(1),{type:"string.php"};if(t.eos())return{type:"string.php",nextState:this.parent};t.next()}else if(n===this.delimiter)return{type:"string.php",nextState:this.parent};e+=1}return{type:"string.php"}},e}(S);e.PHPString=x;var v=function(t){function e(e,n,r){t.call(this,e,"number",n),this.firstDigit=r}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent),this.firstDigit)},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n)&&this.firstDigit===n.firstDigit:!1},e.prototype.tokenize=function(t){var e=this.firstDigit,n=10,r=!1,o=!1;if("0"===e&&!t.eos()){if(e=t.peek(),"x"===e.toLowerCase())n=16;else if("b"===e.toLowerCase())n=2;else if("."===e)n=10;else{if(!i.isDigit(e,8))return{type:"number.php",nextState:this.parent};n=8}t.next()}for(;!t.eos();)if(e=t.peek(),i.isDigit(e,n))t.next();else if(10===n)if("."!==e||o||r){if("e"!==e||o)break;o=!0,t.next(),t.eos()||"-"!==t.peek()||t.next()}else r=!0,t.next();else{if(8!==n||!i.isDigit(e,10))break;n=10,t.next()}var s="number";return 16===n?s+=".hex":8===n?s+=".octal":2===n&&(s+=".binary"),{type:s+".php",nextState:this.parent}},e}(S);e.PHPNumber=v;var T=function(t){function e(e,n){t.call(this,e,"comment",n,"comment.php")}return __extends(e,t),e.prototype.makeClone=function(){return new w(this.getMode(),s.AbstractState.safeClone(this.parent))},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n):!1},e.prototype.tokenize=function(t){for(;!t.eos();){var e=t.next();if("?"===e&&!t.eos()&&">"===t.peek())return t.goBack(1),{type:"comment.php",nextState:this.parent}}return{type:"comment.php",nextState:this.parent}},e}(S);e.PHPLineComment=T;var w=function(t){function e(e,n){t.call(this,e,"comment",n,"comment.php")}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent))},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n):!1},e.prototype.tokenize=function(t){for(;!t.eos();){var e=t.next();if("*"===e&&!t.eos()&&!t.peekWhitespace()&&"/"===t.peek())return t.next(),{type:"comment.php",nextState:this.parent}}return{type:"comment.php"}},e}(S);e.PHPDocComment=w;var b=function(t){function e(e,n){t.call(this,e,"expression",n)}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent))},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n):!1},e.prototype.stateTokenize=function(t){if(i.isDigit(t.peek(),10))return{nextState:new v(this.getMode(),this,t.next())};if(t.advanceIfString("?>").length)return{type:"metatag.php",nextState:this.parent,bracket:o.Bracket.Close};var e=t.nextToken();if(d(e.toString().toLowerCase()))return{type:"keyword.php"};if(m(e))return{type:"constant.php"};if(y(e))return{type:"variable.predefined.php"};if(_(e))return{type:"variable.php"};if("/"===e){if(!t.eos()&&!t.peekWhitespace())switch(t.peekToken()){case"/":return{nextState:new T(this.getMode(),this)};case"*":return t.nextToken(),{nextState:new w(this.getMode(),this)}}}else{if("#"===e)return{nextState:new T(this.getMode(),this)};if('"'===e||"'"===e)return{nextState:new x(this.getMode(),this,e)};if(h.stringIsBracket(e))return{bracket:h.bracketTypeFromString(e),type:h.tokenTypeFromString(e)};if(k(e))return{type:"delimiter.php"}}return{type:""}},e}(S);e.PHPStatement=b;var C=function(t){function e(e,n){t.call(this,e,"plain",n)}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent))},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n):!1},e.prototype.stateTokenize=function(t){return t.advanceIfStringCaseInsensitive("<?php").length||t.advanceIfString("<?=").length||t.advanceIfString("<%=").length||t.advanceIfString("<?").length||t.advanceIfString("<%").length?{type:"metatag.php",nextState:new b(this.getMode(),new I(this.getMode(),this.parent)),bracket:o.Bracket.Open}:(t.next(),{type:""})},e}(S);e.PHPPlain=C;var I=function(t){function e(e,n){t.call(this,e,"enterHTML",n)}return __extends(e,t),e.prototype.makeClone=function(){return new e(this.getMode(),s.AbstractState.safeClone(this.parent))},e.prototype.equals=function(n){return n instanceof e?t.prototype.equals.call(this,n):!1},e}(S);e.PHPEnterHTMLState=I;var P=function(t){function e(e,n,o){var i=this;t.call(this,e,n,o,p.AsyncDescriptor.create("vs/languages/php/common/phpWorker","PHPWorker")),this.modeService=e.modeService,this.outlineSupport=this,this.parameterHintsSupport=new r.ParameterHintsSupport(this,{triggerCharacters:["(",","],excludeTokens:null,getParameterHints:function(t,e){return i.getParameterHints(t,e)}}),this.extraInfoSupport=this,this.electricCharacterSupport=new r.BracketElectricCharacterSupport(this,{brackets:u}),this.tokenizationSupport=new r.TokenizationSupport(this,this,!0,!1),this.characterPairSupport=new r.CharacterPairSupport(this,{autoClosingPairs:[{open:"{",close:"}",notIn:["string.php"]},{open:"[",close:"]",notIn:["string.php"]},{open:"(",close:")",notIn:["string.php"]},{open:'"',close:'"',notIn:["string.php"]},{open:"'",close:"'",notIn:["string.php"]}]}),this.suggestSupport=new r.SuggestSupport(this,{triggerCharacters:[".",":","$"],excludeTokens:["comment"],suggest:function(t,e){return i.suggest(t,e)}}),this.onEnterSupport=new c.OnEnterSupport(this.getId(),{brackets:[{open:"(",close:")"},{open:"{",close:"}"},{open:"[",close:"]"}]})}return __extends(e,t),e.prototype.asyncCtor=function(){return this.modeService.getOrCreateMode("text/html")},e.prototype._worker=function(e){return t.prototype._worker.call(this,e)},e.prototype.getOutline=function(t){return this._worker(function(e){return e.getOutline(t)})},e.prototype.getParameterHints=function(t,e){return this._worker(function(n){return n.getParameterHints(t,e)})},e.prototype.computeInfo=function(t,e){return this._worker(function(n){return n.computeInfo(t,e)})},e.prototype.getInitialState=function(){var t=this.modeService.getMode("text/html"),e=t.tokenizationSupport.getInitialState();return e.setStateData(new I(this,null)),e},e.prototype.enterNestedMode=function(t){return t instanceof I},e.prototype.getNestedModeInitialState=function(t){var e=t.parent;return t.parent=null,{state:e,missingModePromise:null}},e.prototype.getLeavingNestedModeData=function(t,e){var n=/<\?/i.exec(t);return null!==n?{nestedModeBuffer:t.substring(0,n.index),bufferAfterNestedMode:t.substring(n.index),stateAfterNestedMode:new C(this,null)}:null},e.prototype.onReturningFromNestedMode=function(t,e){t.parent=e},e.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//","#"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},e.prototype.getWordDefinition=function(){return e.WORD_DEFINITION},e.$getOutline=a.OneWorkerAttr(e,e.prototype.getOutline),e.$getParameterHints=a.OneWorkerAttr(e,e.prototype.getParameterHints),e.$computeInfo=a.OneWorkerAttr(e,e.prototype.computeInfo),e.WORD_DEFINITION=i.createWordRegExp("$-"),e}(i.AbstractMode);e.PHPMode=P});