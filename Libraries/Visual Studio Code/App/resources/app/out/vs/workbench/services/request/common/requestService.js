/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},__param=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};define("vs/workbench/services/request/common/requestService",["require","exports","vs/base/common/winjs.base","vs/base/common/timer","vs/base/common/async","vs/base/common/strings","vs/nls!vs/workbench/services/request/common/requestService","vs/platform/request/common/baseRequestService","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/platform/workspace/common/workspace"],function(e,t,r,n,s,o,i,c,a,u,m){var h=function(e){function t(t,r,n){e.call(this,r,n),this._threadService=t,t.registerInstance(this)}return __extends(t,e),t.prototype.getId=function(){return"NativeRequestService"},t.prototype.makeRequest=function(t){var n=t.url;if(!n)throw new Error("IRequestService.makeRequest: Url is required.");return o.startsWith(n,"file://")?r.xhr(t).then(null,function(e){return 0===e.status&&e.responseText?e:r.Promise.wrapError({status:404,responseText:i.localize(0,null)})}):e.prototype.makeRequest.call(this,t)},t.prototype.makeCrossOriginRequest=function(e){if(this._nodeJSXHRFunctionPromise){var t=n.nullEvent;return this._nodeJSXHRFunctionPromise.then(function(r){return s.always(r(e),function(e){t.data&&(t.data.status=e.status),t.stop()})})}return this._threadService.MainThread(this,"makeCrossOriginRequest",null,[e])},t=__decorate([__param(0,u.IThreadService),__param(1,m.IWorkspaceContextService),__param(2,a.ITelemetryService)],t)}(c.BaseRequestService);t.WorkerRequestService=h});