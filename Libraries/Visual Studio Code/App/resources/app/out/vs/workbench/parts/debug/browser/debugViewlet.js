define("vs/css!vs/workbench/parts/debug/browser/media/debugViewlet",["vs/css!vs/workbench/parts/debug/browser/debugViewlet"],{});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__decorate=this&&this.__decorate||function(e,t,i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,i,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,i))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,i,e)||e},n)}},__param=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define("vs/workbench/parts/debug/browser/debugActionItems",["require","exports","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/workbench/parts/debug/common/debug","vs/platform/configuration/common/configuration"],function(e,t,i,n,r,s,o){var a=function(e){function t(t,i,n){e.call(this,null,t),this.debugService=i,this.select=document.createElement("select"),this.select.className="debug-select action-bar-select",this.toDispose=[],this.registerListeners(n)}return __extends(t,e),t.prototype.registerListeners=function(e){var t=this;this.toDispose.push(n.addStandardDisposableListener(this.select,"change",function(e){t.actionRunner.run(t._action,e.target.value).done()})),this.toDispose.push(this.debugService.addListener2(s.ServiceEvents.STATE_CHANGED,function(){t.select.disabled=t.debugService.getState()!==s.State.Inactive})),this.toDispose.push(e.addListener2(o.ConfigurationServiceEventTypes.UPDATED,function(e){t.setOptions().done()}))},t.prototype.render=function(e){n.addClass(e,"select-container"),e.appendChild(this.select),this.setOptions().done()},t.prototype.setOptions=function(){var e=this,t=this.select.selectedIndex;return this.select.options.length=0,this.debugService.loadLaunchConfig().then(function(i){if(!i||!i.configurations)return e.select.options.add(e.createOption("<none>")),void(e.select.disabled=!0);var n=i.configurations;e.select.disabled=n.length<1;for(var r=!1,s=0;s<n.length;s++)e.select.options.add(e.createOption(n[s].name)),n[s].name===e.debugService.selectedConfigName&&(e.select.selectedIndex=s,r=!0);return!r&&n.length>0?((!t||0>t||t>=n.length)&&(t=0),e.select.selectedIndex=t,e.actionRunner.run(e._action,n[t].name)):void 0})},t.prototype.createOption=function(e){var t=document.createElement("option");return t.value=e,t.text=e,t},t.prototype.dispose=function(){this.debugService=null,this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(1,s.IDebugService),__param(2,o.IConfigurationService)],t)}(r.BaseActionItem);t.SelectConfigActionItem=a});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__decorate=this&&this.__decorate||function(e,t,i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,i,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,i))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,i,e)||e},n)}},__param=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define("vs/workbench/parts/debug/browser/debugViewlet",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugViewlet","vs/base/browser/dom","vs/base/browser/builder","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/events","vs/workbench/browser/ui/actionBarRegistry","vs/base/parts/tree/browser/treeImpl","vs/base/browser/ui/splitview/splitview","vs/workbench/browser/ui/viewlet","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugViewer","vs/workbench/parts/debug/browser/debugActions","vs/workbench/parts/debug/browser/debugActionItems","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/css!./media/debugViewlet"],function(e,t,i,n,r,s,o,a,c,d,p,u,l,h,v,g,S,b,f,m,_,w,A,E){function I(e){var t=document.createElement("div");return n.addClass(t,"debug-view-content"),e.appendChild(t),t}var x=h.IDebugService,y={indentPixels:8,twistiePixels:20},D=r.$,C=function(e){function t(t,i,n,r,s){e.call(this,t,"variablesView",i,n),this.debugService=r,this.instantiationService=s}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=D("div.title").appendTo(t);D("span").text(i.localize(0,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;this.treeContainer=I(e),n.addClass(this.treeContainer,"debug-variables"),this.tree=new p.Tree(this.treeContainer,{dataSource:new g.VariablesDataSource(this.debugService),renderer:this.instantiationService.createInstance(g.VariablesRenderer),controller:new g.BaseDebugController(this.debugService,this.contextMenuService,new g.VariablesActionProvider(this.instantiationService))},y);var i=this.debugService.getViewModel();this.tree.setInput(i);var r=this.instantiationService.createInstance(l.CollapseAction,this.tree,!1,"explorer-action collapse-explorer");this.toolBar.setActions(d.prepareActions([r]))(),this.toDispose.push(i.addListener2(h.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){return t.onFocusedStackFrameUpdated()})),this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){r.enabled=t.debugService.getState()===h.State.Running||t.debugService.getState()===h.State.Stopped}))},t.prototype.onFocusedStackFrameUpdated=function(){var e=this;this.tree.refresh().then(function(){var t=e.debugService.getViewModel().getFocusedStackFrame();return t?t.getScopes(e.debugService).then(function(t){return t.length>0?e.tree.expand(t[0]):void 0}):void 0}).done()},t=__decorate([__param(1,E.IMessageService),__param(2,f.IContextMenuService),__param(3,x),__param(4,m.IInstantiationService)],t)}(l.CollapsibleViewletView),B=function(e){function t(t,i,n,r,s){var o=this;e.call(this,t,"expressionsView",i,n),this.debugService=r,this.instantiationService=s,this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(e){e instanceof v.Expression&&o.expand()}))}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=D("div.title").appendTo(t);D("span").text(i.localize(1,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;this.treeContainer=I(e),n.addClass(this.treeContainer,"debug-watch");var i=new g.WatchExpressionsActionProvider(this.instantiationService);this.tree=new p.Tree(this.treeContainer,{dataSource:new g.WatchExpressionsDataSource(this.debugService),renderer:this.instantiationService.createInstance(g.WatchExpressionsRenderer,i,this.actionRunner),controller:new g.WatchExpressionsController(this.debugService,this.contextMenuService,i)},y),this.tree.setInput(this.debugService.getModel());var r=this.instantiationService.createInstance(S.AddWatchExpressionAction,S.AddWatchExpressionAction.ID,S.AddWatchExpressionAction.LABEL),s=this.instantiationService.createInstance(l.CollapseAction,this.tree,!1,"explorer-action collapse-explorer"),a=this.instantiationService.createInstance(S.RemoveAllWatchExpressionsAction,S.RemoveAllWatchExpressionsAction.ID,S.RemoveAllWatchExpressionsAction.LABEL);this.toolBar.setActions(d.prepareActions([r,s,a]))(),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(e){return t.onWatchExpressionsUpdated(e)})),this.toDispose.push(this.debugService.getViewModel().addListener2(h.ViewModelEvents.SELECTED_EXPRESSION_UPDATED,function(e){e&&e instanceof v.Expression&&t.tree.refresh(e,!1).then(function(){t.tree.setHighlight(e);var i=t.tree.addListener(c.EventType.HIGHLIGHT,function(n){n.highlight||(t.debugService.getViewModel().setSelectedExpression(null),t.tree.refresh(e).done(null,o.onUnexpectedError),i())})}).done(null,o.onUnexpectedError)}))},t.prototype.onWatchExpressionsUpdated=function(e){var t=this;this.tree.refresh().then(function(){return e instanceof v.Expression?t.tree.reveal(e):s.Promise.as(!0)}).done()},t=__decorate([__param(1,E.IMessageService),__param(2,f.IContextMenuService),__param(3,x),__param(4,m.IInstantiationService)],t)}(l.CollapsibleViewletView),k=function(e){function t(t,i,n,r,s){e.call(this,t,"callStackView",i,n),this.debugService=r,this.instantiationService=s}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=D("div.title").appendTo(t);D("span").text(i.localize(2,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;this.renderMessageBox(e),this.treeContainer=I(e),n.addClass(this.treeContainer,"debug-call-stack"),this.tree=new p.Tree(this.treeContainer,{dataSource:new g.CallStackDataSource,renderer:this.instantiationService.createInstance(g.CallStackRenderer)},y);var r=this.debugService.getModel();this.tree.setInput(r),this.toDispose.push(this.tree.addListener2("selection",function(e){if(e.selection.length){var i=e.selection[0];if(i instanceof v.StackFrame){var n=i;t.debugService.setFocusedStackFrameAndEvaluate(n);var r="mouse"===e.payload.origin,s=r,o=e&&e.payload&&e.payload.originalEvent;o&&r&&2===o.detail&&(s=!1,o.preventDefault());var a=o&&(o.ctrlKey||o.metaKey);t.debugService.openOrRevealEditor(n.source,n.lineNumber,s,a)}}})),this.toDispose.push(r.addListener2(h.ModelEvents.THREADS_UPDATED,function(){t.tree.refresh()})),this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(e){return t.debugService.getState()===h.State.Stopped&&"step"!==e?(t.messageBox.textContent=i.localize(3,null,e),"exception"===e?t.messageBox.classList.add("exception"):t.messageBox.classList.remove("exception"),void(t.messageBox.hidden=!1)):void(t.messageBox.hidden=!0)})),this.toDispose.push(this.debugService.getViewModel().addListener2(h.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){var e=t.debugService.getViewModel().getFocusedStackFrame();if(e){var i=t.debugService.getModel().getThreads();for(var n in i)i[n].callStack.some(function(t){return t===e})&&t.tree.expand(i[n]);t.tree.setFocus(e)}}))},t.prototype.renderMessageBox=function(e){this.messageBox=document.createElement("div"),n.addClass(this.messageBox,"debug-message-box"),this.messageBox.hidden=!0,e.appendChild(this.messageBox)},t=__decorate([__param(1,E.IMessageService),__param(2,f.IContextMenuService),__param(3,x),__param(4,m.IInstantiationService)],t)}(l.CollapsibleViewletView),L=function(e){function t(i,n,r,s,o){var a=this;e.call(this,i,t.getExpandedBodySize(s.getModel().getBreakpoints().length+s.getModel().getExceptionBreakpoints().length),!1,"breakpointsView",n,r),this.debugService=s,this.instantiationService=o,this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){return a.onBreakpointsChange()}))}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=D("div.title").appendTo(t);D("span").text(i.localize(4,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;this.treeContainer=I(e),n.addClass(this.treeContainer,"debug-breakpoints");var i=new g.BreakpointsActionProvider(this.instantiationService);this.tree=new p.Tree(this.treeContainer,{dataSource:new g.BreakpointsDataSource,renderer:this.instantiationService.createInstance(g.BreakpointsRenderer,i,this.actionRunner),controller:new g.BreakpointsController(this.debugService,this.contextMenuService,i),sorter:{compare:function(e,t,i){var n=t,r=i;return n instanceof v.ExceptionBreakpoint?-1:r instanceof v.ExceptionBreakpoint?1:n.source.uri.toString()!==r.source.uri.toString()?n.source.uri.toString().localeCompare(r.source.uri.toString()):n.desiredLineNumber-r.desiredLineNumber}}},y);var r=this.debugService.getModel();this.tree.setInput(r),this.toDispose.push(this.tree.addListener2("selection",function(e){if(e.selection.length){var i=e.selection[0];if(i instanceof v.Breakpoint){var n=i;if(!n.source.inMemory){var r="mouse"===e.payload.origin,s=r,o=e&&e.payload&&e.payload.originalEvent;o&&r&&2===o.detail&&(s=!1,o.preventDefault());var a=o&&(o.ctrlKey||o.metaKey);t.debugService.openOrRevealEditor(n.source,n.lineNumber,s,a)}}}})),this.tree.refresh()},t.prototype.getActions=function(){return[this.instantiationService.createInstance(S.ReapplyBreakpointsAction,S.ReapplyBreakpointsAction.ID,S.ReapplyBreakpointsAction.LABEL),this.instantiationService.createInstance(S.ToggleBreakpointsActivatedAction,S.ToggleBreakpointsActivatedAction.ID,S.ToggleBreakpointsActivatedAction.LABEL),this.instantiationService.createInstance(S.RemoveAllBreakpointsAction,S.RemoveAllBreakpointsAction.ID,S.RemoveAllBreakpointsAction.LABEL)]},t.prototype.onBreakpointsChange=function(){this.expandedBodySize=t.getExpandedBodySize(this.debugService.getModel().getBreakpoints().length+this.debugService.getModel().getExceptionBreakpoints().length),this.tree&&this.tree.refresh()},t.getExpandedBodySize=function(e){return 24*Math.min(t.MAX_VISIBLE_FILES,e)},t.MAX_VISIBLE_FILES=9,t=__decorate([__param(1,E.IMessageService),__param(2,f.IContextMenuService),__param(3,x),__param(4,m.IInstantiationService)],t)}(l.AdaptiveCollapsibleViewletView),R=function(e){function t(t,i,n,r,s){var o=this;e.call(this,h.VIEWLET_ID,t),this.progressService=i,this.debugService=n,this.instantiationService=r,this.contextService=s,this.progressRunner=null,this.toDispose=[],this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){o.onDebugServiceStateChange()}))}return __extends(t,e),t.prototype.create=function(t){e.prototype.create.call(this,t),this.$el=t.div().addClass("debug-viewlet"),this.splitView=new u.SplitView(this.$el.getHTMLElement());var i=this.getActionRunner();return this.splitView.addView(this.instantiationService.createInstance(C,i)),this.splitView.addView(this.instantiationService.createInstance(B,i)),this.splitView.addView(this.instantiationService.createInstance(k,i)),this.splitView.addView(this.instantiationService.createInstance(L,i)),s.Promise.as(null)},t.prototype.layout=function(e){this.splitView&&this.splitView.layout(e.height)},t.prototype.getActions=function(){var e=this;return this.actions||(this.actions=[this.instantiationService.createInstance(S.StartDebugAction,S.StartDebugAction.ID,S.StartDebugAction.LABEL),this.instantiationService.createInstance(S.SelectConfigAction,S.SelectConfigAction.ID,S.SelectConfigAction.LABEL),this.instantiationService.createInstance(S.ConfigureAction,S.ConfigureAction.ID,S.ConfigureAction.LABEL),this.instantiationService.createInstance(S.OpenReplAction,S.OpenReplAction.ID,S.OpenReplAction.LABEL)],this.actions.forEach(function(t){e.toDispose.push(t)})),this.actions},t.prototype.getActionItem=function(e){return e.id===S.SelectConfigAction.ID?this.instantiationService.createInstance(b.SelectConfigActionItem,e):null},t.prototype.getSecondaryActions=function(){return[]},t.prototype.onDebugServiceStateChange=function(){this.progressRunner&&this.progressRunner.done(),this.debugService.getState()===h.State.Initializing?this.progressRunner=this.progressService.show(!0):this.progressRunner=null},t.prototype.dispose=function(){this.toDispose=a.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(0,A.ITelemetryService),__param(1,_.IProgressService),__param(2,x),__param(3,m.IInstantiationService),__param(4,w.IWorkspaceContextService)],t)}(l.Viewlet);t.DebugViewlet=R});