/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
define("vs/css!vs/workbench/parts/debug/browser/media/debugViewlet",["vs/css!vs/workbench/parts/debug/browser/debugViewlet"],{});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__decorate=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(3>o?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},__param=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define("vs/workbench/parts/debug/browser/debugActionItems",["require","exports","vs/base/common/lifecycle","vs/base/common/errors","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/workbench/parts/debug/common/debug","vs/platform/configuration/common/configuration"],function(e,t,i,n,s,o,r,a){"use strict";var c=function(e){function t(t,i,n){e.call(this,null,t),this.debugService=i,this.select=document.createElement("select"),this.select.className="debug-select action-bar-select",this.toDispose=[],this.registerListeners(n)}return __extends(t,e),t.prototype.registerListeners=function(e){var t=this;this.toDispose.push(s.addStandardDisposableListener(this.select,"change",function(e){t.actionRunner.run(t._action,e.target.value).done(null,n.onUnexpectedError)})),this.toDispose.push(this.debugService.addListener2(r.ServiceEvents.STATE_CHANGED,function(){t.select.disabled=t.debugService.getState()!==r.State.Inactive})),this.toDispose.push(e.addListener2(a.ConfigurationServiceEventTypes.UPDATED,function(e){t.setOptions().done(null,n.onUnexpectedError)}))},t.prototype.render=function(e){s.addClass(e,"select-container"),e.appendChild(this.select),this.setOptions().done(null,n.onUnexpectedError)},t.prototype.focus=function(){this.select&&this.select.focus()},t.prototype.blur=function(){this.select&&this.select.blur()},t.prototype.setOptions=function(){var e=this,t=this.select.selectedIndex;return this.select.options.length=0,this.debugService.loadLaunchConfig().then(function(i){if(!i||!i.configurations)return e.select.add(e.createOption("<none>")),void(e.select.disabled=!0);var n=i.configurations;e.select.disabled=n.length<1;for(var s=!1,o=e.debugService.getConfigurationName(),r=0;r<n.length;r++)e.select.add(e.createOption(n[r].name)),o===n[r].name&&(e.select.selectedIndex=r,s=!0);return!s&&n.length>0?((!t||0>t||t>=n.length)&&(t=0),e.select.selectedIndex=t,e.actionRunner.run(e._action,n[t].name)):void 0})},t.prototype.createOption=function(e){var t=document.createElement("option");return t.value=e,t.text=e,t},t.prototype.dispose=function(){this.debugService=null,this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(1,r.IDebugService),__param(2,a.IConfigurationService)],t)}(o.BaseActionItem);t.SelectConfigActionItem=c});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__decorate=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(3>o?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},__param=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define("vs/workbench/parts/debug/browser/debugViewlet",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugViewlet","vs/base/browser/dom","vs/base/browser/builder","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/events","vs/workbench/browser/actionBarRegistry","vs/base/parts/tree/browser/treeImpl","vs/base/browser/ui/splitview/splitview","vs/workbench/common/memento","vs/workbench/browser/viewlet","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugViewer","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/browser/debugActionItems","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/platform/storage/common/storage","vs/css!./media/debugViewlet"],function(e,t,i,n,s,o,r,a,c,l,p,d,u,h,v,g,S,b,f,m,E,w,_,y,A,D){"use strict";function I(e){var t=document.createElement("div");return n.addClass(t,"debug-view-content"),e.appendChild(t),t}var M=v.IDebugService,C=function(e){return{indentPixels:8,twistiePixels:20,ariaLabel:e}},x=s.$,T=function(e){function t(n,s,o,r,a,c,l){e.call(this,n,!!s[t.MEMENTO],i.localize(0,null),o,r),this.settings=s,this.telemetryService=a,this.debugService=c,this.instantiationService=l}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=x("div.title").appendTo(t);x("span").text(i.localize(1,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;n.addClass(e,"debug-variables"),this.treeContainer=I(e),this.tree=new p.Tree(this.treeContainer,{dataSource:new S.VariablesDataSource(this.debugService),renderer:this.instantiationService.createInstance(S.VariablesRenderer),accessibilityProvider:new S.VariablesAccessibilityProvider,controller:new S.BaseDebugController(this.debugService,this.contextMenuService,new S.VariablesActionProvider(this.instantiationService))},C(i.localize(2,null)));var s=this.debugService.getViewModel();this.tree.setInput(s);var o=this.instantiationService.createInstance(h.CollapseAction,this.tree,!1,"explorer-action collapse-explorer");this.toolBar.setActions(l.prepareActions([o]))(),this.toDispose.push(s.addListener2(v.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){return t.onFocusedStackFrameUpdated()})),this.toDispose.push(this.debugService.addListener2(v.ServiceEvents.STATE_CHANGED,function(){o.enabled=t.debugService.getState()===v.State.Running||t.debugService.getState()===v.State.Stopped})),this.toDispose.push(this.tree.addListener2(c.EventType.FOCUS,function(e){var i=e.payload&&"mouse"===e.payload.origin,n=e.focus instanceof g.Variable;i&&n&&t.telemetryService.publicLog("debug/variables/selected")}))},t.prototype.onFocusedStackFrameUpdated=function(){var e=this;this.tree.refresh().then(function(){var t=e.debugService.getViewModel().getFocusedStackFrame();return t?t.getScopes(e.debugService).then(function(t){return t.length>0?e.tree.expand(t[0]):void 0}):void 0}).done(null,r.onUnexpectedError)},t.prototype.shutdown=function(){this.settings[t.MEMENTO]=this.state===d.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.MEMENTO="variablesview.memento",t=__decorate([__param(2,A.IMessageService),__param(3,m.IContextMenuService),__param(4,y.ITelemetryService),__param(5,M),__param(6,E.IInstantiationService)],t)}(h.CollapsibleViewletView),L=function(e){function t(n,s,o,r,a,c){var l=this;e.call(this,n,!!s[t.MEMENTO],i.localize(3,null),o,r),this.settings=s,this.debugService=a,this.instantiationService=c,this.toDispose.push(this.debugService.getModel().addListener2(v.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(e){e instanceof g.Expression&&l.expand()}))}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=x("div.title").appendTo(t);x("span").text(i.localize(4,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;n.addClass(e,"debug-watch"),this.treeContainer=I(e);var s=new S.WatchExpressionsActionProvider(this.instantiationService);this.tree=new p.Tree(this.treeContainer,{dataSource:new S.WatchExpressionsDataSource(this.debugService),renderer:this.instantiationService.createInstance(S.WatchExpressionsRenderer,s,this.actionRunner),accessibilityProvider:new S.WatchExpressionsAccessibilityProvider,controller:new S.WatchExpressionsController(this.debugService,this.contextMenuService,s)},C(i.localize(5,null))),this.tree.setInput(this.debugService.getModel());var o=this.instantiationService.createInstance(b.AddWatchExpressionAction,b.AddWatchExpressionAction.ID,b.AddWatchExpressionAction.LABEL),a=this.instantiationService.createInstance(h.CollapseAction,this.tree,!1,"explorer-action collapse-explorer"),d=this.instantiationService.createInstance(b.RemoveAllWatchExpressionsAction,b.RemoveAllWatchExpressionsAction.ID,b.RemoveAllWatchExpressionsAction.LABEL);this.toolBar.setActions(l.prepareActions([o,a,d]))(),this.toDispose.push(this.debugService.getModel().addListener2(v.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(e){return t.onWatchExpressionsUpdated(e)})),this.toDispose.push(this.debugService.getViewModel().addListener2(v.ViewModelEvents.SELECTED_EXPRESSION_UPDATED,function(e){e&&e instanceof g.Expression&&t.tree.refresh(e,!1).then(function(){t.tree.setHighlight(e),t.tree.addOneTimeListener(c.EventType.HIGHLIGHT,function(e){e.highlight||t.debugService.getViewModel().setSelectedExpression(null)})}).done(null,r.onUnexpectedError)}))},t.prototype.onWatchExpressionsUpdated=function(e){var t=this;this.tree.refresh().done(function(){return e instanceof g.Expression?t.tree.reveal(e):o.TPromise.as(!0)},r.onUnexpectedError)},t.prototype.shutdown=function(){this.settings[t.MEMENTO]=this.state===d.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.MEMENTO="watchexpressionsview.memento",t=__decorate([__param(2,A.IMessageService),__param(3,m.IContextMenuService),__param(4,M),__param(5,E.IInstantiationService)],t)}(h.CollapsibleViewletView),k=function(e){function t(n,s,o,r,a,c,l){e.call(this,n,!!s[t.MEMENTO],i.localize(6,null),o,r),this.settings=s,this.telemetryService=a,this.debugService=c,this.instantiationService=l}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=x("div.debug-call-stack-title").appendTo(t);x("span.title").text(i.localize(7,null)).appendTo(n),this.pauseMessage=x("span.pause-message").appendTo(n),this.pauseMessage.hide(),this.pauseMessageLabel=x("span.label").appendTo(this.pauseMessage)},t.prototype.renderBody=function(e){var t=this;n.addClass(e,"debug-call-stack"),this.treeContainer=I(e),this.tree=new p.Tree(this.treeContainer,{dataSource:this.instantiationService.createInstance(S.CallStackDataSource),renderer:this.instantiationService.createInstance(S.CallStackRenderer),accessibilityProvider:this.instantiationService.createInstance(S.CallstackAccessibilityProvider)},C(i.localize(8,null)));var s=this.debugService.getModel();this.tree.setInput(s),this.toDispose.push(this.tree.addListener2("selection",function(e){if(e.selection.length){var i=e.selection[0];if(i instanceof g.StackFrame){var n=i;t.debugService.setFocusedStackFrameAndEvaluate(n);var s="mouse"===e.payload.origin,o=s,a=e&&e.payload&&e.payload.originalEvent;a&&s&&2===a.detail&&(o=!1,a.preventDefault());var c=a&&(a.ctrlKey||a.metaKey);t.debugService.openOrRevealEditor(n.source,n.lineNumber,o,c).done(null,r.onUnexpectedError)}}})),this.toDispose.push(this.tree.addListener2(c.EventType.FOCUS,function(e){var i=e.payload&&"mouse"===e.payload.origin,n=e.focus instanceof g.StackFrame;i&&n&&t.telemetryService.publicLog("debug/callStack/selected")})),this.toDispose.push(s.addListener2(v.ModelEvents.CALLSTACK_UPDATED,function(){t.tree.refresh().done(null,r.onUnexpectedError)})),this.toDispose.push(this.debugService.getViewModel().addListener2(v.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){var e=t.debugService.getModel().getThreads()[t.debugService.getViewModel().getFocusedThreadId()];e&&e.stoppedDetails&&e.stoppedDetails.reason&&"step"!==e.stoppedDetails.reason?(t.pauseMessageLabel.text(i.localize(9,null,e.stoppedDetails.reason)),e.stoppedDetails.text&&t.pauseMessageLabel.title(e.stoppedDetails.text),"exception"===e.stoppedDetails.reason?t.pauseMessageLabel.addClass("exception"):t.pauseMessageLabel.removeClass("exception"),t.pauseMessage.show()):t.pauseMessage.hide()})),this.toDispose.push(this.debugService.getViewModel().addListener2(v.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){var e=t.debugService.getViewModel().getFocusedStackFrame();if(e){var i=t.debugService.getModel().getThreads();for(var n in i)i[n].getCachedCallStack()&&i[n].getCachedCallStack().some(function(t){return t===e})&&t.tree.expand(i[n]);t.tree.setFocus(e)}}))},t.prototype.shutdown=function(){this.settings[t.MEMENTO]=this.state===d.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.MEMENTO="callstackview.memento",t=__decorate([__param(2,A.IMessageService),__param(3,m.IContextMenuService),__param(4,y.ITelemetryService),__param(5,M),__param(6,E.IInstantiationService)],t)}(h.CollapsibleViewletView),B=function(e){function t(n,s,o,r,a,c){var l=this;e.call(this,n,t.getExpandedBodySize(a.getModel().getBreakpoints().length+a.getModel().getFunctionBreakpoints().length+a.getModel().getExceptionBreakpoints().length),!!s[t.MEMENTO],i.localize(10,null),o,r),this.settings=s,this.debugService=a,this.instantiationService=c,this.toDispose.push(this.debugService.getModel().addListener2(v.ModelEvents.BREAKPOINTS_UPDATED,function(){return l.onBreakpointsChange()}))}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=x("div.title").appendTo(t);x("span").text(i.localize(11,null)).appendTo(n)},t.prototype.renderBody=function(e){var t=this;n.addClass(e,"debug-breakpoints"),this.treeContainer=I(e);var s=new S.BreakpointsActionProvider(this.instantiationService);this.tree=new p.Tree(this.treeContainer,{dataSource:new S.BreakpointsDataSource,renderer:this.instantiationService.createInstance(S.BreakpointsRenderer,s,this.actionRunner),accessibilityProvider:this.instantiationService.createInstance(S.BreakpointsAccessibilityProvider),controller:new S.BreakpointsController(this.debugService,this.contextMenuService,s),sorter:{compare:function(e,t,i){var n=t,s=i;return n instanceof g.ExceptionBreakpoint?-1:s instanceof g.ExceptionBreakpoint?1:n instanceof g.FunctionBreakpoint?-1:s instanceof g.FunctionBreakpoint?1:n.source.uri.toString()!==s.source.uri.toString()?n.source.uri.toString().localeCompare(s.source.uri.toString()):n.desiredLineNumber-s.desiredLineNumber}}},C(i.localize(12,null)));var o=this.debugService.getModel();this.tree.setInput(o),this.toDispose.push(this.tree.addListener2("selection",function(e){if(e.selection.length){var i=e.selection[0];if(i instanceof g.Breakpoint){var n=i;if(!n.source.inMemory){var s="mouse"===e.payload.origin,o=s,a=e&&e.payload&&e.payload.originalEvent;a&&s&&2===a.detail&&(o=!1,a.preventDefault());var c=a&&(a.ctrlKey||a.metaKey);t.debugService.openOrRevealEditor(n.source,n.lineNumber,o,c).done(null,r.onUnexpectedError)}}}})),this.toDispose.push(this.debugService.getViewModel().addListener2(v.ViewModelEvents.SELECTED_FUNCTION_BREAKPOINT_UPDATED,function(e){e&&e instanceof g.FunctionBreakpoint&&t.tree.refresh(e,!1).then(function(){t.tree.setHighlight(e),t.tree.addOneTimeListener(c.EventType.HIGHLIGHT,function(e){e.highlight||t.debugService.getViewModel().setSelectedFunctionBreakpoint(null)})}).done(null,r.onUnexpectedError)}))},t.prototype.getActions=function(){return[this.instantiationService.createInstance(b.AddFunctionBreakpointAction,b.AddFunctionBreakpointAction.ID,b.AddFunctionBreakpointAction.LABEL),this.instantiationService.createInstance(b.ToggleBreakpointsActivatedAction,b.ToggleBreakpointsActivatedAction.ID,b.ToggleBreakpointsActivatedAction.LABEL),this.instantiationService.createInstance(b.RemoveAllBreakpointsAction,b.RemoveAllBreakpointsAction.ID,b.RemoveAllBreakpointsAction.LABEL)]},t.prototype.onBreakpointsChange=function(){var e=this.debugService.getModel();this.expandedBodySize=t.getExpandedBodySize(e.getBreakpoints().length+e.getExceptionBreakpoints().length+e.getFunctionBreakpoints().length),this.tree&&this.tree.refresh()},t.getExpandedBodySize=function(e){return 22*Math.min(t.MAX_VISIBLE_FILES,e)},t.prototype.shutdown=function(){this.settings[t.MEMENTO]=this.state===d.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.MAX_VISIBLE_FILES=9,t.MEMENTO="breakopintsview.memento",t=__decorate([__param(2,A.IMessageService),__param(3,m.IContextMenuService),__param(4,M),__param(5,E.IInstantiationService)],t)}(h.AdaptiveCollapsibleViewletView),V=function(e){function t(t,i,n,s,o,r){var a=this;e.call(this,v.VIEWLET_ID,t),this.progressService=i,this.debugService=n,this.instantiationService=s,this.contextService=o,this.progressRunner=null,this.viewletSettings=this.getMemento(r,u.Scope.WORKSPACE),this.views=[],this.toDispose=[],this.toDispose.push(this.debugService.addListener2(v.ServiceEvents.STATE_CHANGED,function(){a.onDebugServiceStateChange()}))}return __extends(t,e),t.prototype.create=function(t){var n=this;if(e.prototype.create.call(this,t),this.$el=t.div().addClass("debug-viewlet"),this.contextService.getWorkspace()){var s=this.getActionRunner();this.views.push(this.instantiationService.createInstance(T,s,this.viewletSettings)),this.views.push(this.instantiationService.createInstance(L,s,this.viewletSettings)),this.views.push(this.instantiationService.createInstance(k,s,this.viewletSettings)),this.views.push(this.instantiationService.createInstance(B,s,this.viewletSettings)),this.splitView=new d.SplitView(this.$el.getHTMLElement()),this.toDispose.push(this.splitView),this.views.forEach(function(e){return n.splitView.addView(e)}),this.toDispose.push(this.splitView.onFocus(function(e){n.lastFocusedView=e}))}else this.$el.append(x(['<div class="noworkspace-view">',"<p>",i.localize(13,null),"</p>","<p>",i.localize(14,null),"</p>","</div>"].join("")));return o.TPromise.as(null)},t.prototype.setVisible=function(t){var i=this;return e.prototype.setVisible.call(this,t).then(function(){return o.TPromise.join(i.views.map(function(e){return e.setVisible(t)}))})},t.prototype.layout=function(e){this.splitView&&this.splitView.layout(e.height)},t.prototype.focus=function(){return e.prototype.focus.call(this),this.lastFocusedView&&this.lastFocusedView.isExpanded()?void this.lastFocusedView.focusBody():void(this.views.length>0&&this.views[0].focusBody())},t.prototype.getActions=function(){var e=this;return this.debugService.getState()===v.State.Disabled?[]:(this.actions||(this.actions=[this.instantiationService.createInstance(b.StartDebugAction,b.StartDebugAction.ID,b.StartDebugAction.LABEL),this.instantiationService.createInstance(b.SelectConfigAction,b.SelectConfigAction.ID,b.SelectConfigAction.LABEL),this.instantiationService.createInstance(b.ConfigureAction,b.ConfigureAction.ID,b.ConfigureAction.LABEL),this.instantiationService.createInstance(b.ToggleReplAction,b.ToggleReplAction.ID,b.ToggleReplAction.LABEL)],this.actions.forEach(function(t){e.toDispose.push(t)})),this.actions)},t.prototype.getActionItem=function(e){return e.id===b.SelectConfigAction.ID?this.instantiationService.createInstance(f.SelectConfigActionItem,e):null},t.prototype.onDebugServiceStateChange=function(){this.progressRunner&&this.progressRunner.done(),this.debugService.getState()===v.State.Initializing?this.progressRunner=this.progressService.show(!0):this.progressRunner=null},t.prototype.dispose=function(){this.toDispose=a.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.prototype.shutdown=function(){this.views.forEach(function(e){return e.shutdown()}),e.prototype.shutdown.call(this)},t=__decorate([__param(0,y.ITelemetryService),__param(1,w.IProgressService),__param(2,M),__param(3,E.IInstantiationService),__param(4,_.IWorkspaceContextService),__param(5,D.IStorageService)],t)}(h.Viewlet);t.DebugViewlet=V});
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/fa6d0f03813dfb9df4589c30121e9fcffa8a8ec8/vs\workbench\parts\debug\browser\debugViewlet.js.map
