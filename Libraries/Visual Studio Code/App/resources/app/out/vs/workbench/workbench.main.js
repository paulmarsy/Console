/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
function Lexer(e){this.tokens=[],this.tokens.links={},this.options=e||marked.defaults,this.rules=block.normal,this.options.gfm&&(this.options.tables?this.rules=block.tables:this.rules=block.gfm)}function InlineLexer(e,t){if(this.options=t||marked.defaults,this.links=e,this.rules=inline.normal,this.renderer=this.options.renderer||new Renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=inline.breaks:this.rules=inline.gfm:this.options.pedantic&&(this.rules=inline.pedantic)}function Renderer(e){this.options=e||{}}function Parser(e){this.tokens=[],this.token=null,this.options=e||marked.defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options}function escape(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function unescape(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function replace(e,t){return e=e.source,t=t||"",function n(i,o){return i?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,o),n):new RegExp(e,t)}}function noop(){}function merge(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function marked(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null),t=merge({},marked.defaults,t||{});var i,o,r=t.highlight,s=0;try{i=Lexer.lex(e,t)}catch(a){return n(a)}o=i.length;var c=function(e){if(e)return t.highlight=r,n(e);var o;try{o=Parser.parse(i,t)}catch(s){e=s}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return c();if(delete t.highlight,!o)return c();for(;s<i.length;s++)!function(e){return"code"!==e.type?--o||c():r(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--o||c():(e.text=n,e.escaped=!0,void(--o||c()))})}(i[s])}else try{return t&&(t=merge({},marked.defaults,t)),Parser.parse(Lexer.lex(e,t),t)}catch(a){if(a.message+="\nPlease report this to https://github.com/chjj/marked.",(t||marked.defaults).silent)return"<p>An error occured:</p><pre>"+escape(a.message+"",!0)+"</pre>";throw a}}define("vs/base/browser/iframe",["require","exports"],function(e,t){"use strict";function n(e){if(!e.parent||e.parent===e)return null;try{var t=e.location,n=e.parent.location;if(t.protocol!==n.protocol||t.hostname!==n.hostname||t.port!==n.port)return o=!0,null}catch(i){return o=!0,null}return e.parent}function i(e,t){for(var n,i=e.document.getElementsByTagName("iframe"),o=0,r=i.length;r>o;o++)if(n=i[o],n.contentWindow===t)return n;return null}var o=!1,r=null,s=function(){function e(){}return e.getSameOriginWindowChain=function(){if(!r){r=[];var e,t=window;do e=n(t),e?r.push({window:t,iframeElement:i(e,t)}):r.push({window:t,iframeElement:null}),t=e;while(t)}return r.slice(0)},e.hasDifferentOriginAncestor=function(){return r||this.getSameOriginWindowChain(),o},e.getPositionOfChildWindowRelativeToAncestorWindow=function(e,t){if(!t||e===t)return{top:0,left:0};for(var n=0,i=0,o=this.getSameOriginWindowChain(),r=0;r<o.length;r++){var s=o[r];if(s.window===t)break;if(!s.iframeElement)break;var a=s.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}},e}();t.IframeUtils=s}),define("vs/base/browser/styleMutator",["require","exports"],function(e,t){"use strict";function n(e,t){e.getAttribute("data-transform")!==t&&(e.setAttribute("data-transform",t),e.style.webkitTransform=t)}function i(e,t){e.getAttribute("data-transform")!==t&&(e.setAttribute("data-transform",t),e.style.transform=t)}t.StyleMutator={setMaxWidth:function(e,t){var n=t+"px";e.style.maxWidth!==n&&(e.style.maxWidth=n)},setWidth:function(e,t){var n=t+"px";e.style.width!==n&&(e.style.width=n)},setHeight:function(e,t){var n=t+"px";e.style.height!==n&&(e.style.height=n)},setTop:function(e,t){var n=t+"px";e.style.top!==n&&(e.style.top=n)},setLeft:function(e,t){var n=t+"px";e.style.left!==n&&(e.style.left=n)},setBottom:function(e,t){var n=t+"px";e.style.bottom!==n&&(e.style.bottom=n)},setRight:function(e,t){var n=t+"px";e.style.right!==n&&(e.style.right=n)},setFontSize:function(e,t){var n=t+"px";e.style.fontSize!==n&&(e.style.fontSize=n)},setLineHeight:function(e,t){var n=t+"px";e.style.lineHeight!==n&&(e.style.lineHeight=n)},setTransform:null,setDisplay:function(e,t){e.style.display!==t&&(e.style.display=t)},setVisibility:function(e,t){e.style.visibility!==t&&(e.style.visibility=t)}},function(){var e=document.createElement("div");"undefined"!=typeof e.style.webkitTransform?t.StyleMutator.setTransform=n:t.StyleMutator.setTransform=i}()}),define("vs/base/browser/ui/list/rangeMap",["require","exports"],function(e,t){"use strict";function n(e,t){if(e.start>=t.end||t.start>=e.end)return null;var n=Math.max(e.start,t.start),i=Math.min(e.end,t.end);return 0>=i-n?null:{start:n,end:i}}function i(e,t){for(var i=[],o=0,r=t;o<r.length;o++){var s=r[o];if(!(e.start>=s.range.end)){if(e.end<s.range.start)break;var a=n(e,s.range);a&&i.push({range:a,size:s.size})}}return i}function o(e,t){var n=e.start,i=e.end;return{start:n+t,end:i+t}}function r(e){for(var t=[],n=null,i=0,o=e;i<o.length;i++){var r=o[i],s=r.range.start,a=r.range.end,c=r.size;n&&c===n.size?n.range.end=a:(n={range:{start:s,end:a},size:c},t.push(n))}return t}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r(e.reduce(function(e,t){return e.concat(t)},[]))}t.intersect=n,t.groupIntersect=i,t.consolidate=r;var a=function(){function e(){this.groups=[],this._size=0}return e.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n.length-t,c=i({start:0,end:e},this.groups),u=i({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(function(e){return{range:o(e.range,a),size:e.size}}),l=n.map(function(t,n){return{range:{start:e+n,end:e+n+1},size:t.size}});this.groups=s(c,l,u),this._size=this.groups.reduce(function(e,t){return e+t.size*(t.range.end-t.range.start)},0)},Object.defineProperty(e.prototype,"count",{get:function(){var e=this.groups.length;return e?this.groups[e-1].range.end:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.indexAt=function(e){if(0>e)return-1;for(var t=0,n=0,i=0,o=this.groups;i<o.length;i++){var r=o[i],s=r.range.end-r.range.start,a=n+s*r.size;if(a>e)return t+Math.floor((e-n)/r.size);t+=s,n=a}return t},e.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.count)},e.prototype.positionAt=function(e){if(0>e)return-1;for(var t=0,n=0,i=0,o=this.groups;i<o.length;i++){var r=o[i],s=r.range.end-r.range.start,a=n+s;if(a>e)return t+(e-n)*r.size;t+=s*r.size,n=a}return-1},e.prototype.dispose=function(){this.groups=null},e}();t.RangeMap=a}),define("vs/base/browser/ui/scrollbar/scrollableElement",["require","exports"],function(e,t){"use strict";function n(e){switch(e){case"hidden":return i.Hidden;case"visible":return i.Visible;default:return i.Auto}}!function(e){e[e.Auto=0]="Auto",e[e.Hidden=1]="Hidden",e[e.Visible=2]="Visible"}(t.Visibility||(t.Visibility={}));var i=t.Visibility;t.visibilityFromString=n}),define("vs/base/common/arrays",["require","exports"],function(e,t){"use strict";function n(e,t){return void 0===t&&(t=0),e[e.length-(1+t)]}function i(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],function(){e.splice(n,1),n--,i--})}function o(e,t,n){if(e.length!==t.length)return!1;for(var i=0,o=e.length;o>i;i++)if(!n(e[i],t[i]))return!1;return!0}function r(e,t,n){for(var i=0,o=e.length-1;o>=i;){var r=(i+o)/2|0,s=n(e[r],t);if(0>s)i=r+1;else{if(!(s>0))return r;o=r-1}}return-(i+1)}function s(e,t){var n=0,i=e.length;if(0===i)return 0;for(;i>n;){var o=Math.floor((n+i)/2);t(e[o])?i=o:n=o+1}return n}function a(e,t){var n=new Array;if(t)for(var i={},o=0;o<e.length;o++)for(var r=0;r<e[o].length;r++){var s=e[o][r],a=t(s);i.hasOwnProperty(a)||(i[a]=!0,n.push(s))}else for(var o=0,c=e.length;c>o;o++)n.push.apply(n,e[o]);return n}function c(e){return e?e.filter(function(e){return!!e}):e}function u(e,t){return e.indexOf(t)>=0}function l(e,t,n){var i=e[t],o=e[n];e[t]=o,e[n]=i}function d(e,t,n){e.splice(n,0,e.splice(t,1)[0])}function h(e){return!Array.isArray(e)||0===e.length}function p(e,t){if(!t)return e.filter(function(t,n){return e.indexOf(t)===n});var n={};return e.filter(function(e){var i=t(e);return n[i]?!1:(n[i]=!0,!0)})}function f(e,t,n){void 0===n&&(n=null);for(var i=0;i<e.length;i++){var o=e[i];if(t(o))return o}return n}function m(e,t,n){void 0===n&&(n=function(e,t){return e===t});for(var i=0,o=0,r=Math.min(e.length,t.length);r>o&&n(e[o],t[o]);o++)i++;return i}function v(e){return e.reduce(function(e,t){return e.concat(t)},[])}t.tail=n,t.forEach=i,t.equals=o,t.binarySearch=r,t.findFirst=s,t.merge=a,t.coalesce=c,t.contains=u,t.swap=l,t.move=d,t.isFalsyOrEmpty=h,t.distinct=p,t.first=f,t.commonPrefixLength=m,t.flatten=v}),define("vs/base/common/assert",["require","exports"],function(e,t){"use strict";function n(e,t){if(!e||null===e)throw new Error(t?"Assertion failed ("+t+")":"Assertion Failed")}t.ok=n}),define("vs/base/common/collections",["require","exports"],function(e,t){"use strict";function n(){return Object.create(null)}function i(){return Object.create(null)}function o(e,t,n){void 0===n&&(n=null);var i=String(t);return a(e,i)?e[i]:n}function r(e,t,n){var i=String(t);return a(e,i)?e[i]:("function"==typeof n&&(n=n()),e[i]=n,n)}function s(e,t,n){e[n(t)]=t}function a(e,t){return h.call(e,t)}function c(e){var t=[];for(var n in e)h.call(e,n)&&t.push(e[n]);return t}function u(e,t){for(var n in e)if(h.call(e,n)){var i=t({key:n,value:e[n]},function(){delete e[n]});if(i===!1)return}}function l(e,t){return h.call(e,t)?(delete e[t],!0):!1}function d(e,t){var i=n();return e.forEach(function(e){return r(i,t(e),[]).push(e)}),i}t.createStringDictionary=n,t.createNumberDictionary=i,t.lookup=o,t.lookupOrInsert=r,t.insert=s;var h=Object.prototype.hasOwnProperty;t.contains=a,t.values=c,t.forEach=u,t.remove=l,t.groupBy=d}),define("vs/base/common/diff/diffChange",["require","exports"],function(e,t){"use strict";t.DifferenceType={Add:0,Remove:1,Change:2};var n=function(){function e(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}return e.prototype.getChangeType=function(){return 0===this.originalLength?t.DifferenceType.Add:0===this.modifiedLength?t.DifferenceType.Remove:t.DifferenceType.Change},e.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength},e.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength},e}();t.DiffChange=n}),define("vs/base/common/diff/diff",["require","exports","vs/base/common/diff/diffChange"],function(e,t,n){"use strict";var i=function(){function e(){}return e.Assert=function(e,t){if(!e)throw new Error(t)},e}();t.Debug=i;var o=function(){function e(){}return e.Copy=function(e,t,n,i,o){for(var r=0;o>r;r++)n[i+r]=e[t+r]},e}();t.MyArray=o;var r=1447,s=function(){function e(){this.m_changes=[],this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE,this.m_originalCount=0,this.m_modifiedCount=0}return e.prototype.MarkNextChange=function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new n.DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE},e.prototype.AddOriginalElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++},e.prototype.AddModifiedElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++},e.prototype.getChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes},e.prototype.getReverseChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes},e}(),a=function(){function e(e,t,n){void 0===n&&(n=null),this.OriginalSequence=e,this.ModifiedSequence=t,this.ContinueProcessingPredicate=n,this.m_originalIds=[],this.m_modifiedIds=[],this.m_forwardHistory=[],this.m_reverseHistory=[],this.ComputeUniqueIdentifiers()}return e.prototype.ComputeUniqueIdentifiers=function(){var e=this.OriginalSequence.getLength(),t=this.ModifiedSequence.getLength();this.m_originalIds=new Array(e),this.m_modifiedIds=new Array(t);var n,i={},o=1;for(n=0;e>n;n++){var r=this.OriginalSequence.getElementHash(n);i.hasOwnProperty(r)?this.m_originalIds[n]=i[r]:(this.m_originalIds[n]=o++,i[r]=this.m_originalIds[n])}for(n=0;t>n;n++){var s=this.ModifiedSequence.getElementHash(n);i.hasOwnProperty(s)?this.m_modifiedIds[n]=i[s]:(this.m_modifiedIds[n]=o++,i[s]=this.m_modifiedIds[n])}},e.prototype.ElementsAreEqual=function(e,t){return this.m_originalIds[e]===this.m_modifiedIds[t]},e.prototype.ComputeDiff=function(){return this._ComputeDiff(0,this.OriginalSequence.getLength()-1,0,this.ModifiedSequence.getLength()-1)},e.prototype._ComputeDiff=function(e,t,n,i){var o=[!1];return this.ComputeDiffRecursive(e,t,n,i,o)},e.prototype.ComputeDiffRecursive=function(e,t,o,r,s){for(s[0]=!1;t>=e&&r>=o&&this.ElementsAreEqual(e,o);)e++,o++;for(;t>=e&&r>=o&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||o>r){var a=void 0;return r>=o?(i.Assert(e===t+1,"originalStart should only be one more than originalEnd"),a=[new n.DiffChange(e,0,o,r-o+1)]):t>=e?(i.Assert(o===r+1,"modifiedStart should only be one more than modifiedEnd"),a=[new n.DiffChange(e,t-e+1,o,0)]):(i.Assert(e===t+1,"originalStart should only be one more than originalEnd"),i.Assert(o===r+1,"modifiedStart should only be one more than modifiedEnd"),a=[]),a}var c=[0],u=[0],l=this.ComputeRecursionPoint(e,t,o,r,c,u,s),d=c[0],h=u[0];if(null!==l)return l;if(!s[0]){var p=this.ComputeDiffRecursive(e,d,o,h,s),f=[];return f=s[0]?[new n.DiffChange(d+1,t-(d+1)+1,h+1,r-(h+1)+1)]:this.ComputeDiffRecursive(d+1,t,h+1,r,s),this.ConcatenateChanges(p,f)}return[new n.DiffChange(e,t-e+1,o,r-o+1)]},e.prototype.WALKTRACE=function(e,t,i,o,r,a,c,u,l,d,h,p,f,m,v,g,y,_){var b,S=null,E=null,w=new s,C=t,T=i,k=f[0]-g[0]-o,x=Number.MIN_VALUE,I=this.m_forwardHistory.length-1;do b=k+e,b===C||T>b&&l[b-1]<l[b+1]?(h=l[b+1],m=h-k-o,x>h&&w.MarkNextChange(),x=h,w.AddModifiedElement(h+1,m),k=b+1-e):(h=l[b-1]+1,m=h-k-o,x>h&&w.MarkNextChange(),x=h-1,w.AddOriginalElement(h,m+1),k=b-1-e),I>=0&&(l=this.m_forwardHistory[I],e=l[0],C=1,T=l.length-1);while(--I>=-1);if(S=w.getReverseChanges(),_[0]){var D=f[0]+1,A=g[0]+1;if(null!==S&&S.length>0){var L=S[S.length-1];D=Math.max(D,L.getOriginalEnd()),A=Math.max(A,L.getModifiedEnd())}E=[new n.DiffChange(D,p-D+1,A,v-A+1)]}else{w=new s,C=a,T=c,k=f[0]-g[0]-u,x=Number.MAX_VALUE,I=y?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do b=k+r,b===C||T>b&&d[b-1]>=d[b+1]?(h=d[b+1]-1,m=h-k-u,h>x&&w.MarkNextChange(),x=h+1,w.AddOriginalElement(h+1,m+1),k=b+1-r):(h=d[b-1],m=h-k-u,h>x&&w.MarkNextChange(),x=h,w.AddModifiedElement(h+1,m+1),k=b-1-r),I>=0&&(d=this.m_reverseHistory[I],r=d[0],C=1,T=d.length-1);while(--I>=-1);E=w.getChanges()}return this.ConcatenateChanges(S,E)},e.prototype.ComputeRecursionPoint=function(e,t,i,s,a,c,u){var l,d,h,p=0,f=0,m=0,v=0;e--,i--,a[0]=0,c[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var g=t-e+(s-i),y=g+1,_=new Array(y),b=new Array(y),S=s-i,E=t-e,w=e-i,C=t-s,T=E-S,k=T%2===0;_[S]=e,b[E]=t,u[0]=!1;var x,I;for(h=1;g/2+1>=h;h++){var D=0,A=0;for(p=this.ClipDiagonalBound(S-h,h,S,y),f=this.ClipDiagonalBound(S+h,h,S,y),x=p;f>=x;x+=2){for(l=x===p||f>x&&_[x-1]<_[x+1]?_[x+1]:_[x-1]+1,d=l-(x-S)-w,I=l;t>l&&s>d&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(_[x]=l,l+d>D+A&&(D=l,A=d),!k&&Math.abs(x-E)<=h-1&&l>=b[x])return a[0]=l,c[0]=d,I<=b[x]&&r>0&&r+1>=h?this.WALKTRACE(S,p,f,w,E,m,v,C,_,b,l,t,a,d,s,c,k,u):null}var L=(D-e+(A-i)-h)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(D,this.OriginalSequence,L))return u[0]=!0,a[0]=D,c[0]=A,L>0&&r>0&&r+1>=h?this.WALKTRACE(S,p,f,w,E,m,v,C,_,b,l,t,a,d,s,c,k,u):(e++,i++,[new n.DiffChange(e,t-e+1,i,s-i+1)]);for(m=this.ClipDiagonalBound(E-h,h,E,y),v=this.ClipDiagonalBound(E+h,h,E,y),x=m;v>=x;x+=2){for(l=x===m||v>x&&b[x-1]>=b[x+1]?b[x+1]-1:b[x-1],d=l-(x-E)-C,I=l;l>e&&d>i&&this.ElementsAreEqual(l,d);)l--,d--;if(b[x]=l,k&&Math.abs(x-S)<=h&&l<=_[x])return a[0]=l,c[0]=d,I>=_[x]&&r>0&&r+1>=h?this.WALKTRACE(S,p,f,w,E,m,v,C,_,b,l,t,a,d,s,c,k,u):null}if(r>=h){var O=new Array(f-p+2);O[0]=S-p+1,o.Copy(_,p,O,1,f-p+1),this.m_forwardHistory.push(O),O=new Array(v-m+2),O[0]=E-m+1,o.Copy(b,m,O,1,v-m+1),this.m_reverseHistory.push(O)}}return this.WALKTRACE(S,p,f,w,E,m,v,C,_,b,l,t,a,d,s,c,k,u)},e.prototype.ConcatenateChanges=function(e,t){var n=[],i=null;return 0===e.length||0===t.length?t.length>0?t:e:this.ChangesOverlap(e[e.length-1],t[0],n)?(i=new Array(e.length+t.length-1),o.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],o.Copy(t,1,i,e.length,t.length-1),i):(i=new Array(e.length+t.length),o.Copy(e,0,i,0,e.length),o.Copy(t,0,i,e.length,t.length),i)},e.prototype.ChangesOverlap=function(e,t,o){if(i.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),i.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){var r=e.originalStart,s=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(c=t.modifiedStart+t.modifiedLength-e.modifiedStart),o[0]=new n.DiffChange(r,s,a,c),!0}return o[0]=null,!1},e.prototype.ClipDiagonalBound=function(e,t,n,i){if(e>=0&&i>e)return e;var o=n,r=i-n-1,s=t%2===0;if(0>e){var a=o%2===0;return s===a?0:1}var c=r%2===0;return s===c?i-1:i-2},e}();t.LcsDiff=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/events",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.time=(new Date).getTime(),this.originalEvent=e,this.source=null}return e}();t.Event=n;var i=function(e){function t(t,n,i,o){e.call(this,o),this.key=t,this.oldValue=n,this.newValue=i}return __extends(t,e),t}(n);t.PropertyChangeEvent=i;var o=function(e){function t(t,n){e.call(this,n),this.element=t}return __extends(t,e),t}(n);t.ViewerEvent=o,t.EventType={PROPERTY_CHANGED:"propertyChanged",SELECTION:"selection",FOCUS:"focus",BLUR:"blur",HIGHLIGHT:"highlight",EXPAND:"expand",COLLAPSE:"collapse",TOGGLE:"toggle",CONTENTS_CHANGED:"contentsChanged",BEFORE_RUN:"beforeRun",RUN:"run",EDIT:"edit",SAVE:"save",CANCEL:"cancel",CHANGE:"change",DISPOSE:"dispose"}}),define("vs/base/common/hash",["require","exports"],function(e,t){"use strict";function n(e){for(var t=1540483477,n=24,i=0,o=e.length,r=o,s=0^r,a=i;r>=2;){var c=e.charCodeAt(a),u=e.charCodeAt(a+1),l=c|u<<16;l*=t,l^=l>>n,l*=t,s*=t,s^=l,a+=2,r-=2}return 1===r&&(s^=e.charCodeAt(a),s*=t),s^=s>>13,s*=t,s^=s>>15}function i(e,t){return(t<<5)+t+e&2147483647}t.computeMurmur2StringHashCode=n,t.combine=i}),define("vs/base/common/htmlContent",["require","exports"],function(e,t){"use strict";function n(e,t){return e||t?e&&t?e.language===t.language&&e.value===t.value:!1:!0}function i(e,t){return e.formattedText===t.formattedText&&e.text===t.text&&e.className===t.className&&e.style===t.style&&e.customStyle===t.customStyle&&e.tagName===t.tagName&&e.isText===t.isText&&e.role===t.role&&e.markdown===t.markdown&&n(e.code,t.code)&&o(e.children,t.children)}function o(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.length,o=t.length;if(n!==o)return!1;for(var r=0;n>r;r++)if(!i(e[r],t[r]))return!1;return!0}t.htmlContentElementArrEquals=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/iterator",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.items=e,this.start=t,this.end=n,this.index=t-1}return e.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.index===this.end?null:this.items[this.index]},e}();t.ArrayIterator=n;var i=function(){function e(e,t){this.iterator=e,this.fn=t}return e.prototype.next=function(){return this.fn(this.iterator.next())},e}();t.MappedIterator=i;var o=function(e){function t(t,n){e.call(this,t,n),this.navigator=t}return __extends(t,e),t.prototype.current=function(){return this.fn(this.navigator.current())},t.prototype.previous=function(){return this.fn(this.navigator.previous())},t.prototype.parent=function(){return this.fn(this.navigator.parent())},t.prototype.first=function(){return this.fn(this.navigator.first())},t.prototype.last=function(){return this.fn(this.navigator.last())},t}(i);t.MappedNavigator=o}),define("vs/base/common/lifecycle",["require","exports"],function(e,t){"use strict";function n(e){return e&&e.dispose(),null}function i(e){if(e)for(var t=0,n=e.length;n>t;t++)e[t]&&e[t].dispose();return[]}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return{dispose:function(){return i(e)}}}function r(e){return{dispose:function(){return i(e)}}}function s(e){return{dispose:function(){return e()}}}function a(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r(e.map(s))}function c(e){if(e){if("function"==typeof e)return e(),null;if(Array.isArray(e)){for(;e.length>0;)e.pop()();return e}return null}return null}t.empty=Object.freeze({dispose:function(){}}),t.dispose=n,t.disposeAll=i,t.combinedDispose=o,t.combinedDispose2=r,t.fnToDisposable=s,t.toDisposable=a,t.cAll=c;var u=function(){function e(){this._toDispose=[]}return e.prototype.dispose=function(){this._toDispose=i(this._toDispose)},e.prototype._register=function(e){return this._toDispose.push(e),e},e}();t.Disposable=u});/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */
var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};block.bullet=/(?:[*+-]|\d+\.)/,block.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,block.item=replace(block.item,"gm")(/bull/g,block.bullet)(),block.list=replace(block.list)(/bull/g,block.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+block.def.source+")")(),block.blockquote=replace(block.blockquote)("def",block.def)(),block._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)(),block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)(),block.normal=merge({},block),block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|"+block.list.source.replace("\\1","\\3")+"|")(),block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),Lexer.rules=block,Lexer.lex=function(e,t){var n=new Lexer(t);return n.lex(e)},Lexer.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},Lexer.prototype.token=function(e,t,n){for(var i,o,r,s,a,c,u,l,d,e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(t&&(r=this.rules.nptable.exec(e))){for(e=e.substring(r[0].length),c={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].split(/ *\| */);this.tokens.push(c)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t,!0),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),s=r[2],this.tokens.push({type:"list_start",ordered:s.length>1}),r=r[0].match(this.rules.item),i=!1,d=r.length,l=0;d>l;l++)c=r[l],u=c.length,c=c.replace(/^ *([*+-]|\d+\.) +/,""),~c.indexOf("\n ")&&(u-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&l!==d-1&&(a=block.bullet.exec(r[l+1])[0],s===a||s.length>1&&a.length>1||(e=r.slice(l+1).join("\n")+e,l=d-1)),o=i||/\n\n(?!\s*$)/.test(c),l!==d-1&&(i="\n"===c.charAt(c.length-1),o||(o=i)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(c,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]});else if(!n&&t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(t&&(r=this.rules.table.exec(e))){for(e=e.substring(r[0].length),c={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};inline._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,inline._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)(),inline.reflink=replace(inline.reflink)("inside",inline._inside)(),inline.normal=merge({},inline),inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()}),inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()}),InlineLexer.rules=inline,InlineLexer.output=function(e,t,n){var i=new InlineLexer(t,n);return i.output(e)},InlineLexer.prototype.output=function(e){for(var t,n,i,o,r="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),r+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+n):(n=escape(o[1]),i=n),r+=this.renderer.link(i,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),r+=this.options.sanitize?escape(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,r+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){r+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,r+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),r+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),r+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),r+=this.renderer.codespan(escape(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),r+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),r+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),r+=escape(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),n=escape(o[1]),i=n,r+=this.renderer.link(i,null,n);return r},InlineLexer.prototype.outputLink=function(e,t){var n=escape(t.href),i=t.title?escape(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,escape(e[1]))},InlineLexer.prototype.smartypants=function(e){return e},InlineLexer.prototype.mangle=function(e){for(var t,n="",i=e.length,o=0;i>o;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},Renderer.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+escape(t,!0)+'">'+(n?e:escape(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:escape(e,!0))+"\n</code></pre>"},Renderer.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},Renderer.prototype.html=function(e){return e},Renderer.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},Renderer.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Renderer.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},Renderer.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},Renderer.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},Renderer.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},Renderer.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},Renderer.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},Renderer.prototype.strong=function(e){return"<strong>"+e+"</strong>"},Renderer.prototype.em=function(e){return"<em>"+e+"</em>"},Renderer.prototype.codespan=function(e){return"<code>"+e+"</code>"},Renderer.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},Renderer.prototype.del=function(e){return"<del>"+e+"</del>"},Renderer.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===i.indexOf("javascript:"))return""}var r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},Renderer.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},Parser.parse=function(e,t,n){var i=new Parser(t,n);return i.parse(e)},Parser.prototype.parse=function(e){this.inline=new InlineLexer(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},Parser.prototype.next=function(){return this.token=this.tokens.pop()},Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},Parser.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,o,r="",s="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(r+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",o=0;o<t.length;o++)n+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var c=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(c);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},noop.exec=noop,marked.options=marked.setOptions=function(e){return merge(marked.defaults,e),marked},marked.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new Renderer,xhtml:!1},marked.Parser=Parser,marked.parser=Parser.parse,marked.Renderer=Renderer,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.InlineLexer=InlineLexer,marked.inlineLexer=InlineLexer.output,marked.parse=marked,this.marked=marked,define("vs/base/common/marked/raw.marked",[],function(){return this.marked}),require.config({shim:{"vs/base/common/marked/raw.marked":{exports:function(){return this.marked}}}}),define("vs/base/common/marked/marked",["./raw.marked"],function(e){return{marked:e}}),define("vs/base/common/network",["require","exports"],function(e,t){"use strict";var n;!function(e){e.inMemory="inmemory",e.http="http",e.https="https",e.file="file"}(n=t.Schemas||(t.Schemas={}))}),define("vs/base/common/platform",["require","exports"],function(e,t){"use strict";function n(){return"undefined"!=typeof g.Worker}var i=!1,o=!1,r=!1,s=!1,a=!1,c=!1,u=void 0,l=void 0;if("object"==typeof process){i="win32"===process.platform,o="darwin"===process.platform,r="linux"===process.platform;var d=process.env.VSCODE_NLS_CONFIG;if(d)try{var h=JSON.parse(d),p=h.availableLanguages["*"];u=h.locale,l=p?p:"en"}catch(f){}s=!0}else if("object"==typeof navigator){var m=navigator.userAgent;i=m.indexOf("Windows")>=0,o=m.indexOf("Macintosh")>=0,r=m.indexOf("Linux")>=0,a=!0,u=navigator.language,l=u,c=!!self.QUnit}!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(t.Platform||(t.Platform={}));var v=t.Platform;t._platform=v.Web,s&&(o?t._platform=v.Mac:i?t._platform=v.Windows:r&&(t._platform=v.Linux)),t.isWindows=i,t.isMacintosh=o,t.isLinux=r,t.isNative=s,t.isWeb=a,t.isQunit=c,t.platform=t._platform,t.language=l,t.locale=u;var g="object"==typeof self?self:global;t.globals=g,t.hasWebWorkerSupport=n,t.setTimeout=g.setTimeout.bind(g),t.clearTimeout=g.clearTimeout.bind(g),t.setInterval=g.setInterval.bind(g),t.clearInterval=g.clearInterval.bind(g)}),define("vs/base/common/diagnostics",["require","exports","vs/base/common/platform"],function(e,t,n){"use strict";function i(e,t){for(;e.length>t;)e.shift()}function o(e,t){var o=!0;if(o)return function(){};var r=s[e]||!1;s[e]=r;var u=a[e]||[];u.push(t),a[e]=u;var l=function(){for(var o=[],r=0;r<arguments.length;r++)o[r-0]=arguments[r];var a;if(s[e]===!0){var u=[arguments];a=c.indexOf(t),-1!==a&&(u.unshift.apply(u,c[a+1]||[]),c[a+1]=[]);var l=function(){var e=u.shift();t.apply(t,e),u.length>0&&n.setTimeout(l,500)};l()}else{a=c.indexOf(t),a=-1!==a?a:c.length;var d=a+1,h=c[d]||[];h.push(arguments),i(h,50),c[a]=t,c[d]=h}};return l}var r=n.globals;r.Monaco||(r.Monaco={}),r.Monaco.Diagnostics={};var s=r.Monaco.Diagnostics,a={},c=[];t.register=o}),define("vs/base/common/flags",["require","exports","vs/base/common/platform"],function(e,t,n){"use strict";function i(e,t){return void 0===t&&(t=!1),n.globals.MonacoEnvironment&&n.globals.MonacoEnvironment.hasOwnProperty(e)?n.globals.MonacoEnvironment[e]:t}function o(e){return i("workersCount",e)}t.enableTasks=i("enableTasks"),t.enableSendASmile=i("enableSendASmile"),t.enableJavaScriptRewriting=i("enableJavaScriptRewriting"),t.enableTypeScriptServiceMode=i("enableTypeScriptServiceMode"),t.enableTypeScriptServiceModeForJS=i("enableTypeScriptServiceModeForJS"),t.standaloneEditorTelemetryEndpoint=i("telemetryEndpoint",null),t.getCrossOriginWorkerScriptUrl=i("getWorkerUrl",null),t.workersCount=o}),define("vs/base/common/scorer",["require","exports"],function(e,t){"use strict";function n(e,t,n){if(!e||!t)return 0;var o=e+t,s=n&&n[o];if("number"==typeof s)return s;for(var a=t.length,c=e.toLowerCase(),u=t.toLowerCase(),l=0,d=-1,h=0;a>l;){var p=c.indexOf(u[l],d+1);if(0>p){h=0;break}d=p,h+=1,e[p]===t[p]&&(h+=1),0===p?h+=8:r.some(function(t){return t===e[p-1]})?h+=7:i(e.charCodeAt(p))&&(h+=1),l++}return n&&(n[o]=h),h}function i(e){return e>=65&&90>=e}function o(e,t){if(!e||!t)return!1;for(var n=t.length,i=e.toLowerCase(),o=0,r=-1;n>o;){var s=i.indexOf(t[o],r+1);if(0>s)return!1;r=s,o++}return!0}/*!
    * string_score.js: String Scoring Algorithm 0.1.22
    *
    * http://joshaven.com/string_score
    * https://github.com/joshaven/string_score
    *
    * Copyright (C) 2009-2014 Joshaven Potter <yourtech@gmail.com>
    * Special thanks to all of the contributors listed here https://github.com/joshaven/string_score
    * MIT License: http://opensource.org/licenses/MIT
    *
    * Date: Tue Mar 1 2011
    * Updated: Tue Mar 10 2015
    */
var r=["-","_"," ","/","\\","."];t.score=n,t.matches=o}),define("vs/base/common/sortedList",["require","exports","vs/base/common/arrays"],function(e,t,n){"use strict";var i=function(){function e(t){this.keys=[],this.values=[],this.comparator=t||e.DEFAULT_COMPARATOR}return Object.defineProperty(e.prototype,"count",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.getValueByIndex=function(e){return e>=0&&e<this.values.length?this.values[e]:null},e.prototype.getKey=function(e){return e>=0&&e<this.keys.length?this.keys[e]:null},e.prototype.getKeys=function(){return new r(this.keys)},e.prototype.getValue=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0?this.values[t]:null},e.prototype.getValues=function(){return new r(this.values)},e.prototype.indexOfKey=function(e){if(!e)throw new Error("Key must be defined.");return Math.max(-1,n.binarySearch(this.keys,e,this.comparator))},e.prototype.add=function(e,t){if(!e||!t)throw new Error("Key and value must be defined.");for(var n=0;n<this.keys.length&&this.comparator(e,this.keys[n])>0;)n++;this.keys.splice(n,0,e),this.values.splice(n,0,t)},e.prototype.remove=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0&&(this.values.splice(t,1),this.keys.splice(t,1)),t>=0},e.prototype.getIterator=function(){return new o(this.keys,this.values)},e.DEFAULT_COMPARATOR=function(e,t){return t>e?-1:e>t?1:0},e}();t.SortedList=i;var o=function(){function e(e,t){this.keys=e,this.values=t,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.keys.length<this.index?null:{key:this.keys[this.index],value:this.values[this.index]}},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.keys.length},e.prototype.hasNext=function(){return this.index+1<this.keys.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.keys=null,this.values=null},e}(),r=function(){function e(e){this.values=e,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.values.length<this.index?null:this.values[this.index]},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.values.length},e.prototype.hasNext=function(){return this.index+1<this.values.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.values=null},e}()}),define("vs/base/common/stopwatch",["require","exports","vs/base/common/platform"],function(e,t,n){"use strict";var i=n.globals.performance&&"function"==typeof n.globals.performance.now,o=function(){function e(e){this._highResolution=i&&e,this._startTime=this._now(),this._stopTime=-1}return e.create=function(t){return void 0===t&&(t=!0),new e(t)},e.prototype.stop=function(){this._stopTime=this._now()},e.prototype.elapsed=function(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime},e.prototype._now=function(){return this._highResolution?n.globals.performance.now():(new Date).getTime()},e}();t.StopWatch=o}),define("vs/base/common/strings",["require","exports"],function(e,t){"use strict";function n(e,t,n){void 0===n&&(n="0");for(var i=""+e,o=[i],r=i.length;t>r;r++)o.push(n);return o.reverse().join("")}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return 0===t.length?e:e.replace(L,function(e,n){var i=parseInt(n,10);return isNaN(i)||0>i||i>=t.length?e:t[i]})}function o(e){return e.replace(/[<|>|&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function r(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}function s(e,t){void 0===t&&(t=" ");var n=a(e,t);return c(n,t)}function a(e,t){if(!e||!t)return e;var n=t.length;if(0===n||0===e.length)return e;for(var i=0,o=-1;(o=e.indexOf(t,i))===i;)i+=n;return e.substring(i)}function c(e,t){if(!e||!t)return e;var n=t.length,i=e.length;if(0===n||0===i)return e;for(var o=i,r=-1;;){if(r=e.lastIndexOf(t,o-1),-1===r||r+n!==o)break;if(0===r)return"";o=r}return e.substring(0,o)}function u(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function l(e){return e.replace(/\*/g,"")}function d(e,t){if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function h(e,t){var n=e.length-t.length;return n>0?e.lastIndexOf(t)===e.length-t.length:0===n?e===t:!1}function p(e,t,n,i,o){if(""===e)throw new Error("Cannot create regex from empty string");t||(e=e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")),i&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));var r="";return o&&(r+="g"),n||(r+="i"),new RegExp(e,r)}function f(e,t,n,i){if(""===e)return null;var o=null;try{o=p(e,t,n,i,!0)}catch(r){return null}try{if(m(o))return null}catch(r){return null}return o}function m(e){if("^"===e.source||"^$"===e.source||"$"===e.source)return!1;var t=e.exec("");return t&&0===e.lastIndex}function v(e){if(!t.canNormalize||!e)return e;var n=M[e];if(n)return n;var i;return i=O.test(e)?e.normalize("NFC"):e,1e4>P&&(M[e]=i,P++),i}function g(e){for(var t=0,n=e.length;n>t;t++)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return t;return-1}function y(e){for(var t=0,n=e.length;n>t;t++)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return e.substring(0,t);return e}function _(e){for(var t=e.length-1;t>=0;t--)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return t;return-1}function b(e,t){return e.localeCompare(t)}function S(e){return e>=97&&122>=e||e>=65&&90>=e}function E(e,t){var n=e.length,i=t.length;if(n!==i)return!1;for(var o=0;n>o;o++){var r=e.charCodeAt(o),s=t.charCodeAt(o);if(r!==s)if(S(r)&&S(s)){var a=Math.abs(r-s);if(0!==a&&32!==a)return!1}else if(String.fromCharCode(r).toLocaleLowerCase()!==String.fromCharCode(s).toLocaleLowerCase())return!1}return!0}function w(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return i}function C(e,t){var n,i=Math.min(e.length,t.length),o=e.length-1,r=t.length-1;for(n=0;i>n;n++)if(e.charCodeAt(o-n)!==t.charCodeAt(r-n))return n;return i}function T(e){return e>=11904&&55215>=e||e>=63744&&64255>=e||e>=65281&&65374>=e}function k(e,t,n){void 0===n&&(n=4);var i=Math.abs(e.length-t.length);if(i>n)return 0;var o,r,s=[],a=[];for(o=0;o<t.length+1;++o)a.push(0);for(o=0;o<e.length+1;++o)s.push(a);for(o=1;o<e.length+1;++o)for(r=1;r<t.length+1;++r)e[o-1]===t[r-1]?s[o][r]=s[o-1][r-1]+1:s[o][r]=Math.max(s[o-1][r],s[o][r-1]);return s[e.length][t.length]-Math.sqrt(i)}function x(e){for(var t,n=/\r\n|\r|\n/g,i=[0];t=n.exec(e);)i.push(n.lastIndex);return i}function I(e,n){if(e.length<n)return e;for(var i=e.split(/\b/),o=0,r=i.length-1;r>=0;r--)if(o+=i[r].length,o>n){i.splice(0,r);break}return i.join(t.empty).replace(/^\s/,t.empty)}function D(e){return e&&(e=e.replace(R,""),e=e.replace(N,"\n"),e=e.replace(F,""),e=e.replace(W,"")),e}function A(e){return e&&e.length>0&&e.charCodeAt(0)===H}t.empty="",t.pad=n;var L=/{(\d+)}/g;t.format=i,t.escape=o,t.escapeRegExpCharacters=r,t.trim=s,t.ltrim=a,t.rtrim=c,t.convertSimple2RegExpPattern=u,t.stripWildcards=l,t.startsWith=d,t.endsWith=h,t.createRegExp=p,t.createSafeRegExp=f,t.regExpLeadsToEndlessLoop=m,t.canNormalize="function"==typeof"".normalize;var O=/[^\u0000-\u0080]/,M=Object.create(null),P=0;t.normalizeNFC=v,t.firstNonWhitespaceIndex=g,t.getLeadingWhitespace=y,t.lastNonWhitespaceIndex=_,t.localeCompare=b,t.equalsIgnoreCase=E,t.commonPrefixLength=w,t.commonSuffixLength=C,t.isFullWidthCharacter=T,t.difference=k,t.computeLineStarts=x,t.lcut=I;var R=/\x1B\x5B[12]?K/g,N=/\xA/g,F=/\x1b\[\d+m/g,W=/\x1b\[0?m/g;t.removeAnsiEscapeCodes=D;var H=65279;t.UTF8_BOM_CHARACTER=String.fromCharCode(H),t.startsWithUTF8BOM=A}),define("vs/base/common/comparers",["require","exports","vs/base/common/strings"],function(e,t,n){"use strict";function i(e,t){var n=s.exec(e.toLowerCase()),i=s.exec(t.toLowerCase()),o=n[1]||n[3]||"",r=n[2]||"",a=i[1]||i[3]||"",c=i[2]||"";return o!==a?a>o?-1:1:c>r?-1:1}function o(e,t,o){var s=e.toLowerCase(),a=t.toLowerCase(),c=r(e,t,o);if(c)return c;var u=n.endsWith(s,o),l=n.endsWith(a,o);if(u!==l)return u?-1:1;var d=i(s,a);return 0!==d?d:n.localeCompare(s,a)}function r(e,t,n){var i=e.toLowerCase(),o=t.toLowerCase(),r=0===i.indexOf(n),s=0===o.indexOf(n);if(r!==s)return r?-1:1;if(r&&s){if(i.length<o.length)return-1;if(i.length>o.length)return 1}return 0}var s=/^(.*)\.([^.]*)|([^.]+)$/;t.compareFileNames=i,t.compareAnything=o,t.compareByPrefix=r}),define("vs/base/common/filters",["require","exports","vs/base/common/strings"],function(e,t,n){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t,n){for(var i=0,o=e.length;o>i;i++){var r=e[i](t,n);if(r)return r}return null}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t,n){for(var i=[],o=0,r=e.length;r>o;o++){var s=e[o](t,n);if(!s)return null;i=i.concat(s)}return i}}function r(e,t,n){if(0===n.length||n.length<t.length)return null;e&&(t=t.toLowerCase(),n=n.toLowerCase());for(var i=0;i<t.length;i++)if(t[i]!==n[i])return null;return t.length>0?[{start:0,end:t.length}]:[]}function s(e,t){var n=t.toLowerCase().indexOf(e.toLowerCase());return-1===n?null:[{start:n,end:n+e.length}]}function a(e,t){return c(e.toLowerCase(),t.toLowerCase(),0,0)}function c(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]===t[i]){var o=null;if(o=c(e,t,n+1,i+1))return f({start:i,end:i+1},o)}return c(e,t,n,i+1)}function u(e){return e>=97&&122>=e}function l(e){return e>=65&&90>=e}function d(e){return e>=48&&57>=e}function h(e){return[32,9,10,13].indexOf(e)>-1}function p(e){return u(e)||l(e)||d(e)}function f(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function m(e,t){for(var n=t;n<e.length;n++){var i=e.charCodeAt(n);if(l(i)||d(i)||n>0&&!p(e.charCodeAt(n-1)))return n}return e.length}function v(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]!==t[i].toLowerCase())return null;var o=null,r=i+1;for(o=v(e,t,n+1,i+1);!o&&(r=m(t,r))<t.length;)o=v(e,t,n+1,r),r++;return null===o?null:f({start:i,end:i+1},o)}function g(e){if(e.length>60)return!1;for(var t=0,n=0,i=0,o=0,r=0,s=0;s<e.length;s++)r=e.charCodeAt(s),l(r)&&t++,u(r)&&n++,p(r)&&i++,d(r)&&o++;var a=t/e.length,c=n/e.length,h=i/e.length,f=o/e.length;return c>.2&&.8>a&&h>.6&&.2>f}function y(e){for(var t=0,n=0,i=0,o=0,r=0;r<e.length;r++)i=e.charCodeAt(r),l(i)&&t++,u(i)&&n++,h(i)&&o++;return 0!==t&&0!==n||0!==o?5>=t:e.length<=30}function _(e,t){if(0===t.length)return null;if(!y(e))return null;if(!g(t))return null;for(var n=null,i=0;i<t.length&&null===(n=v(e.toLowerCase(),t,0,i));)i=m(t,i+1);return n}function b(e,t,i){void 0===i&&(i=!1);var o=w[e];o||(o=new RegExp(n.convertSimple2RegExpPattern(e),"i"),w[e]=o);var r=o.exec(t);return r?[{start:r.index,end:r.index+r[0].length}]:i?E(e,t):S(e,t)}t.or=i,t.and=o,t.matchesStrictPrefix=function(e,t){return r(!1,e,t)},t.matchesPrefix=function(e,t){return r(!0,e,t)},t.matchesContiguousSubString=s,t.matchesSubString=a,t.matchesCamelCase=_,function(e){e[e.Contiguous=0]="Contiguous",e[e.Separate=1]="Separate"}(t.SubstringMatching||(t.SubstringMatching={}));var S=(t.SubstringMatching,i(t.matchesPrefix,_,s)),E=i(t.matchesPrefix,_,a),w={};t.matchesFuzzy=b}),define("vs/base/common/paths",["require","exports","vs/base/common/platform","vs/base/common/strings"],function(e,t,n,i){"use strict";function o(e,n){e=r(e),n=r(n);for(var i=e.split(t.sep),o=n.split(t.sep);i.length>0&&o.length>0&&i[0]===o[0];)i.shift(),o.shift();for(var s=0,a=i.length;a>s;s++)o.unshift("..");return o.join(t.sep)}function r(e,i){if(!e)return e;if(!_.test(e)){var o=i&&n.isWindows?"/":"\\";if(-1===e.indexOf(o))return e}for(var r=e.split(/[\\\/]/),s=0,a=r.length;a>s;s++)"."===r[s]&&r[s+1]?(r.splice(s,1),s-=1):".."===r[s]&&r[s-1]&&(r.splice(s-1,2),s-=2);return r.join(i?t.nativeSep:t.sep)}function s(e){function t(){return"."===n||"/"===n||"\\"===n?(n=void 0,i=!0):n=a(n),{value:n,done:i}}var n=e,i=!1;return{next:t}}function a(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?".":0===~t?e[0]:e.substring(0,~t)}function c(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t===e.length-1?c(e.substring(0,e.length-1)):e.substr(~t+1)}function u(e){e=c(e);var t=~e.lastIndexOf(".");return t?e.substring(~t):""}function l(e){if(!e)return 0;if(e=e.replace(/\/|\\/g,"/"),"/"===e[0])return"/"!==e[1]?1:2;if(":"===e[1])return"/"===e[2]?3:2;if(0===e.indexOf("file:///"))return 8;var t=e.indexOf("://");return-1!==t?t+3:0}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n,i=l(e[0]);n=e[0].substr(0,i),e[0]=e[0].substr(i);for(var o=[],r=/[\\\/]$/.test(e[e.length-1]),s=0;s<e.length;s++)o.push.apply(o,e[s].split(/\/|\\/));for(var s=0;s<o.length;s++){var a=o[s];"."===a||0===a.length?(o.splice(s,1),s-=1):".."===a&&o[s-1]&&".."!==o[s-1]&&(o.splice(s-1,2),s-=2)}r&&o.push("");var c=o.join("/");return n&&(c=n.replace(/\/|\\/g,"/")+c),c}function h(e){return n.isWindows&&e?(e=this.normalize(e,!0),e[0]===t.nativeSep&&e[1]===t.nativeSep):!1}function p(e){return e&&"/"===e[0]}function f(e,n){return p(n?e:r(e))?e:t.sep+e}function m(e){return e&&e.length>1&&"."===e[0]}function v(e,t){if(e===t)return!0;e=r(e),t=r(t);var i=t.length,o=t.charCodeAt(i-1);if(o===b&&(t=t.substring(0,i-1),i-=1),e===t)return!0;if(n.isLinux||(e=e.toLowerCase(),t=t.toLowerCase()),e===t)return!0;if(0!==e.indexOf(t))return!1;var s=e.charCodeAt(i);return s===b}function g(e){return!e||0===e.length||/^\s+$/.test(e)?!1:(S.lastIndex=0,S.test(e)?!1:n.isWindows&&E.test(e)?!1:"."===e||".."===e?!1:n.isWindows&&i.endsWith(e,".")?!1:!n.isWindows||e.length===e.trim().length)}function y(e){return t.isAbsoluteRegex.test(e)}t.sep="/",t.nativeSep=n.isWindows?"\\":"/",t.relative=o;var _=/[\\\/]\.\.?[\\\/]?|[\\\/]?\.\.?[\\\/]/;t.normalize=r,t.dirnames=s,t.dirname=a,t.basename=c,t.extname=u,t.join=d,t.isUNC=h,t.makeAbsolute=f,t.isRelative=m;var b="/".charCodeAt(0);t.isEqualOrParent=v;var S=n.isWindows?/[\\/:\*\?"<>\|]/g:/[\\/]/g,E=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;t.isValidBasename=g,t.isAbsoluteRegex=/^((\/|[a-zA-Z]:\\)[^\(\)<>\\'\"\[\]]+)/,t.isAbsolute=y}),define("vs/base/common/glob",["require","exports","vs/base/common/strings","vs/base/common/paths"],function(e,t,n,i){"use strict";function o(e){switch(e){case 0:return"";case 1:return p+"*?";default:return"(?:"+h+"|"+p+"+"+h+"|"+h+p+"+)*?"}}function r(e,t){if(!e)return[];for(var n,i=[],o=!1,r=!1,s="",a=0;a<e.length;a++){switch(n=e[a]){case t:if(!o&&!r){i.push(s),s="";continue}break;case"{":o=!0;break;case"}":o=!1;break;case"[":r=!0;break;case"]":r=!1}s+=n}return s&&i.push(s),i}function s(e){if(!e)return"";var t="",i=r(e,"/");if(i.every(function(e){return"**"===e}))t=".*";else{var a=!1;i.forEach(function(e,c){if("**"===e)return void(a||(t+=o(2),a=!0));for(var u,l=!1,d="",f=!1,m="",v=0;v<e.length;v++)if(u=e[v],"}"!==u&&l)d+=u;else if("]"!==u&&f){var g=void 0;switch(u){case"-":g=u;break;case"^":g=u;break;default:g=n.escapeRegExpCharacters(u)}m+=g}else switch(u){case"{":l=!0;continue;case"[":f=!0;continue;case"}":var y=r(d,","),_="(?:"+y.reduce(function(e,t,n,i){return e+"|"+s(t)},s(y[0]))+")";t+=_,l=!1,d="";break;case"]":t+="["+m+"]",f=!1,m="";break;case"?":t+=p;continue;case"*":t+=o(1);continue;default:t+=n.escapeRegExpCharacters(u)}c<i.length-1&&"**"!==i[c+1]&&(t+=h),a=!1})}return t}function a(e){if(!e)return null;if(e=e.trim(),d[e]){var t=d[e];return t.lastIndex=0,t}var n=s(e);n="^"+n+"$";var i=c(n);return d[e]=i,i}function c(e){try{return new RegExp(e)}catch(t){return/.^/}}function u(e,t,n){if(!e||!t)return!1;if("string"==typeof e){var i=a(e);return i&&i.test(t)}return l(e,t,n)}function l(e,t,o){for(var r,s=Object.getOwnPropertyNames(e),a=function(a){var c=s[a],l=e[c];if(l===!1)return"continue";if(u(c,t)){if("boolean"==typeof l)return{value:c};if(l&&"string"==typeof l.when){if(!o||!o.length)return"continue";r||(r=n.rtrim(i.basename(t),i.extname(t)));var d=l,h=d.when.replace("$(basename)",r);return o.some(function(e){return e===h})?{value:c}:"continue"}return{value:c}}},c=0;c<s.length;c++){var l=a(c);if("object"==typeof l)return l.value}return null}var d=Object.create(null),h="[/\\\\]",p="[^/\\\\]";t.splitGlobAware=r,t.match=u}),define("vs/base/common/types",["require","exports"],function(e,t){"use strict";function n(e){return Array.isArray?Array.isArray(e):!(!e||"number"!=typeof e.length||e.constructor!==Array)}function i(e){return"string"==typeof e||e instanceof String}function o(e){return n(e)&&e.every(function(e){return i(e)})}function r(e){return"undefined"==typeof e||null===e?!1:"[object Object]"===Object.prototype.toString.call(e)}function s(e){return("number"==typeof e||e instanceof Number)&&!isNaN(e)}function a(e){return e===!0||e===!1}function c(e){return"undefined"==typeof e}function u(e){return c(e)||null===e}function l(e){if(!r(e))return!1;for(var t in e)if(v.call(e,t))return!1;return!0}function d(e){return"[object Function]"===Object.prototype.toString.call(e)}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e&&e.length>0&&e.every(function(e){return d(e)})}function p(e,t){for(var n=Math.min(e.length,t.length),i=0;n>i;i++)f(e[i],t[i])}function f(e,t){if("string"==typeof t){if(typeof e!==t)throw new Error("argument does not match constraint: typeof "+t)}else if("function"==typeof t){if(e instanceof t)return;if(e&&e.constructor===t)return;if(1===t.length&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Object.create(e.prototype);return e.apply(i,t),i}t.isArray=n,t.isString=i,t.isStringArray=o,t.isObject=r,t.isNumber=s,t.isBoolean=a,t.isUndefined=c,t.isUndefinedOrNull=u;var v=Object.prototype.hasOwnProperty;t.isEmptyObject=l,t.isFunction=d,t.areFunctions=h,t.validateConstraints=p,t.validateConstraint=f,t.create=m}),define("vs/base/browser/browser",["require","exports","vs/base/common/types","vs/base/common/platform"],function(e,t,n,i){"use strict";function o(){return!p&&d.history&&d.history.pushState}function r(){p=!0}function s(){if(this._hasCSSAnimationSupport===!0||this._hasCSSAnimationSupport===!1)return this._hasCSSAnimationSupport;if(!d.document)return!1;for(var e=!1,t=d.document.createElement("div"),i=["animationName","webkitAnimationName","msAnimationName","MozAnimationName","OAnimationName"],o=0;o<i.length;o++){var r=i[o];if(!n.isUndefinedOrNull(t.style[r])||t.style.hasOwnProperty(r)){e=!0;break}}return e?this._hasCSSAnimationSupport=!0:this._hasCSSAnimationSupport=!1,this._hasCSSAnimationSupport}function a(e){if(!d.document)return!1;var t=d.document.createElement("video");if(t.canPlayType){var n=t.canPlayType(e);return"maybe"===n||"probably"===n}return!1}function c(e){if(!d.document)return!1;var t=d.document.createElement("audio");if(t.canPlayType){var n=t.canPlayType(e);return"maybe"===n||"probably"===n}return!1}function u(){return!d.document&&"undefined"!=typeof d.importScripts}function l(e){return(t.isIE11orEarlier||i.isNative)&&document.queryCommandSupported(e)}var d="object"==typeof self?self:global,h=d.navigator?d.navigator.userAgent:"";t.isIE11=h.indexOf("Trident")>=0&&h.indexOf("MSIE")<0,t.isIE10=h.indexOf("MSIE 10")>=0,t.isIE9=h.indexOf("MSIE 9")>=0,t.isIE11orEarlier=t.isIE11||t.isIE10||t.isIE9,t.isIE10orEarlier=t.isIE10||t.isIE9,t.isIE10orLater=t.isIE11||t.isIE10,t.isOpera=h.indexOf("Opera")>=0,t.isFirefox=h.indexOf("Firefox")>=0,t.isWebKit=h.indexOf("AppleWebKit")>=0,t.isChrome=h.indexOf("Chrome")>=0,t.isSafari=-1===h.indexOf("Chrome")&&h.indexOf("Safari")>=0,t.isIPad=h.indexOf("iPad")>=0,t.canUseTranslate3d=!t.isIE9&&!t.isFirefox,t.enableEmptySelectionClipboard=t.isWebKit;var p=!1;t.canPushState=o,t.disablePushState=r,t.hasCSSAnimationSupport=s,t.canPlayVideo=a,t.canPlayAudio=c,t.isInWebWorker=u,t.supportsExecCommand=l}),define("vs/base/browser/browserService",["require","exports","vs/base/browser/browser"],function(e,t,n){"use strict";function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function o(){return s}t.regularIsHTMLElement=i;var r=function(){function e(){this.restore()}return e.prototype.mock=function(e){this.document=e.document,this.window=e.window,this.isHTMLElement=e.isHTMLElement},e.prototype.restore=function(){this.isHTMLElement=i,n.isInWebWorker()?(this.document=null,this.window=null):(this.document=window.document,this.window=window)},e}(),s=new r;t.getService=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/mouseEvent",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/browser/iframe"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){var t=this;this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.target=e.target||e.targetNode||e.srcElement,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.posx=0,this.posy=0,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=function(){return e.clientX||e.clientY?(t.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,!0):!1},r=function(){return e.pageX||e.pageY?(t.posx=e.pageX,t.posy=e.pageY,!0):!1},s=r,a=n;i.isIE10&&(s=n,a=r),s()||a();var c=o.IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=c.left,this.posy-=c.top}return e.prototype.preventDefault=function(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e}();t.StandardMouseEvent=r;var s=function(e){function t(t){e.call(this,t),this.dataTransfer=t.dataTransfer}return __extends(t,e),t}(r);t.DragMouseEvent=s;var a=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(s);t.DropMouseEvent=a;var c=function(){function e(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=0),this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=o,this.deltaX=t,e){var r=e,s=e;"undefined"!=typeof r.wheelDeltaY?this.deltaY=r.wheelDeltaY/120:"undefined"!=typeof s.VERTICAL_AXIS&&s.axis===s.VERTICAL_AXIS&&(this.deltaY=-s.detail/3),"undefined"!=typeof r.wheelDeltaX?i.isSafari&&n.isWindows?this.deltaX=-(r.wheelDeltaX/120):this.deltaX=r.wheelDeltaX/120:"undefined"!=typeof s.HORIZONTAL_AXIS&&s.axis===s.HORIZONTAL_AXIS&&(this.deltaX=-e.detail/3),0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}return e.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e}();t.StandardMouseWheelEvent=c}),define("vs/base/common/graph",["require","exports","vs/base/common/types","vs/base/common/collections"],function(e,t,n,i){"use strict";function o(e){return{data:e,incoming:{},outgoing:{}}}t.newNode=o;var r=function(){function e(e){this._hashFn=e,this._nodes=Object.create(null)}return e.prototype.roots=function(){var e=[];return i.forEach(this._nodes,function(t){n.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e},e.prototype.traverse=function(e,t,n){var i=this.lookup(e);i&&this._traverse(i,t,{},n)},e.prototype._traverse=function(e,t,n,o){var r=this,s=this._hashFn(e.data);if(!i.contains(n,s)){n[s]=!0,o(e.data);var a=t?e.outgoing:e.incoming;i.forEach(a,function(e){return r._traverse(e.value,t,n,o)})}},e.prototype.insertEdge=function(e,t){var n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing[this._hashFn(t)]=i,i.incoming[this._hashFn(e)]=n},e.prototype.removeNode=function(e){var t=this._hashFn(e);delete this._nodes[t],i.forEach(this._nodes,function(e){delete e.value.outgoing[t],delete e.value.incoming[t]})},e.prototype.lookupOrInsertNode=function(e){var t=this._hashFn(e),n=i.lookup(this._nodes,t);return n||(n=o(e),this._nodes[t]=n),n},e.prototype.lookup=function(e){return i.lookup(this._nodes,this._hashFn(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this._nodes).length},enumerable:!0,configurable:!0}),e}();t.Graph=r}),define("vs/base/common/labels",["require","exports","vs/base/common/platform","vs/base/common/types","vs/base/common/strings","vs/base/common/paths"],function(e,t,n,i,o,r){"use strict";function s(e,t){var i=t&&a(t),s=a(e);return i&&r.isEqualOrParent(s,i)?r.normalize(o.ltrim(s.substr(i.length),r.nativeSep),!0):n.isWindows&&":"===s[1]?r.normalize(s.charAt(0).toUpperCase()+s.slice(1),!0):r.normalize(s,!0)}function a(e){if(!e)return null;if("string"==typeof e)return e;if(i.isFunction(e.getWorkspace)){var t=e.getWorkspace();return t?t.resource.fsPath:void 0}return e.fsPath}var c=function(){function e(e){this.root=e&&a(e)}return e.prototype.getLabel=function(e){return s(a(e),this.root)},e}();t.PathLabelProvider=c,t.getPathLabel=s}),define("vs/base/common/mime",["require","exports","vs/base/common/paths","vs/base/common/types","vs/base/common/strings","vs/base/common/glob"],function(e,t,n,i,o,r){"use strict";function s(e){f.push(e),e.userConfigured||f.forEach(function(t){t.mime===e.mime||t.userConfigured||(e.extension&&t.extension===e.extension&&console.warn("Overwriting extension <<"+e.extension+">> to now point to mime <<"+e.mime+">>"),e.filename&&t.filename===e.filename&&console.warn("Overwriting filename <<"+e.filename+">> to now point to mime <<"+e.mime+">>"),e.filepattern&&t.filepattern===e.filepattern&&console.warn("Overwriting filepattern <<"+e.filepattern+">> to now point to mime <<"+e.mime+">>"),e.firstline&&t.firstline===e.firstline&&console.warn("Overwriting firstline <<"+e.firstline+">> to now point to mime <<"+e.mime+">>"))})}function a(e){f=e?f.filter(function(e){return!e.userConfigured}):[]}function c(e,n){if(!e)return[t.MIME_UNKNOWN];e=e.toLowerCase();var i=u(e,f.filter(function(e){return e.userConfigured}));if(i)return[i,t.MIME_TEXT];var o=u(e,f.filter(function(e){return!e.userConfigured}));if(o)return[o,t.MIME_TEXT];if(n){var r=l(n);if(r)return[r,t.MIME_TEXT]}return[t.MIME_UNKNOWN]}function u(e,t){for(var i,s,a,c=n.basename(e),u=0;u<t.length;u++){var l=t[u];if(l.filename&&c===l.filename.toLowerCase()){i=l;break}if(l.filepattern){var d=l.filepattern.indexOf(n.sep)>=0?e:c;r.match(l.filepattern.toLowerCase(),d)&&(!s||l.filepattern.length>s.filepattern.length)&&(s=l)}l.extension&&o.endsWith(c,l.extension.toLowerCase())&&(!a||l.extension.length>a.extension.length)&&(a=l)}return i?i.mime:s?s.mime:a?a.mime:null}function l(e){if(o.startsWithUTF8BOM(e)&&(e=e.substr(1)),e.length>0)for(var t=0;t<f.length;++t){var n=f[t];if(n.firstline){var i=e.match(n.firstline);if(i&&i.length>0&&i[0].length===e.length)return n.mime}}return null}function d(e){if(!e)return!1;var n;return n=i.isArray(e)?e:e.split(",").map(function(e){return e.trim()}),n.indexOf(t.MIME_BINARY)>=0}function h(e){return e?"string"==typeof e?e===t.MIME_BINARY||e===t.MIME_TEXT||e===t.MIME_UNKNOWN:1===e.length&&h(e[0]):!0}function p(e,t){for(var n=0;n<f.length;n++){var i=f[n];if(!i.userConfigured&&i.mime===e&&i.extension)return t+i.extension}return null}t.MIME_TEXT="text/plain",t.MIME_BINARY="application/octet-stream",t.MIME_UNKNOWN="application/unknown";var f=[];t.registerTextMime=s,t.clearTextMimes=a,t.guessMimeTypes=c,t.isBinaryMime=d,t.isUnspecific=h,t.suggestFilename=p}),define("vs/base/common/numbers",["require","exports","vs/base/common/types"],function(e,t,n){"use strict";function i(e,t,i){var o,r;n.isNumber(t)?(o=e,r=t):(o=0,r=e,i=t);for(var s=r>=o?function(e){return e+1}:function(e){return e-1},a=r>=o?function(e,t){return t>e}:function(e,t){return e>t},c=o;a(c,r);c=s(c))i(c)}function o(e,t){var o=[],r=function(e){return o.push(e)};return n.isUndefined(t)?i(e,r):i(e,t,r),o}t.count=i,t.countToArray=o}),define("vs/base/common/objects",["require","exports","vs/base/common/types"],function(e,t,n){"use strict";function i(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(n){e[n]&&"object"==typeof e[n]?t[n]=i(e[n]):t[n]=e[n]}),t}function o(e){if(!e||"object"!=typeof e)return e;var t=Array.isArray(e)?[]:{};return Object.getOwnPropertyNames(e).forEach(function(n){e[n]&&"object"==typeof e[n]?t[n]=o(e[n]):t[n]=e[n]}),t}function r(e,t){return s(e,t,[])}function s(e,t,i){if(n.isUndefinedOrNull(e))return e;var o=t(e);if("undefined"!=typeof o)return o;if(n.isArray(e)){for(var r=[],a=0;a<e.length;a++)r.push(s(e[a],t,i));return r}if(n.isObject(e)){if(i.indexOf(e)>=0)throw new Error("Cannot clone recursive data-structure");i.push(e);var c={};for(var u in e)g.call(e,u)&&(c[u]=s(e[u],t,i));return i.pop(),c}return e}function a(e,t,i){return void 0===i&&(i=!0),n.isObject(e)?(n.isObject(t)&&Object.keys(t).forEach(function(o){o in e?i&&(n.isObject(e[o])&&n.isObject(t[o])?a(e[o],t[o],i):e[o]=t[o]):e[o]=t[o]}),e):t}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){return Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}function u(e,t,n){return void 0===n&&(n=function(e){return e}),e.reduce(function(e,i){return c(e,(o={},o[t(i)]=n(i),o));var o},Object.create(null))}function l(e,t){return a(i(t),e||{})}function d(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1}else{var o=[];for(i in e)o.push(i);o.sort();var r=[];for(i in t)r.push(i);if(r.sort(),!d(o,r))return!1;for(n=0;n<o.length;n++)if(!d(e[o[n]],t[o[n]]))return!1}return!0}function h(e,t,n){"undefined"==typeof e[t]&&(e[t]=n)}function p(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function f(e,t){void 0===t&&(t=!1),t&&(e=e.map(function(e){return e.toLowerCase()}));var n=p(e);return t?function(e){return void 0!==n[e.toLowerCase()]&&n.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==n[e]&&n.hasOwnProperty(e)}}function m(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t=t||function(){};var i=e.prototype,o=t.prototype;t.prototype=Object.create(i);for(var n in o)o.hasOwnProperty(n)&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(o,n));Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0,enumerable:!0})}function v(e){var t=[];return JSON.stringify(e,function(e,i){if(n.isObject(i)||Array.isArray(i)){if(-1!==t.indexOf(i))return"[Circular]";t.push(i)}return i})}t.clone=i,t.deepClone=o;var g=Object.prototype.hasOwnProperty;t.cloneAndChange=r,t.mixin=a,t.assign=c,t.toObject=u,t.withDefaults=l,t.equals=d,t.ensureProperty=h,t.arrayToHash=p,t.createKeywordMatcher=f,t.derive=m,t.safeStringify=v}),define("vs/base/common/parsers",["require","exports","vs/base/common/types"],function(e,t,n){"use strict";!function(e){e[e.OK=0]="OK",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Fatal=4]="Fatal"}(t.ValidationState||(t.ValidationState={}));var i=t.ValidationState,o=function(){function e(){this._state=i.OK}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){e>this._state&&(this._state=e)},enumerable:!0,
configurable:!0}),e.prototype.isOK=function(){return this._state===i.OK},e.prototype.isFatal=function(){return this._state===i.Fatal},e}();t.ValidationStatus=o;var r=function(){function e(e,t){void 0===t&&(t=new o),this._logger=e,this.validationStatus=t}return Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.validationStatus},enumerable:!0,configurable:!0}),e.prototype.log=function(e){this._logger.log(e)},e.prototype.is=function(e,t,i,o,r,s){return n.isUndefined(e)?(r&&(this.validationStatus.state=r),s&&this.log(s),!1):t(e)?!0:(i&&(this.validationStatus.state=i),o&&this.log(o),!1)},e.merge=function(e,t,i){var o=this;Object.keys(t).forEach(function(r){var s=e[r],a=t[r];n.isUndefined(a)||(n.isUndefined(s)?e[r]=a:i&&(n.isObject(s)&&n.isObject(a)?o.merge(s,a,i):e[r]=a))})},e}();t.Parser=r;var s=function(){function e(){}return e.prototype.resolve=function(e){return n.isString(e)?this.__resolveString(e):n.isArray(e)?this.__resolveArray(e):n.isObject(e)?this.__resolveLiteral(e):e},e.prototype.resolveAny=function(e){return n.isString(e)?this.__resolveString(e):n.isArray(e)?this.__resolveAnyArray(e):n.isObject(e)?this.__resolveAnyLiteral(e):e},e.prototype.__resolveString=function(e){var t=this,i=/\$\{(.*?)\}/g;return e.replace(i,function(e,i){var o=t[i];return n.isString(o)?o:e&&e.indexOf("env.")>0?"":e})},e.prototype.__resolveLiteral=function(e){var t=this,n=Object.create(null);return Object.keys(e).forEach(function(i){var o=e[i];n[i]=t.resolve(o)}),n},e.prototype.__resolveAnyLiteral=function(e){var t=this,n=Object.create(null);return Object.keys(e).forEach(function(i){var o=e[i];n[i]=t.resolveAny(o)}),n},e.prototype.__resolveArray=function(e){var t=this;return e.map(function(e){return t.__resolveString(e)})},e.prototype.__resolveAnyArray=function(e){var t=this;return e.map(function(e){return t.resolveAny(e)})},e}();t.AbstractSystemVariables=s}),define("vs/base/common/uri",["require","exports","vs/base/common/platform"],function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var o=function(){function e(){this._scheme=e._empty,this._authority=e._empty,this._path=e._empty,this._query=e._empty,this._fragment=e._empty}return Object.defineProperty(e.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fsPath",{get:function(){if(!this._fsPath){var t;t=this._authority&&"file"===this.scheme?"//"+this._authority+this._path:e._driveLetterPath.test(this._path)?this._path[1].toLowerCase()+this._path.substr(2):this._path,n.isWindows&&(t=t.replace(/\//g,"\\")),this._fsPath=t}return this._fsPath},enumerable:!0,configurable:!0}),e.prototype["with"]=function(t,n,i,o,r){var s=new e;return s._scheme=t||this.scheme,s._authority=n||this.authority,s._path=i||this.path,s._query=o||this.query,s._fragment=r||this.fragment,e._validate(s),s},e.prototype.withScheme=function(e){return this["with"](e,void 0,void 0,void 0,void 0)},e.prototype.withAuthority=function(e){return this["with"](void 0,e,void 0,void 0,void 0)},e.prototype.withPath=function(e){return this["with"](void 0,void 0,e,void 0,void 0)},e.prototype.withQuery=function(e){return this["with"](void 0,void 0,void 0,e,void 0)},e.prototype.withFragment=function(e){return this["with"](void 0,void 0,void 0,void 0,e)},e.parse=function(t){var n=new e,i=e._parseComponents(t);return n._scheme=i.scheme,n._authority=decodeURIComponent(i.authority),n._path=decodeURIComponent(i.path),n._query=decodeURIComponent(i.query),n._fragment=decodeURIComponent(i.fragment),e._validate(n),n},e.file=function(t){t=t.replace(/\\/g,"/"),t=t.replace(/%/g,"%25"),t=t.replace(/#/g,"%23"),t=t.replace(/\?/g,"%3F"),t=e._driveLetter.test(t)?"/"+t:t;var n=e._parseComponents(t);if(n.scheme||n.fragment||n.query)throw new Error("Path contains a scheme, fragment or a query. Can not convert it to a file uri.");var i=new e;return i._scheme="file",i._authority=n.authority,i._path=decodeURIComponent("/"===n.path[0]?n.path:"/"+n.path),i._query=n.query,i._fragment=n.fragment,e._validate(i),i},e._parseComponents=function(t){var n={scheme:e._empty,authority:e._empty,path:e._empty,query:e._empty,fragment:e._empty},i=e._regexp.exec(t);return i&&(n.scheme=i[2]||n.scheme,n.authority=i[4]||n.authority,n.path=i[5]||n.path,n.query=i[7]||n.query,n.fragment=i[9]||n.fragment),n},e.create=function(t,n,i,o,r){return(new e)["with"](t,n,i,o,r)},e._validate=function(e){if(e.authority&&e.path&&"/"!==e.path[0])throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character');if(!e.authority&&0===e.path.indexOf("//"))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')},e.prototype.toString=function(){if(!this._formatted){var t=[];if(this._scheme&&(t.push(this._scheme),t.push(":")),(this._authority||"file"===this._scheme)&&t.push("//"),this._authority){var n,o=this._authority;o=o.toLowerCase(),n=o.indexOf(":"),-1===n?t.push(i(o)):(t.push(i(o.substr(0,n))),t.push(o.substr(n)))}if(this._path){var r,s=this._path;e._driveLetterPath.test(s)?s="/"+s[1].toLowerCase()+s.substr(2):e._driveLetter.test(s)&&(s=s[0].toLowerCase()+s.substr(1)),r=s.split("/");for(var a=0,c=r.length;c>a;a++)r[a]=i(r[a]);t.push(r.join("/"))}if(this._query){var u=/https?/i.test(this.scheme)?encodeURI:i;t.push("?"),t.push(u(this._query))}this._fragment&&(t.push("#"),t.push(i(this._fragment))),this._formatted=t.join("")}return this._formatted},e.prototype.toJSON=function(){return{scheme:this.scheme,authority:this.authority,path:this.path,fsPath:this.fsPath,query:this.query,fragment:this.fragment.replace(/URL_MARSHAL_REMOVE.*$/,""),external:this.toString().replace(/#?URL_MARSHAL_REMOVE.*$/,""),$mid:1}},e.revive=function(t){var n=new e;return n._scheme=t.scheme,n._authority=t.authority,n._path=t.path,n._query=t.query,n._fragment=t.fragment,n._fsPath=t.fsPath,n._formatted=t.external,e._validate(n),n},e._empty="",e._regexp=/^(([^:\/?#]+?):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,e._driveLetterPath=/^\/[a-zA-z]:/,e._driveLetter=/^[a-zA-z]:/,e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}),define("vs/base/common/marshalling",["require","exports","vs/base/common/uri"],function(e,t,n){"use strict";function i(e){return JSON.stringify(e,r)}function o(e){return JSON.parse(e,s)}function r(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")}:t}function s(e,t){var i;return void 0!==t&&null!==t&&(i=t.$mid),1===i?n["default"].revive(t):2===i?new RegExp(t.source,t.flags):t}t.stringify=i,t.parse=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/uuid",["require","exports"],function(e,t){"use strict";function n(){return new s}function i(e){if(!a.test(e))throw new Error("invalid uuid");return new r(e)}function o(){return n().asHex()}var r=function(){function e(e){this._value=e}return e.prototype.asHex=function(){return this._value},e.prototype.equals=function(e){return this.asHex()===e.asHex()},e}(),s=function(e){function t(){e.call(this,[t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}return __extends(t,e),t._oneOf=function(e){var t=Math.floor(e.length*Math.random());return e[t]},t._randomHex=function(){return t._oneOf(t._chars)},t._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t._timeHighBits=["8","9","a","b"],t}(r);t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=n;var a=/^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/;t.parse=i,t.generateUuid=o}),"undefined"==typeof WinJS&&(!function(e){e.setImmediate||("undefined"!=typeof process&&"function"==typeof process.nextTick?e.setImmediate=function(e){return process.nextTick(e)}:e.setImmediate=function(e){return setTimeout(e,0)})}(this),function(e,t){"use strict";function n(e,n){var i,o,r,s=Object.keys(n);for(o=0,r=s.length;r>o;o++){var a=s[o],c=95!==a.charCodeAt(0),u=n[a];!u||"object"!=typeof u||u.value===t&&"function"!=typeof u.get&&"function"!=typeof u.set?c?e[a]=u:(i=i||{},i[a]={value:u,enumerable:c,configurable:!0,writable:!0}):(u.enumerable===t&&(u.enumerable=c),i=i||{},i[a]=u)}i&&Object.defineProperties(e,i)}!function(t){function i(e,t,i){for(var o=e,r=t.split("."),s=0,a=r.length;a>s;s++){var c=r[s];o[c]||Object.defineProperty(o,c,{value:{},writable:!1,enumerable:!0,configurable:!0}),o=o[c]}return i&&n(o,i),o}function o(t,n){return i(e,t,n)}e[t]||(e[t]=Object.create(Object.prototype));var r=e[t];r.Namespace||(r.Namespace=Object.create(Object.prototype)),Object.defineProperties(r.Namespace,{defineWithParent:{value:i,writable:!0,enumerable:!0,configurable:!0},define:{value:o,writable:!0,enumerable:!0,configurable:!0}})}("WinJS"),function(e){function t(t,i,o){return t=t||function(){},e.Utilities.markSupportedForProcessing(t),i&&n(t.prototype,i),o&&n(t,o),t}function i(i,o,r,s){if(i){o=o||function(){};var a=i.prototype;return o.prototype=Object.create(a),e.Utilities.markSupportedForProcessing(o),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,configurable:!0,enumerable:!0}),r&&n(o.prototype,r),s&&n(o,s),o}return t(o,r,s)}function o(e){e=e||function(){};var t,i;for(t=1,i=arguments.length;i>t;t++)n(e.prototype,arguments[t]);return e}e.Namespace.define("WinJS.Class",{define:t,derive:i,mix:o})}(e.WinJS)}(this),function(e,t){"use strict";function n(e){return e}function i(e,t,n){return e.split(".").reduce(function(e,t){return e?n(e[t]):null},t)}var o=!!e.Windows,r={notSupportedForProcessing:"Value is not supported within a declarative processing context, if you want it to be supported mark it using WinJS.Utilities.markSupportedForProcessing. The value was: '{0}'"};t.Namespace.define("WinJS.Utilities",{_setHasWinRT:{value:function(e){o=e},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return o},configurable:!1,enumerable:!0},_getMemberFiltered:i,getMember:function(t,o){return t?i(t,o||e,n):null},ready:function(n,i){return new t.Promise(function(o,r){function s(){if(n)try{n(),o()}catch(e){r(e)}else o()}var a=t.Utilities.testReadyState;a||(a=e.document?document.readyState:"complete"),"complete"===a||e.document&&null!==document.body?i?e.setImmediate(s):s():e.addEventListener("DOMContentLoaded",s,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:function(e){return e.supportedForProcessing=!0,e},configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(n){var i=!0;switch(i=i&&!(n===e),i=i&&!(n===e.location),i=i&&!(n instanceof HTMLIFrameElement),i=i&&!("function"==typeof n&&!n.supportedForProcessing),e.frames.length){case 0:break;case 1:i=i&&!(n===e.frames[0]);break;default:for(var o=0,s=e.frames.length;i&&s>o;o++)i=i&&!(n===e.frames[o])}if(i)return n;throw new t.ErrorFromName("WinJS.Utilities.requireSupportedForProcessing",t.Resources._formatString(r.notSupportedForProcessing,n))},configurable:!1,writable:!1,enumerable:!0}}),t.Namespace.define("WinJS",{validation:!1,strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})}(this,this.WinJS),function(e){"use strict";function t(e,t,n){var i=e;return"function"==typeof i&&(i=i()),(n&&r.test(n)?"":n?n+": ":"")+(t?t.replace(o,":")+": ":"")+i}function n(t,n,i){var o=e.Utilities.formatLog(t,n,i);console[i&&r.test(i)?i:"log"](o)}function i(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var o=/\s+/g,r=/^(error|warn|info|log)$/;e.Namespace.define("WinJS.Utilities",{startLog:function(t){t=t||{},"string"==typeof t&&(t={tags:t});var r=t.type&&new RegExp("^("+i(t.type).replace(o," ").split(" ").join("|")+")$"),s=t.excludeTags&&new RegExp("(^|\\s)("+i(t.excludeTags).replace(o," ").split(" ").join("|")+")(\\s|$)","i"),a=t.tags&&new RegExp("(^|\\s)("+i(t.tags).replace(o," ").split(" ").join("|")+")(\\s|$)","i"),c=t.action||n;if(!(r||s||a||e.log))return void(e.log=c);var u=function(e,t,n){r&&!r.test(n)||s&&s.test(t)||a&&!a.test(t)||c(e,t,n),u.next&&u.next(e,t,n)};u.next=e.log,e.log=u},stopLog:function(){delete e.log},formatLog:t})}(this.WinJS),function(e,t){"use strict";function n(e){var t="_on"+e+"state";return{get:function(){var e=this[t];return e&&e.userHandler},set:function(n){var i=this[t];n?(i||(i={wrapper:function(e){return i.userHandler(e)},userHandler:n},Object.defineProperty(this,t,{value:i,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(e,i.wrapper,!1)),i.userHandler=n):i&&(this.removeEventListener(e,i.wrapper,!1),this[t]=null)},enumerable:!0}}function i(e){for(var t={},i=0,o=arguments.length;o>i;i++){var r=arguments[i];t["on"+r]=n(r)}return t}var o=e.Class.define(function(e,t,n){this.detail=t,this.target=n,this.timeStamp=Date.now(),this.type=e},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),r={_listeners:null,addEventListener:function(e,t,n){n=n||!1,this._listeners=this._listeners||{};for(var i=this._listeners[e]=this._listeners[e]||[],o=0,r=i.length;r>o;o++){var s=i[o];if(s.useCapture===n&&s.listener===t)return}i.push({listener:t,useCapture:n})},dispatchEvent:function(e,t){var n=this._listeners&&this._listeners[e];if(n){var i=new o(e,t,this);n=n.slice(0,n.length);for(var r=0,s=n.length;s>r&&!i._stopImmediatePropagationCalled;r++)n[r].listener(i);return i.defaultPrevented||!1}return!1},removeEventListener:function(e,t,n){n=n||!1;var i=this._listeners&&this._listeners[e];if(i)for(var o=0,r=i.length;r>o;o++){var s=i[o];if(s.listener===t&&s.useCapture===n){i.splice(o,1),0===i.length&&delete this._listeners[e];break}}}};e.Namespace.define("WinJS.Utilities",{_createEventProperty:n,createEventProperties:i,eventMixin:r})}(this.WinJS),function(e,t,n){"use strict";var i,o=!1,r="contextchanged",s=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),t.Utilities.eventMixin),a=new s,c={malformedFormatStringInput:"Malformed, did you mean to escape your '{0}'?"};t.Namespace.define("WinJS.Resources",{addEventListener:function(e,n,i){if(t.Utilities.hasWinRT&&!o&&e===r)try{Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(e){t.Resources.dispatchEvent(r,{qualifier:e.key,changed:e.target[e.key]})},!1),o=!0}catch(s){}a.addEventListener(e,n,i)},removeEventListener:a.removeEventListener.bind(a),dispatchEvent:a.dispatchEvent.bind(a),_formatString:function(e){var n=arguments;return n.length>1&&(e=e.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(e,i,o,r,s,a){if(s||a)throw t.Resources._formatString(c.malformedFormatStringInput,s||a);return i&&"{"||o&&"}"||n[(0|r)+1]})),e},_getStringWinRT:function(e){if(!i){var t=Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{i=t.getSubtree("Resources")}catch(o){}i||(i=t)}var r,s,a;try{a=i.getValue(e),a&&(r=a.valueAsString,r===n&&(r=a.toString()))}catch(o){}if(!r)return{value:e,empty:!0};try{s=a.getQualifierValue("Language")}catch(o){return{value:r}}return{value:r,lang:s}},_getStringJS:function(t){var n=e.strings&&e.strings[t];return"string"==typeof n&&(n={value:n}),n||{value:t,empty:!0}}}),Object.defineProperties(t.Resources,t.Utilities.createEventProperties(r));var u;t.Resources.getString=function(e){return(u=u||(t.Utilities.hasWinRT?t.Resources._getStringWinRT:t.Resources._getStringJS))(e)}}(this,this.WinJS),function(e,t,n){"use strict";function i(){}function o(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:R,e._value=t,e._setState(n)}function r(e,t,n,i,o,r){return{exception:e,error:t,promise:n,handler:r,id:i,parent:o}}function s(e,t,n,i){var o=n._isException,s=n._errorId;return r(o?t:null,o?null:t,e,s,n,i)}function a(e,t,n){var i=n._isException,o=n._errorId;return g(e,o,i),r(i?t:null,i?null:t,e,o,n)}function c(e,t){var n=++H;return g(e,n),r(null,t,e,n)}function u(e,t){var n=++H;return g(e,n,!0),r(t,null,e,n)}function l(e,t,n,i){v(e,{c:t,e:n,p:i})}function d(e,t,n,i){e._value=t,f(e,t,n,i),e._setState(F)}function h(e,t){var n=e._value,i=e._listeners;if(i){e._listeners=null;var o,r;for(o=0,r=Array.isArray(i)?i.length:1;r>o;o++){var s=1===r?i:i[o],a=s.c,c=s.promise;if(c){try{c._setCompleteValue(a?a(n):n)}catch(u){c._setExceptionValue(u)}c._state!==L&&c._listeners&&t.push(c)}else j.prototype.done.call(e,a)}}}function p(e,t){var n=e._value,i=e._listeners;if(i){e._listeners=null;var o,r;for(o=0,r=Array.isArray(i)?i.length:1;r>o;o++){var a=1===r?i:i[o],c=a.e,u=a.promise;if(u){try{c?(c.handlesOnError||f(u,n,s,e,c),u._setCompleteValue(c(n))):u._setChainedErrorValue(n,e)}catch(l){u._setExceptionValue(l)}u._state!==L&&u._listeners&&t.push(u)}else U.prototype.done.call(e,null,c)}}}function f(e,t,n,i,o){if(C._listeners[T]){if(t instanceof Error&&t.message===k)return;C.dispatchEvent(T,n(e,t,i,o))}}function m(e,t){var n=e._listeners;if(n){var i,o;for(i=0,o=Array.isArray(n)?n.length:1;o>i;i++){var r=1===o?n:n[i],s=r.p;if(s)try{s(t)}catch(a){}r.c||r.e||!r.promise||r.promise._progress(t)}}}function v(e,t){var n=e._listeners;n?(n=Array.isArray(n)?n:[n],n.push(t)):n=t,e._listeners=n}function g(e,t,n){e._isException=n||!1,e._errorId=t}function y(e,t,n,i){e._value=t,f(e,t,n,i),e._setState(W)}function _(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:N,e._value=t,e._setState(n)}function b(e,t,n,i){var o=new B(e);return v(e,{promise:o,c:t,e:n,p:i}),o}function S(e){var n;return new t.Promise(function(t){e?n=setTimeout(t,e):setImmediate(t)},function(){n&&clearTimeout(n)})}function E(e,t){var n=function(){t.cancel()},i=function(){e.cancel()};return e.then(n),t.then(i,i),t}e.Debug&&(e.Debug.setNonUserCodeExceptions=!0);var w=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),t.Utilities.eventMixin),C=new w;C._listeners={};var T="error",k="Canceled",x=!1,I={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};I.all=I.promise|I.thenPromise|I.errorPromise|I.exceptionPromise|I.completePromise;var D,A,L,O,M,P,R,N,F,W,H=1;D={name:"created",enter:function(e){e._setState(A)},cancel:i,done:i,then:i,_completed:i,_error:i,_notify:i,_progress:i,_setCompleteValue:i,_setErrorValue:i},A={name:"working",enter:i,cancel:function(e){e._setState(M)},done:l,then:b,_completed:o,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},L={name:"waiting",enter:function(e){var t=e._value,n=function(i){t._errorId?e._chainedError(i,t):(f(e,i,s,t,n),e._error(i))};n.handlesOnError=!0,t.then(e._completed.bind(e),n,e._progress.bind(e))},cancel:function(e){e._setState(O)},done:l,then:b,_completed:o,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},O={name:"waiting_canceled",enter:function(e){e._setState(P);var t=e._value;t.cancel&&t.cancel()},cancel:i,done:l,then:b,_completed:o,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},M={name:"canceled",enter:function(e){e._setState(P),e._cancelAction()},cancel:i,done:l,then:b,_completed:o,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},P={name:"canceling",enter:function(e){var t=new Error(k);t.name=t.message,e._value=t,e._setState(F)},cancel:i,done:i,then:i,_completed:i,_error:i,_notify:i,_progress:i,_setCompleteValue:i,_setErrorValue:i},R={name:"complete_notify",enter:function(e){if(e.done=j.prototype.done,e.then=j.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.pop(),t._state._notify(t,n);e._setState(N)},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:h,_progress:i,_setCompleteValue:i,_setErrorValue:i},N={name:"success",enter:function(e){e.done=j.prototype.done,e.then=j.prototype.then,e._cleanupAction()},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:h,_progress:i,_setCompleteValue:i,_setErrorValue:i},F={name:"error_notify",enter:function(e){if(e.done=U.prototype.done,e.then=U.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.pop(),t._state._notify(t,n);e._setState(W)},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:p,_progress:i,_setCompleteValue:i,_setErrorValue:i},W={name:"error",enter:function(e){e.done=U.prototype.done,e.then=U.prototype.then,e._cleanupAction()},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:p,_progress:i,_setCompleteValue:i,_setErrorValue:i};var V,K=t.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(e,t,n){this._state.done(this,e,t,n)},then:function(e,t,n){return this._state.then(this,e,t,n)},_chainedError:function(e,t){var n=this._state._error(this,e,a,t);return this._run(),n},_completed:function(e){var t=this._state._completed(this,e);return this._run(),t},_error:function(e){var t=this._state._error(this,e,c);return this._run(),t},_progress:function(e){this._state._progress(this,e)},_setState:function(e){this._nextState=e},_setCompleteValue:function(e){this._state._setCompleteValue(this,e),this._run()},_setChainedErrorValue:function(e,t){var n=this._state._setErrorValue(this,e,a,t);return this._run(),n},_setExceptionValue:function(e){var t=this._state._setErrorValue(this,e,u);return this._run(),t},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),B=t.Class.derive(K,function(e){x&&(x===!0||x&I.thenPromise)&&(this._stack=t.Promise._getStack()),this._creator=e,this._setState(D),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),U=t.Class.define(function(e){x&&(x===!0||x&I.errorPromise)&&(this._stack=t.Promise._getStack()),this._value=e,f(this,e,c)},{cancel:function(){},done:function(e,t){var n=this._value;if(t)try{t.handlesOnError||f(null,n,s,this,t);var i=t(n);return void(i&&"object"==typeof i&&"function"==typeof i.done&&i.done())}catch(o){n=o}n instanceof Error&&n.message===k||setImmediate(function(){throw n})},then:function(e,t){if(!t)return this;var n,i=this._value;try{t.handlesOnError||f(null,i,s,this,t),n=new j(t(i))}catch(o){n=o===i?this:new z(o)}return n}},{supportedForProcessing:!1}),z=t.Class.derive(U,function(e){x&&(x===!0||x&I.exceptionPromise)&&(this._stack=t.Promise._getStack()),this._value=e,f(this,e,u)},{},{supportedForProcessing:!1}),j=t.Class.define(function(e){if(x&&(x===!0||x&I.completePromise)&&(this._stack=t.Promise._getStack()),e&&"object"==typeof e&&"function"==typeof e.then){var n=new B(null);return n._setCompleteValue(e),n}this._value=e},{cancel:function(){},done:function(e){if(e)try{var t=e(this._value);t&&"object"==typeof t&&"function"==typeof t.done&&t.done()}catch(n){setImmediate(function(){throw n})}},then:function(e){try{var t=e?e(this._value):this._value;return t===this._value?this:new j(t)}catch(n){return new z(n)}}},{supportedForProcessing:!1}),q=t.Class.derive(K,function(e,n){x&&(x===!0||x&I.promise)&&(this._stack=t.Promise._getStack()),this._oncancel=n,this._setState(D),this._run();try{var i=this._completed.bind(this),o=this._error.bind(this),r=this._progress.bind(this);e(i,o,r)}catch(s){this._setExceptionValue(s)}},{_oncancel:null,_cancelAction:function(){try{if(!this._oncancel)throw new Error("Promise did not implement oncancel");this._oncancel()}catch(e){e.message,e.stack;C.dispatchEvent("error",e)}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(e,t,n){C.addEventListener(e,t,n)},any:function(e){return new q(function(n,i,o){var r=Object.keys(e);Array.isArray(e)?[]:{};0===r.length&&n();var s=0;r.forEach(function(o){q.as(e[o]).then(function(){n({key:o,value:e[o]})},function(a){return a instanceof Error&&a.name===k?void(++s===r.length&&n(t.Promise.cancel)):void i({key:o,value:e[o]})})})},function(){var t=Object.keys(e);t.forEach(function(t){var n=q.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},as:function(e){return e&&"object"==typeof e&&"function"==typeof e.then?e:new j(e)},cancel:{get:function(){return V=V||new U(new t.ErrorFromName(k))}},dispatchEvent:function(e,t){return C.dispatchEvent(e,t)},is:function(e){return e&&"object"==typeof e&&"function"==typeof e.then},join:function(e){return new q(function(i,o,r){var s=Object.keys(e),a=Array.isArray(e)?[]:{},c=Array.isArray(e)?[]:{},u=0,l=s.length,d=function(e){if(0===--l){var n=Object.keys(a).length;if(0===n)i(c);else{var u=0;s.forEach(function(e){var t=a[e];t instanceof Error&&t.name===k&&u++}),u===n?i(t.Promise.cancel):o(a)}}else r({Key:e,Done:!0})};return s.forEach(function(t){var i=e[t];i===n?u++:q.then(i,function(e){c[t]=e,d(t)},function(e){a[t]=e,d(t)})}),l-=u,0===l?void i(c):void 0},function(){Object.keys(e).forEach(function(t){var n=q.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},removeEventListener:function(e,t,n){C.removeEventListener(e,t,n)},supportedForProcessing:!1,then:function(e,t,n,i){return q.as(e).then(t,n,i)},thenEach:function(e,t,n,i){var o=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(r){o[r]=q.as(e[r]).then(t,n,i)}),q.join(o)},timeout:function(e,t){var n=S(e);return t?E(n,t):n},wrap:function(e){return new j(e)},wrapError:function(e){return new U(e)},_veryExpensiveTagWithStack:{get:function(){return x},set:function(e){x=e}},_veryExpensiveTagWithStack_tag:I,_getStack:function(){if(Debug.debuggerEnabled)try{throw new Error}catch(e){return e.stack}}});Object.defineProperties(q,t.Utilities.createEventProperties(T));var G=t.Class.derive(K,function(e){this._oncancel=e,this._setState(D),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),Y=t.Class.define(function(e){this._promise=new G(e)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(e){this._promise._completed(e)},error:function(e){this._promise._error(e)},progress:function(e){this._promise._progress(e)}},{supportedForProcessing:!1});t.Namespace.define("WinJS",{Promise:q,_Signal:Y})}(this,this.WinJS),function(e,t){"use strict";t.Namespace.define("WinJS",{ErrorFromName:t.Class.derive(Error,function(e,t){this.name=e,this.message=t||e},{},{supportedForProcessing:!1})})}(this,this.WinJS),function(e){"use strict";e.Namespace.define("WinJS",{xhr:function(t){var n;return new e.Promise(function(e,i,o){n=new XMLHttpRequest,n.onreadystatechange=function(){n._canceled||(4===n.readyState?(n.status>=200&&n.status<300||1223===n.status?e(n):i(n),n.onreadystatechange=function(){}):o(n))},n.open(t.type||"GET",t.url,!0,t.user,t.password),n.responseType=t.responseType||"",Object.keys(t.headers||{}).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),t.customRequestInitializer&&t.customRequestInitializer(n),n.send(t.data)},function(){n._canceled=!0,n.abort()})}})}(this.WinJS),function(e,t,n){"use strict";var i,o,r,s,a,c,u={nonStaticHTML:"Unable to add dynamic content. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property or the document.write method to add a script element will generate this exception. If the content is safe and from a trusted source, use a method to explicitly manipulate elements and attributes, such as createElement, or use setInnerHTMLUnsafe (or other unsafe method)."};i=o=function(e,t){e.innerHTML=t},r=s=function(e,t){e.outerHTML=t},a=c=function(e,t,n){e.insertAdjacentHTML(t,n)};var l=e.MSApp;if(l)o=function(e,t){l.execUnsafeLocalFunction(function(){e.innerHTML=t})},s=function(e,t){l.execUnsafeLocalFunction(function(){e.outerHTML=t})},c=function(e,t,n){l.execUnsafeLocalFunction(function(){e.insertAdjacentHTML(t,n)})};else if(e.msIsStaticHTML){var d=function(n){if(!e.msIsStaticHTML(n))throw new t.ErrorFromName("WinJS.Utitilies.NonStaticHTML",u.nonStaticHTML)};i=function(e,t){d(t),e.innerHTML=t},r=function(e,t){d(t),e.outerHTML=t},a=function(e,t,n){d(n),e.insertAdjacentHTML(t,n)}}t.Namespace.define("WinJS.Utilities",{setInnerHTML:i,setInnerHTMLUnsafe:o,setOuterHTML:r,setOuterHTMLUnsafe:s,insertAdjacentHTML:a,insertAdjacentHTMLUnsafe:c})}(this,this.WinJS)),function(e){"undefined"==typeof exports&&"function"==typeof define&&define.amd?define("vs/base/common/winjs.base.raw",e.WinJS):module.exports=e.WinJS}(this),define("vs/base/node/aiAdapter",["require","exports","vs/base/common/types","vs/base/common/objects","applicationinsights"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n,i){return this.aiKey=e,this.eventPrefix=t,this.additionalDataToLog=i,n?void(this.appInsights=n):void(e&&(o.client?(this.appInsights=o.getClient(e),this.appInsights.channel.setOfflineMode(!0)):this.appInsights=o.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setOfflineMode(!0).start().client,0===e.indexOf("AIF-")&&(this.appInsights.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this.setupAIClient(this.appInsights)))}return e.prototype.setupAIClient=function(e){if(e&&e.context&&e.context.keys&&e.context.tags){var t=e.context.keys.deviceMachineName;e.context.tags[t]=""}},e.prototype.getData=function(e){var t={},i={},o=this.flaten(e);for(var r in o){var s=r&&r.length>150?r.substr(r.length-149):r,a=o[r];if(n.isNumber(a))i[s]=a;else if(n.isBoolean(a))i[s]=a?1:0;else if(n.isString(a)){var c=a&&a.length>1024?a.substring(0,1023):a;t[s]=c}else n.isUndefined(a)||null===a||(t[s]=a)}return{properties:t,measurements:i}},e.prototype.flaten=function(e,t,o){void 0===t&&(t=0);for(var r={},s=e?Object.getOwnPropertyNames(e):[],a=0;a<s.length;a++){var c=s[a],u=o?o+c:c;if(n.isArray(e[c]))try{r[u]=i.safeStringify(e[c])}catch(l){r[u]="[Circular-Array]"}else if(e[c]instanceof Date)r[u]=e[c].toISOString();else if(n.isObject(e[c]))if(2>t){var d=this.flaten(e[c],t+1,u+".");for(var h in d)r[h]=d[h]}else try{r[u]=i.safeStringify(e[c])}catch(l){r[u]="[Circular]"}else r[u]=e[c]}return r},e.prototype.log=function(e,t){this.additionalDataToLog&&(t=i.mixin(t,this.additionalDataToLog));var n=this.getData(t);this.appInsights&&this.appInsights.trackEvent(this.eventPrefix+"/"+e,n.properties,n.measurements)},e.prototype.logException=function(e){this.appInsights&&this.appInsights.trackException(e)},e.prototype.dispose=function(){this.appInsights=null},e}();t.AIAdapter=r}),define("vs/base/node/decoder",["require","exports","string_decoder"],function(e,t,n){
"use strict";var i=function(){function e(e){void 0===e&&(e="utf8"),this.stringDecoder=new n.StringDecoder(e),this.remaining=null}return e.prototype.write=function(e){var t=[],n=this.remaining?this.remaining+this.stringDecoder.write(e):this.stringDecoder.write(e);if(n.length<1)return t;for(var i,o=0;o<n.length&&(13===(i=n.charCodeAt(o))||10===i);)o++;for(var r=o;r<n.length;)if(i=n.charCodeAt(r),13===i||10===i){for(t.push(n.substring(o,r)),r++;r<n.length&&(13===(i=n.charCodeAt(r))||10===i);)r++;o=r}else r++;return this.remaining=o<n.length?n.substr(o):null,t},e.prototype.end=function(){return this.remaining},e}();t.LineDecoder=i}),define("vs/base/node/flow",["require","exports","assert"],function(e,t,n){"use strict";function i(e,t,n){var i=new Array(e.length),o=new Array(e.length),r=!1,s=0;return 0===e.length?n(null,[]):void e.forEach(function(a,c){t(a,function(t,a){return t?(r=!0,i[c]=null,o[c]=t):(i[c]=a,o[c]=null),++s===e.length?n(r?o:null,i):void 0})})}function o(e,t,i){if(n.ok(e,"Missing first parameter"),n.ok("function"==typeof t,"Second parameter must be a function that is called for each element"),n.ok("function"==typeof i,"Third parameter must be a function that is called on error and success"),"function"==typeof e)try{e(function(e,n){e?i(e,null):o(n,t,i)})}catch(r){i(r,null)}else{var s=[],a=function(n){if(n<e.length)try{t(e[n],function(e,t){e!==!0&&e!==!1||(t=e,e=null),e?i(e,null):(t&&s.push(t),process.nextTick(function(){a(n+1)}))},n,e.length)}catch(o){i(o,null)}else i(null,s)};a(0)}}function r(e){n.ok(e.length>1,"Need at least one error handler and one function to process sequence"),e.forEach(function(e){n.ok("function"==typeof e)});var t=e.splice(0,1)[0],i=null;o(e,function(e,t){var n=function(e,n){e!==!0&&e!==!1||(n=e,e=null),e?t(e,null):(i=n,t(null,null))};try{e.call(n,i)}catch(o){t(o,null)}},function(e,n){e&&t(e)})}function s(e){r(Array.isArray(e)?e:Array.prototype.slice.call(arguments))}t.parallel=i,t.loop=o,t.sequence=s}),define("vs/base/node/extfs",["require","exports","vs/base/common/uuid","vs/base/common/strings","vs/base/common/platform","vs/base/node/flow","fs","path"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t){return o.isMacintosh?u(e,function(e,n){return e?t(e,null):t(null,n.map(function(e){return i.normalizeNFC(e)}))}):u(e,t)}function u(e,t){s.readdir(e,function(e,n){return e?t(e,null):t(null,n.filter(function(e){return"."!==e&&".."!==e}))})}function l(e,t,n){s.exists(e,function(i){return i?d(e,function(t,i){return t?n(t):i?void n(null):n(new Error('"'+e+'" is not a directory.'))}):void l(a.dirname(e),t,function(i){return i?void n(i):void(t?s.mkdir(e,t,function(i){return i?n(i):void s.chmod(e,t,n)}):s.mkdir(e,null,n))})})}function d(e,t){s.stat(e,function(e,n){return e?t(e):void t(null,n.isDirectory())})}function h(e,t,n,i){i||(i=Object.create(null)),s.stat(e,function(o,r){return o?n(o):r.isDirectory()?i[e]?n(null):(i[e]=!0,void l(t,511&r.mode,function(o){c(e,function(o,r){g(r,function(n,o){h(a.join(e,n),a.join(t,n),o,i)},n)})})):p(e,t,511&r.mode,n)})}function p(e,t,n,i){var o=!1,r=s.createReadStream(e),a=s.createWriteStream(t,{mode:n}),c=function(e){o||(o=!0,i(e))};r.on("error",c),a.on("error",c),r.on("end",function(){a.end(function(){o||(o=!0,s.chmod(t,n,i))})}),r.pipe(a,{end:!1})}function f(e,t,o,r){s.exists(e,function(c){return c?void s.stat(e,function(c,u){if(c||!u)return o(c);if("."===e[e.length-1]||i.endsWith(e,"./")||i.endsWith(e,".\\"))return m(e,o);var l=a.join(t,n.generateUuid());s.rename(e,l,function(t){return t?m(e,o):(o(null),void m(l,function(e){e&&console.error(e),r&&r(e)}))})}):o(null)})}function m(e,t){return"\\"===e||"/"===e?t(new Error("Will not delete root!")):void s.exists(e,function(n){n?s.lstat(e,function(n,i){if(n||!i)t(n);else if(!i.isDirectory()||i.isSymbolicLink()){var o=i.mode;128&o?s.unlink(e,t):s.chmod(e,128|o,function(n){n?t(n):s.unlink(e,t)})}else c(e,function(n,i){if(n||!i)t(n);else if(0===i.length)s.rmdir(e,t);else{var o=null,r=i.length;i.forEach(function(n){m(a.join(e,n),function(n){r--,n&&(o=o||n),0===r&&(o?t(o):s.rmdir(e,t))})})}})}):t(null)})}function v(e,t,n){function o(e){return e?n(e):void s.stat(t,function(e,i){return e?n(e):i.isDirectory()?n(null):void s.open(t,"a",null,function(e,t){return e?n(e):void s.futimes(t,i.atime,new Date,function(e){return e?n(e):void s.close(t,n)})})})}return e===t?n(null):void s.rename(e,t,function(r){return r?r&&e.toLowerCase()!==t.toLowerCase()&&"EXDEV"===r.code||i.endsWith(e,".")?h(e,t,function(t){return t?n(t):void m(e,o)}):n(r):o(null)})}var g=r.loop;t.readdir=c,t.mkdirp=l,t.copy=h,t.del=f,t.mv=v}),define("vs/base/node/plist",["require","exports","sax"],function(e,t,n){"use strict";function i(e){var t=[],i=null,o=null,r=null,s=n.parser(!1,{lowercase:!0});return s.onerror=function(e){t.push(e.message)},s.ontext=function(e){r=e},s.onopentag=function(e){switch(e.name){case"dict":i={parent:i,value:{}};break;case"array":i={parent:i,value:[]};break;case"key":i&&(i.lastKey=null)}r=""},s.onclosetag=function(e){var n;switch(e){case"key":return!i||Array.isArray(i.value)?void t.push("key can only be used inside an open dict element"):void(i.lastKey=r);case"dict":case"array":if(!i)return void t.push(e+" closing tag found, without opening tag");n=i.value,i=i.parent;break;case"string":case"data":n=r;break;case"date":n=new Date(r);break;case"integer":if(n=parseInt(r),isNaN(n))return void t.push(r+" is not a integer");break;case"real":if(n=parseFloat(r),isNaN(n))return void t.push(r+" is not a float");break;case"true":n=!0;break;case"false":n=!1;break;case"plist":return;default:return void t.push("Invalid tag name: "+e)}i?Array.isArray(i.value)?i.value.push(n):i.lastKey?i.value[i.lastKey]=n:t.push("Dictionary key missing for value "+n):o=n},s.write(e),{errors:t,value:o}}t.parse=i}),define("vs/base/node/ports",["require","exports","net"],function(e,t,n){"use strict";function i(e,t,o){if(0===t)return o(0);var r=e,s=n.createServer();s.listen(r,function(e){s.once("close",function(){return o(r)}),s.close()}),s.on("error",function(n){i(e+1,t-1,o)})}t.findFreePort=i}),define("vs/base/node/proxy",["require","exports","url","vs/base/common/types","http-proxy-agent","https-proxy-agent"],function(e,t,n,i,o,r){"use strict";function s(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}function a(e,t){void 0===t&&(t={});var a=n.parse(e),c=t.proxyUrl||s(a);if(!c)return null;var u=n.parse(c);if(!/^https?:$/.test(u.protocol))return null;var l={host:u.hostname,port:Number(u.port),auth:u.auth,rejectUnauthorized:i.isBoolean(t.strictSSL)?t.strictSSL:!0};return"http:"===a.protocol?new o(l):new r(l)}t.getProxyAgent=a}),define("vs/base/node/stdFork",["require","exports","path","os","net","child_process","vs/base/common/uri"],function(e,t,n,i,o,r,s){"use strict";function a(e){for(var t=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n="",i=0;e>i;i++){var o=Math.floor(t.length*Math.random());n+=t[o]}return n}function c(){var e="vscode-"+a(40);return"win32"===process.platform?"\\\\.\\pipe\\"+e+"-sock":n.join(i.tmpdir(),e+".sock")}function u(e,t,n,i){var o={};for(var r in e)o[r]=e[r];return o.STDIN_PIPE_NAME=t,o.STDOUT_PIPE_NAME=n,o.STDERR_PIPE_NAME=i,o.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",o}function l(t,n,i,a){var l,d=!1,h=function(e){d||(d=!0,a(null,e))},p=function(e){d||(d=!0,a(e,null))},f=c(),m=c(),v=c(),g=u(i.env||process.env,f,m,v),y=o.createServer(function(e){l.stderr=e});y.listen(v);var _=o.createServer(function(e){e.once("data",function(t){l.stdin=o.connect(f),l.stdout=e,h(l)})});_.listen(m);var b=!1,S=function(){b||(b=!0,_.close(),y.close())},E=s["default"].parse(e.toUrl("./stdForkStart.js")).fsPath;l=r.fork(E,[t].concat(n),{silent:!0,cwd:i.cwd,env:g,execArgv:i.execArgv}),l.once("error",function(e){S(),p(e)}),l.once("exit",function(e){S(),p(e)})}t.fork=l}),define("vs/base/node/stream",["require","exports","fs"],function(e,t,n){"use strict";function i(e,t,n){var i=!1,o=new Buffer(t),r=0;e.on("data",function(n){var i=Math.min(t-r,n.length);n.copy(o,r,0,i),r+=i,r===t&&e.destroy()}),e.on("error",function(e){i||(i=!0,n(e,null,null))});var s=function(){i||(i=!0,n(null,o,r))};e.on("close",s)}function o(e,t,i){n.open(e,"r",null,function(e,o){function r(e,t,r){n.close(o,function(n){return n?i(n,null,r):e&&"EISDIR"===e.code?i(e,null,r):i(null,t,r)})}function s(){n.read(o,a,c,t-c,null,function(e,n){return e?r(e,null,0):0===n?10===++u?r(null,a,c):s():(c+=n,c===t?r(null,a,c):s())})}if(e)return i(e,null,0);var a=new Buffer(t),c=0,u=0;s()})}t.readExactlyByStream=i,t.readExactlyByFile=o}),define("vs/base/node/encoding",["require","exports","vs/base/node/stream","iconv-lite"],function(e,t,n,i){"use strict";function o(e,t,n){return i.decode(e,u(t),n)}function r(e,t,n){return i.encode(e,u(t),n)}function s(e){return i.encodingExists(u(e))}function a(e){return i.decodeStream(u(e))}function c(e){return i.encodeStream(u(e))}function u(e){return e===t.UTF8_with_bom?t.UTF8:e}function l(e,n){if(!e||2>n)return null;var i=e.readUInt8(0),o=e.readUInt8(1);if(254===i&&255===o)return t.UTF16be;if(255===i&&254===o)return t.UTF16le;if(3>n)return null;var r=e.readUInt8(2);return 239===i&&187===o&&191===r?t.UTF8:null}function d(e,t){n.readExactlyByFile(e,3,function(e,n,i){return e?t(e,null):t(null,l(n,i))})}t.UTF8="utf8",t.UTF8_with_bom="utf8bom",t.UTF16be="utf16be",t.UTF16le="utf16le",t.decode=o,t.encode=r,t.encodingExists=s,t.decodeStream=a,t.encodeStream=c,t.detectEncodingByBOMFromBuffer=l,t.detectEncodingByBOM=d}),define("vs/base/node/mime",["require","exports","vs/base/common/mime","vs/base/node/stream","vs/base/node/encoding"],function(e,t,n,i,o){"use strict";function r(e,t){i.readExactlyByStream(e,p,function(e,n,i){a(e,n,i,t)})}function s(e,t){i.readExactlyByFile(e,p,function(e,n,i){a(e,n,i,t)})}function a(e,t,n,i){return e?i(e,null):i(null,c(t,n))}function c(e,t){var i=o.detectEncodingByBOMFromBuffer(e,t),r=!0;if(i!==o.UTF16be&&i!==o.UTF16le)for(var s=0;t>s&&p>s;s++)if(0===e.readInt8(s)){r=!1;break}return{mimes:r?[n.MIME_TEXT]:[n.MIME_BINARY],encoding:i}}function u(e,t){var i=e,o=t[0];o!==n.MIME_BINARY&&o!==n.MIME_UNKNOWN&&i.unshift(o);var r=i.filter(function(e,t){return e&&i.indexOf(e)===t}).sort(function(e,t){return e===n.MIME_BINARY?1:t===n.MIME_BINARY?-1:e===n.MIME_TEXT?1:t===n.MIME_TEXT?-1:0});return r}function l(e,t,n){r(e,function(e,i){h(t,e,i,n)})}function d(e,t){s(e,function(n,i){h(e,n,i,t)})}function h(e,t,i,o){if(t)return o(t,null);var r=u(i.mimes,n.guessMimeTypes(e));i.mimes=r,o(null,i)}var p=512;t.detectMimeAndEncodingFromBuffer=c,t.detectMimesFromStream=l,t.detectMimesFromFile=d}),define("vs/base/parts/quickopen/common/quickOpen",["require","exports"],function(e,t){"use strict";!function(e){e[e.PREVIEW=0]="PREVIEW",e[e.OPEN=1]="OPEN"}(t.Mode||(t.Mode={}));t.Mode});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/tree",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t,n){this._posx=e,this._posy=t,this._target=n}return e.prototype.preventDefault=function(){},e.prototype.stopPropagation=function(){},Object.defineProperty(e.prototype,"posx",{get:function(){return this._posx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"posy",{get:function(){return this._posy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e}();t.ContextMenuEvent=n;var i=function(e){function t(t){e.call(this,t.posx,t.posy,t.target),this.originalEvent=t}return __extends(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(n);t.MouseContextMenuEvent=i;var o=function(e){function t(t,n,i){e.call(this,t,n,i.target),this.originalEvent=i}return __extends(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(n);t.KeyboardContextMenuEvent=o,function(e){e[e.COPY=0]="COPY",e[e.MOVE=1]="MOVE"}(t.DragOverEffect||(t.DragOverEffect={}));var r=t.DragOverEffect;!function(e){e[e.BUBBLE_DOWN=0]="BUBBLE_DOWN",e[e.BUBBLE_UP=1]="BUBBLE_UP"}(t.DragOverBubble||(t.DragOverBubble={}));var s=t.DragOverBubble;t.DRAG_OVER_REJECT={accept:!1},t.DRAG_OVER_ACCEPT={accept:!0},t.DRAG_OVER_ACCEPT_BUBBLE_UP={accept:!0,bubble:s.BUBBLE_UP},t.DRAG_OVER_ACCEPT_BUBBLE_DOWN={accept:!0,bubble:s.BUBBLE_DOWN},t.DRAG_OVER_ACCEPT_BUBBLE_UP_COPY={accept:!0,bubble:s.BUBBLE_UP,effect:r.COPY},t.DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY={accept:!0,bubble:s.BUBBLE_DOWN,effect:r.COPY}}),define("vs/base/parts/tree/browser/treeDnd",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}();t.ElementsDragAndDropData=n;var i=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}();t.ExternalElementsDragAndDropData=i;var o=function(){function e(){this.types=[],this.files=[]}return e.prototype.update=function(e){e.dataTransfer.types&&(this.types=[],Array.prototype.push.apply(this.types,e.dataTransfer.types)),e.dataTransfer.files&&(this.files=[],Array.prototype.push.apply(this.files,e.dataTransfer.files),this.files=this.files.filter(function(e){return e.size||e.type}))},e.prototype.getData=function(){return{types:this.types,files:this.files}},e}();t.DesktopDragAndDropData=o}),define("vs/css!vs/base/browser/builder",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/actionbar/actionbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/aria/aria",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/button/button",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/checkbox/checkbox",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/contextview/contextview",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/countBadge/countBadge",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/dropdown/dropdown",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/filelabel/filelabel",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/findinput/findInput",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/inputbox/inputBox",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/leftRightWidget/leftRightWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/list/list",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/messagelist/messageList",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/octiconLabel/octicons/octicons",["vs/css!vs/workbench/workbench.main"],{}),define("vs/base/browser/ui/octiconLabel/octiconLabel",["require","exports","vs/base/common/strings","vs/css!./octicons/octicons"],function(e,t,n){"use strict";function i(e){return e.replace(/\$\(([^)]+)\)/g,function(e,t){return'<span class="octicon octicon-'+t+'"></span>'})}t.expand=i;var o=function(){function e(e){this._container=e}return Object.defineProperty(e.prototype,"text",{set:function(e){var t=e||"";t=n.escape(t),t=i(t),this._container.innerHTML=t},enumerable:!0,configurable:!0}),e}();t.OcticonLabel=o}),define("vs/css!vs/base/browser/ui/progressbar/progressbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/resourceviewer/resourceviewer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/sash/sash",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/scrollbar/media/scrollbars",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/splitview/splitview",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/timer/timer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/toolbar/toolbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/quickopen/browser/quickopen",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/tree/browser/actionsRenderer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/tree/browser/tree",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/contentWidgets/contentWidgets",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/decorations/decorations",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/glyphMargin/glyphMargin",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/lineNumbers/lineNumbers",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/linesDecorations/linesDecorations",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/overlayWidgets/overlayWidgets",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/rulers/rulers",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/scrollDecoration/scrollDecoration",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/selections/selections",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/viewCursors/viewCursors",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/default-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/diffEditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/editor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/tokens",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/accessibility/browser/accessibility",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/clipboard/browser/clipboard",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/codelens/browser/codelens",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/color/browser/color",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/find/browser/findWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/folding/browser/folding",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/gotoError/browser/gotoError",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/hover/browser/hover",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/links/browser/links",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/outlineMarker/browser/outlineMarker",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/parameterHints/browser/parameterHints",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/quickFix/browser/quickFix",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/rename/browser/rename",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/snippet/browser/snippet",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/suggest/browser/suggest",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/zoneWidget/browser/peekViewWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/zoneWidget/browser/zoneWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/languages/css/common/css-hover",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/platform/keybinding/browser/keybindings",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/hc-black-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/part",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/vs-dark-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/vs-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/workbench",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/activitybar/media/activityBarPart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/activitybar/media/activityaction",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/binarydiffeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/binaryeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/editorpart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/editorstatus",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/iframeeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/sidebyside",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/textdiffeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/texteditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/media/compositePart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/panel/media/panelPart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/quickopen/media/quickopen",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/sidebar/media/sidebarpart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/statusbar/media/statusbarPart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/electron-browser/media/shell",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/debug/browser/media/breakpointWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/debug/browser/media/debug.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/debug/browser/media/debugHover",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/extensions/electron-browser/media/extensions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/feedback/browser/media/feedback",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/explorerviewlet",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/fileactions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/files.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/git/browser/media/git.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/markdown/browser/media/markdownactions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/output/browser/media/output.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/commandsHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/gotoSymbolHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/markerHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/search/browser/media/search.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/tasks/electron-browser/media/task.contribution",["vs/css!vs/workbench/workbench.main"],{});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/config/elementSizeObserver",["require","exports","vs/base/common/lifecycle"],function(e,t,n){"use strict";var i=function(e){function t(t,n){e.call(this),this.referenceDomElement=t,this.changeCallback=n,this.measureReferenceDomElementToken=-1,this.width=-1,this.height=-1,this.measureReferenceDomElement(!1)}return __extends(t,e),t.prototype.dispose=function(){this.stopObserving(),e.prototype.dispose.call(this)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.startObserving=function(){var e=this;-1===this.measureReferenceDomElementToken&&(this.measureReferenceDomElementToken=setInterval(function(){return e.measureReferenceDomElement(!0)},100))},t.prototype.stopObserving=function(){-1!==this.measureReferenceDomElementToken&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)},t.prototype.observe=function(e){this.measureReferenceDomElement(!0,e)},t.prototype.measureReferenceDomElement=function(e,t){var n=0,i=0;t?(n=t.width,i=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,i=this.referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),this.width===n&&this.height===i||(this.width=n,this.height=i,e&&this.changeCallback())},t}(n.Disposable);t.ElementSizeObserver=i}),define("vs/editor/browser/editorBrowser",["require","exports"],function(e,t){"use strict";t.ClassNames={TEXTAREA_COVER:"textAreaCover",TEXTAREA:"inputarea",LINES_CONTENT:"lines-content",OVERFLOW_GUARD:"overflow-guard",VIEW_LINES:"view-lines",VIEW_LINE:"view-line",SCROLLABLE_ELEMENT:"editor-scrollable",CONTENT_WIDGETS:"contentWidgets",OVERFLOWING_CONTENT_WIDGETS:"overflowingContentWidgets",OVERLAY_WIDGETS:"overlayWidgets",MARGIN_VIEW_OVERLAYS:"margin-view-overlays",LINE_NUMBERS:"line-numbers",GLYPH_MARGIN:"glyph-margin",SCROLL_DECORATION:"scroll-decoration",VIEW_CURSORS_LAYER:"cursors-layer",VIEW_ZONES:"view-zones"},function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(t.ContentWidgetPositionPreference||(t.ContentWidgetPositionPreference={}));t.ContentWidgetPositionPreference;!function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(t.OverlayWidgetPositionPreference||(t.OverlayWidgetPositionPreference={}));t.OverlayWidgetPositionPreference}),define("vs/editor/browser/viewParts/viewCursors/viewCursor",["require","exports","vs/base/browser/styleMutator"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._context=e,this._isInEditableRange=!0,this._domNode=this._createCursorDomNode(t),this._isVisible=!0,n.StyleMutator.setDisplay(this._domNode,"none"),this.updatePosition({lineNumber:1,column:1})}return e.prototype._createCursorDomNode=function(e){var t=document.createElement("div");return t.className="cursor",e&&(t.className+=" secondary"),n.StyleMutator.setHeight(t,this._context.configuration.editor.lineHeight),n.StyleMutator.setTop(t,0),n.StyleMutator.setLeft(t,0),t.setAttribute("role","presentation"),t.setAttribute("aria-hidden","true"),t},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getIsInEditableRange=function(){return this._isInEditableRange},e.prototype.getPositionTop=function(){return this._positionTop},e.prototype.getPosition=function(){return this._position},e.prototype.show=function(){this._isVisible||(n.StyleMutator.setVisibility(this._domNode,"inherit"),this._isVisible=!0)},e.prototype.hide=function(){this._isVisible&&(n.StyleMutator.setVisibility(this._domNode,"hidden"),this._isVisible=!1)},e.prototype.onModelFlushed=function(){return this.updatePosition({lineNumber:1,column:1}),this._isInEditableRange=!0,!0},e.prototype.onCursorPositionChanged=function(e,t){return this.updatePosition(e),this._isInEditableRange=t,!0},e.prototype.onConfigurationChanged=function(e){return e.lineHeight&&n.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight),!0},e.prototype.prepareRender=function(e){var t=e.visibleRangeForPosition(this._position);t?(this._positionTop=t.top,this._positionLeft=t.left,this._isInViewport=!0):this._isInViewport=!1},e.prototype.render=function(e){this._isInViewport?(n.StyleMutator.setDisplay(this._domNode,"block"),n.StyleMutator.setLeft(this._domNode,this._positionLeft),n.StyleMutator.setTop(this._domNode,this._positionTop+e.viewportTop-e.bigNumbersDelta)):n.StyleMutator.setDisplay(this._domNode,"none")},e.prototype.updatePosition=function(e){this._position=e,this._domNode.setAttribute("lineNumber",this._position.lineNumber.toString()),this._domNode.setAttribute("column",this._position.column.toString()),this._isInViewport=!1},e}();t.ViewCursor=i}),define("vs/editor/common/controller/handlerDispatcher",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t){this.source=e,this.data=t}return e.prototype.getSource=function(){return this.source},e.prototype.getData=function(){return this.data},e}();t.DispatcherEvent=n;var i=function(){function e(){this.registry={}}return e.prototype.setHandler=function(e,t){this.registry[e]=t},e.prototype.clearHandlers=function(){this.registry={}},e.prototype.getHandler=function(e){return this.registry.hasOwnProperty(e)?this.registry[e]:null},e.prototype.trigger=function(e,t,i){var o=this.getHandler(t),r=!1;if(o){var s=new n(e,i);r=o(s)}return r},e}();t.HandlerDispatcher=i}),define("vs/editor/common/core/arrays",["require","exports"],function(e,t){"use strict";var n;!function(e){function t(e,t){for(var n,i=0,o=e.length-1;o>i;)n=i+Math.ceil((o-i)/2),e[n].startIndex>t?o=n-1:i=n;return i}e.findIndexInSegmentsArray=t}(n=t.Arrays||(t.Arrays={}))}),define("vs/editor/common/core/idGenerator",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this._prefix=e,this._lastId=0}return e.prototype.generate=function(){return this._prefix+ ++this._lastId},e}();t.IdGenerator=n}),define("vs/editor/common/core/position",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t){this.lineNumber=e,this.column=t}return e.prototype.equals=function(t){return e.equals(this,t)},e.equals=function(e,t){return e||t?!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column:!0},e.prototype.isBefore=function(t){return e.isBefore(this,t)},e.isBefore=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column},e.prototype.isBeforeOrEqual=function(t){return e.isBeforeOrEqual(this,t)},e.isBeforeOrEqual=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column},e.prototype.clone=function(){
return new e(this.lineNumber,this.column)},e.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"},e.lift=function(t){return new e(t.lineNumber,t.column)},e.isIPosition=function(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column},e.asEmptyRange=function(e){return{startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column}},e.startPosition=function(e){return{lineNumber:e.startLineNumber,column:e.startColumn}},e.endPosition=function(e){return{lineNumber:e.endLineNumber,column:e.endColumn}},e}();t.Position=n}),define("vs/editor/common/core/range",["require","exports","vs/editor/common/core/position"],function(e,t,n){"use strict";var i=function(){function e(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}return e.prototype.isEmpty=function(){return e.isEmpty(this)},e.prototype.containsPosition=function(t){return e.containsPosition(this,t)},e.prototype.containsRange=function(t){return e.containsRange(this,t)},e.prototype.plusRange=function(t){return e.plusRange(this,t)},e.prototype.intersectRanges=function(t){return e.intersectRanges(this,t)},e.prototype.equalsRange=function(t){return e.equalsRange(this,t)},e.prototype.getEndPosition=function(){return new n.Position(this.endLineNumber,this.endColumn)},e.prototype.getStartPosition=function(){return new n.Position(this.startLineNumber,this.startColumn)},e.prototype.cloneRange=function(){return new e(this.startLineNumber,this.startColumn,this.endLineNumber,this.endColumn)},e.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"},e.prototype.setEndPosition=function(t,n){return new e(this.startLineNumber,this.startColumn,t,n)},e.prototype.setStartPosition=function(t,n){return new e(t,n,this.endLineNumber,this.endColumn)},e.prototype.collapseToStart=function(){return new e(this.startLineNumber,this.startColumn,this.startLineNumber,this.startColumn)},e.lift=function(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null},e.isIRange=function(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn},e.isEmpty=function(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn},e.containsPosition=function(e,t){return t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber?!1:t.lineNumber===e.startLineNumber&&t.column<e.startColumn?!1:!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn)},e.containsRange=function(e,t){return t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber?!1:t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber?!1:t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn?!1:!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)},e.areIntersectingOrTouching=function(e,t){return e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn?!1:!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)},e.intersectRanges=function(t,n){var i=t.startLineNumber,o=t.startColumn,r=t.endLineNumber,s=t.endColumn,a=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,l=n.endColumn;return a>i?(i=a,o=c):i===a&&(o=Math.max(o,c)),r>u?(r=u,s=l):r===u&&(s=Math.min(s,l)),i>r?null:i===r&&o>s?null:new e(i,o,r,s)},e.plusRange=function(t,n){var i,o,r,s;return n.startLineNumber<t.startLineNumber?(i=n.startLineNumber,o=n.startColumn):n.startLineNumber===t.startLineNumber?(i=n.startLineNumber,o=Math.min(n.startColumn,t.startColumn)):(i=t.startLineNumber,o=t.startColumn),n.endLineNumber>t.endLineNumber?(r=n.endLineNumber,s=n.endColumn):n.endLineNumber===t.endLineNumber?(r=n.endLineNumber,s=Math.max(n.endColumn,t.endColumn)):(r=t.endLineNumber,s=t.endColumn),new e(i,o,r,s)},e.equalsRange=function(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn},e.compareRangesUsingStarts=function(e,t){return e.startLineNumber===t.startLineNumber?e.startColumn===t.startColumn?e.endLineNumber===t.endLineNumber?e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber:e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber},e.compareRangesUsingEnds=function(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber},e.spansMultipleLines=function(e){return e.endLineNumber>e.startLineNumber},e.collapseToStart=function(e){return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.startLineNumber,endColumn:e.startColumn}},e}();t.Range=i}),define("vs/editor/common/core/editOperation",["require","exports","vs/editor/common/core/range"],function(e,t,n){"use strict";var i=function(){function e(){}return e.insert=function(e,t){return{identifier:null,range:new n.Range(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}},e["delete"]=function(e){return{identifier:null,range:e,text:null,forceMoveMarkers:!0}},e.replace=function(e,t){return{identifier:null,range:e,text:t,forceMoveMarkers:!1}},e.replaceMove=function(e,t){return{identifier:null,range:e,text:t,forceMoveMarkers:!0}},e}();t.EditOperation=i}),define("vs/editor/common/commands/trimTrailingWhitespaceCommand",["require","exports","vs/base/common/strings","vs/editor/common/core/editOperation","vs/editor/common/core/range"],function(e,t,n,i,o){"use strict";function r(e,t){t.sort(function(e,t){return e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber});for(var r=t.length-2;r>=0;r--)t[r].lineNumber===t[r+1].lineNumber&&t.splice(r,1);var s,a,c,u,l,d,h,p=[],f=0,m=t.length;for(s=1,a=e.getLineCount();a>=s;s++)if(c=e.getLineContent(s),l=c.length+1,u=0,!(m>f&&t[f].lineNumber===s&&(u=t[f].column,f++,u===l))&&0!==c.length){if(h=n.lastNonWhitespaceIndex(c),d=0,-1===h)d=1;else{if(h===c.length-1)continue;d=h+2}d=Math.max(u,d),p.push(i.EditOperation["delete"](new o.Range(s,d,s,l)))}return p}var s=function(){function e(e){this.selection=e}return e.prototype.getEditOperations=function(e,t){for(var n=r(e,[]),i=0,o=n.length;o>i;i++){var s=n[i];t.addEditOperation(s.range,s.text)}this.selectionId=t.trackSelection(this.selection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();t.TrimTrailingWhitespaceCommand=s,t.trimTrailingWhitespace=r}),define("vs/editor/common/model/indentationGuesser",["require","exports"],function(e,t){"use strict";function n(e,t,n,i){var r;for(r=0;t>r&&i>r;r++){var s=e.charCodeAt(r),a=n.charCodeAt(r);if(s!==a)break}for(var c=0,u=0,l=r;t>l;l++){var s=e.charCodeAt(l);s===o?c++:u++}for(var d=0,h=0,l=r;i>l;l++){var a=n.charCodeAt(l);a===o?d++:h++}if(c>0&&u>0)return 0;if(d>0&&h>0)return 0;var p=Math.abs(u-h),f=Math.abs(c-d);return 0===p?f:f%p===0?f/p:0}function i(e,t,i){for(var s=0,a=0,c="",u=0,l=[2,4,6,8],d=8,h=[0,0,0,0,0,0,0,0,0],p=0,f=e.length;f>p;p++){for(var m=e[p],v=!1,g=0,y=0,_=0,b=0,S=m.length;S>b;b++){var E=m.charCodeAt(b);if(E===r)_++;else{if(E!==o){v=!0,g=b;break}y++}}if(v){_>0?s++:y>1&&a++;var w=n(c,u,m,g);d>=w&&h[w]++,c=m,u=g}}var C=n(c,u,"",0);d>=C&&h[C]++;var T=i;s!==a&&(T=a>s);var k=t,x=T?0:.1*e.length;return l.forEach(function(e){var t=h[e];t>x&&(x=t,k=e)}),{insertSpaces:T,tabSize:k}}var o=" ".charCodeAt(0),r="	".charCodeAt(0);t.guessIndentation=i}),define("vs/editor/common/modes",["require","exports"],function(e,t){"use strict";!function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(t.IndentAction||(t.IndentAction={}));t.IndentAction}),define("vs/editor/common/modes/abstractState",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t){void 0===t&&(t=null),this.mode=e,this.stateData=t}return e.prototype.getMode=function(){return this.mode},e.prototype.clone=function(){var e=this.makeClone();return e.initializeFrom(this),e},e.prototype.makeClone=function(){throw new Error("Abstract Method")},e.prototype.initializeFrom=function(e){this.stateData=null!==e.stateData?e.stateData.clone():null},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e.prototype.equals=function(t){return null===t||this.mode!==t.getMode()?!1:t instanceof e?e.safeEquals(this.stateData,t.stateData):!1},e.prototype.tokenize=function(e){throw new Error("Abstract Method")},e.safeEquals=function(e,t){return null===e&&null===t?!0:null===e||null===t?!1:e.equals(t)},e.safeClone=function(e){return e?e.clone():null},e}();t.AbstractState=n}),define("vs/editor/common/modes/TMState",["require","exports","vs/editor/common/modes/abstractState"],function(e,t,n){"use strict";function i(e,t){return e||t?e&&t?e.ruleId===t.ruleId&&e.endRule===t.endRule&&e.scopeName===t.scopeName&&e.contentName===t.contentName:!1:!0}var o=function(){function e(e,t,n){this._mode=e,this._parentEmbedderState=t,this._ruleStack=n}return e.prototype.clone=function(){var t=n.AbstractState.safeClone(this._parentEmbedderState),i=this._ruleStack?this._ruleStack.map(function(e){return e.clone()}):null;return new e(this._mode,t,i)},e.prototype.equals=function(t){if(!(t&&t instanceof e))return!1;var o=t;if(!n.AbstractState.safeEquals(this._parentEmbedderState,o._parentEmbedderState))return!1;if(null===this._ruleStack&&null===o._ruleStack)return!0;if(null===this._ruleStack||null===o._ruleStack)return!1;if(this._ruleStack.length!==o._ruleStack.length)return!1;for(var r=0,s=this._ruleStack.length;s>r;r++)if(!i(this._ruleStack[r],o._ruleStack[r]))return!1;return!0},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(e){throw new Error},e.prototype.getStateData=function(){return this._parentEmbedderState},e.prototype.setStateData=function(e){this._parentEmbedderState=e},e.prototype.getRuleStack=function(){return this._ruleStack},e.prototype.setRuleStack=function(e){this._ruleStack=e},e}();t.TMState=o}),define("vs/editor/common/modes/languageSelector",["require","exports","vs/base/common/glob"],function(e,t,n){"use strict";function i(e,t,n){return o(e,t,n)>0}function o(e,t,i){if(Array.isArray(e)){var r=e.map(function(e){return o(e,t,i)});return Math.max.apply(Math,r)}if("string"==typeof e)return e===i?10:"*"===e?5:0;if(e){var s=e,a=0;if(s.language)if(s.language===i)a+=10;else{if("*"!==s.language)return 0;a+=5}if(s.scheme){if(s.scheme!==t.scheme)return 0;a+=10}if(s.pattern)if(s.pattern===t.fsPath)a+=10;else{if(!n.match(s.pattern,t.fsPath))return 0;a+=5}return a}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,t.score=o}),define("vs/editor/common/modes/lineStream",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this._source=e,this.sourceLength=e.length,this._pos=0,this.whitespace="	  ",this.whitespaceArr=this.stringToArray(this.whitespace),this.separators="",this.separatorsArr=this.stringToArray(this.separators),this.tokenStart=-1,this.tokenEnd=-1}return e.prototype.stringToArray=function(t){return e.STRING_TO_ARRAY_CACHE.hasOwnProperty(t)||(e.STRING_TO_ARRAY_CACHE[t]=this.actualStringToArray(t)),e.STRING_TO_ARRAY_CACHE[t]},e.prototype.actualStringToArray=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e.charCodeAt(n));for(var i=[],n=0;t>=n;n++)i[n]=!1;for(var n=0;n<e.length;n++)i[e.charCodeAt(n)]=!0;return i},e.prototype.pos=function(){return this._pos},e.prototype.eos=function(){return this._pos>=this.sourceLength},e.prototype.peek=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");return this._source[this._pos]},e.prototype.next=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");return this.tokenStart=-1,this.tokenEnd=-1,this._source[this._pos++]},e.prototype.next2=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");this.tokenStart=-1,this.tokenEnd=-1,this._pos++},e.prototype.advance=function(e){if(0===e)return"";var t=this._pos;return this._pos+=e,this.tokenStart=-1,this.tokenEnd=-1,this._source.substring(t,this._pos)},e.prototype._advance2=function(e){return 0===e?e:(this._pos+=e,this.tokenStart=-1,this.tokenEnd=-1,e)},e.prototype.advanceToEOS=function(){var e=this._pos;return this._pos=this.sourceLength,this.resetPeekedToken(),this._source.substring(e,this._pos)},e.prototype.goBack=function(e){this._pos-=e,this.resetPeekedToken()},e.prototype.createPeeker=function(e){var t=this;if(e instanceof RegExp)return function(){var n=e.exec(t._source.substr(t._pos));if(null===n)return 0;if(0!==n.index)throw new Error('Regular expression must begin with the character "^"');return n[0].length};if((e instanceof String||"string"==typeof e)&&e)return function(){for(var n=e.length,i=t._pos+n<=t.sourceLength,o=0;i&&n>o;o++)i=t._source.charCodeAt(t._pos+o)===e.charCodeAt(o);return i?n:0};throw new Error("Condition must be either a regular expression, function or a non-empty string")},e.prototype._advanceIfStringCaseInsensitive=function(e){var t,n=this._pos,i=this._source,o=e.length;if(1>o||n+o>this.sourceLength)return 0;for(t=0;o>t;t++)if(i.charAt(n+t).toLowerCase()!==e.charAt(t).toLowerCase())return 0;return o},e.prototype.advanceIfStringCaseInsensitive=function(e){return this.advance(this._advanceIfStringCaseInsensitive(e))},e.prototype.advanceIfStringCaseInsensitive2=function(e){return this._advance2(this._advanceIfStringCaseInsensitive(e))},e.prototype._advanceIfString=function(e){var t,n=this._pos,i=this._source,o=e.length;if(1>o||n+o>this.sourceLength)return 0;for(t=0;o>t;t++)if(i.charCodeAt(n+t)!==e.charCodeAt(t))return 0;return o},e.prototype.advanceIfString=function(e){return this.advance(this._advanceIfString(e))},e.prototype.advanceIfString2=function(e){return this._advance2(this._advanceIfString(e))},e.prototype._advanceIfCharCode=function(e){return this._pos<this.sourceLength&&this._source.charCodeAt(this._pos)===e?1:0},e.prototype.advanceIfCharCode=function(e){return this.advance(this._advanceIfCharCode(e))},e.prototype.advanceIfCharCode2=function(e){return this._advance2(this._advanceIfCharCode(e))},e.prototype._advanceIfRegExp=function(e){return this._pos>=this.sourceLength?0:e.test(this._source.substr(this._pos))?RegExp.lastMatch.length:0},e.prototype.advanceIfRegExp=function(e){return this.advance(this._advanceIfRegExp(e))},e.prototype.advanceIfRegExp2=function(e){return this._advance2(this._advanceIfRegExp(e))},e.prototype.advanceLoop=function(e,t,n){if(this.eos())return"";var i=this.createPeeker(e),o=this._pos,r=0,s=null;for(s=t?function(e){return e>0}:function(e){return 0===e};!this.eos()&&s(r=i());)r>0?this.advance(r):this.next();return n&&!this.eos()&&this.advance(r),this._source.substring(o,this._pos)},e.prototype.advanceWhile=function(e){return this.advanceLoop(e,!0,!1)},e.prototype.advanceUntil=function(e,t){return this.advanceLoop(e,!1,t)},e.prototype._advanceUntilString=function(e,t){if(this.eos()||0===e.length)return 0;var n=this._pos,i=this._source.indexOf(e,n);return-1===i?this.sourceLength-n:t?i+e.length-n:i-n},e.prototype.advanceUntilString=function(e,t){return this.advance(this._advanceUntilString(e,t))},e.prototype.advanceUntilString2=function(e,t){return this._advance2(this._advanceUntilString(e,t))},e.prototype.resetPeekedToken=function(){this.tokenStart=-1,this.tokenEnd=-1},e.prototype.setTokenRules=function(e,t){this.separators===e&&this.whitespace===t||(this.separators=e,this.separatorsArr=this.stringToArray(this.separators),this.whitespace=t,this.whitespaceArr=this.stringToArray(this.whitespace),this.resetPeekedToken())},e.prototype.peekToken=function(){if(-1!==this.tokenStart)return this._source.substring(this.tokenStart,this.tokenEnd);var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this.separatorsArr,o=this._pos;if(o>=t)throw new Error("Stream is at the end");for(;n[e.charCodeAt(o)]&&t>o;)o++;var r=o;if(i[e.charCodeAt(r)]&&t>r)r++;else for(;!i[e.charCodeAt(r)]&&!n[e.charCodeAt(r)]&&t>r;)r++;return this.tokenStart=o,this.tokenEnd=r,e.substring(o,r)},e.prototype.nextToken=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");var e;return e=-1===this.tokenStart?this.peekToken():this._source.substring(this.tokenStart,this.tokenEnd),this._pos=this.tokenEnd,this.tokenStart=-1,this.tokenEnd=-1,e},e.prototype.peekWhitespace=function(){for(var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this._pos;n[e.charCodeAt(i)]&&t>i;)i++;return e.substring(this._pos,i)},e.prototype._skipWhitespace=function(){for(var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this._pos,o=this._pos;n[e.charCodeAt(o)]&&t>o;)o++;return o-i},e.prototype.skipWhitespace=function(){return this.advance(this._skipWhitespace())},e.prototype.skipWhitespace2=function(){return this._advance2(this._skipWhitespace())},e.STRING_TO_ARRAY_CACHE={},e}();t.LineStream=n}),define("vs/editor/common/modes/modesFilters",["require","exports","vs/base/common/arrays","vs/base/common/filters"],function(e,t,n,i){"use strict";function o(e){return function(t,i){var o=e(t,i.filterText||i.label);return n.isFalsyOrEmpty(o)?void 0:o}}function r(e,t){return function(n,i){return e(n,i)||t(n,i)}}function s(e,t){return function(n,i){return e(n,i)&&t(n,i)}}t.StrictPrefix=o(i.matchesStrictPrefix),t.Prefix=o(i.matchesPrefix),t.CamelCase=o(i.matchesCamelCase),t.ContiguousSubString=o(i.matchesContiguousSubString),t.or=r,t.and=s,t.DefaultFilter=r(r(t.Prefix,t.CamelCase),t.ContiguousSubString)}),define("vs/editor/common/modes/monarch/monarchCommon",["require","exports"],function(e,t){"use strict";function n(e){return!e}function i(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function o(e){return e.replace(/[&<>'"_]/g,"-")}function r(e,t){console.log(e.name+": "+t)}function s(e,t){throw new Error(e.name+": "+t)}function a(e,t,o,r,s){var a=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,c=null;return t.replace(a,function(t,a,u,l,d,h,p,f,m){return n(u)?n(l)?!n(d)&&d<r.length?i(e,r[d]):!n(p)&&e&&"string"==typeof e[p]?e[p]:(null===c&&(c=s.split("."),c.unshift(s)),!n(h)&&h<c.length?i(e,c[h]):""):i(e,o):"$"})}function c(e,t){for(;t&&t.length>0;){var n=e.tokenizer[t];if(n)return n;var i=t.lastIndexOf(".");t=0>i?null:t.substr(0,i)}return null}function u(e,t){for(;t&&t.length>0;){var n=e.stateNames[t];if(n)return!0;var i=t.lastIndexOf(".");t=0>i?null:t.substr(0,i)}return!1}!function(e){e[e.None=0]="None",e[e.Open=1]="Open",e[e.Close=-1]="Close"}(t.MonarchBracket||(t.MonarchBracket={}));t.MonarchBracket;t.empty=n,t.fixCase=i,t.sanitize=o,t.log=r,t.throwError=s,t.substituteMatches=a,t.findRules=c,t.stateExists=u}),define("vs/editor/common/modes/monarch/monarchCompile",["require","exports","vs/base/common/objects","vs/editor/common/modes/monarch/monarchCommon"],function(e,t,n,i){"use strict";function o(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;var n;for(n in t)if(t.hasOwnProperty(n)&&!e(t[n]))return!1;return!0}function r(e,t,n){return"boolean"==typeof e?e:(n&&(e||void 0===t)&&n(),void 0===t?null:t)}function s(e,t,n){return"string"==typeof e?e:(n&&(e||void 0===t)&&n(),void 0===t?null:t)}function a(e,t){if("string"!=typeof t)return null;for(var n=0;t.indexOf("@")>=0&&5>n;)n++,t=t.replace(/@(\w+)/g,function(n,o){var r="";return"string"==typeof e[o]?r=e[o]:e[o]&&e[o]instanceof RegExp?r=e[o].source:void 0===e[o]?i.throwError(e,"language definition does not contain attribute '"+o+"', used at: "+t):i.throwError(e,"attribute reference '"+o+"' must be a string, used at: "+t),i.empty(r)?"":"(?:"+r+")"});return new RegExp(t,e.ignoreCase?"i":"")}function c(e,t,n,i){if(0>i)return e;if(i<t.length)return t[i];if(i>=100){i-=100;var o=n.split(".");if(o.unshift(n),i<o.length)return o[i]}return null}function u(e,t,r,s){var u=-1,l=r,d=r.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);d&&(d[3]&&(u=parseInt(d[3]),d[2]&&(u+=100)),l=d[4]);var h="~",p=l;l&&0!==l.length?/^\w*$/.test(p)?h="==":(d=l.match(/^(@|!@|~|!~|==|!=)(.*)$/),d&&(h=d[1],p=d[2])):(h="!=",p="");var f;if("~"!==h&&"!~"!==h||!/^(\w|\|)*$/.test(p))if("@"===h||"!@"===h){var m=e[p];m||i.throwError(e,"the @ match target '"+p+"' is not defined, in rule: "+t),o(function(e){return"string"==typeof e},m)||i.throwError(e,"the @ match target '"+p+"' must be an array of strings, in rule: "+t);var v=n.createKeywordMatcher(m,e.ignoreCase);f=function(e){return"@"===h?v(e):!v(e)}}else if("~"===h||"!~"===h)if(p.indexOf("$")<0){var g=a(e,"^"+p+"$");f=function(e){return"~"===h?g.test(e):!g.test(e)}}else f=function(t,n,o,r){var s=a(e,"^"+i.substituteMatches(e,p,n,o,r)+"$");return s.test(t)};else if(p.indexOf("$")<0){var y=i.fixCase(e,p);f=function(e){return"=="===h?e===y:e!==y}}else{var y=i.fixCase(e,p);f=function(t,n,o,r,s){var a=i.substituteMatches(e,y,n,o,r);return"=="===h?t===a:t!==a}}else{var v=n.createKeywordMatcher(p.split("|"),e.ignoreCase);f=function(e){return"~"===h?v(e):!v(e)}}return-1===u?{name:r,value:s,test:function(e,t,n,i){return f(e,e,t,n,i)}}:{name:r,value:s,test:function(e,t,n,i){var o=c(e,t,n,u);return f(o?o:"",e,t,n,i)}}}function l(e,t,n){if(n){if("string"==typeof n)return n;if(n.token||""===n.token){if("string"!=typeof n.token)return i.throwError(e,"a 'token' attribute must be of type string, in rule: "+t),{token:""};var o={token:n.token};if(n.token.indexOf("$")>=0&&(o.tokenSubst=!0),"string"==typeof n.bracket&&("@open"===n.bracket?o.bracket=i.MonarchBracket.Open:"@close"===n.bracket?o.bracket=i.MonarchBracket.Close:i.throwError(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t)),n.next)if("string"!=typeof n.next)i.throwError(e,"the next state must be a string value in rule: "+t);else{var r=n.next;/^(@pop|@push|@popall)$/.test(r)||("@"===r[0]&&(r=r.substr(1)),r.indexOf("$")<0&&(i.stateExists(e,i.substituteMatches(e,r,"",[],""))||i.throwError(e,"the next state '"+n.next+"' is not defined in rule: "+t))),o.next=r}return"number"==typeof n.goBack&&(o.goBack=n.goBack),"string"==typeof n.switchTo&&(o.switchTo=n.switchTo),"string"==typeof n.log&&(o.log=n.log),"string"==typeof n.nextEmbedded&&(o.nextEmbedded=n.nextEmbedded,e.usesEmbedded=!0),o}if(Array.isArray(n)){var s,a=[];for(s in n)n.hasOwnProperty(s)&&(a[s]=l(e,t,n[s]));return{group:a}}if(n.cases){var c,d=[];for(c in n.cases)if(n.cases.hasOwnProperty(c)){var h=l(e,t,n.cases[c]);"@default"===c||"@"===c||""===c?d.push({test:null,value:h,name:c}):"@eos"===c?d.push({test:function(e,t,n,i){return i},value:h,name:c}):d.push(u(e,t,c,h))}var p=e.defaultToken;return{test:function(e,t,n,i){var o;for(o in d)if(d.hasOwnProperty(o)){var r=!d[o].test||d[o].test(e,t,n,i);if(r)return d[o].value}return p}}}return i.throwError(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t),""}return{token:""}}function d(e){function t(o,a,c){var u;for(u in c)if(c.hasOwnProperty(u)){var d=c[u],p=d.include;if(p)"string"!=typeof p&&i.throwError(n,"an 'include' attribute must be a string at: "+o),"@"===p[0]&&(p=p.substr(1)),e.tokenizer[p]||i.throwError(n,"include target '"+p+"' is not defined at: "+o),t(o+"."+p,a,e.tokenizer[p]);else{var f=new h(o);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(f.setRegex(l,d[0]),d.length>=3)if("string"==typeof d[1])f.setAction(l,{token:d[1],next:d[2]});else if("object"==typeof d[1]){var m=d[1];m.next=d[2],f.setAction(l,m)}else i.throwError(n,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else f.setAction(l,d[1]);else d.regex||i.throwError(n,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o),d.name&&(f.name=s(d.name)),d.matchOnlyAtStart&&(f.matchOnlyAtLineStart=r(d.matchOnlyAtLineStart)),f.setRegex(l,d.regex),f.setAction(l,d.action);a.push(f)}}}if(!e||"object"!=typeof e)throw new Error("Monarch: expecting a language definition object");if("string"!=typeof e.name)throw new Error("Monarch: a language definition must include a string 'name' attribute");var n={};if(n.name=e.name,n.displayName=s(e.displayName,n.name),n.noThrow=!1,n.maxStack=100,n.start=s(e.start),n.ignoreCase=r(e.ignoreCase,!1),n.lineComment=s(e.lineComment,"//"),n.blockCommentStart=s(e.blockCommentStart,"/*"),n.blockCommentEnd=s(e.blockCommentEnd,"*/"),n.tokenPostfix=s(e.tokenPostfix,"."+n.name),n.defaultToken=s(e.defaultToken,"source",function(){i.throwError(n,"the 'defaultToken' must be a string")}),n.usesEmbedded=!1,n.wordDefinition=e.wordDefinition||void 0,!n.lineComment&&e.lineComments&&("string"==typeof e.lineComments?n.lineComment=e.lineComments:"string"==typeof e.lineComments[0]&&(n.lineComment=e.lineComments[0])),n.suggestSupport={textualCompletions:!0,disableAutoTrigger:!1,triggerCharacters:[],snippets:[]},"undefined"!=typeof e.suggestSupport){var o=e.suggestSupport;if(Array.isArray(o.snippets))for(var a=o.snippets,c=0,u=a.length;u>c;c++)"string"==typeof a[c]?n.suggestSupport.snippets.push({type:"snippet",label:a[c],codeSnippet:a[c]}):n.suggestSupport.snippets.push(a[c]);Array.isArray(o.triggerCharacters)&&(n.suggestSupport.triggerCharacters=o.triggerCharacters),"undefined"!=typeof o.textualCompletions&&(n.suggestSupport.textualCompletions=o.textualCompletions),"undefined"!=typeof o.disableAutoTrigger&&(n.suggestSupport.disableAutoTrigger=o.disableAutoTrigger)}var l=e;l.name=n.name,l.displayName=n.displayName,l.ignoreCase=n.ignoreCase,l.noThrow=n.noThrow,l.usesEmbedded=n.usesEmbedded,l.stateNames=e.tokenizer,l.defaultToken=n.defaultToken,e.tokenizer&&"object"==typeof e.tokenizer||i.throwError(n,"a language definition must define the 'tokenizer' attribute as an object"),n.tokenizer=[];var d;for(d in e.tokenizer)if(e.tokenizer.hasOwnProperty(d)){n.start||(n.start=d);var p=e.tokenizer[d];n.tokenizer[d]=new Array,t("tokenizer."+d,n.tokenizer[d],p)}n.usesEmbedded=l.usesEmbedded,e.brackets?Array.isArray(e.brackets)||i.throwError(n,"the 'brackets' attribute must be defined as an array"):e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];var f=[];for(var m in e.brackets)if(e.brackets.hasOwnProperty(m)){var v=e.brackets[m];v&&Array.isArray(v)&&3===v.length&&(v={token:v[2],open:v[0],close:v[1]}),v.open===v.close&&i.throwError(n,"open and close brackets in a 'brackets' attribute must be different: "+v.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required."),"string"==typeof v.open&&"string"==typeof v.token?f.push({token:s(v.token)+n.tokenPostfix,open:i.fixCase(n,s(v.open)),close:i.fixCase(n,s(v.close))}):i.throwError(n,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}n.brackets=f;var g;if(e.autoClosingPairs?(Array.isArray(e.autoClosingPairs)||i.throwError(n,"the 'autoClosingPairs' attribute must be an array of string pairs (as arrays)"),g=e.autoClosingPairs.slice(0)):g=[['"','"'],["'","'"],["@brackets"]],n.autoClosingPairs=[],g)for(var y in g)if(g.hasOwnProperty(y)){var _,b=g[y];if("@brackets"===b||"@brackets"===b[0]){var S;for(S in f)f.hasOwnProperty(S)&&f[S].open&&1===f[S].open.length&&f[S].close&&1===f[S].close.length&&(_={open:f[S].open,close:f[S].close,notIn:["string","comment"]},n.autoClosingPairs.push(_))}else Array.isArray(b)&&2===b.length&&"string"==typeof b[0]&&1===b[0].length&&"string"==typeof b[1]&&1===b[1].length?(_={open:i.fixCase(n,b[0]),close:i.fixCase(n,b[1]),notIn:["string","comment"]},n.autoClosingPairs.push(_)):"string"==typeof b.open&&1===b.open.length&&"string"==typeof b.close&&1===b.close.length?(_={open:i.fixCase(n,b.open[0]),close:i.fixCase(n,b.close[0]),notIn:["string","comment"]},n.autoClosingPairs.push(_)):i.throwError(n,"every element in an 'autoClosingPairs' array must be a pair of 1 character strings, or a '@brackets' directive")}for(var E=[],c=0;c<f.length;++c)E.push([f[c].open,f[c].close]);return n.standardBrackets=E,n.outdentTriggers=s(e.outdentTriggers,""),n.noThrow=!0,n}var h=function(){function e(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}return e.prototype.setRegex=function(e,t){var n;"string"==typeof t?n=t:t instanceof RegExp?n=t.source:i.throwError(e,"rules must start with a match string or regular expression: "+this.name),this.matchOnlyAtLineStart=n.length>0&&"^"===n[0],this.name=this.name+": "+n,this.regex=a(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")},e.prototype.setAction=function(e,t){this.action=l(e,this.name,t)},e}();t.compile=d}),define("vs/editor/common/modes/supports",["require","exports","vs/base/common/strings","vs/editor/common/core/arrays"],function(e,t,n,i){"use strict";function o(e,t,n){var o=e.modeTransitions;if(1===o.length)return n(o[0].mode,e,t);var r=i.Arrays.findIndexInSegmentsArray(o,t),s=o[r].mode,a=o[r].startIndex,u=e.findIndexOfOffset(a),l=-1,d=-1;r+1<o.length?(d=e.findIndexOfOffset(o[r+1].startIndex),l=e.getTokenStartIndex(d)):(d=e.getTokenCount(),l=e.getLineContent().length);var h=e.getTokenStartIndex(u),p=new c(e,s,u,d,h,l);return n(s,p,t-h)}function r(e,t,i,o){if(void 0===o&&(o=!1),!Array.isArray(i)||0===i.length)return!1;if(e.getLineContent().length<=t)return!1;for(var r=e.findIndexOfOffset(t),s=e.getTokenType(r),a=0,c=i.length;c>a;a++)if(o){if(s.indexOf(i[a])>=0)return!0}else if(n.endsWith(s,i[a]))return!0;return!1}function s(e){return/\b(comment|string|regex)\b/.test(e)}var a=function(){function e(e,t){this.startIndex=e,this.type=t}return e.prototype.toString=function(){return"("+this.startIndex+", "+this.type+")"},e}();t.Token=a,t.handleEvent=o,t.isLineToken=r;var c=function(){function e(e,t,n,i,o,r){this.modeTransitions=[{startIndex:0,mode:t}],this._actual=e,this._firstTokenInModeIndex=n,this._nextTokenAfterMode=i,this._firstTokenCharacterOffset=o,this._nextCharacterAfterModeIndex=r}return e.prototype.getLineContent=function(){var e=this._actual.getLineContent();return e.substring(this._firstTokenCharacterOffset,this._nextCharacterAfterModeIndex)},e.prototype.getTokenCount=function(){return this._nextTokenAfterMode-this._firstTokenInModeIndex},e.prototype.findIndexOfOffset=function(e){return this._actual.findIndexOfOffset(e+this._firstTokenCharacterOffset)-this._firstTokenInModeIndex},e.prototype.getTokenStartIndex=function(e){return this._actual.getTokenStartIndex(e+this._firstTokenInModeIndex)-this._firstTokenCharacterOffset},e.prototype.getTokenEndIndex=function(e){return this._actual.getTokenEndIndex(e+this._firstTokenInModeIndex)-this._firstTokenCharacterOffset},e.prototype.getTokenType=function(e){return this._actual.getTokenType(e+this._firstTokenInModeIndex)},e.prototype.getTokenText=function(e){return this._actual.getTokenText(e+this._firstTokenInModeIndex)},e}();t.FilteredLineContext=c,t.ignoreBracketsInToken=s;var u=function(){function e(){}return e.registerDefaultSnippets=function(e,t){this._defaultSnippets[e]=(this._defaultSnippets[e]||[]).concat(t)},e.registerSnippets=function(e,t,n){var i=this._snippets[e];i||(this._snippets[e]=i={}),i[t]=n},e.getSnippets=function(e,t){var i=e.getWordAtPosition(t),o=i?i.word.substring(0,t.column-i.startColumn):"",r={currentWord:o,suggestions:[]},s=null;if(0===o.length){if(t.column>1){var a=e.getValueInRange({startLineNumber:t.lineNumber,startColumn:t.column-1,endLineNumber:t.lineNumber,endColumn:t.column});if(0!==a.trim().length)return r}}else{var c=o.toLowerCase();s=function(e){return n.startsWith(e.label.toLowerCase(),c)}}var u=e.getMode().getId(),l=[],d=this._snippets[u];if(d)for(var h in d)l=l.concat(d[h]);var p=this._defaultSnippets[u];return p&&(l=l.concat(p)),r.suggestions=s?l.filter(s):l,r},e._defaultSnippets=Object.create(null),e._snippets=Object.create(null),e}();t.SnippetsRegistry=u;
}),define("vs/editor/common/modes/supports/characterPair",["require","exports","vs/editor/common/modes/supports"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._modeId=e,this._autoClosingPairs=t.autoClosingPairs,this._surroundingPairs=Array.isArray(t.surroundingPairs)?t.surroundingPairs:t.autoClosingPairs}return e.prototype.getAutoClosingPairs=function(){return this._autoClosingPairs},e.prototype.shouldAutoClosePair=function(e,t,i){var o=this;return n.handleEvent(t,i,function(t,n,i){if(o._modeId===t.getId()){if(0===n.getTokenCount())return!0;for(var r=n.findIndexOfOffset(i-1),s=n.getTokenType(r),a=0;a<o._autoClosingPairs.length;++a)if(o._autoClosingPairs[a].open===e){if(o._autoClosingPairs[a].notIn)for(var c=0;c<o._autoClosingPairs[a].notIn.length;++c)if(s.indexOf(o._autoClosingPairs[a].notIn[c])>-1)return!1;break}return!0}return t.richEditSupport&&t.richEditSupport.characterPair?t.richEditSupport.characterPair.shouldAutoClosePair(e,n,i):null})},e.prototype.getSurroundingPairs=function(){return this._surroundingPairs},e}();t.CharacterPairSupport=i}),define("vs/editor/common/modes/supports/declarationSupport",["require","exports","vs/editor/common/modes/supports"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._modeId=e,this.contribution=t}return e.prototype.canFindDeclaration=function(e,t){var i=this;return n.handleEvent(e,t,function(e,t,o){return i._modeId===e.getId()?!Array.isArray(i.contribution.tokens)||i.contribution.tokens.length<1||n.isLineToken(t,o,i.contribution.tokens):e.declarationSupport?e.declarationSupport.canFindDeclaration(t,o):!1})},e.prototype.findDeclaration=function(e,t){return this.contribution.findDeclaration(e,t)},e}();t.DeclarationSupport=i}),define("vs/editor/common/modes/supports/parameterHintsSupport",["require","exports","vs/editor/common/modes/supports"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._modeId=e,this.contribution=t}return e.prototype.getParameterHintsTriggerCharacters=function(){return this.contribution.triggerCharacters},e.prototype.shouldTriggerParameterHints=function(e,t){var i=this;return n.handleEvent(e,t,function(e,t,o){return i._modeId===e.getId()?Array.isArray(i.contribution.excludeTokens)?1===i.contribution.excludeTokens.length&&"*"===i.contribution.excludeTokens[0]?!1:!n.isLineToken(t,o-1,i.contribution.excludeTokens):!0:e.parameterHintsSupport?e.parameterHintsSupport.shouldTriggerParameterHints(t,o):!1})},e.prototype.getParameterHints=function(e,t){return this.contribution.getParameterHints(e,t)},e}();t.ParameterHintsSupport=i}),define("vs/editor/common/modes/supports/referenceSupport",["require","exports","vs/editor/common/modes/supports"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._modeId=e,this.contribution=t}return e.prototype.canFindReferences=function(e,t){var i=this;return n.handleEvent(e,t,function(e,t,o){return i._modeId===e.getId()?!Array.isArray(i.contribution.tokens)||i.contribution.tokens.length<1||n.isLineToken(t,o,i.contribution.tokens):e.referenceSupport?e.referenceSupport.canFindReferences(t,o):!1})},e.prototype.findReferences=function(e,t,n){return this.contribution.findReferences(e,t,n)},e}();t.ReferenceSupport=i}),define("vs/editor/common/modes/supports/richEditBrackets",["require","exports","vs/base/common/strings","vs/editor/common/core/range"],function(e,t,n,i){"use strict";function o(e,t){var n={};return function(i){var o=e(i);return n.hasOwnProperty(o)||(n[o]=t(i)),n[o]}}function r(e){var t="("+e.map(n.escapeRegExpCharacters).join(")|(")+")";return n.createRegExp(t,!0,!1,!1,!1)}function s(e){for(var t="",n=e.length-1;n>=0;n--)t+=e.charAt(n);return t}var a=function(){function e(e,t){var n=this;this.brackets=t.map(function(t){return{modeId:e,open:t[0],close:t[1],forwardRegex:c({open:t[0],close:t[1]}),reversedRegex:u({open:t[0],close:t[1]})}}),this.forwardRegex=l(this.brackets),this.reversedRegex=d(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0,this.brackets.forEach(function(e){n.textIsBracket[e.open]=e,n.textIsBracket[e.close]=e,n.textIsOpenBracket[e.open]=!0,n.textIsOpenBracket[e.close]=!1,n.maxBracketLength=Math.max(n.maxBracketLength,e.open.length),n.maxBracketLength=Math.max(n.maxBracketLength,e.close.length)})}return e}();t.RichEditBrackets=a;var c=o(function(e){return e.open+";"+e.close},function(e){return r([e.open,e.close])}),u=o(function(e){return e.open+";"+e.close},function(e){return r([s(e.open),s(e.close)])}),l=o(function(e){return e.map(function(e){return e.open+";"+e.close}).join(";")},function(e){var t=[];return e.forEach(function(e){t.push(e.open),t.push(e.close)}),r(t)}),d=o(function(e){return e.map(function(e){return e.open+";"+e.close}).join(";")},function(e){var t=[];return e.forEach(function(e){t.push(s(e.open)),t.push(s(e.close))}),r(t)}),h=function(){function e(){}return e._findPrevBracketInText=function(e,t,n,o){var r=n.match(e);if(!r)return null;var s=n.length-r.index,a=r[0].length,c=o+s;return new i.Range(t,c-a+1,t,c+1)},e.findPrevBracketInToken=function(e,t,n,i,o){for(var r="",s=o-1;s>=i;s--)r+=n.charAt(s);return this._findPrevBracketInText(e,t,r,i)},e.findNextBracketInText=function(e,t,n,o){var r=n.match(e);if(!r)return null;var s=r.index,a=r[0].length,c=o+s;return new i.Range(t,c+1,t,c+1+a)},e.findNextBracketInToken=function(e,t,n,i,o){var r=n.substring(i,o);return this.findNextBracketInText(e,t,r,i)},e}();t.BracketsUtils=h}),define("vs/editor/common/modes/supports/electricCharacter",["require","exports","vs/base/common/strings","vs/editor/common/modes/supports","vs/editor/common/modes/supports/richEditBrackets"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n){this._modeId=e,this.contribution=n||{},this.brackets=new s(e,t,this.contribution.docComment,this.contribution.caseInsensitive)}return e.prototype.getElectricCharacters=function(){return Array.isArray(this.contribution.embeddedElectricCharacters)?this.contribution.embeddedElectricCharacters.concat(this.brackets.getElectricCharacters()):this.brackets.getElectricCharacters()},e.prototype.onElectricCharacter=function(e,t){var n=this;return i.handleEvent(e,t,function(e,t,i){return n._modeId===e.getId()?n.brackets.onElectricCharacter(t,i):e.richEditSupport&&e.richEditSupport.electricCharacter?e.richEditSupport.electricCharacter.onElectricCharacter(t,i):null})},e}();t.BracketElectricCharacterSupport=r;var s=function(){function e(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=!1),this._modeId=e,this._richEditBrackets=t,this._docComment=n?n:null}return e.prototype.getElectricCharacters=function(){var e=[];if(this._richEditBrackets)for(var t=0,n=this._richEditBrackets.brackets.length;n>t;t++){var i=this._richEditBrackets.brackets[t],o=i.close.charAt(i.close.length-1);e.push(o)}return this._docComment&&e.push(this._docComment.open.charAt(this._docComment.open.length-1)),e=e.filter(function(e,t,n){return n.indexOf(e)===t})},e.prototype.onElectricCharacter=function(e,t){return 0===e.getTokenCount()?null:this._onElectricCharacterDocComment(e,t)||this._onElectricCharacterStandardBrackets(e,t)},e.prototype.containsTokenTypes=function(e,t){for(var n=t.split("."),i=0;i<n.length;++i)if(e.indexOf(n[i])<0)return!1;return!0},e.prototype._onElectricCharacterStandardBrackets=function(e,t){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;var r=this._richEditBrackets.reversedRegex,s=e.getLineContent(),a=e.findIndexOfOffset(t),c=e.getTokenStartIndex(a),u=t+1,l=n.firstNonWhitespaceIndex(e.getLineContent());if(-1!==l&&c>l)return null;if(!i.ignoreBracketsInToken(e.getTokenType(a))){var d=o.BracketsUtils.findPrevBracketInToken(r,1,s,c,u);if(d){var h=s.substring(d.startColumn-1,d.endColumn-1),p=this._richEditBrackets.textIsOpenBracket[h];if(!p)return{matchOpenBracket:h}}}return null},e.prototype._onElectricCharacterDocComment=function(e,t){if(!this._docComment||!this._docComment.close)return null;var n=e.getLineContent(),i=n[t];if(i!==this._docComment.open.charAt(this._docComment.open.length-1))return null;if(n.indexOf(this._docComment.close,t)>=0)return null;var o=e.findIndexOfOffset(t);return this.containsTokenTypes(e.getTokenType(o),this._docComment.scope)?n.substring(e.getTokenStartIndex(o),t+1)!==this._docComment.open?null:{appendText:this._docComment.close}:null},e}();t.Brackets=s}),define("vs/editor/common/services/editorSimpleWorkerCommon",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.prototype.acceptNewModel=function(e){throw new Error("Not implemented!")},e.prototype.acceptModelChanged=function(e,t){throw new Error("Not implemented!")},e.prototype.acceptRemovedModel=function(e){throw new Error("Not implemented!")},e.prototype.computeDiff=function(e,t,n){throw new Error("Not implemented!")},e.prototype.computeDirtyDiff=function(e,t,n){throw new Error("Not implemented!")},e.prototype.computeLinks=function(e){throw new Error("Not implemented!")},e.prototype.textualSuggest=function(e,t,n,i){throw new Error("Not implemented!")},e.prototype.navigateValueSet=function(e,t,n,i,o){throw new Error("Not implemented!")},e}();t.EditorSimpleWorker=n}),define("vs/editor/common/viewLayout/editorLayoutProvider",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.compute=function(e){var t=this.computeLineNumbersWidth(e),n=this.computeGlyphMarginWidth(e),i=e.outerWidth-n-t-e.lineDecorationsWidth,o=0,r=o+n,s=r+t,a=s+e.lineDecorationsWidth,c=e.verticalScrollbarHasArrows?e.scrollbarArrowSize:0;return{width:e.outerWidth,height:e.outerHeight,glyphMarginLeft:o,glyphMarginWidth:n,glyphMarginHeight:e.outerHeight,lineNumbersLeft:r,lineNumbersWidth:t,lineNumbersHeight:e.outerHeight,decorationsLeft:s,decorationsWidth:e.lineDecorationsWidth,decorationsHeight:e.outerHeight,contentLeft:a,contentWidth:i,contentHeight:e.outerHeight,verticalScrollbarWidth:e.verticalScrollbarWidth,horizontalScrollbarHeight:e.horizontalScrollbarHeight,overviewRuler:{top:c,width:e.verticalScrollbarWidth,height:e.outerHeight-2*c,right:0}}},e.layoutEqual=function(e,t){return e.width===t.width&&e.height===t.height&&e.glyphMarginLeft===t.glyphMarginLeft&&e.glyphMarginWidth===t.glyphMarginWidth&&e.glyphMarginHeight===t.glyphMarginHeight&&e.lineNumbersLeft===t.lineNumbersLeft&&e.lineNumbersWidth===t.lineNumbersWidth&&e.lineNumbersHeight===t.lineNumbersHeight&&e.decorationsLeft===t.decorationsLeft&&e.decorationsWidth===t.decorationsWidth&&e.decorationsHeight===t.decorationsHeight&&e.contentLeft===t.contentLeft&&e.contentWidth===t.contentWidth&&e.contentHeight===t.contentHeight&&e.verticalScrollbarWidth===t.verticalScrollbarWidth&&e.horizontalScrollbarHeight===t.horizontalScrollbarHeight&&e.overviewRuler.top===t.overviewRuler.top&&e.overviewRuler.width===t.overviewRuler.width&&e.overviewRuler.height===t.overviewRuler.height&&e.overviewRuler.right===t.overviewRuler.right},e.computeGlyphMarginWidth=function(e){return e.showGlyphMargin?e.lineHeight:0},e.digitCount=function(e){for(var t=0;e;)e=Math.floor(e/10),t++;return t?t:1},e.computeLineNumbersWidth=function(e){if(e.showLineNumbers){var t=Math.max(this.digitCount(e.lineCount),e.lineNumbersMinChars);return Math.round(t*e.maxDigitWidth)}return 0},e}();t.EditorLayoutProvider=n}),define("vs/editor/common/viewLayout/viewLineParts",["require","exports","vs/base/common/strings","vs/editor/common/core/arrays","vs/editor/common/core/range"],function(e,t,n,i,o){"use strict";function r(e,t){return o.Range.compareRangesUsingStarts(e.range,t.range)}function s(e,t,n,i,o,s){if(s){var a=o.length;o=c(e,n,i.getFauxIndentLength(),o),o.length!==a&&o.sort(r)}return o.length>0?new l(e,t,i,n,o):new u(i,n)}function a(e,t){if(e.length<=1)return e;var n=e[e.length-1].startIndex;return n<t.length?e:e.slice(0,e.length-1)}function c(e,t,i,o){if(0===t.length)return o;var r=null,s=null,a=!0,c=n.firstNonWhitespaceIndex(t);if(0!==c&&(-1===c?(a=!1,r={startLineNumber:e,endLineNumber:e,startColumn:1,endColumn:t.length+1}):r={startLineNumber:e,endLineNumber:e,startColumn:1,endColumn:c+1}),r&&(i+1>=r.endColumn?r=null:r.startColumn=i+1),a){var u=n.lastNonWhitespaceIndex(t);u!==t.length-1&&(s={startLineNumber:e,endLineNumber:e,startColumn:u+2,endColumn:t.length+1})}if(r||s){var l=o.slice(0);return r&&l.unshift({options:{inlineClassName:"leading whitespace"},range:r}),s&&l.push({options:{inlineClassName:"trailing whitespace"},range:s}),l}return o}t.createLineParts=s;var u=function(){function e(e,t){this.lineTokens=e,this.parts=e.getTokens(),this.parts=a(this.parts,t)}return e.prototype.getParts=function(){return this.parts},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.lineTokens.equals(n.lineTokens)}return!1},e.prototype.findIndexOfOffset=function(e){return i.Arrays.findIndexInSegmentsArray(this.parts,e)},e}();t.FastViewLineParts=u;var l=function(){function e(e,t,n,i,o){for(var r,s,a,c=f.normalize(e,t,o),u=0,l=c.length,h=n.getTokens(),p=[],m=0,v=h.length;v>m;m++){for(r=h[m].startIndex,s=v>m+1?h[m+1].startIndex:n.getTextLength(),a=h[m].type;l>u&&c[u].startOffset<s;){if(c[u].startOffset>r&&(p.push(new d(r,a)),r=c[u].startOffset),p.push(new d(r,a+" "+c[u].className)),c[u].endOffset>=s){r=s;break}r=c[u].endOffset+1,u++}s>r&&p.push(new d(r,a))}this.parts=p,this.lastPartIndex=p.length-1,this.lastEndOffset=s}return e.prototype.getParts=function(){return this.parts},e.prototype.equals=function(t){if(t instanceof e){var n=t;if(this.lastPartIndex!==n.lastPartIndex)return!1;if(this.lastEndOffset!==n.lastEndOffset)return!1;for(var i=0,o=this.parts.length;o>i;i++){if(this.parts[i].startIndex!==n.parts[i].startIndex)return!1;if(this.parts[i].type!==n.parts[i].type)return!1}return!0}return!1},e.prototype.findIndexOfOffset=function(e){return i.Arrays.findIndexInSegmentsArray(this.parts,e)},e}();t.ViewLineParts=l;var d=function(){function e(e,t){this.startIndex=e,this.type=t}return e}(),h=function(){function e(e,t,n){this.startOffset=e,this.endOffset=t,this.className=n}return e}();t.DecorationSegment=h;var p=function(){function e(){this.stopOffsets=[],this.classNames=[],this.count=0}return e.prototype.consumeLowerThan=function(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){for(var i=0;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new h(t,this.stopOffsets[i],this.classNames.join(" "))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.count-=i+1}return this.count>0&&e>t&&(n.push(new h(t,e-1,this.classNames.join(" "))),t=e),t},e.prototype.insert=function(e,t){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t);else for(var n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t);break}this.count++},e}(),f=function(){function e(){}return e.normalize=function(t,n,i){var o=[];if(0===i.length)return o;var r,s,a,c,u,l=new p,d=0;for(c=0,u=i.length;u>c;c++)r=i[c],r.range.endLineNumber<t||r.range.startLineNumber>t||r.range.startLineNumber===r.range.endLineNumber&&r.range.startColumn===r.range.endColumn||(s=r.range.startLineNumber===t?r.range.startColumn-1:n-1,a=r.range.endLineNumber===t?r.range.endColumn-2:e.MAX_LINE_LENGTH-1,0>a||(d=l.consumeLowerThan(s,d,o),0===l.count&&(d=s),l.insert(a,r.options.inlineClassName)));return l.consumeLowerThan(e.MAX_LINE_LENGTH,d,o),o},e.MAX_LINE_LENGTH=1e7,e}();t.LineDecorationsNormalizer=f}),define("vs/editor/common/viewLayout/viewLineRenderer",["require","exports"],function(e,t){"use strict";function n(e){var t=e.lineContent,n=t.length,d=e.tabSize,h=e.parts,p=e.renderWhitespace,f=-1===e.stopRenderingLineAfter?n:e.stopRenderingLineAfter-1;if(0===n)return{charOffsetInPart:[],lastRenderedPartIndex:0,output:["<span><span>&nbsp;</span></span>"]};if(0===h.length)throw new Error("Cannot render non empty line without line parts!");var m=0,v=[],g=[],y=0,_=0;v.push("<span>");for(var b=0,S=h.length;S>b;b++){var E=h[b];v.push('<span class="'),v.push("token "),v.push(E.type.replace(/[^a-z0-9\-]/gi," ")),v.push('">');var w=!1;p&&(w=/\bwhitespace\b/.test(E.type));var C=n;for(S>b+1&&(C=Math.min(n,h[b+1].startIndex)),y=0;C>m;m++){g[m]=y;var T=t.charCodeAt(m);switch(T){case o:var k=d-(m+_)%d;for(_+=k-1,y+=k-1,k>0&&(v.push(w?"&rarr;":"&nbsp;"),k--);k>0;)v.push("&nbsp;"),k--;break;case i:v.push(w?"&middot;":"&nbsp;");break;case r:v.push("&lt;");break;case s:v.push("&gt;");break;case a:v.push("&amp;");break;case 0:v.push("&#00;");break;case l:case u:v.push("�");break;case c:v.push("&#8203");break;default:v.push(t.charAt(m))}if(y++,m>=f)return v.push("&hellip;</span></span>"),g[g.length-1]++,{charOffsetInPart:g,lastRenderedPartIndex:b,output:v}}v.push("</span>")}return v.push("</span>"),g.push(y),{charOffsetInPart:g,lastRenderedPartIndex:h.length-1,output:v}}var i=" ".charCodeAt(0),o="	".charCodeAt(0),r="<".charCodeAt(0),s=">".charCodeAt(0),a="&".charCodeAt(0),c="\r".charCodeAt(0),u="\u2028".charCodeAt(0),l=65279;t.renderLine=n}),define("vs/editor/common/viewLayout/whitespaceComputer",["require","exports"],function(e,t){"use strict";var n=function(){function e(){this.heights=[],this.ids=[],this.afterLineNumbers=[],this.ordinals=[],this.prefixSum=[],this.prefixSumValidIndex=-1,this.whitespaceId2Index={},this.lastWhitespaceId=0}return e.findInsertionIndex=function(e,t,n,i){for(var o,r=0,s=e.length;s>r;)o=Math.floor((r+s)/2),t===e[o]?i<n[o]?s=o:r=o+1:t<e[o]?s=o:r=o+1;return r},e.prototype.insertWhitespace=function(t,n,i){var o=++this.lastWhitespaceId,r=e.findInsertionIndex(this.afterLineNumbers,t,this.ordinals,n);return this.insertWhitespaceAtIndex(o,r,t,n,i),o},e.prototype.insertWhitespaceAtIndex=function(e,t,n,i,o){this.heights.splice(t,0,o),this.ids.splice(t,0,e),this.afterLineNumbers.splice(t,0,n),this.ordinals.splice(t,0,i),this.prefixSum.splice(t,0,0);var r,s;for(r in this.whitespaceId2Index)this.whitespaceId2Index.hasOwnProperty(r)&&(s=this.whitespaceId2Index[r],s>=t&&(this.whitespaceId2Index[r]=s+1));this.whitespaceId2Index[e.toString()]=t,this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,t-1)},e.prototype.changeWhitespace=function(e,t,n){var i=!1;return i=this.changeWhitespaceHeight(e,n)||i,i=this.changeWhitespaceAfterLineNumber(e,t)||i},e.prototype.changeWhitespaceHeight=function(e,t){var n=e.toString();if(this.whitespaceId2Index.hasOwnProperty(n)){var i=this.whitespaceId2Index[n];if(this.heights[i]!==t)return this.heights[i]=t,this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,i-1),!0}return!1},e.prototype.changeWhitespaceAfterLineNumber=function(t,n){var i=t.toString();if(this.whitespaceId2Index.hasOwnProperty(i)){var o=this.whitespaceId2Index[i];if(this.afterLineNumbers[o]!==n){var r=this.ordinals[o],s=this.heights[o];this.removeWhitespace(t);var a=e.findInsertionIndex(this.afterLineNumbers,n,this.ordinals,r);return this.insertWhitespaceAtIndex(t,a,n,r,s),!0}}return!1},e.prototype.removeWhitespace=function(e){var t=e.toString();if(this.whitespaceId2Index.hasOwnProperty(t)){var n=this.whitespaceId2Index[t];return delete this.whitespaceId2Index[t],this.removeWhitespaceAtIndex(n),!0}return!1},e.prototype.removeWhitespaceAtIndex=function(e){this.heights.splice(e,1),this.ids.splice(e,1),this.afterLineNumbers.splice(e,1),this.ordinals.splice(e,1),this.prefixSum.splice(e,1),this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,e-1);var t,n;for(t in this.whitespaceId2Index)this.whitespaceId2Index.hasOwnProperty(t)&&(n=this.whitespaceId2Index[t],n>=e&&(this.whitespaceId2Index[t]=n-1))},e.prototype.onModelLinesDeleted=function(e,t){var n,i,o;for(i=0,o=this.afterLineNumbers.length;o>i;i++)n=this.afterLineNumbers[i],n>=e&&t>=n?this.afterLineNumbers[i]=e-1:n>t&&(this.afterLineNumbers[i]-=t-e+1)},e.prototype.onModelLinesInserted=function(e,t){var n,i,o;for(i=0,o=this.afterLineNumbers.length;o>i;i++)n=this.afterLineNumbers[i],n>=e&&(this.afterLineNumbers[i]+=t-e+1)},e.prototype.getTotalHeight=function(){return 0===this.heights.length?0:this.getAccumulatedHeight(this.heights.length-1)},e.prototype.getAccumulatedHeight=function(e){var t=Math.max(0,this.prefixSumValidIndex+1);0===t&&(this.prefixSum[0]=this.heights[0],t++);for(var n=t;e>=n;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.heights[n];return this.prefixSumValidIndex=Math.max(this.prefixSumValidIndex,e),this.prefixSum[e]},e.prototype.getAccumulatedHeightBeforeLineNumber=function(e){var t=this.findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getAccumulatedHeight(t)},e.prototype.findLastWhitespaceBeforeLineNumber=function(e){for(var t,n=this.afterLineNumbers,i=0,o=n.length-1;o>=i;)if(t=Math.floor((i+o)/2),n[t]<e){if(t+1>=n.length||n[t+1]>=e)return t;i=t+1}else o=t-1;return-1},e.prototype.findFirstWhitespaceAfterLineNumber=function(e){var t=this.findLastWhitespaceBeforeLineNumber(e),n=t+1;return n<this.heights.length?n:-1},e.prototype.getFirstWhitespaceIndexAfterLineNumber=function(e){return this.findFirstWhitespaceAfterLineNumber(e)},e.prototype.getCount=function(){return this.heights.length},e.prototype.getAfterLineNumberForWhitespaceIndex=function(e){return this.afterLineNumbers[e]},e.prototype.getIdForWhitespaceIndex=function(e){return this.ids[e]},e.prototype.getHeightForWhitespaceIndex=function(e){return this.heights[e]},e.prototype.getWhitespaces=function(e){for(var t=[],n=0;n<this.heights.length;n++)t.push({id:this.ids[n],afterLineNumber:this.afterLineNumbers[n],heightInLines:this.heights[n]/e});return t},e}();t.WhitespaceComputer=n}),define("vs/editor/common/viewLayout/verticalObjects",["require","exports","vs/editor/common/viewLayout/whitespaceComputer"],function(e,t,n){"use strict";var i=function(){function e(){this.whitespaces=new n.WhitespaceComputer}return e.prototype.replaceLines=function(e){this.linesCount=e},e.prototype.insertWhitespace=function(e,t,n){return this.whitespaces.insertWhitespace(e,t,n)},e.prototype.changeWhitespace=function(e,t,n){return this.whitespaces.changeWhitespace(e,t,n)},e.prototype.removeWhitespace=function(e){return this.whitespaces.removeWhitespace(e)},e.prototype.onModelLinesDeleted=function(e,t){this.linesCount-=t-e+1,this.whitespaces.onModelLinesDeleted(e,t)},e.prototype.onModelLinesInserted=function(e,t){this.linesCount+=t-e+1,this.whitespaces.onModelLinesInserted(e,t)},e.prototype.getTotalHeight=function(e){var t=e*this.linesCount,n=this.whitespaces.getTotalHeight();return t+n},e.prototype.getVerticalOffsetForLineNumber=function(e,t){var n;n=e>1?t*(e-1):0;var i=this.whitespaces.getAccumulatedHeightBeforeLineNumber(e);return n+i},e.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){return this.whitespaces.getAccumulatedHeightBeforeLineNumber(e)},e.prototype.hasWhitespace=function(){return this.whitespaces.getCount()>0},e.prototype.isAfterLines=function(e,t){var n=this.getTotalHeight(t);return e>n},e.prototype.getLineNumberAtOrAfterVerticalOffset=function(e,t){if(0>e)return 1;for(var n,i,o,r=1,s=this.linesCount;s>r;)if(n=Math.floor((r+s)/2),i=this.getVerticalOffsetForLineNumber(n,t),o=t,e>=i+o)r=n+1;else{if(e>=i)return n;s=n}return r>this.linesCount?this.linesCount:r},e.prototype.getCenteredLineInViewport=function(e,t,n){for(var i,o,r=this.getLinesViewportData(e,t,n),s=(t-e)/2,a=r.startLineNumber;a<=r.endLineNumber;a++)if(i=r.visibleRangesDeltaTop+r.relativeVerticalOffset[a-r.startLineNumber],o=i+n,s>=i&&o>s||i>s)return a;return r.endLineNumber},e.prototype.getLinesViewportData=function(e,t,n){var i,o,r=this.getLineNumberAtOrAfterVerticalOffset(e,n),s=this.linesCount,a=this.getVerticalOffsetForLineNumber(r,n),c=this.whitespaces.getFirstWhitespaceIndexAfterLineNumber(r),u=this.whitespaces.getCount();-1===c?(c=u,o=s+1):(o=this.whitespaces.getAfterLineNumberForWhitespaceIndex(c),i=this.whitespaces.getHeightForWhitespaceIndex(c));var l=a,d=l,h=5e5,p=0;a>=h&&(p=Math.floor(a/h)*h,p=Math.floor(p/n)*n,d-=p);for(var f=[],m=r;s>=m;m++){for(l+=n,f.push(d),d+=n;o===m;)d+=i,l+=i,c++,c>=u?o=s+1:(o=this.whitespaces.getAfterLineNumberForWhitespaceIndex(c),i=this.whitespaces.getHeightForWhitespaceIndex(c));if(l>t){s=m;break}}return{viewportTop:e-p,viewportHeight:t-e,bigNumbersDelta:p,startLineNumber:r,endLineNumber:s,visibleRangesDeltaTop:-(e-p),relativeVerticalOffset:f,visibleRange:null,getInlineDecorationsForLineInViewport:null,getDecorationsInViewport:null}},e.prototype.getVerticalOffsetForWhitespaceIndex=function(e,t){var n,i=this.whitespaces.getAfterLineNumberForWhitespaceIndex(e);n=i>=1?t*i:0;var o;return o=e>0?this.whitespaces.getAccumulatedHeight(e-1):0,n+o},e.prototype.getWhitespaceIndexAtOrAfterVerticallOffset=function(e,t){var n,i,o,r=0,s=this.whitespaces.getCount()-1;if(0>s)return-1;var a=this.getVerticalOffsetForWhitespaceIndex(s,t),c=this.whitespaces.getHeightForWhitespaceIndex(s);if(e>=a+c)return-1;for(;s>r;)if(n=Math.floor((r+s)/2),i=this.getVerticalOffsetForWhitespaceIndex(n,t),o=this.whitespaces.getHeightForWhitespaceIndex(n),e>=i+o)r=n+1;else{if(e>=i)return n;s=n}return r},e.prototype.getWhitespaceAtVerticalOffset=function(e,t){var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e,t);if(0>n)return null;if(n>=this.whitespaces.getCount())return null;var i=this.getVerticalOffsetForWhitespaceIndex(n,t);if(i>e)return null;var o=this.whitespaces.getHeightForWhitespaceIndex(n),r=this.whitespaces.getIdForWhitespaceIndex(n),s=this.whitespaces.getAfterLineNumberForWhitespaceIndex(n);return{id:r,afterLineNumber:s,verticalOffset:i,height:o}},e.prototype.getWhitespaceViewportData=function(e,t,n){var i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e,n),o=this.whitespaces.getCount()-1;if(0>i)return[];var r,s,a,c=[];for(r=i;o>=r&&(s=this.getVerticalOffsetForWhitespaceIndex(r,n),a=this.whitespaces.getHeightForWhitespaceIndex(r),!(s>=t));r++)c.push({id:this.whitespaces.getIdForWhitespaceIndex(r),afterLineNumber:this.whitespaces.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:s,height:a});return c},e.prototype.getWhitespaces=function(e){return this.whitespaces.getWhitespaces(e)},e}();t.VerticalObjects=i}),define("vs/editor/common/viewLayout/linesLayout",["require","exports","vs/editor/common/viewLayout/verticalObjects"],function(e,t,n){"use strict";var i=function(){function e(e,t){this.configuration=e,this.model=t,this.verticalObjects=new n.VerticalObjects,this.verticalObjects.replaceLines(t.getLineCount())}return e.prototype.insertWhitespace=function(e,t,n){return this.verticalObjects.insertWhitespace(e,t,n)},e.prototype.changeWhitespace=function(e,t,n){return this.verticalObjects.changeWhitespace(e,t,n)},e.prototype.removeWhitespace=function(e){return this.verticalObjects.removeWhitespace(e)},e.prototype.onModelFlushed=function(){this.verticalObjects.replaceLines(this.model.getLineCount())},e.prototype.onModelLinesDeleted=function(e){this.verticalObjects.onModelLinesDeleted(e.fromLineNumber,e.toLineNumber)},e.prototype.onModelLinesInserted=function(e){this.verticalObjects.onModelLinesInserted(e.fromLineNumber,e.toLineNumber)},e.prototype.getVerticalOffsetForLineNumber=function(e){return this.verticalObjects.getVerticalOffsetForLineNumber(e,this.configuration.editor.lineHeight)},e.prototype.getLinesTotalHeight=function(){return this.verticalObjects.getTotalHeight(this.configuration.editor.lineHeight)},e.prototype.getTotalHeight=function(e,t){var n=this.getLinesTotalHeight();return n+=this.configuration.editor.scrollBeyondLastLine?e.height-this.configuration.editor.lineHeight:t,Math.max(e.height,n)},e.prototype.isAfterLines=function(e){return this.verticalObjects.isAfterLines(e,this.configuration.editor.lineHeight)},e.prototype.getLineNumberAtOrAfterVerticalOffset=function(e){return this.verticalObjects.getLineNumberAtOrAfterVerticalOffset(e,this.configuration.editor.lineHeight)},e.prototype.getHeightForLineNumber=function(e){return this.configuration.editor.lineHeight},e.prototype.getWhitespaceViewportData=function(e){return this.verticalObjects.getWhitespaceViewportData(e.top,e.top+e.height,this.configuration.editor.lineHeight)},e.prototype.getWhitespaces=function(){return this.verticalObjects.getWhitespaces(this.configuration.editor.lineHeight)},e.prototype.getWhitespaceAtVerticalOffset=function(e){return this.verticalObjects.getWhitespaceAtVerticalOffset(e,this.configuration.editor.lineHeight)},e.prototype.getLinesViewportData=function(e){var t=this.verticalObjects.getLinesViewportData(e.top,e.top+e.height,this.configuration.editor.lineHeight),n=this.model.getDecorationsResolver(t.startLineNumber,t.endLineNumber);return t.getDecorationsInViewport=function(){return n.getDecorations()},t.getInlineDecorationsForLineInViewport=function(e){return n.getInlineDecorations(e)},t},e.prototype.getCenteredLineInViewport=function(e){return this.verticalObjects.getCenteredLineInViewport(e.top,e.top+e.height,this.configuration.editor.lineHeight)},e.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){return this.verticalObjects.getWhitespaceAccumulatedHeightBeforeLineNumber(e)},e.prototype.hasWhitespace=function(){return this.verticalObjects.hasWhitespace()},e}();t.LinesLayout=i}),define("vs/editor/common/viewModel/prefixSumComputer",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.values=e,this.prefixSum=[];for(var t=0,n=this.values.length;n>t;t++)this.prefixSum[t]=0;this.prefixSumValidIndex=-1}return e.prototype.getCount=function(){return this.values.length},e.prototype.insertValue=function(e,t){this.values.splice(e,0,t),this.prefixSum.splice(e,0,0),e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1)},e.prototype.insertValues=function(t,n){0!==n.length&&(this.values=this.values.slice(0,t).concat(n).concat(this.values.slice(t)),this.prefixSum=this.prefixSum.slice(0,t).concat(e._zeroArray(n.length)).concat(this.prefixSum.slice(t)),t-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=t-1))},e._zeroArray=function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=0;return t},e.prototype.changeValue=function(e,t){this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1))},e.prototype.removeValues=function(e,t){this.values.splice(e,t),this.prefixSum.splice(e,t),e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1)},e.prototype.getTotalValue=function(){return 0===this.values.length?0:this.getAccumulatedValue(this.values.length-1)},e.prototype.getAccumulatedValue=function(e){if(0>e)return 0;if(e<=this.prefixSumValidIndex)return this.prefixSum[e];var t=this.prefixSumValidIndex+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(var n=t;e>=n;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex=Math.max(this.prefixSumValidIndex,e),this.prefixSum[e]},e.prototype.getIndexOf=function(e,t){for(var n,i,o,r=0,s=this.values.length-1;s>=r;)if(n=r+(s-r)/2|0,o=this.getAccumulatedValue(n),i=o-this.values[n],i>e)s=n-1;else{if(!(e>=o))break;r=n+1}t.index=n,t.remainder=e-i},e}();t.PrefixSumComputer=n}),define("vs/editor/common/model/mirrorModel2",["require","exports","vs/editor/common/viewModel/prefixSumComputer"],function(e,t,n){"use strict";var i=function(){function e(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i}return e.prototype.dispose=function(){this._lines.length=0},Object.defineProperty(e.prototype,"version",{get:function(){return this._versionId},enumerable:!0,configurable:!0}),e.prototype.getText=function(){return this._lines.join(this._eol)},e.prototype.onEvents=function(e){for(var t=null,n=0,i=e.length;i>n;n++){var o=e[n];o.eol&&(t=o.eol)}t&&t!==this._eol&&(this._eol=t,this._lineStarts=null);for(var r=-1,n=0,i=e.length;i>n;n++){var o=e[n];this._acceptDeleteRange(o.range),this._acceptInsertText({lineNumber:o.range.startLineNumber,column:o.range.startColumn},o.text),r=Math.max(r,o.versionId)}-1!==r&&(this._versionId=r)},e.prototype._ensureLineStarts=function(){if(!this._lineStarts){for(var e=[],t=this._eol.length,i=0,o=this._lines.length;o>i;i++)e.push(this._lines[i].length+t);this._lineStarts=new n.PrefixSumComputer(e)}},e.prototype._setLineText=function(e,t){
this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)},e.prototype._acceptDeleteRange=function(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)},e.prototype._acceptInsertText=function(e,t){if(0!==t.length){var n=t.split(/\r\n|\r|\n/);if(1===n.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);for(var i=new Array(n.length-1),o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}},e}();t.MirrorModel2=i}),define("vs/editor/contrib/folding/common/indentFoldStrategy",["require","exports"],function(e,t){"use strict";function n(e,t,n){void 0===n&&(n=1);var o=[],r=[];r.push({indent:-1,line:e.getLineCount()+1});for(var s=e.getLineCount();s>0;s--){var a=i(e.getLineContent(s),t);if(-1!==a){var c=r[r.length-1];if(c.indent>a){do r.pop(),c=r[r.length-1];while(c.indent>a);var u=c.line-1;u-s>=n&&o.push({startLineNumber:s,endLineNumber:u,indent:a})}c.indent===a?c.line=s:r.push({indent:a,line:s})}}return o.reverse()}function i(e,t){for(var n=0,i=0;n<e.length;){var o=e.charAt(n);if(" "===o)i++;else{if("	"!==o)break;i=i-i%t+t}n++}return n===e.length?-1:i}function o(e,t){if(e.length<=t)return e;var n=[];e.forEach(function(e){e.indent<1e3&&(n[e.indent]=(n[e.indent]||0)+1)});for(var i=n.length,o=0;o<n.length;o++)if(n[o]&&(t-=n[o],0>t)){i=o;break}return e.filter(function(e){return e.indent<i})}t.computeRanges=n,t.computeIndentLevel=i,t.limitByIndent=o}),define("vs/editor/contrib/format/common/formatCommand",["require","exports","vs/base/common/strings","vs/editor/common/core/range"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this._edits=e,this._initialSelection=t}return e.prototype.getEditOperations=function(t,n){this._edits.map(function(n){return e.trimEdit(n,t)}).filter(function(e){return null!==e}).forEach(function(e){return n.addEditOperation(i.Range.lift(e.range),e.text)});var o=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(o=!0,this._selectionId=n.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(o=!0,this._selectionId=n.trackSelection(this._initialSelection,!1))),o||(this._selectionId=n.trackSelection(this._initialSelection))},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},e.fixLineTerminators=function(e,t){e.text=e.text.replace(/\r\n|\r|\n/g,t.getEOL())},e.trimEdit=function(e,t){return this.fixLineTerminators(e,t),this._trimEdit(t.validateRange(e.range),e.text,e.forceMoveMarkers,t)},e._trimEdit=function(e,t,o,r){var s=r.getValueInRange(e),a=n.commonPrefixLength(t,s);if(a===s.length&&a===t.length)return null;if(a>0){var c=r.modifyPosition(e.getStartPosition(),a);e=new i.Range(c.lineNumber,c.column,e.endLineNumber,e.endColumn),t=t.substring(a),s=s.substr(a)}var u=n.commonSuffixLength(t,s);if(u>0){var l=r.modifyPosition(e.getEndPosition(),-u);e=new i.Range(e.startLineNumber,e.startColumn,l.lineNumber,l.column),t=t.substring(0,t.length-u),s=s.substring(0,s.length-u)}return{text:t,range:e,forceMoveMarkers:o}},e}();t.EditOperationsCommand=o}),define("vs/editor/contrib/indentation/common/indentationCommands",["require","exports","vs/editor/common/core/range"],function(e,t,n){"use strict";function i(e,t,i,o){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){for(var r="",s=0;i>s;s++)r+=" ";for(var a=e.getLinesContent(),s=0;s<a.length;s++){var c=e.getLineFirstNonWhitespaceColumn(s+1);0===c&&(c=e.getLineMaxColumn(s+1));var u=(o?a[s].substr(0,c).replace(/\t/gi,r):a[s].substr(0,c).replace(new RegExp(r,"gi"),"	"))+a[s].substr(c);t.addEditOperation(new n.Range(s+1,1,s+1,e.getLineMaxColumn(s+1)),u)}}}var o=function(){function e(e,t){this.selection=e,this.tabSize=t}return e.prototype.getEditOperations=function(e,t){this.selectionId=t.trackSelection(this.selection),i(e,t,this.tabSize,!0)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();t.IndentationToSpacesCommand=o;var r=function(){function e(e,t){this.selection=e,this.tabSize=t}return e.prototype.getEditOperations=function(e,t){this.selectionId=t.trackSelection(this.selection),i(e,t,this.tabSize,!1)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();t.IndentationToTabsCommand=r}),define("vs/editor/contrib/linesOperations/common/sortLinesCommand",["require","exports","vs/editor/common/core/editOperation","vs/editor/common/core/range"],function(e,t,n,i){"use strict";function o(e,t,o){var r=t.startLineNumber,s=t.endLineNumber;if(1===t.endColumn&&s--,r>=s)return null;for(var a=[],c=r;s>=c;c++)a.push(e.getLineContent(c));var u=a.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});return o===!0&&(u=u.reverse()),n.EditOperation.replace(new i.Range(r,1,s,e.getLineMaxColumn(s)),u.join("\n"))}var r=function(){function e(e,t){this.selection=e,this.descending=t}return e.prototype.getEditOperations=function(e,t){var n=o(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();t.SortLinesCommand=r,t.sortLines=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/smartSelect/common/tokenTree",["require","exports","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/modes/supports","vs/editor/common/modes/supports/richEditBrackets"],function(e,t,n,i,o,r){"use strict";function s(e){var t=new l;return t.start=n.Position.startPosition(e.range),t.end=n.Position.endPosition(e.range),t}function a(e){var t=new f(e).build();return t}function c(e,t){if(!i.Range.containsPosition(e.range,t))return null;var n;if(e instanceof d)for(var o=0,r=e.children.length;r>o&&!n;o++)n=c(e.children[o],t);else e instanceof h&&(n=c(e.open,t)||c(e.elements,t)||c(e.close,t));return n||e}!function(e){e[e.None=0]="None",e[e.Open=1]="Open",e[e.Close=-1]="Close"}(t.TokenTreeBracket||(t.TokenTreeBracket={}));var u=t.TokenTreeBracket,l=function(){function e(){}return Object.defineProperty(e.prototype,"range",{get:function(){return{startLineNumber:this.start.lineNumber,startColumn:this.start.column,endLineNumber:this.end.lineNumber,endColumn:this.end.column}},enumerable:!0,configurable:!0}),e}();t.Node=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"start",{get:function(){return this.hasChildren?this.children[0].start:this.parent.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.hasChildren?this.children[this.children.length-1].end:this.parent.end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasChildren",{get:function(){return this.children&&this.children.length>0},enumerable:!0,configurable:!0}),t.prototype.append=function(e){return e?(e.parent=this,this.children||(this.children=[]),e instanceof t?e.children&&this.children.push.apply(this.children,e.children):this.children.push(e),!0):!1},t}(l);t.NodeList=d;var h=function(e){function t(){e.call(this),this.elements=new d,this.elements.parent=this}return __extends(t,e),Object.defineProperty(t.prototype,"start",{get:function(){return this.open.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.close.end},enumerable:!0,configurable:!0}),t}(l);t.Block=h;var p=function(){function e(e){this._model=e,this._versionId=e.getVersionId(),this._currentLineNumber=1}return e.prototype.next=function(){if(this._versionId!==this._model.getVersionId())return null;if(this._currentLineNumber>=this._model.getLineCount()+1)return null;if(this._currentLineTokens||(this._currentLineTokens=this._model.getLineTokens(this._currentLineNumber),this._currentLineText=this._model.getLineContent(this._currentLineNumber),this._currentLineModeTransitions=this._model._getLineModeTransitions(this._currentLineNumber),this._currentTokenIndex=0,this._currentTokenStart=0,this._currentModeIndex=-1,this._nextModeStart=0),this._currentTokenIndex>=this._currentLineTokens.getTokenCount())return this._currentLineNumber+=1,this._currentLineTokens=null,this.next();if(this._currentTokenStart>=this._nextModeStart){this._currentModeIndex++,this._nextModeStart=this._currentModeIndex+1<this._currentLineModeTransitions.length?this._currentLineModeTransitions[this._currentModeIndex+1].startIndex:this._currentLineText.length+1;var e=this._currentModeIndex<this._currentLineModeTransitions.length?this._currentLineModeTransitions[this._currentModeIndex]:null;this._currentModeBrackets=e&&e.mode.richEditSupport?e.mode.richEditSupport.brackets:null}var t=this._currentLineTokens.getTokenType(this._currentTokenIndex),n=this._currentLineTokens.getTokenEndIndex(this._currentTokenIndex,this._currentLineText.length),i=null;this._currentModeBrackets&&!o.ignoreBracketsInToken(t)&&(i=r.BracketsUtils.findNextBracketInToken(this._currentModeBrackets.forwardRegex,this._currentLineNumber,this._currentLineText,this._currentTokenStart,n)),i&&this._currentTokenStart<i.startColumn-1&&(n=i.startColumn-1,i=null);var s=null,a=!1;if(i){var c=this._currentLineText.substring(i.startColumn-1,i.endColumn-1);s=this._currentModeBrackets.textIsBracket[c],a=this._currentModeBrackets.textIsOpenBracket[c]}if(!s){var l={type:t,bracket:u.None,range:{startLineNumber:this._currentLineNumber,startColumn:1+this._currentTokenStart,endLineNumber:this._currentLineNumber,endColumn:1+n}};return this._currentTokenIndex+=1,this._currentTokenStart=this._currentTokenIndex<this._currentLineTokens.getTokenCount()?this._currentLineTokens.getTokenStartIndex(this._currentTokenIndex):0,l}var d=s.modeId+";"+s.open+";"+s.close,h={type:d,bracket:a?u.Open:u.Close,range:{startLineNumber:this._currentLineNumber,startColumn:1+this._currentTokenStart,endLineNumber:this._currentLineNumber,endColumn:i.endColumn}};return i.endColumn-1<n?this._currentTokenStart=i.endColumn-1:(this._currentTokenIndex+=1,this._currentTokenStart=this._currentTokenIndex<this._currentLineTokens.getTokenCount()?this._currentLineTokens.getTokenStartIndex(this._currentTokenIndex):0),h},e}(),f=function(){function e(e){this._stack=[],this._scanner=new p(e)}return e.prototype.build=function(){for(var e=new d;e.append(this._line()||this._any()););return e},e.prototype._accept=function(e){var t=this._stack.pop()||this._scanner.next();if(!t)return!1;var n=e(t);return n?this._currentToken=t:(this._stack.push(t),this._currentToken=null),n},e.prototype._peek=function(e){var t=!1;return this._accept(function(n){return t=e(n),!1}),t},e.prototype._line=function(){var e,t=new d;for(this._peek(function(t){return e=t.range.startLineNumber,!1});this._peek(function(t){return t.range.startLineNumber===e})&&t.append(this._token()||this._block()););return t.children&&0!==t.children.length?1===t.children.length?t.children[0]:t:null},e.prototype._token=function(){return this._accept(function(e){return e.bracket===u.None})?s(this._currentToken):null},e.prototype._block=function(){var e,t;if(t=this._accept(function(t){return e=t.type,t.bracket===u.Open}),!t)return null;var n=new h;for(n.open=s(this._currentToken);n.elements.append(this._line()););if(!this._accept(function(t){return t.bracket===u.Close&&t.type===e})){var i=new d;return i.append(n.open),i.append(n.elements),i}return n.close=s(this._currentToken),n},e.prototype._any=function(){return this._accept(function(e){return!0})?s(this._currentToken):null},e}();t.build=a,t.find=c}),define("vs/editor/contrib/snippet/browser/snippet",["require","exports","vs/css!./snippet"],function(e,t){"use strict"}),define("vs/languages/css/common/level",["require","exports"],function(e,t){"use strict";function n(e){switch(e){case"ignore":return i.Ignore;case"warning":return i.Warning;case"error":return i.Error}return null}!function(e){e[e.Ignore=1]="Ignore",e[e.Warning=2]="Warning",e[e.Error=4]="Error"}(t.Level||(t.Level={}));var i=t.Level;t.toLevel=n}),define("vs/nls!vs/base/browser/ui/actionbar/actionbar",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/actionbar/actionbar",t)}),define("vs/nls!vs/base/browser/ui/aria/aria",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/aria/aria",t)}),define("vs/nls!vs/base/browser/ui/findinput/findInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/findinput/findInput",t)}),define("vs/nls!vs/base/browser/ui/inputbox/inputBox",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/inputbox/inputBox",t)}),define("vs/nls!vs/base/browser/ui/messagelist/messageList",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/messagelist/messageList",t)}),define("vs/nls!vs/base/browser/ui/resourceviewer/resourceViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/resourceviewer/resourceViewer",t)}),define("vs/nls!vs/base/browser/ui/toolbar/toolbar",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/toolbar/toolbar",t)}),define("vs/nls!vs/base/common/errors",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/errors",t)}),define("vs/base/common/errors",["require","exports","vs/nls!vs/base/common/errors","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/arrays","vs/base/common/strings"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){t.errorHandler.setUnexpectedErrorHandler(e)}function u(e){v(e)||t.errorHandler.onUnexpectedError(e)}function l(e){return e.then(null,u)}function d(e){if(e instanceof Error){var t=e.name,n=e.message,i=e.stacktrace||e.stack;return{$isError:!0,name:t,message:n,stack:i}}return e}function h(e,t){var n=new T(e);return t?n.verboseMessage:n.message}function p(e,t){return e.message?t&&(e.stack||e.stacktrace)?n.localize(7,null,f(e),e.stack||e.stacktrace):f(e):n.localize(8,null)}function f(e){return"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?n.localize(9,null,e.message):e.message}function m(e,t){if(void 0===e&&(e=null),void 0===t&&(t=!1),!e)return n.localize(10,null);if(Array.isArray(e)){var i=s.coalesce(e),o=m(i[0],t);return i.length>1?n.localize(11,null,o,i.length):o}if(r.isString(e))return e;if(!r.isUndefinedOrNull(e.status))return h(e,t);if(e.detail){var a=e.detail;if(a.error){if(a.error&&!r.isUndefinedOrNull(a.error.status))return h(a.error,t);if(!r.isArray(a.error))return p(a.error,t);for(var c=0;c<a.error.length;c++)if(a.error[c]&&!r.isUndefinedOrNull(a.error[c].status))return h(a.error[c],t)}if(a.exception)return r.isUndefinedOrNull(a.exception.status)?p(a.exception,t):h(a.exception,t)}return e.stack?p(e,t):e.message?e.message:n.localize(12,null)}function v(e){return e instanceof Error&&e.name===k&&e.message===k}function g(){var e=new Error(k);return e.name=e.message,e}function y(){return new Error(n.localize(13,null))}function _(e){return e?new Error(n.localize(14,null,e)):new Error(n.localize(15,null))}function b(e){return e?new Error(n.localize(16,null,e)):new Error(n.localize(17,null))}function S(){return new Error("readonly property cannot be changed")}function E(e){return o.isWeb?new Error(n.localize(18,null)):new Error(n.localize(19,null,JSON.stringify(e)))}function w(e,t){void 0===t&&(t={});var n=new Error(e);return r.isNumber(t.severity)&&(n.severity=t.severity),t.actions&&(n.actions=t.actions),n}var C=function(){function e(){this.listeners=[],this.unexpectedErrorHandler=function(e){o.setTimeout(function(){if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}return e.prototype.addListener=function(e){var t=this;return this.listeners.push(e),function(){t._removeListener(e)}},e.prototype.emit=function(e){this.listeners.forEach(function(t){t(e)})},e.prototype._removeListener=function(e){this.listeners.splice(this.listeners.indexOf(e),1)},e.prototype.setUnexpectedErrorHandler=function(e){this.unexpectedErrorHandler=e},e.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler},e.prototype.onUnexpectedError=function(e){this.unexpectedErrorHandler(e),this.emit(e)},e}();t.ErrorHandler=C,t.errorHandler=new C,t.setUnexpectedErrorHandler=c,t.onUnexpectedError=u,t.onUnexpectedPromiseError=l,t.transformErrorForSerialization=d;var T=function(){function e(e){this.status=e.status,this.statusText=e.statusText,this.name="ConnectionError";try{this.responseText=e.responseText}catch(t){this.responseText=""}if(this.errorMessage=null,this.errorCode=null,this.errorObject=null,this.responseText)try{var n=JSON.parse(this.responseText);this.errorMessage=n.message,this.errorCode=n.code,this.errorObject=n}catch(i){}}return Object.defineProperty(e.prototype,"message",{get:function(){return this.connectionErrorToMessage(this,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verboseMessage",{get:function(){return this.connectionErrorToMessage(this,!0)},enumerable:!0,configurable:!0}),e.prototype.connectionErrorDetailsToMessage=function(e,t){var i=e.errorCode,o=e.errorMessage;return null!==i&&null!==o?n.localize(0,null,a.rtrim(o,"."),i):null!==o?o:t&&null!==e.responseText?e.responseText:null},e.prototype.connectionErrorToMessage=function(e,t){var i=this.connectionErrorDetailsToMessage(e,t);return 401===e.status?null!==i?n.localize(1,null,i):n.localize(2,null):i?i:e.status>0&&null!==e.statusText?t&&null!==e.responseText&&e.responseText.length>0?n.localize(3,null,e.statusText,e.status,e.responseText):n.localize(4,null,e.statusText,e.status):t&&null!==e.responseText&&e.responseText.length>0?n.localize(5,null,e.responseText):n.localize(6,null)},e}();t.ConnectionError=T,i.derive(Error,T),t.toErrorMessage=m;var k="Canceled";t.isPromiseCanceledError=v,t.canceled=g,t.notImplemented=y,t.illegalArgument=_,t.illegalState=b,t.readonly=S,t.loaderError=E,t.create=w}),define("vs/base/common/callbackList",["require","exports","vs/base/common/errors"],function(e,t,n){"use strict";var i=function(){function e(){}return e.prototype.add=function(e,t,n){var i=this;void 0===t&&(t=null),this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:function(){return i.remove(e,t)}})},e.prototype.remove=function(e,t){if(void 0===t&&(t=null),this._callbacks){for(var n=!1,i=0,o=this._callbacks.length;o>i;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(this._callbacks){for(var i=[],o=this._callbacks.slice(0),r=this._contexts.slice(0),s=0,a=o.length;a>s;s++)try{i.push(o[s].apply(r[s],e))}catch(c){n.onUnexpectedError(c)}return i}},e.prototype.isEmpty=function(){return!this._callbacks||0===this._callbacks.length},e.prototype.dispose=function(){this._callbacks=void 0,this._contexts=void 0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}),define("vs/base/common/event",["require","exports","vs/base/common/callbackList"],function(e,t,n){"use strict";function i(e,t){return function(n,i,o){var r=e.addListener2(t,function(){n.apply(i,arguments)});return Array.isArray(o)&&o.push(r),r}}function o(e,t){return function(n,i,o){return e(function(e){return n(t(e))},i,o)}}var r;!function(e){var t={dispose:function(){}};e.None=function(){return t}}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var s=function(){function e(e){this._options=e}return Object.defineProperty(e.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(i,o,r){t._callbacks||(t._callbacks=new n["default"]),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(i,o);var s;return s={dispose:function(){s.dispose=e._noop,t._disposed||(t._callbacks.remove(i,o),t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}},Array.isArray(r)&&r.push(s),s}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)},e.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0,this._disposed=!0)},e._noop=function(){},e}();t.Emitter=s,t.fromEventEmitter=i,t.mapEvent=o;var a;!function(e){e[e.Idle=0]="Idle",e[e.Running=1]="Running"}(a||(a={}));var c=function(){function e(){this.buffers=[]}return e.prototype.wrapEvent=function(e){var t=this;return function(n,i,o){return e(function(e){var o=t.buffers[t.buffers.length-1];o?o.push(function(){return n.call(i,e)}):n.call(i,e)},void 0,o)}},e.prototype.bufferEvents=function(e){var t=[];this.buffers.push(t),e(),this.buffers.pop(),t.forEach(function(e){return e()})},e}();t.EventBufferer=c}),define("vs/base/common/cancellation",["require","exports","vs/base/common/event"],function(e,t,n){"use strict";var i;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n["default"].None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n["default"].None})}(i=t.CancellationToken||(t.CancellationToken={}));var o=Object.freeze(function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}}),r=function(){function e(){this._isCancelled=!1}return e.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))},Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?o:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),e}(),s=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token||(this._token=new r),this._token},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._token?this._token.cancel():this._token=i.Cancelled},e.prototype.dispose=function(){this.cancel()},e}();t.CancellationTokenSource=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/eventEmitter",["require","exports","vs/base/common/errors"],function(e,t,n){"use strict";var i=function(){function e(e,t,n){void 0===n&&(n=null),this._type=e,this._data=t,this._emitterType=n}return e.prototype.getType=function(){return this._type},e.prototype.getData=function(){return this._data},e.prototype.getEmitterType=function(){return this._emitterType},e}();t.EmitterEvent=i;var o=function(){function e(e){if(void 0===e&&(e=null),this._listeners={},this._bulkListeners=[],this._collectedEvents=[],this._deferredCnt=0,e){this._allowedEventTypes={};for(var t=0;t<e.length;t++)this._allowedEventTypes[e[t]]=!0}else this._allowedEventTypes=null}return e.prototype.dispose=function(){this._listeners={},this._bulkListeners=[],this._collectedEvents=[],this._deferredCnt=0,this._allowedEventTypes=null},e.prototype.addListener=function(e,t){if("*"===e)throw new Error("Use addBulkListener(listener) to register your listener!");if(this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("This object will never emit this event type!");this._listeners.hasOwnProperty(e)?this._listeners[e].push(t):this._listeners[e]=[t];var n=this;return function(){n&&(n._removeListener(e,t),n=null,t=null)}},e.prototype.addListener2=function(e,t){var n=this.addListener(e,t);return{dispose:n}},e.prototype.on=function(e,t){return this.addListener(e,t)},e.prototype.addOneTimeListener=function(e,t){var n=this.addListener(e,function(e){n(),t(e)});return n},e.prototype.addOneTimeDisposableListener=function(e,t){var n=this.addOneTimeListener(e,t);return{dispose:n}},e.prototype.addBulkListener=function(e){var t=this;return this._bulkListeners.push(e),function(){t._removeBulkListener(e)}},e.prototype.addBulkListener2=function(e){var t=this.addBulkListener(e);return{dispose:t}},e.prototype.addEmitter=function(e,t){var n=this;return void 0===t&&(t=null),e.addBulkListener(function(e){var o=e;if(t){o=[];for(var r=0,s=e.length;s>r;r++)o.push(new i(e[r].getType(),e[r].getData(),t))}0===n._deferredCnt?n._emitEvents(o):n._collectedEvents.push.apply(n._collectedEvents,o)})},e.prototype.addEmitter2=function(e,t){var n=this.addEmitter(e,t);return{dispose:n}},e.prototype.addEmitterTypeListener=function(e,t,n){if(t){if("*"===e)throw new Error("Bulk listeners cannot specify an emitter type");return this.addListener(e+"/"+t,n)}return this.addListener(e,n)},e.prototype._removeListener=function(e,t){if(this._listeners.hasOwnProperty(e))for(var n=this._listeners[e],i=0,o=n.length;o>i;i++)if(n[i]===t){n.splice(i,1);break}},e.prototype._removeBulkListener=function(e){for(var t=0,n=this._bulkListeners.length;n>t;t++)if(this._bulkListeners[t]===e){this._bulkListeners.splice(t,1);break}},e.prototype._emitToSpecificTypeListeners=function(e,t){if(this._listeners.hasOwnProperty(e))for(var i=this._listeners[e].slice(0),o=0,r=i.length;r>o;o++)try{i[o](t)}catch(s){n.onUnexpectedError(s)}},e.prototype._emitToBulkListeners=function(e){for(var t=this._bulkListeners.slice(0),i=0,o=t.length;o>i;i++)try{t[i](e)}catch(r){n.onUnexpectedError(r)}},e.prototype._emitEvents=function(e){this._bulkListeners.length>0&&this._emitToBulkListeners(e);for(var t=0,n=e.length;n>t;t++){var i=e[t];this._emitToSpecificTypeListeners(i.getType(),i.getData()),i.getEmitterType()&&this._emitToSpecificTypeListeners(i.getType()+"/"+i.getEmitterType(),i.getData())}},e.prototype.emit=function(e,t){if(void 0===t&&(t={}),this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("Cannot emit this event type because it wasn't white-listed!");if(this._listeners.hasOwnProperty(e)||0!==this._bulkListeners.length){var n=new i(e,t);0===this._deferredCnt?this._emitEvents([n]):this._collectedEvents.push(n)}},e.prototype.deferredEmit=function(e){this._deferredCnt=this._deferredCnt+1;var t=null;try{t=e()}catch(i){n.onUnexpectedError(i)}return this._deferredCnt=this._deferredCnt-1,0===this._deferredCnt&&this._emitCollected(),t},e.prototype._emitCollected=function(){var e=this._collectedEvents;this._collectedEvents=[],e.length>0&&this._emitEvents(e)},e}();t.EventEmitter=o;var r=function(){function e(e,t){this.target=e,this.arg=t}return e}(),s=function(e){function t(t){void 0===t&&(t=null),e.call(this,t),this._emitQueue=[]}return __extends(t,e),t.prototype._emitToSpecificTypeListeners=function(e,t){if(this._listeners.hasOwnProperty(e))for(var n=this._listeners[e],i=0,o=n.length;o>i;i++)this._emitQueue.push(new r(n[i],t))},t.prototype._emitToBulkListeners=function(e){for(var t=this._bulkListeners,n=0,i=t.length;i>n;n++)this._emitQueue.push(new r(t[n],e))},t.prototype._emitEvents=function(t){for(e.prototype._emitEvents.call(this,t);this._emitQueue.length>0;){var i=this._emitQueue.shift();try{i.target(i.arg)}catch(o){n.onUnexpectedError(o)}}},t}(o);t.OrderGuaranteeEventEmitter=s}),define("vs/base/common/timer",["require","exports","vs/base/common/platform","vs/base/common/errors","vs/base/common/stopwatch"],function(e,t,n,i,o){"use strict";function r(e,t,n,i){return h.start(e,t,n,i)}function s(){return h}t.ENABLE_TIMER=!1;var a=n.globals.msWriteProfilerMark;!function(e){e[e.EDITOR=0]="EDITOR",e[e.LANGUAGES=1]="LANGUAGES",e[e.WORKER=2]="WORKER",e[e.WORKBENCH=3]="WORKBENCH",e[e.STARTUP=4]="STARTUP"}(t.Topic||(t.Topic={}));var c=t.Topic,u=function(){function e(){}return e.prototype.stop=function(){},e.prototype.timeTaken=function(){return-1},e}(),l=function(){function e(e,t,n,i,r){if(this.timeKeeper=e,this.name=t,this.description=r,this.topic=n,this.stopTime=null,i)return void(this.startTime=i);if(this.startTime=new Date,this.sw=o.StopWatch.create(),a){var s=["Monaco",this.topic,this.name,"start"];a(s.join("|"))}}return e.prototype.stop=function(e){if(null===this.stopTime){if(e)return this.stopTime=e,this.sw=null,void this.timeKeeper._onEventStopped(this);if(this.stopTime=new Date,this.sw&&this.sw.stop(),this.timeKeeper._onEventStopped(this),a){var t=["Monaco",this.topic,this.name,"stop"];a(t.join("|"))}}},e.prototype.timeTaken=function(){return this.sw?this.sw.elapsed():this.stopTime?this.stopTime.getTime()-this.startTime.getTime():-1},e}(),d=function(){function e(){this.cleaningIntervalId=-1,this.collectedEvents=[],this.listeners=[]}return e.prototype.isEnabled=function(){return t.ENABLE_TIMER},e.prototype.start=function(e,n,i,o){if(!this.isEnabled())return t.nullEvent;var r;"string"==typeof e?r=e:e===c.EDITOR?r="Editor":e===c.LANGUAGES?r="Languages":e===c.WORKER?r="Worker":e===c.WORKBENCH?r="Workbench":e===c.STARTUP&&(r="Startup"),this.initAutoCleaning();var s=new l(this,n,r,i,o);return this.addEvent(s),s},e.prototype.dispose=function(){-1!==this.cleaningIntervalId&&(n.clearInterval(this.cleaningIntervalId),this.cleaningIntervalId=-1)},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return void this.listeners.splice(t,1)},e.prototype.addEvent=function(t){t.id=e.EVENT_ID,e.EVENT_ID++,this.collectedEvents.push(t),this.collectedEvents.length>e._EVENT_CACHE_LIMIT&&this.collectedEvents.shift()},e.prototype.initAutoCleaning=function(){var t=this;-1===this.cleaningIntervalId&&(this.cleaningIntervalId=n.setInterval(function(){var n=Date.now();t.collectedEvents.forEach(function(t){!t.stopTime&&n-t.startTime.getTime()>=e._MAX_TIMER_LENGTH&&t.stop()})},e._CLEAN_UP_INTERVAL))},e.prototype.getCollectedEvents=function(){return this.collectedEvents.slice(0)},e.prototype.clearCollectedEvents=function(){this.collectedEvents=[]},e.prototype._onEventStopped=function(e){for(var t=[e],n=this.listeners.slice(0),o=0;o<n.length;o++)try{n[o](t)}catch(r){i.onUnexpectedError(r)}},e.prototype.setInitialCollectedEvents=function(t,n){var i=this;this.isEnabled()&&(n&&(e.PARSE_TIME=n),t.forEach(function(e){var t=new l(i,e.name,e.topic,e.startTime,e.description);t.stop(e.stopTime),i.addEvent(t)}))},e._MAX_TIMER_LENGTH=6e4,e._CLEAN_UP_INTERVAL=12e4,e._EVENT_CACHE_LIMIT=1e3,e.EVENT_ID=1,e.PARSE_TIME=new Date,
e}();t.TimeKeeper=d;var h=new d;t.nullEvent=new u,t.start=r,t.getTimeKeeper=s}),define("vs/base/common/winjs.base",["./winjs.base.raw","vs/base/common/errors"],function(e,t){"use strict";function n(e){var n=e.detail,i=n.id;return n.parent?void(n.handler&&r&&delete r[i]):(r[i]=n,void(1===Object.keys(r).length&&setTimeout(function(){var e=r;r={},Object.keys(e).forEach(function(n){var i=e[n];i.exception?t.onUnexpectedError(i.exception):i.error&&t.onUnexpectedError(i.error),console.log("WARNING: Promise with no error callback:"+i.id),console.log(i),i.exception&&console.log(i.exception.stack)})},0)))}function i(e,t,n){var i,r,s,a=new o.Promise(function(e,t,n){i=e,r=t,s=n},function(){e.cancel()});return e.then(function(e){t&&t(e),i(e)},function(e){n&&n(e),r(e)},s),a}var o=e,r={};return o.Promise.addEventListener("error",n),{decoratePromise:i,Class:o.Class,xhr:o.xhr,Promise:o.Promise,TPromise:o.Promise,PPromise:o.Promise,Utilities:o.Utilities}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/actions",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/events"],function(e,t,n,i,o){"use strict";function r(e){return e?e instanceof s?!0:"string"!=typeof e.id?!1:"string"!=typeof e.label?!1:"string"!=typeof e["class"]?!1:"boolean"!=typeof e.enabled?!1:"boolean"!=typeof e.checked?!1:"function"==typeof e.run:!1}t.isAction=r;var s=function(e){function t(t,n,i,o,r){void 0===n&&(n=""),void 0===i&&(i=""),void 0===o&&(o=!0),void 0===r&&(r=null),e.call(this),this._id=t,this._label=n,this._cssClass=i,this._enabled=o,this._actionCallback=r}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._setLabel(e)},enumerable:!0,configurable:!0}),t.prototype._setLabel=function(e){this._label!==e&&(this._label=e,this.emit(t.LABEL,{source:this}))},Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._setTooltip(e)},enumerable:!0,configurable:!0}),t.prototype._setTooltip=function(e){this._tooltip!==e&&(this._tooltip=e,this.emit(t.TOOLTIP,{source:this}))},Object.defineProperty(t.prototype,"class",{get:function(){return this._cssClass},set:function(e){this._setClass(e)},enumerable:!0,configurable:!0}),t.prototype._setClass=function(e){this._cssClass!==e&&(this._cssClass=e,this.emit(t.CLASS,{source:this}))},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._setEnabled(e)},enumerable:!0,configurable:!0}),t.prototype._setEnabled=function(e){this._enabled!==e&&(this._enabled=e,this.emit(t.ENABLED,{source:this}))},Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._setChecked(e)},enumerable:!0,configurable:!0}),t.prototype._setChecked=function(e){this._checked!==e&&(this._checked=e,this.emit(t.CHECKED,{source:this}))},Object.defineProperty(t.prototype,"order",{get:function(){return this._order},set:function(e){this._order=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionCallback",{get:function(){return this._actionCallback},set:function(e){this._actionCallback=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return null!==this._actionCallback?this._actionCallback(e):n.TPromise.as(!0)},t.LABEL="label",t.TOOLTIP="tooltip",t.CLASS="class",t.ENABLED="enabled",t.CHECKED="checked",t}(i.EventEmitter);t.Action=s;var a=(function(e){function t(t,n){e.call(this,t.id,t.label,t["class"],t.enabled,null),this.delegate=t,this.runHandler=n}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.delegate.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.delegate.label},set:function(e){this.delegate.label=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this.delegate["class"]},set:function(e){this.delegate["class"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.delegate.enabled},set:function(e){this.delegate.enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.delegate.checked},set:function(e){this.delegate.checked=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return this.runHandler(e),this.delegate.run(e)},t.prototype.addListener=function(e,t){return this.delegate.addListener(e,t)},t.prototype.addBulkListener=function(e){return this.delegate.addBulkListener(e)},t.prototype.addEmitter=function(e,t){return this.delegate.addEmitter(e,t)},t.prototype.addEmitterTypeListener=function(e,t,n){return this.delegate.addEmitterTypeListener(e,t,n)},t.prototype.emit=function(e,t){this.delegate.emit(e,t)},t}(s),function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e,t){var i=this;return e.enabled?(this.emit(o.EventType.BEFORE_RUN,{action:e}),n.TPromise.as(e.run(t)).then(function(t){i.emit(o.EventType.RUN,{action:e,result:t})},function(t){i.emit(o.EventType.RUN,{action:e,error:t})})):n.TPromise.as(null)},t}(i.EventEmitter));t.ActionRunner=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/async",["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/platform","vs/base/common/cancellation","vs/base/common/lifecycle"],function(e,t,n,i,o,r,s){"use strict";function a(e){return e&&"function"==typeof e.then}function c(e){var t=new r.CancellationTokenSource;return new i.TPromise(function(n,i){var o=e(t.token);a(o)?o.then(n,i):n(o)},function(){t.cancel()})}function u(e,t){return new i.TPromise(function(i,o,r){e.done(function(e){try{t(e)}catch(o){n.onUnexpectedError(o)}i(e)},function(e){try{t(e)}catch(i){n.onUnexpectedError(i)}o(e)},function(e){r(e)})},function(){e.cancel()})}function l(e){function t(){return e.length?e.pop()():null}function n(e){e&&o.push(e);var r=t();return r?r.then(n):i.TPromise.as(o)}var o=[];return e=e.reverse(),i.TPromise.as(null).then(n)}function d(e){var t,n=this,i=!1;return function(){return i?t:(i=!0,t=e.apply(n,arguments))}}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new i.Promise(function(n,i){return e.apply(void 0,t.concat([function(e,t){return e?i(e):n(t)}]))})}function p(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return new i.Promise(function(i,o){return t.call.apply(t,[e].concat(n,[function(e,t){return e?o(e):i(t)}]))})}t.asWinJsPromise=c;var f=function(){function e(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}return e.prototype.queue=function(e){var t=this;if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){var n=function(){t.queuedPromise=null;var e=t.queue(t.queuedPromiseFactory);return t.queuedPromiseFactory=null,e};this.queuedPromise=new i.Promise(function(e,i,o){t.activePromise.then(n,n,o).done(e)},function(){t.activePromise.cancel()})}return new i.Promise(function(e,n,i){t.queuedPromise.then(e,n,i)},function(){})}return this.activePromise=e(),new i.Promise(function(e,n,i){t.activePromise.done(function(n){t.activePromise=null,e(n)},function(e){t.activePromise=null,n(e)},i)},function(){t.activePromise.cancel()})},e}();t.Throttler=f;var m=function(){function e(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}return e.prototype.trigger=function(e,t){var n=this;return void 0===t&&(t=this.defaultDelay),this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new i.Promise(function(e){n.onSuccess=e},function(){}).then(function(){n.completionPromise=null,n.onSuccess=null;var e=n.task;return n.task=null,e()})),this.timeout=setTimeout(function(){n.timeout=null,n.onSuccess(null)},t),this.completionPromise},e.prototype.isTriggered=function(){return null!==this.timeout},e.prototype.cancel=function(){this.cancelTimeout(),this.completionPromise&&(this.completionPromise.cancel(),this.completionPromise=null)},e.prototype.cancelTimeout=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}();t.Delayer=m;var v=function(e){function t(t){e.call(this,t),this.throttler=new f}return __extends(t,e),t.prototype.trigger=function(t,n){var i=this;return e.prototype.trigger.call(this,function(){return i.throttler.queue(t)},n)},t}(m);t.ThrottledDelayer=v;var g=function(e){function t(t,n){void 0===n&&(n=0),e.call(this,t),this.minimumPeriod=n,this.periodThrottler=new f}return __extends(t,e),t.prototype.trigger=function(t,n){var o=this;return e.prototype.trigger.call(this,function(){return o.periodThrottler.queue(function(){return i.Promise.join([i.TPromise.timeout(o.minimumPeriod),t()]).then(function(e){return e[1]})})},n)},t}(v);t.PeriodThrottledDelayer=g;var y=function(){function e(){var e=this;this._value=new i.TPromise(function(t,n){e._completeCallback=t,e._errorCallback=n})}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.complete=function(e){this._completeCallback(e)},e.prototype.error=function(e){this._errorCallback(e)},e}();t.PromiseSource=y;var _=function(e){function t(t){var i,o,r;e.call(this,function(e,t,n){i=e,o=t,r=n},function(){o(n.canceled())}),t.then(i,o,r)}return __extends(t,e),t}(i.TPromise);t.ShallowCancelThenPromise=_,t.always=u,t.sequence=l,t.once=d;var b=function(){function e(e){this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0}return e.prototype.queue=function(e){var t=this;return new i.TPromise(function(n,i,o){t.outstandingPromises.push({factory:e,c:n,e:i,p:o}),t.consume()})},e.prototype.consume=function(){for(var e=this;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){var t=this.outstandingPromises.shift();this.runningPromises++;var n=t.factory();n.done(t.c,t.e,t.p),n.done(function(){return e.consumed()},function(){return e.consumed()})}},e.prototype.consumed=function(){this.runningPromises--,this.consume()},e}();t.Limiter=b;var S=function(e){function t(){e.call(this),this._token=-1}return __extends(t,e),t.prototype.dispose=function(){this.cancel(),e.prototype.dispose.call(this)},t.prototype.cancel=function(){-1!==this._token&&(o.clearTimeout(this._token),this._token=-1)},t.prototype.cancelAndSet=function(e,t){var n=this;this.cancel(),this._token=o.setTimeout(function(){n._token=-1,e()},t)},t.prototype.setIfNotSet=function(e,t){var n=this;-1===this._token&&(this._token=o.setTimeout(function(){n._token=-1,e()},t))},t}(s.Disposable);t.TimeoutTimer=S;var E=function(e){function t(){e.call(this),this._token=-1}return __extends(t,e),t.prototype.dispose=function(){this.cancel(),e.prototype.dispose.call(this)},t.prototype.cancel=function(){-1!==this._token&&(o.clearInterval(this._token),this._token=-1)},t.prototype.cancelAndSet=function(e,t){this.cancel(),this._token=o.setInterval(function(){e()},t)},t}(s.Disposable);t.IntervalTimer=E;var w=function(){function e(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}return e.prototype.dispose=function(){this.cancel(),this.runner=null},e.prototype.cancel=function(){this.isScheduled()&&(o.clearTimeout(this.timeoutToken),this.timeoutToken=-1)},e.prototype.setRunner=function(e){this.runner=e},e.prototype.setTimeout=function(e){this.timeout=e},e.prototype.schedule=function(){this.cancel(),this.timeoutToken=o.setTimeout(this.timeoutHandler,this.timeout)},e.prototype.isScheduled=function(){return-1!==this.timeoutToken},e.prototype.onTimeout=function(){this.timeoutToken=-1,this.runner&&this.runner()},e}();t.RunOnceScheduler=w,t.nfcall=h,t.ninvoke=p}),define("vs/base/common/service",["require","exports","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/lifecycle","vs/base/common/event"],function(e,t,n,i,o,r){"use strict";function s(e,t){e[t]=(n={},n[h]=!0,n);var n}function a(e){return e[h]}function c(e,t,n){var o,s=function(){return o||(o=e.then(function(e){return e.getService(t,n)})),o};return Object.keys(n.prototype).filter(function(e){return"constructor"!==e}).reduce(function(e,t){if(a(n.prototype[t])){var o,c,u=new r.Emitter({onFirstListenerAdd:function(){o=s().then(function(e){c=e[t](function(e){return u.fire(e)})})},onLastListenerRemove:function(){c&&(c.dispose(),c=null),o.cancel(),o=null}});return i.assign(e,(l={},l[t]=u.event,l))}return i.assign(e,(d={},d[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return s().then(function(n){return n[t].apply(n,e)})},d));var l,d},{})}var u;!function(e){e[e.Common=0]="Common",e[e.Cancel=1]="Cancel"}(u||(u={}));var l;!function(e){e[e.Initialize=0]="Initialize",e[e.Success=1]="Success",e[e.Progress=2]="Progress",e[e.Error=3]="Error",e[e.ErrorObj=4]="ErrorObj"}(l||(l={}));var d;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(d||(d={}));var h="$__SERVICE_EVENT";t.ServiceEvent=s,t.isServiceEvent=a;var p=function(){function e(e){var t=this;this.protocol=e,this.services=Object.create(null),this.activeRequests=Object.create(null),this.protocol.onMessage(function(e){return t.onMessage(e)}),this.protocol.send({type:l.Initialize})}return e.prototype.registerService=function(e,t){this.services[e]=t},e.prototype.onMessage=function(e){switch(e.type){case u.Common:this.onCommonRequest(e);break;case u.Cancel:this.onCancelRequest(e)}},e.prototype.onCommonRequest=function(e){var t,i=this.services[e.serviceName],o=i.constructor.prototype,r=o&&o[e.name],s=r&&r[h],a=i[e.name];if(s){var c;t=new n.Promise(function(e,t,n){return c=a.call(i,n)},function(){return c.dispose()})}else{if(a)try{t=a.call.apply(a,[i].concat(e.args))}catch(u){t=n.Promise.wrapError(u)}else t=n.Promise.wrapError(new Error(e.name+" is not a valid method on "+e.serviceName));if(!n.Promise.is(t)){var l="'"+e.name+"' did not return a promise";console.warn(l),t=n.Promise.wrapError(new Error(l))}}this.onPromiseRequest(t,e)},e.prototype.onPromiseRequest=function(e,t){var n=this,i=t.id,r=e.then(function(e){n.protocol.send({id:i,data:e,type:l.Success}),delete n.activeRequests[t.id]},function(e){e instanceof Error?n.protocol.send({id:i,data:{message:e.message,name:e.name,stack:e.stack?e.stack.split("\n"):void 0},type:l.Error}):n.protocol.send({id:i,data:e,type:l.ErrorObj}),delete n.activeRequests[t.id]},function(e){n.protocol.send({id:i,data:e,type:l.Progress})});this.activeRequests[t.id]=o.fnToDisposable(function(){return r.cancel()})},e.prototype.onCancelRequest=function(e){var t=this.activeRequests[e.id];t&&(t.dispose(),delete this.activeRequests[e.id])},e.prototype.dispose=function(){var e=this;Object.keys(this.activeRequests).forEach(function(t){e.activeRequests[t].dispose()}),this.activeRequests=null},e}();t.Server=p;var f=function(){function e(e){var t=this;this.protocol=e,this.state=d.Uninitialized,this.bufferedRequests=[],this.handlers=Object.create(null),this.lastRequestId=0,this.protocol.onMessage(function(e){return t.onMessage(e)})}return e.prototype.getService=function(e,t){var n=this,o=Object.keys(t.prototype).filter(function(e){return"constructor"!==e});return o.reduce(function(o,s){if(t.prototype[s][h]){var a,c=new r.Emitter({onFirstListenerAdd:function(){a=n.request(e,s).then(null,null,function(e){return c.fire(e)})},onLastListenerRemove:function(){a.cancel(),a=null}});return i.assign(o,(u={},u[s]=c.event,u))}return i.assign(o,(l={},l[s]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];return n.request.apply(n,[e,s].concat(t))},l));var u,l},{})},e.prototype.request=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o={raw:{id:this.lastRequestId++,type:u.Common,serviceName:e,name:t,args:n}};return this.state===d.Uninitialized?this.bufferRequest(o):this.doRequest(o)},e.prototype.doRequest=function(e){var t=this,i=e.raw.id;return new n.Promise(function(n,o,r){t.handlers[i]=function(e){switch(e.type){case l.Success:delete t.handlers[i],n(e.data);break;case l.Error:delete t.handlers[i];var s=new Error(e.data.message);s.stack=e.data.stack,s.name=e.data.name,o(s);break;case l.ErrorObj:delete t.handlers[i],o(e.data);break;case l.Progress:r(e.data)}},t.send(e.raw)},function(){return t.send({id:i,type:u.Cancel})})},e.prototype.bufferRequest=function(e){var t=this,i=null;return new n.Promise(function(n,o,r){t.bufferedRequests.push(e),e.flush=function(){e.flush=null,i=t.doRequest(e).then(n,o,r)}},function(){if(e.flush=null,t.state!==d.Uninitialized)return void(i&&(i.cancel(),i=null));var n=t.bufferedRequests.indexOf(e);-1!==n&&t.bufferedRequests.splice(n,1)})},e.prototype.onMessage=function(e){if(this.state===d.Uninitialized&&e.type===l.Initialize)return this.state=d.Idle,this.bufferedRequests.forEach(function(e){return e.flush&&e.flush()}),void(this.bufferedRequests=null);var t=this.handlers[e.id];t&&t(e)},e.prototype.send=function(e){try{this.protocol.send(e)}catch(t){}},e}();t.Client=f,t.getService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/worker/simpleWorker",["require","exports","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/winjs.base"],function(e,t,n,i,o){"use strict";function r(e){return new u(e)}var s="$initialize",a=function(){function e(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null)}return e.prototype.setWorkerId=function(e){this._workerId=e},e.prototype.sendMessage=function(e,t){var n=String(++this._lastSentReq),i={c:null,e:null},r=new o.TPromise(function(e,t,n){i.c=e,i.e=t},function(){});return this._pendingReplies[n]=i,this._send({vsWorker:this._workerId,req:n,method:e,args:t}),r},e.prototype.handleMessage=function(e){var t;try{t=JSON.parse(e)}catch(n){}t.vsWorker&&(-1!==this._workerId&&t.vsWorker!==this._workerId||this._handleMessage(t))},e.prototype._handleMessage=function(e){var t=this;if(e.seq){var i=e;if(!this._pendingReplies[i.seq])return void console.warn("Got reply to unknown seq");var o=this._pendingReplies[i.seq];if(delete this._pendingReplies[i.seq],i.err){var r=i.err;return i.err.$isError&&(r=new Error,r.name=i.err.name,r.message=i.err.message,r.stack=i.err.stack),void o.e(r)}return void o.c(i.res)}var s=e,a=s.req,c=this._handler.handleMessage(s.method,s.args);c.then(function(e){t._send({vsWorker:t._workerId,seq:a,res:e,err:void 0})},function(e){t._send({vsWorker:t._workerId,seq:a,res:void 0,err:n.transformErrorForSerialization(e)})})},e.prototype._send=function(e){var t=JSON.stringify(e);this._handler.sendMessage(t)},e}(),c=function(e){function t(t,n,i){var r=this;e.call(this),this._worker=this._register(t.create("vs/base/common/worker/simpleWorker",function(e){r._protocol.handleMessage(e)})),this._protocol=new a({sendMessage:function(e){r._worker.postMessage(e)},handleMessage:function(e,t){return o.TPromise.as(null)}}),this._protocol.setWorkerId(this._worker.getId());var c=null,u=window.require;"function"==typeof u.getConfig?c=u.getConfig():"undefined"!=typeof window.requirejs&&(c=window.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(s,[this._worker.getId(),n,c]),this._onModuleLoaded.then(null,function(e){return r._onError("Worker failed to load "+n,e)});var l=function(e,t){return r._request(e,t)},d=function(e,t){return function(){var n=Array.prototype.slice.call(arguments,0);return t(e,n)}};this._proxy={};for(var h in i.prototype)i.prototype.hasOwnProperty(h)&&"function"==typeof i.prototype[h]&&(this._proxy[h]=d(h,l))}return __extends(t,e),t.prototype.get=function(){return this._proxy},t.prototype._request=function(e,t){var n=this;return new o.TPromise(function(i,o,r){n._onModuleLoaded.then(function(){n._protocol.sendMessage(e,t).then(i,o)},o)},function(){})},t.prototype._onError=function(e,t){console.error(e),console.info(t)},t}(i.Disposable);t.SimpleWorkerClient=c;var u=function(){function t(e){var t=this;this._protocol=new a({sendMessage:function(t){e(t)},handleMessage:function(e,n){return t._handleMessage(e,n)}})}return t.prototype.onmessage=function(e){this._protocol.handleMessage(e)},t.prototype._handleMessage=function(e,t){if(e===s)return this.initialize(t[0],t[1],t[2]);if(!this._requestHandler||"function"!=typeof this._requestHandler[e])return o.TPromise.wrapError(new Error("Missing requestHandler or method: "+e));try{return o.TPromise.as(this._requestHandler[e].apply(this._requestHandler,t))}catch(n){return o.TPromise.wrapError(n)}},t.prototype.initialize=function(t,n,i){var r=this;if(this._protocol.setWorkerId(t),i){"undefined"!=typeof i.baseUrl&&delete i.baseUrl,"undefined"!=typeof i.paths&&"undefined"!=typeof i.paths.vs&&delete i.paths.vs;var s=i["vs/nls"];s&&s.pseudo&&e(["vs/nls"],function(e){e.setPseudoTranslation(s.pseudo)}),i.catchError=!0,self.require.config(i)}var a,c,u=new o.TPromise(function(e,t,n){a=e,c=t});return e([n],function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[0];r._requestHandler=n.create(),a(null)},c),u},t}();t.SimpleWorkerServer=u,t.create=r}),define("vs/base/common/worker/workerProtocol",["require","exports","vs/base/common/winjs.base"],function(e,t,n){"use strict";t.MessageType={INITIALIZE:"$initialize",REPLY:"$reply",PRINT:"$print"},t.ReplyType={COMPLETE:"complete",ERROR:"error",PROGRESS:"progress"},t.PrintType={LOG:"log",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};var i=function(){function e(e){this._requester=e,this._bigHandler=null}return e.prototype.callOnRemote=function(e,t,n){return this._requester.request("_proxyObj",{proxyId:e,path:t,args:n})},e.prototype.setManyHandler=function(e){this._bigHandler=e},e.prototype.handleMessage=function(e){if(!this._bigHandler)throw new Error("got message before big handler attached!");return this._invokeHandler(e.proxyId,e.path,e.args)},e.prototype._invokeHandler=function(e,t,i){try{return n.TPromise.as(this._bigHandler.handle(e,t,i))}catch(o){return n.TPromise.wrapError(o)}},e}();t.RemoteCom=i}),define("vs/base/common/worker/workerClient",["require","exports","vs/base/common/errors","vs/base/common/marshalling","vs/base/common/timer","vs/base/common/winjs.base","vs/base/common/worker/workerProtocol"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t,n){var i=this;this._decodeMessageName=n,this._lastMessageId=0,this._promises={},this._messagesQueue=[],this._processQueueTimeout=-1,this._waitingForWorkerReply=!1,this._lastTimerEvent=null,this._worker=e.create("vs/base/common/worker/workerServer",function(e){return i._onSerializedMessage(e)});var o=null,r=window.require;"function"==typeof r.getConfig?o=r.getConfig():"undefined"!=typeof window.requirejs&&(o=window.requirejs.s.contexts._.config);var a=window.MonacoEnvironment||null;this.onModuleLoaded=this._sendMessage(s.MessageType.INITIALIZE,{id:this._worker.getId(),moduleId:t,loaderConfiguration:o,MonacoEnvironment:a}),this.onModuleLoaded.then(null,function(e){return i._onError("Worker failed to load "+t,e)}),this._remoteCom=new s.RemoteCom(this)}return e.prototype.getRemoteCom=function(){return this._remoteCom},e.prototype.getQueueSize=function(){return this._messagesQueue.length+(this._waitingForWorkerReply?1:0)},e.prototype.request=function(e,t,n){var i=this;if("$"===e.charAt(0))throw new Error("Illegal requestName: "+e);var o,s=!1;return new r.TPromise(function(r,a,c){i.onModuleLoaded.then(function(){s||(o=i._sendMessage(e,t,n).then(r,a,c))},a,c)},function(){o?o.cancel():s=!0})},e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){var e=Object.keys(this._promises);if(e.length>0){console.warn("Terminating a worker with "+e.length+" pending promises:"),console.warn(this._promises);for(var t in this._promises)e.hasOwnProperty(t)&&this._promises[t].error("Worker forcefully terminated")}this._worker.dispose()},e.prototype._sendMessage=function(e,t,n){var i=this;void 0===n&&(n=(new Date).getTime());var o,s,a,c={id:++this._lastMessageId,type:e,timestamp:n,payload:t},u=new r.TPromise(function(e,t,n){o=e,s=t,a=n},function(){i._removeMessage(c.id)});return this._promises[c.id]={complete:o,error:s,progress:a,type:e,payload:t},this._enqueueMessage(c),u},e.prototype._enqueueMessage=function(e){var t,n=-1;for(t=this._messagesQueue.length-1;t>=0;t--)if(this._messagesQueue[t].timestamp<=e.timestamp){n=t;break}this._messagesQueue.splice(n+1,0,e),this._processMessagesQueue()},e.prototype._removeMessage=function(e){for(var t=0,n=this._messagesQueue.length;n>t;t++)if(this._messagesQueue[t].id===e)return this._promises.hasOwnProperty(String(e))&&delete this._promises[String(e)],this._messagesQueue.splice(t,1),void this._processMessagesQueue()},e.prototype._processMessagesQueue=function(){var e=this;if(-1!==this._processQueueTimeout&&(clearTimeout(this._processQueueTimeout),this._processQueueTimeout=-1),0!==this._messagesQueue.length&&!this._waitingForWorkerReply){var t=this._messagesQueue[0].timestamp-(new Date).getTime();t=Math.max(0,t),this._processQueueTimeout=setTimeout(function(){if(e._processQueueTimeout=-1,0!==e._messagesQueue.length){e._waitingForWorkerReply=!0;var t=e._messagesQueue.shift();e._lastTimerEvent=o.start(o.Topic.WORKER,e._decodeMessageName(t)),e._postMessage(t)}},t)}},e.prototype._postMessage=function(e){this._worker.postMessage(i.stringify(e))},e.prototype._onSerializedMessage=function(e){var t=null;try{t=i.parse(e)}catch(n){}t&&this._onmessage(t)},e.prototype._onmessage=function(e){if(e.monacoWorker&&(!e.from||e.from===this._worker.getId())){switch(e.type){case s.MessageType.REPLY:var t=e;if(this._waitingForWorkerReply=!1,this._lastTimerEvent&&this._lastTimerEvent.stop(),!this._promises.hasOwnProperty(String(t.id)))return void this._onError("Received unexpected message from Worker:",e);switch(t.action){case s.ReplyType.COMPLETE:this._promises[t.id].complete(t.payload),delete this._promises[t.id];break;case s.ReplyType.ERROR:this._onError("Main Thread sent to worker the following message:",{type:this._promises[t.id].type,payload:this._promises[t.id].payload}),this._onError("And the worker replied with an error:",t.payload),n.onUnexpectedError(t.payload),this._promises[t.id].error(t.payload),delete this._promises[t.id];break;case s.ReplyType.PROGRESS:this._promises[t.id].progress(t.payload)}break;case s.MessageType.PRINT:var i=e;this._consoleLog(i.level,i.payload);break;default:this._dispatchRequestFromWorker(e)}this._processMessagesQueue()}},e.prototype._dispatchRequestFromWorker=function(e){var t=this;this._handleWorkerRequest(e).then(function(i){var o={id:0,type:s.MessageType.REPLY,timestamp:(new Date).getTime(),seq:e.req,payload:i instanceof Error?n.transformErrorForSerialization(i):i,err:null};t._postMessage(o)},function(i){var o={id:0,type:s.MessageType.REPLY,timestamp:(new Date).getTime(),seq:e.req,payload:null,err:i instanceof Error?n.transformErrorForSerialization(i):i};t._postMessage(o)})},e.prototype._handleWorkerRequest=function(e){return"_proxyObj"===e.type?this._remoteCom.handleMessage(e.payload):"function"==typeof this[e.type]?this._invokeHandler(this[e.type],this,e.payload):(this._onError("Received unexpected message from Worker:",e),r.TPromise.wrapError(new Error("No handler found")))},e.prototype._invokeHandler=function(e,t,n){try{return r.TPromise.as(e.call(t,n))}catch(i){return r.TPromise.wrapError(i)}},e.prototype._consoleLog=function(e,t){switch(e){case s.PrintType.LOG:console.log(t);break;case s.PrintType.DEBUG:console.info(t);break;case s.PrintType.INFO:console.info(t);break;case s.PrintType.WARN:console.warn(t);break;case s.PrintType.ERROR:console.error(t);break;default:this._onError("Received unexpected message from Worker:",t)}},e.prototype._onError=function(e,t){console.error(e),console.info(t)},e}();t.WorkerClient=a}),define("vs/base/node/pfs",["require","exports","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/paths","path","vs/base/common/async","fs"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){return e===r.dirname(e)}function u(e){return s.nfcall(i.readdir,e)}function l(e){return new n.Promise(function(t){return a.exists(e,t)})}function d(e,t){return s.nfcall(a.chmod,e,t)}function h(e,t){var i=function(){return s.nfcall(a.mkdir,e,t).then(null,function(t){return"EEXIST"===t.code?s.nfcall(a.stat,e).then(function(t){return t.isDirectory?null:n.Promise.wrapError(new Error("'"+e+"' exists and is not a directory."))}):n.TPromise.wrapError(t)})};return c(e)?n.TPromise.as(!0):i().then(null,function(o){return"ENOENT"===o.code?h(r.dirname(e),t).then(i):n.TPromise.wrapError(o)})}function p(e){return m(e).then(function(t){return t.isDirectory()?u(e).then(function(t){return n.TPromise.join(t.map(function(t){return p(r.join(e,t))}))}).then(function(){return _(e)}):b(e)},function(e){return"ENOENT"!==e.code?n.TPromise.wrapError(e):void 0})}function f(e){return s.nfcall(a.realpath,e,null)}function m(e){return s.nfcall(a.stat,e)}function v(e){return s.nfcall(a.lstat,e)}function g(e){return w(e.slice(0))}function y(e,t){return s.nfcall(a.rename,e,t)}function _(e){return s.nfcall(a.rmdir,e)}function b(e){return s.nfcall(a.unlink,e)}function S(e,t,n){return s.nfcall(a.symlink,e,t,n)}function E(e){return s.nfcall(a.readlink,e)}function w(e){var t=e.shift();return m(t).then(function(e){return{path:t,stats:e}},function(t){return 0===e.length?t:g(e)})}function C(e,t){return s.nfcall(a.readFile,e,t)}function T(e,t,n){return void 0===n&&(n="utf8"),s.nfcall(a.writeFile,e,t,n)}function k(e){return u(e).then(function(t){return n.TPromise.join(t.map(function(t){return x(o.join(e,t),t)})).then(function(e){return O(e)})})}function x(e,t){return I(e).then(function(e){return e?t:null})}function I(e){return m(e).then(function(e){return e.isDirectory()},function(){return!1})}function D(e){return m(e).then(function(e){return e.isFile()},function(){return!1})}function A(e,t){return u(e).then(function(i){i=i.filter(function(e){return t.test(e)});var r=i.map(function(t){return L(o.join(e,t),t)});return n.TPromise.join(r).then(function(e){return O(e)})})}function L(e,t){return D(e).then(function(e){return e?t:null},function(e){return n.TPromise.wrapError(e)})}function O(e){return e.filter(function(e){return null!==e})}t.isRoot=c,t.readdir=u,t.exists=l,t.chmod=d,t.mkdirp=h,t.rimraf=p,t.realpath=f,t.stat=m,t.lstat=v,t.mstat=g,t.rename=y,t.rmdir=_,t.unlink=b,t.symlink=S,t.readlink=E,t.readFile=C,t.writeFile=T,t.readDirsInDir=k,t.dirExists=I,t.fileExists=D,t.readFiles=A,t.fileExistsWithResult=L}),define("vs/base/node/request",["require","exports","vs/base/common/winjs.base","vs/base/common/types","https","http","url","fs","vs/base/common/objects"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){var t;return new n.TPromise(function(n,a){var l=s.parse(e.url),d={hostname:l.hostname,port:l.port?parseInt(l.port):"https:"===l.protocol?443:80,path:l.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:i.isBoolean(e.strictSSL)?e.strictSSL:!0};e.user&&e.password&&(d.auth=e.user+":"+e.password);var h="https:"===l.protocol?o:r;t=h.request(d,function(i){n(i.statusCode>=300&&i.statusCode<400&&e.followRedirects&&e.followRedirects>0&&i.headers.location?u(c.assign({},e,{url:i.headers.location,followRedirects:e.followRedirects-1})):{req:t,res:i})}),t.on("error",a),e.timeout&&t.setTimeout(e.timeout),e.data&&t.write(e.data),t.end()},function(){return t&&t.abort()})}function l(e,t){return u(c.assign(t,{followRedirects:3})).then(function(t){return new n.TPromise(function(n,i){
var o=a.createWriteStream(e);o.once("finish",function(){return n(null)}),t.res.once("error",i),t.res.pipe(o)})})}function d(e){return u(e).then(function(e){return new n.Promise(function(t,n){if(!(e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode))return n("Server returned "+e.res.statusCode);if(204===e.res.statusCode)return t(null);if(!/application\/json/.test(e.res.headers["content-type"]))return n("Response doesn't appear to be JSON");var i=[];e.res.on("data",function(e){return i.push(e)}),e.res.on("end",function(){return t(JSON.parse(i.join("")))}),e.res.on("error",n)})})}t.request=u,t.download=l,t.json=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/node/service.cp",["require","exports","child_process","vs/base/common/winjs.base","vs/base/common/async","vs/base/common/objects","vs/base/common/service"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(){var t=this;e.call(this,{send:function(e){try{process.send(e)}catch(t){}},onMessage:function(e){return process.on("message",e)}}),process.once("disconnect",function(){return t.dispose()})}return __extends(t,e),t}(s.Server);t.Server=a;var c=function(){function e(e,t){this.modulePath=e,this.options=t;var n=t&&t.timeout?t.timeout:Number.MAX_VALUE;this.disposeDelayer=new o.Delayer(n),this.activeRequests=[],this.child=null,this._client=null,this.services=Object.create(null)}return e.prototype.getService=function(e,t){var n=this;return Object.keys(t.prototype).filter(function(e){return"constructor"!==e}).reduce(function(i,o){return r.assign(i,(s={},s[o]=function(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];return n.request.apply(n,[e,t,o].concat(i))},s));var s},{})},e.prototype.request=function(e,t,n){for(var o=this,r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];this.disposeDelayer.cancel();var a=this.services[e];a||(a=this.services[e]=this.client.getService(e,t));var c=a[n].apply(a,r),u=new i.Promise(function(e,t,n){c.then(e,t,n).done(function(){o.activeRequests.splice(o.activeRequests.indexOf(u),1),o.disposeDelayer.trigger(function(){return o.disposeClient()})})},function(){return c.cancel()});return this.activeRequests.push(u),u},Object.defineProperty(e.prototype,"client",{get:function(){var e=this;if(!this._client){var t=this.options&&this.options.args?this.options.args:[],i=void 0;this.options&&(i=Object.create(null),this.options.env&&(i.env=r.assign(r.clone(process.env),this.options.env)),"number"==typeof this.options.debug&&(i.execArgv=["--nolazy","--debug="+this.options.debug]),"number"==typeof this.options.debugBrk&&(i.execArgv=["--nolazy","--debug-brk="+this.options.debugBrk])),this.child=n.fork(this.modulePath,t,i),this._client=new s.Client({send:function(t){return e.child&&e.child.connected&&e.child.send(t)},onMessage:function(t){e.child.on("message",function(n){if(n&&"__$console"===n.type){var i=["%c[Service Library: "+e.options.serverName+"]","color: darkgreen"];try{var o=JSON.parse(n.arguments);i=i.concat(Object.getOwnPropertyNames(o).map(function(e){return o[e]}))}catch(r){i.push(n.arguments)}console[n.severity].apply(console,i)}else t(n)})}});var o=function(){return e.disposeClient()};process.once("exit",o),this.child.on("error",function(t){return console.warn('Service "'+e.options.serverName+'" errored with '+t)}),this.child.on("exit",function(t,n){process.removeListener("exit",o),e.activeRequests&&(e.activeRequests.forEach(function(e){return e.cancel()}),e.activeRequests=[]),t&&"SIGTERM"!==n&&(console.warn('Service "'+e.options.serverName+'" crashed with exit code '+t),e.disposeDelayer.cancel(),e.disposeClient())})}return this._client},enumerable:!0,configurable:!0}),e.prototype.disposeClient=function(){this._client&&(this.child.kill(),this.child=null,this._client=null,this.services=Object.create(null))},e.prototype.dispose=function(){this.disposeDelayer.cancel(),this.disposeDelayer=null,this.disposeClient(),this.activeRequests=null},e}();t.Client=c}),define("vs/base/node/service.net",["require","exports","net","vs/base/common/event","vs/base/common/service","vs/base/common/winjs.base"],function(e,t,n,i,o,r){"use strict";function s(e,t,n){for(void 0===n&&(n=0);n<e.length&&e[n]!==t;)n++;return n}function a(e){return new r.TPromise(function(t,i){var o=n.createServer();o.on("error",i),o.listen(e,function(){o.removeListener("error",i),t(new l(o))})})}function c(e){return new r.TPromise(function(t,i){var o=n.createConnection(e,function(){o.removeListener("error",i),t(new d(o))});o.once("error",i)})}var u=function(){function e(e){this.socket=e,this.buffer=null}return e.prototype.send=function(t){this.socket.write(JSON.stringify(t)),this.socket.write(e.Boundary)},e.prototype.onMessage=function(e){var t=this;this.socket.on("data",function(n){for(var i=0,o=0;(o=s(n,0,i))<n.length;){var r=n.slice(i,o);t.buffer?(e(JSON.parse(Buffer.concat([t.buffer,r]).toString("utf8"))),t.buffer=null):e(JSON.parse(r.toString("utf8"))),i=o+1}if(o-i>0){var a=n.slice(i,o);t.buffer?t.buffer=Buffer.concat([t.buffer,a]):t.buffer=a}})},e.Boundary=new Buffer([0]),e}(),l=function(){function e(e){var t=this;this.server=e,this.services=Object.create(null),this.server.on("connection",function(e){var n=new o.Server(new u(e));Object.keys(t.services).forEach(function(e){return n.registerService(e,t.services[e])}),e.once("close",function(){return n.dispose()})})}return e.prototype.registerService=function(e,t){this.services[e]=t},e.prototype.dispose=function(){this.services=null,this.server.close(),this.server=null},e}();t.Server=l;var d=function(){function e(e){var t=this;this.socket=e,this._onClose=new i.Emitter,this.ipcClient=new o.Client(new u(e)),e.once("close",function(){return t._onClose.fire()})}return Object.defineProperty(e.prototype,"onClose",{get:function(){return this._onClose.event},enumerable:!0,configurable:!0}),e.prototype.getService=function(e,t){return this.ipcClient.getService(e,t)},e.prototype.dispose=function(){this.socket.end(),this.socket=null,this.ipcClient=null},e}();t.Client=d,t.serve=a,t.connect=c}),define("vs/base/parts/quickopen/browser/quickOpenViewer",["require","exports","vs/base/common/winjs.base","vs/base/common/types"],function(e,t,n,i){"use strict";var o=function(){function e(e){this.modelProvider=i.isFunction(e.getModel)?e:{getModel:function(){return e}}}return e.prototype.getId=function(e,t){if(!t)return null;var n=this.modelProvider.getModel();return n===t?"__root__":n.dataSource.getId(t)},e.prototype.hasChildren=function(e,t){var n=this.modelProvider.getModel();return n&&n===t&&n.entries.length>0},e.prototype.getChildren=function(e,t){var i=this.modelProvider.getModel();return n.TPromise.as(i===t?i.entries:[])},e.prototype.getParent=function(e,t){return n.TPromise.as(null)},e}();t.DataSource=o;var r=function(){function e(e){this.modelProvider=e}return e.prototype.getAriaLabel=function(e,t){var n=this.modelProvider.getModel();return n.accessibilityProvider&&n.accessibilityProvider.getAriaLabel(t)},e}();t.AccessibilityProvider=r;var s=function(){function e(e){this.modelProvider=e}return e.prototype.isVisible=function(e,t){var n=this.modelProvider.getModel();return n.filter?n.filter.isVisible(t):!0},e}();t.Filter=s;var a=function(){function e(e){this.modelProvider=e}return e.prototype.getHeight=function(e,t){var n=this.modelProvider.getModel();return n.renderer.getHeight(t)},e.prototype.getTemplateId=function(e,t){var n=this.modelProvider.getModel();return n.renderer.getTemplateId(t)},e.prototype.renderTemplate=function(e,t,n){var i=this.modelProvider.getModel();return i.renderer.renderTemplate(t,n)},e.prototype.renderElement=function(e,t,n,i){var o=this.modelProvider.getModel();o.renderer.renderElement(t,n,i)},e.prototype.disposeTemplate=function(e,t,n){var i=this.modelProvider.getModel();i.renderer.disposeTemplate(t,n)},e}();t.Renderer=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/treeModel",["require","exports","vs/base/common/assert","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/arrays","vs/base/common/eventEmitter","vs/base/common/winjs.base"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t){for(var n=e.getHierarchy(),i=t.getHierarchy(),o=r.commonPrefixLength(n,i),s=n[o-1],a=s.getNavigator(),c=null,u=null,l=0,d=[];s&&(null===c||null===u);)d.push(s),s===e&&(c=l),s===t&&(u=l),l++,s=a.next();if(null===c||null===u)return[];var h=Math.min(c,u),p=Math.max(c,u);return d.slice(h,p+1)}var u=function(e){function t(t){e.call(this),this._item=t}return __extends(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.emit("unlock"),e.prototype.dispose.call(this)},t}(s.EventEmitter);t.LockData=u;var l=function(){function e(){this.locks=Object.create({})}return e.prototype.isLocked=function(e){return!!this.locks[e.id]},e.prototype.run=function(e,t){var n=this,i=this.getLock(e);if(i){var o;return new a.Promise(function(r,s){o=i.addOneTimeListener("unlock",function(){return n.run(e,t).then(r,s)})},function(){return o()})}var r;return new a.Promise(function(i,o){if(e.isDisposed())return o(new Error("Item is disposed."));var s=n.locks[e.id]=new u(e);return r=t().then(function(t){return delete n.locks[e.id],s.dispose(),t}).then(i,o)},function(){return r.cancel()})},e.prototype.getLock=function(e){var t;for(t in this.locks){var n=this.locks[t];if(e.intersects(n.item))return n}return null},e}();t.Lock=l;var d=function(e){function t(){e.call(this),this.items={}}return __extends(t,e),t.prototype.register=function(e){n.ok(!this.isRegistered(e.id),"item already registered: "+e.id),this.items[e.id]={item:e,disposable:this.addEmitter2(e)}},t.prototype.deregister=function(e){n.ok(this.isRegistered(e.id),"item not registered: "+e.id),this.items[e.id].disposable.dispose(),delete this.items[e.id]},t.prototype.isRegistered=function(e){return this.items.hasOwnProperty(e)},t.prototype.getItem=function(e){var t=this.items[e];return t?t.item:null},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.items=null},t}(s.EventEmitter);t.ItemRegistry=d;var h=function(e){function t(t,n,i,o,r){e.call(this),this.registry=n,this.context=i,this.lock=o,this.element=r,this.id=t,this.registry.register(this),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.needsChildrenRefresh=!0,this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this.userContent=null,this.traits={},this.depth=0,this.expanded=!1,this.emit("item:create",{item:this}),this.visible=this._isVisible(),this.height=this._getHeight(),this._isDisposed=!1}return __extends(t,e),t.prototype.getElement=function(){return this.element},t.prototype.hasChildren=function(){return this.doesHaveChildren},t.prototype.getDepth=function(){return this.depth},t.prototype.isVisible=function(){return this.visible},t.prototype.setVisible=function(e){this.visible=e},t.prototype.isExpanded=function(){return this.expanded},t.prototype._setExpanded=function(e){this.expanded=e},t.prototype.reveal=function(e){void 0===e&&(e=null);var t={item:this,relativeTop:e};this.emit("item:reveal",t)},t.prototype.expand=function(){var e=this;if(this.isExpanded()||!this.doesHaveChildren||this.lock.isLocked(this))return a.TPromise.as(!1);var t=this.lock.run(this,function(){var t,n={item:e};return e.emit("item:expanding",n),t=e.needsChildrenRefresh?e.refreshChildren(!1,!0,!0):a.TPromise.as(null),t.then(function(){return e._setExpanded(!0),e.emit("item:expanded",n),!0})});return t.then(function(t){return e.isDisposed()?!1:e.context.options.autoExpandSingleChildren&&t&&null!==e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.isVisible()?e.firstChild.expand().then(function(){return!0}):t})},t.prototype.collapse=function(e){var t=this;if(void 0===e&&(e=!1),e){var n=a.TPromise.as(null);return this.forEachChild(function(e){n=n.then(function(){return e.collapse(!0)})}),n.then(function(){return t.collapse(!1)})}return!this.isExpanded()||this.lock.isLocked(this)?a.TPromise.as(!1):this.lock.run(this,function(){var e={item:t};return t.emit("item:collapsing",e),t._setExpanded(!1),t.emit("item:collapsed",e),a.TPromise.as(!0)})},t.prototype.addTrait=function(e){var t={item:this,trait:e};this.traits[e]=!0,this.emit("item:addTrait",t)},t.prototype.removeTrait=function(e){var t={item:this,trait:e};delete this.traits[e],this.emit("item:removeTrait",t)},t.prototype.hasTrait=function(e){return this.traits[e]||!1},t.prototype.getAllTraits=function(){var e,t=[];for(e in this.traits)this.traits.hasOwnProperty(e)&&this.traits[e]&&t.push(e);return t},t.prototype.getHeight=function(){return this.height},t.prototype.refreshChildren=function(e,n,o){var r=this;if(void 0===n&&(n=!1),void 0===o&&(o=!1),!o&&!this.isExpanded())return this.needsChildrenRefresh=!0,a.TPromise.as(this);this.needsChildrenRefresh=!1;var s=function(){var o={item:r,isNested:n};r.emit("item:childrenRefreshing",o);var s;s=r.doesHaveChildren?r.context.dataSource.getChildren(r.context.tree,r.element):a.TPromise.as([]);var c=s.then(function(n){n=n?n.slice(0):[],n=r.sort(n);for(var i={};null!==r.firstChild;)i[r.firstChild.id]=r.firstChild,r.removeChild(r.firstChild);for(var o=0,s=n.length;s>o;o++){var c=n[o],u=r.context.dataSource.getId(r.context.tree,c),l=i[u]||new t(u,r.registry,r.context,r.lock,c);l.element=c,e&&(l.needsChildrenRefresh=e),delete i[u],r.addChild(l)}for(var d in i)i.hasOwnProperty(d)&&i[d].dispose();return e?a.Promise.join(r.mapEachChild(function(t){return t.doRefresh(e,!0)})):a.TPromise.as(null)});return c.then(null,i.onUnexpectedError).then(function(){return r.emit("item:childrenRefreshed",o)})};return n?s():this.lock.run(this,s)},t.prototype.doRefresh=function(e,t){void 0===t&&(t=!1);var n={item:this};return this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.height=this._getHeight(),this.setVisible(this._isVisible()),this.emit("item:refresh",n),this.refreshChildren(e,t)},t.prototype.refresh=function(e){return this.doRefresh(e)},t.prototype.getNavigator=function(){return new f(this)},t.prototype.intersects=function(e){return this.isAncestorOf(e)||e.isAncestorOf(this)},t.prototype.getHierarchy=function(){var e=[],t=this;do e.push(t),t=t.parent;while(t);return e.reverse(),e},t.prototype.isAncestorOf=function(e){for(;e;){if(e.id===this.id)return!0;e=e.parent}return!1},t.prototype.addChild=function(e,t){void 0===t&&(t=this.lastChild);var n=null===this.firstChild,i=null===t,o=t===this.lastChild;n?(this.firstChild=this.lastChild=e,e.next=e.previous=null):i?(this.firstChild.previous=e,e.next=this.firstChild,e.previous=null,this.firstChild=e):o?(this.lastChild.next=e,e.next=null,e.previous=this.lastChild,this.lastChild=e):(e.previous=t,e.next=t.next,t.next.previous=e,t.next=e),e.parent=this,e.depth=this.depth+1},t.prototype.removeChild=function(e){var t=this.firstChild===e,n=this.lastChild===e;t&&n?this.firstChild=this.lastChild=null:t?(e.next.previous=null,this.firstChild=e.next):n?(e.previous.next=null,this.lastChild=e.previous):(e.next.previous=e.previous,e.previous.next=e.next),e.parent=null,e.depth=null},t.prototype.forEachChild=function(e){for(var t,n=this.firstChild;n;)t=n.next,e(n),n=t},t.prototype.mapEachChild=function(e){var t=[];return this.forEachChild(function(n){t.push(e(n))}),t},t.prototype.sort=function(e){var t=this;return this.context.sorter?e.sort(function(e,n){return t.context.sorter.compare(t.context.tree,e,n)}):e},t.prototype._getHeight=function(){return this.context.renderer.getHeight(this.context.tree,this.element)},t.prototype._isVisible=function(){return this.context.filter.isVisible(this.context.tree,this.element)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.forEachChild(function(e){return e.dispose()}),this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null;var t={item:this};this.emit("item:dispose",t),this.registry.deregister(this),e.prototype.dispose.call(this),this._isDisposed=!0},t}(s.EventEmitter);t.Item=h;var p=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.isVisible=function(){return!1},t.prototype.setVisible=function(e){},t.prototype.isExpanded=function(){return!0},t.prototype._setExpanded=function(e){},t.prototype.render=function(){},t.prototype._getHeight=function(){return 0},t.prototype._isVisible=function(){return!1},t}(h),f=function(){function e(e,t){void 0===t&&(t=!0),this.item=e,this.start=t?e:null}return e.lastDescendantOf=function(t){return t?t.isVisible()&&t.isExpanded()&&null!==t.lastChild?e.lastDescendantOf(t.lastChild):t:null},e.prototype.current=function(){return this.item||null},e.prototype.next=function(){if(this.item)do if((this.item instanceof p||this.item.isVisible()&&this.item.isExpanded())&&this.item.firstChild)this.item=this.item.firstChild;else if(this.item===this.start)this.item=null;else{for(;this.item&&this.item!==this.start&&!this.item.next;)this.item=this.item.parent;this.item===this.start&&(this.item=null),this.item=this.item?this.item.next:null}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.previous=function(){if(this.item)do{var t=e.lastDescendantOf(this.item.previous);t?this.item=t:this.item.parent&&this.item.parent!==this.start&&this.item.parent.isVisible()?this.item=this.item.parent:this.item=null}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.parent=function(){if(this.item){var e=this.item.parent;e&&e!==this.start&&e.isVisible()?this.item=e:this.item=null}return this.item||null},e.prototype.first=function(){return this.item=this.start,this.next(),this.item||null},e.prototype.last=function(){return this.start&&this.start.isExpanded()&&(this.item=this.start.lastChild,this.item&&!this.item.isVisible()&&this.previous()),this.item||null},e}();t.TreeNavigator=f;var m=function(e){function t(t){e.call(this),this.context=t,this.input=null,this.traitsToItems={}}return __extends(t,e),t.prototype.setInput=function(e){var t=this,n={item:this.input};this.emit("clearingInput",n),this.setSelection([]),this.setFocus(),this.setHighlight(),this.lock=new l,this.input&&this.input.dispose(),this.registry&&(this.registry.dispose(),this.registryDisposable.dispose()),this.registry=new d,this.registryDisposable=o.combinedDispose(this.addEmitter2(this.registry),this.registry.addListener2("item:dispose",function(e){e.item.getAllTraits().forEach(function(n){return delete t.traitsToItems[n][e.item.id]})}));var i=this.context.dataSource.getId(this.context.tree,e);return this.input=new p(i,this.registry,this.context,this.lock,e),n={item:this.input},this.emit("setInput",n),this.refresh(this.input)},t.prototype.getInput=function(){return this.input?this.input.getElement():null},t.prototype.refresh=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!0);var i=this.getItem(e);if(!i)return a.TPromise.as(null);var o={item:i,recursive:t};return this.emit("refreshing",o),i.refresh(t).then(function(){n.emit("refreshed",o)})},t.prototype.refreshAll=function(e,t){var n=this;void 0===t&&(t=!0);var i=[];return this.deferredEmit(function(){for(var o=0,r=e.length;r>o;o++)i.push(n.refresh(e[o],t))}),a.Promise.join(i)},t.prototype.expand=function(e){var t=this.getItem(e);return t?t.expand():a.TPromise.as(!1)},t.prototype.expandAll=function(e){if(!e){e=[];for(var t,n=this.getNavigator();t=n.next();)e.push(t)}for(var i=[],o=0,r=e.length;r>o;o++)i.push(this.expand(e[o]));return a.Promise.join(i)},t.prototype.collapse=function(e,t){void 0===t&&(t=!1);var n=this.getItem(e);return n?n.collapse(t):a.TPromise.as(!1)},t.prototype.collapseAll=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),e||(e=[this.input],t=!0);for(var n=[],i=0,o=e.length;o>i;i++)n.push(this.collapse(e[i],t));return a.Promise.join(n)},t.prototype.toggleExpansion=function(e){return this.isExpanded(e)?this.collapse(e):this.expand(e)},t.prototype.toggleExpansionAll=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(this.toggleExpansion(e[n]));return a.Promise.join(t)},t.prototype.isExpanded=function(e){var t=this.getItem(e);return t?t.isExpanded():!1},t.prototype.getExpandedElements=function(){for(var e,t=[],n=this.getNavigator();e=n.next();)e.isExpanded()&&t.push(e.getElement());return t},t.prototype.reveal=function(e,t){var n=this;return void 0===t&&(t=null),this.resolveUnknownParentChain(e).then(function(e){var t=a.TPromise.as(null);return e.forEach(function(e){t=t.then(function(){return n.expand(e)})}),t}).then(function(){var i=n.getItem(e);return i?i.reveal(t):void 0})},t.prototype.resolveUnknownParentChain=function(e){var t=this;return this.context.dataSource.getParent(this.context.tree,e).then(function(e){return e?t.resolveUnknownParentChain(e).then(function(t){return t.push(e),t}):a.TPromise.as([])})},t.prototype.setHighlight=function(e,t){this.setTraits("highlighted",e?[e]:[]);var n={highlight:this.getHighlight(),payload:t};this.emit("highlight",n)},t.prototype.getHighlight=function(e){var t=this.getElementsWithTrait("highlighted",e);return 0===t.length?null:t[0]},t.prototype.isHighlighted=function(e){var t=this.getItem(e);return t?t.hasTrait("highlighted"):!1},t.prototype.select=function(e,t){this.selectAll([e],t)},t.prototype.selectRange=function(e,t,n){var i=this.getItem(e),o=this.getItem(t);i&&o&&this.selectAll(c(i,o),n)},t.prototype.deselectRange=function(e,t,n){var i=this.getItem(e),o=this.getItem(t);i&&o&&this.deselectAll(c(i,o),n)},t.prototype.selectAll=function(e,t){this.addTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.deselect=function(e,t){this.deselectAll([e],t)},t.prototype.deselectAll=function(e,t){this.removeTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.setSelection=function(e,t){this.setTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.toggleSelection=function(e,t){this.toggleTrait("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.isSelected=function(e){var t=this.getItem(e);return t?t.hasTrait("selected"):!1},t.prototype.getSelection=function(e){return this.getElementsWithTrait("selected",e)},t.prototype.selectNext=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=!0);for(var i,o=this.getSelection(),r=o.length>0?o[0]:this.input,s=this.getNavigator(r,!1),a=0;e>a&&(i=s.next(),i);a++)r=i;t?this.setSelection([r],n):this.select(r,n)},t.prototype.selectPrevious=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=!0);var i=this.getSelection(),o=null,r=null;if(0===i.length){for(var s=this.getNavigator(this.input);o=s.next();)r=o;o=r}else{o=i[0];for(var s=this.getNavigator(o,!1),a=0;e>a&&(r=s.previous(),r);a++)o=r}t?this.setSelection([o],n):this.select(o,n)},t.prototype.selectParent=function(e,t){void 0===t&&(t=!0);var n=this.getSelection(),i=n.length>0?n[0]:this.input,o=this.getNavigator(i,!1),r=o.parent();r&&(t?this.setSelection([r],e):this.select(r,e))},t.prototype.setFocus=function(e,t){this.setTraits("focused",e?[e]:[]);var n={focus:this.getFocus(),payload:t};this.emit("focus",n)},t.prototype.isFocused=function(e){var t=this.getItem(e);return t?t.hasTrait("focused"):!1},t.prototype.getFocus=function(e){var t=this.getElementsWithTrait("focused",e);return 0===t.length?null:t[0]},t.prototype.focusNext=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,o=this.getNavigator(i,!1),r=0;e>r&&(n=o.next(),n);r++)i=n;this.setFocus(i,t)},t.prototype.focusPrevious=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,o=this.getNavigator(i,!1),r=0;e>r&&(n=o.previous(),n);r++)i=n;this.setFocus(i,t)},t.prototype.focusParent=function(e){var t=this.getFocus()||this.input,n=this.getNavigator(t,!1),i=n.parent();i&&this.setFocus(i,e)},t.prototype.focusFirst=function(e){this.focusNth(0,e)},t.prototype.focusNth=function(e,t){for(var n=this.getNavigator(this.input),i=n.first(),o=0;e>o;o++)i=n.next();i&&this.setFocus(i,t)},t.prototype.focusLast=function(e){var t=this.getNavigator(this.input),n=t.last();n&&this.setFocus(n,e)},t.prototype.getNavigator=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),new f(this.getItem(e),t)},t.prototype.getItem=function(e){return void 0===e&&(e=null),null===e?this.input:e instanceof h?e:"string"==typeof e?this.registry.getItem(e):this.registry.getItem(this.context.dataSource.getId(this.context.tree,e))},t.prototype.addTraits=function(e,t){for(var n,i=this.traitsToItems[e]||{},o=0,r=t.length;r>o;o++)n=this.getItem(t[o]),n&&(n.addTrait(e),i[n.id]=n);this.traitsToItems[e]=i},t.prototype.removeTraits=function(e,t){var n,i,o=this.traitsToItems[e]||{};if(0===t.length){for(i in o)o.hasOwnProperty(i)&&(n=o[i],n.removeTrait(e));delete this.traitsToItems[e]}else for(var r=0,s=t.length;s>r;r++)n=this.getItem(t[r]),n&&(n.removeTrait(e),delete o[n.id])},t.prototype.hasTrait=function(e,t){var n=this.getItem(t);return n&&n.hasTrait(e)},t.prototype.toggleTrait=function(e,t){var n=this.getItem(t);n&&(n.hasTrait(e)?this.removeTraits(e,[t]):this.addTraits(e,[t]))},t.prototype.setTraits=function(e,t){if(0===t.length)this.removeTraits(e,t);else{for(var n,i={},o=0,r=t.length;r>o;o++)n=this.getItem(t[o]),n&&(i[n.id]=n);var s,a=this.traitsToItems[e]||{},c=[];for(s in a)a.hasOwnProperty(s)&&(i.hasOwnProperty(s)?delete i[s]:c.push(a[s]));for(var o=0,r=c.length;r>o;o++)n=c[o],n.removeTrait(e),delete a[n.id];for(s in i)i.hasOwnProperty(s)&&(n=i[s],n.addTrait(e),a[s]=n);this.traitsToItems[e]=a}},t.prototype.getElementsWithTrait=function(e,t){var n,i=[],o=this.traitsToItems[e]||{};for(n in o)o.hasOwnProperty(n)&&(o[n].isVisible()||t)&&i.push(o[n].getElement());return i},t.prototype.dispose=function(){this.registry&&(this.registry.dispose(),this.registry=null),e.prototype.dispose.call(this)},t}(s.EventEmitter);t.TreeModel=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/treeViewModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/iterator"],function(e,t,n,i){"use strict";var o=function(e){function t(){e.call(this),this.heightMap=[],this.indexes={}}return __extends(t,e),t.prototype.getTotalHeight=function(){var e=this.heightMap[this.heightMap.length-1];return e?e.top+e.height:0},t.prototype.onInsertItems=function(e,t){void 0===t&&(t=null);var n,i,o,r,s,a=0;if(null===t)o=0,s=0;else{if(o=this.indexes[t]+1,i=this.heightMap[o-1],!i)throw new Error("Tree error, onInsertItems: viewItem doesn't exist.");s=i.top+i.height}for(var c=this.heightMap.splice.bind(this.heightMap,o,0),u=[];n=e.next();)i=this.createViewItem(n),i.top=s+a,this.emit("viewItem:create",{item:i.model}),this.indexes[n.id]=o++,u.push(i),a+=i.height;for(c.apply(this.heightMap,u),r=o;r<this.heightMap.length;r++)i=this.heightMap[r],i.top+=a,this.indexes[i.model.id]=r;for(r=u.length-1;r>=0;r--)this.onInsertItem(u[r]);for(r=this.heightMap.length-1;r>=o;r--)this.onRefreshItem(this.heightMap[r]);return a},t.prototype.onInsertItem=function(e){},t.prototype.onRemoveItems=function(e){for(var t,n,i,o=null,r=0;t=e.next();){if(i=this.indexes[t],n=this.heightMap[i],!n)throw new Error("Tree error, onRemoveItems: viewItem doesn't exist.");r-=n.height,delete this.indexes[t],this.onRemoveItem(n),null===o&&(o=i)}if(0!==r)for(this.heightMap.splice(o,i-o+1),i=o;i<this.heightMap.length;i++)n=this.heightMap[i],n.top+=r,this.indexes[n.model.id]=i,this.onRefreshItem(n)},t.prototype.onRemoveItem=function(e){},t.prototype.onRefreshItemSet=function(e){var t=this,n=e.sort(function(e,n){return t.indexes[e.id]-t.indexes[n.id]});this.onRefreshItems(new i.ArrayIterator(n))},t.prototype.onRefreshItems=function(e){for(var t,n,i,o,r=null,s=0;t=e.next();){for(o=this.indexes[t.id];0!==s&&null!==r&&o>r;r++)n=this.heightMap[r],n.top+=s,this.onRefreshItem(n);n=this.heightMap[o],i=t.getHeight(),n.top+=s,s+=i-n.height,n.height=i,this.onRefreshItem(n,!0),r=o+1}if(0!==s&&null!==r)for(;r<this.heightMap.length;r++)n=this.heightMap[r],n.top+=s,this.onRefreshItem(n)},t.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1)},t.prototype.itemsCount=function(){return this.heightMap.length},t.prototype.itemAt=function(e){return this.heightMap[this.indexAt(e)].model.id},t.prototype.withItemsInRange=function(e,t,n){e=this.indexAt(e),t=this.indexAt(t);for(var i=e;t>=i;i++)n(this.heightMap[i].model.id)},t.prototype.indexAt=function(e){for(var t,n,i=0,o=this.heightMap.length;o>i;)if(t=Math.floor((i+o)/2),n=this.heightMap[t],e<n.top)o=t;else{if(!(e>=n.top+n.height))return t;if(i===t)break;i=t}return this.heightMap.length},t.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.heightMap.length)},t.prototype.itemAtIndex=function(e){return this.heightMap[e]},t.prototype.itemAfter=function(e){return this.heightMap[this.indexes[e.model.id]+1]||null},t.prototype.createViewItem=function(e){throw new Error("not implemented")},t.prototype.dispose=function(){this.heightMap=null,this.indexes=null},t}(n.EventEmitter);t.HeightMap=o}),define("vs/editor/browser/view/viewEventDispatcher",["require","exports","vs/base/common/eventEmitter"],function(e,t,n){"use strict";var i=function(){function e(e){this.eventHandlerGateKeeper=e,this.eventHandlers=[],this.eventQueue=[],this.isConsumingQueue=!1}return e.prototype.addEventHandler=function(e){for(var t=0,n=this.eventHandlers.length;n>t;t++)this.eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this.eventHandlers.push(e)},e.prototype.removeEventHandler=function(e){for(var t=0;t<this.eventHandlers.length;t++)if(this.eventHandlers[t]===e){this.eventHandlers.splice(t,1);break}},e.prototype.emit=function(e,t){this.eventQueue.push(new n.EmitterEvent(e,t)),this.isConsumingQueue||this.consumeQueue()},e.prototype.emitMany=function(e){this.eventQueue=this.eventQueue.concat(e),this.isConsumingQueue||this.consumeQueue()},e.prototype.consumeQueue=function(){var e=this;this.eventHandlerGateKeeper(function(){try{e.isConsumingQueue=!0;for(var t,n,i,o;e.eventQueue.length>0;)for(o=e.eventQueue,e.eventQueue=[],i=e.eventHandlers.slice(0),t=0,n=i.length;n>t;t++)i[t].handleEvents(o)}finally{e.isConsumingQueue=!1}})},e}();t.ViewEventDispatcher=i}),define("vs/editor/common/model/editStack",["require","exports","vs/base/common/errors"],function(e,t,n){"use strict";var i=function(){function e(e){this.model=e,this.currentOpenStackElement=null,this.past=[],this.future=[]}return e.prototype.pushStackElement=function(){null!==this.currentOpenStackElement&&(this.past.push(this.currentOpenStackElement),this.currentOpenStackElement=null)},e.prototype.clear=function(){this.currentOpenStackElement=null,this.past=[],this.future=[]},e.prototype.pushEditOperation=function(e,t,i){this.future=[],this.currentOpenStackElement||(this.currentOpenStackElement={beforeVersionId:this.model.getAlternativeVersionId(),beforeCursorState:e,editOperations:[],afterCursorState:null,afterVersionId:-1});var o={operations:this.model.applyEdits(t)};this.currentOpenStackElement.editOperations.push(o);try{this.currentOpenStackElement.afterCursorState=i?i(o.operations):null}catch(r){n.onUnexpectedError(r),this.currentOpenStackElement.afterCursorState=null}return this.currentOpenStackElement.afterVersionId=this.model.getVersionId(),this.currentOpenStackElement.afterCursorState},e.prototype.undo=function(){if(this.pushStackElement(),this.past.length>0){var e=this.past.pop();try{for(var t=e.editOperations.length-1;t>=0;t--)e.editOperations[t]={
operations:this.model.applyEdits(e.editOperations[t].operations)}}catch(n){return this.clear(),null}return this.future.push(e),{selections:e.beforeCursorState,recordedVersionId:e.beforeVersionId}}return null},e.prototype.redo=function(){if(this.future.length>0){if(this.currentOpenStackElement)throw new Error("How is this possible?");var e=this.future.pop();try{for(var t=0;t<e.editOperations.length;t++)e.editOperations[t]={operations:this.model.applyEdits(e.editOperations[t].operations)}}catch(n){return this.clear(),null}return this.past.push(e),{selections:e.afterCursorState,recordedVersionId:e.afterVersionId}}return null},e}();t.EditStack=i}),define("vs/editor/common/model/tokensBinaryEncoding",["require","exports","vs/base/common/errors","vs/base/common/strings"],function(e,t,n,i){"use strict";function o(e,i){if(0===i.length)return m;if(1===i.length&&0===i[0].startIndex&&!i[0].type)return g;var o,r,s,a,c,u=e._inflate,l=e._deflate,d=-1,h=new Array(i.length);for(o=0,r=i.length;r>o;o++)c=i[o],c.startIndex<=d&&(c.startIndex=d+1,n.onUnexpectedError({message:"Invalid tokens detected",tokens:i})),l.hasOwnProperty(c.type)?s=l[c.type]:(s=u.length,l[c.type]=s,u.push(c.type)),a=s*t.TYPE_OFFSET+c.startIndex*t.START_INDEX_OFFSET,h[o]=a,d=c.startIndex;return h}function r(e,n){if(0===n)return p;var i=n/t.START_INDEX_OFFSET&t.START_INDEX_MASK,o=n/t.TYPE_OFFSET&t.TYPE_MASK;return new h(i,e._inflate[o])}function s(e){return e/t.START_INDEX_OFFSET&t.START_INDEX_MASK}function a(e,n){var o=n/t.TYPE_OFFSET&t.TYPE_MASK;return 0===o?i.empty:e._inflate[o]}function c(e,n){if(0===n.length)return f;if(1===n.length&&0===n[0])return v;var i,o,r,s,a,c=new Array(n.length),u=e._inflate;for(i=0,o=n.length;o>i;i++)r=n[i],s=r/t.START_INDEX_OFFSET&t.START_INDEX_MASK,a=r/t.TYPE_OFFSET&t.TYPE_MASK,c[i]=new h(s,u[a]);return c}function u(e,t){return d(e,t)}function l(e,n,i,o,r){if(0===n.length)return f;if(1===n.length&&0===n[0])return v;var s,a,c,u,l,p,m=d(n,i),g=[],y=e._inflate;for(c=n[m],p=c/t.TYPE_OFFSET&t.TYPE_MASK,l=0,g.push(new h(l,y[p])),s=m+1,a=n.length;a>s&&(c=n[s],u=c/t.START_INDEX_OFFSET&t.START_INDEX_MASK,!(u>=o));s++)p=c/t.TYPE_OFFSET&t.TYPE_MASK,l=u-i+r,g.push(new h(l,y[p]));return g}function d(e,t){for(var n,i,o=0,r=e.length-1;r>o;)n=o+Math.ceil((r-o)/2),i=4294967295&e[n],i>t?r=n-1:o=n;return o}var h=function(){function e(e,t){this.startIndex=e,this.type=t}return e.prototype.toString=function(){return"{ "+this.startIndex+", '"+this.type+"'}"},e}();t.START_INDEX_MASK=4294967295,t.TYPE_MASK=65535,t.START_INDEX_OFFSET=1,t.TYPE_OFFSET=Math.pow(2,32);var p={startIndex:0,type:""},f=[],m=[],v=[p],g=[0];t.deflateArr=o,t.inflate=r,t.getStartIndex=s,t.getType=a,t.inflateArr=c,t.findIndexOfOffset=u,t.sliceAndInflate=l,t.findIndexInSegmentsArray=d}),define("vs/editor/common/editorCommon",["require","exports","vs/editor/common/model/tokensBinaryEncoding"],function(e,t,n){"use strict";function i(e){return"indent"===e?s.Indent:"same"===e?s.Same:s.None}function o(e){return"line"===e?c.Line:"block"===e?c.Block:"underline"===e?c.Underline:c.Line}function r(e){if(e===c.Line)return"line";if(e===c.Block)return"block";if(e===c.Underline)return"underline";throw new Error("cursorStyleToString: Unknown cursorStyle")}!function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(t.SelectionDirection||(t.SelectionDirection={}));t.SelectionDirection;!function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent"}(t.WrappingIndent||(t.WrappingIndent={}));var s=t.WrappingIndent;t.wrappingIndentFromString=i,function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(t.OverviewRulerLane||(t.OverviewRulerLane={}));t.OverviewRulerLane;!function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(t.EndOfLinePreference||(t.EndOfLinePreference={}));t.EndOfLinePreference;!function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(t.DefaultEndOfLine||(t.DefaultEndOfLine={}));t.DefaultEndOfLine;!function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(t.EndOfLineSequence||(t.EndOfLineSequence={}));t.EndOfLineSequence;t.LineTokensBinaryEncoding=n,function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(t.TrackedRangeStickiness||(t.TrackedRangeStickiness={}));t.TrackedRangeStickiness;!function(e){e[e.Simple=0]="Simple",e[e.Center=1]="Center",e[e.CenterIfOutsideViewport=2]="CenterIfOutsideViewport"}(t.VerticalRevealType||(t.VerticalRevealType={}));t.VerticalRevealType;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET"}(t.MouseTargetType||(t.MouseTargetType={}));t.MouseTargetType;t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS="editorTextFocus",t.KEYBINDING_CONTEXT_EDITOR_FOCUS="editorFocus",t.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS="editorTabMovesFocus",t.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS="editorHasMultipleSelections",t.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION="editorHasSelection",t.KEYBINDING_CONTEXT_EDITOR_LANGUAGE_ID="editorLangId",t.SHOW_ACCESSIBILITY_HELP_ACTION_ID="editor.action.showAccessibilityHelp",t.ViewEventNames={ModelFlushedEvent:"modelFlushedEvent",LinesDeletedEvent:"linesDeletedEvent",LinesInsertedEvent:"linesInsertedEvent",LineChangedEvent:"lineChangedEvent",TokensChangedEvent:"tokensChangedEvent",DecorationsChangedEvent:"decorationsChangedEvent",CursorPositionChangedEvent:"cursorPositionChangedEvent",CursorSelectionChangedEvent:"cursorSelectionChangedEvent",RevealRangeEvent:"revealRangeEvent",LineMappingChangedEvent:"lineMappingChangedEvent",ScrollRequestEvent:"scrollRequestEvent"},function(e){e[e.Value=0]="Value",e[e.Selection=1]="Selection",e[e.Position=2]="Position",e[e.Scroll=3]="Scroll"}(t.CodeEditorStateFlag||(t.CodeEditorStateFlag={}));t.CodeEditorStateFlag;t.EditorType={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},t.ClassName={EditorWarningDecoration:"greensquiggly",EditorErrorDecoration:"redsquiggly"},t.EventType={Disposed:"disposed",ConfigurationChanged:"configurationChanged",ModelDispose:"modelDispose",ModelChanged:"modelChanged",ModelTokensChanged:"modelTokensChanged",ModelModeChanged:"modelsModeChanged",ModelModeSupportChanged:"modelsModeSupportChanged",ModelOptionsChanged:"modelOptionsChanged",ModelContentChanged:"contentChanged",ModelContentChanged2:"contentChanged2",ModelContentChangedFlush:"flush",ModelContentChangedLinesDeleted:"linesDeleted",ModelContentChangedLinesInserted:"linesInserted",ModelContentChangedLineChanged:"lineChanged",EditorTextBlur:"blur",EditorTextFocus:"focus",EditorFocus:"widgetFocus",EditorBlur:"widgetBlur",ModelDecorationsChanged:"decorationsChanged",CursorPositionChanged:"positionChanged",CursorSelectionChanged:"selectionChanged",CursorRevealRange:"revealRange",CursorScrollRequest:"scrollRequest",ViewFocusGained:"focusGained",ViewFocusLost:"focusLost",ViewFocusChanged:"focusChanged",ViewScrollWidthChanged:"scrollWidthChanged",ViewScrollHeightChanged:"scrollHeightChanged",ViewScrollChanged:"scrollChanged",ViewZonesChanged:"zonesChanged",ViewLayoutChanged:"viewLayoutChanged",ContextMenu:"contextMenu",MouseDown:"mousedown",MouseUp:"mouseup",MouseMove:"mousemove",MouseLeave:"mouseleave",KeyDown:"keydown",KeyUp:"keyup",EditorLayout:"editorLayout",DiffUpdated:"diffUpdated"},t.Handler={ExecuteCommand:"executeCommand",ExecuteCommands:"executeCommands",CursorLeft:"cursorLeft",CursorLeftSelect:"cursorLeftSelect",CursorWordLeft:"cursorWordLeft",CursorWordStartLeft:"cursorWordStartLeft",CursorWordEndLeft:"cursorWordEndLeft",CursorWordLeftSelect:"cursorWordLeftSelect",CursorWordStartLeftSelect:"cursorWordStartLeftSelect",CursorWordEndLeftSelect:"cursorWordEndLeftSelect",CursorRight:"cursorRight",CursorRightSelect:"cursorRightSelect",CursorWordRight:"cursorWordRight",CursorWordStartRight:"cursorWordStartRight",CursorWordEndRight:"cursorWordEndRight",CursorWordRightSelect:"cursorWordRightSelect",CursorWordStartRightSelect:"cursorWordStartRightSelect",CursorWordEndRightSelect:"cursorWordEndRightSelect",CursorUp:"cursorUp",CursorUpSelect:"cursorUpSelect",CursorDown:"cursorDown",CursorDownSelect:"cursorDownSelect",CursorPageUp:"cursorPageUp",CursorPageUpSelect:"cursorPageUpSelect",CursorPageDown:"cursorPageDown",CursorPageDownSelect:"cursorPageDownSelect",CursorHome:"cursorHome",CursorHomeSelect:"cursorHomeSelect",CursorEnd:"cursorEnd",CursorEndSelect:"cursorEndSelect",ExpandLineSelection:"expandLineSelection",CursorTop:"cursorTop",CursorTopSelect:"cursorTopSelect",CursorBottom:"cursorBottom",CursorBottomSelect:"cursorBottomSelect",CursorColumnSelectLeft:"cursorColumnSelectLeft",CursorColumnSelectRight:"cursorColumnSelectRight",CursorColumnSelectUp:"cursorColumnSelectUp",CursorColumnSelectPageUp:"cursorColumnSelectPageUp",CursorColumnSelectDown:"cursorColumnSelectDown",CursorColumnSelectPageDown:"cursorColumnSelectPageDown",AddCursorDown:"addCursorDown",AddCursorUp:"addCursorUp",CursorUndo:"cursorUndo",MoveTo:"moveTo",MoveToSelect:"moveToSelect",ColumnSelect:"columnSelect",CreateCursor:"createCursor",LastCursorMoveToSelect:"lastCursorMoveToSelect",JumpToBracket:"jumpToBracket",Type:"type",ReplacePreviousChar:"replacePreviousChar",Paste:"paste",Tab:"tab",Indent:"indent",Outdent:"outdent",DeleteLeft:"deleteLeft",DeleteRight:"deleteRight",DeleteWordLeft:"deleteWordLeft",DeleteWordStartLeft:"deleteWordStartLeft",DeleteWordEndLeft:"deleteWordEndLeft",DeleteWordRight:"deleteWordRight",DeleteWordStartRight:"deleteWordStartRight",DeleteWordEndRight:"deleteWordEndRight",DeleteAllLeft:"deleteAllLeft",DeleteAllRight:"deleteAllRight",Enter:"enter",RemoveSecondaryCursors:"removeSecondaryCursors",CancelSelection:"cancelSelection",Cut:"cut",Undo:"undo",Redo:"redo",WordSelect:"wordSelect",WordSelectDrag:"wordSelectDrag",LastCursorWordSelect:"lastCursorWordSelect",LineSelect:"lineSelect",LineSelectDrag:"lineSelectDrag",LastCursorLineSelect:"lastCursorLineSelect",LastCursorLineSelectDrag:"lastCursorLineSelectDrag",LineInsertBefore:"lineInsertBefore",LineInsertAfter:"lineInsertAfter",LineBreakInsert:"lineBreakInsert",SelectAll:"selectAll",ScrollLineUp:"scrollLineUp",ScrollLineDown:"scrollLineDown",ScrollPageUp:"scrollPageUp",ScrollPageDown:"scrollPageDown"};var a=function(){function e(e,t,n){this.top=e,this.left=t,this.width=n}return e}();t.VisibleRange=a,function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline"}(t.TextEditorCursorStyle||(t.TextEditorCursorStyle={}));var c=t.TextEditorCursorStyle;t.cursorStyleFromString=o,t.cursorStyleToString=r;var u=function(){function e(e,t){this.left=e,this.width=t}return e}();t.HorizontalRange=u;var l=function(){function e(e,t){this.lineNumber=e,this.ranges=t}return e}();t.LineVisibleRanges=l}),define("vs/editor/browser/controller/mouseTarget",["require","exports","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e,t,n,o,r,s){void 0===n&&(n=0),void 0===o&&(o=null),void 0===r&&(r=null),void 0===s&&(s=null),this.element=e,this.type=t,this.mouseColumn=n,this.position=o,!r&&o&&(r=new i.Range(o.lineNumber,o.column,o.lineNumber,o.column)),this.range=r,this.detail=s}return e.prototype._typeToString=function(){return this.type===o.MouseTargetType.TEXTAREA?"TEXTAREA":this.type===o.MouseTargetType.GUTTER_GLYPH_MARGIN?"GUTTER_GLYPH_MARGIN":this.type===o.MouseTargetType.GUTTER_LINE_NUMBERS?"GUTTER_LINE_NUMBERS":this.type===o.MouseTargetType.GUTTER_LINE_DECORATIONS?"GUTTER_LINE_DECORATIONS":this.type===o.MouseTargetType.GUTTER_VIEW_ZONE?"GUTTER_VIEW_ZONE":this.type===o.MouseTargetType.CONTENT_TEXT?"CONTENT_TEXT":this.type===o.MouseTargetType.CONTENT_EMPTY?"CONTENT_EMPTY":this.type===o.MouseTargetType.CONTENT_VIEW_ZONE?"CONTENT_VIEW_ZONE":this.type===o.MouseTargetType.CONTENT_WIDGET?"CONTENT_WIDGET":this.type===o.MouseTargetType.OVERVIEW_RULER?"OVERVIEW_RULER":this.type===o.MouseTargetType.SCROLLBAR?"SCROLLBAR":this.type===o.MouseTargetType.OVERLAY_WIDGET?"OVERLAY_WIDGET":"UNKNOWN"},e.prototype.toString=function(){return this._typeToString()+": "+this.position+" - "+this.range+" - "+this.detail},e}(),a=function(){function e(e){return"[^/]*"+e+"[^/]*"}function t(){return"[^/]+"}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=!1;return"$"===e[e.length-1]&&(n=!0,e.pop()),new RegExp(i+e.join("\\/")+(n?"$":""))}var i="^"+r.ClassNames.OVERFLOW_GUARD+"\\/";return{IS_TEXTAREA_COVER:n(e(r.ClassNames.TEXTAREA_COVER),"$"),IS_TEXTAREA:n(r.ClassNames.TEXTAREA,"$"),IS_VIEW_LINES:n(t(),t(),r.ClassNames.VIEW_LINES,"$"),IS_CURSORS_LAYER:n(t(),t(),e(r.ClassNames.VIEW_CURSORS_LAYER),"$"),IS_CHILD_OF_VIEW_LINES:n(t(),t(),r.ClassNames.VIEW_LINES),IS_CHILD_OF_SCROLLABLE_ELEMENT:n(e(r.ClassNames.SCROLLABLE_ELEMENT)),IS_CHILD_OF_CONTENT_WIDGETS:n(t(),t(),r.ClassNames.CONTENT_WIDGETS),IS_CHILD_OF_OVERFLOWING_CONTENT_WIDGETS:new RegExp("^"+r.ClassNames.OVERFLOWING_CONTENT_WIDGETS+"\\/"),IS_CHILD_OF_OVERLAY_WIDGETS:n(r.ClassNames.OVERLAY_WIDGETS),IS_CHILD_OF_VIEW_OVERLAYS:n(r.ClassNames.MARGIN_VIEW_OVERLAYS),IS_CHILD_OF_VIEW_ZONES:n(t(),t(),r.ClassNames.VIEW_ZONES)}}(),c=function(){function e(e,t){this.context=e,this.viewHelper=t}return e.prototype.getClassNamePathTo=function(e,t){for(var n,i=[];e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n=e.className,n&&i.unshift(n)),e=e.parentNode;return i.join("/")},e.prototype.mouseTargetIsWidget=function(e){var t=e.target,n=this.getClassNamePathTo(t,this.viewHelper.viewDomNode);return a.IS_CHILD_OF_CONTENT_WIDGETS.test(n)||a.IS_CHILD_OF_OVERFLOWING_CONTENT_WIDGETS.test(n)?!0:!!a.IS_CHILD_OF_OVERLAY_WIDGETS.test(n)},e.prototype.createMouseTarget=function(e,t,n,i){try{var o=this._unsafeCreateMouseTarget(e,t,n,i);return o}catch(n){return this.createMouseTargetFromUnknownTarget(n.target)}},e.prototype._unsafeCreateMouseTarget=function(e,t,n,i){var r=Math.max(0,this.viewHelper.getScrollTop()+(n.posy-t.top)),c=this.viewHelper.getScrollLeft()+(n.posx-t.left)-e.contentLeft,u=this._getMouseColumn(c),l=n.target,d=this.getClassNamePathTo(l,this.viewHelper.viewDomNode),h=l.hasAttribute&&l.hasAttribute("lineNumber")?l.getAttribute("lineNumber"):null,p=l.hasAttribute&&l.hasAttribute("column")?l.getAttribute("column"):null;if(h&&p)return this.createMouseTargetFromViewCursor(l,parseInt(h,10),parseInt(p,10),u);if(a.IS_CHILD_OF_CONTENT_WIDGETS.test(d)||a.IS_CHILD_OF_OVERFLOWING_CONTENT_WIDGETS.test(d))return this.createMouseTargetFromContentWidgetsChild(l,u);if(a.IS_CHILD_OF_OVERLAY_WIDGETS.test(d))return this.createMouseTargetFromOverlayWidgetsChild(l,u);if(a.IS_TEXTAREA_COVER.test(d))return this.context.configuration.editor.glyphMargin?this.createMouseTargetFromGlyphMargin(l,r,u):this.context.configuration.editor.lineNumbers?this.createMouseTargetFromLineNumbers(l,r,u):this.createMouseTargetFromLinesDecorationsChild(l,r,u);if(a.IS_TEXTAREA.test(d))return new s(l,o.MouseTargetType.TEXTAREA);if(a.IS_CHILD_OF_VIEW_ZONES.test(d)){var f=this._getZoneAtCoord(r);return f?new s(l,o.MouseTargetType.CONTENT_VIEW_ZONE,u,f.position,null,f):this.createMouseTargetFromUnknownTarget(l)}if(a.IS_VIEW_LINES.test(d)){if(this.viewHelper.isAfterLines(r))return this.createMouseTargetFromViewLines(l,r,u);var f=this._getZoneAtCoord(r);if(f)return new s(l,o.MouseTargetType.CONTENT_VIEW_ZONE,u,f.position,null,f);var m=this._doHitTest(t,n,r);return m.position?this.createMouseTargetFromHitTestPosition(l,m.position.lineNumber,m.position.column,c,u):this.createMouseTargetFromViewLines(l,r,u)}if(!i||a.IS_CHILD_OF_VIEW_LINES.test(d)){var m=this._doHitTest(t,n,r);if(m.position)return this.createMouseTargetFromHitTestPosition(l,m.position.lineNumber,m.position.column,c,u);if(m.hitTarget){l=m.hitTarget,d=this.getClassNamePathTo(l,this.viewHelper.viewDomNode);var h=l.hasAttribute&&l.hasAttribute("lineNumber")?l.getAttribute("lineNumber"):null,p=l.hasAttribute&&l.hasAttribute("column")?l.getAttribute("column"):null;if(h&&p)return this.createMouseTargetFromViewCursor(l,parseInt(h,10),parseInt(p,10),u)}}if(a.IS_CURSORS_LAYER.test(d))return new s(l,o.MouseTargetType.UNKNOWN);if(a.IS_CHILD_OF_SCROLLABLE_ELEMENT.test(d))return this.createMouseTargetFromScrollbar(l,r,u);if(a.IS_CHILD_OF_VIEW_OVERLAYS.test(d)){var v=Math.abs(n.posx-t.left);return v<=e.glyphMarginWidth?this.createMouseTargetFromGlyphMargin(l,r,u):(v-=e.glyphMarginWidth,v<=e.lineNumbersWidth?this.createMouseTargetFromLineNumbers(l,r,u):(v-=e.lineNumbersWidth,this.createMouseTargetFromLinesDecorationsChild(l,r,u)))}return/OverviewRuler/i.test(d)?this.createMouseTargetFromScrollbar(l,r,u):this.createMouseTargetFromUnknownTarget(l)},e.prototype._isChild=function(e,t,n){for(;e&&e!==document.body;){if(e===t)return!0;if(e===n)return!1;e=e.parentNode}return!1},e.prototype._findAttribute=function(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null},e.prototype._doHitTestWithCaretRangeFromPoint=function(e,t,n){var i=this.viewHelper.getLineNumberAtVerticalOffset(n),o=this.viewHelper.getVerticalOffsetForLineNumber(i),r=o+Math.floor(this.context.configuration.editor.lineHeight/2),s=t.posy+(r-n);s<=e.top&&(s=e.top+1),s>=e.top+this.context.configuration.editor.observedOuterHeight&&(s=e.top+this.context.configuration.editor.observedOuterHeight-1);var a=t.posx-document.body.scrollLeft,c=this._actualDoHitTestWithCaretRangeFromPoint(a,s-document.body.scrollTop);return c.position?c:this._actualDoHitTestWithCaretRangeFromPoint(a,t.posy-document.body.scrollTop)},e.prototype._actualDoHitTestWithCaretRangeFromPoint=function(e,t){var n=document.caretRangeFromPoint(e,t);if(!n||!n.startContainer)return{position:null,hitTarget:null};var i,o=n.startContainer;if(o.nodeType===o.TEXT_NODE){var s=o.parentNode,a=s?s.parentNode:null,c=a?a.parentNode:null,u=c&&c.nodeType===c.ELEMENT_NODE?c.className:null;if(u===r.ClassNames.VIEW_LINE)return{position:this.viewHelper.getPositionFromDOMInfo(s,n.startOffset),hitTarget:null};i=o.parentNode}else if(o.nodeType===o.ELEMENT_NODE){var s=o.parentNode,a=s?s.parentNode:null,l=a&&a.nodeType===a.ELEMENT_NODE?a.className:null;if(l===r.ClassNames.VIEW_LINE)return{position:this.viewHelper.getPositionFromDOMInfo(o,o.textContent.length),hitTarget:null};i=o}return{position:null,hitTarget:i}},e.prototype._doHitTestWithCaretPositionFromPoint=function(e){var t=null,n=null,i=e.posx-document.body.scrollLeft-document.documentElement.scrollLeft,o=e.posy-document.body.scrollTop-document.documentElement.scrollTop,r=document.caretPositionFromPoint(i,o),s=document.createRange();return s.setStart(r.offsetNode,r.offset),s.collapse(!0),t=this.viewHelper.getPositionFromDOMInfo(s.startContainer.parentNode,s.startOffset),s.detach(),{position:t,hitTarget:n}},e.prototype._doHitTestWithMoveToPoint=function(e){var t=null,n=null,i=document.body.createTextRange();try{var o=e.posx-document.body.scrollLeft-document.documentElement.scrollLeft,s=e.posy-document.body.scrollTop-document.documentElement.scrollTop;i.moveToPoint(o,s)}catch(a){return{position:null,hitTarget:null}}i.collapse(!0);var c=i?i.parentElement():null,u=c?c.parentNode:null,l=u?u.parentNode:null,d=l&&l.nodeType===l.ELEMENT_NODE?l.className:"";if(d===r.ClassNames.VIEW_LINE){var h=i.duplicate();h.moveToElementText(c),h.setEndPoint("EndToStart",i),t=this.viewHelper.getPositionFromDOMInfo(c,h.text.length),h.moveToElementText(this.viewHelper.viewDomNode)}else n=c;return i.moveToElementText(this.viewHelper.viewDomNode),{position:t,hitTarget:n}},e.prototype._doHitTest=function(e,t,n){return document.caretRangeFromPoint?this._doHitTestWithCaretRangeFromPoint(e,t,n):document.caretPositionFromPoint?this._doHitTestWithCaretPositionFromPoint(t):document.body.createTextRange?this._doHitTestWithMoveToPoint(t):{position:null,hitTarget:null}},e.prototype._getZoneAtCoord=function(e){var t=this.viewHelper.getWhitespaceAtVerticalOffset(e);if(t){var i,o=t.verticalOffset+t.height/2,r=this.context.model.getLineCount(),s=null,a=null;return t.afterLineNumber!==r&&(a=new n.Position(t.afterLineNumber+1,1)),t.afterLineNumber>0&&(s=new n.Position(t.afterLineNumber,this.context.model.getLineMaxColumn(t.afterLineNumber))),i=null===a?s:null===s?a:o>e?s:a,{viewZoneId:t.id,afterLineNumber:t.afterLineNumber,positionBefore:s,positionAfter:a,position:i}}return null},e.prototype._getFullLineRangeAtCoord=function(e){if(this.viewHelper.isAfterLines(e)){var t=this.context.model.getLineCount(),n=this.context.model.getLineMaxColumn(t);return{range:new i.Range(t,n,t,n),isAfterLines:!0}}var t=this.viewHelper.getLineNumberAtVerticalOffset(e),n=this.context.model.getLineMaxColumn(t);return{range:new i.Range(t,1,t,n),isAfterLines:!1}},e.prototype.getMouseColumn=function(e,t,n){var i=this.viewHelper.getScrollLeft()+(n.posx-t.left)-e.contentLeft;return this._getMouseColumn(i)},e.prototype._getMouseColumn=function(e){if(0>e)return 1;var t=this.context.configuration.editor.typicalHalfwidthCharacterWidth,n=Math.round(e/t);return n+1},e.prototype.createMouseTargetFromViewCursor=function(e,t,i,r){return new s(e,o.MouseTargetType.CONTENT_TEXT,r,new n.Position(t,i))},e.prototype.createMouseTargetFromViewLines=function(e,t,i){var r=this.context.model.getLineCount(),a=this.context.model.getLineMaxColumn(r);return new s(e,o.MouseTargetType.CONTENT_EMPTY,i,new n.Position(r,a))},e.prototype.createMouseTargetFromHitTestPosition=function(e,t,r,a,c){var u=new n.Position(t,r),l=this.viewHelper.getLineWidth(t);if(a>l)return new s(e,o.MouseTargetType.CONTENT_EMPTY,c,u);var d=this.viewHelper.visibleRangeForPosition2(t,r);if(!d)return new s(e,o.MouseTargetType.UNKNOWN,c,u);var h=d.left;if(a===h)return new s(e,o.MouseTargetType.CONTENT_TEXT,c,u);var p;if(r>1){var f=d.left;if(p=!1,p=p||a>f&&h>a,p=p||a>h&&f>a){var m=new i.Range(t,r,t,r-1);return new s(e,o.MouseTargetType.CONTENT_TEXT,c,u,m)}}var v=this.context.model.getLineMaxColumn(t);if(v>r){var g=this.viewHelper.visibleRangeForPosition2(t,r+1);if(g){var y=g.left;if(p=!1,p=p||a>h&&y>a,p=p||a>y&&h>a){var m=new i.Range(t,r,t,r+1);return new s(e,o.MouseTargetType.CONTENT_TEXT,c,u,m)}}}return new s(e,o.MouseTargetType.CONTENT_TEXT,c,u)},e.prototype.createMouseTargetFromContentWidgetsChild=function(e,t){var n=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode);return n?new s(e,o.MouseTargetType.CONTENT_WIDGET,t,null,null,n):new s(e,o.MouseTargetType.UNKNOWN)},e.prototype.createMouseTargetFromOverlayWidgetsChild=function(e,t){var n=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode);return n?new s(e,o.MouseTargetType.OVERLAY_WIDGET,t,null,null,n):new s(e,o.MouseTargetType.UNKNOWN)},e.prototype.createMouseTargetFromLinesDecorationsChild=function(e,t,i){var r=this._getZoneAtCoord(t);if(r)return new s(e,o.MouseTargetType.GUTTER_VIEW_ZONE,i,r.position,null,r);var a=this._getFullLineRangeAtCoord(t);return new s(e,o.MouseTargetType.GUTTER_LINE_DECORATIONS,i,new n.Position(a.range.startLineNumber,a.range.startColumn),a.range,a.isAfterLines)},e.prototype.createMouseTargetFromLineNumbers=function(e,t,i){var r=this._getZoneAtCoord(t);if(r)return new s(e,o.MouseTargetType.GUTTER_VIEW_ZONE,i,r.position,null,r);var a=this._getFullLineRangeAtCoord(t);return new s(e,o.MouseTargetType.GUTTER_LINE_NUMBERS,i,new n.Position(a.range.startLineNumber,a.range.startColumn),a.range,a.isAfterLines)},e.prototype.createMouseTargetFromGlyphMargin=function(e,t,i){var r=this._getZoneAtCoord(t);if(r)return new s(e,o.MouseTargetType.GUTTER_VIEW_ZONE,i,r.position,null,r);var a=this._getFullLineRangeAtCoord(t);return new s(e,o.MouseTargetType.GUTTER_GLYPH_MARGIN,i,new n.Position(a.range.startLineNumber,a.range.startColumn),a.range,a.isAfterLines)},e.prototype.createMouseTargetFromScrollbar=function(e,t,i){var r=this.viewHelper.getLineNumberAtVerticalOffset(t),a=this.context.model.getLineMaxColumn(r);return new s(e,o.MouseTargetType.SCROLLBAR,i,new n.Position(r,a))},e.prototype.createMouseTargetFromUnknownTarget=function(e){var t=this._isChild(e,this.viewHelper.viewDomNode,this.viewHelper.viewDomNode),n=null;return t&&(n=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode)),n?new s(e,o.MouseTargetType.OVERLAY_WIDGET,null,null,n):new s(e,o.MouseTargetType.UNKNOWN)},e}();t.MouseTargetFactory=c}),define("vs/editor/browser/standalone/colorizer",["require","exports","vs/base/common/async","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/editor/common/viewLayout/viewLineRenderer"],function(e,t,n,i,o,r){"use strict";function s(e,t,n){var i,o,s,a,c,u=t.tokenizationSupport,l=[],d=u.getInitialState(),h=[];for(i=0,o=e.length;o>i;i++)s=e[i],a=u.tokenize(s,d),a.retokenize&&h.push(a.retokenize),c=r.renderLine({lineContent:s,parts:a.tokens,stopRenderingLineAfter:-1,renderWhitespace:!1,tabSize:n}),l=l.concat(c.output),l.push("<br/>"),d=a.endState;return{result:l.join(""),retokenize:h}}var a=function(){function e(){}return e.colorizeElement=function(e,t,n){n=n||{};var i=n.theme||"vs",o=n.mimeType||t.getAttribute("lang")||t.getAttribute("data-lang");if(!o)return void console.error("Mode not detected");var r=t.firstChild.nodeValue;t.className+="monaco-editor "+i;var s=function(e){t.innerHTML=e};return this.colorize(e,r,o,n).then(s,function(e){return console.error(e)},s)},e.colorize=function(e,t,o,r){r=r||{},"undefined"==typeof r.tabSize&&(r.tabSize=4);var a,c,u,l,d=t.split("\n"),h=!1,p=new i.TPromise(function(e,t,n){a=e,c=t,u=n},function(){h=!0}),f=new n.RunOnceScheduler(function(){if(!h){var e=s(d,l,r.tabSize);e.retokenize.length>0?(e.retokenize.forEach(function(e){return e.then(m)}),u(e.result)):a(e.result)}},0),m=function(){return f.schedule()};return e.getOrCreateMode(o).then(function(e){return e?e.tokenizationSupport?(l=e,void m()):void c('Mode found ("'+e.getId()+'"), but does not support tokenization.'):void c('Mode not found: "'+o+'".')}),p},e.colorizeLine=function(e,t,n){void 0===n&&(n=4);var i=r.renderLine({lineContent:e,parts:t,stopRenderingLineAfter:-1,renderWhitespace:!1,tabSize:n});return i.output.join("")},e.colorizeModelLine=function(e,t,n){void 0===n&&(n=4);var i=e.getLineContent(t),r=e.getLineTokens(t,!1),s=o.LineTokensBinaryEncoding.inflateArr(r.getBinaryEncodedTokensMap(),r.getBinaryEncodedTokens());return this.colorizeLine(i,s,n)},e}();t.Colorizer=a}),define("vs/editor/browser/view/viewController",["require","exports","vs/editor/common/core/position","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,n,i){this.viewModel=e,this.configuration=t,this.outgoingEventBus=n,this.keybindingService=i}return e.prototype.paste=function(e,t,n){this.keybindingService.executeCommand(i.Handler.Paste,{text:t,pasteOnNewLine:n})},e.prototype.type=function(e,t){this.keybindingService.executeCommand(i.Handler.Type,{text:t})},e.prototype.replacePreviousChar=function(e,t,n){this.keybindingService.executeCommand(i.Handler.ReplacePreviousChar,{text:t,replaceCharCnt:n})},e.prototype.cut=function(e){this.keybindingService.executeCommand(i.Handler.Cut,{})},e.prototype._validateViewColumn=function(e){var t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new n.Position(e.lineNumber,t):e},e.prototype.dispatchMouse=function(e){e.startedOnLineNumbers?e.altKey?e.inSelectionMode?this.lastCursorLineSelect("mouse",e.position):this.createCursor("mouse",e.position,!0):e.inSelectionMode?this.lineSelectDrag("mouse",e.position):this.lineSelect("mouse",e.position):e.mouseDownCount>=4?this.selectAll("mouse"):3===e.mouseDownCount?e.altKey?e.inSelectionMode?this.lastCursorLineSelectDrag("mouse",e.position):this.lastCursorLineSelect("mouse",e.position):e.inSelectionMode?this.lineSelectDrag("mouse",e.position):this.lineSelect("mouse",e.position):2===e.mouseDownCount?e.altKey?this.lastCursorWordSelect("mouse",e.position):e.inSelectionMode?this.wordSelectDrag("mouse",e.position):this.wordSelect("mouse",e.position):e.altKey?e.ctrlKey||e.metaKey||(e.shiftKey?this.columnSelect("mouse",e.position,e.mouseColumn):e.inSelectionMode?this.lastCursorMoveToSelect("mouse",e.position):this.createCursor("mouse",e.position,!1)):e.inSelectionMode?this.moveToSelect("mouse",e.position):this.moveTo("mouse",e.position)},e.prototype.moveTo=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.MoveTo,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.moveToSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.MoveToSelect,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.columnSelect=function(e,t,n){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.ColumnSelect,{position:this.convertViewToModelPosition(t),viewPosition:t,mouseColumn:n})},e.prototype.createCursor=function(e,t,n){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.CreateCursor,{position:this.convertViewToModelPosition(t),viewPosition:t,wholeLine:n})},e.prototype.lastCursorMoveToSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorMoveToSelect,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.wordSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.WordSelect,{position:this.convertViewToModelPosition(t)})},e.prototype.wordSelectDrag=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.WordSelectDrag,{position:this.convertViewToModelPosition(t)})},e.prototype.lastCursorWordSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorWordSelect,{position:this.convertViewToModelPosition(t)})},e.prototype.lineSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LineSelect,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.lineSelectDrag=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LineSelectDrag,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.lastCursorLineSelect=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorLineSelect,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.lastCursorLineSelectDrag=function(e,t){t=this._validateViewColumn(t),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorLineSelectDrag,{position:this.convertViewToModelPosition(t),viewPosition:t})},e.prototype.selectAll=function(e){this.configuration.handlerDispatcher.trigger(e,i.Handler.SelectAll,null)},e.prototype.convertViewToModelPosition=function(e){return this.viewModel.convertViewPositionToModelPosition(e.lineNumber,e.column)},e.prototype.convertViewToModelRange=function(e){return this.viewModel.convertViewRangeToModelRange(e)},e.prototype.convertViewToModelMouseEvent=function(e){e.target&&(e.target.position&&(e.target.position=this.convertViewToModelPosition(e.target.position)),e.target.range&&(e.target.range=this.convertViewToModelRange(e.target.range)))},e.prototype.emitKeyDown=function(e){this.outgoingEventBus.emit(i.EventType.KeyDown,e)},e.prototype.emitKeyUp=function(e){this.outgoingEventBus.emit(i.EventType.KeyUp,e)},e.prototype.emitContextMenu=function(e){this.convertViewToModelMouseEvent(e),
this.outgoingEventBus.emit(i.EventType.ContextMenu,e)},e.prototype.emitMouseMove=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseMove,e)},e.prototype.emitMouseLeave=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseLeave,e)},e.prototype.emitMouseUp=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseUp,e)},e.prototype.emitMouseDown=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseDown,e)},e}();t.ViewController=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lines/viewLine",["require","exports","vs/base/browser/browser","vs/base/browser/styleMutator","vs/editor/common/editorCommon","vs/editor/common/viewLayout/viewLineParts","vs/editor/common/viewLayout/viewLineRenderer","vs/editor/browser/editorBrowser"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t){return e.left-t.left}function u(e,t,n){var i=e.findIndexOfOffset(t);return n>=i?i:n}function l(e){return new f(e)}function d(e){return new m(e)}function h(e){return new p(e)}var p=function(){function e(e){this._context=e,this._domNode=null,this._isInvalid=!0,this._isMaybeInvalid=!1,this._lineParts=null,this._charOffsetInPart=[],this._lastRenderedPartIndex=0}return e.prototype.getDomNode=function(){return this._domNode},e.prototype.setDomNode=function(e){this._domNode=e},e.prototype.onContentChanged=function(){this._isInvalid=!0},e.prototype.onLinesInsertedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onLinesDeletedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onLineChangedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onTokensChanged=function(){this._isMaybeInvalid=!0},e.prototype.onModelDecorationsChanged=function(){this._isMaybeInvalid=!0},e.prototype.onConfigurationChanged=function(e){this._isInvalid=!0},e.prototype.shouldUpdateHTML=function(e,t){var n=null;return(this._isMaybeInvalid||this._isInvalid)&&(n=r.createLineParts(e,this._context.model.getLineMinColumn(e),this._context.model.getLineContent(e),this._context.model.getLineTokens(e),t,this._context.configuration.editor.renderWhitespace)),this._isMaybeInvalid&&(this._isInvalid||this._lineParts&&this._lineParts.equals(n)||(this._isInvalid=!0),this._isMaybeInvalid=!1),this._isInvalid&&(this._lineParts=n),this._isInvalid},e.prototype.getLineOuterHTML=function(e,t,n){e.push('<div lineNumber="'),e.push(t.toString()),e.push('" style="top:'),e.push(n.toString()),e.push("px;height:"),e.push(this._context.configuration.editor.lineHeight.toString()),e.push('px;" class="'),e.push(a.ClassNames.VIEW_LINE),e.push('">'),e.push(this.getLineInnerHTML(t)),e.push("</div>")},e.prototype.getLineInnerHTML=function(e){return this._isInvalid=!1,this._render(e,this._lineParts).join("")},e.prototype.layoutLine=function(e,t){var n=String(e),o=this._domNode.getAttribute("lineNumber");o!==n&&this._domNode.setAttribute("lineNumber",n),i.StyleMutator.setTop(this._domNode,t),i.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight)},e.prototype._render=function(e,t){this._cachedWidth=-1;var n=s.renderLine({lineContent:this._context.model.getLineContent(e),tabSize:this._context.model.getTabSize(),stopRenderingLineAfter:this._context.configuration.editor.stopRenderingLineAfter,renderWhitespace:this._context.configuration.editor.renderWhitespace,parts:t.getParts()});return this._charOffsetInPart=n.charOffsetInPart,this._lastRenderedPartIndex=n.lastRenderedPartIndex,n.output},e.prototype._getReadingTarget=function(){return this._domNode.firstChild},e.prototype.getWidth=function(){return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget().offsetWidth),this._cachedWidth},e.prototype.getVisibleRangesForRange=function(e,t,n,i){var o=this._context.configuration.editor.stopRenderingLineAfter;return-1!==o&&e>o&&t>o?null:(-1!==o&&e>o&&(e=o),-1!==o&&t>o&&(t=o),this._readVisibleRangesForRange(e,t,n,i))},e.prototype._readVisibleRangesForRange=function(e,t,n,i){var o;if(o=e===t?this._readRawVisibleRangesForPosition(e,n,i):this._readRawVisibleRangesForRange(e,t,n,i),!o||o.length<=1)return o;o.sort(c);for(var r=[],s=o[0],a=1,u=o.length;u>a;a++){var l=o[a];s.left+s.width+.9>=l.left?s.width=Math.max(s.width,l.left+l.width-s.left):(r.push(s),s=l)}return r.push(s),r},e.prototype._readRawVisibleRangesForPosition=function(e,t,n){if(0===this._charOffsetInPart.length)return[new o.HorizontalRange(0,0)];var i=u(this._lineParts,e-1,this._lastRenderedPartIndex),r=this._charOffsetInPart[e-1];return this._readRawVisibleRangesFrom(this._getReadingTarget(),i,r,i,r,t,n)},e.prototype._readRawVisibleRangesForRange=function(e,t,n,i){if(1===e&&t===this._charOffsetInPart.length)return[this._readRawVisibleRangeForEntireLine()];var o=u(this._lineParts,e-1,this._lastRenderedPartIndex),r=this._charOffsetInPart[e-1],s=u(this._lineParts,t-1,this._lastRenderedPartIndex),a=this._charOffsetInPart[t-1];return this._readRawVisibleRangesFrom(this._getReadingTarget(),o,r,s,a,n,i)},e.prototype._readRawVisibleRangeForEntireLine=function(){return new o.HorizontalRange(0,this._getReadingTarget().offsetWidth)},e.prototype._readRawVisibleRangesFrom=function(e,t,n,i,o,r,s){var a=v.createRange();try{var c=0,u=e.children.length-1;if(c>u)return null;t=Math.min(u,Math.max(c,t)),i=Math.min(u,Math.max(c,i)),t!==i&&i>0&&0===o&&(i--,o=Number.MAX_VALUE);var l=e.children[t].firstChild,d=e.children[i].firstChild;if(!l||!d)return null;n=Math.min(l.textContent.length,Math.max(0,n)),o=Math.min(d.textContent.length,Math.max(0,o)),a.setStart(l,n),a.setEnd(d,o);var h=a.getClientRects();return 0===h.length?null:this._createRawVisibleRangesFromClientRects(h,r)}catch(p){return null}finally{v.detachRange(a,s)}},e.prototype._createRawVisibleRangesFromClientRects=function(e,t){for(var n=[],i=0,r=e.length;r>i;i++){var s=e[i];n.push(new o.HorizontalRange(Math.max(0,s.left-t),s.width))}return n},e.prototype.getColumnOfNodeOffset=function(e,t,n){for(var i=-1;t;)t=t.previousSibling,i++;var o=this._lineParts.getParts();if(i>=o.length)return this._context.configuration.editor.stopRenderingLineAfter;if(0===n)return o[i].startIndex+1;var r,s,a=o[i].startIndex;i+1<o.length?(r=o[i+1].startIndex,s=this._charOffsetInPart[r-1]+this._charOffsetInPart[r]):(r=this._context.model.getLineMaxColumn(e)-1,s=this._charOffsetInPart[r]);var c=a,u=r;-1!==this._context.configuration.editor.stopRenderingLineAfter&&(u=Math.min(this._context.configuration.editor.stopRenderingLineAfter-1,r));for(var l,d;u>c;){var h=Math.floor((c+u)/2),p=this._charOffsetInPart[h];l=h===r?Number.MAX_VALUE:h+1===r?s:this._charOffsetInPart[h+1],d=h===a?Number.MIN_VALUE:this._charOffsetInPart[h-1];var f=(d+p)/2,m=(p+l)/2;if(n>f&&m>=n)return h+1;f>=n?u=h-1:c=h+1}return c+1},e}();t.ViewLine=p;var f=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype._createRawVisibleRangesFromClientRects=function(e,t){for(var n=screen.logicalXDPI/screen.deviceXDPI,i=[],r=0,s=e.length;s>r;r++){var a=e[r];i[r]=new o.HorizontalRange(Math.max(0,a.left*n-t),a.width*n)}return i},t}(p),m=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype._readVisibleRangesForRange=function(t,n,i,o){var r=e.prototype._readVisibleRangesForRange.call(this,t,n,i,o);if(this._context.configuration.editor.fontLigatures&&1===r.length&&n>1&&n===this._charOffsetInPart.length){var s=this._getReadingTarget().lastChild.getBoundingClientRect(),a=s.right-i;return t===n?(r[0].left=a,r[0].width=0):r[0].width=a-r[0].left,r}if(!r||0===r.length||t===n||1===t&&n===this._charOffsetInPart.length)return r;var c=this._readRawVisibleRangesForPosition(n-1,i,o),u=this._readRawVisibleRangesForPosition(n,i,o);if(c&&c.length>0&&u&&u.length>0){var l=c[0],d=u[0],h=l.left<=d.left,p=r[r.length-1];h&&p.left<d.left&&(p.width=d.left-p.left)}return r},t}(p),v=function(){function e(){}return e.createRange=function(){return e._handyReadyRange||(e._handyReadyRange=document.createRange()),e._handyReadyRange},e.detachRange=function(e,t){e.selectNodeContents(t)},e}();t.createLine=function(){return window.screen&&window.screen.deviceXDPI&&(navigator.userAgent.indexOf("Trident/6.0")>=0||navigator.userAgent.indexOf("Trident/5.0")>=0)?l:n.isWebKit?d:h}()}),define("vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl",["require","exports","vs/base/browser/browser","vs/base/browser/styleMutator","vs/editor/common/editorCommon"],function(e,t,n,i,o){"use strict";function r(e,t){return e.startLineNumber===t.startLineNumber&&e.endLineNumber===t.endLineNumber&&e.forceHeight===t.forceHeight&&e.color===t.color&&e.position===t.position}function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;i>n;n++)if(!r(e[n],t[n]))return!1;return!0}var a=function(){function e(e,t,i,o,r,s,a){this._canvasLeftOffset=e,this._minimumHeight=r,this._maximumHeight=s,this._getVerticalOffsetForLine=a,this._zones=[],this._renderedZones=[],this._useDarkColor=!1,this._domNode=document.createElement("canvas"),this._domNode.className=t,this._domNode.style.position="absolute",n.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._width=0,this._height=0,this._outerHeight=i,this._lineHeight=o,this._lanesCount=3}return e.prototype.dispose=function(){this._zones=[]},e.prototype.setLayout=function(e,t){i.StyleMutator.setTop(this._domNode,e.top),i.StyleMutator.setRight(this._domNode,e.right),this._width===e.width&&this._height===e.height||(this._width=e.width,this._height=e.height,this._domNode.width=this._width,this._domNode.height=this._height,t&&this.render(!0))},e.prototype.getLanesCount=function(){return this._lanesCount},e.prototype.setLanesCount=function(e,t){this._lanesCount=e,t&&this.render(!0)},e.prototype.setUseDarkColor=function(e,t){this._useDarkColor=e,t&&this.render(!0)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.setScrollHeight=function(e,t){this._outerHeight=e,t&&this.render(!0)},e.prototype.setLineHeight=function(e,t){this._lineHeight=e,t&&this.render(!0)},e.prototype.setZones=function(e,t){this._zones=e,t&&this.render(!1)},e.prototype._insertZone=function(e,t,n,i,o,r){var s=Math.floor((t+n)/2),a=n-s;a>o/2&&(a=o/2),i/2>a&&(a=i/2),0>s-a&&(s=a),s+a>this._height&&(s=this._height-a),e[r]=e[r]||[],e[r].push({from:s-a,to:s+a})},e.prototype._getColorForZone=function(e){return this._useDarkColor?e.darkColor:e.color},e.prototype._renderVerticalPatch=function(e,t,n,i,o){var r,s,a,c,u,l,d,h={};for(r=0,s=this._zones.length;s>r;r++)if(a=this._zones[r],a.position&n)if(c=this._getVerticalOffsetForLine(a.startLineNumber),u=this._getVerticalOffsetForLine(a.endLineNumber)+this._lineHeight,c*=t,u*=t,a.forceHeight)u=c+a.forceHeight,this._insertZone(h,c,u,a.forceHeight,a.forceHeight,this._getColorForZone(a));else if(l=a.endLineNumber-a.startLineNumber+1,d=l*this._maximumHeight,u-c>d)for(var p=a.startLineNumber;p<=a.endLineNumber;p++)c=this._getVerticalOffsetForLine(p),u=c+this._lineHeight,c*=t,u*=t,this._insertZone(h,c,u,this._minimumHeight,this._maximumHeight,this._getColorForZone(a));else this._insertZone(h,c,u,this._minimumHeight,d,this._getColorForZone(a));var f,m,v,g,y=function(e,t){return e.from-t.from};for(f in h)if(h.hasOwnProperty(f)){for(m=h[f],m.sort(y),v=m[0].from,g=m[0].to,e.fillStyle=f,r=1,s=m.length;s>r;r++)g>=m[r].from?g=Math.max(g,m[r].to):(e.fillRect(i,v,o,g-v),v=m[r].from,g=m[r].to);e.fillRect(i,v,o,g-v)}},e.prototype.render=function(t){if(0===this._outerHeight)return!1;if(!e.hasCanvas)return!1;var n=t||!s(this._renderedZones,this._zones);if(n){var i=this._height/this._outerHeight,o=this._domNode.getContext("2d");o.clearRect(0,0,this._width,this._height);var r=this._width-this._canvasLeftOffset;this._lanesCount>=3?this._renderThreeLanes(o,i,r):2===this._lanesCount?this._renderTwoLanes(o,i,r):1===this._lanesCount&&this._renderOneLane(o,i,r)}return this._renderedZones=this._zones,n},e.prototype._renderOneLane=function(e,t,n){this._renderVerticalPatch(e,t,o.OverviewRulerLane.Left|o.OverviewRulerLane.Center|o.OverviewRulerLane.Right,this._canvasLeftOffset,n)},e.prototype._renderTwoLanes=function(e,t,n){var i=Math.floor(n/2),r=n-i,s=this._canvasLeftOffset,a=this._canvasLeftOffset+i;this._renderVerticalPatch(e,t,o.OverviewRulerLane.Left|o.OverviewRulerLane.Center,s,i),this._renderVerticalPatch(e,t,o.OverviewRulerLane.Right,a,r)},e.prototype._renderThreeLanes=function(e,t,n){var i=Math.floor(n/3),r=Math.floor(n/3),s=n-i-r,a=this._canvasLeftOffset,c=this._canvasLeftOffset+i,u=this._canvasLeftOffset+i+s;this._renderVerticalPatch(e,t,o.OverviewRulerLane.Left,a,i),this._renderVerticalPatch(e,t,o.OverviewRulerLane.Center,c,s),this._renderVerticalPatch(e,t,o.OverviewRulerLane.Right,u,r)},e.hasCanvas=-1===window.navigator.userAgent.indexOf("MSIE 8"),e}();t.OverviewRulerImpl=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/controller/textAreaState",["require","exports","vs/base/common/strings","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i,o){"use strict";function r(e){return e===s.IENarrator?u.EMPTY:a?d.EMPTY:l.EMPTY}!function(e){e[e.IENarrator=0]="IENarrator",e[e.NVDA=1]="NVDA"}(t.TextAreaStrategy||(t.TextAreaStrategy={}));var s=t.TextAreaStrategy,a=!1;t.createTextAreaState=r;var c=function(){function e(e,t,n,i,o){this.previousState=e?e.shallowClone():null,this.value=t,this.selectionStart=n,this.selectionEnd=i,this.isInOverwriteMode=o}return e.prototype.getSelectionStart=function(){return this.selectionStart},e.prototype.getValue=function(){return this.value},e.prototype.applyToTextArea=function(e,t,n){t.getValue()!==this.value&&t.setValue(e,this.value),n&&t.setSelectionRange(this.selectionStart,this.selectionEnd)},e.prototype.deduceInput=function(){if(!this.previousState)return{text:"",replaceCharCnt:0};var e=this.previousState.value,t=this.previousState.selectionStart,i=this.previousState.selectionEnd,o=this.value,r=this.selectionStart,s=this.selectionEnd,a=e.substring(i),c=o.substring(s),u=n.commonSuffixLength(a,c);o=o.substring(0,o.length-u),e=e.substring(0,e.length-u);var l=e.substring(0,t),d=o.substring(0,r),h=n.commonPrefixLength(l,d);if(o=o.substring(h),e=e.substring(h),r-=h,t-=h,s-=h,i-=h,r===s){if(e===o&&0===t&&i===e.length&&r===o.length&&-1===o.indexOf("\n"))return{text:"",replaceCharCnt:0};var p=l.length-h;return{text:o,replaceCharCnt:p}}var f=i-t;return{text:o,replaceCharCnt:f}},e}();t.TextAreaState=c;var u=function(e){function t(t,n,i,o,r,s){e.call(this,t,n,i,o,r),this.selectionToken=s}return __extends(t,e),t.prototype.shallowClone=function(){return new t(null,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode,this.selectionToken)},t.prototype.toEmpty=function(){return t.EMPTY},t.prototype.toString=function(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+", isInOverwriteMode: "+this.isInOverwriteMode+", selectionToken: "+this.selectionToken+"]"},t.prototype.toStrategy=function(e){return e===s.IENarrator?this:a?new d(this.previousState,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode):new l(this.previousState,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode)},t.prototype.equals=function(e){return e instanceof t?this.value===e.value&&this.selectionStart===e.selectionStart&&this.selectionEnd===e.selectionEnd&&this.isInOverwriteMode===e.isInOverwriteMode&&this.selectionToken===e.selectionToken:!1},t.prototype.fromTextArea=function(e){return new t(this,e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),e.isInOverwriteMode(),this.selectionToken)},t.prototype.fromEditorSelection=function(e,n){var r=100,s=0,a=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,l=n.endColumn,d=e.getLineMaxColumn(u);n.isEmpty()&&this.selectionToken!==a&&(c=1,l=d);var h="",p=Math.max(1,a-s);a>p&&(h=e.getValueInRange(new i.Range(p,1,a,1),o.EndOfLinePreference.LF)),h+=e.getValueInRange(new i.Range(a,1,a,c),o.EndOfLinePreference.LF),h.length>r&&(h=h.substring(h.length-r,h.length));var f="",m=Math.min(u+s,e.getLineCount());f+=e.getValueInRange(new i.Range(u,l,u,d),o.EndOfLinePreference.LF),m>u&&(f="\n"+e.getValueInRange(new i.Range(u+1,1,m,e.getLineMaxColumn(m)),o.EndOfLinePreference.LF)),f.length>r&&(f=f.substring(0,r));var v=e.getValueInRange(new i.Range(a,c,u,l),o.EndOfLinePreference.LF);return v.length>2*r&&(v=v.substring(0,r)+String.fromCharCode(8230)+v.substring(v.length-r,v.length)),new t(this,h+v+f,h.length,h.length+v.length,!1,a)},t.prototype.fromText=function(e){return new t(this,e,0,e.length,!1,0)},t.prototype.resetSelection=function(){return new t(this.previousState,this.value,this.value.length,this.value.length,this.isInOverwriteMode,this.selectionToken)},t.EMPTY=new t(null,"",0,0,!1,0),t}(c);t.IENarratorTextAreaState=u;var l=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.shallowClone=function(){return new t(null,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode)},t.prototype.toEmpty=function(){return t.EMPTY},t.prototype.toString=function(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+", isInOverwriteMode: "+this.isInOverwriteMode+"]"},t.prototype.toStrategy=function(e){return e===s.NVDA?this:new u(this.previousState,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode,0)},t.prototype.equals=function(e){return e instanceof t?this.value===e.value&&this.selectionStart===e.selectionStart&&this.selectionEnd===e.selectionEnd&&this.isInOverwriteMode===e.isInOverwriteMode:!1},t.prototype.fromTextArea=function(e){return new t(this,e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),e.isInOverwriteMode())},t._getPageOfLine=function(e){return Math.floor((e-1)/t._LINES_PER_PAGE)},t._getRangeForPage=function(e){var n=e*t._LINES_PER_PAGE,o=n+1,r=n+t._LINES_PER_PAGE;return new i.Range(o,1,r,Number.MAX_VALUE)},t.prototype.fromEditorSelection=function(e,n){var r=t._getPageOfLine(n.startLineNumber),s=t._getRangeForPage(r),a=t._getPageOfLine(n.endLineNumber),c=t._getRangeForPage(a),u=s.intersectRanges(new i.Range(1,1,n.startLineNumber,n.startColumn)),l=e.getValueInRange(u,o.EndOfLinePreference.LF),d=e.getLineCount(),h=e.getLineMaxColumn(d),p=c.intersectRanges(new i.Range(n.endLineNumber,n.endColumn,d,h)),f=e.getValueInRange(p,o.EndOfLinePreference.LF),m=null;if(a>=r)m=e.getValueInRange(n,o.EndOfLinePreference.LF);else{var v=s.intersectRanges(n),g=c.intersectRanges(n);m=e.getValueInRange(v,o.EndOfLinePreference.LF)+String.fromCharCode(8230)+e.getValueInRange(g,o.EndOfLinePreference.LF)}return new t(this,l+m+f,l.length,l.length+m.length,!1)},t.prototype.fromText=function(e){return new t(this,e,0,e.length,!1)},t.prototype.resetSelection=function(){return new t(this.previousState,this.value,this.value.length,this.value.length,this.isInOverwriteMode)},t.EMPTY=new t(null,"",0,0,!1),t._LINES_PER_PAGE=10,t}(c);t.NVDAPagedTextAreaState=l;var d=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.shallowClone=function(){return new t(null,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode)},t.prototype.toEmpty=function(){return t.EMPTY},t.prototype.toString=function(){return"[ <ENTIRE TEXT>, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+", isInOverwriteMode: "+this.isInOverwriteMode+"]"},t.prototype.toStrategy=function(e){return e===s.NVDA?this:new u(this.previousState,this.value,this.selectionStart,this.selectionEnd,this.isInOverwriteMode,0)},t.prototype.equals=function(e){return e instanceof t?this.value===e.value&&this.selectionStart===e.selectionStart&&this.selectionEnd===e.selectionEnd&&this.isInOverwriteMode===e.isInOverwriteMode:!1},t.prototype.fromTextArea=function(e){return new t(this,e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),e.isInOverwriteMode())},t.prototype.fromEditorSelection=function(e,n){var r=e.getValueInRange(new i.Range(1,1,n.startLineNumber,n.startColumn),o.EndOfLinePreference.LF),s=e.getValueInRange(n,o.EndOfLinePreference.LF),a=e.getLineCount(),c=e.getLineMaxColumn(a),u=e.getValueInRange(new i.Range(n.endLineNumber,n.endColumn,a,c),o.EndOfLinePreference.LF);return new t(this,r+s+u,r.length,r.length+s.length,!1)},t.prototype.fromText=function(e){return new t(this,e,0,e.length,!1)},t.prototype.resetSelection=function(){return new t(this.previousState,this.value,this.value.length,this.value.length,this.isInOverwriteMode)},t.EMPTY=new t(null,"",0,0,!1),t}(c);t.NVDAFullTextAreaState=d}),define("vs/editor/common/core/editorState",["require","exports","vs/base/common/strings","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){var o=this;this.flags=t,t.forEach(function(t){switch(t){case i.CodeEditorStateFlag.Value:var r=e.getModel();o.modelVersionId=r?n.format("{0}#{1}",r.getAssociatedResource().toString(),r.getVersionId()):null;break;case i.CodeEditorStateFlag.Position:o.position=e.getPosition();break;case i.CodeEditorStateFlag.Selection:o.selection=e.getSelection();break;case i.CodeEditorStateFlag.Scroll:o.scrollLeft=e.getScrollLeft(),o.scrollTop=e.getScrollTop()}})}return e.prototype._equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.modelVersionId!==n.modelVersionId?!1:this.scrollLeft!==n.scrollLeft||this.scrollTop!==n.scrollTop?!1:!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position)?!1:!(!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection))},e.prototype.validate=function(t){return this._equals(new e(t,this.flags))},e}();t.EditorState=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/core/selection",["require","exports","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";var o=function(e){function t(t,n,i,o){e.call(this,t,n,i,o),this.selectionStartLineNumber=t,this.selectionStartColumn=n,this.positionLineNumber=i,this.positionColumn=o}return __extends(t,e),t.prototype.clone=function(){return new t(this.selectionStartLineNumber,this.selectionStartColumn,this.positionLineNumber,this.positionColumn)},t.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"},t.prototype.equalsSelection=function(e){return t.selectionsEqual(this,e)},t.prototype.getDirection=function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?i.SelectionDirection.LTR:i.SelectionDirection.RTL},t.prototype.setEndPosition=function(e,n){return this.getDirection()===i.SelectionDirection.LTR?new t(this.startLineNumber,this.startColumn,e,n):new t(e,n,this.startLineNumber,this.startColumn)},t.prototype.setStartPosition=function(e,n){return this.getDirection()===i.SelectionDirection.LTR?new t(e,n,this.endLineNumber,this.endColumn):new t(this.endLineNumber,this.endColumn,e,n)},t.createSelection=function(e,n,i,o){return new t(e,n,i,o)},t.liftSelection=function(e){return new t(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)},t.selectionsEqual=function(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn},t.selectionsArrEqual=function(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;i>n;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0},t.isISelection=function(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn},t.createWithDirection=function(e,n,o,r,s){return s===i.SelectionDirection.LTR?new t(e,n,o,r):new t(o,r,e,n)},t}(n.Range);t.Selection=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/commands/replaceCommand",["require","exports","vs/editor/common/core/selection"],function(e,t,n){"use strict";var i=function(){function e(e,t){this._range=e,this._text=t}return e.prototype.getText=function(){return this._text},e.prototype.getRange=function(){return this._range},e.prototype.setRange=function(e){this._range=e},e.prototype.getEditOperations=function(e,t){t.addEditOperation(this._range,this._text)},e.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),o=i[0].range;return new n.Selection(o.endLineNumber,o.endColumn,o.endLineNumber,o.endColumn)},e}();t.ReplaceCommand=i;var o=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),o=i[0].range;return new n.Selection(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn)},t}(i);t.ReplaceCommandWithoutChangingPosition=o;var r=function(e){function t(t,n,i,o){e.call(this,t,n),this._columnDeltaOffset=o,this._lineNumberDeltaOffset=i}return __extends(t,e),t.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),o=i[0].range;return new n.Selection(o.endLineNumber+this._lineNumberDeltaOffset,o.endColumn+this._columnDeltaOffset,o.endLineNumber+this._lineNumberDeltaOffset,o.endColumn+this._columnDeltaOffset)},t}(i);t.ReplaceCommandWithOffsetCursorState=r;var s=function(e){function t(t,n,i){e.call(this,t,n),this._initialSelection=i}return __extends(t,e),t.prototype.getEditOperations=function(t,n){e.prototype.getEditOperations.call(this,t,n),this._selectionId=n.trackSelection(this._initialSelection)},t.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},t}(i);t.ReplaceCommandThatPreservesSelection=s}),define("vs/editor/common/commands/surroundSelectionCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}return e.prototype.getEditOperations=function(e,t){t.addEditOperation(new n.Range(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addEditOperation(new n.Range(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),o=n[0].range,r=n[1].range;return new i.Selection(o.endLineNumber,o.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)},e}();t.SurroundSelectionCommand=o}),define("vs/editor/common/controller/cursorMoveHelper",["require","exports","vs/editor/common/core/selection"],function(e,t,n){"use strict";function i(e,t,n){var i=e.getLineContent(t).charCodeAt(n-1);return i>=55296&&56319>=i}function o(e,t,n){var i=e.getLineContent(t).charCodeAt(n-1);return i>=56320&&57343>=i}var r=function(){function e(e){this.configuration=e}return e.prototype.getLeftOfPosition=function(e,t,n){return n>e.getLineMinColumn(t)?n-=o(e,t,n-1)?2:1:t>1&&(t-=1,n=e.getLineMaxColumn(t)),{lineNumber:t,column:n}},e.prototype.getRightOfPosition=function(e,t,n){return n<e.getLineMaxColumn(t)?n+=i(e,t,n)?2:1:t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),{lineNumber:t,column:n}},e.prototype.getPositionUp=function(e,t,n,i,o,r){var s=this.visibleColumnFromColumn(e,t,n)+i;return t-=o,1>t?(t=1,n=r?e.getLineMinColumn(t):Math.min(e.getLineMaxColumn(t),n)):n=this.columnFromVisibleColumn(e,t,s),i=s-this.visibleColumnFromColumn(e,t,n),{lineNumber:t,column:n,leftoverVisibleColumns:i}},e.prototype.getPositionDown=function(e,t,n,i,o,r){var s=this.visibleColumnFromColumn(e,t,n)+i;t+=o;var a=e.getLineCount();return t>a?(t=a,n=r?e.getLineMaxColumn(t):Math.min(e.getLineMaxColumn(t),n)):n=this.columnFromVisibleColumn(e,t,s),i=s-this.visibleColumnFromColumn(e,t,n),{lineNumber:t,column:n,leftoverVisibleColumns:i}},e.prototype.columnSelect=function(e,t,i,o,r){for(var s=Math.abs(o-t)+1,a=t>o,c=i>r,u=r>i,l=[],d=0;s>d;d++){var h=t+(a?-d:d),p=this.columnFromVisibleColumn(e,h,i),f=this.columnFromVisibleColumn(e,h,r),m=this.visibleColumnFromColumn(e,h,p),v=this.visibleColumnFromColumn(e,h,f);if(u){if(m>r)continue;if(i>v)continue}if(c){if(v>i)continue;if(r>m)continue}l.push(new n.Selection(h,p,h,f))}return{viewSelections:l,reversed:a}},e.prototype.getColumnAtBeginningOfLine=function(e,t,n){var i=e.getLineFirstNonWhitespaceColumn(t)||1,o=e.getLineMinColumn(t);return n=n!==o&&i>=n?o:i},e.prototype.getColumnAtEndOfLine=function(e,t,n){var i=e.getLineMaxColumn(t),o=e.getLineLastNonWhitespaceColumn(t)||i;return n=n!==i&&n>=o?i:o},e.prototype.visibleColumnFromColumn=function(t,n,i){return e.visibleColumnFromColumn(t,n,i,this.configuration.getIndentationOptions().tabSize)},e.visibleColumnFromColumn=function(t,n,i,o){return e.visibleColumnFromColumn2(t.getLineContent(n),i,o)},e.visibleColumnFromColumn2=function(t,n,i){for(var o=0,r=0;n-1>r;r++)o="	"===t.charAt(r)?e.nextTabColumn(o,i):o+1;return o},e.prototype.columnFromVisibleColumn=function(t,n,i){for(var o=t.getLineContent(n),r=-1,s=0,a=0;a<o.length&&i>=s;a++)r=s,s="	"===o.charAt(a)?e.nextTabColumn(s,this.configuration.getIndentationOptions().tabSize):s+1;s=Math.abs(i-s),r=Math.abs(i-r);var c;c=r>s?a+1:a;var u=t.getLineMinColumn(n);return u>c&&(c=u),c},e.nextTabColumn=function(e,t){return e+t-e%t},e.prevTabColumn=function(e,t){return e-1-(e-1)%t},e}();t.CursorMoveHelper=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/editorActionEnablement",["require","exports","vs/base/common/lifecycle","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";function o(e,t,n){return new s([new c(t,e),new u(t,e,n)])}!function(e){e[e.TextFocus=1]="TextFocus",e[e.WidgetFocus=2]="WidgetFocus",e[e.Writeable=4]="Writeable",e[e.UpdateOnModelChange=8]="UpdateOnModelChange",e[e.UpdateOnConfigurationChange=16]="UpdateOnConfigurationChange",e[e.ShowInContextMenu=32]="ShowInContextMenu",e[e.UpdateOnCursorPositionChange=64]="UpdateOnCursorPositionChange"}(t.Behaviour||(t.Behaviour={}));var r=t.Behaviour;t.createActionEnablement=o;var s=function(){function e(e){this._delegates=e}return e.prototype.value=function(){return this._delegates.every(function(e){return e.value()})},e.prototype.reset=function(){this._delegates.forEach(function(e){e instanceof a&&e.reset()})},e.prototype.dispose=function(){this._delegates.forEach(function(e){return e.dispose()})},e}(),a=function(){function e(){this._value=null}return e.prototype.reset=function(){this._value=null},e.prototype.dispose=function(){},e.prototype.value=function(){return null===this._value&&(this._value=this._computeValue()),this._value},e.prototype._computeValue=function(){return!1},e}(),c=function(e){function t(t,n){var o=this;e.call(this),this._behaviour=t,this.editor=n,this.hasTextFocus=!1,this.hasWidgetFocus=!1,this.isReadOnly=!1,
this._callOnDispose=[],this._behaviour&r.TextFocus&&(this._callOnDispose.push(this.editor.addListener2(i.EventType.EditorTextFocus,function(){return o._updateTextFocus(!0)})),this._callOnDispose.push(this.editor.addListener2(i.EventType.EditorTextBlur,function(){return o._updateTextFocus(!1)}))),this._behaviour&r.WidgetFocus&&(this._callOnDispose.push(this.editor.addListener2(i.EventType.EditorFocus,function(){return o._updateWidgetFocus(!0)})),this._callOnDispose.push(this.editor.addListener2(i.EventType.EditorBlur,function(){return o._updateWidgetFocus(!1)}))),this._behaviour&r.Writeable&&this._callOnDispose.push(this.editor.addListener2(i.EventType.ConfigurationChanged,function(e){return o._update()}))}return __extends(t,e),t.prototype._updateTextFocus=function(e){this.hasTextFocus=e,this.reset()},t.prototype._updateWidgetFocus=function(e){this.hasWidgetFocus=e,this.reset()},t.prototype._update=function(){this.isReadOnly=this.editor.getConfiguration().readOnly,this.reset()},t.prototype.dispose=function(){e.prototype.dispose.call(this),n.disposeAll(this._callOnDispose)},t.prototype._computeValue=function(){return this._behaviour&r.TextFocus&&!this.hasTextFocus?!1:this._behaviour&r.WidgetFocus&&!this.hasWidgetFocus?!1:!(this._behaviour&r.Writeable&&this.isReadOnly)},t}(a),u=function(e){function t(t,n,o){var s=this;e.call(this),this.editor=n,this._action=o,this._callOnDispose=[],t&r.UpdateOnModelChange&&(this._callOnDispose.push(this.editor.addListener(i.EventType.ModelChanged,function(){return s.reset()})),this._callOnDispose.push(this.editor.addListener(i.EventType.ModelModeChanged,function(){return s.reset()})),this._callOnDispose.push(this.editor.addListener(i.EventType.ModelModeSupportChanged,function(){return s.reset()}))),t&r.UpdateOnCursorPositionChange&&this._callOnDispose.push(this.editor.addListener(i.EventType.CursorPositionChanged,function(){return s.reset()}))}return __extends(t,e),t.prototype._computeValue=function(){return this.editor.getModel()&&this._action.isSupported()?!!this._action.getEnablementState():!1},t}(a)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/editorAction",["require","exports","vs/base/common/actions","vs/base/common/strings","vs/base/common/winjs.base","vs/editor/common/editorActionEnablement"],function(e,t,n,i,o,r){"use strict";function s(e,t,n){if(e.getLineContent().length<=t)return!1;for(var o=e.findIndexOfOffset(t),r=e.getTokenType(o),s=0,a=n.length;a>s;s++)if(""===n[s]){if(""===r)return!0}else if(i.startsWith(r,n[s]))return!0;return!1}var a=r.Behaviour.TextFocus|r.Behaviour.Writeable|r.Behaviour.UpdateOnModelChange,c=function(e){function t(t,n,i){void 0===i&&(i=a),e.call(this,t.id),this.editor=n,this._descriptor=t,this.label=t.label||"",this._enablementState=r.createActionEnablement(n,i,this),this._shouldShowInContextMenu=!!(i&r.Behaviour.ShowInContextMenu),this._supportsReadonly=!(i&r.Behaviour.Writeable)}return __extends(t,e),t.prototype.getId=function(){return this.id},t.prototype.dispose=function(){this._enablementState.dispose(),e.prototype.dispose.call(this)},t.prototype.getGroupId=function(){return this.id},t.prototype.shouldShowInContextMenu=function(){return this._shouldShowInContextMenu},t.prototype.getDescriptor=function(){return this._descriptor},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enablementState.value()},set:function(e){var t=new Error;console.log("setting EditorAction.enabled is UNCOOL. Use resetEnablementState and getEnablementState"),console.log(t.stack)},enumerable:!0,configurable:!0}),t.prototype.resetEnablementState=function(){this._enablementState.reset()},t.prototype.isSupported=function(){if(!this._supportsReadonly){if(this.editor.getConfiguration().readOnly)return!1;var e=this.editor.getModel();if(e&&e.hasEditableRange())return!1}return!0},t.prototype.getEnablementState=function(){return!0},t}(n.Action);t.EditorAction=c;var u=function(e){function t(t,n,i){e.call(this,t,n),this._handlerId=i}return __extends(t,e),t.prototype.run=function(){return this.editor.trigger(this.getId(),this._handlerId,null),o.TPromise.as(!0)},t}(c);t.HandlerEditorAction=u;var l=function(e){function t(n,i){var o=n.enablement||{};e.call(this,{id:n.id,label:n.label},i,t._transformBehaviour(o,n.contextMenuGroupId)),this._contextMenuGroupId=n.contextMenuGroupId,this._run=n.run,this._tokensAtPosition=o.tokensAtPosition,this._wordAtPosition=o.wordAtPosition}return __extends(t,e),t._transformBehaviour=function(e,t){var n=0;return t?n|=r.Behaviour.ShowInContextMenu:e.textFocus&&(n|=r.Behaviour.TextFocus),e.widgetFocus&&(n|=r.Behaviour.WidgetFocus),e.writeableEditor&&(n|=r.Behaviour.Writeable),"undefined"!=typeof e.tokensAtPosition&&(n|=r.Behaviour.UpdateOnCursorPositionChange),"undefined"!=typeof e.wordAtPosition&&(n|=r.Behaviour.UpdateOnCursorPositionChange),n},t.prototype.getGroupId=function(){return this._contextMenuGroupId},t.prototype.run=function(){return o.TPromise.as(this._run(this.editor))},t.prototype.getEnablementState=function(){return this._getEnablementOnTokens()&&this._getEnablementOnWord()},t.prototype._getEnablementOnTokens=function(){if(!this._tokensAtPosition)return!0;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber),i=t.column-1;return s(n,i,this._tokensAtPosition)},t.prototype._getEnablementOnWord=function(){if(!this._wordAtPosition)return!0;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getWordAtPosition(t);return!!n},t}(c);t.DynamicEditorAction=l}),define("vs/editor/common/model/modelLine",["require","exports","vs/base/common/strings","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";function o(e){return"number"==typeof e[0]}function r(e,t,n){if(0===n)return null;if(!t||0===t.length)return null;if(1===t.length)if(o(t)){if(0===t[0])return null}else if(0===t[0].startIndex&&""===t[0].type)return null;return new f(e,t)}function s(e,t){return t&&0!==t.length?1===t.length&&0===t[0].startIndex?t[0].mode===e?null:new y(t[0].mode):new _(t):null}var a,c={adjust:function(){},finish:function(){}},u={adjustDelta:function(){},adjustSet:function(){},finish:function(){}};!function(e){e[e.MarkerDefined=0]="MarkerDefined",e[e.ForceMove=1]="ForceMove",e[e.ForceStay=2]="ForceStay"}(a||(a={}));var l=function(){function e(e,t){this.lineNumber=e,this.text=t,this.isInvalid=!1}return e.prototype.setState=function(e){this._state=e},e.prototype.getState=function(){return this._state||null},e.prototype._setModeTransitions=function(e,t){var n=s(e,t);if(null===n){if("undefined"==typeof this._modeTransitions)return;return void(this._modeTransitions=null)}this._modeTransitions=n},e.prototype.getModeTransitions=function(){return this._modeTransitions?this._modeTransitions:g.INSTANCE},e.prototype.setTokens=function(e,t,n,i){this._setLineTokens(e,t),this._setModeTransitions(n,i)},e.prototype._setLineTokens=function(e,t){var n=r(e,t,this.text.length);if(null===n){if("undefined"==typeof this._lineTokens)return;return void(this._lineTokens=null)}this._lineTokens=n},e.prototype.getTokens=function(){return this._lineTokens?this._lineTokens:0===this.text.length?m.INSTANCE:v.INSTANCE},e.prototype._createTokensAdjuster=function(){if(!this._lineTokens)return c;var e=this._lineTokens,t=i.LineTokensBinaryEncoding,n=e.getBinaryEncodedTokens(),o=n.length,r=0,s=0,a=function(e,i,a){for(var c=a-1;e>s&&o>r;){if(s>0&&0!==i){var u=n[r]/t.TYPE_OFFSET&t.TYPE_MASK,l=Math.max(c,s+i),d=u*t.TYPE_OFFSET+l*t.START_INDEX_OFFSET;if(0>i)for(;r>0;){var h=n[r-1]/t.START_INDEX_OFFSET&t.START_INDEX_MASK;if(!(h>=l))break;n.splice(r-1,1),o--,r--}n[r]=d}r++,o>r&&(s=n[r]/t.START_INDEX_OFFSET&t.START_INDEX_MASK)}},u=function(e,t){a(Number.MAX_VALUE,e,1)};return{adjust:a,finish:u}},e.prototype._setText=function(e){if(this.text=e,this._lineTokens){for(var t=i.LineTokensBinaryEncoding,n=this._lineTokens.getBinaryEncodedTokensMap(),o=this._lineTokens.getBinaryEncodedTokens(),r=this.text.length;o.length>0;){var s=o[o.length-1]/t.START_INDEX_OFFSET&t.START_INDEX_MASK;if(r>s)break;o.pop()}this._setLineTokens(n,o)}},e.prototype._createMarkersAdjuster=function(t){var n=this;if(!this._markers)return u;if(0===this._markers.length)return u;this._markers.sort(e._compareMarkers);var i=this._markers,o=i.length,r=0,s=i[r],c=function(e,t){return s.column<e?!0:s.column>e?!1:t===a.ForceMove?!1:t===a.ForceStay?!0:s.stickToPreviousCharacter},l=function(e,a,u,l){for(;o>r&&c(e,l);){if(0!==a){var d=Math.max(u,s.column+a);s.column!==d&&(t[s.id]=!0,s.oldLineNumber=s.oldLineNumber||n.lineNumber,s.oldColumn=s.oldColumn||s.column,s.column=d)}r++,o>r&&(s=i[r])}},d=function(e,a,u){for(;o>r&&c(e,u);)s.column!==a&&(t[s.id]=!0,s.oldLineNumber=s.oldLineNumber||n.lineNumber,s.oldColumn=s.oldColumn||s.column,s.column=a),r++,o>r&&(s=i[r])},h=function(e,t){l(Number.MAX_VALUE,e,1,a.MarkerDefined)};return{adjustDelta:l,adjustSet:d,finish:h}},e.prototype.applyEdits=function(e,t){for(var n=0,i=this.text,o=this._createTokensAdjuster(),r=this._createMarkersAdjuster(e),s=0,c=t.length;c>s;s++){var u=t[s],l=n+u.startColumn,d=n+u.endColumn,h=d-l,p=u.text.length;o.adjust(u.startColumn-1,n,1),r.adjustDelta(u.startColumn,n,1,u.forceMoveMarkers?a.ForceMove:h>0?a.ForceStay:a.MarkerDefined);var f=Math.min(h,p);f>0&&(o.adjust(u.startColumn-1+f,n,l),u.forceMoveMarkers||r.adjustDelta(u.startColumn+f,n,l,u.forceMoveMarkers?a.ForceMove:h>p?a.ForceStay:a.MarkerDefined)),i=i.substring(0,l-1)+u.text+i.substring(d-1),n+=p-h,o.adjust(u.endColumn,n,l),r.adjustSet(u.endColumn,l+p,u.forceMoveMarkers?a.ForceMove:a.MarkerDefined)}return o.finish(n,i.length),r.finish(n,i.length),this._setText(i),n},e.prototype.split=function(t,n,i){var o=this.text.substring(0,n-1),r=this.text.substring(n-1),s=null;if(this._markers){this._markers.sort(e._compareMarkers);for(var a=0,c=this._markers.length;c>a;a++){var u=this._markers[a];if(u.column>n||u.column===n&&(i||!u.stickToPreviousCharacter)){var l=this._markers.slice(0,a);s=this._markers.slice(a),this._markers=l;break}}if(s)for(var a=0,c=s.length;c>a;a++){var u=s[a];t[u.id]=!0,u.oldLineNumber=u.oldLineNumber||this.lineNumber,u.oldColumn=u.oldColumn||u.column,u.column-=n-1}}this._setText(o);var d=new e(this.lineNumber+1,r);return s&&d.addMarkers(s),d},e.prototype.append=function(e,t){var n=this.text.length;this._setText(this.text+t.text);var o=t._lineTokens;if(o){var r=o.getBinaryEncodedTokens();if(n>0)for(var s=i.LineTokensBinaryEncoding,a=0,c=r.length;c>a;a++){var u=r[a],l=u/s.START_INDEX_OFFSET&s.START_INDEX_MASK,d=u/s.TYPE_OFFSET&s.TYPE_MASK,h=l+n,p=d*s.TYPE_OFFSET+h*s.START_INDEX_OFFSET;r[a]=p}var f=this._lineTokens;f?this._setLineTokens(f.getBinaryEncodedTokensMap(),f.getBinaryEncodedTokens().concat(r)):this._setLineTokens(o.getBinaryEncodedTokensMap(),r)}if(t._markers){for(var m=t._markers,a=0,c=m.length;c>a;a++){var v=m[a];e[v.id]=!0,v.oldLineNumber=v.oldLineNumber||t.lineNumber,v.oldColumn=v.oldColumn||v.column,v.column+=n}this.addMarkers(m)}},e.prototype.addMarker=function(e){e.line=this,this._markers?this._markers.push(e):this._markers=[e]},e.prototype.addMarkers=function(e){if(0!==e.length){var t,n;for(t=0,n=e.length;n>t;t++)e[t].line=this;this._markers?this._markers=this._markers.concat(e):this._markers=e.slice(0)}},e._compareMarkers=function(e,t){return e.column===t.column?(e.stickToPreviousCharacter?0:1)-(t.stickToPreviousCharacter?0:1):e.column-t.column},e.prototype.removeMarker=function(e){var t=this._indexOfMarkerId(e.id);t>=0&&this._markers.splice(t,1),e.line=null},e.prototype.removeMarkers=function(e){if(this._markers)for(var t=0,n=this._markers.length;n>t;t++){var i=this._markers[t];e[i.id]&&(i.line=null,this._markers.splice(t,1),n--,t--)}},e.prototype.getMarkers=function(){return this._markers?this._markers.slice(0):[]},e.prototype.updateLineNumber=function(e,t){if(this._markers){var n,i,o,r=this._markers;for(n=0,i=r.length;i>n;n++)o=r[n],e[o.id]=!0,o.oldLineNumber=o.oldLineNumber||this.lineNumber}this.lineNumber=t},e.prototype.deleteLine=function(e,t,n){if(this._markers){var i,o,r,s=this._markers;for(i=0,o=s.length;o>i;i++)r=s[i],e[r.id]=!0,r.oldColumn=r.oldColumn||r.column,r.oldLineNumber=r.oldLineNumber||n,r.column=t;return s}return[]},e.prototype._indexOfMarkerId=function(e){if(this._markers){var t,n,i=this._markers;for(t=0,n=i.length;n>t;t++)if(i[t].id===e)return t}return-1},e}();t.ModelLine=l;var d=i.LineTokensBinaryEncoding.getStartIndex,h=i.LineTokensBinaryEncoding.getType,p=i.LineTokensBinaryEncoding.findIndexOfOffset,f=function(){function e(e,t){this.map=e,o(t)?this._tokens=t:this._tokens=i.LineTokensBinaryEncoding.deflateArr(e,t)}return e.prototype.toString=function(){return i.LineTokensBinaryEncoding.inflateArr(this.map,this._tokens).toString()},e.prototype.getBinaryEncodedTokensMap=function(){return this.map},e.prototype.getBinaryEncodedTokens=function(){return this._tokens},e.prototype.getTokenCount=function(){return this._tokens.length},e.prototype.getTokenStartIndex=function(e){return d(this._tokens[e])},e.prototype.getTokenType=function(e){return h(this.map,this._tokens[e])},e.prototype.getTokenEndIndex=function(e,t){return e+1<this._tokens.length?d(this._tokens[e+1]):t},e.prototype.equals=function(e){return this===e},e.prototype.findIndexOfOffset=function(e){return p(this._tokens,e)},e}();t.LineTokens=f;var m=function(){function e(){}return e.prototype.getBinaryEncodedTokens=function(){return e.TOKENS},e.prototype.getBinaryEncodedTokensMap=function(){return null},e.prototype.getTokenCount=function(){return 0},e.prototype.getTokenStartIndex=function(e){return 0},e.prototype.getTokenType=function(e){return n.empty},e.prototype.getTokenEndIndex=function(e,t){return 0},e.prototype.equals=function(e){return e===this},e.prototype.findIndexOfOffset=function(e){return 0},e.INSTANCE=new e,e.TOKENS=[],e}(),v=function(){function e(){}return e.prototype.getBinaryEncodedTokensMap=function(){return null},e.prototype.getBinaryEncodedTokens=function(){return e.TOKENS},e.prototype.getTokenCount=function(){return 1},e.prototype.getTokenStartIndex=function(e){return 0},e.prototype.getTokenType=function(e){return n.empty},e.prototype.getTokenEndIndex=function(e,t){return t},e.prototype.equals=function(e){return this===e},e.prototype.findIndexOfOffset=function(e){return 0},e.INSTANCE=new e,e.TOKENS=[0],e}();t.DefaultLineTokens=v;var g=function(){function e(){}return e.prototype.toArray=function(e){return[{startIndex:0,mode:e}]},e.INSTANCE=new e,e}(),y=function(){function e(e){this._mode=e}return e.prototype.toArray=function(e){return[{startIndex:0,mode:this._mode}]},e}(),_=function(){function e(e){this._modeTransitions=e}return e.prototype.toArray=function(e){return this._modeTransitions.slice(0)},e}()}),define("vs/editor/common/model/tokenIterator",["require","exports","vs/editor/common/editorCommon"],function(e,t,n){"use strict";var i=n.LineTokensBinaryEncoding.getStartIndex,o=n.LineTokensBinaryEncoding.inflate,r=function(){function e(e,t){this._model=e,this._currentLineNumber=t.lineNumber,this._currentTokenIndex=0,this._readLineTokens(this._currentLineNumber),this._next=null,this._prev=null;for(var n=t.column-1,o=Number.MAX_VALUE,r=this._currentTokens.length-1;r>=0;r--){if(i(this._currentTokens[r])<=n&&o>=n){this._currentTokenIndex=r,this._next=this._current(),this._prev=this._current();break}o=i(this._currentTokens[r])}}return e.prototype._readLineTokens=function(e){this._currentLineTokens=this._model.getLineTokens(e,!1),this._currentTokens=this._currentLineTokens.getBinaryEncodedTokens(),this._map=this._currentLineTokens.getBinaryEncodedTokensMap()},e.prototype._advanceNext=function(){if(this._prev=this._next,this._next=null,this._currentTokenIndex+1<this._currentTokens.length)this._currentTokenIndex++,this._next=this._current();else{for(;this._currentLineNumber+1<=this._model.getLineCount();)if(this._currentLineNumber++,this._readLineTokens(this._currentLineNumber),this._currentTokens.length>0){this._currentTokenIndex=0,this._next=this._current();break}null===this._next&&(this._readLineTokens(this._currentLineNumber),this._currentTokenIndex=this._currentTokens.length,this._advancePrev(),this._next=null)}},e.prototype._advancePrev=function(){if(this._next=this._prev,this._prev=null,this._currentTokenIndex>0)this._currentTokenIndex--,this._prev=this._current();else for(;this._currentLineNumber>1;)if(this._currentLineNumber--,this._readLineTokens(this._currentLineNumber),this._currentTokens.length>0){this._currentTokenIndex=this._currentTokens.length-1,this._prev=this._current();break}},e.prototype._current=function(){return{token:o(this._map,this._currentTokens[this._currentTokenIndex]),lineNumber:this._currentLineNumber,startColumn:i(this._currentTokens[this._currentTokenIndex])+1,endColumn:this._currentTokenIndex+1<this._currentTokens.length?i(this._currentTokens[this._currentTokenIndex+1])+1:this._model.getLineContent(this._currentLineNumber).length+1}},e.prototype.hasNext=function(){return null!==this._next},e.prototype.next=function(){var e=this._next;return this._advanceNext(),e},e.prototype.hasPrev=function(){return null!==this._prev},e.prototype.prev=function(){var e=this._prev;return this._advancePrev(),e},e.prototype._invalidate=function(){var e=function(){throw new Error("iteration isn't valid anymore")};this.hasNext=e,this.next=e,this.hasPrev=e,this.prev=e},e}();t.TokenIterator=r}),define("vs/editor/common/modes/languageFeatureRegistry",["require","exports","vs/base/common/arrays","vs/base/common/event","vs/editor/common/modes/languageSelector"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){this._clock=0,this._entries=[],this._onDidChange=new i.Emitter,this._supportName=e}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var n=this,i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),{dispose:function(){if(i){var e=n._entries.indexOf(i);e>=0&&(n._entries.splice(e,1),n._lastCandidate=void 0,n._onDidChange.fire(n._entries.length),i=void 0)}}}},e.prototype.has=function(e){return this.all(e).length>0},e.prototype.all=function(e){if(!e||e.isTooLargeForHavingAMode())return[];this._updateScores(e);for(var t=[],n=0,i=this._entries;n<i.length;n++){var o=i[n];o._score>0&&t.push(o.provider)}return e.getMode()&&e.getMode()[this._supportName]&&t.push(e.getMode()[this._supportName]),t},e.prototype.ordered=function(e){var t=[];return this._orderedForEach(e,function(e){return t.push(e.provider)}),t},e.prototype.orderedGroups=function(e){var t,n,i=[];return this._orderedForEach(e,function(e){t&&n===e._score?t.push(e.provider):(n=e._score,t=[e.provider],i.push(t))}),i},e.prototype._orderedForEach=function(t,i){if(t&&!t.isTooLargeForHavingAMode()){this._updateScores(t);var o,r=-1;t.getMode()&&t.getMode()[this._supportName]&&(o={selector:void 0,provider:t.getMode()[this._supportName],_score:.5,_time:-1},r=~n.binarySearch(this._entries,o,e._compareByScoreAndTime));for(var s=Math.max(r+1,this._entries.length),a=0;s>a;a++)if(a===r)i(o);else{var c=this._entries[a];c._score>0&&i(c)}}},e.prototype._updateScores=function(t){var n={uri:t.getAssociatedResource().toString(),language:t.getModeId()};if(!this._lastCandidate||this._lastCandidate.language!==n.language||this._lastCandidate.uri!==n.uri){this._lastCandidate=n;for(var i=0,r=this._entries;i<r.length;i++){var s=r[i];s._score=o.score(s.selector,t.getAssociatedResource(),t.getModeId())}this._entries.sort(e._compareByScoreAndTime)}},e._compareByScoreAndTime=function(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}),define("vs/editor/common/modes/supports/onEnter",["require","exports","vs/base/common/errors","vs/base/common/strings","vs/editor/common/core/position","vs/editor/common/modes","vs/editor/common/modes/supports"],function(e,t,n,i,o,r,s){"use strict";function a(e,t,i){var r,s=e.getMode().richEditSupport;if(s&&s.onEnter)try{r=s.onEnter.onEnter(e,new o.Position(t,i))}catch(a){n.onUnexpectedError(a)}return r}function c(e,t,n){var o=e.getLineContent(t),s=i.getLeadingWhitespace(o);s.length>n-1&&(s=s.substring(0,n-1));var c=a(e,t,n);return c?c.appendText||(c.indentAction===r.IndentAction.Indent||c.indentAction===r.IndentAction.IndentOutdent?c.appendText="	":c.appendText=""):c={indentAction:r.IndentAction.None,appendText:""},c.removeText&&(s=s.substring(0,s.length-1)),{enterAction:c,indentation:s}}var u=function(){function e(t,n){n=n||{},n.brackets=n.brackets||[["(",")"],["{","}"],["[","]"]],this._modeId=t,this._brackets=n.brackets.map(function(t){return{open:t[0],openRegExp:e._createOpenBracketRegExp(t[0]),close:t[1],closeRegExp:e._createCloseBracketRegExp(t[1])}}),this._regExpRules=n.regExpRules||[],this._indentationRules=n.indentationRules}return e.prototype.onEnter=function(e,t){var n=this,i=e.getLineContext(t.lineNumber);return s.handleEvent(i,t.column-1,function(i,o,r){return n._modeId===i.getId()?n._onEnter(e,t):i.richEditSupport&&i.richEditSupport.onEnter?i.richEditSupport.onEnter.onEnter(e,t):null})},e.prototype._onEnter=function(e,t){var n=e.getLineContent(t.lineNumber),i=n.substr(0,t.column-1),o=n.substr(t.column-1),r=1===t.lineNumber?"":e.getLineContent(t.lineNumber-1);return this._actualOnEnter(r,i,o)},e.prototype._actualOnEnter=function(t,n,i){for(var o=0,r=this._regExpRules.length;r>o;o++){var s=this._regExpRules[o];if(s.beforeText.test(n)){if(!s.afterText)return s.action;if(s.afterText.test(i))return s.action}}if(n.length>0&&i.length>0)for(var o=0,r=this._brackets.length;r>o;o++){var a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return e._INDENT_OUTDENT}if(this._indentationRules){if(this._indentationRules.increaseIndentPattern&&this._indentationRules.increaseIndentPattern.test(n))return e._INDENT;if(this._indentationRules.indentNextLinePattern&&this._indentationRules.indentNextLinePattern.test(n))return e._INDENT;if(/^\s/.test(n)){if(this._indentationRules.decreaseIndentPattern&&this._indentationRules.decreaseIndentPattern.test(i))return e._OUTDENT;if(this._indentationRules.indentNextLinePattern&&this._indentationRules.indentNextLinePattern.test(t))return e._OUTDENT}}if(n.length>0)for(var o=0,r=this._brackets.length;r>o;o++){var a=this._brackets[o];if(a.openRegExp.test(n))return e._INDENT}return null},e._createOpenBracketRegExp=function(t){var n=i.escapeRegExpCharacters(t);return/\B/.test(n.charAt(0))||(n="\\b"+n),n+="\\s*$",e._safeRegExp(n)},e._createCloseBracketRegExp=function(t){var n=i.escapeRegExpCharacters(t);return/\B/.test(n.charAt(n.length-1))||(n+="\\b"),n="^\\s*"+n,e._safeRegExp(n)},e._safeRegExp=function(e){try{return new RegExp(e)}catch(t){return n.onUnexpectedError(t),null}},e._INDENT={indentAction:r.IndentAction.Indent},e._INDENT_OUTDENT={indentAction:r.IndentAction.IndentOutdent},e._OUTDENT={indentAction:r.IndentAction.Outdent},e}();t.OnEnterSupport=u,t.getRawEnterActionAtPosition=a,t.getEnterActionAtPosition=c}),define("vs/editor/common/commands/shiftCommand",["require","exports","vs/base/common/strings","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/modes/supports/onEnter"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t){this._opts=t,this._selection=e,this._useLastEditRangeForCursorEndPosition=!1}return e.unshiftIndentCount=function(e,t,n){var o=i.CursorMoveHelper.visibleColumnFromColumn2(e,t,n),r=i.CursorMoveHelper.prevTabColumn(o,n);return r/n},e.shiftIndentCount=function(e,t,n){var o=i.CursorMoveHelper.visibleColumnFromColumn2(e,t,n),r=i.CursorMoveHelper.nextTabColumn(o,n);return r/n},e.prototype.getEditOperations=function(t,r){var a=this._selection.startLineNumber,c=this._selection.endLineNumber,u=" ".charCodeAt(0);1===this._selection.endColumn&&a!==c&&(c-=1);var l,d=this._opts.tabSize,h=this._opts.oneIndent,p=a===c,f=["",h];this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(a))&&(this._useLastEditRangeForCursorEndPosition=!0);var m=0,v=0;for(l=a;c>=l;l++,m=v){v=0;var g=t.getLineContent(l),y=n.firstNonWhitespaceIndex(g);if((!this._opts.isUnshift||0!==g.length&&0!==y)&&(p||this._opts.isUnshift||0!==g.length)){if(-1===y&&(y=g.length),l>1){var _=i.CursorMoveHelper.visibleColumnFromColumn2(g,y+1,d);if(_%d!==0){var b=s.getRawEnterActionAtPosition(t,l-1,t.getLineMaxColumn(l-1));if(b){if(v=m,b.appendText)for(var S=0,E=b.appendText.length;E>S&&d>v&&b.appendText.charCodeAt(S)===u;S++)v++;b.removeText&&(v=Math.max(0,v-b.removeText));for(var S=0;v>S&&(0!==y&&g.charCodeAt(y-1)===u);S++)y--}}}if(!this._opts.isUnshift||0!==y){var w=void 0;w=this._opts.isUnshift?e.unshiftIndentCount(g,y+1,d):e.shiftIndentCount(g,y+1,d);for(var S=f.length;w>=S;S++)f[S]=f[S-1]+h;r.addEditOperation(new o.Range(l,1,l,y+1),f[w])}}}this._selectionId=r.trackSelection(this._selection)},e.prototype.computeCursorState=function(e,t){if(this._useLastEditRangeForCursorEndPosition){var n=t.getInverseEditOperations()[0];return new r.Selection(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}return t.getTrackedSelection(this._selectionId)},e}();t.ShiftCommand=a}),define("vs/editor/common/controller/oneCursor",["require","exports","vs/base/common/errors","vs/base/common/strings","vs/editor/common/commands/replaceCommand","vs/editor/common/commands/shiftCommand","vs/editor/common/commands/surroundSelectionCommand","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/modes","vs/editor/common/modes/supports/onEnter"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";function f(e,t){var n={};return function(i){var o=e(i);return n.hasOwnProperty(o)||(n[o]=t(i)),n[o]}}!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Separator=2]="Separator"}(t.WordType||(t.WordType={}));var m,v=t.WordType;!function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"}(m||(m={})),function(e){e[e.WordStart=0]="WordStart",e[e.WordEnd=1]="WordEnd"}(t.WordNavigationType||(t.WordNavigationType={}));var g=t.WordNavigationType,y=m.Regular,_=m.Whitespace,b=m.WordSeparator,S=v.None,E=v.Regular,w=v.Separator,C=function(){function e(e,t,n,i,o){this.editorId=e,this.model=t,this.configuration=n,this.modeConfiguration=i,this.viewModelHelper=o,this.helper=new k(this.model,this.configuration),this.bracketDecorations=[],this._set(new u.Range(1,1,1,1),0,new c.Position(1,1),0,new u.Range(1,1,1,1),new c.Position(1,1))}return e.prototype._set=function(t,n,i,o,r,s){this.selectionStart=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=o,this.viewSelectionStart=r,this.viewPosition=s,this._cachedSelection=e.computeSelection(this.selectionStart,this.position),this._cachedViewSelection=e.computeSelection(this.viewSelectionStart,this.viewPosition),this._selStartMarker=this._ensureMarker(this._selStartMarker,this._cachedSelection.startLineNumber,this._cachedSelection.startColumn,!0),this._selEndMarker=this._ensureMarker(this._selEndMarker,this._cachedSelection.endLineNumber,this._cachedSelection.endColumn,!1),this._selDirection=this._cachedSelection.getDirection()},e.prototype._ensureMarker=function(e,t,n,i){return e?(this.model._changeMarker(e,t,n),this.model._changeMarkerStickiness(e,i),e):this.model._addMarker(t,n,i)},e.prototype.saveState=function(){return{selectionStart:this.selectionStart,viewSelectionStart:this.viewSelectionStart,position:this.position,viewPosition:this.viewPosition,leftoverVisibleColumns:this.leftoverVisibleColumns,selectionStartLeftoverVisibleColumns:this.selectionStartLeftoverVisibleColumns}},e.prototype.restoreState=function(e){var t,n=this.model.validatePosition(e.position);t=e.selectionStart?this.model.validateRange(e.selectionStart):new u.Range(n.lineNumber,n.column,n.lineNumber,n.column);var i,o=this.viewModelHelper.validateViewPosition(e.viewPosition.lineNumber,e.viewPosition.column,n);i=e.viewSelectionStart?this.viewModelHelper.validateViewRange(e.viewSelectionStart.startLineNumber,e.viewSelectionStart.startColumn,e.viewSelectionStart.endLineNumber,e.viewSelectionStart.endColumn,t):this.viewModelHelper.convertModelRangeToViewRange(t),this._set(t,e.selectionStartLeftoverVisibleColumns,n,e.leftoverVisibleColumns,i,o)},e.prototype.updateModeConfiguration=function(e){this.modeConfiguration=e},e.prototype.duplicate=function(){var t=new e(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper);return t._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,this.viewSelectionStart,this.viewPosition),t},e.prototype.dispose=function(){this.model._removeMarker(this._selStartMarker),this.model._removeMarker(this._selEndMarker),this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,[],this.editorId)},e.prototype.adjustBracketDecorations=function(){var e=null,t=this.getSelection();t.isEmpty()&&(e=this.model.matchBracket(this.position,!0));var n=[];if(e&&e.brackets){var i={stickiness:d.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"bracket-match"};n.push({range:e.brackets[0],options:i}),n.push({range:e.brackets[1],options:i})}this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,n,this.editorId)},e.computeSelection=function(e,t){var n,i,o,r;return e.isEmpty()?(n=e.startLineNumber,i=e.startColumn,o=t.lineNumber,r=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,i=e.endColumn,o=t.lineNumber,r=t.column):(n=e.startLineNumber,i=e.startColumn,o=t.lineNumber,r=t.column),new l.Selection(n,i,o,r)},e.prototype.setSelection=function(e){var t=this.model.validatePosition({lineNumber:e.positionLineNumber,column:e.positionColumn}),n=this.model.validatePosition({lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn}),i=new u.Range(n.lineNumber,n.column,n.lineNumber,n.column),o=this.viewModelHelper.convertModelPositionToViewPosition(t.lineNumber,t.column),r=this.viewModelHelper.convertModelRangeToViewRange(i);this._set(i,0,t,0,r,o)},e.prototype.setViewSelection=function(e){var t=this.viewModelHelper.validateViewRange(e.selectionStartLineNumber,e.selectionStartColumn,e.selectionStartLineNumber,e.selectionStartColumn,this.selectionStart),n=this.viewModelHelper.validateViewPosition(e.positionLineNumber,e.positionColumn,this.position);this._set(this.selectionStart,0,this.position,0,t,n)},e.prototype.setSelectionStart=function(e,t){this._set(e,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.collapseSelection=function(){var e=new u.Range(this.position.lineNumber,this.position.column,this.position.lineNumber,this.position.column),t=new u.Range(this.viewPosition.lineNumber,this.viewPosition.column,this.viewPosition.lineNumber,this.viewPosition.column);this._set(e,0,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.moveModelPosition=function(e,t,n,i,o){var r=this.viewModelHelper.convertModelPositionToViewPosition(t,n);this._move(e,t,n,r.lineNumber,r.column,i,o)},e.prototype.moveViewPosition=function(e,t,n,i,o){var r=this.viewModelHelper.convertViewToModelPosition(t,n);this._move(e,r.lineNumber,r.column,t,n,i,o)},e.prototype._move=function(e,t,n,i,o,r,s){if(s){var a=this.model.getEditableRange();if(t<a.startLineNumber||t===a.startLineNumber&&n<a.startColumn){t=a.startLineNumber,n=a.startColumn;var u=this.viewModelHelper.convertModelPositionToViewPosition(t,n);i=u.lineNumber,o=u.column}else if(t>a.endLineNumber||t===a.endLineNumber&&n>a.endColumn){
t=a.endLineNumber,n=a.endColumn;var u=this.viewModelHelper.convertModelPositionToViewPosition(t,n);i=u.lineNumber,o=u.column}}this._actualMove(e,new c.Position(t,n),new c.Position(i,o),r)},e.prototype._actualMove=function(e,t,n,i){if(e)this._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,t,i,this.viewSelectionStart,n);else{var o=new u.Range(t.lineNumber,t.column,t.lineNumber,t.column),r=new u.Range(n.lineNumber,n.column,n.lineNumber,n.column);this._set(o,i,t,i,r,n)}},e.prototype._recoverSelectionFromMarkers=function(){var e=this.model._getMarker(this._selStartMarker),t=this.model._getMarker(this._selEndMarker);return this._selDirection===d.SelectionDirection.LTR?new l.Selection(e.lineNumber,e.column,t.lineNumber,t.column):new l.Selection(t.lineNumber,t.column,e.lineNumber,e.column)},e.prototype.recoverSelectionFromMarkers=function(e){e.cursorPositionChangeReason="recoverFromMarkers",e.shouldPushStackElementBefore=!0,e.shouldPushStackElementAfter=!0,e.shouldReveal=!1,e.shouldRevealHorizontal=!1;var t=this._recoverSelectionFromMarkers(),n=new u.Range(t.selectionStartLineNumber,t.selectionStartColumn,t.selectionStartLineNumber,t.selectionStartColumn),i=new c.Position(t.positionLineNumber,t.positionColumn),o=this.viewModelHelper.convertModelRangeToViewRange(n),r=this.viewModelHelper.convertViewToModelPosition(i.lineNumber,i.column);return this._set(n,0,i,0,o,r),!0},e.prototype.getSelectionStart=function(){return this.selectionStart},e.prototype.getPosition=function(){return this.position},e.prototype.getSelection=function(){return this._cachedSelection},e.prototype.getViewPosition=function(){return this.viewPosition},e.prototype.getViewSelection=function(){return this._cachedViewSelection},e.prototype.getValidViewPosition=function(){return this.viewModelHelper.validateViewPosition(this.viewPosition.lineNumber,this.viewPosition.column,this.position)},e.prototype.hasSelection=function(){return!this.getSelection().isEmpty()||!this.selectionStart.isEmpty()},e.prototype.getBracketsDecorations=function(){return this.bracketDecorations},e.prototype.getLeftoverVisibleColumns=function(){return this.leftoverVisibleColumns},e.prototype.getSelectionStartLeftoverVisibleColumns=function(){return this.selectionStartLeftoverVisibleColumns},e.prototype.setSelectionStartLeftoverVisibleColumns=function(e){this.selectionStartLeftoverVisibleColumns=e},e.prototype.validatePosition=function(e){return this.model.validatePosition(e)},e.prototype.validateViewPosition=function(e,t,n){return this.viewModelHelper.validateViewPosition(e,t,n)},e.prototype.convertViewToModelPosition=function(e,t){return this.viewModelHelper.convertViewToModelPosition(e,t)},e.prototype.convertViewSelectionToModelSelection=function(e){return this.viewModelHelper.convertViewSelectionToModelSelection(e)},e.prototype.convertModelPositionToViewPosition=function(e,t){return this.viewModelHelper.convertModelPositionToViewPosition(e,t)},e.prototype.getLineContent=function(e){return this.model.getLineContent(e)},e.prototype.findPreviousWordOnLine=function(e){return this.helper.findPreviousWordOnLine(e)},e.prototype.findNextWordOnLine=function(e){return this.helper.findNextWordOnLine(e)},e.prototype.getLeftOfPosition=function(e,t){return this.helper.getLeftOfPosition(this.model,e,t)},e.prototype.getRightOfPosition=function(e,t){return this.helper.getRightOfPosition(this.model,e,t)},e.prototype.getPositionUp=function(e,t,n,i,o){return this.helper.getPositionUp(this.model,e,t,n,i,o)},e.prototype.getPositionDown=function(e,t,n,i,o){return this.helper.getPositionDown(this.model,e,t,n,i,o)},e.prototype.getColumnAtBeginningOfLine=function(e,t){return this.helper.getColumnAtBeginningOfLine(this.model,e,t)},e.prototype.getColumnAtEndOfLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.model,e,t)},e.prototype.getVisibleColumnFromColumn=function(e,t){return this.helper.visibleColumnFromColumn(this.model,e,t)},e.prototype.getViewVisibleColumnFromColumn=function(e,t){return this.helper.visibleColumnFromColumn(this.viewModelHelper.viewModel,e,t)},e.prototype.getViewLineCount=function(){return this.viewModelHelper.viewModel.getLineCount()},e.prototype.getViewLineMaxColumn=function(e){return this.viewModelHelper.viewModel.getLineMaxColumn(e)},e.prototype.getLeftOfViewPosition=function(e,t){return this.helper.getLeftOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getRightOfViewPosition=function(e,t){return this.helper.getRightOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getViewPositionUp=function(e,t,n,i,o){return this.helper.getPositionUp(this.viewModelHelper.viewModel,e,t,n,i,o)},e.prototype.getViewPositionDown=function(e,t,n,i,o){return this.helper.getPositionDown(this.viewModelHelper.viewModel,e,t,n,i,o)},e.prototype.getColumnAtBeginningOfViewLine=function(e,t){return this.helper.getColumnAtBeginningOfLine(this.viewModelHelper.viewModel,e,t)},e.prototype.getColumnAtEndOfViewLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.viewModelHelper.viewModel,e,t)},e.prototype.columnSelect=function(e,t,n,i){var o=this,r=this.helper.columnSelect(this.viewModelHelper.viewModel,e,t,n,i);return{reversed:r.reversed,viewSelections:r.viewSelections,selections:r.viewSelections.map(function(e){return o.convertViewSelectionToModelSelection(e)}),toLineNumber:n,toVisualColumn:i}},e}();t.OneCursor=C;var T=function(){function e(){}return e.jumpToBracket=function(e,t){var n=e.getBracketsDecorations();if(2!==n.length)return!1;var i=e.model.getDecorationRange(n[0]),o=e.model.getDecorationRange(n[1]),r=e.getPosition();return I.isPositionAtRangeEdges(r,i)||I.isPositionInsideRange(r,i)?(e.moveModelPosition(!1,o.endLineNumber,o.endColumn,0,!1),!0):I.isPositionAtRangeEdges(r,o)||I.isPositionInsideRange(r,o)?(e.moveModelPosition(!1,i.endLineNumber,i.endColumn,0,!1),!0):!1},e.moveTo=function(e,t,n,i,o,r){var s,a=e.model.validatePosition(n);s=i?e.validateViewPosition(i.lineNumber,i.column,a):e.convertModelPositionToViewPosition(a.lineNumber,a.column);var c="mouse"===o?"explicit":null;return"api"===o&&(r.shouldRevealVerticalInCenter=!0),c&&(r.cursorPositionChangeReason=c),e.moveViewPosition(t,s.lineNumber,s.column,0,!1),!0},e._columnSelectOp=function(e,t,n){var i=e.getViewSelection(),o=e.getVisibleColumnFromColumn(i.selectionStartLineNumber,i.selectionStartColumn);return e.columnSelect(i.selectionStartLineNumber,o,t,n)},e.columnSelectMouse=function(e,t,n,i){var o,r=e.model.validatePosition(t);return o=n?e.validateViewPosition(n.lineNumber,n.column,r):e.convertModelPositionToViewPosition(r.lineNumber,r.column),this._columnSelectOp(e,o.lineNumber,i)},e.columnSelectLeft=function(e,t,n){return n>1&&n--,this._columnSelectOp(e,t,n)},e.columnSelectRight=function(e,t,n){for(var i=0,o=Math.min(e.getViewPosition().lineNumber,t),r=Math.max(e.getViewPosition().lineNumber,t),s=o;r>=s;s++){var a=e.getViewLineMaxColumn(s),c=e.getViewVisibleColumnFromColumn(s,a);i=Math.max(i,c)}return i>n&&n++,this._columnSelectOp(e,t,n)},e.columnSelectUp=function(e,t,n,i){var o=e?t.configuration.editor.pageSize:1;return n-=o,1>n&&(n=1),this._columnSelectOp(t,n,i)},e.columnSelectDown=function(e,t,n,i){var o=e?t.configuration.editor.pageSize:1;return n+=o,n>t.getViewLineCount()&&(n=t.getViewLineCount()),this._columnSelectOp(t,n,i)},e.moveLeft=function(e,t,n){var i,o;if(e.hasSelection()&&!t){var r=e.getViewSelection(),s=e.validateViewPosition(r.startLineNumber,r.startColumn,e.getSelection().getStartPosition());i=s.lineNumber,o=s.column}else{var a=e.getValidViewPosition(),c=e.getLeftOfViewPosition(a.lineNumber,a.column);i=c.lineNumber,o=c.column}return n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,i,o,0,!0),!0},e.moveWordLeft=function(e,t,n,i){var o=e.getPosition(),r=o.lineNumber,s=o.column;1===s&&r>1&&(r-=1,s=e.model.getLineMaxColumn(r));var a=e.findPreviousWordOnLine(new c.Position(r,s));return n===g.WordStart?s=a?a.start+1:1:(a&&s<=a.end+1&&(a=e.findPreviousWordOnLine(new c.Position(r,a.start+1))),s=a?a.end+1:1),i.cursorPositionChangeReason="explicit",e.moveModelPosition(t,r,s,0,!0),!0},e.moveRight=function(e,t,n){var i,o;if(e.hasSelection()&&!t){var r=e.getViewSelection(),s=e.validateViewPosition(r.endLineNumber,r.endColumn,e.getSelection().getEndPosition());i=s.lineNumber,o=s.column}else{var a=e.getValidViewPosition(),c=e.getRightOfViewPosition(a.lineNumber,a.column);i=c.lineNumber,o=c.column}return n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,i,o,0,!0),!0},e.moveWordRight=function(e,t,n,i){var o=e.getPosition(),r=o.lineNumber,s=o.column;s===e.model.getLineMaxColumn(r)&&r<e.model.getLineCount()&&(r+=1,s=1);var a=e.findNextWordOnLine(new c.Position(r,s));return n===g.WordEnd?s=a?a.end+1:e.model.getLineMaxColumn(r):(a&&s>=a.start+1&&(a=e.findNextWordOnLine(new c.Position(r,a.end+1))),s=a?a.start+1:e.model.getLineMaxColumn(r)),i.cursorPositionChangeReason="explicit",e.moveModelPosition(t,r,s,0,!0),!0},e.moveDown=function(e,t,n,i){var o,r,s=n?e.configuration.editor.pageSize:1;if(e.hasSelection()&&!t){var a=e.getViewSelection(),c=e.validateViewPosition(a.endLineNumber,a.endColumn,e.getSelection().getEndPosition());o=c.lineNumber,r=c.column}else{var u=e.getValidViewPosition();o=u.lineNumber,r=u.column}var l=e.getViewPositionDown(o,r,e.getLeftoverVisibleColumns(),s,!0);return i.cursorPositionChangeReason="explicit",e.moveViewPosition(t,l.lineNumber,l.column,l.leftoverVisibleColumns,!0),!0},e.translateDown=function(e,t){var n=e.getViewSelection(),i=e.getViewPositionDown(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1,!1);t.cursorPositionChangeReason="explicit",e.moveViewPosition(!1,i.lineNumber,i.column,e.getLeftoverVisibleColumns(),!0);var o=e.getViewPositionDown(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1,!1);return t.cursorPositionChangeReason="explicit",e.moveViewPosition(!0,o.lineNumber,o.column,o.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(i.leftoverVisibleColumns),!0},e.moveUp=function(e,t,n,i){var o,r,s=n?e.configuration.editor.pageSize:1;if(e.hasSelection()&&!t){var a=e.getViewSelection(),c=e.validateViewPosition(a.startLineNumber,a.startColumn,e.getSelection().getStartPosition());o=c.lineNumber,r=c.column}else{var u=e.getValidViewPosition();o=u.lineNumber,r=u.column}var l=e.getViewPositionUp(o,r,e.getLeftoverVisibleColumns(),s,!0);return i.cursorPositionChangeReason="explicit",e.moveViewPosition(t,l.lineNumber,l.column,l.leftoverVisibleColumns,!0),!0},e.translateUp=function(e,t){var n=e.getViewSelection(),i=e.getViewPositionUp(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1,!1);t.cursorPositionChangeReason="explicit",e.moveViewPosition(!1,i.lineNumber,i.column,e.getLeftoverVisibleColumns(),!0);var o=e.getViewPositionUp(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1,!1);return t.cursorPositionChangeReason="explicit",e.moveViewPosition(!0,o.lineNumber,o.column,o.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(i.leftoverVisibleColumns),!0},e.moveToBeginningOfLine=function(e,t,n){var i=e.getValidViewPosition(),o=i.lineNumber,r=i.column;return r=e.getColumnAtBeginningOfViewLine(o,r),n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,o,r,0,!0),!0},e.moveToEndOfLine=function(e,t,n){var i=e.getValidViewPosition(),o=i.lineNumber,r=i.column;return r=e.getColumnAtEndOfViewLine(o,r),n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,o,r,0,!0),!0},e.expandLineSelection=function(e,t){t.cursorPositionChangeReason="explicit";var n=e.getViewSelection(),i=n.startLineNumber,o=n.startColumn,r=n.endLineNumber,s=n.endColumn,a=e.getViewLineMaxColumn(r);if(1!==o||s!==a)o=1,s=a;else{var c=e.getViewPositionDown(r,s,0,1,!0);r=c.lineNumber,s=e.getViewLineMaxColumn(r)}return e.moveViewPosition(!1,i,o,0,!0),e.moveViewPosition(!0,r,s,0,!0),!0},e.moveToBeginningOfBuffer=function(e,t,n){return n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,1,1,0,!0),!0},e.moveToEndOfBuffer=function(e,t,n){var i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,i,o,0,!0),!0},e.selectAll=function(e,t){var n,i,o,r,s=!0;if(e.model.hasEditableRange()){var a=e.model.getEditableRange(),c=e.getSelection();c.equalsRange(a)||(s=!1,n=a.startLineNumber,i=a.startColumn,o=a.endLineNumber,r=a.endColumn)}return s&&(n=1,i=1,o=e.model.getLineCount(),r=e.model.getLineMaxColumn(o)),e.moveModelPosition(!1,n,i,0,!1),e.moveModelPosition(!0,o,r,0,!1),t.shouldReveal=!1,t.shouldRevealHorizontal=!1,!0},e.line=function(e,t,n,i,o){var r=e.validatePosition(n),s=i?e.validateViewPosition(i.lineNumber,i.column,r):e.convertModelPositionToViewPosition(r.lineNumber,r.column);if(o.cursorPositionChangeReason="explicit",o.shouldRevealHorizontal=!1,t&&e.hasSelection()){var a=e.getSelectionStart().getStartPosition().lineNumber;if(r.lineNumber<a)e.moveViewPosition(e.hasSelection(),s.lineNumber,1,0,!1);else if(r.lineNumber>a){var c=s.lineNumber+1,l=1;c>e.getViewLineCount()&&(c=e.getViewLineCount(),l=e.getViewLineMaxColumn(c)),e.moveViewPosition(e.hasSelection(),c,l,0,!1)}else{var d=e.getSelectionStart().getEndPosition();e.moveModelPosition(e.hasSelection(),d.lineNumber,d.column,0,!1)}return!0}var h=r.lineNumber+1,p=1;h>e.model.getLineCount()&&(h=e.model.getLineCount(),p=e.model.getLineMaxColumn(h));var f=new u.Range(r.lineNumber,1,h,p),m=e.convertModelPositionToViewPosition(r.lineNumber,1),v=e.convertModelPositionToViewPosition(h,p);return e.setSelectionStart(f,new u.Range(m.lineNumber,m.column,v.lineNumber,v.column)),e.moveModelPosition(e.hasSelection(),f.endLineNumber,f.endColumn,0,!1),!0},e.word=function(e,t,n,i){var o,r,s=e.validatePosition(n),a=e.findPreviousWordOnLine(s),l=a&&a.wordType===v.Regular&&a.start<s.column-1&&s.column-1<=a.end,d=e.findNextWordOnLine(s),h=d&&d.wordType===v.Regular&&d.start<s.column-1&&s.column-1<=d.end;if(t&&e.hasSelection()){var p=void 0,f=void 0;if(l?(p=a.start+1,f=a.end+1):h?(p=d.start+1,f=d.end+1):(p=s.column,f=s.column),o=s.lineNumber,s.isBeforeOrEqual(e.getSelectionStart().getStartPosition())){r=p;var m=new c.Position(o,r);e.getSelectionStart().containsPosition(m)&&(r=e.getSelectionStart().endColumn)}else{r=f;var m=new c.Position(o,r);e.getSelectionStart().containsPosition(m)&&(r=e.getSelectionStart().startColumn)}}else{var p=void 0,f=void 0;l?(p=a.start+1,f=a.end+1):h?(p=d.start+1,f=d.end+1):(p=a?a.end+1:1,f=d?d.start+1:e.model.getLineMaxColumn(s.lineNumber));var g=new u.Range(s.lineNumber,p,s.lineNumber,f),y=e.convertModelPositionToViewPosition(s.lineNumber,p),_=e.convertModelPositionToViewPosition(s.lineNumber,f);e.setSelectionStart(g,new u.Range(y.lineNumber,y.column,_.lineNumber,_.column)),o=g.endLineNumber,r=g.endColumn}return i.cursorPositionChangeReason="explicit",e.moveModelPosition(e.hasSelection(),o,r,0,!1),!0},e.cancelSelection=function(e,t){return e.hasSelection()?(e.collapseSelection(),!0):!1},e._typeInterceptorEnter=function(e,t,n){return"\n"!==t?!1:this._enter(e,!1,n)},e.lineInsertBefore=function(e,t){var n=e.getPosition().lineNumber;if(1===n)return t.executeCommand=new o.ReplaceCommandWithoutChangingPosition(new u.Range(1,1,1,1),"\n"),!0;n--;var i=e.model.getLineMaxColumn(n);return this._enter(e,!1,t,new c.Position(n,i),new u.Range(n,i,n,i))},e.lineInsertAfter=function(e,t){var n=e.getPosition(),i=e.model.getLineMaxColumn(n.lineNumber);return this._enter(e,!1,t,new c.Position(n.lineNumber,i),new u.Range(n.lineNumber,i,n.lineNumber,i))},e.lineBreakInsert=function(e,t){return this._enter(e,!0,t)},e._enter=function(e,t,n,i,s){"undefined"==typeof i&&(i=e.getPosition()),"undefined"==typeof s&&(s=e.getSelection()),n.shouldPushStackElementBefore=!0;var a=p.getEnterActionAtPosition(e.model,i.lineNumber,i.column),c=a.enterAction,u=a.indentation;if(c.indentAction===h.IndentAction.None)this.actualType(e,"\n"+e.model.normalizeIndentation(u+c.appendText),t,n,s);else if(c.indentAction===h.IndentAction.Indent)this.actualType(e,"\n"+e.model.normalizeIndentation(u+c.appendText),t,n,s);else if(c.indentAction===h.IndentAction.IndentOutdent){var l=e.model.normalizeIndentation(u),d=e.model.normalizeIndentation(u+c.appendText),f="\n"+d+"\n"+l;t?n.executeCommand=new o.ReplaceCommandWithoutChangingPosition(s,f):n.executeCommand=new o.ReplaceCommandWithOffsetCursorState(s,f,-1,d.length-l.length)}else if(c.indentAction===h.IndentAction.Outdent){for(var m=r.ShiftCommand.unshiftIndentCount(u,u.length+1,e.model.getOptions().tabSize),v="",g=0;m>g;g++)v+="	";this.actualType(e,"\n"+e.model.normalizeIndentation(v+c.appendText),t,n,s)}return!0},e._typeInterceptorAutoClosingCloseChar=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var i=e.getSelection();if(!i.isEmpty()||!e.modeConfiguration.autoClosingPairsClose.hasOwnProperty(t))return!1;var r=e.getPosition(),s=e.model.getLineContent(r.lineNumber),a=s[r.column-1];if(a!==t)return!1;var c=new u.Range(r.lineNumber,r.column,r.lineNumber,r.column+1);return n.executeCommand=new o.ReplaceCommand(c,t),!0},e._typeInterceptorAutoClosingOpenChar=function(e,t,i){if(!e.configuration.editor.autoClosingBrackets)return!1;var r=e.getSelection();if(!r.isEmpty()||!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(t))return!1;var s=e.model.getMode().richEditSupport;if(!s||!s.characterPair)return!1;var a=e.getPosition(),c=e.model.getLineContent(a.lineNumber),u=c[a.column-1];if(u){var l=!1;for(var d in e.modeConfiguration.autoClosingPairsClose)if(u===d){l=!0;break}if(!l&&!/\s/.test(u))return!1}var h=e.model.getLineContext(a.lineNumber),p=!1;try{p=s.characterPair.shouldAutoClosePair(t,h,a.column-1)}catch(f){n.onUnexpectedError(f)}if(!p)return!1;i.shouldPushStackElementBefore=!0;var m=e.modeConfiguration.autoClosingPairsOpen[t];return i.executeCommand=new o.ReplaceCommandWithOffsetCursorState(r,t+m,0,-m.length),!0},e._typeInterceptorSurroundSelection=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var i=e.getSelection();if(i.isEmpty()||!e.modeConfiguration.surroundingPairs.hasOwnProperty(t))return!1;var o,r,a,c,u,l,d=!0,h="	".charCodeAt(0),p=" ".charCodeAt(0);for(o=i.startLineNumber;o<=i.endLineNumber;o++)for(l=e.model.getLineContent(o),r=o===i.startLineNumber?i.startColumn-1:0,a=o===i.endLineNumber?i.endColumn-1:l.length,c=r;a>c;c++)u=l.charCodeAt(c),u!==h&&u!==p&&(d=!1,o=i.endLineNumber+1,c=a);if(d)return!1;var f=e.modeConfiguration.surroundingPairs[t];return n.shouldPushStackElementBefore=!0,n.shouldPushStackElementAfter=!0,n.executeCommand=new s.SurroundSelectionCommand(i,t,f),!0},e._typeInterceptorElectricChar=function(e,t,n){var i=this;return e.modeConfiguration.electricChars.hasOwnProperty(t)?(n.postOperationRunnable=function(t){return i._typeInterceptorElectricCharRunnable(e,t)},this.actualType(e,t,!1,n)):!1},e._typeInterceptorElectricCharRunnable=function(e,t){var r,s=e.getPosition(),a=e.model.getLineContent(s.lineNumber),c=e.model.getLineContext(s.lineNumber),l=e.model.getMode().richEditSupport;if(l&&l.electricCharacter)try{r=l.electricCharacter.onElectricCharacter(c,s.column-2)}catch(d){n.onUnexpectedError(d)}if(r){var h=r.matchOpenBracket,p=r.appendText;if(h){var f=e.model.findMatchingBracketUp(h,{lineNumber:s.lineNumber,column:s.column-h.length});if(f){var m=f.startLineNumber,v=e.model.getLineContent(m),g=i.getLeadingWhitespace(v),y=e.model.normalizeIndentation(g),_=e.model.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,b=a.substring(0,_-1);if(b!==y){var S=a.substring(_-1,s.column-1),E=y+S,w=new u.Range(s.lineNumber,1,s.lineNumber,s.column);t.shouldPushStackElementAfter=!0,t.executeCommand=new o.ReplaceCommand(w,E)}}}else if(p){var C=-p.length;r.advanceCount&&(C+=r.advanceCount),t.shouldPushStackElementAfter=!0,t.executeCommand=new o.ReplaceCommandWithOffsetCursorState(e.getSelection(),p,0,C)}}},e.actualType=function(e,t,n,i,r){return"undefined"==typeof r&&(r=e.getSelection()),n?i.executeCommand=new o.ReplaceCommandWithoutChangingPosition(r,t):i.executeCommand=new o.ReplaceCommand(r,t),!0},e.type=function(e,t,n){return this._typeInterceptorEnter(e,t,n)?!0:this._typeInterceptorAutoClosingCloseChar(e,t,n)?!0:this._typeInterceptorAutoClosingOpenChar(e,t,n)?!0:this._typeInterceptorSurroundSelection(e,t,n)?!0:this._typeInterceptorElectricChar(e,t,n)?!0:this.actualType(e,t,!1,n)},e.replacePreviousChar=function(e,t,n,i){var r,s=e.getPosition(),a=Math.max(1,s.column-n);return r=new u.Range(s.lineNumber,a,s.lineNumber,s.column),i.executeCommand=new o.ReplaceCommand(r,t),!0},e._goodIndentForLine=function(e,t){var n=t-1;for(n=t-1;n>=1;n--){var o=e.model.getLineContent(n),s=i.lastNonWhitespaceIndex(o);if(s>=0)break}if(1>n)return"	";var a,c=p.getEnterActionAtPosition(e.model,n,e.model.getLineMaxColumn(n));if(c.enterAction.indentAction===h.IndentAction.Outdent){var u=e.model.getOptions(),l=r.ShiftCommand.unshiftIndentCount(c.indentation,c.indentation.length,u.tabSize);a="";for(var d=0;l>d;d++)a+="	";a=e.model.normalizeIndentation(a)}else a=c.indentation;var f=a+c.enterAction.appendText;return 0===f.length?"	":f},e.tab=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i="";if(1===e.model.getLineMaxColumn(n.startLineNumber))i=e.model.normalizeIndentation(this._goodIndentForLine(e,n.startLineNumber));else{var r=e.getPosition(),s=e.model.getOptions();if(s.insertSpaces)for(var a=e.getVisibleColumnFromColumn(r.lineNumber,r.column),c=s.tabSize,u=c-a%c,l=0;u>l;l++)i+=" ";else i="	"}return t.executeCommand=new o.ReplaceCommand(n,i),!0}return this.indent(e,t)},e.indent=function(e,t){var n=e.getSelection();return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new r.ShiftCommand(n,{isUnshift:!1,tabSize:e.model.getOptions().tabSize,oneIndent:e.model.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.outdent=function(e,t){var n=e.getSelection();return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new r.ShiftCommand(n,{isUnshift:!0,tabSize:e.model.getOptions().tabSize,oneIndent:e.model.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.paste=function(e,t,n,i){var r=e.getPosition();if(i.cursorPositionChangeReason="paste",n&&"\n"===t.charAt(t.length-1)&&t.indexOf("\n")===t.length-1){var s=new u.Range(r.lineNumber,1,r.lineNumber,1);return i.executeCommand=new o.ReplaceCommand(s,t),!0}return i.executeCommand=new o.ReplaceCommand(e.getSelection(),t),!0},e._autoClosingPairDelete=function(e,t){if(!e.configuration.editor.autoClosingBrackets)return!1;if(!e.getSelection().isEmpty())return!1;var n=e.getPosition(),i=e.model.getLineContent(n.lineNumber),r=i[n.column-2];if(!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(r))return!1;var s=i[n.column-1],a=e.modeConfiguration.autoClosingPairsOpen[r];if(s!==a)return!1;var c=new u.Range(n.lineNumber,n.column-1,n.lineNumber,n.column+1);return t.executeCommand=new o.ReplaceCommand(c,""),!0},e.deleteLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),r=e.getLeftOfPosition(i.lineNumber,i.column);n=new u.Range(r.lineNumber,r.column,i.lineNumber,i.column)}return n.isEmpty()?!0:(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new o.ReplaceCommand(n,""),!0)},e._findLastNonWhitespaceChar=function(e,t){for(var n=t;n>=0;n--){var i=e.charAt(n);if(" "!==i&&"	"!==i)return n}return-1},e.deleteWordLeftWhitespace=function(e,t){var n=e.getPosition(),i=e.getLineContent(n.lineNumber),r=n.column-2,s=this._findLastNonWhitespaceChar(i,r);return r>s+1?(t.executeCommand=new o.ReplaceCommand(new u.Range(n.lineNumber,s+2,n.lineNumber,n.column),""),!0):!1},e.deleteWordLeft=function(e,t,n,i){if(this._autoClosingPairDelete(e,i))return!0;var r=e.getSelection();if(r.isEmpty()){var s=e.getPosition(),a=s.lineNumber,l=s.column;if(1===a&&1===l)return!0;if(t&&this.deleteWordLeftWhitespace(e,i))return!0;var d=e.findPreviousWordOnLine(s);n===g.WordStart?l=d?d.start+1:1:(d&&l<=d.end+1&&(d=e.findPreviousWordOnLine(new c.Position(a,d.start+1))),l=d?d.end+1:1);var h=new u.Range(a,l,a,s.column);if(!h.isEmpty())return i.executeCommand=new o.ReplaceCommand(h,""),!0}return this.deleteLeft(e,i)},e.deleteRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),r=e.getRightOfPosition(i.lineNumber,i.column);n=new u.Range(r.lineNumber,r.column,i.lineNumber,i.column)}return n.isEmpty()?!0:(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new o.ReplaceCommand(n,""),!0)},e._findFirstNonWhitespaceChar=function(e,t){for(var n=e.length,i=t;n>i;i++){var o=e.charAt(i);if(" "!==o&&"	"!==o)return i}return n},e.deleteWordRightWhitespace=function(e,t){var n=e.getPosition(),i=e.getLineContent(n.lineNumber),r=n.column-1,s=this._findFirstNonWhitespaceChar(i,r);return s>r+1?(t.executeCommand=new o.ReplaceCommand(new u.Range(n.lineNumber,n.column,n.lineNumber,s+1),""),!0):!1},e.deleteWordRight=function(e,t,n,i){var r=e.getSelection();if(r.isEmpty()){var s=e.getPosition(),a=s.lineNumber,l=s.column,d=e.model.getLineCount(),h=e.model.getLineMaxColumn(a);if(a===d&&l===h)return!0;if(t&&this.deleteWordRightWhitespace(e,i))return!0;var p=e.findNextWordOnLine(s);n===g.WordEnd?l=p?p.end+1:h:(p&&l>=p.start+1&&(p=e.findNextWordOnLine(new c.Position(a,p.end+1))),l=p?p.start+1:h);var f=new u.Range(a,l,a,s.column);if(!f.isEmpty())return i.executeCommand=new o.ReplaceCommand(f,""),!0}return this.deleteRight(e,i)},e.deleteAllLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),r=i.lineNumber,s=i.column;if(1===s)return!0;var a=new u.Range(r,1,r,s);if(!a.isEmpty())return t.executeCommand=new o.ReplaceCommand(a,""),!0}return this.deleteLeft(e,t)},e.deleteAllRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),r=i.lineNumber,s=i.column,a=e.model.getLineMaxColumn(r);if(s===a)return!0;var c=new u.Range(r,s,r,a);if(!c.isEmpty())return t.executeCommand=new o.ReplaceCommand(c,""),!0}return this.deleteRight(e,t)},e.cut=function(e,t,n){var i=e.getSelection();if(i.isEmpty()){if(!t)return!1;var r,s,a,c,l=e.getPosition();l.lineNumber<e.model.getLineCount()?(r=l.lineNumber,s=1,a=l.lineNumber+1,c=1):l.lineNumber>1?(r=l.lineNumber-1,s=e.model.getLineMaxColumn(l.lineNumber-1),a=l.lineNumber,c=e.model.getLineMaxColumn(l.lineNumber)):(r=l.lineNumber,s=1,a=l.lineNumber,c=e.model.getLineMaxColumn(l.lineNumber));var d=new u.Range(r,s,a,c);d.isEmpty()||(n.executeCommand=new o.ReplaceCommand(d,""))}else this.deleteRight(e,n);return!0},e}();t.OneCursorOp=T;var k=function(){function e(e,t){var n=this;this.model=e,this.configuration=t,this.moveHelper=new a.CursorMoveHelper({getIndentationOptions:function(){return n.model.getOptions()}})}return e.prototype.getLeftOfPosition=function(e,t,n){return this.moveHelper.getLeftOfPosition(e,t,n)},e.prototype.getRightOfPosition=function(e,t,n){return this.moveHelper.getRightOfPosition(e,t,n)},e.prototype.getPositionUp=function(e,t,n,i,o,r){return this.moveHelper.getPositionUp(e,t,n,i,o,r)},e.prototype.getPositionDown=function(e,t,n,i,o,r){return this.moveHelper.getPositionDown(e,t,n,i,o,r)},e.prototype.getColumnAtBeginningOfLine=function(e,t,n){return this.moveHelper.getColumnAtBeginningOfLine(e,t,n)},e.prototype.getColumnAtEndOfLine=function(e,t,n){return this.moveHelper.getColumnAtEndOfLine(e,t,n)},e.prototype.columnSelect=function(e,t,n,i,o){return this.moveHelper.columnSelect(e,t,n,i,o)},e.prototype.visibleColumnFromColumn=function(e,t,n){return this.moveHelper.visibleColumnFromColumn(e,t,n)},e.prototype._createWord=function(e,t,n,i){return{start:n,end:i,wordType:t}},e.prototype.findPreviousWordOnLine=function(e){for(var t=this.model.validatePosition(e),n=x(this.configuration.editor.wordSeparators),i=this.model.getLineContent(t.lineNumber),o=S,r=t.column-2;r>=0;r--){var s=i.charCodeAt(r),a=n[s]||m.Regular;if(a===y){if(o===w)return this._createWord(i,o,r+1,this._findEndOfWord(i,n,o,r+1));o=E}else if(a===b){if(o===E)return this._createWord(i,o,r+1,this._findEndOfWord(i,n,o,r+1));o=w}else if(a===_&&o!==S)return this._createWord(i,o,r+1,this._findEndOfWord(i,n,o,r+1))}return o!==S?this._createWord(i,o,0,this._findEndOfWord(i,n,o,0)):null},e.prototype._findEndOfWord=function(e,t,n,i){for(var o=e.length,r=i;o>r;r++){var s=e.charCodeAt(r),a=t[s]||m.Regular;if(a===_)return r;if(n===E&&a===b)return r;if(n===w&&a===y)return r}return o},e.prototype.findNextWordOnLine=function(e){for(var t=this.model.validatePosition(e),n=x(this.configuration.editor.wordSeparators),i=this.model.getLineContent(t.lineNumber),o=S,r=i.length,s=t.column-1;r>s;s++){var a=i.charCodeAt(s),c=n[a]||m.Regular;if(c===y){if(o===w)return this._createWord(i,o,this._findStartOfWord(i,n,o,s-1),s);o=E}else if(c===b){if(o===E)return this._createWord(i,o,this._findStartOfWord(i,n,o,s-1),s);o=w}else if(c===_&&o!==S)return this._createWord(i,o,this._findStartOfWord(i,n,o,s-1),s)}return o!==S?this._createWord(i,o,this._findStartOfWord(i,n,o,r-1),r):null},e.prototype._findStartOfWord=function(e,t,n,i){for(var o=i;o>=0;o--){var r=e.charCodeAt(o),s=t[r]||m.Regular;if(s===_)return o+1;if(n===E&&s===b)return o+1;if(n===w&&s===y)return o+1}return 0},e}(),x=f(function(e){return e},function(e){for(var t=[],n=0;256>n;n++)t[n]=m.Regular;for(var i=0,o=e.length;o>i;i++)t[e.charCodeAt(i)]=m.WordSeparator;return t[" ".charCodeAt(0)]=m.Whitespace,t["	".charCodeAt(0)]=m.Whitespace,t}),I=function(){function e(){}return e.rangeContainsPosition=function(e,t){return t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber?!1:t.lineNumber===e.startLineNumber&&t.column<e.startColumn?!1:!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn)},e.isPositionInsideRange=function(e,t){return e.lineNumber<t.startLineNumber?!1:e.lineNumber>t.endLineNumber?!1:e.lineNumber===t.startLineNumber&&e.column<t.startColumn?!1:!(e.lineNumber===t.endLineNumber&&e.column>t.endColumn)},e.isPositionAtRangeEdges=function(e,t){return e.lineNumber===t.startLineNumber&&e.column===t.startColumn?!0:e.lineNumber===t.endLineNumber&&e.column===t.endColumn},e}()}),define("vs/editor/common/controller/cursorCollection",["require","exports","vs/base/common/errors","vs/editor/common/controller/oneCursor","vs/editor/common/core/selection"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n,o){this.editorId=e,this.model=t,this.configuration=n,this.viewModelHelper=o,this.modeConfiguration=this.getModeConfiguration(),this.primaryCursor=new i.OneCursor(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper),this.secondaryCursors=[],this.lastAddedCursorIndex=0}return e.prototype.dispose=function(){this.primaryCursor.dispose(),this.killSecondaryCursors()},e.prototype.saveState=function(){return{primary:this.primaryCursor.saveState(),secondary:this.secondaryCursors.map(function(e){return e.saveState()})}},e.prototype.restoreState=function(e){this.primaryCursor.restoreState(e.primary),this.killSecondaryCursors();for(var t=0;t<e.secondary.length;t++)this.addSecondaryCursor(null),this.secondaryCursors[t].restoreState(e.secondary[t])},e.prototype.updateMode=function(){var e=this;this.modeConfiguration=this.getModeConfiguration(),this.getAll().forEach(function(t){t.updateModeConfiguration(e.modeConfiguration)})},e.prototype.getAll=function(){var e=[];return e.push(this.primaryCursor),e=e.concat(this.secondaryCursors)},e.prototype.getPosition=function(e){return 0===e?this.primaryCursor.getPosition():this.secondaryCursors[e-1].getPosition()},e.prototype.getViewPosition=function(e){return 0===e?this.primaryCursor.getViewPosition():this.secondaryCursors[e-1].getViewPosition()},e.prototype.getPositions=function(){var e=[];e.push(this.primaryCursor.getPosition());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getPosition());return e},e.prototype.getViewPositions=function(){var e=[];e.push(this.primaryCursor.getViewPosition());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getViewPosition());
return e},e.prototype.getSelection=function(e){return 0===e?this.primaryCursor.getSelection():this.secondaryCursors[e-1].getSelection()},e.prototype.getSelections=function(){var e=[];e.push(this.primaryCursor.getSelection());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getSelection());return e},e.prototype.getViewSelections=function(){var e=[];e.push(this.primaryCursor.getViewSelection());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getViewSelection());return e},e.prototype.setSelections=function(e,t){if(this.primaryCursor.setSelection(e[0]),this._setSecondarySelections(e.slice(1)),t){this.primaryCursor.setViewSelection(t[0]);for(var n=0;n<this.secondaryCursors.length;n++)this.secondaryCursors[n].setViewSelection(t[n+1])}},e.prototype.killSecondaryCursors=function(){return this._setSecondarySelections([])>0},e.prototype.normalize=function(){this._mergeCursorsIfNecessary(),this.primaryCursor.adjustBracketDecorations();for(var e=0,t=this.secondaryCursors.length;t>e;e++)this.secondaryCursors[e].adjustBracketDecorations()},e.prototype.addSecondaryCursor=function(e){var t=new i.OneCursor(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper);e&&t.setSelection(e),this.secondaryCursors.push(t),this.lastAddedCursorIndex=this.secondaryCursors.length},e.prototype.duplicateCursors=function(){var e=[];e.push(this.primaryCursor.duplicate());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].duplicate());this.secondaryCursors=this.secondaryCursors.concat(e),this.lastAddedCursorIndex=this.secondaryCursors.length},e.prototype.getLastAddedCursor=function(){return 0===this.secondaryCursors.length||0===this.lastAddedCursorIndex?this.primaryCursor:this.secondaryCursors[this.lastAddedCursorIndex-1]},e.prototype._setSecondarySelections=function(e){var t=this.secondaryCursors.length,n=e.length,i=n-t;if(n>t)for(var o=n-t,r=0;o>r;r++)this.addSecondaryCursor(null);else if(t>n)for(var s=t-n,r=0;s>r;r++)this._removeSecondaryCursor(this.secondaryCursors.length-1);for(var r=0;n>r;r++)e[r]&&this.secondaryCursors[r].setSelection(e[r]);return i},e.prototype._removeSecondaryCursor=function(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(),this.secondaryCursors.splice(e,1)},e.prototype._mergeCursorsIfNecessary=function(){if(0!==this.secondaryCursors.length){for(var e=this.getAll(),t=[],n=0;n<e.length;n++)t.push({index:n,selection:e[n].getSelection(),viewSelection:e[n].getViewSelection()});t.sort(function(e,t){return e.viewSelection.startLineNumber===t.viewSelection.startLineNumber?e.viewSelection.startColumn-t.viewSelection.startColumn:e.viewSelection.startLineNumber-t.viewSelection.startLineNumber});for(var i=0;i<t.length-1;i++){var r=t[i],s=t[i+1],a=r.viewSelection,c=s.viewSelection;if(c.getStartPosition().isBeforeOrEqual(a.getEndPosition())){var u=r.index<s.index?i:i+1,l=r.index<s.index?i+1:i,d=t[l].index,h=t[u].index,p=t[l].selection,f=t[u].selection;if(!p.equalsSelection(f)){var m,v=p.plusRange(f),g=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,y=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn;d===this.lastAddedCursorIndex?(m=g,this.lastAddedCursorIndex=h):m=y;var _;_=m?new o.Selection(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new o.Selection(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn),t[u].selection=_,e[h].setSelection(_)}for(var b=0;b<t.length;b++)t[b].index>d&&t[b].index--;e.splice(d,1),t.splice(l,1),this._removeSecondaryCursor(d-1),i--}}}},e.prototype.getModeConfiguration=function(){var e,t,i={electricChars:{},autoClosingPairsOpen:{},autoClosingPairsClose:{},surroundingPairs:{}},o=this.model.getMode().richEditSupport;if(o&&o.electricCharacter)try{t=o.electricCharacter.getElectricCharacters()}catch(r){n.onUnexpectedError(r),t=null}if(t)for(e=0;e<t.length;e++)i.electricChars[t[e]]=!0;var s;if(o&&o.characterPair)try{s=o.characterPair.getAutoClosingPairs()}catch(r){n.onUnexpectedError(r),s=null}if(s)for(e=0;e<s.length;e++)i.autoClosingPairsOpen[s[e].open]=s[e].close,i.autoClosingPairsClose[s[e].close]=s[e].open;var a;if(o&&o.characterPair)try{a=o.characterPair.getSurroundingPairs()}catch(r){n.onUnexpectedError(r),a=null}if(a)for(e=0;e<a.length;e++)i.surroundingPairs[a[e].open]=a[e].close;return i},e}();t.CursorCollection=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/supports/suggestSupport",["require","exports","vs/base/common/winjs.base","vs/editor/common/modes/modesFilters","vs/editor/common/modes/supports"],function(e,t,n,i,o){"use strict";function r(e,t,n,i){return n&&0!==n.length?(i||(i=[]),i.push({currentWord:e.getWordUntilPosition(t).word,suggestions:n.slice(0)}),i):i}function s(e){if(e){var t=i.DefaultFilter,n=[];return n.push({currentWord:e.currentWord,suggestions:e.suggestions.filter(function(n){return!!t(e.currentWord,n)}),incomplete:e.incomplete}),n}}var a=function(){function e(e,t){this._modeId=e,this.contribution=t,this.suggest=function(e,n){return t.suggest(e,n)},"function"==typeof t.getSuggestionDetails&&(this.getSuggestionDetails=function(e,n,i){return t.getSuggestionDetails(e,n,i)})}return e.prototype.shouldAutotriggerSuggest=function(e,t,n){var i=this;return o.handleEvent(e,t,function(e,t,r){return i._modeId===e.getId()?i.contribution.disableAutoTrigger?!1:Array.isArray(i.contribution.excludeTokens)?1===i.contribution.excludeTokens.length&&"*"===i.contribution.excludeTokens[0]?!1:!o.isLineToken(t,r-1,i.contribution.excludeTokens,!0):!0:e.suggestSupport?e.suggestSupport.shouldAutotriggerSuggest(t,r,n):!1})},e.prototype.getFilter=function(){return i.DefaultFilter},e.prototype.getTriggerCharacters=function(){return this.contribution.triggerCharacters},e.prototype.shouldShowEmptySuggestionList=function(){return!0},e}();t.SuggestSupport=a;var c=function(){function e(e,t){this._modeId=e,this._editorWorkerService=t}return e.prototype.suggest=function(e,t,n){return this._editorWorkerService.textualSuggest(e,t)},e.prototype.getFilter=function(){return i.StrictPrefix},e.prototype.getTriggerCharacters=function(){return[]},e.prototype.shouldShowEmptySuggestionList=function(){return!0},e.prototype.shouldAutotriggerSuggest=function(e,t,n){var i=this;return o.handleEvent(e,t,function(e,t,o){return i._modeId===e.getId()?!0:e.suggestSupport?e.suggestSupport.shouldAutotriggerSuggest(t,o,n):!1})},e}();t.TextualSuggestSupport=c;var u=function(e){function t(t,i,o,s,a){e.call(this,t,{triggerCharacters:s,disableAutoTrigger:a,excludeTokens:[],suggest:function(e,t){var s=i.getModel(e),a=r(s,t,o,null);return n.TPromise.as(a)}})}return __extends(t,e),t}(a);t.PredefinedResultSuggestSupport=u;var l=function(e){function t(t,n,i,o,s,a){e.call(this,t,{triggerCharacters:s,disableAutoTrigger:a,excludeTokens:[],suggest:function(e,t){return i.textualSuggest(e,t).then(function(i){var s=n.getModel(e),a=r(s,t,o,i);return a})}})}return __extends(t,e),t}(a);t.TextualAndPredefinedResultSuggestSupport=l,t.filterSuggestions=s}),define("vs/editor/common/modes/monarch/monarchDefinition",["require","exports","vs/editor/common/modes/supports/suggestSupport"],function(e,t,n){"use strict";function i(e){return{wordPattern:e.wordDefinition,comments:{lineComment:e.lineComment,blockComment:[e.blockCommentStart,e.blockCommentEnd]},brackets:e.standardBrackets,__electricCharacterSupport:{caseInsensitive:e.ignoreCase,embeddedElectricCharacters:e.outdentTriggers.split("")},__characterPairSupport:{autoClosingPairs:e.autoClosingPairs}}}function o(e,t,i,o){return o.suggestSupport.textualCompletions?new n.TextualAndPredefinedResultSuggestSupport(i,e,t,o.suggestSupport.snippets,o.suggestSupport.triggerCharacters,o.suggestSupport.disableAutoTrigger):new n.PredefinedResultSuggestSupport(i,e,o.suggestSupport.snippets,o.suggestSupport.triggerCharacters,o.suggestSupport.disableAutoTrigger)}t.createRichEditSupport=i,t.createSuggestSupport=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/viewLayout/editorScrollable",["require","exports","vs/base/common/eventEmitter"],function(e,t,n){"use strict";var i=function(e){function t(){e.call(this,[t._SCROLL_EVENT,t._INTERNAL_SIZE_CHANGED_EVENT]),this.scrollTop=0,this.scrollLeft=0,this.scrollWidth=0,this.scrollHeight=0,this.width=0,this.height=0}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(e){e=Math.floor(e),0>e&&(e=0),this.width!==e&&(this.width=e,this.setScrollWidth(this.scrollWidth),this.setScrollLeft(this.scrollLeft))},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.setScrollWidth=function(e){e=Math.floor(e),e<this.width&&(e=this.width),this.scrollWidth!==e&&(this.scrollWidth=e,this.setScrollLeft(this.scrollLeft),this._emitInternalSizeEvent())},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollLeft=function(e){e=Math.floor(e),0>e&&(e=0),e+this.width>this.scrollWidth&&(e=this.scrollWidth-this.width),this.scrollLeft!==e&&(this.scrollLeft=e,this._emitScrollEvent(!1,!0))},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){e=Math.floor(e),0>e&&(e=0),this.height!==e&&(this.height=e,this.setScrollHeight(this.scrollHeight),this.setScrollTop(this.scrollTop))},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.setScrollHeight=function(e){e=Math.floor(e),e<this.height&&(e=this.height),this.scrollHeight!==e&&(this.scrollHeight=e,this.setScrollTop(this.scrollTop),this._emitInternalSizeEvent())},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.setScrollTop=function(e){e=Math.floor(e),0>e&&(e=0),e+this.height>this.scrollHeight&&(e=this.scrollHeight-this.height),this.scrollTop!==e&&(this.scrollTop=e,this._emitScrollEvent(!0,!1))},t.prototype._emitScrollEvent=function(e,n){var i={vertical:e,horizontal:n,scrollTop:this.scrollTop,scrollLeft:this.scrollLeft};this.emit(t._SCROLL_EVENT,i)},t.prototype.addScrollListener=function(e){return this.addListener2(t._SCROLL_EVENT,e)},t.prototype._emitInternalSizeEvent=function(){this.emit(t._INTERNAL_SIZE_CHANGED_EVENT)},t.prototype.addInternalSizeChangeListener=function(e){return this.addListener2(t._INTERNAL_SIZE_CHANGED_EVENT,e)},t._SCROLL_EVENT="scroll",t._INTERNAL_SIZE_CHANGED_EVENT="internalSizeChanged",t}(n.EventEmitter);t.EditorScrollable=i}),define("vs/editor/common/viewModel/characterHardWrappingLineMapper",["require","exports","vs/base/common/strings","vs/editor/common/editorCommon","vs/editor/common/viewModel/prefixSumComputer"],function(e,t,n,i,o){"use strict";function r(e,t,n){var i,o=[],r=0,s=e+t+n;for(i=0;i<s.length;i++)r=Math.max(r,s.charCodeAt(i));for(i=0;r>=i;i++)o[i]=0;for(i=0;i<e.length;i++)o[e.charCodeAt(i)]=a;for(i=0;i<t.length;i++)o[t.charCodeAt(i)]=c;for(i=0;i<n.length;i++)o[n.charCodeAt(i)]=u;return o}var s={index:-1,remainder:-1},a=1,c=2,u=3,l=function(){function e(e,t,n){this.characterClasses=r(e,t,n)}return e.nextVisibleColumn=function(e,t,n,i){return n?e+(t-e%t):e+i},e.prototype.createLineMapping=function(t,r,s,l,h){if(-1===s)return null;var p=0,f="",m="	".charCodeAt(0);if(h!==i.WrappingIndent.None){var v=n.firstNonWhitespaceIndex(t);if(-1!==v){f=t.substring(0,v);for(var g=0;v>g;g++)p=e.nextVisibleColumn(p,r,t.charCodeAt(g)===m,1);h===i.WrappingIndent.Indent&&(f+="	",p=e.nextVisibleColumn(p,r,!0,1)),p>.5*s&&(f="",p=0)}}var g,y,_,b,S,E,w,C,T=this.characterClasses,k=0,x=[],I=0,D=-1,A=0,L=-1,O=0;for(_=0,g=0,y=t.length;y>g;g++){b=t.charCodeAt(g),S=b===m,E=b<T.length?T[b]:0,E===a&&(D=g,A=0);var M=1;n.isFullWidthCharacter(b)&&(M=l),_=e.nextVisibleColumn(_,r,S,M),_>s&&0!==g&&(-1!==D?(w=D,C=A+p):-1!==L?(w=L,C=O+p):(w=g,C=0+p),x[I++]=w-k,k=w,_=e.nextVisibleColumn(C,r,S,M),D=-1,A=0,L=-1,O=0),-1!==D&&(A=e.nextVisibleColumn(A,r,S,M)),-1!==L&&(O=e.nextVisibleColumn(O,r,S,M)),E===c&&(D=g+1,A=0),E===u&&(L=g+1,O=0)}return 0===I?null:(x[I++]=y-k,new d(new o.PrefixSumComputer(x),f))},e}();t.CharacterHardWrappingLineMapperFactory=l;var d=function(){function e(e,t){this._prefixSums=e,this._wrappedLinesIndent=t}return e.prototype.getOutputLineCount=function(){return this._prefixSums.getCount()},e.prototype.getWrappedLinesIndent=function(){return this._wrappedLinesIndent},e.prototype.getInputOffsetOfOutputPosition=function(e,t){return 0===e?t:this._prefixSums.getAccumulatedValue(e-1)+t},e.prototype.getOutputPositionOfInputOffset=function(e,t){this._prefixSums.getIndexOf(e,s),t.outputLineIndex=s.index,t.outputOffset=s.remainder},e}();t.CharacterHardWrappingLineMapping=d}),define("vs/editor/common/viewModel/filteredLineTokens",["require","exports","vs/editor/common/core/arrays","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,n,o){this._original=e,this._startOffset=t,this._endOffset=n,this._deltaStartIndex=o,this.inflatedTokens=i.LineTokensBinaryEncoding.sliceAndInflate(e.getBinaryEncodedTokensMap(),e.getBinaryEncodedTokens(),t,n,o)}return e.prototype.getTokens=function(){return this.inflatedTokens},e.prototype.getFauxIndentLength=function(){return this._deltaStartIndex},e.prototype.getTextLength=function(){return this._endOffset-this._startOffset+this._deltaStartIndex},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this._startOffset!==n._startOffset?!1:this._endOffset!==n._endOffset?!1:this._deltaStartIndex!==n._deltaStartIndex?!1:this._original.equals(n._original)}return!1},e.prototype.findIndexOfOffset=function(e){return n.Arrays.findIndexInSegmentsArray(this.inflatedTokens,e)},e}();t.FilteredLineTokens=o;var r=function(){function e(e,t){this._original=e,this._textLength=t}return e.prototype.getTokens=function(){return i.LineTokensBinaryEncoding.inflateArr(this._original.getBinaryEncodedTokensMap(),this._original.getBinaryEncodedTokens())},e.prototype.getFauxIndentLength=function(){return 0},e.prototype.getTextLength=function(){return this._textLength},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this._original.equals(n._original)}return!1},e.prototype.findIndexOfOffset=function(e){return this._original.findIndexOfOffset(e)},e}();t.IdentityFilteredLineTokens=r}),define("vs/editor/common/viewModel/splitLinesCollection",["require","exports","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/viewModel/filteredLineTokens","vs/editor/common/viewModel/prefixSumComputer"],function(e,t,n,i,o,r,s){"use strict";function a(e,t,n,i,o,r,s){var a=e.createLineMapping(t,n,i,o,r);return null===a?new u(s):new l(a,s)}var c={outputLineIndex:0,outputOffset:0},u=function(){function e(e){this._isVisible=e}return e.prototype.isVisible=function(){return this._isVisible},e.prototype.setVisible=function(e){this._isVisible=e},e.prototype.getOutputLineCount=function(){return this._isVisible?1:0},e.prototype.getOutputLineContent=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");return e.getLineContent(t)},e.prototype.getOutputLineMinColumn=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");return e.getLineMinColumn(t)},e.prototype.getOutputLineMaxColumn=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");return e.getLineMaxColumn(t)},e.prototype.getOutputLineTokens=function(e,t,n,i){if(!this._isVisible)throw new Error("Not supported");return new r.IdentityFilteredLineTokens(e.getLineTokens(t,i),e.getLineMaxColumn(t)-1)},e.prototype.getInputColumnOfOutputPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");return t},e.prototype.getOutputPositionOfInputPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");return new n.Position(e,t)},e}(),l=function(){function e(e,t){this.positionMapper=e,this.wrappedIndent=this.positionMapper.getWrappedLinesIndent(),this.wrappedIndentLength=this.wrappedIndent.length,this.outputLineCount=this.positionMapper.getOutputLineCount(),this._isVisible=t}return e.prototype.isVisible=function(){return this._isVisible},e.prototype.setVisible=function(e){this._isVisible=e},e.prototype.getOutputLineCount=function(){return this._isVisible?this.outputLineCount:0},e.prototype.getInputStartOffsetOfOutputLineIndex=function(e){return this.positionMapper.getInputOffsetOfOutputPosition(e,0)},e.prototype.getInputEndOffsetOfOutputLineIndex=function(e,t,n){return n+1===this.outputLineCount?e.getLineMaxColumn(t)-1:this.positionMapper.getInputOffsetOfOutputPosition(n+1,0)},e.prototype.getOutputLineContent=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");var i=this.getInputStartOffsetOfOutputLineIndex(n),o=this.getInputEndOffsetOfOutputLineIndex(e,t,n),r=e.getLineContent(t).substring(i,o);return n>0&&(r=this.wrappedIndent+r),r},e.prototype.getOutputLineMinColumn=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");return n>0?this.wrappedIndentLength+1:1},e.prototype.getOutputLineMaxColumn=function(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this.getOutputLineContent(e,t,n).length+1},e.prototype.getOutputLineTokens=function(e,t,n,i){if(!this._isVisible)throw new Error("Not supported");var o=this.getInputStartOffsetOfOutputLineIndex(n),s=this.getInputEndOffsetOfOutputLineIndex(e,t,n),a=0;return n>0&&(a=this.wrappedIndentLength),new r.FilteredLineTokens(e.getLineTokens(t,i),o,s,a)},e.prototype.getInputColumnOfOutputPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");var n=t-1;return e>0&&(n<this.wrappedIndentLength?n=0:n-=this.wrappedIndentLength),this.positionMapper.getInputOffsetOfOutputPosition(e,n)+1},e.prototype.getOutputPositionOfInputPosition=function(e,t){if(!this._isVisible)throw new Error("Not supported");this.positionMapper.getOutputPositionOfInputOffset(t-1,c);var i=c.outputLineIndex,o=c.outputOffset+1;return i>0&&(o+=this.wrappedIndentLength),new n.Position(e+i,o)},e}();t.SplitLine=l;var d=function(){function e(e,t,n,i,o,r){this.model=e,this._validModelVersionId=-1,this.tabSize=n,this.wrappingColumn=i,this.columnsForFullWidthChar=o,this.wrappingIndent=r,this.linePositionMapperFactory=t,this._constructLines(!0),this.tmpIndexOfResult={index:0,remainder:0}}return e.prototype.dispose=function(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])},e.prototype._ensureValidState=function(){var e=this.model.getVersionId();if(e!==this._validModelVersionId)throw new Error("SplitLinesCollection: attempt to access a 'newer' model")},e.prototype._constructLines=function(e){var t=this;this.lines=[],e&&(this.hiddenAreasIds=[]);for(var n=[],o=this.model.getLinesContent(),r=o.length,c=this.hiddenAreasIds.map(function(e){return t.model.getDecorationRange(e)}).sort(i.Range.compareRangesUsingStarts),u=1,l=0,d=-1,h=d+1<c.length?l+1:r+2,p=0;r>p;p++){var f=p+1;f===h&&(d++,u=c[d].startLineNumber,l=c[d].endLineNumber,h=d+1<c.length?l+1:r+2);var m=f>=u&&l>=f,v=a(this.linePositionMapperFactory,o[p],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,!m);n[p]=v.getOutputLineCount(),this.lines[p]=v}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new s.PrefixSumComputer(n)},e.prototype.getHiddenAreas=function(){var e=this;return this.hiddenAreasIds.map(function(t){return e.model.getDecorationRange(t)}).sort(i.Range.compareRangesUsingStarts)},e.prototype._reduceRanges=function(e){var t=this;if(0===e.length)return[];for(var n=e.map(function(e){return t.model.validateRange(e)}).sort(i.Range.compareRangesUsingStarts),o=[],r=n[0].startLineNumber,s=n[0].endLineNumber,a=1,c=n.length;c>a;a++){var u=n[a];u.startLineNumber>s+1?(o.push(new i.Range(r,1,s,1)),r=u.startLineNumber,s=u.endLineNumber):u.endLineNumber>s&&(s=u.endLineNumber)}return o.push(new i.Range(r,1,s,1)),o},e.prototype.setHiddenAreas=function(e,t){var n=this,r=this._reduceRanges(e),s=this.hiddenAreasIds.map(function(e){return n.model.getDecorationRange(e)}).sort(i.Range.compareRangesUsingStarts);if(r.length===s.length){for(var a=!1,c=0;c<r.length;c++)if(!r[c].equalsRange(s[c])){a=!0;break}if(!a)return!1}for(var u=[],c=0;c<r.length;c++)u.push({range:r[c],options:{}});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,u);for(var l=r,d=1,h=0,p=-1,f=p+1<l.length?h+1:this.lines.length+2,c=0;c<this.lines.length;c++){var m=c+1;m===f&&(p++,d=l[p].startLineNumber,h=l[p].endLineNumber,f=p+1<l.length?h+1:this.lines.length+2);var v=!1;if(m>=d&&h>=m?this.lines[c].isVisible()&&(this.lines[c].setVisible(!1),v=!0):this.lines[c].isVisible()||(this.lines[c].setVisible(!0),v=!0),v){var g=this.lines[c].getOutputLineCount();this.prefixSumComputer.changeValue(c,g)}}return t(o.ViewEventNames.ModelFlushedEvent,null),!0},e.prototype.inputPositionIsVisible=function(e,t){return 1>e||e>this.lines.length?!1:this.lines[e-1].isVisible()},e.prototype.setTabSize=function(e,t){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1),t(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.setWrappingIndent=function(e,t){return this.wrappingIndent===e?!1:(this.wrappingIndent=e,this._constructLines(!1),t(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.setWrappingColumn=function(e,t,n){return this.wrappingColumn===e&&this.columnsForFullWidthChar===t?!1:(this.wrappingColumn=e,this.columnsForFullWidthChar=t,this._constructLines(!1),n(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.onModelFlushed=function(e,t){this._constructLines(!0),t(o.ViewEventNames.ModelFlushedEvent,null)},e.prototype.onModelLinesDeleted=function(e,t,n,i){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;var r=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,s=this.prefixSumComputer.getAccumulatedValue(n-1);this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1);var a={fromLineNumber:r,toLineNumber:s};i(o.ViewEventNames.LinesDeletedEvent,a)}},e.prototype.onModelLinesInserted=function(e,t,i,r,s){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;for(var c=this.getHiddenAreas(),u=!1,l=new n.Position(t,1),d=0;d<c.length;d++)if(c[d].containsPosition(l)){u=!0;break}for(var h,p,f=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,m=0,v=[],g=[],d=0,y=r.length;y>d;d++){var h=a(this.linePositionMapperFactory,r[d],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,!u);v.push(h),p=h.getOutputLineCount(),m+=p,g.push(p)}this.lines=this.lines.slice(0,t-1).concat(v).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,g);var _={fromLineNumber:f,toLineNumber:f+m-1};s(o.ViewEventNames.LinesInsertedEvent,_)}},e.prototype.onModelLineChanged=function(e,t,n,i){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;var r=t-1,s=this.lines[r].getOutputLineCount(),c=this.lines[r].isVisible(),u=a(this.linePositionMapperFactory,n,this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent,c);this.lines[r]=u;var l=this.lines[r].getOutputLineCount(),d=!1,h=0,p=-1,f=0,m=-1,v=0,g=-1;s>l?(h=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,p=h+l-1,v=p+1,g=v+(s-l)-1,d=!0):l>s?(h=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,p=h+s-1,f=p+1,m=f+(l-s)-1,d=!0):(h=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,p=h+l-1),this.prefixSumComputer.changeValue(r,l);var y,_,b,S;if(p>=h)for(var y=h;p>=y;y++)_={lineNumber:y},i(o.ViewEventNames.LineChangedEvent,_);return m>=f&&(b={fromLineNumber:f,toLineNumber:m},i(o.ViewEventNames.LinesInsertedEvent,b)),g>=v&&(S={fromLineNumber:v,toLineNumber:g},i(o.ViewEventNames.LinesDeletedEvent,S)),d}},e.prototype.getOutputLineCount=function(){return this._ensureValidState(),this.prefixSumComputer.getTotalValue()},e.prototype._toValidOutputLineNumber=function(e){if(1>e)return 1;var t=this.getOutputLineCount();return e>t?t:e},e.prototype.getOutputLineContent=function(e){this._ensureValidState(),e=this._toValidOutputLineNumber(e),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineContent(this.model,t+1,n)},e.prototype.getOutputLineMinColumn=function(e){this._ensureValidState(),e=this._toValidOutputLineNumber(e),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineMinColumn(this.model,t+1,n)},e.prototype.getOutputLineMaxColumn=function(e){this._ensureValidState(),e=this._toValidOutputLineNumber(e),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineMaxColumn(this.model,t+1,n)},e.prototype.getOutputLineTokens=function(e,t){this._ensureValidState(),e=this._toValidOutputLineNumber(e),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var n=this.tmpIndexOfResult.index,i=this.tmpIndexOfResult.remainder;return this.lines[n].getOutputLineTokens(this.model,n+1,i,t)},e.prototype.convertOutputPositionToInputPosition=function(e,t){this._ensureValidState(),e=this._toValidOutputLineNumber(e),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var i=this.tmpIndexOfResult.index,o=this.tmpIndexOfResult.remainder,r=this.lines[i].getInputColumnOfOutputPosition(o,t);return this.model.validatePosition(new n.Position(i+1,r))},e.prototype.convertInputPositionToOutputPosition=function(e,t){this._ensureValidState();for(var i=this.model.validatePosition(new n.Position(e,t)),o=i.lineNumber,r=i.column,s=o-1,a=!1;s>0&&!this.lines[s].isVisible();)s--,a=!0;if(0===s&&!this.lines[s].isVisible())return new n.Position(1,1);var c,u=1+(0===s?0:this.prefixSumComputer.getAccumulatedValue(s-1));return c=a?this.lines[s].getOutputPositionOfInputPosition(u,this.model.getLineMaxColumn(s+1)):this.lines[o-1].getOutputPositionOfInputPosition(u,r)},e}();t.SplitLinesCollection=d}),define("vs/editor/common/viewModel/viewEventHandler",["require","exports","vs/editor/common/editorCommon"],function(e,t,n){"use strict";var i=function(){function e(){this.shouldRender=!0}return e.prototype.onLineMappingChanged=function(){return!1},e.prototype.onModelFlushed=function(){return!1},e.prototype.onModelDecorationsChanged=function(e){return!1},e.prototype.onModelLinesDeleted=function(e){return!1},e.prototype.onModelLineChanged=function(e){return!1},e.prototype.onModelLinesInserted=function(e){return!1},e.prototype.onModelTokensChanged=function(e){return!1},e.prototype.onCursorPositionChanged=function(e){return!1},e.prototype.onCursorSelectionChanged=function(e){return!1},e.prototype.onCursorRevealRange=function(e){return!1},e.prototype.onCursorScrollRequest=function(e){return!1},e.prototype.onConfigurationChanged=function(e){return!1},e.prototype.onLayoutChanged=function(e){return!1},e.prototype.onScrollChanged=function(e){return!1},e.prototype.onZonesChanged=function(){return!1},e.prototype.onScrollWidthChanged=function(e){return!1},e.prototype.onScrollHeightChanged=function(e){return!1},e.prototype.onViewFocusChanged=function(e){return!1},e.prototype.handleEvents=function(e){var t,i,o,r;for(t=0,i=e.length;i>t;t++)switch(o=e[t],r=o.getData(),o.getType()){case n.ViewEventNames.LineMappingChangedEvent:this.shouldRender=this.onLineMappingChanged()||this.shouldRender;break;case n.ViewEventNames.ModelFlushedEvent:this.shouldRender=this.onModelFlushed()||this.shouldRender;break;case n.ViewEventNames.LinesDeletedEvent:this.shouldRender=this.onModelLinesDeleted(r)||this.shouldRender;break;case n.ViewEventNames.LinesInsertedEvent:this.shouldRender=this.onModelLinesInserted(r)||this.shouldRender;break;case n.ViewEventNames.LineChangedEvent:this.shouldRender=this.onModelLineChanged(r)||this.shouldRender;break;case n.ViewEventNames.TokensChangedEvent:this.shouldRender=this.onModelTokensChanged(r)||this.shouldRender;break;case n.ViewEventNames.DecorationsChangedEvent:this.shouldRender=this.onModelDecorationsChanged(r)||this.shouldRender;break;case n.ViewEventNames.CursorPositionChangedEvent:this.shouldRender=this.onCursorPositionChanged(r)||this.shouldRender;break;case n.ViewEventNames.CursorSelectionChangedEvent:this.shouldRender=this.onCursorSelectionChanged(r)||this.shouldRender;break;case n.ViewEventNames.RevealRangeEvent:this.shouldRender=this.onCursorRevealRange(r)||this.shouldRender;break;case n.ViewEventNames.ScrollRequestEvent:this.shouldRender=this.onCursorScrollRequest(r)||this.shouldRender;break;case n.EventType.ConfigurationChanged:this.shouldRender=this.onConfigurationChanged(r)||this.shouldRender;break;case n.EventType.ViewLayoutChanged:this.shouldRender=this.onLayoutChanged(r)||this.shouldRender;break;case n.EventType.ViewScrollChanged:this.shouldRender=this.onScrollChanged(r)||this.shouldRender;break;case n.EventType.ViewZonesChanged:this.shouldRender=this.onZonesChanged()||this.shouldRender;break;case n.EventType.ViewScrollWidthChanged:this.shouldRender=this.onScrollWidthChanged(r)||this.shouldRender;break;case n.EventType.ViewScrollHeightChanged:this.shouldRender=this.onScrollHeightChanged(r)||this.shouldRender;break;case n.EventType.ViewFocusChanged:this.shouldRender=this.onViewFocusChanged(r)||this.shouldRender;break;default:console.info("View received unknown event: "),console.info(o)}},e}();t.ViewEventHandler=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewPart",["require","exports","vs/editor/common/viewModel/viewEventHandler"],function(e,t,n){"use strict";var i=function(e){function t(t){e.call(this),this._context=t,this._context.addEventHandler(this),this._modificationBeforeRenderingRunners=[],this._modificationRunners=[]}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._modificationBeforeRenderingRunners=[],this._modificationRunners=[]},t.prototype._requestModificationFrameBeforeRendering=function(e){this._modificationBeforeRenderingRunners.push(e)},t.prototype._requestModificationFrame=function(e){this._modificationRunners.push(e)},t.prototype.onBeforeForcedLayout=function(){if(this._modificationBeforeRenderingRunners.length>0){for(var e=0;e<this._modificationBeforeRenderingRunners.length;e++)this._modificationBeforeRenderingRunners[e]();this._modificationBeforeRenderingRunners=[]}},t.prototype.onReadAfterForcedLayout=function(e){this.shouldRender&&this._render(e)},t.prototype.onWriteAfterForcedLayout=function(){this.shouldRender&&(this.shouldRender=!1,this._executeModificationRunners())},t.prototype._executeModificationRunners=function(){if(this._modificationRunners.length>0){for(var e=0;e<this._modificationRunners.length;e++)this._modificationRunners[e]();this._modificationRunners=[]}},t.prototype._render=function(e){throw new Error("Implement me!")},t}(n.ViewEventHandler);t.ViewPart=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./currentLineHighlight"],function(e,t,n){"use strict";var i=function(e){function t(t,n){e.call(this),this._context=t,this._layoutProvider=n,this._selectionIsEmpty=!0,this._primaryCursorIsInEditableRange=!0,this._primaryCursorLineNumber=1,
this._scrollWidth=this._layoutProvider.getScrollWidth(),this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null},t.prototype.onModelFlushed=function(){return this._primaryCursorIsInEditableRange=!0,this._selectionIsEmpty=!0,this._primaryCursorLineNumber=1,this._scrollWidth=this._layoutProvider.getScrollWidth(),!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){var t=!1;return this._primaryCursorIsInEditableRange!==e.isInEditableRange&&(this._primaryCursorIsInEditableRange=e.isInEditableRange,t=!0),this._primaryCursorLineNumber!==e.position.lineNumber&&(this._primaryCursorLineNumber=e.position.lineNumber,t=!0),t},t.prototype.onCursorSelectionChanged=function(e){var t=e.selection.isEmpty();return this._selectionIsEmpty!==t?(this._selectionIsEmpty=t,!0):!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return this._scrollWidth!==e?(this._scrollWidth=e,!0):!1},t.prototype.shouldCallRender2=function(e){return this.shouldRender?(this.shouldRender=!1,this._scrollWidth=e.scrollWidth,!0):!1},t.prototype.render2=function(e){return e===this._primaryCursorLineNumber&&this._shouldShowCurrentLine()?['<div class="current-line" style="width:',String(this._scrollWidth),"px; height:",String(this._context.configuration.editor.lineHeight),'px;"></div>']:null},t.prototype._shouldShowCurrentLine=function(){return this._selectionIsEmpty&&this._primaryCursorIsInEditableRange&&!this._context.configuration.editor.readOnly},t}(n.ViewEventHandler);t.CurrentLineHighlightOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/decorations/decorations",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./decorations"],function(e,t,n){"use strict";var i=function(e){function t(t){e.call(this),this._context=t,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t=e.getDecorationsInViewport();t=t.filter(function(e){return!!e.options.className}),t=t.sort(function(e,t){return e.options.className<t.options.className?-1:e.options.className>t.options.className?1:e.range.startLineNumber===t.range.startLineNumber?e.range.startColumn===t.range.startColumn?e.range.endLineNumber===t.range.endLineNumber?e.range.endColumn-t.range.endColumn:e.range.endLineNumber-t.range.endLineNumber:e.range.startColumn-t.range.startColumn:e.range.startLineNumber-t.range.startLineNumber});var n={};return this._renderWholeLineDecorations(e,t,n),this._renderNormalDecorations(e,t,n),this._renderResult=n,!0},t.prototype._renderWholeLineDecorations=function(e,t,n){for(var i=String(this._context.configuration.editor.lineHeight),o=0,r=t.length;r>o;o++){var s=t[o];if(s.options.isWholeLine)for(var a=['<div class="cdr ',s.options.className,'" style="left:0;width:100%;height:',i,'px;"></div>'].join(""),c=s.range.startLineNumber,u=s.range.endLineNumber,l=c;u>=l;l++)if(e.lineIsVisible(l)){var d=String(l);n.hasOwnProperty(d)?n[d].push(a):n[d]=[a]}}},t.prototype._renderNormalDecorations=function(e,t,n){for(var i=String(this._context.configuration.editor.lineHeight),o=0,r=t.length;r>o;o++){var s=t[o];if(!s.options.isWholeLine){var a=e.linesVisibleRangesForRange(s.range,!1);if(a)for(var c=s.options.className,u=0,l=a.length;l>u;u++){var d=a[u],h=String(d.lineNumber),p=void 0;n.hasOwnProperty(h)?p=n[h]:(p=[],n[h]=p);for(var f=0,m=d.ranges.length;m>f;f++){var v=d.ranges[f];p.push('<div class="cdr '),p.push(c),p.push('" style="left:'),p.push(String(v.left)),p.push("px;width:"),p.push(String(v.width)),p.push("px;height:"),p.push(i),p.push('px;"></div>')}}}}},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.DecorationsOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/glyphMargin/glyphMargin",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./glyphMargin"],function(e,t,n){"use strict";var i=function(e){function t(t){e.call(this),this._context=t,this._glyphMarginLeft=0,this._glyphMarginWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;if(this.shouldRender=!1,!this._context.configuration.editor.glyphMargin)return this._renderResult=null,!1;var t,n,i,o,r,s,a,c,u,l={},d=0,h=e.getDecorationsInViewport(),p=this._context.configuration.editor.lineHeight.toString(),f={};for(i=0,o=h.length;o>i;i++)if(t=h[i],t.options.glyphMarginClassName)for(n=t.range,c=n.startLineNumber;c<=n.endLineNumber;c++)e.lineIsVisible(c)&&(u=c.toString(),f.hasOwnProperty(u)||(f[u]={}),f[u][t.options.glyphMarginClassName]=!0);var m=this._glyphMarginLeft.toString(),v=this._glyphMarginWidth.toString(),g='" style="left:'+m+"px;width:"+v+"px;height:"+p+'px;"></div>';for(u in f){r=f[u],a=[],a.push('<div class="cgmr');for(s in r)d++,a.push(" "),a.push(s);a.push(g),l[u]=a}return this._renderResult=l,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.GlyphMarginOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lineNumbers/lineNumbers",["require","exports","vs/base/common/platform","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/editorBrowser","vs/css!./lineNumbers"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t){e.call(this),this._context=t,this._lineNumbersLeft=0,this._lineNumbersWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!1},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._lineNumbersLeft=e.lineNumbersLeft,this._lineNumbersWidth=e.lineNumbersWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;if(this.shouldRender=!1,!this._context.configuration.editor.lineNumbers)return this._renderResult=null,!1;var t,i,r={},s=n.isLinux?this._context.configuration.editor.lineHeight%2===0?" lh-even":" lh-odd":"",a=this._context.configuration.editor.lineHeight.toString(),c='<div class="'+o.ClassNames.LINE_NUMBERS+s+'" style="left:'+this._lineNumbersLeft.toString()+"px;width:"+this._lineNumbersWidth.toString()+"px;height:"+a+'px;">';for(t=e.visibleRange.startLineNumber;t<=e.visibleRange.endLineNumber;t++)if(i=this._context.model.getLineRenderLineNumber(t)){var u=[c,this._context.model.getLineRenderLineNumber(t),"</div>"];r[t.toString()]=u}return this._renderResult=r,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(i.ViewEventHandler);t.LineNumbersOverlay=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/linesDecorations/linesDecorations",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./linesDecorations"],function(e,t,n){"use strict";var i=function(e){function t(t){e.call(this),this._context=t,this._decorationsLeft=0,this._decorationsWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._decorationsLeft=e.decorationsLeft,this._decorationsWidth=e.decorationsWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t,n,i,o,r,s,a,c,u,l={},d=0,h=e.getDecorationsInViewport(),p=this._context.configuration.editor.lineHeight.toString(),f={};for(i=0,o=h.length;o>i;i++)if(t=h[i],t.options.linesDecorationsClassName)for(n=t.range,c=n.startLineNumber;c<=n.endLineNumber;c++)e.lineIsVisible(c)&&(u=c.toString(),f.hasOwnProperty(u)||(f[u]={}),f[u][t.options.linesDecorationsClassName]=!0);var m=this._decorationsLeft.toString(),v=this._decorationsWidth.toString(),g='" style="left:'+m+"px;width:"+v+"px;height:"+p+'px;"></div>';for(u in f){r=f[u],a=[],a.push('<div class="cldr');for(s in r)d++,a.push(" "),a.push(s);a.push(g),l[u]=a}return this._renderResult=l,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.LinesDecorationsOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overlayWidgets/overlayWidgets",["require","exports","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart","vs/css!./overlayWidgets"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t){e.call(this,t),this._widgets={},this._verticalScrollbarWidth=0,this._horizontalScrollbarHeight=0,this._editorHeight=0,this.domNode=document.createElement("div"),this.domNode.className=i.ClassNames.OVERLAY_WIDGETS}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._widgets=null},t.prototype.onLayoutChanged=function(e){var t=this;return this._verticalScrollbarWidth=e.verticalScrollbarWidth,this._horizontalScrollbarHeight=e.horizontalScrollbarHeight,this._editorHeight=e.height,this._requestModificationFrame(function(){n.StyleMutator.setWidth(t.domNode,e.width)}),!0},t.prototype.addWidget=function(e){this._widgets[e.getId()]={widget:e,preference:null};var t=e.getDomNode();t.style.position="absolute",t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t)},t.prototype.setWidgetPosition=function(e,t){var n=this,i=this._widgets[e.getId()];return i.preference===t?!1:(i.preference=t,this._requestModificationFrame(function(){n._widgets.hasOwnProperty(e.getId())&&n._renderWidget(i)}),!0)},t.prototype.removeWidget=function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t],i=n.widget.getDomNode();delete this._widgets[t],i.parentNode.removeChild(i)}},t.prototype._renderWidget=function(e){var t="data-editor-restoreStyleTop",o=e.widget.getDomNode();if(null!==e.preference)if(e.preference===i.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER)o.hasAttribute(t)||o.setAttribute(t,o.style.top),n.StyleMutator.setTop(o,0),n.StyleMutator.setRight(o,2*this._verticalScrollbarWidth);else if(e.preference===i.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER){o.hasAttribute(t)||o.setAttribute(t,o.style.top);var r=o.clientHeight;n.StyleMutator.setTop(o,this._editorHeight-r-2*this._horizontalScrollbarHeight),n.StyleMutator.setRight(o,2*this._verticalScrollbarWidth)}else e.preference===i.OverlayWidgetPositionPreference.TOP_CENTER&&(o.hasAttribute(t)||o.setAttribute(t,o.style.top),n.StyleMutator.setTop(o,0),o.style.right="50%");else if(o.hasAttribute(t)){var s=o.getAttribute(t);o.removeAttribute(t),o.style.top=s}},t.prototype._render=function(e){var t,n=this;this._requestModificationFrame(function(){for(t in n._widgets)n._widgets.hasOwnProperty(t)&&n._renderWidget(n._widgets[t])})},t.prototype.onReadAfterForcedLayout=function(e){return this._render(e),null},t.prototype.onWriteAfterForcedLayout=function(){this._executeModificationRunners()},t}(o.ViewPart);t.ViewOverlayWidgets=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overviewRuler/overviewRuler",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl"],function(e,t,n,i){"use strict";var o=function(e){function t(t,n,o,r,s,a){e.call(this),this._context=t,this._overviewRuler=new i.OverviewRulerImpl(0,n,o,this._context.configuration.editor.lineHeight,r,s,a),this._context.addEventHandler(this)}return __extends(t,e),t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._context.removeEventHandler(this),this._overviewRuler.dispose()},t.prototype.onConfigurationChanged=function(e){return e.lineHeight?(this._overviewRuler.setLineHeight(this._context.configuration.editor.lineHeight,!0),!0):!1},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return!0},t.prototype.onScrollHeightChanged=function(e){return this._overviewRuler.setScrollHeight(e,!0),!0},t.prototype.getDomNode=function(){return this._overviewRuler.getDomNode()},t.prototype.setLayout=function(e){this._overviewRuler.setLayout(e,!0)},t.prototype.setZones=function(e){this._overviewRuler.setZones(e,!0)},t}(n.ViewEventHandler);t.OverviewRuler=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/rulers/rulers",["require","exports","vs/base/browser/styleMutator","vs/editor/browser/view/viewPart","vs/css!./rulers"],function(e,t,n,i){"use strict";var o=function(e){function t(t,n){e.call(this,t),this._layoutProvider=n,this.domNode=document.createElement("div"),this.domNode.className="view-rulers",this._rulers=this._context.configuration.editor.rulers,this._height=this._context.configuration.editor.layoutInfo.contentHeight,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.typicalHalfwidthCharacterWidth}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.onConfigurationChanged=function(e){return e.rulers||e.layoutInfo||e.typicalHalfwidthCharacterWidth?(this._rulers=this._context.configuration.editor.rulers,this._height=this._context.configuration.editor.layoutInfo.contentHeight,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.typicalHalfwidthCharacterWidth,!0):!1},t.prototype.onScrollHeightChanged=function(e){return!0},t.prototype._render=function(e){var t=this;this._requestModificationFrame(function(){for(var e=t.domNode.children.length,i=Math.max(e,t._rulers.length),o=0;i>o;o++)if(o>=t._rulers.length)t.domNode.removeChild(t.domNode.lastChild);else{var r=void 0;e>o?r=t.domNode.children[o]:(r=document.createElement("div"),r.className="view-ruler",t.domNode.appendChild(r)),n.StyleMutator.setHeight(r,Math.min(t._layoutProvider.getTotalHeight(),1e6)),n.StyleMutator.setLeft(r,t._rulers[o]*t._typicalHalfwidthCharacterWidth)}})},t}(i.ViewPart);t.Rulers=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/selections/selections",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./selections"],function(e,t,n){"use strict";function i(e){return new s(e)}function o(e){return new a(e.lineNumber,e.ranges.map(i))}var r;!function(e){e[e.EXTERN=0]="EXTERN",e[e.INTERN=1]="INTERN",e[e.FLAT=2]="FLAT"}(r||(r={}));var s=function(){function e(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}return e}(),a=function(){function e(e,t){this.lineNumber=e,this.ranges=t}return e}(),c=navigator.userAgent.indexOf("Trident/7.0")>=0||navigator.userAgent.indexOf("Edge/12")>=0,u=function(e){function t(t){e.call(this),this._previousFrameVisibleRangesWithStyle=[],this._context=t,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._selections=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return this._selections=[e.selection],this._selections=this._selections.concat(e.secondarySelections),!0},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype._visibleRangesHaveGaps=function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)if(i=e[t],i.ranges.length>1)return!0;return!1},t.prototype._enrichVisibleRangesWithStyle=function(e,t){var n,i,o,s,a,c,u,l,d,h,p,f=null,m=null;if(t&&t.length>0&&e.length>0){for(var v=e[0].lineNumber,h=0;!f&&h<t.length;h++)t[h].lineNumber===v&&(f=t[h].ranges[0]);for(var g=e[e.length-1].lineNumber,h=t.length-1;!m&&h>=0;h--)t[h].lineNumber===g&&(m=t[h].ranges[0]);f&&!f.startStyle&&(f=null),m&&!m.startStyle&&(m=null)}for(h=0,p=e.length;p>h;h++)n=e[h].ranges[0],i=n.left,o=n.left+n.width,l={top:r.EXTERN,bottom:r.EXTERN},d={top:r.EXTERN,bottom:r.EXTERN},h>0?(s=e[h-1].ranges[0].left,a=e[h-1].ranges[0].left+e[h-1].ranges[0].width,i===s?l.top=r.FLAT:i>s&&(l.top=r.INTERN),o===a?d.top=r.FLAT:o>s&&a>o&&(d.top=r.INTERN)):f&&(l.top=f.startStyle.top,d.top=f.endStyle.top),p>h+1?(c=e[h+1].ranges[0].left,u=e[h+1].ranges[0].left+e[h+1].ranges[0].width,i===c?l.bottom=r.FLAT:i>c&&u>i&&(l.bottom=r.INTERN),o===u?d.bottom=r.FLAT:u>o&&(d.bottom=r.INTERN)):m&&(l.bottom=m.startStyle.bottom,d.bottom=m.endStyle.bottom),n.startStyle=l,n.endStyle=d},t.prototype._getVisibleRangesWithStyle=function(e,t,n){var i=t.linesVisibleRangesForRange(e,!0)||[],r=i.map(o),s=this._visibleRangesHaveGaps(r);return c||s||!this._context.configuration.editor.roundedSelection||this._enrichVisibleRangesWithStyle(r,n),r},t.prototype._createSelectionPiece=function(e,t,n,i,o,r){e.push('<div class="cslr '),e.push(i),e.push('" style="top:'),e.push(t.toString()),e.push("px;left:"),e.push(o.toString()),e.push("px;width:"),e.push(r.toString()),e.push("px;height:"),e.push(n),e.push('px;"></div>')},t.prototype._actualRenderOneSelection=function(e,n,i){var o,s,a,c,u,l,d,h,p=i.length>0&&i[0].ranges[0].startStyle,f=this._context.configuration.editor.lineHeight.toString(),m=(this._context.configuration.editor.lineHeight-1).toString(),v=0,g=i.length>0?i[0].lineNumber:0,y=i.length>0?i[i.length-1].lineNumber:0;for(c=0,u=i.length;u>c;c++){o=i[c];var _=o.lineNumber,b=n&&(_===y||_===g)?m:f,S=n&&_===g?1:0;for(e.hasOwnProperty(_.toString())?s=e[_.toString()]:(s=[],e[_.toString()]=s),l=0,d=o.ranges.length;d>l;l++)h=o.ranges[l],p&&(h.startStyle.top!==r.INTERN&&h.startStyle.bottom!==r.INTERN||(v++,this._createSelectionPiece(s,S,b,t.SELECTION_CLASS_NAME,h.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH),a=t.EDITOR_BACKGROUND_CLASS_NAME,h.startStyle.top===r.INTERN&&(a+=" "+t.SELECTION_TOP_RIGHT),h.startStyle.bottom===r.INTERN&&(a+=" "+t.SELECTION_BOTTOM_RIGHT),v++,this._createSelectionPiece(s,S,b,a,h.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH)),h.endStyle.top!==r.INTERN&&h.endStyle.bottom!==r.INTERN||(v++,this._createSelectionPiece(s,S,b,t.SELECTION_CLASS_NAME,h.left+h.width,t.ROUNDED_PIECE_WIDTH),a=t.EDITOR_BACKGROUND_CLASS_NAME,h.endStyle.top===r.INTERN&&(a+=" "+t.SELECTION_TOP_LEFT),h.endStyle.bottom===r.INTERN&&(a+=" "+t.SELECTION_BOTTOM_LEFT),v++,this._createSelectionPiece(s,S,b,a,h.left+h.width,t.ROUNDED_PIECE_WIDTH))),a=t.SELECTION_CLASS_NAME,p&&(h.startStyle.top===r.EXTERN&&(a+=" "+t.SELECTION_TOP_LEFT),h.startStyle.bottom===r.EXTERN&&(a+=" "+t.SELECTION_BOTTOM_LEFT),h.endStyle.top===r.EXTERN&&(a+=" "+t.SELECTION_TOP_RIGHT),h.endStyle.bottom===r.EXTERN&&(a+=" "+t.SELECTION_BOTTOM_RIGHT)),v++,this._createSelectionPiece(s,S,b,a,h.left,h.width)}return v},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t,n,i,o={},r=0,s=[];for(i=0;i<this._selections.length;i++)t=this._selections[i],t.isEmpty()?s.push(null):(n=this._getVisibleRangesWithStyle(t,e,this._previousFrameVisibleRangesWithStyle[i]),s.push(n),r+=this._actualRenderOneSelection(o,this._selections.length>1,n));return this._previousFrameVisibleRangesWithStyle=s,this._renderResult=o,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t.SELECTION_CLASS_NAME="selected-text",t.SELECTION_TOP_LEFT="top-left-radius",t.SELECTION_BOTTOM_LEFT="bottom-left-radius",t.SELECTION_TOP_RIGHT="top-right-radius",t.SELECTION_BOTTOM_RIGHT="bottom-right-radius",t.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",t.ROUNDED_PIECE_WIDTH=10,t}(n.ViewEventHandler);t.SelectionsOverlay=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/viewCursors/viewCursors",["require","exports","vs/base/browser/browser","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart","vs/editor/browser/viewParts/viewCursors/viewCursor","vs/css!./viewCursors"],function(e,t,n,i,o,r,s){"use strict";var a;!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Blink=2]="Blink"}(a||(a={}));var c=function(e){function t(t){e.call(this,t),this._primaryCursor=new s.ViewCursor(this._context,!1),this._secondaryCursors=[],this._domNode=document.createElement("div"),this._updateDomClassName(),n.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._blinkTimer=-1,this._editorHasFocus=!1,this._updateBlinking()}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),-1!==this._blinkTimer&&(window.clearInterval(this._blinkTimer),this._blinkTimer=-1)},t.prototype.getDomNode=function(){return this._domNode},t.prototype.onModelFlushed=function(){this._primaryCursor.onModelFlushed();for(var e=0,t=this._secondaryCursors.length;t>e;e++){var n=this._secondaryCursors[e].getDomNode();n.parentNode.removeChild(n)}return this._secondaryCursors=[],!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onModelTokensChanged=function(e){var t=function(t){return e.fromLineNumber<=t.lineNumber&&t.lineNumber<=e.toLineNumber};if(t(this._primaryCursor.getPosition()))return!0;for(var n=0;n<this._secondaryCursors.length;n++)if(t(this._secondaryCursors[n].getPosition()))return!0;return!1},t.prototype.onCursorPositionChanged=function(e){if(this._primaryCursor.onCursorPositionChanged(e.position,e.isInEditableRange),this._updateBlinking(),this._secondaryCursors.length<e.secondaryPositions.length)for(var t=e.secondaryPositions.length-this._secondaryCursors.length,n=0;t>n;n++){var i=new s.ViewCursor(this._context,!0);this._primaryCursor.getDomNode().parentNode.insertBefore(i.getDomNode(),this._primaryCursor.getDomNode().nextSibling),this._secondaryCursors.push(i)}else if(this._secondaryCursors.length>e.secondaryPositions.length)for(var o=this._secondaryCursors.length-e.secondaryPositions.length,n=0;o>n;n++)this._secondaryCursors[0].getDomNode().parentNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var n=0;n<e.secondaryPositions.length;n++)this._secondaryCursors[n].onCursorPositionChanged(e.secondaryPositions[n],e.isInEditableRange);return!0},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onConfigurationChanged=function(e){this._primaryCursor.onConfigurationChanged(e),this._updateBlinking(),e.cursorStyle&&this._updateDomClassName();for(var t=0,n=this._secondaryCursors.length;n>t;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.onViewFocusChanged=function(e){return this._editorHasFocus=e,this._updateBlinking(),!1},t.prototype.getPosition=function(){return this._primaryCursor.getPosition()},t.prototype._getRenderType=function(){if(this._editorHasFocus){if(this._primaryCursor.getIsInEditableRange()&&!this._context.configuration.editor.readOnly)switch(this._context.configuration.editor.cursorBlinking){case"blink":return a.Blink;case"visible":return a.Visible;case"hidden":return a.Hidden;default:return a.Blink}return a.Visible}return a.Hidden},t.prototype._updateBlinking=function(){var e=this;-1!==this._blinkTimer&&(window.clearInterval(this._blinkTimer),this._blinkTimer=-1);var n=this._getRenderType();n===a.Visible||n===a.Blink?this._show():this._hide(),n===a.Blink&&(this._blinkTimer=window.setInterval(function(){return e._blink()},t.BLINK_INTERVAL))},t.prototype._updateDomClassName=function(){this._domNode.className=this._getClassName()},t.prototype._getClassName=function(){var e,t=o.ClassNames.VIEW_CURSORS_LAYER;switch(this._context.configuration.editor.cursorStyle){case i.TextEditorCursorStyle.Line:e="cursor-line-style";break;case i.TextEditorCursorStyle.Block:e="cursor-block-style";break;case i.TextEditorCursorStyle.Underline:e="cursor-underline-style";break;default:e="cursor-line-style"}return t+" "+e},t.prototype._blink=function(){this._isVisible?this._hide():this._show()},t.prototype._show=function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;t>e;e++)this._secondaryCursors[e].show();this._isVisible=!0},t.prototype._hide=function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;t>e;e++)this._secondaryCursors[e].hide();this._isVisible=!1},t.prototype._render=function(e){var t=this;this._primaryCursor.prepareRender(e);for(var n=0,i=this._secondaryCursors.length;i>n;n++)this._secondaryCursors[n].prepareRender(e);this._requestModificationFrame(function(){t._primaryCursor.render(e);for(var n=0,i=t._secondaryCursors.length;i>n;n++)t._secondaryCursors[n].render(e)})},t.BLINK_INTERVAL=500,t}(r.ViewPart);t.ViewCursors=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/viewZones/viewZones",["require","exports","vs/base/common/errors","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(t,n){e.call(this,t),this._whitespaceManager=n,this.domNode=document.createElement("div"),this.domNode.className=o.ClassNames.VIEW_ZONES,this.domNode.style.position="absolute",this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._zones={}}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._whitespaceManager=null,this._zones={}},t.prototype._recomputeWhitespacesProps=function(){var e,t=this,n={},o=!1;for(e in this._zones)if(this._zones.hasOwnProperty(e)){var r=this._zones[e],s=this._computeWhitespaceProps(r.delegate);
this._whitespaceManager.changeWhitespace(parseInt(e,10),s.afterViewLineNumber,s.heightInPx)&&(this._safeCallOnComputedHeight(r.delegate,s.heightInPx),n[e]=s.heightInPx,o=!0)}return o&&this._requestModificationFrame(function(){for(e in t._zones)t._zones.hasOwnProperty(e)&&n.hasOwnProperty(e)&&i.StyleMutator.setHeight(t._zones[e].delegate.domNode,n[e])}),o},t.prototype.onConfigurationChanged=function(e){return e.lineHeight?this._recomputeWhitespacesProps():!1},t.prototype.onLineMappingChanged=function(){return this._recomputeWhitespacesProps()},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype._getZoneOrdinal=function(e){return"undefined"!=typeof e.afterColumn?e.afterColumn:1e4},t.prototype._computeWhitespaceProps=function(e){if(0===e.afterLineNumber)return{afterViewLineNumber:0,heightInPx:this._heightInPixels(e)};var t;if("undefined"!=typeof e.afterColumn)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var n=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t={lineNumber:n,column:this._context.model.getModelLineMaxColumn(n)}}var i;i=t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});var o=this._context.model.convertModelPositionToViewPosition(t.lineNumber,t.column),r=this._context.model.modelPositionIsVisible(i);return{afterViewLineNumber:o.lineNumber,heightInPx:r?this._heightInPixels(e):0}},t.prototype.addZone=function(e){var t=this._computeWhitespaceProps(e),n=this._whitespaceManager.addWhitespace(t.afterViewLineNumber,this._getZoneOrdinal(e),t.heightInPx),o={whitespaceId:n,delegate:e,isVisible:!1};return this._safeCallOnComputedHeight(o.delegate,t.heightInPx),this._requestModificationFrame(function(){o.delegate.domNode.hasAttribute("monaco-view-zone")&&(o.delegate.domNode.style.position="absolute",i.StyleMutator.setHeight(o.delegate.domNode,t.heightInPx),o.delegate.domNode.style.width="100%",i.StyleMutator.setDisplay(o.delegate.domNode,"none"))}),this._zones[o.whitespaceId.toString()]=o,o.delegate.domNode.setAttribute("monaco-view-zone",o.whitespaceId.toString()),this.domNode.appendChild(o.delegate.domNode),o.whitespaceId},t.prototype.removeZone=function(e){if(this._zones.hasOwnProperty(e.toString())){var t=this._zones[e.toString()];return delete this._zones[e.toString()],this._whitespaceManager.removeWhitespace(t.whitespaceId),t.delegate.domNode.removeAttribute("monaco-visible-view-zone"),t.delegate.domNode.removeAttribute("monaco-view-zone"),this._requestModificationFrame(function(){t.delegate.domNode.hasAttribute("monaco-view-zone")||t.delegate.domNode.parentNode&&t.delegate.domNode.parentNode.removeChild(t.delegate.domNode)}),!0}return!1},t.prototype.layoutZone=function(e){var t=!1;if(this._zones.hasOwnProperty(e.toString())){var n=this._zones[e.toString()],i=this._computeWhitespaceProps(n.delegate);t=this._whitespaceManager.changeWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx)||t}return t},t.prototype.shouldSuppressMouseDownOnViewZone=function(e){if(this._zones.hasOwnProperty(e.toString())){var t=this._zones[e.toString()];return t.delegate.suppressMouseDown}return!1},t.prototype._heightInPixels=function(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._context.configuration.editor.lineHeight*e.heightInLines:this._context.configuration.editor.lineHeight},t.prototype._safeCallOnComputedHeight=function(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(i){n.onUnexpectedError(i)}},t.prototype._safeCallOnDomNodeTop=function(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(i){n.onUnexpectedError(i)}},t.prototype._render=function(e){var t=this,n=this._whitespaceManager.getWhitespaceViewportData();this._requestModificationFrame(function(){var o,r,s={},a=!1;for(o=0,r=n.length;r>o;o++)s[n[o].id.toString()]=n[o],a=!0;var c,u;for(c in t._zones)t._zones.hasOwnProperty(c)&&(u=t._zones[c],s.hasOwnProperty(c)?(i.StyleMutator.setTop(u.delegate.domNode,s[c].verticalOffset-e.bigNumbersDelta),i.StyleMutator.setHeight(u.delegate.domNode,s[c].height),u.isVisible||(i.StyleMutator.setDisplay(u.delegate.domNode,"block"),u.delegate.domNode.setAttribute("monaco-visible-view-zone","true"),u.isVisible=!0),t._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(s[c].verticalOffset))):(u.isVisible&&(i.StyleMutator.setDisplay(u.delegate.domNode,"none"),u.delegate.domNode.removeAttribute("monaco-visible-view-zone"),u.isVisible=!1),t._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))));a&&i.StyleMutator.setWidth(t.domNode,e.scrollWidth)})},t}(r.ViewPart);t.ViewZones=s}),define("vs/editor/common/viewModel/viewModelCursors",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t){this.configuration=e,this.converter=t,this.lastCursorPositionChangedEvent=null,this.lastCursorSelectionChangedEvent=null}return e.prototype.getSelections=function(){if(this.lastCursorSelectionChangedEvent){var e=[];e.push(this.converter.convertModelSelectionToViewSelection(this.lastCursorSelectionChangedEvent.selection));for(var t=0,n=this.lastCursorSelectionChangedEvent.secondarySelections.length;n>t;t++)e.push(this.converter.convertModelSelectionToViewSelection(this.lastCursorSelectionChangedEvent.secondarySelections[t]));return e}return[new i.Selection(1,1,1,1)]},e.prototype.onCursorPositionChanged=function(e,t){this.lastCursorPositionChangedEvent=e;var n=this.converter.validateViewPosition(e.viewPosition.lineNumber,e.viewPosition.column,e.position),i=this.configuration.editor.stopRenderingLineAfter;-1!==i&&n.column>i&&(n=n.clone(),n.column=i);for(var r=[],s=0,a=e.secondaryPositions.length;a>s;s++)r[s]=this.converter.validateViewPosition(e.secondaryViewPositions[s].lineNumber,e.secondaryViewPositions[s].column,e.secondaryPositions[s]),-1!==i&&r[s].column>i&&(r[s]=r[s].clone(),r[s].column=i);var c={position:n,secondaryPositions:r,isInEditableRange:e.isInEditableRange};t(o.ViewEventNames.CursorPositionChangedEvent,c)},e.prototype.onCursorSelectionChanged=function(e,t){this.lastCursorSelectionChangedEvent=e;for(var n=this.converter.validateViewSelection(e.viewSelection,e.selection),i=[],r=0,s=e.secondarySelections.length;s>r;r++)i[r]=this.converter.validateViewSelection(e.secondaryViewSelections[r],e.secondarySelections[r]);var a={selection:n,secondarySelections:i};t(o.ViewEventNames.CursorSelectionChangedEvent,a)},e.prototype.onCursorRevealRange=function(e,t){var i=null;if(e.viewRange){var r=this.converter.validateViewPosition(e.viewRange.startLineNumber,e.viewRange.startColumn,e.range.getStartPosition()),s=this.converter.validateViewPosition(e.viewRange.endLineNumber,e.viewRange.endColumn,e.range.getEndPosition());i=new n.Range(r.lineNumber,r.column,s.lineNumber,s.column)}else i=this.converter.convertModelRangeToViewRange(e.range);var a={range:i,verticalType:e.verticalType,revealHorizontal:e.revealHorizontal};t(o.ViewEventNames.RevealRangeEvent,a)},e.prototype.onCursorScrollRequest=function(e,t){var n={deltaLines:e.deltaLines};t(o.ViewEventNames.ScrollRequestEvent,n)},e.prototype.onLineMappingChanged=function(e){this.lastCursorPositionChangedEvent&&this.onCursorPositionChanged(this.lastCursorPositionChangedEvent,e),this.lastCursorSelectionChangedEvent&&this.onCursorSelectionChanged(this.lastCursorSelectionChangedEvent,e)},e}();t.ViewModelCursors=r}),define("vs/editor/common/viewModel/viewModelDecorations",["require","exports","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this.id=e.id,this.options=e.options,this.ownerId=e.ownerId,this.modelRange=e.range,this.range=t}return e}(),r=function(){function e(e,t,n){this.editorId=e,this.configuration=t,this.converter=n,this.decorations=[],this._clearCachedModelDecorationsResolver()}return e.prototype._clearCachedModelDecorationsResolver=function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverStartLineNumber=0,this._cachedModelDecorationsResolverEndLineNumber=0},e.prototype.dispose=function(){this.converter=null,this.decorations=null,this._clearCachedModelDecorationsResolver()},e.compareDecorations=function(e,t){return n.Range.compareRangesUsingStarts(e.range,t.range)},e.prototype.reset=function(t){var n,i,r,s,a=t.getAllDecorations(this.editorId,this.configuration.editor.readOnly);for(this.decorations=[],n=0,i=a.length;i>n;n++)r=a[n],s=new o(r,this.converter.convertModelRangeToViewRange(r.range,r.options.isWholeLine)),this.decorations[n]=s;this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations)},e.prototype.onModelDecorationsChanged=function(t,n){var r,s,a,c=!1,u=!1,l={},d={},h=this.configuration.editor.readOnly;for(s=0,a=t.addedOrChangedDecorations.length;a>s;s++)r=t.addedOrChangedDecorations[s],h&&r.isForValidation||r.ownerId&&r.ownerId!==this.editorId||(d[r.id]=r);for(s=0,a=t.removedDecorations.length;a>s;s++)l[t.removedDecorations[s]]=!0;var p,f={};for(s=0,a=this.decorations.length;a>s;s++)p=this.decorations[s],d.hasOwnProperty(p.id)&&(f[p.id]=!0,r=d[p.id],p.options=r.options,p.modelRange=r.range,p.range=this.converter.convertModelRangeToViewRange(r.range,r.options.isWholeLine),p.options.inlineClassName&&(u=!0),c=!0),l.hasOwnProperty(p.id)&&(this.decorations[s].options.inlineClassName&&(u=!0),this.decorations.splice(s,1),a--,s--,c=!0);var m;for(m in d)!f.hasOwnProperty(m)&&d.hasOwnProperty(m)&&(r=d[m],p=new o(r,this.converter.convertModelRangeToViewRange(r.range,r.options.isWholeLine)),this.decorations.push(p),p.options.inlineClassName&&(u=!0),c=!0);if(c){this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations);var v={inlineDecorationsChanged:u};n(i.ViewEventNames.DecorationsChangedEvent,v)}},e.prototype.onLineMappingChanged=function(t){var o,r,s,a,c=this.decorations,u=!1,l=!1;for(r=0,a=c.length;a>r;r++)o=c[r],s=this.converter.convertModelRangeToViewRange(o.modelRange,o.options.isWholeLine),l||!o.options.inlineClassName||n.Range.equalsRange(s,o.range)||(l=!0),u||n.Range.equalsRange(s,o.range)||(u=!0),o.range=s;if(u){this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations);var d={inlineDecorationsChanged:l};t(i.ViewEventNames.DecorationsChangedEvent,d)}},e.prototype.getAllDecorations=function(){return this.decorations},e.prototype.getDecorationsResolver=function(e,t){var n=!0;return n=n&&null!==this._cachedModelDecorationsResolver,n=n&&this._cachedModelDecorationsResolverStartLineNumber===e,n=n&&this._cachedModelDecorationsResolverEndLineNumber===t,n||(this._cachedModelDecorationsResolver=this._createDecorationsResolver(e,t),this._cachedModelDecorationsResolverStartLineNumber=e,this._cachedModelDecorationsResolverEndLineNumber=t),this._cachedModelDecorationsResolver},e.prototype._createDecorationsResolver=function(e,t){var n,i,o,r,s,a,c,u=[],l=[],d=this.decorations;for(n=e;t>=n;n++)l[n-e]=[];for(a=0,c=d.length;c>a&&(r=d[a],s=r.range,!(s.startLineNumber>t));a++)if(!(s.endLineNumber<e)&&(u.push(r),r.options.inlineClassName))for(i=Math.max(e,s.startLineNumber),o=Math.min(t,s.endLineNumber),n=i;o>=n;n++)l[n-e].push(r);return{getDecorations:function(){return u},getInlineDecorations:function(n){if(e>n||n>t)throw new Error("Unexpected line outside the ViewModelDecorationsResolver preconfigured range");return l[n-e]}}},e}();t.ViewModelDecorations=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/viewModel/viewModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/strings","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/viewModel/viewModelCursors","vs/editor/common/viewModel/viewModelDecorations"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(e){function t(t,i,o,r,s){var a=this;e.call(this),this.lines=t,this.editorId=i,this.configuration=o,this.model=r,this.getCurrentCenteredModelRange=s,this.decorations=new l.ViewModelDecorations(this.editorId,this.configuration,{convertModelRangeToViewRange:function(e,t){return t?a.convertWholeLineModelRangeToViewRange(e):a.convertModelRangeToViewRange(e)}}),this.decorations.reset(this.model),this.cursors=new u.ViewModelCursors(this.configuration,this),this._updateShouldForceTokenization(),this.listenersToRemove=[],this._toDispose=[],this.listenersToRemove.push(this.model.addBulkListener(function(e){return a.onEvents(e)})),this._toDispose.push(this.configuration.onDidChange(function(e){a.onEvents([new n.EmitterEvent(c.EventType.ConfigurationChanged,e)])}))}return __extends(t,e),t.prototype.setHiddenAreas=function(e){var t=this;this.deferredEmit(function(){var n=t.lines.setHiddenAreas(e,function(e,n){return t.emit(e,n)});n&&(t.emit(c.ViewEventNames.LineMappingChangedEvent),t.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t._updateShouldForceTokenization())})},t.prototype.modelPositionIsVisible=function(e){return this.lines.inputPositionIsVisible(e.lineNumber,e.column)},t.prototype.dispose=function(){this.listenersToRemove.forEach(function(e){e()}),this._toDispose=i.disposeAll(this._toDispose),this.listenersToRemove=[],this.decorations.dispose(),this.decorations=null,this.lines.dispose(),this.lines=null,this.configuration=null,this.model=null},t.prototype._updateShouldForceTokenization=function(){this.shouldForceTokenization=this.lines.getOutputLineCount()<=this.configuration.editor.forcedTokenizationBoundary},t.prototype._onTabSizeChange=function(e){var t=this,n=this.lines.setTabSize(e,function(e,n){return t.emit(e,n)});return n&&(this.emit(c.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this._updateShouldForceTokenization()),n},t.prototype._onWrappingIndentChange=function(e){var t=this,n=this.lines.setWrappingIndent(c.wrappingIndentFromString(e),function(e,n){return t.emit(e,n)});return n&&(this.emit(c.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this._updateShouldForceTokenization()),n},t.prototype._restoreCenteredModelRange=function(e){var t=this.convertModelRangeToViewRange(e),n={range:t,verticalType:c.VerticalRevealType.Center,revealHorizontal:!1};this.emit(c.ViewEventNames.RevealRangeEvent,n)},t.prototype._onWrappingColumnChange=function(e,t){var n=this,i=this.lines.setWrappingColumn(e,t,function(e,t){return n.emit(e,t)});return i&&(this.emit(c.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,t){return n.emit(e,t)}),this.cursors.onLineMappingChanged(function(e,t){return n.emit(e,t)}),this._updateShouldForceTokenization()),i},t.prototype.addEventSource=function(e){var t=this;this.listenersToRemove.push(e.addBulkListener(function(e){return t.onEvents(e)}))},t.prototype.onEvents=function(e){var t=this;this.deferredEmit(function(){var n,i=e.some(function(e){return e.getType()===c.EventType.ModelContentChanged});i||(n=t.getCurrentCenteredModelRange());var o,r,s,a,u,l=!1,d=!1,h=!1,p=!1;for(o=0,r=e.length;r>o;o++)switch(s=e[o],a=s.getData(),s.getType()){case c.EventType.ModelContentChanged:switch(u=a,u.changeType){case c.EventType.ModelContentChangedFlush:t.onModelFlushed(u),d=!0;break;case c.EventType.ModelContentChangedLinesDeleted:t.onModelLinesDeleted(u),d=!0;break;case c.EventType.ModelContentChangedLinesInserted:t.onModelLinesInserted(u),d=!0;break;case c.EventType.ModelContentChangedLineChanged:h=t.onModelLineChanged(u);break;default:console.info("ViewModel received unknown event: "),console.info(s)}l=!0;break;case c.EventType.ModelTokensChanged:t.onModelTokensChanged(a);break;case c.EventType.ModelModeChanged:break;case c.EventType.ModelModeSupportChanged:break;case c.EventType.ModelContentChanged2:break;case c.EventType.ModelOptionsChanged:var f=t.lines.getOutputLineCount(),m=t._onTabSizeChange(t.model.getOptions().tabSize),v=t.lines.getOutputLineCount();m&&f!==v&&(p=!0);break;case c.EventType.ModelDecorationsChanged:t.onModelDecorationsChanged(a);break;case c.EventType.ModelDispose:break;case c.EventType.CursorPositionChanged:t.onCursorPositionChanged(a);break;case c.EventType.CursorSelectionChanged:t.onCursorSelectionChanged(a);break;case c.EventType.CursorRevealRange:t.onCursorRevealRange(a);break;case c.EventType.CursorScrollRequest:t.onCursorScrollRequest(a);break;case c.EventType.ConfigurationChanged:if(p=t._onWrappingIndentChange(t.configuration.editor.wrappingIndent)||p,p=t._onWrappingColumnChange(t.configuration.editor.wrappingInfo.wrappingColumn,t.configuration.editor.typicalFullwidthCharacterWidth/t.configuration.editor.typicalHalfwidthCharacterWidth)||p,a.readOnly){t.decorations.reset(t.model);var g={inlineDecorationsChanged:!1};t.emit(c.ViewEventNames.DecorationsChangedEvent,g)}t.emit(s.getType(),a);break;default:console.info("View received unknown event: "),console.info(s)}l&&t._updateShouldForceTokenization(),!d&&h&&(t.emit(c.ViewEventNames.LineMappingChangedEvent),t.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t._updateShouldForceTokenization()),p&&n&&t._restoreCenteredModelRange(n)})},t.prototype.onModelFlushed=function(e){var t=this;this.lines.onModelFlushed(e.versionId,function(e,n){return t.emit(e,n)}),this.decorations.reset(this.model)},t.prototype.onModelDecorationsChanged=function(e){var t=this;this.decorations.onModelDecorationsChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onModelLinesDeleted=function(e){var t=this;this.lines.onModelLinesDeleted(e.versionId,e.fromLineNumber,e.toLineNumber,function(e,n){return t.emit(e,n)})},t.prototype.onModelTokensChanged=function(e){var t=this.convertModelPositionToViewPosition(e.fromLineNumber,1).lineNumber,n=this.convertModelPositionToViewPosition(e.toLineNumber,this.model.getLineMaxColumn(e.toLineNumber)).lineNumber,e={fromLineNumber:t,toLineNumber:n};this.emit(c.ViewEventNames.TokensChangedEvent,e)},t.prototype.onModelLineChanged=function(e){var t=this,n=this.lines.onModelLineChanged(e.versionId,e.lineNumber,e.detail,function(e,n){return t.emit(e,n)});return n},t.prototype.onModelLinesInserted=function(e){var t=this;this.lines.onModelLinesInserted(e.versionId,e.fromLineNumber,e.toLineNumber,e.detail.split("\n"),function(e,n){return t.emit(e,n)})},t.prototype.validateViewRange=function(e,t,n,i,o){var r=this.validateViewPosition(t,t,o.getStartPosition()),a=this.validateViewPosition(n,i,o.getEndPosition());return new s.Range(r.lineNumber,r.column,a.lineNumber,a.column)},t.prototype.validateViewPosition=function(e,t,n){1>e&&(e=1);var i=this.getLineCount();e>i&&(e=i);var o=this.getLineMinColumn(e),s=this.getLineMaxColumn(e);o>t&&(t=o),t>s&&(t=s);var a=this.convertViewPositionToModelPosition(e,t);return a.equals(n)?new r.Position(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)},t.prototype.validateViewSelection=function(e,t){var n=new r.Position(t.selectionStartLineNumber,t.selectionStartColumn),i=new r.Position(t.positionLineNumber,t.positionColumn),o=this.validateViewPosition(e.selectionStartLineNumber,e.selectionStartColumn,n),s=this.validateViewPosition(e.positionLineNumber,e.positionColumn,i);return new a.Selection(o.lineNumber,o.column,s.lineNumber,s.column)},t.prototype.onCursorPositionChanged=function(e){var t=this;this.cursors.onCursorPositionChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorSelectionChanged=function(e){var t=this;this.cursors.onCursorSelectionChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorRevealRange=function(e){var t=this;this.cursors.onCursorRevealRange(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorScrollRequest=function(e){var t=this;this.cursors.onCursorScrollRequest(e,function(e,n){return t.emit(e,n)})},t.prototype.getTabSize=function(){return this.model.getOptions().tabSize},t.prototype.getLineCount=function(){return this.lines.getOutputLineCount()},t.prototype.getLineContent=function(e){return this.lines.getOutputLineContent(e)},t.prototype.getLineMinColumn=function(e){return this.lines.getOutputLineMinColumn(e)},t.prototype.getLineMaxColumn=function(e){return this.lines.getOutputLineMaxColumn(e)},t.prototype.getLineFirstNonWhitespaceColumn=function(e){var t=o.firstNonWhitespaceIndex(this.getLineContent(e));return-1===t?0:t+1},t.prototype.getLineLastNonWhitespaceColumn=function(e){var t=o.lastNonWhitespaceIndex(this.getLineContent(e));return-1===t?0:t+2},t.prototype.getLineTokens=function(e){return this.lines.getOutputLineTokens(e,!this.shouldForceTokenization)},t.prototype.getLineRenderLineNumber=function(e){var t=this.convertViewPositionToModelPosition(e,1);if(1!==t.column)return"";var n=t.lineNumber;return"function"==typeof this.configuration.editor.lineNumbers?this.configuration.editor.lineNumbers(n):n.toString()},t.prototype.getDecorationsResolver=function(e,t){return this.decorations.getDecorationsResolver(e,t)},t.prototype.getAllDecorations=function(){return this.decorations.getAllDecorations()},t.prototype.getEOL=function(){return this.model.getEOL()},t.prototype.getValueInRange=function(e,t){var n=this.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)},t.prototype.getModelLineContent=function(e){return this.model.getLineContent(e)},t.prototype.getSelections=function(){return this.cursors.getSelections()},t.prototype.getModelLineMaxColumn=function(e){return this.model.getLineMaxColumn(e)},t.prototype.validateModelPosition=function(e){return this.model.validatePosition(e)},t.prototype.convertViewPositionToModelPosition=function(e,t){return this.lines.convertOutputPositionToInputPosition(e,t)},t.prototype.convertViewRangeToModelRange=function(e){var t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new s.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertViewSelectionToModelSelection=function(e){var t=this.convertViewPositionToModelPosition(e.selectionStartLineNumber,e.selectionStartColumn),n=this.convertViewPositionToModelPosition(e.positionLineNumber,e.positionColumn);return new a.Selection(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertModelPositionToViewPosition=function(e,t){return this.lines.convertInputPositionToOutputPosition(e,t)},t.prototype.convertModelSelectionToViewSelection=function(e){var t=this.convertModelPositionToViewPosition(e.selectionStartLineNumber,e.selectionStartColumn),n=this.convertModelPositionToViewPosition(e.positionLineNumber,e.positionColumn);return new a.Selection(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertModelRangeToViewRange=function(e){var t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn);return new s.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertWholeLineModelRangeToViewRange=function(e){var t=this.convertModelPositionToViewPosition(e.startLineNumber,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,this.model.getLineMaxColumn(e.endLineNumber));return new s.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t}(n.EventEmitter);t.ViewModel=d}),define("vs/editor/contrib/comment/common/blockCommentCommand",["require","exports","vs/editor/common/core/editOperation","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e){this._selection=e,this._usedEndToken=null}return e._haystackHasNeedleAtOffset=function(e,t,n){if(0>n)return!1;var i=t.length,o=e.length;if(n+i>o)return!1;for(var r=0;i>r;r++)if(e.charCodeAt(n+r)!==t.charCodeAt(r))return!1;return!0},e.prototype._createOperationsForBlockComment=function(t,n,i,o){var r,s=t.startLineNumber,a=t.startColumn,c=t.endLineNumber,u=t.endColumn,l=n.blockCommentStartToken,d=n.blockCommentEndToken,h=i.getLineContent(s).lastIndexOf(l,a-1+l.length),p=i.getLineContent(c).indexOf(d,u-1-d.length);-1!==h&&-1!==p?r=e._createRemoveBlockCommentOperations({startLineNumber:s,startColumn:h+1+l.length,endLineNumber:c,endColumn:p+1},l,d):(r=e._createAddBlockCommentOperations(t,l,d),this._usedEndToken=1===r.length?d:null);for(var f=0;f<r.length;f++)o.addEditOperation(r[f].range,r[f].text)},e._createRemoveBlockCommentOperations=function(e,t,i){var r=[];return o.Range.isEmpty(e)?r.push(n.EditOperation["delete"](new o.Range(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(r.push(n.EditOperation["delete"](new o.Range(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(n.EditOperation["delete"](new o.Range(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),r},e._createAddBlockCommentOperations=function(e,t,r){var s=[];return o.Range.isEmpty(e)?s.push(n.EditOperation.replace(new o.Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+r)):(s.push(n.EditOperation.insert(new i.Position(e.startLineNumber,e.startColumn),t)),s.push(n.EditOperation.insert(new i.Position(e.endLineNumber,e.endColumn),r))),s},e.prototype.getEditOperations=function(e,t){var n=this._selection.startLineNumber,i=this._selection.startColumn,o=this._selection.endLineNumber,r=this._selection.endColumn,s=e.getModeAtPosition(n,i).richEditSupport,a=s?s.comments:null;a&&a.blockCommentStartToken&&a.blockCommentEndToken&&this._createOperationsForBlockComment({startLineNumber:n,startColumn:i,endLineNumber:o,endColumn:r},a,e,t)},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var i=n[0],o=n[1];return r.Selection.createSelection(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}var s=n[0].range,a=this._usedEndToken?-this._usedEndToken.length:0;return r.Selection.createSelection(s.endLineNumber,s.endColumn+a,s.endLineNumber,s.endColumn+a)},e}();t.BlockCommentCommand=s}),define("vs/editor/contrib/comment/common/lineCommentCommand",["require","exports","vs/base/common/strings","vs/editor/common/core/editOperation","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","./blockCommentCommand"],function(e,t,n,i,o,r,s,a){"use strict";!function(e){e[e.Toggle=0]="Toggle",e[e.ForceAdd=1]="ForceAdd",e[e.ForceRemove=2]="ForceRemove"}(t.Type||(t.Type={}));var c=t.Type,u=function(){function e(e,t,n){this._selection=e,this._tabSize=t,this._type=n,this._deltaColumn=0}return e._gatherPreflightCommentStrings=function(e,t,n){var i,o,r,s,a,c,u,l=[],d=Object.create(null);for(r=0,s=n-t+1;s>r;r++){if(a=t+r,c=e.getModeAtPosition(a,1),u=c.getId(),d[u])o=d[u];else{if(i=c.richEditSupport?c.richEditSupport.comments:null,o=i?i.lineCommentToken:null,!o)return null;d[u]=o}l.push({ignore:!1,commentStr:o,commentStrOffset:0,commentStrLength:o.length})}return l},e._analyzeLines=function(e,t,i,o){var r,s,u,l,d,h,p,f,m=" ".charCodeAt(0),v=!0;for(p=e===c.Toggle?!0:e!==c.ForceAdd,l=0,d=i.length;d>l;l++)r=i[l],h=o+l,f=t.getLineContent(h),s=n.firstNonWhitespaceIndex(f),-1!==s?(v=!1,r.ignore=!1,r.commentStrOffset=s,p&&!a.BlockCommentCommand._haystackHasNeedleAtOffset(f,r.commentStr,s)&&(e===c.Toggle?p=!1:e===c.ForceAdd||(r.ignore=!0)),p&&(u=s+r.commentStrLength,u<f.length&&f.charCodeAt(u)===m&&(r.commentStrLength+=1))):(e===c.Toggle?r.ignore=!0:e===c.ForceAdd?r.ignore=!0:r.ignore=!0,r.commentStrOffset=f.length);if(e===c.Toggle&&v)for(p=!1,l=0,d=i.length;d>l;l++)i[l].ignore=!1;return{supported:!0,shouldRemoveComments:p,lines:i}},e._gatherPreflightData=function(t,n,i,o){var r=e._gatherPreflightCommentStrings(n,i,o);return null===r?{supported:!1,shouldRemoveComments:!1,lines:null}:e._analyzeLines(t,n,r,i)},e.prototype._executeLineComments=function(t,n,i,r){var s;i.shouldRemoveComments?s=e._createRemoveLineCommentsOperations(i.lines,r.startLineNumber):(e._normalizeInsertionPoint(t,i.lines,r.startLineNumber,this._tabSize),s=e._createAddLineCommentsOperations(i.lines,r.startLineNumber));for(var a=new o.Position(r.positionLineNumber,r.positionColumn),c=0,u=s.length;u>c;c++)n.addEditOperation(s[c].range,s[c].text),s[c].range.isEmpty()&&s[c].range.getStartPosition().equals(a)&&(this._deltaColumn=s[c].text.length);this._selectionId=n.trackSelection(r)},e.prototype._attemptRemoveBlockComment=function(e,t,n,i){var o=t.startLineNumber,r=t.endLineNumber,s=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),c=e.getLineContent(o).lastIndexOf(n,s-1),u=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return-1!==c&&-1===u&&(u=e.getLineContent(o).indexOf(i,c+n.length),r=o),-1===c&&-1!==u&&(c=e.getLineContent(r).lastIndexOf(n,u),o=r),!t.isEmpty()||-1!==c&&-1!==u||(c=e.getLineContent(o).indexOf(n),-1!==c&&(u=e.getLineContent(o).indexOf(i,c+n.length))),-1!==c&&-1!==u?a.BlockCommentCommand._createRemoveBlockCommentOperations({startLineNumber:o,startColumn:c+n.length+1,endLineNumber:r,endColumn:u+1},n,i):null},e.prototype._executeBlockComment=function(e,t,i){var o=e.getModeAtPosition(i.startLineNumber,i.startColumn).richEditSupport,r=o?o.comments:null;if(r&&r.blockCommentStartToken&&r.blockCommentEndToken){var s=r.blockCommentStartToken,c=r.blockCommentEndToken,u=this._attemptRemoveBlockComment(e,i,s,c);if(!u){if(i.isEmpty()){var l=e.getLineContent(i.startLineNumber),d=n.firstNonWhitespaceIndex(l);-1===d&&(d=l.length),u=a.BlockCommentCommand._createAddBlockCommentOperations({startLineNumber:i.startLineNumber,startColumn:d+1,endLineNumber:i.startLineNumber,endColumn:l.length+1},s,c)}else u=a.BlockCommentCommand._createAddBlockCommentOperations({startLineNumber:i.startLineNumber,startColumn:e.getLineFirstNonWhitespaceColumn(i.startLineNumber),endLineNumber:i.endLineNumber,endColumn:e.getLineMaxColumn(i.endLineNumber)},s,c);1===u.length&&(this._deltaColumn=s.length)}this._selectionId=t.trackSelection(i);for(var h=0;h<u.length;h++)t.addEditOperation(u[h].range,u[h].text)}},e.prototype.getEditOperations=function(t,n){var i=this._selection;this._moveEndPositionDown=!1,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var o=e._gatherPreflightData(this._type,t,i.startLineNumber,i.endLineNumber);return o.supported?this._executeLineComments(t,n,o,i):this._executeBlockComment(t,n,i)},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),s.Selection.createSelection(n.startLineNumber,n.startColumn+this._deltaColumn,n.endLineNumber,n.endColumn+this._deltaColumn)},e._createRemoveLineCommentsOperations=function(e,t){var n,o,s,a=[];for(n=0,o=e.length;o>n;n++)s=e[n],s.ignore||a.push(i.EditOperation["delete"](new r.Range(t+n,s.commentStrOffset+1,t+n,s.commentStrOffset+s.commentStrLength+1)));return a},e._createAddLineCommentsOperations=function(e,t){
var n,r,s,a=[];for(n=0,r=e.length;r>n;n++)s=e[n],s.ignore||a.push(i.EditOperation.insert(new o.Position(t+n,s.commentStrOffset+1),s.commentStr+" "));return a},e.nextVisibleColumn=function(e,t,n,i){return n?e+(t-e%t):e+i},e._normalizeInsertionPoint=function(t,n,i,o){var r,s,a,c,u,l,d=Number.MAX_VALUE,h="	".charCodeAt(0);for(r=0,s=n.length;s>r;r++)if(!n[r].ignore){for(a=t.getLineContent(i+r),l=0,c=0,u=n[r].commentStrOffset;d>l&&u>c;c++)l=e.nextVisibleColumn(l,o,a.charCodeAt(c)===h,1);d>l&&(d=l)}for(d=Math.floor(d/o)*o,r=0,s=n.length;s>r;r++)if(!n[r].ignore){for(a=t.getLineContent(i+r),l=0,c=0,u=n[r].commentStrOffset;d>l&&u>c;c++)l=e.nextVisibleColumn(l,o,a.charCodeAt(c)===h,1);l>d?n[r].commentStrOffset=c-1:n[r].commentStrOffset=c}},e}();t.LineCommentCommand=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/diffNavigator/common/diffNavigator",["require","exports","vs/base/common/assert","vs/base/common/eventEmitter","vs/base/common/objects","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i,o,r,s){"use strict";var a={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},c=function(e){function t(n,i){var r=this;void 0===i&&(i={}),e.call(this,[t.Events.UPDATED]),this.editor=n,this.options=o.mixin(i,a,!1),this.disposed=!1,this.toUnbind=[],this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=this.options.alwaysRevealFirst,this.toUnbind.push(this.editor.addListener(s.EventType.Disposed,function(){return r.dispose()})),this.toUnbind.push(this.editor.addListener(s.EventType.DiffUpdated,function(){return r.onDiffUpdated()})),this.options.followsCaret&&this.toUnbind.push(this.editor.getModifiedEditor().addListener(s.EventType.CursorPositionChanged,function(e){r.ignoreSelectionChange||(r.nextIdx=-1)})),this.options.alwaysRevealFirst&&this.toUnbind.push(this.editor.getModifiedEditor().addListener(s.EventType.ModelChanged,function(e){r.revealFirst=!0})),this.init()}return __extends(t,e),t.prototype.init=function(){var e=this.editor.getLineChanges()},t.prototype.onDiffUpdated=function(){this.init(),this.compute(this.editor.getLineChanges()),this.revealFirst&&null!==this.editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next())},t.prototype.compute=function(e){var n=this;this.ranges=[],e&&e.forEach(function(e){!n.options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach(function(e){n.ranges.push({rhs:!0,range:new r.Range(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})}):n.ranges.push({rhs:!0,range:new r.Range(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber,1)})}),this.ranges.sort(function(e,t){return e.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?-1:t.range.getStartPosition().isBeforeOrEqual(e.range.getStartPosition())?1:0}),this.emit(t.Events.UPDATED,{})},t.prototype.initIdx=function(e){for(var t=!1,n=this.editor.getPosition(),i=0,o=this.ranges.length;o>i&&!t;i++){var r=this.ranges[i].range;n.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)},t.prototype.move=function(e){if(n.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),this.canNavigate()){-1===this.nextIdx?this.initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var i=t.range.getStartPosition();this.editor.setPosition(i),this.editor.revealPositionInCenter(i)}finally{this.ignoreSelectionChange=!1}}},t.prototype.canNavigate=function(){return this.ranges&&this.ranges.length>0},t.prototype.next=function(){this.move(!0)},t.prototype.previous=function(){this.move(!1)},t.prototype.dispose=function(){for(;this.toUnbind.length>0;)this.toUnbind.pop()();this.ranges=null,this.disposed=!0,e.prototype.dispose.call(this)},t.Events={UPDATED:"navigation.updated"},t}(i.EventEmitter);t.DiffNavigator=c}),define("vs/editor/contrib/find/common/findDecorations",["require","exports","vs/editor/common/editorCommon"],function(e,t,n){"use strict";var i=function(){function e(e){this._editor=e,this._decorations=[],this._findScopeDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return e.prototype.dispose=function(){this._editor.deltaDecorations(this._allDecorations(),[]),this._editor=null,this._decorations=[],this._findScopeDecorationId=null,this._highlightedDecorationId=null,this._startPosition=null},e.prototype.reset=function(){this._decorations=[],this._findScopeDecorationId=null,this._highlightedDecorationId=null},e.prototype.getCount=function(){return this._decorations.length},e.prototype.getFindScope=function(){return this._findScopeDecorationId?this._editor.getModel().getDecorationRange(this._findScopeDecorationId):null},e.prototype.getStartPosition=function(){return this._startPosition},e.prototype.setStartPosition=function(e){this._startPosition=e,this.setCurrentFindMatch(null)},e.prototype.getCurrentMatchesPosition=function(e){for(var t=0,n=this._decorations.length;n>t;t++){var i=this._editor.getModel().getDecorationRange(this._decorations[t]);if(e.equalsRange(i))return t+1}return 1},e.prototype.setCurrentFindMatch=function(t){var n=this,i=null,o=0;if(t)for(var r=0,s=this._decorations.length;s>r;r++){var a=this._editor.getModel().getDecorationRange(this._decorations[r]);if(t.equalsRange(a)){i=this._decorations[r],o=r+1;break}}return null===this._highlightedDecorationId&&null===i||this._editor.changeDecorations(function(t){null!==n._highlightedDecorationId&&(t.changeDecorationOptions(n._highlightedDecorationId,e.createFindMatchDecorationOptions(!1)),n._highlightedDecorationId=null),null!==i&&(n._highlightedDecorationId=i,t.changeDecorationOptions(n._highlightedDecorationId,e.createFindMatchDecorationOptions(!0)))}),o},e.prototype.set=function(t,n){var i=t.map(function(t){return{range:t,options:e.createFindMatchDecorationOptions(!1)}});n&&i.unshift({range:n,options:e.createFindScopeDecorationOptions()});var o=this._editor.deltaDecorations(this._allDecorations(),i);n?this._findScopeDecorationId=o.shift():this._findScopeDecorationId=null,this._decorations=o,this._highlightedDecorationId=null},e.prototype._allDecorations=function(){var e=[];return e=e.concat(this._decorations),this._findScopeDecorationId&&e.push(this._findScopeDecorationId),e},e.createFindMatchDecorationOptions=function(e){return{stickiness:n.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:e?"currentFindMatch":"findMatch",overviewRuler:{color:"rgba(246, 185, 77, 0.7)",darkColor:"rgba(246, 185, 77, 0.7)",position:n.OverviewRulerLane.Center}}},e.createFindScopeDecorationOptions=function(){return{className:"findScope",isWholeLine:!0}},e}();t.FindDecorations=i}),define("vs/editor/contrib/find/common/findState",["require","exports","vs/base/common/eventEmitter","vs/editor/common/core/range"],function(e,t,n,i){"use strict";var o=function(){function e(){this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._wholeWord=!1,this._matchCase=!1,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._eventEmitter=new n.EventEmitter}return Object.defineProperty(e.prototype,"searchString",{get:function(){return this._searchString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replaceString",{get:function(){return this._replaceString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRevealed",{get:function(){return this._isRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReplaceRevealed",{get:function(){return this._isReplaceRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRegex",{get:function(){return this._isRegex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wholeWord",{get:function(){return this._wholeWord},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchCase",{get:function(){return this._matchCase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchScope",{get:function(){return this._searchScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchesPosition",{get:function(){return this._matchesPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchesCount",{get:function(){return this._matchesCount},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._eventEmitter.dispose()},e.prototype.addChangeListener=function(t){return this._eventEmitter.addListener2(e._CHANGED_EVENT,t)},e.prototype.changeMatchInfo=function(t,n){var i={moveCursor:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1},o=!1;0===n&&(t=0),t>n&&(t=n),this._matchesPosition!==t&&(this._matchesPosition=t,i.matchesPosition=!0,o=!0),this._matchesCount!==n&&(this._matchesCount=n,i.matchesCount=!0,o=!0),o&&this._eventEmitter.emit(e._CHANGED_EVENT,i)},e.prototype.change=function(t,n){var o={moveCursor:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1},r=!1;"undefined"!=typeof t.searchString&&this._searchString!==t.searchString&&(this._searchString=t.searchString,o.searchString=!0,r=!0),"undefined"!=typeof t.replaceString&&this._replaceString!==t.replaceString&&(this._replaceString=t.replaceString,o.replaceString=!0,r=!0),"undefined"!=typeof t.isRevealed&&this._isRevealed!==t.isRevealed&&(this._isRevealed=t.isRevealed,o.isRevealed=!0,r=!0),"undefined"!=typeof t.isReplaceRevealed&&this._isReplaceRevealed!==t.isReplaceRevealed&&(this._isReplaceRevealed=t.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),"undefined"!=typeof t.isRegex&&this._isRegex!==t.isRegex&&(this._isRegex=t.isRegex,o.isRegex=!0,r=!0),"undefined"!=typeof t.wholeWord&&this._wholeWord!==t.wholeWord&&(this._wholeWord=t.wholeWord,o.wholeWord=!0,r=!0),"undefined"!=typeof t.matchCase&&this._matchCase!==t.matchCase&&(this._matchCase=t.matchCase,o.matchCase=!0,r=!0),"undefined"!=typeof t.searchScope&&(i.Range.equalsRange(this._searchScope,t.searchScope)||(this._searchScope=t.searchScope,o.searchScope=!0,r=!0)),r&&this._eventEmitter.emit(e._CHANGED_EVENT,o)},e._CHANGED_EVENT="changed",e}();t.FindReplaceState=o}),define("vs/editor/contrib/find/common/replaceAllCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this._ranges=e,this._replaceStrings=t}return e.prototype.getEditOperations=function(e,t){if(this._ranges.length>0){for(var i=[],o=0;o<this._ranges.length;o++)i.push({range:this._ranges[o],text:this._replaceStrings[o]});i.sort(function(e,t){return n.Range.compareRangesUsingStarts(e.range,t.range)});for(var r=[],s=i[0],o=1;o<i.length;o++)s.range.endLineNumber===i[o].range.startLineNumber&&s.range.endColumn===i[o].range.startColumn?(s.range=s.range.plusRange(i[o].range),s.text=s.text+i[o].text):(r.push(s),s=i[o]);r.push(s);for(var o=0;o<r.length;o++)t.addEditOperation(r[o].range,r[o].text)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),o=n[n.length-1].range;return i.Selection.createSelection(o.endLineNumber,o.endColumn,o.endLineNumber,o.endColumn)},e}();t.ReplaceAllCommand=o}),define("vs/editor/contrib/find/common/findModel",["require","exports","vs/base/common/async","vs/base/common/lifecycle","vs/base/common/strings","vs/editor/common/commands/replaceCommand","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorCommon","./findDecorations","./replaceAllCommand"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){if(!e||0===e.length)return e;for(var t=0,n="",i=0,o=e.length;o>i;i++){var r=e.charCodeAt(i);if(r===p){if(i++,i>=o)break;var s=e.charCodeAt(i),a=null;switch(s){case p:a="\\";break;case v:a="\n";break;case g:a="	"}a&&(n+=e.substring(t,i-1)+a,t=i+1)}if(r===f){if(i++,i>=o)break;var s=e.charCodeAt(i),a=null;switch(s){case m:a="$&"}a&&(n+=e.substring(t,i-1)+a,t=i+1)}}return 0===t?e:n+e.substring(t)}t.FIND_IDS={StartFindAction:"actions.find",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",AddSelectionToNextFindMatchAction:"editor.action.addSelectionToNextFindMatch",MoveSelectionToNextFindMatchAction:"editor.action.moveSelectionToNextFindMatch",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll"},t.MATCHES_LIMIT=999;var h=function(){function e(e,t){var i=this;this._editor=e,this._state=t,this._toDispose=[],this._decorations=new u.FindDecorations(e),this._toDispose.push(this._decorations),this._updateDecorationsScheduler=new n.RunOnceScheduler(function(){return i.research(!1)},100),this._toDispose.push(this._updateDecorationsScheduler),this._toDispose.push(this._editor.addListener2(c.EventType.CursorPositionChanged,function(e){"explicit"!==e.reason&&"undo"!==e.reason&&"redo"!==e.reason||i._decorations.setStartPosition(i._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.push(this._editor.addListener2(c.EventType.ModelContentChanged,function(e){i._ignoreModelContentChanged||(e.changeType===c.EventType.ModelContentChangedFlush&&i._decorations.reset(),i._decorations.setStartPosition(i._editor.getPosition()),i._updateDecorationsScheduler.schedule())})),this._toDispose.push(this._state.addChangeListener(function(e){return i._onStateChanged(e)})),this.research(!1,this._state.searchScope)}return e.prototype.dispose=function(){this._toDispose=i.disposeAll(this._toDispose)},e.prototype._onStateChanged=function(e){(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))},e._getSearchRange=function(e,t,n){var i;return i=t?e.getEditableRange():e.getFullModelRange(),n&&(i=i.intersectRanges(n)),i},e.prototype.research=function(e,n){var i=null;i="undefined"!=typeof n?n:this._decorations.getFindScope(),null!==i&&(i=new a.Range(i.startLineNumber,1,i.endLineNumber,this._editor.getModel().getLineMaxColumn(i.endLineNumber)));var o=this._findMatches(i,t.MATCHES_LIMIT);this._decorations.set(o,i),this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()),this._decorations.getCount()),e&&this._moveToNextMatch(this._decorations.getStartPosition())},e.prototype._hasMatches=function(){return this._state.matchesCount>0},e.prototype._cannotFind=function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e),!0}return!1},e.prototype._moveToPrevMatch=function(t,n){if(void 0===n&&(n=!1),!this._cannotFind()){var i=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),this._state.isReplaceRevealed,i);o.getEndPosition().isBefore(t)&&(t=o.getEndPosition()),t.isBefore(o.getStartPosition())&&(t=o.getEndPosition());var r=t.lineNumber,a=t.column,c=this._editor.getModel();this._state.isRegex&&("$"===this._state.searchString&&(1===r?r=c.getLineCount():r--,a=c.getLineMaxColumn(r)),"^"!==this._state.searchString&&"^$"!==this._state.searchString||1===a&&(1===r?r=c.getLineCount():r--,a=c.getLineMaxColumn(r)));var u=new s.Position(r,a),l=c.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord);if(l){if(!n&&!o.containsRange(l))return this._moveToPrevMatch(l.getStartPosition(),!0);var d=this._decorations.setCurrentFindMatch(l);this._state.changeMatchInfo(d,this._decorations.getCount()),this._editor.setSelection(l),this._editor.revealRangeInCenterIfOutsideViewport(l)}}},e.prototype.moveToPrevMatch=function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())},e.prototype._moveToNextMatch=function(t,n){if(void 0===n&&(n=!1),!this._cannotFind()){var i=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),this._state.isReplaceRevealed,i);o.getEndPosition().isBefore(t)&&(t=o.getStartPosition()),t.isBefore(o.getStartPosition())&&(t=o.getStartPosition());var r=t.lineNumber,a=t.column,c=this._editor.getModel();this._state.isRegex&&("^"!==this._state.searchString&&"^$"!==this._state.searchString||(r===c.getLineCount()?r=1:r++,a=1),"$"===this._state.searchString&&a===c.getLineMaxColumn(r)&&(r===c.getLineCount()?r=1:r++,a=1));var u=new s.Position(r,a),l=c.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord);if(l){if(!n&&!o.containsRange(l))return this._moveToNextMatch(l.getEndPosition(),!0);var d=this._decorations.setCurrentFindMatch(l);this._state.changeMatchInfo(d,this._decorations.getCount()),this._editor.setSelection(l),this._editor.revealRangeInCenterIfOutsideViewport(l)}}},e.prototype.moveToNextMatch=function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())},e.prototype.getReplaceString=function(e){if(!this._state.isRegex)return this._state.replaceString;var t=o.createRegExp(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord,!0),n=d(this._state.replaceString);return e.replace(t,n)},e.prototype._rangeIsMatch=function(e){var t=this._editor.getSelection(),n=this._editor.getModel().getValueInRange(t),i=o.createSafeRegExp(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord),r=n.match(i);return r&&r[0].length===n.length},e.prototype.replace=function(){if(this._hasMatches()){var e=this._editor.getSelection(),t=this._editor.getModel().getValueInRange(e);if(this._rangeIsMatch(e)){var n=this.getReplaceString(t),i=new r.ReplaceCommand(e,n);this._executeEditorCommand("replace",i),this._decorations.setStartPosition(new s.Position(e.startLineNumber,e.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this.moveToNextMatch()}},e.prototype._findMatches=function(t,n){var i=e._getSearchRange(this._editor.getModel(),this._state.isReplaceRevealed,t);return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord,n)},e.prototype.replaceAll=function(){if(this._hasMatches()){for(var e=this._editor.getModel(),t=this._decorations.getFindScope(),n=this._findMatches(t,Number.MAX_VALUE),i=[],o=0,r=n.length;r>o;o++)i.push(this.getReplaceString(e.getValueInRange(n[o])));var s=new l.ReplaceAllCommand(n,i);this._executeEditorCommand("replaceAll",s),this.research(!1)}},e.prototype._executeEditorCommand=function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.executeCommand(e,t)}finally{this._ignoreModelContentChanged=!1}},e}();t.FindModelBoundToEditorModel=h;var p="\\".charCodeAt(0),f="$".charCodeAt(0),m="0".charCodeAt(0),v="n".charCodeAt(0),g="t".charCodeAt(0);t.parseReplaceString=d}),define("vs/editor/contrib/hover/browser/hoverOperation",["require","exports","vs/base/common/async","vs/base/common/errors"],function(e,t,n,i){"use strict";var o;!function(e){e[e.IDLE=0]="IDLE",e[e.FIRST_WAIT=1]="FIRST_WAIT",e[e.SECOND_WAIT=2]="SECOND_WAIT",e[e.WAITING_FOR_ASYNC_COMPUTATION=3]="WAITING_FOR_ASYNC_COMPUTATION"}(o||(o={}));var r=function(){function e(e,t,i,r){var s=this;this._computer=e,this._state=o.IDLE,this._firstWaitScheduler=new n.RunOnceScheduler(function(){return s._triggerAsyncComputation()},this._getHoverTimeMillis()/2),this._secondWaitScheduler=new n.RunOnceScheduler(function(){return s._triggerSyncComputation()},this._getHoverTimeMillis()/2),this._loadingMessageScheduler=new n.RunOnceScheduler(function(){return s._showLoadingMessage()},3*this._getHoverTimeMillis()),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=r}return e.prototype.getComputer=function(){return this._computer},e.prototype._getHoverTimeMillis=function(){return this._computer.getHoverTimeMillis?this._computer.getHoverTimeMillis():e.HOVER_TIME},e.prototype._triggerAsyncComputation=function(){var e=this;this._state=o.SECOND_WAIT,this._secondWaitScheduler.schedule(),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=this._computer.computeAsync(),this._asyncComputationPromise.then(function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)}).done(null,function(){return e._onError})):this._asyncComputationPromiseDone=!0},e.prototype._triggerSyncComputation=function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=o.IDLE,this._onComplete(this._computer.getResult())):(this._state=o.WAITING_FOR_ASYNC_COMPUTATION,this._onProgress(this._computer.getResult()))},e.prototype._showLoadingMessage=function(){this._state===o.WAITING_FOR_ASYNC_COMPUTATION&&this._onProgress(this._computer.getResultWithLoadingMessage())},e.prototype._withAsyncResult=function(e){e&&this._computer.onResult(e,!1),this._state===o.WAITING_FOR_ASYNC_COMPUTATION&&(this._state=o.IDLE,this._onComplete(this._computer.getResult()))},e.prototype._onComplete=function(e){this._completeCallback&&this._completeCallback(e)},e.prototype._onError=function(e){this._errorCallback?this._errorCallback(e):i.onUnexpectedError(e)},e.prototype._onProgress=function(e){this._progressCallback&&this._progressCallback(e)},e.prototype.start=function(){this._state===o.IDLE&&(this._state=o.FIRST_WAIT,this._firstWaitScheduler.schedule(),this._loadingMessageScheduler.schedule())},e.prototype.cancel=function(){this._loadingMessageScheduler.cancel(),this._state===o.FIRST_WAIT&&this._firstWaitScheduler.cancel(),this._state===o.SECOND_WAIT&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&this._asyncComputationPromise.cancel()),this._state===o.WAITING_FOR_ASYNC_COMPUTATION&&this._asyncComputationPromise&&this._asyncComputationPromise.cancel(),this._state=o.IDLE},e.HOVER_TIME=300,e}();t.HoverOperation=r}),define("vs/editor/contrib/inPlaceReplace/common/inPlaceReplaceCommand",["require","exports","vs/editor/common/core/selection"],function(e,t,n){"use strict";var i=function(){function e(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}return e.prototype.getEditOperations=function(e,t){t.addEditOperation(this._editRange,this._text)},e.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),o=i[0].range;return this._originalSelection.isEmpty()?n.Selection.createSelection(o.endLineNumber,Math.min(this._originalSelection.positionColumn,o.endColumn),o.endLineNumber,Math.min(this._originalSelection.positionColumn,o.endColumn)):n.Selection.createSelection(o.endLineNumber,o.endColumn-this._text.length,o.endLineNumber,o.endColumn)},e}();t.InPlaceReplaceCommand=i}),define("vs/editor/contrib/linesOperations/common/copyLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this._selection=e,this._isCopyingDown=t}return e.prototype.getEditOperations=function(e,t){var i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));for(var o=[],r=i.startLineNumber;r<=i.endLineNumber;r++)o.push(e.getLineContent(r));var s=o.join("\n");""===s&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._isCopyingDown?t.addEditOperation(new n.Range(i.startLineNumber,1,i.startLineNumber,1),s+"\n"):t.addEditOperation(new n.Range(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+s),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var o=n.startLineNumber,r=n.startColumn,s=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(o+=this._startLineNumberDelta,r=1),0!==this._endLineNumberDelta&&(s+=this._endLineNumberDelta,a=1),n=i.Selection.createWithDirection(o,r,s,a,this._selectionDirection)}return n},e}();t.CopyLinesCommand=o}),define("vs/editor/contrib/linesOperations/common/deleteLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.restoreCursorToColumn=n}return e.createFromSelection=function(t){var n=t.endLineNumber;return t.startLineNumber<t.endLineNumber&&1===t.endColumn&&(n-=1),new e(t.startLineNumber,n,t.positionColumn)},e.prototype.getEditOperations=function(e,t){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){var i=this.startLineNumber,o=this.endLineNumber,r=1,s=e.getLineMaxColumn(o);o<e.getLineCount()?(o+=1,s=1):i>1&&(i-=1,r=e.getLineMaxColumn(i)),t.addEditOperation(new n.Range(i,r,o,s),null)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),o=n[0].range;return i.Selection.createSelection(o.endLineNumber,this.restoreCursorToColumn,o.endLineNumber,this.restoreCursorToColumn)},e}();t.DeleteLinesCommand=o}),define("vs/editor/contrib/linesOperations/common/moveLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this._selection=e,this._isMovingDown=t}return e.prototype.getEditOperations=function(e,t){var o=e.getLineCount();if((!this._isMovingDown||this._selection.endLineNumber!==o)&&(this._isMovingDown||1!==this._selection.startLineNumber)){this._moveEndPositionDown=!1;var r=this._selection;if(r.startLineNumber<r.endLineNumber&&1===r.endColumn&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1))),r.startLineNumber===r.endLineNumber&&1===e.getLineMaxColumn(r.startLineNumber)){var s=r.startLineNumber,a=this._isMovingDown?s+1:s-1;1===e.getLineMaxColumn(a)?t.addEditOperation(new n.Range(1,1,1,1),null):(t.addEditOperation(new n.Range(s,1,s,1),e.getLineContent(a)),t.addEditOperation(new n.Range(a,1,a,e.getLineMaxColumn(a)),null)),r=i.Selection.createSelection(a,1,a,1)}else{var c,u;this._isMovingDown?(c=r.endLineNumber+1,u=e.getLineContent(c),t.addEditOperation(new n.Range(c-1,e.getLineMaxColumn(c-1),c,e.getLineMaxColumn(c)),null),t.addEditOperation(new n.Range(r.startLineNumber,1,r.startLineNumber,1),u+"\n")):(c=r.startLineNumber-1,u=e.getLineContent(c),t.addEditOperation(new n.Range(c,1,c+1,1),null),t.addEditOperation(new n.Range(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),"\n"+u))}this._selectionId=t.trackSelection(r)}},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),n},e}();t.MoveLinesCommand=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/referenceSearch/browser/referenceSearchModel",["require","exports","vs/base/common/collections","vs/base/common/eventEmitter","vs/base/common/paths","vs/base/common/strings","vs/base/common/uuid","vs/base/common/winjs.base","vs/editor/common/core/range"],function(e,t,n,i,o,r,s,a,c){"use strict";var u;!function(e){e.OnReferenceRangeChanged="refrence.rangeChanged",e.CurrentReferenceChanged="reference.currentChanged"}(u=t.EventType||(t.EventType={}));var l=function(){function e(e,t){this._parent=e,this._id=s.generateUuid(),this._range=t.range}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._parent.resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directory",{get:function(){return this._parent.directory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this.parent.parent.emit(u.OnReferenceRangeChanged,this)},enumerable:!0,configurable:!0}),e}();t.OneReference=l;var d=function(){function e(e){this._value=e,this._lineStarts=r.computeLineStarts(e)}return e.prototype.preview=function(e,t){void 0===t&&(t=8);var n=this._lineStarts[e.startLineNumber-1],i=n+e.startColumn-1,o=this._lineStarts[e.endLineNumber-1]+e.endColumn-1,s=e.endLineNumber>=this._lineStarts.length?this._value.length:this._lineStarts[e.endLineNumber],a={before:this._value.substring(n,i).replace(/^\s+/,r.empty),inside:this._value.substring(i,o),after:this._value.substring(o,s).replace(/\s+$/,r.empty)};return a.before=r.lcut(a.before,t),a},e}();t.FilePreview=d;var h=function(){function e(e,t,n){this._parent=e,this._resource=t,this._editorService=n,this._children=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this._resource.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return o.basename(this.resource.fsPath)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directory",{get:function(){return o.dirname(this.resource.fsPath)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preview",{get:function(){return this._preview},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){var e=this;return this._resolved?a.TPromise.as(this):this._editorService.resolveEditorModel({resource:this._resource}).then(function(t){return e._preview=new d(t.textEditorModel.getValue()),e._resolved=!0,e})},e}();t.FileReferences=h;var p=function(e){function t(i,o){var r=this;e.call(this,[u.CurrentReferenceChanged,u.OnReferenceRangeChanged]);var s=Object.create(null),a=Object.create(null);i.forEach(function(e){var i=t._hash(e);if(!a[i]){a[i]=!0;var c=e.resource,u=new h(r,c,o);u=n.lookupOrInsert(s,u.id,u),u.children.push(new l(u,e))}}),this._references=n.values(s),this._references.sort(t._compare)}return __extends(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this._references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentReference",{get:function(){return this._currentReference;
},set:function(e){this._currentReference=e,this.emit(u.CurrentReferenceChanged,this)},enumerable:!0,configurable:!0}),t.prototype.nextReference=function(e){var t=e.parent.children.indexOf(e),n=e.parent.children.length,i=e.parent.parent.children.length;return n>t+1||1===i?e.parent.children[(t+1)%n]:(t=e.parent.parent.children.indexOf(e.parent),t=(t+1)%i,e.parent.parent.children[t].children[0])},t.prototype.findReference=function(e,t){for(var n=0,i=this._references.length;i>n;n++){var o=this._references[n];if(o.resource.toString()===e.toString()){var r;if(o.children.some(function(e){return c.Range.containsPosition(e.range,t)?(r=e,!0):!1}),r)return r}}return this._references.length>0?this._references[0].children[0]:null},t._hash=function(e){var t=e.range,n=t.startLineNumber,i=t.startColumn,o=t.endLineNumber,r=t.endColumn;return[e.resource.toString(),n,i,o,r].join(",")},t._compare=function(e,t){return r.localeCompare(e.directory,t.directory)||r.localeCompare(e.name,t.name)},t}(i.EventEmitter);t.ReferencesModel=p}),define("vs/editor/contrib/suggest/browser/completionModel",["require","exports","vs/base/common/arrays","vs/base/common/objects","vs/base/common/winjs.base","vs/editor/common/modes/modesFilters"],function(e,t,n,i,o,r){"use strict";function s(e,t){var n=e.suggestion,i=t.suggestion;if("string"==typeof n.sortText&&"string"==typeof i.sortText){var o=n.sortText.toLowerCase(),r=i.sortText.toLowerCase();if(r>o)return-1;if(o>r)return 1}return n.label.toLowerCase()<i.label.toLowerCase()?-1:1}var a=function(){function e(e,t,n){this.group=e,this.support=n.support,this.suggestion=t,this.container=n}return e.prototype.resolveDetails=function(e,t){return this.support&&"function"==typeof this.support.getSuggestionDetails?this.support.getSuggestionDetails(e,t,this.suggestion):o.TPromise.as(this.suggestion)},e.prototype.updateDetails=function(e){this.suggestion=i.assign(this.suggestion,e)},e}();t.CompletionItem=a;var c=function(){function e(e,t){var n=this;if(this.model=e,this._items=t.reduce(function(e,t){return e.concat(t.suggestions.map(function(e){return new a(n,e,t)}))},[]).sort(s),this.filter=r.DefaultFilter,this._items.length>0){var i=this._items[0];i.support&&(this.filter=i.support.getFilter&&i.support.getFilter()||this.filter)}}return e.prototype.getItems=function(e){var t=this;if(e===this.cacheCurrentWord)return this.cache;var o;o=this.cacheCurrentWord&&e.substr(0,this.cacheCurrentWord.length)===this.cacheCurrentWord?this.cache:this._items;var r=o.map(function(n){return t.filter(e,n.suggestion)}),s=r.filter(function(e){return!n.isFalsyOrEmpty(e)}).length;return 0===s?[]:(this.cacheCurrentWord=e,this.cache=o.map(function(e,t){return i.assign(e,{highlights:r[t]})}).filter(function(e){return!n.isFalsyOrEmpty(e.highlights)}),this.cache)},e.prototype.invalidateCache=function(){this.cacheCurrentWord=null},e}();t.CompletionGroup=c;var u=function(){function e(e,t){var n=this;this.raw=e,this.currentWord=t,this.groups=e.filter(function(e){return!!e}).map(function(e){return new c(n,e)})}return Object.defineProperty(e.prototype,"items",{get:function(){var e=this;if(this.cacheCurrentWord===this.currentWord)return this.cache;var t=this.groups.reduce(function(t,n){return t.concat(n.getItems(e.currentWord))},[]);return t.length>0&&(this.cache=t,this.cacheCurrentWord=this.currentWord),t},enumerable:!0,configurable:!0}),e}();t.CompletionModel=u}),define("vs/nls!vs/base/common/json",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/json",t)}),define("vs/base/common/json",["require","exports","vs/nls!vs/base/common/json"],function(e,t,n){"use strict";function i(e,t){function n(t,n){for(var i=0,o=0;t>i||!n;){var r=e.charCodeAt(f);if(r>=h._0&&r<=h._9)o=16*o+r-h._0;else if(r>=h.A&&r<=h.F)o=16*o+r-h.A+10;else{if(!(r>=h.a&&r<=h.f))break;o=16*o+r-h.a+10}f++,i++}return t>i&&(o=-1),o}function i(){var t=f;if(e.charCodeAt(f)===h._0)f++;else for(f++;f<e.length&&s(e.charCodeAt(f));)f++;if(f<e.length&&e.charCodeAt(f)===h.dot){if(f++,!(f<e.length&&s(e.charCodeAt(f))))return _=l.UnexpectedEndOfNumber,e.substring(t,n);for(f++;f<e.length&&s(e.charCodeAt(f));)f++}var n=f;if(f<e.length&&(e.charCodeAt(f)===h.E||e.charCodeAt(f)===h.e))if(f++,(f<e.length&&e.charCodeAt(f)===h.plus||e.charCodeAt(f)===h.minus)&&f++,f<e.length&&s(e.charCodeAt(f))){for(f++;f<e.length&&s(e.charCodeAt(f));)f++;n=f}else _=l.UnexpectedEndOfNumber;return e.substring(t,n)}function a(){for(var t="",i=f;;){if(f>=m){t+=e.substring(i,f),_=l.UnexpectedEndOfString;break}var o=e.charCodeAt(f);if(o===h.doubleQuote){t+=e.substring(i,f),f++;break}if(o!==h.backslash){if(r(o)){t+=e.substring(i,f),_=l.UnexpectedEndOfString;break}f++}else{if(t+=e.substring(i,f),f++,f>=m){_=l.UnexpectedEndOfString;break}switch(o=e.charCodeAt(f++)){case h.doubleQuote:t+='"';break;case h.backslash:t+="\\";break;case h.slash:t+="/";break;case h.b:t+="\b";break;case h.f:t+="\f";break;case h.n:t+="\n";break;case h.r:t+="\r";break;case h.t:t+="	";break;case h.u:var o=n(4,!0);o>=0?t+=String.fromCharCode(o):_=l.InvalidUnicode;break;default:_=l.InvalidEscapeCharacter}i=f}}return t}function c(){if(v="",_=l.None,g=f,f>=m)return g=m,y=d.EOF;var t=e.charCodeAt(f);if(o(t)){do f++,v+=String.fromCharCode(t),t=e.charCodeAt(f);while(o(t));return y=d.Trivia}if(r(t))return f++,v+=String.fromCharCode(t),t===h.carriageReturn&&e.charCodeAt(f)===h.lineFeed&&(f++,v+="\n"),y=d.LineBreakTrivia;switch(t){case h.openBrace:return f++,y=d.OpenBraceToken;case h.closeBrace:return f++,y=d.CloseBraceToken;case h.openBracket:return f++,y=d.OpenBracketToken;case h.closeBracket:return f++,y=d.CloseBracketToken;case h.colon:return f++,y=d.ColonToken;case h.comma:return f++,y=d.CommaToken;case h.doubleQuote:return f++,v=a(),y=d.StringLiteral;case h.slash:var n=f-1;if(e.charCodeAt(f+1)===h.slash){for(f+=2;m>f&&!r(e.charCodeAt(f));)f++;return v=e.substring(n,f),y=d.LineCommentTrivia}if(e.charCodeAt(f+1)===h.asterisk){f+=2;for(var c=m-1,p=!1;c>f;){var b=e.charCodeAt(f);if(b===h.asterisk&&e.charCodeAt(f+1)===h.slash){f+=2,p=!0;break}f++}return p||(f++,_=l.UnexpectedEndOfComment),v=e.substring(n,f),y=d.BlockCommentTrivia}return v+=String.fromCharCode(t),f++,y=d.Unknown;case h.minus:if(v+=String.fromCharCode(t),f++,f===m||!s(e.charCodeAt(f)))return y=d.Unknown;case h._0:case h._1:case h._2:case h._3:case h._4:case h._5:case h._6:case h._7:case h._8:case h._9:return v+=i(),y=d.NumericLiteral;default:for(;m>f&&u(t);)f++,t=e.charCodeAt(f);if(g!==f){switch(v=e.substring(g,f)){case"true":return y=d.TrueKeyword;case"false":return y=d.FalseKeyword;case"null":return y=d.NullKeyword}return y=d.Unknown}return v+=String.fromCharCode(t),f++,y=d.Unknown}}function u(e){if(o(e)||r(e))return!1;switch(e){case h.closeBrace:case h.closeBracket:case h.openBrace:case h.openBracket:case h.doubleQuote:case h.colon:case h.comma:return!1}return!0}function p(){var e;do e=c();while(e>=d.LineCommentTrivia&&e<=d.Trivia);return e}void 0===t&&(t=!1);var f=0,m=e.length,v="",g=0,y=d.Unknown,_=l.None;return{getPosition:function(){return f},scan:t?p:c,getToken:function(){return y},getTokenValue:function(){return v},getTokenOffset:function(){return g},getTokenLength:function(){return f-g},getTokenError:function(){return _}}}function o(e){return e===h.space||e===h.tab||e===h.verticalTab||e===h.formFeed||e===h.nonBreakingSpace||e===h.ogham||e>=h.enQuad&&e<=h.zeroWidthSpace||e===h.narrowNoBreakSpace||e===h.mathematicalSpace||e===h.ideographicSpace||e===h.byteOrderMark}function r(e){return e===h.lineFeed||e===h.carriageReturn||e===h.lineSeparator||e===h.paragraphSeparator}function s(e){return e>=h._0&&e<=h._9}function a(e){return e>=h.a&&e<=h.z||e>=h.A&&e<=h.Z}function c(e,t){var n,o,r=i(e),s=[],a=0;do switch(o=r.getPosition(),n=r.scan()){case d.LineCommentTrivia:case d.BlockCommentTrivia:case d.EOF:a!==o&&s.push(e.substring(a,o)),void 0!==t&&s.push(r.getTokenValue().replace(/[^\r\n]/g,t)),a=r.getPosition()}while(n!==d.EOF);return s.join("")}function u(e,t){function o(){for(var e=f.scan();e===d.Unknown;)r(n.localize(0,null)),e=f.scan();return e}function r(e,n,i){if(void 0===n&&(n=[]),void 0===i&&(i=[]),t.push(e),n.length+i.length>0)for(var r=f.getToken();r!==d.EOF;){if(-1!==n.indexOf(r)){o();break}if(-1!==i.indexOf(r))break;r=o()}}function s(){if(f.getToken()!==d.StringLiteral)return p;var e=f.getTokenValue();return o(),e}function a(){var e;switch(f.getToken()){case d.NumericLiteral:try{e=JSON.parse(f.getTokenValue()),"number"!=typeof e&&(r(n.localize(1,null)),e=0)}catch(t){e=0}break;case d.NullKeyword:e=null;break;case d.TrueKeyword:e=!0;break;case d.FalseKeyword:e=!1;break;default:return p}return o(),e}function c(e){var t=s();if(t===p)return r(n.localize(2,null),[],[d.CloseBraceToken,d.CommaToken]),!1;if(f.getToken()===d.ColonToken){o();var i=h();i!==p?e[t]=i:r(n.localize(3,null),[],[d.CloseBraceToken,d.CommaToken])}else r(n.localize(4,null),[],[d.CloseBraceToken,d.CommaToken]);return!0}function u(){if(f.getToken()!==d.OpenBraceToken)return p;var e={};o();for(var t=!1;f.getToken()!==d.CloseBraceToken&&f.getToken()!==d.EOF;){f.getToken()===d.CommaToken?(t||r(n.localize(5,null),[],[]),o()):t&&r(n.localize(6,null),[],[]);var i=c(e);i||r(n.localize(7,null),[],[d.CloseBraceToken,d.CommaToken]),t=!0}return f.getToken()!==d.CloseBraceToken?r(n.localize(8,null),[d.CloseBraceToken],[]):o(),e}function l(){if(f.getToken()!==d.OpenBracketToken)return p;var e=[];o();for(var t=!1;f.getToken()!==d.CloseBracketToken&&f.getToken()!==d.EOF;){f.getToken()===d.CommaToken?(t||r(n.localize(9,null),[],[]),o()):t&&r(n.localize(10,null),[],[]);var i=h();i===p?r(n.localize(11,null),[],[d.CloseBracketToken,d.CommaToken]):e.push(i),t=!0}return f.getToken()!==d.CloseBracketToken?r(n.localize(12,null),[d.CloseBracketToken],[]):o(),e}function h(){var e=l();return e!==p?e:(e=u(),e!==p?e:(e=s(),e!==p?e:a()))}void 0===t&&(t=[]);var p=Object(),f=i(e,!0);o();var m=h();return m===p?void r(n.localize(13,null),[],[]):(f.getToken()!==d.EOF&&r(n.localize(14,null),[],[]),m)}!function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter"}(t.ScanError||(t.ScanError={}));var l=t.ScanError;!function(e){e[e.Unknown=0]="Unknown",e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.EOF=16]="EOF"}(t.SyntaxKind||(t.SyntaxKind={}));var d=t.SyntaxKind;t.createScanner=i,t.isLetter=a;var h;!function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(h||(h={})),t.stripComments=c,t.parse=u}),define("vs/nls!vs/base/common/keyCodes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/keyCodes",t)}),define("vs/base/common/keyCodes",["require","exports","vs/nls!vs/base/common/keyCodes","vs/base/common/platform"],function(e,t,n,i){"use strict";function o(e,t){var n=[];e(n);for(var i={},o=0,r=n.length;r>o;o++)n[o]&&(i[n[o]]=o);t(i);var s={};for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a],s[a.toLowerCase()]=i[a]);return new u(n,s)}function r(e,t,n){var i=[],o=g.hasCtrlCmd(e),s=g.hasShift(e),a=g.hasAlt(e),c=g.hasWinCtrl(e),u=g.extractKeyCode(e),l=t.getLabelForKey(u);if(!l)return"";(o&&!n.isMacintosh||c&&n.isMacintosh)&&i.push(t.ctrlKeyLabel),s&&i.push(t.shiftKeyLabel),a&&i.push(t.altKeyLabel),o&&n.isMacintosh&&i.push(t.cmdKeyLabel),c&&!n.isMacintosh&&i.push(t.windowsKeyLabel),i.push(l);var d=i.join(t.modifierSeparator);return g.hasChord(e)?d+" "+r(g.extractChordPart(e),t,n):d}function s(e,t){e.length>0&&e.push({tagName:"span",text:"+"}),e.push({tagName:"span",className:"monaco-kbkey",text:t})}function a(e,t,n,i){void 0===i&&(i=!1);var o=[],r=g.hasCtrlCmd(e),c=g.hasShift(e),u=g.hasAlt(e),l=g.hasWinCtrl(e),d=g.extractKeyCode(e),h=t.getLabelForKey(d);if(!h)return[];(r&&!n.isMacintosh||l&&n.isMacintosh)&&s(o,t.ctrlKeyLabel),c&&s(o,t.shiftKeyLabel),u&&s(o,t.altKeyLabel),r&&n.isMacintosh&&s(o,t.cmdKeyLabel),l&&!n.isMacintosh&&s(o,t.windowsKeyLabel),s(o,h);var p=null;return g.hasChord(e)&&(p=a(g.extractChordPart(e),t,n,!0),o.push({tagName:"span",text:" "}),o=o.concat(p)),i?o:[{tagName:"span",className:"monaco-kb",children:o}]}!function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.MAX_VALUE=109]="MAX_VALUE"}(t.KeyCode||(t.KeyCode={}));var c,c=t.KeyCode,u=function(){function e(e,t){this._fromKeyCode=e,this._toKeyCode=t}return e.prototype.fromKeyCode=function(e){return this._fromKeyCode[e]},e.prototype.toKeyCode=function(e){return this._toKeyCode.hasOwnProperty(e)?this._toKeyCode[e]:c.Unknown},e}(),l=o(function(e){e[c.Unknown]="unknown",e[c.Backspace]="Backspace",e[c.Tab]="Tab",e[c.Enter]="Enter",e[c.Shift]="Shift",e[c.Ctrl]="Ctrl",e[c.Alt]="Alt",e[c.PauseBreak]="PauseBreak",e[c.CapsLock]="CapsLock",e[c.Escape]="Escape",e[c.Space]="Space",e[c.PageUp]="PageUp",e[c.PageDown]="PageDown",e[c.End]="End",e[c.Home]="Home",e[c.LeftArrow]="LeftArrow",e[c.UpArrow]="UpArrow",e[c.RightArrow]="RightArrow",e[c.DownArrow]="DownArrow",e[c.Insert]="Insert",e[c.Delete]="Delete",e[c.KEY_0]="0",e[c.KEY_1]="1",e[c.KEY_2]="2",e[c.KEY_3]="3",e[c.KEY_4]="4",e[c.KEY_5]="5",e[c.KEY_6]="6",e[c.KEY_7]="7",e[c.KEY_8]="8",e[c.KEY_9]="9",e[c.KEY_A]="A",e[c.KEY_B]="B",e[c.KEY_C]="C",e[c.KEY_D]="D",e[c.KEY_E]="E",e[c.KEY_F]="F",e[c.KEY_G]="G",e[c.KEY_H]="H",e[c.KEY_I]="I",e[c.KEY_J]="J",e[c.KEY_K]="K",e[c.KEY_L]="L",e[c.KEY_M]="M",e[c.KEY_N]="N",e[c.KEY_O]="O",e[c.KEY_P]="P",e[c.KEY_Q]="Q",e[c.KEY_R]="R",e[c.KEY_S]="S",e[c.KEY_T]="T",e[c.KEY_U]="U",e[c.KEY_V]="V",e[c.KEY_W]="W",e[c.KEY_X]="X",e[c.KEY_Y]="Y",e[c.KEY_Z]="Z",e[c.ContextMenu]="ContextMenu",e[c.F1]="F1",e[c.F2]="F2",e[c.F3]="F3",e[c.F4]="F4",e[c.F5]="F5",e[c.F6]="F6",e[c.F7]="F7",e[c.F8]="F8",e[c.F9]="F9",e[c.F10]="F10",e[c.F11]="F11",e[c.F12]="F12",e[c.F13]="F13",e[c.F14]="F14",e[c.F15]="F15",e[c.F16]="F16",e[c.F17]="F17",e[c.F18]="F18",e[c.F19]="F19",e[c.NumLock]="NumLock",e[c.ScrollLock]="ScrollLock",e[c.US_SEMICOLON]=";",e[c.US_EQUAL]="=",e[c.US_COMMA]=",",e[c.US_MINUS]="-",e[c.US_DOT]=".",e[c.US_SLASH]="/",e[c.US_BACKTICK]="`",e[c.US_OPEN_SQUARE_BRACKET]="[",e[c.US_BACKSLASH]="\\",e[c.US_CLOSE_SQUARE_BRACKET]="]",e[c.US_QUOTE]="'",e[c.OEM_8]="OEM_8",e[c.OEM_102]="OEM_102",e[c.NUMPAD_0]="NumPad0",e[c.NUMPAD_1]="NumPad1",e[c.NUMPAD_2]="NumPad2",e[c.NUMPAD_3]="NumPad3",e[c.NUMPAD_4]="NumPad4",e[c.NUMPAD_5]="NumPad5",e[c.NUMPAD_6]="NumPad6",e[c.NUMPAD_7]="NumPad7",e[c.NUMPAD_8]="NumPad8",e[c.NUMPAD_9]="NumPad9",e[c.NUMPAD_MULTIPLY]="NumPad_Multiply",e[c.NUMPAD_ADD]="NumPad_Add",e[c.NUMPAD_SEPARATOR]="NumPad_Separator",e[c.NUMPAD_SUBTRACT]="NumPad_Subtract",e[c.NUMPAD_DECIMAL]="NumPad_Decimal",e[c.NUMPAD_DIVIDE]="NumPad_Divide"},function(e){e["\r"]=c.Enter}),d=o(function(e){for(var t=0,n=l._fromKeyCode.length;n>t;t++)e[t]=l._fromKeyCode[t];e[c.LeftArrow]="Left",e[c.UpArrow]="Up",e[c.RightArrow]="Right",e[c.DownArrow]="Down"},function(e){e.OEM_1=c.US_SEMICOLON,e.OEM_PLUS=c.US_EQUAL,e.OEM_COMMA=c.US_COMMA,e.OEM_MINUS=c.US_MINUS,e.OEM_PERIOD=c.US_DOT,e.OEM_2=c.US_SLASH,e.OEM_3=c.US_BACKTICK,e.OEM_4=c.US_OPEN_SQUARE_BRACKET,e.OEM_5=c.US_BACKSLASH,e.OEM_6=c.US_CLOSE_SQUARE_BRACKET,e.OEM_7=c.US_QUOTE,e.OEM_8=c.OEM_8,e.OEM_102=c.OEM_102});!function(e){function t(e){return l.fromKeyCode(e)}function n(e){return l.toKeyCode(e)}e.toString=t,e.fromString=n}(c=t.KeyCode||(t.KeyCode={}));var h=32768,p=16384,f=8192,m=4096,v=4095,g=function(){function e(){}return e.extractFirstPart=function(e){return 65535&e},e.extractChordPart=function(e){return e>>16&65535},e.hasChord=function(e){return 0!==this.extractChordPart(e)},e.hasCtrlCmd=function(e){return!!(e&h)},e.hasShift=function(e){return!!(e&p)},e.hasAlt=function(e){return!!(e&f)},e.hasWinCtrl=function(e){return!!(e&m)},e.extractKeyCode=function(e){return e&v},e}();t.BinaryKeybindings=g;var y=function(){function e(){}return e.chord=function(e,t){return e|(65535&t)<<16},e.CtrlCmd=h,e.Shift=p,e.Alt=f,e.WinCtrl=m,e}();t.KeyMod=y;var _=function(){function e(){}return e.ENTER=c.Enter,e.SHIFT_ENTER=y.Shift|c.Enter,e.CTRLCMD_ENTER=y.CtrlCmd|c.Enter,e.WINCTRL_ENTER=y.WinCtrl|c.Enter,e.TAB=c.Tab,e.SHIFT_TAB=y.Shift|c.Tab,e.ESCAPE=c.Escape,e.SPACE=c.Space,e.DELETE=c.Delete,e.SHIFT_DELETE=y.Shift|c.Delete,e.CTRLCMD_BACKSPACE=y.CtrlCmd|c.Backspace,e.UP_ARROW=c.UpArrow,e.SHIFT_UP_ARROW=y.Shift|c.UpArrow,e.CTRLCMD_UP_ARROW=y.CtrlCmd|c.UpArrow,e.DOWN_ARROW=c.DownArrow,e.SHIFT_DOWN_ARROW=y.Shift|c.DownArrow,e.CTRLCMD_DOWN_ARROW=y.CtrlCmd|c.DownArrow,e.LEFT_ARROW=c.LeftArrow,e.RIGHT_ARROW=c.RightArrow,e.PAGE_UP=c.PageUp,e.SHIFT_PAGE_UP=y.Shift|c.PageUp,e.PAGE_DOWN=c.PageDown,e.SHIFT_PAGE_DOWN=y.Shift|c.PageDown,e.F2=c.F2,e.CTRLCMD_S=y.CtrlCmd|c.KEY_S,e.CTRLCMD_C=y.CtrlCmd|c.KEY_C,e.CTRLCMD_V=y.CtrlCmd|c.KEY_V,e}();t.CommonKeybindings=_;var b=function(){function e(e){this.value=e}return e._toUSLabel=function(e,t){return r(e,t.isMacintosh?E.INSTANCE:C.INSTANCE,t)},e._toUSAriaLabel=function(e,t){return r(e,w.INSTANCE,t)},e._toUSHTMLLabel=function(e,t){return a(e,t.isMacintosh?E.INSTANCE:C.INSTANCE,t)},e._toCustomLabel=function(e,t,n){return r(e,t,n)},e._toCustomHTMLLabel=function(e,t,n){return a(e,t,n)},e._toElectronAccelerator=function(e,t){return g.hasChord(e)?null:r(e,S.INSTANCE,t)},e.getUserSettingsKeybindingRegex=function(){if(!this._cachedKeybindingRegex){var e="numpad(0|1|2|3|4|5|6|7|8|9|_multiply|_add|_subtract|_decimal|_divide|_separator)",t="`|\\-|=|\\[|\\]|\\\\\\\\|;|'|,|\\.|\\/|oem_8|oem_102",n="left|up|right|down|pageup|pagedown|end|home|tab|enter|escape|space|backspace|delete|pausebreak|capslock|insert|contextmenu|numlock|scrolllock",i="[a-z]|[0-9]|f(1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19)",o="(("+[e,t,n,i].join(")|(")+"))",r="((ctrl|shift|alt|cmd|win|meta)\\+)*",s="("+r+o+")";this._cachedKeybindingRegex='"\\s*('+s+"(\\s+"+s+')?)\\s*"'}return this._cachedKeybindingRegex},e.toUserSettingsLabel=function(e,t){void 0===t&&(t=i);var n=r(e,T.INSTANCE,t);return n=n.toLowerCase(),t.isMacintosh?n=n.replace(/meta/g,"cmd"):t.isWindows&&(n=n.replace(/meta/g,"win")),n},e.fromUserSettingsLabel=function(t,n){if(void 0===n&&(n=i),!t)return null;t=t.toLowerCase().trim();for(var o=!1,r=!1,s=!1,a=!1,c="";/^(ctrl|shift|alt|meta|win|cmd)(\+|\-)/.test(t);)/^ctrl(\+|\-)/.test(t)&&(n.isMacintosh?a=!0:o=!0,t=t.substr("ctrl-".length)),/^shift(\+|\-)/.test(t)&&(r=!0,t=t.substr("shift-".length)),/^alt(\+|\-)/.test(t)&&(s=!0,t=t.substr("alt-".length)),/^meta(\+|\-)/.test(t)&&(n.isMacintosh?o=!0:a=!0,t=t.substr("meta-".length)),/^win(\+|\-)/.test(t)&&(n.isMacintosh?o=!0:a=!0,t=t.substr("win-".length)),/^cmd(\+|\-)/.test(t)&&(n.isMacintosh?o=!0:a=!0,t=t.substr("cmd-".length));var u=0,l=t.indexOf(" ");l>0?(c=t.substring(0,l),u=e.fromUserSettingsLabel(t.substring(l),n)):c=t;var h=d.toKeyCode(c),p=0;return o&&(p|=y.CtrlCmd),r&&(p|=y.Shift),s&&(p|=y.Alt),a&&(p|=y.WinCtrl),p|=h,y.chord(p,u)},e.prototype.hasCtrlCmd=function(){return g.hasCtrlCmd(this.value)},e.prototype.hasShift=function(){return g.hasShift(this.value)},e.prototype.hasAlt=function(){return g.hasAlt(this.value)},e.prototype.hasWinCtrl=function(){return g.hasWinCtrl(this.value)},e.prototype.extractKeyCode=function(){return g.extractKeyCode(this.value)},e.prototype._toUSLabel=function(t){return void 0===t&&(t=i),e._toUSLabel(this.value,t)},e.prototype._toUSAriaLabel=function(t){return void 0===t&&(t=i),e._toUSAriaLabel(this.value,t)},e.prototype._toUSHTMLLabel=function(t){return void 0===t&&(t=i),e._toUSHTMLLabel(this.value,t)},e.prototype.toCustomLabel=function(t,n){return void 0===n&&(n=i),e._toCustomLabel(this.value,t,n)},e.prototype.toCustomHTMLLabel=function(t,n){return void 0===n&&(n=i),e._toCustomHTMLLabel(this.value,t,n)},e.prototype._toElectronAccelerator=function(t){return void 0===t&&(t=i),e._toElectronAccelerator(this.value,t)},e.prototype.toUserSettingsLabel=function(t){return void 0===t&&(t=i),e.toUserSettingsLabel(this.value,t)},e._cachedKeybindingRegex=null,e}();t.Keybinding=b;var S=function(){function e(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Cmd",this.windowsKeyLabel="Super",this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){switch(e){case c.UpArrow:return"Up";case c.DownArrow:return"Down";case c.LeftArrow:return"Left";case c.RightArrow:return"Right"}return c.toString(e)},e.INSTANCE=new e,e}();t.ElectronAcceleratorLabelProvider=S;var E=function(){function e(){this.ctrlKeyLabel="⌃",this.shiftKeyLabel="⇧",this.altKeyLabel="⌥",this.cmdKeyLabel="⌘",this.windowsKeyLabel=n.localize(0,null),this.modifierSeparator=""}return e.prototype.getLabelForKey=function(t){switch(t){case c.LeftArrow:return e.leftArrowUnicodeLabel;case c.UpArrow:return e.upArrowUnicodeLabel;case c.RightArrow:return e.rightArrowUnicodeLabel;case c.DownArrow:return e.downArrowUnicodeLabel}return c.toString(t)},e.INSTANCE=new e,e.leftArrowUnicodeLabel=String.fromCharCode(8592),e.upArrowUnicodeLabel=String.fromCharCode(8593),e.rightArrowUnicodeLabel=String.fromCharCode(8594),e.downArrowUnicodeLabel=String.fromCharCode(8595),e}();t.MacUIKeyLabelProvider=E;var w=function(){function e(){this.ctrlKeyLabel=n.localize(1,null),this.shiftKeyLabel=n.localize(2,null),this.altKeyLabel=n.localize(3,null),this.cmdKeyLabel=n.localize(4,null),this.windowsKeyLabel=n.localize(5,null),this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){return c.toString(e)},e.INSTANCE=new E,e}();t.AriaKeyLabelProvider=w;var C=function(){function e(){this.ctrlKeyLabel=n.localize(6,null),this.shiftKeyLabel=n.localize(7,null),this.altKeyLabel=n.localize(8,null),this.cmdKeyLabel=n.localize(9,null),this.windowsKeyLabel=n.localize(10,null),this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){return c.toString(e)},e.INSTANCE=new e,e}();t.ClassicUIKeyLabelProvider=C;var T=function(){function e(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Meta",this.windowsKeyLabel="Meta",this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){return d.fromKeyCode(e)},e.INSTANCE=new e,e}()}),define("vs/base/browser/keyboardEvent",["require","exports","vs/base/common/keyCodes","vs/base/common/platform","vs/base/browser/browser"],function(e,t,n,i,o){"use strict";function r(e){return a[e.keyCode]||n.KeyCode.Unknown}function s(e){c=e}var a={};!function(){a[8]=n.KeyCode.Backspace,a[9]=n.KeyCode.Tab,a[13]=n.KeyCode.Enter,a[16]=n.KeyCode.Shift,a[17]=n.KeyCode.Ctrl,a[18]=n.KeyCode.Alt,a[19]=n.KeyCode.PauseBreak,a[20]=n.KeyCode.CapsLock,a[27]=n.KeyCode.Escape,a[32]=n.KeyCode.Space,a[33]=n.KeyCode.PageUp,a[34]=n.KeyCode.PageDown,a[35]=n.KeyCode.End,a[36]=n.KeyCode.Home,a[37]=n.KeyCode.LeftArrow,a[38]=n.KeyCode.UpArrow,a[39]=n.KeyCode.RightArrow,a[40]=n.KeyCode.DownArrow,a[45]=n.KeyCode.Insert,a[46]=n.KeyCode.Delete,a[48]=n.KeyCode.KEY_0,a[49]=n.KeyCode.KEY_1,a[50]=n.KeyCode.KEY_2,a[51]=n.KeyCode.KEY_3,a[52]=n.KeyCode.KEY_4,a[53]=n.KeyCode.KEY_5,a[54]=n.KeyCode.KEY_6,a[55]=n.KeyCode.KEY_7,a[56]=n.KeyCode.KEY_8,a[57]=n.KeyCode.KEY_9,a[65]=n.KeyCode.KEY_A,a[66]=n.KeyCode.KEY_B,a[67]=n.KeyCode.KEY_C,a[68]=n.KeyCode.KEY_D,a[69]=n.KeyCode.KEY_E,a[70]=n.KeyCode.KEY_F,a[71]=n.KeyCode.KEY_G,a[72]=n.KeyCode.KEY_H,a[73]=n.KeyCode.KEY_I,a[74]=n.KeyCode.KEY_J,a[75]=n.KeyCode.KEY_K,a[76]=n.KeyCode.KEY_L,a[77]=n.KeyCode.KEY_M,a[78]=n.KeyCode.KEY_N,a[79]=n.KeyCode.KEY_O,a[80]=n.KeyCode.KEY_P,a[81]=n.KeyCode.KEY_Q,a[82]=n.KeyCode.KEY_R,a[83]=n.KeyCode.KEY_S,a[84]=n.KeyCode.KEY_T,a[85]=n.KeyCode.KEY_U,a[86]=n.KeyCode.KEY_V,a[87]=n.KeyCode.KEY_W,a[88]=n.KeyCode.KEY_X,a[89]=n.KeyCode.KEY_Y,a[90]=n.KeyCode.KEY_Z,a[93]=n.KeyCode.ContextMenu,a[96]=n.KeyCode.NUMPAD_0,a[97]=n.KeyCode.NUMPAD_1,a[98]=n.KeyCode.NUMPAD_2,a[99]=n.KeyCode.NUMPAD_3,a[100]=n.KeyCode.NUMPAD_4,a[101]=n.KeyCode.NUMPAD_5,a[102]=n.KeyCode.NUMPAD_6,a[103]=n.KeyCode.NUMPAD_7,a[104]=n.KeyCode.NUMPAD_8,a[105]=n.KeyCode.NUMPAD_9,a[106]=n.KeyCode.NUMPAD_MULTIPLY,a[107]=n.KeyCode.NUMPAD_ADD,a[108]=n.KeyCode.NUMPAD_SEPARATOR,a[109]=n.KeyCode.NUMPAD_SUBTRACT,a[110]=n.KeyCode.NUMPAD_DECIMAL,a[111]=n.KeyCode.NUMPAD_DIVIDE,a[112]=n.KeyCode.F1,a[113]=n.KeyCode.F2,a[114]=n.KeyCode.F3,a[115]=n.KeyCode.F4,a[116]=n.KeyCode.F5,a[117]=n.KeyCode.F6,a[118]=n.KeyCode.F7,a[119]=n.KeyCode.F8,a[120]=n.KeyCode.F9,a[121]=n.KeyCode.F10,a[122]=n.KeyCode.F11,a[123]=n.KeyCode.F12,a[124]=n.KeyCode.F13,a[125]=n.KeyCode.F14,a[126]=n.KeyCode.F15,a[127]=n.KeyCode.F16,a[128]=n.KeyCode.F17,a[129]=n.KeyCode.F18,a[130]=n.KeyCode.F19,a[144]=n.KeyCode.NumLock,a[145]=n.KeyCode.ScrollLock,a[186]=n.KeyCode.US_SEMICOLON,a[187]=n.KeyCode.US_EQUAL,a[188]=n.KeyCode.US_COMMA,a[189]=n.KeyCode.US_MINUS,a[190]=n.KeyCode.US_DOT,a[191]=n.KeyCode.US_SLASH,a[192]=n.KeyCode.US_BACKTICK,a[219]=n.KeyCode.US_OPEN_SQUARE_BRACKET,a[220]=n.KeyCode.US_BACKSLASH,a[221]=n.KeyCode.US_CLOSE_SQUARE_BRACKET,a[222]=n.KeyCode.US_QUOTE,a[223]=n.KeyCode.OEM_8,a[226]=n.KeyCode.OEM_102,o.isIE11orEarlier?a[91]=n.KeyCode.Meta:o.isFirefox?(a[59]=n.KeyCode.US_SEMICOLON,a[107]=n.KeyCode.US_EQUAL,a[109]=n.KeyCode.US_MINUS,i.isMacintosh&&(a[224]=n.KeyCode.Meta)):o.isWebKit&&(a[91]=n.KeyCode.Meta,i.isMacintosh?a[93]=n.KeyCode.Meta:a[92]=n.KeyCode.Meta)}(),t.lookupKeyCode=r;var c=function(e){if(e.charCode){var t=String.fromCharCode(e.charCode).toUpperCase();return n.KeyCode.fromString(t)}return r(e)};t.setExtractKeyCode=s;var u=i.isMacintosh?n.KeyMod.WinCtrl:n.KeyMod.CtrlCmd,l=n.KeyMod.Alt,d=n.KeyMod.Shift,h=i.isMacintosh?n.KeyMod.CtrlCmd:n.KeyMod.WinCtrl,p=function(){function e(t){if(t instanceof e)this.browserEvent=null,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=t.keyCode,this._asKeybinding=t._asKeybinding;else{var i=t;this.browserEvent=i,this.target=i.target||i.targetNode,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.keyCode=c(i),this.ctrlKey=this.ctrlKey||this.keyCode===n.KeyCode.Ctrl,this.altKey=this.altKey||this.keyCode===n.KeyCode.Alt,this.shiftKey=this.shiftKey||this.keyCode===n.KeyCode.Shift,this.metaKey=this.metaKey||this.keyCode===n.KeyCode.Meta,this._asKeybinding=this._computeKeybinding();
}}return e.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e.prototype.clone=function(){return new e(this)},e.prototype.asKeybinding=function(){return this._asKeybinding},e.prototype.equals=function(e){return this._asKeybinding===e},e.prototype._computeKeybinding=function(){var e=n.KeyCode.Unknown;this.keyCode!==n.KeyCode.Ctrl&&this.keyCode!==n.KeyCode.Shift&&this.keyCode!==n.KeyCode.Alt&&this.keyCode!==n.KeyCode.Meta&&(e=this.keyCode);var t=0;return this.ctrlKey&&(t|=u),this.altKey&&(t|=l),this.shiftKey&&(t|=d),this.metaKey&&(t|=h),t|=e},e}();t.StandardKeyboardEvent=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/dom",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/types","vs/base/browser/browser","vs/base/browser/browserService","vs/base/browser/keyboardEvent","vs/base/browser/mouseEvent"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function h(e){var t=[];return JSON.stringify(e,function(e,n){if(n instanceof Element)return"[Element]";if(s.isObject(n)||Array.isArray(n)){if(-1!==t.indexOf(n))return"[Circular]";t.push(n)}return n})}function p(e){for(;e;){if(e===document.body)return!0;e=e.parentNode}return!1}function f(e,t){var n=e.className;if(!n)return void(Q=-1);t=t.trim();var i=n.length,o=t.length;if(0===o)return void(Q=-1);if(o>i)return void(Q=-1);if(n===t)return Q=0,void(Z=i);for(var r,s=-1;(s=n.indexOf(t,s+1))>=0;){if(r=s+o,(0===s||n.charCodeAt(s-1)===J)&&n.charCodeAt(r)===J)return Q=s,void(Z=r+1);if(s>0&&n.charCodeAt(s-1)===J&&r===i)return Q=s-1,void(Z=r);if(0===s&&r===i)return Q=0,void(Z=r)}Q=-1}function m(e,t){return f(e,t),-1!==Q}function v(e,t){e.className?(f(e,t),-1===Q&&(e.className=e.className+" "+t)):e.className=t}function g(e,t){f(e,t),-1!==Q&&(e.className=e.className.substring(0,Q)+e.className.substring(Z))}function y(e,t,n){f(e,t),-1===Q||n||g(e,t),-1===Q&&n&&v(e,t)}function _(e,t,n,i){return new ee(e,t,n,i)}function b(e){return function(t){return e(new l.StandardMouseEvent(t))}}function S(e){return function(t){return e(new u.StandardKeyboardEvent(t))}}function E(e,t){return _(e,"mouseout",function(n){for(var i=n.relatedTarget||n.toElement;i&&i!==e;)i=i.parentNode;i!==e&&t(n)})}function w(e,t,n,i,o){return new re(e,t,n,i,o)}function C(e){return document.defaultView.getComputedStyle(e,null)}function T(e,t,n){var i=C(e),o="0";return i&&(o=i.getPropertyValue?i.getPropertyValue(t):i.getAttribute(n)),se(e,o)}function k(e){for(var t=e.offsetParent,n=e.offsetTop,i=e.offsetLeft;null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement;){n-=e.scrollTop;var o=C(e);o&&(i-="rtl"!==o.direction?e.scrollLeft:-e.scrollLeft),e===t&&(i+=ae.getBorderLeftWidth(e),n+=ae.getBorderTopWidth(e),n+=e.offsetTop,i+=e.offsetLeft,t=e.offsetParent)}return{left:i,top:n}}function x(e){var t=k(e);return{left:t.left,top:t.top,width:e.clientWidth,height:e.clientHeight}}function I(e){var t=ae.getBorderLeftWidth(e)+ae.getBorderRightWidth(e),n=ae.getPaddingLeft(e)+ae.getPaddingRight(e);return e.offsetWidth-t-n}function D(e){var t=ae.getMarginLeft(e)+ae.getMarginRight(e);return e.offsetWidth+t}function A(e){var t=ae.getBorderTopWidth(e)+ae.getBorderBottomWidth(e),n=ae.getPaddingTop(e)+ae.getPaddingBottom(e);return e.offsetHeight-t-n}function L(e){var t=ae.getMarginTop(e)+ae.getMarginBottom(e);return e.offsetHeight+t}function O(e,t){if(null===e)return 0;for(var n=e.offsetLeft,i=e.parentNode;null!==i&&(n-=i.offsetLeft,i!==t);)i=i.parentNode;return n}function M(e,t){if(null===e)return 0;for(var n=e.offsetTop,i=e.parentNode;null!==i&&(n-=i.offsetTop,i!==t);)i=i.parentNode;return n}function P(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function R(e,t,n){for(;e;){if(m(e,t))return e;if(n&&m(e,n))return null;e=e.parentNode}return null}function N(){var e=document.createElement("style");return e.type="text/css",e.media="screen",document.getElementsByTagName("head")[0].appendChild(e),e}function F(e){return e&&e.sheet&&e.sheet.rules?e.sheet.rules:e&&e.sheet&&e.sheet.cssRules?e.sheet.cssRules:[]}function W(e,t,n){void 0===n&&(n=ce),n&&t&&n.sheet.insertRule(e+"{"+t+"}",0)}function H(e,t){if(void 0===t&&(t=ce),!t)return null;for(var n=F(t),i=0;i<n.length;i++){var o=n[i],r=o.selectorText.replace(/::/gi,":");if(r===e)return o}return null}function V(e,t){if(void 0===t&&(t=ce),t){for(var n=F(t),i=[],o=0;o<n.length;o++){var r=n[o],s=r.selectorText.replace(/::/gi,":");0===s.indexOf(e)&&i.push(o)}for(var o=i.length-1;o>=0;o--)t.sheet.deleteRule(i[o])}}function K(e){return c.getService().isHTMLElement(e)}function B(e){for(var t=[],n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}function U(e,t){for(var n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}function z(e){return new ue(e)}function j(e,t){return e.appendChild(t),t}function q(e){var t=le.exec(e);if(!t)throw new Error("Bad use of emmet");var n=document.createElement(t[1]||"div");return t[3]&&(n.id=t[3]),t[4]&&(n.className=t[4].replace(/\./g," ").trim()),n}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0,i=e;n<i.length;n++){var o=i[n];o.style.display=null}}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0,i=e;n<i.length;n++){var o=i[n];o.style.display="none"}}function $(e,t){for(;e;){if(e instanceof HTMLElement&&e.hasAttribute(t))return e;e=e.parentNode}return null}function X(e){if(e&&e.hasAttribute("tabIndex")){if(document.activeElement===e){var t=$(e.parentElement,"tabIndex");t&&t.focus()}e.removeAttribute("tabindex")}}t.clearNode=d,t.safeStringifyDOMAware=h,t.isInDOM=p;var Q,Z,J=" ".charCodeAt(0);t.hasClass=m,t.addClass=v,t.removeClass=g,t.toggleClass=y;var ee=function(e){function t(t,n,i,o){e.call(this),this._node=t,this._type=n,this._useCapture=o||!1,this._wrapHandler=function(e){e=e||window.event,i(e)},"function"==typeof this._node.addEventListener?(this._usedAddEventListener=!0,this._node.addEventListener(this._type,this._wrapHandler,this._useCapture)):(this._usedAddEventListener=!1,this._node.attachEvent("on"+this._type,this._wrapHandler))}return __extends(t,e),t.prototype.dispose=function(){this._wrapHandler&&(this._usedAddEventListener?this._node.removeEventListener(this._type,this._wrapHandler,this._useCapture):this._node.detachEvent("on"+this._type,this._wrapHandler),this._node=null,this._wrapHandler=null)},t}(r.Disposable);t.addDisposableListener=_,t.addStandardDisposableListener=function(e,t,n,i){var o=n;return"click"===t?o=b(n):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(o=S(n)),e.addEventListener(t,o,i||!1),{dispose:function(){o&&(e.removeEventListener(t,o,i||!1),o=null,e=null,n=null)}}},t.addDisposableNonBubblingMouseOutListener=E;var te=function(){var e=function(e){return setTimeout(function(){return e((new Date).getTime())},0)},t=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame,n=function(e){},i=self.cancelAnimationFrame||self.cancelRequestAnimationFrame||self.msCancelAnimationFrame||self.msCancelRequestAnimationFrame||self.webkitCancelAnimationFrame||self.webkitCancelRequestAnimationFrame||self.mozCancelAnimationFrame||self.mozCancelRequestAnimationFrame||self.oCancelAnimationFrame||self.oCancelRequestAnimationFrame,o=!!t,r=t||e,s=i||n;return{isNative:o,request:function(e){return r(e)},cancel:function(e){return s(e)}}}(),ne=function(){function e(e,t){this._runner=e,this.priority=t,this._canceled=!1}return e.prototype.dispose=function(){this._canceled=!0},e.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(e){i.onUnexpectedError(e)}},e.sort=function(e,t){return t.priority-e.priority},e}();!function(){var e=[],n=null,i=!1,o=!1,r=function(){for(i=!1,n=e,e=[],o=!0;n.length>0;){n.sort(ne.sort);var t=n.shift();t.execute()}o=!1};t.scheduleAtNextAnimationFrame=function(t,n){void 0===n&&(n=0);var o=new ne(t,n);if(e.push(o),!i)if(i=!0,a.isChrome){var s;te.request(function(){clearTimeout(s),r()}),s=setTimeout(r,1e3)}else te.request(r);return o},t.runAtThisOrScheduleAtNextAnimationFrame=function(e,i){if(o){var r=new ne(e,i);return n.push(r),r}return t.scheduleAtNextAnimationFrame(e,i)}}();var ie=16,oe=function(e,t){return t},re=function(e){function t(t,i,o,r,s){void 0===r&&(r=oe),void 0===s&&(s=ie),e.call(this);var a=null,c=0,u=this._register(new n.TimeoutTimer),l=function(){c=(new Date).getTime(),o(a),a=null};this._register(_(t,i,function(e){a=r(a,e);var t=(new Date).getTime()-c;t>=s?(u.cancel(),l()):u.setIfNotSet(l,s-t)}))}return __extends(t,e),t}(r.Disposable);t.addDisposableThrottledListener=w,t.getComputedStyle=C;var se=function(){return function(e,t){return parseFloat(t)||0}}(),ae={getBorderLeftWidth:function(e){return T(e,"border-left-width","borderLeftWidth")},getBorderTopWidth:function(e){return T(e,"border-top-width","borderTopWidth")},getBorderRightWidth:function(e){return T(e,"border-right-width","borderRightWidth")},getBorderBottomWidth:function(e){return T(e,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(e){return T(e,"padding-left","paddingLeft")},getPaddingTop:function(e){return T(e,"padding-top","paddingTop")},getPaddingRight:function(e){return T(e,"padding-right","paddingRight")},getPaddingBottom:function(e){return T(e,"padding-bottom","paddingBottom")},getMarginLeft:function(e){return T(e,"margin-left","marginLeft")},getMarginTop:function(e){return T(e,"margin-top","marginTop")},getMarginRight:function(e){return T(e,"margin-right","marginRight")},getMarginBottom:function(e){return T(e,"margin-bottom","marginBottom")},__commaSentinel:!1};t.getTopLeftOffset=k,t.getDomNodePosition=x,t.getContentWidth=I,t.getTotalWidth=D,t.getContentHeight=A,t.getTotalHeight=L,t.getRelativeLeft=O,t.getRelativeTop=M,t.isAncestor=P,t.findParentWithClass=R,t.createStyleSheet=N;var ce=N();t.createCSSRule=W,t.getCSSRule=H,t.removeCSSRulesWithPrefix=V,t.isHTMLElement=K,t.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:a.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:a.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:a.isWebKit?"webkitAnimationIteration":"animationiteration"},t.EventHelper={stop:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}},t.saveParentsScrollTop=B,t.restoreParentsScrollTop=U;var ue=function(e){function n(n){var i=this;e.call(this);var r=!1,s=!1;this._eventEmitter=this._register(new o.EventEmitter);var a=function(e){s=!1,r||(r=!0,i._eventEmitter.emit("focus",{}))},c=function(e){r&&(s=!0,window.setTimeout(function(){s&&(s=!1,r=!1,i._eventEmitter.emit("blur",{}))},0))};this._register(_(n,t.EventType.FOCUS,a,!0)),this._register(_(n,t.EventType.BLUR,c,!0))}return __extends(n,e),n.prototype.addFocusListener=function(e){return this._eventEmitter.addListener2("focus",e)},n.prototype.addBlurListener=function(e){return this._eventEmitter.addListener2("blur",e)},n}(r.Disposable);t.trackFocus=z,t.append=j;var le=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.emmet=q,t.show=G,t.hide=Y,t.removeTabIndexAndUpdateFocus=X});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/builder",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/assert","vs/base/browser/dom","vs/base/browser/browserService","vs/css!./builder"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e,t){s.ok(i.isString(e),"Expected String as parameter");var n=c.getService().document.getElementById(e);return n?new I(n,t):null}function l(e){return e[S]||(e[S]={}),e[S]}function d(e){return!!e[S]}function h(e,t){return e instanceof D?new D(e):new I(e.getHTMLElement(),t)}function p(e,t){return new I(e,t)}function f(){return new I(null,!0)}function m(e,t,n){l(e)[t]=n}function v(e,t,n){if(d(e)){var o=l(e)[t];if(!i.isUndefined(o))return o}return n}function g(e,t){d(e)&&delete l(e)[t]}function y(e,t){m(e,E,t)}function _(e){g(e,E)}function b(e){return v(e,E)}t.withElementById=u,t.Build={withElementById:u};var S="_msDataKey",E="__$binding",w="__$listeners",C="__$visibility",T=function(){function e(e,t){this.x=e,this.y=t}return e}();t.Position=T;var k=function(){function e(e,t,n,i){this.top=e,this.right=t,this.bottom=n,this.left=i}return e}();t.Box=k;var x=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.substract=function(t){return new e(this.width-t.left-t.right,this.height-t.top-t.bottom)},e}();t.Dimension=x;var I=function(){function e(e,t){this.offdom=t,this.container=e,this.currentElement=e,this.createdElements=[],this.toUnbind={},this.captureToUnbind={},this.browserService=c.getService()}return e.prototype.asContainer=function(){return h(this,this.offdom)},e.prototype.clone=function(){var t=new e(this.container,this.offdom);return t.currentElement=this.currentElement,t.createdElements=this.createdElements,t.captureToUnbind=this.captureToUnbind,t.toUnbind=this.toUnbind,t},e.prototype.and=function(t){t instanceof e||t instanceof D||(t=new e(t,this.offdom));var n=[this];if(t instanceof D)for(var i=0;i<t.length;i++)n.push(t.item(i));else n.push(t);return new D(n)},e.prototype.build=function(t,n){s.ok(this.offdom,"This builder was not created off-dom, so build() can not be called."),t?t instanceof e&&(t=t.getHTMLElement()):t=this.container,s.ok(t,"Builder can only be build() with a container provided."),s.ok(a.isHTMLElement(t),"The container must either be a HTMLElement or a Builder.");var o,r,c=t,u=c.childNodes;if(i.isNumber(n)&&n<u.length)for(o=0,r=this.createdElements.length;r>o;o++)c.insertBefore(this.createdElements[o],u[n++]);else for(o=0,r=this.createdElements.length;r>o;o++)c.appendChild(this.createdElements[o]);return this},e.prototype.appendTo=function(t,n){t?t instanceof e&&(t=t.getHTMLElement()):t=this.container,s.ok(t,"Builder can only be build() with a container provided."),s.ok(a.isHTMLElement(t),"The container must either be a HTMLElement or a Builder.");var o=t;this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement);var r=o.childNodes;return i.isNumber(n)&&n<r.length?o.insertBefore(this.currentElement,r[n]):o.appendChild(this.currentElement),this},e.prototype.append=function(t,n){return s.ok(t,"Need a child to append"),a.isHTMLElement(t)&&(t=p(t)),s.ok(t instanceof e||t instanceof D,"Need a child to append"),t.appendTo(this,n),this},e.prototype.offDOM=function(){return this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this},e.prototype.getHTMLElement=function(){return this.currentElement},e.prototype.getContainer=function(){return this.container},e.prototype.div=function(e,t){return this.doElement("div",e,t)},e.prototype.p=function(e,t){return this.doElement("p",e,t)},e.prototype.ul=function(e,t){return this.doElement("ul",e,t)},e.prototype.ol=function(e,t){return this.doElement("ol",e,t)},e.prototype.li=function(e,t){return this.doElement("li",e,t)},e.prototype.span=function(e,t){return this.doElement("span",e,t)},e.prototype.img=function(e,t){return this.doElement("img",e,t)},e.prototype.a=function(e,t){return this.doElement("a",e,t)},e.prototype.header=function(e,t){return this.doElement("header",e,t)},e.prototype.section=function(e,t){return this.doElement("section",e,t)},e.prototype.footer=function(e,t){return this.doElement("footer",e,t)},e.prototype.element=function(e,t,n){return this.doElement(e,t,n)},e.prototype.doElement=function(t,n,o){var r=this.browserService.document.createElement(t);if(this.currentElement=r,this.offdom&&this.createdElements.push(r),i.isObject(n)&&this.attr(n),i.isFunction(n)&&(o=n),i.isFunction(o)){var s=new e(r);o.call(s,s)}return this.offdom||this.container.appendChild(r),this},e.prototype.domFocus=function(){return this.currentElement.focus(),this},e.prototype.hasFocus=function(){var e=this.browserService.document.activeElement;return e===this.currentElement},e.prototype.domSelect=function(e){void 0===e&&(e=null);var t=this.currentElement;return t.select(),e&&t.setSelectionRange(e.start,e.end),this},e.prototype.domBlur=function(){return this.currentElement.blur(),this},e.prototype.domClick=function(){return this.currentElement.click(),this},e.prototype.on=function(e,t,n,o){var r=this;if(i.isArray(e))e.forEach(function(e){r.on(e,t,n,o)});else{var s=e,c=a.addDisposableListener(this.currentElement,s,function(e){t(e,r,c)},o||!1);o?(this.captureToUnbind[s]||(this.captureToUnbind[s]=[]),this.captureToUnbind[s].push(c)):(this.toUnbind[s]||(this.toUnbind[s]=[]),this.toUnbind[s].push(c));var u=this.getProperty(w,[]);u.push(c),this.setProperty(w,u),n&&i.isArray(n)&&n.push(c)}return this},e.prototype.off=function(e,t){var n=this;if(i.isArray(e))e.forEach(function(e){n.off(e)});else{var r=e;t?this.captureToUnbind[r]&&(this.captureToUnbind[r]=o.disposeAll(this.captureToUnbind[r])):this.toUnbind[r]&&(this.toUnbind[r]=o.disposeAll(this.toUnbind[r]))}return this},e.prototype.once=function(e,t,n,o){var r=this;if(i.isArray(e))e.forEach(function(e){r.once(e,t)});else{var s=e,c=a.addDisposableListener(this.currentElement,s,function(e){t(e,r,c),c.dispose()},o||!1);n&&i.isArray(n)&&n.push(c)}return this},e.prototype.preventDefault=function(e,t,n,i){var o=function(e){e.preventDefault(),t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)};return this.on(e,o,n)},e.prototype.attr=function(e,t){if(i.isObject(e)){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];this.doSetAttr(n,o)}return this}return i.isString(e)&&!i.isString(t)?this.currentElement.getAttribute(e):(i.isString(e)&&(i.isString(t)||(t=String(t)),this.doSetAttr(e,t)),this)},e.prototype.doSetAttr=function(e,t){"class"===e&&(e="addClass"),this[e]?i.isArray(t)?this[e].apply(this,t):this[e].call(this,t):this.currentElement.setAttribute(e,t)},e.prototype.removeAttribute=function(e){this.currentElement.removeAttribute(e)},e.prototype.id=function(e){return this.currentElement.setAttribute("id",e),this},e.prototype.src=function(e){return this.currentElement.setAttribute("src",e),this},e.prototype.href=function(e){return this.currentElement.setAttribute("href",e),this},e.prototype.title=function(e){return this.currentElement.setAttribute("title",e),this},e.prototype.name=function(e){return this.currentElement.setAttribute("name",e),this},e.prototype.type=function(e){return this.currentElement.setAttribute("type",e),this},e.prototype.value=function(e){return this.currentElement.setAttribute("value",e),this},e.prototype.alt=function(e){return this.currentElement.setAttribute("alt",e),this},e.prototype.draggable=function(e){return this.currentElement.setAttribute("draggable",e?"true":"false"),this},e.prototype.tabindex=function(e){return this.currentElement.setAttribute("tabindex",e.toString()),this},e.prototype.style=function(e,t){if(i.isObject(e)){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];this.doSetStyle(n,o)}}else{if(i.isString(e)&&!i.isString(t))return this.currentElement.style[this.cssKeyToJavaScriptProperty(e)];i.isString(e)&&i.isString(t)&&this.doSetStyle(e,t)}return this},e.prototype.doSetStyle=function(e,t){if(e.indexOf("-")>=0){var n=e.split("-");e=n[0];for(var i=1;i<n.length;i++){var o=n[i];e=e+o.charAt(0).toUpperCase()+o.substr(1)}}this.currentElement.style[this.cssKeyToJavaScriptProperty(e)]=t},e.prototype.cssKeyToJavaScriptProperty=function(e){if(e.indexOf("-")>=0){var t=e.split("-");e=t[0];for(var n=1;n<t.length;n++){var i=t[n];e=e+i.charAt(0).toUpperCase()+i.substr(1)}}else"float"===e&&(e="cssFloat");return e},e.prototype.getComputedStyle=function(){return a.getComputedStyle(this.currentElement)},e.prototype.addClass=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return t.forEach(function(t){var n=t.split(" ");n.forEach(function(t){a.addClass(e.currentElement,t)})}),this},e.prototype.setClass=function(e,t){return void 0===t&&(t=null),null===t?this.currentElement.className=e:t?this.addClass(e):this.removeClass(e),this},e.prototype.hasClass=function(e){return a.hasClass(this.currentElement,e)},e.prototype.removeClass=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return t.forEach(function(t){var n=t.split(" ");n.forEach(function(t){a.removeClass(e.currentElement,t)})}),this},e.prototype.swapClass=function(e,t){return this.hasClass(e)?(this.removeClass(e),this.addClass(t)):(this.removeClass(t),this.addClass(e)),this},e.prototype.toggleClass=function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},e.prototype.color=function(e){return this.currentElement.style.color=e,this},e.prototype.background=function(e){return this.currentElement.style.backgroundColor=e,this},e.prototype.padding=function(e,t,n,o){return i.isString(e)&&e.indexOf(" ")>=0?this.padding.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.paddingTop=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.paddingRight=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.paddingBottom=this.toPixel(n)),i.isUndefinedOrNull(o)||(this.currentElement.style.paddingLeft=this.toPixel(o)),this)},e.prototype.margin=function(e,t,n,o){return i.isString(e)&&e.indexOf(" ")>=0?this.margin.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.marginTop=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.marginRight=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.marginBottom=this.toPixel(n)),i.isUndefinedOrNull(o)||(this.currentElement.style.marginLeft=this.toPixel(o)),this)},e.prototype.position=function(e,t,n,o,r){return i.isString(e)&&e.indexOf(" ")>=0?this.position.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.top=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.right=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.bottom=this.toPixel(n)),i.isUndefinedOrNull(o)||(this.currentElement.style.left=this.toPixel(o)),r||(r="absolute"),this.currentElement.style.position=r,this)},e.prototype.size=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.size.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.width=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.height=this.toPixel(t)),this)},e.prototype.minSize=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.minSize.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.minWidth=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.minHeight=this.toPixel(t)),this)},e.prototype.maxSize=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.maxSize.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.maxWidth=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.maxHeight=this.toPixel(t)),this)},e.prototype["float"]=function(e){return this.currentElement.style.cssFloat=e,this},e.prototype.clear=function(e){return this.currentElement.style.clear=e,this},e.prototype.normal=function(){return this.currentElement.style.fontStyle="normal",this.currentElement.style.fontWeight="normal",this.currentElement.style.textDecoration="none",this},e.prototype.italic=function(){return this.currentElement.style.fontStyle="italic",this},e.prototype.bold=function(){return this.currentElement.style.fontWeight="bold",this},e.prototype.underline=function(){return this.currentElement.style.textDecoration="underline",this},e.prototype.overflow=function(e){return this.currentElement.style.overflow=e,this},e.prototype.display=function(e){return this.currentElement.style.display=e,this},e.prototype.disable=function(){return this.currentElement.setAttribute("disabled","disabled"),this},e.prototype.enable=function(){return this.currentElement.removeAttribute("disabled"),this},e.prototype.show=function(){return this.hasClass("hidden")&&this.removeClass("hidden"),this.attr("aria-hidden","false"),this.cancelVisibilityPromise(),this},e.prototype.showDelayed=function(e){var t=this;this.cancelVisibilityPromise();var i=n.TPromise.timeout(e);return this.setProperty(C,i),i.done(function(){t.removeProperty(C),t.show()}),this},e.prototype.hide=function(){return this.hasClass("hidden")||this.addClass("hidden"),this.attr("aria-hidden","true"),this.cancelVisibilityPromise(),this},e.prototype.isHidden=function(){return this.hasClass("hidden")||"none"===this.currentElement.style.display},e.prototype.toggleVisibility=function(){return this.cancelVisibilityPromise(),this.swapClass("builder-visible","hidden"),this.isHidden()?this.attr("aria-hidden","true"):this.attr("aria-hidden","false"),this},e.prototype.cancelVisibilityPromise=function(){var e=this.getProperty(C);e&&(e.cancel(),this.removeProperty(C))},e.prototype.border=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.border.apply(this,e.split(" ")):(this.currentElement.style.borderWidth=this.toPixel(e),n&&(this.currentElement.style.borderColor=n),t&&(this.currentElement.style.borderStyle=t),this)},e.prototype.borderTop=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderTop.apply(this,e.split(" ")):(this.currentElement.style.borderTopWidth=this.toPixel(e),n&&(this.currentElement.style.borderTopColor=n),t&&(this.currentElement.style.borderTopStyle=t),this)},e.prototype.borderBottom=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderBottom.apply(this,e.split(" ")):(this.currentElement.style.borderBottomWidth=this.toPixel(e),n&&(this.currentElement.style.borderBottomColor=n),t&&(this.currentElement.style.borderBottomStyle=t),this)},e.prototype.borderLeft=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderLeft.apply(this,e.split(" ")):(this.currentElement.style.borderLeftWidth=this.toPixel(e),n&&(this.currentElement.style.borderLeftColor=n),t&&(this.currentElement.style.borderLeftStyle=t),this)},e.prototype.borderRight=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderRight.apply(this,e.split(" ")):(this.currentElement.style.borderRightWidth=this.toPixel(e),n&&(this.currentElement.style.borderRightColor=n),t&&(this.currentElement.style.borderRightStyle=t),this)},e.prototype.textAlign=function(e){return this.currentElement.style.textAlign=e,this},e.prototype.verticalAlign=function(e){return this.currentElement.style.verticalAlign=e,this},e.prototype.toPixel=function(e){return-1===e.toString().indexOf("px")?e.toString()+"px":e},e.prototype.innerHtml=function(e,t){return t?this.currentElement.innerHTML+=e:this.currentElement.innerHTML=e,this},e.prototype.text=function(e,t){return t?0===this.currentElement.children.length?this.currentElement.textContent+=e:this.currentElement.appendChild(this.browserService.document.createTextNode(e)):this.currentElement.textContent=e,this},e.prototype.safeInnerHtml=function(e,t){return this.innerHtml(r.escape(e),t)},e.prototype.bind=function(e){return y(this.currentElement,e),this},e.prototype.unbind=function(){return _(this.currentElement),this},e.prototype.getBinding=function(){return b(this.currentElement)},e.prototype.setProperty=function(e,t){return m(this.currentElement,e,t),this},e.prototype.getProperty=function(e,t){return v(this.currentElement,e,t)},e.prototype.removeProperty=function(e){return d(this.currentElement)&&delete l(this.currentElement)[e],this},e.prototype.parent=function(e){return s.ok(!this.offdom,"Builder was created with offdom = true and thus has no parent set"),p(this.currentElement.parentNode,e)},e.prototype.children=function(e){for(var t=this.currentElement.children,n=[],i=0;i<t.length;i++)n.push(p(t.item(i),e));return new D(n)},e.prototype.removeChild=function(e){return this.currentElement===e.parent().getHTMLElement()&&this.currentElement.removeChild(e.getHTMLElement()),this},e.prototype.select=function(e,t){s.ok(i.isString(e),"Expected String as parameter");for(var n=this.currentElement.querySelectorAll(e),o=[],r=0;r<n.length;r++)o.push(p(n.item(r),t));return new D(o)},e.prototype.matches=function(e){var t=this.currentElement,n=t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return n&&n.call(t,e)},e.prototype.isEmpty=function(){return!this.currentElement.childNodes||0===this.currentElement.childNodes.length},e.prototype.unbindDescendants=function(e){if(e&&e.children)for(var t=0,n=e.children.length;n>t;t++){var o=e.children.item(t);if(d(o)){var r=l(o)[w];if(i.isArray(r))for(;r.length;)r.pop().dispose();delete o[S]}this.unbindDescendants(o)}},e.prototype.empty=function(){return this.unbindDescendants(this.currentElement),this.clearChildren(),this.offdom&&(this.createdElements=[]),this},e.prototype.clearChildren=function(){return this.currentElement&&a.clearNode(this.currentElement),this},e.prototype.destroy=function(){if(this.currentElement&&(this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this.empty(),d(this.currentElement))){var e=l(this.currentElement)[w];if(i.isArray(e))for(;e.length;)e.pop().dispose();delete this.currentElement[S]}var t;for(t in this.toUnbind)this.toUnbind.hasOwnProperty(t)&&i.isArray(this.toUnbind[t])&&(this.toUnbind[t]=o.disposeAll(this.toUnbind[t]));for(t in this.captureToUnbind)this.captureToUnbind.hasOwnProperty(t)&&i.isArray(this.captureToUnbind[t])&&(this.captureToUnbind[t]=o.disposeAll(this.captureToUnbind[t]));this.currentElement=null,this.container=null,this.offdom=null,this.createdElements=null,this.captureToUnbind=null,this.toUnbind=null},e.prototype.dispose=function(){this.destroy()},e.prototype.getPositionRelativeTo=function(t){t instanceof e&&(t=t.getHTMLElement());var n=a.getRelativeLeft(this.currentElement,t),i=a.getRelativeTop(this.currentElement,t);return new k(i,-1,-1,n)},e.prototype.getPosition=function(){var e=a.getTopLeftOffset(this.currentElement);return new k(e.top,-1,-1,e.left)},e.prototype.getTotalSize=function(){var e=a.getTotalWidth(this.currentElement),t=a.getTotalHeight(this.currentElement);return new x(e,t)},e.prototype.getContentSize=function(){var e=a.getContentWidth(this.currentElement),t=a.getContentHeight(this.currentElement);return new x(e,t)},e.prototype.getClientArea=function(){if(this.currentElement!==this.browserService.document.body){var e=a.getDomNodePosition(this.currentElement);return new x(e.width,e.height)}if(this.browserService.window.innerWidth&&this.browserService.window.innerHeight)return new x(this.browserService.window.innerWidth,this.browserService.window.innerHeight);if(this.browserService.document.body&&this.browserService.document.body.clientWidth&&this.browserService.document.body.clientWidth)return new x(this.browserService.document.body.clientWidth,this.browserService.document.body.clientHeight);if(this.browserService.document.documentElement&&this.browserService.document.documentElement.clientWidth&&this.browserService.document.documentElement.clientHeight)return new x(this.browserService.document.documentElement.clientWidth,this.browserService.document.documentElement.clientHeight);
throw new Error("Unable to figure out browser width and height")},e}();t.Builder=I;var D=function(e){function t(n){if(s.ok(i.isArray(n)||n instanceof t,"Expected Array or MultiBuilder as parameter"),e.call(this),this.length=0,this.builders=[],i.isArray(n))for(var o=0;o<n.length;o++)n[o]instanceof HTMLElement?this.push(p(n[o])):this.push(n[o]);else for(var o=0;o<n.length;o++)this.push(n.item(o));var r=this,a=function(e){r[e]=function(){for(var n,o=Array.prototype.slice.call(arguments),s=!1,a=0;a<r.length;a++){var c=r.item(a)[e].apply(r.item(a),o);if(c instanceof t){n||(n=[]),s=!0;for(var u=0;u<c.length;u++)n.push(c.item(u))}else i.isUndefined(c)||c instanceof I||(n||(n=[]),n.push(c))}return n&&s?new t(n):n||r}};for(var c in I.prototype)"clone"!==c&&"and"!==c&&I.prototype.hasOwnProperty(c)&&i.isFunction(I.prototype[c])&&a(c)}return __extends(t,e),t.prototype.item=function(e){return this.builders[e]},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0;n<e.length;n++)this.builders.push(e[n]);this.length=this.builders.length},t.prototype.pop=function(){var e=this.builders.pop();return this.length=this.builders.length,e},t.prototype.concat=function(e){var t=this.builders.concat(e);return this.length=this.builders.length,t},t.prototype.shift=function(){var e=this.builders.shift();return this.length=this.builders.length,e},t.prototype.unshift=function(e){var t=this.builders.unshift(e);return this.length=this.builders.length,t},t.prototype.slice=function(e,t){var n=this.builders.slice(e,t);return this.length=this.builders.length,n},t.prototype.splice=function(e,t){var n=this.builders.splice(e,t);return this.length=this.builders.length,n},t.prototype.clone=function(){return new t(this)},t.prototype.and=function(e){e instanceof I||e instanceof t||(e=new I(e));var n=[];if(e instanceof t)for(var i=0;i<e.length;i++)n.push(e.item(i));else n.push(e);return this.push.apply(this,n),this},t}(I);t.MultiBuilder=D,t.setPropertyOnElement=m,t.getPropertyFromElement=v,t.removePropertyFromElement=g,t.bindElement=y,t.unbindElement=_,t.getBindingFromElement=b,t.Binding={setPropertyOnElement:m,getPropertyFromElement:v,removePropertyFromElement:g,bindElement:y,unbindElement:_,getBindingFromElement:b};var A=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.$=function(e){if(i.isUndefined(e))return f();if(!e)throw new Error("Bad use of $");if(a.isHTMLElement(e)||e===window)return p(e);if(i.isArray(e))return new D(e);if(e instanceof I)return h(e);if(i.isString(e)){if("<"===e[0]){var t=void 0,n=c.getService().document.createElement("div");if(n.innerHTML=r.format.apply(r,arguments),0===n.children.length)throw new Error("Bad use of $");if(1===n.children.length)return t=n.firstChild,n.removeChild(t),p(t);for(var o=[];n.firstChild;)t=n.firstChild,n.removeChild(t),o.push(p(t));return new D(o)}if(1===arguments.length){var s=A.exec(e);if(!s)throw new Error("Bad use of $");var u=s[1]||"div",l=s[3]||void 0,d=(s[4]||"").replace(/\./g," "),m={};return l&&(m.id=l),d&&(m["class"]=d),f().element(u,m)}var v=f();return v.element.apply(v,arguments),v}throw new Error("Bad use of $")},t.$.Box=k,t.$.Dimension=x,t.$.Position=T,t.$.Builder=I,t.$.MultiBuilder=D,t.$.Build=t.Build,t.$.Binding=t.Binding}),define("vs/base/browser/dnd",["require","exports","vs/base/browser/builder"],function(e,t,n){"use strict";var i=function(){function e(e,t){var i=this;n.$(e).on("dragover",function(){i.timeout||(i.timeout=setTimeout(function(){t(),i.timeout=null},800))}),n.$(e).on(["dragleave","drop","dragend"],function(){return i.clearDragTimeout()})}return e.prototype.clearDragTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e.prototype.dispose=function(){this.clearDragTimeout()},e}();t.DelayedDragHandler=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/globalMouseMoveMonitor",["require","exports","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/iframe","vs/base/browser/mouseEvent"],function(e,t,n,i,o,r){"use strict";function s(e,t){var n=new r.StandardMouseEvent(t);return n.preventDefault(),{leftButton:n.leftButton,posx:n.posx,posy:n.posy}}t.standardMouseMoveMerger=s;var a=function(e){function t(){e.call(this),this.hooks=[],this.mouseMoveEventMerger=null,this.mouseMoveCallback=null,this.onStopCallback=null}return __extends(t,e),t.prototype.dispose=function(){this.stopMonitoring(!1),e.prototype.dispose.call(this)},t.prototype.stopMonitoring=function(e){if(this.isMonitoring()){this.hooks=n.disposeAll(this.hooks),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;var t=this.onStopCallback;this.onStopCallback=null,e&&t()}},t.prototype.isMonitoring=function(){return this.hooks.length>0},t.prototype.startMonitoring=function(e,t,n){var s=this;if(!this.isMonitoring()){this.mouseMoveEventMerger=e,this.mouseMoveCallback=t,this.onStopCallback=n;for(var a=o.IframeUtils.getSameOriginWindowChain(),c=0;c<a.length;c++)this.hooks.push(i.addDisposableThrottledListener(a[c].window.document,"mousemove",function(e){return s.mouseMoveCallback(e)},function(e,t){return s.mouseMoveEventMerger(e,t)})),this.hooks.push(i.addDisposableListener(a[c].window.document,"mouseup",function(e){return s.stopMonitoring(!0)}));if(o.IframeUtils.hasDifferentOriginAncestor()){var u=a[a.length-1];this.hooks.push(i.addDisposableListener(u.window.document,"mouseout",function(e){var t=new r.StandardMouseEvent(e);"html"===t.target.tagName.toLowerCase()&&s.stopMonitoring(!0)})),this.hooks.push(i.addDisposableListener(u.window.document,"mouseover",function(e){var t=new r.StandardMouseEvent(e);"html"===t.target.tagName.toLowerCase()&&s.stopMonitoring(!0)})),this.hooks.push(i.addDisposableListener(u.window.document.body,"mouseleave",function(e){s.stopMonitoring(!0)}))}}},t}(n.Disposable);t.GlobalMouseMoveMonitor=a}),define("vs/base/browser/htmlContentRenderer",["require","exports","vs/base/browser/dom","vs/base/common/marked/marked"],function(e,t,n,i){"use strict";function o(e,t){return void 0===t&&(t={}),"string"==typeof e?r({isText:!0,text:e},t):Array.isArray(e)?r({children:e},t):e?r(e,t):void 0}function r(e,t){void 0===t&&(t={});var r=t.codeBlockRenderer,u=t.actionCallback;if(e.isText)return document.createTextNode(e.text);var l=s(e.tagName)||"div",d=document.createElement(l);if(e.className&&(d.className=e.className),e.text&&(d.textContent=e.text),e.style&&d.setAttribute("style",e.style),e.customStyle&&Object.keys(e.customStyle).forEach(function(t){d.style[t]=e.customStyle[t]}),e.code&&r){var h=r(e.code.language,e.code.value);d.innerHTML=h}if(e.children&&e.children.forEach(function(e){d.appendChild(o(e,t))}),e.formattedText&&a(d,c(e.formattedText),u),e.markdown){var p=new i.marked.Renderer;p.link=function(e,t,n){return'<a href="#" data-href="'+e+'" title="'+(t||n)+'">'+n+"</a>"},p.paragraph=function(e){return"<div>"+e+"</div>"},t.codeBlockRenderer&&(p.code=function(e,n){return t.codeBlockRenderer(n,e)}),t.actionCallback&&n.addStandardDisposableListener(d,"click",function(e){if("A"===e.target.tagName){var n=e.target.dataset.href;n&&t.actionCallback(n,e)}}),d.innerHTML=i.marked(e.markdown,{sanitize:!0,renderer:p})}return d}function s(e){return e&&h.hasOwnProperty(e)?e:null}function a(e,t,i){var o;if(t.type===d.Text)o=document.createTextNode(t.content);else if(t.type===d.Bold)o=document.createElement("b");else if(t.type===d.Italics)o=document.createElement("i");else if(t.type===d.Action){var r=document.createElement("a");r.href="#",n.addStandardDisposableListener(r,"click",function(e){i(String(t.index),e)}),o=r}else t.type===d.NewLine?o=document.createElement("br"):t.type===d.Root&&(o=e);e!==o&&e.appendChild(o),Array.isArray(t.children)&&t.children.forEach(function(e){a(o,e,i)})}function c(e){for(var t={type:d.Root,children:[]},n=0,i=t,o=[],r=new p(e);!r.eos();){var s=r.next(),a="\\"===s&&l(r.peek())!==d.Invalid;if(a&&(s=r.next()),!a&&u(s)&&s===r.peek()){r.advance(),i.type===d.Text&&(i=o.pop());var c=l(s);if(i.type===c||i.type===d.Action&&c===d.ActionClose)i=o.pop();else{var h={type:c,children:[]};c===d.Action&&(h.index=n,n++),i.children.push(h),o.push(i),i=h}}else if("\n"===s)i.type===d.Text&&(i=o.pop()),i.children.push({type:d.NewLine});else if(i.type!==d.Text){var f={type:d.Text,content:s};i.children.push(f),o.push(i),i=f}else i.content+=s}return i.type===d.Text&&(i=o.pop()),o.length,t}function u(e){return l(e)!==d.Invalid}function l(e){switch(e){case"*":return d.Bold;case"_":return d.Italics;case"[":return d.Action;case"]":return d.ActionClose;default:return d.Invalid}}t.renderHtml=o;var d,h={a:!0,b:!0,blockquote:!0,code:!0,del:!0,dd:!0,div:!0,dl:!0,dt:!0,em:!0,h1h2h3i:!0,img:!0,kbd:!0,li:!0,ol:!0,p:!0,pre:!0,s:!0,span:!0,sup:!0,sub:!0,strong:!0,strike:!0,ul:!0,br:!0,hr:!0},p=function(){function e(e){this.source=e,this.index=0}return e.prototype.eos=function(){return this.index>=this.source.length},e.prototype.next=function(){var e=this.peek();return this.advance(),e},e.prototype.peek=function(){return this.source[this.index]},e.prototype.advance=function(){this.index++},e}();!function(e){e[e.Invalid=0]="Invalid",e[e.Root=1]="Root",e[e.Text=2]="Text",e[e.Bold=3]="Bold",e[e.Italics=4]="Italics",e[e.Action=5]="Action",e[e.ActionClose=6]="ActionClose",e[e.NewLine=7]="NewLine"}(d||(d={}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/idleMonitor",["require","exports","vs/base/common/async","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/browser/browserService","vs/base/browser/dom"],function(e,t,n,i,o,r,s){"use strict";!function(e){e[e.Idle=0]="Idle",e[e.Active=1]="Active"}(t.UserStatus||(t.UserStatus={}));var a=t.UserStatus;t.DEFAULT_IDLE_TIME=36e5;var c=function(e){function o(o){var a=this;void 0===o&&(o=t.DEFAULT_IDLE_TIME),e.call(this),this._status=null,this._idleCheckTimeout=this._register(new n.TimeoutTimer),this._lastActiveTime=-1,this._idleTime=o,this._eventEmitter=this._register(new i.EventEmitter),this._register(s.addDisposableListener(r.getService().document,"mousemove",function(){return a._onUserActive()})),this._register(s.addDisposableListener(r.getService().document,"keydown",function(){return a._onUserActive()})),this._onUserActive()}return __extends(o,e),o.prototype.dispose=function(){e.prototype.dispose.call(this)},o.prototype.addOneTimeActiveListener=function(e){return this._eventEmitter.addOneTimeDisposableListener("onActive",e)},o.prototype.addOneTimeIdleListener=function(e){return this._eventEmitter.addOneTimeDisposableListener("onIdle",e)},o.prototype.getStatus=function(){return this._status},o.prototype._onUserActive=function(){this._lastActiveTime=(new Date).getTime(),this._status!==a.Active&&(this._status=a.Active,this._scheduleIdleCheck(),this._eventEmitter.emit("onActive"))},o.prototype._onUserIdle=function(){this._status!==a.Idle&&(this._status=a.Idle,this._eventEmitter.emit("onIdle"))},o.prototype._scheduleIdleCheck=function(){var e=this,t=this._lastActiveTime+this._idleTime;this._idleCheckTimeout.setIfNotSet(function(){e._checkIfUserIsIdle()},t-(new Date).getTime())},o.prototype._checkIfUserIsIdle=function(){var e=(new Date).getTime()-this._lastActiveTime;e>=this._idleTime?this._onUserIdle():this._scheduleIdleCheck()},o}(o.Disposable);t.IdleMonitor=c}),define("vs/base/browser/touch",["require","exports","vs/base/common/arrays","vs/base/common/lifecycle","vs/base/browser/dom"],function(e,t,n,i,o){"use strict";var r;!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(r=t.EventType||(t.EventType={}));var s=function(){function e(e){this.callOnTarget=[],this.activeTouches={},this.target=e,this.handle=null}return e.prototype.dispose=function(){this.target=null,this.handle&&(this.handle.dispose(),this.handle=null)},Object.defineProperty(e.prototype,"target",{set:function(e){var t=this;this.callOnTarget=i.disposeAll(this.callOnTarget),this.activeTouches={},this.targetElement=e,this.targetElement&&(this.callOnTarget.push(o.addDisposableListener(this.targetElement,"touchstart",function(e){return t.onTouchStart(e)})),this.callOnTarget.push(o.addDisposableListener(this.targetElement,"touchend",function(e){return t.onTouchEnd(e)})),this.callOnTarget.push(o.addDisposableListener(this.targetElement,"touchmove",function(e){return t.onTouchMove(e)})))},enumerable:!0,configurable:!0}),e.newGestureEvent=function(e){var t=document.createEvent("CustomEvent");return t.initEvent(e,!1,!0),t},e.prototype.onTouchStart=function(t){var n=Date.now();t.preventDefault(),t.stopPropagation(),this.handle&&(this.handle.dispose(),this.handle=null);for(var i=0,o=t.targetTouches.length;o>i;i++){var s=t.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:n,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[n],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};var a=e.newGestureEvent(r.Start);a.pageX=s.pageX,a.pageY=s.pageY,this.targetElement.dispatchEvent(a)}},e.prototype.onTouchEnd=function(t){var i=Date.now();t.preventDefault(),t.stopPropagation();for(var o=Object.keys(this.activeTouches).length,s=0,a=t.changedTouches.length;a>s;s++){var c=t.changedTouches.item(s);if(this.activeTouches.hasOwnProperty(String(c.identifier))){var u=this.activeTouches[c.identifier],l=Date.now()-u.initialTimeStamp;if(l<e.HOLD_DELAY&&Math.abs(u.initialPageX-n.tail(u.rollingPageX))<30&&Math.abs(u.initialPageY-n.tail(u.rollingPageY))<30){var d=e.newGestureEvent(r.Tap);d.initialTarget=u.initialTarget,d.pageX=n.tail(u.rollingPageX),d.pageY=n.tail(u.rollingPageY),this.targetElement.dispatchEvent(d)}else if(l>=e.HOLD_DELAY&&Math.abs(u.initialPageX-n.tail(u.rollingPageX))<30&&Math.abs(u.initialPageY-n.tail(u.rollingPageY))<30){var d=e.newGestureEvent(r.Contextmenu);d.initialTarget=u.initialTarget,d.pageX=n.tail(u.rollingPageX),d.pageY=n.tail(u.rollingPageY),this.targetElement.dispatchEvent(d)}else if(1===o){var h=n.tail(u.rollingPageX),p=n.tail(u.rollingPageY),f=n.tail(u.rollingTimestamps)-u.rollingTimestamps[0],m=h-u.rollingPageX[0],v=p-u.rollingPageY[0];this.inertia(i,Math.abs(m)/f,m>0?1:-1,h,Math.abs(v)/f,v>0?1:-1,p)}delete this.activeTouches[c.identifier]}else console.warn("move of an UNKNOWN touch",c)}},e.prototype.inertia=function(t,n,i,s,a,c,u){var l=this;this.handle=o.scheduleAtNextAnimationFrame(function(){var o=Date.now(),d=o-t,h=0,p=0,f=!0;n+=e.SCROLL_FRICTION*d,a+=e.SCROLL_FRICTION*d,n>0&&(f=!1,h=i*n*d),a>0&&(f=!1,p=c*a*d);var m=e.newGestureEvent(r.Change);m.translationX=h,m.translationY=p,l.targetElement.dispatchEvent(m),f||l.inertia(o,n,i,s+h,a,c,u+p)})},e.prototype.onTouchMove=function(t){var i=Date.now();t.preventDefault(),t.stopPropagation();for(var o=0,s=t.changedTouches.length;s>o;o++){var a=t.changedTouches.item(o);if(this.activeTouches.hasOwnProperty(String(a.identifier))){var c=this.activeTouches[a.identifier],u=e.newGestureEvent(r.Change);u.translationX=a.pageX-n.tail(c.rollingPageX),u.translationY=a.pageY-n.tail(c.rollingPageY),u.pageX=a.pageX,u.pageY=a.pageY,this.targetElement.dispatchEvent(u),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(a.pageX),c.rollingPageY.push(a.pageY),c.rollingTimestamps.push(i)}else console.warn("end of an UNKNOWN touch",a)}},e.HOLD_DELAY=700,e.SCROLL_FRICTION=-.005,e}();t.Gesture=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/actionbar/actionbar",["require","exports","vs/nls!vs/base/browser/ui/actionbar/actionbar","vs/base/common/lifecycle","vs/base/browser/builder","vs/base/common/platform","vs/base/common/actions","vs/base/browser/dom","vs/base/common/events","vs/base/common/types","vs/base/common/eventEmitter","vs/base/browser/touch","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/css!./actionbar"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(e){function t(t,n){var i=this;if(e.call(this),this._callOnDispose=[],this._context=t||this,this._action=n,n instanceof s.Action){var o=n.addBulkListener(function(e){i.builder&&e.forEach(function(e){switch(e.getType()){case s.Action.ENABLED:i._updateEnabled();break;case s.Action.LABEL:i._updateLabel(),i._updateTooltip();break;case s.Action.TOOLTIP:i._updateTooltip();break;case s.Action.CLASS:i._updateClass();break;case s.Action.CHECKED:i._updateChecked();break;default:i._updateUnknown(e)}})});this._callOnDispose.push(o)}}return __extends(t,e),Object.defineProperty(t.prototype,"callOnDispose",{get:function(){return this._callOnDispose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(e){this._actionRunner=e},enumerable:!0,configurable:!0}),t.prototype.getAction=function(){return this._action},t.prototype.isEnabled=function(){return this._action.enabled},t.prototype.setActionContext=function(e){this._context=e},t.prototype.render=function(e){var t=this;this.builder=o.$(e),this.gesture=new d.Gesture(e),this.builder.on(a.EventType.CLICK,function(e){t.onClick(e)}),this.builder.on(d.EventType.Tap,function(e){t.onClick(e)}),r.isMacintosh&&this.builder.on(a.EventType.CONTEXT_MENU,function(e){t.onClick(e)}),this.builder.on("mousedown",function(e){0===e.button&&t._action.enabled&&t.builder.addClass("active")}),this.builder.on(["mouseup","mouseout"],function(e){0===e.button&&t._action.enabled&&t.builder.removeClass("active")})},t.prototype.onClick=function(e){a.EventHelper.stop(e,!0),this._actionRunner.run(this._action,this._context||e)},t.prototype.focus=function(){this.builder&&this.builder.domFocus()},t.prototype.blur=function(){this.builder&&this.builder.domBlur()},t.prototype._updateEnabled=function(){},t.prototype._updateLabel=function(){},t.prototype._updateTooltip=function(){},t.prototype._updateClass=function(){},t.prototype._updateChecked=function(){},t.prototype._updateUnknown=function(e){},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.builder&&(this.builder.destroy(),this.builder=null),this.gesture&&(this.gesture.dispose(),this.gesture=null),i.cAll(this._callOnDispose)},t}(l.EventEmitter);t.BaseActionItem=f;var m=function(e){function t(n,i){e.call(this,t.ID,n,n?"separator text":"separator"),this.checked=!1,this.enabled=!1,this.order=i}return __extends(t,e),t.ID="actions.monaco.separator",t}(s.Action);t.Separator=m;var v=function(e){function t(t,n,i){void 0===i&&(i={}),e.call(this,t,n),this.options=i,this.options.icon=void 0!==i.icon?i.icon:!1,this.options.label=void 0!==i.label?i.label:!0,this.cssClass=""}return __extends(t,e),t.prototype.render=function(t){e.prototype.render.call(this,t),this.$e=o.$("a.action-label").appendTo(this.builder),this.$e.attr({role:"button"}),this.options.label&&this.options.keybinding&&o.$("span.keybinding").text(this.options.keybinding).appendTo(this.builder),this._updateClass(),this._updateLabel(),this._updateTooltip(),this._updateEnabled(),this._updateChecked()},t.prototype.focus=function(){e.prototype.focus.call(this),this.$e.domFocus()},t.prototype._updateLabel=function(){this.options.label&&this.$e.text(this.getAction().label)},t.prototype._updateTooltip=function(){var e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=n.localize(0,null,e,this.options.keybinding))),e&&this.$e.attr({title:e})},t.prototype._updateClass=function(){this.cssClass&&this.$e.removeClass(this.cssClass),this.options.icon?(this.cssClass=this.getAction()["class"],this.$e.addClass("icon"),this.cssClass&&this.$e.addClass(this.cssClass),this._updateEnabled()):this.$e.removeClass("icon")},t.prototype._updateEnabled=function(){this.getAction().enabled?(this.builder.removeClass("disabled"),this.$e.removeClass("disabled"),this.$e.attr({tabindex:0})):(this.builder.addClass("disabled"),this.$e.addClass("disabled"),a.removeTabIndexAndUpdateFocus(this.$e.getHTMLElement()))},t.prototype._updateChecked=function(){this.getAction().checked?this.$e.addClass("checked"):this.$e.removeClass("checked")},t}(f);t.ActionItem=v;var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(t){var n=document.createElement("div");o.$(n).addClass("progress-item");var i=document.createElement("div");o.$(i).addClass("label"),i.textContent=this.getAction().label,i.title=this.getAction().label,e.prototype.render.call(this,i);var r=document.createElement("div");r.textContent="…",o.$(r).addClass("tag","progress");var s=document.createElement("div");s.textContent="✓",o.$(s).addClass("tag","done");var a=document.createElement("div");a.textContent="!",o.$(a).addClass("tag","error"),this.callOnDispose.push(this.addListener(c.EventType.BEFORE_RUN,function(){o.$(r).addClass("active"),o.$(s).removeClass("active"),o.$(a).removeClass("active")})),this.callOnDispose.push(this.addListener(c.EventType.RUN,function(e){o.$(r).removeClass("active"),e.error?(o.$(s).removeClass("active"),o.$(a).addClass("active")):(o.$(a).removeClass("active"),o.$(s).addClass("active"))})),n.appendChild(i),n.appendChild(r),n.appendChild(s),n.appendChild(a),t.appendChild(n)},t.prototype.dispose=function(){i.cAll(this.callOnDispose),e.prototype.dispose.call(this)},t}(f);t.ProgressItem=g,function(e){e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL"}(t.ActionsOrientation||(t.ActionsOrientation={}));var y=t.ActionsOrientation,_={orientation:y.HORIZONTAL,context:null},b=function(e){function t(t,n){var i=this;void 0===n&&(n=_),e.call(this),this.options=n,this._context=n.context,this.toDispose=[],this._actionRunner=this.options.actionRunner,this._actionRunner||(this._actionRunner=new s.ActionRunner,this.toDispose.push(this._actionRunner)),this.toDispose.push(this.addEmitter2(this._actionRunner)),this.items=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";var r=this.options.orientation===y.VERTICAL;r&&(this.domNode.className+=" vertical"),o.$(this.domNode).on(a.EventType.KEY_DOWN,function(e){var t=new h.StandardKeyboardEvent(e),n=!0;t.equals(r?p.CommonKeybindings.UP_ARROW:p.CommonKeybindings.LEFT_ARROW)?i.focusPrevious():t.equals(r?p.CommonKeybindings.DOWN_ARROW:p.CommonKeybindings.RIGHT_ARROW)?i.focusNext():t.equals(p.CommonKeybindings.ESCAPE)?i.cancel():t.equals(p.CommonKeybindings.ENTER)||t.equals(p.CommonKeybindings.SPACE)||(n=!1),n&&(t.preventDefault(),t.stopPropagation())}),o.$(this.domNode).on(a.EventType.CONTEXT_MENU,function(e){e.preventDefault(),e.stopPropagation()}),o.$(this.domNode).on(a.EventType.KEY_UP,function(e){var t=new h.StandardKeyboardEvent(e);t.equals(p.CommonKeybindings.ENTER)||t.equals(p.CommonKeybindings.SPACE)?(i.doTrigger(t),t.preventDefault(),t.stopPropagation()):(t.equals(p.CommonKeybindings.TAB)||t.equals(p.CommonKeybindings.SHIFT_TAB))&&i.updateFocusedItem()}),this.focusTracker=a.trackFocus(this.domNode),this.focusTracker.addBlurListener(function(){document.activeElement!==i.domNode&&a.isAncestor(document.activeElement,i.domNode)||(i.emit(a.EventType.BLUR,{}),i.focusedItem=void 0)}),this.focusTracker.addFocusListener(function(){return i.updateFocusedItem()}),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),t=t instanceof o.Builder?t.getHTMLElement():t,t.appendChild(this.domNode)}return __extends(t,e),t.prototype.setAriaLabel=function(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")},t.prototype.updateFocusedItem=function(){for(var e=0;e<this.actionsList.children.length;e++){var t=this.actionsList.children[e];if(a.isAncestor(document.activeElement,t)){this.focusedItem=e;break}}},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e,this.items.forEach(function(t){return t.setActionContext(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(e){e&&(this._actionRunner=e,this.items.forEach(function(t){return t.actionRunner=e}))},enumerable:!0,configurable:!0}),t.prototype.getContainer=function(){return o.$(this.domNode)},t.prototype.push=function(e,t){var n=this;void 0===t&&(t={}),Array.isArray(e)||(e=[e]);var i=u.isNumber(t.index)?t.index:null;e.forEach(function(e){var o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");var r=null;n.options.actionItemProvider&&(r=n.options.actionItemProvider(e)),r||(r=new v(n.context,e,t)),r.actionRunner=n._actionRunner,r.setActionContext(n.context),n.addEmitter(r),r.render(o),null===i||0>i||i>=n.actionsList.children.length?n.actionsList.appendChild(o):n.actionsList.insertBefore(o,n.actionsList.children[i++]),n.items.push(r)})},t.prototype.clear=function(){for(var e;e=this.items.pop();)e.dispose();o.$(this.actionsList).empty()},t.prototype.length=function(){return this.items.length},t.prototype.isEmpty=function(){return 0===this.items.length},t.prototype.onContentsChange=function(){this.emit(c.EventType.CONTENTS_CHANGED)},t.prototype.focus=function(e){e&&"undefined"==typeof this.focusedItem&&(this.focusedItem=0),this.updateFocus()},t.prototype.focusNext=function(){"undefined"==typeof this.focusedItem&&(this.focusedItem=this.items.length-1);var e,t=this.focusedItem;do this.focusedItem=(this.focusedItem+1)%this.items.length,e=this.items[this.focusedItem];while(this.focusedItem!==t&&!e.isEnabled());this.focusedItem!==t||e.isEnabled()||(this.focusedItem=void 0),this.updateFocus()},t.prototype.focusPrevious=function(){"undefined"==typeof this.focusedItem&&(this.focusedItem=0);var e,t=this.focusedItem;do this.focusedItem=this.focusedItem-1,this.focusedItem<0&&(this.focusedItem=this.items.length-1),e=this.items[this.focusedItem];while(this.focusedItem!==t&&!e.isEnabled());this.focusedItem!==t||e.isEnabled()||(this.focusedItem=void 0),this.updateFocus()},t.prototype.updateFocus=function(){if("undefined"==typeof this.focusedItem)return void this.domNode.focus();for(var e=0;e<this.items.length;e++){var t=this.items[e],n=t;e===this.focusedItem?u.isFunction(n.focus)&&n.focus():u.isFunction(n.blur)&&n.blur()}},t.prototype.doTrigger=function(e){if("undefined"!=typeof this.focusedItem){var t=this.items[this.focusedItem];this.run(t._action,t._context||e).done()}},t.prototype.cancel=function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.emit(c.EventType.CANCEL)},t.prototype.run=function(e,t){return this._actionRunner.run(e,t)},t.prototype.dispose=function(){null!==this.items&&this.clear(),this.items=null,this.focusTracker&&(this.focusTracker.dispose(),this.focusTracker=null),this.toDispose=i.disposeAll(this.toDispose),this.getContainer().destroy(),e.prototype.dispose.call(this)},t}(l.EventEmitter);t.ActionBar=b;var S=function(e){function t(t,n,i,o){e.call(this,t,n),this.select=document.createElement("select"),this.select.className="action-bar-select",this.options=i,this.selected=o,this.toDispose=[],this.registerListeners()}return __extends(t,e),t.prototype.setOptions=function(e,t){this.options=e,this.selected=t,this.doSetOptions()},t.prototype.registerListeners=function(){var e=this;this.toDispose.push(a.addStandardDisposableListener(this.select,"change",function(t){e.actionRunner.run(e._action,t.target.value).done()}))},t.prototype.focus=function(){this.select&&this.select.focus()},t.prototype.blur=function(){this.select&&this.select.blur()},t.prototype.render=function(e){a.addClass(e,"select-container"),e.appendChild(this.select),this.doSetOptions()},t.prototype.doSetOptions=function(){var e=this;this.select.options.length=0,this.options.forEach(function(t){e.select.add(e.createOption(t))}),this.selected>=0&&(this.select.selectedIndex=this.selected)},t.prototype.createOption=function(e){var t=document.createElement("option");return t.value=e,t.text=e,t},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(f);t.SelectActionItem=S}),define("vs/base/browser/ui/aria/aria",["require","exports","vs/nls!vs/base/browser/ui/aria/aria","vs/base/common/platform","vs/base/browser/builder","vs/css!./aria"],function(e,t,n,i,o){"use strict";function r(e){u=o.$(".aria-container").appendTo(e),l=o.$(".alert").appendTo(u).attr({role:"alert","aria-atomic":"true"}),d=o.$(".status").appendTo(u).attr({role:"status","aria-atomic":"true"})}function s(e){c(l,e)}function a(e){i.isMacintosh?s(e):c(d,e)}function c(e,t){return u?(e.getHTMLElement().textContent===t&&(t=n.localize(0,null,t)),o.$(e).empty(),void o.$(e).text(t)):void console.warn("ARIA support needs a container. Call setARIAContainer() first.")}var u,l,d;t.setARIAContainer=r,t.alert=s,t.status=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/button/button",["require","exports","vs/base/common/eventEmitter","vs/base/browser/dom","vs/base/browser/builder","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/css!./button"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t){var n=this;e.call(this),this.$el=o.$("a.monaco-button").attr({tabIndex:"0",role:"button"}).appendTo(t),this.$el.on(i.EventType.CLICK,function(e){return n.enabled?void n.emit(i.EventType.CLICK,e):void i.EventHelper.stop(e)}),this.$el.on(i.EventType.KEY_DOWN,function(e){var t=new r.StandardKeyboardEvent(e),o=!1;n.enabled&&t.equals(s.CommonKeybindings.ENTER)||t.equals(s.CommonKeybindings.SPACE)?(n.emit(i.EventType.CLICK,e),o=!0):t.equals(s.CommonKeybindings.ESCAPE)&&(n.$el.domBlur(),o=!0),o&&i.EventHelper.stop(t,!0)})}return __extends(t,e),t.prototype.getElement=function(){return this.$el.getHTMLElement()},Object.defineProperty(t.prototype,"label",{set:function(e){this.$el.text(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return!this.$el.hasClass("disabled")},set:function(e){e?(this.$el.removeClass("disabled"),this.$el.attr({"aria-disabled":"false",tabIndex:"0"})):(this.$el.addClass("disabled"),this.$el.attr("aria-disabled",String(!0)),i.removeTabIndexAndUpdateFocus(this.$el.getHTMLElement()))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.$el&&(this.$el.dispose(),this.$el=null),e.prototype.dispose.call(this)},t}(n.EventEmitter);t.Button=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/contextview/contextview",["require","exports","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/css!./contextview"],function(e,t,n,i,o,r){"use strict";function s(e,t,n,i,o){var r,s;return i===c.BELOW?(r=t.top+t.height-n.top,n.top+r+e.height>n.height&&t.top-n.top>e.height&&(r=t.top-e.height-n.top)):(r=t.top-e.height-n.top,r+n.top<0&&t.top+t.height+e.height-n.top<n.height&&(r=t.top+t.height-n.top)),o===a.LEFT?(s=t.left-n.left,n.left+s+e.width>n.width&&(s-=e.width-t.width)):(s=t.left+t.width-e.width-n.left,s+n.left<0&&t.left+e.width<n.width&&(s=t.left-n.left)),
{top:r,left:s}}!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.AnchorAlignment||(t.AnchorAlignment={}));var a=t.AnchorAlignment;!function(e){e[e.BELOW=0]="BELOW",e[e.ABOVE=1]="ABOVE"}(t.AnchorPosition||(t.AnchorPosition={}));var c=t.AnchorPosition;t.layout=s;var u=function(e){function t(t){var i=this;e.call(this),this.$view=n.$(".context-view").hide(),this.setContainer(t),this.toDispose=[{dispose:function(){i.setContainer(null)}}],this.toDisposeOnClean=null}return __extends(t,e),t.prototype.setContainer=function(e){var i=this;this.$container&&(this.$container.off(t.BUBBLE_UP_EVENTS),this.$container.off(t.BUBBLE_DOWN_EVENTS,!0),this.$container=null),e&&(this.$container=n.$(e),this.$view.appendTo(this.$container),this.$container.on(t.BUBBLE_UP_EVENTS,function(e){i.onDOMEvent(e,document.activeElement,!1)}),this.$container.on(t.BUBBLE_DOWN_EVENTS,function(e){i.onDOMEvent(e,document.activeElement,!0)},null,!0))},t.prototype.show=function(e){this.isVisible()&&this.hide(),this.$view.setClass("context-view").empty().style({top:"0px",left:"0px"}).show(),this.toDisposeOnClean=e.render(this.$view.getHTMLElement()),this.delegate=e,this.doLayout()},t.prototype.layout=function(){if(this.isVisible()){if(this.delegate.canRelayout===!1)return void this.hide();this.delegate.layout&&this.delegate.layout(),this.doLayout()}},t.prototype.doLayout=function(){var e,t=this.delegate.getAnchor();if(i.isHTMLElement(t)){var o=n.$(t),r=o.getPosition(),u=o.getTotalSize();e={top:r.top,left:r.left,width:u.width,height:u.height}}else{var l=t;e={top:l.y,left:l.x,width:l.width||0,height:l.height||0}}var d=this.$container.getPosition(),h={top:d.top,left:d.left,height:window.innerHeight,width:window.innerWidth},p=this.$view.getTotalSize(),f={width:p.width,height:p.height},m=this.delegate.anchorPosition||c.BELOW,v=this.delegate.anchorAlignment||a.LEFT,g=s(f,e,h,m,v);this.$view.removeClass("top","bottom","left","right"),this.$view.addClass(m===c.BELOW?"bottom":"top"),this.$view.addClass(v===a.LEFT?"left":"right"),this.$view.style({top:g.top+"px",left:g.left+"px",width:"initial"})},t.prototype.hide=function(e){this.delegate&&this.delegate.onHide&&this.delegate.onHide(e),this.delegate=null,this.toDisposeOnClean&&(this.toDisposeOnClean.dispose(),this.toDisposeOnClean=null),this.$view.hide()},t.prototype.isVisible=function(){return!!this.delegate},t.prototype.onDOMEvent=function(e,t,n){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):n&&!i.isAncestor(e.target,this.$container.getHTMLElement())&&this.hide())},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.hide(),this.toDispose=o.disposeAll(this.toDispose)},t.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],t.BUBBLE_DOWN_EVENTS=["click"],t}(r.EventEmitter);t.ContextView=u}),define("vs/base/browser/ui/countBadge/countBadge",["require","exports","vs/base/browser/builder","vs/base/common/strings","vs/css!./countBadge"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,i){this.$el=n.$(".monaco-count-badge").appendTo(e),this.titleFormat=i||"",this.setCount(t||0)}return e.prototype.setCount=function(e){this.count=e,this.render()},e.prototype.setTitleFormat=function(e){this.titleFormat=e,this.render()},e.prototype.render=function(){this.$el.text(""+this.count),this.$el.title(i.format(this.titleFormat,this.count))},e.prototype.dispose=function(){this.$el&&(this.$el.destroy(),this.$el=null)},e}();t.CountBadge=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/dropdown/dropdown",["require","exports","vs/base/browser/builder","vs/base/common/winjs.base","vs/base/browser/touch","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/css!./dropdown"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,i){var r=this;e.call(this),this.toDispose=[],this.$el=n.$(".dropdown").appendTo(t),this.$label=n.$(".dropdown-label"),(i.tick||i.action)&&this.$label.addClass("tick");var a=i.labelRenderer;if(!a&&i.action){this.$action=n.$(".dropdown-action").appendTo(this.$el);var c=new s.ActionItem(null,i.action,{icon:!0,label:!0});c.actionRunner=this,c.render(this.$action.getHTMLElement()),a=function(e){return e.innerText="",c}}a||(a=function(e){return n.$(e).text(i.label||""),null}),this.$label.on(["mousedown",o.EventType.Tap],function(e){e.preventDefault(),e.stopPropagation(),r.toggleDropdown()}).appendTo(this.$el);var u=a(this.$label.getHTMLElement());u&&this.toDispose.push(u),this.toDispose.push(new o.Gesture(this.$label.getHTMLElement()))}return __extends(t,e),Object.defineProperty(t.prototype,"tooltip",{set:function(e){this.$label.title(e)},enumerable:!0,configurable:!0}),t.prototype.toggleDropdown=function(){this.$el.hasClass("active")?this.hide():this.show()},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.onEvent=function(e,t){this.hide()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.hide(),this.toDispose=c.disposeAll(this.toDispose),this.$boxContainer&&(this.$boxContainer.destroy(),this.$boxContainer=null),this.$contents&&(this.$contents.destroy(),this.$contents=null),this.$label&&(this.$label.destroy(),this.$label=null)},t}(r.ActionRunner);t.BaseDropdown=u;var l=function(e){function t(t,n){e.call(this,t,n),this.contextViewProvider=n.contextViewProvider}return __extends(t,e),Object.defineProperty(t.prototype,"contextViewProvider",{get:function(){return this._contextViewProvider},set:function(e){this._contextViewProvider=e},enumerable:!0,configurable:!0}),t.prototype.show=function(){var e=this;this.$el.addClass("active"),this._contextViewProvider.showContextView({getAnchor:function(){return e.$el.getHTMLElement()},render:function(t){return e.renderContents(t)},onDOMEvent:function(t,n){e.onEvent(t,n)},onHide:function(){e.$el.removeClass("active")}})},t.prototype.hide=function(){this._contextViewProvider&&this._contextViewProvider.hideContextView()},t.prototype.renderContents=function(e){return null},t}(u);t.Dropdown=l;var d=function(e){function t(t,n){e.call(this,t,n),this._contextMenuProvider=n.contextMenuProvider,this.currentContainer=null,this.actions=n.actions||[],this.actionProvider=n.actionProvider,this.menuClassName=n.menuClassName||""}return __extends(t,e),Object.defineProperty(t.prototype,"contextMenuProvider",{get:function(){return this._contextMenuProvider},set:function(e){this._contextMenuProvider=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuOptions",{get:function(){return this._menuOptions},set:function(e){this._menuOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){return this.actionProvider?this.actionProvider.getActions():this._actions},set:function(e){this._actions=e},enumerable:!0,configurable:!0}),t.prototype.show=function(){var e=this;this.$el.addClass("active"),this._contextMenuProvider.showContextMenu({getAnchor:function(){return e.$el.getHTMLElement()},getActions:function(){return i.TPromise.as(e.actions)},getActionsContext:function(){return e.menuOptions?e.menuOptions.context:null},getActionItem:function(t){return e.menuOptions&&e.menuOptions.actionItemProvider?e.menuOptions.actionItemProvider(t):null},getMenuClassName:function(){return e.menuClassName},onHide:function(){e.$el.removeClass("active"),e.currentContainer=null}})},t.prototype.hide=function(){},t}(u);t.DropdownMenu=d;var h=function(e){function t(t){e.call(this),this.el=document.createElement("div"),this.el.className="dropdown-group",t.appendChild(this.el)}return __extends(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),t}(a.EventEmitter);t.DropdownGroup=h}),define("vs/base/browser/ui/filelabel/fileLabel",["require","exports","vs/base/browser/dom","vs/base/common/paths","vs/base/common/types","vs/base/common/labels","vs/css!./filelabel"],function(e,t,n,i,o,r){"use strict";function s(e){if(!e)return null;if("string"==typeof e)return e;if(o.isFunction(e.getWorkspace)){var t=e.getWorkspace();return t?t.resource.fsPath:void 0}return e.fsPath}var a=function(){function e(e,t,n){this.domNode=document.createElement("span"),this.domNode.className="monaco-file-label",e.appendChild(this.domNode),n&&(this.basepath=s(n)),t&&this.setValue(t)}return e.prototype.getHTMLElement=function(){return this.domNode},e.prototype.setValue=function(e){var t=s(e);this.renderedOnce&&this.path===t||(this.path=t,this.render(),this.renderedOnce=!0)},e.prototype.render=function(){n.clearNode(this.domNode);var e=[];e.push('<span class="file-name">'),e.push(i.basename(this.path)),e.push("</span>");var t=i.dirname(this.path);if(t&&"."!==t){var o=r.getPathLabel(t,this.basepath);e.push('<span class="file-path" title="'+o+'">'),e.push(o),e.push("</span>")}this.domNode.innerHTML=e.join("")},e}();t.FileLabel=a}),define("vs/base/browser/ui/highlightedlabel/highlightedLabel",["require","exports","vs/base/common/strings","vs/base/browser/dom","vs/base/common/objects","vs/base/browser/ui/octiconLabel/octiconLabel"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e){this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",this.didEverRender=!1,e.appendChild(this.domNode)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.domNode},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){void 0===t&&(t=[]),e||(e=""),this.didEverRender&&this.text===e&&o.equals(this.highlights,t)||(Array.isArray(t)||(t=[]),this.text=e,this.highlights=t,this.render())},e.prototype.render=function(){i.clearNode(this.domNode);for(var e,t=[],o=0,s=0;s<this.highlights.length;s++)e=this.highlights[s],e.end!==e.start&&(o<e.start&&(t.push("<span>"),t.push(r.expand(n.escape(this.text.substring(o,e.start)))),t.push("</span>"),o=e.end),t.push('<span class="highlight">'),t.push(r.expand(n.escape(this.text.substring(e.start,e.end)))),t.push("</span>"),o=e.end);o<this.text.length&&(t.push("<span>"),t.push(r.expand(n.escape(this.text.substring(o)))),t.push("</span>")),this.domNode.innerHTML=t.join(""),this.didEverRender=!0},e.prototype.dispose=function(){this.text=null,this.highlights=null},e}();t.HighlightedLabel=s}),define("vs/base/browser/ui/leftRightWidget/leftRightWidget",["require","exports","vs/base/browser/builder","vs/css!./leftRightWidget"],function(e,t,n){"use strict";var i=function(){function e(e,t,i){this.$el=n.$(".monaco-left-right-widget").appendTo(e),this.toDispose=[i(n.$(".right").appendTo(this.$el).getHTMLElement()),t(n.$("span.left").appendTo(this.$el).getHTMLElement())].filter(function(e){return!!e})}return e.prototype.dispose=function(){this.$el&&(this.$el.destroy(),this.$el=null)},e}();t.LeftRightWidget=i}),define("vs/base/browser/ui/list/rowCache",["require","exports","vs/base/browser/dom"],function(e,t,n){"use strict";function i(e){var t=e.getAttribute("last-scroll-time");return t?parseInt(t,10):0}function o(e){try{e.parentElement.removeChild(e)}catch(t){}}var r=function(){function e(e){this.renderers=e,this.cache=Object.create(null),this.scrollingRow=null}return e.prototype.alloc=function(e){var t=this.getTemplateCache(e).pop();if(!t){var i=n.emmet(".monaco-list-row"),o=this.renderers[e],r=o.renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return t},e.prototype.release=function(e){var t=i(e.domNode);if(!t)return o(e.domNode),void this.getTemplateCache(e.templateId).push(e);if(this.scrollingRow){var r=i(this.scrollingRow.domNode);if(r>t)return o(e.domNode),void this.getTemplateCache(e.templateId).push(e);this.scrollingRow.domNode.parentElement&&(o(this.scrollingRow.domNode),n.removeClass(this.scrollingRow.domNode,"scrolling"),this.getTemplateCache(this.scrollingRow.templateId).push(this.scrollingRow))}this.scrollingRow=e,n.addClass(this.scrollingRow.domNode,"scrolling")},e.prototype.getTemplateCache=function(e){return this.cache[e]||(this.cache[e]=[])},e.prototype.garbageCollect=function(){var e=this;if(this.cache&&Object.keys(this.cache).forEach(function(t){e.cache[t].forEach(function(n){var i=e.renderers[t];i.disposeTemplate(n.templateData),n.domNode=null,n.templateData=null}),delete e.cache[t]}),this.scrollingRow){var t=this.renderers[this.scrollingRow.templateId];t.disposeTemplate(this.scrollingRow.templateData),this.scrollingRow=null}},e.prototype.dispose=function(){this.garbageCollect(),this.cache=null,this.renderers=null},e}();t.RowCache=r}),define("vs/base/browser/ui/messagelist/messageList",["require","exports","vs/nls!vs/base/browser/ui/messagelist/messageList","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/errors","vs/base/browser/ui/aria/aria","vs/base/common/types","vs/base/common/event","vs/base/common/actions","vs/base/browser/htmlContentRenderer","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/css!./messageList"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";!function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(t.Severity||(t.Severity={}));var f=t.Severity,m=function(){function e(){}return e}();t.IMessageListOptions=m;var v=function(){function e(t,n,i){void 0===i&&(i={purgeInterval:e.DEFAULT_MESSAGE_PURGER_INTERVAL,maxMessages:e.DEFAULT_MAX_MESSAGES,maxMessageLength:e.DEFAULT_MAX_MESSAGE_LENGTH}),this.messages=[],this.messageListPurger=null,this.containerElementId=t,this.usageLogger=n,this.options=i,this._onMessagesShowing=new u.Emitter,this._onMessagesCleared=new u.Emitter}return Object.defineProperty(e.prototype,"onMessagesShowing",{get:function(){return this._onMessagesShowing.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMessagesCleared",{get:function(){return this._onMessagesCleared.event},enumerable:!0,configurable:!0}),e.prototype.showMessage=function(e,t){var n=this;if(Array.isArray(t)){var i=[];return t.forEach(function(t){return i.push(n.showMessage(e,t))}),function(){return i.forEach(function(e){return e()})}}var o=this.getMessageText(t);return o&&"string"==typeof o?this.doShowMessage(t,o,e):function(){}},e.prototype.getMessageText=function(e){return c.isString(e)?e:e instanceof Error?s.toErrorMessage(e,!1):e.message?e.message:null},e.prototype.doShowMessage=function(e,t,i){var o=this;this.purgeMessages(),this.messages.unshift({id:e,text:t,severity:i,time:(new Date).getTime(),actions:e.actions}),this.renderMessages(!0,1);var r;return r=i===f.Error?n.localize(0,null,t):i===f.Warning?n.localize(1,null,t):n.localize(2,null,t),a.alert(r),function(){o.hideMessage(e)}},e.prototype.renderMessages=function(e,t){var n=this,i=o.withElementById(this.containerElementId);i&&(this.messageListContainer?(o.$(this.messageListContainer).empty(),o.$(this.messageListContainer).removeClass("transition")):this.messageListContainer=o.$(".global-message-list").appendTo(i),e&&o.$(this.messageListContainer).style("top","-35px"),o.$(this.messageListContainer).ul({"class":"message-list"},function(i){var r=n.prepareMessages();r.length>0?n._onMessagesShowing.fire():n._onMessagesCleared.fire(),r.forEach(function(e,s){n.renderMessage(e,o.$(i),r.length,t)}),e&&setTimeout(function(){o.$(n.messageListContainer).addClass("transition"),o.$(n.messageListContainer).style("top","0")},50)}))},e.prototype.renderMessage=function(e,t,s,a){var c=this;t.li({"class":"message-list-entry message-list-entry-with-action"},function(t){var u=c.getMessageActions(e);t.div({"class":s>1||0>a?"actions-container multiple":"actions-container"},function(t){for(var n=function(n){var o=u[n];t.div({"class":"message-action"},function(t){t.a({"class":"action-button",tabindex:"0",role:"button"}).text(o.label).on([r.EventType.CLICK,r.EventType.KEY_DOWN],function(t){if(t instanceof KeyboardEvent){var n=new h.StandardKeyboardEvent(t);if(!n.equals(p.CommonKeybindings.ENTER)&&!n.equals(p.CommonKeybindings.SPACE))return}r.EventHelper.stop(t,!0),c.usageLogger&&c.usageLogger.publicLog("workbenchActionExecuted",{id:o.id,from:"message"}),(o.run()||i.TPromise.as(null)).then(null,function(e){return c.showMessage(f.Error,e)}).done(function(t){t!==!1&&c.hideMessage(e.text)})})})},o=u.length-1;o>=0;o--)n(o)});var l=e.text.substr(0,c.options.maxMessageLength);t.div({"class":"message-left-side"},function(t){t.addClass("message-overflow-ellipsis");var i=e.severity,r=i===f.Error?n.localize(3,null):i===f.Warning?n.localize(4,null):n.localize(5,null);o.$().span({"class":"message-left-side severity "+(i===f.Error?"app-error":i===f.Warning?"app-warning":"app-info"),text:r}).appendTo(t);var s=d.renderHtml({tagName:"span",className:"message-left-side",formattedText:l});o.$(s).title(s.textContent).appendTo(t)})})},e.prototype.getMessageActions=function(e){var t,o=this;return t=e.actions&&e.actions.length>0?e.actions:[new l.Action("close.message.action",n.localize(6,null),null,!0,function(){return o.hideMessage(e.text),i.TPromise.as(!0)})]},e.prototype.prepareMessages=function(){for(var e=[],t={},n=0,i=0;i<this.messages.length;i++){var o=this.messages[i];c.isUndefinedOrNull(t[o.text])?(o.count=1,e.push(o),t[o.text]=n++):e[t[o.text]].count++}return e.length>this.options.maxMessages?e.splice(e.length-this.options.maxMessages,e.length):e},e.prototype.disposeMessages=function(e){e.forEach(function(e){e.actions&&e.actions.forEach(function(e){e.dispose()})})},e.prototype.hideMessages=function(){this.hideMessage()},e.prototype.show=function(){this.messageListContainer&&this.messageListContainer.isHidden()&&this.messageListContainer.show()},e.prototype.hide=function(){this.messageListContainer&&!this.messageListContainer.isHidden()&&this.messageListContainer.hide()},e.prototype.hideMessage=function(e){for(var t=!1,n=0;n<this.messages.length;n++){var i=this.messages[n],o=!1;o=e?c.isString(e)&&i.text===e||i.id===e:!0,o&&(this.disposeMessages(this.messages.splice(n,1)),n--,t=!0)}t&&this.renderMessages(!1,-1)},e.prototype.purgeMessages=function(){var e=this;this.messageListPurger&&this.messageListPurger.cancel(),this.messageListPurger=i.TPromise.timeout(this.options.purgeInterval).then(function(){for(var t=!1,n=0,i=0;i<e.messages.length;i++){var o=e.messages[i];o.severity===f.Error||o.actions||(e.disposeMessages(e.messages.splice(i,1)),n--,i--,t=!0)}t&&e.renderMessages(!1,n)})},e.DEFAULT_MESSAGE_PURGER_INTERVAL=1e4,e.DEFAULT_MAX_MESSAGES=5,e.DEFAULT_MAX_MESSAGE_LENGTH=500,e}();t.MessageList=v}),define("vs/base/browser/ui/progressbar/progressbar",["require","exports","vs/base/common/winjs.base","vs/base/common/assert","vs/base/browser/browser","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/uuid","vs/base/common/lifecycle","vs/css!./progressbar"],function(e,t,n,i,o,r,s,a,c){"use strict";var u="done",l="active",d="infinite",h="discrete",p="progress-container",f="progress-bit",m=function(){function e(e){this.toUnbind=[],this.workedVal=0,this.create(e)}return e.prototype.create=function(e){var t=this;e.div({"class":p},function(e){t.element=e.clone(),e.div({"class":f}).on([s.EventType.ANIMATION_START,s.EventType.ANIMATION_END,s.EventType.ANIMATION_ITERATION],function(e){switch(e.type){case s.EventType.ANIMATION_START:case s.EventType.ANIMATION_END:t.animationRunning=e.type===s.EventType.ANIMATION_START;break;case s.EventType.ANIMATION_ITERATION:t.animationStopToken&&t.animationStopToken(null)}},t.toUnbind),t.bit=e.getHTMLElement()})},e.prototype.off=function(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.removeClass(l),this.element.removeClass(d),this.element.removeClass(h),this.workedVal=0,this.totalWork=void 0},e.prototype.done=function(){return this.doDone(!0)},e.prototype.stop=function(){return this.doDone(!1)},e.prototype.doDone=function(e){var t=this;return this.element.addClass(u),this.element.hasClass(d)?(this.bit.style.opacity="0",e?n.TPromise.timeout(200).then(function(){return t.off()}):this.off()):(this.bit.style.width="inherit",e?n.TPromise.timeout(200).then(function(){return t.off()}):this.off()),this},e.prototype.infinite=function(){if(this.bit.style.width="2%",this.bit.style.opacity="1",this.element.removeClass(h),this.element.removeClass(u),this.element.addClass(l),this.element.addClass(d),!o.hasCSSAnimationSupport()){var e=a.v4().asHex();this.currentProgressToken=e,this.manualInfinite(e)}return this},e.prototype.manualInfinite=function(e){var t=this;this.bit.style.width="5%",this.bit.style.display="inherit";var i=0,o=function(){n.TPromise.timeout(50).then(function(){e===t.currentProgressToken&&(t.element.hasClass(u)?(t.bit.style.display="none",t.bit.style.left="0"):t.element.isHidden()?o():(i=(i+1)%95,t.bit.style.left=i+"%",o()))})};o()},e.prototype.total=function(e){return this.workedVal=0,this.totalWork=e,this},e.prototype.hasTotal=function(){return!isNaN(this.totalWork)},e.prototype.worked=function(e){return i.ok(!isNaN(this.totalWork),"Total work not set"),e=Number(e),i.ok(!isNaN(e),"Value is not a number"),e=Math.max(1,e),this.workedVal+=e,this.workedVal=Math.min(this.totalWork,this.workedVal),this.element.hasClass(d)&&this.element.removeClass(d),this.element.hasClass(u)&&this.element.removeClass(u),this.element.hasClass(l)||this.element.addClass(l),this.element.hasClass(h)||this.element.addClass(h),this.bit.style.width=100*(this.workedVal/this.totalWork)+"%",this},e.prototype.getContainer=function(){return r.$(this.element)},e.prototype.dispose=function(){this.toUnbind=c.disposeAll(this.toUnbind)},e}();t.ProgressBar=m}),define("vs/base/browser/ui/resourceviewer/resourceViewer",["require","exports","vs/nls!vs/base/browser/ui/resourceviewer/resourceViewer","vs/base/common/mime","vs/base/common/paths","vs/base/browser/builder","vs/base/browser/dom","vs/css!./resourceviewer"],function(e,t,n,i,o,r,s){"use strict";var a={".bmp":"image/bmp",".gif":"image/gif",".jpg":"image/jpg",".jpeg":"image/jpg",".jpe":"image/jpg",".png":"image/png",".tiff":"image/tiff",".tif":"image/tiff",".ico":"image/x-icon",".tga":"image/x-tga",".psd":"image/vnd.adobe.photoshop",".mid":"audio/midi",".midi":"audio/midi",".mp4a":"audio/mp4",".mpga":"audio/mpeg",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".m2a":"audio/mpeg",".m3a":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".spx":"audio/ogg",".aac":"audio/x-aac",".wav":"audio/x-wav",".wma":"audio/x-ms-wma",".mp4":"video/mp4",".mp4v":"video/mp4",".mpg4":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpe":"video/mpeg",".m1v":"video/mpeg",".m2v":"video/mpeg",".ogv":"video/ogg",".qt":"video/quicktime",".mov":"video/quicktime",".webm":"video/webm",".mkv":"video/x-matroska",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".wmv":"video/x-ms-wmv",".flv":"video/x-flv",".avi":"video/x-msvideo",".movie":"video/x-sgi-movie"},c=function(){function e(){}return e.show=function(e,t,c,u){r.$(c).addClass("monaco-resource-viewer");var l,d=o.extname(t.toString());d&&(l=a[d.toLowerCase()]),l||(l=i.MIME_BINARY),l.indexOf("image/")>=0?r.$(c).empty().style({paddingLeft:"20px"}).img({src:t.toString()+"?"+(new Date).getTime()}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()}):l.indexOf("audio/")>=0?r.$(c).empty().style({paddingLeft:"20px"}).element("audio").attr({src:t.toString()+"?"+(new Date).getTime(),text:n.localize(0,null),controls:"controls"}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()}):l.indexOf("video/")>=0?r.$(c).empty().style({paddingLeft:"20px"}).element("video").attr({src:t.toString()+"?"+(new Date).getTime(),text:n.localize(1,null),controls:"controls"}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()}):(r.$(c).empty().style({paddingLeft:"20px"}).span({text:n.localize(2,null)}),u&&u.onElementInternalDimensions())},e}();t.ResourceViewer=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/sash/sash",["require","exports","vs/base/common/lifecycle","vs/base/browser/builder","vs/base/browser/browser","vs/base/common/types","vs/base/browser/dom","vs/base/browser/touch","vs/base/common/eventEmitter","vs/base/browser/mouseEvent","vs/css!./sash"],function(e,t,n,i,o,r,s,a,c,u){"use strict";!function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(t.Orientation||(t.Orientation={}));var l=t.Orientation,d=function(e){function t(t,n,r){var s=this;void 0===r&&(r={}),e.call(this),this.$e=i.$(".monaco-sash").appendTo(t),this.gesture=new a.Gesture(this.$e.getHTMLElement()),this.$e.on("mousedown",function(e){s.onMouseDown(e)}),this.$e.on(a.EventType.Start,function(e){s.onTouchStart(e)}),this.orientation=r.orientation||l.VERTICAL,this.$e.addClass(this.orientation===l.HORIZONTAL?"horizontal":"vertical"),this.size=r.baseSize||5,o.isIPad&&(this.size*=4,this.$e.addClass("touch")),this.orientation===l.HORIZONTAL?this.$e.size(null,this.size):this.$e.size(this.size),this.isDisabled=!1,this.hidden=!1,this.layoutProvider=n}return __extends(t,e),t.prototype.getHTMLElement=function(){return this.$e.getHTMLElement()},t.prototype.onMouseDown=function(e){var t=this;if(s.EventHelper.stop(e,!1),!this.isDisabled){var n=new u.StandardMouseEvent(e),o=n.posx,r=n.posy,a={startX:o,currentX:o,startY:r,currentY:r};this.$e.addClass("active"),this.emit("start",a);var c=i.$("div").style({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1e6,cursor:this.orientation===l.VERTICAL?"ew-resize":"ns-resize"}),d=i.$(window),h=o,p=r;d.on("mousemove",function(e){s.EventHelper.stop(e,!1);var n=new u.StandardMouseEvent(e),i={startX:o,currentX:n.posx,startY:r,currentY:n.posy};h=n.posx,p=n.posy,t.emit("change",i)}).once("mouseup",function(e){s.EventHelper.stop(e,!1),t.$e.removeClass("active"),t.emit("end"),d.off("mousemove"),c.destroy()}),c.appendTo(document.body)}},t.prototype.onTouchStart=function(e){var t=this;s.EventHelper.stop(e);var i=[],o=e.pageX,c=e.pageY;this.emit("start",{startX:o,currentX:o,startY:c,currentY:c});var u=o,l=c;i.push(s.addDisposableListener(this.$e.getHTMLElement(),a.EventType.Change,function(e){r.isNumber(e.pageX)&&r.isNumber(e.pageY)&&(t.emit("change",{startX:o,currentX:e.pageX,startY:c,currentY:e.pageY}),u=e.pageX,l=e.pageY)})),i.push(s.addDisposableListener(this.$e.getHTMLElement(),a.EventType.End,function(e){t.emit("end"),n.disposeAll(i)}))},t.prototype.layout=function(){var e;if(this.orientation===l.VERTICAL){var t=this.layoutProvider;e={left:t.getVerticalSashLeft(this)-this.size/2+"px"},t.getVerticalSashTop&&(e.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(e.height=t.getVerticalSashHeight(this)+"px")}else{var n=this.layoutProvider;e={top:n.getHorizontalSashTop(this)-this.size/2+"px"},n.getHorizontalSashLeft&&(e.left=n.getHorizontalSashLeft(this)+"px"),n.getHorizontalSashWidth&&(e.width=n.getHorizontalSashWidth(this)+"px")}this.$e.style(e)},t.prototype.show=function(){this.hidden=!1,this.$e.show()},t.prototype.hide=function(){this.hidden=!0,this.$e.hide()},t.prototype.isHidden=function(){return this.hidden},t.prototype.enable=function(){this.$e.removeClass("disabled"),this.isDisabled=!1},t.prototype.disable=function(){this.$e.addClass("disabled"),this.isDisabled=!0},t.prototype.dispose=function(){this.$e&&(this.$e.destroy(),this.$e=null),e.prototype.dispose.call(this)},t}(c.EventEmitter);t.Sash=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/domNodeScrollable",["require","exports","vs/base/browser/dom","vs/base/browser/touch","vs/base/common/lifecycle","vs/base/common/event"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(t){var o=this;e.call(this),this._onScroll=this._register(new r.Emitter),this._domNode=t,this._gestureHandler=this._register(new i.Gesture(this._domNode)),this._register(n.addDisposableListener(this._domNode,"scroll",function(e){return o._onScroll.fire(void 0)}))}return __extends(t,e),t.prototype.dispose=function(){this._domNode=null,e.prototype.dispose.call(this)},t.prototype.getScrollHeight=function(){return this._domNode.scrollHeight},t.prototype.getScrollWidth=function(){return this._domNode.scrollWidth},t.prototype.getScrollLeft=function(){return this._domNode.scrollLeft},t.prototype.setScrollLeft=function(e){this._domNode.scrollLeft=e},t.prototype.getScrollTop=function(){return this._domNode.scrollTop},t.prototype.setScrollTop=function(e){this._domNode.scrollTop=e},t.prototype.addScrollListener=function(e){return this._onScroll.event(e)},t}(o.Disposable);t.DomNodeScrollable=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/splitview/splitview",["require","exports","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/objects","vs/base/browser/dom","vs/base/common/numbers","vs/base/browser/ui/sash/sash","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/base/common/event","vs/css!./splitview"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";function h(e,t){return e+t}!function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(t.Orientation||(t.Orientation={}));var p=t.Orientation;!function(e){e[e.Flexible=0]="Flexible",e[e.Fixed=1]="Fixed"}(t.ViewSizing||(t.ViewSizing={}));var f=t.ViewSizing,m=function(e){function t(t){e.call(this),this.size=0,this._sizing=o.isUndefined(t.sizing)?f.Flexible:t.sizing,this._fixedSize=o.isUndefined(t.fixedSize)?22:t.fixedSize,this._minimumSize=o.isUndefined(t.minimumSize)?22:t.minimumSize}return __extends(t,e),Object.defineProperty(t.prototype,"sizing",{get:function(){return this._sizing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedSize",{get:function(){return this._fixedSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumSize",{get:function(){return this.sizing===f.Fixed?this.fixedSize:this._minimumSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumSize",{get:function(){return this.sizing===f.Fixed?this.fixedSize:Number.POSITIVE_INFINITY},enumerable:!0,configurable:!0}),t.prototype.setFlexible=function(e){this._sizing=f.Flexible,this.emit("change",o.isUndefined(e)?this._minimumSize:e)},t.prototype.setFixed=function(e){this._sizing=f.Fixed,this._fixedSize=o.isUndefined(e)?this._fixedSize:e,this.emit("change",this._fixedSize)},t.prototype.render=function(e,t){},t.prototype.focus=function(){},t.prototype.layout=function(e,t){},t}(i.EventEmitter);t.View=m;var v=function(e){function t(t){e.call(this,t),this.headerSize=o.isUndefined(t.headerSize)?22:t.headerSize}return __extends(t,e),t.prototype.render=function(e,t){this.header=document.createElement("div"),this.header.className="header";var n=this.headerSize+"px";t===p.HORIZONTAL?this.header.style.width=n:this.header.style.height=n,this.renderHeader(this.header),e.appendChild(this.header),this.body=document.createElement("div"),this.body.className="body",this.layoutBodyContainer(t),this.renderBody(this.body),e.appendChild(this.body)},t.prototype.layout=function(e,t){this.layoutBodyContainer(t),this.layoutBody(e-this.headerSize)},t.prototype.renderHeader=function(e){throw new Error("not implemented")},t.prototype.renderBody=function(e){throw new Error("not implemented")},t.prototype.layoutBodyContainer=function(e){var t="calc(100% - "+this.headerSize+"px)";e===p.HORIZONTAL?this.body.style.width=t:this.body.style.height=t},t.prototype.layoutBody=function(e){},t.prototype.dispose=function(){this.header=null,this.body=null,e.prototype.dispose.call(this)},t}(m);t.HeaderView=v,function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED";
}(t.CollapsibleState||(t.CollapsibleState={}));var g=t.CollapsibleState,y=function(e){function t(t){e.call(this,t),this.ariaHeaderLabel=t&&t.ariaHeaderLabel,this.changeState(o.isUndefined(t.initialState)?g.EXPANDED:t.initialState)}return __extends(t,e),t.prototype.render=function(t,n){var i=this;e.prototype.render.call(this,t,n),s.addClass(this.header,"collapsible"),s.addClass(this.body,"collapsible"),this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","toolbar"),this.ariaHeaderLabel&&this.header.setAttribute("aria-label",this.ariaHeaderLabel),this.header.setAttribute("aria-expanded",String(this.state===g.EXPANDED)),this.headerKeyListener=s.addDisposableListener(this.header,s.EventType.KEY_DOWN,function(e){var t=new u.StandardKeyboardEvent(e),n=!1;t.equals(l.CommonKeybindings.ENTER)||t.equals(l.CommonKeybindings.SPACE)||t.equals(l.CommonKeybindings.LEFT_ARROW)&&i.state===g.EXPANDED||t.equals(l.CommonKeybindings.RIGHT_ARROW)&&i.state===g.COLLAPSED?(i.toggleExpansion(),n=!0):t.equals(l.CommonKeybindings.ESCAPE)?(i.header.blur(),n=!0):t.equals(l.CommonKeybindings.UP_ARROW)?(i.emit("focusPrevious"),n=!0):t.equals(l.CommonKeybindings.DOWN_ARROW)&&(i.emit("focusNext"),n=!0),n&&s.EventHelper.stop(t,!0)}),this.headerClickListener=s.addDisposableListener(this.header,s.EventType.CLICK,function(){return i.toggleExpansion()}),this.focusTracker=s.trackFocus(this.header),this.focusTracker.addFocusListener(function(){s.addClass(i.header,"focused")}),this.focusTracker.addBlurListener(function(){s.removeClass(i.header,"focused")})},t.prototype.focus=function(){this.header&&this.header.focus()},t.prototype.layout=function(t,n){this.layoutHeader(),e.prototype.layout.call(this,t,n)},t.prototype.isExpanded=function(){return this.state===g.EXPANDED},t.prototype.expand=function(){this.isExpanded()||this.changeState(g.EXPANDED)},t.prototype.collapse=function(){this.isExpanded()&&this.changeState(g.COLLAPSED)},t.prototype.toggleExpansion=function(){this.isExpanded()?this.collapse():this.expand()},t.prototype.layoutHeader=function(){this.header&&(this.state===g.COLLAPSED?s.addClass(this.header,"collapsed"):s.removeClass(this.header,"collapsed"))},t.prototype.changeState=function(e){this.state=e,this.header&&this.header.setAttribute("aria-expanded",String(this.state===g.EXPANDED)),this.layoutHeader()},t.prototype.dispose=function(){this.headerClickListener&&(this.headerClickListener.dispose(),this.headerClickListener=null),this.headerKeyListener&&(this.headerKeyListener.dispose(),this.headerKeyListener=null),this.focusTracker&&(this.focusTracker.dispose(),this.focusTracker=null),e.prototype.dispose.call(this)},t}(v);t.AbstractCollapsibleView=y;var _=function(e){function t(t){e.call(this,t),this.previousSize=null}return __extends(t,e),t.prototype.changeState=function(t){e.prototype.changeState.call(this,t),t===g.EXPANDED?this.setFlexible(this.previousSize||this._minimumSize):(this.previousSize=this.size,this.setFixed())},t}(y);t.CollapsibleView=_;var b=function(e){function t(t){e.call(this,r.mixin({sizing:f.Fixed},t)),this._expandedBodySize=o.isUndefined(t.expandedBodySize)?22:t.expandedBodySize}return __extends(t,e),Object.defineProperty(t.prototype,"fixedSize",{get:function(){return this.state===g.EXPANDED?this.expandedSize:this.headerSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandedSize",{get:function(){return this.expandedBodySize+this.headerSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandedBodySize",{get:function(){return this._expandedBodySize},set:function(e){this._expandedBodySize=e,this.setFixed(this.fixedSize)},enumerable:!0,configurable:!0}),t.prototype.changeState=function(t){e.prototype.changeState.call(this,t),this.setFixed(this.fixedSize)},t}(y);t.FixedCollapsibleView=b;var S=function(e){function t(t){e.call(this,{sizing:f.Fixed,fixedSize:0}),this.size=t.size}return __extends(t,e),t}(m),E=function(){function e(e,t){t=t||{},this.orientation=o.isUndefined(t.orientation)?p.VERTICAL:t.orientation,this.el=document.createElement("div"),s.addClass(this.el,"monaco-split-view"),s.addClass(this.el,this.orientation===p.VERTICAL?"vertical":"horizontal"),e.appendChild(this.el),this.size=null,this.viewElements=[],this.views=[],this.viewChangeListeners=[],this.viewFocusPreviousListeners=[],this.viewFocusNextListeners=[],this.viewFocusListeners=[],this.initialWeights=[],this.sashes=[],this.sashesListeners=[],this.animationTimeout=null,this._onFocus=new d.Emitter,this.sashOrientation=this.orientation===p.VERTICAL?c.Orientation.HORIZONTAL:c.Orientation.VERTICAL,this.orientation===p.VERTICAL?(this.measureContainerSize=function(){return s.getContentHeight(e)},this.layoutViewElement=function(e,t){return e.style.height=t+"px"},this.eventWrapper=function(e){return{start:e.startY,current:e.currentY}}):(this.measureContainerSize=function(){return s.getContentWidth(e)},this.layoutViewElement=function(e,t){return e.style.width=t+"px"},this.eventWrapper=function(e){return{start:e.startX,current:e.currentX}}),this.addView(new m({sizing:f.Fixed,minimumSize:0,fixedSize:0}),1,0)}return Object.defineProperty(e.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),e.prototype.addView=function(e,t,n){var i=this;if(void 0===t&&(t=1),void 0===n&&(n=this.views.length-1),0>=t)throw new Error("Initial weight must be a positive number.");var o=this.views.length,r=document.createElement("div");if(s.addClass(r,"split-view-view"),this.viewElements.splice(n,0,r),e.render(r,this.orientation),this.views.splice(n,0,e),this.initialWeights.splice(n,0,t),n===o?this.el.appendChild(r):this.el.insertBefore(r,this.el.children.item(n)),this.views.length>2){var a=new c.Sash(this.el,this,{orientation:this.sashOrientation});this.sashes.splice(n-1,0,a),this.sashesListeners.push(a.addListener2("start",function(e){return i.onSashStart(a,i.eventWrapper(e))})),this.sashesListeners.push(a.addListener2("change",function(e){return i.onSashChange(a,i.eventWrapper(e))}))}this.viewChangeListeners.splice(n,0,e.addListener2("change",function(t){return i.onViewChange(e,t)})),this.onViewChange(e,e.minimumSize);var u=s.trackFocus(r);this.viewFocusListeners.splice(n,0,u),u.addFocusListener(function(){return i._onFocus.fire(e)}),this.viewFocusPreviousListeners.splice(n,0,e.addListener2("focusPrevious",function(){return n>0&&i.views[n-1].focus()})),this.viewFocusNextListeners.splice(n,0,e.addListener2("focusNext",function(){return n<i.views.length&&i.views[n+1].focus()}))},e.prototype.removeView=function(e){var t=this.views.indexOf(e);if(!(0>t)){var n=new S(e);this.views[t]=n,this.onViewChange(n,0);var i=Math.max(t-1,0);this.sashes[i].dispose(),this.sashes.splice(i,1),this.viewChangeListeners[t].dispose(),this.viewChangeListeners.splice(t,1),this.viewFocusPreviousListeners[t].dispose(),this.viewFocusPreviousListeners.splice(t,1),this.viewFocusListeners[t].dispose(),this.viewFocusListeners.splice(t,1),this.viewFocusNextListeners[t].dispose(),this.viewFocusNextListeners.splice(t,1),this.views.splice(t,1),this.el.removeChild(this.viewElements[t]),this.viewElements.splice(t,1),n.dispose(),e.dispose()}},e.prototype.layout=function(e){if(e=e||this.measureContainerSize(),null===this.size)return this.size=e,void this.initialLayout();e=Math.max(e,this.views.reduce(function(e,t){return e+t.minimumSize},0));var t=Math.abs(this.size-e),n=a.countToArray(this.views.length-1,-1),i=this.views.map(function(e){return e.size-e.minimumSize}),o=this.views.map(function(e){return e.maximumSize-e.size});e<this.size?this.expandCollapse(Math.min(t,i.reduce(h,0)),i,o,n,[]):e>this.size&&this.expandCollapse(Math.min(t,o.reduce(h,0)),i,o,[],n),this.size=e,this.layoutViews()},e.prototype.onSashStart=function(e,t){var n=this.sashes.indexOf(e),i=this.views.map(function(e){return e.size-e.minimumSize}),o=this.views.map(function(e){return e.maximumSize-e.size}),r=a.countToArray(n,-1),s=a.countToArray(n+1,this.views.length),c=r.map(function(e){return i[e]}),u=s.map(function(e){return i[e]}),l=r.map(function(e){return o[e]}),d=s.map(function(e){return o[e]});this.state={start:t.start,sizes:this.views.map(function(e){return e.size}),up:r,down:s,maxUp:Math.min(c.reduce(h,0),d.reduce(h,0)),maxDown:Math.min(l.reduce(h,0),u.reduce(h,0)),collapses:i,expands:o}},e.prototype.onSashChange=function(e,t){for(var n=t.current-this.state.start,i=0;i<this.views.length;i++)this.views[i].size=this.state.sizes[i];0>n?this.expandCollapse(Math.min(-n,this.state.maxUp),this.state.collapses,this.state.expands,this.state.up,this.state.down):this.expandCollapse(Math.min(n,this.state.maxDown),this.state.collapses,this.state.expands,this.state.down,this.state.up),this.layoutViews()},e.prototype.expandCollapse=function(e,t,n,i,o){var r=this,s=e,a=s;i.forEach(function(e){var n=Math.min(t[e],s);s-=n,r.views[e].size-=n}),o.forEach(function(e){var t=Math.min(n[e],a);a-=t,r.views[e].size+=t})},e.prototype.initialLayout=function(){var e=this,t=0,n=0;this.views.forEach(function(i,o){i.sizing===f.Flexible?t+=e.initialWeights[o]:n+=i.fixedSize});var i=this.size-n;this.views.forEach(function(n,o){n.sizing===f.Flexible?n.size=e.initialWeights[o]*i/t:n.size=n.fixedSize});var o=this.getLastFlexibleViewIndex();o>=0&&(this.views[o].size+=this.size-this.views.reduce(function(e,t){return e+t.size},0)),this.layoutViews()},e.prototype.getLastFlexibleViewIndex=function(e){void 0===e&&(e=null);for(var t=this.views.length-1;t>=0;t--)if(e!==t&&this.views[t].sizing===f.Flexible)return t;return-1},e.prototype.layoutViews=function(){for(var e=0;e<this.views.length;e++)this.layoutViewElement(this.viewElements[e],this.views[e].size),this.views[e].layout(this.views[e].size,this.orientation);this.sashes.forEach(function(e){return e.layout()});var t=!1,n=this.views.map(function(e){return t=e.size-e.minimumSize>0||t});t=!1;var i=this.views.map(function(e){return t=e.maximumSize-e.size>0||t}),o=this.views.slice().reverse();t=!1;var r=o.map(function(e){return t=e.size-e.minimumSize>0||t}).reverse();t=!1;var s=o.map(function(e){return t=e.maximumSize-e.size>0||t}).reverse();this.sashes.forEach(function(e,t){n[t]&&s[t+1]||i[t]&&r[t+1]?e.enable():e.disable()})},e.prototype.onViewChange=function(e,t){if(e!==this.voidView&&(this.areAllViewsFixed()?this.voidView.setFlexible():this.voidView.setFixed()),null!==this.size&&t!==e.size){this.setupAnimation();var n,i,o,r=this.views.indexOf(e),s=Math.abs(t-e.size),c=a.countToArray(r-1,-1),u=a.countToArray(r+1,this.views.length),l=u.concat(c),d=this.views.map(function(e){return Math.max(e.size-e.minimumSize,0)}),h=this.views.map(function(e){return Math.max(e.maximumSize-e.size,0)});t<e.size?(n=Math.min(l.reduce(function(e,t){return e+h[t]},0),s),i=[r],o=l):(n=Math.min(l.reduce(function(e,t){return e+d[t]},0),s),i=l,o=[r]),this.expandCollapse(n,d,h,i,o),this.layoutViews()}},e.prototype.setupAnimation=function(){var e=this;o.isNumber(this.animationTimeout)&&window.clearTimeout(this.animationTimeout),s.addClass(this.el,"animated"),this.animationTimeout=window.setTimeout(function(){return e.clearAnimation()},200)},e.prototype.clearAnimation=function(){this.animationTimeout=null,s.removeClass(this.el,"animated")},Object.defineProperty(e.prototype,"voidView",{get:function(){return this.views[this.views.length-1]},enumerable:!0,configurable:!0}),e.prototype.areAllViewsFixed=function(){var e=this;return this.views.every(function(t,n){return t.sizing===f.Fixed||n===e.views.length-1})},e.prototype.getVerticalSashLeft=function(e){return this.getSashPosition(e)},e.prototype.getHorizontalSashTop=function(e){return this.getSashPosition(e)},e.prototype.getSashPosition=function(e){for(var t=this.sashes.indexOf(e),n=0,i=0;t>=i;i++)n+=this.views[i].size;return n},e.prototype.dispose=function(){var e=this;o.isNumber(this.animationTimeout)&&window.clearTimeout(this.animationTimeout),this.orientation=null,this.size=null,this.viewElements.forEach(function(t){return e.el.removeChild(t)}),this.el=null,this.viewElements=[],this.views=n.disposeAll(this.views),this.sashes=n.disposeAll(this.sashes),this.sashesListeners=n.disposeAll(this.sashesListeners),this.measureContainerSize=null,this.layoutViewElement=null,this.eventWrapper=null,this.state=null},e}();t.SplitView=E}),define("vs/base/browser/ui/timer/timer",["require","exports","vs/base/common/timer","vs/base/common/lifecycle","vs/base/browser/dom","vs/css!./timer"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){var t=this;this.timeKeeper=n.getTimeKeeper(),this.onHide=e,this.lastEventIndex=0,this.renderedEvents={},this.renderCnt=0,this.listenersToRemove=[],this.domNode=this._createDomNode(),this.intervalTokenId=window.setInterval(function(){return t._render()},500)}return e.prototype.destroy=function(){document.body.removeChild(this.outerDomNode),window.clearInterval(this.intervalTokenId),this.listenersToRemove=i.disposeAll(this.listenersToRemove)},e.prototype._createDomNode=function(){var e=this;this.outerDomNode=document.createElement("div"),this.outerDomNode.className="benchmarktimerbox";var t=document.createElement("input");t.type="button",t.value="Clear",this.listenersToRemove.push(o.addDisposableListener(t,"click",function(){return e._onClear()})),this.outerDomNode.appendChild(t),this.textFilterDomNode=document.createElement("input"),this.textFilterDomNode.type="text",this.textFilterDomNode.className="textFilter",this.listenersToRemove.push(o.addDisposableListener(this.textFilterDomNode,"keydown",function(){return e.onTextFilterChange()})),this.textFilter="",this.outerDomNode.appendChild(document.createTextNode("Filter")),this.outerDomNode.appendChild(this.textFilterDomNode),this.timeFilterDomNode=document.createElement("input"),this.timeFilterDomNode.type="text",this.timeFilterDomNode.value="0",this.timeFilterDomNode.className="timeFilter",this.listenersToRemove.push(o.addDisposableListener(this.timeFilterDomNode,"keydown",function(){return e.onTimeFilterChange()})),this.timeFilter=0,this.outerDomNode.appendChild(document.createTextNode("Hide time under")),this.outerDomNode.appendChild(this.timeFilterDomNode);var n=document.createElement("input");n.type="button",n.value="Close",this.listenersToRemove.push(o.addDisposableListener(n,"click",function(){e.onHide()})),this.outerDomNode.appendChild(n);var i=document.createElement("pre");i.appendChild(document.createTextNode(this.renderRow("TOPIC","NAME","TOOK","START","END"))),this.outerDomNode.appendChild(i),this.outerDomNode.appendChild(document.createElement("hr"));var r=document.createElement("div");return r.className="inner",this.outerDomNode.appendChild(r),document.body.appendChild(this.outerDomNode),r},e.prototype.onTextFilterChange=function(){var e=this;setTimeout(function(){e.refilter()})},e.prototype.onTimeFilterChange=function(){var e=this;setTimeout(function(){e.refilter()})},e.prototype.matchesTextFilter=function(e){return this.textFilter?e.topic.toLowerCase().indexOf(this.textFilter.toLowerCase())>=0?!0:e.name.toLowerCase().indexOf(this.textFilter.toLowerCase())>=0:!0},e.prototype.matchesTimeFilter=function(e){return this.timeFilter?e.timeTaken()>=this.timeFilter:!0},e.prototype.shouldShow=function(e){return this.matchesTextFilter(e)&&this.matchesTimeFilter(e)},e.prototype.refilter=function(){this.textFilter=this.textFilterDomNode.value,this.timeFilter=parseInt(this.timeFilterDomNode.value,10);for(var e=Array.prototype.slice.call(this.domNode.children,0),t=0;t<e.length;t++){var n=e[t].getAttribute("data-event-id"),i=this.renderedEvents[n];this.shouldShow(i)?e[t].style.display="inherit":e[t].style.display="none"}},e.prototype._onClear=function(){this.lastEventIndex=this.timeKeeper.getCollectedEvents().length,this.renderedEvents={},this.renderCnt=0,o.clearNode(this.domNode)},e.prototype.leftPaddedString=function(e,t,n){var i=this._repeatStr(t,Math.max(0,e-n.length));return i+n},e.prototype.rightPaddedString=function(e,t,n){var i=this._repeatStr(t,Math.max(0,e-n.length));return n+i},e.prototype.renderRow=function(e,t,n,i,o){var r=" ";return r+=this.rightPaddedString(10," ",e),r+=this.rightPaddedString(30," ",t),r+=" "+this.leftPaddedString(15," ",n),r+=" "+this.leftPaddedString(13," ",i)},e.prototype._suffix0=function(e){return"."===e.charAt(e.length-3)?e:"."===e.charAt(e.length-2)?e+"0":e+".00"},e.prototype._twoPrecision=function(e){return this._suffix0(Math.round(100*e)/100+"")},e.prototype._absoluteTime=function(e){return 1e3>e?this._twoPrecision(e)+" ms":(e/=1e3,60>e?this._twoPrecision(e)+" s":(e/=60,60>e?this._twoPrecision(e)+" m":(e/=60,this._twoPrecision(e)+" h")))},e.prototype._renderEvent=function(e,t){var i=t.startTime.getTime()-n.TimeKeeper.PARSE_TIME.getTime(),o=this.renderRow(t.topic,t.name,this._twoPrecision(t.timeTaken()),this._absoluteTime(i)+"",this._absoluteTime(i+t.timeTaken()));e.textContent="",e.appendChild(document.createTextNode(o))},e.prototype._renderStartTimerEvent=function(e){var t=document.createElement("pre");this._renderEvent(t,e),this.domNode.appendChild(t);var n=e.id.toString();t.setAttribute("data-event-id",n),t.className="timer-event-"+e.id%2,this.renderedEvents[n]=e,this.shouldShow(this.renderedEvents[n])?t.style.display="inherit":t.style.display="none",this.renderCnt++},e.prototype._render=function(){for(var e=this.timeKeeper.getCollectedEvents(),t=!1,n=this.lastEventIndex;n<e.length;n++){var i=e[n];if(!i.stopTime)return this.lastEventIndex=n,void(t&&(this.domNode.scrollTop=1e5));this._renderStartTimerEvent(i),t=!0}t&&(this.domNode.scrollTop=1e5),this.lastEventIndex=e.length},e.prototype._repeatStr=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},e}();t.TimeKeeperRenderer=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/toolbar/toolbar",["require","exports","vs/nls!vs/base/browser/ui/toolbar/toolbar","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/common/types","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/dropdown/dropdown","vs/css!./toolbar"],function(e,t,n,i,o,r,s,a,c){"use strict";t.CONTEXT="context.toolbar";var u=function(){function e(e,t,n){var i=this;void 0===n&&(n={orientation:a.ActionsOrientation.HORIZONTAL}),this.options=n,this.toggleMenuAction=new l(function(){return i.toggleMenuActionItem&&i.toggleMenuActionItem.show()});var r=document.createElement("div");r.className="monaco-toolbar",e.appendChild(r),this.actionBar=new a.ActionBar(o.$(r),{orientation:n.orientation,ariaLabel:n.ariaLabel,actionItemProvider:function(e){return e.id===l.ID?(i.toggleMenuActionItem&&i.toggleMenuActionItem.dispose(),i.toggleMenuActionItem=new d(e,e.menuActions,t,i.options.actionItemProvider,i.actionRunner,"toolbar-toggle-more"),i.toggleMenuActionItem):n.actionItemProvider?n.actionItemProvider(e):null}})}return Object.defineProperty(e.prototype,"actionRunner",{get:function(){return this.actionBar.actionRunner},set:function(e){this.actionBar.actionRunner=e},enumerable:!0,configurable:!0}),e.prototype.getContainer=function(){return this.actionBar.getContainer()},e.prototype.setAriaLabel=function(e){this.actionBar.setAriaLabel(e)},e.prototype.setActions=function(e,t){var n=this;return function(){var i=e?e.slice(0):[];n.hasSecondaryActions=t&&t.length>0,n.hasSecondaryActions&&(n.toggleMenuAction.menuActions=t.slice(0),i.push(n.toggleMenuAction)),n.actionBar.clear(),n.actionBar.push(i,{icon:!0,label:!1})}},e.prototype.addPrimaryAction=function(e){var t=this;return function(){if(t.hasSecondaryActions){var n=t.actionBar.length();t.actionBar.push(e,{icon:!0,label:!1,index:n})}else t.actionBar.push(e,{icon:!0,label:!1})}},e.prototype.dispose=function(){this.actionBar.dispose(),this.toggleMenuAction.dispose(),this.toggleMenuActionItem&&this.toggleMenuActionItem.dispose()},e}();t.ToolBar=u;var l=function(e){function t(i){e.call(this,t.ID,n.localize(0,null),null,!0),this.toggleDropdownMenu=i}return __extends(t,e),t.prototype.run=function(){return this.toggleDropdownMenu(),i.TPromise.as(!0)},Object.defineProperty(t.prototype,"menuActions",{get:function(){return this._menuActions},set:function(e){this._menuActions=e},enumerable:!0,configurable:!0}),t.ID="toolbar.toggle.more",t}(s.Action),d=function(e){function t(t,n,i,o,r,s){e.call(this,null,t),this.menuActionsOrProvider=n,this.contextMenuProvider=i,this.actionItemProvider=o,this.actionRunner=r,this.clazz=s}return __extends(t,e),t.prototype.render=function(e){var t=this,n=function(e){return t.builder=o.$("a.action-label").attr({tabIndex:"0",role:"button","aria-haspopup":"true",title:t._action.label||"","class":t.clazz}),t.builder.appendTo(e),null},i={contextMenuProvider:this.contextMenuProvider,labelRenderer:n};r.isArray(this.menuActionsOrProvider)?i.actions=this.menuActionsOrProvider:i.actionProvider=this.menuActionsOrProvider,this.dropdownMenu=new c.DropdownMenu(e,i),this.dropdownMenu.menuOptions={actionItemProvider:this.actionItemProvider,actionRunner:this.actionRunner},this.toUnbind=this.addEmitter(this.dropdownMenu)},t.prototype.show=function(){this.dropdownMenu&&this.dropdownMenu.show()},t.prototype.dispose=function(){this.toUnbind(),this.dropdownMenu.dispose(),e.prototype.dispose.call(this)},t}(a.BaseActionItem);t.DropdownMenuActionItem=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/widget",["require","exports","vs/base/common/lifecycle","vs/base/browser/mouseEvent","vs/base/browser/keyboardEvent","vs/base/browser/dom"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onclick=function(e,t){this._register(r.addDisposableListener(e,r.EventType.CLICK,function(e){return t(new i.StandardMouseEvent(e))}))},t.prototype.onmousedown=function(e,t){this._register(r.addDisposableListener(e,r.EventType.MOUSE_DOWN,function(e){return t(new i.StandardMouseEvent(e))}))},t.prototype.onmouseover=function(e,t){this._register(r.addDisposableListener(e,r.EventType.MOUSE_OVER,function(e){return t(new i.StandardMouseEvent(e))}))},t.prototype.onnonbubblingmouseout=function(e,t){this._register(r.addDisposableNonBubblingMouseOutListener(e,function(e){return t(new i.StandardMouseEvent(e))}))},t.prototype.onkeydown=function(e,t){this._register(r.addDisposableListener(e,r.EventType.KEY_DOWN,function(e){return t(new o.StandardKeyboardEvent(e))}))},t.prototype.onkeyup=function(e,t){this._register(r.addDisposableListener(e,r.EventType.KEY_UP,function(e){return t(new o.StandardKeyboardEvent(e))}))},t.prototype.oninput=function(e,t){this._register(r.addDisposableListener(e,r.EventType.INPUT,t))},t.prototype.onblur=function(e,t){this._register(r.addDisposableListener(e,r.EventType.BLUR,t))},t.prototype.onfocus=function(e,t){this._register(r.addDisposableListener(e,r.EventType.FOCUS,t))},t.prototype.onchange=function(e,t){this._register(r.addDisposableListener(e,r.EventType.CHANGE,t))},t}(n.Disposable);t.Widget=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/checkbox/checkbox",["require","exports","vs/base/browser/dom","vs/base/common/keyCodes","vs/base/browser/ui/widget","vs/css!./checkbox"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t){var n=this;e.call(this),this._opts=t,this._checked=this._opts.isChecked,this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.className=this._className(),this.domNode.tabIndex=0,this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.onclick(this.domNode,function(e){n.checked=!n._checked,n._opts.onChange(!1),e.preventDefault()}),this.onkeydown(this.domNode,function(e){return e.keyCode===i.KeyCode.Space||e.keyCode===i.KeyCode.Enter?(n.checked=!n._checked,n._opts.onChange(!0),void e.preventDefault()):void(n._opts.onKeyDown&&n._opts.onKeyDown(e))})}return __extends(t,e),t.prototype.focus=function(){this.domNode.focus()},Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.className=this._className()},enumerable:!0,configurable:!0}),t.prototype._className=function(){return"custom-checkbox "+this._opts.actionClassName+" "+(this._checked?"checked":"unchecked")},t.prototype.width=function(){return 22},t.prototype.enable=function(){this.domNode.tabIndex=0,this.domNode.setAttribute("aria-disabled",String(!1))},t.prototype.disable=function(){n.removeTabIndexAndUpdateFocus(this.domNode),this.domNode.setAttribute("aria-disabled",String(!0))},t}(o.Widget);t.Checkbox=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/inputbox/inputBox",["require","exports","vs/nls!vs/base/browser/ui/inputbox/inputBox","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/browserService","vs/base/browser/htmlContentRenderer","vs/base/browser/ui/aria/aria","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/contextview/contextview","vs/base/common/event","vs/base/browser/ui/widget","vs/css!./inputBox"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=o.emmet;!function(e){e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(t.MessageType||(t.MessageType={}));var p=t.MessageType,f=function(e){function t(t,n,r){var s=this;e.call(this),this.state="idle",this._onDidChange=this._register(new l.Emitter),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new l.Emitter),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=n,this.options=r||Object.create(null),this.message=null,this.cachedHeight=null,this.placeholder=this.options.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation,this.showValidationMessage=this.options.validationOptions.showMessage||!1),this.element=o.append(t,h(".monaco-inputbox.idle"));var a=this.options.flexibleHeight?"textarea":"input",u=o.append(this.element,h(".wrapper"));this.input=o.append(u,h(a+".input")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,function(){return o.addClass(s.element,"synthetic-focus")}),this.onblur(this.input,function(){return o.removeClass(s.element,"synthetic-focus")}),this.options.flexibleHeight?this.mirror=o.append(u,h("div.mirror")):(this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off")),this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&this.input.setAttribute("placeholder",this.placeholder),this.oninput(this.input,function(){return s.onValueChange()}),this.onblur(this.input,function(){return s.onBlur()}),this.onfocus(this.input,function(){return s.onFocus()}),this.placeholder&&i.isIE11orEarlier&&(this.onclick(this.input,function(e){o.EventHelper.stop(e,!0),s.input.focus()}),i.isIE9&&this.onkeyup(this.input,function(){return s.onValueChange()})),setTimeout(function(){return s.layout()},0),this.options.actions&&(this.actionbar=this._register(new c.ActionBar(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1}))}return __extends(t,e),t.prototype.onBlur=function(){this._hideMessage()},t.prototype.onFocus=function(){this._showMessage()},t.prototype.setPlaceHolder=function(e){this.input&&this.input.setAttribute("placeholder",e)},t.prototype.setAriaLabel=function(e){this.ariaLabel=e,this.input&&(e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label"))},t.prototype.setContextViewProvider=function(e){this.contextViewProvider=e},Object.defineProperty(t.prototype,"inputElement",{get:function(){return this.input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.input.value},set:function(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return null===this.cachedHeight?o.getTotalHeight(this.element):this.cachedHeight},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input.focus()},t.prototype.blur=function(){this.input.blur()},t.prototype.hasFocus=function(){return r.getService().document.activeElement===this.input},t.prototype.select=function(e){void 0===e&&(e=null),this.input.select(),e&&this.input.setSelectionRange(e.start,e.end)},t.prototype.enable=function(){this.input.removeAttribute("disabled")},t.prototype.disable=function(){this.input.disabled=!0,this._hideMessage()},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},Object.defineProperty(t.prototype,"width",{get:function(){return o.getTotalWidth(this.input)},set:function(e){this.input.style.width=e+"px"},enumerable:!0,configurable:!0}),t.prototype.showMessage=function(e,t){this.message=e,o.removeClass(this.element,"idle"),o.removeClass(this.element,"info"),o.removeClass(this.element,"warning"),o.removeClass(this.element,"error"),o.addClass(this.element,this.classForType(e.type));var i;i=e.type===p.ERROR?n.localize(0,null,e.content):e.type===p.WARNING?n.localize(1,null,e.content):n.localize(2,null,e.content),a.alert(i),(this.hasFocus()||t)&&this._showMessage()},t.prototype.hideMessage=function(){this.message=null,o.removeClass(this.element,"info"),o.removeClass(this.element,"warning"),o.removeClass(this.element,"error"),o.addClass(this.element,"idle"),this._hideMessage()},t.prototype.isInputValid=function(){return!!this.validation&&!this.validation(this.value)},t.prototype.validate=function(){var e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),!e},t.prototype.classForType=function(e){switch(e){case p.INFO:return"info";case p.WARNING:return"warning";default:return"error"}},t.prototype._showMessage=function(){var e=this;if(this.contextViewProvider&&this.message){var t,n=function(){return t.style.width=o.getTotalWidth(e.element)+"px"};this.state="open",this.contextViewProvider.showContextView({getAnchor:function(){return e.element},anchorAlignment:u.AnchorAlignment.RIGHT,render:function(i){t=o.append(i,h(".monaco-inputbox-container")),n();var r={tagName:"span",className:"monaco-inputbox-message"};e.message.formatContent?r.formattedText=e.message.content:r.text=e.message.content;var a=s.renderHtml(r);return o.addClass(a,e.classForType(e.message.type)),o.append(t,a),null},layout:n})}},t.prototype._hideMessage=function(){this.contextViewProvider&&"open"===this.state&&(this.state="idle",this.contextViewProvider.hideContextView())},t.prototype.onValueChange=function(){if(this._onDidChange.fire(this.value),this.validate(),this.mirror){var e=this.value.charCodeAt(this.value.length-1),t=10===e?" ":"";this.mirror.textContent=this.value+t,this.layout()}},t.prototype.layout=function(){if(this.mirror){var e=this.cachedHeight;this.cachedHeight=o.getTotalHeight(this.mirror),e!==this.cachedHeight&&(this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedHeight))}},t.prototype.dispose=function(){this._hideMessage(),this.element=null,this.input=null,this.contextViewProvider=null,this.message=null,this.placeholder=null,this.ariaLabel=null,this.validation=null,
this.showValidationMessage=null,this.state=null,this.actionbar=null,e.prototype.dispose.call(this)},t}(d.Widget);t.InputBox=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/findinput/findInput",["require","exports","vs/nls!vs/base/browser/ui/findinput/findInput","vs/base/browser/dom","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/checkbox/checkbox","vs/base/browser/ui/widget","vs/base/common/event","vs/base/common/keyCodes","vs/css!./findInput"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=n.localize(0,null),l=n.localize(1,null),d=n.localize(2,null),h=n.localize(3,null),p=function(e){function t(t,n,i){var o=this;e.call(this),this._onDidOptionChange=this._register(new a.Emitter),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new a.Emitter),this.onKeyDown=this._onKeyDown.event,this._onInput=this._register(new a.Emitter),this.onInput=this._onInput.event,this._onKeyUp=this._register(new a.Emitter),this.onKeyUp=this._onKeyUp.event,this._onCaseSensitiveKeyDown=this._register(new a.Emitter),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this.contextViewProvider=n,this.width=i.width||100,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||h,this.regex=null,this.wholeWords=null,this.caseSensitive=null,this.domNode=null,this.inputBox=null,this.buildDomNode(i.appendCaseSensitiveLabel||"",i.appendWholeWordsLabel||"",i.appendRegexLabel||""),Boolean(t)&&t.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,function(e){return o._onKeyDown.fire(e)}),this.onkeyup(this.inputBox.inputElement,function(e){return o._onKeyUp.fire(e)}),this.oninput(this.inputBox.inputElement,function(e){return o._onInput.fire()})}return __extends(t,e),t.prototype.enable=function(){i.removeClass(this.domNode,"disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()},t.prototype.disable=function(){i.addClass(this.domNode,"disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},t.prototype.clear=function(){this.clearValidation(),this.setValue(""),this.focus()},t.prototype.setWidth=function(e){this.width=e,this.domNode.style.width=this.width+"px",this.contextViewProvider.layout(),this.setInputWidth()},t.prototype.getValue=function(){return this.inputBox.value},t.prototype.setValue=function(e){this.inputBox.value!==e&&(this.inputBox.value=e)},t.prototype.setMatchCountState=function(e){this.matchCount.setState(e),this.setInputWidth()},t.prototype.select=function(){this.inputBox.select()},t.prototype.focus=function(){this.inputBox.focus()},t.prototype.getCaseSensitive=function(){return this.caseSensitive.checked},t.prototype.setCaseSensitive=function(e){this.caseSensitive.checked=e,this.setInputWidth()},t.prototype.getWholeWords=function(){return this.wholeWords.checked},t.prototype.setWholeWords=function(e){this.wholeWords.checked=e,this.setInputWidth()},t.prototype.getRegex=function(){return this.regex.checked},t.prototype.setRegex=function(e){this.regex.checked=e,this.setInputWidth()},t.prototype.focusOnCaseSensitive=function(){this.caseSensitive.focus()},t.prototype.setInputWidth=function(){var e=this.width-this.matchCount.width()-this.caseSensitive.width()-this.wholeWords.width()-this.regex.width();this.inputBox.width=e},t.prototype.buildDomNode=function(e,t,n){var s=this;this.domNode=document.createElement("div"),this.domNode.style.width=this.width+"px",i.addClass(this.domNode,"monaco-findInput"),this.inputBox=this._register(new o.InputBox(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation||null,showMessage:!0}})),this.regex=this._register(new r.Checkbox({actionClassName:"regex",title:u+n,isChecked:!1,onChange:function(e){s._onDidOptionChange.fire(e),e||s.inputBox.focus(),s.setInputWidth(),s.validate()}})),this.wholeWords=this._register(new r.Checkbox({actionClassName:"whole-word",title:l+t,isChecked:!1,onChange:function(e){s._onDidOptionChange.fire(e),e||s.inputBox.focus(),s.setInputWidth(),s.validate()}})),this.caseSensitive=this._register(new r.Checkbox({actionClassName:"case-sensitive",title:d+e,isChecked:!1,onChange:function(e){s._onDidOptionChange.fire(e),e||s.inputBox.focus(),s.setInputWidth(),s.validate()},onKeyDown:function(e){s._onCaseSensitiveKeyDown.fire(e)}})),this.matchCount=this._register(new f({onClick:function(e){s.inputBox.focus(),e.preventDefault()}}));var a=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,function(e){if(e.equals(c.CommonKeybindings.LEFT_ARROW)||e.equals(c.CommonKeybindings.RIGHT_ARROW)||e.equals(c.CommonKeybindings.ESCAPE)){var t=a.indexOf(document.activeElement);if(t>=0){var n=void 0;e.equals(c.CommonKeybindings.RIGHT_ARROW)?n=(t+1)%a.length:e.equals(c.CommonKeybindings.LEFT_ARROW)&&(n=0===t?a.length-1:t-1),e.equals(c.CommonKeybindings.ESCAPE)?a[t].blur():n>=0&&a[n].focus(),i.EventHelper.stop(e,!0)}}}),this.setInputWidth();var h=document.createElement("div");h.className="controls",h.appendChild(this.matchCount.domNode),h.appendChild(this.caseSensitive.domNode),h.appendChild(this.wholeWords.domNode),h.appendChild(this.regex.domNode),this.domNode.appendChild(h)},t.prototype.validate=function(){this.inputBox.validate()},t.prototype.showMessage=function(e){this.inputBox.showMessage(e)},t.prototype.clearMessage=function(){this.inputBox.hideMessage()},t.prototype.clearValidation=function(){this.inputBox.hideMessage()},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.OPTION_CHANGE="optionChange",t}(s.Widget);t.FindInput=p;var f=function(e){function t(t){e.call(this),this.domNode=document.createElement("div"),this.domNode.className="matchCount",this.setState({isVisible:!1,count:"0",title:""}),this.onclick(this.domNode,t.onClick)}return __extends(t,e),t.prototype.width=function(){return this.isVisible?30:0},t.prototype.setState=function(e){i.clearNode(this.domNode),this.domNode.appendChild(document.createTextNode(e.count)),this.domNode.title=e.title,this.isVisible=e.isVisible,this.isVisible?this.domNode.style.display="block":this.domNode.style.display="none"},t}(s.Widget)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/abstractScrollbar",["require","exports","vs/base/browser/browser","vs/base/common/platform","vs/base/browser/dom","vs/base/browser/mouseEvent","vs/base/browser/ui/scrollbar/scrollableElement","vs/base/common/lifecycle","vs/base/browser/globalMouseMoveMonitor","vs/base/browser/ui/widget","vs/base/common/async"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e,t,n,i,o){null!==t&&(e.style.top=t+"px"),null!==n&&(e.style.left=n+"px"),null!==i&&(e.style.bottom=i+"px"),null!==o&&(e.style.right=o+"px")}function h(e,t,n){null!==t&&(e.style.width=t+"px"),null!==n&&(e.style.height=n+"px")}t.ARROW_IMG_SIZE=11;var p=140,f=20,m=function(){function e(e,t,n){this._visibleSize=0,this._scrollSize=0,this._scrollPosition=0,this._scrollbarSize=t,this._oppositeScrollbarSize=n,this._arrowSize=e,this._refreshComputedValues()}return e.prototype.setVisibleSize=function(e){return this._visibleSize!==e?(this._visibleSize=e,this._refreshComputedValues(),!0):!1},e.prototype.setScrollSize=function(e){return this._scrollSize!==e?(this._scrollSize=e,this._refreshComputedValues(),!0):!1},e.prototype.setScrollPosition=function(e){return this._scrollPosition!==e?(this._scrollPosition=e,this._refreshComputedValues(),!0):!1},e.prototype._refreshComputedValues=function(){if(this._computedAvailableSize=Math.max(0,this._visibleSize-this._oppositeScrollbarSize),this._computedRepresentableSize=Math.max(0,this._computedAvailableSize-2*this._arrowSize),this._computedRatio=this._scrollSize>0?this._computedRepresentableSize/this._scrollSize:0,this._computedIsNeeded=this._scrollSize>this._visibleSize,this._computedIsNeeded){if(this._computedSliderSize=Math.floor(this._visibleSize*this._computedRatio),this._computedSliderPosition=Math.floor(this._scrollPosition*this._computedRatio),this._computedSliderSize<f){var e=(f-this._computedSliderSize)/2;this._computedSliderSize=f,this._computedSliderPosition-=e,this._computedSliderPosition+this._computedSliderSize>this._computedRepresentableSize&&(this._computedSliderPosition=this._computedRepresentableSize-this._computedSliderSize),this._computedSliderPosition<0&&(this._computedSliderPosition=0)}}else this._computedSliderSize=this._computedRepresentableSize,this._computedSliderPosition=0},e.prototype.getArrowSize=function(){return this._arrowSize},e.prototype.getRectangleLargeSize=function(){return this._computedAvailableSize},e.prototype.getRectangleSmallSize=function(){return this._scrollbarSize},e.prototype.isNeeded=function(){return this._computedIsNeeded},e.prototype.getSliderSize=function(){return this._computedSliderSize},e.prototype.getSliderPosition=function(){return this._computedSliderPosition},e.prototype.convertSliderPositionToScrollPosition=function(e){return e/this._computedRatio},e.prototype.validateScrollPosition=function(e){return e=Math.round(e),e=Math.max(e,0),e=Math.min(e,this._scrollSize-this._visibleSize)},e}();t.ScrollbarState=m;var v=function(e){function n(n,i,o,r,s,a,u,p,f){var m=this;e.call(this),this._parent=f,this._mouseWheelEventFactory=p,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",h(this.bgDomNode,a,u),d(this.bgDomNode,null!==i?0:null,null!==o?0:null,null!==r?0:null,null!==s?0:null),this.domNode=document.createElement("div"),this.domNode.className=n,this.domNode.style.position="absolute",h(this.domNode,t.ARROW_IMG_SIZE,t.ARROW_IMG_SIZE),d(this.domNode,i,o,r,s),this._mouseMoveMonitor=this._register(new c.GlobalMouseMoveMonitor),this.onmousedown(this.bgDomNode,function(e){return m._arrowMouseDown(e)}),this.onmousedown(this.domNode,function(e){return m._arrowMouseDown(e)}),this._mousedownRepeatTimer=this._register(new l.IntervalTimer),this._mousedownScheduleRepeatTimer=this._register(new l.TimeoutTimer)}return __extends(n,e),n.prototype._arrowMouseDown=function(e){var t=this,n=function(){t._parent.onMouseWheel(t._mouseWheelEventFactory())},i=function(){t._mousedownRepeatTimer.cancelAndSet(n,1e3/24)};n(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(i,200),this._mouseMoveMonitor.startMonitoring(c.standardMouseMoveMerger,function(e){},function(){t._mousedownRepeatTimer.cancel(),t._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()},n}(u.Widget),g=function(e){function t(t,n,i){e.call(this),this._visibility=t,this._visibleClassName=n,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new l.TimeoutTimer)}return __extends(t,e),t.prototype.applyVisibilitySetting=function(e){return this._visibility===s.Visibility.Hidden?!1:this._visibility===s.Visibility.Visible?!0:e},t.prototype.setShouldBeVisible=function(e){var t=this.applyVisibilitySetting(e);this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())},t.prototype.setIsNeeded=function(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())},t.prototype.setDomNode=function(e){this._domNode=e,this._domNode.className=this._invisibleClassName,this.setShouldBeVisible(!1)},t.prototype.ensureVisibility=function(){return this._isNeeded?void(this._shouldBeVisible?this._reveal():this._hide(!0)):void this._hide(!1)},t.prototype._reveal=function(){var e=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(function(){e._domNode.className=e._visibleClassName},0))},t.prototype._hide=function(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode.className=this._invisibleClassName+(e?" fade":""))},t}(a.Disposable),y=function(e){function t(t,n,i,o,r){e.call(this),this._forbidTranslate3dUse=t,this._parent=n,this._scrollbarState=i,this._visibilityController=this._register(new g(o,"visible scrollbar "+r,"invisible scrollbar "+r)),this._mouseMoveMonitor=this._register(new c.GlobalMouseMoveMonitor)}return __extends(t,e),t.prototype._createDomNode=function(){var e=this;this.domNode=document.createElement("div"),!this._forbidTranslate3dUse&&n.canUseTranslate3d&&(this.domNode.style.transform="translate3d(0px, 0px, 0px)"),this._visibilityController.setDomNode(this.domNode),this.domNode.style.position="absolute",this.onmousedown(this.domNode,function(t){return e._domNodeMouseDown(t)})},t.prototype._createArrow=function(e,t,n,i,o,r,s,a){var c=this._register(new v(e,t,n,i,o,r,s,a,this._parent));this.domNode.appendChild(c.bgDomNode),this.domNode.appendChild(c.domNode)},t.prototype._createSlider=function(e,t,n,i){var o=this;this.slider=document.createElement("div"),this.slider.className="slider",this.slider.style.position="absolute",d(this.slider,e,t,null,null),h(this.slider,n,i),this.domNode.appendChild(this.slider),this.onmousedown(this.slider,function(e){return o._sliderMouseDown(e)})},t.prototype.onElementSize=function(e){this._scrollbarState.setVisibleSize(e)&&(this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._renderSlider(),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()))},t.prototype.onElementScrollSize=function(e){this._scrollbarState.setScrollSize(e)&&(this._renderSlider(),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()))},t.prototype.onElementScrollPosition=function(e){this._scrollbarState.setScrollPosition(e)&&(this._renderSlider(),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()))},t.prototype.beginReveal=function(){this._visibilityController.setShouldBeVisible(!0)},t.prototype.beginHide=function(){this._visibilityController.setShouldBeVisible(!1)},t.prototype._renderSlider=function(){this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition())},t.prototype._domNodeMouseDown=function(e){e.target===this.domNode&&this._onMouseDown(e)},t.prototype.delegateMouseDown=function(e){var t=new r.StandardMouseEvent(e),n=this.domNode.getClientRects()[0].top,i=n+this._scrollbarState.getSliderPosition(),o=n+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(t);s>=i&&o>=s?this._sliderMouseDown(t):this._onMouseDown(t)},t.prototype._onMouseDown=function(e){var t=o.getDomNodePosition(this.domNode),n=this._mouseDownRelativePosition(e,t)-this._scrollbarState.getArrowSize()-this._scrollbarState.getSliderSize()/2;this.setDesiredScrollPosition(this._scrollbarState.convertSliderPositionToScrollPosition(n)),this._sliderMouseDown(e)},t.prototype._sliderMouseDown=function(e){var t=this;if(e.leftButton){var n=this._sliderOrthogonalMousePosition(e),r=this._getScrollPosition(),s=this._sliderMousePosition(e)-this._scrollbarState.getSliderPosition();o.toggleClass(this.slider,"active",!0),this._mouseMoveMonitor.startMonitoring(c.standardMouseMoveMerger,function(e){var o=t._sliderOrthogonalMousePosition(e),a=Math.abs(o-n);if(i.isWindows&&a>p)t.setDesiredScrollPosition(r);else{var c=t._sliderMousePosition(e)-s;t.setDesiredScrollPosition(t._scrollbarState.convertSliderPositionToScrollPosition(c))}},function(){o.toggleClass(t.slider,"active",!1),t._parent.onDragEnd()}),e.preventDefault(),this._parent.onDragStart()}},t.prototype.validateScrollPosition=function(e){return this._scrollbarState.validateScrollPosition(e)},t.prototype.setDesiredScrollPosition=function(e){e=this.validateScrollPosition(e),this._setScrollPosition(e),this.onElementScrollPosition(e),this._renderSlider()},t}(u.Widget);t.AbstractScrollbar=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/horizontalScrollbar",["require","exports","vs/base/browser/browser","vs/base/browser/ui/scrollbar/abstractScrollbar","vs/base/browser/mouseEvent","vs/base/browser/ui/scrollbar/scrollableElement","vs/base/browser/styleMutator"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,o){var s=this,a=new i.ScrollbarState(o.horizontalHasArrows?o.arrowSize:0,o.horizontal===r.Visibility.Hidden?0:o.horizontalScrollbarSize,o.vertical===r.Visibility.Hidden?0:o.verticalScrollbarSize);if(e.call(this,o.forbidTranslate3dUse,n,a,o.horizontal,"horizontal"),this._scrollable=t,this._createDomNode(),o.horizontalHasArrows){var c=(o.arrowSize-i.ARROW_IMG_SIZE)/2,u=(o.horizontalScrollbarSize-i.ARROW_IMG_SIZE)/2;this._createArrow("left-arrow",u,c,null,null,o.arrowSize,o.horizontalScrollbarSize,function(){return s._createMouseWheelEvent(1)}),this._createArrow("right-arrow",u,null,null,c,o.arrowSize,o.horizontalScrollbarSize,function(){return s._createMouseWheelEvent(-1)})}this._createSlider(Math.floor((o.horizontalScrollbarSize-o.horizontalSliderSize)/2),0,null,o.horizontalSliderSize)}return __extends(t,e),t.prototype._createMouseWheelEvent=function(e){return new o.StandardMouseWheelEvent(null,e,0)},t.prototype._updateSlider=function(e,t){s.StyleMutator.setWidth(this.slider,e),!this._forbidTranslate3dUse&&n.canUseTranslate3d?s.StyleMutator.setTransform(this.slider,"translate3d("+t+"px, 0px, 0px)"):s.StyleMutator.setLeft(this.slider,t)},t.prototype._renderDomNode=function(e,t){s.StyleMutator.setWidth(this.domNode,e),s.StyleMutator.setHeight(this.domNode,t),s.StyleMutator.setLeft(this.domNode,0),s.StyleMutator.setBottom(this.domNode,0)},t.prototype._mouseDownRelativePosition=function(e,t){return e.posx-t.left},t.prototype._sliderMousePosition=function(e){return e.posx},t.prototype._sliderOrthogonalMousePosition=function(e){return e.posy},t.prototype._getScrollPosition=function(){return this._scrollable.getScrollLeft()},t.prototype._setScrollPosition=function(e){this._scrollable.setScrollLeft(e)},t}(i.AbstractScrollbar);t.HorizontalScrollbar=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/verticalScrollbar",["require","exports","vs/base/browser/browser","vs/base/browser/ui/scrollbar/abstractScrollbar","vs/base/browser/mouseEvent","vs/base/browser/ui/scrollbar/scrollableElement","vs/base/browser/styleMutator"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,o){var s=this,a=new i.ScrollbarState(o.verticalHasArrows?o.arrowSize:0,o.vertical===r.Visibility.Hidden?0:o.verticalScrollbarSize,0);if(e.call(this,o.forbidTranslate3dUse,n,a,o.vertical,"vertical"),this._scrollable=t,this._createDomNode(),o.verticalHasArrows){var c=(o.arrowSize-i.ARROW_IMG_SIZE)/2,u=(o.verticalScrollbarSize-i.ARROW_IMG_SIZE)/2;this._createArrow("up-arrow",c,u,null,null,o.verticalScrollbarSize,o.arrowSize,function(){return s._createMouseWheelEvent(1)}),this._createArrow("down-arrow",null,u,c,null,o.verticalScrollbarSize,o.arrowSize,function(){return s._createMouseWheelEvent(-1)})}this._createSlider(0,Math.floor((o.verticalScrollbarSize-o.verticalSliderSize)/2),o.verticalSliderSize,null)}return __extends(t,e),t.prototype._createMouseWheelEvent=function(e){return new o.StandardMouseWheelEvent(null,0,e)},t.prototype._updateSlider=function(e,t){s.StyleMutator.setHeight(this.slider,e),!this._forbidTranslate3dUse&&n.canUseTranslate3d?s.StyleMutator.setTransform(this.slider,"translate3d(0px, "+t+"px, 0px)"):s.StyleMutator.setTop(this.slider,t)},t.prototype._renderDomNode=function(e,t){s.StyleMutator.setWidth(this.domNode,t),s.StyleMutator.setHeight(this.domNode,e),s.StyleMutator.setRight(this.domNode,0),s.StyleMutator.setTop(this.domNode,0)},t.prototype._mouseDownRelativePosition=function(e,t){return e.posy-t.top},t.prototype._sliderMousePosition=function(e){return e.posy},t.prototype._sliderOrthogonalMousePosition=function(e){return e.posx},t.prototype._getScrollPosition=function(){return this._scrollable.getScrollTop()},t.prototype._setScrollPosition=function(e){this._scrollable.setScrollTop(e)},t}(i.AbstractScrollbar);t.VerticalScrollbar=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/scrollableElementImpl",["require","exports","vs/base/browser/dom","vs/base/common/platform","vs/base/browser/mouseEvent","vs/base/browser/ui/scrollbar/domNodeScrollable","vs/base/browser/ui/scrollbar/horizontalScrollbar","vs/base/browser/ui/scrollbar/verticalScrollbar","vs/base/browser/ui/scrollbar/scrollableElement","vs/base/common/lifecycle","vs/base/browser/ui/widget","vs/base/common/async","vs/css!./media/scrollbars"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=500,p=50,f=function(e){function t(t,n,i){var o=this;void 0===i&&(i=null),e.call(this),this._originalElement=t,this._originalElement.style.overflow="hidden",this._options=this._createOptions(n),this._options.scrollable?this._scrollable=this._options.scrollable:this._scrollable=this._register(new r.DomNodeScrollable(this._originalElement)),this.verticalScrollbarWidth=this._options.verticalScrollbarSize,this.horizontalScrollbarHeight=this._options.horizontalScrollbarSize,this._verticalScrollbar=this._register(new a.VerticalScrollbar(this._scrollable,this,this._options)),this._horizontalScrollbar=this._register(new s.HorizontalScrollbar(this._scrollable,this,this._options)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(this._originalElement),this._domNode.appendChild(this._horizontalScrollbar.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode),this._options.useShadows&&(this._leftShadowDomNode=document.createElement("div"),this._leftShadowDomNode.className="shadow",this._domNode.appendChild(this._leftShadowDomNode)),this._options.useShadows&&(this._topShadowDomNode=document.createElement("div"),this._topShadowDomNode.className="shadow",this._domNode.appendChild(this._topShadowDomNode),this._topLeftShadowDomNode=document.createElement("div"),this._topLeftShadowDomNode.className="shadow top-left-corner",this._domNode.appendChild(this._topLeftShadowDomNode)),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._register(this._scrollable.addScrollListener(function(){return o._onScroll()})),this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,function(e){return o._onMouseOver(e)}),this.onnonbubblingmouseout(this._listenOnDomNode,function(e){return o._onMouseOut(e)}),this._onElementDimensionsTimeout=this._register(new d.TimeoutTimer),this._onElementInternalDimensionsTimeout=this._register(new d.TimeoutTimer),this._hideTimeout=this._register(new d.TimeoutTimer),this._isDragging=!1,this._mouseIsOver=!1,this.onElementDimensions(i,!0),this.onElementInternalDimensions(!0)}return __extends(t,e),t.prototype.dispose=function(){this._mouseWheelToDispose=u.disposeAll(this._mouseWheelToDispose),e.prototype.dispose.call(this)},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getOverviewRulerLayoutInfo=function(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode}},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this._verticalScrollbar.delegateMouseDown(e)},t.prototype.onElementDimensions=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!1),t?(this._actualElementDimensions(e),this._onElementDimensionsTimeout.cancel()):this._onElementDimensionsTimeout.cancelAndSet(function(){return n._actualElementDimensions(e)},0)},t.prototype._actualElementDimensions=function(e){void 0===e&&(e=null),e||(e={width:this._domNode.clientWidth,height:this._domNode.clientHeight}),this._dimensions=this._computeDimensions(e.width,e.height),this._verticalScrollbar.onElementSize(this._dimensions.height),this._horizontalScrollbar.onElementSize(this._dimensions.width)},t.prototype.onElementInternalDimensions=function(e){var t=this;void 0===e&&(e=!1),e?(this._actualElementInternalDimensions(),this._onElementInternalDimensionsTimeout.cancel()):this._onElementInternalDimensionsTimeout.setIfNotSet(function(){return t._actualElementInternalDimensions()},0)},t.prototype._actualElementInternalDimensions=function(){this._horizontalScrollbar.onElementScrollSize(this._scrollable.getScrollWidth()),this._verticalScrollbar.onElementScrollSize(this._scrollable.getScrollHeight())},t.prototype.updateClassName=function(e){this._options.className=e,i.isMacintosh&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className},t.prototype.updateOptions=function(e){var t=this._createOptions(e);this._options.handleMouseWheel=t.handleMouseWheel,this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity,this._setListeningToMouseWheel(this._options.handleMouseWheel)},t.prototype._setListeningToMouseWheel=function(e){var t=this,i=this._mouseWheelToDispose.length>0;if(i!==e&&(this._mouseWheelToDispose=u.disposeAll(this._mouseWheelToDispose),e)){var r=function(e){var n=new o.StandardMouseWheelEvent(e);t.onMouseWheel(n)};this._mouseWheelToDispose.push(n.addDisposableListener(this._listenOnDomNode,"mousewheel",r)),this._mouseWheelToDispose.push(n.addDisposableListener(this._listenOnDomNode,"DOMMouseScroll",r))}},t.prototype.onMouseWheel=function(e){if(i.isMacintosh&&e.browserEvent&&this._options.saveLastScrollTimeOnClassName){var t=e.browserEvent.target;if(t&&1===t.nodeType){var o=n.findParentWithClass(t,this._options.saveLastScrollTimeOnClassName);o&&o.setAttribute("last-scroll-time",String((new Date).getTime()))}}var r=-1,s=-1;if(e.deltaY||e.deltaX){var a=e.deltaY*this._options.mouseWheelScrollSensitivity,c=e.deltaX*this._options.mouseWheelScrollSensitivity;if(this._options.flipAxes&&(a=e.deltaX,c=e.deltaY),i.isMacintosh&&(a&&Math.abs(c)<.2&&(c=0),Math.abs(a)>.5*Math.abs(c)&&(c=0)),a){var u=this._scrollable.getScrollTop();r=this._verticalScrollbar.validateScrollPosition((-1!==r?r:u)-p*a),r===u&&(r=-1)}if(c){var l=this._scrollable.getScrollLeft();s=this._horizontalScrollbar.validateScrollPosition((-1!==s?s:l)-p*c),s===l&&(s=-1)}-1===r&&-1===s||(-1!==r&&(this._verticalScrollbar.setDesiredScrollPosition(r),r=-1),-1!==s&&(this._horizontalScrollbar.setDesiredScrollPosition(s),s=-1))}e.preventDefault(),e.stopPropagation()},t.prototype._onScroll=function(){var e=this._scrollable.getScrollHeight(),t=this._scrollable.getScrollTop(),i=this._scrollable.getScrollWidth(),o=this._scrollable.getScrollLeft();if(this._verticalScrollbar.onElementScrollPosition(t),this._horizontalScrollbar.onElementScrollPosition(o),this._options.useShadows){var r=e>0&&t>0,s=this._options.useShadows&&i>0&&o>0;this._topShadowDomNode&&n.toggleClass(this._topShadowDomNode,"top",r),this._topLeftShadowDomNode&&n.toggleClass(this._topLeftShadowDomNode,"top",r),this._leftShadowDomNode&&n.toggleClass(this._leftShadowDomNode,"left",s),this._topLeftShadowDomNode&&n.toggleClass(this._topLeftShadowDomNode,"left",s)}this._reveal()},t.prototype.onDragStart=function(){this._isDragging=!0,this._reveal()},t.prototype.onDragEnd=function(){this._isDragging=!1,this._hide()},t.prototype._onMouseOut=function(e){this._mouseIsOver=!1,this._hide()},t.prototype._onMouseOver=function(e){this._mouseIsOver=!0,this._reveal()},t.prototype._reveal=function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()},t.prototype._hide=function(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())},t.prototype._scheduleHide=function(){var e=this;this._hideTimeout.cancelAndSet(function(){return e._hide()},h)},t.prototype._computeDimensions=function(e,t){var n=e,i=t;return{width:n,height:i}},t.prototype._createOptions=function(e){function t(e,t,n){return e.hasOwnProperty(t)?e[t]:n}var n={forbidTranslate3dUse:t(e,"forbidTranslate3dUse",!1),className:t(e,"className",""),useShadows:t(e,"useShadows",!0),handleMouseWheel:t(e,"handleMouseWheel",!0),flipAxes:t(e,"flipAxes",!1),mouseWheelScrollSensitivity:t(e,"mouseWheelScrollSensitivity",1),arrowSize:t(e,"arrowSize",11),scrollable:t(e,"scrollable",null),listenOnDomNode:t(e,"listenOnDomNode",null),horizontal:c.visibilityFromString(t(e,"horizontal","auto")),horizontalScrollbarSize:t(e,"horizontalScrollbarSize",10),horizontalSliderSize:0,horizontalHasArrows:t(e,"horizontalHasArrows",!1),vertical:c.visibilityFromString(t(e,"vertical","auto")),verticalScrollbarSize:t(e,"verticalScrollbarSize",10),verticalHasArrows:t(e,"verticalHasArrows",!1),verticalSliderSize:0,saveLastScrollTimeOnClassName:t(e,"saveLastScrollTimeOnClassName",null)};return n.horizontalSliderSize=t(e,"horizontalSliderSize",n.horizontalScrollbarSize),n.verticalSliderSize=t(e,"verticalSliderSize",n.verticalScrollbarSize),i.isMacintosh&&(n.className+=" mac"),n},t}(l.Widget);t.ScrollableElement=f}),define("vs/base/browser/ui/list/listView",["require","exports","vs/base/common/event","vs/base/common/objects","vs/base/common/lifecycle","vs/base/browser/touch","vs/base/browser/dom","vs/base/browser/ui/scrollbar/scrollableElementImpl","./rangeMap","./rowCache","vs/base/common/diff/diff"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){return{getLength:function(){return e.length},getElementHash:function(t){return e[t].item.id+":"+e[t].range.start+":"+e[t].range.end}}}var h=["click","dblclick","mouseup","mousedown","mouseover","mousemove","mouseout","contextmenu"],p=function(){function e(e,t,o){this.delegate=t,this._onScroll=new n.Emitter,this.items=[],this.itemId=0,this.rangeMap=new c.RangeMap,this.renderers=i.toObject(o,function(e){return e.templateId}),this.cache=new u.RowCache(this.renderers),this.renderTop=0,this._renderHeight=0,this._domNode=document.createElement("div"),this._domNode.className="monaco-list",this._domNode.tabIndex=0,this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",this.gesture=new r.Gesture(this.rowsContainer),this.scrollableElement=new a.ScrollableElement(this.rowsContainer,{forbidTranslate3dUse:!0,scrollable:this,horizontal:"hidden",vertical:"auto",useShadows:!1,saveLastScrollTimeOnClassName:"monaco-list-row"}),this._domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this._domNode),this.toDispose=[this.rangeMap,this.gesture,this.scrollableElement,this._onScroll],this.layout()}return Object.defineProperty(e.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),e.prototype.splice=function(e,t){for(var n=this,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var r=this.getRenderedItemRanges(),s=i.map(function(e){return{id:String(n.itemId++),element:e,size:n.delegate.getHeight(e),templateId:n.delegate.getTemplateId(e),row:null}});(g=this.rangeMap).splice.apply(g,[e,t].concat(s));for(var a=(y=this.items).splice.apply(y,[e,t].concat(s)),c=this.getRenderedItemRanges(),u=new l.LcsDiff(d(r),d(c),null),h=u.ComputeDiff(),p=0,f=h;p<f.length;p++){for(var m=f[p],v=0;v<m.originalLength;v++)this.removeItemFromDOM(r[m.originalStart+v].item);
for(var v=0;v<m.modifiedLength;v++)this.insertItemInDOM(c[m.modifiedStart+v].item,c[0].index+m.modifiedStart+v)}return this.rowsContainer.style.height=this.rangeMap.size+"px",this.setScrollTop(this.renderTop),this.scrollableElement.onElementInternalDimensions(),a.map(function(e){return e.element});var g,y},Object.defineProperty(e.prototype,"length",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderHeight",{get:function(){return this._renderHeight},enumerable:!0,configurable:!0}),e.prototype.element=function(e){return this.items[e].element},e.prototype.elementHeight=function(e){return this.items[e].size},e.prototype.elementTop=function(e){return this.rangeMap.positionAt(e)},e.prototype.indexAt=function(e){return this.rangeMap.indexAt(e)},e.prototype.indexAfter=function(e){return this.rangeMap.indexAfter(e)},e.prototype.layout=function(e){this.setRenderHeight(e||s.getContentHeight(this._domNode)),this.setScrollTop(this.renderTop),this.scrollableElement.onElementDimensions(),this.scrollableElement.onElementInternalDimensions()},e.prototype.setRenderHeight=function(e){this.render(this.renderTop,e),this._renderHeight=e},e.prototype.render=function(e,t){var n,i,o=e+t,r=this.renderTop+this._renderHeight;for(n=this.rangeMap.indexAfter(o)-1,i=this.rangeMap.indexAt(Math.max(r,e));n>=i;n--)this.insertItemInDOM(this.items[n],n);for(n=Math.min(this.rangeMap.indexAt(this.renderTop),this.rangeMap.indexAfter(o))-1,i=this.rangeMap.indexAt(e);n>=i;n--)this.insertItemInDOM(this.items[n],n);for(n=this.rangeMap.indexAt(this.renderTop),i=Math.min(this.rangeMap.indexAt(e),this.rangeMap.indexAfter(r));i>n;n++)this.removeItemFromDOM(this.items[n]);for(n=Math.max(this.rangeMap.indexAfter(o),this.rangeMap.indexAt(this.renderTop)),i=this.rangeMap.indexAfter(r);i>n;n++)this.removeItemFromDOM(this.items[n]);this.rowsContainer.style.transform="translate3d(0px, -"+e+"px, 0px)",this.renderTop=e,this._renderHeight=o-e},e.prototype.getRenderedItemRanges=function(){for(var e=[],t=this.renderTop+this._renderHeight,n=this.renderTop,i=this.rangeMap.indexAt(n),o=this.items[i],r=-1;o&&t>=n;)r=n+o.size,e.push({item:o,index:i,range:{start:n,end:r}}),n=r,o=this.items[++i];return e},e.prototype.insertItemInDOM=function(e,t){e.row||(e.row=this.cache.alloc(e.templateId)),e.row.domNode.parentElement||this.rowsContainer.appendChild(e.row.domNode);var n=this.renderers[e.templateId];e.row.domNode.style.top=this.elementTop(t)+"px",e.row.domNode.style.height=e.size+"px",e.row.domNode.setAttribute("data-index",""+t),n.renderElement(e.element,t,e.row.templateData)},e.prototype.removeItemFromDOM=function(e){this.cache.release(e.row),e.row=null},e.prototype.getScrollHeight=function(){return this.rangeMap.size},e.prototype.getScrollWidth=function(){return 0},e.prototype.getScrollLeft=function(){return 0},e.prototype.setScrollLeft=function(e){},e.prototype.getScrollTop=function(){return this.renderTop},e.prototype.setScrollTop=function(e){e=Math.min(e,this.getScrollHeight()-this._renderHeight),e=Math.max(e,0),this.render(e,this._renderHeight),this.renderTop=e,this._onScroll.fire({vertical:!0,horizontal:!1})},e.prototype.addScrollListener=function(e){return this._onScroll.event(e)},e.prototype.addListener=function(e,t,n){var o=this;if(h.indexOf(e)>-1){var r=t;t=function(e){var t=o.getItemIndex(e);if(!(0>t)){var n=o.items[t].element;r(i.assign(e,{element:n,index:t}))}}}return s.addDisposableListener(this.domNode,e,t,n)},e.prototype.getItemIndex=function(e){for(var t=e.target;t instanceof HTMLElement&&t!==this.rowsContainer;){var n=t,i=n.getAttribute("data-index");if(i){var o=Number(i);if(!isNaN(o))return o}t=n.parentElement}return-1},e.prototype.dispose=function(){this.items=null,this._domNode&&this._domNode.parentElement&&(this._domNode.parentNode.removeChild(this._domNode),this._domNode=null),this.toDispose=o.disposeAll(this.toDispose)},e}();t.ListView=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/list/listWidget",["require","exports","vs/base/common/lifecycle","vs/base/common/types","vs/base/browser/dom","vs/base/common/event","./listView","vs/css!./list"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t){this.controller=e,this.renderer=t}return Object.defineProperty(e.prototype,"templateId",{get:function(){return this.renderer.templateId},enumerable:!0,configurable:!0}),e.prototype.renderTemplate=function(e){var t=this.renderer.renderTemplate(e);return{container:e,data:t}},e.prototype.renderElement=function(e,t,n){this.controller.renderElement(e,t,n.container),this.renderer.renderElement(e,t,n.data)},e.prototype.disposeTemplate=function(e){return this.renderer.disposeTemplate(e.data)},e}(),c=function(){function e(e){this._trait=e,this._onChange=new r.Emitter,this.indexes=[]}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),e.prototype.splice=function(e,t,n){for(var i=n-t,o=e+t,r=[],s=0,a=r;s<a.length;s++){var c=a[s];c>=e&&o>c||r.push(c>e?c+i:c)}this.indexes=r,this._onChange.fire({indexes:r})},e.prototype.renderElement=function(e,t,n){o.toggleClass(n,this._trait,this.contains(t))},e.prototype.set=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this.indexes;return this.indexes=e,this._onChange.fire({indexes:e}),n},e.prototype.get=function(){return this.indexes},e.prototype.contains=function(e){return this.indexes.some(function(t){return t===e})},e.prototype.wrapRenderer=function(e){return new a(this,e)},e.prototype.dispose=function(){this.indexes=null,this._onChange=n.dispose(this._onChange)},e}(),u=function(e){function t(t){e.call(this,"focused"),this.getElementId=t}return __extends(t,e),t.prototype.renderElement=function(t,n,i){e.prototype.renderElement.call(this,t,n,i),i.setAttribute("role","option"),i.setAttribute("id",this.getElementId(n))},t}(c),l=function(){function e(e,t){var n=this;this.list=e,this.view=t,this.toDispose=[],this.toDispose.push(t.addListener("click",function(e){return n.onClick(e)}))}return e.prototype.onClick=function(e){this.list.setSelection(e.index)},e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose)},e}(),d=function(){function e(t,n,i){var o=this;this.idPrefix="list_id_"+ ++e.InstanceCount,this.focus=new u(function(e){return o.getElementId(e)}),this.selection=new c("selected"),this.eventBufferer=new r.EventBufferer,i=i.map(function(e){return e=o.focus.wrapRenderer(e),e=o.selection.wrapRenderer(e)}),this.view=new s.ListView(t,n,i),this.view.domNode.setAttribute("role","listbox"),this.controller=new l(this,this.view)}return Object.defineProperty(e.prototype,"onFocusChange",{get:function(){var e=this;return this.eventBufferer.wrapEvent(r.mapEvent(this.focus.onChange,function(t){return e.toListEvent(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){var e=this;return this.eventBufferer.wrapEvent(r.mapEvent(this.selection.onChange,function(t){return e.toListEvent(t)}))},enumerable:!0,configurable:!0}),e.prototype.splice=function(e,t){for(var n=this,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.eventBufferer.bufferEvents(function(){n.focus.splice(e,t,i.length),n.selection.splice(e,t,i.length),(o=n.view).splice.apply(o,[e,t].concat(i));var o})},Object.defineProperty(e.prototype,"length",{get:function(){return this.view.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.view.getScrollHeight()},enumerable:!0,configurable:!0}),e.prototype.layout=function(e){this.view.layout(e)},e.prototype.setSelection=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];this.eventBufferer.bufferEvents(function(){t=t.concat((n=e.selection).set.apply(n,t)),t.forEach(function(t){return e.view.splice(t,1,e.view.element(t))});var n})},e.prototype.selectNext=function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=!1),0!==this.length){var n=this.selection.get(),i=n.length>0?n[0]+e:0;this.setSelection(t?i%this.length:Math.min(i,this.length-1))}},e.prototype.selectPrevious=function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=!1),0!==this.length){var n=this.selection.get(),i=n.length>0?n[0]-e:0;t&&0>i&&(i=this.length+i%this.length),this.setSelection(Math.max(i,0))}},e.prototype.setFocus=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];this.eventBufferer.bufferEvents(function(){t=t.concat((n=e.focus).set.apply(n,t)),t.forEach(function(t){return e.view.splice(t,1,e.view.element(t))});var n})},e.prototype.focusNext=function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=!1),0!==this.length){var n=this.focus.get(),i=n.length>0?n[0]+e:0;this.setFocus(t?i%this.length:Math.min(i,this.length-1))}},e.prototype.focusPrevious=function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=!1),0!==this.length){var n=this.focus.get(),i=n.length>0?n[0]-e:0;t&&0>i&&(i=(this.length+i%this.length)%this.length),this.setFocus(Math.max(i,0))}},e.prototype.focusNextPage=function(){var e=this,t=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);t=0===t?0:t-1;var n=this.view.element(t),i=this.getFocus()[0];if(i!==n)this.setFocus(t);else{var o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(t)),this.view.getScrollTop()!==o&&setTimeout(function(){return e.focusNextPage()},0)}},e.prototype.focusPreviousPage=function(){var e,t=this,n=this.view.getScrollTop();e=0===n?this.view.indexAt(n):this.view.indexAfter(n-1);var i=this.view.element(e),o=this.getFocus()[0];if(o!==i)this.setFocus(e);else{var r=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==r&&setTimeout(function(){return t.focusPreviousPage()},0)}},e.prototype.getFocus=function(){var e=this;return this.focus.get().map(function(t){return e.view.element(t)})},e.prototype.reveal=function(e,t){var n=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(i.isNumber(t)){t=0>t?0:t,t=t>1?1:t;var s=r-this.view.renderHeight;this.view.setScrollTop(s*t+o)}else{var a=o+r,c=n+this.view.renderHeight;n>o?this.view.setScrollTop(o):a>=c&&this.view.setScrollTop(a-this.view.renderHeight)}},e.prototype.getElementId=function(e){return this.idPrefix+"_"+e},e.prototype.toListEvent=function(e){var t=this,n=e.indexes;return{indexes:n,elements:n.map(function(e){return t.view.element(e)})}},e.prototype.dispose=function(){this.view=n.dispose(this.view),this.focus=n.dispose(this.focus),this.selection=n.dispose(this.selection)},e.InstanceCount=0,e}();t.List=d}),define("vs/base/parts/tree/browser/treeDefaults",["require","exports","vs/base/common/platform","vs/base/common/errors","vs/base/browser/dom","vs/base/common/keyCodes"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(){}return e.prototype.getHeight=function(e,t){return 20},e.prototype.getTemplateId=function(e,t){return"legacy"},e.prototype.renderTemplate=function(e,t,n){return{root:n,element:null,previousCleanupFn:null}},e.prototype.renderElement=function(e,t,n,i){for(i.previousCleanupFn&&i.previousCleanupFn(e,i.element);i.root.firstChild;)i.root.removeChild(i.root.firstChild);i.element=t,i.previousCleanupFn=this.render(e,t,i.root)},e.prototype.disposeTemplate=function(e,t,n){n.previousCleanupFn&&n.previousCleanupFn(e,n.element),n.root=null,n.element=null,n.previousCleanupFn=null},e.prototype.render=function(e,t,n,i){return n.textContent=""+t,null},e}();t.LegacyRenderer=s,function(e){e[e.ON_MOUSE_DOWN=0]="ON_MOUSE_DOWN",e[e.ON_MOUSE_UP=1]="ON_MOUSE_UP"}(t.ClickBehavior||(t.ClickBehavior={}));var a=t.ClickBehavior,c=function(){function e(){this._arr=[]}return e.prototype.set=function(e,t){this._arr.push({keybinding:e,callback:t})},e.prototype.dispatch=function(e){for(var t=this._arr.length-1;t>=0;t--){var n=this._arr[t];if(e===n.keybinding)return n.callback}return null},e}();t.KeybindingDispatcher=c;var u=function(){function e(e){var t=this;void 0===e&&(e={clickBehavior:a.ON_MOUSE_UP}),this.options=e,this.downKeyBindingDispatcher=new c,this.downKeyBindingDispatcher.set(r.CommonKeybindings.SPACE,function(e,n){return t.onSpace(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.UP_ARROW,function(e,n){return t.onUp(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.PAGE_UP,function(e,n){return t.onPageUp(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.DOWN_ARROW,function(e,n){return t.onDown(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.PAGE_DOWN,function(e,n){return t.onPageDown(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.LEFT_ARROW,function(e,n){return t.onLeft(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.RIGHT_ARROW,function(e,n){return t.onRight(e,n)}),this.downKeyBindingDispatcher.set(r.CommonKeybindings.ESCAPE,function(e,n){return t.onEscape(e,n)}),this.upKeyBindingDispatcher=new c,this.upKeyBindingDispatcher.set(r.CommonKeybindings.ENTER,this.onEnter.bind(this)),this.upKeyBindingDispatcher.set(r.CommonKeybindings.CTRLCMD_ENTER,this.onEnter.bind(this))}return e.prototype.onMouseDown=function(e,t,n,i){if(void 0===i&&(i="mouse"),this.options.clickBehavior===a.ON_MOUSE_DOWN&&n.leftButton){if(n.target){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(o.findParentWithClass(n.target,"monaco-action-bar","row"))return!1}return this.onLeftClick(e,t,n,i)}return!1},e.prototype.onClick=function(e,t,i){var o=n.isMacintosh;return o&&i.ctrlKey?(i.preventDefault(),i.stopPropagation(),!1):i.middleButton?!1:i.target&&i.target.tagName&&"input"===i.target.tagName.toLowerCase()?!1:this.options.clickBehavior===a.ON_MOUSE_DOWN&&i.leftButton?!1:this.onLeftClick(e,t,i)},e.prototype.onLeftClick=function(e,t,n,o){void 0===o&&(o="mouse");var r={origin:o,originalEvent:n};if(e.getInput()===t)e.clearFocus(r),e.clearSelection(r);else{var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),e.setSelection([t],r),e.setFocus(t,r),e.isExpanded(t)?e.collapse(t).done(null,i.onUnexpectedError):e.expand(t).done(null,i.onUnexpectedError)}return!0},e.prototype.onContextMenu=function(e,t,n){return n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase()?!1:(n&&(n.preventDefault(),n.stopPropagation()),!1)},e.prototype.onTap=function(e,t,n){var i=n.initialTarget;return i&&i.tagName&&"input"===i.tagName.toLowerCase()?!1:this.onLeftClick(e,t,n,"touch")},e.prototype.onKeyDown=function(e,t){return this.onKey(this.downKeyBindingDispatcher,e,t)},e.prototype.onKeyUp=function(e,t){return this.onKey(this.upKeyBindingDispatcher,e,t)},e.prototype.onKey=function(e,t,n){var i=e.dispatch(n.asKeybinding());return i&&i(t,n)?(n.preventDefault(),n.stopPropagation(),!0):!1},e.prototype.onUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPrevious(1,n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onPageUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPreviousPage(n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNext(1,n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onPageDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNextPage(n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onLeft=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var i=e.getFocus();e.collapse(i).done(function(t){i&&!t&&e.focusParent(n)})}return!0},e.prototype.onRight=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var o=e.getFocus();e.expand(o).done(null,i.onUnexpectedError)}return!0},e.prototype.onEnter=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())return!1;var i=e.getFocus();return i&&e.setSelection([i],n),!0},e.prototype.onSpace=function(e,t){if(e.getHighlight())return!1;var n=e.getFocus();return n&&e.toggleExpansion(n),!0},e.prototype.onEscape=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?(e.clearHighlight(n),!0):e.getSelection().length?(e.clearSelection(n),!0):e.getFocus()?(e.clearFocus(n),!0):!1},e}();t.DefaultController=u;var l=function(){function e(){}return e.prototype.getDragURI=function(e,t){return null},e.prototype.onDragStart=function(e,t,n){},e.prototype.onDragOver=function(e,t,n,i){return null},e.prototype.drop=function(e,t,n,i){},e}();t.DefaultDragAndDrop=l;var d=function(){function e(){}return e.prototype.isVisible=function(e,t){return!0},e}();t.DefaultFilter=d;var h=function(){function e(){}return e.prototype.compare=function(e,t,n){return 0},e}();t.DefaultSorter=h;var p=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return null},e}();t.DefaultAccessibilityProvider=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/actionsRenderer",["require","exports","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/events","vs/base/browser/ui/actionbar/actionbar","./treeDefaults","vs/css!./actionsRenderer"],function(e,t,n,i,o,r,s){"use strict";var a=n.$,c=function(e){function t(t){e.call(this),this.actionProvider=t.actionProvider,this.actionRunner=t.actionRunner}return __extends(t,e),t.prototype.getHeight=function(e,t){return this.getContentHeight(e,t)},t.prototype.render=function(e,n,s,c){var u=this;try{i.clearNode(s)}catch(l){if(!/The node to be removed is no longer a child of this node/.test(l.message))throw l}c&&c(e,n);var d,h,p=a(s).addClass("actions"),f=a(".sub-content").appendTo(p);this.actionProvider.hasActions(e,n)?(p.addClass("has-actions"),d=new r.ActionBar(a(".primary-action-bar").appendTo(p),{context:this.getActionContext(e,n),actionItemProvider:function(t){return u.actionProvider.getActionItem(e,n,t)},actionRunner:this.actionRunner}),this.actionProvider.getActions(e,n).then(function(e){d.push(e,{icon:!0,label:!1})}),h=d.addListener2(o.EventType.RUN,function(e){e.error&&u.onError(e.error)})):p.removeClass("has-actions");var m=(c?c[t.CONTENTS_CLEANUP_FN_KEY]:t.NO_OP)||t.NO_OP;m(e,n);var v=this.renderContents(e,n,f.getHTMLElement(),null),g=function(){h&&h.dispose(),d&&d.dispose(),v&&v(e,n)};return g[t.CONTENTS_CLEANUP_FN_KEY]=v,g},t.prototype.getContentHeight=function(e,t){return 20},t.prototype.renderContents=function(e,t,n,i){return null},t.prototype.getActionContext=function(e,t){return null},t.prototype.onError=function(e){},t.prototype.dispose=function(){this.actionProvider=null},t.CONTENTS_CLEANUP_FN_KEY="__$ActionsRenderer.contentCleanupFn",t.NO_OP=function(){},t}(s.LegacyRenderer);t.ActionsRenderer=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/treeView",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/common/diff/diff","vs/base/browser/touch","vs/base/browser/mouseEvent","vs/base/browser/keyboardEvent","./treeDnd","vs/base/common/iterator","vs/base/browser/ui/scrollbar/scrollableElementImpl","vs/base/parts/tree/browser/treeViewModel","vs/base/parts/tree/browser/tree","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";function g(e){var t=e.getAttribute("last-scroll-time");return t?parseInt(t,10):0}function y(e){try{e.parentElement.removeChild(e)}catch(t){}}function _(e,t){return e||t?e&&t?e.accept!==t.accept?!1:e.bubble!==t.bubble?!1:e.effect===t.effect:!1:!0}var b=function(){function e(e){this.context=e,this._cache={"":[]},this.scrollingRow=null}return e.prototype.alloc=function(e){var t=this.cache(e).pop();if(!t){var n=document.createElement("div");n.className="content";var i=document.createElement("div");i.appendChild(n),t={element:i,templateId:e,templateData:this.context.renderer.renderTemplate(this.context.tree,e,n)}}return t},e.prototype.release=function(e,t){var n=g(t.element);if(!n)return y(t.element),void this.cache(e).push(t);if(this.scrollingRow){var i=g(this.scrollingRow.element);if(i>n)return y(t.element),void this.cache(e).push(t);this.scrollingRow.element.parentElement&&(y(this.scrollingRow.element),s.removeClass(this.scrollingRow.element,"scrolling"),this.cache(this.scrollingRow.templateId).push(this.scrollingRow))}this.scrollingRow=t,s.addClass(this.scrollingRow.element,"scrolling")},e.prototype.cache=function(e){return this._cache[e]||(this._cache[e]=[])},e.prototype.garbageCollect=function(){var e=this;this._cache&&Object.keys(this._cache).forEach(function(t){e._cache[t].forEach(function(n){e.context.renderer.disposeTemplate(e.context.tree,t,n.templateData),n.element=null,n.templateData=null}),delete e._cache[t]}),this.scrollingRow&&(this.context.renderer.disposeTemplate(this.context.tree,this.scrollingRow.templateId,this.scrollingRow.templateData),this.scrollingRow=null)},e.prototype.dispose=function(){this.garbageCollect(),this._cache=null,this.context=null},e}();t.RowCache=b;var S=function(){function e(e,t){var n=this;this.context=e,this.model=t,this.id=this.model.id,this.row=null,this.top=0,this.height=t.getHeight(),this._styles={},t.getAllTraits().forEach(function(e){return n._styles[e]=!0}),t.isExpanded()&&this.addClass("expanded")}return Object.defineProperty(e.prototype,"expanded",{set:function(e){e?this.addClass("expanded"):this.removeClass("expanded")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{set:function(e){e?this.addClass("loading"):this.removeClass("loading")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable=e,this.render(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTarget",{set:function(e){e?this.addClass("drop-target"):this.removeClass("drop-target")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.row&&this.row.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateId",{get:function(){return this._templateId||(this._templateId=this.context.renderer.getTemplateId&&this.context.renderer.getTemplateId(this.context.tree,this.model.getElement()))},enumerable:!0,configurable:!0}),e.prototype.addClass=function(e){this._styles[e]=!0,this.render(!0)},e.prototype.removeClass=function(e){delete this._styles[e],this.render(!0)},e.prototype.render=function(e){var t=this;if(void 0===e&&(e=!1),this.model&&this.element){var n=["monaco-tree-row"];if(n.push.apply(n,Object.keys(this._styles)),this.model.hasChildren()&&n.push("has-children"),this.element.className=n.join(" "),this.element.draggable=this.draggable,this.element.style.height=this.height+"px",this.element.setAttribute("role","treeitem"),this.model.hasTrait("focused")){var i=btoa(this.model.id),o=this.context.accessibilityProvider.getAriaLabel(this.context.tree,this.model.getElement());this.element.setAttribute("aria-selected","true"),this.element.setAttribute("id",i),o?this.element.setAttribute("aria-label",o):this.element.setAttribute("aria-labelledby",i)}else this.element.setAttribute("aria-selected","false"),this.element.removeAttribute("id"),this.element.removeAttribute("aria-label"),this.element.removeAttribute("aria-labelledby");this.model.hasChildren()?this.element.setAttribute("aria-expanded",String(this.model.isExpanded())):this.element.removeAttribute("aria-expanded"),this.element.setAttribute("aria-level",String(this.model.getDepth())),this.context.options.paddingOnRow?this.element.style.paddingLeft=this.context.options.twistiePixels+(this.model.getDepth()-1)*this.context.options.indentPixels+"px":(this.element.style.paddingLeft=(this.model.getDepth()-1)*this.context.options.indentPixels+"px",this.row.element.firstElementChild.style.paddingLeft=this.context.options.twistiePixels+"px");var r=this.context.dnd.getDragURI(this.context.tree,this.model.getElement());r!==this.uri&&(this.unbindDragStart&&(this.unbindDragStart.dispose(),this.unbindDragStart=null),r?(this.uri=r,this.draggable=!0,this.unbindDragStart=s.addDisposableListener(this.element,"dragstart",function(e){t.onDragStart(e)})):this.uri=null),e||this.context.renderer.renderElement(this.context.tree,this.model.getElement(),this.templateId,this.row.templateData)}},e.prototype.insertInDOM=function(e,t){if(this.row||(this.row=this.context.cache.alloc(this.templateId),this.element[w.BINDING]=this),!this.element.parentElement){if(null===t)e.appendChild(this.element);else try{e.insertBefore(this.element,t)}catch(n){console.warn("Failed to locate previous tree element"),e.appendChild(this.element)}this.render()}},e.prototype.removeFromDOM=function(){this.row&&(this.unbindDragStart&&(this.unbindDragStart.dispose(),this.unbindDragStart=null),this.uri=null,this.element[w.BINDING]=null,this.context.cache.release(this.templateId,this.row),this.row=null)},e.prototype.dispose=function(){this.row=null,this.model=null},e}();t.ViewItem=S;var E=function(e){function t(t,n,i){e.call(this,t,n),this.row={element:i,templateData:null,templateId:null}}return __extends(t,e),t.prototype.render=function(){if(this.model&&this.element){var e=["monaco-tree-wrapper"];e.push.apply(e,Object.keys(this._styles)),this.model.hasChildren()&&e.push("has-children"),this.element.className=e.join(" ")}},t.prototype.insertInDOM=function(e,t){},t.prototype.removeFromDOM=function(){},t}(S),w=function(e){function t(t,n){var o=this;e.call(this),this.lastClickTimeStamp=0,this.isRefreshing=!1,this.refreshingPreviousChildrenIds={},this.context={dataSource:t.dataSource,renderer:t.renderer,controller:t.controller,dnd:t.dnd,filter:t.filter,sorter:t.sorter,tree:t.tree,accessibilityProvider:t.accessibilityProvider,options:t.options,cache:new b(t)},this.modelListeners=[],this.viewListeners=[],this.dragAndDropListeners=[],this.model=null,this.items={},this.domNode=document.createElement("div"),this.domNode.className="monaco-tree no-focused-item",this.domNode.tabIndex=0,this.domNode.setAttribute("role","tree"),this.context.options.ariaLabel&&this.domNode.setAttribute("aria-label",this.context.options.ariaLabel),this.context.options.alwaysFocused&&s.addClass(this.domNode,"focused"),this.context.options.bare&&s.addClass(this.domNode,"bare"),this.context.options.paddingOnRow||s.addClass(this.domNode,"no-row-padding"),this.wrapper=document.createElement("div"),this.wrapper.className="monaco-tree-wrapper",this.scrollableElement=new p.ScrollableElement(this.wrapper,{forbidTranslate3dUse:!0,scrollable:this,horizontal:"hidden",vertical:t.options.verticalScrollMode||"auto",useShadows:t.options.useShadows,saveLastScrollTimeOnClassName:"monaco-tree-row"}),i.isIE11orEarlier?(this.wrapper.style.msTouchAction="none",this.wrapper.style.msContentZooming="none"):this.wrapperGesture=new c.Gesture(this.wrapper),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-tree-rows";var r=s.trackFocus(this.domNode);r.addFocusListener(function(){return o.onFocus()}),r.addBlurListener(function(){return o.onBlur()}),this.viewListeners.push(r),this.viewListeners.push(s.addDisposableListener(this.domNode,"keydown",function(e){return o.onKeyDown(e)})),this.viewListeners.push(s.addDisposableListener(this.domNode,"keyup",function(e){return o.onKeyUp(e)})),this.viewListeners.push(s.addDisposableListener(this.domNode,"mousedown",function(e){return o.onMouseDown(e)})),this.viewListeners.push(s.addDisposableListener(this.domNode,"mouseup",function(e){return o.onMouseUp(e)})),this.viewListeners.push(s.addDisposableListener(this.wrapper,"click",function(e){return o.onClick(e)})),this.viewListeners.push(s.addDisposableListener(this.domNode,"contextmenu",function(e){return o.onContextMenu(e)})),this.viewListeners.push(s.addDisposableListener(this.wrapper,c.EventType.Tap,function(e){return o.onTap(e)})),this.viewListeners.push(s.addDisposableListener(this.wrapper,c.EventType.Change,function(e){return o.onTouchChange(e)})),i.isIE11orEarlier&&(this.viewListeners.push(s.addDisposableListener(this.wrapper,"MSPointerDown",function(e){return o.onMsPointerDown(e)})),this.viewListeners.push(s.addDisposableListener(this.wrapper,"MSGestureTap",function(e){return o.onMsGestureTap(e)})),this.viewListeners.push(s.addDisposableThrottledListener(this.wrapper,"MSGestureChange",function(e){return o.onThrottledMsGestureChange(e)},function(e,t){t.stopPropagation(),t.preventDefault();var n={translationY:t.translationY,translationX:t.translationX};return e&&(n.translationY+=e.translationY,n.translationX+=e.translationX),n}))),this.viewListeners.push(s.addDisposableListener(window,"dragover",function(e){return o.onDragOver(e)})),this.viewListeners.push(s.addDisposableListener(window,"drop",function(e){return o.onDrop(e)})),this.viewListeners.push(s.addDisposableListener(window,"dragend",function(e){return o.onDragEnd(e)})),this.viewListeners.push(s.addDisposableListener(window,"dragleave",function(e){return o.onDragOver(e)})),this.wrapper.appendChild(this.rowsContainer),this.domNode.appendChild(this.scrollableElement.getDomNode()),n.appendChild(this.domNode),this._scrollTop=0,this._viewHeight=0,this.renderTop=0,this.renderHeight=0,this.didJustPressContextMenuKey=!1,this.currentDropTarget=null,this.currentDropTargets=[],this.shouldInvalidateDropReaction=!1,this.dragAndDropScrollInterval=null,this.dragAndDropScrollTimeout=null,this.onHiddenScrollTop=null,this.onRowsChanged(),this.layout(),this.setupMSGesture()}return __extends(t,e),t.prototype.createViewItem=function(e){return new S(this.context,e)},t.prototype.getHTMLElement=function(){return this.domNode},t.prototype.focus=function(){this.domNode.focus()},t.prototype.isFocused=function(){return document.activeElement===this.domNode},t.prototype.blur=function(){this.domNode.blur()},t.prototype.onVisible=function(){this.scrollTop=this.onHiddenScrollTop,this.onHiddenScrollTop=null,this.scrollableElement.onElementDimensions(),this.scrollableElement.onElementInternalDimensions(),this.setupMSGesture()},t.prototype.setupMSGesture=function(){var e=this;window.MSGesture&&(this.msGesture=new MSGesture,setTimeout(function(){return e.msGesture.target=e.wrapper},100))},t.prototype.onHidden=function(){this.onHiddenScrollTop=this.scrollTop},t.prototype.isTreeVisible=function(){return null===this.onHiddenScrollTop},t.prototype.layout=function(e){this.isTreeVisible()&&(this.viewHeight=e||s.getContentHeight(this.wrapper),this.scrollTop=this.scrollTop,this.scrollableElement.onElementDimensions(),this.scrollableElement.onElementInternalDimensions())},t.prototype.render=function(e,t){var n,i,o=e+t,r=this.scrollTop+this.viewHeight,s=e;s=Math.max(s,0);var a=o,c=0===r?0:r;for(n=this.indexAfter(a)-1,i=this.indexAt(Math.max(c,s));n>=i;n--)this.insertItemInDOM(this.itemAtIndex(n));for(n=Math.min(this.indexAt(this.renderTop),this.indexAfter(a))-1,i=this.indexAt(s);n>=i;n--)this.insertItemInDOM(this.itemAtIndex(n));for(n=this.indexAt(this.renderTop),i=Math.min(this.indexAt(s),this.indexAfter(c));i>n;n++)this.removeItemFromDOM(this.itemAtIndex(n));for(n=Math.max(this.indexAfter(a),this.indexAt(this.renderTop)),i=this.indexAfter(c);i>n;n++)this.removeItemFromDOM(this.itemAtIndex(n));var u=this.itemAtIndex(this.indexAt(s));u&&(this.rowsContainer.style.top=u.top-s+"px"),
this.renderTop=s,this.renderHeight=a-s},t.prototype.setModel=function(e){var t=this;this.releaseModel(),this.model=e,this.modelListeners.push(this.model.addBulkListener(function(e){return t.onModelEvents(e)}))},t.prototype.onModelEvents=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var o=e[n],r=o.getData();switch(o.getType()){case"refreshing":this.onRefreshing();break;case"refreshed":this.onRefreshed();break;case"clearingInput":this.onClearingInput(r);break;case"setInput":this.onSetInput(r);break;case"item:childrenRefreshing":this.onItemChildrenRefreshing(r);break;case"item:childrenRefreshed":this.onItemChildrenRefreshed(r);break;case"item:refresh":t.push(r.item);break;case"item:expanding":this.onItemExpanding(r);break;case"item:expanded":this.onItemExpanded(r);break;case"item:collapsing":this.onItemCollapsing(r);break;case"item:reveal":this.onItemReveal(r);break;case"item:addTrait":this.onItemAddTrait(r);break;case"item:removeTrait":this.onItemRemoveTrait(r);break;case"focus":this.onModelFocusChange()}}t.length>0&&this.onItemsRefresh(t)},t.prototype.onRefreshing=function(){this.isRefreshing=!0},t.prototype.onRefreshed=function(){this.isRefreshing=!1,this.onRowsChanged()},t.prototype.onRowsChanged=function(e){void 0===e&&(e=this.scrollTop),this.isRefreshing||(this.scrollTop=e,this.scrollableElement.onElementInternalDimensions())},t.prototype.focusNextPage=function(e){var t=this,n=this.indexAt(this.scrollTop+this.viewHeight);n=0===n?0:n-1;var i=this.itemAtIndex(n).model.getElement(),o=this.model.getFocus();if(o!==i)this.model.setFocus(i,e);else{var r=this.scrollTop;this.scrollTop+=this.viewHeight,this.scrollTop!==r&&setTimeout(function(){t.focusNextPage(e)},0)}},t.prototype.focusPreviousPage=function(e){var t,n=this;t=0===this.scrollTop?this.indexAt(this.scrollTop):this.indexAfter(this.scrollTop-1);var i=this.itemAtIndex(t).model.getElement(),o=this.model.getFocus();if(o!==i)this.model.setFocus(i,e);else{var r=this.scrollTop;this.scrollTop-=this.viewHeight,this.scrollTop!==r&&setTimeout(function(){n.focusPreviousPage(e)},0)}},Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(e){this.render(this.scrollTop,e),this._viewHeight=e},enumerable:!0,configurable:!0}),t.prototype.getScrollHeight=function(){return this.getTotalHeight()},t.prototype.getScrollWidth=function(){return 0},t.prototype.getScrollLeft=function(){return 0},t.prototype.setScrollLeft=function(e){},Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this._scrollTop},set:function(e){this.setScrollTop(e)},enumerable:!0,configurable:!0}),t.prototype.getScrollTop=function(){return this._scrollTop},t.prototype.setScrollTop=function(e){e=Math.min(e,this.getTotalHeight()-this.viewHeight),e=Math.max(e,0),this.render(e,this.viewHeight),this._scrollTop=e,this.emit("scroll",{vertical:!0,horizontal:!1})},t.prototype.addScrollListener=function(e){return this.addListener2("scroll",e)},t.prototype.getScrollPosition=function(){var e=this.getTotalHeight()-this.viewHeight;return 0>=e?0:this.scrollTop/e},t.prototype.setScrollPosition=function(e){var t=this.getTotalHeight()-this.viewHeight;this.scrollTop=t*e},t.prototype.onClearingInput=function(e){var t=e.item;t&&(this.onRemoveItems(new h.MappedIterator(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onSetInput=function(e){this.context.cache.garbageCollect(),this.inputItem=new E(this.context,e.item,this.wrapper),this.emit("viewItem:create",{item:this.inputItem.model})},t.prototype.onItemChildrenRefreshing=function(e){var n=e.item,i=this.items[n.id];if(i&&(i.loadingPromise=o.TPromise.timeout(t.LOADING_DECORATION_DELAY).then(function(){i.loadingPromise=null,i.loading=!0})),!e.isNested){for(var r,s=[],a=n.getNavigator();r=a.next();)s.push(r.id);this.refreshingPreviousChildrenIds[n.id]=s}},t.prototype.onItemChildrenRefreshed=function(e){var t=this,n=e.item,i=this.items[n.id];if(i&&(i.loadingPromise&&(i.loadingPromise.cancel(),i.loadingPromise=null),i.loading=!1),!e.isNested){for(var o,r=this.refreshingPreviousChildrenIds[n.id],s=[],c=n.getNavigator();o=c.next();)s.push(o);var u=Math.abs(r.length-s.length)>1e3,l=void 0,d=void 0;if(!u){var p=new a.LcsDiff({getLength:function(){return r.length},getElementHash:function(e){return r[e]}},{getLength:function(){return s.length},getElementHash:function(e){return s[e].id}},null);l=p.ComputeDiff(),d=l.some(function(e){if(e.modifiedLength>0)for(var n=e.modifiedStart,i=e.modifiedStart+e.modifiedLength;i>n;n++)if(t.items.hasOwnProperty(s[n].id))return!0;return!1})}if(!u&&!d&&l.length<50)for(var f=0,m=l.length;m>f;f++){var v=l[f];if(v.originalLength>0&&this.onRemoveItems(new h.ArrayIterator(r,v.originalStart,v.originalStart+v.originalLength)),v.modifiedLength>0){var g=s[v.modifiedStart-1]||n;g=g.getDepth()>0?g:null,this.onInsertItems(new h.ArrayIterator(s,v.modifiedStart,v.modifiedStart+v.modifiedLength),g?g.id:null)}}else(u||l.length)&&(this.onRemoveItems(new h.ArrayIterator(r)),this.onInsertItems(new h.ArrayIterator(s)));(u||l.length)&&this.onRowsChanged()}},t.prototype.onItemsRefresh=function(e){var t=this;this.onRefreshItemSet(e.filter(function(e){return t.items.hasOwnProperty(e.id)})),this.onRowsChanged()},t.prototype.onItemExpanding=function(e){var t=this.items[e.item.id];t&&(t.expanded=!0)},t.prototype.onItemExpanded=function(e){var t=e.item,n=this.items[t.id];if(n){n.expanded=!0;var i=this.onInsertItems(t.getNavigator(),t.id),o=this.scrollTop;n.top+n.height<=this.scrollTop&&(o+=i),this.onRowsChanged(o)}},t.prototype.onItemCollapsing=function(e){var t=e.item,n=this.items[t.id];n&&(n.expanded=!1,this.onRemoveItems(new h.MappedIterator(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onItemReveal=function(e){var t=e.item,n=e.relativeTop,i=this.items[t.id];if(i)if(null!==n){n=0>n?0:n,n=n>1?1:n;var o=i.height-this.viewHeight;this.scrollTop=o*n+i.top}else{var r=i.top+i.height,s=this.scrollTop+this.viewHeight;i.top<this.scrollTop?this.scrollTop=i.top:r>=s&&(this.scrollTop=r-this.viewHeight)}},t.prototype.onItemAddTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.addClass(n),"highlighted"===n&&(s.addClass(this.domNode,n),i&&(this.highlightedItemWasDraggable=!!i.draggable,i.draggable&&(i.draggable=!1)))},t.prototype.onItemRemoveTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.removeClass(n),"highlighted"===n&&(s.removeClass(this.domNode,n),this.highlightedItemWasDraggable&&(i.draggable=!0),this.highlightedItemWasDraggable=!1)},t.prototype.onModelFocusChange=function(){var e=this.model&&this.model.getFocus();s.toggleClass(this.domNode,"no-focused-item",!e),e?this.domNode.setAttribute("aria-activedescendant",btoa(this.context.dataSource.getId(this.context.tree,e))):this.domNode.removeAttribute("aria-activedescendant")},t.prototype.onInsertItem=function(e){var t=this;e.onDragStart=function(n){t.onDragStart(e,n)},e.needsRender=!0,this.refreshViewItem(e),this.items[e.id]=e},t.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1),e.needsRender=e.needsRender||t,this.refreshViewItem(e)},t.prototype.onRemoveItem=function(e){this.removeItemFromDOM(e),e.dispose(),this.emit("viewItem:dispose",{item:this.inputItem.model}),delete this.items[e.id]},t.prototype.refreshViewItem=function(e){e.render(),this.shouldBeRendered(e)?this.insertItemInDOM(e):this.removeItemFromDOM(e)},t.prototype.onClick=function(e){if(!this.lastPointerType||"mouse"===this.lastPointerType){var t=new u.StandardMouseEvent(e),n=this.getItemAround(t.target);n&&(i.isIE10orLater&&Date.now()-this.lastClickTimeStamp<300&&(t.detail=2),this.lastClickTimeStamp=Date.now(),this.context.controller.onClick(this.context.tree,n.model.getElement(),t))}},t.prototype.onMouseDown=function(e){if(this.didJustPressContextMenuKey=!1,this.context.controller.onMouseDown&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new u.StandardMouseEvent(e);if(!(t.ctrlKey&&n.isNative&&n.isMacintosh)){var i=this.getItemAround(t.target);i&&this.context.controller.onMouseDown(this.context.tree,i.model.getElement(),t)}}},t.prototype.onMouseUp=function(e){if(this.context.controller.onMouseUp&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new u.StandardMouseEvent(e);if(!(t.ctrlKey&&n.isNative&&n.isMacintosh)){var i=this.getItemAround(t.target);i&&this.context.controller.onMouseUp(this.context.tree,i.model.getElement(),t)}}},t.prototype.onTap=function(e){var t=this.getItemAround(e.initialTarget);t&&this.context.controller.onTap(this.context.tree,t.model.getElement(),e)},t.prototype.onTouchChange=function(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY},t.prototype.onContextMenu=function(e){var t,n;if(e instanceof KeyboardEvent||this.didJustPressContextMenuKey){this.didJustPressContextMenuKey=!1;var i=new l.StandardKeyboardEvent(e);if(n=this.model.getFocus(),!n)return;var o=this.context.dataSource.getId(this.context.tree,n),r=this.items[o],a=s.getDomNodePosition(r.element);t=new m.KeyboardContextMenuEvent(a.left+a.width,a.top,i)}else{var c=new u.StandardMouseEvent(e),d=this.getItemAround(c.target);if(!d)return;n=d.model.getElement(),t=new m.MouseContextMenuEvent(c)}this.context.controller.onContextMenu(this.context.tree,n,t)},t.prototype.onKeyDown=function(e){var t=new l.StandardKeyboardEvent(e);this.didJustPressContextMenuKey=t.keyCode===v.KeyCode.ContextMenu||t.shiftKey&&t.keyCode===v.KeyCode.F10,this.didJustPressContextMenuKey&&(t.preventDefault(),t.stopPropagation()),t.target&&t.target.tagName&&"input"===t.target.tagName.toLowerCase()||this.context.controller.onKeyDown(this.context.tree,t)},t.prototype.onKeyUp=function(e){this.didJustPressContextMenuKey&&this.onContextMenu(e),this.didJustPressContextMenuKey=!1,this.context.controller.onKeyUp(this.context.tree,new l.StandardKeyboardEvent(e))},t.prototype.onDragStart=function(e,n){if(!this.model.getHighlight()){var i,o=e.model.getElement(),r=this.model.getSelection();if(i=r.indexOf(o)>-1?r:[o],n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData("URL",e.uri),n.dataTransfer.setDragImage)if(1===i.length&&e.element)n.dataTransfer.setDragImage(e.element,n.offsetX||6,n.offsetY||6);else if(i.length>1){var s=document.createElement("div");s.className="monaco-tree-drag-image",s.textContent=""+i.length,document.body.appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(function(){return document.body.removeChild(s)},0)}this.currentDragAndDropData=new d.ElementsDragAndDropData(i),t.currentExternalDragAndDropData=new d.ExternalElementsDragAndDropData(i),this.context.dnd.onDragStart(this.context.tree,this.currentDragAndDropData,new u.DragMouseEvent(n))}},t.prototype.setupDragAndDropScrollInterval=function(){var e=this,t=s.getTopLeftOffset(this.wrapper).top;this.dragAndDropScrollInterval||(this.dragAndDropScrollInterval=window.setInterval(function(){if(void 0!==e.dragAndDropMouseY){var n=e.dragAndDropMouseY-t,i=0,o=e.viewHeight-35;35>n?i=Math.max(-14,.2*(n-35)):n>o&&(i=Math.min(14,.2*(n-o))),e.scrollTop+=i}},10),this.cancelDragAndDropScrollTimeout(),this.dragAndDropScrollTimeout=window.setTimeout(function(){e.cancelDragAndDropScrollInterval(),e.dragAndDropScrollTimeout=null},1e3))},t.prototype.cancelDragAndDropScrollInterval=function(){this.dragAndDropScrollInterval&&(window.clearInterval(this.dragAndDropScrollInterval),this.dragAndDropScrollInterval=null),this.cancelDragAndDropScrollTimeout()},t.prototype.cancelDragAndDropScrollTimeout=function(){this.dragAndDropScrollTimeout&&(window.clearTimeout(this.dragAndDropScrollTimeout),this.dragAndDropScrollTimeout=null)},t.prototype.onDragOver=function(e){var n=this,i=new u.DragMouseEvent(e),r=this.getItemAround(i.target);if(!r)return this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null)),this.cancelDragAndDropScrollInterval(),this.currentDropTarget=null,this.currentDropElement=null,this.dragAndDropMouseY=null,!1;if(this.setupDragAndDropScrollInterval(),this.dragAndDropMouseY=i.posy,!this.currentDragAndDropData)if(t.currentExternalDragAndDropData)this.currentDragAndDropData=t.currentExternalDragAndDropData;else{if(!i.dataTransfer.types)return!1;this.currentDragAndDropData=new d.DesktopDragAndDropData}this.currentDragAndDropData.update(i);var s,a,c=r.model;do{if(s=c?c.getElement():this.model.getInput(),a=this.context.dnd.onDragOver(this.context.tree,this.currentDragAndDropData,s,i),!a||a.bubble!==m.DragOverBubble.BUBBLE_UP)break;c=c&&c.parent}while(c);if(!c)return this.currentDropElement=null,!1;var l=a&&a.accept;l?(this.currentDropElement=c.getElement(),i.preventDefault(),i.dataTransfer.dropEffect=a.effect===m.DragOverEffect.COPY?"copy":"move"):this.currentDropElement=null;var h=c.id===this.inputItem.id?this.inputItem:this.items[c.id];if((this.shouldInvalidateDropReaction||this.currentDropTarget!==h||!_(this.currentDropElementReaction,a))&&(this.shouldInvalidateDropReaction=!1,this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null)),this.currentDropTarget=h,this.currentDropElementReaction=a,l)){if(this.currentDropTarget&&(this.currentDropTarget.dropTarget=!0,this.currentDropTargets.push(this.currentDropTarget)),a.bubble===m.DragOverBubble.BUBBLE_DOWN)for(var p,f=c.getNavigator();p=f.next();)r=this.items[p.id],r&&(r.dropTarget=!0,this.currentDropTargets.push(r));this.currentDropPromise=o.TPromise.timeout(500).then(function(){return n.context.tree.expand(n.currentDropElement).then(function(){n.shouldInvalidateDropReaction=!0})})}return!0},t.prototype.onDrop=function(e){if(this.currentDropElement){var t=new u.DragMouseEvent(e);t.preventDefault(),this.currentDragAndDropData.update(t),this.context.dnd.drop(this.context.tree,this.currentDragAndDropData,this.currentDropElement,t),this.onDragEnd(e)}this.cancelDragAndDropScrollInterval()},t.prototype.onDragEnd=function(e){this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[]),this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null),this.cancelDragAndDropScrollInterval(),this.currentDragAndDropData=null,t.currentExternalDragAndDropData=null,this.currentDropElement=null,this.currentDropTarget=null,this.dragAndDropMouseY=null},t.prototype.onFocus=function(){this.context.options.alwaysFocused||s.addClass(this.domNode,"focused")},t.prototype.onBlur=function(){this.context.options.alwaysFocused||s.removeClass(this.domNode,"focused"),this.domNode.removeAttribute("aria-activedescendant")},t.prototype.onMsPointerDown=function(e){if(this.msGesture){var t=e.pointerType;return t===(e.MSPOINTER_TYPE_MOUSE||"mouse")?void(this.lastPointerType="mouse"):void(t===(e.MSPOINTER_TYPE_TOUCH||"touch")&&(this.lastPointerType="touch",e.stopPropagation(),e.preventDefault(),this.msGesture.addPointer(e.pointerId)))}},t.prototype.onThrottledMsGestureChange=function(e){this.scrollTop-=e.translationY},t.prototype.onMsGestureTap=function(e){e.initialTarget=document.elementFromPoint(e.clientX,e.clientY),this.onTap(e)},t.prototype.insertItemInDOM=function(e){var t=null,n=this.itemAfter(e);n&&n.element&&(t=n.element),e.insertInDOM(this.rowsContainer,t)},t.prototype.removeItemFromDOM=function(e){e.removeFromDOM()},t.prototype.shouldBeRendered=function(e){return e.top<this.renderTop+this.renderHeight&&e.top+e.height>this.renderTop},t.prototype.getItemAround=function(e){var n=this.inputItem;do{if(e[t.BINDING]&&(n=e[t.BINDING]),e===this.wrapper||e===this.domNode)return n;if(e===document.body)return null}while(e=e.parentElement)},t.prototype.releaseModel=function(){if(this.model){for(;this.modelListeners.length;)this.modelListeners.pop()();this.model=null}},t.prototype.dispose=function(){this.scrollableElement.dispose(),this.releaseModel(),this.modelListeners=null,this.viewListeners=r.disposeAll(this.viewListeners),this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.domNode=null,this.wrapperGesture&&(this.wrapperGesture.dispose(),this.wrapperGesture=null),this.context.cache&&(this.context.cache.dispose(),this.context.cache=null),e.prototype.dispose.call(this)},t.BINDING="monaco-tree-row",t.LOADING_DECORATION_DELAY=800,t.currentExternalDragAndDropData=null,t}(f.HeightMap);t.TreeView=w});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/treeImpl",["require","exports","vs/base/parts/tree/browser/treeDefaults","vs/base/common/eventEmitter","vs/base/parts/tree/browser/treeModel","./treeView","vs/base/common/iterator","vs/css!./tree"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t,i){if(void 0===i&&(i={}),this.tree=e,this.configuration=t,this.options=i,!t.dataSource)throw new Error("You must provide a Data Source to the tree.");this.dataSource=t.dataSource,this.renderer=t.renderer||new n.LegacyRenderer,this.controller=t.controller||new n.DefaultController,this.dnd=t.dnd||new n.DefaultDragAndDrop,this.filter=t.filter||new n.DefaultFilter,this.sorter=t.sorter||null,this.accessibilityProvider=t.accessibilityProvider||new n.DefaultAccessibilityProvider}return e}();t.TreeContext=a;var c=function(e){function t(t,n,i){void 0===i&&(i={}),e.call(this),this.container=t,this.configuration=n,this.options=i,this.options.twistiePixels="number"==typeof this.options.twistiePixels?this.options.twistiePixels:32,this.options.indentPixels="number"==typeof this.options.indentPixels?this.options.indentPixels:12,this.options.alwaysFocused=this.options.alwaysFocused===!0,this.options.bare=this.options.bare===!0,this.options.useShadows=this.options.useShadows!==!1,this.options.paddingOnRow=this.options.paddingOnRow!==!1,this.context=new a(this,n,i),this.model=new o.TreeModel(this.context),this.view=new r.TreeView(this.context,this.container),this.view.setModel(this.model),this.addEmitter(this.model),this.addEmitter(this.view)}return __extends(t,e),t.prototype.getHTMLElement=function(){return this.view.getHTMLElement()},t.prototype.layout=function(e){this.view.layout(e)},t.prototype.DOMFocus=function(){this.view.focus()},t.prototype.isDOMFocused=function(){return this.view.isFocused()},t.prototype.DOMBlur=function(){this.view.blur()},t.prototype.onVisible=function(){this.view.onVisible()},t.prototype.onHidden=function(){this.view.onHidden()},t.prototype.setInput=function(e){return this.model.setInput(e)},t.prototype.getInput=function(){return this.model.getInput()},t.prototype.refresh=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),this.model.refresh(e,t)},t.prototype.refreshAll=function(e,t){return void 0===t&&(t=!0),this.model.refreshAll(e,t)},t.prototype.expand=function(e){return this.model.expand(e)},t.prototype.expandAll=function(e){return this.model.expandAll(e)},t.prototype.collapse=function(e,t){return void 0===t&&(t=!1),this.model.collapse(e)},t.prototype.collapseAll=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.model.collapseAll(e,t)},t.prototype.toggleExpansion=function(e){return this.model.toggleExpansion(e)},t.prototype.toggleExpansionAll=function(e){return this.model.toggleExpansionAll(e)},t.prototype.isExpanded=function(e){return this.model.isExpanded(e)},t.prototype.getExpandedElements=function(){return this.model.getExpandedElements()},t.prototype.reveal=function(e,t){return void 0===t&&(t=null),this.model.reveal(e,t)},t.prototype.getScrollPosition=function(){return this.view.getScrollPosition()},t.prototype.setScrollPosition=function(e){this.view.setScrollPosition(e)},t.prototype.getContentHeight=function(){return this.view.getTotalHeight()},t.prototype.setHighlight=function(e,t){this.model.setHighlight(e,t)},t.prototype.getHighlight=function(){return this.model.getHighlight()},t.prototype.isHighlighted=function(e){return this.model.isFocused(e)},t.prototype.clearHighlight=function(e){this.model.setHighlight(null,e)},t.prototype.select=function(e,t){this.model.select(e,t)},t.prototype.selectRange=function(e,t,n){this.model.selectRange(e,t,n)},t.prototype.deselectRange=function(e,t,n){this.model.deselectRange(e,t,n)},t.prototype.selectAll=function(e,t){this.model.selectAll(e,t)},t.prototype.deselect=function(e,t){this.model.deselect(e,t)},t.prototype.deselectAll=function(e,t){this.model.deselectAll(e,t)},t.prototype.setSelection=function(e,t){this.model.setSelection(e,t)},t.prototype.toggleSelection=function(e,t){this.model.toggleSelection(e,t)},t.prototype.isSelected=function(e){return this.model.isSelected(e)},t.prototype.getSelection=function(){return this.model.getSelection()},t.prototype.clearSelection=function(e){this.model.setSelection([],e)},t.prototype.selectNext=function(e,t,n){this.model.selectNext(e,t,n)},t.prototype.selectPrevious=function(e,t,n){this.model.selectPrevious(e,t,n)},t.prototype.selectParent=function(e,t){this.model.selectParent(e,t)},t.prototype.setFocus=function(e,t){this.model.setFocus(e,t)},t.prototype.isFocused=function(e){return this.model.isFocused(e)},t.prototype.getFocus=function(){return this.model.getFocus()},t.prototype.focusNext=function(e,t){this.model.focusNext(e,t)},t.prototype.focusPrevious=function(e,t){this.model.focusPrevious(e,t)},t.prototype.focusParent=function(e){this.model.focusParent(e)},t.prototype.focusFirst=function(e){this.model.focusFirst(e)},t.prototype.focusNth=function(e,t){this.model.focusNth(e,t)},t.prototype.focusLast=function(e){this.model.focusLast(e)},t.prototype.focusNextPage=function(e){this.view.focusNextPage(e)},t.prototype.focusPreviousPage=function(e){this.view.focusPreviousPage(e)},t.prototype.clearFocus=function(e){this.model.setFocus(null,e)},t.prototype.addTraits=function(e,t){this.model.addTraits(e,t)},t.prototype.removeTraits=function(e,t){this.model.removeTraits(e,t)},t.prototype.toggleTrait=function(e,t){this.model.hasTrait(e,t)?this.model.removeTraits(e,[t]):this.model.addTraits(e,[t])},t.prototype.hasTrait=function(e,t){return this.model.hasTrait(e,t)},t.prototype.getNavigator=function(){return new s.MappedNavigator(this.model.getNavigator(),function(e){return e&&e.getElement()})},t.prototype.dispose=function(){null!==this.model&&(this.model.dispose(),this.model=null),null!==this.view&&(this.view.dispose(),this.view=null),e.prototype.dispose.call(this)},t}(i.EventEmitter);t.Tree=c}),define("vs/base/worker/defaultWorkerFactory",["require","exports","vs/base/common/flags","vs/base/common/lifecycle","vs/base/browser/dom"],function(e,t,n,i,o){"use strict";function r(t,n){return e.toUrl("./"+t+"?"+encodeURIComponent(n))}var s=n.getCrossOriginWorkerScriptUrl||r,a=function(){function e(e,t,n,i){this.id=t,this.worker=new Worker(s("workerMain.js",n)),this.postMessage(e),this.worker.onmessage=function(e){i(e.data)}}return e.prototype.getId=function(){return this.id},e.prototype.postMessage=function(e){this.worker.postMessage(e)},e.prototype.dispose=function(){this.worker.terminate(),this.worker=null},e}(),c=function(){function t(t,n,i){var r=this;this.id=n,this._listeners=[],this.loaded=!1,this.beforeLoadMessages=[],this.postMessage(t),this.iframe=document.createElement("iframe"),this.iframe.id=this.iframeId(),this.iframe.src=e.toUrl("./workerMainCompatibility.html"),this.iframe.frameborder=this.iframe.height=this.iframe.width="0",this.iframe.style.display="none",this._listeners.push(o.addDisposableListener(this.iframe,"load",function(){return r.onLoaded()})),this.onMessage=function(e){i(e.data)},this._listeners.push(o.addDisposableListener(window,"message",this.onMessage)),document.body.appendChild(this.iframe)}return t.prototype.dispose=function(){this._listeners=i.disposeAll(this._listeners),window.removeEventListener("message",this.onMessage),window.frames[this.iframeId()].close()},t.prototype.iframeId=function(){return"worker_iframe_"+this.id},t.prototype.onLoaded=function(){for(this.loaded=!0;this.beforeLoadMessages.length>0;)this.postMessage(this.beforeLoadMessages.shift())},t.prototype.getId=function(){return this.id},t.prototype.postMessage=function(e){if(this.loaded===!0){var t=window.frames[this.iframeId()];t.postMessage?t.postMessage(e,"*"):t.contentWindow.postMessage(e,"*")}else this.beforeLoadMessages.push(e)},t}(),u=function(){function e(){}return e.prototype.create=function(t,n){var i=++e.LAST_WORKER_ID;return"undefined"!=typeof a?new a(t,i,"service"+i,n):new c(t,i,n)},e.LAST_WORKER_ID=0,e}();t.DefaultWorkerFactory=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/mouseHandler",["require","exports","vs/base/common/lifecycle","vs/base/common/platform","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/globalMouseMoveMonitor","vs/base/browser/mouseEvent","vs/editor/common/core/position","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/controller/mouseTarget","vs/base/common/async"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";function f(e){return function(t,n){var i=new a.StandardMouseEvent(n),o=!1;return e&&(o=e.mouseTargetIsWidget(i)),o||i.preventDefault(),i}}var m=function(e){function t(t,n){var i=this;e.call(this),this._destination=t,this._condition=n,this._retryTimer=this._register(new p.TimeoutTimer),this.handler=function(e){return i._handle(e)}}return __extends(t,e),t.prototype.dispose=function(){this._retryValue=null,e.prototype.dispose.call(this)},t.prototype._handle=function(e){var t=this;this._condition()?(this._retryTimer.cancel(),this._retryValue=null,this._destination(e)):(this._retryValue=e,this._retryTimer.setIfNotSet(function(){var e=t._retryValue;t._retryValue=null,t._handle(e)},10))},t}(n.Disposable),v=function(){function e(e,t){this.position=e,this.mouseColumn=t}return e}(),g=function(e){function t(n,i,o){var s=this;e.call(this),this.context=n,this.viewController=i,this.viewHelper=o,this.mouseTargetFactory=new h.MouseTargetFactory(this.context,o),this.listenersToRemove=[],this._mouseDownOperation=new y(this.context,this.viewController,this.viewHelper,function(e,t){return s._createMouseTarget(e,t)},function(e){return s._getMouseColumn(e)}),this.toDispose=[],this.lastMouseLeaveTime=-1,this.listenersToRemove.push(r.addDisposableListener(this.viewHelper.viewDomNode,"contextmenu",function(e){return s._onContextMenu(e,!0)})),this._mouseMoveEventHandler=new m(function(e){return s._onMouseMove(e)},function(){return!s.viewHelper.isDirty()}),this.toDispose.push(this._mouseMoveEventHandler),this.listenersToRemove.push(r.addDisposableThrottledListener(this.viewHelper.viewDomNode,"mousemove",this._mouseMoveEventHandler.handler,f(this.mouseTargetFactory),t.MOUSE_MOVE_MINIMUM_TIME)),this.listenersToRemove.push(r.addDisposableListener(this.viewHelper.viewDomNode,"mouseup",function(e){return s._onMouseUp(e)})),this.listenersToRemove.push(r.addDisposableNonBubblingMouseOutListener(this.viewHelper.viewDomNode,function(e){return s._onMouseLeave(e)})),this.listenersToRemove.push(r.addDisposableListener(this.viewHelper.viewDomNode,"mousedown",function(e){return s._onMouseDown(e)})),this.context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.context.removeEventHandler(this),this.listenersToRemove=n.disposeAll(this.listenersToRemove),this.toDispose=n.disposeAll(this.toDispose),this._mouseDownOperation.dispose()},t.prototype.onLayoutChanged=function(e){return this._layoutInfo=e,!1},t.prototype.onScrollChanged=function(e){return this._mouseDownOperation.onScrollChanged(),!1},t.prototype.onCursorSelectionChanged=function(e){return this._mouseDownOperation.onCursorSelectionChanged(e),!1},t.prototype._createMouseTarget=function(e,t){var n=r.getDomNodePosition(this.viewHelper.viewDomNode);return this.mouseTargetFactory.createMouseTarget(this._layoutInfo,n,e,t)},t.prototype._getMouseColumn=function(e){var t=r.getDomNodePosition(this.viewHelper.viewDomNode);return this.mouseTargetFactory.getMouseColumn(this._layoutInfo,t,e)},t.prototype._onContextMenu=function(e,t){var n=new a.StandardMouseEvent(e),i=this._createMouseTarget(n,t),o={event:n,target:i};this.viewController.emitContextMenu(o)},t.prototype._onMouseMove=function(e){if(!this._mouseDownOperation.isActive()){var t=e.timestamp;if(!(t<this.lastMouseLeaveTime)){var n=this._createMouseTarget(e,!0),i={event:e,target:n};this.viewController.emitMouseMove(i)}}},t.prototype._onMouseLeave=function(e){this.lastMouseLeaveTime=(new Date).getTime();var t={event:new a.StandardMouseEvent(e),target:null};this.viewController.emitMouseLeave(t)},t.prototype._onMouseUp=function(e){var t=new a.StandardMouseEvent(e),n=this._createMouseTarget(t,!0),i={event:t,target:n};this.viewController.emitMouseUp(i)},t.prototype._onMouseDown=function(e){var t=this,n=new a.StandardMouseEvent(e),r=this._createMouseTarget(n,!0),s=r.type===l.MouseTargetType.CONTENT_TEXT||r.type===l.MouseTargetType.CONTENT_EMPTY,c=r.type===l.MouseTargetType.GUTTER_GLYPH_MARGIN||r.type===l.MouseTargetType.GUTTER_LINE_NUMBERS||r.type===l.MouseTargetType.GUTTER_LINE_DECORATIONS,u=r.type===l.MouseTargetType.GUTTER_LINE_NUMBERS,d=this.context.configuration.editor.selectOnLineNumbers,h=r.type===l.MouseTargetType.CONTENT_VIEW_ZONE||r.type===l.MouseTargetType.GUTTER_VIEW_ZONE,p=n.leftButton;if(i.isMacintosh&&n.ctrlKey&&(p=!1),p&&(s||u&&d))o.isIE11orEarlier?n.browserEvent.fromElement?(n.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()}):(n.preventDefault(),this.viewHelper.focusTextArea()),this._mouseDownOperation.start(r.type,n);else if(c)n.preventDefault();else if(h){var f=r.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&n.preventDefault()}var m={event:n,target:r};this.viewController.emitMouseDown(m)},t.MOUSE_MOVE_MINIMUM_TIME=100,t}(d.ViewEventHandler);t.MouseHandler=g;var y=function(e){function t(t,n,i,o,r){var a=this;e.call(this),this._context=t,this._viewController=n,this._viewHelper=i,this._createMouseTarget=o,this._getMouseColumn=r,this._currentSelection=u.Selection.createSelection(1,1,1,1),this._mouseState=new _,this._onScrollTimeout=this._register(new p.TimeoutTimer),this._isActive=!1,this._lastMouseEvent=null,this._mouseMoveMonitor=this._register(new s.GlobalMouseMoveMonitor),this._mouseDownThenMoveEventHandler=this._register(new m(function(e){return a._onMouseDownThenMove(e)},function(){return!a._viewHelper.isDirty()}))}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.isActive=function(){return this._isActive},t.prototype._onMouseDownThenMove=function(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);var t=this._findMousePosition(e,!0);t&&this._dispatchMouse(t,!0)},t.prototype.start=function(e,t){var n=this;this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===l.MouseTargetType.GUTTER_LINE_NUMBERS),this._mouseState.setModifiers(t);var i=this._findMousePosition(t,!0);i&&(this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(f(null),this._mouseDownThenMoveEventHandler.handler,function(){return n._stop()})))},t.prototype._stop=function(){this._isActive=!1,this._onScrollTimeout.cancel()},t.prototype.onScrollChanged=function(){var e=this;this._isActive&&this._onScrollTimeout.setIfNotSet(function(){var t=e._findMousePosition(e._lastMouseEvent,!1);t&&e._dispatchMouse(t,!0)},10)},t.prototype.onCursorSelectionChanged=function(e){this._currentSelection=e.selection},t.prototype._getPositionOutsideEditor=function(e){
var t=r.getDomNodePosition(this._viewHelper.viewDomNode),n=this._getMouseColumn(e);if(e.posy<t.top){var i=this._viewHelper.getLineNumberAtVerticalOffset(Math.max(this._viewHelper.getScrollTop()-(t.top-e.posy),0));return new v(new c.Position(i,1),n)}if(e.posy>t.top+t.height){var o=this._viewHelper.getLineNumberAtVerticalOffset(this._viewHelper.getScrollTop()+(e.posy-t.top));return new v(new c.Position(o,this._context.model.getLineMaxColumn(o)),n)}var s=this._viewHelper.getLineNumberAtVerticalOffset(this._viewHelper.getScrollTop()+(e.posy-t.top));return e.posx<t.left?new v(new c.Position(s,1),n):e.posx>t.left+t.width?new v(new c.Position(s,this._context.model.getLineMaxColumn(s)),n):null},t.prototype._findMousePosition=function(e,t){var n=this._getPositionOutsideEditor(e);if(n)return n;var i=this._createMouseTarget(e,t),o=i.position;if(!o)return null;if(i.type===l.MouseTargetType.CONTENT_VIEW_ZONE||i.type===l.MouseTargetType.GUTTER_VIEW_ZONE){var r=new c.Position(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),s=i.detail,a=s.positionBefore,u=s.positionAfter;if(a&&u)return a.isBefore(r)?new v(a,i.mouseColumn):new v(u,i.mouseColumn)}return new v(o,i.mouseColumn)},t.prototype._dispatchMouse=function(e,t){this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey})},t}(n.Disposable),_=function(){function e(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0}return Object.defineProperty(e.prototype,"altKey",{get:function(){return this._altKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this._ctrlKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metaKey",{get:function(){return this._metaKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this._shiftKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startedOnLineNumbers",{get:function(){return this._startedOnLineNumbers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._lastMouseDownCount},enumerable:!0,configurable:!0}),e.prototype.setModifiers=function(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey},e.prototype.setStartedOnLineNumbers=function(e){this._startedOnLineNumbers=e},e.prototype.trySetCount=function(t,n){var i=(new Date).getTime();i-this._lastSetMouseDownCountTime>e.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=i,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(n)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=n,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)},e.CLEAR_MOUSE_DOWN_COUNT_TIME=400,e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/pointerHandler",["require","exports","vs/base/browser/dom","vs/base/browser/mouseEvent","vs/base/browser/touch","vs/editor/browser/controller/mouseHandler"],function(e,t,n,i,o,r){"use strict";var s=function(e,t){var n={translationY:t.translationY,translationX:t.translationX};return e&&(n.translationY+=e.translationY,n.translationX+=e.translationX),n},a=function(e){function t(t,i,o){var r=this;e.call(this,t,i,o),this.viewHelper.linesContentDomNode.style.msTouchAction="none",this.viewHelper.linesContentDomNode.style.msContentZooming="none",this._installGestureHandlerTimeout=window.setTimeout(function(){if(r._installGestureHandlerTimeout=-1,window.MSGesture){var e=new MSGesture,t=new MSGesture;e.target=r.viewHelper.linesContentDomNode,t.target=r.viewHelper.linesContentDomNode,r.viewHelper.linesContentDomNode.addEventListener("MSPointerDown",function(n){var i=n.pointerType;return i===(n.MSPOINTER_TYPE_MOUSE||"mouse")?void(r._lastPointerType="mouse"):void(i===(n.MSPOINTER_TYPE_TOUCH||"touch")?(r._lastPointerType="touch",e.addPointer(n.pointerId)):(r._lastPointerType="pen",t.addPointer(n.pointerId)))}),r.listenersToRemove.push(n.addDisposableThrottledListener(r.viewHelper.linesContentDomNode,"MSGestureChange",function(e){return r._onGestureChange(e)},s)),r.listenersToRemove.push(n.addDisposableListener(r.viewHelper.linesContentDomNode,"MSGestureTap",function(e){return r._onCaptureGestureTap(e)},!0))}},100),this._lastPointerType="mouse"}return __extends(t,e),t.prototype._onMouseDown=function(t){"mouse"===this._lastPointerType&&e.prototype._onMouseDown.call(this,t)},t.prototype._onCaptureGestureTap=function(e){var t=this,n=new i.StandardMouseEvent(e),o=this._createMouseTarget(n,!1);o.position&&this.viewController.moveTo("mouse",o.position),n.browserEvent.fromElement?(n.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()})},t.prototype._onGestureChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),e.prototype.dispose.call(this)},t}(r.MouseHandler),c=function(e){function t(t,i,o){var r=this;e.call(this,t,i,o),this.viewHelper.linesContentDomNode.style.touchAction="none",this._installGestureHandlerTimeout=window.setTimeout(function(){if(r._installGestureHandlerTimeout=-1,window.MSGesture){var e=new MSGesture,t=new MSGesture;e.target=r.viewHelper.linesContentDomNode,t.target=r.viewHelper.linesContentDomNode,r.viewHelper.linesContentDomNode.addEventListener("pointerdown",function(n){var i=n.pointerType;return"mouse"===i?void(r._lastPointerType="mouse"):void("touch"===i?(r._lastPointerType="touch",e.addPointer(n.pointerId)):(r._lastPointerType="pen",t.addPointer(n.pointerId)))}),r.listenersToRemove.push(n.addDisposableThrottledListener(r.viewHelper.linesContentDomNode,"MSGestureChange",function(e){return r._onGestureChange(e)},s)),r.listenersToRemove.push(n.addDisposableListener(r.viewHelper.linesContentDomNode,"MSGestureTap",function(e){return r._onCaptureGestureTap(e)},!0))}},100),this._lastPointerType="mouse"}return __extends(t,e),t.prototype._onMouseDown=function(t){"mouse"===this._lastPointerType&&e.prototype._onMouseDown.call(this,t)},t.prototype._onCaptureGestureTap=function(e){var t=this,n=new i.StandardMouseEvent(e),o=this._createMouseTarget(n,!1);o.position&&this.viewController.moveTo("mouse",o.position),n.browserEvent.fromElement?(n.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()})},t.prototype._onGestureChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),e.prototype.dispose.call(this)},t}(r.MouseHandler),u=function(e){function t(t,i,r){var s=this;e.call(this,t,i,r),this.gesture=new o.Gesture(this.viewHelper.linesContentDomNode),this.listenersToRemove.push(n.addDisposableListener(this.viewHelper.linesContentDomNode,o.EventType.Tap,function(e){return s.onTap(e)})),this.listenersToRemove.push(n.addDisposableListener(this.viewHelper.linesContentDomNode,o.EventType.Change,function(e){return s.onChange(e)})),this.listenersToRemove.push(n.addDisposableListener(this.viewHelper.linesContentDomNode,o.EventType.Contextmenu,function(e){return s._onContextMenu(e,!1)}))}return __extends(t,e),t.prototype.dispose=function(){this.gesture.dispose(),e.prototype.dispose.call(this)},t.prototype.onTap=function(e){e.preventDefault(),this.viewHelper.focusTextArea();var t=new i.StandardMouseEvent(e),n=this._createMouseTarget(t,!1);n.position&&this.viewController.moveTo("mouse",n.position)},t.prototype.onChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t}(r.MouseHandler),l=function(){function e(e,t,n){window.navigator.msPointerEnabled?this.handler=new a(e,t,n):window.TouchEvent?this.handler=new u(e,t,n):window.navigator.pointerEnabled?this.handler=new c(e,t,n):this.handler=new r.MouseHandler(e,t,n)}return e.prototype.onScrollChanged=function(e){this.handler.onScrollChanged(e)},e.prototype.dispose=function(){this.handler.dispose()},e}();t.PointerHandler=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewLayer",["require","exports","vs/base/browser/dom","vs/editor/browser/view/viewPart"],function(e,t,n,i){"use strict";var o=function(e){function t(t){var n=this;e.call(this,t),this._scrollDomNode=null,this._scrollDomNodeIsAbove=!1,this.domNode=this._createDomNode(),this._lines=[],this._rendLineNumberStart=1,this._renderer=new r(function(){return n._createLine()},function(){return n._extraDomNodeHTML()})}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._lines=null},t.prototype._extraDomNodeHTML=function(){return""},t.prototype.onConfigurationChanged=function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].onConfigurationChanged(e);return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return this._lines=[],this._rendLineNumberStart=1,n.clearNode(this.domNode),!0},t.prototype.onModelLinesDeleted=function(e){var t,n=Math.max(e.fromLineNumber-this._rendLineNumberStart,0),i=Math.min(e.toLineNumber-this._rendLineNumberStart,this._lines.length-1);if(e.fromLineNumber<this._rendLineNumberStart&&(e.toLineNumber<this._rendLineNumberStart?this._rendLineNumberStart-=e.toLineNumber-e.fromLineNumber+1:this._rendLineNumberStart=e.fromLineNumber),i>=n){for(t=n;i>=t;t++){var o=this._lines[t].getDomNode();o&&this.domNode.removeChild(o)}this._lines.splice(n,i-n+1)}for(t=n;t<this._lines.length;t++)this._lines[t].onLinesDeletedAbove();return!0},t.prototype.onModelLineChanged=function(e){var t=e.lineNumber-this._rendLineNumberStart,n=!1;t>=0&&t<this._lines.length&&(this._lines[t].onContentChanged(),n=!0);for(var i=Math.max(t,0);i<this._lines.length;i++)this._lines[i].onLineChangedAbove(),n=!0;return n},t.prototype.onModelLinesInserted=function(e){var t;if(e.fromLineNumber<=this._rendLineNumberStart){for(this._rendLineNumberStart+=e.toLineNumber-e.fromLineNumber+1,t=0;t<this._lines.length;t++)this._lines[t].onLinesInsertedAbove();return!0}if(e.fromLineNumber>=this._rendLineNumberStart+this._lines.length)return!1;var n=Math.min(e.fromLineNumber-this._rendLineNumberStart,this._lines.length-1),i=Math.min(e.toLineNumber-this._rendLineNumberStart,this._lines.length-1);if(i>=n){for(t=n;i>=t;t++){var o=this._createLine();this._lines.splice(t,0,o)}var r=i-n+1;for(t=0;r>t;t++){var s=this._lines.pop(),a=s.getDomNode();a&&this.domNode.removeChild(a)}}for(t=i;t<this._lines.length;t++)this._lines[t].onLinesInsertedAbove();return!0},t.prototype.onModelTokensChanged=function(e){var t=e.fromLineNumber-this._rendLineNumberStart,n=e.toLineNumber-this._rendLineNumberStart;if(0>n||t>=this._lines.length)return!1;for(var i=Math.min(Math.max(t,0),this._lines.length-1),o=Math.min(Math.max(n,0),this._lines.length-1),r=!1,s=i;o>=s;s++)r=!0,this._lines[s].onTokensChanged();return r},t.prototype._renderLines=function(e){var t={domNode:this.domNode,rendLineNumberStart:this._rendLineNumberStart,lines:this._lines,linesLength:this._lines.length,getInlineDecorationsForLineInViewport:function(t){return e.getInlineDecorationsForLineInViewport(t)},viewportTop:e.viewportTop,viewportHeight:e.viewportHeight,scrollDomNode:this._scrollDomNode,scrollDomNodeIsAbove:this._scrollDomNodeIsAbove},n=this._renderer.renderWithManyUpdates(t,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._rendLineNumberStart=n.rendLineNumberStart,this._lines=n.lines,this._scrollDomNode=n.scrollDomNode,this._scrollDomNodeIsAbove=n.scrollDomNodeIsAbove},t.prototype._createDomNode=function(){var e=document.createElement("div");return e.className="view-layer",e.style.position="absolute",e.setAttribute("role","presentation"),e.setAttribute("aria-hidden","true"),e},t.prototype._createLine=function(){throw new Error("Implement me!")},t}(i.ViewPart);t.ViewLayer=o;var r=function(){function e(e,t){this._createLine=e,this._extraDomNodeHTML=t}return e.prototype.renderWithManyUpdates=function(e,t,n,i){return this._render(e,t,n,i)},e.prototype._render=function(e,t,n,i){var o={domNode:e.domNode,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength,getInlineDecorationsForLineInViewport:e.getInlineDecorationsForLineInViewport,viewportTop:e.viewportTop,viewportHeight:e.viewportHeight,scrollDomNode:e.scrollDomNode,scrollDomNodeIsAbove:e.scrollDomNodeIsAbove},r=!0;if(o.scrollDomNode){var s=this._getScrollDomNodeTime(o.scrollDomNode);(new Date).getTime()-s<1e3&&(r=!1)}if(r&&(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart)){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(var a=t;n>=a;a++)o.lines[a-t]=this._createLine();return this._finishRendering(o,!0,i),o.scrollDomNode=null,o}this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t);var c,u,l;return o.rendLineNumberStart>t?(c=t,u=Math.min(n,o.rendLineNumberStart-1),u>=c&&(this._insertLinesBefore(o,c,u,i,t),o.linesLength+=u-c+1,o.scrollDomNode&&o.scrollDomNodeIsAbove&&(o.scrollDomNode.parentNode&&o.scrollDomNode.parentNode.removeChild(o.scrollDomNode),o.scrollDomNode=null))):o.rendLineNumberStart<t&&(l=Math.min(o.linesLength,t-o.rendLineNumberStart),l>0&&(this._removeLinesBefore(o,l),o.linesLength-=l)),o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n?(c=o.rendLineNumberStart+o.linesLength,u=n,u>=c&&(this._insertLinesAfter(o,c,u,i,t),o.linesLength+=u-c+1,o.scrollDomNode&&!o.scrollDomNodeIsAbove&&(o.scrollDomNode.parentNode&&o.scrollDomNode.parentNode.removeChild(o.scrollDomNode),o.scrollDomNode=null))):o.rendLineNumberStart+o.linesLength-1>n&&(c=Math.max(0,n-o.rendLineNumberStart+1),u=o.linesLength-1,l=u-c+1,l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)),this._finishRendering(o,!1,i),o},e.prototype._renderUntouchedLines=function(e,t,n,i,o){var r,s;for(r=t;n>=r;r++){s=e.rendLineNumberStart+r;var a=e.lines[r].getDomNode();a&&e.lines[r].layoutLine(s,i[s-o])}},e.prototype._insertLinesBefore=function(e,t,n,i,o){var r,s,a=[];for(s=t;n>=s;s++)r=this._createLine(),a.push(r);e.lines=a.concat(e.lines)},e.prototype._getScrollDomNodeTime=function(e){var t=e.getAttribute("last-scroll-time");return t?parseInt(t,10):0},e.prototype._removeIfNotScrollDomNode=function(e,t,n){var i=this._getScrollDomNodeTime(t);if(!i)return void e.domNode.removeChild(t);if(e.scrollDomNode){var o=this._getScrollDomNodeTime(e.scrollDomNode);if(o>i)return void e.domNode.removeChild(t);e.scrollDomNode.parentNode&&e.scrollDomNode.parentNode.removeChild(e.scrollDomNode),e.scrollDomNode=null}e.scrollDomNode=t,e.scrollDomNodeIsAbove=n},e.prototype._removeLinesBefore=function(e,t){var n;for(n=0;t>n;n++){var i=e.lines[n].getDomNode();i&&this._removeIfNotScrollDomNode(e,i,!0)}e.lines.splice(0,t)},e.prototype._insertLinesAfter=function(e,t,n,i,o){var r,s,a=[];for(s=t;n>=s;s++)r=this._createLine(),a.push(r);e.lines=e.lines.concat(a)},e.prototype._removeLinesAfter=function(e,t){var n,i=e.linesLength-t;for(n=0;t>n;n++){var o=e.lines[i+n].getDomNode();o&&this._removeIfNotScrollDomNode(e,o,!1)}e.lines.splice(i,t)},e.prototype._finishRendering=function(e,t,n){var i,o,r,s,a=!1,c=[],u=[],l=!1,d=[],h=[];for(i=0,o=e.linesLength;o>i;i++)if(r=e.lines[i],s=i+e.rendLineNumberStart,r.shouldUpdateHTML(s,e.getInlineDecorationsForLineInViewport(s))){var p=r.getDomNode();p?(r.getLineOuterHTML(h,s,n[i]),d[i]=!0,l=!0):(r.getLineOuterHTML(u,s,n[i]),c[i]=!0,a=!0)}if(a){var f=e.domNode.lastChild;t||!f?e.domNode.innerHTML=this._extraDomNodeHTML()+u.join(""):f.insertAdjacentHTML("afterend",u.join(""));var m=e.domNode.lastChild;for(i=e.linesLength-1;i>=0;i--)r=e.lines[i],c[i]&&(r.setDomNode(m),m=m.previousSibling)}if(l){var v=document.createElement("div");v.innerHTML=h.join("");var p,g;for(i=0;i<e.linesLength;i++)r=e.lines[i],d[i]&&(g=v.firstChild,p=r.getDomNode(),p.parentNode.replaceChild(g,p),r.setDomNode(g))}},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewOverlays",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewLayer"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n){e.call(this,t),this._layoutProvider=n,this._dynamicOverlays=[],this.domNode.className="view-overlays"}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._layoutProvider=null;for(var t=0;t<this._dynamicOverlays.length;t++)this._dynamicOverlays[t].dispose();this._dynamicOverlays=null},t.prototype.getDomNode=function(){return this.domNode},t.prototype.addDynamicOverlay=function(e){this._dynamicOverlays.push(e)},t.prototype.onViewFocusChanged=function(e){var t=this;return this._requestModificationFrame(function(){i.toggleClass(t.domNode,"focused",e)}),!1},t.prototype._createLine=function(){var e=new c(this._context,this._dynamicOverlays);return e},t.prototype.onReadAfterForcedLayout=function(e){for(var t=this,n=0;n<this._dynamicOverlays.length;n++)this._dynamicOverlays[n].shouldCallRender2(e);return this._requestModificationFrame(function(){t._viewOverlaysRender(e)}),null},t.prototype._viewOverlaysRender=function(t){e.prototype._renderLines.call(this,t.linesViewportData)},t.prototype.onWriteAfterForcedLayout=function(){this._executeModificationRunners()},t}(s.ViewLayer);t.ViewOverlays=a;var c=function(){function e(e,t){this._context=e,this._dynamicOverlays=t,this._domNode=null,this._renderPieces=null}return e.prototype.getDomNode=function(){return this._domNode},e.prototype.setDomNode=function(e){this._domNode=e},e.prototype.onContentChanged=function(){},e.prototype.onLinesInsertedAbove=function(){},e.prototype.onLinesDeletedAbove=function(){},e.prototype.onLineChangedAbove=function(){},e.prototype.onTokensChanged=function(){},e.prototype.onConfigurationChanged=function(e){},e.prototype._piecesEqual=function(e){if(!this._renderPieces||this._renderPieces.length!==e.length)return!1;for(var t=0,n=e.length;n>t;t++)if(this._renderPieces[t]!==e[t])return!1;return!0},e.prototype.shouldUpdateHTML=function(e,t){for(var n=[],i=0;i<this._dynamicOverlays.length;i++){var o=this._dynamicOverlays[i].render2(e);o&&o.length>0&&(n=n.concat(o))}var r=this._piecesEqual(n);return r||(this._renderPieces=n),!r},e.prototype.getLineOuterHTML=function(e,t,n){e.push('<div lineNumber="'),e.push(t.toString()),e.push('" style="top:'),e.push(n.toString()),e.push("px;height:"),e.push(this._context.configuration.editor.lineHeight.toString()),e.push('px;" class="'),e.push(r.ClassNames.VIEW_LINE),e.push('">'),e.push(this.getLineInnerHTML(t)),e.push("</div>")},e.prototype.getLineInnerHTML=function(e){return this._renderPieces.join("")},e.prototype.layoutLine=function(e,t){var n=this._domNode.getAttribute("lineNumber");n!==e.toString()&&this._domNode.setAttribute("lineNumber",e.toString()),o.StyleMutator.setTop(this._domNode,t),o.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight)},e}(),u=function(e){function t(t,n){e.call(this,t,n),o.StyleMutator.setWidth(this.domNode,0),o.StyleMutator.setHeight(this.domNode,0)}return __extends(t,e),t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype._viewOverlaysRender=function(t){e.prototype._viewOverlaysRender.call(this,t),o.StyleMutator.setWidth(this.domNode,this._layoutProvider.getScrollWidth())},t}(a);t.ContentViewOverlays=u;var l=function(e){function t(t,n){e.call(this,t,n),this._hasVerticalScroll=!1,this._glyphMarginLeft=0,this._glyphMarginWidth=0,this._scrollHeight=n.getScrollHeight(),this.domNode.className=r.ClassNames.MARGIN_VIEW_OVERLAYS+" monaco-editor-background",o.StyleMutator.setWidth(this.domNode,1),this._hasVerticalScroll=!0}return __extends(t,e),t.prototype._extraDomNodeHTML=function(){return['<div class="',r.ClassNames.GLYPH_MARGIN,'" style="left:',String(this._glyphMarginLeft),"px;width:",String(this._glyphMarginWidth),"px;height:",String(this._scrollHeight),'px;"></div>'].join("")},t.prototype._getGlyphMarginDomNode=function(){return this.domNode.children[0]},t.prototype.onScrollHeightChanged=function(t){var n=this;return this._scrollHeight=t,this._requestModificationFrame(function(){var e=n._getGlyphMarginDomNode();e&&o.StyleMutator.setHeight(e,n._scrollHeight)}),e.prototype.onScrollHeightChanged.call(this,t)||!0},t.prototype.onLayoutChanged=function(t){var n=this;return this._glyphMarginLeft=t.glyphMarginLeft,this._glyphMarginWidth=t.glyphMarginWidth,this._scrollHeight=this._layoutProvider.getScrollHeight(),this._requestModificationFrame(function(){o.StyleMutator.setWidth(n.domNode,t.contentLeft);var e=n._getGlyphMarginDomNode();e&&(o.StyleMutator.setLeft(e,t.glyphMarginLeft),o.StyleMutator.setWidth(e,t.glyphMarginWidth))}),e.prototype.onLayoutChanged.call(this,t)||!0},t.prototype.onScrollChanged=function(t){return this._hasVerticalScroll=this._hasVerticalScroll||t.vertical,e.prototype.onScrollChanged.call(this,t)},t.prototype._viewOverlaysRender=function(t){if(e.prototype._viewOverlaysRender.call(this,t),this._hasVerticalScroll){if(n.canUseTranslate3d){var i="translate3d(0px, "+t.linesViewportData.visibleRangesDeltaTop+"px, 0px)";o.StyleMutator.setTransform(this.domNode,i)}else this._hasVerticalScroll&&o.StyleMutator.setTop(this.domNode,t.linesViewportData.visibleRangesDeltaTop);this._hasVerticalScroll=!1}var r=Math.min(this._layoutProvider.getTotalHeight(),1e6);o.StyleMutator.setHeight(this.domNode,r)},t}(a);t.MarginViewOverlays=l}),define("vs/editor/browser/viewLayout/scrollManager",["require","exports","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/ui/scrollbar/scrollableElementImpl","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser"],function(e,t,n,i,o,r,s){"use strict";function a(e,t,n){e.hasOwnProperty(n)&&(t[n]=e[n])}var c=function(){function e(e,t,n,c,u,l){var d=this;this.toDispose=[],this.scrollable=e,this.configuration=t,this.privateViewEventBus=n,this.linesContent=c,this.toDispose.push(this.scrollable.addScrollListener(function(e){d.privateViewEventBus.emit(r.EventType.ViewScrollChanged,e)}));var h=this.configuration.editor.scrollbar,p={scrollable:this.scrollable,listenOnDomNode:u,vertical:h.vertical,horizontal:h.horizontal,className:s.ClassNames.SCROLLABLE_ELEMENT+" "+this.configuration.editor.theme,useShadows:!1,saveLastScrollTimeOnClassName:s.ClassNames.VIEW_LINE};a(h,p,"verticalHasArrows"),a(h,p,"horizontalHasArrows"),a(h,p,"verticalScrollbarSize"),a(h,p,"verticalSliderSize"),a(h,p,"horizontalScrollbarSize"),a(h,p,"horizontalSliderSize"),a(h,p,"handleMouseWheel"),a(h,p,"arrowSize"),a(h,p,"mouseWheelScrollSensitivity"),this.scrollbar=new o.ScrollableElement(c,p,{width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight}),this.toDispose.push(this.scrollbar),this.toDispose.push(this.scrollable.addInternalSizeChangeListener(function(){d.scrollbar.onElementInternalDimensions()})),this.toDispose.push(this.configuration.onDidChange(function(e){d.scrollbar.updateClassName(d.configuration.editor.theme),e.scrollbar&&d.scrollbar.updateOptions(d.configuration.editor.scrollbar)}));var f=function(e,t,n){if(t){var i=e.scrollTop;i&&(d.scrollable.setScrollTop(d.scrollable.getScrollTop()+i),e.scrollTop=0)}if(n){var o=e.scrollLeft;o&&(d.scrollable.setScrollLeft(d.scrollable.getScrollLeft()+o),e.scrollLeft=0)}};this.toDispose.push(i.addDisposableListener(u,"scroll",function(e){return f(u,!0,!0)})),this.toDispose.push(i.addDisposableListener(c,"scroll",function(e){return f(c,!0,!1)})),this.toDispose.push(i.addDisposableListener(l,"scroll",function(e){return f(l,!0,!1)}))}return e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose)},e.prototype.onSizeProviderLayoutChanged=function(){this.scrollbar&&this.scrollbar.onElementDimensions({width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight})},e.prototype.getOverviewRulerLayoutInfo=function(){return this.scrollbar?this.scrollbar.getOverviewRulerLayoutInfo():null},e.prototype.getScrollbarContainerDomNode=function(){return this.scrollbar?this.scrollbar.getDomNode():this.linesContent},e.prototype.delegateVerticalScrollbarMouseDown=function(e){this.scrollbar&&this.scrollbar.delegateVerticalScrollbarMouseDown(e)},e}();t.ScrollManager=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewLayout/layoutProvider",["require","exports","vs/editor/common/editorCommon","vs/editor/common/viewLayout/editorScrollable","vs/editor/common/viewLayout/linesLayout","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/viewLayout/scrollManager"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,r,a,c,u){e.call(this),this.configuration=t,this.privateViewEventBus=r,this.model=n,this.scrollable=new i.EditorScrollable,this.scrollable.setWidth(this.configuration.editor.layoutInfo.contentWidth),this.scrollable.setHeight(this.configuration.editor.layoutInfo.contentHeight),this.scrollManager=new s.ScrollManager(this.scrollable,t,r,a,c,u),this.configuration.setLineCount(this.model.getLineCount()),this.linesLayout=new o.LinesLayout(t,n),this._updateHeight()}return __extends(t,e),t.prototype.dispose=function(){this.scrollManager.dispose(),this.scrollable.dispose()},t.prototype.updateLineCount=function(){this.configuration.setLineCount(this.model.getLineCount())},t.prototype.onZonesChanged=function(){return this._updateHeight(),!1},t.prototype.onModelFlushed=function(){return this.linesLayout.onModelFlushed(),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onModelLinesDeleted=function(e){return this.linesLayout.onModelLinesDeleted(e),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onModelLinesInserted=function(e){return this.linesLayout.onModelLinesInserted(e),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onConfigurationChanged=function(e){return e.layoutInfo&&(this.scrollable.setWidth(this.configuration.editor.layoutInfo.contentWidth),this.scrollable.setHeight(this.configuration.editor.layoutInfo.contentHeight),this.scrollManager.onSizeProviderLayoutChanged(),this._emitLayoutChangedEvent()),this._updateHeight(),!1},t.prototype._updateHeight=function(){var e=this.scrollable.getScrollHeight();this.scrollable.setScrollHeight(this.getTotalHeight());var t=this.scrollable.getScrollHeight();e!==t&&this.privateViewEventBus.emit(n.EventType.ViewScrollHeightChanged,t)},t.prototype.getCurrentViewport=function(){return{top:this.scrollable.getScrollTop(),left:this.scrollable.getScrollLeft(),width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight}},t.prototype.getCenteredViewLineNumberInViewport=function(){return this.linesLayout.getCenteredLineInViewport(this.getCurrentViewport())},t.prototype._emitLayoutChangedEvent=function(){this.privateViewEventBus.emit(n.EventType.ViewLayoutChanged,this.configuration.editor.layoutInfo)},t.prototype.emitLayoutChangedEvent=function(){this._emitLayoutChangedEvent()},t.prototype._computeScrollWidth=function(e,n){var i=this.configuration.editor.wrappingInfo.isViewportWrapping;return i?Math.max(e,n):Math.max(e+t.LINES_HORIZONTAL_EXTRA_PX,n)},t.prototype.onMaxLineWidthChanged=function(e){var t=this._computeScrollWidth(e,this.getCurrentViewport().width),i=this.scrollable.getScrollWidth();this.scrollable.setScrollWidth(t),t=this.scrollable.getScrollWidth(),t!==i&&(this.privateViewEventBus.emit(n.EventType.ViewScrollWidthChanged,t),this._updateHeight())},t.prototype.saveState=function(){var e=this.scrollable.getScrollTop(),t=this.linesLayout.getLineNumberAtOrAfterVerticalOffset(e),n=this.linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(t);return{scrollTop:e,scrollTopWithoutViewZones:e-n,scrollLeft:this.scrollable.getScrollLeft()}},t.prototype.restoreState=function(e){var t=e.scrollTop;"number"!=typeof e.scrollTopWithoutViewZones||this.linesLayout.hasWhitespace()||(t=e.scrollTopWithoutViewZones),this.scrollable.setScrollTop(t),this.scrollable.setScrollLeft(e.scrollLeft)},t.prototype.addWhitespace=function(e,t,n){return this.linesLayout.insertWhitespace(e,t,n)},t.prototype.changeWhitespace=function(e,t,n){return this.linesLayout.changeWhitespace(e,t,n)},t.prototype.removeWhitespace=function(e){return this.linesLayout.removeWhitespace(e)},t.prototype.getVerticalOffsetForLineNumber=function(e){return this.linesLayout.getVerticalOffsetForLineNumber(e)},t.prototype.heightInPxForLine=function(e){return this.linesLayout.getHeightForLineNumber(e)},t.prototype.isAfterLines=function(e){return this.linesLayout.isAfterLines(e)},t.prototype.getLineNumberAtVerticalOffset=function(e){return this.linesLayout.getLineNumberAtOrAfterVerticalOffset(e)},t.prototype.getTotalHeight=function(){var e=0;return this.scrollable.getScrollWidth()>this.scrollable.getWidth()&&(e=this.configuration.editor.scrollbar.horizontalScrollbarSize),this.linesLayout.getTotalHeight(this.getCurrentViewport(),e)},t.prototype.getWhitespaceAtVerticalOffset=function(e){return this.linesLayout.getWhitespaceAtVerticalOffset(e)},t.prototype.getLinesViewportData=function(){return this.linesLayout.getLinesViewportData(this.getCurrentViewport())},t.prototype.getWhitespaceViewportData=function(){return this.linesLayout.getWhitespaceViewportData(this.getCurrentViewport())},t.prototype.getWhitespaces=function(){return this.linesLayout.getWhitespaces()},t.prototype.getOverviewRulerInsertData=function(){var e=this.scrollManager.getOverviewRulerLayoutInfo();return{parent:e.parent,insertBefore:e.insertBefore}},t.prototype.getScrollbarContainerDomNode=function(){return this.scrollManager.getScrollbarContainerDomNode()},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this.scrollManager.delegateVerticalScrollbarMouseDown(e)},t.prototype.getScrollHeight=function(){return this.scrollable.getScrollHeight()},t.prototype.getScrollWidth=function(){return this.scrollable.getScrollWidth()},t.prototype.getScrollLeft=function(){return this.scrollable.getScrollLeft()},t.prototype.setScrollLeft=function(e){this.scrollable.setScrollLeft(e)},t.prototype.getScrollTop=function(){return this.scrollable.getScrollTop()},t.prototype.setScrollTop=function(e){this.scrollable.setScrollTop(e)},t.prototype.getScrolledTopFromAbsoluteTop=function(e){return e-this.scrollable.getScrollTop()},t.LINES_HORIZONTAL_EXTRA_PX=30,t}(r.ViewEventHandler);t.LayoutProvider=a;
});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/contentWidgets/contentWidgets",["require","exports","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart","vs/css!./contentWidgets"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(t,n){e.call(this,t),this._viewDomNode=n,this._widgets={},this._contentWidth=0,this._contentLeft=0,this.domNode=document.createElement("div"),this.domNode.className=o.ClassNames.CONTENT_WIDGETS,this.overflowingContentWidgetsDomNode=document.createElement("div"),this.overflowingContentWidgetsDomNode.className=o.ClassNames.OVERFLOWING_CONTENT_WIDGETS}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._widgets=null,this.domNode=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){var t=this;return this._contentWidth=e.contentWidth,this._contentLeft=e.contentLeft,this._requestModificationFrameBeforeRendering(function(){var e;for(e in t._widgets)t._widgets.hasOwnProperty(e)&&i.StyleMutator.setMaxWidth(t._widgets[e].widget.getDomNode(),t._contentWidth)}),!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.addWidget=function(e){var t={allowEditorOverflow:e.allowEditorOverflow||!1,widget:e,position:null,preference:null,isVisible:!1};this._widgets[e.getId()]=t;var n=e.getDomNode();n.style.position="absolute",i.StyleMutator.setMaxWidth(n,this._contentWidth),i.StyleMutator.setVisibility(n,"hidden"),n.setAttribute("widgetId",e.getId()),t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(n):this.domNode.appendChild(n),this.shouldRender=!0},t.prototype.setWidgetPosition=function(e,t,n){var i=this._widgets[e.getId()];i.position=t,i.preference=n,this.shouldRender=!0},t.prototype.removeWidget=function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t];delete this._widgets[t];var i=n.widget.getDomNode();i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.shouldRender=!0}},t.prototype._layoutBoxInViewport=function(e,t,n){var i=n.visibleRangeForPosition(e);if(!i)return null;var o=t.clientWidth,r=t.clientHeight,s=i.top,a=s,c=i.top+this._context.configuration.editor.lineHeight,u=n.viewportHeight-c,l=s-r,d=a>=r,h=c,p=u>=r,f=i.left;return f+o>n.viewportLeft+n.viewportWidth&&(f=n.viewportLeft+n.viewportWidth-o),f<n.viewportLeft&&(f=n.viewportLeft),{aboveTop:l,fitsAbove:d,belowTop:h,fitsBelow:p,left:f}},t.prototype._layoutBoxInPage=function(e,t,i){var o=i.visibleRangeForPosition(e);if(!o)return null;var r=o.left-i.viewportLeft,s=t.clientWidth,a=t.clientHeight;if(0>r+s||r>this._contentWidth)return null;var c=o.top-a,u=o.top+this._context.configuration.editor.lineHeight,l=r+this._contentLeft,d=n.getDomNodePosition(this._viewDomNode),h=d.top+c-document.body.scrollTop-document.documentElement.scrollTop,p=d.top+u-document.body.scrollTop-document.documentElement.scrollTop,f=d.left+l-document.body.scrollLeft-document.documentElement.scrollLeft,m=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,g=22,y=h>=0,_=v-g>=p+a;if(f+s+20>m){var b=f-(m-s-20);f-=b,l-=b}if(0>f){var b=f;f-=b,l-=b}return{aboveTop:c,fitsAbove:y,belowTop:u,fitsBelow:_,left:l}},t.prototype._prepareRenderWidgetAtExactPosition=function(e,t){var n=t.visibleRangeForPosition(e);return n?{top:n.top,left:n.left}:null},t.prototype._prepareRenderWidget=function(e,t){var n=this;if(!e.position||!e.preference)return null;var i=this._context.model.validateModelPosition(e.position);if(!this._context.model.modelPositionIsVisible(i))return null;for(var r=this._context.model.convertModelPositionToViewPosition(i.lineNumber,i.column),s=null,a=function(){if(!s){var i=e.widget.getDomNode();s=e.allowEditorOverflow?n._layoutBoxInPage(r,i,t):n._layoutBoxInViewport(r,i,t)}},c=1;2>=c;c++)for(var u=0;u<e.preference.length;u++){var l=e.preference[u];if(l===o.ContentWidgetPositionPreference.ABOVE){if(a(),!s)return null;if(2===c||s.fitsAbove)return{top:s.aboveTop,left:s.left}}else{if(l!==o.ContentWidgetPositionPreference.BELOW)return this._prepareRenderWidgetAtExactPosition(r,t);if(a(),!s)return null;if(2===c||s.fitsBelow)return{top:s.belowTop,left:s.left}}}},t.prototype._render=function(e){var t,n,o=this,r={};for(n in this._widgets)this._widgets.hasOwnProperty(n)&&(t=this._prepareRenderWidget(this._widgets[n],e),t&&(r[n]=t));this._requestModificationFrame(function(){var t,n,s;for(t in o._widgets)o._widgets.hasOwnProperty(t)&&(n=o._widgets[t],s=o._widgets[t].widget.getDomNode(),r.hasOwnProperty(t)?(n.allowEditorOverflow?(i.StyleMutator.setTop(s,r[t].top),i.StyleMutator.setLeft(s,r[t].left)):(i.StyleMutator.setTop(s,r[t].top+e.viewportTop-e.bigNumbersDelta),i.StyleMutator.setLeft(s,r[t].left)),n.isVisible||(i.StyleMutator.setVisibility(s,"inherit"),s.setAttribute("monaco-visible-content-widget","true"),n.isVisible=!0)):n.isVisible&&(s.removeAttribute("monaco-visible-content-widget"),n.isVisible=!1,i.StyleMutator.setVisibility(s,"hidden")))})},t}(r.ViewPart);t.ViewContentWidgets=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lines/viewLines",["require","exports","vs/base/common/async","vs/base/browser/browser","vs/base/browser/styleMutator","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewLayer","vs/editor/browser/viewParts/lines/viewLine"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=function(e){function t(t,i){var o=this;e.call(this,t),this._hasVerticalScroll=!1,this._hasHorizontalScroll=!1,this._layoutProvider=i,this.domNode.className=a.ClassNames.VIEW_LINES,this._maxLineWidth=0,this._asyncUpdateLineWidths=new n.RunOnceScheduler(function(){o._updateLineWidths()},200),this._currentVisibleRange=new r.Range(1,1,1,1),this._bigNumbersDelta=0,this._lastCursorRevealRangeHorizontallyEvent=null,this.textRangeRestingSpot=document.createElement("div"),this.textRangeRestingSpot.className="textRangeRestingSpot",this._hasVerticalScroll=!0,this._hasHorizontalScroll=!0}return __extends(t,e),t.prototype.dispose=function(){this._asyncUpdateLineWidths.dispose(),this._layoutProvider=null,e.prototype.dispose.call(this)},t.prototype.onConfigurationChanged=function(t){var n=e.prototype.onConfigurationChanged.call(this,t);return t.wrappingInfo&&(this._maxLineWidth=0),n},t.prototype.onLayoutChanged=function(t){var n=e.prototype.onLayoutChanged.call(this,t);return this._maxLineWidth=0,n},t.prototype.onModelFlushed=function(){var t=e.prototype.onModelFlushed.call(this);return this._maxLineWidth=0,t},t.prototype.onScrollWidthChanged=function(e){return o.StyleMutator.setWidth(this.domNode,e),!1},t.prototype.onModelDecorationsChanged=function(t){for(var n=e.prototype.onModelDecorationsChanged.call(this,t),i=0;i<this._lines.length;i++)this._lines[i].onModelDecorationsChanged();return n||!0},t.prototype.onCursorRevealRange=function(e){var t=this._computeScrollTopToRevealRange(this._layoutProvider.getCurrentViewport(),e.range,e.verticalType);return e.revealHorizontal&&(this._lastCursorRevealRangeHorizontallyEvent=e),this._layoutProvider.setScrollTop(t),!0},t.prototype.onCursorScrollRequest=function(e){var t=this._layoutProvider.getScrollTop(),n=t+e.deltaLines*this._context.configuration.editor.lineHeight;return this._layoutProvider.setScrollTop(n),!0},t.prototype.onScrollChanged=function(t){return this._hasVerticalScroll=this._hasVerticalScroll||t.vertical,this._hasHorizontalScroll=this._hasHorizontalScroll||t.horizontal,e.prototype.onScrollChanged.call(this,t)},t.prototype.getPositionFromDOMInfo=function(e,t){var n=this._getLineNumberFromDOMInfo(e);if(-1===n)return null;if(1>n||n>this._context.model.getLineCount())return null;if(1===this._context.model.getLineMaxColumn(n))return{lineNumber:n,column:1};var i=n-this._rendLineNumberStart;if(0>i||i>=this._lines.length)return null;var o=this._lines[i].getColumnOfNodeOffset(n,e,t),r=this._context.model.getLineMinColumn(n);return r>o&&(o=r),{lineNumber:n,column:o}},t.prototype._getLineNumberFromDOMInfo=function(e){for(;e&&1===e.nodeType;){if(e.className===a.ClassNames.VIEW_LINE)return parseInt(e.getAttribute("lineNumber"),10);e=e.parentElement}return-1},t.prototype.getLineWidth=function(e){var t=e-this._rendLineNumberStart;return 0>t||t>=this._lines.length?-1:this._lines[t].getWidth()},t.prototype.linesVisibleRangesForRange=function(e,n){if(this.shouldRender)return null;var i=e.endLineNumber;if(e=r.Range.intersectRanges(e,this._currentVisibleRange),!e)return null;var o,a,c,u,l,d,h,p=[],f=this.domNode.getBoundingClientRect(),m=f.left;for(n&&(h=this._context.model.convertViewPositionToModelPosition(e.startLineNumber,1).lineNumber),a=e.startLineNumber;a<=e.endLineNumber;a++)c=a-this._rendLineNumberStart,0>c||c>=this._lines.length||(u=a===e.startLineNumber?e.startColumn:1,l=a===e.endLineNumber?e.endColumn:this._context.model.getLineMaxColumn(a),o=this._lines[c].getVisibleRangesForRange(u,l,m,this.textRangeRestingSpot),o&&0!==o.length&&(n&&i>a&&(d=h,h=this._context.model.convertViewPositionToModelPosition(a+1,1).lineNumber,d!==h&&(o[o.length-1].width+=t.LINE_FEED_WIDTH)),p.push(new s.LineVisibleRanges(a,o))));return 0===p.length?null:p},t.prototype.visibleRangesForRange2=function(e,t){if(this.shouldRender)return null;if(e=r.Range.intersectRanges(e,this._currentVisibleRange),!e)return null;for(var n=[],i=this.domNode.getBoundingClientRect(),o=i.left,a=e.startLineNumber;a<=e.endLineNumber;a++){var c=a-this._rendLineNumberStart;if(!(0>c||c>=this._lines.length)){var u=a===e.startLineNumber?e.startColumn:1,l=a===e.endLineNumber?e.endColumn:this._context.model.getLineMaxColumn(a),d=this._lines[c].getVisibleRangesForRange(u,l,o,this.textRangeRestingSpot);if(d&&0!==d.length)for(var h=this._layoutProvider.getVerticalOffsetForLineNumber(a)-this._bigNumbersDelta+t,p=0,f=d.length;f>p;p++)n.push(new s.VisibleRange(h,d[p].left,d[p].width))}}return 0===n.length?null:n},t.prototype._createLine=function(){return u.createLine(this._context)},t.prototype._renderAndUpdateLineHeights=function(t){if(e.prototype._renderLines.call(this,t),this._currentVisibleRange=new r.Range(0+this._rendLineNumberStart,1,this._lines.length-1+this._rendLineNumberStart,this._context.model.getLineMaxColumn(this._lines.length-1+this._rendLineNumberStart)),this._lastCursorRevealRangeHorizontallyEvent){var n=this._computeScrollLeftToRevealRange(this._lastCursorRevealRangeHorizontallyEvent.range);this._lastCursorRevealRangeHorizontallyEvent=null;var i=this._context.configuration.editor.wrappingInfo.isViewportWrapping;i||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._layoutProvider.setScrollLeft(n.scrollLeft)}},t.prototype._updateLineWidths=function(){var e,t,n=1;for(e=0;e<this._lines.length;e++)t=this._lines[e].getWidth(),n=Math.max(n,t);this._ensureMaxLineWidth(n)},t.prototype.render=function(){var e=this._layoutProvider.getLinesViewportData();if(this._bigNumbersDelta=e.bigNumbersDelta,this.shouldRender&&(this.shouldRender=!1,this._renderAndUpdateLineHeights(e),this._asyncUpdateLineWidths.schedule()),this._hasVerticalScroll||this._hasHorizontalScroll){if(i.canUseTranslate3d){var t="translate3d("+-this._layoutProvider.getScrollLeft()+"px, "+e.visibleRangesDeltaTop+"px, 0px)";o.StyleMutator.setTransform(this.domNode.parentNode,t)}else this._hasVerticalScroll&&o.StyleMutator.setTop(this.domNode.parentNode,e.visibleRangesDeltaTop),this._hasHorizontalScroll&&o.StyleMutator.setLeft(this.domNode.parentNode,-this._layoutProvider.getScrollLeft());this._hasVerticalScroll=!1,this._hasHorizontalScroll=!1}return o.StyleMutator.setWidth(this.domNode,this._layoutProvider.getScrollWidth()),o.StyleMutator.setHeight(this.domNode,Math.min(this._layoutProvider.getTotalHeight(),1e6)),e.visibleRange=this._currentVisibleRange,e},t.prototype._ensureMaxLineWidth=function(e){this._maxLineWidth<e&&(this._maxLineWidth=e,this._layoutProvider.onMaxLineWidthChanged(this._maxLineWidth))},t.prototype._computeScrollTopToRevealRange=function(e,t,n){var i,o,r=e.top,a=e.height,c=r+a;i=this._layoutProvider.getVerticalOffsetForLineNumber(t.startLineNumber),o=this._layoutProvider.getVerticalOffsetForLineNumber(t.endLineNumber)+this._layoutProvider.heightInPxForLine(t.endLineNumber),n===s.VerticalRevealType.Simple&&(o+=this._context.configuration.editor.lineHeight);var u;if(n===s.VerticalRevealType.Center||n===s.VerticalRevealType.CenterIfOutsideViewport)if(n===s.VerticalRevealType.CenterIfOutsideViewport&&i>=r&&c>=o)u=r;else{var l=(i+o)/2;u=Math.max(0,l-a/2)}else u=this._computeMinimumScrolling(r,c,i,o);return u},t.prototype._computeScrollLeftToRevealRange=function(e){var n=0;if(e.startLineNumber!==e.endLineNumber)return{scrollLeft:0,maxHorizontalOffset:n};var i=this._layoutProvider.getCurrentViewport(),o=i.left,r=o+i.width,s=this.visibleRangesForRange2(e,0),a=Number.MAX_VALUE,c=0;if(!s)return{scrollLeft:o,maxHorizontalOffset:n};var u,l;for(u=0;u<s.length;u++)l=s[u],l.left<a&&(a=l.left),l.left+l.width>c&&(c=l.left+l.width);n=c,a=Math.max(0,a-t.HORIZONTAL_EXTRA_PX),c+=this._context.configuration.editor.revealHorizontalRightPadding;var d=this._computeMinimumScrolling(o,r,a,c);return{scrollLeft:d,maxHorizontalOffset:n}},t.prototype._computeMinimumScrolling=function(e,t,n,i){var o=t-e,r=i-n;return o>r?e>n?n:i>t?Math.max(0,i-o):e:n},t.LINE_FEED_WIDTH=10,t.HORIZONTAL_EXTRA_PX=30,t}(c.ViewLayer);t.ViewLines=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/scrollDecoration/scrollDecoration",["require","exports","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart","vs/css!./scrollDecoration"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(t){e.call(this,t),this._scrollTop=0,this._width=0,this._shouldShow=!1,this._domNode=document.createElement("div")}return __extends(t,e),t.prototype._updateShouldShow=function(){var e=this._context.configuration.editor.scrollbar.useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1},t.prototype.getDomNode=function(){return this._domNode},t.prototype.onConfigurationChanged=function(e){return this._updateShouldShow()},t.prototype.onLayoutChanged=function(e){return this._width!==e.width?(this._width=e.width,!0):!1},t.prototype.onScrollChanged=function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()},t.prototype._render=function(e){var t=this;this._requestModificationFrame(function(){i.StyleMutator.setWidth(t._domNode,t._width),n.toggleClass(t._domNode,o.ClassNames.SCROLL_DECORATION,t._shouldShow)})},t}(r.ViewPart);t.ScrollDecorationViewPart=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/controller/textAreaHandler",["require","exports","vs/base/common/async","vs/base/common/event","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/editor/common/controller/textAreaState","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l;!function(e){e[e.Type=0]="Type",e[e.Paste=1]="Paste"}(l||(l={}));var d=function(e){function t(t,o,r,u,d){var h=this;e.call(this),this._onKeyDown=this._register(new i.Emitter),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new i.Emitter),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new i.Emitter),this.onCut=this._onCut.event,this._onPaste=this._register(new i.Emitter),this.onPaste=this._onPaste.event,this._onType=this._register(new i.Emitter),this.onType=this._onType.event,this._onCompositionStart=this._register(new i.Emitter),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionEnd=this._register(new i.Emitter),this.onCompositionEnd=this._onCompositionEnd.event,this.Browser=t,this.textArea=r,this.model=u,this.flushAnyAccumulatedEvents=d,this.selection=new c.Range(1,1,1,1),this.selections=[new c.Range(1,1,1,1)],this.cursorPosition=new a.Position(1,1),this._nextCommand=l.Type,this.asyncTriggerCut=new n.RunOnceScheduler(function(){return h._onCut.fire()},0),this.lastCopiedValue=null,this.lastCopiedValueIsFromEmptySelection=!1,this.textAreaState=s.createTextAreaState(o),this.hasFocus=!1,this.lastCompositionEndTime=0,this._register(this.textArea.onKeyDown(function(e){return h._onKeyDownHandler(e)})),this._register(this.textArea.onKeyUp(function(e){return h._onKeyUp.fire(e)})),this._register(this.textArea.onKeyPress(function(e){return h._onKeyPressHandler(e)})),this.textareaIsShownAtCursor=!1,this._register(this.textArea.onCompositionStart(function(){var e=(new Date).getTime()-h.lastCompositionEndTime;if(!h.textareaIsShownAtCursor){h.textareaIsShownAtCursor=!0;var t=e>=100;t&&(h.Browser.isIE11orEarlier||h.setTextAreaState("compositionstart",h.textAreaState.toEmpty()));var n,i;h.Browser.isIE11orEarlier?(n=h.selection.startLineNumber,i=h.selection.startColumn-h.textAreaState.getSelectionStart()):(n=h.cursorPosition.lineNumber,i=h.cursorPosition.column),h._onCompositionStart.fire({showAtLineNumber:n,showAtColumn:i})}}));var p=function(){h.textAreaState=h.textAreaState.fromTextArea(h.textArea);var e=h.textAreaState.deduceInput();h._nextCommand===l.Type?""!==e.text&&h._onType.fire(e):(h.executePaste(e.text),h._nextCommand=l.Type)};this._register(this.textArea.onCompositionEnd(function(){h.lastCompositionEndTime=(new Date).getTime(),h.textareaIsShownAtCursor&&(h.textareaIsShownAtCursor=!1,h._onCompositionEnd.fire())})),this._register(this.textArea.onInput(function(){h.textareaIsShownAtCursor||p()})),this._register(this.textArea.onCut(function(e){h.flushAnyAccumulatedEvents(),h._ensureClipboardGetsEditorSelection(e),h.asyncTriggerCut.schedule()})),this._register(this.textArea.onCopy(function(e){h.flushAnyAccumulatedEvents(),h._ensureClipboardGetsEditorSelection(e)})),this._register(this.textArea.onPaste(function(e){e.canUseTextData()?h.executePaste(e.getTextData()):(h.textArea.getSelectionStart()!==h.textArea.getSelectionEnd()&&h.setTextAreaState("paste",h.textAreaState.toEmpty()),h._nextCommand=l.Paste)})),this._writePlaceholderAndSelectTextArea("ctor")}return __extends(t,e),t.prototype.dispose=function(){this.asyncTriggerCut.dispose(),e.prototype.dispose.call(this)},t.prototype.setStrategy=function(e){this.textAreaState=this.textAreaState.toStrategy(e)},t.prototype.setHasFocus=function(e){this.hasFocus!==e&&(this.hasFocus=e,this.hasFocus&&this._writePlaceholderAndSelectTextArea("focusgain"))},t.prototype.setCursorSelections=function(e,t){this.selection=e,this.selections=[e].concat(t),this._writePlaceholderAndSelectTextArea("selection changed")},t.prototype.setCursorPosition=function(e){this.cursorPosition=e},t.prototype.setTextAreaState=function(e,t){this.hasFocus||(t=t.resetSelection()),t.applyToTextArea(e,this.textArea,this.hasFocus),this.textAreaState=t},t.prototype._onKeyDownHandler=function(e){e.equals(o.CommonKeybindings.ESCAPE)&&e.preventDefault(),this._onKeyDown.fire(e)},t.prototype._onKeyPressHandler=function(e){!this.hasFocus},t.prototype.executePaste=function(e){if(""!==e){var t=!1;this.Browser.enableEmptySelectionClipboard&&(t=e===this.lastCopiedValue&&this.lastCopiedValueIsFromEmptySelection),this._onPaste.fire({text:e,pasteOnNewLine:t})}},t.prototype.writePlaceholderAndSelectTextAreaSync=function(){this._writePlaceholderAndSelectTextArea("focusTextArea")},t.prototype._writePlaceholderAndSelectTextArea=function(e){this.textareaIsShownAtCursor||(this.Browser.isIPad?this.setTextAreaState(e,this.textAreaState.toEmpty()):this.setTextAreaState(e,this.textAreaState.fromEditorSelection(this.model,this.selection)))},t.prototype._ensureClipboardGetsEditorSelection=function(e){var t=this._getPlainTextToCopy();if(e.canUseTextData()?e.setTextData(t):this.setTextAreaState("copy or cut",this.textAreaState.fromText(t)),this.Browser.enableEmptySelectionClipboard){this.Browser.isFirefox?this.lastCopiedValue=t.replace(/\r\n/g,"\n"):this.lastCopiedValue=t;var n=this.selections;this.lastCopiedValueIsFromEmptySelection=1===n.length&&n[0].isEmpty()}},t.prototype._getPlainTextToCopy=function(){var e=this.model.getEOL(),t=this.selections;if(1===t.length){var n=t[0];if(n.isEmpty()){if(this.Browser.enableEmptySelectionClipboard){var i=this.model.convertViewPositionToModelPosition(n.startLineNumber,1).lineNumber;return this.model.getModelLineContent(i)+e}return""}return this.model.getValueInRange(n,u.EndOfLinePreference.TextDefined)}t=t.slice(0).sort(c.Range.compareRangesUsingStarts);for(var o=[],r=0;r<t.length;r++)o.push(this.model.getValueInRange(t[r],u.EndOfLinePreference.TextDefined));return o.join(e)},t}(r.Disposable);t.TextAreaHandler=d}),define("vs/editor/contrib/hover/browser/hoverWidgets",["require","exports","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/common/core/position","vs/editor/browser/editorBrowser"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e,t){var i=this;this.allowEditorOverflow=!0,this._id=e,this._editor=t,this._isVisible=!1,this._containerDomNode=document.createElement("div"),this._containerDomNode.className="monaco-editor-hover monaco-editor-background",this._domNode=document.createElement("div"),this._domNode.style.display="inline-block",this._containerDomNode.appendChild(this._domNode),this._containerDomNode.tabIndex=0,this._toDispose=[],this._toDispose.push(o.addStandardDisposableListener(this._containerDomNode,"keydown",function(e){e.equals(n.CommonKeybindings.ESCAPE)&&i.hide()})),this._editor.addContentWidget(this),this._showAtPosition=null}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._containerDomNode},e.prototype.showAt=function(e,t){this._showAtPosition=new s.Position(e.lineNumber,e.column),this._isVisible=!0;var n=Math.min(800,parseInt(this._containerDomNode.style.maxWidth,10));r.StyleMutator.setWidth(this._containerDomNode,n),r.StyleMutator.setHeight(this._containerDomNode,0),r.StyleMutator.setLeft(this._containerDomNode,0);var i=Math.min(n,this._domNode.clientWidth+5),o=this._domNode.clientHeight+1;r.StyleMutator.setWidth(this._containerDomNode,i),r.StyleMutator.setHeight(this._containerDomNode,o),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=t,t&&this._containerDomNode.focus()},e.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus())},e.prototype.getPosition=function(){return this._isVisible?{position:this._showAtPosition,preference:[a.ContentWidgetPositionPreference.ABOVE,a.ContentWidgetPositionPreference.BELOW]}:null},e.prototype.dispose=function(){this.hide(),this._toDispose=i.disposeAll(this._toDispose)},e}();t.ContentHoverWidget=c;var u=function(){function e(e,t){this._id=e,this._editor=t,this._isVisible=!1,this._domNode=document.createElement("div"),this._domNode.className="monaco-editor-hover monaco-editor-background",this._domNode.style.display="none",this._domNode.setAttribute("aria-hidden","true"),this._domNode.setAttribute("role","presentation"),this._showAtLineNumber=-1,this._editor.addOverlayWidget(this)}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.showAt=function(e){this._showAtLineNumber=e,this._isVisible||(this._isVisible=!0,this._domNode.style.display="block");var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(this._showAtLineNumber),i=this._editor.getScrollTop();this._domNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._domNode.style.top=n-i+"px"},e.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},e.prototype.getPosition=function(){return null},e.prototype.dispose=function(){this.hide()},e}();t.GlyphHoverWidget=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/hover/browser/modesGlyphHover",["require","exports","./hoverOperation","./hoverWidgets"],function(e,t,n,i){"use strict";var o=function(){function e(e){this._editor=e,this._lineNumber=-1}return e.prototype.setLineNumber=function(e){this._lineNumber=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeSync=function(){var e,t,n,i=[],o=this._editor.getLineDecorations(this._lineNumber);for(e=0,t=o.length;t>e;e++)n=o[e],n.options.glyphMarginClassName&&n.options.hoverMessage&&i.push({value:n.options.hoverMessage});return i},e.prototype.onResult=function(e,t){this._result=this._result.concat(e)},e.prototype.getResult=function(){return this._result},e.prototype.getResultWithLoadingMessage=function(){return this.getResult()},e}(),r=function(e){function t(i){var r=this;e.call(this,t.ID,i),this._lastLineNumber=-1,this._computer=new o(this._editor),this._hoverOperation=new n.HoverOperation(this._computer,function(e){return r._withResult(e)},null,function(e){return r._withResult(e)})}return __extends(t,e),t.prototype.onModelDecorationsChanged=function(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start())},t.prototype.startShowingAt=function(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start())},t.prototype.hide=function(){this._lastLineNumber=-1,this._hoverOperation.cancel(),e.prototype.hide.call(this)},t.prototype._withResult=function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()},t.prototype._renderMessages=function(e,t){var n=document.createDocumentFragment();t.forEach(function(e){var t=document.createElement("div"),i=null;e.className?(i=document.createElement("span"),i.textContent=e.value,i.className=e.className,t.appendChild(i)):t.textContent=e.value,n.appendChild(t)}),this._domNode.textContent="",this._domNode.appendChild(n),this.showAt(e)},t.ID="editor.contrib.modesGlyphHoverWidget",t}(i.GlyphHoverWidget);t.ModesGlyphHoverWidget=r}),define("vs/editor/contrib/quickFix/browser/lightBulpWidget",["require","exports","vs/base/common/lifecycle","vs/base/browser/dom","vs/editor/common/core/position","vs/editor/browser/editorBrowser"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e,t){this.allowEditorOverflow=!0,this.editor=e,this.onclick=t,this.toDispose=[],this.editor.addContentWidget(this)}return e.prototype.dispose=function(){this.editor.removeContentWidget(this),this.toDispose=n.disposeAll(this.toDispose)},e.prototype.getId=function(){return"__lightBulpWidget"},e.prototype.getDomNode=function(){var e=this;return this.domNode||(this.domNode=document.createElement("div"),this.domNode.style.width="20px",this.domNode.style.height="20px",this.domNode.className="lightbulp-glyph",this.toDispose.push(i.addDisposableListener(this.domNode,"click",function(t){e.editor.focus(),e.onclick(e.position)}))),this.domNode},e.prototype.getPosition=function(){return this.visible?{position:this.position,preference:[r.ContentWidgetPositionPreference.BELOW,r.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.show=function(e){this.visible&&o.Position.equals(this.position,e)||(this.position=e,this.visible=!0,this.editor.layoutContentWidget(this))},e.prototype.hide=function(){this.visible&&(this.visible=!1,this.editor.layoutContentWidget(this))},e}();t.LightBulpWidget=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/zoneWidget/browser/zoneWidget",["require","exports","vs/base/common/eventEmitter","vs/base/common/objects","vs/base/browser/dom","vs/editor/common/editorCommon","vs/css!./zoneWidget"],function(e,t,n,i,o,r){"use strict";var s={showArrow:!0,showFrame:!0,frameColor:"",className:""},a="vs.editor.contrib.zoneWidget",c=function(){function e(e,t,n,i,o,r){this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=o,this._onComputedHeight=r}return e.prototype.onDomNodeTop=function(e){this._onDomNodeTop(e)},e.prototype.onComputedHeight=function(e){this._onComputedHeight(e)},e}(),u=function(){function e(e,t){this._id=e,this._domNode=t}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return null},e}(),l=function(e){function t(t,n){var o=this;void 0===n&&(n={}),e.call(this),this.editor=t,this.options=i.mixin(i.clone(s),n),this.zoneId=-1,this.overlayWidget=null,this.lastView=null,this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this.container=null,this.listenersToRemove=[],this.listenersToRemove.push(this.editor.addListener(r.EventType.EditorLayout,function(e){var t=o.getWidth(e);o.domNode.style.width=t+"px",o.onWidth(t)}))}return __extends(t,e),t.prototype.create=function(){o.addClass(this.domNode,"zone-widget"),o.addClass(this.domNode,this.options.className),this.container=document.createElement("div"),o.addClass(this.container,"zone-widget-container"),this.domNode.appendChild(this.container),this.fillContainer(this.container)},t.prototype.getWidth=function(e){return void 0===e&&(e=this.editor.getLayoutInfo()),e.width-e.verticalScrollbarWidth},t.prototype.onViewZoneTop=function(e){this.domNode.style.top=e+"px"},t.prototype.onViewZoneHeight=function(e){this.domNode.style.height=e+"px",this.doLayout(e-this._decoratingElementsHeight())},t.prototype.show=function(e,t){"number"==typeof e.startLineNumber?this.showImpl(e,t):this.showImpl({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},t)},t.prototype._decoratingElementsHeight=function(){var e=this.editor.getConfiguration().lineHeight,t=0;if(this.options.showArrow){var n=Math.round(e/3);t+=2*n}if(this.options.showFrame){var i=Math.round(e/9);t+=2*i}return t},t.prototype.showImpl=function(e,t){var n=this,i={lineNumber:e.startLineNumber,column:e.startColumn};this.domNode.style.width=this.getWidth()+"px",this.editor.revealPosition(i);var o=document.createElement("div"),r=document.createElement("div"),s=this.editor.getConfiguration().lineHeight,l=0,d=0;this.options.showArrow&&(l=Math.round(s/3),r=document.createElement("div"),r.className="zone-widget-arrow below",
r.style.top=-l+"px",r.style.borderWidth=l+"px",r.style.left=this.editor.getOffsetForColumn(i.lineNumber,i.column)+"px",r.style.borderBottomColor=this.options.frameColor,o.appendChild(r)),this.options.showFrame&&(d=Math.round(s/9)),this.editor.changeViewZones(function(e){-1!==n.zoneId&&e.removeZone(n.zoneId),n.overlayWidget&&(n.editor.removeOverlayWidget(n.overlayWidget),n.overlayWidget=null),n.domNode.style.top="-1000px";var r=new c(o,i.lineNumber,i.column,t,function(e){return n.onViewZoneTop(e)},function(e){return n.onViewZoneHeight(e)});n.zoneId=e.addZone(r),n.overlayWidget=new u(a+n.zoneId,n.domNode),n.editor.addOverlayWidget(n.overlayWidget)}),this.options.showFrame&&(this.container.style.borderTopColor=this.options.frameColor,this.container.style.borderBottomColor=this.options.frameColor,this.container.style.borderTopWidth=d+"px",this.container.style.borderBottomWidth=d+"px");var h=t*s-this._decoratingElementsHeight();this.container.style.top=l+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden",this.doLayout(h),this.editor.setSelection(e);var p=Math.min(this.editor.getModel().getLineCount(),Math.max(1,e.endLineNumber+1));this.editor.revealLine(p),this.position=i},t.prototype.dispose=function(){var e=this;this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.overlayWidget&&(this.editor.removeOverlayWidget(this.overlayWidget),this.overlayWidget=null),-1!==this.zoneId&&this.editor.changeViewZones(function(t){t.removeZone(e.zoneId),e.zoneId=-1})},t.prototype.fillContainer=function(e){},t.prototype.onWidth=function(e){},t.prototype.doLayout=function(e){},t}(n.EventEmitter);t.ZoneWidget=l}),define("vs/nls!vs/base/common/processes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/processes",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/processes",["require","exports","vs/nls!vs/base/common/processes","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/parsers"],function(e,t,n,i,o,r,s){"use strict";function a(e,t){var n=i.clone(e);return n.cwd&&(n.cwd=t.resolve(n.cwd)),n.env&&(n.env=t.resolve(n.env)),n}function c(e,t){var n=i.clone(e);return n.command=t.resolve(n.command),n.args=t.resolve(n.args),n.options&&(n.options=a(n.options,t)),n}!function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"}(t.Source||(t.Source={}));var u=(t.Source,function(e){function t(t,n){void 0===n&&(n=new s.ValidationStatus),e.call(this,t,n)}return __extends(t,e),t.prototype.parse=function(e,i){void 0===i&&(i={globals:null,emptyCommand:!1,noDefaults:!1});var r=this.parseExecutable(e,i.globals);if(this.status.isFatal())return r;var a;return e.windows&&o.platform===o.Platform.Windows?a=this.parseExecutable(e.windows):e.osx&&o.platform===o.Platform.Mac?a=this.parseExecutable(e.osx):e.linux&&o.platform===o.Platform.Linux&&(a=this.parseExecutable(e.linux)),a&&(r=t.mergeExecutable(r,a)),r&&r.command||i.emptyCommand?(i.noDefaults||s.Parser.merge(r,{command:void 0,isShellCommand:!1,args:[],options:{}},!1),r):(this.status.state=s.ValidationState.Fatal,this.log(n.localize(0,null)),null)},t.prototype.parseExecutable=function(e,t){var i=void 0,o=void 0,a=void 0,c=void 0;return this.is(e.command,r.isString)&&(i=e.command),this.is(e.isShellCommand,r.isBoolean,s.ValidationState.Warning,n.localize(1,null,e.isShellCommand))&&(o=e.isShellCommand),this.is(e.args,r.isStringArray,s.ValidationState.Warning,n.localize(2,null,e.isShellCommand))&&(a=e.args.slice(0)),this.is(e.options,r.isObject)&&(c=this.parseCommandOptions(e.options)),{command:i,isShellCommand:o,args:a,options:c}},t.prototype.parseCommandOptions=function(e){var t={};return e?(this.is(e.cwd,r.isString,s.ValidationState.Warning,n.localize(3,null,e.cwd))&&(t.cwd=e.cwd),r.isUndefined(e.env)||(t.env=i.clone(e.env)),t):t},t.mergeExecutable=function(e,t){return e?(s.Parser.merge(e,t,!0),e):t},t}(s.Parser));t.ExecutableParser=u,t.resolveCommandOptions=a,t.resolveExecutable=c}),define("vs/nls!vs/base/common/severity",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/severity",t)}),define("vs/base/common/severity",["require","exports","vs/nls!vs/base/common/severity","vs/base/common/strings"],function(e,t,n,i){"use strict";var o;!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(o||(o={}));var o;!function(e){function t(t){return t?i.equalsIgnoreCase(s,t)?e.Error:i.equalsIgnoreCase(a,t)||i.equalsIgnoreCase(c,t)?e.Warning:i.equalsIgnoreCase(u,t)?e.Info:e.Ignore:e.Ignore}function o(e){return l[e]||i.empty}function r(e,t){return t-e}var s="error",a="warning",c="warn",u="info",l=Object.create(null);l[e.Error]=n.localize(0,null),l[e.Warning]=n.localize(1,null),l[e.Info]=n.localize(2,null),e.fromValue=t,e.toString=o,e.compare=r}(o||(o={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}),define("vs/nls!vs/base/node/processes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/node/processes",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/node/processes",["require","exports","path","child_process","stream","./stdFork","vs/nls!vs/base/node/processes","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/uri","vs/base/common/objects","vs/base/common/paths","vs/base/common/platform","vs/base/node/decoder","vs/base/common/processes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";function m(t,n){if(h.isWindows)try{var o={stdio:["pipe","pipe","ignore"]};n&&(o.cwd=n),i.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],o)}catch(r){return{success:!1,error:r}}else if(h.isLinux||h.isMacintosh)try{var s=u["default"].parse(e.toUrl("vs/base/node/terminateProcess.sh")).fsPath,a=i.spawnSync(s,[t.pid.toString()]);if(a.error)return{success:!1,error:a.error}}catch(r){return{success:!1,error:r}}else t.kill("SIGKILL");return{success:!0}}function v(){return process.env.comspec||"cmd.exe"}var g=i.exec,y=i.spawn;t.Source=f.Source,t.terminateProcess=m,t.getWindowsShell=v;var _=function(){function e(e,t,n,i){var o=this;if(i)this.cmd=e,this.args=t,this.shell=n,this.options=i;else if(n&&t)this.module=e,this.args=t,this.shell=!1,this.options=n;else{var r=e;this.cmd=r.command,this.shell=r.isShellCommand,this.args=r.args.slice(0),this.options=r.options||{}}if(this.childProcess=null,this.terminateRequested=!1,this.options.env){var s=Object.create(null);Object.keys(process.env).forEach(function(e){s[e]=process.env[e]}),Object.keys(this.options.env).forEach(function(e){s[e]=o.options.env[e]}),this.options.env=s}}return e.prototype.getSanitizedCommand=function(){var t=this.cmd.toLowerCase(),i=t.lastIndexOf(n.sep);return-1!==i&&(t=t.substring(i+1)),e.WellKnowCommands[t]?t:"other"},e.prototype.start=function(){var e=this;return h.isWindows&&(this.options&&this.options.cwd&&d.isUNC(this.options.cwd)||!this.options&&!this.options.cwd&&d.isUNC(process.cwd()))?a.Promise.wrapError(s.localize(0,null)):this.useExec().then(function(t){var n,i,o,s=new a.PPromise(function(e,t,r){n=e,i=t,o=r});if(t){var u=e.cmd;e.args&&(u=u+" "+e.args.join(" ")),e.childProcess=g(u,e.options,function(t,r,s){e.childProcess=null;var a=t;a&&a.killed?i({killed:e.terminateRequested,stdout:r.toString(),stderr:s.toString()}):e.handleExec(n,o,t,r,s)})}else{var d=null,p=function(t){e.childProcess=null,e.childProcessPromise=null,e.handleClose(t,n,o,i);var r={terminated:e.terminateRequested};c.isNumber(t)&&(r.cmdCode=t),n(r)};if(e.shell&&h.isWindows){var f=l.clone(e.options);f.windowsVerbatimArguments=!0,f.detached=!1;var m=!1,_=!1,b=[],S=e.ensureQuotes(e.cmd);b.push(S.value),m=S.quoted,e.args&&e.args.forEach(function(t){S=e.ensureQuotes(t),b.push(S.value),_=_&&S.quoted});var E=["/s","/c"];m?_?E.push('"'+b.join(" ")+'"'):b.length>1?E.push('"'+b[0]+'" '+b.slice(1).join(" ")):E.push('"'+b[0]+'"'):E.push(b.join(" ")),d=y(v(),E,f)}else e.cmd?d=y(e.cmd,e.args,e.options):e.module&&(e.childProcessPromise=new a.TPromise(function(t,s,a){r.fork(e.module,e.args,e.options,function(r,a){return r?(s(r),void i({terminated:e.terminateRequested,error:r})):(e.childProcess=a,e.childProcess.on("close",p),e.handleSpawn(a,n,o,i,!1),void t(a))})}));d&&(e.childProcess=d,e.childProcessPromise=a.TPromise.as(d),d.on("error",function(t){e.childProcess=null,i({terminated:e.terminateRequested,error:t})}),d.pid&&(e.childProcess.on("close",p),e.handleSpawn(d,n,o,i,!0)))}return s})},e.prototype.handleClose=function(e,t,n,i){},e.prototype.ensureQuotes=function(t){return e.regexp.test(t)?{value:'"'+t+'"',quoted:!0}:{value:t,quoted:t.length>0&&'"'===t[0]&&'"'===t[t.length-1]}},e.prototype.isRunning=function(){return null!==this.childProcessPromise},Object.defineProperty(e.prototype,"pid",{get:function(){return this.childProcessPromise.then(function(e){return e.pid},function(e){return-1})},enumerable:!0,configurable:!0}),e.prototype.terminate=function(){var e=this;return this.childProcessPromise?this.childProcessPromise.then(function(t){e.terminateRequested=!0;var n=m(t,e.options.cwd);return n.success&&(e.childProcess=null),n},function(e){return{success:!0}}):a.TPromise.as({success:!0})},e.prototype.useExec=function(){var e=this;return new a.TPromise(function(t,n,i){e.shell&&h.isWindows||t(!1);var o=y(v(),["/s","/c"]);o.on("error",function(e){t(!0)}),o.on("exit",function(e){t(!1)})})},e.WellKnowCommands={ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},e.regexp=/^[^"].* .*[^"]/,e}();t.AbstractProcess=_;var b=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,o){[i,o].forEach(function(e,n){var i=new p.LineDecoder,o=i.write(e);o.forEach(function(e){t({line:e,source:0===n?f.Source.stdout:f.Source.stderr})});var r=i.end();r&&t({line:r,source:0===n?f.Source.stdout:f.Source.stderr})}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,o){var r=this;this.stdoutLineDecoder=new p.LineDecoder,this.stderrLineDecoder=new p.LineDecoder,e.stdout.on("data",function(e){var t=r.stdoutLineDecoder.write(e);t.forEach(function(e){return n({line:e,source:f.Source.stdout})})}),e.stderr.on("data",function(e){var t=r.stderrLineDecoder.write(e);t.forEach(function(e){return n({line:e,source:f.Source.stderr})})})},t.prototype.handleClose=function(e,t,n,i){[this.stdoutLineDecoder.end(),this.stderrLineDecoder.end()].forEach(function(e,t){e&&n({line:e,source:0===t?f.Source.stdout:f.Source.stderr})})},t}(_);t.LineProcess=b;var S=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,o){t({data:i,source:f.Source.stdout}),t({data:o,source:f.Source.stderr}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,o){e.stdout.on("data",function(e){n({data:e,source:f.Source.stdout})}),e.stderr.on("data",function(e){n({data:e,source:f.Source.stderr})})},t}(_);t.BufferProcess=S;var E=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,r){var s=new o.PassThrough;s.end(i);var a=new o.PassThrough;a.end(r),t({stdin:null,stdout:s,stderr:a}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,o){o?process.nextTick(function(){n({stdin:e.stdin,stdout:e.stdout,stderr:e.stderr})}):n({stdin:e.stdin,stdout:e.stdout,stderr:e.stderr})},t}(_);t.StreamProcess=E}),define("vs/nls!vs/base/node/zip",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/node/zip",t)}),define("vs/nls!vs/base/parts/quickopen/browser/quickOpenModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/parts/quickopen/browser/quickOpenModel",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/quickopen/browser/quickOpenModel",["require","exports","vs/nls!vs/base/parts/quickopen/browser/quickOpenModel","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/filters","vs/base/common/strings","vs/base/common/paths","vs/base/common/comparers","vs/base/browser/ui/actionbar/actionbar","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/browser/dom","vs/base/common/scorer"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=0,m=function(){function e(e){void 0===e&&(e=[]),this.id=(f++).toString(),this.labelHighlights=e,this.descriptionHighlights=[]}return e.prototype.getId=function(){return this.id},e.prototype.getPrefix=function(){return this.labelPrefix},e.prototype.getLabel=function(){return null},e.prototype.getAriaLabel=function(){return this.getLabel()},e.prototype.getDetail=function(){return null},e.prototype.getIcon=function(){return null},e.prototype.getDescription=function(){return null},e.prototype.getResource=function(){return null},e.prototype.isHidden=function(){return this.hidden},e.prototype.setHidden=function(e){this.hidden=e},e.prototype.setPrefix=function(e){this.labelPrefix=e},e.prototype.setHighlights=function(e,t,n){this.labelHighlights=e,this.descriptionHighlights=t,this.detailHighlights=n},e.prototype.getHighlights=function(){return[this.labelHighlights,this.descriptionHighlights,this.detailHighlights]},e.prototype.run=function(e,t){return!1},e.compare=function(e,t,n){n&&(n=s.stripWildcards(n).toLowerCase());var i=e.getHighlights()[0]||[],o=t.getHighlights()[0]||[];if(i.length&&!o.length)return-1;if(!i.length&&o.length)return 1;var r=e.getLabel(),a=t.getLabel();if(r===a){var u=e.getResource(),l=t.getResource();u&&l&&(r=u.fsPath,a=l.fsPath)}return c.compareAnything(r,a,n)},e.compareByScore=function(e,t,n,i,o){var r=e.getLabel(),s=t.getLabel(),a=c.compareByPrefix(r,s,n);if(a)return a;var u=p.score(r,n,o),l=p.score(s,n,o);if(u!==l)return u>l?-1:1;var d=e.getResource(),h=t.getResource();if(d&&h){var f=p.score(d.fsPath,n,o),m=p.score(h.fsPath,n,o);if(f!==m)return f>m?-1:1}return r.length!==s.length?r.length<s.length?-1:1:d&&h&&d.fsPath.length!==h.fsPath.length?d.fsPath.length<h.fsPath.length?-1:1:r===s&&d&&h?c.compareAnything(d.fsPath,h.fsPath,i):c.compareAnything(r,s,i)},e.highlight=function(e,t,n){void 0===n&&(n=!1);var i=[],o=[],s=e.getLabel(),c=e.getDescription();if(e.getResource())if(t.toLowerCase()===e.getResource().fsPath.toLowerCase())i.push({start:0,end:s.length}),o.push({start:0,end:c.length});else if(n||t.indexOf(a.nativeSep)>=0){var u=r.matchesFuzzy(t,s,n);if(u)i=u;else{var l=c?c+a.nativeSep:"",d=l.length,h=r.matchesFuzzy(t,l+s,n);h&&h.forEach(function(e){e.start<d&&e.end>d?(i.push({start:0,end:e.end-d}),o.push({start:e.start,end:d})):e.start>=d?i.push({start:e.start-d,end:e.end-d}):o.push(e)})}}else i=r.matchesFuzzy(t,s);else i=r.matchesFuzzy(t,s);return{labelHighlights:i,descriptionHighlights:o}},e}();t.QuickOpenEntry=m;var v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getHeight=function(){return 0},t.prototype.render=function(e,t,n){return null},t}(m);t.QuickOpenEntryItem=v;var g=function(e){function t(t,n,i){e.call(this),this.entry=t,this.groupLabel=n,this.withBorder=i}return __extends(t,e),t.prototype.getGroupLabel=function(){return this.groupLabel},t.prototype.setGroupLabel=function(e){this.groupLabel=e},t.prototype.showBorder=function(){return this.withBorder},t.prototype.setShowBorder=function(e){this.withBorder=e},t.prototype.getPrefix=function(){return this.entry?this.entry.getPrefix():e.prototype.getPrefix.call(this)},t.prototype.getLabel=function(){return this.entry?this.entry.getLabel():e.prototype.getLabel.call(this)},t.prototype.getAriaLabel=function(){return this.entry?this.entry.getAriaLabel():e.prototype.getAriaLabel.call(this)},t.prototype.getDetail=function(){return this.entry?this.entry.getDetail():e.prototype.getDetail.call(this)},t.prototype.getResource=function(){return this.entry?this.entry.getResource():e.prototype.getResource.call(this)},t.prototype.getIcon=function(){return this.entry?this.entry.getIcon():e.prototype.getIcon.call(this)},t.prototype.getDescription=function(){return this.entry?this.entry.getDescription():e.prototype.getDescription.call(this)},t.prototype.getEntry=function(){return this.entry},t.prototype.getHighlights=function(){return this.entry?this.entry.getHighlights():e.prototype.getHighlights.call(this)},t.prototype.isHidden=function(){return this.entry?this.entry.isHidden():e.prototype.isHidden.call(this)},t.prototype.setHighlights=function(t,n){this.entry?this.entry.setHighlights(t,n):e.prototype.setHighlights.call(this,t,n)},t.prototype.setHidden=function(t){this.entry?this.entry.setHidden(t):e.prototype.setHidden.call(this,t)},t.prototype.run=function(t,n){return this.entry?this.entry.run(t,n):e.prototype.run.call(this,t,n)},t}(m);t.QuickOpenEntryGroup=g;var y="quickOpenEntry",_="quickOpenEntryGroup",b="quickOpenEntryItem",S=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getTemplateId=function(e,t){return b},t.prototype.render=function(t,n,i,o){return n instanceof v?n.render(t,i,o):e.prototype.render.call(this,t,n,i,o)},t}(l.LegacyRenderer),E=function(){function e(){}return e.prototype.hasActions=function(e,t){return!1},e.prototype.getActions=function(e,t){return i.TPromise.as(null)},e.prototype.hasSecondaryActions=function(e,t){return!1},e.prototype.getSecondaryActions=function(e,t){return i.TPromise.as(null)},e.prototype.getActionItem=function(e,t,n){return null},e}(),w=function(){function e(e,t){void 0===e&&(e=new E),void 0===t&&(t=null),this.actionProvider=e,this.actionRunner=t,this.entryItemRenderer=new S}return e.prototype.getHeight=function(e){return e instanceof v?e.getHeight():e.getDetail()?44:22},e.prototype.getTemplateId=function(e){return e instanceof v?b:e instanceof g?_:y},e.prototype.renderTemplate=function(e,t){if(e===b)return this.entryItemRenderer.renderTemplate(null,e,t);var n;e===_&&(n=document.createElement("div"),h.addClass(n,"results-group"),t.appendChild(n)),h.addClass(t,"actions");var i=document.createElement("div");h.addClass(i,"sub-content"),t.appendChild(i);var o=document.createElement("div");h.addClass(o,"primary-action-bar"),t.appendChild(o);var r=new u.ActionBar(o,{actionRunner:this.actionRunner}),s=document.createElement("div");h.addClass(s,"quick-open-entry"),i.appendChild(s);var a=document.createElement("span");s.appendChild(a);var c=document.createElement("span");s.appendChild(c);var l=new d.HighlightedLabel(s),p=document.createElement("span");s.appendChild(p),h.addClass(p,"quick-open-entry-description");var f=new d.HighlightedLabel(p),m=document.createElement("div");s.appendChild(m),h.addClass(m,"quick-open-entry-meta");var v=new d.HighlightedLabel(m);return{container:t,icon:a,prefix:c,label:l,detail:v,description:f,group:n,actionBar:r}},e.prototype.renderElement=function(e,t,n){if(t===b)return void this.entryItemRenderer.renderElement(null,e,t,n);var i=n;if(this.actionProvider.hasActions(null,e)?h.addClass(i.container,"has-actions"):h.removeClass(i.container,"has-actions"),i.actionBar.context=e,this.actionProvider.getActions(null,e).then(function(e){i.actionBar.isEmpty()&&e&&e.length>0?i.actionBar.push(e,{icon:!0,label:!1}):i.actionBar.isEmpty()||e&&0!==e.length||i.actionBar.clear()}),e instanceof g){var o=e;o.showBorder()?h.addClass(i.container,"results-group-separator"):h.removeClass(i.container,"results-group-separator");var r=o.getGroupLabel()||"";n.group.textContent=r}if(e instanceof m){var s=e.getHighlights(),a=s[0],c=s[1],u=s[2],l=e.getIcon()?"quick-open-entry-icon "+e.getIcon():"";i.icon.className=l;var d=e.getPrefix()||"";i.prefix.textContent=d,i.label.set(e.getLabel(),a||[]),i.detail.set(e.getDetail(),u),i.description.set(e.getDescription(),c||[])}},e.prototype.disposeTemplate=function(e,t){if(e===b)this.entryItemRenderer.disposeTemplate(null,e,t);else{var n=t;n.actionBar.dispose(),n.actionBar=null,n.container=null,n.description.dispose(),n.description=null,n.detail.dispose(),n.detail=null,n.group=null,n.icon=null,n.label.dispose(),n.label=null,n.prefix=null}},e}(),C=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=new E),this._entries=e,this._dataSource=this,this._renderer=new w(t),this._filter=this,this._runner=this,this._accessibilityProvider=this}return Object.defineProperty(e.prototype,"entries",{get:function(){return this._entries},set:function(e){this._entries=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runner",{get:function(){return this._runner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityProvider",{get:function(){return this._accessibilityProvider},enumerable:!0,configurable:!0}),e.prototype.addEntries=function(e){o.isArray(e)&&(this._entries=this._entries.concat(e))},e.prototype.setEntries=function(e){o.isArray(e)&&(this._entries=e)},e.prototype.getEntries=function(e){return e?this._entries.filter(function(e){return!e.isHidden()}):this._entries},e.prototype.getId=function(e){return e.getId()},e.prototype.getLabel=function(e){return e.getLabel()},e.prototype.getAriaLabel=function(e){var t=e.getAriaLabel();return t?n.localize(0,null,e.getAriaLabel()):n.localize(1,null)},e.prototype.isVisible=function(e){return!e.isHidden()},e.prototype.run=function(e,t,n){return e.run(t,n)},e}();t.QuickOpenModel=C}),define("vs/nls!vs/base/parts/quickopen/browser/quickOpenWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/parts/quickopen/browser/quickOpenWidget",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/quickopen/browser/quickOpenWidget",["require","exports","vs/nls!vs/base/parts/quickopen/browser/quickOpenWidget","vs/base/common/winjs.base","vs/base/common/platform","vs/base/browser/browser","vs/base/common/events","vs/base/common/types","vs/base/common/errors","vs/base/common/uuid","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenViewer","vs/base/browser/builder","vs/base/browser/ui/inputbox/inputBox","vs/base/common/severity","vs/base/parts/tree/browser/treeImpl","vs/base/browser/ui/progressbar/progressbar","vs/base/browser/keyboardEvent","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/dom","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/css!./quickopen"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onContextMenu=function(t,n,i){return o.isMacintosh?this.onLeftClick(t,n,i):e.prototype.onContextMenu.call(this,t,n,i)},t}(y.DefaultController);t.QuickOpenController=E;var w=n.localize(0,null),C=function(){function e(e,t,n,i){this.toUnbind=[],this.container=e,this.callbacks=t,this.options=n,this.usageLogger=i,this.model=null}return e.prototype.getModel=function(){return this.model},e.prototype.setCallbacks=function(e){this.callbacks=e},e.prototype.create=function(){var e=this;this.builder=h.$().div(function(t){t.on(_.EventType.KEY_DOWN,function(t){var n=new g.StandardKeyboardEvent(t);n.keyCode===b.KeyCode.Escape&&(_.EventHelper.stop(t,!0),e.hide(!0))}).on(_.EventType.CONTEXT_MENU,function(e){return _.EventHelper.stop(e,!0)}).on(_.EventType.FOCUS,function(t){return e.gainingFocus()},null,!0).on(_.EventType.BLUR,function(t){return e.loosingFocus(t)},null,!0),e.progressBar=new v.ProgressBar(t.clone()),e.progressBar.getContainer().hide(),t.div({"class":"quick-open-input"},function(t){e.inputContainer=t,e.inputBox=new p.InputBox(t.getHTMLElement(),null,{placeholder:e.options.inputPlaceHolder||"",ariaLabel:w}),e.inputElement=e.inputBox.inputElement,e.inputElement.setAttribute("role","combobox"),e.inputElement.setAttribute("aria-haspopup","false"),e.inputElement.setAttribute("aria-autocomplete","list"),_.addDisposableListener(e.inputBox.inputElement,_.EventType.KEY_DOWN,function(t){var n=new g.StandardKeyboardEvent(t);if(n.keyCode!==b.KeyCode.Tab)if(n.keyCode===b.KeyCode.Tab||n.keyCode===b.KeyCode.DownArrow||n.keyCode===b.KeyCode.UpArrow||n.keyCode===b.KeyCode.PageDown||n.keyCode===b.KeyCode.PageUp)_.EventHelper.stop(t,!0),e.navigateInTree(n.keyCode,n.shiftKey);else if(n.keyCode===b.KeyCode.Enter){_.EventHelper.stop(t,!0);var i=e.tree.getFocus();i&&e.elementSelected(i,t)}else!r.isIE9||n.keyCode!==b.KeyCode.Backspace&&n.keyCode!==b.KeyCode.Delete||e.onType()}),_.addDisposableListener(e.inputBox.inputElement,_.EventType.INPUT,function(t){e.onType()})}),e.treeContainer=t.div({"class":"quick-open-tree"},function(t){e.tree=new m.Tree(t.getHTMLElement(),{dataSource:new d.DataSource(e),controller:new E({clickBehavior:y.ClickBehavior.ON_MOUSE_UP}),renderer:new d.Renderer(e),filter:new d.Filter(e),accessibilityProvider:new d.AccessibilityProvider(e)},{twistiePixels:11,indentPixels:0,alwaysFocused:!0,verticalScrollMode:"visible",ariaLabel:n.localize(1,null)}),e.treeElement=e.tree.getHTMLElement(),e.toUnbind.push(e.tree.addListener(s.EventType.FOCUS,function(t){e.elementFocused(t.focus,t)})),e.toUnbind.push(e.tree.addListener(s.EventType.SELECTION,function(t){t.selection&&t.selection.length>0&&e.elementSelected(t.selection[0],t)}))}).on(_.EventType.KEY_DOWN,function(t){var n=new g.StandardKeyboardEvent(t);e.quickNavigateConfiguration&&(n.keyCode!==b.KeyCode.DownArrow&&n.keyCode!==b.KeyCode.UpArrow&&n.keyCode!==b.KeyCode.PageDown&&n.keyCode!==b.KeyCode.PageUp||(_.EventHelper.stop(t,!0),e.navigateInTree(n.keyCode)))}).on(_.EventType.KEY_UP,function(t){var n=new g.StandardKeyboardEvent(t),i=n.keyCode;if(e.quickNavigateConfiguration){var r=e.quickNavigateConfiguration.keybindings,s=i===b.KeyCode.Enter||r.some(function(e){if(e.hasShift()&&i===b.KeyCode.Shift)return!(n.ctrlKey||n.altKey||n.metaKey);if(e.hasAlt()&&i===b.KeyCode.Alt)return!0;if(o.isMacintosh){if(e.hasCtrlCmd()&&i===b.KeyCode.Meta)return!0;if(e.hasWinCtrl()&&i===b.KeyCode.Ctrl)return!0}else{if(e.hasCtrlCmd()&&i===b.KeyCode.Ctrl)return!0;if(e.hasWinCtrl()&&i===b.KeyCode.Meta)return!0}return!1});if(s){var a=e.tree.getFocus();a&&e.elementSelected(a,t)}}}).clone()}).addClass("quick-open-widget").addClass(r.isIE10orEarlier?" no-shadow":"").build(this.container),this.layoutDimensions&&this.layout(this.layoutDimensions)},e.prototype.onType=function(){var e=this.inputBox.value;this.helpText&&(e?this.helpText.hide():this.helpText.show()),this.callbacks.onType(e)},e.prototype.quickNavigate=function(e,t){this.isVisible&&(this.quickNavigateConfiguration||(this.quickNavigateConfiguration=e,this.tree.DOMFocus()),this.navigateInTree(t?b.KeyCode.DownArrow:b.KeyCode.UpArrow))},e.prototype.navigateInTree=function(e,t){var n=this.tree.getInput(),i=n?n.entries:[],o=this.tree.getFocus(),r=!1,s=!1;if(i.length>1&&(!(e===b.KeyCode.UpArrow||e===b.KeyCode.Tab&&t)||o!==i[0]&&o?e!==b.KeyCode.DownArrow&&(e!==b.KeyCode.Tab||t)||o!==i[i.length-1]||(this.tree.focusFirst(),r=!0):(this.tree.focusLast(),r=!0)),!r)switch(e){case b.KeyCode.DownArrow:this.tree.focusNext();break;case b.KeyCode.UpArrow:this.tree.focusPrevious();break;case b.KeyCode.PageDown:this.tree.focusNextPage();break;case b.KeyCode.PageUp:this.tree.focusPreviousPage();break;case b.KeyCode.Tab:t?this.tree.focusPrevious():this.tree.focusNext()}o=this.tree.getFocus(),o&&(s?this.tree.reveal(o,0).done(null,c.onUnexpectedError):this.tree.reveal(o).done(null,c.onUnexpectedError))},e.prototype.elementFocused=function(e,t){if(e&&this.isVisible()){this.inputElement.setAttribute("aria-activedescendant",this.treeElement.getAttribute("aria-activedescendant"));var n={event:t,quickNavigateConfiguration:this.quickNavigateConfiguration};this.model.runner.run(e,l.Mode.PREVIEW,n)}},e.prototype.elementSelected=function(e,t){var n=!0;if(this.isVisible()){var i={event:t,quickNavigateConfiguration:this.quickNavigateConfiguration};n=this.model.runner.run(e,l.Mode.OPEN,i)}if(this.usageLogger){var o=this.model.entries.indexOf(e),r=this.model.entries.length;this.usageLogger.publicLog("quickOpenWidgetItemAccepted",{index:o,count:r,isQuickNavigate:!!this.quickNavigateConfiguration})}n&&this.hide()},e.prototype.show=function(e,t,n){a.isUndefined(t)&&(t={}),this.visible=!0,this.isLoosingFocus=!1,this.quickNavigateConfiguration=n,this.quickNavigateConfiguration?(this.inputContainer.hide(),this.options.enableAnimations&&this.treeContainer.removeClass("transition"),this.builder.show(),this.tree.DOMFocus()):(this.inputContainer.show(),this.options.enableAnimations&&this.treeContainer.addClass("transition"),this.builder.show(),this.inputBox.focus()),this.helpText&&(this.quickNavigateConfiguration||a.isString(e)?this.helpText.hide():this.helpText.show()),a.isString(e)?this.doShowWithPrefix(e):this.doShowWithInput(e,t),this.callbacks.onShow&&this.callbacks.onShow()},e.prototype.doShowWithPrefix=function(e){this.inputBox.value=e,this.callbacks.onType(e)},e.prototype.doShowWithInput=function(e,t){this.setInput(e,t)},e.prototype.setInputAndLayout=function(e,t){var n=this,i=u.generateUuid();this.currentInputToken=i,this.setTreeHeightForInput(e).then(function(){n.currentInputToken===i&&n.tree.setInput(null).then(function(){return n.model=e,n.inputElement.setAttribute("aria-haspopup",String(e&&e.entries&&e.entries.length>0)),n.tree.setInput(e)}).done(function(){n.tree.layout(),e&&e.entries.some(function(t){return n.isElementVisible(e,t)})&&n.autoFocus(e,t)},c.onUnexpectedError)})},e.prototype.isElementVisible=function(e,t){return e.filter?e.filter.isVisible(t):!0},e.prototype.autoFocus=function(e,t){var n=this;void 0===t&&(t={});var i=e.entries.filter(function(t){return n.isElementVisible(e,t)});if(t.autoFocusPrefixMatch){for(var o=void 0,r=void 0,s=t.autoFocusPrefixMatch,a=s.toLowerCase(),u=0;u<i.length;u++){var l=i[u],d=e.dataSource.getLabel(l);if(o||0!==d.indexOf(s)?r||0!==d.toLowerCase().indexOf(a)||(r=l):o=l,o&&r)break}var h=o||r;if(h)return this.tree.setFocus(h),void this.tree.reveal(h,0).done(null,c.onUnexpectedError)}t.autoFocusFirstEntry?(this.tree.focusFirst(),this.tree.reveal(this.tree.getFocus(),0).done(null,c.onUnexpectedError)):"number"==typeof t.autoFocusIndex?i.length>t.autoFocusIndex&&(this.tree.focusNth(t.autoFocusIndex),this.tree.reveal(this.tree.getFocus()).done(null,c.onUnexpectedError)):t.autoFocusSecondEntry&&i.length>1&&this.tree.focusNth(1)},e.prototype.refresh=function(e,t){var n=this;this.isVisible()&&this.setTreeHeightForInput(e).then(function(){n.tree.refresh().done(function(){n.tree.layout(),!n.tree.getFocus()&&e&&e.entries.some(function(t){return n.isElementVisible(e,t)})&&n.autoFocus(e,t)},c.onUnexpectedError)})},e.prototype.setTreeHeightForInput=function(e){var t=this,n=this.getHeight(e)+"px",o=this.treeContainer.style("height");return this.treeContainer.style({height:n}),this.treeContainer.hasClass("transition")&&o!==n?new i.TPromise(function(e,n){var i=[],o=!1,r=function(){o||(o=!0,i=S.disposeAll(i),e(null))};t.treeContainer.once("webkitTransitionEnd",r,i),t.treeContainer.once("transitionend",r,i)}):i.TPromise.as(null)},e.prototype.getHeight=function(t){var n=this,i=t.renderer;
if(!t){var o=i.getHeight(null);return this.options.minItemsToShow?this.options.minItemsToShow*o:0}var r,s=0;this.layoutDimensions&&this.layoutDimensions.height&&(r=.4*(this.layoutDimensions.height-50)),(!r||r>e.MAX_ITEMS_HEIGHT)&&(r=e.MAX_ITEMS_HEIGHT);for(var a=t.entries.filter(function(e){return n.isElementVisible(t,e)}),c=this.options.maxItemsToShow||a.length,u=0;c>u&&u<a.length;u++){var l=i.getHeight(a[u]);if(!(r>=s+l))break;s+=l}return s},e.prototype.hide=function(e){var t=this;if(void 0===e&&(e=!1),this.isVisible()){if(this.visible=!1,this.builder.hide(),this.builder.domBlur(),e&&this.model){var n=this.model.entries.filter(function(e){return t.isElementVisible(t.model,e)}).length;this.usageLogger&&this.usageLogger.publicLog("quickOpenWidgetCancelled",{count:n,isQuickNavigate:!!this.quickNavigateConfiguration})}this.inputBox.value="",this.tree.setInput(null),this.inputElement.setAttribute("aria-haspopup","false"),this.treeContainer.style({height:(this.options.minItemsToShow?22*this.options.minItemsToShow:0)+"px"}),this.progressBar.stop().getContainer().hide(),this.tree.isDOMFocused()?this.tree.DOMBlur():this.inputBox.hasFocus()&&this.inputBox.blur(),e?this.callbacks.onCancel():this.callbacks.onOk(),this.callbacks.onHide&&this.callbacks.onHide()}},e.prototype.setPlaceHolder=function(e){this.inputBox&&this.inputBox.setPlaceHolder(e)},e.prototype.setValue=function(e){this.inputBox&&(this.inputBox.value=e,this.inputBox.select())},e.prototype.setPassword=function(e){this.inputBox&&(this.inputBox.inputElement.type=e?"password":"text")},e.prototype.setInput=function(e,t,n){this.isVisible()&&(this.setInputAndLayout(e,t),this.inputBox&&this.inputBox.setAriaLabel(n||w))},e.prototype.getInput=function(){return this.tree.getInput()},e.prototype.showInputDecoration=function(e){this.inputBox&&this.inputBox.showMessage({type:e===f["default"].Info?p.MessageType.INFO:e===f["default"].Warning?p.MessageType.WARNING:p.MessageType.ERROR,content:""})},e.prototype.clearInputDecoration=function(){this.inputBox&&this.inputBox.hideMessage()},e.prototype.runFocus=function(){var e=this.tree.getFocus();return e?(this.elementSelected(e),!0):!1},e.prototype.getProgressBar=function(){return this.progressBar},e.prototype.setExtraClass=function(e){var t=this.builder.getProperty("extra-class");t&&this.builder.removeClass(t),e?(this.builder.addClass(e),this.builder.setProperty("extra-class",e)):t&&this.builder.removeProperty("extra-class")},e.prototype.isVisible=function(){return this.visible},e.prototype.layout=function(t){this.layoutDimensions=t;var n=Math.min(.62*this.layoutDimensions.width,e.MAX_WIDTH);this.builder&&(this.builder.style({width:n+"px",marginLeft:"-"+n/2+"px"}),this.inputContainer.style({width:n-12+"px"}))},e.prototype.gainingFocus=function(){this.isLoosingFocus=!1},e.prototype.loosingFocus=function(e){var t=this;if(this.isVisible()){var n=e.relatedTarget;!this.quickNavigateConfiguration&&_.isAncestor(n,this.builder.getHTMLElement())||(this.isLoosingFocus=!0,i.TPromise.timeout(0).then(function(){if(t.isLoosingFocus){var e=t.callbacks.onFocusLost&&t.callbacks.onFocusLost();e||t.hide(!1)}}))}},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()();this.progressBar.dispose(),this.inputBox.dispose(),this.tree.dispose()},e.MAX_WIDTH=600,e.MAX_ITEMS_HEIGHT=440,e}();t.QuickOpenWidget=C}),define("vs/nls!vs/editor/common/commonCodeEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/commonCodeEditor",t)}),define("vs/nls!vs/editor/common/config/commonEditorConfig",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/config/commonEditorConfig",t)}),define("vs/nls!vs/editor/common/config/defaultConfig",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/config/defaultConfig",t)}),define("vs/editor/common/config/defaultConfig",["require","exports","vs/nls!vs/editor/common/config/defaultConfig"],function(e,t,n){"use strict";t.USUAL_WORD_SEPARATORS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",t.DEFAULT_INDENTATION={tabSize:4,insertSpaces:!0,detectIndentation:!0};var i=function(){function e(){this.editor={experimentalScreenReader:!0,rulers:[],wordSeparators:t.USUAL_WORD_SEPARATORS,selectionClipboard:!1,ariaLabel:n.localize(0,null),lineNumbers:!0,selectOnLineNumbers:!0,lineNumbersMinChars:5,glyphMargin:!1,lineDecorationsWidth:10,revealHorizontalRightPadding:30,roundedSelection:!0,theme:"vs",readOnly:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1},overviewRulerLanes:2,cursorBlinking:"blink",cursorStyle:"line",fontLigatures:!1,hideCursorInOverviewRuler:!1,scrollBeyondLastLine:!0,automaticLayout:!1,wrappingColumn:300,wrappingIndent:"same",wordWrapBreakBeforeCharacters:"{([+",wordWrapBreakAfterCharacters:" 	})]?|&,;",wordWrapBreakObtrusiveCharacters:".",tabFocusMode:!1,longLineBoundary:300,forcedTokenizationBoundary:1e3,hover:!0,contextmenu:!0,mouseWheelScrollSensitivity:1,quickSuggestions:!0,quickSuggestionsDelay:10,iconsInSuggestions:!0,autoClosingBrackets:!0,formatOnType:!1,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:!0,selectionHighlight:!0,outlineMarkers:!1,referenceInfos:!0,folding:!0,renderWhitespace:!1,fontFamily:"",fontSize:0,lineHeight:0}}return e}();t.DefaultConfig=new i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/strings","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/modelLine","vs/editor/common/model/indentationGuesser","vs/editor/common/config/defaultConfig"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=999,d=function(e){function t(t,n){t.push(s.EventType.ModelContentChanged,s.EventType.ModelOptionsChanged),e.call(this,t),this._options=n.options,this._constructLines(n),this._setVersionId(1),this._isDisposed=!1,this._isDisposing=!1}return __extends(t,e),t.prototype.getOptions=function(){if(this._isDisposed)throw new Error("TextModel.getOptions: Model is disposed");return this._options},t.prototype.updateOptions=function(e){var t=!1,n={tabSize:!1,insertSpaces:!1};"undefined"!=typeof e.insertSpaces&&this._options.insertSpaces!==e.insertSpaces&&(t=!0,n.insertSpaces=!0,this._options.insertSpaces=e.insertSpaces),"undefined"!=typeof e.tabSize&&this._options.tabSize!==e.tabSize&&(t=!0,n.tabSize=!0,this._options.tabSize=e.tabSize),t&&this.emit(s.EventType.ModelOptionsChanged,n)},t.prototype.detectIndentation=function(e,t){var n=this._lines.map(function(e){return e.text}),i=c.guessIndentation(n,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize})},t.prototype._normalizeIndentationFromWhitespace=function(e){for(var t=this._options.tabSize,n=this._options.insertSpaces,i=0,o=0;o<e.length;o++)"	"===e.charAt(o)?i+=t:i++;var r="";if(!n){var s=Math.floor(i/t);i%=t;for(var o=0;s>o;o++)r+="	"}for(var o=0;i>o;o++)r+=" ";return r},t.prototype.normalizeIndentation=function(e){var t=i.firstNonWhitespaceIndex(e);return-1===t&&(t=e.length),this._normalizeIndentationFromWhitespace(e.substring(0,t))+e.substring(t)},t.prototype.getOneIndent=function(){var e=this._options.tabSize,t=this._options.insertSpaces;if(t){for(var n="",i=0;e>i;i++)n+=" ";return n}return"	"},t.prototype.getVersionId=function(){if(this._isDisposed)throw new Error("TextModel.getVersionId: Model is disposed");return this._versionId},t.prototype.getAlternativeVersionId=function(){if(this._isDisposed)throw new Error("TextModel.getAlternativeVersionId: Model is disposed");return this._alternativeVersionId},t.prototype._increaseVersionId=function(){this._setVersionId(this._versionId+1)},t.prototype._setVersionId=function(e){this._versionId=e,this._alternativeVersionId=this._versionId},t.prototype._overwriteAlternativeVersionId=function(e){this._alternativeVersionId=e},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){if(this._isDisposed)throw new Error("TextModel.dispose: Model is disposed");this._isDisposed=!0,this._lines=null,this._EOL=null,this._BOM=null,e.prototype.dispose.call(this)},t.prototype._createContentChangedFlushEvent=function(){return{changeType:s.EventType.ModelContentChangedFlush,detail:null,versionId:-1,isUndoing:!1,isRedoing:!1}},t.prototype._emitContentChanged2=function(e,t,n,i,o,a,c,u){var l={range:new r.Range(e,t,n,i),rangeLength:o,text:a,eol:this._EOL,versionId:this.getVersionId(),isUndoing:c,isRedoing:u};this._isDisposing||this.emit(s.EventType.ModelContentChanged2,l)},t.prototype._resetValue=function(e,t){this._constructLines(t),this._increaseVersionId(),e.detail=this.toRawText(),e.versionId=this._versionId},t.prototype.toRawText=function(){return{BOM:this._BOM,EOL:this._EOL,lines:this.getLinesContent(),length:this.getValueLength(),options:this._options}},t.prototype.equals=function(e){if(this._BOM!==e.BOM)return!1;if(this._EOL!==e.EOL)return!1;if(this._lines.length!==e.lines.length)return!1;for(var t=0,n=this._lines.length;n>t;t++)if(this._lines[t].text!==e.lines[t])return!1;return!0},t.prototype.setValue=function(e){if(this._isDisposed)throw new Error("TextModel.setValue: Model is disposed");var n=null;null!==e&&(n=t.toRawText(e,{tabSize:this._options.tabSize,insertSpaces:this._options.insertSpaces,detectIndentation:!1,defaultEOL:this._options.defaultEOL})),this.setValueFromRawText(n)},t.prototype.setValueFromRawText=function(e){if(this._isDisposed)throw new Error("TextModel.setValueFromRawText: Model is disposed");if(null!==e){var t=this.getFullModelRange(),n=this.getValueLengthInRange(t),i=this.getLineCount(),o=this.getLineMaxColumn(i),r=this._createContentChangedFlushEvent();this._resetValue(r,e),this._emitModelContentChangedFlushEvent(r),this._emitContentChanged2(1,1,i,o,n,this.getValue(),!1,!1)}},t.prototype.getValue=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModel.getValue: Model is disposed");var n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._BOM+i:i},t.prototype.getValueLength=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModel.getValueLength: Model is disposed");var n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._BOM.length+i:i},t.prototype.getEmptiedValueInRange=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=s.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getEmptiedValueInRange: Model is disposed");var i=this.validateRange(e);if(i.isEmpty())return"";if(i.startLineNumber===i.endLineNumber)return this._repeatCharacter(t,i.endColumn-i.startColumn);var o=this._getEndOfLine(n),r=i.startLineNumber-1,a=i.endLineNumber-1,c=[];c.push(this._repeatCharacter(t,this._lines[r].text.length-i.startColumn+1));for(var u=r+1;a>u;u++)c.push(this._repeatCharacter(t,this._lines[u].text.length));return c.push(this._repeatCharacter(t,i.endColumn-1)),c.join(o)},t.prototype._repeatCharacter=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},t.prototype.getValueInRange=function(e,t){if(void 0===t&&(t=s.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getValueInRange: Model is disposed");var n=this.validateRange(e);if(n.isEmpty())return"";if(n.startLineNumber===n.endLineNumber)return this._lines[n.startLineNumber-1].text.substring(n.startColumn-1,n.endColumn-1);var i=this._getEndOfLine(t),o=n.startLineNumber-1,r=n.endLineNumber-1,a=[];a.push(this._lines[o].text.substring(n.startColumn-1));for(var c=o+1;r>c;c++)a.push(this._lines[c].text);return a.push(this._lines[r].text.substring(0,n.endColumn-1)),a.join(i)},t.prototype.getValueLengthInRange=function(e,t){if(void 0===t&&(t=s.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getValueInRange: Model is disposed");var n=this.validateRange(e);if(n.isEmpty())return 0;if(n.startLineNumber===n.endLineNumber)return n.endColumn-n.startColumn;var i=this._getEndOfLine(t).length,o=n.startLineNumber-1,r=n.endLineNumber-1,a=0;a+=this._lines[o].text.length-n.startColumn+1;for(var c=o+1;r>c;c++)a+=i+this._lines[c].text.length;return a+=i+(n.endColumn-1)},t.prototype.isDominatedByLongLines=function(e){if(this._isDisposed)throw new Error("TextModel.isDominatedByLongLines: Model is disposed");var t,n,i,o=0,r=0,s=this._lines;for(t=0,n=this._lines.length;n>t;t++)i=s[t].text.length,i>=e?r+=i:o+=i;return r>o},t.prototype.getLineCount=function(){if(this._isDisposed)throw new Error("TextModel.getLineCount: Model is disposed");return this._lines.length},t.prototype.getLineContent=function(e){if(this._isDisposed)throw new Error("TextModel.getLineContent: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].text},t.prototype.getLinesContent=function(){if(this._isDisposed)throw new Error("TextModel.getLineContent: Model is disposed");for(var e=[],t=0,n=this._lines.length;n>t;t++)e[t]=this._lines[t].text;return e},t.prototype.getEOL=function(){if(this._isDisposed)throw new Error("TextModel.getEOL: Model is disposed");return this._EOL},t.prototype.setEOL=function(e){var t=e===s.EndOfLineSequence.CRLF?"\r\n":"\n";if(this._EOL!==t){var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._EOL=t,this._increaseVersionId();var a=this._createContentChangedFlushEvent();a.detail=this.toRawText(),a.versionId=this._versionId,this._emitModelContentChangedFlushEvent(a),this._emitContentChanged2(1,1,o,r,i,this.getValue(),!1,!1)}},t.prototype.getLineMinColumn=function(e){return 1},t.prototype.getLineMaxColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineMaxColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].text.length+1},t.prototype.getLineFirstNonWhitespaceColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineFirstNonWhitespaceColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");var t=i.firstNonWhitespaceIndex(this._lines[e-1].text);return-1===t?0:t+1},t.prototype.getLineLastNonWhitespaceColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineLastNonWhitespaceColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");var t=i.lastNonWhitespaceIndex(this._lines[e-1].text);return-1===t?0:t+2},t.prototype.validateLineNumber=function(e){if(this._isDisposed)throw new Error("TextModel.validateLineNumber: Model is disposed");return 1>e&&(e=1),e>this._lines.length&&(e=this._lines.length),e},t.prototype.validatePosition=function(e){if(this._isDisposed)throw new Error("TextModel.validatePosition: Model is disposed");var t=e.lineNumber?e.lineNumber:1,n=e.column?e.column:1;1>t&&(t=1),t>this._lines.length&&(t=this._lines.length),1>n&&(n=1);var i=this.getLineMaxColumn(t);return n>i&&(n=i),new o.Position(t,n)},t.prototype.validateRange=function(e){if(this._isDisposed)throw new Error("TextModel.validateRange: Model is disposed");var t=this.validatePosition(new o.Position(e.startLineNumber,e.startColumn)),n=this.validatePosition(new o.Position(e.endLineNumber,e.endColumn));return new r.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.modifyPosition=function(e,t){if(this._isDisposed)throw new Error("TextModel.modifyPosition: Model is disposed");for(var n=this.validatePosition(e);t>0;){var i=this.getLineMaxColumn(n.lineNumber);if(n.column<i){var o=Math.min(t,i-n.column);t-=o,n.column+=o}if(0===t)break;if(t-=this._EOL.length,0>t)throw new Error("TextModel.modifyPosition: Breaking line terminators");if(++n.lineNumber,n.lineNumber>this._lines.length)throw new Error("TextModel.modifyPosition: Offset goes beyond the end of the model");n.column=1}for(;0>t;){if(n.column>1){var r=Math.min(-t,n.column-1);t+=r,n.column-=r}if(0===t)break;if(t+=this._EOL.length,t>0)throw new Error("TextModel.modifyPosition: Breaking line terminators");if(--n.lineNumber,n.lineNumber<1)throw new Error("TextModel.modifyPosition: Offset goes beyond the beginning of the model");n.column=this.getLineMaxColumn(n.lineNumber)}return n},t.prototype.getFullModelRange=function(){if(this._isDisposed)throw new Error("TextModel.getFullModelRange: Model is disposed");var e=this.getLineCount();return new r.Range(1,1,e,this.getLineMaxColumn(e))},t.prototype._emitModelContentChangedFlushEvent=function(e){this._isDisposing||this.emit(s.EventType.ModelContentChanged,e)},t.toRawText=function(e,t){for(var n=0,o=-1;-1!==(o=e.indexOf("\r",o+1));)n++;var r=e.split(/\r\n|\r|\n/),a="";i.startsWithUTF8BOM(r[0])&&(a=i.UTF8_BOM_CHARACTER,r[0]=r[0].substr(1));var u=r.length-1,l="";l=0===u?t.defaultEOL===s.DefaultEndOfLine.LF?"\n":"\r\n":n>u/2?"\r\n":"\n";var d;if(t.detectIndentation){var h=c.guessIndentation(r,t.tabSize,t.insertSpaces);d={tabSize:h.tabSize,insertSpaces:h.insertSpaces,defaultEOL:t.defaultEOL}}else d={tabSize:t.tabSize,insertSpaces:t.insertSpaces,defaultEOL:t.defaultEOL};return{BOM:a,EOL:l,lines:r,length:e.length,options:d}},t.prototype._constructLines=function(e){var t,n,i=e.lines,o=[];for(t=0,n=i.length;n>t;t++)o.push(new a.ModelLine(t+1,i[t]));this._BOM=e.BOM,this._EOL=e.EOL,this._lines=o},t.prototype._getEndOfLine=function(e){switch(e){case s.EndOfLinePreference.LF:return"\n";case s.EndOfLinePreference.CRLF:return"\r\n";case s.EndOfLinePreference.TextDefined:return this.getEOL()}throw new Error("Unknown EOL preference")},t.prototype.findMatches=function(e,t,n,o,s,a){if(void 0===a&&(a=l),this._isDisposed)throw new Error("Model.findMatches: Model is disposed");var c=i.createSafeRegExp(e,n,o,s);if(!c)return[];var u;return u=r.Range.isIRange(t)?t:this.getFullModelRange(),this._doFindMatches(u,c,a)},t.prototype.findNextMatch=function(e,t,n,o,r){if(this._isDisposed)throw new Error("Model.findNextMatch: Model is disposed");var s=i.createSafeRegExp(e,n,o,r);if(!s)return null;var a,c,u=this.validatePosition(t),l=this.getLineCount(),d=u.lineNumber;if(a=this._lines[d-1].text.substring(u.column-1),c=this._findMatchInLine(s,a,d,u.column-1))return c;for(var h=1;l>=h;h++){var p=(d+h-1)%l;if(a=this._lines[p].text,c=this._findMatchInLine(s,a,p+1,0))return c}return null},t.prototype.findPreviousMatch=function(e,t,n,o,r){if(this._isDisposed)throw new Error("Model.findPreviousMatch: Model is disposed");var s=i.createSafeRegExp(e,n,o,r);if(!s)return null;var a,c,u=this.validatePosition(t),l=this.getLineCount(),d=u.lineNumber;if(a=this._lines[d-1].text.substring(0,u.column-1),c=this._findLastMatchInLine(s,a,d))return c;for(var h=1;l>=h;h++){var p=(l+d-h-1)%l;if(a=this._lines[p].text,c=this._findLastMatchInLine(s,a,p+1))return c}return null},t.prototype._doFindMatches=function(e,t,n){var i,o=[],r=0;if(e.startLineNumber===e.endLineNumber)return i=this._lines[e.startLineNumber-1].text.substring(e.startColumn-1,e.endColumn-1),r=this._findMatchesInLine(t,i,e.startLineNumber,e.startColumn-1,r,o,n),o;i=this._lines[e.startLineNumber-1].text.substring(e.startColumn-1),r=this._findMatchesInLine(t,i,e.startLineNumber,e.startColumn-1,r,o,n);for(var s=e.startLineNumber+1;s<e.endLineNumber&&n>r;s++)r=this._findMatchesInLine(t,this._lines[s-1].text,s,0,r,o,n);return n>r&&(i=this._lines[e.endLineNumber-1].text.substring(0,e.endColumn-1),r=this._findMatchesInLine(t,i,e.endLineNumber,0,r,o,n)),o},t.prototype._findMatchInLine=function(e,t,n,i){var o=e.exec(t);return o?new r.Range(n,o.index+1+i,n,o.index+1+o[0].length+i):null},t.prototype._findLastMatchInLine=function(e,t,n){for(var i,o=null;i=e.exec(t);){var s=new r.Range(n,i.index+1,n,i.index+1+i[0].length);if(s.equalsRange(o))break;o=s}return o},t.prototype._findMatchesInLine=function(e,t,n,i,o,s,a){var c;e.lastIndex=0;do if(c=e.exec(t)){var u=new r.Range(n,c.index+1+i,n,c.index+1+c[0].length+i);if(u.equalsRange(s[s.length-1]))return o;if(s.push(u),o++,o>=a)return o}while(c);return o},t.DEFAULT_CREATION_OPTIONS={tabSize:u.DEFAULT_INDENTATION.tabSize,insertSpaces:u.DEFAULT_INDENTATION.insertSpaces,detectIndentation:!1,defaultEOL:s.DefaultEndOfLine.LF},t}(n.OrderGuaranteeEventEmitter);t.TextModel=d;var h=function(){function e(){}return e.fromString=function(e,t){return d.toRawText(e,t)},e.fromStringWithModelOptions=function(e,t){var n=t.getOptions();return d.toRawText(e,{tabSize:n.tabSize,insertSpaces:n.insertSpaces,detectIndentation:!1,defaultEOL:n.defaultEOL})},e}();t.RawText=h}),define("vs/editor/common/modes/nullMode",["require","exports","vs/editor/common/config/defaultConfig"],function(e,t,n){"use strict";function i(e,t,n,i,o){void 0===i&&(i=0);var r=[{startIndex:i,type:""}],s=[{startIndex:i,mode:e}];return{tokens:r,actualStopOffset:i+t.length,endState:n,modeTransitions:s}}var o=function(){function e(e,t){this.mode=e,this.stateData=t}return e.prototype.clone=function(){var t=this.stateData?this.stateData.clone():null;return new e(this.mode,t)},e.prototype.equals=function(e){if(this.mode!==e.getMode())return!1;var t=e.getStateData();return this.stateData||t?this.stateData&&t?this.stateData.equals(t):!1:!0},e.prototype.getMode=function(){return this.mode},e.prototype.tokenize=function(e){return e.advanceToEOS(),{type:""}},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e}();t.NullState=o;var r=function(){function e(){this.richEditSupport={wordDefinition:e.DEFAULT_WORD_REGEXP}}return e.createWordRegExp=function(e){void 0===e&&(e="");for(var t=n.USUAL_WORD_SEPARATORS,i="(-?\\d*\\.\\d\\w*)|([^",o=0;o<t.length;o++)e.indexOf(t[o])>=0||(i+="\\"+t[o]);return i+="\\s]+)",new RegExp(i,"g")},e.prototype.getId=function(){return e.ID},e.prototype.toSimplifiedMode=function(){return this},e.DEFAULT_WORD_REGEXP=e.createWordRegExp(),e.ID="vs.editor.modes.nullMode",e}();t.NullMode=r,t.nullTokenize=i}),define("vs/editor/common/model/textModelWithTokensHelpers",["require","exports","vs/editor/common/core/arrays","vs/editor/common/modes/nullMode"],function(e,t,n,i){"use strict";var o=function(){function e(){}return e._safeGetWordDefinition=function(e){return e.richEditSupport?e.richEditSupport.wordDefinition:null},e.ensureValidWordDefinition=function(e){var t=i.NullMode.DEFAULT_WORD_REGEXP;if(e&&e instanceof RegExp)if(e.global)t=e;else{var n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),t=new RegExp(e.source,n)}return t.lastIndex=0,t},e.massageWordDefinitionOf=function(t){return e.ensureValidWordDefinition(e._safeGetWordDefinition(t))},e.getWords=function(t,n){if(!t._lineIsTokenized(n))return e._getWordsInText(t.getLineContent(n),e.massageWordDefinitionOf(t.getMode()));var i=[],o=t.getLineContent(n);if(o.length>0){var r,s,a,c,u,l,d,h,p,f,m,v,g=t._getLineModeTransitions(n);for(r=0,u=0,s=g.length;s>r;r++)if(d=e.massageWordDefinitionOf(g[r].mode),u=g[r].startIndex,l=s>r+1?g[r+1].startIndex:o.length,h=o.substring(u,l),p=h.match(d))for(m=0,a=0,c=p.length;c>a;a++)v=p[a],v.length>0&&(f=h.indexOf(v,m),m=f+v.length,i.push({start:u+f,end:u+m}))}return i},e._getWordsInText=function(e,t){var n,i,o,r,s,a,c=e.match(t)||[],u=[];for(n=0;n<c.length;n++)a=c[n].trim(),a.length>0&&(i=e.indexOf(a,o),o=i+a.length,r=i,s=o,u.push({start:r,end:s}));return u},e._getWordAtColumn=function(t,n,i,o){var r=o[i].startIndex,s=i+1<o.length?o[i+1].startIndex:t.length,a=o[i].mode;return e._getWordAtText(n,e.massageWordDefinitionOf(a),t.substring(r,s),r)},e.getWordAtPosition=function(t,i){if(!t._lineIsTokenized(i.lineNumber))return e._getWordAtText(i.column,e.massageWordDefinitionOf(t.getMode()),t.getLineContent(i.lineNumber),0);var o=null,r=t.getLineContent(i.lineNumber),s=t._getLineModeTransitions(i.lineNumber),a=i.column-1,c=n.Arrays.findIndexInSegmentsArray(s,a);return o=e._getWordAtColumn(r,i.column,c,s),!o&&c>0&&s[c].startIndex===a&&(o=e._getWordAtColumn(r,i.column,c-1,s)),o},e._getWordAtText=function(e,t,n,i){var o,r,s,a,c,u,l=n.match(t);if(l)for(o=0;o<l.length;o++)if(u=l[o].trim(),u.length>0&&(r=n.indexOf(u,s),s=r+u.length,a=i+r+1,c=i+s+1,e>=a&&c>=e))return{word:u,startColumn:a,endColumn:c};return null},e}();t.WordHelper=o}),define("vs/editor/common/modes/supports/richEditSupport",["require","exports","vs/editor/common/modes/nullMode","vs/editor/common/modes/supports/characterPair","vs/editor/common/modes/supports/electricCharacter","vs/editor/common/modes/supports/onEnter","vs/editor/common/modes/supports/richEditBrackets"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(t,r,a){var c=null;r instanceof e&&(c=r._conf),this._conf=e._mergeConf(c,a),this._conf.brackets&&(this.brackets=new s.RichEditBrackets(t,this._conf.brackets)),this._handleOnEnter(t,this._conf),this._handleComments(t,this._conf),this._conf.__characterPairSupport&&(this.characterPair=new i.CharacterPairSupport(t,this._conf.__characterPairSupport)),(this._conf.__electricCharacterSupport||this._conf.brackets)&&(this.electricCharacter=new o.BracketElectricCharacterSupport(t,this.brackets,this._conf.__electricCharacterSupport)),this.wordDefinition=this._conf.wordPattern||n.NullMode.DEFAULT_WORD_REGEXP}return e._mergeConf=function(e,t){return{comments:e?t.comments||e.comments:t.comments,brackets:e?t.brackets||e.brackets:t.brackets,wordPattern:e?t.wordPattern||e.wordPattern:t.wordPattern,indentationRules:e?t.indentationRules||e.indentationRules:t.indentationRules,onEnterRules:e?t.onEnterRules||e.onEnterRules:t.onEnterRules,__electricCharacterSupport:e?t.__electricCharacterSupport||e.__electricCharacterSupport:t.__electricCharacterSupport,__characterPairSupport:e?t.__characterPairSupport||e.__characterPairSupport:t.__characterPairSupport}},e.prototype._handleOnEnter=function(e,t){var n={},i=!0;t.brackets&&(i=!1,n.brackets=t.brackets),t.indentationRules&&(i=!1,n.indentationRules=t.indentationRules),t.onEnterRules&&(i=!1,n.regExpRules=t.onEnterRules),i||(this.onEnter=new r.OnEnterSupport(e,n))},e.prototype._handleComments=function(e,t){var n=t.comments;if(n&&(this.comments={},n.lineComment&&(this.comments.lineCommentToken=n.lineComment),n.blockComment)){var i=n.blockComment,o=i[0],r=i[1];this.comments.blockCommentStartToken=o,this.comments.blockCommentEndToken=r}},e}();t.RichEditSupport=a}),define("vs/editor/common/modes/supports/tokenizationSupport",["require","exports","vs/editor/common/modes/lineStream","vs/editor/common/modes/nullMode","vs/editor/common/modes/supports"],function(e,t,n,i,o){"use strict";function r(e){return"function"==typeof e}var s=function(){function e(e,t,n,i){if(this._mode=e,this.customization=t,this.supportsNestedModes=n,this._embeddedModesListeners={},this.supportsNestedModes&&!this._mode.registerSupport)throw new Error("Cannot be a mode with nested modes unless I can emit a tokenizationSupport changed event!");this.shouldGenerateEmbeddedModels=i,this.defaults={enterNestedMode:!r(t.enterNestedMode),getNestedMode:!r(t.getNestedMode),getNestedModeInitialState:!r(t.getNestedModeInitialState),getLeavingNestedModeData:!r(t.getLeavingNestedModeData),onReturningFromNestedMode:!r(t.onReturningFromNestedMode)}}return e.prototype.dispose=function(){for(var e in this._embeddedModesListeners)this._embeddedModesListeners[e].dispose(),delete this._embeddedModesListeners[e]},e.prototype.getInitialState=function(){return this.customization.getInitialState()},e.prototype.tokenize=function(e,t,n,i){return void 0===n&&(n=0),void 0===i&&(i=n+e.length),t.getMode()!==this._mode?this._nestedTokenize(e,t,n,i,[],[]):this._myTokenize(e,t,n,i,[],[])},e.prototype._nestedTokenize=function(e,t,n,o,r,s){for(var a=t.getStateData(),c=this.getLeavingNestedModeData(e,a),u=t;u.getStateData()&&u.getStateData().getMode()!==this._mode;)u=u.getStateData();var l=u.getMode();if(!c){var d;return d=l.tokenizationSupport?l.tokenizationSupport.tokenize(e,t,n,o):i.nullTokenize(l,e,t,n),d.tokens=r.concat(d.tokens),d.modeTransitions=s.concat(d.modeTransitions),d}var h=c.nestedModeBuffer;if(h.length>0){var p;p=l.tokenizationSupport?l.tokenizationSupport.tokenize(h,t,n,o):i.nullTokenize(l,h,t,n),t=p.endState,r=r.concat(p.tokens),s=s.concat(p.modeTransitions)}var f=c.bufferAfterNestedMode,m=c.stateAfterNestedMode;return m.setStateData(a.getStateData()),this.onReturningFromNestedMode(m,t),this._myTokenize(f,m,n+h.length,o,r,s)},e.prototype._myTokenize=function(t,i,r,s,a,c){var u,l,d=this,h=new n.LineStream(t),p=null,f=null;i=i.clone(),(c.length<=0||c[c.length-1].mode!==this._mode)&&c.push({startIndex:r,mode:this._mode});for(var m=Math.min(s-r,t.length);h.pos()<m;){l=h.pos();do{if(u=i.tokenize(h),null===u||void 0===u||(void 0===u.type||null===u.type)&&(void 0===u.nextState||null===u.nextState))throw new Error("Tokenizer must return a valid state");if(u.nextState&&(u.nextState.setStateData(i.getStateData()),i=u.nextState),h.pos()<=l)throw new Error("Stream did not advance while tokenizing. Mode id is "+this._mode.getId()+' (stuck at token type: "'+u.type+'", prepend tokens: "'+a.map(function(e){return e.type}).join(",")+'").')}while(!u.type&&""!==u.type);if((p!==u.type||u.dontMergeWithPrev||null===p)&&a.push(new o.Token(l+r,u.type)),p=u.type,this.supportsNestedModes&&this.enterNestedMode(i)){var v=this._getEmbeddedLevel(i);if(v<e.MAX_EMBEDDED_LEVELS){var g=this.getNestedModeInitialState(i),y=g.state.getMode();if("function"==typeof y.addSupportChangedListener&&!this._embeddedModesListeners.hasOwnProperty(y.getId())){var _=!1;this._embeddedModesListeners[y.getId()]=y.addSupportChangedListener(function(e){_||e.tokenizationSupport&&(_=!0,d._mode.registerSupport("tokenizationSupport",function(e){return e.tokenizationSupport}),_=!1)})}if(!h.eos()){var b=t.substr(h.pos()),S=this._nestedTokenize(b,g.state,r+h.pos(),s,a,c);return S.retokenize=S.retokenize||g.missingModePromise,S}i=g.state,f=g.missingModePromise}}}return{tokens:a,actualStopOffset:h.pos()+r,modeTransitions:c,endState:i,retokenize:f}},e.prototype._getEmbeddedLevel=function(e){for(var t=-1;e;)t++,e=e.getStateData();return t},e.prototype.enterNestedMode=function(e){return this.defaults.enterNestedMode?!1:this.customization.enterNestedMode(e)},e.prototype.getNestedMode=function(e){return this.defaults.getNestedMode?null:this.customization.getNestedMode(e)},e._validatedNestedMode=function(e){var t=new i.NullMode,n=null;return e&&e.mode&&(t=e.mode),e&&e.missingModePromise&&(n=e.missingModePromise),{mode:t,missingModePromise:n}},e.prototype.getNestedModeInitialState=function(t){if(this.defaults.getNestedModeInitialState){var n,o=e._validatedNestedMode(this.getNestedMode(t)),r=o.missingModePromise;return n=o.mode.tokenizationSupport?o.mode.tokenizationSupport.getInitialState():new i.NullState(o.mode,null),n.setStateData(t),{state:n,missingModePromise:r}}return this.customization.getNestedModeInitialState(t)},e.prototype.getLeavingNestedModeData=function(e,t){return this.defaults.getLeavingNestedModeData?null:this.customization.getLeavingNestedModeData(e,t)},e.prototype.onReturningFromNestedMode=function(e,t){return this.defaults.onReturningFromNestedMode?null:this.customization.onReturningFromNestedMode(e,t)},e.MAX_EMBEDDED_LEVELS=5,e}();t.TokenizationSupport=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/monarch/monarchLexer",["require","exports","vs/editor/common/modes/abstractState","vs/editor/common/modes/lineStream","vs/editor/common/modes/monarch/monarchCommon","vs/editor/common/modes/supports/tokenizationSupport"],function(e,t,n,i,o,r){"use strict";function s(e,t){if(!t)return null;t=o.fixCase(e,t);for(var n=e.brackets,i=0;i<n.length;i++){var r=n[i];if(r.open===t)return{token:r.token,bracketType:o.MonarchBracket.Open};if(r.close===t)return{token:r.token,bracketType:o.MonarchBracket.Close
}}return null}function a(e,t,n){return new r.TokenizationSupport(t,{getInitialState:function(){return new c(t,e,n)},enterNestedMode:function(e){return e instanceof c?e.embeddedEntered:!1},getNestedMode:function(t){var n=t.embeddedMode;if(!e.isRegisteredMode(n))return{mode:e.getMode("text/plain"),missingModePromise:null};var i=e.getMode(n);return i?{mode:i,missingModePromise:null}:{mode:e.getMode("text/plain"),missingModePromise:e.getOrCreateMode(n).then(function(){return null})}},getLeavingNestedModeData:function(e,t){for(var n=t.clone(),o=new i.LineStream(e);!o.eos()&&n.embeddedMode;)n.tokenize(o,!0);if(n.embeddedMode)return null;var r=o.pos();return{nestedModeBuffer:e.substring(0,r),bufferAfterNestedMode:e.substring(r),stateAfterNestedMode:n}}},n.usesEmbedded,!1)}var c=function(e){function t(n,i,o,r,s){e.call(this,n),this.id=t.ID++,this.modeService=i,this.lexer=o,this.stack=r?r:[o.start],this.embeddedMode=s?s:null,this.embeddedEntered=!1,this.groupActions=null,this.groupMatches=null,this.groupMatched=null,this.groupRule=null}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.modeService,this.lexer,this.stack.slice(0),this.embeddedMode)},t.prototype.equals=function(n){if(!e.prototype.equals.call(this,n))return!1;if(!(n instanceof t))return!1;var i=n;if(this.stack.length!==i.stack.length||this.lexer.name!==i.lexer.name||this.embeddedMode!==i.embeddedMode)return!1;var o;for(o in this.stack)if(this.stack.hasOwnProperty(o)&&this.stack[o]!==i.stack[o])return!1;return!0},t.prototype.tokenize=function(e,t){var n=this.stack.length,i=0,r=this.stack[0];this.embeddedEntered=!1;var a=null,c=null,u=null,l=null,d=null;if(this.groupActions)i=this.groupActions.length,a=this.groupMatches,c=this.groupMatched.shift(),u=this.groupActions.shift(),d=this.groupRule,0===this.groupActions.length&&(this.groupActions=null,this.groupMatches=null,this.groupMatched=null,this.groupRule=null);else{if(e.eos())return{type:""};var h=e.advanceToEOS();e.goBack(h.length);var p=this.lexer.tokenizer[r];if(p||(p=o.findRules(this.lexer,r)),p){d=null;var f,m=e.pos();for(f in p)if(p.hasOwnProperty(f)&&(d=p[f],(0===m||!d.matchOnlyAtLineStart)&&(a=h.match(d.regex)))){c=a[0],u=d.action;break}}else o.throwError(this.lexer,"tokenizer state is not defined: "+r)}for(a||(a=[""],c=""),u||(e.eos()||(a=[e.peek()],c=a[0]),u=this.lexer.defaultToken),e.advance(c.length);u.test;){var v=u.test(c,a,r,e.eos());u=v}var g=null;if("string"==typeof u||Array.isArray(u))g=u;else if(u.group)g=u.group;else if(null!==u.token&&void 0!==u.token){if(g=u.token,u.tokenSubst&&(g=o.substituteMatches(this.lexer,g,c,a,r)),u.nextEmbedded)if("@pop"===u.nextEmbedded)this.embeddedMode||o.throwError(this.lexer,"cannot pop embedded mode if not inside one"),this.embeddedMode=null;else if(this.embeddedMode)o.throwError(this.lexer,"cannot enter embedded mode from within an embedded mode");else{this.embeddedMode=o.substituteMatches(this.lexer,u.nextEmbedded,c,a,r);var y=this.modeService.getModeIdForLanguageName(this.embeddedMode);this.embeddedMode&&y&&(this.embeddedMode=y),this.embeddedEntered=!0}if(u.goBack&&e.goBack(u.goBack),u.switchTo&&"string"==typeof u.switchTo){var _=o.substituteMatches(this.lexer,u.switchTo,c,a,r);"@"===_[0]&&(_=_.substr(1)),o.findRules(this.lexer,_)?this.stack[0]=_:o.throwError(this.lexer,"trying to switch to a state '"+_+"' that is undefined in rule: "+d.name),l=null}else if(u.transform&&"function"==typeof u.transform)this.stack=u.transform(this.stack),l=null;else if(u.next)if("@push"===u.next)this.stack.length>=this.lexer.maxStack?o.throwError(this.lexer,"maximum tokenizer stack size reached: ["+this.stack[0]+","+this.stack[1]+",...,"+this.stack[this.stack.length-2]+","+this.stack[this.stack.length-1]+"]"):this.stack.unshift(r);else if("@pop"===u.next)this.stack.length<=1?o.throwError(this.lexer,"trying to pop an empty stack in rule: "+d.name):this.stack.shift();else if("@popall"===u.next)this.stack.length>1&&(this.stack=[this.stack[this.stack.length-1]]);else{var _=o.substituteMatches(this.lexer,u.next,c,a,r);"@"===_[0]&&(_=_.substr(1)),o.findRules(this.lexer,_)?this.stack.unshift(_):o.throwError(this.lexer,"trying to set a next state '"+_+"' that is undefined in rule: "+d.name)}u.log&&"string"==typeof u.log&&o.log(this.lexer,this.lexer.displayName+": "+o.substituteMatches(this.lexer,u.log,c,a,r))}if(null===g&&(o.throwError(this.lexer,"lexer rule has no well-defined action in rule: "+d.name),g=this.lexer.defaultToken),Array.isArray(g)){this.groupActions&&this.groupActions.length>0&&o.throwError(this.lexer,"groups cannot be nested: "+d.name),a.length!==g.length+1&&o.throwError(this.lexer,"matched number of groups does not match the number of actions in rule: "+d.name);for(var b=0,S=1;S<a.length;S++)b+=a[S].length;return b!==c.length&&o.throwError(this.lexer,"with groups, all characters should be matched in consecutive groups in rule: "+d.name),this.groupMatches=a,this.groupMatched=a.slice(1),this.groupActions=g.slice(0),this.groupRule=d,e.goBack(c.length),this.tokenize(e)}if("@rematch"===g&&(e.goBack(c.length),c="",a=null,g=""),0===c.length)if(n!==this.stack.length||r!==this.stack[0]||(this.groupActions?this.groupActions.length:0)!==i){if(!t)return this.tokenize(e)}else o.throwError(this.lexer,"no progress in tokenizer in rule: "+d.name),e.advanceToEOS();if(0===g.indexOf("@brackets")){var E=g.substr("@brackets".length),w=s(this.lexer,c);return w||(o.throwError(this.lexer,"@brackets token returned but no bracket defined as: "+c),w={token:"",bracketType:o.MonarchBracket.None}),{type:o.sanitize(w.token+E)}}var C=""===g?"":g+this.lexer.tokenPostfix;return{type:o.sanitize(C)}},t.ID=0,t}(n.AbstractState);t.MonarchLexer=c,t.createTokenizationSupport=a}),define("vs/editor/common/modes/textToHtmlTokenizer",["require","exports","vs/base/common/strings","vs/editor/common/modes/nullMode"],function(e,t,n,i){"use strict";function o(e,t){return a(e,s(t))}function r(e,t,n){return c(e,s(t),n)}function s(e){return e&&e.tokenizationSupport?e.tokenizationSupport:{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new i.NullState(null,null)},tokenize:function(e,t,n,o){return void 0===n&&(n=0),i.nullTokenize(null,e,t,n,o)}}}function a(e,t){var n={tagName:"div",style:"white-space: pre-wrap",children:[]},i=function(e,t){n.children.push({tagName:"span",className:e,text:t})},o=function(){n.children.push({tagName:"br"})};return u(e,t,i,o),n}function c(e,t,i){void 0===i&&(i=""),i&&i.length>0&&(i=" "+i);var o="",r=function(e,t){o+='<span class="'+e+i+'">'+n.escape(t)+"</span>"},s=function(){o+="<br/>"};return o='<div style="white-space: pre-wrap;">',u(e,t,r,s),o+="</div>"}function u(e,t,n,i){for(var o=e.split(/\r\n|\r|\n/),r=t.getInitialState(),s=0;s<o.length;s++)r=l(o[s],t,n,r),s<o.length-1&&i()}function l(e,t,n,i){for(var o,r=t.tokenize(e,i),s=r.endState,a=r.tokens,c=0,u=0;u<a.length;u++){var l=a[u];u<a.length-1?(o=e.substring(c,a[u+1].startIndex),c=a[u+1].startIndex):o=e.substr(c);var d="token",h=l.type.replace(/[^a-z0-9\-]/gi," ");h.length>0&&(d+=" "+h),n(d,o)}return s}t.tokenizeToHtmlContent=o,t.tokenizeToString=r}),define("vs/nls!vs/editor/common/controller/cursor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/controller/cursor",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/controller/cursor",["require","exports","vs/nls!vs/editor/common/controller/cursor","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/editor/common/commands/replaceCommand","vs/editor/common/controller/cursorCollection","vs/editor/common/controller/handlerDispatcher","vs/editor/common/controller/oneCursor","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f;!function(e){e[e.Primary=0]="Primary",e[e.TopMost=1]="TopMost",e[e.BottomMost=2]="BottomMost"}(f||(f={}));var m=function(e){function t(t,n,i,o,r){var s=this;e.call(this,[p.EventType.CursorPositionChanged,p.EventType.CursorSelectionChanged,p.EventType.CursorRevealRange,p.EventType.CursorScrollRequest]),this._columnSelectToLineNumber=0,this._columnSelectToVisualColumn=0,this.editorId=t,this.configuration=n,this.model=i,this.viewModelHelper=o,this.enableEmptySelectionClipboard=r,this.viewModelHelper||(this.viewModelHelper={viewModel:this.model,convertModelPositionToViewPosition:function(e,t){return new l.Position(e,t)},convertModelRangeToViewRange:function(e){return e},convertViewToModelPosition:function(e,t){return new l.Position(e,t)},convertViewSelectionToModelSelection:function(e){return e},validateViewPosition:function(e,t,n){return n},validateViewRange:function(e,t,n,i,o){return o}}),this.cursors=new a.CursorCollection(this.editorId,this.model,this.configuration,this.viewModelHelper),this.cursorUndoStack=[],this.typingListeners={},this._isHandling=!1,this.modelUnbinds=[],this.modelUnbinds.push(this.model.addListener2(p.EventType.ModelContentChanged,function(e){s._onModelContentChanged(e)})),this.modelUnbinds.push(this.model.addListener2(p.EventType.ModelModeChanged,function(e){s._onModelModeChanged()})),this.modelUnbinds.push(this.model.addListener2(p.EventType.ModelModeSupportChanged,function(e){s._onModelModeChanged()})),this._registerHandlers()}return __extends(t,e),t.prototype.dispose=function(){this.modelUnbinds=r.disposeAll(this.modelUnbinds),this.model=null,this.cursors.dispose(),this.cursors=null,this.configuration.handlerDispatcher.clearHandlers(),this.configuration=null,this.viewModelHelper=null,e.prototype.dispose.call(this)},t.prototype.saveState=function(){for(var e,t=this.cursors.getSelections(),n=[],i=0;i<t.length;i++)e=t[i],n.push({inSelectionMode:!e.isEmpty(),selectionStart:{lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn},position:{lineNumber:e.positionLineNumber,column:e.positionColumn}});return n},t.prototype.restoreState=function(e){for(var t,n=this,i=[],o=0;o<e.length;o++){t=e[o];var r=1,s=1;t.position&&t.position.lineNumber&&(r=t.position.lineNumber),t.position&&t.position.column&&(s=t.position.column);var a=r,u=s;t.selectionStart&&t.selectionStart.lineNumber&&(a=t.selectionStart.lineNumber),t.selectionStart&&t.selectionStart.column&&(u=t.selectionStart.column),i.push({selectionStartLineNumber:a,selectionStartColumn:u,positionLineNumber:r,positionColumn:s})}this._onHandler("restoreState",function(e){return n.cursors.setSelections(i),!1},new c.DispatcherEvent("restoreState",null))},t.prototype.setEditableRange=function(e){this.model.setEditableRange(e)},t.prototype.getEditableRange=function(){return this.model.getEditableRange()},t.prototype.addTypingListener=function(e,t){this.typingListeners.hasOwnProperty(e)||(this.typingListeners[e]=[]),this.typingListeners[e].push(t)},t.prototype.removeTypingListener=function(e,t){if(this.typingListeners.hasOwnProperty(e))for(var n=this.typingListeners[e],i=0;i<n.length;i++)if(n[i]===t)return void n.splice(i,1)},t.prototype._onModelModeChanged=function(){this.cursors.updateMode()},t.prototype._onModelContentChanged=function(e){var t=this;e.changeType===p.EventType.ModelContentChangedFlush?(this.cursors.dispose(),this.cursors=new a.CursorCollection(this.editorId,this.model,this.configuration,this.viewModelHelper),this.emitCursorPositionChanged("model","contentFlush"),this.emitCursorSelectionChanged("model","contentFlush")):this._isHandling||this._onHandler("recoverSelectionFromMarkers",function(e){var n=t._invokeForAll(e,function(e,t,n){return t.recoverSelectionFromMarkers(n)});return e.shouldPushStackElementBefore=!1,e.shouldPushStackElementAfter=!1,n},new c.DispatcherEvent("modelChange",null))},t.prototype.getSelection=function(){return this.cursors.getSelection(0)},t.prototype.getSelections=function(){return this.cursors.getSelections()},t.prototype.getPosition=function(){return this.cursors.getPosition(0)},t.prototype.setSelections=function(e,t){var n=this;this._onHandler("setSelections",function(e){return e.shouldReveal=!1,n.cursors.setSelections(t),!1},new c.DispatcherEvent(e,null))},t.prototype._createAndInterpretHandlerCtx=function(e,t,n){var i={cursorPositionChangeReason:"",shouldReveal:!0,shouldRevealVerticalInCenter:!1,shouldRevealHorizontal:!0,shouldRevealTarget:f.Primary,eventSource:e,eventData:t,executeCommands:[],hasExecutedCommands:!1,isCursorUndo:!1,postOperationRunnables:[],shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1,requestScrollDeltaLines:0,setColumnSelectToLineNumber:0,setColumnSelectToVisualColumn:0};return n(i),this._interpretHandlerContext(i),this.cursors.normalize(),i.hasExecutedCommands},t.prototype._onHandler=function(e,t,n){this._isHandling=!0,this.charactersTyped="";var o=!1;try{var r,s,a,c,u,l,d,h=this.cursors.getSelections(),f=this.cursors.getViewSelections(),m=this.cursors.saveState(),v=n.getSource(),g=this._createAndInterpretHandlerCtx(v,n.getData(),function(e){o=t(e),r=e.cursorPositionChangeReason,s=e.shouldReveal,u=e.shouldRevealTarget,a=e.shouldRevealVerticalInCenter,c=e.shouldRevealHorizontal,l=e.isCursorUndo,d=e.requestScrollDeltaLines});g&&(this.cursorUndoStack=[]);for(var y=0;y<this.charactersTyped.length;y++){var _=this.charactersTyped.charAt(y);if(this.typingListeners.hasOwnProperty(_))for(var b=this.typingListeners[_].slice(0),S=0,E=b.length;E>S;S++)try{b[S]()}catch(n){i.onUnexpectedError(n)}}var w=this.cursors.getSelections(),C=this.cursors.getViewSelections(),T=!1;if(h.length!==w.length)T=!0;else{for(var y=0,k=h.length;!T&&k>y;y++)h[y].equalsSelection(w[y])||(T=!0);for(var y=0,k=f.length;!T&&k>y;y++)f[y].equalsSelection(C[y])||(T=!0)}T&&(g||l||this.cursorUndoStack.push(m),this.cursorUndoStack.length>50&&(this.cursorUndoStack=this.cursorUndoStack.splice(0,this.cursorUndoStack.length-50)),this.emitCursorPositionChanged(v,r),s&&this.emitCursorRevealRange(u,a?p.VerticalRevealType.Center:p.VerticalRevealType.Simple,c),this.emitCursorSelectionChanged(v,r)),d&&this.emitCursorScrollRequest(d)}catch(x){i.onUnexpectedError(x)}return this._isHandling=!1,o},t.prototype._interpretHandlerContext=function(e){e.shouldPushStackElementBefore&&(this.model.pushStackElement(),e.shouldPushStackElementBefore=!1),this._columnSelectToLineNumber=e.setColumnSelectToLineNumber,this._columnSelectToVisualColumn=e.setColumnSelectToVisualColumn,e.hasExecutedCommands=this._internalExecuteCommands(e.executeCommands,e.postOperationRunnables)||e.hasExecutedCommands,e.executeCommands=[],e.shouldPushStackElementAfter&&(this.model.pushStackElement(),e.shouldPushStackElementAfter=!1);for(var t=!1,n=0,i=e.postOperationRunnables.length;i>n;n++)if(e.postOperationRunnables[n]){t=!0;break}if(t){var o=e.postOperationRunnables.slice(0);e.postOperationRunnables=[],this._invokeForAll(e,function(e,t,n){return o[e]&&o[e](n),!1}),this._interpretHandlerContext(e)}},t.prototype._interpretCommandResult=function(e){return e?(this.cursors.setSelections(e),!0):!1},t.prototype._getEditOperationsFromCommand=function(e,t,o){var r=this,s=[],a=0,c=function(e,n){e.isEmpty()&&""===n||s.push({identifier:{major:t,minor:a++},range:e,text:n,forceMoveMarkers:!1})},u=!1,l=function(t,n){var i,o;if(t.isEmpty())if("boolean"==typeof n)i=n,o=n;else{var s=r.model.getLineMaxColumn(t.startLineNumber);t.startColumn===s?(i=!0,o=!0):(i=!1,o=!1)}else t.getDirection()===p.SelectionDirection.LTR?(i=!1,o=!0):(i=!0,o=!1);var a=e.selectionStartMarkers.length;return e.selectionStartMarkers[a]=r.model._addMarker(t.selectionStartLineNumber,t.selectionStartColumn,i),e.positionMarkers[a]=r.model._addMarker(t.positionLineNumber,t.positionColumn,o),a.toString()},d={addEditOperation:c,trackSelection:l};try{o.getEditOperations(this.model,d)}catch(h){return h.friendlyMessage=n.localize(0,null),i.onUnexpectedError(h),{operations:[],hadTrackedRange:!1}}return{operations:s,hadTrackedRange:u}},t.prototype._getEditOperations=function(e,t){for(var n,i,o=[],r=[],s=0;s<t.length;s++)t[s]?(n=this._getEditOperationsFromCommand(e,s,t[s]),o=o.concat(n.operations),r[s]=n.hadTrackedRange,i=i||r[s]):r[s]=!1;return{operations:o,hadTrackedRanges:r,anyoneHadTrackedRange:i}},t.prototype._getLoserCursorMap=function(e){e=e.slice(0),e.sort(function(e,t){return-d.Range.compareRangesUsingEnds(e.range,t.range)});for(var t,n,i,o={},r=1;r<e.length;r++)if(t=e[r-1],n=e[r],t.range.getStartPosition().isBefore(n.range.getEndPosition())){i=t.identifier.major>n.identifier.major?t.identifier.major:n.identifier.major,o[i.toString()]=!0;for(var s=0;s<e.length;s++)e[s].identifier.major===i&&(e.splice(s,1),r>s&&r--,s--);r>0&&r--}return o},t.prototype._collapseDeleteCommands=function(e,t){if(1!==e.length){var n=e.every(function(e){if(!(e instanceof s.ReplaceCommand))return!1;var t=e;return!(t.getText().length>0)});if(n){var i=e,o=i.map(function(e,n){return{range:i[n].getRange(),postOperationRunnable:t[n],order:n}});o.sort(function(e,t){return d.Range.compareRangesUsingStarts(e.range,t.range)});for(var r=o[0],a=1;a<o.length;a++)if(r.range.endLineNumber===o[a].range.startLineNumber&&r.range.endColumn===o[a].range.startColumn){var c=new d.Range(r.range.startLineNumber,r.range.startColumn,o[a].range.endLineNumber,o[a].range.endColumn);r.range=c,i[o[a].order].setRange(c),i[r.order].setRange(c)}else r=o[a]}}},t.prototype._internalExecuteCommands=function(e,t){var n={selectionStartMarkers:[],positionMarkers:[]};this._collapseDeleteCommands(e,t);for(var i=this._innerExecuteCommands(n,e,t),o=0;o<n.selectionStartMarkers.length;o++)this.model._removeMarker(n.selectionStartMarkers[o]),this.model._removeMarker(n.positionMarkers[o]);return i},t.prototype._arrayIsEmpty=function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(e[t])return!1;return!0},t.prototype._innerExecuteCommands=function(e,t,n){var i=this;if(this.configuration.editor.readOnly)return!1;if(this._arrayIsEmpty(t))return!1;var o=this.cursors.getSelections(),r=this._getEditOperations(e,t);if(0===r.operations.length&&!r.anyoneHadTrackedRange)return!1;for(var s=r.operations,a=this.model.getEditableRange(),c=a.getStartPosition(),u=a.getEndPosition(),l=0;l<s.length;l++){var d=s[l].range;if(!c.isBeforeOrEqual(d.getStartPosition())||!d.getEndPosition().isBeforeOrEqual(u))return!1}var p=this._getLoserCursorMap(s);if(p.hasOwnProperty("0"))return console.warn("Ignoring commands"),!1;for(var f=[],l=0;l<s.length;l++)p.hasOwnProperty(s[l].identifier.major.toString())||f.push(s[l]);var m,v=this.model.pushEditOperations(o,f,function(n){for(var s=[],a=0;a<o.length;a++)s[a]=[];for(var a=0;a<n.length;a++){var c=n[a];s[c.identifier.major].push(c)}for(var u=function(e,t){return e.identifier.minor-t.identifier.minor},l=[],a=0;a<o.length;a++)s[a].length>0||r.hadTrackedRanges[a]?(s[a].sort(u),l[a]=t[a].computeCursorState(i.model,{getInverseEditOperations:function(){return s[a]},getTrackedSelection:function(t){var n=parseInt(t,10),o=i.model._getMarker(e.selectionStartMarkers[n]),r=i.model._getMarker(e.positionMarkers[n]);return new h.Selection(o.lineNumber,o.column,r.lineNumber,r.column)}})):l[a]=o[a];return l}),g=[];for(m in p)p.hasOwnProperty(m)&&g.push(parseInt(m,10));g.sort(function(e,t){return t-e});for(var l=0;l<g.length;l++)v.splice(g[l],1),n.splice(g[l],1);return this._interpretCommandResult(v)},t.prototype.emitCursorPositionChanged=function(e,t){var n=this.cursors.getPositions(),i=n[0],o=n.slice(1),r=this.cursors.getViewPositions(),s=r[0],a=r.slice(1),c=!0;if(this.model.hasEditableRange()){var u=this.model.getEditableRange();u.containsPosition(i)||(c=!1)}var l={position:i,viewPosition:s,secondaryPositions:o,secondaryViewPositions:a,reason:t,source:e,isInEditableRange:c};this.emit(p.EventType.CursorPositionChanged,l)},t.prototype.emitCursorSelectionChanged=function(e,t){var n=this.cursors.getSelections(),i=n[0],o=n.slice(1),r=this.cursors.getViewSelections(),s=r[0],a=r.slice(1),c={selection:i,viewSelection:s,secondarySelections:o,secondaryViewSelections:a,source:e,reason:t};this.emit(p.EventType.CursorSelectionChanged,c)},t.prototype.emitCursorScrollRequest=function(e){var t={deltaLines:e};this.emit(p.EventType.CursorScrollRequest,t)},t.prototype.emitCursorRevealRange=function(e,t,n){var i=this.cursors.getPositions(),o=this.cursors.getViewPositions(),r=i[0],s=o[0];if(e===f.TopMost)for(var a=1;a<i.length;a++)i[a].isBefore(r)&&(r=i[a],s=o[a]);else if(e===f.BottomMost)for(var a=1;a<i.length;a++)r.isBeforeOrEqual(i[a])&&(r=i[a],s=o[a]);else if(i.length>1)return;var c=new d.Range(r.lineNumber,r.column,r.lineNumber,r.column),u=new d.Range(s.lineNumber,s.column,s.lineNumber,s.column),l={range:c,viewRange:u,verticalType:t,revealHorizontal:n};this.emit(p.EventType.CursorRevealRange,l)},t.prototype._registerHandlers=function(){var e=this,t=p.Handler,n={};n[t.JumpToBracket]=function(t){return e._jumpToBracket(t)},n[t.MoveTo]=function(t){return e._moveTo(!1,t)},n[t.MoveToSelect]=function(t){return e._moveTo(!0,t)},n[t.ColumnSelect]=function(t){return e._columnSelectMouse(t)},n[t.AddCursorUp]=function(t){return e._addCursorUp(t)},n[t.AddCursorDown]=function(t){return e._addCursorDown(t)},n[t.CreateCursor]=function(t){return e._createCursor(t)},n[t.LastCursorMoveToSelect]=function(t){return e._lastCursorMoveTo(t)},n[t.CursorLeft]=function(t){return e._moveLeft(!1,t)},n[t.CursorLeftSelect]=function(t){return e._moveLeft(!0,t)},n[t.CursorWordLeft]=function(t){return e._moveWordLeft(!1,u.WordNavigationType.WordStart,t)},n[t.CursorWordStartLeft]=function(t){return e._moveWordLeft(!1,u.WordNavigationType.WordStart,t)},n[t.CursorWordEndLeft]=function(t){return e._moveWordLeft(!1,u.WordNavigationType.WordEnd,t)},n[t.CursorWordLeftSelect]=function(t){return e._moveWordLeft(!0,u.WordNavigationType.WordStart,t)},n[t.CursorWordStartLeftSelect]=function(t){return e._moveWordLeft(!0,u.WordNavigationType.WordStart,t)},n[t.CursorWordEndLeftSelect]=function(t){return e._moveWordLeft(!0,u.WordNavigationType.WordEnd,t)},n[t.CursorRight]=function(t){return e._moveRight(!1,t)},n[t.CursorRightSelect]=function(t){return e._moveRight(!0,t)},n[t.CursorWordRight]=function(t){return e._moveWordRight(!1,u.WordNavigationType.WordEnd,t)},n[t.CursorWordStartRight]=function(t){return e._moveWordRight(!1,u.WordNavigationType.WordStart,t)},n[t.CursorWordEndRight]=function(t){return e._moveWordRight(!1,u.WordNavigationType.WordEnd,t)},n[t.CursorWordRightSelect]=function(t){return e._moveWordRight(!0,u.WordNavigationType.WordEnd,t)},n[t.CursorWordStartRightSelect]=function(t){return e._moveWordRight(!0,u.WordNavigationType.WordStart,t)},n[t.CursorWordEndRightSelect]=function(t){return e._moveWordRight(!0,u.WordNavigationType.WordEnd,t)},n[t.CursorUp]=function(t){return e._moveUp(!1,!1,t)},n[t.CursorUpSelect]=function(t){return e._moveUp(!0,!1,t)},n[t.CursorDown]=function(t){return e._moveDown(!1,!1,t)},n[t.CursorDownSelect]=function(t){return e._moveDown(!0,!1,t)},n[t.CursorPageUp]=function(t){return e._moveUp(!1,!0,t)},n[t.CursorPageUpSelect]=function(t){return e._moveUp(!0,!0,t)},n[t.CursorPageDown]=function(t){return e._moveDown(!1,!0,t)},n[t.CursorPageDownSelect]=function(t){return e._moveDown(!0,!0,t)},n[t.CursorHome]=function(t){return e._moveToBeginningOfLine(!1,t)},n[t.CursorHomeSelect]=function(t){return e._moveToBeginningOfLine(!0,t)},n[t.CursorEnd]=function(t){return e._moveToEndOfLine(!1,t)},n[t.CursorEndSelect]=function(t){return e._moveToEndOfLine(!0,t)},n[t.CursorTop]=function(t){return e._moveToBeginningOfBuffer(!1,t)},n[t.CursorTopSelect]=function(t){return e._moveToBeginningOfBuffer(!0,t)},n[t.CursorBottom]=function(t){return e._moveToEndOfBuffer(!1,t)},n[t.CursorBottomSelect]=function(t){return e._moveToEndOfBuffer(!0,t)},n[t.CursorColumnSelectLeft]=function(t){return e._columnSelectLeft(t)},n[t.CursorColumnSelectRight]=function(t){return e._columnSelectRight(t)},n[t.CursorColumnSelectUp]=function(t){return e._columnSelectUp(!1,t)},n[t.CursorColumnSelectPageUp]=function(t){return e._columnSelectUp(!0,t)},n[t.CursorColumnSelectDown]=function(t){return e._columnSelectDown(!1,t)},n[t.CursorColumnSelectPageDown]=function(t){return e._columnSelectDown(!0,t)},n[t.SelectAll]=function(t){return e._selectAll(t)},n[t.LineSelect]=function(t){return e._line(!1,t)},n[t.LineSelectDrag]=function(t){return e._line(!0,t)},n[t.LastCursorLineSelect]=function(t){return e._lastCursorLine(!1,t)},n[t.LastCursorLineSelectDrag]=function(t){return e._lastCursorLine(!0,t)},n[t.LineInsertBefore]=function(t){return e._lineInsertBefore(t)},n[t.LineInsertAfter]=function(t){return e._lineInsertAfter(t)},n[t.LineBreakInsert]=function(t){return e._lineBreakInsert(t)},n[t.WordSelect]=function(t){return e._word(!1,t)},n[t.WordSelectDrag]=function(t){return e._word(!0,t)},n[t.LastCursorWordSelect]=function(t){return e._lastCursorWord(t)},n[t.CancelSelection]=function(t){return e._cancelSelection(t)},n[t.RemoveSecondaryCursors]=function(t){return e._removeSecondaryCursors(t)},n[t.Type]=function(t){return e._type(t)},n[t.ReplacePreviousChar]=function(t){return e._replacePreviousChar(t)},n[t.Tab]=function(t){return e._tab(t)},n[t.Indent]=function(t){return e._indent(t)},n[t.Outdent]=function(t){return e._outdent(t)},n[t.Paste]=function(t){return e._paste(t)},n[t.ScrollLineUp]=function(t){return e._scrollUp(!1,t)},n[t.ScrollLineDown]=function(t){return e._scrollDown(!1,t)},n[t.ScrollPageUp]=function(t){return e._scrollUp(!0,t)},n[t.ScrollPageDown]=function(t){return e._scrollDown(!0,t)},n[t.DeleteLeft]=function(t){return e._deleteLeft(t)},n[t.DeleteWordLeft]=function(t){return e._deleteWordLeft(!0,u.WordNavigationType.WordStart,t)},n[t.DeleteWordStartLeft]=function(t){return e._deleteWordLeft(!1,u.WordNavigationType.WordStart,t)},n[t.DeleteWordEndLeft]=function(t){return e._deleteWordLeft(!1,u.WordNavigationType.WordEnd,t)},n[t.DeleteRight]=function(t){return e._deleteRight(t)},n[t.DeleteWordRight]=function(t){return e._deleteWordRight(!0,u.WordNavigationType.WordEnd,t)},n[t.DeleteWordStartRight]=function(t){return e._deleteWordRight(!1,u.WordNavigationType.WordStart,t)},n[t.DeleteWordEndRight]=function(t){return e._deleteWordRight(!1,u.WordNavigationType.WordEnd,t)},n[t.DeleteAllLeft]=function(t){return e._deleteAllLeft(t)},n[t.DeleteAllRight]=function(t){return e._deleteAllRight(t)},n[t.Cut]=function(t){return e._cut(t)},n[t.ExpandLineSelection]=function(t){return e._expandLineSelection(t)},n[t.Undo]=function(t){return e._undo(t)},n[t.CursorUndo]=function(t){return e._cursorUndo(t)},n[t.Redo]=function(t){return e._redo(t)},n[t.ExecuteCommand]=function(t){return e._externalExecuteCommand(t)},n[t.ExecuteCommands]=function(t){return e._externalExecuteCommands(t)};var i,o=function(t,n){return function(i){return e._onHandler(t,n,i)}};for(i in n)n.hasOwnProperty(i)&&this.configuration.handlerDispatcher.setHandler(i,o(i,n[i]))},t.prototype._invokeForAllSorted=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),this._doInvokeForAll(e,!0,t,n,i)},t.prototype._invokeForAll=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),this._doInvokeForAll(e,!1,t,n,i)},t.prototype._doInvokeForAll=function(e,t,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0);var r=!1,s=this.cursors.getAll();t&&(s=s.sort(function(e,t){return d.Range.compareRangesUsingStarts(e.getSelection(),t.getSelection())}));var a;e.shouldPushStackElementBefore=i,e.shouldPushStackElementAfter=o;for(var c=0;c<s.length;c++)a={cursorPositionChangeReason:"",shouldReveal:!0,shouldRevealVerticalInCenter:!1,shouldRevealHorizontal:!0,executeCommand:null,postOperationRunnable:null,shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1,requestScrollDeltaLines:0},r=n(c,s[c],a)||r,0===c&&(e.cursorPositionChangeReason=a.cursorPositionChangeReason,e.shouldRevealHorizontal=a.shouldRevealHorizontal,e.shouldReveal=a.shouldReveal,e.shouldRevealVerticalInCenter=a.shouldRevealVerticalInCenter,e.requestScrollDeltaLines=a.requestScrollDeltaLines),e.shouldPushStackElementBefore=e.shouldPushStackElementBefore||a.shouldPushStackElementBefore,e.shouldPushStackElementAfter=e.shouldPushStackElementAfter||a.shouldPushStackElementAfter,e.executeCommands[c]=a.executeCommand,e.postOperationRunnables[c]=a.postOperationRunnable;return r},t.prototype._jumpToBracket=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.jumpToBracket(t,n)})},t.prototype._moveTo=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,o){return u.OneCursorOp.moveTo(i,e,t.eventData.position,t.eventData.viewPosition,t.eventSource,o)})},t.prototype._getColumnSelectToLineNumber=function(){if(!this._columnSelectToLineNumber){var e=this.cursors.getAll()[0],t=e.getViewPosition();return t.lineNumber}return this._columnSelectToLineNumber},t.prototype._getColumnSelectToVisualColumn=function(){if(!this._columnSelectToVisualColumn){var e=this.cursors.getAll()[0],t=e.getViewPosition();return e.getViewVisibleColumnFromColumn(t.lineNumber,t.column)}return this._columnSelectToVisualColumn},t.prototype._columnSelectMouse=function(e){var t=this.cursors.getAll(),n=u.OneCursorOp.columnSelectMouse(t[0],e.eventData.position,e.eventData.viewPosition,e.eventData.mouseColumn-1);return e.shouldRevealTarget=n.reversed?f.TopMost:f.BottomMost,e.shouldReveal=!0,e.setColumnSelectToLineNumber=n.toLineNumber,e.setColumnSelectToVisualColumn=n.toVisualColumn,this.cursors.setSelections(n.selections,n.viewSelections),!0},t.prototype._columnSelectOp=function(e,t){var n=this.cursors.getAll()[0],i=t(n,this._getColumnSelectToLineNumber(),this._getColumnSelectToVisualColumn());return e.shouldRevealTarget=i.reversed?f.TopMost:f.BottomMost,e.shouldReveal=!0,e.setColumnSelectToLineNumber=i.toLineNumber,e.setColumnSelectToVisualColumn=i.toVisualColumn,this.cursors.setSelections(i.selections,i.viewSelections),!0},t.prototype._columnSelectLeft=function(e){return this._columnSelectOp(e,function(e,t,n){return u.OneCursorOp.columnSelectLeft(e,t,n)})},t.prototype._columnSelectRight=function(e){return this._columnSelectOp(e,function(e,t,n){return u.OneCursorOp.columnSelectRight(e,t,n)})},t.prototype._columnSelectUp=function(e,t){return this._columnSelectOp(t,function(t,n,i){return u.OneCursorOp.columnSelectUp(e,t,n,i)})},t.prototype._columnSelectDown=function(e,t){return this._columnSelectOp(t,function(t,n,i){return u.OneCursorOp.columnSelectDown(e,t,n,i)})},t.prototype._createCursor=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;this.cursors.addSecondaryCursor({selectionStartLineNumber:1,selectionStartColumn:1,positionLineNumber:1,positionColumn:1});var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,o){return i===t?e.eventData.wholeLine?u.OneCursorOp.line(i,!1,e.eventData.position,e.eventData.viewPosition,o):u.OneCursorOp.moveTo(i,!1,e.eventData.position,e.eventData.viewPosition,e.eventSource,o):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._lastCursorMoveTo=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,o){return i===t?u.OneCursorOp.moveTo(i,!0,e.eventData.position,e.eventData.viewPosition,e.eventSource,o):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._addCursorUp=function(e){if(this.configuration.editor.readOnly)return!1;var t=this.cursors.getSelections().length;return this.cursors.duplicateCursors(),e.shouldRevealTarget=f.TopMost,this._invokeForAll(e,function(e,n,i){return e>=t?u.OneCursorOp.translateUp(n,i):!1})},t.prototype._addCursorDown=function(e){if(this.configuration.editor.readOnly)return!1;var t=this.cursors.getSelections().length;return this.cursors.duplicateCursors(),e.shouldRevealTarget=f.BottomMost,this._invokeForAll(e,function(e,n,i){return e>=t?u.OneCursorOp.translateDown(n,i):!1})},t.prototype._moveLeft=function(e,t){
return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveLeft(n,e,i)})},t.prototype._moveWordLeft=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.moveWordLeft(i,e,t,o)})},t.prototype._moveRight=function(e,t){return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveRight(n,e,i)})},t.prototype._moveWordRight=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.moveWordRight(i,e,t,o)})},t.prototype._moveDown=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.moveDown(i,e,t,o)})},t.prototype._moveUp=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.moveUp(i,e,t,o)})},t.prototype._moveToBeginningOfLine=function(e,t){return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveToBeginningOfLine(n,e,i)})},t.prototype._moveToEndOfLine=function(e,t){return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveToEndOfLine(n,e,i)})},t.prototype._moveToBeginningOfBuffer=function(e,t){return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveToBeginningOfBuffer(n,e,i)})},t.prototype._moveToEndOfBuffer=function(e,t){return this._invokeForAll(t,function(t,n,i){return u.OneCursorOp.moveToEndOfBuffer(n,e,i)})},t.prototype._selectAll=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.selectAll(t,n)})},t.prototype._line=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,o){return u.OneCursorOp.line(i,e,t.eventData.position,t.eventData.viewPosition,o)})},t.prototype._lastCursorLine=function(e,t){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var n=this.cursors.getLastAddedCursor();return this._invokeForAll(t,function(i,o,r){return o===n?u.OneCursorOp.line(o,e,t.eventData.position,t.eventData.viewPosition,r):!1}),t.shouldReveal=!1,t.shouldRevealHorizontal=!1,!0},t.prototype._expandLineSelection=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.expandLineSelection(t,n)})},t.prototype._lineInsertBefore=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.lineInsertBefore(t,n)})},t.prototype._lineInsertAfter=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.lineInsertAfter(t,n)})},t.prototype._lineBreakInsert=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.lineBreakInsert(t,n)})},t.prototype._word=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,o){return u.OneCursorOp.word(i,e,t.eventData.position,o)})},t.prototype._lastCursorWord=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,o){return i===t?u.OneCursorOp.word(i,!0,e.eventData.position,o):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._removeSecondaryCursors=function(e){return this.cursors.killSecondaryCursors(),!0},t.prototype._cancelSelection=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.cancelSelection(t,n)})},t.prototype._type=function(e){var t=this,n=e.eventData.text;if("keyboard"===e.eventSource){var i,o,r;for(i=0,o=n.length;o>i;i++)r=n.charAt(i),this.charactersTyped+=r,e.hasExecutedCommands=this._createAndInterpretHandlerCtx(e.eventSource,e.eventData,function(n){t._invokeForAll(n,function(e,t,n){return u.OneCursorOp.type(t,r,n)},!1,!1),e.cursorPositionChangeReason=n.cursorPositionChangeReason,e.shouldReveal=n.shouldReveal,e.shouldRevealVerticalInCenter=n.shouldRevealVerticalInCenter,e.shouldRevealHorizontal=n.shouldRevealHorizontal})||e.hasExecutedCommands}else this._invokeForAll(e,function(e,t,i){return u.OneCursorOp.actualType(t,n,!1,i)});return!0},t.prototype._replacePreviousChar=function(e){var t=e.eventData.text,n=e.eventData.replaceCharCnt;return this._invokeForAll(e,function(e,i,o){return u.OneCursorOp.replacePreviousChar(i,t,n,o)})},t.prototype._tab=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.tab(t,n)},!1,!1)},t.prototype._indent=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.indent(t,n)})},t.prototype._outdent=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.outdent(t,n)})},t.prototype._paste=function(e){var t=this._distributePasteToCursors(e);return t?this._invokeForAllSorted(e,function(e,n,i){return u.OneCursorOp.paste(n,t[e],!1,i)}):this._invokeForAll(e,function(t,n,i){return u.OneCursorOp.paste(n,e.eventData.text,e.eventData.pasteOnNewLine,i)})},t.prototype._scrollUp=function(e,t){return t.requestScrollDeltaLines=e?-this.configuration.editor.pageSize:-1,!0},t.prototype._scrollDown=function(e,t){return t.requestScrollDeltaLines=e?this.configuration.editor.pageSize:1,!0},t.prototype._distributePasteToCursors=function(e){if(e.eventData.pasteOnNewLine)return null;var t=this.cursors.getSelections();if(1===t.length)return null;for(var n=0;n<t.length;n++)if(t[n].startLineNumber!==t[n].endLineNumber)return null;var i=e.eventData.text.split(/\r\n|\r|\n/);return i.length!==t.length?null:i},t.prototype._deleteLeft=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.deleteLeft(t,n)},!1,!1)},t.prototype._deleteWordLeft=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.deleteWordLeft(i,e,t,o)},!1,!1)},t.prototype._deleteRight=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.deleteRight(t,n)},!1,!1)},t.prototype._deleteWordRight=function(e,t,n){return this._invokeForAll(n,function(n,i,o){return u.OneCursorOp.deleteWordRight(i,e,t,o)},!1,!1)},t.prototype._deleteAllLeft=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.deleteAllLeft(t,n)},!1,!1)},t.prototype._deleteAllRight=function(e){return this._invokeForAll(e,function(e,t,n){return u.OneCursorOp.deleteAllRight(t,n)},!1,!1)},t.prototype._cut=function(e){var t=this;return this._invokeForAll(e,function(e,n,i){return u.OneCursorOp.cut(n,t.enableEmptySelectionClipboard,i)})},t.prototype._undo=function(e){return e.cursorPositionChangeReason="undo",e.hasExecutedCommands=!0,this._interpretCommandResult(this.model.undo()),!0},t.prototype._cursorUndo=function(e){return 0===this.cursorUndoStack.length?!1:(e.cursorPositionChangeReason="undo",e.isCursorUndo=!0,this.cursors.restoreState(this.cursorUndoStack.pop()),!0)},t.prototype._redo=function(e){return e.cursorPositionChangeReason="redo",e.hasExecutedCommands=!0,this._interpretCommandResult(this.model.redo()),!0},t.prototype._externalExecuteCommand=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(t,n,i){return i.shouldPushStackElementBefore=!0,i.shouldPushStackElementAfter=!0,i.executeCommand=e.eventData,!1})},t.prototype._externalExecuteCommands=function(e){return this._invokeForAll(e,function(t,n,i){return i.shouldPushStackElementBefore=!0,i.shouldPushStackElementAfter=!0,i.executeCommand=e.eventData[t],!1})},t}(o.EventEmitter);t.Cursor=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/commonCodeEditor",["require","exports","vs/nls!vs/editor/common/commonCodeEditor","vs/base/common/actions","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/timer","vs/base/common/winjs.base","vs/editor/common/config/defaultConfig","vs/editor/common/controller/cursor","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/core/editorState","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/viewModel/characterHardWrappingLineMapper","vs/editor/common/viewModel/splitLinesCollection","vs/editor/common/viewModel/viewModel"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=0,w=function(e){function t(t,n,i,o,r,s){var a=this;e.call(this),this.domElement=t,this.id=++E,this._codeEditorService=o;var u=c.start(c.Topic.EDITOR,"CodeEditor.ctor");this._lifetimeDispose=[],this._keybindingService=r.createScoped(t),this._editorIdContextKey=this._keybindingService.createKey("editorId",this.getId()),this._editorFocusContextKey=this._keybindingService.createKey(y.KEYBINDING_CONTEXT_EDITOR_FOCUS,void 0),this._editorTabMovesFocusKey=this._keybindingService.createKey(y.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS,!1),this._hasMultipleSelectionsKey=this._keybindingService.createKey(y.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS,!1),this._hasNonEmptySelectionKey=this._keybindingService.createKey(y.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION,!1),this._langIdKey=this._keybindingService.createKey(y.KEYBINDING_CONTEXT_EDITOR_LANGUAGE_ID,void 0),this._decorationTypeKeysToIds={},n=n||{},"undefined"==typeof n.ariaLabel&&(n.ariaLabel=l.DefaultConfig.editor.ariaLabel),n.ariaLabel+=this._ariaLabelAppendMessage(),this._configuration=this._createConfiguration(n),this._configuration.editor.tabFocusMode&&this._editorTabMovesFocusKey.set(!0),this._lifetimeDispose.push(this._configuration.onDidChange(function(e){return a.emit(y.EventType.ConfigurationChanged,e)})),this.forcedWidgetFocusCount=0,this._telemetryService=s,this._instantiationService=i.createChild({keybindingService:this._keybindingService}),this._attachModel(null),this.contributions={},u.stop(),this._codeEditorService.addCodeEditor(this)}return __extends(t,e),t.prototype.getId=function(){return this.getEditorType()+":"+this.id},t.prototype.getEditorType=function(){return y.EditorType.ICodeEditor},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._codeEditorService.removeCodeEditor(this),this._lifetimeDispose=s.disposeAll(this._lifetimeDispose);var t;for(t in this.contributions)this.contributions.hasOwnProperty(t)&&this.contributions[t].dispose();this.contributions={},this._postDetachModelCleanup(this._detachModel()),this._configuration.dispose(),this._keybindingService.dispose(),this.emit(y.EventType.Disposed,{}),e.prototype.dispose.call(this)},t.prototype.captureState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return new p.EditorState(this,e)},t.prototype._ariaLabelAppendMessage=function(){var e=this._keybindingService.lookupKeybindings(y.SHOW_ACCESSIBILITY_HELP_ACTION_ID);return e.length>0?n.localize(0,null,this._keybindingService.getAriaLabelFor(e[0])):""},t.prototype.updateOptions=function(e){"undefined"!=typeof e.ariaLabel&&(e.ariaLabel+=this._ariaLabelAppendMessage()),this._configuration.updateOptions(e),this._configuration.editor.tabFocusMode?this._editorTabMovesFocusKey.set(!0):this._editorTabMovesFocusKey.reset()},t.prototype.getConfiguration=function(){return this._configuration.editorClone},t.prototype.getRawConfiguration=function(){return this._configuration.getRawOptions()},t.prototype.getValue=function(e){if(void 0===e&&(e=null),this.model){var t=!(!e||!e.preserveBOM),n=y.EndOfLinePreference.TextDefined;return e&&e.lineEnding&&"\n"===e.lineEnding?n=y.EndOfLinePreference.LF:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(n=y.EndOfLinePreference.CRLF),this.model.getValue(n,t)}return""},t.prototype.setValue=function(e){this.model&&this.model.setValue(e)},t.prototype.getModel=function(){return this.model},t.prototype.setModel=function(e){if(void 0===e&&(e=null),this.model!==e){var t=c.start(c.Topic.EDITOR,"CodeEditor.setModel"),n=this._detachModel();this._attachModel(e);var i=null,o=null;n&&(i=n.getAssociatedResource().toString()),e&&(o=e.getAssociatedResource().toString());var r={oldModelUrl:i,newModelUrl:o};t.stop(),this.emit(y.EventType.ModelChanged,r),this._postDetachModelCleanup(n)}},t.prototype.getVisibleColumnFromPosition=function(e){if(!this.model)return e.column;var t=this.model.validatePosition(e),n=this.model.getOptions().tabSize;return h.CursorMoveHelper.visibleColumnFromColumn(this.model,t.lineNumber,t.column,n)+1},t.prototype.getPosition=function(){return this.cursor?this.cursor.getPosition().clone():null},t.prototype.setPosition=function(e,t,n,i){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.cursor){if(!f.Position.isIPosition(e))throw new Error("Invalid arguments");this.cursor.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}]),t&&this.revealPosition(e,n,i)}},t.prototype._sendRevealRange=function(e,t,n){if(this.model&&this.cursor){if(!m.Range.isIRange(e))throw new Error("Invalid arguments");var i=this.model.validateRange(e),o={range:i,viewRange:null,verticalType:t,revealHorizontal:n};this.cursor.emit(y.EventType.CursorRevealRange,o)}},t.prototype.revealLine=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},y.VerticalRevealType.Simple,!1)},t.prototype.revealLineInCenter=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},y.VerticalRevealType.Center,!1)},t.prototype.revealLineInCenterIfOutsideViewport=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},y.VerticalRevealType.CenterIfOutsideViewport,!1)},t.prototype.revealPosition=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),!f.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},t?y.VerticalRevealType.Center:y.VerticalRevealType.Simple,n)},t.prototype.revealPositionInCenter=function(e){if(!f.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},y.VerticalRevealType.Center,!0)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e){if(!f.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},y.VerticalRevealType.CenterIfOutsideViewport,!0)},t.prototype.getSelection=function(){return this.cursor?this.cursor.getSelection().clone():null},t.prototype.getSelections=function(){if(!this.cursor)return null;for(var e=this.cursor.getSelections(),t=[],n=0,i=e.length;i>n;n++)t[n]=e[n].clone();return t},t.prototype.setSelection=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);var o=v.Selection.isISelection(e),r=m.Range.isIRange(e);if(!o&&!r)throw new Error("Invalid arguments");if(o)this._setSelectionImpl(e,t,n,i);else if(r){var s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t,n,i)}},t.prototype._setSelectionImpl=function(e,t,n,i){if(this.cursor){var o=v.Selection.createSelection(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this.cursor.setSelections("api",[o]),t&&this.revealRange(o,n,i)}},t.prototype.revealLines=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},y.VerticalRevealType.Simple,!1)},t.prototype.revealLinesInCenter=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},y.VerticalRevealType.Center,!1)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},y.VerticalRevealType.CenterIfOutsideViewport,!1)},t.prototype.revealRange=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),this._sendRevealRange(e,t?y.VerticalRevealType.Center:y.VerticalRevealType.Simple,n)},t.prototype.revealRangeInCenter=function(e){this._sendRevealRange(e,y.VerticalRevealType.Center,!0)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e){this._sendRevealRange(e,y.VerticalRevealType.CenterIfOutsideViewport,!0)},t.prototype.setSelections=function(e){if(this.cursor){if(!e||0===e.length)throw new Error("Invalid arguments");for(var t=0,n=e.length;n>t;t++)if(!v.Selection.isISelection(e[t]))throw new Error("Invalid arguments");this.cursor.setSelections("api",e)}},t.prototype.onVisible=function(){},t.prototype.onHide=function(){},t.prototype.beginForcedWidgetFocus=function(){this.forcedWidgetFocusCount++},t.prototype.endForcedWidgetFocus=function(){this.forcedWidgetFocusCount--},t.prototype.getContribution=function(e){return this.contributions[e]||null},t.prototype.addAction=function(e){var t=this._instantiationService.createInstance(g.DynamicEditorAction,e,this);this.contributions[t.getId()]=t},t.prototype.getActions=function(){var e,t=[];for(e in this.contributions)if(this.contributions.hasOwnProperty(e)){var n=this.contributions[e];i.isAction(n)&&t.push(n)}return t},t.prototype.getAction=function(e){var t=this.contributions[e];return t&&i.isAction(t)?t:null},t.prototype.trigger=function(e,t,n){var i=this.getAction(t);if(null!==i)i.enabled&&(this._telemetryService.publicLog("editorActionInvoked",{name:i.label,id:i.id}),u.TPromise.as(i.run()).done(null,o.onUnexpectedError));else{this._configuration.handlerDispatcher.trigger(e,t,n)}},t.prototype.executeCommand=function(e,t){return this._configuration.handlerDispatcher.trigger(e,y.Handler.ExecuteCommand,t)},t.prototype.executeEdits=function(e,t){var n=this;return this.cursor?this._configuration.editor.readOnly?!1:(this.model.pushEditOperations(this.cursor.getSelections(),t,function(){return n.cursor.getSelections()}),!0):!1},t.prototype.executeCommands=function(e,t){return this._configuration.handlerDispatcher.trigger(e,y.Handler.ExecuteCommands,t)},t.prototype.changeDecorations=function(e){return this.model?this.model.changeDecorations(e,this.id):null},t.prototype.getLineDecorations=function(e){return this.model?this.model.getLineDecorations(e,this.id,this._configuration.editor.readOnly):null},t.prototype.deltaDecorations=function(e,t){return this.model?0===e.length&&0===t.length?e:this.model.deltaDecorations(e,t,this.id):[]},t.prototype.setDecorations=function(e,t){var n=this._codeEditorService.resolveDecorationType(e),i=this._decorationTypeKeysToIds[e]||[];this._decorationTypeKeysToIds[e]=this.deltaDecorations(i,t.map(function(e){var t;return e.hoverMessage?(t=a.clone(n),t.htmlMessage=e.hoverMessage):t=n,{range:e.range,options:t}}))},t.prototype.removeDecorations=function(e){this._decorationTypeKeysToIds.hasOwnProperty(e)&&(this.deltaDecorations(this._decorationTypeKeysToIds[e],[]),delete this._decorationTypeKeysToIds[e])},t.prototype.addTypingListener=function(e,t){var n=this;return this.cursor?(this.cursor.addTypingListener(e,t),function(){n.cursor&&n.cursor.removeTypingListener(e,t)}):function(){}},t.prototype.getLayoutInfo=function(){return this._configuration.editor.layoutInfo},t.prototype._attachModel=function(e){var t=this;if(this.model=e?e:null,this.listenersToRemove=[],this.viewModel=null,this.cursor=null,this.model){this.domElement.setAttribute("data-mode-id",this.model.getMode().getId()),this._langIdKey.set(this.model.getMode().getId()),this.model.setStopLineTokenizationAfter(this._configuration.editor.stopLineTokenizationAfter),this._configuration.setIsDominatedByLongLines(this.model.isDominatedByLongLines(this._configuration.editor.longLineBoundary)),this.model.onBeforeAttached();var n=new _.CharacterHardWrappingLineMapperFactory(this._configuration.editor.wordWrapBreakBeforeCharacters,this._configuration.editor.wordWrapBreakAfterCharacters,this._configuration.editor.wordWrapBreakObtrusiveCharacters),i=new b.SplitLinesCollection(this.model,n,this.model.getOptions().tabSize,this._configuration.editor.wrappingInfo.wrappingColumn,this._configuration.editor.typicalFullwidthCharacterWidth/this._configuration.editor.typicalHalfwidthCharacterWidth,y.wrappingIndentFromString(this._configuration.editor.wrappingIndent));this.viewModel=new S.ViewModel(i,this.id,this._configuration,this.model,function(){return t.getCenteredRangeInViewport()});var o={viewModel:this.viewModel,convertModelPositionToViewPosition:function(e,n){return t.viewModel.convertModelPositionToViewPosition(e,n)},convertModelRangeToViewRange:function(e){return t.viewModel.convertModelRangeToViewRange(e)},convertViewToModelPosition:function(e,n){return t.viewModel.convertViewPositionToModelPosition(e,n)},convertViewSelectionToModelSelection:function(e){return t.viewModel.convertViewSelectionToModelSelection(e)},validateViewPosition:function(e,n,i){return t.viewModel.validateViewPosition(e,n,i)},validateViewRange:function(e,n,i,o,r){return t.viewModel.validateViewRange(e,n,i,o,r)}};this.cursor=new d.Cursor(this.id,this._configuration,this.model,o,this._enableEmptySelectionClipboard()),this.viewModel.addEventSource(this.cursor),this._createView(),this.listenersToRemove.push(this._getViewInternalEventBus().addBulkListener(function(e){for(var n=0,i=e.length;i>n;n++){var o=e[n].getType(),r=e[n].getData();switch(o){case y.EventType.ViewFocusGained:t.emit(y.EventType.EditorTextFocus),t.emit(y.EventType.EditorFocus,{});break;case"scroll":t.emit("scroll",r);break;case"scrollSize":t.emit("scrollSize",r);break;case y.EventType.ViewFocusLost:t.emit(y.EventType.EditorTextBlur);break;case y.EventType.ContextMenu:t.emit(y.EventType.ContextMenu,r);break;case y.EventType.MouseDown:t.emit(y.EventType.MouseDown,r);break;case y.EventType.MouseUp:t.emit(y.EventType.MouseUp,r);break;case y.EventType.KeyUp:t.emit(y.EventType.KeyUp,r);break;case y.EventType.MouseMove:t.emit(y.EventType.MouseMove,r);break;case y.EventType.MouseLeave:t.emit(y.EventType.MouseLeave,r);break;case y.EventType.KeyDown:t.emit(y.EventType.KeyDown,r);break;case y.EventType.ViewLayoutChanged:t.emit(y.EventType.EditorLayout,r)}}})),this.listenersToRemove.push(this.model.addBulkListener(function(e){for(var n=0,i=e.length;i>n;n++){var o=e[n].getType(),r=e[n].getData();switch(o){case y.EventType.ModelDecorationsChanged:t.emit(y.EventType.ModelDecorationsChanged,r);break;case y.EventType.ModelModeChanged:t.domElement.setAttribute("data-mode-id",t.model.getMode().getId()),t._langIdKey.set(t.model.getMode().getId()),t.emit(y.EventType.ModelModeChanged,r);break;case y.EventType.ModelModeSupportChanged:t.emit(y.EventType.ModelModeSupportChanged,r);break;case y.EventType.ModelContentChanged:t.emit(y.EventType.ModelContentChanged,r),t.emit("change",{});break;case y.EventType.ModelOptionsChanged:t.emit(y.EventType.ModelOptionsChanged,r);break;case y.EventType.ModelDispose:t.setModel(null)}}}));var r=function(e){var t=[e.selection].concat(e.secondarySelections);return t.some(function(e){return!e.isEmpty()})};this.listenersToRemove.push(this.cursor.addBulkListener(function(e){for(var n=!1,i=!1,o=!1,s=!1,a=0,c=e.length;c>a;a++){var u=e[a].getType(),l=e[a].getData();switch(u){case y.EventType.CursorPositionChanged:var d=l;n=!0,i=d.secondaryPositions.length>0,t.emit(y.EventType.CursorPositionChanged,l);break;case y.EventType.CursorSelectionChanged:var h=l;n=!0,i=h.secondarySelections.length>0,o=!0,s=r(h),t.emit(y.EventType.CursorSelectionChanged,l)}}n&&(i?t._hasMultipleSelectionsKey.set(!0):t._hasMultipleSelectionsKey.reset()),o&&(s?t._hasNonEmptySelectionKey.set(!0):t._hasNonEmptySelectionKey.reset())}))}else this.hasView=!1},t.prototype._postDetachModelCleanup=function(e){e&&(this._decorationTypeKeysToIds={},e.removeAllDecorationsWithOwnerId(this.id))},t.prototype._detachModel=function(){this.model&&this.model.onBeforeDetached(),this.hasView=!1,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.cursor&&(this.cursor.dispose(),this.cursor=null),this.viewModel&&(this.viewModel.dispose(),this.viewModel=null);var e=this.model;return this.model=null,this.domElement.removeAttribute("data-mode-id"),e},t}(r.EventEmitter);t.CommonCodeEditor=w}),define("vs/nls!vs/editor/common/model/textModelWithTokens",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/model/textModelWithTokens",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithTokens",["require","exports","vs/nls!vs/editor/common/model/textModelWithTokens","vs/base/common/async","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/stopwatch","vs/base/common/timer","vs/base/common/winjs.base","vs/editor/common/config/defaultConfig","vs/editor/common/core/arrays","vs/editor/common/editorCommon","vs/editor/common/model/textModel","vs/editor/common/model/textModelWithTokensHelpers","vs/editor/common/model/tokenIterator","vs/editor/common/modes/nullMode","vs/editor/common/modes/supports","vs/editor/common/modes/supports/richEditBrackets"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=function(){function e(){this._inflate=[""],this._deflate={"":0}}return e}();t.TokensInflatorMap=y;var _=function(){function e(e,t){var n=this;this._modePromise=e,this._externalModePromise=new c.TPromise(function(e,t,i){n._externalModePromise_c=e,n._externalModePromise_e=t},function(){}),this._model=t,this._isDisposed=!1,c.TPromise.timeout(0).then(function(){return n._modePromise}).then(function(e){if(n._isDisposed)return void n._externalModePromise_c(!1);var t=n._model;n.dispose(),t.setMode(e),t._warmUpTokens(),n._externalModePromise_c(!0)}).done(null,function(e){n._externalModePromise_e(e),o.onUnexpectedError(e)})}return e.prototype.getModePromise=function(){return this._externalModePromise},e.prototype.dispose=function(){this._modePromise=null,this._model=null,this._isDisposed=!0},e}(),b=function(){function e(e,t){var n=this;this._retokenizePromise=e,this._model=t,this._isDisposed=!1,this.isFulfilled=!1,c.TPromise.timeout(0).then(function(){return n._retokenizePromise}).then(function(){n._isDisposed||(n.isFulfilled=!0,n._model.onRetokenizerFulfilled())}).done(null,o.onUnexpectedError)}return e.prototype.getRange=function(){return null},e.prototype.dispose=function(){this._retokenizePromise=null,this._model=null,this._isDisposed=!0},e}();t.FullModelRetokenizer=b;var S=function(){function e(e,t){this.modeTransitions=t.getModeTransitions().toArray(e),this._text=t.text,this._lineTokens=t.getTokens()}return e.prototype.getLineContent=function(){return this._text},e.prototype.getTokenCount=function(){return this._lineTokens.getTokenCount()},e.prototype.getTokenStartIndex=function(e){return this._lineTokens.getTokenStartIndex(e)},e.prototype.getTokenEndIndex=function(e){return this._lineTokens.getTokenEndIndex(e,this._text.length)},e.prototype.getTokenType=function(e){return this._lineTokens.getTokenType(e)},e.prototype.getTokenText=function(e){var t=this._lineTokens.getTokenStartIndex(e),n=this._lineTokens.getTokenEndIndex(e,this._text.length);return this._text.substring(t,n)},e.prototype.findIndexOfOffset=function(e){return this._lineTokens.findIndexOfOffset(e)},e}(),E=function(e){function t(n,o,r,s){var a=this;if(n.push(d.EventType.ModelTokensChanged),n.push(d.EventType.ModelModeChanged),n.push(d.EventType.ModelModeSupportChanged),e.call(this,n,o),this._shouldAutoTokenize=r,this._shouldSimplifyMode=o.length>t.MODEL_SYNC_LIMIT,this._shouldDenyMode=o.length>t.MODEL_TOKENIZATION_LIMIT,this._stopLineTokenizationAfter=u.DefaultConfig.editor.stopLineTokenizationAfter,s)if(c.TPromise.is(s)){var l=s._value;if(l&&"function"==typeof l.getId)this._mode=this._massageMode(l),this._resetModeListener(this._mode);else{var h=s;this._modeToModelBinder=new _(h,this),this._mode=new m.NullMode}}else this._mode=this._massageMode(s),this._resetModeListener(this._mode);else this._mode=new m.NullMode;this._revalidateTokensTimeout=-1,this._scheduleRetokenizeNow=new i.RunOnceScheduler(function(){return a._retokenizeNow()},200),this._retokenizers=[],this._resetTokenizationState()}return __extends(t,e),t.prototype.dispose=function(){this._modeToModelBinder&&(this._modeToModelBinder.dispose(),this._modeToModelBinder=null),this._resetModeListener(null),this._clearTimers(),this._mode=null,this._lastState=null,this._tokensInflatorMap=null,this._retokenizers=r.disposeAll(this._retokenizers),this._scheduleRetokenizeNow.dispose(),e.prototype.dispose.call(this)},t.prototype.isTooLargeForHavingAMode=function(){return this._shouldDenyMode},t.prototype.isTooLargeForHavingARichMode=function(){return this._shouldSimplifyMode},t.prototype._massageMode=function(e){return this.isTooLargeForHavingAMode()?new m.NullMode:this.isTooLargeForHavingARichMode()?e.toSimplifiedMode():e},t.prototype.whenModeIsReady=function(){var e=this;return this._modeToModelBinder?this._modeToModelBinder.getModePromise().then(function(){return e._mode}):c.TPromise.as(this._mode)},t.prototype.onRetokenizerFulfilled=function(){this._scheduleRetokenizeNow.schedule()},t.prototype._retokenizeNow=function(){var e=this._retokenizers.filter(function(e){return e.isFulfilled});this._retokenizers=this._retokenizers.filter(function(e){return!e.isFulfilled});for(var t=!1,n=0;n<e.length;n++)e[n].getRange()||(t=!0);if(t){for(var n=0,i=this._lines.length;i>n;n++)this._lines[n].isInvalid=!0;this._invalidLineStartIndex=0}else{for(var o=Number.MAX_VALUE,n=0;n<e.length;n++){var r=e[n].getRange();o=Math.min(o,r.startLineNumber);for(var s=r.startLineNumber;s<=r.endLineNumber;s++)this._lines[s-1].isInvalid=!0}o-1<this._invalidLineStartIndex&&(this._invalidLineStartIndex<this._lines.length&&(this._lines[this._invalidLineStartIndex].isInvalid=!0),this._invalidLineStartIndex=o-1)}this._beginBackgroundTokenization();for(var n=0;n<e.length;n++)e[n].dispose()},t.prototype._createRetokenizer=function(e,t){return new b(e,this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._resetTokenizationState()},t.prototype._resetMode=function(e,t){this._mode=t,this._resetModeListener(t),this._resetTokenizationState(),this.emitModelTokensChangedEvent(1,this.getLineCount())},t.prototype._resetModeListener=function(e){var t=this;this._modeListener&&(this._modeListener.dispose(),this._modeListener=null),e&&"function"==typeof e.addSupportChangedListener&&(this._modeListener=e.addSupportChangedListener(function(e){return t._onModeSupportChanged(e)}))},t.prototype._onModeSupportChanged=function(e){this._emitModelModeSupportChangedEvent(e),e.tokenizationSupport&&(this._resetTokenizationState(),this.emitModelTokensChangedEvent(1,this.getLineCount()))},t.prototype._resetTokenizationState=function(){this._retokenizers=r.disposeAll(this._retokenizers),this._scheduleRetokenizeNow.cancel(),this._clearTimers();for(var e=0;e<this._lines.length;e++)this._lines[e].setState(null);this._initializeTokenizationState(),this._tokenizationElapsedTime=0,this._tokenizationTotalCharacters=1},t.prototype._clearTimers=function(){-1!==this._revalidateTokensTimeout&&(clearTimeout(this._revalidateTokensTimeout),this._revalidateTokensTimeout=-1)},t.prototype._initializeTokenizationState=function(){var e=null;if(this._mode.tokenizationSupport)try{e=this._mode.tokenizationSupport.getInitialState()}catch(n){n.friendlyMessage=t.MODE_TOKENIZATION_FAILED_MSG,o.onUnexpectedError(n),this._mode=new m.NullMode}e||(e=new m.NullState(this._mode,null)),this._lines[0].setState(e),this._lastState=null,this._tokensInflatorMap=new y,this._invalidLineStartIndex=0,this._beginBackgroundTokenization()},t.prototype.setStopLineTokenizationAfter=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.setStopLineTokenizationAfter: Model is disposed");this._stopLineTokenizationAfter=e},t.prototype.getLineTokens=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithTokens.getLineTokens: Model is disposed");
if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return t||this._updateTokensUntilLine(e,!0),this._lines[e-1].getTokens()},t.prototype.getLineContext=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getLineContext: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._updateTokensUntilLine(e,!0),new S(this._mode,this._lines[e-1])},t.prototype._getInternalTokens=function(e){return this._updateTokensUntilLine(e,!0),this._lines[e-1].getTokens()},t.prototype.setValue=function(e,t){if(void 0===t&&(t=null),this._isDisposed)throw new Error("TextModelWithTokens.setValue: Model is disposed");var n=null;null!==e&&(n=h.TextModel.toRawText(e,{tabSize:this._options.tabSize,insertSpaces:this._options.insertSpaces,detectIndentation:!1,defaultEOL:this._options.defaultEOL})),this.setValueFromRawText(n,t)},t.prototype.setValueFromRawText=function(t,n){if(void 0===n&&(n=null),this._isDisposed)throw new Error("TextModelWithTokens.setValueFromRawText: Model is disposed");if(null!==t&&e.prototype.setValueFromRawText.call(this,t),n)if(this._modeToModelBinder&&(this._modeToModelBinder.dispose(),this._modeToModelBinder=null),c.TPromise.is(n))this._modeToModelBinder=new _(n,this);else{var i=this._massageMode(n);if(this._mode!==i){var o={oldMode:this._mode,newMode:i};this._resetMode(o,i),this._emitModelModeChangedEvent(o)}}},t.prototype.getMode=function(){if(this._isDisposed)throw new Error("TextModelWithTokens.getMode: Model is disposed");return this._mode},t.prototype.setMode=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.setMode: Model is disposed");e&&this.setValueFromRawText(null,e)},t.prototype.getModeAtPosition=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.getModeAtPosition: Model is disposed");var n=this.validatePosition({lineNumber:e,column:t}),i=n.lineNumber,o=n.column;if(1===o)return this.getStateBeforeLine(i).getMode();if(o===this.getLineMaxColumn(i))return this.getStateAfterLine(i).getMode();var r=this._getLineModeTransitions(i),s=l.Arrays.findIndexInSegmentsArray(r,o-1);return r[s].mode},t.prototype._invalidateLine=function(e){this._lines[e].isInvalid=!0,e<this._invalidLineStartIndex&&(this._invalidLineStartIndex<this._lines.length&&(this._lines[this._invalidLineStartIndex].isInvalid=!0),this._invalidLineStartIndex=e,this._beginBackgroundTokenization())},t.prototype._updateLineTokens=function(e,t,n,i){this._lines[e].setTokens(t,i.tokens,n,i.modeTransitions)},t.prototype._beginBackgroundTokenization=function(){var e=this;this._shouldAutoTokenize&&-1===this._revalidateTokensTimeout&&(this._revalidateTokensTimeout=setTimeout(function(){e._revalidateTokensTimeout=-1,e._revalidateTokensNow()},0))},t.prototype._warmUpTokens=function(){if(this._isDisposed)throw new Error("TextModelWithTokens._warmUpTokens: Model is disposed");for(var e=Math.min(100,this.getLineCount()),t=e,n=1;e>=n;n++){var i=this._lines[n-1].text;if(i.length>=200){t=n-1;break}}this._revalidateTokensNow(t)},t.prototype._revalidateTokensNow=function(e){void 0===e&&(e=this._invalidLineStartIndex+1e6);var t=a.start(a.Topic.EDITOR,"backgroundTokenization");e=Math.min(this._lines.length,e);for(var n,i=20,o=this._invalidLineStartIndex+1,r=0,c=0,u=0,l=this._stopLineTokenizationAfter,d=s.StopWatch.create(!1),h=o;e>=h;h++){if(n=d.elapsed(),n>i){e=h-1;break}if(c=this._lines[h-1].text.length,-1!==l&&c>l&&(c=l),r>0&&(u=n/r*c,n+u>i)){e=h-1;break}this._updateTokensUntilLine(h,!1),r+=c}n=d.elapsed();var p=a.start(a.Topic.EDITOR,"**speed: "+this._tokenizationTotalCharacters/this._tokenizationElapsedTime);p.stop(),e>=o&&this.emitModelTokensChangedEvent(o,e),this._invalidLineStartIndex<this._lines.length&&this._beginBackgroundTokenization(),t.stop()},t.prototype.getStateBeforeLine=function(e){return this._updateTokensUntilLine(e-1,!0),this._lines[e-1].getState()},t.prototype.getStateAfterLine=function(e){return this._updateTokensUntilLine(e,!0),e<this._lines.length?this._lines[e].getState():this._lastState},t.prototype._getLineModeTransitions=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens._getLineModeTransitions: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._updateTokensUntilLine(e,!0),this._lines[e-1].getModeTransitions().toArray(this._mode)},t.prototype._updateTokensUntilLine=function(e,n){var i=this._lines.length,r=e-1,a=this._stopLineTokenizationAfter;-1===a&&(a=1e9);for(var c=s.StopWatch.create(!1),u=0,l=this._invalidLineStartIndex+1,d=e,h=this._invalidLineStartIndex;r>=h;h++){var p=h+1,f=null,v=this._lines[h].text;if(this._mode.tokenizationSupport){try{f=this._mode.tokenizationSupport.tokenize(this._lines[h].text,this._lines[h].getState(),0,a),u=f?f.actualStopOffset:this._lines[h].text.length}catch(g){g.friendlyMessage=t.MODE_TOKENIZATION_FAILED_MSG,o.onUnexpectedError(g)}f&&f.retokenize&&this._retokenizers.push(this._createRetokenizer(f.retokenize,h+1)),f&&f.tokens&&f.tokens.length>0&&(f.actualStopOffset=Math.max(f.actualStopOffset,f.tokens[f.tokens.length-1].startIndex+1)),f&&f.actualStopOffset<v.length&&(f.tokens.push({startIndex:f.actualStopOffset,type:""}),f.endState=this._lines[h].getState())}if(f||(f=m.nullTokenize(this._mode,v,this._lines[h].getState())),f.modeTransitions||(f.modeTransitions=[]),0===f.modeTransitions.length&&f.modeTransitions.push({startIndex:0,mode:this._mode}),this._updateLineTokens(h,this._tokensInflatorMap,this._mode,f),this._lines[h].isInvalid&&(this._lines[h].isInvalid=!1),i>p)if(null!==this._lines[p].getState()&&f.endState.equals(this._lines[p].getState())){for(var y=h+1;i>y&&!this._lines[y].isInvalid;){if(i>y+1){if(null===this._lines[y+1].getState())break}else if(null===this._lastState)break;y++}this._invalidLineStartIndex=Math.max(this._invalidLineStartIndex,y),h=y-1}else this._lines[p].setState(f.endState);else this._lastState=f.endState}this._invalidLineStartIndex=Math.max(this._invalidLineStartIndex,r+1),this._tokenizationElapsedTime+=c.elapsed(),this._tokenizationTotalCharacters+=u,n&&d>=l&&this.emitModelTokensChangedEvent(l,d)},t.prototype.emitModelTokensChangedEvent=function(e,t){var n={fromLineNumber:e,toLineNumber:t};this._isDisposing||this.emit(d.EventType.ModelTokensChanged,n)},t.prototype._emitModelModeChangedEvent=function(e){this._isDisposing||this.emit(d.EventType.ModelModeChanged,e)},t.prototype._emitModelModeSupportChangedEvent=function(e){this._isDisposing||this.emit(d.EventType.ModelModeSupportChanged,e)},t.prototype._lineIsTokenized=function(e){return this._invalidLineStartIndex>e-1},t.prototype._getWordDefinition=function(){return p.WordHelper.massageWordDefinitionOf(this._mode)},t.prototype.getWordAtPosition=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWordAtPosition: Model is disposed");return p.WordHelper.getWordAtPosition(this,this.validatePosition(e))},t.prototype.getWordUntilPosition=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWordUntilPosition: Model is disposed");var t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}},t.prototype.getWords=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWords: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return p.WordHelper.getWords(this,this.validateLineNumber(e))},t.prototype.tokenIterator=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.tokenIterator: Model is disposed");var n=new f.TokenIterator(this,this.validatePosition(e)),i=t(n);return n._invalidate(),i},t.prototype.findMatchingBracketUp=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.findMatchingBracketUp: Model is disposed");var n=this.validatePosition(t),i=this._lines[n.lineNumber-1].getModeTransitions().toArray(this._mode),o=l.Arrays.findIndexInSegmentsArray(i,n.column-1),r=i[o],s=r.mode.richEditSupport?r.mode.richEditSupport.brackets:null;if(!s)return null;var a=s.textIsBracket[e];return a?this._findMatchingBracketUp(a,n):null},t.prototype.matchBracket=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithTokens.matchBracket: Model is disposed");return this._matchBracket(this.validatePosition(e))},t.prototype._matchBracket=function(e){var t=this._tokensInflatorMap,n=e.lineNumber,i=this._lines[n-1].text,o=this._lines[n-1].getTokens(),r=o.getBinaryEncodedTokens(),s=o.findIndexOfOffset(e.column-1),a=C(r[s]),c=this._lines[n-1].getModeTransitions().toArray(this._mode),u=l.Arrays.findIndexInSegmentsArray(c,e.column-1),d=c[u],h=d.mode.richEditSupport?d.mode.richEditSupport.brackets:null;if(s>0&&a===e.column-1){var p=s-1,f=w(t,r[p]);if(!v.ignoreBracketsInToken(f)){var m=C(r[p]),y=d,_=h;if(u>0&&d.startIndex===e.column-1&&(y=c[u-1],_=y.mode.richEditSupport?y.mode.richEditSupport.brackets:null),_){m=Math.max(m,e.column-1-_.maxBracketLength);var b=g.BracketsUtils.findPrevBracketInToken(_.reversedRegex,n,i,m,a);if(b&&b.startColumn<=e.column&&e.column<=b.endColumn){var S=i.substring(b.startColumn-1,b.endColumn-1),E=this._matchFoundBracket(b,_.textIsBracket[S],_.textIsOpenBracket[S]);if(E)return E}}}}if(!v.ignoreBracketsInToken(w(t,r[s]))&&h){a=Math.max(a,e.column-1-h.maxBracketLength);var T=s+1<r.length?C(r[s+1]):i.length;for(T=Math.min(T,e.column-1+h.maxBracketLength);;){var b=g.BracketsUtils.findNextBracketInText(h.forwardRegex,n,i.substring(a,T),a);if(!b)break;if(b.startColumn<=e.column&&e.column<=b.endColumn){var S=i.substring(b.startColumn-1,b.endColumn-1),E=this._matchFoundBracket(b,h.textIsBracket[S],h.textIsOpenBracket[S]);if(E)return E}a=b.endColumn-1}}return{brackets:null,isAccurate:!0}},t.prototype._matchFoundBracket=function(e,t,n){if(n){var i=this._findMatchingBracketDown(t,e.getEndPosition());if(i)return{brackets:[e,i],isAccurate:!0}}else{var i=this._findMatchingBracketUp(t,e.getStartPosition());if(i)return{brackets:[e,i],isAccurate:!0}}return null},t.prototype._findMatchingBracketUp=function(e,t){for(var n=e.modeId,i=this._tokensInflatorMap,o=e.reversedRegex,r=-1,s=t.lineNumber;s>=1;s--){var a=this._lines[s-1].getTokens(),c=this._lines[s-1].text,u=a.getBinaryEncodedTokens(),d=this._lines[s-1].getModeTransitions().toArray(this._mode),h=d.length-1,p=d[h].startIndex,f=d[h].mode.getId(),m=u.length-1,y=c.length;s===t.lineNumber&&(m=a.findIndexOfOffset(t.column-1),y=t.column-1,h=l.Arrays.findIndexInSegmentsArray(d,t.column-1),p=d[h].startIndex,f=d[h].mode.getId());for(var _=m;_>=0;_--){var b=u[_],S=w(i,b),E=C(b);if(p>E&&(h--,p=d[h].startIndex,f=d[h].mode.getId()),f===n&&!v.ignoreBracketsInToken(S))for(;;){var T=g.BracketsUtils.findPrevBracketInToken(o,s,c,E,y);if(!T)break;var k=c.substring(T.startColumn-1,T.endColumn-1);if(k===e.open?r++:k===e.close&&r--,0===r)return T;y=T.startColumn-1}y=E}}return null},t.prototype._findMatchingBracketDown=function(e,t){for(var n=e.modeId,i=this._tokensInflatorMap,o=e.forwardRegex,r=1,s=t.lineNumber,a=this.getLineCount();a>=s;s++){var c=this._lines[s-1].getTokens(),u=this._lines[s-1].text,d=c.getBinaryEncodedTokens(),h=this._lines[s-1].getModeTransitions().toArray(this._mode),p=0,f=p+1<h.length?h[p+1].startIndex:u.length+1,m=h[p].mode.getId(),y=0,_=C(y);s===t.lineNumber&&(y=c.findIndexOfOffset(t.column-1),_=Math.max(_,t.column-1),p=l.Arrays.findIndexInSegmentsArray(h,t.column-1),f=p+1<h.length?h[p+1].startIndex:u.length+1,m=h[p].mode.getId());for(var b=y,S=d.length;S>b;b++){var E=d[b],T=w(i,E),k=S>b+1?C(d[b+1]):u.length;if(_>=f&&(p++,f=p+1<h.length?h[p+1].startIndex:u.length+1,m=h[p].mode.getId()),m===n&&!v.ignoreBracketsInToken(T))for(;;){var x=g.BracketsUtils.findNextBracketInToken(o,s,u,_,k);if(!x)break;var I=u.substring(x.startColumn-1,x.endColumn-1);if(I===e.open?r++:I===e.close&&r--,0===r)return x;_=x.endColumn-1}_=k}}return null},t.prototype.findPrevBracket=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.findPrevBracket: Model is disposed");for(var t=this.validatePosition(e),n=this._tokensInflatorMap,i=/[\(\)\[\]\{\}]/,o=t.lineNumber;o>=1;o--){var r=this._lines[o-1].getTokens(),s=this._lines[o-1].text,a=r.getBinaryEncodedTokens(),c=a.length-1,u=s.length;o===t.lineNumber&&(c=r.findIndexOfOffset(t.column-1),u=t.column-1);for(var l=c;l>=0;l--){var d=a[l],h=w(n,d),p=C(d);if(!v.ignoreBracketsInToken(h)){var f=g.BracketsUtils.findPrevBracketInToken(i,o,s,p,u);if(f)return this._toFoundBracket(f)}u=p}}return null},t.prototype.findNextBracket=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.findNextBracket: Model is disposed");for(var t=this.validatePosition(e),n=this._tokensInflatorMap,i=/[\(\)\[\]\{\}]/,o=t.lineNumber,r=this.getLineCount();r>=o;o++){var s=this._lines[o-1].getTokens(),a=this._lines[o-1].text,c=s.getBinaryEncodedTokens(),u=0,l=C(u);o===t.lineNumber&&(u=s.findIndexOfOffset(t.column-1),l=Math.max(l,t.column-1));for(var d=u,h=c.length;h>d;d++){var p=c[d],f=w(n,p),m=h>d+1?C(c[d+1]):a.length;if(!v.ignoreBracketsInToken(f)){var y=g.BracketsUtils.findNextBracketInToken(i,o,a,l,m);if(y)return this._toFoundBracket(y)}l=m}}return null},t.prototype._toFoundBracket=function(e){if(!e)return null;var t=this.getValueInRange(e);switch(t){case"(":return{range:e,open:"(",close:")",isOpen:!0};case")":return{range:e,open:"(",close:")",isOpen:!1};case"[":return{range:e,open:"[",close:"]",isOpen:!0};case"]":return{range:e,open:"[",close:"]",isOpen:!1};case"{":return{range:e,open:"{",close:"}",isOpen:!0};case"}":return{range:e,open:"{",close:"}",isOpen:!1}}return null},t.MODE_TOKENIZATION_FAILED_MSG=n.localize(0,null),t.MODEL_SYNC_LIMIT=5242880,t.MODEL_TOKENIZATION_LIMIT=20971520,t}(h.TextModel);t.TextModelWithTokens=E;var w=d.LineTokensBinaryEncoding.getType,C=d.LineTokensBinaryEncoding.getStartIndex});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/mirrorModel",["require","exports","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/editor/common/model/modelLine","vs/editor/common/model/textModel","vs/editor/common/model/textModelWithTokens","vs/editor/common/viewModel/prefixSumComputer"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t,n){return void 0===t&&(t=null),new h(null,0,r.TextModel.toRawText(e,r.TextModel.DEFAULT_CREATION_OPTIONS),t,n)}var u=function(e){function t(t,n,o,r,s){e.call(this,t.concat([i.EventType.ModelDispose]),o,!1,r),this._setVersionId(n),this._associatedResource=s}return __extends(t,e),t.prototype.getModeId=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getModeId: Model is disposed");return this.getMode().getId()},t.prototype.getEmbeddedAtPosition=function(e){return null},t.prototype.getAllEmbedded=function(){return[]},t.prototype._constructLines=function(t){e.prototype._constructLines.call(this,t),this._EOL="\n"},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this.emit(i.EventType.ModelDispose),e.prototype.dispose.call(this)},t.prototype.getAssociatedResource=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAssociatedResource: Model is disposed");return this._associatedResource},t.prototype._ensurePrefixSum=function(){if(!this._lineStarts){for(var e=[],t=this.getEOL().length,n=0,i=this._lines.length;i>n;n++)e.push(this._lines[n].text.length+t);this._lineStarts=new a.PrefixSumComputer(e)}},t.prototype.getRangeFromOffsetAndLength=function(e,t){if(this._isDisposed)throw new Error("AbstractMirrorModel.getRangeFromOffsetAndLength: Model is disposed");var n=this.getPositionFromOffset(e),i=this.getPositionFromOffset(e+t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:i.lineNumber,endColumn:i.column}},t.prototype.getOffsetAndLengthFromRange=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getOffsetAndLengthFromRange: Model is disposed");var t=this.getOffsetFromPosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this.getOffsetFromPosition({lineNumber:e.endLineNumber,column:e.endColumn});return{offset:t,length:n-t}},t.prototype.getPositionFromOffset=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getPositionFromOffset: Model is disposed");this._ensurePrefixSum();var t={index:0,remainder:0};return this._lineStarts.getIndexOf(e,t),{lineNumber:t.index+1,column:this.getEOL().length+t.remainder}},t.prototype.getOffsetFromPosition=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getOffsetFromPosition: Model is disposed");return this.getLineStart(e.lineNumber)+e.column-1},t.prototype.getLineStart=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getLineStart: Model is disposed");this._ensurePrefixSum();var t=Math.min(e,this._lines.length)-1;return this._lineStarts.getAccumulatedValue(t-1)},t.prototype.getAllWordsWithRange=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllWordsWithRange: Model is disposed");if(this._lines.length>1e4)return[];var e,t=[],n=function(n){var o=i.text.substring(n.start,n.end),r={startLineNumber:e+1,startColumn:n.start+1,endLineNumber:e+1,endColumn:n.end+1};t.push({text:o,range:r})};for(e=0;e<this._lines.length;e++){var i=this._lines[e];this.wordenize(i.text).forEach(n)}return t},t.prototype.getAllWords=function(){var e=this;if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllWords: Model is disposed");var t=[];return this._lines.forEach(function(n){e.wordenize(n.text).forEach(function(e){t.push(n.text.substring(e.start,e.end))})}),t},t.prototype.getAllUniqueWords=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllUniqueWords: Model is disposed");var t=!1,n={};return this.getAllWords().filter(function(i){return e&&!t&&e===i?(t=!0,!1):n[i]?!1:(n[i]=!0,!0)})},t.prototype.wordenize=function(e){for(var t,n=[],i=this._getWordDefinition();t=i.exec(e);)n.push({start:t.index,end:t.index+t[0].length});return n},t}(s.TextModelWithTokens);t.AbstractMirrorModel=u;var l=function(e){function t(n,i,o,r){e.call(this,["changed"],n.getVersionId(),t._getMirrorValueWithinRanges(n,i),o,r),this._actualModel=n}return __extends(t,e),t._getMirrorValueWithinRanges=function(e,t){var n,i="",o=1,s=1;for(n=0;n<t.length;n++){var a=t[n];i+=e.getEmptiedValueInRange({startLineNumber:o,startColumn:s,endLineNumber:a.startLineNumber,endColumn:a.startColumn}," "),i+=e.getValueInRange(a),o=a.endLineNumber,s=a.endColumn}var c=e.getLineCount(),u=e.getLineMaxColumn(c);i+=e.getEmptiedValueInRange({startLineNumber:o,startColumn:s,endLineNumber:c,endColumn:u}," ");var l=e.getOptions();return r.TextModel.toRawText(i,{tabSize:l.tabSize,insertSpaces:l.insertSpaces,detectIndentation:!1,defaultEOL:l.defaultEOL})},t.prototype.setIncludedRanges=function(e){var n=this.getVersionId();this._lineStarts=null,this._constructLines(t._getMirrorValueWithinRanges(this._actualModel,e)),this._resetTokenizationState(),this._setVersionId(n+1),this.emit("changed",{})},t}(u);t.MirrorModelEmbedded=l;var d=function(){function e(e){this.mode=e,this.ranges=[]}return e}();t.createTestMirrorModelFromString=c;var h=function(e){function t(t,n,i,o,r){e.call(this,["changed"],n,i,o,r),this._resourceService=t,this._embeddedModels={},this._updateEmbeddedModels()}return __extends(t,e),t.prototype.getEmbeddedAtPosition=function(e){if(this._isDisposed)throw new Error("MirrorModel.getEmbeddedAtPosition: Model is disposed");var t=this.getModeAtPosition(e.lineNumber,e.column);return this._embeddedModels.hasOwnProperty(t.getId())?this._embeddedModels[t.getId()]:null},t.prototype.getAllEmbedded=function(){var e=this;if(this._isDisposed)throw new Error("MirrorModel.getAllEmbedded: Model is disposed");return Object.keys(this._embeddedModels).map(function(t){return e._embeddedModels[t]})},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this);var i=Object.keys(this._embeddedModels).map(function(e){return t._embeddedModels[e]});i.forEach(function(e){return t._resourceService.remove(e.getAssociatedResource())}),n.disposeAll(i),this._embeddedModels={}},t.prototype.setMode=function(t){e.prototype.setMode.call(this,t),this._updateEmbeddedModels()},t._getModesRanges=function(e){for(var t={},n=function(e,n){return t.hasOwnProperty(e)||(t[e]=new d(n)),t[e]},i=e.getLineCount(),o=e.getMode().getId(),r=e.getMode(),s=1,a=1,c=1;i>=c;c++)for(var u=e._getLineModeTransitions(c),l=0;l<u.length;l++){var h=u[l];if(h.mode.getId()!==o){var p=n(o,r);p.ranges.push({startLineNumber:s,startColumn:a,endLineNumber:c,endColumn:h.startIndex+1}),o=h.mode.getId(),r=h.mode,s=c,a=h.startIndex+1}}var f=i,m=e.getLineMaxColumn(f);if(s!==f||a!==m){var p=n(o,r);p.ranges.push({startLineNumber:s,startColumn:a,endLineNumber:f,endColumn:m})}return t},t.prototype._updateEmbeddedModels=function(){if(!this._resourceService||!this.getMode().tokenizationSupport||!this.getMode().tokenizationSupport.shouldGenerateEmbeddedModels)return!1;for(var e=t._getModesRanges(this),n=Object.keys(this._embeddedModels),i=0;i<n.length;i++){var o=n[i];e.hasOwnProperty(o)||this._embeddedModels[o].setIncludedRanges([{startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}])}for(var r=Object.keys(e),i=0;i<r.length;i++){var s=r[i];if(this._embeddedModels.hasOwnProperty(s))this._embeddedModels[s].setIncludedRanges(e[s].ranges);else{var a=this.getAssociatedResource().withFragment(this.getAssociatedResource().fragment+"URL_MARSHAL_REMOVE"+s);this._embeddedModels[s]=new l(this,e[s].ranges,e[s].mode,a),this._resourceService.insert(this._embeddedModels[s].getAssociatedResource(),this._embeddedModels[s])}}return!1},t.prototype.onEvents=function(e){if(this._isDisposed)throw new Error("MirrorModel.onEvents: Model is disposed");for(var t=!1,n=0,o=e.contentChanged.length;o>n;n++){var r=e.contentChanged[n];switch(this._lineStarts=null,this._setVersionId(r.versionId),r.changeType){case i.EventType.ModelContentChangedFlush:this._onLinesFlushed(r),t=!0;break;case i.EventType.ModelContentChangedLinesDeleted:this._onLinesDeleted(r),t=!0;break;case i.EventType.ModelContentChangedLinesInserted:this._onLinesInserted(r),t=!0;break;case i.EventType.ModelContentChangedLineChanged:this._onLineChanged(r),t=!0}}var s=!1;return t&&(this.emit("changed",{}),s=this._updateEmbeddedModels()),s},t.prototype._onLinesFlushed=function(e){this._constructLines(e.detail),this._resetTokenizationState()},t.prototype._onLineChanged=function(e){this._lines[e.lineNumber-1].applyEdits({},[{startColumn:1,endColumn:Number.MAX_VALUE,text:e.detail,forceMoveMarkers:!1}]),this._invalidateLine(e.lineNumber-1)},t.prototype._onLinesDeleted=function(e){var t=e.fromLineNumber-1,n=e.toLineNumber-1,i=this._lines[t].getState();this._lines.splice(t,n-t+1),t<this._lines.length&&(this._lines[t].setState(i),this._invalidateLine(t))},t.prototype._onLinesInserted=function(e){var t,n,i=e.detail.split("\n");for(t=e.fromLineNumber-1,n=0;t<e.toLineNumber;t++,n++)this._lines.splice(t,0,new o.ModelLine(0,i[n]));e.fromLineNumber>=2&&this._invalidateLine(e.fromLineNumber-2)},t}(u);t.MirrorModel=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithMarkers",["require","exports","vs/editor/common/core/idGenerator","vs/editor/common/core/position","vs/editor/common/model/textModelWithTokens"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n){this.id=e,this.column=t,this.stickToPreviousCharacter=n,this.oldLineNumber=0,this.oldColumn=0,this.line=null}return e.prototype.toString=function(){return"{'"+this.id+"';"+this.column+","+this.stickToPreviousCharacter+",["+this.oldLineNumber+","+this.oldColumn+"]}"},e}();t.LineMarker=r;var s=0,a=function(e){function t(t,i,o){e.call(this,t,i,!0,o),this._markerIdGenerator=new n.IdGenerator(++s+";"),this._markerIdToMarker={}}return __extends(t,e),t.prototype.dispose=function(){this._markerIdToMarker=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._markerIdToMarker={}},t.prototype._addMarker=function(e,t,n){if(this._isDisposed)throw new Error("TextModelWithMarkers._addMarker: Model is disposed");var o=this.validatePosition(new i.Position(e,t)),s=new r(this._markerIdGenerator.generate(),o.column,n);return this._markerIdToMarker[s.id]=s,this._lines[o.lineNumber-1].addMarker(s),s.id},t.prototype._addMarkers=function(e){for(var t=Object.create(null),n=[],i=0,o=e.length;o>i;i++){var s=e[i],a=new r(this._markerIdGenerator.generate(),s.column,s.stickToPreviousCharacter);this._markerIdToMarker[a.id]=a,t[s.lineNumber]||(t[s.lineNumber]=[]),t[s.lineNumber].push(a),n.push(a.id)}for(var c=Object.keys(t),i=0,o=c.length;o>i;i++){var u=parseInt(c[i],10);this._lines[u-1].addMarkers(t[c[i]])}return n},t.prototype._changeMarker=function(e,t,n){if(this._isDisposed)throw new Error("TextModelWithMarkers._changeMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var o=this._markerIdToMarker[e],r=this.validatePosition(new i.Position(t,n));r.lineNumber!==o.line.lineNumber&&(o.line.removeMarker(o),this._lines[r.lineNumber-1].addMarker(o)),o.column=r.column}},t.prototype._changeMarkerStickiness=function(e,t){if(this._isDisposed)throw new Error("TextModelWithMarkers._changeMarkerStickiness: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var n=this._markerIdToMarker[e];n.stickToPreviousCharacter!==t&&(n.stickToPreviousCharacter=t)}},t.prototype._getMarker=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var t=this._markerIdToMarker[e];return new i.Position(t.line.lineNumber,t.column)}return null},t.prototype._getMarkersCount=function(){return Object.keys(this._markerIdToMarker).length},t.prototype._getLineMarkers=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getLineMarkers: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].getMarkers()},t.prototype._removeMarker=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._removeMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var t=this._markerIdToMarker[e];t.line.removeMarker(t),delete this._markerIdToMarker[e]}},t.prototype._removeMarkers=function(e){for(var t=Object.create(null),n=0,i=e.length;i>n;n++){var o=e[n];if(this._markerIdToMarker.hasOwnProperty(o)){var r=this._markerIdToMarker[o],s=r.line.lineNumber;t[s]||(t[s]=Object.create(null)),t[s][o]=!0,delete this._markerIdToMarker[o]}}for(var a=Object.keys(t),n=0,i=a.length;i>n;n++){var s=parseInt(a[n],10);this._lines[s-1].removeMarkers(t[a[n]])}},t.prototype._getMarkersInMap=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getMarkersInMap: Model is disposed");var t,n=[];for(t in e)e.hasOwnProperty(t)&&this._markerIdToMarker.hasOwnProperty(t)&&n.push(this._markerIdToMarker[t]);return n},t}(o.TextModelWithTokens);t.TextModelWithMarkers=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithTrackedRanges",["require","exports","vs/editor/common/core/idGenerator","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/textModelWithMarkers","vs/editor/common/model/textModelWithTokens"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,i){e.call(this,t,i),this.trackedRangeId=i.addTrackedRange({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:i.getLineMaxColumn(n)},o.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges)}return __extends(t,e),t.prototype.getRange=function(){return this._model.getTrackedRange(this.trackedRangeId)},t.prototype.dispose=function(){var t=this._model;t.isValidTrackedRange(this.trackedRangeId)&&t.removeTrackedRange(this.trackedRangeId),e.prototype.dispose.call(this)},t}(s.FullModelRetokenizer),c=function(){function e(e,t,n){this.id=e,this.startMarkerId=t,this.endMarkerId=n}return e}(),u=0,l=function(e){function t(t,i,o){e.call(this,t,i,o),this._rangeIdGenerator=new n.IdGenerator(++u+";"),this._ranges={},this._markerIdToRangeId={},this._multiLineTrackedRanges={}}return __extends(t,e),t.prototype._createRetokenizer=function(e,t){return new a(e,t,this)},t.prototype.dispose=function(){this._ranges=null,this._markerIdToRangeId=null,this._multiLineTrackedRanges=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._ranges={},this._markerIdToRangeId={},this._multiLineTrackedRanges={}},t.prototype._setRangeIsMultiLine=function(e,t){var n=this._multiLineTrackedRanges.hasOwnProperty(e);!n&&t?this._multiLineTrackedRanges[e]=!0:n&&!t&&delete this._multiLineTrackedRanges[e]},t.prototype._shouldStartMarkerSticksToPreviousCharacter=function(e){return e===o.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges||e===o.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore},t.prototype._shouldEndMarkerSticksToPreviousCharacter=function(e){return e===o.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges||e===o.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore},t.prototype._getTrackedRangesCount=function(){return Object.keys(this._ranges).length},t.prototype.addTrackedRange=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.addTrackedRange: Model is disposed");e=this.validateRange(e);var n=this._shouldStartMarkerSticksToPreviousCharacter(t),i=this._shouldEndMarkerSticksToPreviousCharacter(t),o=this._addMarker(e.startLineNumber,e.startColumn,n),r=this._addMarker(e.endLineNumber,e.endColumn,i),s=new c(this._rangeIdGenerator.generate(),o,r);return this._ranges[s.id]=s,this._markerIdToRangeId[o]=s.id,this._markerIdToRangeId[r]=s.id,this._setRangeIsMultiLine(s.id,e.startLineNumber!==e.endLineNumber),s.id},t.prototype._addTrackedRanges=function(e,t){for(var n=[],i=0,o=e.length;o>i;i++){var r=e[i],s=t[i];n.push({lineNumber:r.startLineNumber,column:r.startColumn,stickToPreviousCharacter:this._shouldStartMarkerSticksToPreviousCharacter(s)}),n.push({lineNumber:r.endLineNumber,column:r.endColumn,stickToPreviousCharacter:this._shouldEndMarkerSticksToPreviousCharacter(s)})}for(var a=this._addMarkers(n),u=[],i=0,o=e.length;o>i;i++){var r=e[i],l=a[2*i],d=a[2*i+1],h=new c(this._rangeIdGenerator.generate(),l,d);this._ranges[h.id]=h,this._markerIdToRangeId[l]=h.id,this._markerIdToRangeId[d]=h.id,this._setRangeIsMultiLine(h.id,r.startLineNumber!==r.endLineNumber),u.push(h.id)}return u},t.prototype.changeTrackedRange=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.changeTrackedRange: Model is disposed");if(this._ranges.hasOwnProperty(e)){t=this.validateRange(t);var n=this._ranges[e];this._changeMarker(n.startMarkerId,t.startLineNumber,t.startColumn),this._changeMarker(n.endMarkerId,t.endLineNumber,t.endColumn),this._setRangeIsMultiLine(n.id,t.startLineNumber!==t.endLineNumber)}},t.prototype.changeTrackedRangeStickiness=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.changeTrackedRangeStickiness: Model is disposed");if(this._ranges.hasOwnProperty(e)){var n=this._ranges[e];this._changeMarkerStickiness(n.startMarkerId,this._shouldStartMarkerSticksToPreviousCharacter(t)),this._changeMarkerStickiness(n.endMarkerId,this._shouldEndMarkerSticksToPreviousCharacter(t))}},t.prototype.isValidTrackedRange=function(e){return this._isDisposed||!this._ranges?!1:this._ranges.hasOwnProperty(e)},t.prototype.removeTrackedRange=function(e){
if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.removeTrackedRange: Model is disposed");if(this._ranges.hasOwnProperty(e)){var t=this._ranges[e];this._removeMarker(t.startMarkerId),this._removeMarker(t.endMarkerId),this._setRangeIsMultiLine(t.id,!1),delete this._ranges[t.id],delete this._markerIdToRangeId[t.startMarkerId],delete this._markerIdToRangeId[t.endMarkerId]}},t.prototype.removeTrackedRanges=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var o=e[n];if(this._ranges.hasOwnProperty(o)){var r=this._ranges[o];t.push(r.startMarkerId),t.push(r.endMarkerId),this._setRangeIsMultiLine(r.id,!1),delete this._ranges[r.id],delete this._markerIdToRangeId[r.startMarkerId],delete this._markerIdToRangeId[r.endMarkerId]}}t.length>0&&this._removeMarkers(t)},t.prototype._newEditorRange=function(e,t){return t.isBefore(e)?new i.Range(e.lineNumber,e.column,e.lineNumber,e.column):new i.Range(e.lineNumber,e.column,t.lineNumber,t.column)},t.prototype.getTrackedRange=function(e){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.getTrackedRange: Model is disposed");var t=this._ranges[e],n=this._getMarker(t.startMarkerId),i=this._getMarker(t.endMarkerId);return this._newEditorRange(n,i)},t.prototype._getMultiLineTrackedRanges=function(e,t){var n,i,o,r,s=[];for(n in this._multiLineTrackedRanges)if(this._multiLineTrackedRanges.hasOwnProperty(n)){if(i=this._ranges[n],o=this._getMarker(i.startMarkerId),o.lineNumber>t)continue;if(r=this._getMarker(i.endMarkerId),r.lineNumber<e)continue;s.push({id:i.id,range:this._newEditorRange(o,r)})}return s},t.prototype.getLinesTrackedRanges=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.getLinesTrackedRanges: Model is disposed");var n,i,o,r,s,a,c,u,l=this._getMultiLineTrackedRanges(e,t),d={};for(r=0,s=l.length;s>r;r++)d[l[r].id]=!0;for(a=e;t>=a;a++)for(n=this._getLineMarkers(a),r=0,s=n.length;s>r;r++)i=n[r],this._markerIdToRangeId.hasOwnProperty(i.id)&&(o=this._markerIdToRangeId[i.id],d.hasOwnProperty(o)||(c=this._getMarker(this._ranges[o].startMarkerId),u=this._getMarker(this._ranges[o].endMarkerId),l.push({id:o,range:this._newEditorRange(c,u)}),d[o]=!0));return l},t.prototype._onChangedMarkers=function(e){var t,n,i,o,r,s,a={};for(r=0,s=e.length;s>r;r++)o=e[r],this._markerIdToRangeId.hasOwnProperty(o.id)&&(i=this._markerIdToRangeId[o.id],n=this._ranges[i],a.hasOwnProperty(n.id)?t=a[n.id]:(t={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0},a[n.id]=t),o.id===n.startMarkerId?(t.startLineNumber=o.oldLineNumber,t.startColumn=o.oldColumn):(t.endLineNumber=o.oldLineNumber,t.endColumn=o.oldColumn),this._setRangeIsMultiLine(n.id,this._getMarker(n.startMarkerId).lineNumber!==this._getMarker(n.endMarkerId).lineNumber));return a},t}(r.TextModelWithMarkers);t.TextModelWithTrackedRanges=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithDecorations",["require","exports","vs/base/common/errors","vs/base/common/htmlContent","vs/base/common/strings","vs/editor/common/core/idGenerator","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/textModelWithTrackedRanges"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){return e.replace(/[^a-z0-9\-]/gi," ")}function l(e){return new v(e)}function d(e,t){return void 0===t&&(t=null),new y(e,t)}var h=function(){function e(){this.changedMarkers={},this.oldDecorationRange={},this.oldDecorationOptions={},this.newOrChangedDecorations={},this.removedDecorations={}}return e.prototype.addNewDecoration=function(e){this.newOrChangedDecorations[e]=!0},e.prototype.addRemovedDecoration=function(e,t,n,i){this.newOrChangedDecorations.hasOwnProperty(e)&&delete this.newOrChangedDecorations[e],this.oldDecorationRange.hasOwnProperty(e)||(this.oldDecorationRange[e]=n),this.oldDecorationOptions.hasOwnProperty(e)||(this.oldDecorationOptions[e]=i),this.removedDecorations[e]=!0},e.prototype.addMovedDecoration=function(e,t){this.oldDecorationRange.hasOwnProperty(e)||(this.oldDecorationRange[e]=t),this.newOrChangedDecorations[e]=!0},e.prototype.addUpdatedDecoration=function(e,t){this.oldDecorationOptions.hasOwnProperty(e)||(this.oldDecorationOptions[e]=t),this.newOrChangedDecorations[e]=!0},e}();t.DeferredEventsBuilder=h;var p=0,f=function(e){function t(t,n,i){t.push(a.EventType.ModelDecorationsChanged),e.call(this,t,n,i),this._decorationIdGenerator=new r.IdGenerator(++p+";"),this.decorations={},this.rangeIdToDecorationId={},this._currentDeferredEvents=null}return __extends(t,e),t.prototype.dispose=function(){this.decorations=null,this.rangeIdToDecorationId=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this.decorations={},this.rangeIdToDecorationId={}},t.prototype.changeDecorations=function(e,t){var i=this;if(void 0===t&&(t=0),this._isDisposed)throw new Error("TextModelWithDecorations.changeDecorations: Model is disposed");return this._withDeferredEvents(function(o){var r={addDecoration:function(e,n){return i._addDecorationImpl(o,t,i.validateRange(e),l(n))},changeDecoration:function(e,t){i._changeDecorationImpl(o,e,i.validateRange(t))},changeDecorationOptions:function(e,t){i._changeDecorationOptionsImpl(o,e,l(t))},removeDecoration:function(e){i._removeDecorationImpl(o,e)},deltaDecorations:function(e,n){return i._deltaDecorationsImpl(o,t,e,i._normalizeDeltaDecorations(n))}},s=null;try{s=e(r)}catch(a){n.onUnexpectedError(a)}return r.addDecoration=null,r.changeDecoration=null,r.removeDecoration=null,r.deltaDecorations=null,s})},t.prototype.deltaDecorations=function(e,t,n){if(void 0===n&&(n=0),this._isDisposed)throw new Error("TextModelWithDecorations.deltaDecorations: Model is disposed");return e||(e=[]),this.changeDecorations(function(n){return n.deltaDecorations(e,t)},n)},t.prototype.removeAllDecorationsWithOwnerId=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.removeAllDecorationsWithOwnerId: Model is disposed");var t,n,i=[];for(t in this.decorations)this.decorations.hasOwnProperty(t)&&(n=this.decorations[t],n.ownerId===e&&i.push(n.id));this._removeDecorationsImpl(null,i)},t.prototype.getDecorationOptions=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationOptions: Model is disposed");return this.decorations.hasOwnProperty(e)?this.decorations[e].options:null},t.prototype.getDecorationRange=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationRange: Model is disposed");if(this.decorations.hasOwnProperty(e)){var t=this.decorations[e];return this.getTrackedRange(t.rangeId)}return null},t.prototype.getLineDecorations=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getLineDecorations: Model is disposed");return 1>e||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)},t.prototype._getDecorationsInRange=function(e,t,n,i,o,r){var s,c,u,l,d=[],h=this.getLinesTrackedRanges(e,n);for(c=0,l=h.length;l>c;c++)if(u=h[c],this.rangeIdToDecorationId.hasOwnProperty(u.id)){if(s=this.decorations[this.rangeIdToDecorationId[u.id]],o&&s.ownerId&&s.ownerId!==o)continue;if(r&&(s.options.className===a.ClassName.EditorErrorDecoration||s.options.className===a.ClassName.EditorWarningDecoration))continue;if(u.range.startLineNumber===e&&u.range.endColumn<t)continue;if(u.range.endLineNumber===n&&u.range.startColumn>i)continue;d.push({id:s.id,ownerId:s.ownerId,range:u.range,options:s.options})}return d},t.prototype.getLinesDecorations=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getLinesDecorations: Model is disposed");var o=this.getLineCount();return e=Math.min(o,Math.max(1,e)),t=Math.min(o,Math.max(1,t)),this._getDecorationsInRange(e,1,t,Number.MAX_VALUE,n,i)},t.prototype.getDecorationsInRange=function(e,t,n){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationsInRange: Model is disposed");var i=this.validateRange(e);return this._getDecorationsInRange(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn,t,n)},t.prototype.getAllDecorations=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getAllDecorations: Model is disposed");var n,i,o=[];for(n in this.decorations)if(this.decorations.hasOwnProperty(n)){if(i=this.decorations[n],e&&i.ownerId&&i.ownerId!==e)continue;if(t&&(i.options.className===a.ClassName.EditorErrorDecoration||i.options.className===a.ClassName.EditorWarningDecoration))continue;o.push({id:i.id,ownerId:i.ownerId,range:this.getTrackedRange(i.rangeId),options:i.options})}return o},t.prototype._withDeferredEvents=function(e){var t=this;return this.deferredEmit(function(){var n=!t._currentDeferredEvents;n&&(t._currentDeferredEvents=new h);try{var i=e(t._currentDeferredEvents);n&&t._handleCollectedEvents(t._currentDeferredEvents)}finally{n&&(t._currentDeferredEvents=null)}return i})},t.prototype._handleCollectedEvents=function(e){var t=this._getMarkersInMap(e.changedMarkers),n=this._onChangedMarkers(t);this._onChangedRanges(e,n),this._handleCollectedDecorationsEvents(e);for(var i=0,o=t.length;o>i;i++)t[i].oldLineNumber=0,t[i].oldColumn=0},t.prototype._onChangedRanges=function(e,t){var n,i;for(n in t)t.hasOwnProperty(n)&&this.rangeIdToDecorationId.hasOwnProperty(n)&&(i=this.rangeIdToDecorationId[n],e.addMovedDecoration(i,t[n]))},t.prototype._handleCollectedDecorationsEvents=function(e){var t,n,i,o=[],r=[],s=[];for(t in e.newOrChangedDecorations)e.newOrChangedDecorations.hasOwnProperty(t)&&(s.push(t),n=this._getDecorationData(t),n.isForValidation=n.options.className===a.ClassName.EditorErrorDecoration||n.options.className===a.ClassName.EditorWarningDecoration,o.push(n),e.oldDecorationRange.hasOwnProperty(t)&&(i=e.oldDecorationRange[t],i.startLineNumber=i.startLineNumber||n.range.startLineNumber,i.startColumn=i.startColumn||n.range.startColumn,i.endLineNumber=i.endLineNumber||n.range.endLineNumber,i.endColumn=i.endColumn||n.range.endColumn));for(t in e.removedDecorations)e.removedDecorations.hasOwnProperty(t)&&(s.push(t),r.push(t));if(s.length>0){var c={ids:s,addedOrChangedDecorations:o,removedDecorations:r,oldOptions:e.oldDecorationOptions,oldRanges:e.oldDecorationRange};this.emitModelDecorationsChangedEvent(c)}},t.prototype._getDecorationData=function(e){var t=this.decorations[e];return{id:t.id,ownerId:t.ownerId,range:this.getTrackedRange(t.rangeId),isForValidation:!1,options:t.options}},t.prototype.emitModelDecorationsChangedEvent=function(e){this._isDisposing||this.emit(a.EventType.ModelDecorationsChanged,e)},t.prototype._normalizeDeltaDecorations=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var o=e[n];t.push(new g(n,this.validateRange(o.range),l(o.options)))}return t},t.prototype._addDecorationImpl=function(e,t,n,i){var o=this.addTrackedRange(n,i.stickiness),r=new m(this._decorationIdGenerator.generate(),t,o,i);return this.decorations[r.id]=r,this.rangeIdToDecorationId[o]=r.id,e.addNewDecoration(r.id),r.id},t.prototype._addDecorationsImpl=function(e,t,n){for(var i=this._addTrackedRanges(n.map(function(e){return e.range}),n.map(function(e){return e.options.stickiness})),o=[],r=0,s=n.length;s>r;r++){var a=i[r],c=new m(this._decorationIdGenerator.generate(),t,a,n[r].options);this.decorations[c.id]=c,this.rangeIdToDecorationId[a]=c.id,e.addNewDecoration(c.id),o.push(c.id)}return o},t.prototype._changeDecorationImpl=function(e,t,n){if(this.decorations.hasOwnProperty(t)){var i=this.decorations[t],o=this.getTrackedRange(i.rangeId);this.changeTrackedRange(i.rangeId,n),e.addMovedDecoration(t,o)}},t.prototype._changeDecorationOptionsImpl=function(e,t,n){if(this.decorations.hasOwnProperty(t)){var i=this.decorations[t],o=i.options;o.stickiness!==n.stickiness&&this.changeTrackedRangeStickiness(i.rangeId,n.stickiness),i.options=n,e.addUpdatedDecoration(t,o)}},t.prototype._removeDecorationImpl=function(e,t){if(this.decorations.hasOwnProperty(t)){var n=this.decorations[t],i=null;e&&(i=this.getTrackedRange(n.rangeId)),this.removeTrackedRange(n.rangeId),delete this.rangeIdToDecorationId[n.rangeId],delete this.decorations[t],e&&e.addRemovedDecoration(t,n.ownerId,i,n.options)}},t.prototype._removeDecorationsImpl=function(e,t){for(var n=[],i=0,o=t.length;o>i;i++){var r=t[i];if(this.decorations.hasOwnProperty(r)){var s=this.decorations[r];if(e){var a=this.getTrackedRange(s.rangeId);e.addRemovedDecoration(r,s.ownerId,a,s.options)}n.push(s.rangeId),delete this.rangeIdToDecorationId[s.rangeId],delete this.decorations[r]}}n.length>0&&this.removeTrackedRanges(n)},t.prototype._resolveOldDecorations=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var o=e[n];if(this.decorations.hasOwnProperty(o)){var r=this.decorations[o];t.push({id:o,range:this.getTrackedRange(r.rangeId),options:r.options})}}return t},t.prototype._deltaDecorationsImpl=function(e,t,n,i){if(0===n.length)return this._addDecorationsImpl(e,t,i);if(0===i.length)return this._removeDecorationsImpl(e,n),[];var o=this._resolveOldDecorations(n);o.sort(function(e,t){return s.Range.compareRangesUsingStarts(e.range,t.range)}),i.sort(function(e,t){return s.Range.compareRangesUsingStarts(e.range,t.range)});for(var r=[],a=0,c=o.length,u=0,l=i.length,d=[],h=[];c>a&&l>u;){var p=o[a],f=i[u],m=s.Range.compareRangesUsingStarts(p.range,f.range);0>m?(h.push(p.id),a++):m>0?(d.push(f),u++):p.options.equals(f.options)?(r[f.index]=p.id,a++,u++):(h.push(p.id),a++)}for(;c>a;)h.push(o[a].id),a++;for(;l>u;)d.push(i[u]),u++;if(h.length>0&&this._removeDecorationsImpl(e,h),d.length>0)for(var v=this._addDecorationsImpl(e,t,d),g=0,y=d.length;y>g;g++)r[d[g].index]=v[g];return r},t}(c.TextModelWithTrackedRanges);t.TextModelWithDecorations=f;var m=function(){function e(e,t,n,i){this.id=e,this.ownerId=t,this.rangeId=n,this.options=i}return e}(),v=function(){function e(e){this.stickiness=e.stickiness||a.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,this.className=u(e.className||o.empty),this.hoverMessage=e.hoverMessage||o.empty,this.htmlMessage=e.htmlMessage||[],this.isWholeLine=e.isWholeLine||!1,this.overviewRuler=d(e.overviewRuler,e.showInOverviewRuler),this.glyphMarginClassName=u(e.glyphMarginClassName||o.empty),this.linesDecorationsClassName=u(e.linesDecorationsClassName||o.empty),this.inlineClassName=u(e.inlineClassName||o.empty)}return e._overviewRulerEquals=function(e,t){return e.color===t.color&&e.position===t.position&&e.darkColor===t.darkColor},e.prototype.equals=function(t){return this.stickiness===t.stickiness&&this.className===t.className&&this.hoverMessage===t.hoverMessage&&this.isWholeLine===t.isWholeLine&&this.showInOverviewRuler===t.showInOverviewRuler&&this.glyphMarginClassName===t.glyphMarginClassName&&this.linesDecorationsClassName===t.linesDecorationsClassName&&this.inlineClassName===t.inlineClassName&&i.htmlContentElementArrEquals(this.htmlMessage,t.htmlMessage)&&e._overviewRulerEquals(this.overviewRuler,t.overviewRuler)},e}(),g=function(){function e(e,t,n){this.index=e,this.range=t,this.options=n}return e}(),y=function(){function e(e,t){this.color=o.empty,this.darkColor=o.empty,this.position=a.OverviewRulerLane.Center,t&&(this.color=t),e&&e.color&&(this.color=e.color),e&&e.darkColor&&(this.darkColor=e.darkColor),e&&e.hasOwnProperty("position")&&(this.position=e.position)}return e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/editableTextModel",["require","exports","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/editStack","vs/editor/common/model/modelLine","vs/editor/common/model/textModelWithDecorations"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,r){t.push(i.EventType.ModelContentChanged),t.push(i.EventType.ModelContentChanged2),e.call(this,t,n,r),this._commandManager=new o.EditStack(this),this._isUndoing=!1,this._isRedoing=!1,this._hasEditableRange=!1,this._editableRangeId=null}return __extends(t,e),t.prototype.dispose=function(){this._commandManager=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._commandManager=new o.EditStack(this),this._hasEditableRange=!1,this._editableRangeId=null},t.prototype.pushStackElement=function(){if(this._isDisposed)throw new Error("EditableTextModel.pushStackElement: Model is disposed");this._commandManager.pushStackElement()},t.prototype.pushEditOperations=function(e,t,n){var i=this;if(this._isDisposed)throw new Error("EditableTextModel.pushEditOperations: Model is disposed");return this.deferredEmit(function(){return i._commandManager.pushEditOperation(e,t,n)})},t.prototype._reduceOperations=function(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]},t.prototype._toSingleEditOperation=function(e){for(var t=!1,i=e[0].range,o=e[e.length-1].range,r=new n.Range(i.startLineNumber,i.startColumn,o.endLineNumber,o.endColumn),s=i.startLineNumber,a=i.startColumn,c=[],u=0,l=e.length;l>u;u++){var d=e[u],h=d.range;t=t||d.forceMoveMarkers;for(var p=s;p<h.startLineNumber;p++)p===s?c.push(this._lines[p-1].text.substring(a-1)):(c.push("\n"),c.push(this._lines[p-1].text));if(h.startLineNumber===s?c.push(this._lines[h.startLineNumber-1].text.substring(a-1,h.startColumn-1)):(c.push("\n"),c.push(this._lines[h.startLineNumber-1].text.substring(0,h.startColumn-1))),d.lines)for(var f=0,m=d.lines.length;m>f;f++)0!==f&&c.push("\n"),c.push(d.lines[f]);s=d.range.endLineNumber,a=d.range.endColumn}return{sortIndex:0,identifier:e[0].identifier,range:r,rangeLength:this.getValueLengthInRange(r),lines:c.join("").split("\n"),forceMoveMarkers:t}},t._sortOpsAscending=function(e,t){var i=n.Range.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i},t._sortOpsDescending=function(e,t){var i=n.Range.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i},t.prototype.applyEdits=function(e){if(0===e.length)return[];for(var n=[],i=0;i<e.length;i++){var o=e[i],r=this.validateRange(o.range);n[i]={sortIndex:i,identifier:o.identifier,range:r,rangeLength:this.getValueLengthInRange(r),lines:o.text?o.text.split(/\r\n|\r|\n/):null,forceMoveMarkers:o.forceMoveMarkers}}n.sort(t._sortOpsAscending);for(var i=0,s=n.length-1;s>i;i++){var a=n[i].range.getEndPosition(),c=n[i+1].range.getStartPosition();if(c.isBefore(a))throw new Error("Overlapping ranges are not allowed!")}n=this._reduceOperations(n);for(var u=this.getEditableRange(),l=u.getStartPosition(),d=u.getEndPosition(),i=0;i<n.length;i++){var h=n[i].range;if(!l.isBeforeOrEqual(h.getStartPosition())||!h.getEndPosition().isBeforeOrEqual(d))throw new Error("Editing outside of editable range not allowed!")}for(var p=t._getInverseEditRanges(n),f=[],i=0;i<n.length;i++)f[i]={identifier:n[i].identifier,range:p[i],text:this.getValueInRange(n[i].range),forceMoveMarkers:n[i].forceMoveMarkers};return this._applyEdits(n),f},t._getInverseEditRanges=function(e){for(var t,i,o=[],r=null,s=0,a=e.length;a>s;s++){var c=e[s],u=void 0,l=void 0;r?r.range.endLineNumber===c.range.startLineNumber?(u=t,l=i+(c.range.startColumn-r.range.endColumn)):(u=t+(c.range.startLineNumber-r.range.endLineNumber),l=c.range.startColumn):(u=c.range.startLineNumber,l=c.range.startColumn);var d=void 0;if(c.lines&&c.lines.length>0){var h=c.lines.length,p=c.lines[0],f=c.lines[h-1];d=1===h?new n.Range(u,l,u,l+p.length):new n.Range(u,l,u+h-1,f.length+1)}else d=new n.Range(u,l,u,l);t=d.endLineNumber,i=d.endColumn,o.push(d),r=c}return o},t.prototype._applyEdits=function(e){var o=this;e.sort(t._sortOpsDescending),this._withDeferredEvents(function(t){for(var s=[],a=[],c=[],u=function(e){e.startColumn===e.endColumn&&0===e.text.length||c.push(e)},l=function(){if(0!==c.length){c.reverse();for(var e=c[0].lineNumber,n=0,i=1,r=c.length;r>i;i++){var a=c[i].lineNumber;a!==e&&(o._invalidateLine(e-1),o._lines[e-1].applyEdits(t.changedMarkers,c.slice(n,i)),s.push(o._createLineChangedEvent(e)),e=a,n=i)}o._invalidateLine(e-1),o._lines[e-1].applyEdits(t.changedMarkers,c.slice(n,c.length)),s.push(o._createLineChangedEvent(e)),c=[]}},d=e[e.length-1].range.startLineNumber,h=e[0].range.endLineNumber+1,p=0,f=0,m=e.length;m>f;f++){var v=e[f],g=v.range.startLineNumber,y=v.range.startColumn,_=v.range.endLineNumber,b=v.range.endColumn;if(g!==_||y!==b||v.lines&&0!==v.lines.length){var S=_-g,E=v.lines?v.lines.length-1:0,w=Math.min(S,E);p+=E-S;for(var C=w;C>=0;C--){var T=g+C;u({lineNumber:T,startColumn:T===g?y:1,endColumn:T===_?b:o.getLineMaxColumn(T),text:v.lines?v.lines[C]:"",forceMoveMarkers:v.forceMoveMarkers})}if(S>w){l();var k=g+w,x=o.getLineMaxColumn(k),I=o._lines[_-1].split(t.changedMarkers,b,!1);o._invalidateLine(k-1);for(var D=_-k,A=[],C=0;D>C;C++){var L=k+C;A=A.concat(o._lines[L].deleteLine(t.changedMarkers,x,L+1))}o._lines.splice(k,D),o._lines[k-1].append(t.changedMarkers,I),o._lines[k-1].addMarkers(A),s.push(o._createLineChangedEvent(k)),s.push(o._createLinesDeletedEvent(k+1,k+D))}if(E>w){l();var O=g+w,M=O===g?y:1;v.lines&&(M+=v.lines[w].length);var P=o._lines[O-1].split(t.changedMarkers,M,v.forceMoveMarkers);s.push(o._createLineChangedEvent(O)),o._invalidateLine(O-1);for(var R=[],C=w+1;E>=C;C++){var N=g+C;o._lines.splice(N-1,0,new r.ModelLine(N,v.lines[C])),R.push(v.lines[C])}R[R.length-1]+=P.text,o._lines[g+E-1].append(t.changedMarkers,P),s.push(o._createLinesInsertedEvent(O+1,g+E,R.join("\n")))}a.push({range:new n.Range(g,y,_,b),rangeLength:v.rangeLength,text:v.lines?v.lines.join(o.getEOL()):"",eol:o._EOL,versionId:-1,isUndoing:o._isUndoing,isRedoing:o._isRedoing})}}l(),h=Math.max(1,Math.min(o.getLineCount(),h+p)),0!==p&&(h=o.getLineCount());for(var F=d;h>=F;F++)o._lines[F-1].updateLineNumber(t.changedMarkers,F);if(0!==s.length||0!==a.length){0===s.length&&s.push(o._createLineChangedEvent(d));var W=Math.max(s.length,a.length),H=o.getVersionId()+W;o._setVersionId(H);for(var f=s.length-1,V=H;f>=0;f--,V--)s[f].versionId=V;for(var f=a.length-1,V=H;f>=0;f--,V--)a[f].versionId=V;for(var f=0,m=s.length;m>f;f++)o.emit(i.EventType.ModelContentChanged,s[f]);for(var f=0,m=a.length;m>f;f++)o.emit(i.EventType.ModelContentChanged2,a[f])}})},t.prototype._assertLineNumbersOK=function(){for(var e=0,t=0,n=this._lines.length;n>t;t++){var i=this._lines[t],o=t+1;if(i.lineNumber!==o)throw new Error("Invalid lineNumber at line: "+o+"; text is: "+this.getValue());for(var r=i.getMarkers(),s=0,a=r.length;a>s;s++){e++;var c=r[s].id,u=this._markerIdToMarker[c];if(u.line!==i)throw new Error("Misplaced marker with id "+c)}}var l=Object.keys(this._markerIdToMarker).length;if(l!==e)throw new Error("There are misplaced markers!")},t.prototype.undo=function(){var e=this;if(this._isDisposed)throw new Error("EditableTextModel.undo: Model is disposed");return this._withDeferredEvents(function(){e._isUndoing=!0;var t=e._commandManager.undo();return e._isUndoing=!1,t?(e._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null})},t.prototype.redo=function(){var e=this;if(this._isDisposed)throw new Error("EditableTextModel.redo: Model is disposed");return this._withDeferredEvents(function(){e._isRedoing=!0;var t=e._commandManager.redo();return e._isRedoing=!1,t?(e._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null})},t.prototype.setEditableRange=function(e){if(this._isDisposed)throw new Error("EditableTextModel.setEditableRange: Model is disposed");this._commandManager.clear(),this._hasEditableRange&&(this.removeTrackedRange(this._editableRangeId),this._editableRangeId=null,this._hasEditableRange=!1),e&&(this._hasEditableRange=!0,this._editableRangeId=this.addTrackedRange(e,i.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges))},t.prototype.hasEditableRange=function(){if(this._isDisposed)throw new Error("EditableTextModel.hasEditableRange: Model is disposed");return this._hasEditableRange},t.prototype.getEditableRange=function(){if(this._isDisposed)throw new Error("EditableTextModel.getEditableRange: Model is disposed");return this._hasEditableRange?this.getTrackedRange(this._editableRangeId):this.getFullModelRange()},t.prototype._createLineChangedEvent=function(e){return{changeType:i.EventType.ModelContentChangedLineChanged,lineNumber:e,detail:this._lines[e-1].text,versionId:-1,isUndoing:this._isUndoing,isRedoing:this._isRedoing}},t.prototype._createLinesDeletedEvent=function(e,t){return{changeType:i.EventType.ModelContentChangedLinesDeleted,fromLineNumber:e,toLineNumber:t,versionId:-1,isUndoing:this._isUndoing,isRedoing:this._isRedoing}},t.prototype._createLinesInsertedEvent=function(e,t,n){return{changeType:i.EventType.ModelContentChangedLinesInserted,fromLineNumber:e,toLineNumber:t,detail:n,versionId:-1,isUndoing:this._isUndoing,isRedoing:this._isRedoing}},t}(s.TextModelWithDecorations);t.EditableTextModel=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/model",["require","exports","vs/base/common/uri","vs/editor/common/editorCommon","vs/editor/common/model/editableTextModel","vs/editor/common/model/textModel"],function(e,t,n,i,o,r){"use strict";var s=0,a={},c=function(e){function t(t,o,c,u){if(void 0===u&&(u=null),e.call(this,[i.EventType.ModelDispose],r.TextModel.toRawText(t,o),c),s++,this.id="$model"+s,"undefined"==typeof u||null===u?this._associatedResource=n["default"].parse("inmemory://model/"+s):this._associatedResource=u,a[String(this._associatedResource)])throw new Error("Cannot instantiate a second Model with the same URI!");this._attachedEditorCount=0,a[String(this._associatedResource)]=!0}return __extends(t,e),t.prototype.getModeId=function(){return this.getMode().getId()},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._isDisposing=!0,delete a[String(this._associatedResource)],this.emit(i.EventType.ModelDispose),e.prototype.dispose.call(this),this._isDisposing=!1},t.prototype.onBeforeAttached=function(){if(this._isDisposed)throw new Error("Model.onBeforeAttached: Model is disposed");this._attachedEditorCount++,this._warmUpTokens()},t.prototype.onBeforeDetached=function(){if(this._isDisposed)throw new Error("Model.onBeforeDetached: Model is disposed");this._attachedEditorCount--},t.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},t.prototype.getAssociatedResource=function(){if(this._isDisposed)throw new Error("Model.getAssociatedResource: Model is disposed");return this._associatedResource},t.DEFAULT_CREATION_OPTIONS=r.TextModel.DEFAULT_CREATION_OPTIONS,t}(o.EditableTextModel);t.Model=c}),define("vs/nls!vs/editor/common/modes/modesRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/modes/modesRegistry",t)}),define("vs/nls!vs/editor/common/services/bulkEdit",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/services/bulkEdit",t)}),define("vs/nls!vs/editor/common/services/modeServiceImpl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/services/modeServiceImpl",t)}),define("vs/nls!vs/editor/common/services/modelServiceImpl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/services/modelServiceImpl",t)}),define("vs/nls!vs/editor/contrib/accessibility/browser/accessibility",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/accessibility/browser/accessibility",t)}),define("vs/nls!vs/editor/contrib/clipboard/browser/clipboard",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/clipboard/browser/clipboard",t)}),define("vs/nls!vs/editor/contrib/comment/common/comment",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/comment/common/comment",t)}),define("vs/nls!vs/editor/contrib/contextmenu/browser/contextmenu",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/contextmenu/browser/contextmenu",t)}),define("vs/nls!vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/defineKeybinding/browser/defineKeybinding",t)}),define("vs/nls!vs/editor/contrib/find/browser/findWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/find/browser/findWidget",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/find/browser/findWidget",["require","exports","vs/nls!vs/editor/contrib/find/browser/findWidget","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/strings","vs/base/browser/dom","vs/base/browser/ui/findinput/findInput","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/widget","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/contrib/find/common/findModel","vs/css!./findWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=n.localize(0,null),f=n.localize(1,null),m=n.localize(2,null),v=n.localize(3,null),g=n.localize(4,null),y=n.localize(5,null),_=n.localize(6,null),b=n.localize(7,null),S=n.localize(8,null),E=n.localize(9,null),w=n.localize(10,null),C=n.localize(11,null),T=n.localize(12,null),k=n.localize(13,null),x=function(e){function t(t,n,i,o,r){var a=this;e.call(this),this._codeEditor=t,this._controller=n,this._state=i,this._contextViewProvider=o,this._keybindingService=r,this._isVisible=!1,this._isReplaceVisible=!1,this._register(this._state.addChangeListener(function(e){return a._onStateChanged(e)})),this._buildDomNode(),this._updateButtons(),this.focusTracker=this._register(s.trackFocus(this._findInput.inputBox.inputElement)),this.focusTracker.addFocusListener(function(){return a._reseedFindScope()}),this._register(this._codeEditor.addListener2(l.EventType.ConfigurationChanged,function(e){e.readOnly&&(a._codeEditor.getConfiguration().readOnly&&a._state.change({isReplaceRevealed:!1},!1),a._updateButtons())})),this._register(this._codeEditor.addListener2(l.EventType.CursorSelectionChanged,function(){a._isVisible&&a._updateToggleSelectionFindButton()})),this._codeEditor.addOverlayWidget(this)}return __extends(t,e),t.prototype._reseedFindScope=function(){var e=this._codeEditor.getSelection();e.startLineNumber!==e.endLineNumber&&this._state.change({searchScope:e},!0)},t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return this._isVisible?{preference:d.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER}:null},t.prototype._onStateChanged=function(e){if(e.searchString&&(this._findInput.setValue(this._state.searchString),this._updateButtons()),e.replaceString&&(this._replaceInputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal(!0):this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getConfiguration().readOnly||this._isReplaceVisible||(this._isReplaceVisible=!0,this._updateButtons()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),
e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;s.toggleClass(this._domNode,"no-results",t),this._updateMatchesCount()}},t.prototype._updateMatchesCount=function(){this._state.matchesCount>=h.MATCHES_LIMIT?this._matchesCount.title=C:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);var e;if(this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=h.MATCHES_LIMIT&&(t+="+");var n=String(this._state.matchesPosition);"0"===n&&(n="?"),e=r.format(T,n,t)}else e=k;this._matchesCount.appendChild(document.createTextNode(e))},t.prototype._updateToggleSelectionFindButton=function(){var e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber:!1,n=this._toggleSelectionFind.checked;this._toggleSelectionFind.setEnabled(this._isVisible&&(n||t))},t.prototype._updateButtons=function(){this._findInput.setEnabled(this._isVisible),this._replaceInputBox.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0;this._prevBtn.setEnabled(this._isVisible&&e),this._nextBtn.setEnabled(this._isVisible&&e),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),s.toggleClass(this._domNode,"replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var t=!this._codeEditor.getConfiguration().readOnly;this._toggleReplaceBtn.setEnabled(this._isVisible&&t)},t.prototype._reveal=function(e){var t=this;this._isVisible||(this._isVisible=!0,this._updateButtons(),setTimeout(function(){s.addClass(t._domNode,"visible"),e||(s.addClass(t._domNode,"noanimation"),setTimeout(function(){s.removeClass(t._domNode,"noanimation")},200))},0),this._codeEditor.layoutOverlayWidget(this))},t.prototype._hide=function(e){this._isVisible&&(this._isVisible=!1,this._updateButtons(),s.removeClass(this._domNode,"visible"),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this))},t.prototype.focusFindInput=function(){this._findInput.select(),this._findInput.focus()},t.prototype.focusReplaceInput=function(){this._replaceInputBox.select(),this._replaceInputBox.focus()},t.prototype._onFindInputKeyDown=function(e){switch(e.asKeybinding()){case o.CommonKeybindings.ENTER:return this._codeEditor.getAction(h.FIND_IDS.NextMatchFindAction).run().done(null,i.onUnexpectedError),void e.preventDefault();case o.CommonKeybindings.SHIFT_ENTER:return this._codeEditor.getAction(h.FIND_IDS.PreviousMatchFindAction).run().done(null,i.onUnexpectedError),void e.preventDefault();case o.CommonKeybindings.TAB:return this._isReplaceVisible?this._replaceInputBox.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault();case o.CommonKeybindings.CTRLCMD_DOWN_ARROW:return this._codeEditor.focus(),void e.preventDefault()}},t.prototype._onReplaceInputKeyDown=function(e){switch(e.asKeybinding()){case o.CommonKeybindings.ENTER:return this._controller.replace(),void e.preventDefault();case o.CommonKeybindings.CTRLCMD_ENTER:return this._controller.replaceAll(),void e.preventDefault();case o.CommonKeybindings.TAB:return this._findInput.focusOnCaseSensitive(),void e.preventDefault();case o.CommonKeybindings.SHIFT_TAB:return this._findInput.focus(),void e.preventDefault();case o.CommonKeybindings.CTRLCMD_DOWN_ARROW:return this._codeEditor.focus(),void e.preventDefault()}},t.prototype._keybindingLabelFor=function(e){var t=this._keybindingService.lookupKeybindings(e);return 0===t.length?"":" ("+this._keybindingService.getLabelFor(t[0])+")"},t.prototype._buildFindPart=function(){var e=this;this._findInput=this._register(new a.FindInput(null,this._contextViewProvider,{width:t.FIND_INPUT_AREA_WIDTH,label:p,placeholder:f,appendCaseSensitiveLabel:this._keybindingLabelFor(h.FIND_IDS.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(h.FIND_IDS.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(h.FIND_IDS.ToggleRegexCommand),validation:function(t){if(0===t.length)return null;if(!e._findInput.getRegex())return null;try{return new RegExp(t),null}catch(n){return{content:n.message}}}})),this._register(this._findInput.onKeyDown(function(t){return e._onFindInputKeyDown(t)})),this._register(this._findInput.onInput(function(){e._state.change({searchString:e._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(function(t){t.equals(o.CommonKeybindings.SHIFT_TAB)&&e._isReplaceVisible&&(e._replaceInputBox.focus(),t.preventDefault())})),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new D({label:m+this._keybindingLabelFor(h.FIND_IDS.PreviousMatchFindAction),className:"previous",onTrigger:function(){e._codeEditor.getAction(h.FIND_IDS.PreviousMatchFindAction).run().done(null,i.onUnexpectedError)},onKeyDown:function(e){}})),this._nextBtn=this._register(new D({label:v+this._keybindingLabelFor(h.FIND_IDS.NextMatchFindAction),className:"next",onTrigger:function(){e._codeEditor.getAction(h.FIND_IDS.NextMatchFindAction).run().done(null,i.onUnexpectedError)},onKeyDown:function(e){}}));var n=document.createElement("div");return n.className="find-part",n.appendChild(this._findInput.domNode),n.appendChild(this._matchesCount),n.appendChild(this._prevBtn.domNode),n.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new I({parent:n,title:g,onChange:function(){e._toggleSelectionFind.checked?e._reseedFindScope():e._state.change({searchScope:null},!0)}})),this._closeBtn=this._register(new D({label:y+this._keybindingLabelFor(h.FIND_IDS.CloseFindWidgetCommand),className:"close-fw",onTrigger:function(){e._state.change({isRevealed:!1},!1)},onKeyDown:function(t){t.equals(o.CommonKeybindings.TAB)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),n.appendChild(this._closeBtn.domNode),n},t.prototype._buildReplacePart=function(){var e=this,n=document.createElement("div");n.className="replace-input",n.style.width=t.REPLACE_INPUT_AREA_WIDTH+"px",this._replaceInputBox=this._register(new c.InputBox(n,null,{ariaLabel:_,placeholder:b})),this._register(s.addStandardDisposableListener(this._replaceInputBox.inputElement,"keydown",function(t){return e._onReplaceInputKeyDown(t)})),this._register(s.addStandardDisposableListener(this._replaceInputBox.inputElement,"input",function(t){e._state.change({replaceString:e._replaceInputBox.value},!1)})),this._replaceBtn=this._register(new D({label:S+this._keybindingLabelFor(h.FIND_IDS.ReplaceOneAction),className:"replace",onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(o.CommonKeybindings.SHIFT_TAB)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new D({label:E+this._keybindingLabelFor(h.FIND_IDS.ReplaceAllAction),className:"replace-all",onTrigger:function(){e._controller.replaceAll()},onKeyDown:function(e){}}));var i=document.createElement("div");return i.className="replace-part",i.appendChild(n),i.appendChild(this._replaceBtn.domNode),i.appendChild(this._replaceAllBtn.domNode),i},t.prototype._buildDomNode=function(){var e=this,t=this._buildFindPart(),n=this._buildReplacePart();this._toggleReplaceBtn=this._register(new D({label:w,className:"toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!0)},onKeyDown:function(e){}})),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","false"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n)},t.ID="editor.contrib.findWidget",t.PART_WIDTH=275,t.FIND_INPUT_AREA_WIDTH=t.PART_WIDTH-54,t.REPLACE_INPUT_AREA_WIDTH=t.FIND_INPUT_AREA_WIDTH,t}(u.Widget);t.FindWidget=x;var I=function(e){function t(n){var i=this;e.call(this),this._opts=n,this._domNode=document.createElement("div"),this._domNode.className="monaco-checkbox",this._domNode.title=this._opts.title,this._checkbox=document.createElement("input"),this._checkbox.type="checkbox",this._checkbox.className="checkbox",this._checkbox.id="checkbox-"+t._COUNTER++,this._label=document.createElement("label"),this._label.className="label",this._label.htmlFor=this._checkbox.id,this._domNode.appendChild(this._checkbox),this._domNode.appendChild(this._label),this._opts.parent.appendChild(this._domNode),this.onchange(this._checkbox,function(e){i._opts.onChange()})}return __extends(t,e),Object.defineProperty(t.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checkbox.checked},set:function(e){this._checkbox.checked=e},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this._checkbox.focus()},t.prototype.enable=function(){this._checkbox.removeAttribute("disabled")},t.prototype.disable=function(){this._checkbox.disabled=!0},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},t._COUNTER=0,t}(u.Widget),D=function(e){function t(t){var n=this;e.call(this),this._opts=t,this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className="button "+this._opts.className,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,function(e){n._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,function(e){return e.equals(o.CommonKeybindings.SPACE)||e.equals(o.CommonKeybindings.ENTER)?(n._opts.onTrigger(),void e.preventDefault()):void n._opts.onKeyDown(e)})}return __extends(t,e),Object.defineProperty(t.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),t.prototype.isEnabled=function(){return this._domNode.tabIndex>=0},t.prototype.focus=function(){this._domNode.focus()},t.prototype.setEnabled=function(e){s.toggleClass(this._domNode,"disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1},t.prototype.setExpanded=function(e){this._domNode.setAttribute("aria-expanded",String(e))},t.prototype.toggleClass=function(e,t){s.toggleClass(this._domNode,e,t)},t}(u.Widget)}),define("vs/nls!vs/editor/contrib/find/common/findController",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/find/common/findController",t)}),define("vs/nls!vs/editor/contrib/folding/browser/folding",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/folding/browser/folding",t)}),define("vs/nls!vs/editor/contrib/format/common/formatActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/format/common/formatActions",t)}),define("vs/nls!vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/goToDeclaration/browser/goToDeclaration",t)}),define("vs/nls!vs/editor/contrib/gotoError/browser/gotoError",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/gotoError/browser/gotoError",t)}),define("vs/nls!vs/editor/contrib/hover/browser/hover",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/hover/browser/hover",t)}),define("vs/nls!vs/editor/contrib/hover/browser/modesContentHover",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/hover/browser/modesContentHover",t)}),define("vs/nls!vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",t)}),define("vs/nls!vs/editor/contrib/indentation/common/indentation",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/indentation/common/indentation",t)}),define("vs/nls!vs/editor/contrib/linesOperations/common/linesOperations",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/linesOperations/common/linesOperations",t)}),define("vs/nls!vs/editor/contrib/links/browser/links",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/links/browser/links",t)}),define("vs/nls!vs/editor/contrib/multicursor/common/multicursor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/multicursor/common/multicursor",t)}),define("vs/nls!vs/editor/contrib/parameterHints/browser/parameterHints",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/parameterHints/browser/parameterHints",t)}),define("vs/nls!vs/editor/contrib/parameterHints/browser/parameterHintsWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/parameterHints/browser/parameterHintsWidget",t)}),define("vs/editor/contrib/parameterHints/browser/parameterHintsWidget",["require","exports","vs/nls!vs/editor/contrib/parameterHints/browser/parameterHintsWidget","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/ui/aria/aria","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/css!./parameterHints"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t,n,i){var o=this;this.allowEditorOverflow=!0,this._onShown=n,this._onHidden=i,this.editor=t,this.modelListenersToRemove=[],this.model=null,this.isVisible=!1,this.isDisposed=!1,this.setModel(e),this.$el=r.$(".editor-widget.parameter-hints-widget").on("click",function(){o.selectNext(),o.editor.focus()}),this.$wrapper=r.$(".wrapper.monaco-editor-background").appendTo(this.$el);var s=r.$(".buttons").appendTo(this.$wrapper);r.$(".button.previous").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.selectPrevious()}).appendTo(s),r.$(".button.next").on("click",function(e){e.preventDefault(),e.stopPropagation(),o.selectNext()}).appendTo(s),this.$overloads=r.$(".overloads").appendTo(this.$wrapper),this.$signatures=r.$(".signatures").appendTo(this.$wrapper),this.signatureViews=[],this.currentSignature=0,this.editor.addContentWidget(this),this.hide(),this.toDispose=[],this.toDispose.push(this.editor.addListener2(a.EventType.CursorSelectionChanged,function(e){o.isVisible&&o.editor.layoutContentWidget(o)}))}return e.prototype.setModel=function(e){var t=this;this.releaseModel(),this.model=e,this.modelListenersToRemove.push(this.model.addListener("hint",function(e){t.show(),t.parameterHints=e.hints,t.render(e.hints),t.currentSignature=e.hints.currentSignature,t.select(t.currentSignature)})),this.modelListenersToRemove.push(this.model.addListener("cancel",function(e){t.hide()}))},e.prototype.show=function(){var e=this;this.isDisposed||this.isVisible||(this._onShown(),this.isVisible=!0,o.TPromise.timeout(100).done(function(){e.$el.addClass("visible")}),this.editor.layoutContentWidget(this))},e.prototype.hide=function(){this.isDisposed||this.isVisible&&(this._onHidden(),this.isVisible=!1,this.parameterHints=null,this.announcedLabel=null,this.$el.removeClass("visible"),this.editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this.isVisible?{position:this.editor.getPosition(),preference:[c.ContentWidgetPositionPreference.ABOVE,c.ContentWidgetPositionPreference.BELOW]}:null},e.prototype.render=function(e){e.signatures.length>1?this.$el.addClass("multiple"):this.$el.removeClass("multiple"),this.$signatures.empty(),this.signatureViews=[];for(var t=0,n=0,i=e.signatures.length;i>n;n++){var o=e.signatures[n],r=this.renderSignature(this.$signatures,o,e.currentParameter);this.renderDocumentation(r,o,e.currentParameter);var s=r.getClientArea().height;this.signatureViews.push({top:t,height:s}),t+=s}},e.prototype.renderSignature=function(e,t,n){var i=r.$(".signature").appendTo(e),o=t.parameters.length>0;if(o){for(var s=r.$("span.parameters"),a=0,c=0,u=t.parameters.length;u>c;c++){var l=t.parameters[c];(0===c?i:s).append(r.$("span").text(t.label.substring(a,l.signatureLabelOffset))),s.append(r.$("span.parameter").addClass(c===n?"active":"").text(t.label.substring(l.signatureLabelOffset,l.signatureLabelEnd))),a=l.signatureLabelEnd}i.append(s),i.append(r.$("span").text(t.label.substring(a)))}else i.append(r.$("span").text(t.label));return i},e.prototype.renderDocumentation=function(e,t,n){t.documentation&&e.append(r.$(".documentation").text(t.documentation));var i=t.parameters[n];if(i&&i.documentation){var o=r.$(".documentation");o.append(r.$("span.parameter").text(i.label)),o.append(r.$("span").text(i.documentation)),e.append(o)}},e.prototype.select=function(e){var t=this.signatureViews[e];if(t){this.$signatures.style({height:t.height+"px"}),this.$signatures.getHTMLElement().scrollTop=t.top;var i=""+(e+1);if(this.signatureViews.length<10&&(i+="/"+this.signatureViews.length),this.$overloads.text(i),this.parameterHints&&this.parameterHints.signatures[e].parameters[this.parameterHints.currentParameter]){var o=this.parameterHints.signatures[e].parameters[this.parameterHints.currentParameter].label;this.announcedLabel!==o&&(s.alert(n.localize(0,null,o)),this.announcedLabel=o)}this.editor.layoutContentWidget(this)}},e.prototype.selectNext=function(){return this.signatureViews.length<2?(this.cancel(),!1):(this.currentSignature=(this.currentSignature+1)%this.signatureViews.length,this.select(this.currentSignature),!0)},e.prototype.selectPrevious=function(){return this.signatureViews.length<2?(this.cancel(),!1):(this.currentSignature--,this.currentSignature<0&&(this.currentSignature=this.signatureViews.length-1),this.select(this.currentSignature),!0)},e.prototype.cancel=function(){this.model.cancel()},e.prototype.getDomNode=function(){return this.$el.getHTMLElement()},e.prototype.getId=function(){return e.ID},e.prototype.releaseModel=function(){for(var e;e=this.modelListenersToRemove.pop();)e();this.model&&(this.model.dispose(),this.model=null)},e.prototype.destroy=function(){this.toDispose=i.disposeAll(this.toDispose),this.releaseModel(),this.$overloads&&(this.$overloads.destroy(),delete this.$overloads),this.$signatures&&(this.$signatures.destroy(),delete this.$signatures),this.$wrapper&&(this.$wrapper.destroy(),delete this.$wrapper),this.$el&&(this.$el.destroy(),delete this.$el),this.isDisposed=!0},e.ID="editor.widget.parameterHintsWidget",e}();t.ParameterHintsWidget=u}),define("vs/nls!vs/editor/contrib/quickFix/browser/quickFix",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/quickFix/browser/quickFix",t)}),define("vs/nls!vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",["require","exports","vs/nls!vs/editor/contrib/quickFix/browser/quickFixSelectionWidget","vs/base/common/errors","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/parts/tree/browser/treeDefaults","vs/base/parts/tree/browser/treeImpl","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/base/browser/ui/aria/aria","vs/css!./quickFix"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){return e&&"object"==typeof e.command&&"string"==typeof e.command.title}function h(e){return n.localize(0,null,e.command.title)}function p(e,t){return 19}var f=r.emmet,m=function(){function e(e,t){this.parent=e,this.message=t}return e}();t.Message=m;var v=function(){function e(e){this.child=new m(this,e)}return e}();t.MessageRoot=v;var g=function(){function e(){this.root=null}return e.prototype.isRoot=function(e){return e instanceof v?!0:e instanceof m?!1:Array.isArray(e)?(this.root=e,!0):!1},e.prototype.getId=function(e,t){if(t instanceof v)return"messageroot";if(t instanceof m)return"message"+t.message;if(Array.isArray(t))return"root";if(d(t))return t.id;throw i.illegalArgument("element")},e.prototype.getParent=function(e,t){return t instanceof v?o.TPromise.as(null):t instanceof m?o.TPromise.as(t.parent):o.TPromise.as(this.isRoot(t)?null:this.root)},e.prototype.getChildren=function(e,t){return t instanceof v?o.TPromise.as([t.child]):t instanceof m?o.TPromise.as([]):o.TPromise.as(this.isRoot(t)?t:[])},e.prototype.hasChildren=function(e,t){return this.isRoot(t)},e}(),y=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onLeftClick=function(e,t,n){return n.preventDefault(),n.stopPropagation(),t instanceof m||e.setSelection([t],{origin:"mouse"}),!0},t}(s.DefaultController),_=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return d(t)?h(t):void 0},e}();t.AccessibilityProvider=_;var b=function(){function e(){}return e.prototype.getHeight=function(e,t){return p(e,t)},e.prototype.getTemplateId=function(e,t){return t instanceof m?"message":"default"},e.prototype.renderTemplate=function(e,t,n){if("message"===t){var i=r.append(n,f("span"));return i.style.opacity="0.7",i.style.paddingLeft="12px",{element:i}}var o={},s=r.append(n,f(".text"));o.main=r.append(s,f(".main"));var a=r.append(s,f(".docs"));return o.documentationLabel=r.append(a,f("span.docs-label")),o},e.prototype.renderElement=function(e,t,n,i){if("message"===n)return void(i.element.textContent=t.message);var o=t;i.main.textContent=o.command.title,i.documentationLabel.textContent=""},e.prototype.disposeTemplate=function(e,t,n){},e}(),S=function(){function e(t,o,r,s){var u=this;this.allowEditorOverflow=!0,this.editor=t,this._onShown=r,this._onHidden=s,this.shouldShowEmptyList=!0,this.isActive=!1,this.isLoading=!1,this.isAuto=!1,this.modelListenersToRemove=[],this.model=null,this.telemetryData=Object.create(null),this.telemetryService=o,this.listenersToRemove=[],this.domnode=f(".editor-widget.quickfix-widget.monaco-editor-background.no-icons"),this.domnode.style.width=e.WIDTH+"px",this.tree=new a.Tree(this.domnode,{dataSource:new g,renderer:new b,controller:new y,accessibilityProvider:new _},{twistiePixels:0,alwaysFocused:!0,verticalScrollMode:"visible",useShadows:!1,ariaLabel:n.localize(3,null)}),this.listenersToRemove.push(this.tree.addListener("selection",function(e){if(e.selection&&e.selection.length>0){var t=e.selection[0];!d(t)||t instanceof v||t instanceof m||(u.telemetryData.selectedIndex=u.tree.getInput().indexOf(t),u.telemetryData.wasCancelled=!1,u.submitTelemetryData(),l.alert(n.localize(4,null,t.command.title)),u.model.accept(t,u.range),u.editor.focus())}}));var p=null;this.listenersToRemove.push(this.tree.addListener("focus",function(e){var t=e.focus,n=e.payload;if(t!==p){var o=[];p&&o.push(p),t&&(o.push(t),u._ariaAlert(h(t))),p=t,u.tree.refreshAll(o).done(function(){return u.updateWidgetHeight(),t?u.tree.reveal(t,n&&n.firstSuggestion?0:null):void 0},i.onUnexpectedError)}})),this.editor.addContentWidget(this),this.listenersToRemove.push(this.editor.addListener(c.EventType.CursorSelectionChanged,function(e){u.isActive&&u.editor.layoutContentWidget(u)})),this.hide()}return e.prototype._ariaAlert=function(e){this._lastAriaAlertLabel!==e&&(this._lastAriaAlertLabel=e,this._lastAriaAlertLabel&&l.alert(this._lastAriaAlertLabel))},e.prototype.setModel=function(t){var n=this;this.releaseModel(),this.model=t;var o,s=null;this.modelListenersToRemove.push(this.model.addListener("loading",function(t){n.isActive||(s=n.telemetryService.start("QuickFixSelectionWidgetLoadingTime"),n.isLoading=!0,n.isAuto=!!t.auto,n.isAuto||(o=setTimeout(function(){r.removeClass(n.domnode,"empty"),n.tree.setInput(e.LOADING_MESSAGE).done(null,i.onUnexpectedError),n.updateWidgetHeight(),n.show()},50)),t.retrigger||(n.telemetryData={wasAutomaticallyTriggered:t.characterTriggered}))})),this.modelListenersToRemove.push(this.model.addListener("suggest",function(e){n.isLoading=!1,"undefined"!=typeof o&&(clearTimeout(o),o=void 0);for(var t=e.fixes,a=-1,c=t[0],u=-1,l=0,d=t.length;d>l;l++){var h=t[l],p=h.score;p>u&&(u=p,c=h,a=l)}r.removeClass(n.domnode,"empty"),n.tree.setInput(t).done(null,i.onUnexpectedError),n.tree.setFocus(c,{firstSuggestion:!0}),n.updateWidgetHeight(),n.range=e.range,n.show(),n.telemetryData=n.telemetryData||{},n.telemetryData.suggestionCount=t.length,n.telemetryData.suggestedIndex=a,s&&(s.data={reason:"results"},s.stop(),s=null)})),this.modelListenersToRemove.push(this.model.addListener("empty",function(t){var a=n.isLoading;n.isLoading=!1,"undefined"!=typeof o&&(clearTimeout(o),o=void 0),t.auto?n.hide():a?n.shouldShowEmptyList?(r.removeClass(n.domnode,"empty"),n.tree.setInput(e.NO_SUGGESTIONS_MESSAGE).done(null,i.onUnexpectedError),n.updateWidgetHeight(),n.show()):n.hide():r.addClass(n.domnode,"empty"),s&&(s.data={reason:"empty"},s.stop(),s=null)})),this.modelListenersToRemove.push(this.model.addListener("cancel",function(e){n.isLoading=!1,"undefined"!=typeof o&&(clearTimeout(o),o=void 0),e.retrigger||(n.hide(),n.telemetryData&&(n.telemetryData.selectedIndex=-1,n.telemetryData.wasCancelled=!0,n.submitTelemetryData())),s&&(s.data={reason:"cancel"},s.stop(),s=null)}))},e.prototype.selectNextPage=function(){return this.isLoading?!this.isAuto:this.isActive?(this.tree.focusNextPage(),!0):!1},e.prototype.selectNext=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return this.tree.focusNext(1),e===this.tree.getFocus()&&this.tree.focusFirst(),!0}return!1},e.prototype.selectPreviousPage=function(){return this.isLoading?!this.isAuto:this.isActive?(this.tree.focusPreviousPage(),!0):!1},e.prototype.selectPrevious=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return this.tree.focusPrevious(1),e===this.tree.getFocus()&&this.tree.focusLast(),!0}return!1},e.prototype.acceptSelectedSuggestion=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return e?this.tree.setSelection([e]):this.model.cancelDialog(),!0}return!1},e.prototype.releaseModel=function(){for(var e;e=this.modelListenersToRemove.pop();)e();this.model=null},e.prototype.show=function(){this.isActive=!0,this.tree.layout(),this.editor.layoutContentWidget(this),this._onShown()},e.prototype.hide=function(){this._onHidden(),this.isActive=!1,this.editor.layoutContentWidget(this)},e.prototype.getPosition=function(){return this.isActive?{position:this.editor.getPosition(),preference:[u.ContentWidgetPositionPreference.BELOW,u.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.getDomNode=function(){return this.domnode},e.prototype.getId=function(){return e.ID},e.prototype.submitTelemetryData=function(){this.telemetryService.publicLog("QuickFixSelectionWidget",this.telemetryData),this.telemetryData=Object.create(null)},e.prototype.updateWidgetHeight=function(){var t,n=this.tree.getInput();if(n===e.LOADING_MESSAGE||n===e.NO_SUGGESTIONS_MESSAGE)t=19;else{var i=n;t=19*Math.min(i.length-1,11);var o=this.tree.getFocus();t+=o?p(this.tree,o):19}this.domnode.style.height=t+"px",this.tree.layout(t),this.editor.layoutContentWidget(this)},e.prototype.destroy=function(){this.releaseModel(),this.domnode=null,this.tree.dispose(),this.tree=null,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=null},e.ID="editor.widget.QuickFixSelectionWidget",e.WIDTH=360,e.LOADING_MESSAGE=new v(n.localize(1,null)),e.NO_SUGGESTIONS_MESSAGE=new v(n.localize(2,null)),e}();t.QuickFixSelectionWidget=S}),define("vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearch",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/referenceSearch/browser/referenceSearch",t)}),define("vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",t)}),define("vs/nls!vs/editor/contrib/rename/browser/rename2",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/browser/rename2",t)}),define("vs/nls!vs/editor/contrib/rename/browser/renameInputField",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/browser/renameInputField",t)}),define("vs/editor/contrib/rename/browser/renameInputField",["require","exports","vs/nls!vs/editor/contrib/rename/browser/renameInputField","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/css!./rename"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e){this.allowEditorOverflow=!0,this._currentAcceptInput=null,this._currentCancelInput=null,this._editor=e,this._editor.addContentWidget(this)}return e.prototype.dispose=function(){this._editor.removeContentWidget(this)},e.prototype.getId=function(){return"__renameInputWidget"},e.prototype.getDomNode=function(){return this._domNode||(this._inputField=document.createElement("input"),this._inputField.className="rename-input",this._inputField.type="text",this._inputField.setAttribute("aria-label",n.localize(0,null)),this._domNode=document.createElement("div"),this._domNode.style.height=this._editor.getConfiguration().lineHeight+"px",this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputField)),this._domNode},e.prototype.getPosition=function(){return this._visible?{position:this._position,preference:[c.ContentWidgetPositionPreference.BELOW,c.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.acceptInput=function(){this._currentAcceptInput&&this._currentAcceptInput()},e.prototype.cancelInput=function(){this._currentCancelInput&&this._currentCancelInput()},e.prototype.getInput=function(e,t,n,c){var u=this;this._position={lineNumber:e.startLineNumber,column:e.startColumn},this._inputField.value=t,this._inputField.setAttribute("selectionStart",n.toString()),this._inputField.setAttribute("selectionEnd",c.toString()),this._inputField.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var l,d=[];return l=function(){o.disposeAll(d),u._hide()},new r.TPromise(function(n,o){u._currentCancelInput=function(){return u._currentAcceptInput=null,u._currentCancelInput=null,o(i.canceled()),!0},u._currentAcceptInput=function(){return 0===u._inputField.value.trim().length||u._inputField.value===t?void u._currentCancelInput():(u._currentAcceptInput=null,u._currentCancelInput=null,void n(u._inputField.value))};var r=function(){s.Range.containsPosition(e,u._editor.getPosition())||u._currentCancelInput()};d.push(u._editor.addListener2(a.EventType.CursorSelectionChanged,r)),d.push(u._editor.addListener2(a.EventType.EditorBlur,u._currentCancelInput)),u._show()},this._currentCancelInput).then(function(e){return l(),e},function(e){return l(),r.TPromise.wrapError(e);
})},e.prototype._show=function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber),this._visible=!0,this._editor.layoutContentWidget(this),setTimeout(function(){e._inputField.focus(),e._inputField.setSelectionRange(parseInt(e._inputField.getAttribute("selectionStart")),parseInt(e._inputField.getAttribute("selectionEnd")))},25)},e.prototype._hide=function(){this._visible=!1,this._editor.layoutContentWidget(this)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=u}),define("vs/nls!vs/editor/contrib/rename/common/rename",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/common/rename",t)}),define("vs/nls!vs/editor/contrib/smartSelect/common/jumpToBracket",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/smartSelect/common/jumpToBracket",t)}),define("vs/nls!vs/editor/contrib/smartSelect/common/smartSelect",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/smartSelect/common/smartSelect",t)}),define("vs/nls!vs/editor/contrib/suggest/browser/suggest",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/suggest/browser/suggest",t)}),define("vs/nls!vs/editor/contrib/suggest/browser/suggestWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/suggest/browser/suggestWidget",t)}),define("vs/nls!vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",t)}),define("vs/nls!vs/editor/contrib/toggleWordWrap/common/toggleWordWrap",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/toggleWordWrap/common/toggleWordWrap",t)}),define("vs/nls!vs/editor/contrib/zoneWidget/browser/peekViewWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/zoneWidget/browser/peekViewWidget",t)}),define("vs/nls!vs/editor/node/languageConfiguration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/node/languageConfiguration",t)}),define("vs/nls!vs/editor/node/textMate/TMSnippets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/node/textMate/TMSnippets",t)}),define("vs/nls!vs/editor/node/textMate/TMSyntax",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/node/textMate/TMSyntax",t)}),define("vs/nls!vs/languages/css/common/css.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/css/common/css.contribution",t)}),define("vs/nls!vs/languages/css/common/services/lintRules",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/css/common/services/lintRules",t)}),define("vs/languages/css/common/services/lintRules",["require","exports","vs/nls!vs/languages/css/common/services/lintRules","vs/languages/css/common/level"],function(e,t,n,i){"use strict";function o(e){var i={};i[e+".validate"]={type:"boolean","default":!0,description:n.localize(18,null)};for(var o in t.Rules){var r=t.Rules[o];i[e+".lint."+r.id]=r.getConfiguration()}return i}function r(e){var n={};for(var o in t.Rules){var r=t.Rules[o],s=i.toLevel(e[r.id]);s&&(n[r.id]=s)}return n}var s="warning",a="error",c="ignore",u=function(){function e(e,t,n){this.id=e,this.message=t,this.defaultValue=n}return e.prototype.getConfiguration=function(){return{type:"string","enum":[c,s,a],"default":this.defaultValue,description:this.message}},e}();t.Rule=u,t.Rules={AllVendorPrefixes:new u("compatibleVendorPrefixes",n.localize(0,null),c),IncludeStandardPropertyWhenUsingVendorPrefix:new u("vendorPrefix",n.localize(1,null),s),DuplicateDeclarations:new u("duplicateProperties",n.localize(2,null),c),EmptyRuleSet:new u("emptyRules",n.localize(3,null),s),ImportStatemement:new u("importStatement",n.localize(4,null),c),NoWidthOrHeightWhenPaddingOrBorder:new u("boxModel",n.localize(5,null),c),UniversalSelector:new u("universalSelector",n.localize(6,null),c),ZeroWithUnit:new u("zeroUnits",n.localize(7,null),c),RequiredPropertiesForFontFace:new u("fontFaceProperties",n.localize(8,null),s),HexColorLength:new u("hexColorLength",n.localize(9,null),a),ArgsInColorFunction:new u("argumentsInColorFunction",n.localize(10,null),a),UnknownProperty:new u("unknownProperties",n.localize(11,null),s),IEStarHack:new u("ieHack",n.localize(12,null),c),UnknownVendorSpecificProperty:new u("unknownVendorSpecificProperties",n.localize(13,null),c),PropertyIgnoredDueToDisplay:new u("propertyIgnoredDueToDisplay",n.localize(14,null),s),AvoidImportant:new u("important",n.localize(15,null),c),AvoidFloat:new u("float",n.localize(16,null),c),AvoidIdSelector:new u("idSelector",n.localize(17,null),c)},t.getConfigurationProperties=o,t.sanitize=r}),define("vs/nls!vs/languages/html/common/html.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/html/common/html.contribution",t)}),define("vs/nls!vs/languages/less/common/less.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/less/common/less.contribution",t)}),define("vs/nls!vs/languages/markdown/common/markdown.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/markdown/common/markdown.contribution",t)}),define("vs/nls!vs/languages/sass/common/sass.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/sass/common/sass.contribution",t)}),define("vs/nls!vs/platform/actions/common/actionsService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/actions/common/actionsService",t)}),define("vs/nls!vs/platform/configuration/common/configurationRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)}),define("vs/nls!vs/platform/extensions/common/abstractExtensionService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/extensions/common/abstractExtensionService",t)}),define("vs/nls!vs/platform/extensions/common/extensionsRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/extensions/common/extensionsRegistry",t)}),define("vs/nls!vs/platform/extensions/node/extensionValidator",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/extensions/node/extensionValidator",t)}),define("vs/nls!vs/platform/jsonschemas/common/jsonContributionRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/jsonschemas/common/jsonContributionRegistry",t)}),define("vs/nls!vs/platform/jsonschemas/common/jsonValidationExtensionPoint",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/jsonschemas/common/jsonValidationExtensionPoint",t)}),define("vs/nls!vs/platform/keybinding/browser/keybindingServiceImpl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/keybinding/browser/keybindingServiceImpl",t)}),define("vs/nls!vs/platform/markers/common/problemMatcher",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/markers/common/problemMatcher",t)}),define("vs/nls!vs/platform/message/common/message",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/message/common/message",t)}),define("vs/nls!vs/platform/telemetry/electron-browser/electronTelemetryService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/telemetry/electron-browser/electronTelemetryService",t)}),define("vs/nls!vs/platform/theme/common/themes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/theme/common/themes",t)}),define("vs/nls!vs/workbench/api/node/extHostMessageService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/api/node/extHostMessageService",t)}),define("vs/nls!vs/workbench/browser/actions/configureLocale",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/configureLocale",t)}),define("vs/nls!vs/workbench/browser/actions/openSettings",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/openSettings",t)}),define("vs/nls!vs/workbench/browser/actions/toggleSidebarPosition",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/toggleSidebarPosition",t)}),define("vs/nls!vs/workbench/browser/actions/toggleSidebarVisibility",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/toggleSidebarVisibility",t)}),define("vs/nls!vs/workbench/browser/actions/triggerEditorActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerEditorActions",t)}),define("vs/nls!vs/workbench/browser/actions/triggerNavigation",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerNavigation",t)}),define("vs/nls!vs/workbench/browser/actions/triggerQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerQuickOpen",t)}),define("vs/nls!vs/workbench/browser/parts/activitybar/activityAction",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/activitybar/activityAction",t)}),define("vs/nls!vs/workbench/browser/parts/activitybar/activitybarPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/activitybar/activitybarPart",t)}),define("vs/nls!vs/workbench/browser/parts/compositePart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/compositePart",t)}),define("vs/nls!vs/workbench/browser/parts/editor/binaryDiffEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/binaryDiffEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/binaryEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/binaryEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editor.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editor.contribution",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editorPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editorPart",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editorStatus",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editorStatus",t)}),define("vs/nls!vs/workbench/browser/parts/editor/iframeEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/iframeEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/sideBySideEditorControl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/sideBySideEditorControl",t)}),define("vs/nls!vs/workbench/browser/parts/editor/stringEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/stringEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/textDiffEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/textDiffEditor",t)}),define("vs/nls!vs/workbench/browser/parts/panel/panelPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/panel/panelPart",t)}),define("vs/nls!vs/workbench/browser/parts/quickopen/editorHistoryModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/quickopen/editorHistoryModel",t)}),define("vs/nls!vs/workbench/browser/parts/quickopen/quickOpenController",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/quickopen/quickOpenController",t)}),define("vs/nls!vs/workbench/browser/parts/sidebar/sidebarPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/sidebar/sidebarPart",t)}),define("vs/nls!vs/workbench/browser/parts/statusbar/statusbarPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/statusbar/statusbarPart",t)}),define("vs/nls!vs/workbench/browser/quickopen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/quickopen",t)}),define("vs/nls!vs/workbench/browser/viewlet",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/viewlet",t)}),define("vs/nls!vs/workbench/common/editor/diffEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/common/editor/diffEditorInput",t)}),define("vs/nls!vs/workbench/electron-browser/actions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/actions",t)}),define("vs/nls!vs/workbench/electron-browser/crashReporter",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/crashReporter",t)}),define("vs/nls!vs/workbench/electron-browser/darwin/cli.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/darwin/cli.contribution",t)}),define("vs/nls!vs/workbench/electron-browser/integration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/integration",t)}),define("vs/nls!vs/workbench/electron-browser/main.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/main.contribution",t)}),define("vs/nls!vs/workbench/electron-browser/shell",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/shell",t)}),define("vs/nls!vs/workbench/electron-browser/update",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/update",t)}),define("vs/nls!vs/workbench/parts/debug/browser/breakpointWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/breakpointWidget",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugEditorContribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugEditorContribution",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugEditorModelManager",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugEditorModelManager",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugHover",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugHover",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugViewer",t)}),define("vs/nls!vs/workbench/parts/debug/common/debugModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/common/debugModel",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debug.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debug.contribution",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debugActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debugActions",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debugService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debugService",t)}),define("vs/nls!vs/workbench/parts/debug/node/debugAdapter",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/node/debugAdapter",t)}),define("vs/nls!vs/workbench/parts/debug/node/debugConfigurationManager",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/node/debugConfigurationManager",t)}),define("vs/nls!vs/workbench/parts/debug/node/rawDebugSession",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/node/rawDebugSession",t)}),define("vs/nls!vs/workbench/parts/emmet/node/emmet.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/emmet/node/emmet.contribution",t)}),define("vs/nls!vs/workbench/parts/errorList/browser/errorList.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/errorList/browser/errorList.contribution",t)}),define("vs/nls!vs/workbench/parts/execution/electron-browser/executionService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/execution/electron-browser/executionService",t)}),define("vs/nls!vs/workbench/parts/execution/electron-browser/terminal.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/execution/electron-browser/terminal.contribution",t)}),define("vs/nls!vs/workbench/parts/extensions/common/extensions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/common/extensions",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsActions",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWidgets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsWidgets",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",t)}),define("vs/nls!vs/workbench/parts/extensions/node/extensionsService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/node/extensionsService",t)}),define("vs/nls!vs/workbench/parts/feedback/browser/feedback",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/feedback/browser/feedback",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/binaryFileEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/binaryFileEditor",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/fileEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/fileEditorInput",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/textFileEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/textFileEditor",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileActions",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileActions.contribution",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileTracker",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileTracker",t)}),define("vs/nls!vs/workbench/parts/files/browser/files.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/files.contribution",t)}),define("vs/nls!vs/workbench/parts/files/browser/saveErrorHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/saveErrorHandler",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/emptyView",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/emptyView",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/explorerView",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/explorerView",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/explorerViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/explorerViewer",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/workingFilesView",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/workingFilesView",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/workingFilesViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/workingFilesViewer",t)}),define("vs/nls!vs/workbench/parts/files/browser/workingFilesPicker",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/workingFilesPicker",t)}),define("vs/nls!vs/workbench/parts/files/common/editors/textFileEditorModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/common/editors/textFileEditorModel",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/electronFileActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/electronFileActions",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/files.electron.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/files.electron.contribution",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/textFileServices",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/textFileServices",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitActions",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitActions.contribution",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitQuickOpen",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitServices",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitServices",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitWidgets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitWidgets",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitWorkbenchContributions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitWorkbenchContributions",t)}),define("vs/nls!vs/workbench/parts/git/node/git.lib",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/node/git.lib",t)}),define("vs/nls!vs/workbench/parts/html/browser/html.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/html/browser/html.contribution",t)}),define("vs/nls!vs/workbench/parts/html/browser/htmlPreviewPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/html/browser/htmlPreviewPart",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownActions",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownActions.contribution",t)}),define("vs/nls!vs/workbench/parts/markdown/common/markdownEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/common/markdownEditorInput",t)}),define("vs/nls!vs/workbench/parts/markdown/common/markdownEditorModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/common/markdownEditorModel",t)}),define("vs/nls!vs/workbench/parts/output/browser/output.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/browser/output.contribution",t)}),define("vs/nls!vs/workbench/parts/output/browser/outputActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/browser/outputActions",t)}),define("vs/nls!vs/workbench/parts/output/common/outputEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/common/outputEditorInput",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/commandsHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/commandsHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/gotoLineHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/gotoLineHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/gotoSymbolHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/gotoSymbolHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/helpHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/helpHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/markersHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/markersHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/quickopen.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/quickopen.contribution",t)}),define("vs/nls!vs/workbench/parts/search/browser/search.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/search/browser/search.contribution",t)}),define("vs/nls!vs/workbench/parts/snippets/electron-browser/snippets.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/snippets/electron-browser/snippets.contribution",t)}),define("vs/nls!vs/workbench/parts/tasks/browser/taskQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/browser/taskQuickOpen",t)}),define("vs/nls!vs/workbench/parts/tasks/common/taskTemplates",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/common/taskTemplates",t)}),define("vs/nls!vs/workbench/parts/tasks/electron-browser/task.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/electron-browser/task.contribution",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerConfiguration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerConfiguration",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerDetector",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerDetector",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerSystem",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerSystem",t)}),define("vs/nls!vs/workbench/parts/themes/electron-browser/themes.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/themes/electron-browser/themes.contribution",t)}),define("vs/nls!vs/workbench/parts/update/electron-browser/update.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/update/electron-browser/update.contribution",t)}),define("vs/nls!vs/workbench/services/files/electron-browser/fileService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/files/electron-browser/fileService",t)}),define("vs/nls!vs/workbench/services/files/node/fileService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/files/node/fileService",t)}),define("vs/nls!vs/workbench/services/history/browser/history",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/history/browser/history",t)}),define("vs/nls!vs/workbench/services/keybinding/electron-browser/keybindingService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/keybinding/electron-browser/keybindingService",t)}),define("vs/nls!vs/workbench/services/message/electron-browser/messageService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/message/electron-browser/messageService",t)}),define("vs/nls!vs/workbench/services/request/node/requestService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/request/node/requestService",t)}),define("vs/nls!vs/workbench/services/themes/node/themeService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/themes/node/themeService",t)}),define("vs/nls!vs/workbench/services/thread/electron-browser/threadService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/thread/electron-browser/threadService",t)}),define("vs/platform/extensions/common/ipcRemoteCom",["require","exports","vs/base/common/winjs.base","vs/base/common/marshalling","vs/base/common/errors"],function(e,t,n,i,o){
"use strict";function r(e){var t=0;return function(i,o,r){var s=String(++t),c={c:null,e:null,p:null},u=new n.TPromise(function(e,t,n){c.c=e,c.e=t,c.p=n},function(){e({cancel:s})});return a[s]=c,e({req:s,rpcId:i,method:o,args:r}),u}}function s(e){function t(){var t=h;h=[],e(t)}function s(e){var n=i.stringify(e);0===h.length&&process.nextTick(t),h.push(n)}function c(e,t,i){try{return n.TPromise.as(l.handle(e,t,i))}catch(o){return n.TPromise.wrapError(o)}}var u=r(s),l=null,d=Object.create(null),h=[],p=[],f=function(){var e=p.shift();p.length>0&&process.nextTick(f);var t=i.parse(e);if(t.seq){if(!a.hasOwnProperty(t.seq))return void console.warn("Got reply to unknown seq");var n=a[t.seq];if(delete a[t.seq],t.err){var r=t.err;return t.err.$isError&&(r=new Error,r.name=t.err.name,r.message=t.err.message,r.stack=t.err.stack),void n.e(r)}return void n.c(t.res)}if(t.cancel)return void(d[t.cancel]&&d[t.cancel].cancel());if(t.err)return void console.error(t.err);var u=t.rpcId;if(!l)throw new Error("got message before big handler attached!");var h=t.req;d[h]=c(u,t.method,t.args),d[h].then(function(e){delete d[h],s({seq:h,res:e})},function(e){delete d[h],s({seq:h,err:o.transformErrorForSerialization(e)})})},m={callOnRemote:u,setManyHandler:function(e){l=e},handle:function(e){0===p.length&&process.nextTick(f),p=p.concat(e)}};return m}var a={};t.create=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/instantiation/common/descriptors",["require","exports","vs/base/common/errors"],function(e,t,n){"use strict";var i=function(){function e(e){this._staticArguments=e}return e.prototype.appendStaticArguments=function(e){this._staticArguments.push.apply(this._staticArguments,e)},e.prototype.staticArguments=function(e){return isNaN(e)?this._staticArguments.slice(0):this._staticArguments[e]},e.prototype._validate=function(e){if(!e)throw n.illegalArgument("can not be falsy")},e}();t.AbstractDescriptor=i;var o=function(e){function t(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.call(this,n),this._ctor=t}return __extends(t,e),Object.defineProperty(t.prototype,"ctor",{get:function(){return this._ctor},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e===this?!0:e instanceof t?e.ctor===this.ctor:!1},t.prototype.bind=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=[];return i=i.concat(this.staticArguments()),i=i.concat(e),new(t.bind.apply(t,[void 0].concat([this._ctor],i)))},t}(i);t.SyncDescriptor=o,t.createSyncDescriptor=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new(o.bind.apply(o,[void 0].concat([e],t)))};var r=function(e){function t(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e.call(this,i),this._moduleName=t,this._ctorName=n,"string"!=typeof t)throw new Error("Invalid AsyncDescriptor arguments, expected `moduleName` to be a string!")}return __extends(t,e),t.create=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"moduleName",{get:function(){return this._moduleName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctorName",{get:function(){return this._ctorName},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e===this?!0:e instanceof t?e.moduleName===this.moduleName&&e.ctorName===this.ctorName:!1},t.prototype.bind=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=[];return i=i.concat(this.staticArguments()),i=i.concat(e),new(t.bind.apply(t,[void 0].concat([this.moduleName,this.ctorName],i)))},t}(i);t.AsyncDescriptor=r;var s=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return new(r.bind.apply(r,[void 0].concat([e,t],n)))};t.createAsyncDescriptor0=s,t.createAsyncDescriptor1=s,t.createAsyncDescriptor2=s,t.createAsyncDescriptor3=s,t.createAsyncDescriptor4=s,t.createAsyncDescriptor5=s,t.createAsyncDescriptor6=s,t.createAsyncDescriptor7=s}),define("vs/platform/instantiation/common/extensions",["require","exports","./descriptors"],function(e,t,n){"use strict";function i(e,t){r.push({id:e,descriptor:new n.SyncDescriptor(t)})}function o(){return r}t.Services="di.services";var r=[];t.registerSingleton=i,t.getServices=o}),define("vs/platform/instantiation/common/instantiation",["require","exports"],function(e,t){"use strict";function n(e){var t=function(t,n,o){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");t[i.DI_TARGET]===t?t[i.DI_DEPENDENCIES].push({serviceId:e,index:o}):(t[i.DI_DEPENDENCIES]=[{serviceId:e,index:o}],t[i.DI_TARGET]=t)};return t[i.DI_PROVIDES]=e,t}var i;!function(e){function t(t){return t[e.DI_PROVIDES]}function n(t){return t[e.DI_DEPENDENCIES]}e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.DI_PROVIDES="$di$provides_service",e.getServiceId=t,e.getServiceDependencies=n}(i=t._util||(t._util={})),t.IInstantiationService=n("instantiationService"),t.createDecorator=n}),define("vs/editor/common/services/codeEditorService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.ID_CODE_EDITOR_SERVICE="codeEditorService",t.ICodeEditorService=n.createDecorator(t.ID_CODE_EDITOR_SERVICE)}),define("vs/editor/common/services/abstractCodeEditorService",["require","exports","vs/base/common/event","vs/editor/common/services/codeEditorService"],function(e,t,n,i){"use strict";var o=function(){function e(){this.serviceId=i.ICodeEditorService,this._codeEditors=Object.create(null),this._onCodeEditorAdd=new n.Emitter,this._onCodeEditorRemove=new n.Emitter}return e.prototype.addCodeEditor=function(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)},Object.defineProperty(e.prototype,"onCodeEditorAdd",{get:function(){return this._onCodeEditorAdd.event},enumerable:!0,configurable:!0}),e.prototype.removeCodeEditor=function(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)},Object.defineProperty(e.prototype,"onCodeEditorRemove",{get:function(){return this._onCodeEditorRemove.event},enumerable:!0,configurable:!0}),e.prototype.getCodeEditor=function(e){return this._codeEditors[e]||null},e.prototype.listCodeEditors=function(){var e=this;return Object.keys(this._codeEditors).map(function(t){return e._codeEditors[t]})},e}();t.AbstractCodeEditorService=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/services/codeEditorServiceImpl",["require","exports","vs/base/common/objects","vs/base/common/strings","vs/base/common/uri","vs/base/browser/dom","vs/editor/common/editorCommon","vs/editor/common/services/abstractCodeEditorService"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){var t=n.deepClone(e);n.mixin(t,e.light);var i=n.deepClone(e);return n.mixin(i,e.dark),{light:t,dark:i}}var u=function(e){function t(){e.call(this),this._styleSheet=r.createStyleSheet(),this._decorationRenderOptions=Object.create(null)}return __extends(t,e),t.prototype.registerDecorationType=function(e,t){this._decorationRenderOptions[e]&&(this._decorationRenderOptions[e].dispose(),delete this._decorationRenderOptions[e]);var n=new d(this._styleSheet,e,t);this._decorationRenderOptions[e]=n},t.prototype.removeDecorationType=function(e){this._decorationRenderOptions[e]&&(this._decorationRenderOptions[e].dispose(),delete this._decorationRenderOptions[e],this.listCodeEditors().forEach(function(t){return t.removeDecorations(e)}))},t.prototype.resolveDecorationType=function(e){if(this._decorationRenderOptions[e])return this._decorationRenderOptions[e];throw new Error("Unknown decoration type key: "+e)},t}(a.AbstractCodeEditorService);t.CodeEditorServiceImpl=u;var l,d=function(){function e(t,n,i){var o=c(i);this._styleSheet=t,this._key=n,this.className=e._handle(this._styleSheet,this._key,h.ClassName,e._getCSSTextForModelDecorationClassName(o.light),e._getCSSTextForModelDecorationClassName(o.dark)),this.inlineClassName=e._handle(this._styleSheet,this._key,h.InlineClassName,e._getCSSTextForModelDecorationInlineClassName(o.light),e._getCSSTextForModelDecorationInlineClassName(o.dark)),this.glyphMarginClassName=e._handle(this._styleSheet,this._key,h.GlyphMarginClassName,e._getCSSTextForModelDecorationGlyphMarginClassName(o.light),e._getCSSTextForModelDecorationGlyphMarginClassName(o.dark)),this.isWholeLine=Boolean(i.isWholeLine),"undefined"==typeof o.light.overviewRulerColor&&"undefined"==typeof o.dark.overviewRulerColor||(this.overviewRuler={color:o.light.overviewRulerColor||o.dark.overviewRulerColor,darkColor:o.dark.overviewRulerColor||o.light.overviewRulerColor,position:i.overviewRulerLane||s.OverviewRulerLane.Center})}return e.prototype.dispose=function(){r.removeCSSRulesWithPrefix(p.getDeletionPrefixFor(l.Light,this._key),this._styleSheet),r.removeCSSRulesWithPrefix(p.getDeletionPrefixFor(l.Dark,this._key),this._styleSheet)},e._getCSSTextForModelDecorationClassName=function(e){var t=[];return"undefined"!=typeof e.backgroundColor&&t.push(i.format(this._CSS_MAP.backgroundColor,e.backgroundColor)),"undefined"!=typeof e.outlineColor&&t.push(i.format(this._CSS_MAP.outlineColor,e.outlineColor)),"undefined"!=typeof e.outlineStyle&&t.push(i.format(this._CSS_MAP.outlineStyle,e.outlineStyle)),"undefined"!=typeof e.outlineWidth&&t.push(i.format(this._CSS_MAP.outlineWidth,e.outlineWidth)),"undefined"==typeof e.borderColor&&"undefined"==typeof e.borderRadius&&"undefined"==typeof e.borderSpacing&&"undefined"==typeof e.borderStyle&&"undefined"==typeof e.borderWidth||t.push(i.format("box-sizing: border-box;")),"undefined"!=typeof e.borderColor&&t.push(i.format(this._CSS_MAP.borderColor,e.borderColor)),"undefined"!=typeof e.borderRadius&&t.push(i.format(this._CSS_MAP.borderRadius,e.borderRadius)),"undefined"!=typeof e.borderSpacing&&t.push(i.format(this._CSS_MAP.borderSpacing,e.borderSpacing)),"undefined"!=typeof e.borderStyle&&t.push(i.format(this._CSS_MAP.borderStyle,e.borderStyle)),"undefined"!=typeof e.borderWidth&&t.push(i.format(this._CSS_MAP.borderWidth,e.borderWidth)),t.join("")},e._getCSSTextForModelDecorationInlineClassName=function(e){var t=[];return"undefined"!=typeof e.textDecoration&&t.push(i.format(this._CSS_MAP.textDecoration,e.textDecoration)),"undefined"!=typeof e.cursor&&t.push(i.format(this._CSS_MAP.cursor,e.cursor)),"undefined"!=typeof e.color&&t.push(i.format(this._CSS_MAP.color,e.color)),"undefined"!=typeof e.letterSpacing&&t.push(i.format(this._CSS_MAP.letterSpacing,e.letterSpacing)),t.join("")},e._getCSSTextForModelDecorationGlyphMarginClassName=function(e){var t=[];return"undefined"!=typeof e.gutterIconPath&&t.push(i.format(this._CSS_MAP.gutterIconPath,o["default"].file(e.gutterIconPath).toString())),t.join("")},e._handle=function(e,t,n,i,o){return i.length>0||o.length>0?(i.length>0&&this._createCSSSelector(e,l.Light,t,n,i),o.length>0&&this._createCSSSelector(e,l.Dark,t,n,o),p.getClassName(t,n)):void 0},e._createCSSSelector=function(e,t,n,i,o){r.createCSSRule(p.getSelector(t,n,i),o,e)},e._CSS_MAP={color:"color:{0} !important;",backgroundColor:"background-color:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:url('{0}') center center no-repeat;"},e}();!function(e){e[e.Light=0]="Light",e[e.Dark=1]="Dark"}(l||(l={}));var h;!function(e){e[e.ClassName=0]="ClassName",e[e.InlineClassName=1]="InlineClassName",e[e.GlyphMarginClassName=2]="GlyphMarginClassName"}(h||(h={}));var p=function(){function e(){}return e._getSelectorPrefixOf=function(e){return e===l.Light?".monaco-editor.vs":".monaco-editor.vs-dark"},e.getClassName=function(e,t){return"ced-"+e+"-"+t},e.getSelector=function(e,t,n){return this._getSelectorPrefixOf(e)+" ."+this.getClassName(t,n)},e.getDeletionPrefixFor=function(e,t){return this._getSelectorPrefixOf(e)+" .ced-"+t},e}()}),define("vs/editor/common/services/editorWorkerService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.ID_EDITOR_WORKER_SERVICE="editorWorkerService",t.IEditorWorkerService=n.createDecorator(t.ID_EDITOR_WORKER_SERVICE)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/modes/abstractMode",["require","exports","vs/base/common/eventEmitter","vs/base/common/winjs.base","vs/platform/instantiation/common/descriptors","vs/editor/common/modes/nullMode","vs/editor/common/modes/supports/suggestSupport","vs/editor/common/services/editorWorkerService"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){return void 0===e&&(e=""),r.NullMode.createWordRegExp(e)}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n={codeLensSupport:!1,tokenizationSupport:!1,occurrencesSupport:!1,declarationSupport:!1,typeDeclarationSupport:!1,navigateTypesSupport:!1,referenceSupport:!1,suggestSupport:!1,parameterHintsSupport:!1,extraInfoSupport:!1,outlineSupport:!1,logicalSelectionSupport:!1,formattingSupport:!1,inplaceReplaceSupport:!1,emitOutputSupport:!1,linkSupport:!1,configSupport:!1,quickFixSupport:!1,richEditSupport:!1};return e.forEach(function(e){return n[e]=!0}),n}t.createWordRegExp=c;var l=function(){function t(e,t,n,i,r){this._descriptor=e,this._workerDescriptor=o.createAsyncDescriptor2(t,n),this._superWorkerModuleId=i,this._instantiationService=r,this._workerPiecePromise=null}return t.prototype.worker=function(e){return this._getOrCreateWorker().then(e)},t.prototype._getOrCreateWorker=function(){var e=this;if(!this._workerPiecePromise){var n=this._superWorkerModuleId?t._loadModule(this._superWorkerModuleId):i.TPromise.as(null);this._workerPiecePromise=n.then(function(){return t._loadModule(e._workerDescriptor.moduleName)}).then(function(){var t=e._descriptor.workerParticipants;return i.TPromise.join(t.map(function(t){return e._instantiationService.createInstance(t)}))}).then(function(t){return e._instantiationService.createInstance(e._workerDescriptor,e._descriptor.id,t)})}return this._workerPiecePromise},t._loadModule=function(t){return new i.TPromise(function(n,i,o){e([t],n,i)},function(){})},t}();t.ModeWorkerManager=l;var d=function(){function e(e){this._modeId=e,this._eventEmitter=new n.EventEmitter,this._simplifiedMode=null}return e.prototype.getId=function(){return this._modeId},e.prototype.toSimplifiedMode=function(){return this._simplifiedMode||(this._simplifiedMode=new h(this)),this._simplifiedMode},e.prototype.addSupportChangedListener=function(e){return this._eventEmitter.addListener2("modeSupportChanged",e)},e.prototype.registerSupport=function(e,t){var n=this,i=t(this);return this[e]=i,this._eventEmitter.emit("modeSupportChanged",u(e)),{dispose:function(){n[e]===i&&(delete n[e],n._eventEmitter.emit("modeSupportChanged",u(e)))}}},e}();t.AbstractMode=d;var h=function(){function e(t){var i=this;this._sourceMode=t,this._eventEmitter=new n.EventEmitter,this._id="vs.editor.modes.simplifiedMode:"+t.getId(),this._assignSupports(),this._sourceMode.addSupportChangedListener&&this._sourceMode.addSupportChangedListener(function(t){if(t.tokenizationSupport||t.richEditSupport){i._assignSupports();var n=e._createModeSupportChangedEvent(t);i._eventEmitter.emit("modeSupportChanged",n)}})}return e.prototype.getId=function(){return this._id},e.prototype.toSimplifiedMode=function(){return this},e.prototype._assignSupports=function(){this.tokenizationSupport=this._sourceMode.tokenizationSupport,this.richEditSupport=this._sourceMode.richEditSupport},e._createModeSupportChangedEvent=function(e){var t={codeLensSupport:!1,tokenizationSupport:e.tokenizationSupport,occurrencesSupport:!1,declarationSupport:!1,typeDeclarationSupport:!1,navigateTypesSupport:!1,referenceSupport:!1,suggestSupport:!1,parameterHintsSupport:!1,extraInfoSupport:!1,outlineSupport:!1,logicalSelectionSupport:!1,formattingSupport:!1,inplaceReplaceSupport:!1,emitOutputSupport:!1,linkSupport:!1,configSupport:!1,quickFixSupport:!1,richEditSupport:e.richEditSupport};return t},e}();t.isDigit=function(){var e="0".charCodeAt(0),t="1".charCodeAt(0),n="2".charCodeAt(0),i="3".charCodeAt(0),o="4".charCodeAt(0),r="5".charCodeAt(0),s="6".charCodeAt(0),a="7".charCodeAt(0),c="8".charCodeAt(0),u="9".charCodeAt(0),l="a".charCodeAt(0),d="b".charCodeAt(0),h="c".charCodeAt(0),p="d".charCodeAt(0),f="e".charCodeAt(0),m="f".charCodeAt(0),v="A".charCodeAt(0),g="B".charCodeAt(0),y="C".charCodeAt(0),_="D".charCodeAt(0),b="E".charCodeAt(0),S="F".charCodeAt(0);return function(E,w){var C=E.charCodeAt(0);switch(w){case 1:return C===e;case 2:return C>=e&&t>=C;case 3:return C>=e&&n>=C;case 4:return C>=e&&i>=C;case 5:return C>=e&&o>=C;case 6:return C>=e&&r>=C;case 7:return C>=e&&s>=C;case 8:return C>=e&&a>=C;case 9:return C>=e&&c>=C;case 10:return C>=e&&u>=C;case 11:return C>=e&&u>=C||C===l||C===v;case 12:return C>=e&&u>=C||C>=l&&d>=C||C>=v&&g>=C;case 13:return C>=e&&u>=C||C>=l&&h>=C||C>=v&&y>=C;case 14:return C>=e&&u>=C||C>=l&&p>=C||C>=v&&_>=C;case 15:return C>=e&&u>=C||C>=l&&f>=C||C>=v&&b>=C;default:return C>=e&&u>=C||C>=l&&m>=C||C>=v&&S>=C}}}();var p=function(e){function t(t,n){e.call(this,t.id),n&&(this.suggestSupport=new s.TextualSuggestSupport(this.getId(),n))}return __extends(t,e),t=__decorate([__param(1,a.IEditorWorkerService)],t)}(d);t.FrankensteinMode=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/monarch/monarch",["require","exports","vs/editor/common/modes/abstractMode","vs/editor/common/modes/monarch/monarchDefinition","vs/editor/common/modes/monarch/monarchLexer","vs/editor/common/modes/supports/richEditSupport"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(t,n,s,a,c){e.call(this,t),this.tokenizationSupport=o.createTokenizationSupport(s,this,n),this.richEditSupport=new r.RichEditSupport(this.getId(),null,i.createRichEditSupport(n)),this.suggestSupport=i.createSuggestSupport(a,c,this.getId(),n)}return __extends(t,e),t}(n.AbstractMode);t.MonarchMode=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/services/editorWorkerServiceImpl",["require","exports","vs/base/common/async","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/common/worker/simpleWorker","vs/base/worker/defaultWorkerFactory","vs/editor/common/editorCommon","vs/editor/common/model/textModelWithTokensHelpers","vs/editor/common/services/editorSimpleWorkerCommon","vs/editor/common/services/editorWorkerService"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=6e4,h=3e5,p=function(){function e(e){this.serviceId=l.IEditorWorkerService,this._workerManager=new f(e)}return e.prototype.computeDiff=function(e,t,n){return this._workerManager.withWorker().then(function(i){return i.computeDiff(e,t,n)})},e.prototype.computeDirtyDiff=function(e,t,n){return this._workerManager.withWorker().then(function(i){return i.computeDirtyDiff(e,t,n)})},e.prototype.computeLinks=function(e){return this._workerManager.withWorker().then(function(t){return t.computeLinks(e)})},e.prototype.textualSuggest=function(e,t){return this._workerManager.withWorker().then(function(n){return n.textualSuggest(e,t)})},e.prototype.navigateValueSet=function(e,t,n){return this._workerManager.withWorker().then(function(i){return i.navigateValueSet(e,t,n)})},e}();t.EditorWorkerServiceImpl=p;var f=function(e){function t(t){var i=this;e.call(this),this._modelService=t,this._editorWorkerClient=null;var o=this._register(new n.IntervalTimer);o.cancelAndSet(function(){return i._checkStopWorker()},Math.round(h/2))}return __extends(t,e),t.prototype.dispose=function(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),e.prototype.dispose.call(this)},t.prototype._checkStopWorker=function(){if(this._editorWorkerClient){var e=(new Date).getTime()-this._lastWorkerUsedTime;e>h&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}},t.prototype.withWorker=function(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new m(this._modelService)),o.TPromise.as(this._editorWorkerClient)},t}(i.Disposable),m=function(e){function t(t){var i=this;e.call(this),this._modelService=t,this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._worker=this._register(new r.SimpleWorkerClient(new s.DefaultWorkerFactory,"vs/editor/common/services/editorSimpleWorker",u.EditorSimpleWorker)),this._proxy=this._worker.get();var o=this._register(new n.IntervalTimer);o.cancelAndSet(function(){return i._checkStopModelSync()},Math.round(d/2))}return __extends(t,e),t.prototype.dispose=function(){for(var t in this._syncedModels)i.disposeAll(this._syncedModels[t]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),e.prototype.dispose.call(this)},t.prototype._checkStopModelSync=function(){var e=(new Date).getTime(),t=[];for(var n in this._syncedModelsLastUsedTime){var i=e-this._syncedModelsLastUsedTime[n];i>d&&t.push(n)}for(var o=0;o<t.length;o++)this._stopModelSync(t[o])},t.prototype.computeDiff=function(e,t,n){var i=this;return this._withSyncedResources([e,t]).then(function(o){return i._proxy.computeDiff(e.toString(),t.toString(),n)})},t.prototype.computeDirtyDiff=function(e,t,n){var i=this;return this._withSyncedResources([e,t]).then(function(o){return i._proxy.computeDirtyDiff(e.toString(),t.toString(),n)})},t.prototype.computeLinks=function(e){var t=this;return this._withSyncedResources([e]).then(function(n){return t._proxy.computeLinks(e.toString())})},t.prototype.textualSuggest=function(e,t){var n=this;return this._withSyncedResources([e]).then(function(i){var o=n._modelService.getModel(e);if(!o)return null;var r=c.WordHelper.massageWordDefinitionOf(o.getMode()),s=r.source,a=(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"");return n._proxy.textualSuggest(e.toString(),t,s,a)})},t.prototype.navigateValueSet=function(e,t,n){var i=this;return this._withSyncedResources([e]).then(function(o){var r=i._modelService.getModel(e);if(!r)return null;var s=c.WordHelper.massageWordDefinitionOf(r.getMode()),a=s.source,u=(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"");return i._proxy.navigateValueSet(e.toString(),t,n,a,u)})},t.prototype._withSyncedResources=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.toString();this._syncedModels[i]||this._beginModelSync(n),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=(new Date).getTime())}return o.TPromise.as(null)},t.prototype._beginModelSync=function(e){var t=this,n=e.toString(),i=this._modelService.getModel(e);if(i&&!i.isTooLargeForHavingARichMode()){this._proxy.acceptNewModel({url:i.getAssociatedResource().toString(),value:i.toRawText(),versionId:i.getVersionId()});var o=[];o.push(i.addBulkListener2(function(e){for(var i=[],o=0,r=e.length;r>o;o++){var s=e[o];switch(s.getType()){case a.EventType.ModelContentChanged2:i.push(s.getData());break;case a.EventType.ModelDispose:return void t._stopModelSync(n)}}i.length>0&&t._proxy.acceptModelChanged(n.toString(),i)})),o.push({dispose:function(){t._proxy.acceptRemovedModel(n)}}),this._syncedModels[n]=o}},t.prototype._stopModelSync=function(e){var t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],i.disposeAll(t)},t}(i.Disposable)}),define("vs/editor/common/services/modeService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IModeService=n.createDecorator("modeService")}),define("vs/editor/common/services/modelService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IModelService=n.createDecorator("modelService")}),define("vs/editor/common/services/resourceService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.ResourceEvents={ADDED:"resource.added",REMOVED:"resource.removed",CHANGED:"resource.changed"},t.IResourceService=n.createDecorator("resourceService")});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/smartSelect/common/tokenSelectionSupport",["require","exports","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/services/modelService","./tokenTree"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e){this._modelService=e}return e.prototype.getRangesToPosition=function(e,t){return n.TPromise.as(this.getRangesToPositionSync(e,t))},e.prototype.getRangesToPositionSync=function(e,t){var n=this._modelService.getModel(e),i=[];return n&&this._doGetRangesToPosition(n,t).forEach(function(e){i.push({type:void 0,range:e})}),i},e.prototype._doGetRangesToPosition=function(e,t){var n,o,s=r.build(e);n=r.find(s,t);for(var a=[];n;)o&&i.Range.equalsRange(o,n.range)||a.push(n.range),o=n.range,n=n.parent;return a=a.reverse()},e=__decorate([__param(0,o.IModelService)],e)}();t.TokenSelectionSupport=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/zoneWidget/browser/peekViewWidget",["require","exports","vs/nls!vs/editor/contrib/zoneWidget/browser/peekViewWidget","vs/base/common/actions","vs/base/common/strings","vs/base/browser/builder","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/platform/instantiation/common/instantiation","vs/editor/common/services/codeEditorService","./zoneWidget","vs/css!./peekViewWidget"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e,t){var n=t.context[p];return n?e.get(u.ICodeEditorService).getCodeEditor(n):null}t.IPeekViewService=c.createDecorator("peekViewService");var h;!function(e){e.Closed="closed"}(h=t.Events||(t.Events={}));var p="outerEditorId";t.getOuterEditor=d;var f=function(e){function c(n,i,o,r){void 0===r&&(r={}),e.call(this,n,r),this.serviceId=t.IPeekViewService,this.contextKey=o,i.createKey(p,n.getId())}return __extends(c,e),c.prototype.dispose=function(){this._isActive=!1,e.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),c.prototype.getActiveWidget=function(){return this},c.prototype.show=function(t,n){this._isActive=!0,e.prototype.show.call(this,t,n)},c.prototype.fillContainer=function(e){r.$(e).addClass("peekview-widget"),this._headElement=r.$(".head").getHTMLElement(),this._bodyElement=r.$(".body").getHTMLElement(),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)},c.prototype._fillHead=function(e){var t=this,o=r.$(".peekview-title").on(s.EventType.CLICK,function(e){return t._onTitleClick(e)}).appendTo(this._headElement).getHTMLElement();this._primaryHeading=r.$("span.filename").appendTo(o).getHTMLElement(),this._secondaryHeading=r.$("span.dirname").appendTo(o).getHTMLElement(),this._metaHeading=r.$("span.meta").appendTo(o).getHTMLElement(),this._actionbarWidget=new a.ActionBar(r.$(".peekview-actions").appendTo(this._headElement)),this._actionbarWidget.push(new i.Action("peekview.close",n.localize(0,null),"close-peekview-action",!0,function(){return t.dispose(),t.emit(h.Closed,t),null}),{label:!1,icon:!0})},c.prototype._onTitleClick=function(e){},c.prototype.setTitle=function(e,t){r.$(this._primaryHeading).safeInnerHtml(e),t?r.$(this._secondaryHeading).safeInnerHtml(t):s.clearNode(this._secondaryHeading)},c.prototype.setMetaTitle=function(e){e?r.$(this._metaHeading).safeInnerHtml(e):s.clearNode(this._metaHeading)},c.prototype._fillBody=function(e){},c.prototype.doLayout=function(e){if(0>e)return this.dispose(),void this.emit(h.Closed,this);var t=Math.ceil(1.2*this.editor.getConfiguration().lineHeight),n=e-(t+2);this._doLayoutHead(t),this._doLayoutBody(n)},c.prototype._doLayoutHead=function(e){this._headElement.style.height=o.format("{0}px",e),this._headElement.style.lineHeight=this._headElement.style.height},c.prototype._doLayoutBody=function(e){this._bodyElement.style.height=o.format("{0}px",e)},c}(l.ZoneWidget);t.PeekViewWidget=f});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/languageConfiguration",["require","exports","vs/nls!vs/editor/node/languageConfiguration","vs/base/common/json","vs/base/node/pfs","vs/editor/common/services/modeService"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e){var t=this;this._modeService=e,this._handleModes(this._modeService.getRegisteredModes()),this._modeService.onDidAddModes(function(e){return t._handleModes(e)})}return e.prototype._handleModes=function(e){var t=this;e.forEach(function(e){return t._handleMode(e)})},e.prototype._handleMode=function(e){var t=this,n=this._modeService.onDidCreateMode(function(i){if(i.getId()===e){var o=t._modeService.getConfigurationFiles(e);o.forEach(function(n){return t._handleConfigFile(e,n)}),n.dispose()}})},e.prototype._handleConfigFile=function(e,t){var r=this;o.readFile(t).then(function(o){var s=[],a=i.parse(o.toString(),s);s.length&&console.error(n.localize(0,null,t,s.join("\n"))),r._handleConfig(e,a)},function(e){console.error(e)})},e.prototype._handleConfig=function(e,t){var n={};t.comments&&(n.comments=t.comments),t.brackets&&(n.brackets=t.brackets,n.__characterPairSupport={autoClosingPairs:t.brackets.map(function(e){var t=e[0],n=e[1];return{open:t,close:n}})}),this._modeService.registerRichEditSupport(e,n)},e=__decorate([__param(0,r.IModeService)],e)}();t.LanguageConfigurationFileHandler=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/actions/common/actions",["require","exports","vs/base/common/actions","vs/base/common/winjs.base","vs/base/common/assert","vs/platform/instantiation/common/descriptors","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s){
"use strict";t.IActionsService=s.createDecorator("actionsService");var a=function(){function e(e,t,n,i,o,s){this._id=t,this._label=n,this._keybindings=i,this._keybindingContext=o,this._keybindingWeight=s,this._descriptor=r.createSyncDescriptor(e,this._id,this._label)}return Object.defineProperty(e.prototype,"syncDescriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindings",{get:function(){return this._keybindings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindingContext",{get:function(){return this._keybindingContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindingWeight",{get:function(){return this._keybindingWeight},enumerable:!0,configurable:!0}),e}();t.SyncActionDescriptor=a;var c=function(e){function t(t,n,i,o,r,s){void 0===o&&(o=""),void 0===r&&(r=""),void 0===s&&(s=!0),e.call(this,i,o,r,s),this._instantiationService=t,this._descriptor=n}return __extends(t,e),Object.defineProperty(t.prototype,"cachedAction",{get:function(){return this._cachedAction},set:function(e){this._cachedAction=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.id:this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.label:this._label},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.label=e:this._setLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction["class"]:this._cssClass},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction["class"]=e:this._setClass(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.enabled:this._enabled},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.enabled=e:this._setEnabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.order:this._order},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.order=e:this._order=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return this._cachedAction?this._cachedAction.run(e):this._createAction().then(function(t){return t.run(e)})},t.prototype._createAction=function(){var e=this,t=i.TPromise.as(void 0);return t.then(function(){return e._instantiationService.createInstance(e._descriptor)}).then(function(t){return o.ok(t instanceof n.Action,"Action must be an instanceof Base Action"),e._cachedAction=t,e._emitterUnbind=e.addEmitter(e._cachedAction),t})},t.prototype.dispose=function(){this._emitterUnbind&&this._emitterUnbind(),this._cachedAction&&this._cachedAction.dispose(),e.prototype.dispose.call(this)},t}(n.Action);t.DeferredAction=c}),define("vs/platform/configuration/common/configuration",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";function i(e,t){function n(e,t){for(var n=e,i=0;i<t.length;i++)if(n=n[t[i]],!n)return;return n}var i=t.split(".");return n(e,i)}t.IConfigurationService=n.createDecorator("configurationService");var o=function(){function e(){}return e.UPDATED="update",e}();t.ConfigurationServiceEventTypes=o,t.extractSetting=i}),define("vs/platform/contextview/browser/contextView",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IContextViewService=n.createDecorator("contextViewService"),t.IContextMenuService=n.createDecorator("contextMenuService")}),define("vs/platform/contextview/browser/contextViewService",["require","exports","./contextView","vs/base/browser/ui/contextview/contextview"],function(e,t,n,i){"use strict";var o=function(){function e(e,t,o){this.serviceId=n.IContextViewService,this.contextView=new i.ContextView(e)}return e.prototype.dispose=function(){this.contextView.dispose()},e.prototype.setContainer=function(e){this.contextView.setContainer(e)},e.prototype.showContextView=function(e){this.contextView.show(e)},e.prototype.layout=function(){this.contextView.layout()},e.prototype.hideContextView=function(e){this.contextView.hide(e)},e}();t.ContextViewService=o}),define("vs/platform/editor/common/editor",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IEditorService=n.createDecorator("editorService"),function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(t.Position||(t.Position={}));var i=t.Position;t.POSITIONS=[i.LEFT,i.CENTER,i.RIGHT]}),define("vs/platform/event/common/event",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IEventService=n.createDecorator("eventService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/event/common/eventService",["require","exports","vs/base/common/eventEmitter","./event"],function(e,t,n,i){"use strict";var o=function(e){function t(){e.call(this),this.serviceId=i.IEventService}return __extends(t,e),t}(n.EventEmitter);t.EventService=o}),define("vs/platform/extensions/common/extensions",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IExtensionService=n.createDecorator("extensionService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/files/common/files",["require","exports","vs/base/common/paths","vs/base/common/events","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o){"use strict";t.IFileService=o.createDecorator("fileService"),function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(t.FileChangeType||(t.FileChangeType={}));var r=t.FileChangeType;t.EventType={FILE_CHANGES:"files:fileChanges"};var s=function(e){function t(t){e.call(this),this._changes=t}return __extends(t,e),Object.defineProperty(t.prototype,"changes",{get:function(){return this._changes},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return e?this.containsAny([e],t):!1},t.prototype.containsAny=function(e,t){return e&&e.length?this._changes.some(function(i){return i.type!==t?!1:t===r.DELETED?e.some(function(e){return e?n.isEqualOrParent(e.fsPath,i.resource.fsPath):!1}):e.some(function(e){return e?e.fsPath===i.resource.fsPath:!1})}):!1},t.prototype.getAdded=function(){return this.getOfType(r.ADDED)},t.prototype.gotAdded=function(){return this.hasType(r.ADDED)},t.prototype.getDeleted=function(){return this.getOfType(r.DELETED)},t.prototype.gotDeleted=function(){return this.hasType(r.DELETED)},t.prototype.getUpdated=function(){return this.getOfType(r.UPDATED)},t.prototype.gotUpdated=function(){return this.hasType(r.UPDATED)},t.prototype.getOfType=function(e){return this._changes.filter(function(t){return t.type===e})},t.prototype.hasType=function(e){return this._changes.some(function(t){return t.type===e})},t}(i.Event);t.FileChangesEvent=s,function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY",e[e.FILE_IS_DIRECTORY=1]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=2]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=3]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=4]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=5]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=6]="FILE_READ_ONLY",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE"}(t.FileOperationResult||(t.FileOperationResult={}));t.FileOperationResult;t.MAX_FILE_SIZE=52428800,t.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange"},t.SUPPORTED_ENCODINGS={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:18},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:19},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:20},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:21},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:22},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:23},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:24},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:25},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:26},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:27},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:28},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:29},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:30},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:31},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:32},gbk:{labelLong:"Chinese (GBK)",labelShort:"GBK",order:33},gb18030:{labelLong:"Chinese (GB18030)",labelShort:"GB18030",order:34},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:35},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:36},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:37},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:38},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:39},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:40},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:41},"koi8-ru":{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:42},"koi8-t":{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:43},GB2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:44}}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/services/bulkEdit",["require","exports","vs/nls!vs/editor/common/services/bulkEdit","vs/base/common/arrays","vs/base/common/collections","vs/base/common/uri","vs/base/common/winjs.base","vs/platform/files/common/files","vs/editor/common/core/editOperation","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e,t,n,i){var o=h(e,t,n);return o.add(i),o.finish()}function h(e,t,i){function o(e){c.push.apply(c,e)}function r(){for(var e,t=0,i=c;t<i.length;t++){var o=i[t];u.hasChanged(o.resource)&&(e||(e=[]),e.push(o.resource.fsPath))}return e?n.localize(0,null,e.join(", ")):void 0}function a(){if(0!==c.length){var e=r();if(e)return s.TPromise.wrapError(e);var n,o;i&&i.getModel()&&(n=i.getModel().getAssociatedResource(),o=i.getSelections());var a=new v(t,n,o,c);return a.prepare().then(function(e){var t=r();if(t)throw new Error(t);return u.stop(),a.apply()})}}var c=[],u=new p(e).start();return{add:o,finish:a}}var p=function(){function e(e){this._eventService=e}return e.prototype.start=function(){var e=Object.create(null),t=this._eventService.addListener(a.EventType.FILE_CHANGES,function(t){t.changes.forEach(function(t){var n=String(t.resource),i=e[n];i||(e[n]=i=[]),i.push(t)})});return{stop:t,hasChanged:function(t){return!!e[t.toString()]},allChanges:function(){return i.merge(o.values(e))}}},e}(),f=function(){function e(e){this._endCursorSelection=null,this._model=e,this._edits=[]}return e.prototype.addEdit=function(e){var t;t=e.range?e.range:this._model.getFullModelRange(),this._edits.push(c.EditOperation.replace(u.Range.lift(t),e.newText))},e.prototype.apply=function(){var t=this;0!==this._edits.length&&(this._edits.sort(e._editCompare),this._initialSelections=this._getInitialSelections(),this._model.pushEditOperations(this._initialSelections,this._edits,function(e){return t._getEndCursorSelections(e)}))},e.prototype._getInitialSelections=function(){var e=this._edits[0].range,t=l.Selection.createSelection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);return[t]},e.prototype._getEndCursorSelections=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=e[n].range,o=0;o<this._initialSelections.length;o++){var r=this._initialSelections[o];if(u.Range.areIntersectingOrTouching(i,r)){t=n;break}}var s=e[t].range;return this._endCursorSelection=l.Selection.createSelection(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn),[this._endCursorSelection]},e.prototype.getEndCursorSelection=function(){return this._endCursorSelection},e._editCompare=function(e,t){return u.Range.compareRangesUsingStarts(e.range,t.range)},e}(),m=function(e){function t(t,n){e.call(this,t),this._knownInitialSelections=n}return __extends(t,e),t.prototype._getInitialSelections=function(){return this._knownInitialSelections},t}(f),v=function(){function e(e,t,n,i){this._numberOfResourcesToModify=0,this._numberOfChanges=0,this._edits=Object.create(null),this._editorService=e,this._sourceModel=t,this._sourceSelections=n,this._sourceModelTask=null;for(var o=0,r=i;o<r.length;o++){var s=r[o];this._addEdit(s)}}return e.prototype.resourcesCount=function(){return this._numberOfResourcesToModify},e.prototype.changeCount=function(){return this._numberOfChanges},e.prototype._addEdit=function(e){var t=this._edits[e.resource.toString()];t||(this._edits[e.resource.toString()]=t=[],this._numberOfResourcesToModify+=1),this._numberOfChanges+=1,t.push(e)},e.prototype.prepare=function(){var e=this;if(this._tasks)throw new Error("illegal state - already prepared");this._tasks=[];var t=[];return o.forEach(this._edits,function(n){var i=e._editorService.resolveEditorModel({resource:r["default"].parse(n.key)}).then(function(t){if(!t||!t.textEditorModel)throw new Error("Cannot load file "+n.key);var i,o=t.textEditorModel;e._sourceModel&&o.getAssociatedResource().toString()===e._sourceModel.toString()?(e._sourceModelTask=new m(o,e._sourceSelections),i=e._sourceModelTask):i=new f(o),n.value.forEach(function(e){return i.addEdit(e)}),e._tasks.push(i)});t.push(i)}),s.TPromise.join(t).then(function(t){return e})},e.prototype.apply=function(){this._tasks.forEach(function(e){return e.apply()});var e=null;return this._sourceModelTask&&(e=this._sourceModelTask.getEndCursorSelection()),e},e}();t.bulkEdit=d,t.createBulkEdit=h}),define("vs/platform/instantiation/common/instantiationService",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/strings","vs/base/common/types","vs/base/common/collections","./descriptors","vs/base/common/graph","./instantiation"],function(e,t,n,i,o,r,s,a,c,u){"use strict";function l(e){void 0===e&&(e=Object.create(null));var t=new f(e,new h);return t}var d=u.IInstantiationService;t.createInstantiationService=l;var h=function(){function e(){this._value=0}return Object.defineProperty(e.prototype,"locked",{get:function(){return 0===this._value},enumerable:!0,configurable:!0}),e.prototype.runUnlocked=function(e){this._value++;try{return e()}finally{this._value--}},e}(),p=function(){function e(e,t){var n=this;this._services=e,this._lock=t,s.forEach(this._services,function(e){n.registerService(e.key,e.value)})}return e.prototype.registerService=function(e,t){var n=this;Object.defineProperty(this,e,{get:function(){if(n._lock.locked)throw i.illegalState("the services map can only be used during construction");if(!t)throw i.illegalArgument(o.format("service with '{0}' not found",e));if(t instanceof a.SyncDescriptor){var r=n._services[e];r instanceof a.SyncDescriptor?(n._ensureInstances(e,t),t=n._services[e]):t=r}return t},set:function(e){throw i.illegalState("services cannot be changed")},configurable:!1,enumerable:!1}),this._services[e]=t},Object.defineProperty(e.prototype,"lock",{get:function(){return this._lock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"services",{get:function(){return this._services},enumerable:!0,configurable:!0}),e.prototype._ensureInstances=function(e,t){for(var n=Object.create(null),i=new c.Graph(function(e){return e.serviceId}),o=[{serviceId:e,desc:t}];o.length;){var r=o.pop();if(i.lookupOrInsertNode(r),n[r.serviceId])throw new Error("[createInstance] cyclic dependency: "+Object.keys(n).join(">>"));n[r.serviceId]=!0;var s=u._util.getServiceDependencies(r.desc.ctor);if(Array.isArray(s))for(var l=0,d=s;l<d.length;l++){var h=d[l],p=this.services[h.serviceId];if(!p)throw new Error("[createInstance] "+e+" depends on "+h.serviceId+" which is NOT registered.");if(p instanceof a.SyncDescriptor){var f={serviceId:h.serviceId,desc:p};o.push(f),i.insertEdge(r,f)}}}for(;;){var m=i.roots();if(0===m.length){if(0!==i.length)throw new Error("[createInstance] cyclinc dependency!");break}for(var v=0,g=m;v<g.length;v++){var y=g[v],_=this.createInstance(y.data.desc,[]);this._services[y.data.serviceId]=_,i.removeNode(y.data)}}},e.prototype.invokeFunction=function(e,t){var n=this;return this._lock.runUnlocked(function(){var i={get:function(e){var t=u._util.getServiceId(e);return n[t]}};return e.apply(void 0,[i].concat(t))})},e.prototype.createInstance=function(e,t){var n=this,i=[],o=u._util.getServiceDependencies(e.ctor)||[],s=e.staticArguments().concat(t),a=s.length,c=Number.MAX_VALUE;o.forEach(function(e){var t=e.serviceId,o=e.index,r=n._lock.runUnlocked(function(){return n[t]});i[o]=r,c=Math.min(c,e.index)});for(var l=0,d=0,h=s;d<h.length;d++){var p=h[d],f=void 0!==i[l];f||(i[l]=p),l+=1}if(i.unshift(e.ctor),c!==Number.MAX_VALUE&&c!==a){var m="[createInstance] constructor '"+e.ctor.name+"' has first"+(" service dependency at position "+(c+1)+" but is called with")+(" "+(a-1)+" static arguments that are expected to come first");console.warn(m)}return this._lock.runUnlocked(function(){var t=r.create.apply(null,i);return e._validate(t),t})},e}(),f=function(){function t(e,t){this.serviceId=d,e.instantiationService=this,this._servicesMap=new p(e,t)}return t.prototype.createChild=function(e){var n={};return s.forEach(this._servicesMap.services,function(e){n[e.key]=e.value}),s.forEach(e,function(e){n[e.key]=e.value}),new t(n,this._servicesMap.lock)},t.prototype.registerService=function(e,t){this._servicesMap.registerService(e,t)},t.prototype.addSingleton=function(e,t){var n=u._util.getServiceId(e);this._servicesMap.registerService(n,t)},t.prototype.getInstance=function(e){var t=this,n=u._util.getServiceId(e),i=this._servicesMap.lock.runUnlocked(function(){return t._servicesMap[n]});return i},t.prototype.createInstance=function(e){for(var t=new Array(arguments.length-1),n=1,i=arguments.length;i>n;n++)t[n-1]=arguments[n];return e instanceof a.SyncDescriptor?this._servicesMap.createInstance(e,t):e instanceof a.AsyncDescriptor?this._createInstanceAsync(e,t):this._servicesMap.createInstance(new a.SyncDescriptor(e),t)},t.prototype._createInstanceAsync=function(t,o){var r,s=this;return new n.TPromise(function(n,c,u){e([t.moduleName],function(e){if(r&&c(r),!e)return c(i.illegalArgument("module not found: "+t.moduleName));var u;if(u=t.ctorName?e[t.ctorName]:e,"function"!=typeof u)return c(i.illegalArgument("not a function: "+t.ctorName||t.moduleName));try{o.unshift.apply(o,t.staticArguments()),n(s._servicesMap.createInstance(new a.SyncDescriptor(u),o))}catch(l){return c(l)}},c)},function(){r=i.canceled()})},t.prototype.invokeFunction=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._servicesMap.invokeFunction(e,t)},t}()}),define("vs/platform/keybinding/common/keybindingService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";var i=function(){function e(e){this.key=e}return e.prototype.equals=function(t){return t instanceof e?this.key===t.key:!1},e.prototype.evaluate=function(e){return!!e[this.key]},e.prototype.normalize=function(){return this},e.prototype.serialize=function(){return this.key},e}();t.KbDefinedExpression=i;var o=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.equals=function(t){return t instanceof e?this.key===t.key&&this.value===t.value:!1},e.prototype.evaluate=function(e){return e[this.key]==this.value},e.prototype.normalize=function(){return"boolean"==typeof this.value?this.value?new i(this.key):new s(this.key):this},e.prototype.serialize=function(){return"boolean"==typeof this.value?this.normalize().serialize():this.key+" == '"+this.value+"'"},e}();t.KbEqualsExpression=o;var r=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.equals=function(t){return t instanceof e?this.key===t.key&&this.value===t.value:!1},e.prototype.evaluate=function(e){return e[this.key]!=this.value},e.prototype.normalize=function(){return"boolean"==typeof this.value?this.value?new s(this.key):new i(this.key):this},e.prototype.serialize=function(){return"boolean"==typeof this.value?this.normalize().serialize():this.key+" != '"+this.value+"'"},e}();t.KbNotEqualsExpression=r;var s=function(){function e(e){this.key=e}return e.prototype.equals=function(t){return t instanceof e?this.key===t.key:!1},e.prototype.evaluate=function(e){return!e[this.key]},e.prototype.normalize=function(){return this},e.prototype.serialize=function(){return"!"+this.key},e}();t.KbNotExpression=s;var a=function(){function e(e){this.expr=e||[]}return e.prototype.equals=function(e){return this===e},e.prototype.evaluate=function(e){for(var t=0,n=this.expr.length;n>t;t++)if(!this.expr[t].evaluate(e))return!1;return!0},e.prototype.normalize=function(){for(var t=[],n=0,i=this.expr.length;i>n;n++){var o=this.expr[n];o&&(o=o.normalize(),o&&(o instanceof e?t=t.concat(o.expr):t.push(o)))}return 0===t.length?null:1===t.length?t[0]:new e(t)},e.prototype.serialize=function(){return 0===this.expr.length?"":1===this.expr.length?this.normalize().serialize():this.expr.map(function(e){return e.serialize()}).join(" && ")},e}();t.KbAndExpression=a,t.KbExpr={has:function(e){return new i(e)},equals:function(e,t){return new o(e,t)},notEquals:function(e,t){return new r(e,t)},not:function(e){return new s(e)},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return new a(e)},deserialize:function(e){if(!e)return null;var n=e.split("&&"),i=new a(n.map(function(e){return t.KbExpr._deserializeOne(e)}));return i.normalize()},_deserializeOne:function(e){if(e=e.trim(),e.indexOf("!=")>=0){var n=e.split("!=");return new r(n[0].trim(),t.KbExpr._deserializeValue(n[1]))}if(e.indexOf("==")>=0){var n=e.split("==");return new o(n[0].trim(),t.KbExpr._deserializeValue(n[1]))}return/^\!\s*/.test(e)?new s(e.substr(1).trim()):new i(e)},_deserializeValue:function(e){if(e=e.trim(),"true"===e)return!0;if("false"===e)return!1;var t=/^'([^']*)'$/.exec(e);return t?t[1].trim():e}},t.IKeybindingService=n.createDecorator("keybindingService"),t.SET_CONTEXT_COMMAND_ID="setContext"}),define("vs/platform/keybinding/common/keybindingResolver",["require","exports","vs/base/common/keyCodes","vs/base/common/platform","vs/platform/keybinding/common/keybindingService"],function(e,t,n,i,o){"use strict";function r(e,t){return e.length<t?e+new Array(t-e.length).join(" "):e}function s(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}var a=function(){function e(e,t,i){void 0===i&&(i=!0),e=e.slice(0).sort(s),this._defaultKeybindings=e,this._shouldWarnOnConflict=i,this._defaultBoundCommands=Object.create(null);for(var o=0,r=e.length;r>o;o++)this._defaultBoundCommands[e[o].command]=!0;this._map=Object.create(null),this._lookupMap=Object.create(null),this._lookupMapUnreachable=Object.create(null),this._chords=Object.create(null);for(var a=e.length,c=e.concat(t),o=0,r=c.length;r>o;o++){var u=c[o];if(0!==u.keybinding){u.context&&(u.context=u.context.normalize());var l={context:u.context,keybinding:u.keybinding,commandId:u.command};if(n.BinaryKeybindings.hasChord(u.keybinding)){var d=n.BinaryKeybindings.extractFirstPart(u.keybinding),h=n.BinaryKeybindings.extractChordPart(u.keybinding);this._chords[d]=this._chords[d]||Object.create(null),this._chords[d][h]=this._chords[d][h]||[],this._chords[d][h].push(l),this._addKeyPress(d,l,u,a>o)}else this._addKeyPress(u.keybinding,l,u,a>o)}}}return e.prototype._addKeyPress=function(t,i,o,r){if(!this._map[t])return this._map[t]=[i],void this._addToLookupMap(o);for(var s=this._map[t],a=s.length-1;a>=0;a--){var c=s[a];c.commandId!==o.command&&(n.BinaryKeybindings.hasChord(c.keybinding)&&n.BinaryKeybindings.hasChord(i.keybinding)&&c.keybinding!==i.keybinding||e.contextIsEntirelyIncluded(!0,c.context,o.context)&&(this._shouldWarnOnConflict&&r&&console.warn("Conflict detected, command `"+c.commandId+"` cannot be triggered by "+n.Keybinding.toUserSettingsLabel(t)+" due to "+o.command),this._lookupMapUnreachable[c.commandId]=this._lookupMapUnreachable[c.commandId]||[],this._lookupMapUnreachable[c.commandId].push(c.keybinding)))}s.push(i),this._addToLookupMap(o)},e.contextIsEntirelyIncluded=function(e,t,n){if(e||(t=t?t.normalize():null,n=n?n.normalize():null),!n)return!0;if(!t)return!1;for(var i=t.serialize().split(" && "),o=n.serialize().split(" && "),r=Object.create(null),s=0,a=i.length;a>s;s++)r[i[s]]=!0;for(var s=0,a=o.length;a>s;s++)if(!r[o[s]])return!1;return!0},e.prototype._addToLookupMap=function(e){e.command&&(this._lookupMap[e.command]=this._lookupMap[e.command]||[],this._lookupMap[e.command].push(e))},e.prototype.getDefaultBoundCommands=function(){return this._defaultBoundCommands},e.prototype.getDefaultKeybindings=function(){var e=new c;e.writeLine("[");var t=this._defaultKeybindings.length-1;return this._defaultKeybindings.forEach(function(n,i){u.writeKeybindingItem(e,n),i!==t?e.writeLine(","):e.writeLine()}),e.writeLine("]"),e.toString()},e.prototype.lookupKeybinding=function(e){var t=this._lookupMap[e];if(!t)return[];var i=t.map(function(e){return e.keybinding}),o=this._lookupMapUnreachable[e];o&&(i=i.filter(function(e){return-1===o.indexOf(e)}));var r=[],s=i.filter(function(e){return r.indexOf(e)>=0?!1:(r.push(e),!0)});return s.map(function(e){return new n.Keybinding(e)}).reverse()},e.prototype.resolve=function(e,t,i){var o=null;if(0!==t){var r=this._chords[t];if(!r)return null;o=r[i]}else o=this._map[i];var s=this._findCommand(e,o);return s?0===t&&n.BinaryKeybindings.hasChord(s.keybinding)?{enterChord:i,commandId:null}:{enterChord:0,commandId:s.commandId}:null},e.prototype._findCommand=function(t,n){if(!n)return null;for(var i=n.length-1;i>=0;i--){var o=n[i];if(e.contextMatchesRules(t,o.context))return o}return null},e.contextMatchesRules=function(e,t){return t?t.evaluate(e):!0},e}();t.KeybindingResolver=a;var c=function(){function e(){this._lines=[],this._currentLine=""}return e.prototype.write=function(e){this._currentLine+=e},e.prototype.writeLine=function(e){void 0===e&&(e=""),this._lines.push(this._currentLine+e),this._currentLine=""},e.prototype.toString=function(){return this.writeLine(),this._lines.join("\n")},e}();t.OutputBuilder=c;var u=function(){function e(){}return e.writeKeybindingItem=function(t,n){var i=JSON.stringify(e.writeKeybinding(n.keybinding));t.write('{ "key": '+r(i+",",25)+' "command": ');var o=n.context?n.context.serialize():"",s=JSON.stringify(n.command);o.length>0?(t.write(s+","),t.writeLine(),t.write('                                     "when": "'+o+'" ')):t.write(s+" "),t.write("}")},e.readKeybindingItem=function(t,n){var i=e.readKeybinding(t.key),o=e.readKeybindingContexts(t.when);return{keybinding:i,command:t.command,context:o,weight1:1e3,weight2:n}},e.writeKeybinding=function(e,t){return void 0===t&&(t=i),n.Keybinding.toUserSettingsLabel(e,t)},e.readKeybinding=function(e,t){return void 0===t&&(t=i),n.Keybinding.fromUserSettingsLabel(e,t)},e.readKeybindingContexts=function(e){return o.KbExpr.deserialize(e)},e}();t.IOSupport=u}),define("vs/platform/lifecycle/common/lifecycle",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.ILifecycleService=n.createDecorator("lifecycleService")}),define("vs/platform/lifecycle/common/baseLifecycleService",["require","exports","vs/base/common/event","./lifecycle"],function(e,t,n,i){"use strict";var o=function(){function e(){this.serviceId=i.ILifecycleService,this._beforeShutdownParticipants=[],this._onShutdown=new n.Emitter}return e.prototype.fireShutdown=function(){this._onShutdown.fire()},e.prototype.addBeforeShutdownParticipant=function(e){this._beforeShutdownParticipants.push(e)},Object.defineProperty(e.prototype,"beforeShutdownParticipants",{get:function(){return this._beforeShutdownParticipants},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onShutdown",{get:function(){return this._onShutdown.event},enumerable:!0,configurable:!0}),e}();t.BaseLifecycleService=o}),define("vs/platform/markers/common/markers",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IMarkerService=n.createDecorator("markerService"),function(e){e[e["transient"]=1]="transient",e[e.permanent=2]="permanent"}(t.MarkerType||(t.MarkerType={}));t.MarkerType});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/markers/common/problemMatcher",["require","exports","vs/nls!vs/platform/markers/common/problemMatcher","vs/base/common/objects","vs/base/common/strings","vs/base/common/assert","vs/base/common/paths","vs/base/common/types","vs/base/common/severity","vs/base/common/uri","vs/base/common/parsers"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){return!!a.isString(e.name)}function h(e,t){var n,i=t.fileLocation;return i===m.Absolute?n=e:i===m.Relative&&(n=s.join(t.filePrefix,e)),n=n.replace(/\\/g,"/"),"/"!==n[0]&&(n="/"+n),u["default"].parse("file://"+n)}function p(e){var t=e.pattern;return a.isArray(t)?new b(e):new _(e)}function f(e){return S[e]}!function(e){e[e.Auto=0]="Auto",e[e.Relative=1]="Relative",e[e.Absolute=2]="Absolute"}(t.FileLocationKind||(t.FileLocationKind={}));var m,m=t.FileLocationKind;!function(e){function t(t){return t=t.toLowerCase(),"absolute"===t?e.Absolute:"relative"===t?e.Relative:void 0;
}e.fromString=t}(m=t.FileLocationKind||(t.FileLocationKind={})),t.problemPatternProperties=["file","message","location","line","column","endLine","endColumn","code","severity","loop","mostSignifikant"],function(e){e[e.allDocuments=0]="allDocuments",e[e.openDocuments=1]="openDocuments",e[e.closedDocuments=2]="closedDocuments"}(t.ApplyToKind||(t.ApplyToKind={}));var v,v=t.ApplyToKind;!function(e){function t(t){return t=t.toLowerCase(),"alldocuments"===t?e.allDocuments:"opendocuments"===t?e.openDocuments:"closeddocuments"===t?e.closedDocuments:void 0}e.fromString=t}(v=t.ApplyToKind||(t.ApplyToKind={})),t.isNamedProblemMatcher=d;var g={E:"error",W:"warning",I:"info"};t.getResource=h,t.createLineMatcher=p;var y=function(){function e(e){this.matcher=e}return e.prototype.handle=function(e,t){return void 0===t&&(t=0),{match:null,"continue":!1}},e.prototype.next=function(e){return null},Object.defineProperty(e.prototype,"matchLength",{get:function(){throw new Error("Subclass reponsibility")},enumerable:!0,configurable:!0}),e.prototype.fillProblemData=function(e,t,n){this.fillProperty(e,"file",t,n,!0),this.fillProperty(e,"message",t,n,!0),this.fillProperty(e,"code",t,n,!0),this.fillProperty(e,"severity",t,n,!0),this.fillProperty(e,"location",t,n,!0),this.fillProperty(e,"line",t,n),this.fillProperty(e,"column",t,n),this.fillProperty(e,"endLine",t,n),this.fillProperty(e,"endColumn",t,n)},e.prototype.fillProperty=function(e,t,n,i,r){if(void 0===r&&(r=!1),a.isUndefined(e[t])&&!a.isUndefined(n[t])&&n[t]<i.length){var s=i[n[t]];r&&(s=o.trim(s)),e[t]=s}},e.prototype.getMarkerMatch=function(e){var t=this.getLocation(e);if(e.file&&t&&e.message){var n={severity:this.getSeverity(e),startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.startLineNumber,endColumn:t.endColumn,message:e.message};return a.isUndefined(e.code)||(n.code=e.code),{description:this.matcher,resource:this.getResource(e.file),marker:n}}},e.prototype.getResource=function(e){return h(e,this.matcher)},e.prototype.getLocation=function(e){if(e.location)return this.parseLocationInfo(e.location);if(!e.line)return null;var t=parseInt(e.line),n=e.column?parseInt(e.column):void 0,i=e.endLine?parseInt(e.endLine):void 0,o=e.endColumn?parseInt(e.endColumn):void 0;return this.createLocation(t,n,i,o)},e.prototype.parseLocationInfo=function(e){if(!e||!e.match(/(\d+|\d+,\d+|\d+,\d+,\d+,\d+)/))return null;var t=e.split(","),n=parseInt(t[0]),i=t.length>1?parseInt(t[1]):void 0;return t.length>3?this.createLocation(n,i,parseInt(t[2]),parseInt(t[3])):this.createLocation(n,i,void 0,void 0)},e.prototype.createLocation=function(e,t,n,i){return e&&t&&n&&i?{startLineNumber:e,startColumn:t,endLineNumber:n,endColumn:i}:e&&t?{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:Number.MAX_VALUE}},e.prototype.getSeverity=function(e){var t=null;if(e.severity){var n=e.severity;n&&n.length>0&&(1===n.length&&g[n[0]]&&(n=g[n[0]]),t=c["default"].fromValue(n))}return null!==t&&t!==c["default"].Ignore||(t=this.matcher.severity||c["default"].Error),t},e}(),_=function(e){function t(t){e.call(this,t),this.pattern=t.pattern}return __extends(t,e),Object.defineProperty(t.prototype,"matchLength",{get:function(){return 1},enumerable:!0,configurable:!0}),t.prototype.handle=function(e,t){void 0===t&&(t=0),r.ok(e.length-t===1);var n=Object.create(null),i=this.pattern.regexp.exec(e[t]);if(i){this.fillProblemData(n,this.pattern,i);var o=this.getMarkerMatch(n);if(o)return{match:o,"continue":!1}}return{match:null,"continue":!1}},t.prototype.next=function(e){return null},t}(y),b=function(e){function t(t){e.call(this,t),this.patterns=t.pattern}return __extends(t,e),Object.defineProperty(t.prototype,"matchLength",{get:function(){return this.patterns.length},enumerable:!0,configurable:!0}),t.prototype.handle=function(e,t){void 0===t&&(t=0),r.ok(e.length-t===this.patterns.length),this.data=Object.create(null);for(var n=this.data,o=0;o<this.patterns.length;o++){var s=this.patterns[o],a=s.regexp.exec(e[o+t]);if(!a)return{match:null,"continue":!1};s.loop&&o===this.patterns.length-1&&(n=i.clone(n)),this.fillProblemData(n,s,a)}var c=this.patterns[this.patterns.length-1].loop;return c||(this.data=null),{match:this.getMarkerMatch(n),"continue":c}},t.prototype.next=function(e){var t=this.patterns[this.patterns.length-1];r.ok(t.loop===!0&&null!==this.data);var n=t.regexp.exec(e);if(!n)return this.data=null,null;var o=i.clone(this.data);return this.fillProblemData(o,t,n),this.getMarkerMatch(o)},t}(y),S=Object.create(null);S.msCompile={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(\w{1,2}\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},S["gulp-tsc"]={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(\d+)\s+(.*)$/,file:1,location:2,code:3,message:4},S.tsc={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(TS\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},S.cpp={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(C\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},S.csc={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(CS\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},S.vb={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(BC\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},S.lessCompile={regexp:/^\s*(.*) in file (.*) line no. (\d+)$/,message:1,file:2,line:3},S.jshint={regexp:/^(.*):\s+line\s+(\d+),\s+col\s+(\d+),\s(.+?)(?:\s+\((\w)(\d+)\))?$/,file:1,line:2,column:3,message:4,severity:5,code:6},S["jshint-stylish"]=[{regexp:/^(.+)$/,file:1},{regexp:/^\s+line\s+(\d+)\s+col\s+(\d+)\s+(.+?)(?:\s+\((\w)(\d+)\))?$/,line:1,column:2,message:3,severity:4,code:5,loop:!0}],S["eslint-compact"]={regexp:/^(.+):\sline\s(\d+),\scol\s(\d+),\s(Error|Warning|Info)\s-\s(.+)\s\((.+)\)$/,file:1,line:2,column:3,severity:4,message:5,code:6},S["eslint-stylish"]=[{regexp:/^([^\s].*)$/,file:1},{regexp:/^\s+(\d+):(\d+)\s+(error|warning|info)\s+(.+?)\s\s+(.*)$/,line:1,column:2,severity:3,message:4,code:5,loop:!0}],t.defaultPattern=f;var E;!function(e){function t(e){return a.isString(e.name)}var n;!function(e){e.Error="error",e.Warning="warning",e.Info="info"}(n=e.ProblemSeverity||(e.ProblemSeverity={})),e.isNamedProblemMatcher=t}(E=t.Config||(t.Config={}));var w=function(e){function o(t,n,i){void 0===i&&(i=new l.ValidationStatus),e.call(this,n,i),this.resolver=t}return __extends(o,e),o.prototype.parse=function(e){var t=this.createProblemMatcher(e);return this.checkProblemMatcherValid(e,t)?(this.addWatchingMatcher(e,t),t):null},o.prototype.checkProblemMatcherValid=function(e,t){return t&&t.pattern&&t.owner&&!a.isUndefined(t.fileLocation)?!0:(this.status.state=l.ValidationState.Fatal,this.log(n.localize(0,null,JSON.stringify(e,null,4))),!1)},o.prototype.createProblemMatcher=function(e){var t=null,o=e.owner?e.owner:"external",r=a.isString(e.applyTo)?v.fromString(e.applyTo):v.allDocuments;r||(r=v.allDocuments);var s,u=void 0,d=void 0;if(a.isUndefined(e.fileLocation))u=m.Relative,d="${cwd}";else if(a.isString(e.fileLocation))s=m.fromString(e.fileLocation),s&&(u=s,s===m.Relative&&(d="${cwd}"));else if(a.isStringArray(e.fileLocation)){var h=e.fileLocation;h.length>0&&(s=m.fromString(h[0]),1===h.length&&s===m.Absolute?u=s:2===h.length&&s===m.Relative&&h[1]&&(u=s,d=h[1]))}var p=e.pattern?this.createProblemPattern(e.pattern):void 0,f=e.severity?c["default"].fromValue(e.severity):void 0;if(f===c["default"].Ignore&&(this.status.state=l.ValidationState.Info,this.log(n.localize(1,null,e.severity)),f=c["default"].Error),a.isString(e.base)){var g=e.base;if(g.length>1&&"$"===g[0]){var y=this.resolver.get(g.substring(1));y&&(t=i.clone(y),e.owner&&(t.owner=o),u&&(t.fileLocation=u),d&&(t.filePrefix=d),e.pattern&&(t.pattern=p),e.severity&&(t.severity=f))}}else u&&(t={owner:o,applyTo:r,fileLocation:u,pattern:p},d&&(t.filePrefix=d),f&&(t.severity=f));return E.isNamedProblemMatcher(e)&&(t.name=e.name),t},o.prototype.createProblemPattern=function(e){var t;if(!a.isString(e)){if(a.isArray(e)){for(var i=e,o=[],r=0;r<i.length;r++)t=this.createSingleProblemPattern(i[r],!1),r<i.length-1&&!a.isUndefined(t.loop)&&t.loop&&(t.loop=!1,this.status.state=l.ValidationState.Error,this.log(n.localize(2,null))),o.push(t);return this.validateProblemPattern(o),o}return t=this.createSingleProblemPattern(e,!0),!a.isUndefined(t.loop)&&t.loop&&(t.loop=!1,this.status.state=l.ValidationState.Error,this.log(n.localize(3,null))),this.validateProblemPattern([t]),t}var s=e;return s.length>1&&"$"===s[0]?f(s.substring(1)):null},o.prototype.createSingleProblemPattern=function(e,n){var o={regexp:this.createRegularExpression(e.regexp)};return t.problemPatternProperties.forEach(function(t){a.isUndefined(e[t])||(o[t]=e[t])}),n&&(o=o.location?i.mixin(o,{file:1,message:4},!1):i.mixin(o,{file:1,line:2,column:3,message:4},!1)),o},o.prototype.validateProblemPattern=function(e){var t,i,o,r,s=0;e.forEach(function(e){t=t||!!e.file,i=i||!!e.message,o=o||!!e.location,r=r||!!e.line,e.regexp&&s++}),s!==e.length&&(this.status.state=l.ValidationState.Error,this.log(n.localize(4,null))),t&&i&&(o||r)||(this.status.state=l.ValidationState.Error,this.log(n.localize(5,null)))},o.prototype.addWatchingMatcher=function(e,t){var i=this.createRegularExpression(e.watchedTaskBeginsRegExp),o=this.createRegularExpression(e.watchedTaskEndsRegExp);if(i&&o)return void(t.watching={activeOnStart:!1,beginsPattern:{regexp:i},endsPattern:{regexp:o}});if(!a.isUndefinedOrNull(e.watching)){var r=e.watching,s=this.createWatchingPattern(r.beginsPattern),c=this.createWatchingPattern(r.endsPattern);return s&&c?void(t.watching={activeOnStart:a.isBoolean(r.activeOnStart)?r.activeOnStart:!1,beginsPattern:s,endsPattern:c}):void((s||c)&&(this.status.state=l.ValidationState.Error,this.log(n.localize(6,null))))}},o.prototype.createWatchingPattern=function(e){if(a.isUndefinedOrNull(e))return null;var t,n;return a.isString(e)?t=this.createRegularExpression(e):(t=this.createRegularExpression(e.regexp),a.isNumber(e.file)&&(n=e.file)),t?n?{regexp:t,file:n}:{regexp:t}:null},o.prototype.createRegularExpression=function(e){var t=null;if(!e)return t;try{t=new RegExp(e)}catch(i){this.status.state=l.ValidationState.Fatal,this.log(n.localize(7,null,e))}return t},o}(l.Parser);t.ProblemMatcherParser=w;var C=function(){function e(){this.matchers=Object.create(null)}return e.prototype.add=function(e,t){this.matchers[e]=t},e.prototype.get=function(e){return this.matchers[e]},e.prototype.exists=function(e){return!!this.matchers[e]},e.prototype.remove=function(e){delete this.matchers[e]},e}();t.ProblemMatcherRegistry=C,t.registry=new C,t.registry.add("msCompile",{owner:"msCompile",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("msCompile")}),t.registry.add("lessCompile",{owner:"lessCompile",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("lessCompile"),severity:c["default"].Error}),t.registry.add("tsc",{owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("tsc")});var T={owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("tsc"),watching:{activeOnStart:!0,beginsPattern:{regexp:/^\s*(?:message TS6032:|\d{1,2}:\d{1,2}:\d{1,2}(?: AM| PM)? -) File change detected\. Starting incremental compilation\.\.\./},endsPattern:{regexp:/^\s*(?:message TS6042:|\d{1,2}:\d{1,2}:\d{1,2}(?: AM| PM)? -) Compilation complete\. Watching for file changes\./}}};T.tscWatch=!0,t.registry.add("tsc-watch",T),t.registry.add("gulp-tsc",{owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("gulp-tsc")}),t.registry.add("jshint",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("jshint")}),t.registry.add("jshint-stylish",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("jshint-stylish")}),t.registry.add("eslint-compact",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("eslint-compact")}),t.registry.add("eslint-stylish",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("eslint-stylish")})}),define("vs/platform/message/common/message",["require","exports","vs/nls!vs/platform/message/common/message","vs/base/common/winjs.base","vs/base/common/severity","vs/platform/instantiation/common/instantiation","vs/base/common/actions"],function(e,t,n,i,o,r,s){"use strict";t.CloseAction=new s.Action("close.message",n.localize(0,null),null,!0,function(){return i.TPromise.as(!0)}),t.CancelAction=new s.Action("close.message",n.localize(1,null),null,!0,function(){return i.TPromise.as(!0)}),t.IMessageService=r.createDecorator("messageService"),t.Severity=o["default"]}),define("vs/platform/platform",["require","exports","vs/base/common/types","vs/base/common/assert"],function(e,t,n,i){"use strict";var o=function(){function e(){this.data={}}return e.prototype.add=function(e,t){i.ok(n.isString(e)),i.ok(n.isObject(t)),i.ok(!this.data.hasOwnProperty(e),"There is already an extension with this id"),this.data[e]=t},e.prototype.knows=function(e){return this.data.hasOwnProperty(e)},e.prototype.as=function(e){return this.data[e]||null},e}();t.Registry=new o;var r=function(){function e(){this.toBeInstantiated=[],this.instances=[]}return e.prototype.setInstantiationService=function(e){for(this.instantiationService=e;this.toBeInstantiated.length>0;){var t=this.toBeInstantiated.shift();this.instantiate(t)}},e.prototype.instantiate=function(e){var t=this.instantiationService.createInstance(e);this.instances.push(t)},e.prototype._register=function(e){this.instantiationService?this.instantiate(e):this.toBeInstantiated.push(e)},e.prototype._getInstances=function(){return this.instances.slice(0)},e.prototype._setInstances=function(e){this.instances=e},e}();t.BaseRegistry=r}),define("vs/editor/browser/editorBrowserExtensions",["require","exports","vs/platform/platform"],function(e,t,n){"use strict";var i;!function(e){function t(e){n.Registry.as(r.EditorContributions).registerEditorBrowserContribution(e)}function i(){return n.Registry.as(r.EditorContributions).getEditorBrowserContributions()}e.registerEditorContribution=t,e.getEditorContributions=i}(i=t.EditorBrowserRegistry||(t.EditorBrowserRegistry={}));var o=function(){function e(e){this._ctor=e}return e.prototype.createInstance=function(e,t){return e.createInstance(this._ctor,t)},e}(),r={EditorContributions:"editor.contributions"},s=function(){function e(){this.editorContributions=[]}return e.prototype.registerEditorBrowserContribution=function(e){this.editorContributions.push(new o(e))},e.prototype.getEditorBrowserContributions=function(){return this.editorContributions.slice(0)},e}();n.Registry.add(r.EditorContributions,new s)}),define("vs/editor/common/modes/modesRegistry",["require","exports","vs/nls!vs/editor/common/modes/modesRegistry","vs/base/common/event","vs/platform/platform"],function(e,t,n,i,o){"use strict";t.Extensions={ModesRegistry:"editor.modesRegistry"};var r=function(){function e(){this._onDidAddCompatModes=new i.Emitter,this.onDidAddCompatModes=this._onDidAddCompatModes.event,this._onDidAddLanguages=new i.Emitter,this.onDidAddLanguages=this._onDidAddLanguages.event,this._workerParticipants=[],this._compatModes=[],this._languages=[]}return e.prototype.registerWorkerParticipants=function(e){this._workerParticipants=e},e.prototype.registerWorkerParticipant=function(e,t,n){if("string"!=typeof e)throw new Error("InvalidArgument: expected `modeId` to be a string");if("string"!=typeof t)throw new Error("InvalidArgument: expected `moduleId` to be a string");this._workerParticipants.push({modeId:e,moduleId:t,ctorName:n})},e.prototype.getWorkerParticipantsForMode=function(e){return this._workerParticipants.filter(function(t){return t.modeId===e})},e.prototype.getWorkerParticipants=function(){return this._workerParticipants},e.prototype.registerCompatModes=function(e){this._compatModes=this._compatModes.concat(e),this._onDidAddCompatModes.fire(e)},e.prototype.registerCompatMode=function(e){this._compatModes.push(e),this._onDidAddCompatModes.fire([e])},e.prototype.getCompatModes=function(){return this._compatModes.slice(0)},e.prototype.registerLanguage=function(e){this._languages.push(e),this._onDidAddLanguages.fire([e])},e.prototype.registerLanguages=function(e){this._languages=this._languages.concat(e),this._onDidAddLanguages.fire(e)},e.prototype.getLanguages=function(){return this._languages.slice(0)},e}();t.EditorModesRegistry=r,t.ModesRegistry=new r,o.Registry.add(t.Extensions.ModesRegistry,t.ModesRegistry),t.ModesRegistry.registerLanguage({id:"plaintext",extensions:[".txt",".gitignore"],aliases:[n.localize(0,null),"text"],mimetypes:["text/plain"]})}),define("vs/editor/common/services/languagesRegistry",["require","exports","vs/base/common/errors","vs/base/common/event","vs/base/common/mime","vs/base/common/strings","vs/editor/common/modes/modesRegistry"],function(e,t,n,i,o,r,s){"use strict";var a=Object.prototype.hasOwnProperty,c=function(){function e(e){var t=this;void 0===e&&(e=!0),this._onDidAddModes=new i.Emitter,this.onDidAddModes=this._onDidAddModes.event,this.knownModeIds={},this.mime2LanguageId={},this.name2LanguageId={},this.id2Name={},this.name2Extensions={},this.compatModes={},this.lowerName2Id={},this.id2ConfigurationFiles={},e&&(this._registerCompatModes(s.ModesRegistry.getCompatModes()),s.ModesRegistry.onDidAddCompatModes(function(e){return t._registerCompatModes(e)}),this._registerLanguages(s.ModesRegistry.getLanguages()),s.ModesRegistry.onDidAddLanguages(function(e){return t._registerLanguages(e)}))}return e.prototype._registerCompatModes=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];this._registerLanguage({id:i.id,extensions:i.extensions,filenames:i.filenames,firstLine:i.firstLine,aliases:i.aliases,mimetypes:i.mimetypes}),this.compatModes[i.id]={moduleId:i.moduleId,ctorName:i.ctorName},t.push(i.id)}this._onDidAddModes.fire(t)},e.prototype._registerLanguages=function(e){for(var t=[],n=0;n<e.length;n++)this._registerLanguage(e[n]),t.push(e[n].id);this._onDidAddModes.fire(t)},e.prototype._registerLanguage=function(e){this.knownModeIds[e.id]=!0;var t=null;if("undefined"!=typeof e.mimetypes&&Array.isArray(e.mimetypes))for(var i=0;i<e.mimetypes.length;i++)t||(t=e.mimetypes[i]),this.mime2LanguageId[e.mimetypes[i]]=e.id;if(t||(t="text/x-"+e.id,this.mime2LanguageId[t]=e.id),Array.isArray(e.extensions))for(var s=0,a=e.extensions;s<a.length;s++){var c=a[s];o.registerTextMime({mime:t,extension:c})}if(Array.isArray(e.filenames))for(var u=0,l=e.filenames;u<l.length;u++){var d=l[u];o.registerTextMime({mime:t,filename:d})}if(Array.isArray(e.filenamePatterns))for(var h=0,p=e.filenamePatterns;h<p.length;h++){var f=p[h];o.registerTextMime({mime:t,filepattern:f})}if("string"==typeof e.firstLine&&e.firstLine.length>0){var m=e.firstLine;"^"!==m.charAt(0)&&(m="^"+m);try{var v=new RegExp(m);r.regExpLeadsToEndlessLoop(v)||o.registerTextMime({mime:t,firstline:v})}catch(g){n.onUnexpectedError(g)}}if(this.lowerName2Id[e.id.toLowerCase()]=e.id,"undefined"!=typeof e.aliases&&Array.isArray(e.aliases))for(var i=0;i<e.aliases.length;i++)e.aliases[i]&&0!==e.aliases[i].length&&(this.lowerName2Id[e.aliases[i].toLowerCase()]=e.id);if(!this.id2Name[e.id]){var y=null;y="undefined"!=typeof e.aliases&&Array.isArray(e.aliases)&&e.aliases.length>0?e.aliases[0]:e.id,y&&(this.name2LanguageId[y]=e.id,this.name2Extensions[y]=e.extensions,this.id2Name[e.id]=y||"")}"string"==typeof e.configuration&&(this.id2ConfigurationFiles[e.id]=this.id2ConfigurationFiles[e.id]||[],this.id2ConfigurationFiles[e.id].push(e.configuration))},e.prototype.isRegisteredMode=function(e){return a.call(this.mime2LanguageId,e)?!0:a.call(this.knownModeIds,e)},e.prototype.getRegisteredModes=function(){return Object.keys(this.knownModeIds)},e.prototype.getRegisteredLanguageNames=function(){return Object.keys(this.name2LanguageId)},e.prototype.getLanguageName=function(e){return this.id2Name[e]||null},e.prototype.getModeIdForLanguageNameLowercase=function(e){return this.lowerName2Id[e]||null},e.prototype.getConfigurationFiles=function(e){return this.id2ConfigurationFiles[e]||[]},e.prototype.getMimeForMode=function(e){for(var t in this.mime2LanguageId)if(this.mime2LanguageId.hasOwnProperty(t)){var n=this.mime2LanguageId[t];if(n===e)return t}return null},e.prototype.extractModeIds=function(e){var t=this;return e?e.split(",").map(function(e){return e.trim()}).map(function(e){return t.mime2LanguageId[e]||e}).filter(function(e){return t.knownModeIds[e]}):[]},e.prototype.getModeIdsFromLanguageName=function(e){return e&&a.call(this.name2LanguageId,e)?[this.name2LanguageId[e]]:[]},e.prototype.getModeIdsFromFilenameOrFirstLine=function(e,t){if(!e&&!t)return[];var n=o.guessMimeTypes(e,t);return this.extractModeIds(n.join(","))},e.prototype.getCompatMode=function(e){return this.compatModes[e]||null},e.prototype.getExtensions=function(e){return this.name2Extensions[e]},e}();t.LanguagesRegistry=c}),define("vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard",["require","exports","vs/base/common/lifecycle","vs/base/browser/browser","vs/base/browser/dom","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/browser/editorBrowserExtensions","vs/css!./iPadShowKeyboard"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e){var t=this;this.editor=e,this.toDispose=[],i.isIPad&&(this.toDispose.push(e.addListener2(r.EventType.ConfigurationChanged,function(){return t.update()})),this.update())}return e.prototype.update=function(){var e=!!this.widget,t=!this.editor.getConfiguration().readOnly;!e&&t?this.widget=new u(this.editor):e&&!t&&(this.widget.dispose(),this.widget=null)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),this.widget&&(this.widget.dispose(),this.widget=null)},e.ID="editor.contrib.iPadShowKeyboard",e}();t.IPadShowKeyboard=c;var u=function(){function e(e){var t=this;this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._toDispose=[],this._toDispose.push(o.addDisposableListener(this._domNode,"touchstart",function(e){t.editor.focus()})),this._toDispose.push(o.addDisposableListener(this._domNode,"focus",function(e){t.editor.focus()})),this.editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this.editor.removeOverlayWidget(this),this._toDispose=n.disposeAll(this._toDispose)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:s.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER}},e.ID="editor.contrib.ShowKeyboardWidget",e}();a.EditorBrowserRegistry.registerEditorContribution(c)}),define("vs/editor/contrib/outlineMarker/browser/outlineMarker",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/lifecycle","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/browser/editorBrowserExtensions","vs/css!./outlineMarker"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e,t){this.afterLineNumber=e.startLineNumber-1,this.heightInPx=4,this.suppressMouseDown=!0,this.domNode=document.createElement("div");var n=document.createElement("hr");n.className="outlineRule "+t,this.domNode.appendChild(n)}return e}(),u=function(){function e(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return e.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},e.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},e.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;i>n;n++)this._addDecorationsCallbacks[n](t[n])},e}(),l=function(){function e(e,t,n,i,o){var r=this;this._editor=n,this._viewZone=new c(e,t),this._viewZoneId=o.addZone(this._viewZone),i.addDecoration({range:e,options:{}},function(e){r._decorationId=e})}return e.prototype.dispose=function(e,t){e.removeDecoration(this._decorationId),t.removeZone(this._viewZoneId)},e.prototype.getLine=function(){return this._viewZone.afterLineNumber},e.prototype.update=function(e){var t=this._editor.getModel().getDecorationRange(this._decorationId);this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId)},e}(),d=function(){function e(e){var t=this;this._editor=e,this._globalToDispose=[],this._localToDispose=[],this._markers=[],this._currentOutlinePromise=null,this._globalToDispose.push(this._editor.addListener2(s.EventType.ModelChanged,function(){return t.onChange(!0)})),this._globalToDispose.push(this._editor.addListener2(s.EventType.ModelModeChanged,function(){return t.onChange(!1)})),this._globalToDispose.push(this._editor.addListener2(s.EventType.ModelModeSupportChanged,function(e){e.outlineSupport&&t.onChange(!1)})),this._globalToDispose.push(this._editor.addListener2(s.EventType.ConfigurationChanged,function(e){e.outlineMarkers&&t.onChange(!1)})),this.onChange(!1)}return e.prototype.dispose=function(){this.localDispose(),this._globalToDispose=o.disposeAll(this._globalToDispose)},e.prototype.localDispose=function(){this._currentOutlinePromise&&this._currentOutlinePromise.cancel(),this._localToDispose=o.disposeAll(this._localToDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onChange=function(e){var t=this;if(e&&(this._markers=[]),this.localDispose(),this._editor.getConfiguration().outlineMarkers){var o=this._editor.getModel();if(o){var r=o.getMode();if(r.outlineSupport){var s=new n.RunOnceScheduler(function(){t._currentOutlinePromise&&t._currentOutlinePromise.cancel(),t._currentOutlinePromise=r.outlineSupport.getOutline(o.getAssociatedResource()),t._currentOutlinePromise.then(function(e){t.renderOutlines(e)},function(e){i.onUnexpectedError(e)})},250);this._localToDispose.push(s),this._localToDispose.push(this._editor.addListener2("change",function(){t._editor.changeViewZones(function(e){t._markers.forEach(function(t){t.update(e)})}),s.schedule()})),this._localToDispose.push({dispose:function(){if(t._markers.length>0){var e=new u;t._editor.changeViewZones(function(n){t._markers.forEach(function(t){return t.dispose(e,n)}),t._markers=[]}),t._editor.changeDecorations(function(t){e.commit(t)})}}}),s.schedule()}}}},e.prototype.renderOutlines=function(e){var t=this,n=this._editor.getCenteredRangeInViewport(),i=this._markers.length;this._editor.changeDecorations(function(n){var i=new u;t._editor.changeViewZones(function(n){t._markers.forEach(function(e){return e.dispose(i,n)}),t._markers=[],t.renderOutlinesRecursive(e,i,n)}),i.commit(n)});var o=this._markers.length;Math.abs(i-o)>1&&this._editor.revealRangeInCenter(n)},e.prototype.renderOutlinesRecursive=function(e,t,n){var i=this;e&&e.forEach(function(e){if("class"===e.type||"method"===e.type||"function"===e.type){var o=r.Range.lift(e.range);if(!i.alreadyHasMarkerAtRange(o)){var s=new l(o,e.type,i._editor,t,n);i._markers.push(s)}}i.renderOutlinesRecursive(e.children,t,n)})},e.prototype.alreadyHasMarkerAtRange=function(e){for(var t=0;t<this._markers.length;++t)if(this._markers[t].getLine()===e.startLineNumber-1)return!0;return!1},e.ID="editor.outlineMarker",e}();t.OutlineMarkerContribution=d,a.EditorBrowserRegistry.registerEditorContribution(d)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/selectionClipboard/electron-browser/selectionClipboard",["require","exports","electron","vs/base/common/platform","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/editor/browser/editorBrowserExtensions","vs/platform/keybinding/common/keybindingService","vs/base/common/async","vs/editor/common/core/range"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=function(e){function t(t,o){if(e.call(this),i.isLinux){var s=t.getConfiguration().selectionClipboard;this._register(t.addListener2(r.EventType.ConfigurationChanged,function(e){e.selectionClipboard&&(s=t.getConfiguration().selectionClipboard)})),this._register(t.addListener2(r.EventType.MouseDown,function(e){s&&t.getModel()&&e.event.middleButton&&(e.event.preventDefault(),t.focus(),e.target.position&&t.setPosition(e.target.position),process.nextTick(function(){n.clipboard.readText("selection")}))}));var a=this._register(new c.RunOnceScheduler(function(){var e=t.getModel();if(e){var i=t.getSelections();i=i.slice(0),i.sort(u.Range.compareRangesUsingStarts);for(var o=[],s=0;s<i.length;s++){var a=i[s];if(a.isEmpty())return;o.push(e.getValueInRange(a,r.EndOfLinePreference.TextDefined))}var c=o.join(e.getEOL());n.clipboard.writeText(c,"selection")}},100));this._register(t.addListener2(r.EventType.CursorSelectionChanged,function(e){s&&a.schedule()}))}}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.ID="editor.contrib.selectionClipboard",t=__decorate([__param(1,a.IKeybindingService)],t)}(o.Disposable);s.EditorBrowserRegistry.registerEditorContribution(l)}),define("vs/languages/handlebars/common/handlebars.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){"use strict";n.ModesRegistry.registerCompatMode({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars"],mimetypes:["text/x-handlebars-template"],moduleId:"vs/languages/handlebars/common/handlebars",ctorName:"HandlebarsMode"})}),define("vs/languages/php/common/php.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){"use strict";n.ModesRegistry.registerCompatMode({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],moduleId:"vs/languages/php/common/php",ctorName:"PHPMode"})}),define("vs/languages/razor/common/razor.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){"use strict";n.ModesRegistry.registerCompatMode({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],moduleId:"vs/languages/razor/common/razor",ctorName:"RAZORMode"})}),define("vs/platform/jsonschemas/common/jsonContributionRegistry",["require","exports","vs/nls!vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/platform","vs/base/common/eventEmitter"],function(e,t,n,i,o){"use strict";function r(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}t.Extensions={JSONContribution:"base.contributions.json"};var s=function(){function e(){this.schemasById={},this.schemaAssociations={},this.eventEmitter=new o.EventEmitter}return e.prototype.addRegistryChangedListener=function(e){return this.eventEmitter.addListener2("registryChanged",e)},e.prototype.registerSchema=function(e,t){this.schemasById[r(e)]=t,this.eventEmitter.emit("registryChanged",{})},e.prototype.addSchemaFileAssociation=function(e,t){var n=this.schemaAssociations[e];n||(n=[],this.schemaAssociations[e]=n),n.push(t),this.eventEmitter.emit("registryChanged",{})},e.prototype.getSchemaContributions=function(){return{schemas:this.schemasById,schemaAssociations:this.schemaAssociations}},e}(),a=new s;i.Registry.add(t.Extensions.JSONContribution,a),
a.registerSchema("http://json-schema.org/draft-04/schema#",{id:"http://json-schema.org/draft-04/schema#",title:n.localize(0,null),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{type:"string","enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri",description:n.localize(1,null)},$schema:{type:"string",format:"uri",description:n.localize(2,null)},title:{type:"string",description:n.localize(3,null)},description:{type:"string",description:n.localize(4,null)},"default":{description:n.localize(5,null)},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0,description:n.localize(6,null)},maximum:{type:"number",description:n.localize(7,null)},exclusiveMaximum:{type:"boolean","default":!1,description:n.localize(8,null)},minimum:{type:"number",description:n.localize(9,null)},exclusiveMinimum:{type:"boolean","default":!1,description:n.localize(10,null)},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(11,null)},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(12,null)},pattern:{type:"string",format:"regex",description:n.localize(13,null)},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(14,null)},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{},description:n.localize(15,null)},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(16,null)},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(17,null)},uniqueItems:{type:"boolean","default":!1,description:n.localize(18,null)},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(19,null)},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(20,null)},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:n.localize(21,null)},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(22,null)},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(23,null)},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(24,null)},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(25,null)},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:n.localize(26,null)},"enum":{type:"array",minItems:1,uniqueItems:!0,description:n.localize(27,null)},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}],description:n.localize(28,null)},format:{anyOf:[{type:"string",description:n.localize(29,null),"enum":["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(30,null)},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(31,null)},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(32,null)},not:{allOf:[{$ref:"#"}],description:n.localize(33,null)}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}})}),define("vs/platform/extensions/common/extensionsRegistry",["require","exports","vs/nls!vs/platform/extensions/common/extensionsRegistry","vs/base/common/errors","vs/base/common/paths","vs/base/common/severity","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/platform"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t,i){if(!t)return i.push(n.localize(0,null)),!1;if("string"!=typeof t.publisher)return i.push(n.localize(1,null,"publisher")),!1;if("string"!=typeof t.name)return i.push(n.localize(2,null,"name")),!1;if("string"!=typeof t.version)return i.push(n.localize(3,null,"version")),!1;if(!t.engines)return i.push(n.localize(4,null,"engines")),!1;if("string"!=typeof t.engines.vscode)return i.push(n.localize(5,null,"engines.vscode")),!1;if("undefined"!=typeof t.extensionDependencies&&!u(t.extensionDependencies))return i.push(n.localize(6,null,"extensionDependencies")),!1;if("undefined"!=typeof t.activationEvents){if(!u(t.activationEvents))return i.push(n.localize(7,null,"activationEvents")),!1;if("undefined"==typeof t.main)return i.push(n.localize(8,null,"activationEvents","main")),!1}if("undefined"!=typeof t.main){if("string"!=typeof t.main)return i.push(n.localize(9,null,"main")),!1;var r=o.normalize(o.join(e,t.main));if(r.indexOf(e)&&i.push(n.localize(10,null,r,e)),"undefined"==typeof t.activationEvents)return i.push(n.localize(11,null,"activationEvents","main")),!1}return!0}function u(e){if(!Array.isArray(e))return!1;for(var t=0,n=e.length;n>t;t++)if("string"!=typeof e[t])return!1;return!0}var l=function(){function e(e,t){this._messageHandler=e,this._source=t}return e.prototype._msg=function(e,t){this._messageHandler({type:e,message:t,source:this._source})},e.prototype.error=function(e){this._msg(r["default"].Error,e)},e.prototype.warn=function(e){this._msg(r["default"].Warning,e)},e.prototype.info=function(e){this._msg(r["default"].Info,e)},e}();t.isValidExtensionDescription=c;var d=Object.hasOwnProperty,h=a.Registry.as(s.Extensions.JSONContribution),p=function(){function e(e,t){this.name=e,this._registry=t,this._handler=null,this._messageHandler=null}return e.prototype.setHandler=function(e){if(this._handler)throw new Error("Handler already set!");this._handler=e,this._handle()},e.prototype.handle=function(e){this._messageHandler=e,this._handle()},e.prototype._handle=function(){var e=this;this._handler&&this._messageHandler&&this._registry.registerPointListener(this.name,function(t){var n=t.map(function(t){return{description:t,value:t.contributes[e.name],collector:new l(e._messageHandler,t.extensionFolderPath)}});e._handler(n)})},e}(),f="vscode://schemas/vscode-extensions",m={"default":{name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}},properties:{displayName:{description:n.localize(12,null),type:"string"},categories:{description:n.localize(13,null),type:"array",items:{type:"string","enum":["Languages","Snippets","Linters","Themes","Debuggers","Other"]}},galleryBanner:{type:"object",description:n.localize(14,null),properties:{color:{description:n.localize(15,null),type:"string"},theme:{description:n.localize(16,null),type:"string","enum":["dark","light"]}}},publisher:{description:n.localize(17,null),type:"string"},activationEvents:{description:n.localize(18,null),type:"array",items:{type:"string"}},extensionDependencies:{description:n.localize(19,null),type:"array",items:{type:"string"}},scripts:{type:"object",properties:{"vscode:prepublish":{description:n.localize(20,null),type:"string"}}},contributes:{description:n.localize(21,null),type:"object",properties:{},"default":{}}}},v=function(){function e(){this._extensionsMap={},this._extensionsArr=[],this._activationMap={},this._pointListeners=[],this._extensionPoints={},this._oneTimeActivationEventListeners={}}return e.prototype.registerPointListener=function(t,n){var i={extensionPoint:t,listener:n};this._pointListeners.push(i),this._triggerPointListener(i,e._filterWithExtPoint(this.getAllExtensionDescriptions(),t))},e.prototype.registerExtensionPoint=function(e,t){if(d.call(this._extensionPoints,e))throw new Error("Duplicate extension point: "+e);var n=new p(e,this);return this._extensionPoints[e]=n,m.properties.contributes.properties[e]=t,h.registerSchema(f,m),n},e.prototype.handleExtensionPoints=function(e){var t=this;Object.keys(this._extensionPoints).forEach(function(n){t._extensionPoints[n].handle(e)})},e.prototype._triggerPointListener=function(e,t){if(t&&0!==t.length)try{e.listener(t)}catch(n){i.onUnexpectedError(n)}},e.prototype.registerExtensions=function(t){for(var n=0,i=t.length;i>n;n++){var o=t[n];if(d.call(this._extensionsMap,o.id))console.error("Extension `"+o.id+"` is already registered");else if(this._extensionsMap[o.id]=o,this._extensionsArr.push(o),Array.isArray(o.activationEvents))for(var r=0,s=o.activationEvents.length;s>r;r++){var a=o.activationEvents[r];this._activationMap[a]=this._activationMap[a]||[],this._activationMap[a].push(o)}}for(var n=0,i=this._pointListeners.length;i>n;n++){var c=this._pointListeners[n],u=e._filterWithExtPoint(t,c.extensionPoint);this._triggerPointListener(c,u)}},e._filterWithExtPoint=function(e,t){return e.filter(function(e){return e.contributes&&d.call(e.contributes,t)})},e.prototype.getExtensionDescriptionsForActivationEvent=function(e){return d.call(this._activationMap,e)?this._activationMap[e].slice(0):[]},e.prototype.getAllExtensionDescriptions=function(){return this._extensionsArr.slice(0)},e.prototype.getExtensionDescription=function(e){return d.call(this._extensionsMap,e)?this._extensionsMap[e]:null},e.prototype.registerOneTimeActivationEventListener=function(e,t){d.call(this._oneTimeActivationEventListeners,e)||(this._oneTimeActivationEventListeners[e]=[]),this._oneTimeActivationEventListeners[e].push(t)},e.prototype.triggerActivationEventListeners=function(e){if(d.call(this._oneTimeActivationEventListeners,e)){var t=this._oneTimeActivationEventListeners[e];delete this._oneTimeActivationEventListeners[e];for(var n=0,o=t.length;o>n;n++){var r=t[n];try{r()}catch(s){i.onUnexpectedError(s)}}}},e}(),g={ExtensionsRegistry:"ExtensionsRegistry"};a.Registry.add(g.ExtensionsRegistry,new v),t.ExtensionsRegistry=a.Registry.as(g.ExtensionsRegistry),h.registerSchema(f,m),h.addSchemaFileAssociation("/package.json",f)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/actions/common/actionsService",["require","exports","vs/nls!vs/platform/actions/common/actionsService","vs/base/common/actions","vs/platform/extensions/common/extensions","vs/platform/extensions/common/extensionsRegistry","vs/platform/keybinding/common/keybindingService"],function(e,t,n,i,o,r,s){"use strict";function a(e){return Array.isArray(e)}function c(e,t){return e?"string"!=typeof e.command?(t.push(n.localize(1,null,"command")),!1):"string"!=typeof e.title?(t.push(n.localize(2,null,"title")),!1):e.category&&"string"!=typeof e.category?(t.push(n.localize(3,null,"category")),!1):!0:(t.push(n.localize(0,null)),!1)}var u={type:"object",properties:{command:{description:n.localize(4,null),type:"string"},title:{description:n.localize(5,null),type:"string"},category:{description:n.localize(6,null),type:"string"}}},l=r.ExtensionsRegistry.registerExtensionPoint("commands",{description:n.localize(7,null),oneOf:[u,{type:"array",items:u}]}),d=function(){function e(e,t){var n=this;this._extensionsActions=[],this._extensionService=e,this._keybindingsService=t,l.setHandler(function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];n._onDescription(o.value,o.collector)}})}return e.prototype._onDescription=function(e,t){if(a(e))for(var n=0,i=e;n<i.length;n++){var o=i[n];this._handleCommand(o,t)}else this._handleCommand(e,t)},e.prototype._handleCommand=function(e,t){var o=this,r=[];if(c(e,r)){var s="onCommand:"+e.command,a=e.category?n.localize(8,null,e.category,e.title):e.title,u=new i.Action(e.command,a,void 0,!0,function(){return o._extensionService.activateByEvent(s).then(function(){return o._keybindingsService.executeCommand(e.command)})});this._extensionsActions.push(u)}r.length>0&&t.error(n.localize(9,null,l.name,r.join("\n")))},e.prototype.getActions=function(){return this._extensionsActions.slice(0)},e=__decorate([__param(0,o.IExtensionService),__param(1,s.IKeybindingService)],e)}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=d}),define("vs/platform/configuration/common/configurationRegistry",["require","exports","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/base/common/event","vs/platform/platform","vs/base/common/objects","vs/platform/extensions/common/extensionsRegistry","vs/platform/jsonschemas/common/jsonContributionRegistry"],function(e,t,n,i,o,r,s,a){"use strict";t.Extensions={Configuration:"base.contributions.configuration"};var c="vscode://schemas/settings",u=o.Registry.as(a.Extensions.JSONContribution),l=function(){function e(){this.configurationContributors=[],this.configurationSchema={allOf:[]},this._onDidRegisterConfiguration=new i.Emitter,u.registerSchema(c,this.configurationSchema),u.addSchemaFileAssociation("vscode://defaultsettings/settings.json",c),u.addSchemaFileAssociation("%APP_SETTINGS_HOME%/settings.json",c),u.addSchemaFileAssociation("/.vscode/settings.json",c)}return Object.defineProperty(e.prototype,"onDidRegisterConfiguration",{get:function(){return this._onDidRegisterConfiguration.event},enumerable:!0,configurable:!0}),e.prototype.registerConfiguration=function(e){this.configurationContributors.push(e),this.registerJSONConfiguration(e),this._onDidRegisterConfiguration.fire(this)},e.prototype.getConfigurations=function(){return this.configurationContributors.slice(0)},e.prototype.registerJSONConfiguration=function(e){var t=r.clone(e);this.configurationSchema.allOf.push(t),u.registerSchema(c,this.configurationSchema)},e}(),d=new l;o.Registry.add(t.Extensions.Configuration,d);var h=s.ExtensionsRegistry.registerExtensionPoint("configuration",{description:n.localize(0,null),type:"object",defaultSnippets:[{body:{title:"",properties:{}}}],properties:{title:{description:n.localize(1,null),type:"string"},properties:{description:n.localize(2,null),type:"object",additionalProperties:{$ref:"http://json-schema.org/draft-04/schema#"}}}});h.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t].value,o=e[t].collector;if(i.type&&"object"!==i.type?o.warn(n.localize(3,null)):i.type="object",i.title&&"string"!=typeof i.title&&o.error(n.localize(4,null)),i.properties&&"object"!=typeof i.properties)return void o.error(n.localize(5,null));var s=r.clone(i);s.id=e[t].description.id,d.registerConfiguration(s)}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/config/commonEditorConfig",["require","exports","vs/nls!vs/editor/common/config/commonEditorConfig","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/platform","vs/platform/configuration/common/configurationRegistry","vs/platform/platform","vs/editor/common/config/defaultConfig","vs/editor/common/controller/handlerDispatcher","vs/editor/common/editorCommon","vs/editor/common/viewLayout/editorLayoutProvider"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";function p(e){return{experimentalScreenReader:e.experimentalScreenReader,rulers:e.rulers.slice(0),wordSeparators:e.wordSeparators,selectionClipboard:e.selectionClipboard,ariaLabel:e.ariaLabel,lineNumbers:e.lineNumbers,selectOnLineNumbers:e.selectOnLineNumbers,glyphMargin:e.glyphMargin,revealHorizontalRightPadding:e.revealHorizontalRightPadding,roundedSelection:e.roundedSelection,theme:e.theme,readOnly:e.readOnly,scrollbar:{arrowSize:e.scrollbar.arrowSize,vertical:e.scrollbar.vertical,horizontal:e.scrollbar.horizontal,useShadows:e.scrollbar.useShadows,verticalHasArrows:e.scrollbar.verticalHasArrows,horizontalHasArrows:e.scrollbar.horizontalHasArrows,handleMouseWheel:e.scrollbar.handleMouseWheel,horizontalScrollbarSize:e.scrollbar.horizontalScrollbarSize,horizontalSliderSize:e.scrollbar.horizontalSliderSize,verticalScrollbarSize:e.scrollbar.verticalScrollbarSize,verticalSliderSize:e.scrollbar.verticalSliderSize,mouseWheelScrollSensitivity:e.scrollbar.mouseWheelScrollSensitivity},overviewRulerLanes:e.overviewRulerLanes,cursorBlinking:e.cursorBlinking,cursorStyle:e.cursorStyle,fontLigatures:e.fontLigatures,hideCursorInOverviewRuler:e.hideCursorInOverviewRuler,scrollBeyondLastLine:e.scrollBeyondLastLine,wrappingIndent:e.wrappingIndent,wordWrapBreakBeforeCharacters:e.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:e.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:e.wordWrapBreakObtrusiveCharacters,tabFocusMode:e.tabFocusMode,stopLineTokenizationAfter:e.stopLineTokenizationAfter,stopRenderingLineAfter:e.stopRenderingLineAfter,longLineBoundary:e.longLineBoundary,forcedTokenizationBoundary:e.forcedTokenizationBoundary,hover:e.hover,contextmenu:e.contextmenu,quickSuggestions:e.quickSuggestions,quickSuggestionsDelay:e.quickSuggestionsDelay,iconsInSuggestions:e.iconsInSuggestions,autoClosingBrackets:e.autoClosingBrackets,formatOnType:e.formatOnType,suggestOnTriggerCharacters:e.suggestOnTriggerCharacters,acceptSuggestionOnEnter:e.acceptSuggestionOnEnter,selectionHighlight:e.selectionHighlight,outlineMarkers:e.outlineMarkers,referenceInfos:e.referenceInfos,folding:e.folding,renderWhitespace:e.renderWhitespace,layoutInfo:{width:e.layoutInfo.width,height:e.layoutInfo.height,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,glyphMarginHeight:e.layoutInfo.glyphMarginHeight,lineNumbersLeft:e.layoutInfo.lineNumbersLeft,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,lineNumbersHeight:e.layoutInfo.lineNumbersHeight,decorationsLeft:e.layoutInfo.decorationsLeft,decorationsWidth:e.layoutInfo.decorationsWidth,decorationsHeight:e.layoutInfo.decorationsHeight,contentLeft:e.layoutInfo.contentLeft,contentWidth:e.layoutInfo.contentWidth,contentHeight:e.layoutInfo.contentHeight,verticalScrollbarWidth:e.layoutInfo.verticalScrollbarWidth,horizontalScrollbarHeight:e.layoutInfo.horizontalScrollbarHeight,overviewRuler:{width:e.layoutInfo.overviewRuler.width,height:e.layoutInfo.overviewRuler.height,top:e.layoutInfo.overviewRuler.top,right:e.layoutInfo.overviewRuler.right}},stylingInfo:{editorClassName:e.stylingInfo.editorClassName,fontFamily:e.stylingInfo.fontFamily,fontSize:e.stylingInfo.fontSize,lineHeight:e.stylingInfo.lineHeight},wrappingInfo:{isViewportWrapping:e.wrappingInfo.isViewportWrapping,wrappingColumn:e.wrappingInfo.wrappingColumn},observedOuterWidth:e.observedOuterWidth,observedOuterHeight:e.observedOuterHeight,lineHeight:e.lineHeight,pageSize:e.pageSize,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,typicalFullwidthCharacterWidth:e.typicalFullwidthCharacterWidth,fontSize:e.fontSize}}function f(e){return"false"===e?!1:Boolean(e)}function m(e,t){return"undefined"==typeof e?t:f(e)}function v(e,t){var n=parseFloat(e);return isNaN(n)&&(n=t),n}function g(e,t,n){var i=parseInt(e,10);return isNaN(i)&&(i=0),"number"==typeof t&&(i=Math.max(t,i)),"number"==typeof n&&(i=Math.min(n,i)),i}function y(e){if(!Array.isArray(e))return[];var t=e,n=t.map(function(e){return g(e)});return n.sort(),n}function _(e,t){return"undefined"==typeof e?t:g(e)}function b(e,t,n){return"string"!=typeof e?n:-1===t.indexOf(e)?n:e}var S=function(){function e(){}return e.getValue=function(){return this._value},e.setValue=function(e){this._value!==e&&(this._value=e,this._onChange.fire(this._value))},e._value=!1,e._onChange=new i.Emitter,e.onChange=e._onChange.event,e}();t.GlobalScreenReaderNVDA=S;var E=function(){function e(e){this._editor=r.clone(u.DefaultConfig.editor),this._mergeOptionsIn(e)}return e.prototype.getEditorOptions=function(){return this._editor},e.prototype._mergeOptionsIn=function(e){this._editor=r.mixin(this._editor,e||{})},e.prototype.updateOptions=function(e){this._mergeOptionsIn(e)},e}();t.ConfigurationWithDefaults=E;var w=function(){function e(){}return e.createInternalEditorOptions=function(e,t,n,i,o,r,s,a,c,u,l){var p,m=g(n.wrappingColumn,-1);p="undefined"!=typeof n.stopLineTokenizationAfter?g(n.stopLineTokenizationAfter,-1):m>=0?-1:1e4;var _;_="undefined"!=typeof n.stopRenderingLineAfter?g(n.stopRenderingLineAfter,-1):m>=0?-1:1e4;var b=v(n.mouseWheelScrollSensitivity,1),S=this._sanitizeScrollbarOpts(n.scrollbar,b),E=f(n.glyphMargin),w=n.lineNumbers,C=g(n.lineNumbersMinChars,1),T=g(n.lineDecorationsWidth,0);n.folding&&(T+=16);var k=h.EditorLayoutProvider.compute({outerWidth:e,outerHeight:t,showGlyphMargin:E,lineHeight:c.lineHeight,showLineNumbers:!!w,lineNumbersMinChars:C,lineDecorationsWidth:T,maxDigitWidth:c.maxDigitWidth,lineCount:l,verticalScrollbarWidth:S.verticalScrollbarSize,horizontalScrollbarHeight:S.horizontalScrollbarSize,scrollbarArrowSize:S.arrowSize,verticalScrollbarHasArrows:S.verticalHasArrows}),x=Math.floor(k.height/c.lineHeight)-2;u&&m>0&&(m=0);var I;I=0===m?{isViewportWrapping:!0,wrappingColumn:Math.max(1,Math.floor((k.contentWidth-k.verticalScrollbarWidth)/c.typicalHalfwidthCharacterWidth))}:m>0?{isViewportWrapping:!1,wrappingColumn:m}:{isViewportWrapping:!1,wrappingColumn:-1};var D=f(n.readOnly),A=f(n.tabFocusMode);return D&&(A=!0),{lineNumbers:w,selectOnLineNumbers:f(n.selectOnLineNumbers),glyphMargin:E,revealHorizontalRightPadding:g(n.revealHorizontalRightPadding,0),roundedSelection:f(n.roundedSelection),theme:n.theme,readOnly:D,scrollbar:S,overviewRulerLanes:g(n.overviewRulerLanes,0,3),cursorBlinking:n.cursorBlinking,experimentalScreenReader:f(n.experimentalScreenReader),rulers:y(n.rulers),wordSeparators:String(n.wordSeparators),selectionClipboard:f(n.selectionClipboard),ariaLabel:String(n.ariaLabel),cursorStyle:d.cursorStyleFromString(n.cursorStyle),fontLigatures:f(n.fontLigatures),hideCursorInOverviewRuler:f(n.hideCursorInOverviewRuler),scrollBeyondLastLine:f(n.scrollBeyondLastLine),wrappingIndent:n.wrappingIndent,wordWrapBreakBeforeCharacters:n.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:n.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:n.wordWrapBreakObtrusiveCharacters,tabFocusMode:A,stopLineTokenizationAfter:p,stopRenderingLineAfter:_,longLineBoundary:g(n.longLineBoundary),forcedTokenizationBoundary:g(n.forcedTokenizationBoundary),hover:f(n.hover),contextmenu:f(n.contextmenu),quickSuggestions:f(n.quickSuggestions),quickSuggestionsDelay:g(n.quickSuggestionsDelay),iconsInSuggestions:f(n.iconsInSuggestions),autoClosingBrackets:f(n.autoClosingBrackets),formatOnType:f(n.formatOnType),suggestOnTriggerCharacters:f(n.suggestOnTriggerCharacters),acceptSuggestionOnEnter:f(n.acceptSuggestionOnEnter),selectionHighlight:f(n.selectionHighlight),outlineMarkers:f(n.outlineMarkers),referenceInfos:f(n.referenceInfos),folding:f(n.folding),renderWhitespace:f(n.renderWhitespace),layoutInfo:k,stylingInfo:{editorClassName:i,fontFamily:o,fontSize:r,lineHeight:a},wrappingInfo:I,observedOuterWidth:e,observedOuterHeight:t,lineHeight:c.lineHeight,pageSize:x,typicalHalfwidthCharacterWidth:c.typicalHalfwidthCharacterWidth,typicalFullwidthCharacterWidth:c.typicalFullwidthCharacterWidth,fontSize:c.fontSize}},e._sanitizeScrollbarOpts=function(e,t){var n=_(e.horizontalScrollbarSize,10),i=_(e.verticalScrollbarSize,14);return{vertical:b(e.vertical,["auto","visible","hidden"],"auto"),horizontal:b(e.horizontal,["auto","visible","hidden"],"auto"),arrowSize:_(e.arrowSize,11),useShadows:m(e.useShadows,!0),verticalHasArrows:m(e.verticalHasArrows,!1),horizontalHasArrows:m(e.horizontalHasArrows,!1),horizontalScrollbarSize:n,horizontalSliderSize:_(e.horizontalSliderSize,n),verticalScrollbarSize:i,verticalSliderSize:_(e.verticalSliderSize,i),handleMouseWheel:m(e.handleMouseWheel,!0),mouseWheelScrollSensitivity:t}},e.createConfigurationChangedEvent=function(e,t){return{experimentalScreenReader:e.experimentalScreenReader!==t.experimentalScreenReader,rulers:!this._numberArraysEqual(e.rulers,t.rulers),wordSeparators:e.wordSeparators!==t.wordSeparators,selectionClipboard:e.selectionClipboard!==t.selectionClipboard,ariaLabel:e.ariaLabel!==t.ariaLabel,lineNumbers:e.lineNumbers!==t.lineNumbers,selectOnLineNumbers:e.selectOnLineNumbers!==t.selectOnLineNumbers,glyphMargin:e.glyphMargin!==t.glyphMargin,revealHorizontalRightPadding:e.revealHorizontalRightPadding!==t.revealHorizontalRightPadding,roundedSelection:e.roundedSelection!==t.roundedSelection,theme:e.theme!==t.theme,readOnly:e.readOnly!==t.readOnly,scrollbar:!this._scrollbarOptsEqual(e.scrollbar,t.scrollbar),overviewRulerLanes:e.overviewRulerLanes!==t.overviewRulerLanes,cursorBlinking:e.cursorBlinking!==t.cursorBlinking,cursorStyle:e.cursorStyle!==t.cursorStyle,fontLigatures:e.fontLigatures!==t.fontLigatures,hideCursorInOverviewRuler:e.hideCursorInOverviewRuler!==t.hideCursorInOverviewRuler,scrollBeyondLastLine:e.scrollBeyondLastLine!==t.scrollBeyondLastLine,wrappingIndent:e.wrappingIndent!==t.wrappingIndent,wordWrapBreakBeforeCharacters:e.wordWrapBreakBeforeCharacters!==t.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:e.wordWrapBreakAfterCharacters!==t.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:e.wordWrapBreakObtrusiveCharacters!==t.wordWrapBreakObtrusiveCharacters,tabFocusMode:e.tabFocusMode!==t.tabFocusMode,stopLineTokenizationAfter:e.stopLineTokenizationAfter!==t.stopLineTokenizationAfter,stopRenderingLineAfter:e.stopRenderingLineAfter!==t.stopRenderingLineAfter,longLineBoundary:e.longLineBoundary!==t.longLineBoundary,forcedTokenizationBoundary:e.forcedTokenizationBoundary!==t.forcedTokenizationBoundary,hover:e.hover!==t.hover,contextmenu:e.contextmenu!==t.contextmenu,quickSuggestions:e.quickSuggestions!==t.quickSuggestions,quickSuggestionsDelay:e.quickSuggestionsDelay!==t.quickSuggestionsDelay,iconsInSuggestions:e.iconsInSuggestions!==t.iconsInSuggestions,autoClosingBrackets:e.autoClosingBrackets!==t.autoClosingBrackets,formatOnType:e.formatOnType!==t.formatOnType,suggestOnTriggerCharacters:e.suggestOnTriggerCharacters!==t.suggestOnTriggerCharacters,selectionHighlight:e.selectionHighlight!==t.selectionHighlight,outlineMarkers:e.outlineMarkers!==t.outlineMarkers,referenceInfos:e.referenceInfos!==t.referenceInfos,folding:e.folding!==t.folding,renderWhitespace:e.renderWhitespace!==t.renderWhitespace,layoutInfo:!h.EditorLayoutProvider.layoutEqual(e.layoutInfo,t.layoutInfo),stylingInfo:!this._stylingInfoEqual(e.stylingInfo,t.stylingInfo),wrappingInfo:!this._wrappingInfoEqual(e.wrappingInfo,t.wrappingInfo),observedOuterWidth:e.observedOuterWidth!==t.observedOuterWidth,observedOuterHeight:e.observedOuterHeight!==t.observedOuterHeight,lineHeight:e.lineHeight!==t.lineHeight,pageSize:e.pageSize!==t.pageSize,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth!==t.typicalHalfwidthCharacterWidth,typicalFullwidthCharacterWidth:e.typicalFullwidthCharacterWidth!==t.typicalFullwidthCharacterWidth,fontSize:e.fontSize!==t.fontSize}},e._scrollbarOptsEqual=function(e,t){return e.arrowSize===t.arrowSize&&e.vertical===t.vertical&&e.horizontal===t.horizontal&&e.useShadows===t.useShadows&&e.verticalHasArrows===t.verticalHasArrows&&e.horizontalHasArrows===t.horizontalHasArrows&&e.handleMouseWheel===t.handleMouseWheel&&e.horizontalScrollbarSize===t.horizontalScrollbarSize&&e.horizontalSliderSize===t.horizontalSliderSize&&e.verticalScrollbarSize===t.verticalScrollbarSize&&e.verticalSliderSize===t.verticalSliderSize&&e.mouseWheelScrollSensitivity===t.mouseWheelScrollSensitivity},e._stylingInfoEqual=function(e,t){return e.editorClassName===t.editorClassName&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.lineHeight===t.lineHeight},e._wrappingInfoEqual=function(e,t){return e.isViewportWrapping===t.isViewportWrapping&&e.wrappingColumn===t.wrappingColumn},e._numberArraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},e}(),C=function(e){function t(t,n){void 0===n&&(n=null),e.call(this),this._onDidChange=this._register(new i.Emitter),this.onDidChange=this._onDidChange.event,this._configWithDefaults=new E(t),this._elementSizeObserver=n,this._isDominatedByLongLines=!1,this._lineCount=1,this.handlerDispatcher=new l.HandlerDispatcher,this.editor=this._computeInternalOptions(),this.editorClone=p(this.editor)}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype._recomputeOptions=function(){var e=this.editor;this.editor=this._computeInternalOptions(),this.editorClone=p(this.editor);var t=w.createConfigurationChangedEvent(e,this.editor),n=!1;for(var i in t)if(t.hasOwnProperty(i)&&t[i]){n=!0;break}n&&this._onDidChange.fire(t)},t.prototype.getRawOptions=function(){return this._configWithDefaults.getEditorOptions()},t.prototype._computeInternalOptions=function(){var e=this._configWithDefaults.getEditorOptions(),t=this._getEditorClassName(e.theme,f(e.fontLigatures)),n=e.fontFamily||"",i=g(e.fontSize,0,100),o=g(e.lineHeight,0,150),r=o;return i>0&&0===o&&(r=Math.round(1.3*i)),w.createInternalEditorOptions(this.getOuterWidth(),this.getOuterHeight(),e,t,n,i,o,r,this.readConfiguration(t,n,i,r),this._isDominatedByLongLines,this._lineCount)},t.prototype.updateOptions=function(e){this._configWithDefaults.updateOptions(e),this._recomputeOptions()},t.prototype.setIsDominatedByLongLines=function(e){this._isDominatedByLongLines=e,this._recomputeOptions()},t.prototype.setLineCount=function(e){this._lineCount=e,this._recomputeOptions()},t}(o.Disposable);t.CommonEditorConfiguration=C;var T=function(){function e(){}return e.apply=function(t,n){if(t){var i=n;Array.isArray(n)||(i=[n]);for(var o=0;o<i.length;o++){var s=i[o];if(s&&"function"==typeof s.updateOptions){var a=s.getEditorType();if(a!==d.EditorType.ICodeEditor&&a!==d.EditorType.IDiffEditor)continue;var c=t[e.EDITOR_SECTION];if(a===d.EditorType.IDiffEditor){var u=t[e.DIFF_EDITOR_SECTION];u&&(c=c?r.mixin(c,u):u)}c&&(delete c.readOnly,s.updateOptions(c))}}}},e.EDITOR_SECTION="editor",e.DIFF_EDITOR_SECTION="diffEditor",e}();t.EditorConfiguration=T;var k=c.Registry.as(a.Extensions.Configuration),x={id:"editor",order:5,type:"object",title:n.localize(0,null),properties:{"editor.fontFamily":{type:"string","default":u.DefaultConfig.editor.fontFamily,description:n.localize(1,null)},"editor.fontSize":{type:"number","default":u.DefaultConfig.editor.fontSize,description:n.localize(2,null)},"editor.lineHeight":{type:"number","default":u.DefaultConfig.editor.lineHeight,description:n.localize(3,null)},"editor.lineNumbers":{type:"boolean","default":u.DefaultConfig.editor.lineNumbers,description:n.localize(4,null)},"editor.glyphMargin":{type:"boolean","default":u.DefaultConfig.editor.glyphMargin,description:n.localize(5,null)},"editor.rulers":{type:"array",items:{type:"number"},"default":u.DefaultConfig.editor.rulers,description:n.localize(6,null)},"editor.wordSeparators":{type:"string","default":u.DefaultConfig.editor.wordSeparators,description:n.localize(7,null)},"editor.tabSize":{type:"number","default":u.DEFAULT_INDENTATION.tabSize,minimum:1,description:n.localize(8,null),errorMessage:n.localize(9,null)},"editor.insertSpaces":{type:"boolean","default":u.DEFAULT_INDENTATION.insertSpaces,description:n.localize(10,null),errorMessage:n.localize(11,null)},"editor.detectIndentation":{type:"boolean","default":u.DEFAULT_INDENTATION.detectIndentation,description:n.localize(12,null)},"editor.roundedSelection":{type:"boolean","default":u.DefaultConfig.editor.roundedSelection,description:n.localize(13,null)},"editor.scrollBeyondLastLine":{type:"boolean","default":u.DefaultConfig.editor.scrollBeyondLastLine,description:n.localize(14,null)},"editor.wrappingColumn":{type:"integer","default":u.DefaultConfig.editor.wrappingColumn,minimum:-1,description:n.localize(15,null)},"editor.wrappingIndent":{type:"string","enum":["none","same","indent"],"default":u.DefaultConfig.editor.wrappingIndent,description:n.localize(16,null)
},"editor.mouseWheelScrollSensitivity":{type:"number","default":u.DefaultConfig.editor.mouseWheelScrollSensitivity,description:n.localize(17,null)},"editor.quickSuggestions":{type:"boolean","default":u.DefaultConfig.editor.quickSuggestions,description:n.localize(18,null)},"editor.quickSuggestionsDelay":{type:"integer","default":u.DefaultConfig.editor.quickSuggestionsDelay,minimum:0,description:n.localize(19,null)},"editor.autoClosingBrackets":{type:"boolean","default":u.DefaultConfig.editor.autoClosingBrackets,description:n.localize(20,null)},"editor.formatOnType":{type:"boolean","default":u.DefaultConfig.editor.formatOnType,description:n.localize(21,null)},"editor.suggestOnTriggerCharacters":{type:"boolean","default":u.DefaultConfig.editor.suggestOnTriggerCharacters,description:n.localize(22,null)},"editor.acceptSuggestionOnEnter":{type:"boolean","default":u.DefaultConfig.editor.acceptSuggestionOnEnter,description:n.localize(23,null)},"editor.selectionHighlight":{type:"boolean","default":u.DefaultConfig.editor.selectionHighlight,description:n.localize(24,null)},"editor.overviewRulerLanes":{type:"integer","default":3,description:n.localize(25,null)},"editor.cursorBlinking":{type:"string","enum":["blink","visible","hidden"],"default":u.DefaultConfig.editor.cursorBlinking,description:n.localize(26,null)},"editor.cursorStyle":{type:"string","enum":["block","line"],"default":u.DefaultConfig.editor.cursorStyle,description:n.localize(27,null)},"editor.fontLigatures":{type:"boolean","default":u.DefaultConfig.editor.fontLigatures,description:n.localize(28,null)},"editor.hideCursorInOverviewRuler":{type:"boolean","default":u.DefaultConfig.editor.hideCursorInOverviewRuler,description:n.localize(29,null)},"editor.renderWhitespace":{type:"boolean","default":u.DefaultConfig.editor.renderWhitespace,description:n.localize(30,null)},"editor.referenceInfos":{type:"boolean","default":u.DefaultConfig.editor.referenceInfos,description:n.localize(31,null)},"editor.folding":{type:"boolean","default":u.DefaultConfig.editor.folding,description:n.localize(32,null)},"diffEditor.renderSideBySide":{type:"boolean","default":!0,description:n.localize(33,null)},"diffEditor.ignoreTrimWhitespace":{type:"boolean","default":!0,description:n.localize(34,null)}}};s.isLinux&&(x.properties["editor.selectionClipboard"]={type:"boolean","default":u.DefaultConfig.editor.selectionClipboard,description:n.localize(35,null)}),k.registerConfiguration(x)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/config/configuration",["require","exports","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/platform","vs/base/browser/browser","vs/base/browser/dom","vs/editor/common/config/commonEditorConfig","vs/editor/browser/config/elementSizeObserver"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(){this._keys={},this._values={}}return e.prototype.has=function(t){return this._values.hasOwnProperty(e._key(t))},e.prototype.get=function(t){return this._values[e._key(t)]},e.prototype.put=function(t,n){this._values[e._key(t)]=n},e.prototype.getKeys=function(){var e=[];for(var t in this._keys)e.push(this._keys[t]);return e},e._key=function(e){return e.editorClassName+"-"+e.fontFamily+"-"+e.fontSize+"-"+e.lineHeight},e}(),l=function(e){function t(){e.call(this),this._changeMonitorTimeout=-1,this._onDidChange=this._register(new n.Emitter),this.onDidChange=this._onDidChange.event,this._cache=new u}return __extends(t,e),t.prototype.dispose=function(){-1!==this._changeMonitorTimeout&&(clearTimeout(this._changeMonitorTimeout),this._changeMonitorTimeout=-1),e.prototype.dispose.call(this)},t.prototype.readConfiguration=function(e,n,i,o){var r={editorClassName:e,fontFamily:n,fontSize:i,lineHeight:o};if(!this._cache.has(r)){var s=t._actualReadConfiguration(r);(s.lineHeight<=2||s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.maxDigitWidth<=2)&&(s.lineHeight=Math.max(s.lineHeight,s.fontSize,5),s.typicalHalfwidthCharacterWidth=Math.max(s.typicalHalfwidthCharacterWidth,s.fontSize,5),s.typicalFullwidthCharacterWidth=Math.max(s.typicalFullwidthCharacterWidth,s.fontSize,5),s.maxDigitWidth=Math.max(s.maxDigitWidth,s.fontSize,5),this._installChangeMonitor()),this._cache.put(r,s)}return this._cache.get(r)},t.prototype._installChangeMonitor=function(){var e=this;-1===this._changeMonitorTimeout&&(this._changeMonitorTimeout=setTimeout(function(){e._changeMonitorTimeout=-1,e._monitorForChanges()},500))},t.prototype._monitorForChanges=function(){for(var e=!1,n=this._cache.getKeys(),i=0;i<n.length;i++){var o=n[i],r=t._actualReadConfiguration(o);r.lineHeight<=2||r.typicalHalfwidthCharacterWidth<=2||r.typicalFullwidthCharacterWidth<=2||r.maxDigitWidth<=2?e=!0:(this._cache.put(o,r),this._onDidChange.fire())}e&&this._installChangeMonitor()},t._testElementId=function(e){return"editorSizeProvider"+e},t._createTestElement=function(e,t){var n=document.createElement("span");n.id=this._testElementId(e);for(var i=" "===t?"&nbsp;":t,o=0;8>o;o++)i+=i;return n.textContent=i,n},t._createTestElements=function(e){var n=document.createElement("div");d.applyEditorStyling(n,e),n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";for(var i=0,o=t._USUAL_CHARS.length;o>i;i++)n.appendChild(document.createElement("br")),n.appendChild(this._createTestElement(i,t._USUAL_CHARS[i]));var r=this._testElementId(t._USUAL_CHARS.length),s=document.createElement("div");return s.id=r,s.appendChild(document.createTextNode("heightTestContent")),n.appendChild(document.createElement("br")),n.appendChild(s),n},t._readFromTestElements=function(){for(var e=[],n=0,i=t._USUAL_CHARS.length;i>n;n++)e.push(document.getElementById(this._testElementId(n)).offsetWidth/256);return e},t._actualReadConfiguration=function(e){var n=this._createTestElements(e);document.body.appendChild(n);var i=this._readFromTestElements(),o=document.getElementById(this._testElementId(0)),r=s.getComputedStyle(o),a=this._getFontFromComputedStyle(r),c=r?parseInt(r.fontSize,10):0,u=document.getElementById(this._testElementId(t._USUAL_CHARS.length)),l=u.clientHeight;document.body.removeChild(n);for(var d=0,h=0,p=0,f=0,m=t._USUAL_CHARS.length;m>f;f++){var v=t._USUAL_CHARS.charAt(f);v>="0"&&"9">=v?d=Math.max(d,i[f]):v===t._HALF_WIDTH_TYPICAL?h=i[f]:v===t._FULL_WIDTH_TYPICAL&&(p=i[f])}return{typicalHalfwidthCharacterWidth:h,typicalFullwidthCharacterWidth:p,maxDigitWidth:d,lineHeight:l,font:a,fontSize:c}},t._getFontFromComputedStyle=function(e){return e?e.font?e.font:e.fontFamily+" "+e.fontSize+" "+e.fontSizeAdjust+" "+e.fontStretch+" "+e.fontStyle+" "+e.fontVariant+" "+e.fontWeight+" ":"unknown"},t.INSTANCE=new t,t._HALF_WIDTH_TYPICAL="n",t._FULL_WIDTH_TYPICAL="ｍ",t._USUAL_CHARS="0123456789"+t._HALF_WIDTH_TYPICAL+t._FULL_WIDTH_TYPICAL,t}(i.Disposable),d=function(e){function t(t,n){var i=this;void 0===n&&(n=null),e.call(this,t,new c.ElementSizeObserver(n,function(){return i._onReferenceDomElementSizeChanged()})),this._register(l.INSTANCE.onDidChange(function(){return function(){return i._onCSSBasedConfigurationChanged()}})),this._configWithDefaults.getEditorOptions().automaticLayout&&this._elementSizeObserver.startObserving()}return __extends(t,e),t.applyEditorStyling=function(e,t){e.className=t.editorClassName,t.fontFamily&&t.fontFamily.length>0?e.style.fontFamily=t.fontFamily:e.style.fontFamily="",t.fontSize>0?e.style.fontSize=t.fontSize+"px":e.style.fontSize="",t.lineHeight>0?e.style.lineHeight=t.lineHeight+"px":e.style.lineHeight=""},t.prototype._onReferenceDomElementSizeChanged=function(){this._recomputeOptions()},t.prototype._onCSSBasedConfigurationChanged=function(){this._recomputeOptions()},t.prototype.observeReferenceElement=function(e){this._elementSizeObserver.observe(e)},t.prototype.dispose=function(){this._elementSizeObserver.dispose(),e.prototype.dispose.call(this)},t.prototype._getEditorClassName=function(e,t){var n="";return r.isIE11orEarlier?n+="ie ":r.isFirefox&&(n+="ff "),r.isIE9&&(n+="ie9 "),o.isMacintosh&&(n+="mac "),t&&(n+="enable-ligatures "),"monaco-editor "+n+e},t.prototype.getOuterWidth=function(){return this._elementSizeObserver.getWidth()},t.prototype.getOuterHeight=function(){return this._elementSizeObserver.getHeight()},t.prototype.readConfiguration=function(e,t,n,i){return l.INSTANCE.readConfiguration(e,t,n,i)},t}(a.CommonEditorConfiguration);t.Configuration=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/keyboardHandler",["require","exports","vs/base/common/event","vs/base/common/lifecycle","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/common/config/commonEditorConfig","vs/editor/common/controller/textAreaHandler","vs/editor/common/controller/textAreaState","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/viewModel/viewEventHandler"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(){function e(e){this._event=e}return e.prototype.canUseTextData=function(){return this._event.clipboardData?!0:!!window.clipboardData},e.prototype.setTextData=function(e){if(this._event.clipboardData)return this._event.clipboardData.setData("text/plain",e),void this._event.preventDefault();if(window.clipboardData)return window.clipboardData.setData("Text",e),void this._event.preventDefault();throw new Error("ClipboardEventWrapper.setTextData: Cannot use text data!")},e.prototype.getTextData=function(){if(this._event.clipboardData)return this._event.preventDefault(),this._event.clipboardData.getData("text/plain");if(window.clipboardData)return this._event.preventDefault(),window.clipboardData.getData("Text");throw new Error("ClipboardEventWrapper.getTextData: Cannot use text data!")},e}(),f=function(){function e(e){this._actual=e}return e.prototype.equals=function(e){return this._actual.equals(e)},e.prototype.preventDefault=function(){this._actual.preventDefault()},e.prototype.isDefaultPrevented=function(){return this._actual.browserEvent?this._actual.browserEvent.defaultPrevented:!1},e}(),m=function(e){function t(t){var i=this;e.call(this),this._onKeyDown=this._register(new n.Emitter),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new n.Emitter),this.onKeyUp=this._onKeyUp.event,this._onKeyPress=this._register(new n.Emitter),this.onKeyPress=this._onKeyPress.event,this._onCompositionStart=this._register(new n.Emitter),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionEnd=this._register(new n.Emitter),this.onCompositionEnd=this._onCompositionEnd.event,this._onInput=this._register(new n.Emitter),this.onInput=this._onInput.event,this._onCut=this._register(new n.Emitter),this.onCut=this._onCut.event,this._onCopy=this._register(new n.Emitter),this.onCopy=this._onCopy.event,this._onPaste=this._register(new n.Emitter),this.onPaste=this._onPaste.event,this._textArea=t,this._register(r.addStandardDisposableListener(this._textArea,"keydown",function(e){return i._onKeyDown.fire(new f(e))})),this._register(r.addStandardDisposableListener(this._textArea,"keyup",function(e){return i._onKeyUp.fire(new f(e))})),this._register(r.addStandardDisposableListener(this._textArea,"keypress",function(e){return i._onKeyPress.fire(new f(e))})),this._register(r.addDisposableListener(this._textArea,"compositionstart",function(e){return i._onCompositionStart.fire()})),this._register(r.addDisposableListener(this._textArea,"compositionend",function(e){return i._onCompositionEnd.fire()})),this._register(r.addDisposableListener(this._textArea,"input",function(e){return i._onInput.fire()})),this._register(r.addDisposableListener(this._textArea,"cut",function(e){return i._onCut.fire(new p(e))})),this._register(r.addDisposableListener(this._textArea,"copy",function(e){return i._onCopy.fire(new p(e))})),this._register(r.addDisposableListener(this._textArea,"paste",function(e){return i._onPaste.fire(new p(e))}))}return __extends(t,e),Object.defineProperty(t.prototype,"actual",{get:function(){return this._textArea},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this._textArea.value},t.prototype.setValue=function(e,t){this._textArea.value=t},t.prototype.getSelectionStart=function(){return this._textArea.selectionStart},t.prototype.getSelectionEnd=function(){return this._textArea.selectionEnd},t.prototype.setSelectionRange=function(e,t){try{var n=r.saveParentsScrollTop(this._textArea);this._textArea.focus(),this._textArea.setSelectionRange(e,t),r.restoreParentsScrollTop(this._textArea,n)}catch(i){console.log("an error has been thrown!")}},t.prototype.isInOverwriteMode=function(){return!(!o.isIE11orEarlier||!document.queryCommandValue("OverWrite"))},t}(i.Disposable),v=function(e){function t(t,n,i){var u=this;e.call(this),this.context=t,this.viewController=n,this.textArea=new m(i.textArea),this.viewHelper=i,this.contentLeft=0,this.contentWidth=0,this.scrollLeft=0,this.textAreaHandler=new c.TextAreaHandler(o,this._getStrategy(),this.textArea,this.context.model,function(){return u.viewHelper.flushAnyAccumulatedEvents()}),this._toDispose=[],this._toDispose.push(this.textAreaHandler.onKeyDown(function(e){return u.viewController.emitKeyDown(e._actual)})),this._toDispose.push(this.textAreaHandler.onKeyUp(function(e){return u.viewController.emitKeyUp(e._actual)})),this._toDispose.push(this.textAreaHandler.onPaste(function(e){return u.viewController.paste("keyboard",e.text,e.pasteOnNewLine)})),this._toDispose.push(this.textAreaHandler.onCut(function(e){return u.viewController.cut("keyboard")})),this._toDispose.push(this.textAreaHandler.onType(function(e){e.replaceCharCnt?u.viewController.replacePreviousChar("keyboard",e.text,e.replaceCharCnt):u.viewController.type("keyboard",e.text)})),this._toDispose.push(this.textAreaHandler.onCompositionStart(function(e){var t=e.showAtLineNumber,n=e.showAtColumn,i={range:new l.Range(t,n,t,n),verticalType:d.VerticalRevealType.Simple,revealHorizontal:!0};u.context.privateViewEventBus.emit(d.ViewEventNames.RevealRangeEvent,i);var a=u.viewHelper.visibleRangeForPositionRelativeToEditor(t,n);a&&(s.StyleMutator.setTop(u.textArea.actual,a.top),s.StyleMutator.setLeft(u.textArea.actual,u.contentLeft+a.left-u.scrollLeft)),o.isIE11orEarlier&&s.StyleMutator.setWidth(u.textArea.actual,u.contentWidth),s.StyleMutator.setHeight(u.textArea.actual,u.context.configuration.editor.lineHeight),r.addClass(u.viewHelper.viewDomNode,"ime-input")})),this._toDispose.push(this.textAreaHandler.onCompositionEnd(function(e){u.textArea.actual.style.height="",u.textArea.actual.style.width="",s.StyleMutator.setLeft(u.textArea.actual,0),s.StyleMutator.setTop(u.textArea.actual,0),r.removeClass(u.viewHelper.viewDomNode,"ime-input")})),this._toDispose.push(a.GlobalScreenReaderNVDA.onChange(function(e){u.textAreaHandler.setStrategy(u._getStrategy())})),this.context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.context.removeEventHandler(this),this.textAreaHandler.dispose(),this.textArea.dispose(),this._toDispose=i.disposeAll(this._toDispose)},t.prototype._getStrategy=function(){return a.GlobalScreenReaderNVDA.getValue()?u.TextAreaStrategy.NVDA:this.context.configuration.editor.experimentalScreenReader?u.TextAreaStrategy.NVDA:u.TextAreaStrategy.IENarrator},t.prototype.focusTextArea=function(){this.textAreaHandler.writePlaceholderAndSelectTextAreaSync()},t.prototype.onConfigurationChanged=function(e){return s.StyleMutator.setFontSize(this.textArea.actual,this.context.configuration.editor.fontSize),s.StyleMutator.setLineHeight(this.textArea.actual,this.context.configuration.editor.lineHeight),e.experimentalScreenReader&&this.textAreaHandler.setStrategy(this._getStrategy()),!1},t.prototype.onScrollChanged=function(e){return this.scrollLeft=e.scrollLeft,!1},t.prototype.onViewFocusChanged=function(e){return this.textAreaHandler.setHasFocus(e),!1},t.prototype.onCursorSelectionChanged=function(e){return this.textAreaHandler.setCursorSelections(e.selection,e.secondarySelections),!1},t.prototype.onCursorPositionChanged=function(e){return this.textAreaHandler.setCursorPosition(e.position),!1},t.prototype.onLayoutChanged=function(e){return this.contentLeft=e.contentLeft,this.contentWidth=e.contentWidth,!1},t}(h.ViewEventHandler);t.KeyboardHandler=v}),define("vs/languages/css/common/css.contribution",["require","exports","vs/nls!vs/languages/css/common/css.contribution","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/languages/css/common/services/lintRules","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,o,r,s){"use strict";o.ModesRegistry.registerCompatMode({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],moduleId:"vs/languages/css/common/css",ctorName:"CSSMode"});var a=i.Registry.as(r.Extensions.Configuration);a.registerConfiguration({id:"css",order:20,title:n.localize(0,null),allOf:[{title:n.localize(1,null),properties:s.getConfigurationProperties("css")}]})}),define("vs/languages/html/common/html.contribution",["require","exports","vs/editor/common/modes/modesRegistry","vs/nls!vs/languages/html/common/html.contribution","vs/platform/platform","vs/platform/configuration/common/configurationRegistry"],function(e,t,n,i,o,r){"use strict";n.ModesRegistry.registerCompatMode({id:"html",extensions:[".html",".htm",".shtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],moduleId:"vs/languages/html/common/html",ctorName:"HTMLMode"});var s=o.Registry.as(r.Extensions.Configuration);s.registerConfiguration({id:"html",order:20,type:"object",title:i.localize(0,null),properties:{"html.format.wrapLineLength":{type:"integer","default":120,description:i.localize(1,null)},"html.format.unformatted":{type:["string","null"],"default":null,description:i.localize(2,null)},"html.format.indentInnerHtml":{type:"boolean","default":!1,description:i.localize(3,null)},"html.format.preserveNewLines":{type:"boolean","default":!0,description:i.localize(4,null)},"html.format.maxPreserveNewLines":{type:["number","null"],"default":null,description:i.localize(5,null)},"html.format.indentHandlebars":{type:"boolean","default":!1,description:i.localize(6,null)},"html.format.endWithNewline":{type:"boolean","default":!1,description:i.localize(7,null)},"html.format.extraLiners":{type:["string","null"],"default":null,description:i.localize(8,null)}}})}),define("vs/languages/less/common/less.contribution",["require","exports","vs/platform/platform","vs/nls!vs/languages/less/common/less.contribution","vs/languages/css/common/services/lintRules","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,o,r,s){"use strict";r.ModesRegistry.registerCompatMode({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],moduleId:"vs/languages/less/common/less",ctorName:"LESSMode"});var a=n.Registry.as(s.Extensions.Configuration);a.registerConfiguration({id:"less",order:22,type:"object",title:i.localize(0,null),allOf:[{title:i.localize(1,null),properties:o.getConfigurationProperties("less")}]})}),define("vs/languages/markdown/common/markdown.contribution",["require","exports","vs/nls!vs/languages/markdown/common/markdown.contribution","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/platform/platform"],function(e,t,n,i,o,r){"use strict";i.ModesRegistry.registerCompatMode({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],mimetypes:["text/x-web-markdown"],moduleId:"vs/languages/markdown/common/markdown",ctorName:"MarkdownMode"});var s=r.Registry.as(o.Extensions.Configuration);s.registerConfiguration({id:"markdown",order:20,type:"object",title:n.localize(0,null),properties:{"markdown.styles":{type:"array",description:n.localize(1,null),items:{type:"string"}}}})}),define("vs/languages/sass/common/sass.contribution",["require","exports","vs/editor/common/modes/modesRegistry","vs/platform/platform","vs/nls!vs/languages/sass/common/sass.contribution","vs/languages/css/common/services/lintRules","vs/platform/configuration/common/configurationRegistry","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,o,r,s){"use strict";n.ModesRegistry.registerCompatMode({id:"sass",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],moduleId:"vs/languages/sass/common/sass",ctorName:"SASSMode"});var a=i.Registry.as(s.Extensions.Configuration);a.registerConfiguration({id:"sass",order:24,title:o.localize(0,null),allOf:[{title:o.localize(1,null),properties:r.getConfigurationProperties("sass")}]})}),define("vs/languages/languages.main",["require","exports","vs/languages/css/common/css.contribution","vs/languages/handlebars/common/handlebars.contribution","vs/languages/html/common/html.contribution","vs/languages/markdown/common/markdown.contribution","vs/languages/php/common/php.contribution","vs/languages/razor/common/razor.contribution","vs/languages/less/common/less.contribution","vs/languages/sass/common/sass.contribution"],function(e,t){"use strict"}),define("vs/platform/configuration/common/model",["require","exports","vs/base/common/objects","vs/platform/platform","vs/base/common/types","vs/base/common/json","./configurationRegistry"],function(e,t,n,i,o,r,s){"use strict";function a(e,t,n){var i=t.split("."),o=i.pop(),r=e;i.forEach(function(e){var n=r[e];switch(typeof n){case"undefined":n=r[e]=Object.create(null);break;case"object":break;default:console.log("Conflicting configuration setting: "+t+" at "+e+" with "+JSON.stringify(n))}r=n}),r[o]=n}function c(e){try{var t=Object.create(null),n=r.parse(e)||{};for(var i in n)a(t,i,n[i]);return{contents:t}}catch(o){return{contents:{},parseError:o}}}function u(e,t,n){Object.keys(t).forEach(function(i){i in e?o.isObject(e[i])&&o.isObject(t[i])?u(e[i],t[i],n):n&&(e[i]=t[i]):e[i]=t[i]})}function l(e){var i=Object.create(null),o=[],r=/\/(team\.)?([^\.]*)*\.json/;return Object.keys(e).forEach(function(s){var a=n.clone(e[s]),c=r.exec(s);if(c){var l=!!c[1],d=i;if(c&&c[2]&&c[2]!==t.CONFIG_DEFAULT_NAME){var h=c[2],p=d[h];p||(p=Object.create(null),d[h]=p),d=p}u(d,a.contents,!l),a.parseError&&o.push(s)}}),{contents:i,parseErrors:o}}function d(e){var t=i.Registry.as(s.Extensions.Configuration).getConfigurations(),n=function(t,i){e(t,i),Array.isArray(t.allOf)&&t.allOf.forEach(function(e){n(e,!1)})};t.sort(function(e,t){return"number"!=typeof e.order?1:"number"!=typeof t.order?-1:e.order-t.order}).forEach(function(e){n(e,!0)})}function h(){var e=Object.create(null),t=function(t,n){t.properties&&Object.keys(t.properties).forEach(function(n){var i=t.properties[n],r=i["default"];o.isUndefined(i["default"])&&(r=m(i.type)),a(e,n,r)})};return d(t),e}function p(){var e=-1,t=[];t.push("{");var n=function(n,i){n.title&&(i?(t.push(""),t.push("	//-------- "+n.title+" --------")):t.push("	// "+n.title),t.push("")),n.properties&&Object.keys(n.properties).forEach(function(i){var r=n.properties[i],s=r["default"];o.isUndefined(s)&&(s=m(r.type)),r.description&&t.push("	// "+r.description);var a=JSON.stringify(s,null,"	");a&&"object"==typeof s&&(a=f(a)),-1!==e&&(t[e]+=","),e=t.length,t.push("	"+JSON.stringify(i)+": "+a),t.push("")})};return d(n),t.push("}"),t.join("\n")}function f(e){return e.split("\n").join("\n	")}function m(e){var t=Array.isArray(e)?e[0]:e;switch(t){case"boolean":return!1;case"integer":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}t.CONFIG_DEFAULT_NAME="settings",t.newConfigFile=c,t.merge=u,t.consolidate=l,t.getDefaultValues=h,t.getDefaultValuesContent=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/configuration/common/configurationService",["require","exports","vs/base/common/paths","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/objects","vs/base/common/errors","./model","vs/base/common/lifecycle","vs/base/common/collections","./configuration","vs/platform/files/common/files","./configurationRegistry","vs/platform/platform","vs/base/common/event"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(t,n,i){var o=this;void 0===i&&(i=".vscode"),e.call(this),this.serviceId=l.IConfigurationService,this.contextService=t,this.eventService=n,this.workspaceSettingsRootFolder=i,this.workspaceFilePathToConfiguration=Object.create(null);var r=this.eventService.addListener(d.EventType.FILE_CHANGES,function(e){return o.handleFileEvents(e)}),s=p.Registry.as(h.Extensions.Configuration).onDidRegisterConfiguration(function(){return o.reloadAndEmit()});this.callOnDispose=function(){r(),s.dispose()},this.onDidUpdateConfiguration=f.fromEventEmitter(this,l.ConfigurationServiceEventTypes.UPDATED)}return __extends(t,e),t.prototype.dispose=function(){this.callOnDispose=c.cAll(this.callOnDispose),e.prototype.dispose.call(this)},t.prototype.loadConfiguration=function(e){return this.loadConfigurationPromise||(this.loadConfigurationPromise=this.doLoadConfiguration()),this.loadConfigurationPromise.then(function(t){var n=e?t.merged[e]:t.merged,i=t.consolidated.parseErrors;return t.globals.parseErrors&&i.push.apply(i,t.globals.parseErrors),i.length>0&&(n||(n={}),n.$parseErrors=i),n})},t.prototype.doLoadConfiguration=function(){var e=this;return this.loadGlobalConfiguration().then(function(t){return e.loadWorkspaceConfiguration().then(function(e){var n=a.consolidate(e),i=r.mixin(r.clone(t.contents),n.contents,!0);return{merged:i,consolidated:n,globals:t}})})},t.prototype.loadGlobalConfiguration=function(){return i.TPromise.as({contents:a.getDefaultValues()})},t.prototype.hasWorkspaceConfiguration=function(){return!!this.workspaceFilePathToConfiguration[".vscode/"+a.CONFIG_DEFAULT_NAME+".json"]},t.prototype.loadWorkspaceConfiguration=function(e){var t=this;return this.bulkFetchFromWorkspacePromise||(this.bulkFetchFromWorkspacePromise=this.resolveStat(this.contextService.toResource(this.workspaceSettingsRootFolder)).then(function(e){return e.isDirectory?t.resolveContents(e.children.filter(function(e){return".json"===n.extname(e.resource.fsPath)}).map(function(e){return e.resource})):i.TPromise.as([])},function(e){return e?[]:void 0}).then(function(e){e.forEach(function(e){return t.workspaceFilePathToConfiguration[t.contextService.toWorkspaceRelativePath(e.resource)]=i.TPromise.as(a.newConfigFile(e.value))})},s.onUnexpectedError)),this.bulkFetchFromWorkspacePromise.then(function(){return i.TPromise.join(t.workspaceFilePathToConfiguration)})},t.prototype.reloadAndEmit=function(){var e=this;return this.reloadConfiguration().then(function(t){return e.emit(l.ConfigurationServiceEventTypes.UPDATED,{config:t})})},t.prototype.reloadConfiguration=function(e){return this.loadConfigurationPromise=null,this.loadConfiguration(e)},t.prototype.handleFileEvents=function(e){for(var t=e.changes,i=!1,o=0,r=t.length;r>o;o++){var c=this.contextService.toWorkspaceRelativePath(t[o].resource);if(c&&(c===this.workspaceSettingsRootFolder&&t[o].type===d.FileChangeType.DELETED&&(this.workspaceFilePathToConfiguration=Object.create(null),i=!0),".json"===n.extname(c)&&n.isEqualOrParent(c,this.workspaceSettingsRootFolder)))switch(t[o].type){case d.FileChangeType.DELETED:i=u.remove(this.workspaceFilePathToConfiguration,c);break;case d.FileChangeType.UPDATED:case d.FileChangeType.ADDED:this.workspaceFilePathToConfiguration[c]=this.resolveContent(t[o].resource).then(function(e){return a.newConfigFile(e.value)},s.onUnexpectedError),i=!0}}i&&this.reloadAndEmit()},t}(o.EventEmitter);t.ConfigurationService=m}),define("vs/platform/extensions/common/abstractExtensionService",["require","exports","vs/nls!vs/platform/extensions/common/abstractExtensionService","vs/base/common/severity","vs/base/common/winjs.base","vs/platform/extensions/common/extensions","vs/platform/extensions/common/extensionsRegistry"],function(e,t,n,i,o,r,s){"use strict";var a=Object.hasOwnProperty,c=function(){function e(e){this.activationFailed=e}return e}();t.ActivatedExtension=c;var u=function(){function e(e){var t=this;this.serviceId=r.IExtensionService,e?(this._onReady=o.TPromise.as(!0),this._onReadyC=function(e){}):this._onReady=new o.TPromise(function(e,n,i){t._onReadyC=e},function(){console.warn("You should really not try to cancel this ready promise!")}),this._activatingExtensions={},this._activatedExtensions={}}return e.prototype._triggerOnReady=function(){this._onReadyC(!0)},e.prototype.onReady=function(){return this._onReady},e.prototype.getExtensionsStatus=function(){return null},e.prototype.isActivated=function(e){return a.call(this._activatedExtensions,e)},e.prototype.activateByEvent=function(e){var t=this;return this._onReady.then(function(){s.ExtensionsRegistry.triggerActivationEventListeners(e);var n=s.ExtensionsRegistry.getExtensionDescriptionsForActivationEvent(e);return t._activateExtensions(n,0)})},e.prototype.activateById=function(e){var t=this;return this._onReady.then(function(){var n=s.ExtensionsRegistry.getExtensionDescription(e);if(!n)throw new Error("Extension `"+e+"` is not known");return t._activateExtensions([n],0)})},e.prototype._handleActivateRequest=function(e,t,o){for(var r="undefined"==typeof e.extensionDependencies?[]:e.extensionDependencies,c=!0,u=0,l=r.length;l>u;u++){var d=r[u],h=s.ExtensionsRegistry.getExtensionDescription(d);if(!h)return this._showMessage(i["default"].Error,n.localize(0,null,d,e.id)),void(this._activatedExtensions[e.id]=this._createFailedExtension());if(a.call(this._activatedExtensions,d)){var p=this._activatedExtensions[d];if(p.activationFailed)return this._showMessage(i["default"].Error,n.localize(1,null,d,e.id)),void(this._activatedExtensions[e.id]=this._createFailedExtension())}else c=!1,t[d]=h}c?t[e.id]=e:o.push(e)},e.prototype._activateExtensions=function(e,t){var r=this;if(0===e.length)return o.TPromise.as(void 0);if(e=e.filter(function(e){return!a.call(r._activatedExtensions,e.id)}),0===e.length)return o.TPromise.as(void 0);if(t>10){for(var s=0,c=e.length;c>s;s++)this._showMessage(i["default"].Error,n.localize(2,null,e[s].id)),this._activatedExtensions[e[s].id]=this._createFailedExtension();return o.TPromise.as(void 0)}for(var u=Object.create(null),l=[],s=0,c=e.length;c>s;s++)this._handleActivateRequest(e[s],u,l);for(var s=0,c=l.length;c>s;s++)u[l[s].id]&&delete u[l[s].id];var d=Object.keys(u).map(function(e){return u[e]});return 0===l.length?o.TPromise.join(d.map(function(e){return r._activateExtension(e)})).then(function(e){}):this._activateExtensions(d,t+1).then(function(e){return r._activateExtensions(l,t+1)})},e.prototype._activateExtension=function(e){var t=this;return a.call(this._activatedExtensions,e.id)?o.TPromise.as(void 0):a.call(this._activatingExtensions,e.id)?this._activatingExtensions[e.id]:(this._activatingExtensions[e.id]=this._actualActivateExtension(e).then(null,function(o){return t._showMessage(i["default"].Error,n.localize(3,null,e.id,o.message)),console.error("Activating extension `"+e.id+"` failed: ",o.message),console.log("Here is the error stack: ",o.stack),t._createFailedExtension()}).then(function(n){t._activatedExtensions[e.id]=n,delete t._activatingExtensions[e.id]}),this._activatingExtensions[e.id])},e}();t.AbstractExtensionService=u}),define("vs/platform/extensions/node/extensionValidator",["require","exports","vs/nls!vs/platform/extensions/node/extensionValidator","vs/platform/extensions/common/extensionsRegistry","semver"],function(e,t,n,i,o){
"use strict";function r(e){return e=e.trim(),"*"===e||d.test(e)}function s(e){if(!r(e))return null;if(e=e.trim(),"*"===e)return{hasCaret:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};var t=e.match(d);return{hasCaret:!!t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}}function a(e){if(!e)return null;var t=e.majorBase,n=e.majorMustEqual,i=e.minorBase,o=e.minorMustEqual,r=e.patchBase,s=e.patchMustEqual;return e.hasCaret&&(0===t?s=!1:(o=!1,s=!1)),{majorBase:t,majorMustEqual:n,minorBase:i,minorMustEqual:o,patchBase:r,patchMustEqual:s}}function c(e,t){var n;n="string"==typeof e?a(s(e)):e;var i;if(i="string"==typeof t?a(s(t)):t,!n||!i)return!1;var o=n.majorBase,r=n.minorBase,c=n.patchBase,u=i.majorBase,l=i.minorBase,d=i.patchBase,h=i.majorMustEqual,p=i.minorMustEqual,f=i.patchMustEqual;return 1!==o||0!==u||h&&p&&f||(u=1,l=0,d=0,h=!0,p=!1,f=!1),u>o?!1:o>u?!h:l>r?!1:r>l?!p:d>c?!1:c>d?!f:!0}function u(e,t,i){if(t.isBuiltin||"undefined"==typeof t.main)return!0;var o=a(s(t.engines.vscode));if(!o)return i.push(n.localize(0,null,t.engines.vscode)),!1;if(0===o.majorBase){if(!o.majorMustEqual||!o.minorMustEqual)return i.push(n.localize(1,null,t.engines.vscode)),!1}else if(!o.majorMustEqual)return i.push(n.localize(2,null,t.engines.vscode)),!1;return c(e,o)?!0:(i.push(n.localize(3,null,e,t.engines.vscode)),!1)}function l(e,t,r,s){return i.isValidExtensionDescription(t,r,s)?o.valid(r.version)?u(e,r,s):(s.push(n.localize(4,null)),!1):!1}var d=/^(\^)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/;t.isValidVersionStr=r,t.parseVersion=s,t.normalizeVersion=a,t.isValidVersion=c,t.isValidExtensionVersion=u,t.isValidExtensionDescription=l}),define("vs/platform/jsonschemas/common/jsonValidationExtensionPoint",["require","exports","vs/nls!vs/platform/jsonschemas/common/jsonValidationExtensionPoint","vs/platform/extensions/common/extensionsRegistry","vs/platform/platform","vs/base/common/uri","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/base/common/strings","vs/base/common/paths"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=o.Registry.as(s.Extensions.JSONContribution),l=i.ExtensionsRegistry.registerExtensionPoint("jsonValidation",{description:n.localize(0,null),type:"array",defaultSnippets:[{body:[{fileMatch:"{{file.json}}",url:"{{url}}"}]}],items:{type:"object",defaultSnippets:[{body:{fileMatch:"{{file.json}}",url:"{{url}}"}}],properties:{fileMatch:{type:"string",description:n.localize(1,null)},url:{description:n.localize(2,null),type:"string"}}}}),d=function(){function e(){l.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t].value,o=e[t].collector,s=e[t].description.extensionFolderPath;if(!i||!Array.isArray(i))return void o.error(n.localize(3,null));i.forEach(function(e){if("string"!=typeof e.fileMatch)return void o.error(n.localize(4,null));var t=e.url;if("string"!=typeof e.url)return void o.error(n.localize(5,null));if(a.startsWith(t,"./"))try{t=r["default"].file(c.normalize(c.join(s,t))).toString()}catch(i){o.error(n.localize(6,null,i.message))}else if(!a.startsWith(t,"https:/")&&a.startsWith(t,"https:/"))return void o.error(n.localize(7,null));var l=e.fileMatch;a.startsWith(e.fileMatch,"/")||(l="/"+l),u.addSchemaFileAssociation(l,t)})}})}return e}();t.JSONValidationExtensionPoint=d}),define("vs/platform/keybinding/common/keybindingsRegistry",["require","exports","vs/base/common/keyCodes","vs/base/common/platform","vs/base/common/types","vs/platform/platform"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(){this.WEIGHT={editorCore:function(e){return void 0===e&&(e=0),0+e},editorContrib:function(e){return void 0===e&&(e=0),100+e},workbenchContrib:function(e){return void 0===e&&(e=0),200+e},builtinExtension:function(e){return void 0===e&&(e=0),300+e},externalExtension:function(e){return void 0===e&&(e=0),400+e}},this._keybindings=[],this._commands=Object.create(null)}return e.bindToCurrentPlatform=function(e){if(i.isWindows){if(e&&e.win)return e.win}else if(i.isMacintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e},e.prototype.registerCommandRule=function(t){var n=this,i=e.bindToCurrentPlatform(t);i&&i.primary&&this.registerDefaultKeybinding(i.primary,t.id,t.weight,0,t.context),i&&Array.isArray(i.secondary)&&i.secondary.forEach(function(e,i){return n.registerDefaultKeybinding(e,t.id,t.weight,-i-1,t.context)})},e.prototype.registerCommandDesc=function(e){this.registerCommandRule(e);var t=e.handler,n=e.description||t.description;if("object"==typeof n){for(var i=[],r=0,s=n.args;r<s.length;r++){var a=s[r];i.push(a.constraint)}t=function(t,n){return o.validateConstraints(n,i),e.handler(t,n)}}t.description=n,this._commands[e.id]=t},e.prototype.getCommands=function(){return this._commands},e.prototype.registerDefaultKeybinding=function(e,t,o,r,s){i.isWindows&&n.BinaryKeybindings.hasCtrlCmd(e)&&!n.BinaryKeybindings.hasShift(e)&&n.BinaryKeybindings.hasAlt(e)&&!n.BinaryKeybindings.hasWinCtrl(e)&&/^[A-Z0-9\[\]\|\;\'\,\.\/\`]$/.test(n.KeyCode.toString(n.BinaryKeybindings.extractKeyCode(e)))&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t),this._keybindings.push({keybinding:e,command:t,context:s,weight1:o,weight2:r})},e.prototype.getDefaultKeybindings=function(){return this._keybindings},e}();t.KeybindingsRegistry=new s,t.Extensions={EditorModes:"platform.keybindingsRegistry"},r.Registry.add(t.Extensions.EditorModes,t.KeybindingsRegistry)}),define("vs/editor/common/config/config",["require","exports","vs/base/common/keyCodes","vs/platform/editor/common/editor","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/editorCommon","vs/editor/common/services/codeEditorService"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,t,n,i){var o=t.get(a.ICodeEditorService),r=n.context.editorId;if(!r)return i&&console.warn("Cannot execute "+e+" because no editor is focused."),null;var s=o.getCodeEditor(r);return s?s:(i&&console.warn("Cannot execute "+e+" because editor `"+r+"` could not be found."),null)}function u(e,t,n,i){var o=c(e,t,n,!0);o&&i(o)}function l(e){var t=e.get(i.IEditorService),n=t.getActiveEditor&&t.getActiveEditor();if(n){var o=n.getControl();if(o&&"function"==typeof o.getEditorType){var r=o;return r}}return null}function d(e,t,n){u(e,t,n,function(t){t.trigger("keyboard",e,n)})}function h(e,t,n,i){void 0===n&&(n=r.KeybindingsRegistry.WEIGHT.editorCore());var a={id:e,handler:d.bind(null,e),weight:n,context:i?i:o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),primary:t.primary,secondary:t.secondary,win:t.win,mac:t.mac,linux:t.linux};r.KeybindingsRegistry.registerCommandDesc(a)}function p(e){var t={id:e,handler:d.bind(null,e),weight:r.KeybindingsRegistry.WEIGHT.editorCore(),context:null,primary:0};r.KeybindingsRegistry.registerCommandDesc(t);var n={id:"default:"+e,handler:function(t,n){u(e,t,n,function(t){t.trigger("keyboard",e,n[0])})},weight:r.KeybindingsRegistry.WEIGHT.editorCore(),context:null,primary:0};r.KeybindingsRegistry.registerCommandDesc(n)}function f(e,t){return e?n.KeyMod.Shift|n.KeyMod.Alt|t:n.KeyMod.Alt|t}function m(e,t){return e?n.KeyMod.CtrlCmd|n.KeyMod.Shift|t:n.KeyMod.CtrlCmd|t}function v(e,t,n){h(e,{primary:m(t,n),mac:{primary:f(t,n)}})}function g(e,t){var n=s.Handler.SelectAll;if(t.context[s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS]){var i=c(n,e,t,!1);if(i)return void i.trigger("keyboard",n,t)}var o=document.activeElement;if(o&&["input","textarea"].indexOf(o.tagName.toLowerCase())>=0)return void o.select();var r=l(e);return r?void r.trigger("keyboard",n,t):void 0}var y=s.Handler;t.findFocusedEditor=c,t.withCodeEditorFromCommandHandler=u,t.getActiveEditor=l,p(y.Type),p(y.ReplacePreviousChar),p(y.Paste),p(y.Cut),h(y.CursorLeft,{primary:n.KeyCode.LeftArrow,mac:{primary:n.KeyCode.LeftArrow,secondary:[n.KeyMod.WinCtrl|n.KeyCode.KEY_B]}}),h(y.CursorLeftSelect,{primary:n.KeyMod.Shift|n.KeyCode.LeftArrow}),h(y.CursorRight,{primary:n.KeyCode.RightArrow,mac:{primary:n.KeyCode.RightArrow,secondary:[n.KeyMod.WinCtrl|n.KeyCode.KEY_F]}}),h(y.CursorRightSelect,{primary:n.KeyMod.Shift|n.KeyCode.RightArrow}),h(y.CursorUp,{primary:n.KeyCode.UpArrow,mac:{primary:n.KeyCode.UpArrow,secondary:[n.KeyMod.WinCtrl|n.KeyCode.KEY_P]}}),h(y.CursorUpSelect,{primary:n.KeyMod.Shift|n.KeyCode.UpArrow,secondary:[m(!0,n.KeyCode.UpArrow)],mac:{primary:n.KeyMod.Shift|n.KeyCode.UpArrow},linux:{primary:n.KeyMod.Shift|n.KeyCode.UpArrow}}),h(y.CursorDown,{primary:n.KeyCode.DownArrow,mac:{primary:n.KeyCode.DownArrow,secondary:[n.KeyMod.WinCtrl|n.KeyCode.KEY_N]}}),h(y.CursorDownSelect,{primary:n.KeyMod.Shift|n.KeyCode.DownArrow,secondary:[m(!0,n.KeyCode.DownArrow)],mac:{primary:n.KeyMod.Shift|n.KeyCode.DownArrow},linux:{primary:n.KeyMod.Shift|n.KeyCode.DownArrow}}),h(y.CursorPageUp,{primary:n.KeyCode.PageUp}),h(y.CursorPageUpSelect,{primary:n.KeyMod.Shift|n.KeyCode.PageUp}),h(y.CursorPageDown,{primary:n.KeyCode.PageDown}),h(y.CursorPageDownSelect,{primary:n.KeyMod.Shift|n.KeyCode.PageDown}),h(y.CursorHome,{primary:n.KeyCode.Home,mac:{primary:n.KeyCode.Home,secondary:[n.KeyMod.CtrlCmd|n.KeyCode.LeftArrow,n.KeyMod.WinCtrl|n.KeyCode.KEY_A]}}),h(y.CursorHomeSelect,{primary:n.KeyMod.Shift|n.KeyCode.Home,mac:{primary:n.KeyMod.Shift|n.KeyCode.Home,secondary:[n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.LeftArrow]}}),h(y.CursorEnd,{primary:n.KeyCode.End,mac:{primary:n.KeyCode.End,secondary:[n.KeyMod.CtrlCmd|n.KeyCode.RightArrow,n.KeyMod.WinCtrl|n.KeyCode.KEY_E]}}),h(y.CursorEndSelect,{primary:n.KeyMod.Shift|n.KeyCode.End,mac:{primary:n.KeyMod.Shift|n.KeyCode.End,secondary:[n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.RightArrow]}}),h(y.ExpandLineSelection,{primary:n.KeyMod.CtrlCmd|n.KeyCode.KEY_I}),h(y.ScrollLineUp,{primary:n.KeyMod.CtrlCmd|n.KeyCode.UpArrow,mac:{primary:n.KeyMod.WinCtrl|n.KeyCode.PageUp}}),h(y.ScrollLineDown,{primary:n.KeyMod.CtrlCmd|n.KeyCode.DownArrow,mac:{primary:n.KeyMod.WinCtrl|n.KeyCode.PageDown}}),h(y.ScrollPageUp,{primary:n.KeyMod.CtrlCmd|n.KeyCode.PageUp}),h(y.ScrollPageDown,{primary:n.KeyMod.CtrlCmd|n.KeyCode.PageDown}),h(y.CursorColumnSelectLeft,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.LeftArrow,linux:{primary:0}}),h(y.CursorColumnSelectRight,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.RightArrow,linux:{primary:0}}),h(y.CursorColumnSelectUp,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.UpArrow,linux:{primary:0}}),h(y.CursorColumnSelectPageUp,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.PageUp,linux:{primary:0}}),h(y.CursorColumnSelectDown,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.DownArrow,linux:{primary:0}}),h(y.CursorColumnSelectPageDown,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyMod.Alt|n.KeyCode.PageDown,linux:{primary:0}}),h(y.Tab,{primary:n.KeyCode.Tab},r.KeybindingsRegistry.WEIGHT.editorCore(),o.KbExpr.and(o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),o.KbExpr.not(s.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS))),h(y.Outdent,{primary:n.KeyMod.Shift|n.KeyCode.Tab},r.KeybindingsRegistry.WEIGHT.editorCore(),o.KbExpr.and(o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),o.KbExpr.not(s.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS))),h(y.DeleteLeft,{primary:n.KeyCode.Backspace,secondary:[n.KeyMod.Shift|n.KeyCode.Backspace],mac:{primary:n.KeyCode.Backspace,secondary:[n.KeyMod.Shift|n.KeyCode.Backspace,n.KeyMod.WinCtrl|n.KeyCode.KEY_H,n.KeyMod.WinCtrl|n.KeyCode.Backspace]}}),h(y.DeleteRight,{primary:n.KeyCode.Delete,mac:{primary:n.KeyCode.Delete,secondary:[n.KeyMod.WinCtrl|n.KeyCode.KEY_D,n.KeyMod.WinCtrl|n.KeyCode.Delete]}}),h(y.DeleteAllLeft,{primary:null,mac:{primary:n.KeyMod.CtrlCmd|n.KeyCode.Backspace}}),h(y.DeleteAllRight,{primary:null,mac:{primary:n.KeyMod.WinCtrl|n.KeyCode.KEY_K,secondary:[n.KeyMod.CtrlCmd|n.KeyCode.Delete]}}),v(y.CursorWordStartLeft,!1,n.KeyCode.LeftArrow),h(y.CursorWordEndLeft,{primary:0}),h(y.CursorWordLeft,{primary:0}),v(y.CursorWordStartLeftSelect,!0,n.KeyCode.LeftArrow),h(y.CursorWordEndLeftSelect,{primary:0}),h(y.CursorWordLeftSelect,{primary:0}),v(y.CursorWordEndRight,!1,n.KeyCode.RightArrow),h(y.CursorWordStartRight,{primary:0}),h(y.CursorWordRight,{primary:0}),v(y.CursorWordEndRightSelect,!0,n.KeyCode.RightArrow),h(y.CursorWordStartRightSelect,{primary:0}),h(y.CursorWordRightSelect,{primary:0}),v(y.DeleteWordLeft,!1,n.KeyCode.Backspace),h(y.DeleteWordStartLeft,{primary:0}),h(y.DeleteWordEndLeft,{primary:0}),v(y.DeleteWordRight,!1,n.KeyCode.Delete),h(y.DeleteWordStartRight,{primary:0}),h(y.DeleteWordEndRight,{primary:0}),h(y.CancelSelection,{primary:n.KeyCode.Escape,secondary:[n.KeyMod.Shift|n.KeyCode.Escape]},r.KeybindingsRegistry.WEIGHT.editorCore(),o.KbExpr.and(o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION))),h(y.RemoveSecondaryCursors,{primary:n.KeyCode.Escape,secondary:[n.KeyMod.Shift|n.KeyCode.Escape]},r.KeybindingsRegistry.WEIGHT.editorCore(1),o.KbExpr.and(o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),o.KbExpr.has(s.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS))),h(y.CursorTop,{primary:n.KeyMod.CtrlCmd|n.KeyCode.Home,mac:{primary:n.KeyMod.CtrlCmd|n.KeyCode.UpArrow}}),h(y.CursorTopSelect,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.Home,mac:{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.UpArrow}}),h(y.CursorBottom,{primary:n.KeyMod.CtrlCmd|n.KeyCode.End,mac:{primary:n.KeyMod.CtrlCmd|n.KeyCode.DownArrow}}),h(y.CursorBottomSelect,{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.End,mac:{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.DownArrow}}),h(y.LineBreakInsert,{primary:null,mac:{primary:n.KeyMod.WinCtrl|n.KeyCode.KEY_O}}),h(y.Undo,{primary:n.KeyMod.CtrlCmd|n.KeyCode.KEY_Z}),h(y.CursorUndo,{primary:n.KeyMod.CtrlCmd|n.KeyCode.KEY_U}),h(y.Redo,{primary:n.KeyMod.CtrlCmd|n.KeyCode.KEY_Y,secondary:[n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.KEY_Z],mac:{primary:n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.KEY_Z}}),r.KeybindingsRegistry.registerCommandDesc({id:"editor.action.selectAll",handler:g,weight:r.KeybindingsRegistry.WEIGHT.editorCore(),context:null,primary:n.KeyMod.CtrlCmd|n.KeyCode.KEY_A})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/keybinding/browser/keybindingServiceImpl",["require","exports","vs/nls!vs/platform/keybinding/browser/keybindingServiceImpl","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/severity","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/keyboardEvent","vs/platform/keybinding/common/keybindingResolver","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/css!./keybindings"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h="data-keybinding-context",p=function(){function e(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}return e.prototype.setValue=function(e,t){this._value[e]=t},e.prototype.removeValue=function(e){delete this._value[e]},e.prototype.fillInContext=function(e){this._parent&&this._parent.fillInContext(e);for(var t in this._value)e[t]=this._value[t]},e}();t.KeybindingContext=p;var f=function(){function e(e){var t=this;this._subscription=e.onDidUpdateConfiguration(function(e){return t._updateConfigurationContext(e.config)}),e.loadConfiguration().then(function(e){return t._updateConfigurationContext(e)})}return e.prototype.dispose=function(){this._subscription.dispose()},e.prototype._updateConfigurationContext=function(e){var t=this;this._values=Object.create(null);var n=function(e,i){for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){i.push(o);var r=e[o];"boolean"==typeof r?t._values[i.join(".")]=r:"object"==typeof r&&n(r,i),i.pop()}};n(e,["config"])},e.prototype.fillInContext=function(e){if(this._values)for(var t in this._values)e[t]=this._values[t]},e}();t.ConfigurationContext=f;var m=function(){function e(e,t,n){this._parent=e,this._key=t,this._defaultValue=n,"undefined"!=typeof this._defaultValue&&this._parent.setContext(this._key,this._defaultValue)}return e.prototype.set=function(e){this._parent.setContext(this._key,e)},e.prototype.reset=function(){"undefined"==typeof this._defaultValue?this._parent.removeContext(this._key):this._parent.setContext(this._key,this._defaultValue)},e}(),v=function(){function e(e){this.serviceId=l.IKeybindingService,this._myContextId=e,this._instantiationService=null,this._messageService=null}return e.prototype.setMessageService=function(e){this._messageService=e},e.prototype.createKey=function(e,t){return new m(this,e,t)},e.prototype.setInstantiationService=function(e){this._instantiationService=e},e.prototype.createScoped=function(e){return new y(this,e)},e.prototype.setContext=function(e,t){this.getContext(this._myContextId).setValue(e,t)},e.prototype.removeContext=function(e){this.getContext(this._myContextId).removeValue(e)},e}();t.AbstractKeybindingService=v;var g=function(e){function t(t){e.call(this,0),this._toDispose=[],this._lastContextId=0,this._contexts=Object.create(null),this._contexts[String(this._myContextId)]=new p(this._myContextId,null),this._cachedResolver=null,this._firstTimeComputingResolver=!0,this._currentChord=0,this._currentChordStatusMessage=null,this._configurationContext=new f(t),this._toDispose.push(this._configurationContext)}return __extends(t,e),t.prototype._beginListening=function(e){var t=this;this._toDispose.push(a.addDisposableListener(e,a.EventType.KEY_DOWN,function(e){var n=new c.StandardKeyboardEvent(e);t._dispatch(n)}))},t.prototype._getResolver=function(){return this._cachedResolver||(this._cachedResolver=new u.KeybindingResolver(d.KeybindingsRegistry.getDefaultKeybindings(),this._getExtraKeybindings(this._firstTimeComputingResolver)),this._firstTimeComputingResolver=!1),this._cachedResolver},t.prototype.dispose=function(){this._toDispose=o.disposeAll(this._toDispose)},t.prototype.getLabelFor=function(e){return e._toUSLabel()},t.prototype.getHTMLLabelFor=function(e){return e._toUSHTMLLabel()},t.prototype.getAriaLabelFor=function(e){return e._toUSAriaLabel()},t.prototype.getElectronAcceleratorFor=function(e){return e._toElectronAccelerator()},t.prototype.updateResolver=function(){this._cachedResolver=null},t.prototype._getExtraKeybindings=function(e){return[]},t.prototype.getDefaultKeybindings=function(){return this._getResolver().getDefaultKeybindings()+"\n\n"+this._getAllCommandsAsComment()},t.prototype.customKeybindingsCount=function(){return 0},t.prototype.lookupKeybindings=function(e){return this._getResolver().lookupKeybinding(e)},t.prototype._getAllCommandsAsComment=function(){var e=this._getResolver().getDefaultBoundCommands(),t=Object.keys(d.KeybindingsRegistry.getCommands()).filter(function(t){return"_"!==t[0]&&!e[t]});t.sort();var i=t.join("\n// - ");return"// "+n.localize(0,null)+"\n// - "+i},t.prototype._getCommandHandler=function(e){return d.KeybindingsRegistry.getCommands()[e]},t.prototype._dispatch=function(e){var t=this,o=e.keyCode===i.KeyCode.Ctrl||e.keyCode===i.KeyCode.Shift||e.keyCode===i.KeyCode.Alt||e.keyCode===i.KeyCode.Meta;if(!o){var s=Object.create(null);this.getContext(this._findContextAttr(e.target)).fillInContext(s),this._configurationContext.fillInContext(s);var a=this._getResolver().resolve(s,this._currentChord,e.asKeybinding());if(a&&a.enterChord){if(e.preventDefault(),this._currentChord=a.enterChord,this._messageService){var c=this.getLabelFor(new i.Keybinding(this._currentChord));this._currentChordStatusMessage=this._messageService.setStatusMessage(n.localize(1,null,c))}}else{if(this._messageService&&this._currentChord&&(!a||!a.commandId)){var c=this.getLabelFor(new i.Keybinding(this._currentChord)),u=this.getLabelFor(new i.Keybinding(e.asKeybinding()));this._messageService.setStatusMessage(n.localize(2,null,c,u),1e4),e.preventDefault()}if(this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChord=0,a&&a.commandId){/^\^/.test(a.commandId)||e.preventDefault();var l=a.commandId.replace(/^\^/,"");this._invokeHandler(l,{context:s}).done(void 0,function(e){t._messageService.show(r["default"].Warning,e)})}}}},t.prototype._invokeHandler=function(e,t){var n=this._getCommandHandler(e);if(!n)return s.TPromise.wrapError(new Error("No handler found for the command: '"+e+"'. An extension might be missing an activation event."));try{var i=this._instantiationService.invokeFunction(n,t);return s.TPromise.as(i)}catch(o){return s.TPromise.wrapError(o)}},t.prototype._findContextAttr=function(e){for(;e;){if(e.hasAttribute(h))return parseInt(e.getAttribute(h),10);e=e.parentElement}return this._myContextId},t.prototype.getContext=function(e){return this._contexts[String(e)]},t.prototype.createChildContext=function(e){void 0===e&&(e=this._myContextId);var t=++this._lastContextId;return this._contexts[String(t)]=new p(t,this.getContext(e)),t},t.prototype.disposeContext=function(e){delete this._contexts[String(e)]},t.prototype.executeCommand=function(e,t){if(void 0===t&&(t={}),t.context||(t.context=Object.create(null),this.getContext(this._findContextAttr(document.activeElement)).fillInContext(t.context),this._configurationContext.fillInContext(t.context)),e===l.SET_CONTEXT_COMMAND_ID){var n=String(t[0]),i=t[1];return this.setContext(n,i),s.TPromise.as(null)}return this._invokeHandler(e,t)},t}(v);t.KeybindingService=g;var y=function(e){function t(t,n){e.call(this,t.createChildContext()),this._parent=t,this._domNode=n,this._domNode.setAttribute(h,String(this._myContextId))}return __extends(t,e),t.prototype.dispose=function(){this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(h)},t.prototype.getLabelFor=function(e){return this._parent.getLabelFor(e)},t.prototype.getHTMLLabelFor=function(e){return this._parent.getHTMLLabelFor(e)},t.prototype.getAriaLabelFor=function(e){return this._parent.getAriaLabelFor(e)},t.prototype.getElectronAcceleratorFor=function(e){return this._parent.getElectronAcceleratorFor(e)},t.prototype.getDefaultKeybindings=function(){return this._parent.getDefaultKeybindings()},t.prototype.customKeybindingsCount=function(){return this._parent.customKeybindingsCount()},t.prototype.lookupKeybindings=function(e){return this._parent.lookupKeybindings(e)},t.prototype.getContext=function(e){return this._parent.getContext(e)},t.prototype.createChildContext=function(e){return void 0===e&&(e=this._myContextId),this._parent.createChildContext(e)},t.prototype.disposeContext=function(e){this._parent.disposeContext(e)},t.prototype.executeCommand=function(e,t){return this._parent.executeCommand(e,t)},t}(v)}),define("vs/platform/progress/common/progress",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IProgressService=n.createDecorator("progressService")}),define("vs/platform/request/common/request",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IRequestService=n.createDecorator("requestService")}),define("vs/platform/request/common/baseRequestService",["require","exports","vs/base/common/uri","vs/base/common/strings","vs/base/common/timer","vs/base/common/async","vs/base/common/winjs.base","vs/base/common/objects","vs/platform/request/common/request"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t){this.serviceId=c.IRequestService;var n=null,o=e.getWorkspace();this._serviceMap=o||Object.create(null),this._telemetryService=t,o&&(n=i.rtrim(o.resource.toString(),"/")+"/"),this.computeOrigin(n)}return e.prototype.computeOrigin=function(e){if(e){this._origin=e;var t=n["default"].parse(this._origin).path;t&&t.length>0&&(this._origin=this._origin.substring(0,this._origin.length-t.length+1)),i.endsWith(this._origin,"/")||(this._origin+="/")}else this._origin="/"},e.prototype.makeCrossOriginRequest=function(e){return null},e.prototype.makeRequest=function(e){var t=o.nullEvent,n=!1,c=e.url;if(!c)throw new Error("IRequestService.makeRequest: Url is required");if((i.startsWith(c,"http://")||i.startsWith(c,"https://"))&&this._origin&&!i.startsWith(c,this._origin)){var u=this.makeCrossOriginRequest(e);if(u)return u;n=!0}var l=e;if(!n){var d={};this._telemetryService&&(d["X-TelemetrySession"]=this._telemetryService.getSessionId()),d["X-Requested-With"]="XMLHttpRequest",l.headers=a.mixin(l.headers,d)}return e.timeout&&(l.customRequestInitializer=function(t){t.timeout=e.timeout}),r.always(s.xhr(l),function(e){t.data&&(t.data.status=e.status),t.stop()})},e}();t.BaseRequestService=u}),define("vs/platform/search/common/search",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.ID="searchService",t.ISearchService=n.createDecorator(t.ID),function(e){e[e.File=1]="File",e[e.Text=2]="Text"}(t.QueryType||(t.QueryType={}));var i=(t.QueryType,function(){function e(e){this.resource=e,this.lineMatches=[]}return e}());t.FileMatch=i;var o=function(){function e(e,t,n){this.preview=e,this.lineNumber=t,this.offsetAndLengths=n}return e}();t.LineMatch=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/selection/common/selection",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this._selection=e||[]}return Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._selection.length},e.EMPTY=new e([]),e}();t.Selection=n;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.toArray=function(){return this.selection},t}(n);t.StructuredSelection=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/storage/common/storage",["require","exports","vs/base/common/events","vs/platform/instantiation/common/instantiation"],function(e,t,n,i){"use strict";t.ID="storageService",t.IStorageService=i.createDecorator(t.ID);var o;!function(e){e.STORAGE="storage"}(o=t.StorageEventType||(t.StorageEventType={}));var r=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.isLocal=function(){return!this.originalEvent},t}(n.PropertyChangeEvent);t.StorageEvent=r,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.StorageScope||(t.StorageScope={}));t.StorageScope}),define("vs/platform/telemetry/common/telemetry",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";function i(e){if(!e)return e;for(var t="",n=0;n<e.length;n++){var i=e[n];t+=i>="0"&&"9">=i?"0":i>="a"&&"z">=i?"a":i>="A"&&"Z">=i?"A":i}return t}t.ID="telemetryService",t.ITelemetryService=n.createDecorator(t.ID),t.anonymize=i}),define("vs/editor/common/editorCommonExtensions",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/platform/instantiation/common/descriptors","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/platform","vs/platform/telemetry/common/telemetry","vs/editor/common/config/config","vs/editor/common/core/position","vs/editor/common/editorCommon","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";function p(e,t,n){u.withCodeEditorFromCommandHandler(e,t,n,function(t){t.trigger("keyboard",e,n)})}function f(e,t,i){var o=u.findFocusedEditor(e,t,i,!1);if(o)return void o.trigger("keyboard",e,i);var r=u.getActiveEditor(t);if(r){var s=r.getAction(e);return void(s&&(t.get(c.ITelemetryService).publicLog("editorActionInvoked",{name:s.label}),s.run().done(null,n.onUnexpectedError)))}}function m(e,t){var n=r.KbExpr.has(e?d.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS:d.KEYBINDING_CONTEXT_EDITOR_FOCUS);return t?r.KbExpr.and(n,r.KbExpr.has(t)):n}function v(e,t){return function(n,i){u.withCodeEditorFromCommandHandler(e,n,i,function(e){t(n,e,i)})}}!function(e){e[e.None=0]="None",e[e.EditorTextFocus=1]="EditorTextFocus",e[e.EditorFocus=2]="EditorFocus"}(t.ContextKey||(t.ContextKey={}));var g=t.ContextKey,y=function(){function e(e,t,n,i){void 0===i&&(i=C),this.ctor=e,this.id=t,this.label=n,this.kbOpts=i}return e}();t.EditorActionDescriptor=y;var _;!function(e){function t(e){a.Registry.as(E.EditorCommonContributions).registerEditorAction(e)}function o(e){a.Registry.as(E.EditorCommonContributions).registerEditorContribution2(e)}function r(){return a.Registry.as(E.EditorCommonContributions).getEditorContributions2()}function c(e){return void 0===e&&(e=0),s.KeybindingsRegistry.WEIGHT.editorContrib(e)}function u(e,t,n,i,o,r){var a={id:e,handler:v(e,r),weight:t,context:m(i,o),primary:n.primary,secondary:n.secondary,win:n.win,linux:n.linux,mac:n.mac};s.KeybindingsRegistry.registerCommandDesc(a)}function d(e,t){s.KeybindingsRegistry.registerCommandDesc({id:e,handler:function(e,i){if(i&&i.length>1||"object"!=typeof i[0])throw n.illegalArgument();return t(e,i&&i[0])},weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),primary:void 0,context:void 0})}function p(e,t){d(e,function(e,o){var r=o.resource,s=o.position;if(!(r instanceof i["default"]&&l.Position.isIPosition(s)))throw n.illegalArgument();var a=e.get(h.IModelService).getModel(r);if(!a)throw n.illegalArgument();return t(a,s,o)})}e.registerEditorAction=t,e.registerEditorContribution=o,e.getEditorContributions=r,e.commandWeight=c,e.registerEditorCommand=u,e.registerLanguageCommand=d,e.registerDefaultLanguageCommand=p}(_=t.CommonEditorRegistry||(t.CommonEditorRegistry={}));var b=function(){function e(e){this._ctor=e}return e.prototype.createInstance=function(e,t){return e.createInstance(this._ctor,t)},e}(),S=function(){function e(e,t,n){this._descriptor=o.createSyncDescriptor(e,{id:t,label:n})}return e.prototype.createInstance=function(e,t){return e.createInstance(this._descriptor,t)},e}(),E={EditorCommonContributions:"editor.commonContributions"},w=function(){function e(){this.editorContributions=[]}return e.prototype.registerEditorContribution2=function(e){this.editorContributions.push(new b(e))},e.prototype.registerEditorAction=function(e){var t=e.kbOpts.handler;t||(t=e.kbOpts.context===g.EditorTextFocus||e.kbOpts.context===g.EditorFocus?p.bind(null,e.id):f.bind(null,e.id));var n=null;"undefined"==typeof e.kbOpts.kbExpr?e.kbOpts.context===g.EditorTextFocus?n=r.KbExpr.has(d.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS):e.kbOpts.context===g.EditorFocus&&(n=r.KbExpr.has(d.KEYBINDING_CONTEXT_EDITOR_FOCUS)):n=e.kbOpts.kbExpr;var i={id:e.id,handler:t,weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),context:n,primary:e.kbOpts.primary,secondary:e.kbOpts.secondary,win:e.kbOpts.win,linux:e.kbOpts.linux,mac:e.kbOpts.mac};s.KeybindingsRegistry.registerCommandDesc(i),this.editorContributions.push(new S(e.ctor,e.id,e.label))},e.prototype.getEditorContributions2=function(){return this.editorContributions.slice(0)},e}();a.Registry.add(E.EditorCommonContributions,new w);var C={primary:null,context:g.EditorTextFocus}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/clipboard/browser/clipboard",["require","exports","vs/nls!vs/editor/contrib/clipboard/browser/clipboard","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/browser/browser","vs/editor/common/config/config","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/css!./clipboard"],function(e,t,n,i,o,r,s,a,c,u,l,d){
"use strict";function h(e){var t=e.getModel();if(!t)return!1;var n=t.hasEditableRange();if(!n)return!0;var i=t.getEditableRange(),o=e.getPosition();return i.containsPosition(o)}function p(e){s.supportsExecCommand(e.execCommand)&&d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(e.ctor,e.id,e.label,{handler:f.bind(null,e.id,e.execCommand),context:d.ContextKey.None,primary:e.primary,secondary:e.secondary,win:e.win,linux:e.linux,mac:e.mac}))}function f(e,t,n,i){if(i.context[l.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS]){var o=a.findFocusedEditor(e,n,i,!1);if(o)return void o.trigger("keyboard",e,i)}document.execCommand(t)}var m=function(e){function t(t,n,i){var o=this;e.call(this,t,n,i),this.toUnhook=[],this.toUnhook.push(this.editor.addListener(l.EventType.CursorSelectionChanged,function(e){o.resetEnablementState()}))}return __extends(t,e),t.prototype.dispose=function(){this.toUnhook=o.cAll(this.toUnhook),e.prototype.dispose.call(this)},t.prototype.getEnablementState=function(){return s.enableEmptySelectionClipboard?!0:!this.editor.getSelection().isEmpty()},t}(c.EditorAction),v=function(e){function t(t,n){e.call(this,t,n,u.Behaviour.Writeable|u.Behaviour.WidgetFocus|u.Behaviour.ShowInContextMenu|u.Behaviour.UpdateOnCursorPositionChange)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/1_cut"},t.prototype.getEnablementState=function(){return e.prototype.getEnablementState.call(this)&&h(this.editor)},t.prototype.run=function(){return this.editor.focus(),document.execCommand("cut"),r.TPromise.as(!0)},t}(m),g=function(e){function t(t,n){e.call(this,t,n,u.Behaviour.WidgetFocus|u.Behaviour.ShowInContextMenu)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/2_copy"},t.prototype.run=function(){return this.editor.focus(),document.execCommand("copy"),r.TPromise.as(!0)},t}(m),y=function(e){function t(t,n){e.call(this,t,n,u.Behaviour.Writeable|u.Behaviour.WidgetFocus|u.Behaviour.ShowInContextMenu|u.Behaviour.UpdateOnCursorPositionChange)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/3_paste"},t.prototype.getEnablementState=function(){return h(this.editor)},t.prototype.run=function(){return this.editor.focus(),document.execCommand("paste"),null},t}(c.EditorAction);p({ctor:v,id:"editor.action.clipboardCutAction",label:n.localize(0,null),execCommand:"cut",primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_X,win:{primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_X,secondary:[i.KeyMod.Shift|i.KeyCode.Delete]}}),p({ctor:g,id:"editor.action.clipboardCopyAction",label:n.localize(1,null),execCommand:"copy",primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_C,win:{primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_C,secondary:[i.KeyMod.CtrlCmd|i.KeyCode.Insert]}}),p({ctor:y,id:"editor.action.clipboardPasteAction",label:n.localize(2,null),execCommand:"paste",primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_V,win:{primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_V,secondary:[i.KeyMod.Shift|i.KeyCode.Insert]}})}),define("vs/editor/contrib/codelens/common/codelens",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){var i=[],r=t.CodeLensRegistry.all(e).map(function(t){return t.findCodeLensSymbols(e.getAssociatedResource()).then(function(e){if(Array.isArray(e))for(var n=0,o=e;n<o.length;n++){var r=o[n];i.push({symbol:r,support:t})}},function(e){n.isPromiseCanceledError(e)||n.onUnexpectedError(e)})});return o.TPromise.join(r).then(function(){return i})}t.CodeLensRegistry=new s["default"]("codeLensSupport"),t.getCodeLensData=c,r.CommonEditorRegistry.registerLanguageCommand("_executeCodeLensProvider",function(e,t){var o=t.resource;if(!(o instanceof i["default"]))throw n.illegalArgument();var r=e.get(a.IModelService).getModel(o);if(!r)throw n.illegalArgument();return c(r)})});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/codelens/browser/codelens",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/severity","vs/base/common/strings","vs/base/common/winjs.base","vs/base/browser/dom","vs/platform/configuration/common/configuration","vs/platform/keybinding/common/keybindingService","vs/platform/message/common/message","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/services/modelService","vs/editor/browser/editorBrowser","vs/editor/browser/editorBrowserExtensions","../common/codelens","vs/css!./codelens"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";function y(e,t){for(var n=1,i=e.getModels().filter(function(e){return e.getMode().getId()===t}).map(function(e){return{url:e.getAssociatedResource().toString(),versionId:e.getVersionId()}}).sort(function(e,t){return e.url<t.url?-1:e.url>t.url?1:0}),o=0;o<i.length;o++)n=(31*n|0)+i[o].versionId|0;return n}var _=function(){function e(e){this.afterLineNumber=e,this.heightInLines=1,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return e.prototype.setAfterLineNumber=function(e){this.afterLineNumber=e},e}(),b=function(){function e(t,n,i,o){var s=this;this._commands=Object.create(null),this._id="codeLensWidget"+ ++e.ID,this._editor=t,this.setSymbolRange(n),this._domNode=document.createElement("span"),this._domNode.style.height=t.getConfiguration().lineHeight+"px",this._domNode.innerHTML="&nbsp;",c.addClass(this._domNode,"codelens-decoration"),c.addClass(this._domNode,"invisible-cl"),this._subscription=c.addDisposableListener(this._domNode,"click",function(e){var n=e.target;if("A"===n.tagName&&n.id){var a=s._commands[n.id];a&&(t.focus(),i.executeCommand(a.id,a.arguments).done(void 0,function(e){o.show(r["default"].Error,e)}))}}),this.updateVisibility()}return e.prototype.dispose=function(){this._subscription.dispose(),this._symbolRange=null},e.prototype.updateVisibility=function(){this.isVisible()&&(c.removeClass(this._domNode,"invisible-cl"),c.addClass(this._domNode,"fadein"))},e.prototype.withCommands=function(e){if(this._commands=Object.create(null),!e||!e.length)return void(this._domNode.innerHTML="no commands");for(var t=[],n=0;n<e.length;n++){var i=e[n].command,o=void 0;i.id?(o=s.format("<a id={0}>{1}</a>",n,i.title),this._commands[n]=i):o=s.format("<span>{0}</span>",i.title),t.push(o)}this._domNode.innerHTML=t.join("<span>&nbsp;|&nbsp;</span>"),this._editor.layoutContentWidget(this)},e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.setSymbolRange=function(e){this._symbolRange=e;var t=e.startLineNumber,n=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:n},preference:[m.ContentWidgetPositionPreference.ABOVE]}},e.prototype.getPosition=function(){return this._widgetPosition},e.prototype.isVisible=function(){return this._domNode.hasAttribute("monaco-visible-content-widget")},e.ID=0,e}(),S=function(){function e(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return e.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},e.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},e.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;i>n;n++)this._addDecorationsCallbacks[n](t[n])},e}(),E=function(){function e(e,t,n,i,o,r){var s=this;this._editor=t,this._data=e,this._decorationIds=new Array(this._data.length);var a;this._data.forEach(function(e,t){n.addDecoration({range:e.symbol.range,options:{}},function(e){return s._decorationIds[t]=e});for(var i=0,o=s._data;i<o.length;i++){var r=o[i];a=a?h.Range.plusRange(a,r.symbol.range):r.symbol.range}}),this._viewZone=new _(a.startLineNumber-1),this._contentWidget=new b(t,h.Range.lift(a),o,r),this._viewZoneId=i.addZone(this._viewZone),this._editor.addContentWidget(this._contentWidget),this._lastUpdateModelsVersionId=-1}return e.prototype.dispose=function(e,t){for(;this._decorationIds.length;)e.removeDecoration(this._decorationIds.pop());t&&t.removeZone(this._viewZoneId),this._editor.removeContentWidget(this._contentWidget),this._contentWidget.dispose()},e.prototype.isValid=function(){var e=this;return this._decorationIds.some(function(t){var n=e._editor.getModel().getDecorationRange(t);return n&&!n.isEmpty()})},e.prototype.updateCodeLensSymbols=function(e){this._data=e},e.prototype.computeIfNecessary=function(e,t){if(this._contentWidget.updateVisibility(),!this._contentWidget.isVisible())return null;if(this._lastUpdateModelsVersionId===e)return null;for(var n=0;n<this._decorationIds.length;n++)this._data[n].symbol.range=t.getDecorationRange(this._decorationIds[n]);return this._data},e.prototype.updateCommands=function(e,t){this._contentWidget.withCommands(e),this._lastUpdateModelsVersionId=t},e.prototype.getLineNumber=function(){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1},e.prototype.update=function(e){if(this.isValid()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);this._viewZone.setAfterLineNumber(t.startLineNumber-1),e.layoutZone(this._viewZoneId),this._contentWidget.setSymbolRange(t),this._editor.layoutContentWidget(this._contentWidget)}},e}(),w=function(){function e(t,n,i,o,r){var s=this;this._instanceCount=++e.INSTANCE_COUNT,this._editor=t,this._modelService=n,this._configurationService=i,this._keybindingService=o,this._messageService=r,this._globalToDispose=[],this._localToDispose=[],this._lenses=[],this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter=0,this._codeLenseDisabledByMode=!0,this._globalToDispose.push(this._editor.addListener2(p.EventType.ModelChanged,function(){return s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(p.EventType.ModelModeChanged,function(){return s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(p.EventType.ModelModeSupportChanged,function(e){e.codeLensSupport&&s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(p.EventType.ConfigurationChanged,function(e){e.referenceInfos&&s.onModelChange()})),this._globalToDispose.push(g.CodeLensRegistry.onDidChange(this.onModelChange,this)),this.onModelChange()}return e.prototype.dispose=function(){this.localDispose(),this._globalToDispose=o.disposeAll(this._globalToDispose)},e.prototype.localDispose=function(){this._currentFindCodeLensSymbolsPromise&&(this._currentFindCodeLensSymbolsPromise.cancel(),this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter++),this._currentFindOccPromise&&(this._currentFindOccPromise.cancel(),this._currentFindOccPromise=null),this._localToDispose=o.disposeAll(this._localToDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onModelChange=function(){var e=this;this.localDispose();var t=this._editor.getModel();if(t&&this._editor.getConfiguration().referenceInfos&&g.CodeLensRegistry.has(t)){var o=new n.RunOnceScheduler(function(){e._onViewportChanged(t.getMode().getId())},500),r=new n.RunOnceScheduler(function(){e._currentFindCodeLensSymbolsPromise&&e._currentFindCodeLensSymbolsPromise.cancel(),e._currentFindCodeLensSymbolsPromise=g.getCodeLensData(t);var n=++e._modelChangeCounter;e._currentFindCodeLensSymbolsPromise.then(function(t){n===e._modelChangeCounter&&(e.renderCodeLensSymbols(t),o.schedule())},function(e){i.onUnexpectedError(e)})},250);this._localToDispose.push(r),this._localToDispose.push(o),this._localToDispose.push(t.addBulkListener2(function(t){for(var n=!1,i=0;i<t.length;i++){var s=t[i].getType();if(s===p.EventType.ModelContentChanged){n=!0;break}}n&&(e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){var i=[];e._lenses.forEach(function(e){e.isValid()?e.update(n):i.push(e)});var o=new S;i.forEach(function(t){t.dispose(o,n),e._lenses.splice(e._lenses.indexOf(t),1)}),o.commit(t)})}),o.schedule(),r.schedule())})),this._localToDispose.push(this._editor.addListener2("scroll",function(e){o.schedule()})),this._localToDispose.push({dispose:function(){e._editor.getModel()?e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){e._disposeAllLenses(t,n)})}):e._disposeAllLenses(null,null)}}),r.schedule()}},e.prototype._disposeAllLenses=function(e,t){var n=new S;this._lenses.forEach(function(e){return e.dispose(n,t)}),e&&n.commit(e),this._lenses=[]},e.prototype.renderCodeLensSymbols=function(e){var t=this;if(this._editor.getModel()){e=e?e.sort(function(e,t){return h.Range.compareRangesUsingStarts(e.symbol.range,t.symbol.range)}):[];for(var n,i=this._editor.getModel().getLineCount(),o=[],r=0,s=e;r<s.length;r++){var a=s[r],c=a.symbol.range.startLineNumber;1>c||c>=i||(n&&n[n.length-1].symbol.range.startLineNumber===c?n.push(a):(n=[a],o.push(n)))}var u=this._editor.getCenteredRangeInViewport(),l=o.length!==this._lenses.length&&0!==this._editor.getScrollTop();this._editor.changeDecorations(function(e){t._editor.changeViewZones(function(n){for(var i=0,r=0,s=new S;r<o.length&&i<t._lenses.length;){var a=o[r][0].symbol.range.startLineNumber,c=t._lenses[i].getLineNumber();a>c?(t._lenses[i].dispose(s,n),t._lenses.splice(i,1)):c===a?(t._lenses[i].updateCodeLensSymbols(o[r]),r++,i++):(t._lenses.splice(i,0,new E(o[r],t._editor,s,n,t._keybindingService,t._messageService)),i++,r++)}for(;i<t._lenses.length;)t._lenses[i].dispose(s,n),t._lenses.splice(i,1);for(;r<o.length;)t._lenses.push(new E(o[r],t._editor,s,n,t._keybindingService,t._messageService)),r++;s.commit(e)})}),l&&this._editor.revealRangeInCenter(u)}},e.prototype._onViewportChanged=function(e){var t=this;this._currentFindOccPromise&&(this._currentFindOccPromise.cancel(),this._currentFindOccPromise=null);var n=this._editor.getModel();if(n){var i=y(this._modelService,e),o=[],r=[];if(this._lenses.forEach(function(e){var t=e.computeIfNecessary(i,n);t&&(o.push(t),r.push(e))}),0!==o.length){var s=n.getAssociatedResource(),c=o.map(function(e,t){var n=new Array(e.length),o=e.map(function(e,t){return e.support.resolveCodeLensSymbol(s,e.symbol).then(function(e){n[t]=e})});return a.TPromise.join(o).then(function(){r[t].updateCommands(n,i)})});this._currentFindOccPromise=a.TPromise.join(c).then(function(){t._currentFindOccPromise=null})}}},e.ID="css.editor.codeLens",e.INSTANCE_COUNT=0,e=__decorate([__param(1,f.IModelService),__param(2,u.IConfigurationService),__param(3,l.IKeybindingService),__param(4,d.IMessageService)],e)}();t.CodeLensContribution=w,v.EditorBrowserRegistry.registerEditorContribution(w)}),define("vs/editor/contrib/color/browser/color",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/strings","vs/base/browser/dom","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/css!./color"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t){this.renderingDecorationId=e,this.trackingDecorationId=t}return e.createRenderingDecoration=function(e,t){return{range:{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.startLineNumber,endColumn:e.startColumn+1},options:{inlineClassName:"inline-color-decoration "+t,stickiness:a.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}},e.createTrackingDecoration=function(e){return{range:e,options:{stickiness:a.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}},e.prototype.getColorValue=function(e){var t=e.getDecorationRange(this.trackingDecorationId);return t?e.getValueInRange(t):""},e}(),l=function(){function e(t){var i=this;this._instanceCount=++e.INSTANCE_COUNT,this._editor=t,this._callOnDispose=[],this._callOnModelChange=[],this._currentDecorations=[],this._currentDynamicColors=[],this._contentChangedScheduler=new n.RunOnceScheduler(null,250),this._decorationsChangedScheduler=new n.RunOnceScheduler(function(){return i.onDecorationsChanged()},250),this._currentFindColorDeclarationsPromise=null,this._callOnDispose.push(this._contentChangedScheduler),this._callOnDispose.push(this._decorationsChangedScheduler),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelChanged,function(){return i.onModelChange()})),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelModeChanged,function(){return i.onModelChange()})),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelModeSupportChanged,function(e){i.onModelChange()})),this._style=s.createStyleSheet(),this.onModelChange()}return e.prototype.dispose=function(){var e=this;this._currentDecorations.length>0&&this._editor.changeDecorations(function(t){for(var n=[],i=0,o=e._currentDecorations.length;o>i;i++)n.push(e._currentDecorations[i].renderingDecorationId),n.push(e._currentDecorations[i].trackingDecorationId);t.deltaDecorations(n,[]),e._currentDecorations=null}),this._style.parentNode.removeChild(this._style),this._style=null,this._callOnDispose=o.disposeAll(this._callOnDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onModelChange=function(){var e=this;o.cAll(this._callOnModelChange);var t=this._editor.getModel();if(t){var n=t.getMode();"function"==typeof n.findColorDeclarations&&(this._contentChangedScheduler.setRunner(function(){e._currentFindColorDeclarationsPromise&&e._currentFindColorDeclarationsPromise.cancel(),e._currentFindColorDeclarationsPromise=n.findColorDeclarations(t.getAssociatedResource());var o=e._editor.getModel().getVersionId();e._currentFindColorDeclarationsPromise.then(function(t){o===e._editor.getModel().getVersionId()&&e.renderAndTrackColors(t)},function(e){i.onUnexpectedError(e)})}),this._contentChangedScheduler.schedule(),this._callOnModelChange.push(function(){e._contentChangedScheduler.cancel(),e._decorationsChangedScheduler.cancel()}),this._callOnModelChange.push(function(){e._currentFindColorDeclarationsPromise&&e._currentFindColorDeclarationsPromise.cancel(),e._currentFindColorDeclarationsPromise=null}),this._callOnModelChange.push(this._editor.addListener(a.EventType.ModelContentChanged,function(t){return e._contentChangedScheduler.schedule()})),this._callOnModelChange.push(t.addListener(a.EventType.ModelDecorationsChanged,function(t){return e._decorationsChangedScheduler.schedule()})))}},e.prototype.renderAndTrackColors=function(e){var t=this;e=e.slice(0,500),this._editor.changeDecorations(function(n){for(var i=[],o=0,r=t._currentDecorations.length;r>o;o++)i.push(t._currentDecorations[o].renderingDecorationId),i.push(t._currentDecorations[o].trackingDecorationId);for(var s=[],o=0,r=e.length;r>o;o++)s.push(u.createRenderingDecoration(e[o].range,t.getCSSRuleName(o))),s.push(u.createTrackingDecoration(e[o].range));var a=n.deltaDecorations(i,s);t._currentDecorations=[];for(var o=0,r=e.length;r>o;o++)t._currentDecorations.push(new u(a[2*o],a[2*o+1]))}),this.onDecorationsChanged()},e.prototype.onDecorationsChanged=function(){var e,t,n,i,o,r,s=this,a=this._editor.getModel(),c=[];this._editor.changeDecorations(function(u){for(e=0,t=s._currentDecorations.length;t>e;e++)r=s._currentDecorations[e],n=a.getDecorationRange(r.trackingDecorationId),n&&!n.isEmpty()?(c[e]=a.getValueInRange(n).replace(/[^%#a-z0-9.,()]/gi,""),i=a.getDecorationRange(r.renderingDecorationId),o=a.validateRange({startLineNumber:n.startLineNumber,startColumn:n.startColumn,endLineNumber:n.startLineNumber,endColumn:n.startColumn+1}),i&&i.equalsRange(o)||u.changeDecoration(r.renderingDecorationId,o)):c[e]="";s.ensureColors(c)})},e.prototype.getCSSRuleName=function(e){return 0>e?".monaco-css-dynamic-"+this._instanceCount+"-":".monaco-css-dynamic-"+this._instanceCount+"-"+e+":before"},e.prototype._changeCost=function(e){if(this._currentDynamicColors.length!==e.length)return Number.MAX_VALUE;for(var t=0,n=0;n<e.length;n++)e[n]!==this._currentDynamicColors[n]&&t++;return t},e.prototype.ensureColors=function(e){var t,n=this._changeCost(e);if(0!==n){if(10>n){for(t=0;t<e.length;t++)if(e[t]!==this._currentDynamicColors[t]){var i=s.getCSSRule(this.getCSSRuleName(t),this._style);i&&(i.style.backgroundColor=e[t])}}else{var o=[];for(t=0;t<e.length;t++)o.push(this.getCSSRuleName(t)),o.push("{"),o.push(this.getCSSText(e[t])),o.push("}");this._style.innerHTML=o.join("")}this._currentDynamicColors=e}},e.prototype.getCSSText=function(e){return r.format("background-color:{0};",e)},e.ID="css.editor.colorContribution",e.INSTANCE_COUNT=0,e}();t.ColorContribution=l,c.CommonEditorRegistry.registerEditorContribution(l)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/comment/common/comment",["require","exports","vs/nls!vs/editor/contrib/comment/common/comment","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","./blockCommentCommand","./lineCommentCommand"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i){e.call(this,t,n),this._type=i}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getModel();if(e){for(var t=[],n=this.editor.getSelections(),i=e.getOptions(),r=0;r<n.length;r++)t.push(new c.LineCommentCommand(n[r],i.tabSize,this._type));return this.editor.executeCommands(this.id,t),o.TPromise.as(null)}},t.ID="editor.action.commentLine",t}(r.EditorAction),l=function(e){function t(t,n){e.call(this,t,n,c.Type.Toggle)}return __extends(t,e),t.ID="editor.action.commentLine",t}(u),d=function(e){function t(t,n){e.call(this,t,n,c.Type.ForceAdd)}return __extends(t,e),t.ID="editor.action.addCommentLine",t}(u),h=function(e){function t(t,n){e.call(this,t,n,c.Type.ForceRemove)}return __extends(t,e),t.ID="editor.action.removeCommentLine",t}(u),p=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new a.BlockCommentCommand(t[n]));return this.editor.executeCommands(this.id,e),o.TPromise.as(null)},t.ID="editor.action.blockComment",t}(r.EditorAction);s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(l,l.ID,n.localize(0,null),{context:s.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.US_SLASH})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(d,d.ID,n.localize(1,null),{context:s.ContextKey.EditorTextFocus,primary:i.KeyMod.chord(i.KeyMod.CtrlCmd|i.KeyCode.KEY_K,i.KeyMod.CtrlCmd|i.KeyCode.KEY_C)})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(h,h.ID,n.localize(2,null),{context:s.ContextKey.EditorTextFocus,primary:i.KeyMod.chord(i.KeyMod.CtrlCmd|i.KeyCode.KEY_K,i.KeyMod.CtrlCmd|i.KeyCode.KEY_U)})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(p,p.ID,n.localize(3,null),{context:s.ContextKey.EditorTextFocus,primary:i.KeyMod.Shift|i.KeyMod.Alt|i.KeyCode.KEY_A,linux:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_A}}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/contextmenu/browser/contextmenu",["require","exports","vs/nls!vs/editor/contrib/contextmenu/browser/contextmenu","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/sortedList","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/platform/contextview/browser/contextView","vs/platform/keybinding/common/keybindingService","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=function(){function e(e,t,n,o){var r=this;this.contextMenuService=t,this.contextViewService=n,this.keybindingService=o,this._editor=e,this._toDispose=[],this._contextMenuIsBeingShownCount=0,this._toDispose.push(this._editor.addListener2(p.EventType.ContextMenu,function(e){return r._onContextMenu(e)})),this._toDispose.push(this._editor.addListener2(p.EventType.KeyDown,function(e){e.keyCode===i.KeyCode.ContextMenu&&(e.preventDefault(),e.stopPropagation(),r.showContextMenu())}))}return e.prototype._onContextMenu=function(e){if(!this._editor.getConfiguration().contextmenu)return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(e.target.type!==p.MouseTargetType.OVERLAY_WIDGET&&(e.event.preventDefault(),e.target.type===p.MouseTargetType.CONTENT_TEXT||e.target.type===p.MouseTargetType.CONTENT_EMPTY||e.target.type===p.MouseTargetType.TEXTAREA)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);var t;e.target.type!==p.MouseTargetType.TEXTAREA&&(t={x:e.event.posx,y:e.event.posy+1}),this.showContextMenu(t)}},e.prototype.showContextMenu=function(e){if(this._editor.getConfiguration().contextmenu){if(!this.contextMenuService)return void this._editor.focus();var t=this._editor.getPosition(),n=this._editor.getModel();if(t&&n){var i=this._getMenuActions();i.length>0&&this._doShowContextMenu(i,e)}}},e.prototype._getMenuActions=function(){var e=this._editor.getModel();if(!e)return[];var t=this._editor.getActions(),n=t.filter(function(e){return"function"==typeof e.shouldShowInContextMenu&&e.shouldShowInContextMenu()&&e.isSupported()});return this._prepareActions(n)},e.prototype._prepareActions=function(e){var t=new r.SortedList;e.forEach(function(e){var n=e.getGroupId().split("/"),i=t.getValue(n[0]);i||(i=new r.SortedList,t.add(n[0],i)),i.add(n[1]||n[0],e)});for(var n=[],i=t.getIterator();i.moveNext();){for(var o=i.current.value,s=o.getIterator();s.moveNext();){var a=s.current.value;n.push(a)}i.hasNext()&&n.push(new c.Separator)}return n},e.prototype._doShowContextMenu=function(e,t){var n=this;void 0===t&&(t=null),this._editor.beginForcedWidgetFocus();var i=this._editor.getConfiguration().hover;this._editor.updateOptions({hover:!1});var o=t;if(!o){this._editor.revealPosition(this._editor.getPosition()),this._editor.render();var r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),u=a.getDomNodePosition(this._editor.getDomNode()),l=u.left+r.left,d=u.top+r.top+r.height;o={x:l,y:d}}this.contextMenuService.showContextMenu({getAnchor:function(){return o},getActions:function(){return s.TPromise.as(e)},getActionItem:function(e){var t=n._keybindingFor(e);if(t)return new c.ActionItem(e,e,{label:!0,keybinding:n.keybindingService.getLabelFor(t)});var i=e;return"function"==typeof i.getActionItem?i.getActionItem():null},getKeyBinding:function(e){return n._keybindingFor(e)},onHide:function(e){n._contextMenuIsBeingShownCount--,n._editor.focus(),n._editor.endForcedWidgetFocus(),n._editor.updateOptions({hover:i})}})},e.prototype._keybindingFor=function(e){var t=this.keybindingService.lookupKeybindings(e.id);return t.length>0?t[0]:null},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._contextMenuIsBeingShownCount>0&&this.contextViewService.hideContextView(),this._toDispose=o.disposeAll(this._toDispose)},e.ID="editor.contrib.contextmenu",e=__decorate([__param(1,u.IContextMenuService),__param(2,u.IContextViewService),__param(3,l.IKeybindingService)],e)}(),g=function(e){function t(t,n){e.call(this,t,n,h.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getContribution(v.ID);return e?(e.showContextMenu(),s.TPromise.as(null)):s.TPromise.as(null)},t.ID="editor.action.showContextMenu",t}(d.EditorAction);m.EditorBrowserRegistry.registerEditorContribution(v),f.CommonEditorRegistry.registerEditorAction(new f.EditorActionDescriptor(g,g.ID,n.localize(0,null),{context:f.ContextKey.EditorTextFocus,primary:i.KeyMod.Shift|i.KeyCode.F10}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/folding/browser/folding",["require","exports","vs/nls!vs/editor/contrib/folding/browser/folding","vs/base/common/async","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/core/range","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/folding/common/indentFoldStrategy","vs/css!./folding"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(){function e(e,t,n){this.decorationIds=[],this.update(e,t,n)}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this._isCollapsed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLineNumber",{get:function(){return this._lastRange?this._lastRange.startLineNumber:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLineNumber",{get:function(){return this._lastRange?this._lastRange.endLineNumber:void 0},enumerable:!0,configurable:!0}),e.prototype.setCollapsed=function(e,t){this._isCollapsed=e,this.decorationIds.length>0&&t.changeDecorationOptions(this.decorationIds[0],this.getVisualDecorationOptions())},e.prototype.getDecorationRange=function(e){return this.decorationIds.length>0?e.getDecorationRange(this.decorationIds[1]):null},e.prototype.getVisualDecorationOptions=function(){return this._isCollapsed?{stickiness:u.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,inlineClassName:"inline-folded",linesDecorationsClassName:"folding collapsed"}:{stickiness:u.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,linesDecorationsClassName:"folding"}},e.prototype.getRangeDecorationOptions=function(){return{stickiness:u.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore}},e.prototype.update=function(e,t,n){this._lastRange=e,this._isCollapsed=!!e.isCollapsed,this._indent=e.indent;var i=[],o=t.getLineMaxColumn(e.startLineNumber),r={startLineNumber:e.startLineNumber,startColumn:o-1,endLineNumber:e.startLineNumber,endColumn:o};i.push({range:r,options:this.getVisualDecorationOptions()});var s={startLineNumber:e.startLineNumber,startColumn:1,endLineNumber:e.endLineNumber,endColumn:t.getLineMaxColumn(e.endLineNumber)};i.push({range:s,options:this.getRangeDecorationOptions()}),this.decorationIds=n.deltaDecorations(this.decorationIds,i)},e.prototype.dispose=function(e){this._lastRange=null,this.decorationIds=e.deltaDecorations(this.decorationIds,[])},e.prototype.toString=function(){var e=this.isCollapsed?"collapsed ":"expanded ";return e+=this._lastRange?this._lastRange.startLineNumber+"/"+this._lastRange.endLineNumber:"no range"},e}(),m=function(){function e(e){var t=this;
this.editor=e,this.globalToDispose=[],this.localToDispose=[],this.decorations=[],this.computeToken=0,this.globalToDispose.push(this.editor.addListener2(u.EventType.ModelChanged,function(){return t.onModelChanged()})),this.globalToDispose.push(this.editor.addListener2(u.EventType.ConfigurationChanged,function(e){e.folding&&t.onModelChanged()})),this.onModelChanged()}return e.getFoldingController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.cleanState(),this.globalToDispose=r.disposeAll(this.globalToDispose)},e.prototype.saveViewState=function(){var e=this.editor.getModel();if(!e)return{};var t=[];return this.decorations.forEach(function(n){if(n.isCollapsed){var i=n.getDecorationRange(e);i&&t.push({startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,indent:n.indent,isCollapsed:!0})}}),{collapsedRegions:t,lineCount:e.getLineCount()}},e.prototype.restoreViewState=function(e){var t=this.editor.getModel();t&&this.editor.getConfiguration().folding&&e&&Array.isArray(e.collapsedRegions)&&0!==e.collapsedRegions.length&&e.lineCount===t.getLineCount()&&this.applyRegions(e.collapsedRegions)},e.prototype.cleanState=function(){this.localToDispose=r.disposeAll(this.localToDispose)},e.prototype.applyRegions=function(t){var n=this,i=this.editor.getModel();if(i){var o=!1;t=p.limitByIndent(t,e.MAX_FOLDING_REGIONS).sort(function(e,t){return e.startLineNumber-t.startLineNumber}),this.editor.changeDecorations(function(e){for(var r=[],s=0,a=0;a<n.decorations.length&&s<t.length;){var c=n.decorations[a],u=c.getDecorationRange(i);if(u){for(;s<t.length&&u.startLineNumber>t[s].startLineNumber;){var l=t[s];o=o||l.isCollapsed,r.push(new f(l,i,e)),s++}if(s<t.length){var d=t[s];u.startLineNumber<d.startLineNumber?(o=o||c.isCollapsed,c.dispose(e),a++):u.startLineNumber===d.startLineNumber&&(!c.isCollapsed||c.startLineNumber===d.startLineNumber&&c.endLineNumber===d.endLineNumber||(o=!0),d.isCollapsed=c.isCollapsed,c.update(d,i,e),r.push(c),a++,s++)}}else o=o||c.isCollapsed,c.dispose(e),a++}for(;a<n.decorations.length;){var c=n.decorations[a];o=o||c.isCollapsed,c.dispose(e),a++}for(;s<t.length;){var l=t[s];o=o||l.isCollapsed,r.push(new f(l,i,e)),s++}n.decorations=r}),o&&this.updateHiddenAreas(void 0)}},e.prototype.onModelChanged=function(){var e=this;this.cleanState();var t=this.editor.getModel();this.editor.getConfiguration().folding&&t&&(this.contentChangedScheduler=new i.RunOnceScheduler(function(){var t=++e.computeToken;e.computeCollapsibleRegions().then(function(n){t===e.computeToken&&e.applyRegions(n)})},200),this.cursorChangedScheduler=new i.RunOnceScheduler(function(){e.revealCursor()},200),this.localToDispose.push(this.contentChangedScheduler),this.localToDispose.push(this.cursorChangedScheduler),this.localToDispose.push(this.editor.addListener2("change",function(){e.contentChangedScheduler.schedule()})),this.localToDispose.push({dispose:function(){++e.computeToken,e.editor.changeDecorations(function(t){e.decorations.forEach(function(e){return e.dispose(t)})}),e.decorations=[],e.editor.setHiddenAreas([])}}),this.localToDispose.push(this.editor.addListener2(u.EventType.MouseDown,function(t){return e.onEditorMouseDown(t)})),this.localToDispose.push(this.editor.addListener2(u.EventType.MouseUp,function(t){return e.onEditorMouseUp(t)})),this.localToDispose.push(this.editor.addListener2(u.EventType.CursorPositionChanged,function(t){e.cursorChangedScheduler.schedule()})),this.contentChangedScheduler.schedule())},e.prototype.computeCollapsibleRegions=function(){var e=this.editor.getModel();if(!e)return s.TPromise.as([]);var t=e.getOptions().tabSize,n=p.computeRanges(e,t);return s.TPromise.as(n)},e.prototype.revealCursor=function(){var e=this,t=this.editor.getModel();if(t){var n=!1,i=this.editor.getPosition(),o=i.lineNumber;this.editor.changeDecorations(function(i){return e.decorations.forEach(function(e){if(e.isCollapsed){var r=e.getDecorationRange(t);r&&r.startLineNumber<o&&o<=r.endLineNumber&&(e.setCollapsed(!1,i),n=!0)}})}),n&&this.updateHiddenAreas(o)}},e.prototype.onEditorMouseDown=function(e){if(this.mouseDownInfo=null,0!==this.decorations.length){var t=e.target.range;if(t&&t.isEmpty&&e.event.leftButton){var n=this.editor.getModel(),i=!1;switch(e.target.type){case u.MouseTargetType.GUTTER_LINE_DECORATIONS:i=!0;break;case u.MouseTargetType.CONTENT_TEXT:if(t.isEmpty&&t.startColumn===n.getLineMaxColumn(t.startLineNumber))break;return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}}},e.prototype.onEditorMouseUp=function(e){var t=this;if(this.mouseDownInfo){var n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,o=e.target.range;if(o&&o.isEmpty&&o.startLineNumber===n){var r=this.editor.getModel();if(i){if(e.target.type!==u.MouseTargetType.GUTTER_LINE_DECORATIONS)return}else if(o.startColumn!==r.getLineMaxColumn(n))return;this.editor.changeDecorations(function(e){for(var o=0;o<t.decorations.length;o++){var s=t.decorations[o],a=s.getDecorationRange(r);if(a.startLineNumber===n)return void((i||s.isCollapsed)&&(s.setCollapsed(!s.isCollapsed,e),t.updateHiddenAreas(n)))}})}}},e.prototype.updateHiddenAreas=function(e){var t=this.editor.getModel(),n=this.editor.getSelections(),i=!1,o=[];this.decorations.filter(function(e){return e.isCollapsed}).forEach(function(e){var r=e.getDecorationRange(t);o.push({startLineNumber:r.startLineNumber+1,startColumn:1,endLineNumber:r.endLineNumber,endColumn:1}),n.forEach(function(e,o){l.Range.containsPosition(r,e.getStartPosition())&&(n[o]=e=e.setStartPosition(r.startLineNumber,t.getLineMaxColumn(r.startLineNumber)),i=!0),l.Range.containsPosition(r,e.getEndPosition())&&(n[o]=e.setEndPosition(r.startLineNumber,t.getLineMaxColumn(r.startLineNumber)),i=!0)})});var r;r=e?{lineNumber:e,column:1}:n[0].getStartPosition(),i&&this.editor.setSelections(n),this.editor.setHiddenAreas(o),this.editor.revealPositionInCenterIfOutsideViewport(r)},e.prototype.unfold=function(){var e=this,t=this.editor.getModel(),n=!1,i=this.editor.getSelections(),o=!1;i.forEach(function(r,s){for(var a,c=r.startLineNumber,u=function(u,d){var h=e.decorations[u],p=h.getDecorationRange(t);if(!p)return"continue";if(p.startLineNumber<=c){if(c<=p.endLineNumber){if(h.isCollapsed)return e.editor.changeDecorations(function(e){h.setCollapsed(!1,e),n=!0}),{value:void 0};a=p}}else{if(!a||!l.Range.containsRange(a,p))return{value:void 0};if(h.isCollapsed)return e.editor.changeDecorations(function(e){h.setCollapsed(!1,e),n=!0;var a=p.startLineNumber,c=t.getLineMaxColumn(p.startLineNumber);i[s]=r.setEndPosition(a,c).setStartPosition(a,c),o=!0}),{value:void 0}}},d=0,h=e.decorations.length;h>d;d++){var p=u(d,h);if("object"==typeof p)return p.value}}),o&&this.editor.setSelections(i),n&&this.updateHiddenAreas(i[0].startLineNumber)},e.prototype.fold=function(){var e=this,t=!1,n=this.editor.getModel(),i=this.editor.getSelections();i.forEach(function(i){for(var o=i.startLineNumber,r=null,s=0,a=e.decorations.length;a>s;s++){var c=e.decorations[s],u=c.getDecorationRange(n);if(u){if(!(u.startLineNumber<=o))break;o<=u.endLineNumber&&!c.isCollapsed&&(r=c)}}r&&e.editor.changeDecorations(function(e){r.setCollapsed(!0,e),t=!0})}),t&&this.updateHiddenAreas(i[0].startLineNumber)},e.prototype.changeAll=function(e){var t=this;if(this.decorations.length>0){var n=!0;this.editor.changeDecorations(function(i){t.decorations.forEach(function(t){e!==t.isCollapsed&&(t.setCollapsed(e,i),n=!0)})}),n&&this.updateHiddenAreas(void 0)}},e.prototype.foldLevel=function(e,t){var n=this,i=this.editor.getModel(),o=[i.getFullModelRange()],r=!1;this.editor.changeDecorations(function(s){n.decorations.forEach(function(n){var a=n.getDecorationRange(i);if(a){for(;!l.Range.containsRange(o[o.length-1],a);)o.pop();o.push(a),o.length!==e+1||n.isCollapsed||t.some(function(e){return a.startLineNumber<e&&e<=a.endLineNumber})||(n.setCollapsed(!0,s),r=!0)}})}),r&&this.updateHiddenAreas(t[0])},e.ID="editor.contrib.folding",e.MAX_FOLDING_REGIONS=5e3,e}();t.FoldingController=m;var v=function(e){function t(t,n){e.call(this,t,n,c.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=m.getFoldingController(this.editor);return this.invoke(e),s.TPromise.as(!0)},t}(a.EditorAction),g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.invoke=function(e){e.unfold()},t.ID="editor.unfold",t}(v),y=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.invoke=function(e){e.fold()},t.ID="editor.fold",t}(v),_=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.invoke=function(e){e.changeAll(!0)},t.ID="editor.foldAll",t}(v),b=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.invoke=function(e){e.changeAll(!1)},t.ID="editor.unfoldAll",t}(v),S=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getFoldingLevel=function(){return parseInt(this.id.substr(t.ID_PREFIX.length))},t.prototype.getSelectedLines=function(){return this.editor.getSelections().map(function(e){return e.startLineNumber})},t.prototype.invoke=function(e){e.foldLevel(this.getFoldingLevel(),this.getSelectedLines())},t.ID_PREFIX="editor.foldLevel",t.ID=function(e){return t.ID_PREFIX+e},t}(v);h.EditorBrowserRegistry.registerEditorContribution(m),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(g,g.ID,n.localize(0,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.US_CLOSE_SQUARE_BRACKET})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(y,y.ID,n.localize(1,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.US_OPEN_SQUARE_BRACKET})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(_,_.ID,n.localize(2,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.CtrlCmd|o.KeyMod.Alt|o.KeyMod.Shift|o.KeyCode.US_OPEN_SQUARE_BRACKET})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(b,b.ID,n.localize(3,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.CtrlCmd|o.KeyMod.Alt|o.KeyMod.Shift|o.KeyCode.US_CLOSE_SQUARE_BRACKET,secondary:[o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_J)]})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(S,S.ID(1),n.localize(4,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_1)})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(S,S.ID(2),n.localize(5,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_2)})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(S,S.ID(3),n.localize(6,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_3)})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(S,S.ID(4),n.localize(7,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_4)})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(S,S.ID(5),n.localize(8,null),{context:d.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_5)}))}),define("vs/editor/contrib/format/common/format",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e,n,i){var r=t.FormatRegistry.ordered(e).filter(function(e){return"function"==typeof e.formatRange})[0];return r?r.formatRange(e.getAssociatedResource(),n,i):o.TPromise.as(void 0)}function l(e,n){var i=t.FormatRegistry.ordered(e)[0];return i?"function"!=typeof i.formatDocument?"function"==typeof i.formatRange?u(e,e.getFullModelRange(),n):o.TPromise.as(void 0):i.formatDocument(e.getAssociatedResource(),n):o.TPromise.as(void 0)}function d(e,n,i,r){var s=t.FormatOnTypeRegistry.ordered(e)[0];return s?s.autoFormatTriggerCharacters.indexOf(i)<0?o.TPromise.as(void 0):s.formatAfterKeystroke(e.getAssociatedResource(),n,i,r):o.TPromise.as(void 0)}t.FormatRegistry=new a["default"]("formattingSupport"),t.FormatOnTypeRegistry=new a["default"]("formattingSupport"),t.formatRange=u,t.formatDocument=l,t.formatAfterKeystroke=d,s.CommonEditorRegistry.registerLanguageCommand("_executeFormatRangeProvider",function(e,t){var o=t.resource,s=t.range,a=t.options;if(!(o instanceof i["default"]&&r.Range.isIRange(s)))throw n.illegalArgument();var l=e.get(c.IModelService).getModel(o);if(!l)throw n.illegalArgument("resource");return u(l,s,a)}),s.CommonEditorRegistry.registerLanguageCommand("_executeFormatDocumentProvider",function(e,t){var o=t.resource,r=t.options;if(!(o instanceof i["default"]))throw n.illegalArgument("resource");var s=e.get(c.IModelService).getModel(o);if(!s)throw n.illegalArgument("resource");return l(s,r)}),s.CommonEditorRegistry.registerDefaultLanguageCommand("_executeFormatOnTypeProvider",function(e,t,i){var o=i.ch,r=i.options;if("string"!=typeof o)throw n.illegalArgument("ch");return d(e,t,o,r)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/format/common/formatActions",["require","exports","vs/nls!vs/editor/contrib/format/common/formatActions","vs/base/common/arrays","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","../common/format","./formatCommand"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(){function e(e){var t=this;this.editor=e,this.callOnDispose=[],this.callOnModel=[],this.callOnDispose.push(e.addListener2(u.EventType.ConfigurationChanged,function(){return t.update()})),this.callOnDispose.push(e.addListener2(u.EventType.ModelChanged,function(){return t.update()})),this.callOnDispose.push(e.addListener2(u.EventType.ModelModeChanged,function(){return t.update()})),this.callOnDispose.push(e.addListener2(u.EventType.ModelModeSupportChanged,function(e){e.formattingSupport&&t.update()})),this.callOnDispose.push(d.FormatOnTypeRegistry.onDidChange(this.update,this))}return e.prototype.update=function(){var e=this;if(this.callOnModel=r.cAll(this.callOnModel),this.editor.getConfiguration().formatOnType&&this.editor.getModel()){var t=this.editor.getModel(),n=d.FormatOnTypeRegistry.ordered(t)[0];n&&n.autoFormatTriggerCharacters&&n.autoFormatTriggerCharacters.forEach(function(t){e.callOnModel.push(e.editor.addTypingListener(t,e.trigger.bind(e,t)))})}},e.prototype.trigger=function(e){var t=this;if(!(this.editor.getSelections().length>1)){var n=this.editor.getModel(),o=this.editor.getPosition(),r=!1,s=this.editor.addListener(u.EventType.ModelContentChanged,function(e){if(e.changeType===u.EventType.ModelContentChangedFlush)r=!0;else if(e.changeType===u.EventType.ModelContentChangedLineChanged){var t=e.lineNumber;r=t<=o.lineNumber}else if(e.changeType===u.EventType.ModelContentChangedLinesInserted){var n=e.fromLineNumber;r=n<=o.lineNumber}else if(e.changeType===u.EventType.ModelContentChangedLinesDeleted){var i=e.toLineNumber;r=i<=o.lineNumber}r&&s()}),a=n.getOptions();d.formatAfterKeystroke(n,o,e,{tabSize:a.tabSize,insertSpaces:a.insertSpaces}).then(function(e){s(),r||i.isFalsyOrEmpty(e)||t.editor.executeCommand(t.getId(),new h.EditOperationsCommand(e,t.editor.getSelection()))},function(e){throw s(),e})}},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(this.callOnDispose=r.disposeAll(this.callOnDispose);this.callOnModel.length>0;)this.callOnModel.pop()()},e.ID="editor.contrib.autoFormat",e}(),f=function(e){function t(t,n){var i=this;e.call(this,t,n,c.Behaviour.WidgetFocus|c.Behaviour.Writeable|c.Behaviour.UpdateOnModelChange|c.Behaviour.ShowInContextMenu),this._disposable=d.FormatRegistry.onDidChange(function(){return i.resetEnablementState()})}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._disposable.dispose()},t.prototype.getGroupId=function(){return"2_change/2_format"},t.prototype.isSupported=function(){return d.FormatRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.run=function(){var e,t=this,n=this.editor.getModel(),i=this.editor.getSelection(),o=n.getOptions(),r={tabSize:o.tabSize,insertSpaces:o.insertSpaces};if(e=i.isEmpty()?d.formatDocument(n,r):d.formatRange(n,i,r),!e)return s.TPromise.as(!1);var a=this.editor.captureState(u.CodeEditorStateFlag.Value,u.CodeEditorStateFlag.Position);return e.then(function(e){return a.validate(t.editor)&&e&&0!==e.length?(t.apply(t.editor,i,e),t.editor.focus(),!0):!1})},t.prototype.apply=function(e,t,n){var i=null;t.isEmpty()&&(i=e.saveViewState());var o=new h.EditOperationsCommand(n,t);e.executeCommand(this.id,o),i&&e.restoreViewState(i)},t.ID="editor.action.format",t}(a.EditorAction);t.FormatAction=f,l.CommonEditorRegistry.registerEditorAction(new l.EditorActionDescriptor(f,f.ID,n.localize(0,null),{context:l.ContextKey.EditorTextFocus,primary:o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.KEY_F,linux:{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.KEY_I}})),l.CommonEditorRegistry.registerEditorContribution(p)}),define("vs/editor/contrib/goToDeclaration/common/goToDeclaration",["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r){"use strict";function s(e,o){var r=e.getAssociatedResource(),s=t.DeclarationRegistry.ordered(e),a=s.map(function(e,t){return e.findDeclaration(r,o).then(function(e){return e},function(e){n.onUnexpectedError(e)})});return i.TPromise.join(a).then(function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];Array.isArray(o)?t.push.apply(t,o):o&&t.push(o)}return t})}t.DeclarationRegistry=new r["default"]("declarationSupport"),t.getDeclarationsAtPosition=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDefinitionProvider",s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/gotoError/browser/gotoError",["require","exports","vs/nls!vs/editor/contrib/gotoError/browser/gotoError","vs/base/common/errors","vs/base/common/event","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/severity","vs/base/common/strings","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/htmlContentRenderer","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/keybinding/common/keybindingService","vs/platform/markers/common/markers","vs/platform/telemetry/common/telemetry","vs/editor/common/core/position","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/services/bulkEdit","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/zoneWidget/browser/zoneWidget","vs/css!./gotoError"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C){"use strict";var T=function(){function e(e,t){var n=this;this._editor=e,this._markers=null,this._nextIdx=-1,this._toUnbind=[],this._ignoreSelectionChange=!1,this._onCurrentMarkerChanged=new o.Emitter,this._onMarkerSetChanged=new o.Emitter,this.setMarkers(t),this._toUnbind.push(this._editor.addListener(b.EventType.Disposed,function(){return n.dispose()})),this._toUnbind.push(this._editor.addListener(b.EventType.CursorPositionChanged,function(){n._ignoreSelectionChange||(n._nextIdx=-1)}))}return Object.defineProperty(e.prototype,"onCurrentMarkerChanged",{get:function(){return this._onCurrentMarkerChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMarkerSetChanged",{get:function(){return this._onMarkerSetChanged.event},enumerable:!0,configurable:!0}),e.prototype.setMarkers=function(e){this._markers=e||[],this._markers.sort(function(e,t){return e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber}),this._nextIdx=-1,this._onMarkerSetChanged.fire(this)},e.prototype.withoutWatchingEditorPosition=function(e){this._ignoreSelectionChange=!0;try{e()}finally{this._ignoreSelectionChange=!1}},e.prototype.initIdx=function(e){for(var t=!1,n=this._editor.getPosition(),i=0,o=this._markers.length;o>i&&!t;i++){var r={lineNumber:this._markers[i].startLineNumber,column:this._markers[i].startColumn};n.isBeforeOrEqual(r)&&(this._nextIdx=i+(e?0:-1),t=!0)}t||(this._nextIdx=e?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)},e.prototype.move=function(e){if(!this.canNavigate())return void this._onCurrentMarkerChanged.fire(void 0);-1===this._nextIdx?this.initIdx(e):e?(this._nextIdx+=1,this._nextIdx>=this._markers.length&&(this._nextIdx=0)):(this._nextIdx-=1,this._nextIdx<0&&(this._nextIdx=this._markers.length-1));var t=this._markers[this._nextIdx];this._onCurrentMarkerChanged.fire(t)},e.prototype.canNavigate=function(){return this._markers.length>0},e.prototype.next=function(){this.move(!0)},e.prototype.previous=function(){this.move(!1)},e.prototype.goTo=function(e){for(var t=0;t<this._markers.length;t++){var n=this._markers[t];if(n.startLineNumber<=e.lineNumber&&n.endLineNumber>=e.lineNumber&&n.startColumn<=e.column&&n.endColumn>=e.column)return void this._onCurrentMarkerChanged.fire(n)}return null},e.prototype.indexOf=function(e){return this._markers.indexOf(e)},e.prototype.length=function(){return this._markers.length},e.prototype.reveal=function(){var e=this;-1!==this._nextIdx&&this.withoutWatchingEditorPosition(function(){var t=new g.Position(e._markers[e._nextIdx].startLineNumber,e._markers[e._nextIdx].startColumn);e._editor.setPosition(t),e._editor.revealPositionInCenter(t)})},e.prototype.dispose=function(){this._toUnbind=s.cAll(this._toUnbind)},e}(),k={showFrame:!0,showArrow:!0,isAccessible:!0},x=function(e){function t(t,n,i,o){e.call(this,i,k),this._model=o,this._callOnDispose=[],this._localCleanup=[],this._eventService=t,this._editorService=n,this.create(),this._wireModelAndView()}return __extends(t,e),t.prototype.fillContainer=function(e){var t=this;this._container=e,l.addClass(this._container,"marker-widget"),this._container.tabIndex=0,this._container.setAttribute("role","tooltip"),this._element=document.createElement("div"),this._element.className="descriptioncontainer",this._element.setAttribute("aria-live","assertive"),this._element.setAttribute("role","alert"),this._container.appendChild(this._element),this._quickFixSection=document.createElement("div"),this._container.appendChild(this._quickFixSection),this._callOnDispose.push(l.addStandardDisposableListener(this._container,"keydown",function(e){switch(e.asKeybinding()){case r.CommonKeybindings.LEFT_ARROW:t._goLeft(),e.preventDefault(),e.stopPropagation();break;case r.CommonKeybindings.RIGHT_ARROW:t._goRight(),e.preventDefault(),e.stopPropagation()}}))},t.prototype._goLeft=function(){if(this._quickFixEntries){var e=this._quickFixEntries.indexOf(document.activeElement);-1===e&&(e=1),e=(e+this._quickFixEntries.length-1)%this._quickFixEntries.length,this._quickFixEntries[e].focus()}},t.prototype._goRight=function(){if(this._quickFixEntries){var e=this._quickFixEntries.indexOf(document.activeElement);e=(e+1)%this._quickFixEntries.length,this._quickFixEntries[e].focus()}},t.prototype.show=function(t,n){e.prototype.show.call(this,t,n),this._container.focus()},t.prototype._wireModelAndView=function(){this._model.onCurrentMarkerChanged(this.showAtMarker,this,this._callOnDispose)},t.prototype.showAtMarker=function(e){var t=this;if(e){switch(e.severity){case a["default"].Error:this.options.frameColor="#ff5a5a";break;case a["default"].Warning:case a["default"].Info:this.options.frameColor="#5aac5a"}this._localCleanup=s.disposeAll(this._localCleanup);var o=c.format("({0}/{1}) ",this._model.indexOf(e)+1,this._model.length());e.source&&(o=o+"["+e.source+"] "),l.clearNode(this._element),this._element.appendChild(document.createTextNode(o)),this._element.appendChild(d.renderHtml(e.message));var u=this.editor.getModel().getMode();if(this._quickFixSection.style.display="none",u.quickFixSupport){var h=u.quickFixSupport.getQuickFixes(this.editor.getModel().getAssociatedResource(),e);h.then(function(i){if(l.clearNode(t._quickFixSection),i.length>0){t._localCleanup.push({dispose:function(){t._quickFixEntries=[]}});var o=document.createElement("span");o.className="quickfixhead",o.appendChild(document.createTextNode(i.length>1?n.localize(0,null):n.localize(1,null))),t._quickFixSection.appendChild(o),t._quickFixEntries=[];var s=document.createElement("span");s.className="quickfixcontainer",i.forEach(function(n,i,o){var a=s;if(i>0){var c=document.createElement("span");c.appendChild(document.createTextNode(", ")),a.appendChild(c)}var d=document.createElement("a");d.tabIndex=0,d.className="quickfixentry",d.appendChild(document.createTextNode(n.command.title)),t._localCleanup.push(l.addDisposableListener(d,l.EventType.CLICK,function(){return u.quickFixSupport.runQuickFixAction(t.editor.getModel().getAssociatedResource(),e,n).then(function(e){return E.bulkEdit(t._eventService,t._editorService,t.editor,e.edits)}),!0})),t._localCleanup.push(l.addStandardDisposableListener(d,"keydown",function(i){switch(i.asKeybinding()){case r.CommonKeybindings.ENTER:case r.CommonKeybindings.SPACE:u.quickFixSupport.runQuickFixAction(t.editor.getModel().getAssociatedResource(),e,n).then(function(e){return E.bulkEdit(t._eventService,t._editorService,t.editor,e.edits)}),i.preventDefault(),i.stopPropagation()}})),a.appendChild(d),t._quickFixEntries.push(d)}),t._quickFixSection.appendChild(s),t._quickFixSection.style.display="",t.show(new g.Position(e.startLineNumber,e.startColumn),4)}},function(e){i.onUnexpectedError(e)})}this._model.withoutWatchingEditorPosition(function(){t.show(new g.Position(e.startLineNumber,e.startColumn),3)})}},t.prototype.dispose=function(){this._callOnDispose=s.disposeAll(this._callOnDispose),e.prototype.dispose.call(this)},t}(C.ZoneWidget),I=function(e){function t(t,n,i,o){e.call(this,t,n,_.Behaviour.WidgetFocus|_.Behaviour.Writeable|_.Behaviour.UpdateOnModelChange),this.telemetryService=o,this._isNext=i}return __extends(t,e),t.prototype.run=function(){var e=D.getMarkerController(this.editor).getOrCreateModel();return this.telemetryService.publicLog("zoneWidgetShown",{mode:"go to error"}),e&&(this._isNext?e.next():e.previous(),e.reveal()),u.TPromise.as(!0)},t=__decorate([__param(3,v.ITelemetryService)],t)}(y.EditorAction),D=function(){function e(e,t,n,i,o){this._callOnClose=[],this.markerService=t,this.eventService=i,this.editorService=o,this.editor=e,this._markersNavigationVisible=n.createKey(O,!1)}return e.getMarkerController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._cleanUp()},e.prototype._cleanUp=function(){this._markersNavigationVisible.reset(),this._callOnClose=s.disposeAll(this._callOnClose),this._zone=null,this._model=null},e.prototype.getOrCreateModel=function(){var e=this;if(this._model)return this._model;var t=this._getMarkers();return this._model=new T(this.editor,t),this._zone=new x(this.eventService,this.editorService,this.editor,this._model),this._markersNavigationVisible.set(!0),this._callOnClose.push(this._model),this._callOnClose.push(this._zone),this._callOnClose.push(this.editor.addListener2(b.EventType.ModelChanged,function(){e._cleanUp()})),this._model.onCurrentMarkerChanged(function(t){return!t&&e._cleanUp()},void 0,this._callOnClose),this.markerService.onMarkerChanged(this._onMarkerChanged,this,this._callOnClose),this._model},e.prototype.closeMarkersNavigation=function(){this._cleanUp(),this.editor.focus()},e.prototype._onMarkerChanged=function(e){var t=this;e.some(function(e){return t.editor.getModel().getAssociatedResource().toString()===e.toString()})&&this._model.setMarkers(this._getMarkers())},e.prototype._getMarkers=function(){var e=this.editor.getModel().getAssociatedResource(),t=this.markerService.read({resource:e});return t},e.ID="editor.contrib.markerController",e=__decorate([__param(1,m.IMarkerService),__param(2,f.IKeybindingService),__param(3,p.IEventService),__param(4,h.IEditorService)],e)}(),A=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.marker.next",t=__decorate([__param(2,v.ITelemetryService)],t)}(I),L=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.marker.prev",t=__decorate([__param(2,v.ITelemetryService)],t)}(I),O="markersNavigationVisible";S.CommonEditorRegistry.registerEditorAction(new S.EditorActionDescriptor(A,A.ID,n.localize(2,null),{context:S.ContextKey.EditorFocus,primary:r.KeyCode.F8})),S.CommonEditorRegistry.registerEditorAction(new S.EditorActionDescriptor(L,L.ID,n.localize(3,null),{context:S.ContextKey.EditorFocus,primary:r.KeyMod.Shift|r.KeyCode.F8})),S.CommonEditorRegistry.registerEditorCommand("closeMarkersNavigation",S.CommonEditorRegistry.commandWeight(50),{primary:r.KeyCode.Escape,secondary:[r.KeyMod.Shift|r.KeyCode.Escape]},!1,O,function(e,t,n){var i=D.getMarkerController(t);i.closeMarkersNavigation()}),w.EditorBrowserRegistry.registerEditorContribution(D)}),define("vs/editor/contrib/hover/common/hover",["require","exports","vs/base/common/arrays","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r,s){"use strict";function a(e,r){var s=e.getAssociatedResource(),a=t.ExtraInfoRegistry.ordered(e),c=[],u=a.map(function(e,t){return e.computeInfo(s,r).then(function(e){if(e){var n="undefined"!=typeof e.range,i="undefined"!=typeof e.value,o="undefined"!=typeof e.htmlContent&&e.htmlContent&&e.htmlContent.length>0;n&&(i||o)&&(c[t]=e)}},function(e){i.onUnexpectedError(e)})});return o.TPromise.join(u).then(function(){return n.coalesce(c)})}t.ExtraInfoRegistry=new s["default"]("extraInfoSupport"),t.getExtraInfoAtPosition=a,r.CommonEditorRegistry.registerDefaultLanguageCommand("_executeHoverProvider",a)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/hover/browser/modesContentHover",["require","exports","vs/nls!vs/editor/contrib/hover/browser/modesContentHover","vs/base/common/uri","vs/base/common/winjs.base","vs/base/browser/htmlContentRenderer","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/core/range","vs/editor/common/modes/textToHtmlTokenizer","../common/hover","./hoverOperation","./hoverWidgets","vs/css!vs/base/browser/ui/progressbar/progressbar"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(){function e(e){this._editor=e,this._range=null}return e.prototype.setRange=function(e){
this._range=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeAsync=function(){var e=this._editor.getModel();return u.ExtraInfoRegistry.has(e)?u.getExtraInfoAtPosition(e,{lineNumber:this._range.startLineNumber,column:this._range.startColumn}):o.TPromise.as(null)},e.prototype.computeSync=function(){var e=this,t=[],n=this._range.startLineNumber;if(n>this._editor.getModel().getLineCount())return t;var i=this._editor.getLineDecorations(n),o=this._editor.getModel().getLineMaxColumn(n);return i.forEach(function(i){var r=i.range.startLineNumber===n?i.range.startColumn:1,s=i.range.endLineNumber===n?i.range.endColumn:o;if(r<=e._range.startColumn&&e._range.endColumn<=s&&(i.options.hoverMessage||i.options.htmlMessage&&i.options.htmlMessage.length>0)){var c={value:i.options.hoverMessage,range:new a.Range(e._range.startLineNumber,r,e._range.startLineNumber,s)};i.options.htmlMessage&&(c.htmlContent=i.options.htmlMessage),t.push(c)}}),t},e.prototype.onResult=function(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)},e.prototype.getResult=function(){return this._result.slice(0)},e.prototype.getResultWithLoadingMessage=function(){return this._result.slice(0).concat([this._getLoadingMessage()])},e.prototype._getLoadingMessage=function(){return{range:this._range,htmlContent:[{tagName:"div",className:"",children:[{text:n.localize(0,null)}]}]}},e}(),p=function(e){function t(n,i,o){var r=this;e.call(this,t.ID,n),this._computer=new h(this._editor),this._highlightDecorations=[],this._isChangingDecorations=!1,this._editorService=i,this._keybindingService=o,this._hoverOperation=new l.HoverOperation(this._computer,function(e){return r._withResult(e,!0)},null,function(e){return r._withResult(e,!1)})}return __extends(t,e),t.prototype.onModelDecorationsChanged=function(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start())},t.prototype.startShowingAt=function(e,t){if(!this._lastRange||!this._lastRange.equalsRange(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition.lineNumber!==e.startLineNumber)this.hide();else{for(var n=[],i=0,o=this._messages.length;o>i;i++){var r=this._messages[i],s=r.range;s.startColumn<=e.startColumn&&s.endColumn>=e.endColumn&&n.push(r)}n.length>0?this._renderMessages(e,n):this.hide()}this._lastRange=e,this._computer.setRange(e),this._shouldFocus=t,this._hoverOperation.start()}},t.prototype.hide=function(){this._lastRange=null,this._hoverOperation.cancel(),e.prototype.hide.call(this),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1},t.prototype._withResult=function(e,t){this._messages=e,this._lastRange&&this._messages.length>0?this._renderMessages(this._lastRange,this._messages):t&&this.hide()},t.prototype._renderMessages=function(e,t){var n=this,o=Number.MAX_VALUE,u=t[0].range,l=document.createDocumentFragment();t.forEach(function(e){if(e.range){o=Math.min(o,e.range.startColumn),u=a.Range.plusRange(u,e.range);var t=document.createElement("div"),d=null,h=t;e.className&&(d=document.createElement("span"),d.className=e.className,h=d,t.appendChild(d)),e.htmlContent&&e.htmlContent.length>0?e.htmlContent.forEach(function(e){h.appendChild(r.renderHtml(e,{actionCallback:function(e){var t;if(s.KeybindingsRegistry.getCommands()[e])t=n._keybindingService.executeCommand(e);else try{var o=i["default"].parse(e);t=n._editorService.openEditor({resource:o})}catch(r){}t&&t.then(void 0,function(e){return console.log(e)})},codeBlockRenderer:function(e,t){var i,o=n._editor.getModel();return o.isDisposed()||(i=o.getMode()),c.tokenizeToString(t,o.getMode())}}))}):h.textContent=e.value,l.appendChild(t)}}),this._domNode.textContent="",this._domNode.appendChild(l),this.showAt({lineNumber:e.startLineNumber,column:o},this._shouldFocus),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[{range:u,options:{className:"hoverHighlight"}}]),this._isChangingDecorations=!1},t.ID="editor.contrib.modesContentHoverWidget",t}(d.ContentHoverWidget);t.ModesContentHoverWidget=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/hover/browser/hover",["require","exports","vs/nls!vs/editor/contrib/hover/browser/hover","vs/base/common/keyCodes","vs/base/common/platform","vs/base/common/winjs.base","vs/platform/editor/common/editor","vs/platform/keybinding/common/keybindingService","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","./modesContentHover","./modesGlyphHover","vs/css!./hover"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=function(){function e(e,t,n){var i=this;this._editor=e,this._toUnhook=[],e.getConfiguration().hover&&(this._toUnhook.push(this._editor.addListener(d.EventType.MouseDown,function(e){return i._onEditorMouseDown(e)})),this._toUnhook.push(this._editor.addListener(d.EventType.MouseMove,function(e){return i._onEditorMouseMove(e)})),this._toUnhook.push(this._editor.addListener(d.EventType.MouseLeave,function(e){return i._hideWidgets()})),this._toUnhook.push(this._editor.addListener(d.EventType.KeyDown,function(e){return i._onKeyDown(e)})),this._toUnhook.push(this._editor.addListener(d.EventType.ModelChanged,function(){return i._hideWidgets()})),this._toUnhook.push(this._editor.addListener(d.EventType.ModelDecorationsChanged,function(){return i._onModelDecorationsChanged()})),this._toUnhook.push(this._editor.addListener("scroll",function(){return i._hideWidgets()})),this._contentWidget=new f.ModesContentHoverWidget(e,t,n),this._glyphWidget=new m.ModesGlyphHoverWidget(e))}return e.getModesHoverController=function(t){return t.getContribution(e.ID)},e.prototype._onModelDecorationsChanged=function(){this._contentWidget.onModelDecorationsChanged(),this._glyphWidget.onModelDecorationsChanged()},e.prototype._onEditorMouseDown=function(e){var t=e.target.type;t===d.MouseTargetType.CONTENT_WIDGET&&e.target.detail===f.ModesContentHoverWidget.ID||t===d.MouseTargetType.OVERLAY_WIDGET&&e.target.detail===m.ModesGlyphHoverWidget.ID||this._hideWidgets()},e.prototype._onEditorMouseMove=function(e){var t=e.target.type,n=o.isMacintosh?"metaKey":"ctrlKey";(t!==d.MouseTargetType.CONTENT_WIDGET||e.target.detail!==f.ModesContentHoverWidget.ID||e.event[n])&&(t!==d.MouseTargetType.OVERLAY_WIDGET||e.target.detail!==m.ModesGlyphHoverWidget.ID||e.event[n])&&(this._editor.getConfiguration().hover&&t===d.MouseTargetType.CONTENT_TEXT?(this._glyphWidget.hide(),this._contentWidget.startShowingAt(e.target.range,!1)):t===d.MouseTargetType.GUTTER_GLYPH_MARGIN?(this._contentWidget.hide(),this._glyphWidget.startShowingAt(e.target.position.lineNumber)):this._hideWidgets())},e.prototype._onKeyDown=function(e){var t=o.isMacintosh?i.KeyCode.Meta:i.KeyCode.Ctrl;e.keyCode!==t&&this._hideWidgets()},e.prototype._hideWidgets=function(){this._glyphWidget.hide(),this._contentWidget.hide()},e.prototype.showContentHover=function(e,t){this._contentWidget.startShowingAt(e,t)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(;this._toUnhook.length>0;)this._toUnhook.pop()();this._glyphWidget&&(this._glyphWidget.dispose(),this._glyphWidget=null),this._contentWidget&&(this._contentWidget.dispose(),this._contentWidget=null)},e.ID="editor.contrib.hover",e=__decorate([__param(1,s.IEditorService),__param(2,a.IKeybindingService)],e)}(),g=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getPosition(),t=new c.Range(e.lineNumber,e.column,e.lineNumber,e.column);return this.editor.getContribution(v.ID).showContentHover(t,!0),r.TPromise.as(null)},t.ID="editor.action.showHover",t}(u.EditorAction);p.EditorBrowserRegistry.registerEditorContribution(v),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(g,g.ID,n.localize(0,null),{context:h.ContextKey.EditorTextFocus,kbExpr:a.KbExpr.has(d.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),primary:i.KeyMod.chord(i.KeyMod.CtrlCmd|i.KeyCode.KEY_K,i.KeyMod.CtrlCmd|i.KeyCode.KEY_I)}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",["require","exports","vs/nls!vs/editor/contrib/inPlaceReplace/common/inPlaceReplace","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/services/editorWorkerService","./inPlaceReplaceCommand"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorWorkerService=r,this.up=i,this.requestIdPool=0,this.currentRequest=o.TPromise.as(null),this.decorationRemover=o.TPromise.as(null),this.decorationIds=[]}return __extends(t,e),t.prototype.run=function(){var e=this;this.currentRequest.cancel();var n=this.editor.getSelection(),i=this.editor.getModel(),s=i.getMode().inplaceReplaceSupport,c=i.getAssociatedResource();if(n.startLineNumber!==n.endLineNumber)return null;var u=this.editor.captureState(a.CodeEditorStateFlag.Value,a.CodeEditorStateFlag.Position);return this.currentRequest=this.editorWorkerService.navigateValueSet(c,n,this.up),this.currentRequest=this.currentRequest.then(function(t){return t&&t.range&&t.value?t:s?s.navigateValueSet(c,n,e.up):null}),this.currentRequest.then(function(i){if(i&&i.range&&i.value&&u.validate(e.editor)){var s=r.Range.lift(i.range),a=i.range,c=i.value.length-(n.endColumn-n.startColumn);a.endColumn=a.startColumn+i.value.length,n.endColumn+=c>1?c-1:0;var d=new l.InPlaceReplaceCommand(s,n,i.value);return e.editor.executeCommand(e.id,d),e.decorationIds=e.editor.deltaDecorations(e.decorationIds,[{range:a,options:t.DECORATION}]),e.decorationRemover.cancel(),e.decorationRemover=o.TPromise.timeout(350),e.decorationRemover.then(function(){e.editor.changeDecorations(function(t){e.decorationIds=t.deltaDecorations(e.decorationIds,[])})}),!0}})},t.DECORATION={className:"valueSetReplacement"},t=__decorate([__param(3,u.IEditorWorkerService)],t)}(s.EditorAction),h=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.inPlaceReplace.up",t=__decorate([__param(2,u.IEditorWorkerService)],t)}(d),p=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.inPlaceReplace.down",t=__decorate([__param(2,u.IEditorWorkerService)],t)}(d);c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(h,h.ID,n.localize(0,null),{context:c.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.US_COMMA})),c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(p,p.ID,n.localize(1,null),{context:c.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.US_DOT}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/linesOperations/common/linesOperations",["require","exports","vs/nls!vs/editor/contrib/linesOperations/common/linesOperations","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/contrib/linesOperations/common/sortLinesCommand","vs/editor/common/commands/trimTrailingWhitespaceCommand","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","./copyLinesCommand","./deleteLinesCommand","./moveLinesCommand"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t,n,i){e.call(this,t,n),this.down=i}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new l.CopyLinesCommand(t[n],this.down));return this.editor.executeCommands(this.id,e),o.TPromise.as(!0)},t}(a.EditorAction),f=function(e){function t(t,n){e.call(this,t,n,!1)}return __extends(t,e),t.ID="editor.action.copyLinesUpAction",t}(p),m=function(e){function t(t,n){e.call(this,t,n,!0)}return __extends(t,e),t.ID="editor.action.copyLinesDownAction",t}(p),v=function(e){function t(t,n,i){e.call(this,t,n),this.down=i}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new h.MoveLinesCommand(t[n],this.down));return this.editor.executeCommands(this.id,e),o.TPromise.as(!0)},t}(a.EditorAction),g=function(e){function t(t,n){e.call(this,t,n,!1)}return __extends(t,e),t.ID="editor.action.moveLinesUpAction",t}(v),y=function(e){function t(t,n){e.call(this,t,n,!0)}return __extends(t,e),t.ID="editor.action.moveLinesDownAction",t}(v),_=function(e){function t(t,n,i){e.call(this,t,n),this.descending=i}return __extends(t,e),t.prototype.run=function(){var e=new r.SortLinesCommand(this.editor.getSelection(),this.descending);return this.editor.executeCommands(this.id,[e]),o.TPromise.as(!0)},t}(a.EditorAction),b=function(e){function t(t,n){e.call(this,t,n,!1)}return __extends(t,e),t.ID="editor.action.sortLinesAscending",t}(_),S=function(e){function t(t,n){e.call(this,t,n,!0)}return __extends(t,e),t.ID="editor.action.sortLinesDescending",t}(_),E=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=new s.TrimTrailingWhitespaceCommand(this.editor.getSelection());return this.editor.executeCommands(this.id,[e]),o.TPromise.as(!0)},t.ID="editor.action.trimTrailingWhitespace",t}(a.EditorAction),w=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype._getLinesToRemove=function(){var e=this.editor.getSelections().map(function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,endLineNumber:t,positionColumn:e.positionColumn}});e.sort(function(e,t){return e.startLineNumber-t.startLineNumber});for(var t=[],n=e[0],i=1;i<e.length;i++)n.endLineNumber+1===e[i].startLineNumber?n.endLineNumber=e[i].endLineNumber:(t.push(n),n=e[i]);return t.push(n),t},t}(a.EditorAction),C=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this._getLinesToRemove(),t=e.map(function(e){return new d.DeleteLinesCommand(e.startLineNumber,e.endLineNumber,e.positionColumn)});return this.editor.executeCommands(this.id,t),o.TPromise.as(!0)},t.ID="editor.action.deleteLines",t}(w),T=function(e){function t(t,n){e.call(this,t,n,c.Handler.Indent)}return __extends(t,e),t.ID="editor.action.indentLines",t}(a.HandlerEditorAction),k=function(e){function t(t,n){e.call(this,t,n,c.Handler.Outdent)}return __extends(t,e),t.ID="editor.action.outdentLines",t}(a.HandlerEditorAction),x=function(e){function t(t,n){e.call(this,t,n,c.Handler.LineInsertBefore)}return __extends(t,e),t.ID="editor.action.insertLineBefore",t}(a.HandlerEditorAction),I=function(e){function t(t,n){e.call(this,t,n,c.Handler.LineInsertAfter)}return __extends(t,e),t.ID="editor.action.insertLineAfter",t}(a.HandlerEditorAction);u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(C,C.ID,n.localize(0,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_K})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(b,b.ID,n.localize(1,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_2})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(S,S.ID,n.localize(2,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_3})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(E,E.ID,n.localize(3,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_X})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(y,y.ID,n.localize(4,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.Alt|i.KeyCode.DownArrow,linux:{primary:i.KeyMod.Alt|i.KeyCode.DownArrow}})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(g,g.ID,n.localize(5,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.Alt|i.KeyCode.UpArrow,linux:{primary:i.KeyMod.Alt|i.KeyCode.UpArrow}})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(m,m.ID,n.localize(6,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.Alt|i.KeyMod.Shift|i.KeyCode.DownArrow,linux:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyMod.Shift|i.KeyCode.DownArrow}})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(f,f.ID,n.localize(7,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.Alt|i.KeyMod.Shift|i.KeyCode.UpArrow,linux:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyMod.Shift|i.KeyCode.UpArrow}})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(T,T.ID,n.localize(8,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.US_CLOSE_SQUARE_BRACKET})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(k,k.ID,n.localize(9,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.US_OPEN_SQUARE_BRACKET})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(x,x.ID,n.localize(10,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.Enter})),u.CommonEditorRegistry.registerEditorAction(new u.EditorActionDescriptor(I,I.ID,n.localize(11,null),{context:u.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.Enter}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/links/browser/links",["require","exports","vs/nls!vs/editor/contrib/links/browser/links","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/platform","vs/base/common/severity","vs/base/common/uri","vs/base/common/winjs.base","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/services/editorWorkerService","vs/css!./links"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(){function e(e,t){this.link=e,this.decorationId=t}return e.decoration=function(t){return{range:{startLineNumber:t.range.startLineNumber,startColumn:t.range.startColumn,endLineNumber:t.range.startLineNumber,endColumn:t.range.endColumn},options:e._getOptions(t,!1)}},e._getOptions=function(e,t){var n="";return e.extraInlineClassName&&(n=e.extraInlineClassName+" "),n+=t?y.CLASS_NAME_ACTIVE:y.CLASS_NAME,{stickiness:f.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,inlineClassName:n,hoverMessage:y.HOVER_MESSAGE_GENERAL}},e.prototype.activate=function(t){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,!0))},e.prototype.deactivate=function(t){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,!1))},e}(),y=function(){function e(e,t,n,i){var o=this;this.editor=e,this.editorService=t,this.messageService=n,this.editorWorkerService=i,this.listenersToRemove=[],this.listenersToRemove.push(e.addListener("change",function(e){return o.onChange()})),this.listenersToRemove.push(e.addListener(f.EventType.ModelChanged,function(e){return o.onModelChanged()})),this.listenersToRemove.push(e.addListener(f.EventType.ModelModeChanged,function(e){return o.onModelModeChanged()})),this.listenersToRemove.push(e.addListener(f.EventType.ModelModeSupportChanged,function(e){e.linkSupport&&o.onModelModeChanged()})),this.listenersToRemove.push(this.editor.addListener(f.EventType.MouseUp,function(e){return o.onEditorMouseUp(e)})),this.listenersToRemove.push(this.editor.addListener(f.EventType.MouseMove,function(e){return o.onEditorMouseMove(e)})),this.listenersToRemove.push(this.editor.addListener(f.EventType.KeyDown,function(e){return o.onEditorKeyDown(e)})),this.listenersToRemove.push(this.editor.addListener(f.EventType.KeyUp,function(e){return o.onEditorKeyUp(e)})),this.timeoutPromise=null,this.computePromise=null,this.currentOccurences={},this.activeLinkDecorationId=null,this.beginCompute()}return e.prototype.isComputing=function(){return c.TPromise.is(this.computePromise)},e.prototype.onModelChanged=function(){this.lastMouseEvent=null,this.currentOccurences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()},e.prototype.onModelModeChanged=function(){this.stop(),this.beginCompute()},e.prototype.onChange=function(){var t=this;this.timeoutPromise||(this.timeoutPromise=c.TPromise.timeout(e.RECOMPUTE_TIME),this.timeoutPromise.then(function(){t.timeoutPromise=null,t.beginCompute()}))},e.prototype.beginCompute=function(){var t=this;if(this.editor.getModel()){var n=c.TPromise.as(null),i=this.editor.getModel().getMode();i.linkSupport&&(n=i.linkSupport.computeLinks(this.editor.getModel().getAssociatedResource()));var o=this.editorWorkerService.computeLinks(this.editor.getModel().getAssociatedResource());this.computePromise=c.TPromise.join([n,o]).then(function(t){var n=t[0],i=t[1];return n&&0!==n.length?i&&0!==i.length?e._linksUnion(n,i):n||[]:i||[]}),this.computePromise.then(function(e){t.updateDecorations(e),t.computePromise=null})}},e._linksUnion=function(e,t){var n,i,o,r,s,a,c,u=[];for(n=0,o=0,i=e.length,r=t.length;i>n&&r>o;)s=e[n],a=t[o],d.Range.areIntersectingOrTouching(s.range,a.range)?n++:(c=d.Range.compareRangesUsingStarts(s.range,a.range),0>c?(u.push(s),n++):(u.push(a),o++));for(;i>n;n++)u.push(e[n]);for(;r>o;o++)u.push(t[o]);return u},e.prototype.updateDecorations=function(e){var t=this;this.editor.changeDecorations(function(n){var i=[];for(var o in t.currentOccurences)if(t.currentOccurences.hasOwnProperty(o)){var r=t.currentOccurences[o];i.push(r.decorationId)}var s=[];if(e)for(var a=0;a<e.length;a++)s.push(g.decoration(e[a]));var c=n.deltaDecorations(i,s);t.currentOccurences={},t.activeLinkDecorationId=null;for(var u=0,l=c.length;l>u;u++){var r=new g(e[u],c[u]);t.currentOccurences[r.decorationId]=r}})},e.prototype.onEditorKeyDown=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&this.lastMouseEvent&&this.onEditorMouseMove(this.lastMouseEvent,t)},e.prototype.onEditorKeyUp=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&this.cleanUpActiveLinkDecoration()},e.prototype.onEditorMouseMove=function(e,t){var n=this;if(this.lastMouseEvent=e,this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var i=this.getLinkOccurence(e.target.position);i&&this.editor.changeDecorations(function(e){i.activate(e),n.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()},e.prototype.cleanUpActiveLinkDecoration=function(){if(this.activeLinkDecorationId){var e=this.currentOccurences[this.activeLinkDecorationId];e&&this.editor.changeDecorations(function(t){e.deactivate(t)}),this.activeLinkDecorationId=null}},e.prototype.onEditorMouseUp=function(e){if(this.isEnabled(e)){var t=this.getLinkOccurence(e.target.position);t&&this.openLinkOccurence(t,e.event.altKey)}},e.prototype.openLinkOccurence=function(e,t){if(this.editorService){var o=e.link,r=o.url,c=r.indexOf("#"),u=-1,l=-1;if(c>=0){var d=r.substr(c+1),h=d.split(",");h.length>0&&(u=Number(h[0])),h.length>1&&(l=Number(h[1])),(u>=0||l>=0)&&(r=r.substr(0,c))}var p;try{p=a["default"].parse(r)}catch(f){return void this.messageService.show(s["default"].Warning,n.localize(2,null,r))}var m={resource:p};u>=0&&(m.options={selection:{startLineNumber:u,startColumn:l}}),this.editorService.openEditor(m,t).done(null,i.onUnexpectedError)}},e.prototype.getLinkOccurence=function(e){for(var t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},null,!0),n=0;n<t.length;n++){var i=t[n],o=this.currentOccurences[i.id];if(o)return o}return null},e.prototype.isEnabled=function(t,n){return t.target.type===f.MouseTargetType.CONTENT_TEXT&&(t.event[e.TRIGGER_MODIFIER]||n&&n.keyCode===e.TRIGGER_KEY_VALUE)},e.prototype.stop=function(){this.timeoutPromise&&(this.timeoutPromise.cancel(),this.timeoutPromise=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)},e.prototype.dispose=function(){this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.stop()},e.RECOMPUTE_TIME=1e3,e.TRIGGER_KEY_VALUE=r.isMacintosh?o.KeyCode.Meta:o.KeyCode.Ctrl,e.TRIGGER_MODIFIER=r.isMacintosh?"metaKey":"ctrlKey",e.HOVER_MESSAGE_GENERAL=r.isMacintosh?n.localize(0,null):n.localize(1,null),e.CLASS_NAME="detected-link",e.CLASS_NAME_ACTIVE="detected-link-active",e}(),_=function(e){function t(t,n,i,o,r){e.call(this,t,n,p.Behaviour.WidgetFocus|p.Behaviour.UpdateOnCursorPositionChange),this._linkDetector=new y(n,i,o,r)}return __extends(t,e),t.prototype.dispose=function(){this._linkDetector.dispose(),e.prototype.dispose.call(this)},t.prototype.getEnablementState=function(){return this._linkDetector.isComputing()?!0:!!this._linkDetector.getLinkOccurence(this.editor.getPosition())},t.prototype.run=function(){var e=this._linkDetector.getLinkOccurence(this.editor.getPosition());return e&&this._linkDetector.openLinkOccurence(e,!1),c.TPromise.as(null)},t.ID="editor.action.openLink",t=__decorate([__param(2,u.IEditorService),__param(3,l.IMessageService),__param(4,v.IEditorWorkerService)],t)}(h.EditorAction);m.CommonEditorRegistry.registerEditorAction(new m.EditorActionDescriptor(_,_.ID,n.localize(3,null)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/multicursor/common/multicursor",["require","exports","vs/nls!vs/editor/contrib/multicursor/common/multicursor","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(e){function t(t,n){e.call(this,t,n,s.Handler.AddCursorUp)}return __extends(t,e),t.ID="editor.action.insertCursorAbove",t}(r.HandlerEditorAction),u=function(e){function t(t,n){e.call(this,t,n,s.Handler.AddCursorDown)}return __extends(t,e),t.ID="editor.action.insertCursorBelow",t}(r.HandlerEditorAction),l=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getSelection();if(!e.isEmpty()){for(var t=this.editor.getModel(),n=new Array,i=e.getStartPosition(),r=e.getEndPosition(),s=i.lineNumber;s<=r.lineNumber;s++)if(s!==r.lineNumber){var a=t.getLineMaxColumn(s);n.push({selectionStartLineNumber:s,selectionStartColumn:a,positionLineNumber:s,positionColumn:a})}else r.column>0&&n.push({selectionStartLineNumber:r.lineNumber,selectionStartColumn:r.column,positionLineNumber:r.lineNumber,positionColumn:r.column});this.editor.setSelections(n)}return o.TPromise.as(!0)},t.ID="editor.action.insertCursorAtEndOfEachLineSelected",t}(r.EditorAction);a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(c,c.ID,n.localize(0,null),{context:a.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.UpArrow,linux:{primary:i.KeyMod.Shift|i.KeyMod.Alt|i.KeyCode.UpArrow,secondary:[i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.UpArrow]}})),a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(u,u.ID,n.localize(1,null),{context:a.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.DownArrow,linux:{primary:i.KeyMod.Shift|i.KeyMod.Alt|i.KeyCode.DownArrow,secondary:[i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.DownArrow]}})),a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(l,l.ID,n.localize(2,null),{context:a.ContextKey.EditorTextFocus,primary:i.KeyMod.Shift|i.KeyMod.Alt|i.KeyCode.KEY_I}))}),define("vs/editor/contrib/parameterHints/common/parameterHints",["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r){"use strict";function s(e,n,o){var r=t.ParameterHintsRegistry.ordered(e)[0];return r?r.getParameterHints(e.getAssociatedResource(),n,o):i.TPromise.as(void 0)}t.ParameterHintsRegistry=new r["default"]("parameterHintsSupport"),t.getParameterHints=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeSignatureHelpProvider",function(e,t,i){var o=i.triggerCharacter;if(o&&"string"!=typeof o)throw n.illegalArgument("triggerCharacter");return s(e,t,o)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/parameterHints/browser/parameterHintsModel",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/editor/common/editorCommon","../common/parameterHints"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(e){function t(i){var o=this;e.call(this,["cancel","hint","destroy"]),this.editor=i,this.toDispose=[],this.triggerCharactersListeners=[],this.throttledDelayer=new n.ThrottledDelayer(t.DELAY),this.active=!1,this.prevResult=null,this.event(this.editor,s.EventType.ModelChanged,function(e){return o.onModelChanged()}),this.event(this.editor,s.EventType.ModelModeChanged,function(e){return o.onModelChanged()}),this.event(this.editor,s.EventType.ModelModeSupportChanged,function(e){return o.onModeChanged(e)}),this.event(this.editor,s.EventType.CursorSelectionChanged,function(e){return o.onCursorChange(e)}),this.toDispose.push(a.ParameterHintsRegistry.onDidChange(this.onModelChanged,this)),this.onModelChanged()}return __extends(t,e),t.prototype.cancel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.active=!1,t||(this.prevResult=null),this.throttledDelayer.cancel(),e||this.emit("cancel")},t.prototype.trigger=function(e,n){
var i=this;return void 0===n&&(n=t.DELAY),a.ParameterHintsRegistry.has(this.editor.getModel())?(this.cancel(!0,!0),this.throttledDelayer.trigger(function(){return i.doTrigger(e)},n)):void 0},t.prototype.doTrigger=function(e){var t=this;return a.getParameterHints(this.editor.getModel(),this.editor.getPosition(),e).then(null,i.onUnexpectedError).then(function(e){if(!e||0===e.signatures.length)return t.cancel(),t.emit("cancel"),!1;t.active=!0,t.prevResult=e;var n={hints:e};return t.emit("hint",n),!0})},t.prototype.isTriggered=function(){return this.active||this.throttledDelayer.isTriggered()},t.prototype.onModelChanged=function(){var e=this;this.triggerCharactersListeners=r.disposeAll(this.triggerCharactersListeners);var t=this.editor.getModel();if(t){var n=a.ParameterHintsRegistry.ordered(t)[0];n&&(this.triggerCharactersListeners=n.getParameterHintsTriggerCharacters().map(function(i){var o=e.editor.addTypingListener(i,function(){var o=e.editor.getPosition(),r=t.getLineContext(o.lineNumber);n.shouldTriggerParameterHints(r,o.column-1)&&e.trigger(i)});return{dispose:o}}))}},t.prototype.onModeChanged=function(e){e.parameterHintsSupport&&this.onModelChanged()},t.prototype.onCursorChange=function(e){"mouse"===e.source?this.cancel():this.isTriggered()&&this.trigger()},t.prototype.event=function(e,t,n){this.toDispose.push(e.addListener2(t,n))},t.prototype.dispose=function(){this.cancel(!0),this.triggerCharactersListeners=r.disposeAll(this.triggerCharactersListeners),this.toDispose=r.disposeAll(this.toDispose),this.emit("destroy",null),e.prototype.dispose.call(this)},t.DELAY=120,t}(o.EventEmitter);t.ParameterHintsModel=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/parameterHints/browser/parameterHints",["require","exports","vs/nls!vs/editor/contrib/parameterHints/browser/parameterHints","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/platform/keybinding/common/keybindingService","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","../common/parameterHints","./parameterHintsModel","./parameterHintsWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(){function e(e,t){var n=this;this.editor=e,this.model=new l.ParameterHintsModel(this.editor),this.parameterHintsVisible=t.createKey(f,!1),this.widget=new d.ParameterHintsWidget(this.model,this.editor,function(){n.parameterHintsVisible.set(!0)},function(){n.parameterHintsVisible.reset()})}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.dispose=function(){this.model.dispose(),this.model=null,this.widget.destroy(),this.widget=null},e.prototype.getId=function(){return e.ID},e.prototype.closeWidget=function(){this.widget.cancel()},e.prototype.showPrevHint=function(){this.widget.selectPrevious()},e.prototype.showNextHint=function(){this.widget.selectNext()},e.prototype.trigger=function(){this.model.trigger(void 0,0)},e.ID="editor.controller.parameterHints",e=__decorate([__param(1,r.IKeybindingService)],e)}(),p=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){return u.ParameterHintsRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.run=function(){return h.get(this.editor).trigger(),o.TPromise.as(!0)},t.ID="editor.action.triggerParameterHints",t}(s.EditorAction);t.TriggerParameterHintsAction=p;var f="parameterHintsVisible",m=a.CommonEditorRegistry.commandWeight(75);c.EditorBrowserRegistry.registerEditorContribution(h),a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(p,p.ID,n.localize(0,null),{context:a.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.Space})),a.CommonEditorRegistry.registerEditorCommand("closeParameterHints",m,{primary:i.KeyCode.Escape,secondary:[i.KeyMod.Shift|i.KeyCode.Escape]},!0,f,function(e,t,n){h.get(t).closeWidget()}),a.CommonEditorRegistry.registerEditorCommand("showPrevParameterHint",m,{primary:i.KeyCode.UpArrow,secondary:[i.KeyMod.Alt|i.KeyCode.UpArrow]},!0,f,function(e,t,n){h.get(t).showPrevHint()}),a.CommonEditorRegistry.registerEditorCommand("showNextParameterHint",m,{primary:i.KeyCode.DownArrow,secondary:[i.KeyMod.Alt|i.KeyCode.DownArrow]},!0,f,function(e,t,n){h.get(t).showNextHint()})}),define("vs/editor/contrib/quickFix/common/quickFix",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e,i){var r=[],s=0,a=t.QuickFixRegistry.all(e).map(function(t){return t.getQuickFixes(e.getAssociatedResource(),i).then(function(e){if(Array.isArray(e))for(var n=0,i=e;n<i.length;n++){var o=i[n];r.push({command:o.command,score:o.score,id:"quickfix_#"+s++,support:t})}},function(e){n.onUnexpectedError(e)})});return o.TPromise.join(a).then(function(){return r})}t.QuickFixRegistry=new a["default"]("quickFixSupport"),t.getQuickFixes=u,s.CommonEditorRegistry.registerLanguageCommand("_executeCodeActionProvider",function(e,t){var o=t.resource,s=t.range;if(!(o instanceof i["default"]&&r.Range.isIRange(s)))throw n.illegalArgument();var a=e.get(c.IModelService).getModel(o);if(!a)throw n.illegalArgument();return u(a,s)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/quickFix/browser/quickFixModel",["require","exports","vs/base/common/arrays","vs/base/common/async","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/timer","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommon","../common/quickFix","./lightBulpWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p;!function(e){e[e.NOT_ACTIVE=0]="NOT_ACTIVE",e[e.MANUAL_TRIGGER=1]="MANUAL_TRIGGER",e[e.AUTO_TRIGGER=2]="AUTO_TRIGGER"}(p||(p={}));var f=function(e){function t(t,n,i){var o=this;e.call(this),this.editor=t,this.markerService=n,this.onAccept=i,this.quickFixRequestPromise=null,this.lightBulpDecoration=[],this.toDispose=[],this.toLocalDispose=[],this.lightBulp=new h.LightBulpWidget(t,function(e){o.onLightBulpClicked(e)}),this.enableAutoQuckFix=!1,this.autoSuggestDelay=this.editor.getConfiguration().quickSuggestionsDelay,(isNaN(this.autoSuggestDelay)||!this.autoSuggestDelay&&0!==this.autoSuggestDelay||this.autoSuggestDelay>2e3||this.autoSuggestDelay<0)&&(this.autoSuggestDelay=300),this.toDispose.push(this.editor.addListener2(l.EventType.ModelChanged,function(){return o.onModelChanged()})),this.toDispose.push(this.editor.addListener2(l.EventType.ModelModeChanged,function(){return o.onModelChanged()})),this.toDispose.push(this.editor.addListener2(l.EventType.ModelModeSupportChanged,function(e){e.quickFixSupport&&o.onModelChanged()})),this.toDispose.push(d.QuickFixRegistry.onDidChange(this.onModelChanged,this))}return __extends(t,e),t.prototype.onModelChanged=function(){var e=this;return this.cancelDialog(),this.localDispose(),this.lastMarker=null,this.lightBulpPosition=null,this.markers=null,this.updateScheduler=null,!d.QuickFixRegistry.has(this.editor.getModel())||this.editor.getConfiguration().readOnly?void this.setDecoration(null):(this.markerService.onMarkerChanged(this.onMarkerChanged,this,this.toLocalDispose),void this.toLocalDispose.push(this.editor.addListener2(l.EventType.CursorPositionChanged,function(t){e.onCursorPositionChanged()})))},t.prototype.onLightBulpClicked=function(e){this.triggerDialog(!0,e)},t.prototype.isSimilarMarker=function(e,t){return e?t&&e.owner===t.owner&&e.code===t.code:!t},t.prototype.onMarkerChanged=function(e){var t=this.editor.getModel();if(t){var n=t.getAssociatedResource();if(e.some(function(e){return n.toString()===e.toString()})){var i=this.lastMarker;this.markers=null,this.lastMarker=null;var o=this.findMarker(this.editor.getPosition(),!1);this.isSimilarMarker(o,i)?this.lastMarker=o:this.onCursorPositionChanged()}}},t.prototype.setDecoration=function(e){this.lightBulpPosition=e,this.updateDecoration()},t.prototype.updateDecoration=function(){this.lightBulpPosition&&this.state===p.NOT_ACTIVE?this.lightBulp.show(this.lightBulpPosition):this.lightBulp.hide()},t.prototype.onCursorPositionChanged=function(){var e=this;this.triggerAutoSuggestPromise&&(this.triggerAutoSuggestPromise.cancel(),this.triggerAutoSuggestPromise=null),this.cancelDialog(),this.updateScheduler||(this.updateScheduler=new i.RunOnceScheduler(function(){var t=e.lastMarker,i=e.editor.getPosition();if(t&&u.Range.containsPosition(t,i))return void(e.lightBulpPosition&&e.setDecoration(i));if(e.lastMarker=t=e.findMarker(i,!1),!t)return void e.setDecoration(null);var r=a.start(a.Topic.EDITOR,"quickfix/lighbulp"),s=e.computeFixes(t);s.done(function(o){e.setDecoration(n.isFalsyOrEmpty(o)?null:i),e.triggerAutoSuggest(t),r.stop()},function(t){o.onUnexpectedError(t),e.setDecoration(null),r.stop()})},250),this.toLocalDispose.push(this.updateScheduler)),this.updateScheduler.schedule()},t.prototype.computeFixes=function(e){var t=this.editor.getModel();return d.QuickFixRegistry.has(t)?this.quickFixRequestPromise&&e===this.quickFixRequestPromiseRange?this.quickFixRequestPromise:(this.quickFixRequestPromise&&(this.quickFixRequestPromise.cancel(),this.quickFixRequestPromise=null),this.quickFixRequestPromiseRange=e,this.quickFixRequestPromise=d.getQuickFixes(t,e),this.quickFixRequestPromise):c.TPromise.as(null)},t.prototype.getMarkers=function(){if(null!==this.markers)return this.markers;var e=this.editor.getModel();if(e)return this.markers=this.markerService.read({resource:e.getAssociatedResource()}).sort(function(e,t){return e.startLineNumber-t.startLineNumber}),this.markers},t.prototype.findMarker=function(e,t){if(this.lastMarker&&u.Range.containsPosition(this.lastMarker,e))return this.lastMarker;for(var i=this.getMarkers(),o=null,r=0,s=e.lineNumber,a=n.findFirst(i,function(e){return e.startLineNumber>=s});a<i.length&&i[a].startLineNumber===s;){var c=i[a];if(c.startColumn<=e.column&&c.endColumn>=e.column)return c;if(t){var l=e.column<c.startColumn?c.startColumn-e.column:e.column-c.endColumn;(!o||r>l)&&(o=c,r=l)}a++}return o},t.prototype.cancelDialog=function(e){return void 0===e&&(e=!1),this.state!==p.NOT_ACTIVE?(this.state=p.NOT_ACTIVE,e||this.emit("cancel"),this.updateDecoration(),!0):!1},t.prototype.isAutoSuggest=function(){return this.state===p.AUTO_TRIGGER},t.prototype.triggerAutoSuggest=function(e){var t=this;this.enableAutoQuckFix&&this.state===p.NOT_ACTIVE&&(this.triggerAutoSuggestPromise=c.TPromise.timeout(this.autoSuggestDelay),this.triggerAutoSuggestPromise.then(function(){t.triggerAutoSuggestPromise=null,e===t.lastMarker&&t.triggerDialog(!0,t.editor.getPosition())}))},t.prototype.triggerDialog=function(e,t){var n=this;this.cancelDialog(!1);var i;if(e){if(i=this.findMarker(t,!0),!i)return}else i=this.findMarker(t,!0),i||(i=this.editor.getSelection()),u.Range.containsPosition(i,t)||this.editor.setPosition({lineNumber:i.startLineNumber,column:i.startColumn});var r=a.start(a.Topic.EDITOR,"quickfix/triggerdialog");this.state=e?p.AUTO_TRIGGER:p.MANUAL_TRIGGER,this.updateDecoration(),this.emit("loading",{auto:this.isAutoSuggest()}),this.computeFixes(i).done(function(e){e&&e.length>0?(e.sort(function(e,t){return t.score-e.score}),n.emit("suggest",{fixes:e,range:i,auto:n.isAutoSuggest()})):n.emit("empty",{auto:n.isAutoSuggest()}),r.stop()},function(e){o.onUnexpectedError(e),n.emit("empty",{auto:n.isAutoSuggest()}),r.stop()})},t.prototype.accept=function(e,t){return this.cancelDialog(),e?(this.onAccept(e,t),!0):!1},t.prototype.localDispose=function(){this.toLocalDispose=s.disposeAll(this.toLocalDispose),this.quickFixRequestPromise&&(this.quickFixRequestPromise.cancel(),this.quickFixRequestPromise=null)},t.prototype.dispose=function(){this.localDispose(),this.toDispose=s.disposeAll(this.toDispose),this.emit("destroy",null)},t}(r.EventEmitter);t.QuickFixModel=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/quickFix/browser/quickFix",["require","exports","vs/nls!vs/editor/contrib/quickFix/browser/quickFix","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/severity","vs/base/common/winjs.base","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/keybinding/common/keybindingService","vs/platform/markers/common/markers","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","vs/editor/common/services/bulkEdit","vs/editor/browser/editorBrowserExtensions","../common/quickFix","./quickFixModel","./quickFixSelectionWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";var b=function(){function e(e,t,n,i,o,r,s){var a=this;this.editor=e,this.model=new y.QuickFixModel(this.editor,t,this.onAccept.bind(this)),this.eventService=o,this.editorService=r,this.messageService=s,this.quickFixWidgetVisible=n.createKey(E,!1),this.suggestWidget=new _.QuickFixSelectionWidget(this.editor,i,function(){a.quickFixWidgetVisible.set(!0)},function(){a.quickFixWidgetVisible.reset()}),this.suggestWidget.setModel(this.model)}return e.getQuickFixController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.onAccept=function(e,t){var n=this,o=this.editor.getModel();o&&e.support.runQuickFixAction(this.editor.getModel().getAssociatedResource(),t,{command:e.command,score:e.score}).then(function(e){return e&&(e.message&&n.messageService.show(r["default"].Info,e.message),e.edits)?m.bulkEdit(n.eventService,n.editorService,n.editor,e.edits):s.TPromise.as(0)}).done(void 0,function(e){i.onUnexpectedError(e)})},e.prototype.run=function(){return this.model.triggerDialog(!1,this.editor.getPosition()),this.editor.focus(),s.TPromise.as(!1)},e.prototype.dispose=function(){this.suggestWidget&&(this.suggestWidget.destroy(),this.suggestWidget=null),this.model&&(this.model.dispose(),this.model=null)},e.prototype.acceptSelectedSuggestion=function(){this.suggestWidget&&this.suggestWidget.acceptSelectedSuggestion()},e.prototype.closeWidget=function(){this.model&&this.model.cancelDialog()},e.prototype.selectNextSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectNext()},e.prototype.selectNextPageSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectNextPage()},e.prototype.selectPrevSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectPrevious()},e.prototype.selectPrevPageSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectPreviousPage()},e.ID="editor.contrib.quickFixController",e=__decorate([__param(1,l.IMarkerService),__param(2,u.IKeybindingService),__param(3,h.ITelemetryService),__param(4,c.IEventService),__param(5,a.IEditorService),__param(6,d.IMessageService)],e)}();t.QuickFixController=b;var S=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){var e=this.editor.getModel();return g.QuickFixRegistry.has(e)&&!this.editor.getConfiguration().readOnly},t.prototype.run=function(){return b.getQuickFixController(this.editor).run()},t.ID="editor.action.quickFix",t}(p.EditorAction);t.QuickFixAction=S;var E="quickFixWidgetVisible",w=f.CommonEditorRegistry.commandWeight(80);f.CommonEditorRegistry.registerEditorAction(new f.EditorActionDescriptor(S,S.ID,n.localize(0,null),{context:f.ContextKey.EditorTextFocus,primary:o.KeyMod.CtrlCmd|o.KeyCode.US_DOT})),f.CommonEditorRegistry.registerEditorCommand("acceptQuickFixSuggestion",w,{primary:o.KeyCode.Enter,secondary:[o.KeyCode.Tab]},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.acceptSelectedSuggestion()}),f.CommonEditorRegistry.registerEditorCommand("closeQuickFixWidget",w,{primary:o.KeyCode.Escape,secondary:[o.KeyMod.Shift|o.KeyCode.Escape]},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.closeWidget()}),f.CommonEditorRegistry.registerEditorCommand("selectNextQuickFix",w,{primary:o.KeyCode.DownArrow},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.selectNextSuggestion()}),f.CommonEditorRegistry.registerEditorCommand("selectNextPageQuickFix",w,{primary:o.KeyCode.PageDown},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.selectNextPageSuggestion()}),f.CommonEditorRegistry.registerEditorCommand("selectPrevQuickFix",w,{primary:o.KeyCode.UpArrow},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.selectPrevSuggestion()}),f.CommonEditorRegistry.registerEditorCommand("selectPrevPageQuickFix",w,{primary:o.KeyCode.PageUp},!1,E,function(e,t,n){var i=b.getQuickFixController(t);i.selectPrevPageSuggestion()}),v.EditorBrowserRegistry.registerEditorContribution(b)}),define("vs/editor/contrib/quickOpen/common/quickOpen",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){var t=Object.create(null),i=[],r=h.all(e).map(function(o){if(o.outlineGroupLabel)for(var r in o.outlineGroupLabel)Object.prototype.hasOwnProperty.call(o.outlineGroupLabel,r)&&(t[r]=o.outlineGroupLabel[r]);return o.getOutline(e.getAssociatedResource()).then(function(e){Array.isArray(e)&&i.push.apply(i,e)},function(e){n.onUnexpectedError(e)})});return o.TPromise.join(r).then(function(){var e=[];return d(e,i,""),e.sort(l),{entries:e,outlineGroupLabel:t}})}function l(e,t){return r.Range.compareRangesUsingStarts(e.range,t.range)}function d(e,t,n){for(var i=0,o=t;i<o.length;i++){var r=o[i];e.push({type:r.type,range:r.range,label:r.label,icon:r.icon,containerLabel:r.containerLabel||n}),r.children&&d(e,r.children,r.label)}}var h=new a["default"]("outlineSupport");t.OutlineRegistry=h,t.getOutlineEntries=u,s.CommonEditorRegistry.registerLanguageCommand("_executeDocumentSymbolProvider",function(e,t){var o=t.resource;if(!(o instanceof i["default"]))throw n.illegalArgument("resource");var r=e.get(c.IModelService).getModel(o);if(!r)throw n.illegalArgument("resource");return u(r)})}),define("vs/editor/contrib/referenceSearch/common/referenceSearch",["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r){"use strict";function s(e,o){var r=t.ReferenceRegistry.ordered(e).map(function(t){return t.findReferences(e.getAssociatedResource(),o,!0).then(function(e){return Array.isArray(e)?e:void 0},function(e){n.onUnexpectedError(e)})});return i.TPromise.join(r).then(function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];o&&t.push.apply(t,o)}return t})}t.ReferenceRegistry=new r["default"]("referenceSupport"),t.findReferences=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeReferenceProvider",s)}),define("vs/editor/contrib/rename/common/rename",["require","exports","vs/nls!vs/editor/contrib/rename/common/rename","vs/base/common/async","vs/base/common/errors","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r,s){"use strict";function a(e,o,r){var s=t.RenameRegistry.ordered(e),a=e.getAssociatedResource(),c=[],u=!1,l=s.map(function(e){return function(){return u?void 0:e.rename(a,o,r).then(function(e){if(e){if(!e.rejectReason)return u=!0,e;c.push(e.rejectReason)}else;})}});return i.sequence(l).then(function(e){var t=e[0];return c.length>0?{currentName:void 0,edits:void 0,rejectReason:c.join("\n")}:t?t:{currentName:void 0,edits:void 0,rejectReason:n.localize(0,null)}})}t.RenameRegistry=new s["default"]("renameSupport"),t.rename=a,r.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDocumentRenameProvider",function(e,t,n){var i=n.newName;if("string"!=typeof i)throw o.illegalArgument("newName");return a(e,t,i)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/rename/browser/rename2",["require","exports","vs/nls!vs/editor/contrib/rename/browser/rename2","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/severity","vs/base/common/winjs.base","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/keybinding/common/keybindingService","vs/platform/message/common/message","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/supports","vs/editor/common/services/bulkEdit","../common/rename","./renameInputField","vs/css!./rename"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y="renameInputVisible",_=function(e){function t(t,n,i,o,r,s){e.call(this,t,n,h.Behaviour.WidgetFocus|h.Behaviour.Writeable|h.Behaviour.ShowInContextMenu|h.Behaviour.UpdateOnCursorPositionChange),this._messageService=i,this._eventService=r,this._editorService=s,this._renameInputField=new g["default"](n),this._renameInputVisible=o.createKey(y,!1)}return __extends(t,e),t.prototype.getGroupId=function(){return"2_change/1_rename2"},t.prototype.isSupported=function(){return v.RenameRegistry.has(this.editor.getModel())&&!this.editor.getModel().hasEditableRange()&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber);return v.RenameRegistry.ordered(e).some(function(e){return e.filter?f.isLineToken(n,t.column-1,e.filter)?!0:t.column>1&&f.isLineToken(n,t.column-2,e.filter)?!0:void 0:!0})},t.prototype.run=function(e){var t=this,n=this.editor.getSelection(),o=this.editor.getModel().getWordAtPosition(n.getStartPosition());if(o){var a,c=n.startLineNumber,u=0,l=o.word.length;return a={startLineNumber:c,startColumn:o.startColumn,endLineNumber:c,endColumn:o.endColumn},n.isEmpty()||n.startLineNumber!==n.endLineNumber||(u=Math.max(0,n.startColumn-o.startColumn),l=Math.min(o.endColumn,n.endColumn)-o.startColumn),this._renameInputVisible.set(!0),this._renameInputField.getInput(a,o.word,u,l).then(function(e){return t._renameInputVisible.reset(),t._prepareRename(e).then(function(e){return e.finish().then(function(e){t.editor.focus(),e&&t.editor.setSelection(e)})},function(e){return"string"!=typeof e?s.TPromise.wrapError(e):void t._messageService.show(r["default"].Info,e)})},function(e){return t._renameInputVisible.reset(),t.editor.focus(),i.isPromiseCanceledError(e)?void 0:s.TPromise.wrapError(e)})}},t.prototype.acceptRenameInput=function(){this._renameInputField.acceptInput()},t.prototype.cancelRenameInput=function(){this._renameInputField.cancelInput()},t.prototype._prepareRename=function(e){var t=m.createBulkEdit(this._eventService,this._editorService,this.editor);return v.rename(this.editor.getModel(),this.editor.getPosition(),e).then(function(e){return e.rejectReason?s.TPromise.wrapError(e.rejectReason):(t.add(e.edits),t)})},t.ID="editor.action.rename",t=__decorate([__param(2,l.IMessageService),__param(3,u.IKeybindingService),__param(4,c.IEventService),__param(5,a.IEditorService)],t)}(d.EditorAction);t.RenameAction=_;var b=p.CommonEditorRegistry.commandWeight(99);p.CommonEditorRegistry.registerEditorAction(new p.EditorActionDescriptor(_,_.ID,n.localize(0,null),{context:p.ContextKey.EditorTextFocus,primary:o.KeyCode.F2})),p.CommonEditorRegistry.registerEditorCommand("acceptRenameInput",b,{primary:o.KeyCode.Enter},!1,y,function(e,t,n){var i=t.getAction(_.ID);i.acceptRenameInput()}),p.CommonEditorRegistry.registerEditorCommand("cancelRenameInput",b,{primary:o.KeyCode.Escape,secondary:[o.KeyMod.Shift|o.KeyCode.Escape]},!1,y,function(e,t,n){var i=t.getAction(_.ID);i.cancelRenameInput()})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/smartSelect/common/jumpToBracket",["require","exports","vs/nls!vs/editor/contrib/smartSelect/common/jumpToBracket","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n){e.call(this,t,n,s.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){return this.editor.trigger(this.id,a.Handler.JumpToBracket,{}),o.TPromise.as(!0)},t.ID="editor.action.jumpToBracket",t}(r.EditorAction);c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(u,u.ID,n.localize(0,null),{context:c.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.US_BACKSLASH}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/smartSelect/common/smartSelect",["require","exports","vs/nls!vs/editor/contrib/smartSelect/common/smartSelect","vs/base/common/arrays","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/platform/instantiation/common/instantiation","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","./tokenSelectionSupport"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(){function e(e){this.editor=e,this.next=null,this.previous=null,this.selection=e.getSelection()}return e}(),f=null,m=!1,v=function(e){function t(t,n,i,o){e.call(this,t,n,u.Behaviour.TextFocus|u.Behaviour.UpdateOnModelChange),this._tokenSelectionSupport=o.createInstance(h.TokenSelectionSupport),this._forward=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getSelection(),n=this.editor.getModel(),o=n.getMode().logicalSelectionSupport||this._tokenSelectionSupport;f&&f.editor!==this.editor&&(f=null);var s=r.TPromise.as(null);return f||(s=o.getRangesToPosition(n.getAssociatedResource(),t.getStartPosition()).then(function(t){if(!i.isFalsyOrEmpty(t)){var n;t.filter(function(t){var n=e.editor.getSelection(),i=new a.Range(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn);return i.containsPosition(n.getStartPosition())&&i.containsPosition(n.getEndPosition())}).forEach(function(t){var i=t.range,o=new p(e.editor);o.selection=new a.Range(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn),n&&(o.next=n,n.previous=o),n=o});var o=new p(e.editor);o.next=n,n&&(n.previous=o),f=o;var r=e.editor.addListener(l.EventType.CursorPositionChanged,function(e){m||(f=null,r())})}})),s.then(function(){if(f&&(f=e._forward?f.next:f.previous)){m=!0;try{e.editor.setSelection(f.selection)}finally{m=!1}return!0}})},t}(c.EditorAction),g=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.smartSelect.grow",t=__decorate([__param(2,s.IInstantiationService)],t)}(v),y=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.smartSelect.shrink",t=__decorate([__param(2,s.IInstantiationService)],t)}(v);d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(g,g.ID,n.localize(0,null),{context:d.ContextKey.EditorTextFocus,primary:o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.RightArrow,mac:{primary:o.KeyMod.CtrlCmd|o.KeyMod.WinCtrl|o.KeyMod.Shift|o.KeyCode.RightArrow}})),d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(y,y.ID,n.localize(1,null),{context:d.ContextKey.EditorTextFocus,primary:o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.LeftArrow,mac:{primary:o.KeyMod.CtrlCmd|o.KeyMod.WinCtrl|o.KeyMod.Shift|o.KeyCode.LeftArrow}}))});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/snippet/common/snippet",["require","exports","vs/base/common/collections","vs/base/common/keyCodes","vs/base/common/strings","vs/platform/keybinding/common/keybindingService","vs/editor/common/core/editOperation","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){return e.getContribution(m.ID)}!function(e){e[e.TextMateSnippet=0]="TextMateSnippet",e[e.EmmetSnippet=1]="EmmetSnippet"}(t.ExternalSnippetType||(t.ExternalSnippetType={}));var h=t.ExternalSnippetType,p=function(){function e(e){this.lines=[],this.placeHolders=[],this._lastGeneratedId=0,this.startPlaceHolderIndex=0,this.finishPlaceHolderIndex=-1,this.parseTemplate(e)}return e.prototype.parseTemplate=function(e){var t,i,o,r,s={},c=e.split("\n");for(t=0,i=c.length;i>t;t++){var u=this.parseLine(c[t],function(e){return n.contains(s,e)?s[e].value:""});for(o=0,r=u.placeHolders.length;r>o;o++){var l,d=u.placeHolders[o],h=new a.Range(t+1,d.startColumn,t+1,d.endColumn);n.contains(s,d.id)?l=s[d.id]:(l={id:d.id,value:d.value,occurences:[]},this.placeHolders.push(l),""===d.value&&(this.finishPlaceHolderIndex=this.placeHolders.length-1),s[d.id]=l),l.occurences.push(h)}this.lines.push(u.line)}if(this.placeHolders.length>this.startPlaceHolderIndex){var p=this.placeHolders[this.startPlaceHolderIndex];
""===p.value&&""===p.id&&this.placeHolders.length>1&&this.startPlaceHolderIndex++}},e.prototype.parseLine=function(e,t){for(var n=[{placeHolderId:"",placeHolderText:""}],i=[],o=0,r=e.length,s=0;r>o;){var a=e.substr(o);if(/^{{/.test(a)){o+=2,n.push({placeHolderId:"",placeHolderText:""});var c=a.match(/^{{(\w+):/);Array.isArray(c)&&2===c.length&&(n[n.length-1].placeHolderId=c[1],o+=c[1].length+1)}else if(n.length>1&&/^}}/.test(a)){if(o+=2,0===n[n.length-1].placeHolderId.length&&(n[n.length-1].placeHolderId=n[n.length-1].placeHolderText,"_"===n[n.length-1].placeHolderId&&(n[n.length-1].placeHolderId="TAB_STOP_"+String(++this._lastGeneratedId),n[n.length-1].placeHolderText="",--s)),0===n[n.length-1].placeHolderText.length){var u=t(n[n.length-1].placeHolderId);n[n.length-1].placeHolderText=u,s+=u.length}i.push({id:n[n.length-1].placeHolderId,value:n[n.length-1].placeHolderText,startColumn:s+1-n[n.length-1].placeHolderText.length,endColumn:s+1}),n[n.length-2].placeHolderText+=n[n.length-1].placeHolderText,n.pop()}else/^\\./.test(a)&&("{"===a.charAt(1)||"}"===a.charAt(1)||"\\"===a.charAt(1)?++o:(n[n.length-1].placeHolderText+=e.charAt(o),++s,++o)),n[n.length-1].placeHolderText+=e.charAt(o),++s,++o}return i.sort(function(e,t){return e.startColumn<t.startColumn?-1:e.startColumn>t.startColumn?1:e.endColumn<t.endColumn?-1:e.endColumn>t.endColumn?1:0}),{line:n[0].placeHolderText,placeHolders:i}},e.convertExternalSnippet=function(e,t){for(var n=0,i="",o=0,r=e.length;r>o;){var s=e.substr(o);if(/^\$0/.test(s))o+=2,i+=t===h.EmmetSnippet?"{{_}}":"{{}}";else if(/^\$\{0\}/.test(s))o+=4,i+=t===h.EmmetSnippet?"{{_}}":"{{}}";else if(t===h.EmmetSnippet&&/^\|/.test(s))++o,i+="{{}}";else{var a=s.match(/^\$(\d+)/);Array.isArray(a)&&2===a.length?(o+=1+a[1].length,i+="{{"+a[1]+":}}"):(a=s.match(/^\$\{(\d+)\}/),Array.isArray(a)&&2===a.length?(o+=3+a[1].length,i+="{{"+a[1]+":}}"):/^\${/.test(s)?(o+=2,++n,i+="{{"):n>0&&/^}/.test(s)?(o+=1,--n,i+="}}"):/^\\./.test(s)?(o+=2,i+=/^\\\$/.test(s)?"$":s.substr(0,2)):(a=s.match(/^({|})/),Array.isArray(a)&&2===a.length?(o+=1,i+="\\"+a[1]):(o+=1,i+=s.charAt(0))))}}return i},e.prototype.extractLineIndentation=function(e,t){void 0===t&&(t=Number.MAX_VALUE);var n=o.getLeadingWhitespace(e);return n.length>t-1?n.substring(0,t-1):n},e.prototype.bind=function(e,t,n,i){var o,r,s,a,c,u,l,d,h=[],p=[],f=this.extractLineIndentation(e,n+1),m=[];for(c=0,u=this.lines.length;u>c;c++)o=this.lines[c],0===c?(m[c+1]=n,h[c]=o):(r=this.extractLineIndentation(o),s=o.substr(r.length),a=i.normalizeIndentation(f+r),m[c+1]=a.length-r.length,h[c]=a+s);var v,g,y;for(c=0,u=this.placeHolders.length;u>c;c++){for(v=this.placeHolders[c],y=[],l=0,d=v.occurences.length;d>l;l++)g=v.occurences[l],y.push({startLineNumber:g.startLineNumber+t,startColumn:g.startColumn+m[g.startLineNumber],endLineNumber:g.endLineNumber+t,endColumn:g.endColumn+m[g.endLineNumber]});p.push({id:v.id,value:v.value,occurences:y})}return{lines:h,placeHolders:p,startPlaceHolderIndex:this.startPlaceHolderIndex,finishPlaceHolderIndex:this.finishPlaceHolderIndex}},e}();t.CodeSnippet=p;var f=function(){function e(e,t,n,i,o){this.editor=e,this._onStop=o,this.model=e.getModel(),this.finishPlaceHolderIndex=t.finishPlaceHolderIndex,this.trackedPlaceHolders=[],this.placeHolderDecorations=[],this.currentPlaceHolderIndex=t.startPlaceHolderIndex,this.highlightDecorationId=null,this.isFinished=!1,this._initialAlternativeVersionId=i,this.initialize(t,n)}return e.prototype.dispose=function(){this.stopAll()},e.prototype.initialize=function(e,t){var n,i,o=this;for(n=0,i=e.placeHolders.length;i>n;n++){for(var r=e.placeHolders[n],s=[],c=0,l=r.occurences.length;l>c;c++)s.push(this.model.addTrackedRange(r.occurences[c],u.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges));this.trackedPlaceHolders.push({ranges:s})}this.editor.changeDecorations(function(n){var i=[],r=t+e.lines.length-1,s=o.model.getLineMaxColumn(r);i.push({range:new a.Range(t,1,r,s),options:{className:"new-snippet",isWholeLine:!0}});for(var c=0,u=o.trackedPlaceHolders.length;u>c;c++){var l=c===o.finishPlaceHolderIndex?"finish-snippet-placeholder":"snippet-placeholder";i.push({range:o.model.getTrackedRange(o.trackedPlaceHolders[c].ranges[0]),options:{className:l}})}var d=n.deltaDecorations([],i);o.highlightDecorationId=d[0],o.placeHolderDecorations=d.slice(1)}),this.listenersToRemove=[],this.listenersToRemove.push(this.editor.addListener(u.EventType.ModelContentChanged,function(e){if(!o.isFinished){if(e.changeType===u.EventType.ModelContentChangedFlush)o.stopAll();else if(e.changeType===u.EventType.ModelContentChangedLineChanged){var t=e.lineNumber,n=o.model.getDecorationRange(o.highlightDecorationId);(t<n.startLineNumber||t>n.endLineNumber)&&o.stopAll()}else if(e.changeType===u.EventType.ModelContentChangedLinesInserted){var i=e.fromLineNumber,n=o.model.getDecorationRange(o.highlightDecorationId);(i<n.startLineNumber||i>n.endLineNumber)&&o.stopAll()}else if(e.changeType===u.EventType.ModelContentChangedLinesDeleted){var r=e.fromLineNumber,s=e.toLineNumber,n=o.model.getDecorationRange(o.highlightDecorationId),a=s<n.startLineNumber,c=r>n.endLineNumber;(a||c)&&o.stopAll()}var l=o.editor.getModel().getAlternativeVersionId();o._initialAlternativeVersionId===l&&o.stopAll()}})),this.listenersToRemove.push(this.editor.addListener(u.EventType.CursorPositionChanged,function(e){if(!o.isFinished){var t=o.model.getDecorationRange(o.highlightDecorationId),n=e.position.lineNumber;(n<t.startLineNumber||n>t.endLineNumber)&&o.stopAll()}})),this.listenersToRemove.push(this.editor.addListener(u.EventType.ModelChanged,function(){o.stopAll()}));var d=-1;this.listenersToRemove.push(this.editor.addListener(u.EventType.EditorBlur,function(){d=setTimeout(function(){o.stopAll()},100)})),this.listenersToRemove.push(this.editor.addListener(u.EventType.EditorFocus,function(){-1!==d&&(clearTimeout(d),d=-1)})),this.listenersToRemove.push(this.model.addListener(u.EventType.ModelDecorationsChanged,function(e){if(!o.isFinished){for(var t=o.model.getEditableRange(),n=null,i=!0,r=!0,s=0;(i||r)&&s<o.trackedPlaceHolders.length;s++)for(var a=o.trackedPlaceHolders[s].ranges,c=0;(i||r)&&c<a.length;c++){var u=o.model.getTrackedRange(a[c]);i&&(u.isEmpty()?null===n?n=u:n.equalsRange(u)||(i=!1):i=!1),r&&!t.equalsRange(u)&&(r=!1)}if(i||r)o.stopAll();else if(-1!==o.finishPlaceHolderIndex){var l=o.placeHolderDecorations[o.finishPlaceHolderIndex],d=o.model.getDecorationRange(l),h=o.model.getDecorationOptions(l),p=d.isEmpty(),f="finish-snippet-placeholder"===h.className,m=Number(p)^Number(f);m&&o.editor.changeDecorations(function(e){var t=p?"finish-snippet-placeholder":"snippet-placeholder";e.changeDecorationOptions(l,{className:t})})}}})),this.doLinkEditing()},e.prototype.onNextPlaceHolder=function(){return this.changePlaceHolder(!0)},e.prototype.onPrevPlaceHolder=function(){return this.changePlaceHolder(!1)},e.prototype.changePlaceHolder=function(e){if(this.isFinished)return!1;var t=this.currentPlaceHolderIndex,n=this.model.getTrackedRange(this.trackedPlaceHolders[t].ranges[0]),i=!0;do{e?this.currentPlaceHolderIndex=(this.currentPlaceHolderIndex+1)%this.trackedPlaceHolders.length:this.currentPlaceHolderIndex=(this.trackedPlaceHolders.length+this.currentPlaceHolderIndex-1)%this.trackedPlaceHolders.length;var o=this.model.getTrackedRange(this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges[0]);i=n.equalsRange(o)}while(this.currentPlaceHolderIndex!==t&&i);return this.doLinkEditing(),!0},e.prototype.onAccept=function(){if(this.isFinished)return!1;if(-1!==this.finishPlaceHolderIndex){var e=this.model.getTrackedRange(this.trackedPlaceHolders[this.finishPlaceHolderIndex].ranges[0]);this.editor.setPosition({lineNumber:e.endLineNumber,column:e.endColumn})}return this.stopAll(),!0},e.prototype.onEscape=function(){return this.isFinished?!1:(this.stopAll(),this.editor.setSelections([this.editor.getSelections()[0]]),!0)},e.prototype.doLinkEditing=function(){for(var e=[],t=0,n=this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges.length;n>t;t++){var i=this.model.getTrackedRange(this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges[t]);e.push({selectionStartLineNumber:i.startLineNumber,selectionStartColumn:i.startColumn,positionLineNumber:i.endLineNumber,positionColumn:i.endColumn})}this.editor.setSelections(e)},e.prototype.stopAll=function(){var e=this;if(!this.isFinished){this._onStop(),this.isFinished=!0,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[];for(var t=0;t<this.trackedPlaceHolders.length;t++)for(var n=this.trackedPlaceHolders[t].ranges,i=0;i<n.length;i++)this.model.removeTrackedRange(n[i]);this.trackedPlaceHolders=[],this.editor.changeDecorations(function(t){var n=[];n.push(e.highlightDecorationId);for(var i=0;i<e.placeHolderDecorations.length;i++)n.push(e.placeHolderDecorations[i]);t.deltaDecorations(n,[]),e.placeHolderDecorations=[],e.highlightDecorationId=null})}},e}();t.getSnippetController=d;var m=function(){function e(e,n){this._editor=e,this._currentController=null,this._inSnippetMode=n.createKey(t.CONTEXT_SNIPPET_MODE,!1)}return e.prototype.dispose=function(){this._currentController&&(this._currentController.dispose(),this._currentController=null)},e.prototype.getId=function(){return e.ID},e.prototype.run=function(e,t,n){var i=this._currentController;this._currentController=null,0===e.placeHolders.length?this._runForAllSelections(e,t,n):this._runForPrimarySelection(e,t,n),this._currentController?i&&i.dispose():this._currentController=i},e._getTypeRangeForSelection=function(e,t,n,i){var o;return o=n||i?e.validateRange(a.Range.plusRange(t,{startLineNumber:t.positionLineNumber,startColumn:t.positionColumn-n,endLineNumber:t.positionLineNumber,endColumn:t.positionColumn+i})):t},e._getAdaptedSnippet=function(e,t,n){return t.bind(e.getLineContent(n.startLineNumber),n.startLineNumber-1,n.startColumn-1,e)},e._addCommandForSnippet=function(e,t,n,i){var o=t.lines.join("\n"),r=e.getValueInRange(n,u.EndOfLinePreference.LF);o!==r&&i.push(s.EditOperation.replaceMove(n,o))},e.prototype._runForPrimarySelection=function(t,n,i){var o=this,r=this._editor.getModel().getAlternativeVersionId(),s=[],a=e._prepareSnippet(this._editor,this._editor.getSelection(),t,n,i);e._addCommandForSnippet(this._editor.getModel(),a.adaptedSnippet,a.typeRange,s),s.length>0&&(this._editor.getModel().pushStackElement(),this._editor.executeEdits("editor.contrib.insertSnippetHelper",s),this._editor.getModel().pushStackElement());var u=e._getSnippetCursorOnly(a.adaptedSnippet);u?this._editor.setSelection(c.Selection.createSelection(u.lineNumber,u.column,u.lineNumber,u.column)):a.adaptedSnippet.placeHolders.length>0&&(this._inSnippetMode.set(!0),this._currentController=new f(this._editor,a.adaptedSnippet,a.typeRange.startLineNumber,r,function(){o._inSnippetMode.reset()}))},e.prototype._runForAllSelections=function(t,n,i){for(var o=this._editor.getSelections(),r=[],s=0;s<o.length;s++){var a=e._prepareSnippet(this._editor,o[s],t,n,i);e._addCommandForSnippet(this._editor.getModel(),a.adaptedSnippet,a.typeRange,r)}r.length>0&&(this._editor.getModel().pushStackElement(),this._editor.executeEdits("editor.contrib.insertSnippetHelper",r),this._editor.getModel().pushStackElement())},e._prepareSnippet=function(t,n,i,r,s){var a=t.getModel(),c=e._getTypeRangeForSelection(a,n,r,s);if(1===i.lines.length){var u=a.getLineContent(c.endLineNumber).substr(c.endColumn-1),l=i.lines[0].substr(r),d=o.commonPrefixLength(u,l);d>0&&(c=c.setEndPosition(c.endLineNumber,c.endColumn+d))}var h=e._getAdaptedSnippet(a,i,c);return{typeRange:c,adaptedSnippet:h}},e._getSnippetCursorOnly=function(e){if(1!==e.placeHolders.length)return null;var t=e.placeHolders[0];if(""!==t.value||1!==t.occurences.length)return null;var n=t.occurences[0];return a.Range.isEmpty(n)?{lineNumber:n.startLineNumber,column:n.startColumn}:null},e.prototype.jumpToNextPlaceholder=function(){this._currentController&&this._currentController.onNextPlaceHolder()},e.prototype.jumpToPrevPlaceholder=function(){this._currentController&&this._currentController.onPrevPlaceHolder()},e.prototype.acceptSnippet=function(){this._currentController&&this._currentController.onAccept()},e.prototype.leaveSnippet=function(){this._currentController&&this._currentController.onEscape()},e.ID="editor.contrib.snippetController",e=__decorate([__param(1,r.IKeybindingService)],e)}();t.CONTEXT_SNIPPET_MODE="inSnippetMode";var v=l.CommonEditorRegistry.commandWeight(30);l.CommonEditorRegistry.registerEditorContribution(m),l.CommonEditorRegistry.registerEditorCommand("jumpToNextSnippetPlaceholder",v,{primary:i.KeyCode.Tab},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).jumpToNextPlaceholder()}),l.CommonEditorRegistry.registerEditorCommand("jumpToPrevSnippetPlaceholder",v,{primary:i.KeyMod.Shift|i.KeyCode.Tab},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).jumpToPrevPlaceholder()}),l.CommonEditorRegistry.registerEditorCommand("acceptSnippet",v,{primary:i.KeyCode.Enter},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).acceptSnippet()}),l.CommonEditorRegistry.registerEditorCommand("leaveSnippet",v,{primary:i.KeyCode.Escape,secondary:[i.KeyMod.Shift|i.KeyCode.Escape]},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).leaveSnippet()})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["require","exports","vs/nls!vs/editor/contrib/defineKeybinding/browser/defineKeybinding","vs/base/common/async","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/htmlContentRenderer","vs/base/browser/keyboardEvent","vs/base/browser/styleMutator","vs/platform/keybinding/common/keybindingResolver","vs/platform/keybinding/common/keybindingService","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowser","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/snippet/common/snippet","vs/css!./defineKeybinding"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";function S(e){if(e.getConfiguration().readOnly)return!1;var t=e.getModel();if(!t)return!1;var n=t.getAssociatedResource().toString();return x.test(n)}var E=n.localize(0,null),w=n.localize(1,null),C=n.localize(2,null),T=n.localize(3,null),k=n.localize(4,null),x=/keybindings\.json$/,I=function(){function e(e,t){var n=this;this._dec=[],this._editor=e,this._keybindingService=t,this._toDispose=[],this._launchWidget=new D(this._editor,t,function(){return n.launch()}),this._defineWidget=new A(this._editor,t,function(e){return n._onAccepted(e)}),this._toDispose.push(this._editor.addListener2(v.EventType.ConfigurationChanged,function(e){S(n._editor)?n._launchWidget.show():n._launchWidget.hide()})),this._toDispose.push(this._editor.addListener2(v.EventType.ModelChanged,function(e){S(n._editor)?n._launchWidget.show():n._launchWidget.hide(),n._onModel()})),this._updateDecorations=new i.RunOnceScheduler(function(){return n._updateDecorationsNow()},500),this._toDispose.push(this._updateDecorations),this._modelToDispose=[],this._onModel()}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._modelToDispose=r.disposeAll(this._modelToDispose),this._toDispose=r.disposeAll(this._toDispose),this._launchWidget.dispose(),this._launchWidget=null,this._defineWidget.dispose(),this._defineWidget=null},e.prototype.launch=function(){S(this._editor)&&this._defineWidget.start()},e.prototype._onAccepted=function(e){var t=["{",'	"key": "'+e+'",','	"command": "{{commandId}}",','	"when": "{{editorTextFocus}}"',"}{{}}"].join("\n");b.getSnippetController(this._editor).run(new b.CodeSnippet(t),0,0)},e.prototype._onModel=function(){var e=this;this._modelToDispose=r.disposeAll(this._modelToDispose);var t=this._editor.getModel();if(t){var n=t.getAssociatedResource().toString();x.test(n)&&(this._modelToDispose.push(t.addListener2(v.EventType.ModelContentChanged2,function(t){return e._updateDecorations.schedule()})),this._modelToDispose.push({dispose:function(){e._dec=e._editor.deltaDecorations(e._dec,[]),e._updateDecorations.cancel()}}),this._updateDecorations.schedule())}},e.prototype._updateDecorationsNow=function(){var e=this,t=this._editor.getModel(),n=o.Keybinding.getUserSettingsKeybindingRegex(),i=t.findMatches(n,!1,!0,!1,!1),r=i.map(function(n){var i=t.getValueInRange(n),r=i.substring(1,i.length-1);r=r.replace(/\\\\/g,"\\");var s=d.IOSupport.readKeybinding(r),a=new o.Keybinding(s);return{strKeybinding:r,keybinding:a,usLabel:a._toUSLabel(),label:e._keybindingService.getLabelFor(a),range:n}});r=r.filter(function(e){return e.usLabel!==e.label});var s=[];r.forEach(function(t){var n,i,o,r;t.label?(n=[{tagName:"span",text:T}],n=n.concat(e._keybindingService.getHTMLLabelFor(t.keybinding)),i="keybindingInfo",o="inlineKeybindingInfo",r="rgba(100, 100, 250, 0.6)"):(n=[{tagName:"span",text:k}],i="keybindingError",o="inlineKeybindingError",r="rgba(250, 100, 100, 0.6)"),s.push({range:new p.Range(t.range.startLineNumber,t.range.startColumn,t.range.startLineNumber,t.range.startColumn+1),options:{stickiness:v.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,inlineClassName:o}}),s.push({range:t.range,options:{stickiness:v.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:i,htmlMessage:n,overviewRuler:{color:r,darkColor:r,position:v.OverviewRulerLane.Right}}})}),this._dec=this._editor.deltaDecorations(this._dec,s)},e.ID="editor.contrib.defineKeybinding",e=__decorate([__param(1,h.IKeybindingService)],e)}();t.DefineKeybindingController=I;var D=function(){function e(e,t,n){this._editor=e,this._domNode=document.createElement("div"),this._domNode.className="defineKeybindingLauncher",this._domNode.style.display="none",this._isVisible=!1;var i=t.lookupKeybindings(L.ID),o="";i.length>0&&(o+=" ("+t.getLabelFor(i[0])+")"),this._domNode.appendChild(document.createTextNode(E+o)),this._toDispose=[],this._toDispose.push(a.addDisposableListener(this._domNode,"click",function(e){n()})),this._editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),this._toDispose=r.disposeAll(this._toDispose)},e.prototype.show=function(){this._isVisible||(this._domNode.style.display="block",this._isVisible=!0,this._editor.layoutOverlayWidget(this))},e.prototype.hide=function(){this._isVisible&&(this._domNode.style.display="none",this._isVisible=!1,this._editor.layoutOverlayWidget(this))},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:this._isVisible?y.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER:null}},e.ID="editor.contrib.defineKeybindingLauncherWidget",e}(),A=function(){function e(t,n,i){var r=this;this._editor=t,this._keybindingService=n,this._onAccepted=i,this._toDispose=[],this._lastKeybinding=null,this._domNode=document.createElement("div"),this._domNode.className="defineKeybindingWidget",l.StyleMutator.setWidth(this._domNode,e.WIDTH),l.StyleMutator.setHeight(this._domNode,e.HEIGHT),this._domNode.style.display="none",this._isVisible=!1,this._messageNode=document.createElement("div"),this._messageNode.className="message",this._messageNode.innerText=w,this._domNode.appendChild(this._messageNode),this._inputNode=document.createElement("input"),this._inputNode.className="input",this._inputNode.type="text",this._domNode.appendChild(this._inputNode),this._outputNode=document.createElement("div"),this._outputNode.className="output",this._domNode.appendChild(this._outputNode),this._toDispose.push(a.addDisposableListener(this._inputNode,"keydown",function(e){var t=new u.StandardKeyboardEvent(e);t.preventDefault(),t.stopPropagation();var n=new o.Keybinding(t.asKeybinding());switch(n.value){case o.CommonKeybindings.ENTER:return r._lastKeybinding&&r._onAccepted(r._lastKeybinding.toUserSettingsLabel()),void r._stop();case o.CommonKeybindings.ESCAPE:return void r._stop()}r._lastKeybinding=n,r._inputNode.value=r._lastKeybinding.toUserSettingsLabel().toLowerCase(),r._inputNode.title="keyCode: "+t.browserEvent.keyCode,a.clearNode(r._outputNode);var i=r._keybindingService.getHTMLLabelFor(r._lastKeybinding);i.forEach(function(e){return r._outputNode.appendChild(c.renderHtml(e))})})),this._toDispose.push(this._editor.addListener2(v.EventType.ConfigurationChanged,function(e){r._isVisible&&r._layout()})),this._toDispose.push(a.addDisposableListener(this._inputNode,"blur",function(e){return r._stop()})),this._editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),this._toDispose=r.disposeAll(this._toDispose)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:null}},e.prototype._show=function(){this._isVisible||(this._isVisible=!0,this._layout(),this._domNode.style.display="block")},e.prototype._hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},e.prototype._layout=function(){var t=this._editor.getLayoutInfo(),n=Math.round((t.height-e.HEIGHT)/2);l.StyleMutator.setTop(this._domNode,n);var i=Math.round((t.width-e.WIDTH)/2);l.StyleMutator.setLeft(this._domNode,i)},e.prototype.start=function(){this._editor.revealPositionInCenterIfOutsideViewport(this._editor.getPosition()),this._show(),this._lastKeybinding=null,this._inputNode.value="",a.clearNode(this._outputNode),this._inputNode.focus()},e.prototype._stop=function(){this._editor.focus(),this._hide()},e.ID="editor.contrib.defineKeybindingWidget",e.WIDTH=340,e.HEIGHT=90,e}(),L=function(e){function t(t,n){e.call(this,t,n,m.Behaviour.WidgetFocus|m.Behaviour.UpdateOnModelChange|m.Behaviour.Writeable)}return __extends(t,e),t.prototype.isSupported=function(){return e.prototype.isSupported.call(this)?S(this.editor):!1},t.prototype.run=function(){var e=I.get(this.editor);return e.launch(),s.TPromise.as(!0)},t.ID="editor.action.defineKeybinding",t}(f.EditorAction);t.DefineKeybindingAction=L,_.EditorBrowserRegistry.registerEditorContribution(I),g.CommonEditorRegistry.registerEditorAction(new g.EditorActionDescriptor(L,L.ID,C,{context:g.ContextKey.EditorFocus,primary:o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KEY_K,o.KeyMod.CtrlCmd|o.KeyCode.KEY_K)}))}),define("vs/editor/contrib/suggest/common/suggest",["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/modes/supports"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,r,s,c){c||(c=t.SuggestRegistry.orderedGroups(e));var u=e.getAssociatedResource(),l=[],d=c.map(function(e,t){return function(){if(!(l.length>0)){var t=e.map(function(e){return e.suggest(u,r,s).then(function(t){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i];r&&Array.isArray(r.suggestions)&&0!==r.suggestions.length&&n.push({support:e,currentWord:r.currentWord,incomplete:r.incomplete,suggestions:r.suggestions})}return n},i.onUnexpectedError)});return o.TPromise.join(t).then(function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];Array.isArray(i)&&i.length>0&&l.push(i)}})}}});return n.sequence(d).then(function(){var t=a.SnippetsRegistry.getSnippets(e,r);return 0===l.length?l.push([t]):l[0].push(t),l})}t.CONTEXT_SUGGEST_WIDGET_VISIBLE="suggestWidgetVisible",t.CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY="suggestionSupportsAcceptOnKey",t.ACCEPT_SELECTED_SUGGESTION_CMD="acceptSelectedSuggestion",t.SuggestRegistry=new s["default"]("suggestSupport"),t.suggest=c,r.CommonEditorRegistry.registerDefaultLanguageCommand("_executeCompletionItemProvider",function(e,t,n){var o=n.triggerCharacter;if("undefined"!=typeof o&&"string"!=typeof o)throw i.illegalArgument("triggerCharacter");return c(e,t,o)})}),define("vs/editor/contrib/suggest/browser/suggestModel",["require","exports","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/editor/contrib/snippet/common/snippet","../common/suggest","./completionModel"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d,h=function(){function e(e,t){this.auto=t;var n=e.getModel(),i=e.getPosition(),o=n.getLineContent(i.lineNumber),r=n.getWordAtPosition(i);if(r?(this.wordBefore=o.substring(r.startColumn-1,i.column-1),this.wordAfter=o.substring(i.column-1,r.endColumn-1)):(this.wordBefore="",this.wordAfter=""),this.lineNumber=i.lineNumber,this.column=i.column,this.lineContentBefore=o.substr(0,i.column-1),this.lineContentAfter=o.substr(i.column-1),this.isInEditableRange=!0,n.hasEditableRange()){var s=n.getEditableRange();s.containsPosition(i)||(this.isInEditableRange=!1)}var a=n.getLineContext(i.lineNumber),c=n.getLineContent(i.lineNumber).charAt(i.column-1),l=u.SuggestRegistry.all(n);this.isAutoTriggerEnabled=l.some(function(e){return e.shouldAutotriggerSuggest(a,i.column-1,c)})}return e.prototype.shouldAutoTrigger=function(){return this.isAutoTriggerEnabled?0===this.wordBefore.length?!1:isNaN(Number(this.wordBefore))?!(this.wordAfter.length>0):!1:!1},e.prototype.isDifferentContext=function(e){return this.lineNumber!==e.lineNumber?!0:e.column<this.column-this.wordBefore.length?!0:r.startsWith(e.lineContentBefore,this.lineContentBefore)&&this.lineContentAfter===e.lineContentAfter?""===e.wordBefore&&e.lineContentBefore!==this.lineContentBefore:!0},e.prototype.shouldRetrigger=function(e){return r.startsWith(this.lineContentBefore,e.lineContentBefore)&&this.lineContentAfter===e.lineContentAfter?this.lineContentBefore.length>e.lineContentBefore.length&&0===this.wordBefore.length?!1:!this.auto||0!==e.wordBefore.length:!1},e}();!function(e){e[e.Idle=0]="Idle",e[e.Manual=1]="Manual",e[e.Auto=2]="Auto"}(d||(d={}));var p=function(){function e(e){var t=this;this.editor=e,this._onDidCancel=new i.Emitter,this._onDidTrigger=new i.Emitter,this._onDidSuggest=new i.Emitter,this._onDidAccept=new i.Emitter,this.state=d.Idle,this.triggerAutoSuggestPromise=null,this.requestPromise=null,this.raw=null,this.completionModel=null,this.incomplete=!1,this.context=null,this.toDispose=[],this.toDispose.push(this.editor.addListener2(a.EventType.ConfigurationChanged,function(){return t.onEditorConfigurationChange()})),this.toDispose.push(this.editor.addListener2(a.EventType.CursorSelectionChanged,function(e){return t.onCursorChange(e)})),this.toDispose.push(this.editor.addListener2(a.EventType.ModelChanged,function(){return t.cancel()})),this.onEditorConfigurationChange()}return Object.defineProperty(e.prototype,"onDidCancel",{get:function(){return this._onDidCancel.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidTrigger",{get:function(){return this._onDidTrigger.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidSuggest",{get:function(){return this._onDidSuggest.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidAccept",{get:function(){return this._onDidAccept.event},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.state!==d.Idle;return this.triggerAutoSuggestPromise&&(this.triggerAutoSuggestPromise.cancel(),this.triggerAutoSuggestPromise=null),this.requestPromise&&(this.requestPromise.cancel(),this.requestPromise=null),this.state=d.Idle,this.raw=null,this.completionModel=null,this.incomplete=!1,this.context=null,e||this._onDidCancel.fire({retrigger:t}),n},e.prototype.getRequestPosition=function(){return this.context?{lineNumber:this.context.lineNumber,column:this.context.column}:null},e.prototype.isAutoSuggest=function(){return this.state===d.Auto},e.prototype.onCursorChange=function(e){var t=this;if(!e.selection.isEmpty())return void this.cancel();if("keyboard"!==e.source||""!==e.reason)return void this.cancel();if(u.SuggestRegistry.has(this.editor.getModel())){var n=this.state===d.Idle;if(!n||this.editor.getConfiguration().quickSuggestions){var i=new h(this.editor,!1);n?(this.cancel(),i.shouldAutoTrigger()&&(this.triggerAutoSuggestPromise=s.TPromise.timeout(this.autoSuggestDelay),this.triggerAutoSuggestPromise.then(function(){t.triggerAutoSuggestPromise=null,t.trigger(!0)}))):this.raw&&this.incomplete?this.trigger(this.state===d.Auto,void 0,!0):this.onNewContext(i)}}},e.prototype.trigger=function(e,t,i,o){var r=this;void 0===i&&(i=!1);var s=this.editor.getModel(),a=!!t;if(o=o||u.SuggestRegistry.orderedGroups(s),0!==o.length){var c=new h(this.editor,e);if(c.isInEditableRange){this.cancel(!1,i),this.state=e||a?d.Auto:d.Manual,this._onDidTrigger.fire({auto:this.isAutoSuggest(),characterTriggered:a,retrigger:i}),this.context=c;var l=this.editor.getPosition();this.requestPromise=u.suggest(s,l,t,o).then(function(t){r.requestPromise=null,r.state!==d.Idle&&(r.raw=t,r.incomplete=t.reduce(function(e,t){return e||t.reduce(function(e,t){return e||t.incomplete},!1)},!1),r.onNewContext(new h(r.editor,e)))}).then(null,n.onUnexpectedError)}}},e.prototype.onNewContext=function(e){if(this.context&&this.context.isDifferentContext(e))return void(this.context.shouldRetrigger(e)?this.trigger(this.state===d.Auto,void 0,!0):this.cancel());if(this.raw){var t=this.isAutoSuggest(),n=!1;if(this.completionModel&&this.completionModel.raw===this.raw){var i=this.completionModel.currentWord;this.completionModel.currentWord=e.wordBefore;var o=this.completionModel.items.length;t||0!==o||(this.completionModel.currentWord=i,n=!0)}else this.completionModel=new l.CompletionModel(this.raw,e.wordBefore);this._onDidSuggest.fire({completionModel:this.completionModel,currentWord:e.wordBefore,isFrozen:n,auto:this.isAutoSuggest()})}},e.prototype.accept=function(e,t,n){return null===this.raw?!1:(this._onDidAccept.fire({snippet:new c.CodeSnippet(e.codeSnippet),overwriteBefore:t+(this.editor.getPosition().column-this.context.column),overwriteAfter:n}),this.cancel(),!0)},e.prototype.onEditorConfigurationChange=function(){this.autoSuggestDelay=this.editor.getConfiguration().quickSuggestionsDelay,(isNaN(this.autoSuggestDelay)||!this.autoSuggestDelay&&0!==this.autoSuggestDelay||this.autoSuggestDelay<0)&&(this.autoSuggestDelay=10)},e.prototype.dispose=function(){this.cancel(!0),this.toDispose=o.disposeAll(this.toDispose)},e}();t.SuggestModel=p});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/suggest/browser/suggestWidget",["require","exports","vs/nls!vs/editor/contrib/suggest/browser/suggestWidget","vs/base/common/strings","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/browser/ui/list/listWidget","vs/base/browser/ui/scrollbar/scrollableElementImpl","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingService","vs/platform/telemetry/common/telemetry","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","../common/suggest","vs/base/browser/ui/aria/aria","vs/css!./suggest"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){
"use strict";function _(e,t,n){for(var i=e.toLowerCase(),o=0,r=0;r<t.length&&r<e.length;r++)if(t[r]===e[r])o+=2;else{if(n[r]!==i[r])break;o+=1}return o}var b,S=function(){function e(e,t){this.widget=e;var n=t.lookupKeybindings("editor.action.triggerSuggest");this.triggerKeybindingLabel=0===n.length?"":" ("+t.getLabelFor(n[0])+")"}return Object.defineProperty(e.prototype,"templateId",{get:function(){return"suggestion"},enumerable:!0,configurable:!0}),e.prototype.renderTemplate=function(e){var t=Object.create(null);t.root=e,t.icon=c.append(e,c.emmet(".icon")),t.colorspan=c.append(t.icon,c.emmet("span.colorspan"));var i=c.append(e,c.emmet(".text")),o=c.append(i,c.emmet(".main"));t.highlightedLabel=new u.HighlightedLabel(o),t.typeLabel=c.append(o,c.emmet("span.type-label"));var r=c.append(i,c.emmet(".docs"));return t.documentation=c.append(r,c.emmet("span.docs-text")),t.documentationDetails=c.append(r,c.emmet("span.docs-details.octicon.octicon-info")),t.documentationDetails.title=n.localize(0,null,this.triggerKeybindingLabel),t},e.prototype.renderElement=function(e,t,i){var o=this,r=i,s=e.suggestion;s.documentationLabel?r.root.setAttribute("aria-label",n.localize(1,null,s.label)):r.root.setAttribute("aria-label",n.localize(2,null,s.label)),s.type&&"#"===s.type.charAt(0)?(r.icon.className="icon customcolor",r.colorspan.style.backgroundColor=s.type.substring(1)):(r.icon.className="icon "+s.type,r.colorspan.style.backgroundColor=""),r.highlightedLabel.set(s.label,e.highlights),r.typeLabel.textContent=s.typeLabel||"",r.documentation.textContent=s.documentationLabel||"",s.documentationLabel?(c.show(r.documentationDetails),r.documentationDetails.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},r.documentationDetails.onclick=function(e){e.stopPropagation(),e.preventDefault(),o.widget.toggleDetails()}):(c.hide(r.documentationDetails),r.documentationDetails.onmousedown=null,r.documentationDetails.onclick=null)},e.prototype.disposeTemplate=function(e){e.highlightedLabel.dispose()},e=__decorate([__param(1,p.IKeybindingService)],e)}(),E=35,w=19,C=function(){function e(e){this.listProvider=e}return e.prototype.getHeight=function(e){var t=this.listProvider().getFocus()[0];return e.suggestion.documentationLabel&&e===t?E:w},e.prototype.getTemplateId=function(e){return"suggestion"},e}();!function(e){e[e.Hidden=0]="Hidden",e[e.Loading=1]="Loading",e[e.Empty=2]="Empty",e[e.Open=3]="Open",e[e.Frozen=4]="Frozen",e[e.Details=5]="Details"}(b||(b={}));var T=function(){function e(e,t){this.widget=t,this.el=c.append(e,c.emmet(".details"));var i=c.append(this.el,c.emmet(".header"));this.title=c.append(i,c.emmet("span.title")),this.back=c.append(i,c.emmet("span.go-back.octicon.octicon-mail-reply")),this.back.title=n.localize(3,null),this.body=c.emmet(".body"),this.scrollable=new d.ScrollableElement(this.body,{}),c.append(this.el,this.scrollable.getDomNode()),this.type=c.append(this.body,c.emmet("p.type")),this.docs=c.append(this.body,c.emmet("p.docs")),this.ariaLabel=null}return Object.defineProperty(e.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),e.prototype.render=function(e){var t=this;return e?(this.title.innerText=e.suggestion.label,this.type.innerText=e.suggestion.typeLabel||"",this.docs.innerText=e.suggestion.documentationLabel,this.back.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this.back.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.widget.toggleDetails()},this.scrollable.onElementDimensions(),this.scrollable.onElementInternalDimensions(),void(this.ariaLabel=i.format("{0}\n{1}\n{2}",e.suggestion.label||"",e.suggestion.typeLabel||"",e.suggestion.documentationLabel||""))):(this.title.textContent="",this.type.textContent="",this.docs.textContent="",void(this.ariaLabel=null))},e.prototype.getAriaLabel=function(){return this.ariaLabel},e.prototype.scrollDown=function(e){void 0===e&&(e=8),this.body.scrollTop+=e},e.prototype.scrollUp=function(e){void 0===e&&(e=8),this.body.scrollTop-=e},e.prototype.pageDown=function(){this.scrollDown(80)},e.prototype.pageUp=function(){this.scrollUp(80)},e.prototype.dispose=function(){this.el.parentElement.removeChild(this.el),this.el=null},e}(),k=function(){function e(t,n,i,o,s){var a=this;this.editor=t,this.model=n,this.allowEditorOverflow=!0,this._onDidVisibilityChange=new r.Emitter,this.isAuto=!1,this.focusedItem=null,this.suggestionSupportsAutoAccept=i.createKey(g.CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY,!0),this.telemetryData=null,this.telemetryService=o,this.element=c.emmet(".editor-widget.suggest-widget.monaco-editor-background"),this.element.style.width=e.WIDTH+"px",this.element.style.top="0",this.element.style.left="0",this.editor.getConfiguration().iconsInSuggestions||c.addClass(this.element,"no-icons"),this.messageElement=c.append(this.element,c.emmet(".message")),this.listElement=c.append(this.element,c.emmet(".tree")),this.details=new T(this.element,this);var u=s.createInstance(S,this);this.delegate=new C(function(){return a.list}),this.list=new l.List(this.listElement,this.delegate,[u]),this.toDispose=[t.addListener2(m.EventType.ModelChanged,function(){return a.onModelModeChanged()}),t.addListener2(m.EventType.ModelModeChanged,function(){return a.onModelModeChanged()}),t.addListener2(m.EventType.ModelModeSupportChanged,function(e){return e.suggestSupport&&a.onModelModeChanged()}),g.SuggestRegistry.onDidChange(function(){return a.onModelModeChanged()}),t.addListener2(m.EventType.EditorTextBlur,function(){return a.onEditorBlur()}),this.list.onSelectionChange(function(e){return a.onListSelection(e)}),this.list.onFocusChange(function(e){return a.onListFocus(e)}),this.editor.addListener2(m.EventType.CursorSelectionChanged,function(){return a.onCursorSelectionChanged()}),this.model.onDidTrigger(function(e){return a.onDidTrigger(e)}),this.model.onDidSuggest(function(e){return a.onDidSuggest(e)}),this.model.onDidCancel(function(e){return a.onDidCancel(e)})],this.onModelModeChanged(),this.editor.addContentWidget(this),this.setState(b.Hidden)}return Object.defineProperty(e.prototype,"onDidVisibilityChange",{get:function(){return this._onDidVisibilityChange.event},enumerable:!0,configurable:!0}),e.prototype.onCursorSelectionChanged=function(){this.state!==b.Hidden&&this.editor.layoutContentWidget(this)},e.prototype.onEditorBlur=function(){var e=this;this.editorBlurTimeout=a.TPromise.timeout(150).then(function(){e.editor.isFocused()||e.setState(b.Hidden)})},e.prototype.onListSelection=function(e){if(e.elements.length){this.telemetryData.selectedIndex=0,this.telemetryData.wasCancelled=!1,this.telemetryData.selectedIndex=e.indexes[0],this.submitTelemetryData();var t=e.elements[0],i=t.container,o="undefined"==typeof t.suggestion.overwriteBefore?i.currentWord.length:t.suggestion.overwriteBefore,r="undefined"==typeof t.suggestion.overwriteAfter?0:Math.max(0,t.suggestion.overwriteAfter);this.model.accept(t.suggestion,o,r),y.alert(n.localize(6,null,t.suggestion.label)),this.editor.focus()}},e.prototype._getSuggestionAriaAlertLabel=function(e){return e.suggestion.documentationLabel?n.localize(7,null,e.suggestion.label):n.localize(8,null,e.suggestion.label)},e.prototype._ariaAlert=function(e){this._lastAriaAlertLabel!==e&&(this._lastAriaAlertLabel=e,this._lastAriaAlertLabel&&y.alert(this._lastAriaAlertLabel))},e.prototype.onListFocus=function(e){var t=this;if(this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null),!e.elements.length)return void this._ariaAlert(null);var n=e.elements[0];if(this._ariaAlert(this._getSuggestionAriaAlertLabel(n)),n!==this.focusedItem){var i=e.indexes[0];this.suggestionSupportsAutoAccept.set(!n.suggestion.noAutoAccept),this.focusedItem=n,this.list.setFocus(i),this.updateWidgetHeight(),this.list.reveal(i);var r=this.editor.getModel().getAssociatedResource(),s=this.model.getRequestPosition()||this.editor.getPosition();this.currentSuggestionDetails=n.resolveDetails(r,s).then(function(e){n.updateDetails(e),t.list.setFocus(i),t.updateWidgetHeight(),t.list.reveal(i),t._ariaAlert(t._getSuggestionAriaAlertLabel(n))}).then(null,function(e){return!o.isPromiseCanceledError(e)&&o.onUnexpectedError(e)}).then(function(){return t.currentSuggestionDetails=null})}},e.prototype.onModelModeChanged=function(){var e=this.editor.getModel(),t=g.SuggestRegistry.all(e);this.shouldShowEmptySuggestionList=t.some(function(e){return e.shouldShowEmptySuggestionList()})},e.prototype.setState=function(t){var n=this.state!==t;switch(this.state=t,c.toggleClass(this.element,"frozen",t===b.Frozen),t){case b.Hidden:c.hide(this.messageElement,this.details.element),c.show(this.listElement),this.hide(),n&&this.list.splice(0,this.list.length);break;case b.Loading:this.messageElement.innerText=e.LOADING_MESSAGE,c.hide(this.listElement,this.details.element),c.show(this.messageElement),this.show();break;case b.Empty:this.messageElement.innerText=e.NO_SUGGESTIONS_MESSAGE,c.hide(this.listElement,this.details.element),c.show(this.messageElement),this.show();break;case b.Open:c.hide(this.messageElement,this.details.element),c.show(this.listElement),this.show();break;case b.Frozen:c.hide(this.messageElement,this.details.element),c.show(this.listElement),this.show();break;case b.Details:c.hide(this.messageElement,this.listElement),c.show(this.details.element),this.show(),this._ariaAlert(this.details.getAriaLabel())}n&&this.editor.layoutContentWidget(this)},e.prototype.onDidTrigger=function(e){var t=this;this.state===b.Hidden&&(this.telemetryTimer=this.telemetryService.start("suggestWidgetLoadingTime"),this.isAuto=!!e.auto,this.isAuto||(this.loadingTimeout=setTimeout(function(){t.loadingTimeout=null,t.setState(b.Loading)},50)),e.retrigger||(this.telemetryData={wasAutomaticallyTriggered:e.characterTriggered}))},e.prototype.onDidSuggest=function(e){if(clearTimeout(this.loadingTimeout),this.completionModel=e.completionModel,e.isFrozen&&this.state!==b.Empty)return void this.setState(b.Frozen);var t=this.completionModel.items.length,n=0===t;if(n)e.auto?this.setState(b.Hidden):this.shouldShowEmptySuggestionList?this.setState(b.Empty):this.setState(b.Hidden),this.completionModel=null;else{var i=e.currentWord,o=i.toLowerCase(),r=-1,s=-1;this.completionModel.items.forEach(function(e,t){var n=_(e.suggestion.label,i,o);n>s&&(s=n,r=t)}),this.telemetryData=this.telemetryData||{},this.telemetryData.suggestionCount=this.completionModel.items.length,this.telemetryData.suggestedIndex=r,this.telemetryData.hintLength=i.length,(a=this.list).splice.apply(a,[0,this.list.length].concat(this.completionModel.items)),this.list.setFocus(r),this.list.reveal(r,0),this.setState(b.Open)}this.telemetryTimer&&(this.telemetryTimer.data={reason:n?"empty":"results"},this.telemetryTimer.stop(),this.telemetryTimer=null);var a},e.prototype.onDidCancel=function(e){clearTimeout(this.loadingTimeout),e.retrigger||(this.setState(b.Hidden),this.telemetryData&&(this.telemetryData.selectedIndex=-1,this.telemetryData.wasCancelled=!0,this.submitTelemetryData())),this.telemetryTimer&&(this.telemetryTimer.data={reason:"cancel"},this.telemetryTimer.stop(),this.telemetryTimer=null)},e.prototype.selectNextPage=function(){switch(this.state){case b.Hidden:return!1;case b.Details:return this.details.pageDown(),!0;case b.Loading:return!this.isAuto;default:return this.list.focusNextPage(),!0}},e.prototype.selectNext=function(){switch(this.state){case b.Hidden:return!1;case b.Details:return this.details.scrollDown(),!0;case b.Loading:return!this.isAuto;default:return this.list.focusNext(1,!0),!0}},e.prototype.selectPreviousPage=function(){switch(this.state){case b.Hidden:return!1;case b.Details:return this.details.pageUp(),!0;case b.Loading:return!this.isAuto;default:return this.list.focusPreviousPage(),!0}},e.prototype.selectPrevious=function(){switch(this.state){case b.Hidden:return!1;case b.Details:return this.details.scrollUp(),!0;case b.Loading:return!this.isAuto;default:return this.list.focusPrevious(1,!0),!0}},e.prototype.acceptSelectedSuggestion=function(){switch(this.state){case b.Hidden:return!1;case b.Loading:return!this.isAuto;default:var e=this.list.getFocus()[0];return e?this.list.setSelection(this.completionModel.items.indexOf(e)):this.model.cancel(),!0}},e.prototype.toggleDetails=function(){if(this.state===b.Details)return this.setState(b.Open),void this.editor.focus();if(this.state===b.Open){var e=this.list.getFocus()[0];e&&e.suggestion.documentationLabel&&(this.setState(b.Details),this.editor.focus())}},e.prototype.show=function(){var e=this;this.updateWidgetHeight(),this._onDidVisibilityChange.fire(!0),this.renderDetails(),this.showTimeout=a.TPromise.timeout(100).then(function(){c.addClass(e.element,"visible")})},e.prototype.hide=function(){this._onDidVisibilityChange.fire(!1),c.removeClass(this.element,"visible")},e.prototype.cancel=function(){this.state===b.Details?this.toggleDetails():this.model.cancel()},e.prototype.getPosition=function(){return this.state===b.Hidden?null:{position:this.editor.getPosition(),preference:[v.ContentWidgetPositionPreference.BELOW,v.ContentWidgetPositionPreference.ABOVE]}},e.prototype.getDomNode=function(){return this.element},e.prototype.getId=function(){return e.ID},e.prototype.submitTelemetryData=function(){this.telemetryService.publicLog("suggestWidget",this.telemetryData),this.telemetryData=null},e.prototype.updateWidgetHeight=function(){var e=0;if(this.state===b.Empty||this.state===b.Loading)e=w;else if(this.state===b.Details)e=12*w;else{var t=this.list.getFocus()[0],n=t?this.delegate.getHeight(t):w;e=n;var i=(this.list.contentHeight-n)/w;e+=Math.min(i,11)*w}return this.element.style.height=e+"px",this.list.layout(e),this.editor.layoutContentWidget(this),e},e.prototype.renderDetails=function(){this.state!==b.Details?this.details.render(null):this.details.render(this.list.getFocus()[0])},e.prototype.dispose=function(){this.state=null,this.suggestionSupportsAutoAccept=null,this.currentSuggestionDetails=null,this.focusedItem=null,this.telemetryData=null,this.telemetryService=null,this.telemetryTimer=null,this.element=null,this.messageElement=null,this.listElement=null,this.details.dispose(),this.details=null,this.list.dispose(),this.list=null,this.toDispose=s.disposeAll(this.toDispose),this._onDidVisibilityChange.dispose(),this._onDidVisibilityChange=null,clearTimeout(this.loadingTimeout),this.loadingTimeout=null,this.editorBlurTimeout&&(this.editorBlurTimeout.cancel(),this.editorBlurTimeout=null),this.showTimeout&&(this.showTimeout.cancel(),this.showTimeout=null)},e.ID="editor.widget.suggestWidget",e.WIDTH=438,e.LOADING_MESSAGE=n.localize(4,null),e.NO_SUGGESTIONS_MESSAGE=n.localize(5,null),e=__decorate([__param(2,p.IKeybindingService),__param(3,f.ITelemetryService),__param(4,h.IInstantiationService)],e)}();t.SuggestWidget=k});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/suggest/browser/suggest",["require","exports","vs/nls!vs/editor/contrib/suggest/browser/suggest","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingService","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/snippet/common/snippet","vs/editor/contrib/suggest/common/suggest","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/config/config","./suggestModel","./suggestWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){"use strict";var _=function(){function e(e,t,n){var i=this;this.editor=e,this.suggestWidgetVisible=t.createKey(f.CONTEXT_SUGGEST_WIDGET_VISIBLE,!1),this.model=new g.SuggestModel(this.editor),this.widget=n.createInstance(y.SuggestWidget,this.editor,this.model),this.triggerCharacterListeners=[],this.toDispose=[],this.toDispose.push(this.widget.onDidVisibilityChange(function(e){return e?i.suggestWidgetVisible.set(!0):i.suggestWidgetVisible.reset()})),this.toDispose.push(e.addListener2(l.EventType.ConfigurationChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(l.EventType.ModelChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(l.EventType.ModelModeChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(l.EventType.ModelModeSupportChanged,function(e){e.suggestSupport&&i.update()})),this.toDispose.push(f.SuggestRegistry.onDidChange(this.update,this)),this.toDispose.push(this.model.onDidAccept(function(e){return p.getSnippetController(i.editor).run(e.snippet,e.overwriteBefore,e.overwriteAfter)})),this.update()}return e.getSuggestController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose),this.triggerCharacterListeners=r.cAll(this.triggerCharacterListeners),this.widget&&(this.widget.dispose(),this.widget=null),this.model&&(this.model.dispose(),this.model=null)},e.prototype.update=function(){var e=this;if(this.triggerCharacterListeners=r.cAll(this.triggerCharacterListeners),!this.editor.getConfiguration().readOnly&&this.editor.getModel()&&this.editor.getConfiguration().suggestOnTriggerCharacters){var t=f.SuggestRegistry.orderedGroups(this.editor.getModel());if(0!==t.length){var n=Object.create(null);t.forEach(function(e){var t=Object.create(null);e.forEach(function(e){var i=e.getTriggerCharacters();if(i)for(var o=0,r=i;o<r.length;o++){var s=r[o],a=t[s];a?a.push(e):(a=[e],t[s]=a,n[s]?n[s].push(a):n[s]=[a])}})}),Object.keys(n).forEach(function(t){e.triggerCharacterListeners.push(e.editor.addTypingListener(t,function(){e.triggerCharacterHandler(t,n[t])}))})}}},e.prototype.triggerCharacterHandler=function(e,t){var n=this.editor.getPosition(),o=this.editor.getModel().getLineContext(n.lineNumber);t=t.map(function(t){return t.filter(function(t){return t.shouldAutotriggerSuggest(o,n.column-1,e)})}),t.length>0&&this.triggerSuggest(e,t).done(null,i.onUnexpectedError)},e.prototype.triggerSuggest=function(e,t){return this.model.trigger(!1,e,!1,t),this.editor.focus(),s.TPromise.as(!1)},e.prototype.acceptSelectedSuggestion=function(){this.widget&&this.widget.acceptSelectedSuggestion()},e.prototype.cancelSuggestWidget=function(){this.widget&&this.widget.cancel()},e.prototype.selectNextSuggestion=function(){this.widget&&this.widget.selectNext()},e.prototype.selectNextPageSuggestion=function(){this.widget&&this.widget.selectNextPage()},e.prototype.selectPrevSuggestion=function(){this.widget&&this.widget.selectPrevious()},e.prototype.selectPrevPageSuggestion=function(){this.widget&&this.widget.selectPreviousPage()},e.prototype.toggleSuggestionDetails=function(){this.widget&&this.widget.toggleDetails()},e.ID="editor.contrib.suggestController",e=__decorate([__param(1,c.IKeybindingService),__param(2,a.IInstantiationService)],e)}();t.SuggestController=_;var b=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){return f.SuggestRegistry.has(this.editor.getModel())&&!this.editor.getConfiguration().readOnly},t.prototype.run=function(){return _.getSuggestController(this.editor).triggerSuggest()},t.ID="editor.action.triggerSuggest",t}(u.EditorAction);t.TriggerSuggestAction=b;var S=d.CommonEditorRegistry.commandWeight(90);d.CommonEditorRegistry.registerEditorAction(new d.EditorActionDescriptor(b,b.ID,n.localize(0,null),{context:d.ContextKey.EditorTextFocus,primary:o.KeyMod.CtrlCmd|o.KeyCode.Space,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.Space}})),d.CommonEditorRegistry.registerEditorCommand(f.ACCEPT_SELECTED_SUGGESTION_CMD,S,{primary:o.KeyCode.Tab},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.acceptSelectedSuggestion()}),m.KeybindingsRegistry.registerCommandDesc({id:"acceptSelectedSuggestionOnEnter",handler:function(e,t){v.withCodeEditorFromCommandHandler("acceptSelectedSuggestionOnEnter",e,t,function(e){var t=_.getSuggestController(e);t.acceptSelectedSuggestion()})},weight:S,context:c.KbExpr.and(c.KbExpr.has(f.CONTEXT_SUGGEST_WIDGET_VISIBLE),c.KbExpr.has("config.editor.acceptSuggestionOnEnter")),primary:o.KeyCode.Enter}),d.CommonEditorRegistry.registerEditorCommand("hideSuggestWidget",S,{primary:o.KeyCode.Escape,secondary:[o.KeyMod.Shift|o.KeyCode.Escape]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.cancelSuggestWidget()}),d.CommonEditorRegistry.registerEditorCommand("selectNextSuggestion",S,{primary:o.KeyCode.DownArrow,secondary:[o.KeyMod.Alt|o.KeyCode.DownArrow]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.selectNextSuggestion()}),d.CommonEditorRegistry.registerEditorCommand("selectNextPageSuggestion",S,{primary:o.KeyCode.PageDown,secondary:[o.KeyMod.Alt|o.KeyCode.PageDown]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.selectNextPageSuggestion()}),d.CommonEditorRegistry.registerEditorCommand("selectPrevSuggestion",S,{primary:o.KeyCode.UpArrow,secondary:[o.KeyMod.Alt|o.KeyCode.UpArrow]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.selectPrevSuggestion()}),d.CommonEditorRegistry.registerEditorCommand("selectPrevPageSuggestion",S,{primary:o.KeyCode.PageUp,secondary:[o.KeyMod.Alt|o.KeyCode.PageUp]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.selectPrevPageSuggestion()}),d.CommonEditorRegistry.registerEditorCommand("toggleSuggestionDetails",S,{primary:o.KeyMod.CtrlCmd|o.KeyCode.Space,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.Space}},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=_.getSuggestController(t);i.toggleSuggestionDetails()}),h.EditorBrowserRegistry.registerEditorContribution(_)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",["require","exports","vs/nls!vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(e){function t(t,n){e.call(this,t,n,s.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){return this.editor.getConfiguration().tabFocusMode?this.editor.updateOptions({tabFocusMode:!1}):this.editor.updateOptions({tabFocusMode:!0}),o.TPromise.as(!0)},t.ID="editor.action.toggleTabFocusMode",t}(r.EditorAction);t.ToggleTabFocusModeAction=c,a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(c,c.ID,n.localize(0,null),{context:a.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_M,mac:{primary:i.KeyMod.WinCtrl|i.KeyMod.Shift|i.KeyCode.KEY_M}}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/accessibility/browser/accessibility",["require","exports","vs/nls!vs/editor/contrib/accessibility/browser/accessibility","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/htmlContentRenderer","vs/base/browser/styleMutator","vs/base/browser/ui/widget","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/config/commonEditorConfig","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode","vs/css!./accessibility"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";var b=n.localize(0,null),S="accessibilityHelpWidgetVisible",E="toggleExperimentalScreenReaderSupport",w=function(e){function t(t,n){e.call(this),this._editor=t,this._widget=this._register(new C(this._editor,n))}return __extends(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.show=function(){this._widget.show()},t.prototype.hide=function(){this._widget.hide()},t.ID="editor.contrib.accessibilityHelpController",t=__decorate([__param(1,d.IKeybindingService)],t)}(o.Disposable),C=function(e){function t(n,i){var o=this;e.call(this),this._editor=n,this._keybindingService=i,this._isVisibleKey=i.createKey(S,!1),this._domNode=document.createElement("div"),this._domNode.className="accessibilityHelpWidget",u.StyleMutator.setWidth(this._domNode,t.WIDTH),u.StyleMutator.setHeight(this._domNode,t.HEIGHT),this._domNode.style.display="none",this._domNode.setAttribute("role","tooltip"),this._domNode.setAttribute("aria-hidden","true"),this._isVisible=!1,this._register(this._editor.addListener2(v.EventType.EditorLayout,function(){o._isVisible&&o._layout()})),this.onblur(this._domNode,function(){o.hide()}),this._editor.addOverlayWidget(this)}return __extends(t,e),t.prototype.dispose=function(){this._editor.removeOverlayWidget(this),e.prototype.dispose.call(this)},t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return{preference:null}},t.prototype.show=function(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.style.display="block",this._domNode.setAttribute("aria-hidden","false"),this._domNode.tabIndex=0,this._buildContent(),this._domNode.focus())},t.prototype._descriptionForCommand=function(e,t,n){var i=this._keybindingService.lookupKeybindings(e);return i.length>0?r.format(t,this._keybindingService.getAriaLabelFor(i[0])):r.format(n,e)},t.prototype._buildContent=function(){var e=this._editor.getConfiguration(),t=n.localize(1,null);t+="\n\n"+n.localize(2,null);var i=n.localize(3,null),o=n.localize(4,null),r=n.localize(5,null),s=n.localize(6,null);t+=e.tabFocusMode?"\n\n -"+this._descriptionForCommand(_.ToggleTabFocusModeAction.ID,i,o):"\n\n -"+this._descriptionForCommand(_.ToggleTabFocusModeAction.ID,r,s);var a=n.localize(7,null),u=n.localize(8,null),l=n.localize(9,null),d=n.localize(10,null),h=n.localize(11,null);t+=e.experimentalScreenReader?"\n\n - "+a:p.GlobalScreenReaderNVDA.getValue()?"\n\n -"+this._descriptionForCommand(E,u,l):"\n\n -"+this._descriptionForCommand(E,d,h),t+="\n\n"+n.localize(12,null),this._domNode.appendChild(c.renderHtml({formattedText:t}))},t.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.style.display="none",this._domNode.setAttribute("aria-hidden","true"),this._domNode.tabIndex=-1,a.clearNode(this._domNode),this._editor.focus())},t.prototype._layout=function(){var e=this._editor.getLayoutInfo(),n=Math.round((e.height-t.HEIGHT)/2);u.StyleMutator.setTop(this._domNode,n);var i=Math.round((e.width-t.WIDTH)/2);u.StyleMutator.setLeft(this._domNode,i)},t.ID="editor.contrib.accessibilityHelpWidget",t.WIDTH=500,t.HEIGHT=300,t}(l.Widget),T=function(e){function t(t,n){e.call(this,t,n,m.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=w.get(this.editor);return e.show(),s.TPromise.as(!0)},t}(f.EditorAction);y.EditorBrowserRegistry.registerEditorContribution(w),g.CommonEditorRegistry.registerEditorAction(new g.EditorActionDescriptor(T,v.SHOW_ACCESSIBILITY_HELP_ACTION_ID,b,{context:g.ContextKey.EditorFocus,primary:i.KeyMod.Alt|i.KeyCode.F1})),g.CommonEditorRegistry.registerEditorCommand("closeAccessibilityHelp",g.CommonEditorRegistry.commandWeight(100),{primary:i.KeyCode.Escape,secondary:[i.KeyMod.Shift|i.KeyCode.Escape]},!1,S,function(e,t,n){w.get(t).hide()}),h.KeybindingsRegistry.registerCommandDesc({id:E,handler:function(e,t){var n=p.GlobalScreenReaderNVDA.getValue();p.GlobalScreenReaderNVDA.setValue(!n)},weight:h.KeybindingsRegistry.WEIGHT.workbenchContrib(),context:null,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_R})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/toggleWordWrap/common/toggleWordWrap",["require","exports","vs/nls!vs/editor/contrib/toggleWordWrap/common/toggleWordWrap","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/config/defaultConfig","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n){e.call(this,t,n,a.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getConfiguration().wrappingInfo;return e.isViewportWrapping?e.wrappingColumn=r.DefaultConfig.editor.wrappingColumn:e.wrappingColumn=0,this.editor.updateOptions(e),o.TPromise.as(!0)},t.ID="editor.action.toggleWordWrap",t}(s.EditorAction);c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(u,u.ID,n.localize(0,null),{context:c.ContextKey.EditorTextFocus,primary:i.KeyMod.Alt|i.KeyCode.KEY_Z,mac:{primary:i.KeyMod.Alt|i.KeyCode.KEY_Z},linux:{primary:i.KeyMod.Alt|i.KeyCode.KEY_Z}}))}),define("vs/editor/contrib/wordHighlighter/common/wordHighlighter",["require","exports","vs/base/common/async","vs/base/common/errors","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,o,r,s,a){"use strict";function c(e,o){var r=e.getAssociatedResource(),s=t.OccurrencesRegistry.ordered(e),a=!1;return n.sequence(s.map(function(e){return function(){return a?void 0:e.findOccurrences(r,o).then(function(e){return Array.isArray(e)&&e.length>0?(a=!0,e):void 0},function(e){i.onUnexpectedError(e)})}})).then(function(e){return e[0]})}t.OccurrencesRegistry=new a["default"]("occurrencesSupport"),t.getOccurrencesAtPosition=c,s.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDocumentHighlights",c);var u=function(){function e(e){var t=this;this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.model=this.editor.getModel(),this.toUnhook=[],this.toUnhook.push(e.addListener(r.EventType.CursorPositionChanged,function(e){t._onPositionChanged(e)})),this.toUnhook.push(e.addListener(r.EventType.ModelChanged,function(e){t._stopAll(),t.model=t.editor.getModel()})),this.toUnhook.push(e.addListener("change",function(e){t._stopAll()})),this._lastWordRange=null,this._decorationIds=[],this.workerRequestTokenId=0,
this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}return e.prototype._removeDecorations=function(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]))},e.prototype._stopAll=function(){this._lastWordRange=null,this._removeDecorations(),-1!==this.renderDecorationsTimer&&(window.clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)},e.prototype._onPositionChanged=function(e){var n=this;if("explicit"!==e.reason)return void this._stopAll();if(!t.OccurrencesRegistry.has(this.model))return void this._stopAll();var i=this.editor.getSelection();if(i.startLineNumber!==i.endLineNumber)return void this._stopAll();var r=i.startLineNumber,s=i.startColumn,a=i.endColumn,u=this.model.getWordAtPosition({lineNumber:r,column:s});if(!u||u.startColumn>s||u.endColumn<a)return void this._stopAll();for(var l=new o.Range(r,u.startColumn,r,u.endColumn),d=this._lastWordRange&&this._lastWordRange.equalsRange(l),h=0,p=this._decorationIds.length;!d&&p>h;h++){var f=this.model.getDecorationRange(this._decorationIds[h]);f&&f.startLineNumber===r&&f.startColumn<=s&&f.endColumn>=a&&(d=!0)}if(this.lastCursorPositionChangeTime=(new Date).getTime(),d)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(window.clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var m=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=c(this.model,this.editor.getPosition()),this.workerRequest.then(function(e){m===n.workerRequestTokenId&&(n.workerRequestCompleted=!0,n.workerRequestValue=e||[],n._beginRenderDecorations())}).done()}this._lastWordRange=l},e.prototype._beginRenderDecorations=function(){var e=this,t=(new Date).getTime(),n=this.lastCursorPositionChangeTime+250;t>=n?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=window.setTimeout(function(){e.renderDecorations()},n-t)},e.prototype.renderDecorations=function(){this.renderDecorationsTimer=-1;for(var e=[],t=0,n=this.workerRequestValue.length;n>t;t++){var i=this.workerRequestValue[t],o="wordHighlight",s="#A0A0A0";"write"===i.kind?o+="Strong":"text"===i.kind&&(o="selectionHighlight"),e.push({range:i.range,options:{stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:o,overviewRuler:{color:s,darkColor:s,position:r.OverviewRulerLane.Center}}})}this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e)},e.prototype.destroy=function(){for(this._stopAll();this.toUnhook.length>0;)this.toUnhook.pop()()},e}(),l=function(){function e(e){this.wordHighligher=new u(e)}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.wordHighligher.destroy()},e.ID="editor.contrib.wordHighlighter",e}();s.CommonEditorRegistry.registerEditorContribution(l)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/find/common/findController",["require","exports","vs/nls!vs/editor/contrib/find/common/findController","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/platform/keybinding/common/keybindingService","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/contrib/find/common/findModel","vs/editor/contrib/find/common/findState","vs/editor/contrib/wordHighlighter/common/wordHighlighter"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";function v(e,t){var n,i,o=b.getFindController(e),r=o.getState(),s=r.wholeWord,a=r.matchCase;if(!e.isFocused()&&r.isRevealed&&r.searchString.length>0)n=r.searchString;else{var u=e.getSelection();if(u.startLineNumber!==u.endLineNumber)return null;if(u.isEmpty()){var l=e.getModel().getWordAtPosition(u.getStartPosition());if(!l)return null;n=l.word,i=c.Selection.createSelection(u.startLineNumber,l.startColumn,u.startLineNumber,l.endColumn)}else n=e.getModel().getValueInRange(u);t&&o.setSearchString(n)}return{searchText:n,matchCase:a,wholeWord:s,nextMatch:i}}function g(e,t,n,i){void 0===i&&(i=null),h.CommonEditorRegistry.registerEditorCommand(e,h.CommonEditorRegistry.commandWeight(5),n,!1,i,function(e,n,i){t(b.getFindController(n))})}!function(e){e[e.NoFocusChange=0]="NoFocusChange",e[e.FocusFindInput=1]="FocusFindInput",e[e.FocusReplaceInput=2]="FocusReplaceInput"}(t.FindStartFocusAction||(t.FindStartFocusAction={}));var y=t.FindStartFocusAction,_="findWidgetVisible",b=function(e){function t(t,n){var i=this;e.call(this),this._editor=t,this._findWidgetVisible=n.createKey(_,!1),this._state=this._register(new f.FindReplaceState),this._register(this._state.addChangeListener(function(e){return i._onStateChanged(e)})),this._model=null,this._register(this._editor.addListener2(d.EventType.ModelChanged,function(){var e=i._editor.getModel()&&i._state.isRevealed;i.disposeModel(),e&&i._start({forceRevealReplace:!1,seedSearchStringFromSelection:!1,seedSearchScopeFromSelection:!1,shouldFocus:y.NoFocusChange,shouldAnimate:!1})}))}return __extends(t,e),t.getFindController=function(e){return e.getContribution(t.ID)},t.prototype.dispose=function(){this.disposeModel(),e.prototype.dispose.call(this)},t.prototype.disposeModel=function(){this._model&&(this._model.dispose(),this._model=null)},t.prototype.getId=function(){return t.ID},t.prototype._onStateChanged=function(e){e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel()))},t.prototype.getState=function(){return this._state},t.prototype.closeFindWidget=function(){this._state.change({isRevealed:!1},!1),this._editor.focus()},t.prototype.toggleCaseSensitive=function(){this._state.change({matchCase:!this._state.matchCase},!1)},t.prototype.toggleWholeWords=function(){this._state.change({wholeWord:!this._state.wholeWord},!1)},t.prototype.toggleRegex=function(){this._state.change({isRegex:!this._state.isRegex},!1)},t.prototype.setSearchString=function(e){this._state.change({searchString:e},!1)},t.prototype.getSelectionSearchString=function(){var e=this._editor.getSelection();if(e.startLineNumber===e.endLineNumber){if(!e.isEmpty())return this._editor.getModel().getValueInRange(e);var t=this._editor.getModel().getWordAtPosition(e.getStartPosition());if(t)return t.word}return null},t.prototype._start=function(e){if(this.disposeModel(),this._editor.getModel()){var t={isRevealed:!0};if(e.seedSearchStringFromSelection){var n=this.getSelectionSearchString();n&&(t.searchString=n)}var i=this._editor.getSelection();t.searchScope=null,e.seedSearchScopeFromSelection&&i.startLineNumber<i.endLineNumber&&(t.searchScope=i),e.forceRevealReplace&&(t.isReplaceRevealed=!0),this._state.change(t,!1),this._model||(this._model=new p.FindModelBoundToEditorModel(this._editor,this._state))}},t.prototype.start=function(e){this._start(e)},t.prototype.moveToNextMatch=function(){return this._model?(this._model.moveToNextMatch(),!0):!1},t.prototype.moveToPrevMatch=function(){return this._model?(this._model.moveToPrevMatch(),!0):!1},t.prototype.replace=function(){return this._model?(this._model.replace(),!0):!1},t.prototype.replaceAll=function(){return this._model?(this._model.replaceAll(),!0):!1},t.ID="editor.contrib.findController",t=__decorate([__param(1,s.IKeybindingService)],t)}(o.Disposable);t.CommonFindController=b;var S=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor);return e.start({forceRevealReplace:!1,seedSearchStringFromSelection:!0,seedSearchScopeFromSelection:!0,shouldFocus:y.FocusFindInput,shouldAnimate:!0}),r.TPromise.as(!0)},t}(u.EditorAction);t.StartFindAction=S;var E=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor);return this._run(e)||(e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length,seedSearchScopeFromSelection:!1,shouldFocus:y.NoFocusChange,shouldAnimate:!0}),this._run(e)),r.TPromise.as(!0)},t}(u.EditorAction);t.MatchFindAction=E;var w=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._run=function(e){return e.moveToNextMatch()},t}(E);t.NextMatchFindAction=w;var C=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._run=function(e){return e.moveToPrevMatch()},t}(E);t.PreviousMatchFindAction=C;var T=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor),t=e.getSelectionSearchString();return t&&e.setSearchString(t),this._run(e)||(e.start({forceRevealReplace:!1,seedSearchStringFromSelection:!1,seedSearchScopeFromSelection:!1,shouldFocus:y.NoFocusChange,shouldAnimate:!0}),this._run(e)),r.TPromise.as(!0)},t}(u.EditorAction);t.SelectionMatchFindAction=T;var k=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._run=function(e){return e.moveToNextMatch()},t}(T);t.NextSelectionMatchFindAction=k;var x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._run=function(e){return e.moveToPrevMatch()},t}(T);t.PreviousSelectionMatchFindAction=x;var I=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.WidgetFocus|l.Behaviour.Writeable)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor);return e.start({forceRevealReplace:!0,seedSearchStringFromSelection:!0,seedSearchScopeFromSelection:!0,shouldFocus:y.FocusReplaceInput,shouldAnimate:!0}),r.TPromise.as(!0)},t}(u.EditorAction);t.StartFindReplaceAction=I;var D=function(e){function t(t,n){e.call(this,t,n,l.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype._getNextMatch=function(){var e=v(this.editor,!0);if(!e)return null;if(e.nextMatch)return e.nextMatch;var t=this.editor.getSelections(),n=t[t.length-1],i=this.editor.getModel().findNextMatch(e.searchText,n.getEndPosition(),!1,e.matchCase,e.wholeWord);return i?c.Selection.createSelection(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):null},t}(u.EditorAction);t.SelectNextFindMatchAction=D;var A=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this._getNextMatch();if(!e)return r.TPromise.as(!1);var t=this.editor.getSelections();return this.editor.setSelections(t.concat(e)),this.editor.revealRangeInCenterIfOutsideViewport(e),r.TPromise.as(!0)},t.ID=p.FIND_IDS.AddSelectionToNextFindMatchAction,t}(D);t.AddSelectionToNextFindMatchAction=A;var L=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this._getNextMatch();if(!e)return r.TPromise.as(!1);var t=this.editor.getSelections();return this.editor.setSelections(t.slice(0,t.length-1).concat(e)),this.editor.revealRangeInCenterIfOutsideViewport(e),r.TPromise.as(!0)},t.ID=p.FIND_IDS.MoveSelectionToNextFindMatchAction,t}(D);t.MoveSelectionToNextFindMatchAction=L;var O=function(e){function t(n,i){var o=l.Behaviour.WidgetFocus|l.Behaviour.Writeable;n.id===t.COMPAT_ID&&(o|=l.Behaviour.ShowInContextMenu),e.call(this,n,i,o)}return __extends(t,e),t.prototype.getGroupId=function(){return"2_change/1_changeAll"},t.prototype.run=function(){var e=v(this.editor,!0);if(!e)return r.TPromise.as(!1);var t=this.editor.getModel().findMatches(e.searchText,!0,!1,e.matchCase,e.wholeWord);return t.length>0&&this.editor.setSelections(t.map(function(e){return c.Selection.createSelection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)})),r.TPromise.as(!0)},t.ID="editor.action.selectHighlights",t.COMPAT_ID="editor.action.changeAll",t}(u.EditorAction);t.SelectHighlightsAction=O;var M=function(e){function t(t){var n=this;e.call(this),this.editor=t,this.decorations=[],this._register(t.addListener2(d.EventType.CursorSelectionChanged,function(e){e.selection.isEmpty()?"explicit"===e.reason?n._update():n.removeDecorations():n._update()})),this._register(t.addListener2(d.EventType.ModelChanged,function(e){n.removeDecorations()})),this._register(b.getFindController(t).getState().addChangeListener(function(e){n._update()}))}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},t.prototype._update=function(){if(this.editor.getConfiguration().selectionHighlight){var e=v(this.editor,!1);if(!e)return void this.removeDecorations();var t=this.editor.getModel(),n=m.OccurrencesRegistry.has(t);if(e.nextMatch&&n)return void this.removeDecorations();if(/^[ \t]+$/.test(e.searchText))return void this.removeDecorations();if(e.searchText.length>200)return void this.removeDecorations();for(var i=this.editor.getSelections(),o=t.getValueInRange(i[0]),r=1;r<i.length;r++){var s=t.getValueInRange(i[r]);if(o!==s)return void this.removeDecorations()}var c=t.findMatches(e.searchText,!0,!1,e.matchCase,e.wholeWord);c.sort(a.Range.compareRangesUsingStarts),i.sort(a.Range.compareRangesUsingStarts);for(var u=[],r=0,l=0,h=c.length,p=i.length;h>r;){var f=c[r];if(l>=p)u.push(f),r++;else{var g=a.Range.compareRangesUsingStarts(f,i[l]);0>g?(u.push(f),r++):g>0?l++:(r++,l++)}}var y=u.map(function(e){return{range:e,options:{stickiness:d.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"selectionHighlight",overviewRuler:n?void 0:{color:"#A0A0A0",darkColor:"#A0A0A0",position:d.OverviewRulerLane.Center}}}});this.decorations=this.editor.deltaDecorations(this.decorations,y)}},t.prototype.dispose=function(){this.removeDecorations(),e.prototype.dispose.call(this)},t.ID="editor.contrib.selectionHighlighter",t}(o.Disposable);t.SelectionHighlighter=M,h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(O,O.ID,n.localize(0,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_L})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(O,O.COMPAT_ID,n.localize(1,null),{context:h.ContextKey.EditorTextFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.F2})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(S,p.FIND_IDS.StartFindAction,n.localize(2,null),{context:h.ContextKey.None,primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_F})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(w,p.FIND_IDS.NextMatchFindAction,n.localize(3,null),{context:h.ContextKey.EditorFocus,primary:i.KeyCode.F3,mac:{primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_G,secondary:[i.KeyCode.F3]}})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(C,p.FIND_IDS.PreviousMatchFindAction,n.localize(4,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.Shift|i.KeyCode.F3,mac:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_G,secondary:[i.KeyMod.Shift|i.KeyCode.F3]}})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(k,p.FIND_IDS.NextSelectionMatchFindAction,n.localize(5,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.F3})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(x,p.FIND_IDS.PreviousSelectionMatchFindAction,n.localize(6,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.F3})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(I,p.FIND_IDS.StartFindReplaceAction,n.localize(7,null),{context:h.ContextKey.None,primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_H,mac:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.KEY_F}})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(L,L.ID,n.localize(8,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.chord(i.KeyMod.CtrlCmd|i.KeyCode.KEY_K,i.KeyMod.CtrlCmd|i.KeyCode.KEY_D)})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(A,A.ID,n.localize(9,null),{context:h.ContextKey.EditorFocus,primary:i.KeyMod.CtrlCmd|i.KeyCode.KEY_D})),g(p.FIND_IDS.CloseFindWidgetCommand,function(e){return e.closeFindWidget()},{primary:i.KeyCode.Escape,secondary:[i.KeyMod.Shift|i.KeyCode.Escape]},_),g(p.FIND_IDS.ToggleCaseSensitiveCommand,function(e){return e.toggleCaseSensitive()},{primary:i.KeyMod.Alt|i.KeyCode.KEY_C,mac:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.KEY_C}}),g(p.FIND_IDS.ToggleWholeWordCommand,function(e){return e.toggleWholeWords()},{primary:i.KeyMod.Alt|i.KeyCode.KEY_W,mac:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.KEY_W}}),g(p.FIND_IDS.ToggleRegexCommand,function(e){return e.toggleRegex()},{primary:i.KeyMod.Alt|i.KeyCode.KEY_R,mac:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.KEY_R}}),g(p.FIND_IDS.ReplaceOneAction,function(e){return e.replace()},{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_1}),g(p.FIND_IDS.ReplaceAllAction,function(e){return e.replaceAll()},{primary:i.KeyMod.CtrlCmd|i.KeyMod.Alt|i.KeyCode.Enter})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/find/browser/find",["require","exports","vs/platform/contextview/browser/contextView","vs/platform/keybinding/common/keybindingService","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/find/browser/findWidget","vs/editor/contrib/find/common/findController"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,i){e.call(this,t,i),this._widget=this._register(new r.FindWidget(t,this,this._state,n,i))}return __extends(t,e),t.prototype._start=function(t){e.prototype._start.call(this,t),t.shouldFocus===s.FindStartFocusAction.FocusReplaceInput?this._widget.focusReplaceInput():t.shouldFocus===s.FindStartFocusAction.FocusFindInput&&this._widget.focusFindInput()},t=__decorate([__param(1,n.IContextViewService),__param(2,i.IKeybindingService)],t)}(s.CommonFindController);o.EditorBrowserRegistry.registerEditorContribution(a),o.EditorBrowserRegistry.registerEditorContribution(s.SelectionHighlighter)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/textMate/TMSnippets",["require","exports","vs/nls!vs/editor/node/textMate/TMSnippets","vs/base/common/json","vs/base/common/paths","vs/base/node/pfs","vs/platform/extensions/common/extensionsRegistry","vs/editor/common/modes/supports","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/editor/contrib/snippet/common/snippet"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e,t){return r.readFile(t).then(function(n){var o=[],r=i.parse(n.toString(),o),s=f.adapt(r);a.SnippetsRegistry.registerSnippets(e,t,s)})}t.snippetUpdated=d;var h=s.ExtensionsRegistry.registerExtensionPoint("snippets",{description:n.localize(0,null),type:"array",defaultSnippets:[{body:[{language:"",path:""}]}],items:{type:"object",defaultSnippets:[{body:{language:"{{id}}",path:"./snippets/{{id}}.json."}}],properties:{language:{description:n.localize(1,null),type:"string"},path:{description:n.localize(2,null),type:"string"}}}}),p=function(){function e(e,t){var n=this;this._modelService=e,this._modeService=t,h.setHandler(function(e){for(var t=0;t<e.length;t++)for(var i=e[t].value,o=0;o<i.length;o++)n._withTMSnippetContribution(e[t].description.extensionFolderPath,i[o],e[t].collector)})}return e.prototype._withTMSnippetContribution=function(e,t,i){var r=this;if(!t.language||"string"!=typeof t.language||!this._modeService.isRegisteredMode(t.language))return void i.error(n.localize(3,null,h.name,String(t.language)));if(!t.path||"string"!=typeof t.path)return void i.error(n.localize(4,null,h.name,String(t.path)));var s=o.normalize(o.join(e,t.path));0!==s.indexOf(e)&&i.warn(n.localize(5,null,h.name,s,e));var a=t.language,c=this._modeService.onDidCreateMode(function(e){e.getId()===a&&(r.registerDefinition(a,s),c.dispose())})},e.prototype.registerDefinition=function(e,t){r.readFile(t).then(function(t){var n=[],o=i.parse(t.toString(),n),r=f.adapt(o);a.SnippetsRegistry.registerDefaultSnippets(e,r)})},e=__decorate([__param(0,u.IModelService),__param(1,c.IModeService)],e)}();t.MainProcessTextMateSnippet=p;var f=function(){function e(){}return e.adapt=function(t){var n=Object.keys(t),i=[],o=function(t,n){var o=t.prefix,r=t.body;if(Array.isArray(r)&&(r=r.join("\n")),"string"==typeof o&&"string"==typeof r){var s=e.convertSnippet(r);null!==s&&i.push({type:"snippet",label:o,documentationLabel:t.description||n,codeSnippet:s,noAutoAccept:!0})}};return n.forEach(function(e){var n=t[e];if(n.body&&n.prefix)o(n,e);else{var i=Object.keys(n);i.forEach(function(e){o(n[e],e)})}}),i},e.convertSnippet=function(e){return l.CodeSnippet.convertExternalSnippet(e,l.ExternalSnippetType.TextMateSnippet)},e}()}),define("vs/platform/telemetry/common/abstractTelemetryService",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/types","vs/base/common/platform","vs/base/common/timer","vs/base/common/objects","vs/platform/platform","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l={enableTelemetry:!0,enableHardIdle:!0,enableSoftIdle:!0,userOptIn:!0,cleanupPatterns:[]},d=function(){function e(e){var t=this;this.serviceId=u.ITelemetryService,this.sessionId="SESSION_ID_NOT_SET",this.timeKeeper=new s.TimeKeeper,this.toUnbind=[],this.appenders=[],this.timeKeeperListener=function(e){return t.onTelemetryTimerEventStop(e)},this.timeKeeper.addListener(this.timeKeeperListener),this.toUnbind.push(i.errorHandler.addListener(this.onErrorEvent.bind(this))),this.errorBuffer=Object.create(null),this.enableGlobalErrorHandler(),this.errorFlushTimeout=-1,this.config=a.withDefaults(e,l)}return e.prototype._safeStringify=function(e){return a.safeStringify(e)},e.prototype.onTelemetryTimerEventStop=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.data||{};i.duration=n.timeTaken(),this.publicLog(n.name,i)}},e.prototype.onErrorEvent=function(e){if(e){var t=Object.create(null);e.detail&&e.detail.stack&&(e=e.detail);var n=Array.isArray(e.stack)?e.stack.join("\n"):e.stack,i=e.message?e.message:this._safeStringify(e);n&&(t.message=this.cleanupInfo(i),t.stack=this.cleanupInfo(n),this.addErrortoBuffer(t))}},e.prototype.addErrortoBuffer=function(e){this.errorBuffer[e.stack]?this.errorBuffer[e.stack].count++:(e.count=1,this.errorBuffer[e.stack]=e),this.tryScheduleErrorFlush()},e.prototype.tryScheduleErrorFlush=function(){var t=this;-1===this.errorFlushTimeout&&(this.errorFlushTimeout=setTimeout(function(){return t.flushErrorBuffer()},e.ERROR_FLUSH_TIMEOUT))},e.prototype.flushErrorBuffer=function(){if(this.errorBuffer)for(var e in this.errorBuffer)this.publicLog("UnhandledError",this.errorBuffer[e]);this.errorBuffer=Object.create(null),this.errorFlushTimeout=-1},e.prototype.cleanupInfo=function(e){var t=/file:\/\/\/.*?\/resources\/app\//gi;e=e.replace(t,""),t=/file:\/\/\/.*/gi,e=e.replace(t,""),t=/ENOENT: no such file or directory.*?\'([^\']+)\'/gi,e=e.replace(t,"ENOENT: no such file or directory");for(var n=0,i=this.config.cleanupPatterns;n<i.length;n++){var o=i[n];e=e.replace(o,"")}return e},e.prototype.enableGlobalErrorHandler=function(){o.isFunction(r.globals.onerror)&&(this.oldOnError=r.globals.onerror);var e=this,t=function(t,n,i,o,r){e.onUncaughtError(t,n,i,o,r),e.oldOnError&&e.oldOnError.apply(this,arguments)};r.globals.onerror=t},e.prototype.onUncaughtError=function(e,t,n,i,o){t=this.cleanupInfo(t),e=this.cleanupInfo(e);var r={message:e,filename:t,line:n,column:i};o&&(r.error={name:o.name,message:o.message},o.stack&&(Array.isArray(o.stack)&&(o.stack=o.stack.join("\n")),r.stack=this.cleanupInfo(o.stack))),r.stack||(r.stack=r.message),this.addErrortoBuffer(r)},e.prototype.loadTelemetryAppendersFromRegistery=function(){for(var e=c.Registry.as(t.Extenstions.TelemetryAppenders).getTelemetryAppenderDescriptors(),n=0;n<e.length;n++){var i=e[n],o=this.instantiationService.createInstance(i);this.addTelemetryAppender(o)}},e.prototype.getSessionId=function(){return this.sessionId},e.prototype.getMachineId=function(){return this.machineId},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getTelemetryInfo=function(){return n.TPromise.as({instanceId:this.instanceId,sessionId:this.sessionId,machineId:this.machineId})},e.prototype.dispose=function(){for(-1!==this.errorFlushTimeout&&(clearTimeout(this.errorFlushTimeout),this.flushErrorBuffer());this.toUnbind.length;)this.toUnbind.pop()();this.timeKeeper.removeListener(this.timeKeeperListener),this.timeKeeper.dispose();for(var e=0;e<this.appenders.length;e++)this.appenders[e].dispose()},e.prototype.start=function(e,t){var n="public",i=this.timeKeeper.start(n,e);return t&&(i.data=t),i},e.prototype.publicLog=function(e,t){this.handleEvent(e,t)},e.prototype.getAppendersCount=function(){return this.appenders.length},e.prototype.getAppenders=function(){return this.appenders},e.prototype.addTelemetryAppender=function(e){this.appenders.push(e)},e.prototype.removeTelemetryAppender=function(e){var t=this.appenders.indexOf(e);t>-1&&this.appenders.splice(t,1)},e.prototype.setInstantiationService=function(e){this.instantiationService=e,this.instantiationService&&this.loadTelemetryAppendersFromRegistery()},e.prototype.handleEvent=function(e,t){throw new Error("Not implemented!")},e.ERROR_FLUSH_TIMEOUT=5e3,e}();t.AbstractTelemetryService=d,t.Extenstions={TelemetryAppenders:"telemetry.appenders"};var h=function(){function e(){this.telemetryAppenderDescriptors=[]}return e.prototype.registerTelemetryAppenderDescriptor=function(e){this.telemetryAppenderDescriptors.push(e)},e.prototype.getTelemetryAppenderDescriptors=function(){return this.telemetryAppenderDescriptors},e}();c.Registry.add(t.Extenstions.TelemetryAppenders,new h)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/telemetry/browser/mainTelemetryService",["require","exports","vs/base/common/platform","vs/base/common/uuid","vs/base/common/objects","vs/platform/telemetry/common/abstractTelemetryService","vs/base/browser/idleMonitor"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(n){var o=this;e.call(this,n),this.sessionId=this.config.sessionID||i.generateUuid()+Date.now(),this.config.enableHardIdle&&(this.hardIdleMonitor=new s.IdleMonitor),this.config.enableSoftIdle&&(this.softIdleMonitor=new s.IdleMonitor(t.SOFT_IDLE_TIME),this.softIdleMonitor.addOneTimeActiveListener(function(){return o.onUserActive()}),this.softIdleMonitor.addOneTimeIdleListener(function(){return o.onUserIdle()})),this.eventCount=0,this.startTime=new Date,this.optInFriendly=["optInStatus"]}return __extends(t,e),t.prototype.onUserIdle=function(){var e=this;this.publicLog(t.IDLE_START_EVENT_NAME),this.softIdleMonitor.addOneTimeIdleListener(function(){return e.onUserIdle()})},t.prototype.onUserActive=function(){var e=this;this.publicLog(t.IDLE_STOP_EVENT_NAME),this.softIdleMonitor.addOneTimeActiveListener(function(){return e.onUserActive()})},t.prototype.dispose=function(){this.hardIdleMonitor&&this.hardIdleMonitor.dispose(),this.softIdleMonitor&&this.softIdleMonitor.dispose(),e.prototype.dispose.call(this)},t.prototype.handleEvent=function(e,t){var n=this;if((!this.hardIdleMonitor||this.hardIdleMonitor.getStatus()!==s.UserStatus.Idle)&&this.config.enableTelemetry&&(this.config.userOptIn||-1!==this.optInFriendly.indexOf(e))){this.eventCount++,t=t&&o.cloneAndChange(t,function(e){return"string"==typeof e?n.cleanupInfo(e):void 0}),t=this.addCommonProperties(t);for(var i=this.getAppenders(),r=0;r<i.length;r++)i[r].log(e,t)}},t.prototype.addCommonProperties=function(e){e=e||{};var t=new Date;return e.sessionID=this.sessionId,e.timestamp=t,e.version=this.config.version,e.userId=this.userIdHash,e.commitHash=this.config.commitHash,e["common.platform"]=n.Platform[n.platform],e["common.timesincesessionstart"]=t.getTime()-this.startTime.getTime(),e["common.sequence"]=this.eventCount,e["common.instanceId"]=this.instanceId,e["common.machineId"]=this.machineId,e},t.SOFT_IDLE_TIME=12e4,t.IDLE_START_EVENT_NAME="UserIdleStart",t.IDLE_STOP_EVENT_NAME="UserIdleStop",t}(r.AbstractTelemetryService);t.MainTelemetryService=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/electron-browser/electronTelemetryService",["require","exports","getmac","crypto","vs/base/common/winjs.base","vs/nls!vs/platform/telemetry/electron-browser/electronTelemetryService","vs/base/common/errors","vs/base/common/uuid","vs/platform/telemetry/browser/mainTelemetryService","vs/platform/storage/common/storage","vs/platform/configuration/common/configurationRegistry","vs/platform/configuration/common/configuration","vs/platform/platform"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p="telemetry",f=function(){function e(){}return e.MachineId="telemetry.machineId",e.InstanceId="telemetry.instanceId",e}(),m=function(e){function t(t,n,i){e.call(this,i),this.configurationService=t,this.storageService=n,this._buffer=[],this._optInStatusLoaded=!1,this.loadOptinSettings(),this._setupIds=this.setupIds()}return __extends(t,e),t.prototype.getTelemetryInfo=function(){return this._setupIds},t.prototype.publicLog=function(n,i){this._optInStatusLoaded?e.prototype.publicLog.call(this,n,i):(this._buffer.length>t.MAX_BUFFER_SIZE&&(this._buffer=[]),this._buffer.push({eventName:n,data:i}))},t.prototype.flushBuffer=function(){for(var t=null;t=this._buffer.pop();)e.prototype.publicLog.call(this,t.eventName,t.data)},t.prototype.loadOptinSettings=function(){var e=this;
this.configurationService.loadConfiguration(p).done(function(t){e.config.userOptIn=t?t.enableTelemetry:e.config.userOptIn,e._optInStatusLoaded=!0,e.publicLog("optInStatus",{optIn:e.config.userOptIn}),e.flushBuffer()}),this.toUnbind.push(this.configurationService.addListener(d.ConfigurationServiceEventTypes.UPDATED,function(t){e.config.userOptIn=t.config&&t.config[p]?t.config[p].enableTelemetry:e.config.userOptIn}))},t.prototype.setupIds=function(){var e=this;return o.TPromise.join([this.setupInstanceId(),this.setupMachineId()]).then(function(){return{machineId:e.machineId,instanceId:e.instanceId,sessionId:e.sessionId}})},t.prototype.setupInstanceId=function(){var e=this.storageService.get(f.InstanceId);return e||(e=a.generateUuid(),this.storageService.store(f.InstanceId,e)),this.instanceId=e,o.TPromise.as(this.instanceId)},t.prototype.setupMachineId=function(){var e=this,t=this.storageService.get(f.MachineId);return t?(this.machineId=t,o.TPromise.as(this.machineId)):new o.TPromise(function(o,r){try{n.getMac(function(n,r){t=n?a.generateUuid():i.createHash("sha256").update(r,"utf8").digest("hex"),e.machineId=t,e.storageService.store(f.MachineId,t),o(e.machineId)})}catch(c){s.onUnexpectedError(c),t=a.generateUuid(),e.machineId=t,e.storageService.store(f.MachineId,t),o(e.machineId)}})},t.MAX_BUFFER_SIZE=100,t=__decorate([__param(0,d.IConfigurationService),__param(1,u.IStorageService)],t)}(c.MainTelemetryService);t.ElectronTelemetryService=m;var v=h.Registry.as(l.Extensions.Configuration);v.registerConfiguration({id:p,order:20,type:"object",title:r.localize(0,null),properties:{"telemetry.enableTelemetry":{type:"boolean",description:r.localize(1,null),"default":!0}}})}),define("vs/platform/theme/common/themes",["require","exports","vs/nls!vs/platform/theme/common/themes"],function(e,t,n){"use strict";function i(e){return e?[u.VS,u.VS_DARK,u.HIGH_CONTRAST]:[u.VS,u.VS_DARK]}function o(e){switch(e){case u.VS:return"vs";case u.VS_DARK:return"vs-dark"}return"hc-black"}function r(e){switch(e){case u.VS:return n.localize(0,null);case u.VS_DARK:return n.localize(1,null)}return n.localize(2,null)}function s(e){return/vs($| )/.test(e)}function a(e){return e.split(" ")[1]}function c(e){return e.split(" ")[0]}!function(e){e[e.VS=0]="VS",e[e.VS_DARK=1]="VS_DARK",e[e.HIGH_CONTRAST=2]="HIGH_CONTRAST"}(t.BaseTheme||(t.BaseTheme={}));var u=t.BaseTheme;t.getBaseThemes=i,t.toId=o,t.toLabel=r,t.isLightTheme=s,t.getSyntaxThemeId=a,t.getBaseThemeId=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler",["require","exports","vs/platform/theme/common/themes","vs/editor/common/editorCommon","vs/editor/browser/view/viewPart","vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(i,o,s){e.call(this,i),this._overviewRuler=new r.OverviewRulerImpl(1,"decorationsOverviewRuler",o,this._context.configuration.editor.lineHeight,t.DECORATION_HEIGHT,t.DECORATION_HEIGHT,s),this._overviewRuler.setLanesCount(this._context.configuration.editor.overviewRulerLanes,!1);var a=this._context.configuration.editor.theme;this._overviewRuler.setUseDarkColor(!n.isLightTheme(a),!1),this._shouldUpdateDecorations=!0,this._zonesFromDecorations=[],this._shouldUpdateCursorPosition=!0,this._hideCursor=this._context.configuration.editor.hideCursorInOverviewRuler,this._shouldForceRender=!1,this._zonesFromCursors=[],this._cursorPositions=[]}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._overviewRuler.dispose()},t.prototype.onCursorPositionChanged=function(e){return this._shouldUpdateCursorPosition=!0,this._cursorPositions=[e.position],this._cursorPositions=this._cursorPositions.concat(e.secondaryPositions),!0},t.prototype.onConfigurationChanged=function(e){var t=this._overviewRuler.getLanesCount(),i=this._context.configuration.editor.overviewRulerLanes,o=!1;if(e.lineHeight&&(this._overviewRuler.setLineHeight(this._context.configuration.editor.lineHeight,!1),this._shouldForceRender=!0,o=!0),t!==i&&(this._overviewRuler.setLanesCount(i,!1),this._shouldForceRender=!0,o=!0),e.hideCursorInOverviewRuler&&(this._hideCursor=this._context.configuration.editor.hideCursorInOverviewRuler,this._shouldUpdateCursorPosition=!0,o=!0),e.theme){var r=this._context.configuration.editor.theme;this._overviewRuler.setUseDarkColor(!n.isLightTheme(r),!1),this._shouldForceRender=!0,o=!0}return o},t.prototype.onLayoutChanged=function(e){var t=this;return this._shouldForceRender=!0,this._requestModificationFrame(function(){t._overviewRuler.setLayout(e.overviewRuler,!1)}),!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return this._shouldUpdateCursorPosition=!0,this._shouldUpdateDecorations=!0,!0},t.prototype.onModelDecorationsChanged=function(e){return this._shouldUpdateDecorations=!0,!0},t.prototype.onScrollHeightChanged=function(e){return this._overviewRuler.setScrollHeight(e,!1),this._shouldForceRender=!0,!0},t.prototype.getDomNode=function(){return this._overviewRuler.getDomNode()},t.prototype._createZonesFromDecorations=function(){var e,t,n,i=this._context.model.getAllDecorations(),o=[];for(e=0,t=i.length;t>e;e++)n=i[e],n.options.overviewRuler.color&&o.push({startLineNumber:n.range.startLineNumber,endLineNumber:n.range.endLineNumber,color:n.options.overviewRuler.color,darkColor:n.options.overviewRuler.darkColor,position:n.options.overviewRuler.position});return o},t.prototype._createZonesFromCursors=function(){var e,n,o,r=[];for(e=0,n=this._cursorPositions.length;n>e;e++)o=this._cursorPositions[e],r.push({forceHeight:2,startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,color:t._CURSOR_COLOR,darkColor:t._CURSOR_COLOR_DARK,position:i.OverviewRulerLane.Full});return r},t.prototype._render=function(e){var t=this,n=this._shouldForceRender;this._shouldForceRender=!1;var i=!1;if(this._shouldUpdateDecorations||this._shouldUpdateCursorPosition){this._shouldUpdateDecorations&&(this._shouldUpdateDecorations=!1,this._zonesFromDecorations=this._createZonesFromDecorations()),this._shouldUpdateCursorPosition&&(this._shouldUpdateCursorPosition=!1,this._hideCursor?this._zonesFromCursors=[]:this._zonesFromCursors=this._createZonesFromCursors());var o=[];o=o.concat(this._zonesFromCursors),o=o.concat(this._zonesFromDecorations),this._overviewRuler.setZones(o,!1),i=!0}(i||n)&&this._requestModificationFrame(function(){var e=t._overviewRuler.render(n);if(e&&r.OverviewRulerImpl.hasCanvas&&t._overviewRuler.getLanesCount()>0&&(t._zonesFromDecorations.length>0||t._zonesFromCursors.length>0)){var i=t._overviewRuler.getDomNode().getContext("2d");i.beginPath(),i.lineWidth=1,i.strokeStyle="rgba(197,197,197,0.8)",i.moveTo(0,0),i.lineTo(0,t._overviewRuler.getHeight()),i.stroke(),i.moveTo(0,0),i.lineTo(t._overviewRuler.getWidth(),0),i.stroke()}})},t.DECORATION_HEIGHT=6,t._CURSOR_COLOR="rgba(0, 0, 102, 0.8)",t._CURSOR_COLOR_DARK="rgba(152, 152, 152, 0.8)",t}(o.ViewPart);t.DecorationsOverviewRuler=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewImpl",["require","exports","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/timer","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/styleMutator","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/config/configuration","vs/editor/browser/controller/keyboardHandler","vs/editor/browser/controller/pointerHandler","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewController","vs/editor/browser/view/viewEventDispatcher","vs/editor/browser/view/viewOverlays","vs/editor/browser/viewLayout/layoutProvider","vs/editor/browser/viewParts/contentWidgets/contentWidgets","vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight","vs/editor/browser/viewParts/decorations/decorations","vs/editor/browser/viewParts/glyphMargin/glyphMargin","vs/editor/browser/viewParts/lineNumbers/lineNumbers","vs/editor/browser/viewParts/lines/viewLines","vs/editor/browser/viewParts/linesDecorations/linesDecorations","vs/editor/browser/viewParts/overlayWidgets/overlayWidgets","vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler","vs/editor/browser/viewParts/overviewRuler/overviewRuler","vs/editor/browser/viewParts/rulers/rulers","vs/editor/browser/viewParts/scrollDecoration/scrollDecoration","vs/editor/browser/viewParts/selections/selections","vs/editor/browser/viewParts/viewCursors/viewCursors","vs/editor/browser/viewParts/viewZones/viewZones"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P){"use strict";var R=function(e){function t(t,n,o,r){var s=this;e.call(this),this._isDisposed=!1,this._editorId=t,this._renderAnimationFrame=null,this.outgoingEventBus=new i.EventEmitter;var a=new v.ViewController(o,n,this.outgoingEventBus,r);this.listenersToRemove=[],this.listenersToDispose=[],this.eventDispatcher=new g.ViewEventDispatcher(function(e){return s._renderOnce(e)}),this.linesContent=document.createElement("div"),this.linesContent.className=m.ClassNames.LINES_CONTENT+" monaco-editor-background",this.domNode=document.createElement("div"),h.Configuration.applyEditorStyling(this.domNode,n.editor.stylingInfo),this.overflowGuardContainer=document.createElement("div"),this.overflowGuardContainer.className=m.ClassNames.OVERFLOW_GUARD,this.layoutProvider=new _.LayoutProvider(n,o,this.eventDispatcher,this.linesContent,this.domNode,this.overflowGuardContainer),this.eventDispatcher.addEventHandler(this.layoutProvider),this.context=new N(t,n,o,this.eventDispatcher,function(e){return s.eventDispatcher.addEventHandler(e)},function(e){return s.eventDispatcher.removeEventHandler(e)}),this.createTextArea(r),this.createViewParts(),this.keyboardHandler=new p.KeyboardHandler(this.context,a,this.createKeyboardHandlerHelper()),this.pointerHandler=new f.PointerHandler(this.context,a,this.createPointerHandlerHelper()),this.hasFocus=!1,this.codeEditorHelper=null,this.eventDispatcher.addEventHandler(this),this.handleAccumulatedModelEventsTimeout=-1,this.accumulatedModelEvents=[],this.listenersToRemove.push(o.addBulkListener(function(e){s.accumulatedModelEvents=s.accumulatedModelEvents.concat(e),-1===s.handleAccumulatedModelEventsTimeout&&(s.handleAccumulatedModelEventsTimeout=setTimeout(function(){s.handleAccumulatedModelEventsTimeout=-1,s._flushAnyAccumulatedEvents()}))}))}return __extends(t,e),t.prototype._flushAnyAccumulatedEvents=function(){var e=this.accumulatedModelEvents;this.accumulatedModelEvents=[],e.length>0&&this.eventDispatcher.emitMany(e)},t.prototype.createTextArea=function(e){var t=this;this.textArea=document.createElement("textarea"),this._keybindingService=e.createScoped(this.textArea),this._editorTextFocusContextKey=this._keybindingService.createKey(l.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS,void 0),this.textArea.className=m.ClassNames.TEXTAREA,this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this.context.configuration.editor.ariaLabel),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),c.StyleMutator.setTop(this.textArea,0),c.StyleMutator.setLeft(this.textArea,0),c.StyleMutator.setFontSize(this.textArea,this.context.configuration.editor.fontSize),c.StyleMutator.setLineHeight(this.textArea,this.context.configuration.editor.lineHeight),this.listenersToDispose.push(a.addDisposableListener(this.textArea,"focus",function(){return t._setHasFocus(!0)})),this.listenersToDispose.push(a.addDisposableListener(this.textArea,"blur",function(){return t._setHasFocus(!1)})),this.textAreaCover=document.createElement("div"),this.context.configuration.editor.glyphMargin?this.textAreaCover.className="monaco-editor-background "+m.ClassNames.GLYPH_MARGIN+" "+m.ClassNames.TEXTAREA_COVER:this.context.configuration.editor.lineNumbers?this.textAreaCover.className="monaco-editor-background "+m.ClassNames.LINE_NUMBERS+" "+m.ClassNames.TEXTAREA_COVER:this.textAreaCover.className="monaco-editor-background "+m.ClassNames.TEXTAREA_COVER,this.textAreaCover.style.position="absolute",c.StyleMutator.setWidth(this.textAreaCover,1),c.StyleMutator.setHeight(this.textAreaCover,1),c.StyleMutator.setTop(this.textAreaCover,0),c.StyleMutator.setLeft(this.textAreaCover,0)},t.prototype.createViewParts=function(){var e=this;this.viewParts=[],this.viewLines=new T.ViewLines(this.context,this.layoutProvider),this.viewZones=new P.ViewZones(this.context,this.layoutProvider),this.viewParts.push(this.viewZones);var t=new I.DecorationsOverviewRuler(this.context,this.layoutProvider.getScrollHeight(),function(t){return e.layoutProvider.getVerticalOffsetForLineNumber(t)});this.viewParts.push(t);var n=new L.ScrollDecorationViewPart(this.context);this.viewParts.push(n);var i=new y.ContentViewOverlays(this.context,this.layoutProvider);this.viewParts.push(i),i.addDynamicOverlay(new S.CurrentLineHighlightOverlay(this.context,this.layoutProvider)),i.addDynamicOverlay(new O.SelectionsOverlay(this.context)),i.addDynamicOverlay(new E.DecorationsOverlay(this.context));var o=new y.MarginViewOverlays(this.context,this.layoutProvider);this.viewParts.push(o),o.addDynamicOverlay(new w.GlyphMarginOverlay(this.context)),o.addDynamicOverlay(new k.LinesDecorationsOverlay(this.context)),o.addDynamicOverlay(new C.LineNumbersOverlay(this.context)),this.contentWidgets=new b.ViewContentWidgets(this.context,this.domNode),this.viewParts.push(this.contentWidgets);var r=new M.ViewCursors(this.context);this.viewParts.push(r),this.overlayWidgets=new x.ViewOverlayWidgets(this.context),this.viewParts.push(this.overlayWidgets);var s=new A.Rulers(this.context,this.layoutProvider);if(this.viewParts.push(s),this.linesContentContainer=this.layoutProvider.getScrollbarContainerDomNode(),this.linesContentContainer.style.position="absolute",t){var a=this.layoutProvider.getOverviewRulerInsertData();a.parent.insertBefore(t.getDomNode(),a.insertBefore)}this.linesContent.appendChild(i.getDomNode()),this.linesContent.appendChild(s.domNode),this.linesContent.appendChild(this.viewZones.domNode),this.linesContent.appendChild(this.viewLines.domNode),this.linesContent.appendChild(this.contentWidgets.domNode),this.linesContent.appendChild(r.getDomNode()),this.overflowGuardContainer.appendChild(o.getDomNode()),this.overflowGuardContainer.appendChild(this.linesContentContainer),this.overflowGuardContainer.appendChild(n.getDomNode()),this.overflowGuardContainer.appendChild(this.overlayWidgets.domNode),this.overflowGuardContainer.appendChild(this.textArea),this.overflowGuardContainer.appendChild(this.textAreaCover),this.domNode.appendChild(this.overflowGuardContainer),this.domNode.appendChild(this.contentWidgets.overflowingContentWidgetsDomNode)},t.prototype._flushAccumulatedAndRenderNow=function(){this._flushAnyAccumulatedEvents(),this._renderNow()},t.prototype.createPointerHandlerHelper=function(){var e=this;return{viewDomNode:this.domNode,linesContentDomNode:this.linesContent,focusTextArea:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.focusTextArea: View is disposed");e.focus()},isDirty:function(){return e.accumulatedModelEvents.length>0},getScrollTop:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getScrollTop: View is disposed");return e.layoutProvider.getScrollTop()},setScrollTop:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.setScrollTop: View is disposed");e.layoutProvider.setScrollTop(t)},getScrollLeft:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getScrollLeft: View is disposed");return e.layoutProvider.getScrollLeft()},setScrollLeft:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.setScrollLeft: View is disposed");e.layoutProvider.setScrollLeft(t)},isAfterLines:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.isAfterLines: View is disposed");return e.layoutProvider.isAfterLines(t)},getLineNumberAtVerticalOffset:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getLineNumberAtVerticalOffset: View is disposed");return e.layoutProvider.getLineNumberAtVerticalOffset(t)},getVerticalOffsetForLineNumber:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getVerticalOffsetForLineNumber: View is disposed");return e.layoutProvider.getVerticalOffsetForLineNumber(t)},getWhitespaceAtVerticalOffset:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getWhitespaceAtVerticalOffset: View is disposed");return e.layoutProvider.getWhitespaceAtVerticalOffset(t)},shouldSuppressMouseDownOnViewZone:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.shouldSuppressMouseDownOnViewZone: View is disposed");return e.viewZones.shouldSuppressMouseDownOnViewZone(t)},getPositionFromDOMInfo:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getPositionFromDOMInfo: View is disposed");return e._flushAccumulatedAndRenderNow(),e.viewLines.getPositionFromDOMInfo(t,n)},visibleRangeForPosition2:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.visibleRangeForPosition2: View is disposed");e._flushAccumulatedAndRenderNow();var i=e.viewLines.visibleRangesForRange2(new u.Range(t,n,t,n),0);return i?i[0]:null},getLineWidth:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getLineWidth: View is disposed");return e._flushAccumulatedAndRenderNow(),e.viewLines.getLineWidth(t)}}},t.prototype.createKeyboardHandlerHelper=function(){var e=this;return{viewDomNode:this.domNode,textArea:this.textArea,visibleRangeForPositionRelativeToEditor:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.keyboardHandler.visibleRangeForPositionRelativeToEditor: View is disposed");e._flushAccumulatedAndRenderNow();var i=e.layoutProvider.getLinesViewportData(),o=e.viewLines.visibleRangesForRange2(new u.Range(t,n,t,n),i.visibleRangesDeltaTop);return o?o[0]:null},flushAnyAccumulatedEvents:function(){e._flushAnyAccumulatedEvents()}}},t.prototype.setAriaActiveDescendant=function(e){e?(this.textArea.setAttribute("role","combobox"),this.textArea.getAttribute("aria-activedescendant")!==e&&(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-activedescendant",e))):(this.textArea.setAttribute("role","textbox"),this.textArea.removeAttribute("aria-activedescendant"),this.textArea.removeAttribute("aria-haspopup"))},t.prototype.onLayoutChanged=function(e){if(s.isChrome){this.overflowGuardContainer.clientWidth+"px"}return c.StyleMutator.setWidth(this.domNode,e.width),c.StyleMutator.setHeight(this.domNode,e.height),c.StyleMutator.setWidth(this.overflowGuardContainer,e.width),c.StyleMutator.setHeight(this.overflowGuardContainer,e.height),c.StyleMutator.setWidth(this.linesContent,1e6),c.StyleMutator.setHeight(this.linesContent,1e6),c.StyleMutator.setLeft(this.linesContentContainer,e.contentLeft),c.StyleMutator.setWidth(this.linesContentContainer,e.contentWidth),c.StyleMutator.setHeight(this.linesContentContainer,e.contentHeight),this.outgoingEventBus.emit(l.EventType.ViewLayoutChanged,e),!1},t.prototype.onConfigurationChanged=function(e){return e.stylingInfo&&h.Configuration.applyEditorStyling(this.domNode,this.context.configuration.editor.stylingInfo),e.ariaLabel&&this.textArea.setAttribute("aria-label",this.context.configuration.editor.ariaLabel),!1},t.prototype.onScrollChanged=function(e){return this.outgoingEventBus.emit("scroll",{scrollTop:this.layoutProvider.getScrollTop(),scrollLeft:this.layoutProvider.getScrollLeft()}),!1},t.prototype.onScrollHeightChanged=function(t){return this.outgoingEventBus.emit("scrollSize",{scrollWidth:this.layoutProvider.getScrollWidth(),scrollHeight:this.layoutProvider.getScrollHeight()}),e.prototype.onScrollHeightChanged.call(this,t)},t.prototype.onViewFocusChanged=function(e){return a.toggleClass(this.domNode,"focused",e),e?(this._editorTextFocusContextKey.set(!0),this.outgoingEventBus.emit(l.EventType.ViewFocusGained,{})):(this._editorTextFocusContextKey.reset(),this.outgoingEventBus.emit(l.EventType.ViewFocusLost,{})),!1},t.prototype.dispose=function(){this._isDisposed=!0,-1!==this.handleAccumulatedModelEventsTimeout&&(clearTimeout(this.handleAccumulatedModelEventsTimeout),this.handleAccumulatedModelEventsTimeout=-1),null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this.accumulatedModelEvents=[],this.eventDispatcher.removeEventHandler(this),this.outgoingEventBus.dispose(),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.listenersToDispose=o.disposeAll(this.listenersToDispose),this.keyboardHandler.dispose(),this.pointerHandler.dispose(),this.viewLines.dispose();for(var e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].dispose();this.viewParts=[],this.layoutProvider.dispose(),this._keybindingService.dispose()},t.prototype.getCodeEditorHelper=function(){var e=this;return this.codeEditorHelper||(this.codeEditorHelper={getScrollTop:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollTop: View is disposed");return e.layoutProvider.getScrollTop()},setScrollTop:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.setScrollTop: View is disposed");e.layoutProvider.setScrollTop(t)},getScrollLeft:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollLeft: View is disposed");return e.layoutProvider.getScrollLeft()},setScrollLeft:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.setScrollLeft: View is disposed");e.layoutProvider.setScrollLeft(t)},getScrollHeight:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollHeight: View is disposed");return e.layoutProvider.getScrollHeight()},getScrollWidth:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollWidth: View is disposed");return e.layoutProvider.getScrollWidth()},getVerticalOffsetForPosition:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getVerticalOffsetForPosition: View is disposed");var i=e.context.model.validateModelPosition({lineNumber:t,column:n}),o=e.context.model.convertModelPositionToViewPosition(i.lineNumber,i.column);return e.layoutProvider.getVerticalOffsetForLineNumber(o.lineNumber)},delegateVerticalScrollbarMouseDown:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.delegateVerticalScrollbarMouseDown: View is disposed");e.layoutProvider.delegateVerticalScrollbarMouseDown(t)},getOffsetForColumn:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getOffsetForColumn: View is disposed");var i=e.context.model.validateModelPosition({lineNumber:t,column:n}),o=e.context.model.convertModelPositionToViewPosition(i.lineNumber,i.column);e._flushAccumulatedAndRenderNow();var r=e.viewLines.visibleRangesForRange2(new u.Range(o.lineNumber,o.column,o.lineNumber,o.column),0);return r?r[0].left:-1}}),this.codeEditorHelper},t.prototype.getCenteredRangeInViewport=function(){if(this._isDisposed)throw new Error("ViewImpl.getCenteredRangeInViewport: View is disposed");var e=this.layoutProvider.getCenteredViewLineNumberInViewport(),t=this.context.model,n=new u.Range(e,1,e,t.getLineMaxColumn(e));return t.convertViewRangeToModelRange(n)},t.prototype.getInternalEventBus=function(){if(this._isDisposed)throw new Error("ViewImpl.getInternalEventBus: View is disposed");return this.outgoingEventBus},t.prototype.saveState=function(){if(this._isDisposed)throw new Error("ViewImpl.saveState: View is disposed");return this.layoutProvider.saveState()},t.prototype.restoreState=function(e){if(this._isDisposed)throw new Error("ViewImpl.restoreState: View is disposed");return this._flushAnyAccumulatedEvents(),this.layoutProvider.restoreState(e)},t.prototype.focus=function(){if(this._isDisposed)throw new Error("ViewImpl.focus: View is disposed");this.keyboardHandler.focusTextArea(),this._setHasFocus(!0)},t.prototype.isFocused=function(){if(this._isDisposed)throw new Error("ViewImpl.isFocused: View is disposed");return this.hasFocus},t.prototype.createOverviewRuler=function(e,t,n){var i=this;if(this._isDisposed)throw new Error("ViewImpl.createOverviewRuler: View is disposed");return new D.OverviewRuler(this.context,e,this.layoutProvider.getScrollHeight(),t,n,function(e){return i.layoutProvider.getVerticalOffsetForLineNumber(e)})},t.prototype.change=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.change: View is disposed");var i=!1;return this._renderOnce(function(){t._flushAnyAccumulatedEvents();var o={addZone:function(e){return i=!0,t.viewZones.addZone(e)},removeZone:function(e){i=t.viewZones.removeZone(e)||i},layoutZone:function(e){i=t.viewZones.layoutZone(e)||i}},r=null;try{r=e(o)}catch(s){n.onUnexpectedError(s)}return o.addZone=null,o.removeZone=null,i&&t.context.privateViewEventBus.emit(l.EventType.ViewZonesChanged,null),r}),i},t.prototype.getWhitespaces=function(){if(this._isDisposed)throw new Error("ViewImpl.getWhitespaces: View is disposed");return this.layoutProvider.getWhitespaces()},t.prototype.addContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.addContentWidget: View is disposed");this._renderOnce(function(){t.contentWidgets.addWidget(e.widget),t.layoutContentWidget(e)})},t.prototype.layoutContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.layoutContentWidget: View is disposed");this._renderOnce(function(){var n=e.position?e.position.position:null,i=e.position?e.position.preference:null;t.contentWidgets.setWidgetPosition(e.widget,n,i)})},t.prototype.removeContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.removeContentWidget: View is disposed");this._renderOnce(function(){t.contentWidgets.removeWidget(e.widget)})},t.prototype.addOverlayWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.addOverlayWidget: View is disposed");this._renderOnce(function(){t.overlayWidgets.addWidget(e.widget),t.layoutOverlayWidget(e)})},t.prototype.layoutOverlayWidget=function(e){if(this._isDisposed)throw new Error("ViewImpl.layoutOverlayWidget: View is disposed");var t=e.position?e.position.preference:null,n=this.overlayWidgets.setWidgetPosition(e.widget,t);n&&this._scheduleRender()},t.prototype.removeOverlayWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.removeOverlayWidget: View is disposed");this._renderOnce(function(){t.overlayWidgets.removeWidget(e.widget)})},t.prototype.render=function(e,t){if(this._isDisposed)throw new Error("ViewImpl.render: View is disposed");t&&this.layoutProvider.emitLayoutChangedEvent(),e&&this._flushAccumulatedAndRenderNow()},t.prototype.renderOnce=function(e){if(this._isDisposed)throw new Error("ViewImpl.renderOnce: View is disposed");return this._renderOnce(e)},t.prototype._renderOnce=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl._renderOnce: View is disposed");return this.outgoingEventBus.deferredEmit(function(){try{var n=e?e():null}finally{t._scheduleRender()}return n})},t.prototype._scheduleRender=function(){if(this._isDisposed)throw new Error("ViewImpl._scheduleRender: View is disposed");null===this._renderAnimationFrame&&(this._renderAnimationFrame=a.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))},t.prototype._onRenderScheduled=function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()},t.prototype._renderNow=function(){if(this._isDisposed)throw new Error("ViewImpl._renderNow: View is disposed");this.actualRender()},t.prototype.createRenderingContext=function(e){var t=this,n=this.layoutProvider.getCurrentViewport(),i=e.visibleRangesDeltaTop,o={linesViewportData:e,scrollWidth:this.layoutProvider.getScrollWidth(),scrollHeight:this.layoutProvider.getScrollHeight(),visibleRange:e.visibleRange,bigNumbersDelta:e.bigNumbersDelta,viewportWidth:n.width,viewportHeight:n.height,viewportLeft:n.left,viewportTop:n.top,getScrolledTopFromAbsoluteTop:function(e){return t.layoutProvider.getScrolledTopFromAbsoluteTop(e)},getViewportVerticalOffsetForLineNumber:function(e){var n=t.layoutProvider.getVerticalOffsetForLineNumber(e),i=t.layoutProvider.getScrolledTopFromAbsoluteTop(n);return i},getDecorationsInViewport:function(){return e.getDecorationsInViewport()},linesVisibleRangesForRange:function(e,n){return t.viewLines.linesVisibleRangesForRange(e,n)},visibleRangeForPosition:function(e){var n=t.viewLines.visibleRangesForRange2(new u.Range(e.lineNumber,e.column,e.lineNumber,e.column),i);return n?n[0]:null},lineIsVisible:function(t){return e.visibleRange.startLineNumber<=t&&t<=e.visibleRange.endLineNumber}};return o},t.prototype.actualRender=function(){if(this._isDisposed)throw new Error("ViewImpl.actualRender: View is disposed");if(a.isInDOM(this.domNode)){var e,t,i=r.start(r.Topic.EDITOR,"View.render");try{for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onBeforeForcedLayout();var o=this.viewLines.render(),s=this.createRenderingContext(o);for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onReadAfterForcedLayout(s);for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onWriteAfterForcedLayout()}catch(c){n.onUnexpectedError(c)}i.stop()}},t.prototype._setHasFocus=function(e){this.hasFocus!==e&&(this.hasFocus=e,this.context.privateViewEventBus.emit(l.EventType.ViewFocusChanged,this.hasFocus))},t}(d.ViewEventHandler);t.View=R;var N=function(){function e(e,t,n,i,o,r){this.editorId=e,this.configuration=t,this.model=n,this.privateViewEventBus=i,this.addEventHandler=o,this.removeEventHandler=r}return e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/codeEditorWidget",["require","exports","vs/base/common/errors","vs/base/browser/browser","vs/base/browser/dom","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingService","vs/platform/telemetry/common/telemetry","vs/editor/common/commonCodeEditor","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/services/codeEditorService","vs/editor/browser/config/configuration","vs/editor/browser/editorBrowserExtensions","vs/editor/browser/standalone/colorizer","vs/editor/browser/view/viewImpl","vs/css!./media/default-theme","vs/css!./media/editor","vs/css!./media/tokens"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=function(e){function t(t,i,r,s,a,c){var u=this;e.call(this,t,i,r,s,a,c),this.focusTracker=o.trackFocus(this.domElement),this.focusTracker.addFocusListener(function(){0===u.forcedWidgetFocusCount&&(u._editorFocusContextKey.set(!0),u.emit(d.EventType.EditorFocus,{}))}),
this.focusTracker.addBlurListener(function(){0===u.forcedWidgetFocusCount&&(u._editorFocusContextKey.reset(),u.emit(d.EventType.EditorBlur,{}))}),this.contentWidgets={},this.overlayWidgets={};for(var l=[].concat(m.EditorBrowserRegistry.getEditorContributions()).concat(h.CommonEditorRegistry.getEditorContributions()),p=0,f=l.length;f>p;p++)try{var v=l[p].createInstance(this._instantiationService,this);this.contributions[v.getId()]=v}catch(g){console.error("Could not instantiate contribution "+v.getId()),n.onUnexpectedError(g)}}return __extends(t,e),t.prototype._createConfiguration=function(e){return new f.Configuration(e,this.domElement)},t.prototype.dispose=function(){this.contentWidgets={},this.overlayWidgets={},this.focusTracker.dispose(),e.prototype.dispose.call(this)},t.prototype.colorizeModelLine=function(e,t){if(void 0===t&&(t=this.model),!t)return"";var n=t.getLineContent(e),i=t.getLineTokens(e,!1),o=d.LineTokensBinaryEncoding.inflateArr(i.getBinaryEncodedTokensMap(),i.getBinaryEncodedTokens()),r=t.getOptions().tabSize;return v.Colorizer.colorizeLine(n,o,r)},t.prototype.getView=function(){return this._view},t.prototype.getDomNode=function(){return this.hasView?this._view.domNode:null},t.prototype.getCenteredRangeInViewport=function(){return this.hasView?this._view.getCenteredRangeInViewport():null},t.prototype.setScrollTop=function(e){if(this.hasView){if("number"!=typeof e)throw new Error("Invalid arguments");this._view.getCodeEditorHelper().setScrollTop(e)}},t.prototype.getScrollTop=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollTop():-1},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this.hasView&&this._view.getCodeEditorHelper().delegateVerticalScrollbarMouseDown(e)},t.prototype.setScrollLeft=function(e){if(this.hasView){if("number"!=typeof e)throw new Error("Invalid arguments");this._view.getCodeEditorHelper().setScrollLeft(e)}},t.prototype.getScrollLeft=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollLeft():-1},t.prototype.getScrollWidth=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollWidth():-1},t.prototype.getScrollHeight=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollHeight():-1},t.prototype.saveViewState=function(){if(!this.cursor||!this.hasView)return null;var e={};for(var t in this.contributions){var n=this.contributions[t];"function"==typeof n.saveViewState&&(e[t]=n.saveViewState())}var i=this.cursor.saveState(),o=this._view.saveState();return{cursorState:i,viewState:o,contributionsState:e}},t.prototype.restoreViewState=function(e){if(this.cursor&&this.hasView){var t=e;if(t&&t.cursorState&&t.viewState){var n=t,i=n.cursorState;Array.isArray(i)?this.cursor.restoreState(i):this.cursor.restoreState([i]),this._view.restoreState(n.viewState);var o=t.contributionsState||{};for(var r in this.contributions){var s=this.contributions[r];"function"==typeof s.restoreViewState&&s.restoreViewState(o[r])}}}},t.prototype.layout=function(e){this._configuration.observeReferenceElement(e),this.render()},t.prototype.focus=function(){this.hasView&&this._view.focus()},t.prototype.isFocused=function(){return this.hasView&&this._view.isFocused()},t.prototype.addContentWidget=function(e){var t={widget:e,position:e.getPosition()};this.contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this.contentWidgets[e.getId()]=t,this.hasView&&this._view.addContentWidget(t)},t.prototype.layoutContentWidget=function(e){var t=e.getId();if(this.contentWidgets.hasOwnProperty(t)){var n=this.contentWidgets[t];n.position=e.getPosition(),this.hasView&&this._view.layoutContentWidget(n)}},t.prototype.removeContentWidget=function(e){var t=e.getId();if(this.contentWidgets.hasOwnProperty(t)){var n=this.contentWidgets[t];delete this.contentWidgets[t],this.hasView&&this._view.removeContentWidget(n)}},t.prototype.addOverlayWidget=function(e){var t={widget:e,position:e.getPosition()};this.overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this.overlayWidgets[e.getId()]=t,this.hasView&&this._view.addOverlayWidget(t)},t.prototype.layoutOverlayWidget=function(e){var t=e.getId();if(this.overlayWidgets.hasOwnProperty(t)){var n=this.overlayWidgets[t];n.position=e.getPosition(),this.hasView&&this._view.layoutOverlayWidget(n)}},t.prototype.removeOverlayWidget=function(e){var t=e.getId();if(this.overlayWidgets.hasOwnProperty(t)){var n=this.overlayWidgets[t];delete this.overlayWidgets[t],this.hasView&&this._view.removeOverlayWidget(n)}},t.prototype.changeViewZones=function(e){if(this.hasView){var t=this._view.change(e);t&&this.emit(d.EventType.ViewZonesChanged)}},t.prototype.getWhitespaces=function(){return this.hasView?this._view.getWhitespaces():[]},t.prototype.getTopForLineNumber=function(e){return this.hasView?this._view.getCodeEditorHelper().getVerticalOffsetForPosition(e,1):-1},t.prototype.getTopForPosition=function(e,t){return this.hasView?this._view.getCodeEditorHelper().getVerticalOffsetForPosition(e,t):-1},t.prototype.getScrolledVisiblePosition=function(e){if(!this.hasView)return null;var t=this.model.validatePosition(e),n=this._view.getCodeEditorHelper(),i=this._configuration.editor.layoutInfo,o=n.getVerticalOffsetForPosition(t.lineNumber,t.column)-n.getScrollTop(),r=n.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-n.getScrollLeft();return{top:o,left:r,height:this._configuration.editor.lineHeight}},t.prototype.getOffsetForColumn=function(e,t){return this.hasView?this._view.getCodeEditorHelper().getOffsetForColumn(e,t):-1},t.prototype.render=function(){this.hasView&&this._view.render(!0,!1)},t.prototype.setHiddenAreas=function(e){this.viewModel&&this.viewModel.setHiddenAreas(e)},t.prototype.setAriaActiveDescendant=function(e){this.hasView&&this._view.setAriaActiveDescendant(e)},t.prototype._attachModel=function(t){var n=this;this._view=null,e.prototype._attachModel.call(this,t),this._view&&(this.domElement.appendChild(this._view.domNode),this._view.renderOnce(function(){var e;for(e in n.contentWidgets)n.contentWidgets.hasOwnProperty(e)&&n._view.addContentWidget(n.contentWidgets[e]);for(e in n.overlayWidgets)n.overlayWidgets.hasOwnProperty(e)&&n._view.addOverlayWidget(n.overlayWidgets[e]);n._view.render(!1,!0),n.hasView=!0}))},t.prototype._enableEmptySelectionClipboard=function(){return i.enableEmptySelectionClipboard},t.prototype._createView=function(){this._view=new g.View(this.id,this._configuration,this.viewModel,this._keybindingService)},t.prototype._getViewInternalEventBus=function(){return this._view.getInternalEventBus()},t.prototype._detachModel=function(){var t=null;this._view&&(this._view.dispose(),t=this._view.domNode,this._view=null);var n=e.prototype._detachModel.call(this);return t&&this.domElement.removeChild(t),n},t=__decorate([__param(2,r.IInstantiationService),__param(3,p.ICodeEditorService),__param(4,s.IKeybindingService),__param(5,a.ITelemetryService)],t)}(c.CommonCodeEditor);t.CodeEditorWidget=y;(function(){function e(e,t){this._id=e,this._position=t,this._domNode=document.createElement("div"),this._domNode.className=this._id.replace(/\./g,"-").replace(/[^a-z0-9\-]/,"")}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return this._position},e})();!function(e){e[e.EndOfLastEditOperation=0]="EndOfLastEditOperation"}(t.EditCursorState||(t.EditCursorState={}));var _=(t.EditCursorState,function(){function e(e,t){this._ops=e,this._editCursorState=t}return e.prototype.getEditOperations=function(e,t){if(0!==this._ops.length){this._ops.sort(function(e,t){return u.Range.compareRangesUsingStarts(e.range,t.range)});for(var n=[],i=this._ops[0],o=1;o<this._ops.length;o++)i.range.endLineNumber===this._ops[o].range.startLineNumber&&i.range.endColumn===this._ops[o].range.startColumn?(i.range=u.Range.plusRange(i.range,this._ops[o].range),i.text=i.text+this._ops[o].text):(n.push(i),i=this._ops[o]);n.push(i);for(var o=0;o<n.length;o++)t.addEditOperation(u.Range.lift(n[o].range),n[o].text)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),i=n[n.length-1].range;return l.Selection.createSelection(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)},e}());t.CommandRunner=_});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/diffEditorWidget",["require","exports","vs/base/common/async","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/objects","vs/base/browser/dom","vs/base/browser/styleMutator","vs/base/browser/ui/sash/sash","vs/platform/instantiation/common/instantiation","vs/editor/common/config/defaultConfig","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/services/editorWorkerService","vs/editor/common/viewLayout/viewLineParts","vs/editor/common/viewLayout/viewLineRenderer","vs/editor/browser/widget/codeEditorWidget","vs/css!./media/diffEditor"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";function g(e){return e.modifiedEndLineNumber>0}function y(e){return e.originalEndLineNumber>0}function _(e,t,n,i,o,r){return{range:new d.Range(e,t,n,i),options:{className:o,isWholeLine:r}}}function b(){var e=document.createElement("div");return e.className="diagonal-fill",e}var S=function(){function e(){this._zones=[],this._zonesMap={},this._decorations=[]}return e.prototype.getForeignViewZones=function(e){var t=this;return e.filter(function(e){return!t._zonesMap[String(e.id)]})},e.prototype.clean=function(e){var t=this;this._zones.length>0&&e.changeViewZones(function(e){for(var n=0,i=t._zones.length;i>n;n++)e.removeZone(t._zones[n])}),this._zones=[],this._zonesMap={},this._decorations.length>0&&e.changeDecorations(function(e){e.deltaDecorations(t._decorations,[])}),this._decorations=[]},e.prototype.apply=function(e,t,n){var i,o,r=this;e.changeViewZones(function(e){for(i=0,o=r._zones.length;o>i;i++)e.removeZone(r._zones[i]);for(r._zones=[],r._zonesMap={},i=0,o=n.zones.length;o>i;i++){n.zones[i].suppressMouseDown=!0;var t=e.addZone(n.zones[i]);r._zones.push(t),r._zonesMap[String(t)]=!0}}),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t.setZones(n.overviewZones)},e}(),E=0,w=function(e){function t(i,o,r,a){var c=this;e.call(this),this._editorWorkerService=r,this.id=++E,this._domElement=i,o=o||{},this._theme=o.theme||l.DefaultConfig.editor.theme,this._renderSideBySide=!0,"undefined"!=typeof o.renderSideBySide&&(this._renderSideBySide=o.renderSideBySide),this._ignoreTrimWhitespace=!0,"undefined"!=typeof o.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=o.ignoreTrimWhitespace),this._originalIsEditable=!1,"undefined"!=typeof o.originalEditable&&(this._originalIsEditable=Boolean(o.originalEditable)),this._updateDecorationsRunner=new n.RunOnceScheduler(function(){return c._updateDecorations()},0),this._toDispose=[],this._toDispose.push(this._updateDecorationsRunner),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=t._getClassName(this._theme,this._renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=document.createElement("div"),this._overviewViewportDomElement.className="diffViewport",this._overviewViewportDomElement.style.position="absolute",this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.style.height="100%",this._overviewDomElement.appendChild(this._overviewViewportDomElement),this._toDispose.push(s.addDisposableListener(this._overviewDomElement,"mousedown",function(e){c.modifiedEditor.delegateVerticalScrollbarMouseDown(e)})),this._containerDomElement.appendChild(this._overviewDomElement),this._createLeftHandSide(),this._createRightHandSide(),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new S,this._modifiedEditorState=new S,this._isVisible=!0,this._isHandlingScrollEvent=!1,this._width=0,this._height=0,this._lineChanges=null,this._createLeftHandSideEditor(o,a),this._createRightHandSideEditor(o,a),o.automaticLayout&&(this._measureDomElementToken=window.setInterval(function(){return c._measureDomElement(!1)},100)),this._enableSplitViewResizing=!0,"undefined"!=typeof o.enableSplitViewResizing&&(this._enableSplitViewResizing=o.enableSplitViewResizing),this._renderSideBySide?this._setStrategy(new x(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new D(this._createDataSource(),this._enableSplitViewResizing))}return __extends(t,e),Object.defineProperty(t.prototype,"ignoreTrimWhitespace",{get:function(){return this._ignoreTrimWhitespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderSideBySide",{get:function(){return this._renderSideBySide},enumerable:!0,configurable:!0}),t._getClassName=function(e,t){var n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=e},t.prototype._recreateOverviewRulers=function(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalOverviewRuler=this.originalEditor.getView().createOverviewRuler("original diffOverviewRuler",4,Number.MAX_VALUE),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedOverviewRuler=this.modifiedEditor.getView().createOverviewRuler("modified diffOverviewRuler",4,Number.MAX_VALUE),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode()),this._layoutOverviewRulers()},t.prototype._createLeftHandSide=function(){this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode)},t.prototype._createRightHandSide=function(){this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode)},t.prototype._createLeftHandSideEditor=function(e,t){var n=this;this.originalEditor=t.createInstance(v.CodeEditorWidget,this._originalDomNode,this._adjustOptionsForLeftHandSide(e,this._originalIsEditable)),this._toDispose.push(this.originalEditor.addBulkListener2(function(e){return n._onOriginalEditorEvents(e)})),this._toDispose.push(this.addEmitter2(this.originalEditor,"leftHandSide"))},t.prototype._createRightHandSideEditor=function(e,t){var n=this;this.modifiedEditor=t.createInstance(v.CodeEditorWidget,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e)),this._toDispose.push(this.modifiedEditor.addBulkListener2(function(e){return n._onModifiedEditorEvents(e)})),this._toDispose.push(this.addEmitter2(this.modifiedEditor,"rightHandSide"))},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._toDispose=o.disposeAll(this._toDispose),window.clearInterval(this._measureDomElementToken),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler.dispose(),this._modifiedOverviewRuler.dispose(),this.originalEditor.destroy(),this.modifiedEditor.destroy(),this._strategy.dispose(),e.prototype.dispose.call(this)},t.prototype.getId=function(){return this.getEditorType()+":"+this.id},t.prototype.getEditorType=function(){return h.EditorType.IDiffEditor},t.prototype.getLineChanges=function(){return this._lineChanges},t.prototype.getOriginalEditor=function(){return this.originalEditor},t.prototype.getModifiedEditor=function(){return this.modifiedEditor},t.prototype.updateOptions=function(e){this._theme=e&&e.theme?e.theme:this._theme;var n=!1;"undefined"!=typeof e.renderSideBySide&&this._renderSideBySide!==e.renderSideBySide&&(this._renderSideBySide=e.renderSideBySide,n=!0),"undefined"!=typeof e.ignoreTrimWhitespace&&this._ignoreTrimWhitespace!==e.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=e.ignoreTrimWhitespace,this._beginUpdateDecorations()),"undefined"!=typeof e.originalEditable&&(this._originalIsEditable=Boolean(e.originalEditable)),this._containerDomElement.className=t._getClassName(this._theme,this._renderSideBySide),this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e,this._originalIsEditable)),"undefined"!=typeof e.enableSplitViewResizing&&(this._enableSplitViewResizing=e.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),n&&(this._renderSideBySide?this._setStrategy(new x(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new D(this._createDataSource(),this._enableSplitViewResizing)))},t.prototype.getValue=function(e){return void 0===e&&(e=null),this.modifiedEditor.getValue(e)},t.prototype.getModel=function(){return{original:this.originalEditor.getModel(),modified:this.modifiedEditor.getModel()}},t.prototype.setModel=function(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this.originalEditor.setModel(e?e.original:null),this.modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this.originalEditor.setScrollTop(0),this.modifiedEditor.setScrollTop(0)),this._lineChanges=null,this._diffComputationToken++,e?(this._recreateOverviewRulers(),this._beginUpdateDecorations()):this._lineChanges=null,this._layoutOverviewViewport()},t.prototype.getDomNode=function(){return this._domElement},t.prototype.getVisibleColumnFromPosition=function(e){return this.modifiedEditor.getVisibleColumnFromPosition(e)},t.prototype.getPosition=function(){return this.modifiedEditor.getPosition()},t.prototype.setPosition=function(e,t,n,i){this.modifiedEditor.setPosition(e,t,n,i)},t.prototype.revealLine=function(e){this.modifiedEditor.revealLine(e)},t.prototype.revealLineInCenter=function(e){this.modifiedEditor.revealLineInCenter(e)},t.prototype.revealLineInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealLineInCenterIfOutsideViewport(e)},t.prototype.revealPosition=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.modifiedEditor.revealPosition(e,t,n)},t.prototype.revealPositionInCenter=function(e){this.modifiedEditor.revealPositionInCenter(e)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealPositionInCenterIfOutsideViewport(e)},t.prototype.getSelection=function(){return this.modifiedEditor.getSelection()},t.prototype.getSelections=function(){return this.modifiedEditor.getSelections()},t.prototype.setSelection=function(e,t,n,i){this.modifiedEditor.setSelection(e,t,n,i)},t.prototype.setSelections=function(e){this.modifiedEditor.setSelections(e)},t.prototype.revealLines=function(e,t){this.modifiedEditor.revealLines(e,t)},t.prototype.revealLinesInCenter=function(e,t){this.modifiedEditor.revealLinesInCenter(e,t)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t){this.modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t)},t.prototype.revealRange=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),this.modifiedEditor.revealRange(e,t,n)},t.prototype.revealRangeInCenter=function(e){this.modifiedEditor.revealRangeInCenter(e)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealRangeInCenterIfOutsideViewport(e)},t.prototype.addAction=function(e){this.modifiedEditor.addAction(e)},t.prototype.getActions=function(){return this.modifiedEditor.getActions()},t.prototype.getAction=function(e){return this.modifiedEditor.getAction(e)},t.prototype.saveViewState=function(){var e=this.originalEditor.saveViewState(),t=this.modifiedEditor.saveViewState();return{original:e,modified:t}},t.prototype.restoreViewState=function(e){var t=e;if(t.original&&t.original){var n=t;this.originalEditor.restoreViewState(n.original),this.modifiedEditor.restoreViewState(n.modified)}},t.prototype.layout=function(e){this._measureDomElement(!1,e)},t.prototype.focus=function(){this.modifiedEditor.focus()},t.prototype.isFocused=function(){return this.originalEditor.isFocused()||this.modifiedEditor.isFocused()},t.prototype.onVisible=function(){this._isVisible=!0,this.originalEditor.onVisible(),this.modifiedEditor.onVisible(),this._beginUpdateDecorations()},t.prototype.onHide=function(){this._isVisible=!1,this.originalEditor.onHide(),this.modifiedEditor.onHide(),this._cleanViewZonesAndDecorations()},t.prototype.trigger=function(e,t,n){this.modifiedEditor.trigger(e,t,n)},t.prototype.changeDecorations=function(e){return this.modifiedEditor.changeDecorations(e)},t.prototype._measureDomElement=function(e,t){return t=t||s.getDomNodePosition(this._containerDomElement),t.width<=0?(this._width=0,void(this._height=0)):void((e||t.width!==this._width||t.height!==this._height)&&(this._width=t.width,this._height=t.height,this._doLayout()))},t.prototype._layoutOverviewRulers=function(){var e=t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*t.ONE_OVERVIEW_WIDTH,n=this.modifiedEditor.getLayoutInfo();n&&(this._originalOverviewRuler.setLayout({top:0,width:t.ONE_OVERVIEW_WIDTH,right:e+t.ONE_OVERVIEW_WIDTH,height:this._height}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:t.ONE_OVERVIEW_WIDTH,height:this._height}))},t.prototype._recomputeIfNecessary=function(e){for(var n=this,i=!1,o=0;!i&&o<e.length;o++){var r=e[o].getType();i=i||"change"===r||r===h.EventType.ModelModeChanged}i&&this._isVisible&&(-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(function(){return n._beginUpdateDecorations()},t.UPDATE_DIFF_DECORATIONS_DELAY))},t.prototype._onOriginalEditorEvents=function(e){for(var t=0;t<e.length;t++)"scroll"===e[t].getType()&&this._onOriginalEditorScroll(e[t].getData()),e[t].getType()===h.EventType.ViewZonesChanged&&this._onViewZonesChanged();this._recomputeIfNecessary(e)},t.prototype._onModifiedEditorEvents=function(e){for(var t=0;t<e.length;t++)"scroll"===e[t].getType()&&(this._onModifiedEditorScroll(e[t].getData()),this._layoutOverviewViewport()),"scrollSize"===e[t].getType()&&this._layoutOverviewViewport(),"viewLayoutChanged"===e[t].getType()&&this._layoutOverviewViewport(),e[t].getType()===h.EventType.ViewZonesChanged&&this._onViewZonesChanged();this._recomputeIfNecessary(e)},t.prototype._onViewZonesChanged=function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()},t.prototype._beginUpdateDecorations=function(){var e=this;if(this._beginUpdateDecorationsTimeout=-1,this.modifiedEditor.getModel()){this._diffComputationToken++;var t=this._diffComputationToken,n=this.originalEditor.getModel(),i=this.modifiedEditor.getModel();this._editorWorkerService.computeDiff(n.getAssociatedResource(),i.getAssociatedResource(),this._ignoreTrimWhitespace).then(function(o){t===e._diffComputationToken&&n===e.originalEditor.getModel()&&i===e.modifiedEditor.getModel()&&(e._lineChanges=o,e._updateDecorationsRunner.schedule(),e.emit(h.EventType.DiffUpdated,{editor:e,lineChanges:o}))},function(o){t===e._diffComputationToken&&n===e.originalEditor.getModel()&&i===e.modifiedEditor.getModel()&&(e._lineChanges=null,e._updateDecorationsRunner.schedule())})}},t.prototype._cleanViewZonesAndDecorations=function(){this._originalEditorState.clean(this.originalEditor),this._modifiedEditorState.clean(this.modifiedEditor)},t.prototype._updateDecorations=function(){var e=this._lineChanges||[],t=this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,t,n,this.originalEditor,this.modifiedEditor);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this.originalEditor,this._originalOverviewRuler,i.original),this._modifiedEditorState.apply(this.modifiedEditor,this._modifiedOverviewRuler,i.modified)}finally{this._currentlyChangingViewZones=!1}},t.prototype._adjustOptionsForSubEditor=function(e){var t=r.clone(e||{});return t.wrappingColumn=-1,t.automaticLayout=!1,t.scrollbar=t.scrollbar||{},t.scrollbar.vertical="visible",t.folding=!1,t.referenceInfos=!1,t},t.prototype._adjustOptionsForLeftHandSide=function(e,t){var n=this._adjustOptionsForSubEditor(e);return n.readOnly=!t,n.overviewRulerLanes=1,n.theme=this._theme+" original-in-monaco-diff-editor",n},t.prototype._adjustOptionsForRightHandSide=function(e){var n=this._adjustOptionsForSubEditor(e);return n.revealHorizontalRightPadding=l.DefaultConfig.editor.revealHorizontalRightPadding+t.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.theme=this._theme+" modified-in-monaco-diff-editor",n},t.prototype._onOriginalEditorScroll=function(e){this._isHandlingScrollEvent||(this._isHandlingScrollEvent=!0,this.modifiedEditor.setScrollLeft(e.scrollLeft),this.modifiedEditor.setScrollTop(e.scrollTop),this._isHandlingScrollEvent=!1)},t.prototype._onModifiedEditorScroll=function(e){this._isHandlingScrollEvent||(this._isHandlingScrollEvent=!0,this.originalEditor.setScrollLeft(e.scrollLeft),this.originalEditor.setScrollTop(e.scrollTop),this._isHandlingScrollEvent=!1)},t.prototype._doLayout=function(){var e=this._strategy.layout();this._originalDomNode.style.width=e+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=this._width-e+"px",this._modifiedDomNode.style.left=e+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=this._width-t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.style.height="30px",this.originalEditor.layout({width:e,height:this._height}),this.modifiedEditor.layout({width:this._width-e-t.ENTIRE_DIFF_OVERVIEW_WIDTH,height:this._height}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._layoutOverviewViewport()},t.prototype._layoutOverviewViewport=function(){var e=this._computeOverviewViewport();e?(a.StyleMutator.setTop(this._overviewViewportDomElement,e.top),a.StyleMutator.setHeight(this._overviewViewportDomElement,e.height)):(a.StyleMutator.setTop(this._overviewViewportDomElement,0),a.StyleMutator.setHeight(this._overviewViewportDomElement,0))},t.prototype._computeOverviewViewport=function(){var e=this.modifiedEditor.getLayoutInfo();if(!e)return null;var t=this.modifiedEditor.getScrollTop(),n=this.modifiedEditor.getScrollHeight(),i=Math.max(0,e.contentHeight),o=Math.max(0,i-0),r=n>0?o/n:0,s=Math.max(1,Math.floor(e.contentHeight*r)),a=Math.floor(t*r);return{height:s,top:a}},t.prototype._createDataSource=function(){var e=this;return{getWidth:function(){return e._width},getHeight:function(){return e._height},getContainerDomNode:function(){return e._containerDomElement},relayoutEditors:function(){e._doLayout()},getOriginalEditor:function(){return e.originalEditor},getModifiedEditor:function(){return e.modifiedEditor}}},t.prototype._setStrategy=function(e){this._strategy&&this._strategy.dispose(),this._strategy=e,this._lineChanges&&this._updateDecorations(),this._measureDomElement(!0)},t.prototype._getLineChangeAtOrBeforeLineNumber=function(e,t){if(0===this._lineChanges.length||e<t(this._lineChanges[0]))return null;for(var n=0,i=this._lineChanges.length-1;i>n;){var o=Math.floor((n+i)/2),r=t(this._lineChanges[o]),s=i>=o+1?t(this._lineChanges[o+1]):Number.MAX_VALUE;r>e?i=o-1:e>=s?n=o+1:(n=o,i=o)}return this._lineChanges[n]},t.prototype._getEquivalentLineForOriginalLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,function(e){return e.originalStartLineNumber});if(!t)return e;var n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,s=e-n;return o>=s?i+Math.min(s,r):i+r-o+s},t.prototype._getEquivalentLineForModifiedLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,function(e){return e.modifiedStartLineNumber});if(!t)return e;var n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,s=e-i;return r>=s?n+Math.min(s,o):n+o-r+s},t.prototype.getDiffLineInformationForOriginal=function(e){return this._lineChanges?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null},t.prototype.getDiffLineInformationForModified=function(e){return this._lineChanges?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null},t.ONE_OVERVIEW_WIDTH=15,t.ENTIRE_DIFF_OVERVIEW_WIDTH=30,t.UPDATE_DIFF_DECORATIONS_DELAY=200,t=__decorate([__param(2,p.IEditorWorkerService),__param(3,u.IInstantiationService)],t)}(i.EventEmitter);t.DiffEditorWidget=w;var C=function(){function e(e){this._dataSource=e}return e.prototype.getEditorsDiffDecorations=function(e,t,n,i,o,r){i=i.sort(function(e,t){return e.afterLineNumber-t.afterLineNumber}),n=n.sort(function(e,t){return e.afterLineNumber-t.afterLineNumber});var s=this._getViewZones(e,n,i,o,r),a=this._getOriginalEditorDecorations(e,t,o,r),c=this._getModifiedEditorDecorations(e,t,o,r);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:s.modified}}},e.prototype._getViewZones=function(e,t,n,i,o){return null},e.prototype._getOriginalEditorDecorations=function(e,t,n,i){return null},e.prototype._getModifiedEditorDecorations=function(e,t,n,i){return null},e}(),T=function(){function e(e){this._source=e,this._index=-1,this.advance()}return e.prototype.advance=function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null},e}(),k=function(){function e(e,t,n){this.lineChanges=e,this.originalForeignVZ=t,this.modifiedForeignVZ=n}return e.prototype.getViewZones=function(){var e,t,n,i,o,r,s,a={original:[],modified:[]},c=0,u=0,l=0,d=0,h=0,p=0,f=0,m=function(e,t){return e.afterLineNumber-t.afterLineNumber},v=function(e,t){if(null===t.domNode&&e.length>0){var n=e[e.length-1];if(n.afterLineNumber===t.afterLineNumber&&null===n.domNode)return void(n.heightInLines+=t.heightInLines)}e.push(t)},_=new T(this.modifiedForeignVZ),S=new T(this.originalForeignVZ);for(e=0,t=this.lineChanges.length;t>=e;e++){for(n=t>e?this.lineChanges[e]:null,null!==n?(l=n.originalStartLineNumber+(n.originalEndLineNumber>0?-1:0),
d=n.modifiedStartLineNumber+(n.modifiedEndLineNumber>0?-1:0),u=n.originalEndLineNumber>0?n.originalEndLineNumber-n.originalStartLineNumber+1:0,c=n.modifiedEndLineNumber>0?n.modifiedEndLineNumber-n.modifiedStartLineNumber+1:0,h=Math.max(n.originalStartLineNumber,n.originalEndLineNumber),p=Math.max(n.modifiedStartLineNumber,n.modifiedEndLineNumber)):(l+=1e7+u,d+=1e7+c,h=l,p=d),i=[],o=[];_.current&&_.current.afterLineNumber<=p;)f=_.current.afterLineNumber<=d?l-d+_.current.afterLineNumber:h,i.push({afterLineNumber:f,heightInLines:_.current.heightInLines,domNode:null}),_.advance();for(;S.current&&S.current.afterLineNumber<=h;)f=S.current.afterLineNumber<=l?d-l+S.current.afterLineNumber:p,o.push({afterLineNumber:f,heightInLines:S.current.heightInLines,domNode:null}),S.advance();if(null!==n&&g(n)){var E=this._produceOriginalFromDiff(n,u,c);E&&i.push(E)}if(null!==n&&y(n)){var E=this._produceModifiedFromDiff(n,u,c);E&&o.push(E)}for(r=0,s=0,i=i.sort(m),o=o.sort(m);r<i.length&&s<o.length;){var w=i[r],C=o[s],k=w.afterLineNumber-l,x=C.afterLineNumber-d;x>k?(v(a.original,w),r++):k>x?(v(a.modified,C),s++):w.shouldNotShrink?(v(a.original,w),r++):C.shouldNotShrink?(v(a.modified,C),s++):w.heightInLines>=C.heightInLines?(w.heightInLines-=C.heightInLines,s++):(C.heightInLines-=w.heightInLines,r++)}for(;r<i.length;)v(a.original,i[r]),r++;for(;s<o.length;)v(a.modified,o[s]),s++}var I=function(e){e.domNode||(e.domNode=b())};return a.original.forEach(I),a.modified.forEach(I),a},e.prototype._produceOriginalFromDiff=function(e,t,n){throw new Error("NotImplemented")},e.prototype._produceModifiedFromDiff=function(e,t,n){throw new Error("NotImplemented")},e}(),x=function(e){function t(t,n){var i=this;e.call(this,t),this._disableSash=n===!1,this._sashRatio=null,this._sashPosition=null,this._sash=new c.Sash(this._dataSource.getContainerDomNode(),this),this._disableSash&&this._sash.disable(),this._sash.on("start",function(){return i._onSashDragStart()}),this._sash.on("change",function(e){return i._onSashDrag(e)}),this._sash.on("end",function(){return i._onSashDragEnd()})}return __extends(t,e),t.prototype.dispose=function(){this._sash.dispose()},t.prototype.setEnableSplitViewResizing=function(e){var t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._disableSash?this._sash.disable():this._sash.enable())},t.prototype.layout=function(e){void 0===e&&(e=this._sashRatio);var n=this._dataSource.getWidth(),i=n-w.ENTIRE_DIFF_OVERVIEW_WIDTH,o=Math.floor((e||.5)*i),r=Math.floor(.5*i);return o=this._disableSash?r:o||r,i>2*t.MINIMUM_EDITOR_WIDTH?(o<t.MINIMUM_EDITOR_WIDTH&&(o=t.MINIMUM_EDITOR_WIDTH),o>i-t.MINIMUM_EDITOR_WIDTH&&(o=i-t.MINIMUM_EDITOR_WIDTH)):o=r,this._sashPosition!==o&&(this._sashPosition=o,this._sash.layout()),this._sashPosition},t.prototype._onSashDragStart=function(){this._startSashPosition=this._sashPosition},t.prototype._onSashDrag=function(e){var t=this._dataSource.getWidth(),n=t-w.ENTIRE_DIFF_OVERVIEW_WIDTH,i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()},t.prototype._onSashDragEnd=function(){this._sash.layout()},t.prototype.getVerticalSashTop=function(e){return 0},t.prototype.getVerticalSashLeft=function(e){return this._sashPosition},t.prototype.getVerticalSashHeight=function(e){return this._dataSource.getHeight()},t.prototype._getViewZones=function(e,t,n,i,o){var r=new I(e,t,n);return r.getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,n,i){var o,r,s,a,c,u,l,d,p,f={decorations:[],overviewZones:[]},m=n.getModel();for(o=0,r=e.length;r>o;o++)if(c=e[o],y(c)&&(f.decorations.push(_(c.originalStartLineNumber,1,c.originalEndLineNumber,Number.MAX_VALUE,"line-delete",!0)),g(c)&&c.charChanges||f.decorations.push(_(c.originalStartLineNumber,1,c.originalEndLineNumber,Number.MAX_VALUE,"char-delete",!0)),f.overviewZones.push({startLineNumber:c.originalStartLineNumber,endLineNumber:c.originalEndLineNumber,color:"rgba(255, 0, 0, 0.4)",darkColor:"rgba(255, 0, 0, 0.4)",position:h.OverviewRulerLane.Full}),c.charChanges))for(s=0,a=c.charChanges.length;a>s;s++)if(u=c.charChanges[s],y(u))if(t)for(l=u.originalStartLineNumber;l<=u.originalEndLineNumber;l++)d=l===u.originalStartLineNumber?u.originalStartColumn:m.getLineFirstNonWhitespaceColumn(l),p=l===u.originalEndLineNumber?u.originalEndColumn:m.getLineLastNonWhitespaceColumn(l),f.decorations.push(_(l,d,l,p,"char-delete",!1));else f.decorations.push(_(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,"char-delete",!1));return f},t.prototype._getModifiedEditorDecorations=function(e,t,n,i){var o,r,s,a,c,u,l,d,p,f={decorations:[],overviewZones:[]},m=i.getModel();for(o=0,r=e.length;r>o;o++)if(c=e[o],g(c)&&(f.decorations.push(_(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,Number.MAX_VALUE,"line-insert",!0)),y(c)&&c.charChanges||f.decorations.push(_(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,Number.MAX_VALUE,"char-insert",!0)),f.overviewZones.push({startLineNumber:c.modifiedStartLineNumber,endLineNumber:c.modifiedEndLineNumber,color:"rgba(155, 185, 85, 0.4)",darkColor:"rgba(155, 185, 85, 0.4)",position:h.OverviewRulerLane.Full}),c.charChanges))for(s=0,a=c.charChanges.length;a>s;s++)if(u=c.charChanges[s],g(u))if(t)for(l=u.modifiedStartLineNumber;l<=u.modifiedEndLineNumber;l++)d=l===u.modifiedStartLineNumber?u.modifiedStartColumn:m.getLineFirstNonWhitespaceColumn(l),p=l===u.modifiedEndLineNumber?u.modifiedEndColumn:m.getLineLastNonWhitespaceColumn(l),f.decorations.push(_(l,d,l,p,"char-insert",!1));else f.decorations.push(_(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,"char-insert",!1));return f},t.MINIMUM_EDITOR_WIDTH=100,t}(C),I=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype._produceOriginalFromDiff=function(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null},t.prototype._produceModifiedFromDiff=function(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null},t}(k),D=function(e){function t(t,n){var i=this;e.call(this,t),this.decorationsLeft=t.getOriginalEditor().getLayoutInfo().decorationsLeft,this.toDispose=[],this.toDispose.push(t.getOriginalEditor().addListener2(h.EventType.EditorLayout,function(e){i.decorationsLeft!==e.decorationsLeft&&(i.decorationsLeft=e.decorationsLeft,t.relayoutEditors())}))}return __extends(t,e),t.prototype.dispose=function(){this.toDispose=o.disposeAll(this.toDispose)},t.prototype.setEnableSplitViewResizing=function(e){},t.prototype._getViewZones=function(e,t,n,i,o){var r=new A(e,t,n,i,o);return r.getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,n,i){var o,r,s,a={decorations:[],overviewZones:[]};for(o=0,r=e.length;r>o;o++)s=e[o],y(s)&&a.overviewZones.push({startLineNumber:s.originalStartLineNumber,endLineNumber:s.originalEndLineNumber,color:"rgba(255, 0, 0, 0.4)",darkColor:"rgba(255, 0, 0, 0.4)",position:h.OverviewRulerLane.Full});return a},t.prototype._getModifiedEditorDecorations=function(e,t,n,i){var o,r,s,a,c,u,l,d,p,f={decorations:[],overviewZones:[]},m=i.getModel();for(o=0,r=e.length;r>o;o++)if(s=e[o],g(s))if(f.decorations.push(_(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,Number.MAX_VALUE,"line-insert",!0)),f.overviewZones.push({startLineNumber:s.modifiedStartLineNumber,endLineNumber:s.modifiedEndLineNumber,color:"rgba(155, 185, 85, 0.4)",darkColor:"rgba(155, 185, 85, 0.4)",position:h.OverviewRulerLane.Full}),s.charChanges){for(a=0,c=s.charChanges.length;c>a;a++)if(u=s.charChanges[a],g(u))if(t)for(l=u.modifiedStartLineNumber;l<=u.modifiedEndLineNumber;l++)d=l===u.modifiedStartLineNumber?u.modifiedStartColumn:m.getLineFirstNonWhitespaceColumn(l),p=l===u.modifiedEndLineNumber?u.modifiedEndColumn:m.getLineLastNonWhitespaceColumn(l),f.decorations.push(_(l,d,l,p,"char-insert",!1));else f.decorations.push(_(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,"char-insert",!1))}else f.decorations.push(_(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,Number.MAX_VALUE,"char-insert",!0));return f},t.prototype.layout=function(){return Math.max(5,this.decorationsLeft)},t}(C),A=function(e){function t(t,n,i,o,r){e.call(this,t,n,i),this.originalModel=o.getModel(),this.modifiedEditorConfiguration=r.getConfiguration(),this.modifiedEditorTabSize=r.getModel().getOptions().tabSize}return __extends(t,e),t.prototype._produceOriginalFromDiff=function(e,t,n){return{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div")}},t.prototype._produceModifiedFromDiff=function(e,t,n){var i,o,r,s,a=[];if(e.charChanges)for(i=0,o=e.charChanges.length;o>i;i++)r=e.charChanges[i],y(r)&&(s=_(r.originalStartLineNumber,r.originalStartColumn,r.originalEndLineNumber,r.originalEndColumn,"char-delete",!1),s.options.inlineClassName=s.options.className,a.push(s));var c,u=[];for(c=e.originalStartLineNumber;c<=e.originalEndLineNumber;c++)u=u.concat(this.renderOriginalLine(c-e.originalStartLineNumber,this.originalModel,this.modifiedEditorConfiguration,this.modifiedEditorTabSize,c,a));var l=document.createElement("div");return l.className="view-lines line-delete",l.innerHTML=u.join(""),{shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,domNode:l}},t.prototype.renderOriginalLine=function(e,t,n,i,o,r){var s,a,c=t.getLineContent(o);s={getTokens:function(){return[{startIndex:0,type:""}]},getFauxIndentLength:function(){return 0},getTextLength:function(){return c.length},equals:function(e){return!1},findIndexOfOffset:function(e){return 0}},a=f.createLineParts(o,1,c,s,r,n.renderWhitespace);var u=m.renderLine({lineContent:c,tabSize:i,stopRenderingLineAfter:n.stopRenderingLineAfter,renderWhitespace:n.renderWhitespace,parts:a.getParts()}),l=[];return l.push('<div class="view-line'),0===r.length&&l.push(" char-delete"),l.push('" style="top:'),l.push(String(e*n.lineHeight)),l.push('px;width:1000000px;">'),l=l.concat(u.output),l.push("</div>"),l},t}(k)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/embeddedCodeEditorWidget",["require","exports","vs/base/common/objects","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingService","vs/platform/telemetry/common/telemetry","vs/editor/common/editorCommon","vs/editor/common/services/codeEditorService","vs/editor/browser/widget/codeEditorWidget"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i,o,r,a,c){var u=this;e.call(this,t,i.getRawConfiguration(),o,r,a,c),this._parentEditor=i,this._overwriteOptions=n,e.prototype.updateOptions.call(this,this._overwriteOptions),this._lifetimeDispose.push(i.addListener2(s.EventType.ConfigurationChanged,function(e){return u._onParentConfigurationChanged(e)}))}return __extends(t,e),t.prototype._onParentConfigurationChanged=function(t){e.prototype.updateOptions.call(this,this._parentEditor.getRawConfiguration()),e.prototype.updateOptions.call(this,this._overwriteOptions)},t.prototype.updateOptions=function(t){n.mixin(this._overwriteOptions,t,!0),e.prototype.updateOptions.call(this,this._overwriteOptions)},t=__decorate([__param(3,i.IInstantiationService),__param(4,a.ICodeEditorService),__param(5,o.IKeybindingService),__param(6,r.ITelemetryService)],t)}(c.CodeEditorWidget);t.EmbeddedCodeEditorWidget=u}),define("vs/platform/thread/common/thread",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IThreadService=n.createDecorator("threadService");var i=function(){function e(){}return e}();t.IRemotableCtorMap=i;var o=function(){function e(){}return e}();t.IRemotableCtorAffinityMap=o;var r=function(){function e(){}return e.getId=function(t){return t[e.PROP_NAME]||null},e.MainContext=function(t){return function(n){e._ensureUnique(t),e.Registry.MainContext[t]=n,n[e.PROP_NAME]=t}},e.ExtHostContext=function(t){return function(n){e._ensureUnique(t),e.Registry.ExtHostContext[t]=n,n[e.PROP_NAME]=t}},e.WorkerContext=function(t,n){return function(i){e._ensureUnique(t),e.Registry.WorkerContext[t]={ctor:i,affinity:n},i[e.PROP_NAME]=t}},e._ensureUnique=function(t){if(e.Registry.MainContext[t]||e.Registry.ExtHostContext[t]||e.Registry.WorkerContext[t])throw new Error("Duplicate Remotable identifier found")},e.PROP_NAME="$__REMOTABLE_ID",e.Registry={MainContext:Object.create(null),ExtHostContext:Object.create(null),WorkerContext:Object.create(null)},e}();t.Remotable=r,function(e){e[e.None=0]="None",e[e.Group1=1]="Group1",e[e.Group2=2]="Group2",e[e.Group3=3]="Group3",e[e.Group4=4]="Group4",e[e.Group5=5]="Group5",e[e.Group6=6]="Group6",e[e.Group7=7]="Group7",e[e.Group8=8]="Group8",e[e.Group9=9]="Group9",e[e.All=10]="All"}(t.ThreadAffinity||(t.ThreadAffinity={}));t.ThreadAffinity});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/services/modeServiceImpl",["require","exports","vs/nls!vs/editor/common/services/modeServiceImpl","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/paths","vs/base/common/winjs.base","vs/base/common/mime","vs/platform/instantiation/common/descriptors","vs/platform/extensions/common/extensionsRegistry","vs/platform/thread/common/thread","vs/editor/common/modes/abstractMode","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/monarch/monarchCompile","vs/editor/common/modes/monarch/monarchDefinition","vs/editor/common/modes/monarch/monarchLexer","vs/editor/common/modes/supports/declarationSupport","vs/editor/common/modes/supports/parameterHintsSupport","vs/editor/common/modes/supports/referenceSupport","vs/editor/common/modes/supports/richEditSupport","vs/editor/common/modes/supports/suggestSupport","vs/editor/common/services/languagesRegistry","vs/editor/common/services/modeService","vs/platform/configuration/common/configuration"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T){"use strict";function k(e){return"undefined"==typeof e?!0:Array.isArray(e)?e.every(function(e){return"string"==typeof e}):!1}function x(e,t){return e?"string"!=typeof e.id?(t.error(n.localize(10,null,"id")),!1):k(e.extensions)?k(e.filenames)?"undefined"!=typeof e.firstLine&&"string"!=typeof e.firstLine?(t.error(n.localize(13,null,"firstLine")),!1):"undefined"!=typeof e.configuration&&"string"!=typeof e.configuration?(t.error(n.localize(14,null,"configuration")),!1):k(e.aliases)?k(e.mimetypes)?!0:(t.error(n.localize(16,null,"mimetypes")),!1):(t.error(n.localize(15,null,"aliases")),!1):(t.error(n.localize(12,null,"filenames")),!1):(t.error(n.localize(11,null,"extensions")),!1):(t.error(n.localize(9,null,I.name)),!1)}var I=d.ExtensionsRegistry.registerExtensionPoint("languages",{description:n.localize(0,null),type:"array",defaultSnippets:[{body:[{id:"",aliases:[],extensions:[]}]}],items:{type:"object",defaultSnippets:[{body:{id:"",extensions:[]}}],properties:{id:{description:n.localize(1,null),type:"string"},aliases:{description:n.localize(2,null),type:"array",items:{type:"string"}},extensions:{description:n.localize(3,null),"default":[".foo"],type:"array",items:{type:"string"}},filenames:{description:n.localize(4,null),type:"array",items:{type:"string"}},filenamePatterns:{description:n.localize(5,null),"default":["bar*foo.txt"],type:"array",items:{type:"string"}},mimetypes:{description:n.localize(6,null),type:"array",items:{type:"string"}},firstLine:{description:n.localize(7,null),type:"string"},configuration:{description:n.localize(8,null),type:"string"}}}}),D=function(){function e(e,t){var n=this;this.serviceId=C.IModeService,this._onDidAddModes=new o.Emitter,this.onDidAddModes=this._onDidAddModes.event,this._onDidCreateMode=new o.Emitter,this.onDidCreateMode=this._onDidCreateMode.event,this._threadService=e,this._extensionService=t,this._activationPromises={},this._instantiatedModes={},this._config={},this._registry=new w.LanguagesRegistry,this._registry.onDidAddModes(function(e){return n._onDidAddModes.fire(e)})}return e.prototype.getConfigurationForMode=function(e){return this._config[e]||{}},e.prototype.configureMode=function(e,t){var n=this.getModeId(e);n&&this.configureModeById(n,t)},e.prototype.configureModeById=function(e,t){var n=this._config[e]||{},i=s.mixin(s.clone(n),t);if(!s.equals(n,i)){this._config[e]=i;var o=this.getMode(e);o&&o.configSupport&&o.configSupport.configure(this.getConfigurationForMode(e))}},e.prototype.configureAllModes=function(e){var t=this;if(e){var n=this._registry.getRegisteredModes();n.forEach(function(n){var i=e[n];t.configureModeById(n,i)})}},e.prototype.isRegisteredMode=function(e){return this._registry.isRegisteredMode(e)},e.prototype.isCompatMode=function(e){var t=this._registry.getCompatMode(e);return!!t},e.prototype.getRegisteredModes=function(){return this._registry.getRegisteredModes()},e.prototype.getRegisteredLanguageNames=function(){return this._registry.getRegisteredLanguageNames()},e.prototype.getExtensions=function(e){return this._registry.getExtensions(e)},e.prototype.getMimeForMode=function(e){return this._registry.getMimeForMode(e)},e.prototype.getLanguageName=function(e){return this._registry.getLanguageName(e)},e.prototype.getModeIdForLanguageName=function(e){return this._registry.getModeIdForLanguageNameLowercase(e)},e.prototype.getModeId=function(e){var t=this._registry.extractModeIds(e);return t.length>0?t[0]:null},e.prototype.getConfigurationFiles=function(e){return this._registry.getConfigurationFiles(e)},e.prototype.lookup=function(e){for(var t=[],n=this._registry.extractModeIds(e),i=0;i<n.length;i++){var o=n[i];t.push({modeId:o,isInstantiated:this._instantiatedModes.hasOwnProperty(o)})}return t},e.prototype.getMode=function(e){for(var t=this._registry.extractModeIds(e),n=!1,o=0;o<t.length;o++){if(this._instantiatedModes.hasOwnProperty(t[o]))return this._instantiatedModes[t[o]];n=n||"plaintext"===t[o]}if(n){var r=null;return this.getOrCreateMode(e).then(function(e){r=e}).done(null,i.onUnexpectedError),r}},e.prototype.getModeIdByLanguageName=function(e){var t=this._registry.getModeIdsFromLanguageName(e);return t.length>0?t[0]:null},e.prototype.getModeIdByFilenameOrFirstLine=function(e,t){var n=this._registry.getModeIdsFromFilenameOrFirstLine(e,t);return n.length>0?n[0]:null},e.prototype.onReady=function(){return this._extensionService.onReady()},e.prototype.getOrCreateMode=function(e){var t=this;return this.onReady().then(function(){var n=t.getModeId(e);return t._getOrCreateMode(n||"plaintext")})},e.prototype.getOrCreateModeByLanguageName=function(e){var t=this;return this.onReady().then(function(){var n=t.getModeIdByLanguageName(e);return t._getOrCreateMode(n||"plaintext")})},e.prototype.getOrCreateModeByFilenameOrFirstLine=function(e,t){var n=this;return this.onReady().then(function(){var i=n.getModeIdByFilenameOrFirstLine(e,t);return n._getOrCreateMode(i||"plaintext")})},e.prototype._getOrCreateMode=function(e){var t=this;if(this._instantiatedModes.hasOwnProperty(e))return c.TPromise.as(this._instantiatedModes[e]);if(this._activationPromises.hasOwnProperty(e))return this._activationPromises[e];var n,o,r=new c.TPromise(function(e,t,i){n=e,o=t});return this._activationPromises[e]=r,this._createMode(e).then(function(n){return t._instantiatedModes[e]=n,delete t._activationPromises[e],t._onDidCreateMode.fire(n),t._extensionService.activateByEvent("onLanguage:"+e).done(null,i.onUnexpectedError),t._instantiatedModes[e]}).then(n,o),r},e.prototype._createMode=function(e){var t=this,n=this._createModeDescriptor(e),i=this._registry.getCompatMode(e);if(i){var o=l.createAsyncDescriptor1(i.moduleId,i.ctorName);return this._threadService.createInstance(o,n).then(function(n){return n.configSupport&&n.configSupport.configure(t.getConfigurationForMode(e)),n})}return c.TPromise.as(this._threadService.createInstance(p.FrankensteinMode,n))},e.prototype._createModeDescriptor=function(e){var t=f.ModesRegistry.getWorkerParticipantsForMode(e);return{id:e,workerParticipants:t.map(function(e){return l.createAsyncDescriptor0(e.moduleId,e.ctorName)})}},e.prototype._registerModeSupport=function(e,t,n){return e.registerSupport?e.registerSupport(t,n):(console.warn("Cannot register support "+t+" on mode "+e.getId()+" because it does not support it."),r.empty)},e.prototype.registerModeSupport=function(e,t,n){var i=this;if(this._instantiatedModes.hasOwnProperty(e))return this._registerModeSupport(this._instantiatedModes[e],t,n);var o,r=new c.TPromise(function(e,t){o=e}),s=this.onDidCreateMode(function(r){r.getId()===e&&(o(i._registerModeSupport(r,t,n)),s.dispose())});return{dispose:function(){r.done(function(e){return e.dispose()},null)}}},e.prototype.doRegisterMonarchDefinition=function(e,t){var n=this;return r.combinedDispose(this.registerTokenizationSupport(e,function(e){return g.createTokenizationSupport(n,e,t)}),this.registerRichEditSupport(e,v.createRichEditSupport(t)))},e.prototype.registerMonarchDefinition=function(e,t,n,i){var o=m.compile(s.clone(i));return this.doRegisterMonarchDefinition(n,o)},e.prototype.registerCodeLensSupport=function(e,t){return this.registerModeSupport(e,"codeLensSupport",function(e){return t})},e.prototype.registerRichEditSupport=function(e,t){return this.registerModeSupport(e,"richEditSupport",function(n){return new S.RichEditSupport(e,n.richEditSupport,t)})},e.prototype.registerDeclarativeDeclarationSupport=function(e,t){return this.registerModeSupport(e,"declarationSupport",function(n){return new y.DeclarationSupport(e,t)})},e.prototype.registerExtraInfoSupport=function(e,t){return this.registerModeSupport(e,"extraInfoSupport",function(e){return t})},e.prototype.registerFormattingSupport=function(e,t){return this.registerModeSupport(e,"formattingSupport",function(e){return t})},e.prototype.registerInplaceReplaceSupport=function(e,t){return this.registerModeSupport(e,"inplaceReplaceSupport",function(e){return t})},e.prototype.registerOccurrencesSupport=function(e,t){return this.registerModeSupport(e,"occurrencesSupport",function(e){return t})},e.prototype.registerOutlineSupport=function(e,t){return this.registerModeSupport(e,"outlineSupport",function(e){return t})},e.prototype.registerDeclarativeParameterHintsSupport=function(e,t){return this.registerModeSupport(e,"parameterHintsSupport",function(n){return new _.ParameterHintsSupport(e,t)})},e.prototype.registerQuickFixSupport=function(e,t){return this.registerModeSupport(e,"quickFixSupport",function(e){return t})},e.prototype.registerDeclarativeReferenceSupport=function(e,t){return this.registerModeSupport(e,"referenceSupport",function(n){return new b.ReferenceSupport(e,t)})},e.prototype.registerRenameSupport=function(e,t){return this.registerModeSupport(e,"renameSupport",function(e){return t})},e.prototype.registerDeclarativeSuggestSupport=function(e,t){return this.registerModeSupport(e,"suggestSupport",function(n){return new E.SuggestSupport(e,t)})},e.prototype.registerTokenizationSupport=function(e,t){return this.registerModeSupport(e,"tokenizationSupport",t)},e}();t.ModeServiceImpl=D;var A=function(e){function t(t,i,o){var r=this;e.call(this,t,i),this._configurationService=o,this._hasInitialized=!1,I.setHandler(function(e){for(var t=[],i=0,o=e.length;o>i;i++){var r=e[i];if(Array.isArray(r.value))for(var s=0,c=r.value.length;c>s;s++){var u=r.value[s];if(x(u,r.collector)){var l=u.configuration?a.join(r.description.extensionFolderPath,u.configuration):u.configuration;t.push({id:u.id,extensions:u.extensions,filenames:u.filenames,filenamePatterns:u.filenamePatterns,firstLine:u.firstLine,aliases:u.aliases,mimetypes:u.mimetypes,configuration:l})}}else r.collector.error(n.localize(17,null,I.name))}f.ModesRegistry.registerLanguages(t)}),this._configurationService.addListener(T.ConfigurationServiceEventTypes.UPDATED,function(e){return r.onConfigurationChange(e.config)})}return __extends(t,e),t.prototype.onReady=function(){var e=this;return this._onReadyPromise||(this._onReadyPromise=this._configurationService.loadConfiguration().then(function(t){return e._extensionService.onReady().then(function(){return e.onConfigurationChange(t),!0})})),this._onReadyPromise},t.prototype.onConfigurationChange=function(e){var t=this;u.clearTextMimes(!0),e.files&&e.files.associations&&Object.keys(e.files.associations).forEach(function(n){u.registerTextMime({mime:t.getMimeForMode(e.files.associations[n]),filepattern:n,userConfigured:!0})})},t.prototype._getModeServiceWorkerHelper=function(){var e=this._threadService.getRemotable(L);if(!this._hasInitialized){this._hasInitialized=!0;var t={compatModes:f.ModesRegistry.getCompatModes(),languages:f.ModesRegistry.getLanguages(),workerParticipants:f.ModesRegistry.getWorkerParticipants()};e._initialize(t),f.ModesRegistry.onDidAddCompatModes(function(t){return e._acceptCompatModes(t)}),f.ModesRegistry.onDidAddLanguages(function(t){return e._acceptLanguages(t)})}return e},t.prototype.configureModeById=function(t,n){this._getModeServiceWorkerHelper().configureModeById(t,n),e.prototype.configureModeById.call(this,t,n)},t.prototype._createMode=function(t){return this._getModeServiceWorkerHelper().instantiateMode(t),e.prototype._createMode.call(this,t)},t.prototype.registerMonarchDefinition=function(t,n,i,o){this._getModeServiceWorkerHelper().registerMonarchDefinition(i,o);var a=m.compile(s.clone(o));return r.combinedDispose(e.prototype.doRegisterMonarchDefinition.call(this,i,a),this.registerModeSupport(i,"suggestSupport",function(e){return v.createSuggestSupport(t,n,i,a)}))},t}(D);t.MainThreadModeServiceImpl=A;var L=function(){function e(e){this._modeService=e}return e.prototype._initialize=function(e){f.ModesRegistry.registerCompatModes(e.compatModes),f.ModesRegistry.registerLanguages(e.languages),f.ModesRegistry.registerWorkerParticipants(e.workerParticipants)},e.prototype._acceptCompatModes=function(e){f.ModesRegistry.registerCompatModes(e)},e.prototype._acceptLanguages=function(e){f.ModesRegistry.registerLanguages(e)},e.prototype.instantiateMode=function(e){this._modeService.getOrCreateMode(e).done(null,i.onUnexpectedError)},e.prototype.configureModeById=function(e,t){this._modeService.configureMode(e,t)},e.prototype.registerMonarchDefinition=function(e,t){this._modeService.registerMonarchDefinition(null,null,e,t)},e=__decorate([h.Remotable.WorkerContext("ModeServiceWorkerHelper",h.ThreadAffinity.All),__param(0,C.IModeService)],e)}();t.ModeServiceWorkerHelper=L});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/services/modelServiceImpl",["require","exports","vs/nls!vs/editor/common/services/modelServiceImpl","vs/base/common/errors","vs/base/common/event","vs/base/common/severity","vs/base/common/uri","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/mirrorModel","vs/editor/common/model/model","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/editor/common/services/resourceService","vs/base/common/platform","vs/platform/configuration/common/configuration","vs/editor/common/config/defaultConfig"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){"use strict";function _(e){return e.toString()}var b=function(){function e(e,t){var n=this;this.model=e,this.isSyncedToWorkers=!1,this._markerDecorations=[],this._modelEventsListener=e.addBulkListener2(function(e){return t(n,e)})}return e.prototype.dispose=function(){this._markerDecorations=this.model.deltaDecorations(this._markerDecorations,[]),this._modelEventsListener.dispose(),this._modelEventsListener=null,this.model=null},e.prototype.getModelId=function(){return _(this.model.getAssociatedResource())},e.prototype.acceptMarkerDecorations=function(e){this._markerDecorations=this.model.deltaDecorations(this._markerDecorations,e)},e}(),S=function(){function e(){}return e.setMarkers=function(e,t){var n=this;t=t.slice(0,500);var i=t.map(function(t){return{range:n._createDecorationRange(e.model,t),options:n._createDecorationOption(t)}});e.acceptMarkerDecorations(i)},e._createDecorationRange=function(e,t){var n=e.validateRange(new u.Range(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)),i=new u.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(i.isEmpty()){var o=e.getWordAtPosition(i.getStartPosition());if(o)i.startColumn=o.startColumn,i.endColumn=o.endColumn;else{var r=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);1===r||(i.endColumn>=r?(i.endColumn=r,i.startColumn=r-1):i.endColumn+=1)}}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){var s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i.startColumn=s,t.startColumn=s)}return i},e._createDecorationOption=function(e){var t,n,i,o=null;switch(e.severity){case r["default"].Ignore:break;case r["default"].Warning:case r["default"].Info:t=l.ClassName.EditorWarningDecoration,n="rgba(18,136,18,0.7)",i="rgba(18,136,18,0.7)";break;case r["default"].Error:default:t=l.ClassName.EditorErrorDecoration,n="rgba(255,18,18,0.7)",i="rgba(255,18,18,0.7)"}return"string"==typeof e.message?o=[{isText:!0,text:e.message}]:Array.isArray(e.message)?o=e.message:e.message&&(o=[e.message]),e.source&&o.unshift({isText:!0,text:"["+e.source+"] "}),{stickiness:l.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:t,htmlMessage:o,overviewRuler:{color:n,darkColor:i,position:l.OverviewRulerLane.Right}}},e}(),E=function(){function e(e,t,i,s,a){var c=this;this.serviceId=f.IModelService,this._modelCreationOptions={tabSize:y.DEFAULT_INDENTATION.tabSize,insertSpaces:y.DEFAULT_INDENTATION.insertSpaces,detectIndentation:y.DEFAULT_INDENTATION.detectIndentation,defaultEOL:v.isLinux||v.isMacintosh?l.DefaultEndOfLine.LF:l.DefaultEndOfLine.CRLF},this._threadService=e,this._markerService=t,this._modeService=i,this._workerHelper=this._threadService.getRemotable(w),this._configurationService=s,this._messageService=a,this._hasShownMigrationMessage=!1;var u=function(e){var t=e.files&&e.files.eol,i=!1,o=y.DEFAULT_INDENTATION.tabSize;if(e.editor&&"undefined"!=typeof e.editor.tabSize){var s=parseInt(e.editor.tabSize,10);isNaN(s)||(o=s),i=i||"auto"===e.editor.tabSize}var a=y.DEFAULT_INDENTATION.insertSpaces;
e.editor&&"undefined"!=typeof e.editor.insertSpaces&&(a="false"===e.editor.insertSpaces?!1:Boolean(e.editor.insertSpaces),i=i||"auto"===e.editor.insertSpaces);var u=c._modelCreationOptions.defaultEOL;"\r\n"===t?u=l.DefaultEndOfLine.CRLF:"\n"===t&&(u=l.DefaultEndOfLine.LF);var d=y.DEFAULT_INDENTATION.detectIndentation;e.editor&&"undefined"!=typeof e.editor.detectIndentation&&(d="false"===e.editor.detectIndentation?!1:Boolean(e.editor.detectIndentation)),c._setModelOptions({tabSize:o,insertSpaces:a,detectIndentation:d,defaultEOL:u}),i&&!c._hasShownMigrationMessage&&(c._hasShownMigrationMessage=!0,c._messageService.show(r["default"].Info,n.localize(0,null)))};this._configurationServiceSubscription=this._configurationService.addListener2(g.ConfigurationServiceEventTypes.UPDATED,function(e){u(e.config)}),this._configurationService.loadConfiguration().then(function(e){u(e)}),this._models={},this._onModelAdded=new o.Emitter,this._onModelRemoved=new o.Emitter,this._onModelModeChanged=new o.Emitter,this._markerService&&(this._markerServiceSubscription=this._markerService.onMarkerChanged(this._handleMarkerChange,this))}return e.prototype.getCreationOptions=function(){return this._modelCreationOptions},e.prototype._setModelOptions=function(e){if(this._modelCreationOptions.detectIndentation===e.detectIndentation&&this._modelCreationOptions.insertSpaces===e.insertSpaces&&this._modelCreationOptions.tabSize===e.tabSize)return void(this._modelCreationOptions=e);this._modelCreationOptions=e;for(var t in this._models)if(this._models.hasOwnProperty(t)){var n=this._models[t];this._modelCreationOptions.detectIndentation?n.model.detectIndentation(this._modelCreationOptions.insertSpaces,this._modelCreationOptions.tabSize):n.model.updateOptions({insertSpaces:this._modelCreationOptions.insertSpaces,tabSize:this._modelCreationOptions.tabSize})}},e.prototype.dispose=function(){this._markerServiceSubscription&&this._markerServiceSubscription.dispose(),this._configurationServiceSubscription.dispose()},e.prototype._handleMarkerChange=function(e){var t=this;e.forEach(function(e){var n=_(e),i=t._models[n];i&&S.setMarkers(i,t._markerService.read({resource:e,take:500}))})},e.prototype._shouldSyncModelToWorkers=function(e){return e.isTooLargeForHavingARichMode()?!1:this._modeService.isCompatMode(e.getMode().getId())},e.prototype._createModelData=function(e,t,n){var i=this,o=new h.Model(e,this._modelCreationOptions,t,n),r=_(o.getAssociatedResource());if(this._models[r])throw new Error("ModelService: Cannot add model "+a.anonymize(r)+" because it already exists!");var s=new b(o,function(e,t){return i._onModelEvents(e,t)});return this._models[r]=s,s},e.prototype.createModel=function(e,t,n){var i=this._createModelData(e,t,n);return this._markerService&&S.setMarkers(i,this._markerService.read({resource:i.model.getAssociatedResource()})),this._shouldSyncModelToWorkers(i.model)&&this._beginWorkerSync(i),this._onModelAdded.fire(i.model),i.model},e.prototype.destroyModel=function(e){var t=this._models[_(e)];t&&t.model.dispose()},e.prototype.getModels=function(){var e=[];for(var t in this._models)this._models.hasOwnProperty(t)&&e.push(this._models[t].model);return e},e.prototype.getModel=function(e){var t=_(e),n=this._models[t];return n?n.model:null},Object.defineProperty(e.prototype,"onModelAdded",{get:function(){return this._onModelAdded?this._onModelAdded.event:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onModelRemoved",{get:function(){return this._onModelRemoved?this._onModelRemoved.event:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onModelModeChanged",{get:function(){return this._onModelModeChanged?this._onModelModeChanged.event:null},enumerable:!0,configurable:!0}),e.prototype._beginWorkerSync=function(t){if(t.isSyncedToWorkers)throw new Error("Model is already being synced to workers!");t.isSyncedToWorkers=!0,this._workerHelper.$_acceptNewModel(e._getBoundModelData(t.model))},e.prototype._stopWorkerSync=function(e){if(!e.isSyncedToWorkers)throw new Error("Model is already not being synced to workers!");e.isSyncedToWorkers=!1,this._workerHelper.$_acceptDidDisposeModel(e.model.getAssociatedResource())},e.prototype._onModelDisposing=function(e){var t=this,n=_(e.getAssociatedResource()),i=this._models[n];if(this._markerService){var o=this._markerService.read({resource:e.getAssociatedResource()}),r=Object.create(null);o.forEach(function(e){return r[e.owner]=t}),Object.keys(r).forEach(function(n){return t._markerService.changeOne(n,e.getAssociatedResource(),[])})}i.isSyncedToWorkers&&this._stopWorkerSync(i),delete this._models[n],i.dispose(),this._onModelRemoved.fire(e)},e._getBoundModelData=function(e){return{url:e.getAssociatedResource(),versionId:e.getVersionId(),value:e.toRawText(),modeId:e.getMode().getId()}},e.prototype._onModelEvents=function(e,t){for(var n=0,i=t.length;i>n;n++){var o=t[n];if(o.getType()===l.EventType.ModelDispose)return void this._onModelDisposing(e.model)}for(var n=0,i=t.length;i>n;n++){var o=t[n];if(o.getType()===l.EventType.ModelModeChanged){var r=e.isSyncedToWorkers,s=this._shouldSyncModelToWorkers(e.model);if(this._onModelModeChanged.fire({model:e.model,oldModeId:o.getData().oldMode.getId()}),!r)return s?void this._beginWorkerSync(e):void 0;if(!s)return void this._stopWorkerSync(e);this._workerHelper.$_acceptDidChangeModelMode(e.getModelId(),e.model.getMode().getId())}}if(e.isSyncedToWorkers){for(var a={contentChanged:[]},n=0,i=t.length;i>n;n++){var o=t[n];o.getType()===l.EventType.ModelContentChanged&&a.contentChanged.push(o.getData())}a.contentChanged.length>0&&this._workerHelper.$_acceptModelEvents(e.getModelId(),a)}},e}();t.ModelServiceImpl=E;var w=function(){function e(e,t){this._resourceService=e,this._modeService=t}return e.prototype.$_acceptNewModel=function(e){var t=this,n=new d.MirrorModel(this._resourceService,e.versionId,e.value,null,e.url);return this._resourceService.insert(n.getAssociatedResource(),n),this._modeService.getOrCreateMode(e.modeId).then(function(e){t._resourceService.remove(n.getAssociatedResource()),n.setMode(e),t._resourceService.insert(n.getAssociatedResource(),n)})},e.prototype.$_acceptDidChangeModelMode=function(e,t){var n=this,i=this._resourceService.get(s["default"].parse(e));return this._modeService.getOrCreateMode(t).then(function(e){n._resourceService.remove(i.getAssociatedResource()),i.setMode(e),n._resourceService.insert(i.getAssociatedResource(),i)})},e.prototype.$_acceptDidDisposeModel=function(e){var t=this._resourceService.get(e);this._resourceService.remove(e),t&&t.dispose()},e.prototype.$_acceptModelEvents=function(e,t){var n=this._resourceService.get(s["default"].parse(e));if(!n)throw new Error("Received model events for missing model "+a.anonymize(e));try{n.onEvents(t)}catch(o){i.onUnexpectedError(o)}},e=__decorate([c.Remotable.WorkerContext("ModelServiceWorkerHelper",c.ThreadAffinity.All),__param(0,m.IResourceService),__param(1,p.IModeService)],e)}();t.ModelServiceWorkerHelper=w});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter",["require","exports","vs/base/common/lifecycle","vs/base/browser/browser","vs/platform/thread/common/thread","vs/editor/browser/editorBrowser","vs/css!./workerStatusReporter"],function(e,t,n,i,o,r){"use strict";function s(e,t,n){e.setAttribute(t,n)}(function(){function e(e,t){this._threadService=t,this._threadService.addStatusListener(this),this._editor=e,this._toDispose=[],this._domNodes=[],this._domNode=document.createElement("div"),this._domNode.className="monaco-worker-status",i.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._editor.addOverlayWidget(this)}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._threadService.removeStatusListener(this),this._toDispose=n.disposeAll(this._toDispose)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:r.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER}},e.prototype._ensureDomNodes=function(e){for(var t=this._domNodes.length-1;t>=e;t++)this._domNode.removeChild(this._domNodes[t]),this._domNodes.splice(t,1);for(var t=this._domNodes.length;e>t;t++)this._domNodes[t]=document.createElement("div"),this._domNodes[t].className="worker",this._domNode.appendChild(this._domNodes[t])},e.prototype.onThreadServiceStatus=function(e){this._ensureDomNodes(e.workers.length);for(var t=0;t<e.workers.length;t++){var n=e.workers[t].queueSize,i="idle";n>5?i="flooded":n>0&&(i="busy"),s(this._domNodes[t],"status",i)}},e.ID="editor.contrib.workerStatusReporter",e=__decorate([__param(1,o.IThreadService)],e)})()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};define("vs/platform/markers/common/markerService",["require","exports","vs/base/common/arrays","vs/base/common/network","vs/base/common/strings","vs/base/common/collections","vs/base/common/uri","vs/base/common/event","vs/base/common/severity","vs/platform/thread/common/thread","./markers"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d;!function(e){function t(e){var t=/^(.*)→(.*)$/.exec(e);return{owner:t[1],resource:s["default"].parse(t[2])}}function n(e){return e.owner+"→"+e.resource}function i(e,t){return new RegExp(o.format(a,e?o.escapeRegExpCharacters(e):".*",t?o.escapeRegExpCharacters(t.toString()):".*"))}function r(e,t){return e+"→"+t}e.fromValue=t,e.valueOf=n;var a="^({0})→({1})$";e.selector=i,e.raw=r}(d||(d={}));var h=function(){function e(){this.serviceId=l.IMarkerService,this._data=Object.create(null),this._stats=this._emptyStats(),this._onMarkerChanged=new a.Emitter}return e.prototype.getStatistics=function(){return this._stats},Object.defineProperty(e.prototype,"onMarkerChanged",{get:function(){return this._onMarkerChanged?this._onMarkerChanged.event:null},enumerable:!0,configurable:!0}),e.prototype.changeOne=function(e,t,n){this._doChangeOne(e,t,n)&&this._onMarkerChanged.fire([t])},e.prototype.remove=function(e,t){if(!n.isFalsyOrEmpty(t)){for(var i,o=0,r=t;o<r.length;o++){var s=r[o];this._doChangeOne(e,s,void 0)&&(i||(i=[]),i.push(s))}i&&this._onMarkerChanged.fire(i)}},e.prototype._doChangeOne=function(e,t,i){var o=d.raw(e,t),r=this._data[o],s=!n.isFalsyOrEmpty(r),a=!n.isFalsyOrEmpty(i),c=this._computeStats(r),u=this._computeStats(i);if(s||a)return a?this._data[o]=i:s&&delete this._data[o],this._isStatRelevant(t)&&(this._updateStatsMinus(c),this._updateStatsPlus(u)),!0},e.prototype.changeAll=function(e,t){var i=this,o=Object.create(null),s=this._emptyStats();if(this._forEach(e,void 0,void 0,-1,function(e,t){var n=d.fromValue(e.key).resource;i._isStatRelevant(n)&&i._updateStatsPlus(s,i._computeStats(e.value)),o[n.toString()]=n,t()}),this._updateStatsMinus(s),!n.isFalsyOrEmpty(t)){var a=this._emptyStats();t.forEach(function(t){o[t.resource.toString()]=t.resource,r.lookupOrInsert(i._data,d.raw(e,t.resource),[]).push(t.marker),i._isStatRelevant(t.resource)&&i._updateStatsMarker(a,t.marker)}),this._updateStatsPlus(a)}this._onMarkerChanged.fire(r.values(o))},e.prototype.read=function(e){var t=this;void 0===e&&(e=Object.create(null));var n=[];return this._forEach(e.owner,e.resource,e.selector,e.take,function(e){return t._fromEntry(e,n)}),n},e.prototype._isStatRelevant=function(e){return e.scheme!==i.Schemas.inMemory},e.prototype._forEach=function(e,t,n,i,o){var s=n||d.selector(e,t),a=0;r.forEach(this._data,function(e,t){return s.test(e.key)&&(o(e,t),i>0&&a++>=i)?!1:void 0})},e.prototype._fromEntry=function(t,n){var i=d.fromValue(t.key);t.value.forEach(function(t){e._sanitize(t),n.push({owner:i.owner,resource:i.resource,code:t.code,message:t.message,source:t.source,severity:t.severity,startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn})})},e.prototype._computeStats=function(e){var t=0,n=0,i=0,o=0;if(e)for(var r=0;r<e.length;r++){var s=e[r];if(s.severity)switch(s.severity){case c["default"].Error:t++;break;case c["default"].Warning:n++;break;case c["default"].Info:i++;break;default:o++}else o++}return{errors:t,warnings:n,infos:i,unknwons:o}},e.prototype._emptyStats=function(){return{errors:0,warnings:0,infos:0,unknwons:0}},e.prototype._updateStatsPlus=function(e,t){t||(t=e,e=this._stats),e.errors+=t.errors,e.warnings+=t.warnings,e.infos+=t.infos,e.unknwons+=t.unknwons},e.prototype._updateStatsMinus=function(e,t){t||(t=e,e=this._stats),e.errors-=t.errors,e.warnings-=t.warnings,e.infos-=t.infos,e.unknwons-=t.unknwons},e.prototype._updateStatsMarker=function(e,t){switch(t.severity){case c["default"].Error:e.errors++;break;case c["default"].Warning:e.warnings++;break;case c["default"].Info:e.infos++;break;default:e.unknwons++}},e._sanitize=function(e){e.code=e.code||null,e.startLineNumber=e.startLineNumber>0?e.startLineNumber:1,e.startColumn=e.startColumn>0?e.startColumn:1,e.endLineNumber=e.endLineNumber>=e.startLineNumber?e.endLineNumber:e.startLineNumber,e.endColumn=e.endColumn>0?e.endColumn:e.startColumn},e}();t.MarkerService=h;var p=function(e){function t(t){e.call(this),this._proxy=t.getRemotable(f)}return __extends(t,e),t.prototype.changeOne=function(e,t,n){this._proxy.changeOne(e,t,n)},t.prototype.changeAll=function(e,t){this._proxy.changeAll(e,t)},t}(h);t.SecondaryMarkerService=p;var f=function(e){function t(n){e.call(this),n.registerRemotableInstance(t,this)}return __extends(t,e),t.prototype.changeOne=function(t,n,i){e.prototype.changeOne.call(this,t,n,i)},t.prototype.changeAll=function(t,n){e.prototype.changeAll.call(this,t,n)},t=__decorate([u.Remotable.MainContext("MainProcessMarkerService")],t)}(h);t.MainProcessMarkerService=f});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/storage/common/remotable.storage",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/platform/storage/common/storage"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){this._storageService=e}return e.prototype.getValue=function(e,t){var i=this._storageService.get(t,e?o.StorageScope.GLOBAL:o.StorageScope.WORKSPACE);if(!i)return n.TPromise.as(void 0);var r;try{return r=JSON.parse(i),n.TPromise.as(r)}catch(s){return n.TPromise.wrapError(s)}},e.prototype.setValue=function(e,t,i){var r;try{r=JSON.stringify(i),this._storageService.store(t,r,e?o.StorageScope.GLOBAL:o.StorageScope.WORKSPACE)}catch(s){return n.TPromise.wrapError(s)}},e=__decorate([i.Remotable.MainContext("MainThreadStorage"),__param(0,o.IStorageService)],e)}();t.MainThreadStorage=r;var s=function(){function e(e){this._proxy=e.getRemotable(r)}return e.prototype.getValue=function(e,t,n){return this._proxy.getValue(e,t).then(function(e){return e||n})},e.prototype.setValue=function(e,t,n){return this._proxy.setValue(e,t,n)},e}();t.ExtHostStorage=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};define("vs/platform/extensions/common/nativeExtensionService",["require","exports","vs/base/common/lifecycle","vs/base/common/paths","vs/base/common/severity","vs/base/common/winjs.base","vs/platform/extensions/common/abstractExtensionService","vs/platform/extensions/common/extensionsRegistry","vs/platform/storage/common/remotable.storage","vs/platform/thread/common/thread"],function(e,t,n,i,o,r,s,a,c,u){"use strict";function l(e){return(e.source?"["+e.source+"]: ":"")+e.message}function d(t){var n=null;try{n=e.__$__nodeRequire(t)}catch(i){return r.TPromise.wrapError(i)}return r.TPromise.as(n)}function h(e){var t={id:e.id,name:e.name,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null};for(var n in e.contributes){var i=e.contributes[n];if(i)switch(n){case"debuggers":var o=i.reduce(function(e,t){return e?e+","+t.type:t.type},"");t["contribution.debuggers"]=o;break;case"grammars":var r=i.reduce(function(e,t){return e?e+","+t.language:t.language},"");t["contribution.grammars"]=r;break;case"languages":var s=i.reduce(function(e,t){return e?e+","+t.id:t.id},"");t["contribution.languages"]=s;break;case"tmSnippets":var a=i.reduce(function(e,t){return e?e+","+t.languageId:t.languageId},"");t["contribution.tmSnippets"]=a;break;default:t["contribution."+n]=!0}}return t}var p=Object.hasOwnProperty,f=function(e){function t(){e.call(this,!0)}return __extends(t,e),t}(s.ActivatedExtension),m=function(e){function t(){e.call(this,!1)}return __extends(t,e),t}(s.ActivatedExtension),v=function(e){function t(n,i,o,r){var s=this;e.call(this,!1);var c=n.getConfiguration();this._isDev=!c.env.isBuilt||!!c.env.extensionDevelopmentPath,this._messageService=o,i.registerRemotableInstance(t,this),this._threadService=i,this._telemetryService=r,this._proxy=this._threadService.getRemotable(b),this._extensionsStatus={},a.ExtensionsRegistry.handleExtensionPoints(function(e){return s._handleMessage(e)})}return __extends(t,e),t.prototype._handleMessage=function(e){this._showMessage(e.type,l(e)),this._extensionsStatus[e.source]||(this._extensionsStatus[e.source]={messages:[]}),this._extensionsStatus[e.source].messages.push(e)},t.prototype.$localShowMessage=function(e,t){var n=!1;if(e!==o["default"].Error&&e!==o["default"].Warning||this._isDev&&(this._messageService.show(e,t),n=!0),!n)switch(e){case o["default"].Error:console.error(t);break;case o["default"].Warning:console.warn(t);break;default:console.log(t)}},t.prototype.getExtensionsStatus=function(){return this._extensionsStatus},t.prototype._showMessage=function(e,t){this._proxy.$localShowMessage(e,t),this.$localShowMessage(e,t)},t.prototype._createFailedExtension=function(){return new f},t.prototype._actualActivateExtension=function(e){var t=this;return this._proxy.$activateExtension(e).then(function(n){return t._activatedExtensions[e.id]})},t.prototype.$onExtensionHostReady=function(e,t){var n=this;a.ExtensionsRegistry.registerExtensions(e),t.forEach(function(e){return n._handleMessage(e)}),this._triggerOnReady()},t.prototype.$onExtensionActivated=function(e){this._activatedExtensions[e]=new m},t.prototype.$onExtensionActivationFailed=function(e){this._activatedExtensions[e]=new f},t=__decorate([u.Remotable.MainContext("MainProcessExtensionService")],t)}(s.AbstractExtensionService);t.MainProcessExtensionService=v;var g=function(e){function t(t,n,i,o){e.call(this,t),this.module=n,this.exports=i,this.subscriptions=o}return __extends(t,e),t}(s.ActivatedExtension);t.ExtHostExtension=g;var y=function(e){function t(){e.call(this,!1,{activate:void 0,deactivate:void 0},void 0,[])}return __extends(t,e),t}(g);t.ExtHostEmptyExtension=y;var _=function(){function e(e,t,n){var i=this;this._id=e,this._shared=t,this._storage=n,this._init=this._storage.getValue(this._shared,this._id,Object.create(null)).then(function(e){return i._value=e,i})}return Object.defineProperty(e.prototype,"whenReady",{get:function(){return this._init},enumerable:!0,configurable:!0}),e.prototype.get=function(e,t){var n=this._value[e];return"undefined"==typeof n&&(n=t),n},e.prototype.update=function(e,t){return this._value[e]=t,this._storage.setValue(this._shared,this._id,this._value).then(function(){return!0})},e}(),b=function(e){function t(n,i){e.call(this,!0),n.registerRemotableInstance(t,this),this._threadService=n,this._storage=new c.ExtHostStorage(n),this._proxy=this._threadService.getRemotable(v),this._telemetryService=i}return __extends(t,e),t.prototype.$localShowMessage=function(e,t){switch(e){case o["default"].Error:console.error(t);break;case o["default"].Warning:console.warn(t);break;default:console.log(t)}},t.prototype.get=function(e){if(!p.call(this._activatedExtensions,e))throw new Error("Extension `"+e+"` is not known or not activated");return this._activatedExtensions[e].exports},t.prototype.deactivate=function(e){var t=this._activatedExtensions[e];if(t){try{"function"==typeof t.module.deactivate&&t.module.deactivate()}catch(i){}try{n.disposeAll(t.subscriptions)}catch(i){}}},t.prototype.registrationDone=function(e){this._triggerOnReady(),this._proxy.$onExtensionHostReady(a.ExtensionsRegistry.getAllExtensionDescriptions(),e)},t.prototype._showMessage=function(e,t){this._proxy.$localShowMessage(e,t),this.$localShowMessage(e,t)},t.prototype._createFailedExtension=function(){return new g(!0,{activate:void 0,deactivate:void 0},void 0,[])},t.prototype._loadExtensionContext=function(e){var t=new _(e.id,!0,this._storage),n=new _(e.id,!1,this._storage);return r.TPromise.join([t.whenReady,n.whenReady]).then(function(){return Object.freeze({globalState:t,workspaceState:n,subscriptions:[],get extensionPath(){return e.extensionFolderPath},asAbsolutePath:function(t){return i.normalize(i.join(e.extensionFolderPath,t),!0)}})})},t.prototype._actualActivateExtension=function(e){var t=this;return this._doActualActivateExtension(e).then(function(n){return t._proxy.$onExtensionActivated(e.id),n},function(n){throw t._proxy.$onExtensionActivationFailed(e.id),n})},t.prototype._doActualActivateExtension=function(e){var n=this,i=h(e);return this._telemetryService.publicLog("activatePlugin",i),e.main?d(e.main).then(function(i){return n._loadExtensionContext(e).then(function(e){return t._callActivate(i,e)})}):r.TPromise.as(new y)},t._callActivate=function(e,t){return e=e||{activate:void 0,deactivate:void 0},this._callActivateOptional(e,t).then(function(n){return new g(!1,e,n,t.subscriptions)})},t._callActivateOptional=function(e,t){if("function"!=typeof e.activate)return r.TPromise.as(e);try{return r.TPromise.as(e.activate.apply(global,[t]))}catch(n){return r.TPromise.wrapError(n)}},t.prototype.$activateExtension=function(e){return this._activateExtension(e)},t=__decorate([u.Remotable.ExtHostContext("ExtHostExtensionService")],t)}(s.AbstractExtensionService);t.ExtHostExtensionService=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/common/abstractRemoteTelemetryService",["require","exports","vs/platform/telemetry/common/abstractTelemetryService","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){this._telemetryService=e}return e.prototype._handleRemoteTelemetryEvent=function(e,t){this._telemetryService.publicLog(e,t)},e.prototype.getTelemetryInfo=function(){return this._telemetryService.getTelemetryInfo()},e=__decorate([o.Remotable.MainContext("RemoteTelemetryServiceHelper"),__param(0,i.ITelemetryService)],e)}();t.RemoteTelemetryServiceHelper=r;var s=function(e){function t(t){e.call(this),this._proxy=t.getRemotable(r)}return __extends(t,e),t.prototype.getTelemetryInfo=function(){return this._proxy.getTelemetryInfo()},t.prototype.addTelemetryAppender=function(e){throw new Error("Telemetry appenders are not supported in this execution envirnoment")},t.prototype.handleEvent=function(e,t){this._proxy._handleRemoteTelemetryEvent(e,t)},t}(n.AbstractTelemetryService);t.AbstractRemoteTelemetryService=s}),define("vs/platform/thread/common/threadService",["require","exports","vs/base/common/winjs.base","./thread"],function(e,t,n,i){"use strict";function o(e,t){for(var n in e)if(e[n]===t)return n;throw new Error("Member not found in prototype")}function r(e){var n=e[t.THREAD_SERVICE_PROPERTY_NAME];if(!n)throw new Error("Objects that use thread attributes must be instantiated with the thread service");return n}function s(e,t,s,a){void 0===a&&(a=i.ThreadAffinity.None);var c,u=o(e.prototype,t);"function"==typeof s?c=s:"undefined"!=typeof s&&(a=s),e.prototype[u]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];if(c){var o=this,s=c.call(o);return n.TPromise.is(s)||(s=n.TPromise.as(s)),s.then(function(){return r(o).OneWorker(o,u,t,e,a)})}return r(this).OneWorker(this,u,t,e,a)}}function a(e,t){var n=o(e.prototype,t);e.prototype[n]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];return r(this).AllWorkers(this,n,t,e)}}t.THREAD_SERVICE_PROPERTY_NAME="__$$__threadService",t.OneWorkerAttr=s,t.AllWorkersAttr=a}),define("vs/platform/thread/common/abstractThreadService",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o,r){"use strict";function s(e,t,n){var i={$__IS_REMOTE_OBJ:!0};for(var o in n.prototype)"function"==typeof n.prototype[o]&&(i[o]=a(e,t,o));return i}function a(e,t,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return e.callOnRemote(t,n,i)}}var c=function(){function e(e){this.isInMainThread=e,this._boundObjects={},this._pendingObjects=[],this._localObjMap=Object.create(null),this._proxyObjMap=Object.create(null)}return e.prototype.setInstantiationService=function(e){this._instantiationService=e},e.prototype.createInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this._doCreateInstance(e)},e.prototype._doCreateInstance=function(e){var t=this,i=this._instantiationService.createInstance.apply(this._instantiationService,e);if(n.TPromise.is(i)){var o;return o=i.then(function(e){if(e.asyncCtor){var t=e.asyncCtor();if(n.TPromise.is(t))return t.then(function(){return e})}return e}),this._pendingObjects.push(o),o.then(function(e){for(var n=t._finishInstance(e),i=0;i<t._pendingObjects.length;i++)if(t._pendingObjects[i]===o){t._pendingObjects.splice(i,1);break}return n})}return this._finishInstance(i)},e.prototype._finishInstance=function(e){return e[o.THREAD_SERVICE_PROPERTY_NAME]=this,this._boundObjects[e.getId()]=e,e.creationDone&&e.creationDone(),e},e.prototype.handle=function(e,t,n){if(!this._localObjMap[e])throw new Error("Unknown actor "+e);var i=this._localObjMap[e],o=i[t];if("function"!=typeof o)throw new Error("Unknown method "+t+" on actor "+e);return o.apply(i,n)},e.prototype._getOrCreateProxyInstance=function(e,t,n){if(this._proxyObjMap[t])return this._proxyObjMap[t];var i=s(e,t,n.ctor);return this._proxyObjMap[t]=i,i},e.prototype._registerLocalInstance=function(e,t){this._localObjMap[e]=t},e.prototype._getOrCreateLocalInstance=function(e,t){if(this._localObjMap[e])return this._localObjMap[e];var n=this._instantiationService.createInstance(t);return this._registerLocalInstance(e,n),n},e.prototype.getRemotable=function(e){var t=i.Remotable.getId(e);if(!t)throw new Error("Unknown Remotable: <<"+t+">>");var n=r.createSyncDescriptor(e);if(i.Remotable.Registry.MainContext[t])return this._registerAndInstantiateMainProcessActor(t,n);if(i.Remotable.Registry.ExtHostContext[t])return this._registerAndInstantiateExtHostActor(t,n);if(i.Remotable.Registry.WorkerContext[t])return this._registerAndInstantiateWorkerActor(t,n,i.Remotable.Registry.WorkerContext[t].affinity);throw new Error("Unknown Remotable: <<"+t+">>")},e.prototype.registerRemotableInstance=function(e,t){var n=i.Remotable.getId(e);if(!n)throw new Error("Unknown Remotable: <<"+n+">>");if(i.Remotable.Registry.MainContext[n])return this._registerMainProcessActor(n,t);if(i.Remotable.Registry.ExtHostContext[n])return this._registerExtHostActor(n,t);if(i.Remotable.Registry.WorkerContext[n])return this._registerWorkerActor(n,t);throw new Error("Unknown Remotable: <<"+n+">>")},e}();t.AbstractThreadService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/thread/common/mainThreadService",["require","exports","vs/base/common/winjs.base","vs/base/common/worker/workerClient","vs/platform/thread/common/abstractThreadService","vs/base/common/flags","vs/base/common/platform","vs/base/common/errors","vs/base/common/timer","vs/platform/thread/common/thread","vs/base/worker/defaultWorkerFactory"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(e){function t(i,o,r){var s=this;if(e.call(this,!0),this.serviceId=u.IThreadService,this._contextService=i,this._workerModuleId=o,this._defaultWorkerCount=r,this._workerFactory=new l.DefaultWorkerFactory,!this.isInMainThread)throw new Error("Incorrect Service usage: this service must be used only in the main thread");this._workerPool=[],this._affinityScrambler={},this._listeners=[],this._workersCreatedPromise=new n.TPromise(function(e,t,n){s._triggerWorkersCreatedPromise=e},function(){}),n.TPromise.timeout(t.MAXIMUM_WORKER_CREATION_DELAY).then(function(){return s.ensureWorkers()})}return __extends(t,e),t.prototype.ensureWorkers=function(){if(this._triggerWorkersCreatedPromise){var e=r.workersCount(this._defaultWorkerCount);s.hasWebWorkerSupport()||(e=Math.min(e,1));for(var t=0;e>t;t++)this._createWorker();var n=this._triggerWorkersCreatedPromise;this._triggerWorkersCreatedPromise=null,n(null)}},t.prototype.addStatusListener=function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return;this._listeners.push(e)},t.prototype.removeStatusListener=function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)},t.prototype._afterWorkers=function(){var e=this,t=!1;return new n.TPromise(function(n,i,o){e._workersCreatedPromise.then(function(){t||n(null)},i,o)},function(){t=!0})},t.prototype._createWorker=function(){this._workerPool.push(this._doCreateWorker())},t.prototype._shortName=function(e,t){return e.substring(e.length-14)+"."+t.substr(0,14)},t.prototype._doCreateWorker=function(){var e=this,t=new i.WorkerClient(this._workerFactory,this._workerModuleId,function(t){return"threadService"===t.type?e._shortName(t.payload[0],t.payload[1]):t.type});return t.getRemoteCom().setManyHandler(this),t.onModuleLoaded=t.request("initialize",{contextService:{workspace:this._contextService.getWorkspace(),
configuration:this._contextService.getConfiguration(),options:this._contextService.getOptions()}}),t},t.prototype._getWorkerIndex=function(e,t){if(t===u.ThreadAffinity.None){for(var n=[0],i=this._workerPool[0].getQueueSize(),o=1;o<this._workerPool.length;o++){var r=this._workerPool[o].getQueueSize();i>r?(i=r,n=[o]):r===i&&n.push(o)}return n[Math.floor(Math.random()*n.length)]}var s=0;return this._affinityScrambler.hasOwnProperty(e.getId())?s=this._affinityScrambler[e.getId()]:(s=Math.floor(Math.random()*this._workerPool.length),this._affinityScrambler[e.getId()]=s),(s+t)%this._workerPool.length},t.prototype.OneWorker=function(e,t,n,i,o){var r=this;return this._afterWorkers().then(function(){if(0===r._workerPool.length)throw new Error("Cannot fulfill request...");var n=r._getWorkerIndex(e,o);return r._remoteCall(r._workerPool[n],e,t,i)})},t.prototype.AllWorkers=function(e,t,i,o){var r=this;return this._afterWorkers().then(function(){return n.TPromise.join(r._workerPool.map(function(n){return r._remoteCall(n,e,t,o)}))})},t.prototype._remoteCall=function(e,t,i,o){var r=this,s=t.getId();if(!s)throw new Error("Synchronizable Objects must have an identifier");var a=c.start(c.Topic.LANGUAGES,this._shortName(s,i)),u=function(){a.stop(),r._pingListenersIfNecessary()},l=n.decoratePromise(e.request("threadService",[s,i,o]),u,u);return this._pingListenersIfNecessary(),l},t.prototype._pingListenersIfNecessary=function(){if(this._listeners.length>0){var e=this._buildStatus(),t=this._listeners.slice(0);try{for(var n=0;n<t.length;n++)t[n].onThreadServiceStatus(e)}catch(i){a.onUnexpectedError(i)}}},t.prototype._buildStatus=function(){var e=this._workerPool.map(function(e){return{queueSize:e.getQueueSize()}});return{workers:e}},t.prototype._registerAndInstantiateMainProcessActor=function(e,t){return this._getOrCreateLocalInstance(e,t)},t.prototype._registerMainProcessActor=function(e,t){this._registerLocalInstance(e,t)},t.prototype._registerAndInstantiateExtHostActor=function(e,t){throw new Error("Not supported in this runtime context: Cannot communicate to non-existant Extension Host!")},t.prototype._registerExtHostActor=function(e,t){throw new Error("Not supported in this runtime context!")},t.prototype._registerAndInstantiateWorkerActor=function(e,t,n){var i=this._createWorkerProxyHelper(n);return this._getOrCreateProxyInstance(i,e,t)},t.prototype._registerWorkerActor=function(e,t){throw new Error("Not supported in this runtime context!")},t.prototype._createWorkerProxyHelper=function(e){var t=this;return{callOnRemote:function(n,i,o){return t._callOnWorker(e,n,i,o)}}},t.prototype._callOnWorker=function(e,t,i,o){var r=this;return e===u.ThreadAffinity.None?n.TPromise.as(null):this._afterWorkers().then(function(){if(e===u.ThreadAffinity.All){var s=r._workerPool.map(function(e){return e.getRemoteCom()}).map(function(e){return e.callOnRemote(t,i,o)});return n.TPromise.join(s)}var a=e%r._workerPool.length,c=r._workerPool[a];return c.getRemoteCom().callOnRemote(t,i,o)})},t.MAXIMUM_WORKER_CREATION_DELAY=500,t}(o.AbstractThreadService);t.MainThreadService=d}),define("vs/platform/workspace/common/workspace",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IWorkspaceContextService=n.createDecorator("contextService")}),define("vs/editor/common/languages.common",["require","exports","vs/base/common/assert","vs/base/common/async","vs/base/common/callbackList","vs/base/common/cancellation","vs/base/common/collections","vs/base/common/event","vs/base/common/events","vs/base/common/lifecycle","vs/base/common/paths","vs/base/common/uri","vs/platform/platform","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/files/common/files","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/platform/thread/common/threadService","vs/editor/common/editorCommon","vs/editor/common/modes","vs/editor/common/modes/abstractMode","vs/editor/common/modes/abstractState","vs/editor/common/modes/monarch/monarch","vs/editor/common/modes/monarch/monarchCompile","vs/editor/common/modes/supports/declarationSupport","vs/editor/common/modes/supports/parameterHintsSupport","vs/editor/common/modes/supports/referenceSupport","vs/editor/common/modes/supports/richEditSupport","vs/editor/common/modes/supports/suggestSupport","vs/editor/common/modes/supports/tokenizationSupport","vs/editor/common/services/modelService","vs/editor/common/services/modeService"],function(e,t){"use strict"});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["require","exports","vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget","vs/base/common/collections","vs/base/common/errors","vs/base/common/labels","vs/base/common/lifecycle","vs/base/common/network","vs/base/common/strings","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/dom","vs/base/browser/ui/countBadge/countBadge","vs/base/browser/ui/filelabel/fileLabel","vs/base/browser/ui/leftRightWidget/leftRightWidget","vs/base/parts/tree/browser/treeDefaults","vs/base/parts/tree/browser/treeImpl","vs/platform/workspace/common/workspace","vs/editor/common/config/defaultConfig","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/model/model","vs/editor/browser/widget/embeddedCodeEditorWidget","vs/editor/contrib/zoneWidget/browser/peekViewWidget","./referenceSearchModel","vs/css!./referenceSearchWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C){"use strict";var T=function(){function e(e,t){var n=this;this.editor=e,this.model=t,this._decorationSet=i.createStringDictionary(),this._decorationIgnoreSet=i.createStringDictionary(),this.callOnDispose=[],this.callOnModelChange=[],this.callOnDispose.push(this.editor.addListener(b.EventType.ModelChanged,function(){return n.onModelChanged()})),this.onModelChanged()}return e.prototype.dispose=function(){this.callOnModelChange=s.cAll(this.callOnModelChange),this.callOnDispose=s.cAll(this.callOnDispose),this.removeDecorations()},e.prototype.onModelChanged=function(){this.removeDecorations(),this.callOnModelChange=s.cAll(this.callOnModelChange);var e=this.editor.getModel();if(e)for(var t=0,n=this.model.children.length;n>t;t++)if(this.model.children[t].resource.toString()===e.getAssociatedResource().toString())return void this.addDecorations(this.model.children[t])},e.prototype.addDecorations=function(t){var n=this;this.callOnModelChange.push(this.editor.getModel().addListener(b.EventType.ModelDecorationsChanged,function(e){return n.onDecorationChanged(e)})),this.editor.getModel().changeDecorations(function(i){for(var o=[],r=[],s=0,a=t.children.length;a>s;s++){var c=t.children[s];n._decorationIgnoreSet[c.id]||(o.push({range:c.range,options:e.DecorationOptions}),r.push(s))}for(var u=i.deltaDecorations([],o),l=0;l<u.length;l++)n._decorationSet[u[l]]=t.children[r[l]]})},e.prototype.onDecorationChanged=function(e){for(var t=this,n=e.addedOrChangedDecorations,o=[],r=0,s=n.length;s>r;r++){var a=i.lookup(this._decorationSet,n[r].id);if(a){var c=n[r].range,u=!1;if(!_.Range.equalsRange(c,a.range)){if(_.Range.spansMultipleLines(c))u=!0;else{var l=a.range.endColumn-a.range.startColumn,d=c.endColumn-c.startColumn;l!==d&&(u=!0)}u?(this._decorationIgnoreSet[a.id]=a,o.push(n[r].id)):a.range=c}}}this.editor.changeDecorations(function(e){for(var n=0,i=o.length;i>n;n++)delete t._decorationSet[o[n]];e.deltaDecorations(o,[])})},e.prototype.removeDecorations=function(){var e=Object.keys(this._decorationSet);e.length>0&&this.editor.changeDecorations(function(t){t.deltaDecorations(e,[])}),this._decorationSet={}},e.DecorationOptions={stickiness:b.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"reference-decoration"},e}(),k=function(){function e(){}return e.prototype.getId=function(e,t){return t instanceof C.ReferencesModel?"root":t instanceof C.FileReferences?t.id:t instanceof C.OneReference?t.id:void 0},e.prototype.hasChildren=function(e,t){return t instanceof C.FileReferences||t instanceof C.ReferencesModel},e.prototype.getChildren=function(e,t){return t instanceof C.ReferencesModel?u.TPromise.as(t.children):t instanceof C.FileReferences?t.resolve().then(function(e){return e.children}):u.TPromise.as([])},e.prototype.getParent=function(e,t){var n=null;return t instanceof C.FileReferences?n=t.parent:t instanceof C.OneReference&&(n=t.parent),u.TPromise.as(n)},e}(),x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onMouseDown=function(n,i,o){if(o.leftButton){if(i instanceof C.FileReferences)return o.preventDefault(),o.stopPropagation(),this.expandCollapse(n,i);var r=e.prototype.onClick.call(this,n,i,o);return o.ctrlKey||o.metaKey?n.emit(t.Events.OPEN_TO_SIDE,i):2===o.detail?n.emit(t.Events.SELECTED,i):n.emit(t.Events.FOCUSED,i),r}return!1},t.prototype.onClick=function(t,n,i){return i.leftButton?!1:e.prototype.onClick.call(this,t,n,i)},t.prototype.expandCollapse=function(e,t){return e.isExpanded(t)?e.collapse(t).done(null,o.onUnexpectedError):e.expand(t).done(null,o.onUnexpectedError),!0},t.prototype.onEscape=function(e,t){return!1},t.prototype.onEnter=function(n,i){var o=n.getFocus();if(o instanceof C.FileReferences)return this.expandCollapse(n,o);var r=e.prototype.onEnter.call(this,n,i);return i.ctrlKey||i.metaKey?n.emit(t.Events.OPEN_TO_SIDE,o):n.emit(t.Events.SELECTED,o),r},t.prototype.onUp=function(t,n){return e.prototype.onUp.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onPageUp=function(t,n){return e.prototype.onPageUp.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onLeft=function(t,n){return e.prototype.onLeft.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onDown=function(t,n){return e.prototype.onDown.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onPageDown=function(t,n){return e.prototype.onPageDown.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onRight=function(t,n){return e.prototype.onRight.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.fakeFocus=function(e,n){var i=e.getFocus();e.setSelection([i]),e.emit(t.Events.FOCUSED,i)},t.Events={FOCUSED:"events/custom/focused",SELECTED:"events/custom/selected",OPEN_TO_SIDE:"events/custom/opentoside"},t}(m.DefaultController),I=function(e){function t(t,n){e.call(this),this.editor=t,this._contextService=n}return __extends(t,e),t.prototype.getHeight=function(e,t){return 1.2*this.editor.getConfiguration().lineHeight},t.prototype.render=function(e,t,i){var o=this;if(d.clearNode(i),t instanceof C.FileReferences){var r=t,s=l.$(".reference-file");new f.LeftRightWidget(s,function(e){var t=r.resource;return new p.FileLabel(e,t,o._contextService),null},function(e){var t=r.children.length;return new h.CountBadge(e,t,t>1?n.localize(0,null,t):n.localize(1,null,t))}),s.appendTo(i)}else if(t instanceof C.OneReference){var a=t,u=l.$(".reference"),m=a.parent.preview.preview(a.range);u.innerHtml(c.format('<span>{0}</span><span class="referenceMatch">{1}</span><span>{2}</span>',c.escape(m.before),c.escape(m.inside),c.escape(m.after))).appendTo(i)}return null},t=__decorate([__param(1,g.IWorkspaceContextService)],t)}(m.LegacyRenderer),D=function(e){function t(n,i,o,r,s){e.call(this,s,i,t.INNER_EDITOR_CONTEXT_KEY,{frameColor:"#007ACC",showFrame:!1,showArrow:!0}),this.editorService=n,this.contextService=o,this.instantiationService=r.createChild({peekViewService:this}),this.callOnModel=[],this.tree=null,this.treeContainer=null,this.preview=null,this.previewContainer=null,this.previewDecorations=[],this.lastHeight=null,this.create()}return __extends(t,e),t.prototype._onTitleClick=function(e){if(this.preview&&this.preview.getModel()){var n=this.preview.getModel(),i=this.preview.getPosition().lineNumber,o=new _.Range(i,1,i,n.getLineMaxColumn(i));this.emit(t.Events.EditorDoubleClick,{reference:this.getFocusedReference(),range:o,originalEvent:e})}},t.prototype._fillBody=function(e){var t=this,i=l.$(e);i.addClass("reference-zone-widget"),i.div({"class":"messages"},function(e){t.messageContainer=e.hide()}),i.div({"class":"preview inline"},function(e){var i={scrollBeyondLastLine:!1,scrollbar:y.DefaultConfig.editor.scrollbar,overviewRulerLanes:2};t.preview=t.instantiationService.createInstance(E.EmbeddedCodeEditorWidget,e.getHTMLElement(),i,t.editor),t.previewContainer=e.hide(),t.previewNotAvailableMessage=new S.Model(n.localize(2,null),S.Model.DEFAULT_CREATION_OPTIONS,null)}),i.div({"class":"ref-tree inline"},function(e){var i={dataSource:t.instantiationService.createInstance(k),renderer:t.instantiationService.createInstance(I,t.editor),controller:new x},o={allowHorizontalScroll:!1,twistiePixels:20,ariaLabel:n.localize(3,null)};t.tree=new v.Tree(e.getHTMLElement(),i,o),t.treeContainer=e.hide()})},t.prototype._doLayoutBody=function(t){e.prototype._doLayoutBody.call(this,t);var n=t+"px";n!==this.lastHeight&&(this.treeContainer.style({height:n}),this.previewContainer.style({height:n}),this.tree.layout(t),this.preview.layout(),this.lastHeight=n)},t.prototype.onWidth=function(e){this.preview.layout()},t.prototype.setModel=function(e){this.callOnModel=s.disposeAll(this.callOnModel),this.model=e,this.model&&this._onNewModel()},t.prototype.showMessage=function(e){this.setTitle(""),this.messageContainer.innerHtml(e).show()},t.prototype._onNewModel=function(){var e=this;this.messageContainer.hide(),this.decorationsManager=new T(this.preview,this.model),this.callOnModel.push(this.decorationsManager),this.callOnModel.push(this.model.addListener2(C.EventType.OnReferenceRangeChanged,function(t){e.tree.refresh(t)})),this.callOnModel.push(this.tree.addListener2(x.Events.FOCUSED,function(t){t instanceof C.OneReference&&e.showReferencePreview(t)})),this.callOnModel.push(this.tree.addListener2(x.Events.SELECTED,function(t){t instanceof C.OneReference&&(e.showReferencePreview(t),e.model.currentReference=t)})),this.callOnModel.push(this.tree.addListener2(x.Events.OPEN_TO_SIDE,function(t){t instanceof C.OneReference&&e.editorService.openEditor({resource:t.resource,options:{selection:t.range}},!0)}));var n=1===this.model.children.length?this.model.children[0]:this.model;this.tree.setInput(n).then(function(){e.tree.setSelection([e.model.currentReference])}).done(null,o.onUnexpectedError),this.callOnModel.push(this.preview.addListener2(b.EventType.MouseDown,function(n){2===n.event.detail&&e.emit(t.Events.EditorDoubleClick,{reference:e.getFocusedReference(),range:n.target.range,originalEvent:n.event})})),d.addClass(this.container,"results-loaded"),this.treeContainer.show(),this.previewContainer.show(),this.preview.layout(),this.tree.layout(),this.focus(),this.showReferencePreview(this.model.nextReference(this.model.currentReference))},t.prototype.getFocusedReference=function(){var e=this.tree.getFocus();if(e instanceof C.OneReference)return e.resource;if(e instanceof C.FileReferences){var t=e;if(t.children.length>0)return t.children[0].resource}return null},t.prototype.focus=function(){this.tree.DOMFocus()},t.prototype.showReferencePreview=function(e){var t=this;this.editorService.resolveEditorModel({resource:e.resource}).done(function(i){if(i){t.preview.setModel(i.textEditorModel);var o=_.Range.lift(e.range).collapseToStart();t.preview.setSelection(o),t.preview.revealRangeInCenter(o)}else t.preview.setModel(t.previewNotAvailableMessage);e.resource.scheme!==a.Schemas.inMemory?t.setTitle(e.name,r.getPathLabel(e.directory,t.contextService)):t.setTitle(n.localize(4,null))},o.onUnexpectedError),this.tree.reveal(e).then(function(){t.tree.setSelection([e]),t.tree.setFocus(e)}).done(null,o.onUnexpectedError)},t.prototype.dispose=function(){this.setModel(null),s.disposeAll([this.preview,this.previewNotAvailableMessage,this.tree]),e.prototype.dispose.call(this)},t.INNER_EDITOR_CONTEXT_KEY="inReferenceSearchEditor",t.Events={EditorDoubleClick:"editorDoubleClick"},t}(w.PeekViewWidget);t.ReferenceWidget=D});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/referenceSearch/browser/referenceSearch",["require","exports","vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/base/common/arrays","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/lifecycle","vs/base/common/severity","vs/base/common/uri","vs/base/common/winjs.base","vs/platform/editor/common/editor","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/zoneWidget/browser/peekViewWidget","../common/referenceSearch","./referenceSearchModel","./referenceSearchWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x){"use strict";function I(e){return e.length>1?n.localize(3,null,e.length):void 0}var D=function(){function e(e,t,n,i,o,r,s,a){this._startTime=-1,this.requestIdPool=0,this.callOnClear=[],this.editorService=t,this.telemetryService=n,this.messageService=i,this.instantiationService=o,this.peekViewService=r,this.contextService=s,this.keybindingService=a,this.modelRevealing=!1,this.editor=e,this._referenceSearchVisible=a.createKey(M,!1)}return e.getController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.widget&&(this.widget.dispose(),this.widget=null),this.editor=null},e.prototype.isInPeekView=function(){return this.peekViewService&&this.peekViewService.isActive},e.prototype.closeReferenceSearch=function(){this.clear()},e.prototype.processRequest=function(e,t,r){var s=this,c=this.widget?this.widget.position:null,u=this.clear();if(u&&c&&e.containsPosition(c))return null;this._referenceSearchVisible.set(!0),this.callOnClear.push(this.editor.addListener(S.EventType.ModelModeChanged,function(){s.clear()})),this.callOnClear.push(this.editor.addListener(S.EventType.ModelChanged,function(){s.modelRevealing||s.clear()})),this.widget=new x.ReferenceWidget(this.editorService,this.keybindingService,this.contextService,this.instantiationService,this.editor),this.widget.setTitle(n.localize(0,null)),this.widget.show(e,18),this.callOnClear.push(this.widget.addListener(C.Events.Closed,function(){s.widget=null,s.clear()})),this.callOnClear.push(this.widget.addListener(x.ReferenceWidget.Events.EditorDoubleClick,function(e){e.reference&&(s.editorService.openEditor({resource:e.reference,options:{selection:e.range}},e.originalEvent.ctrlKey||e.originalEvent.metaKey).done(null,o.onUnexpectedError),e.originalEvent.ctrlKey||e.originalEvent.metaKey||s.clear())}));var l=++this.requestIdPool,d=this.editor.getModel(),h=this.telemetryService.start("findReferences",{mode:d.getMode().getId()});return t.then(function(t){if(l!==s.requestIdPool)return void h.stop();if(i.isFalsyOrEmpty(t))return s.widget.showMessage(n.localize(1,null)),void h.stop();s.model=new k.ReferencesModel(t,s.editorService),s.model.currentReference=s.model.findReference(d.getAssociatedResource(),e.getStartPosition());var a=s.model.addListener(k.EventType.CurrentReferenceChanged,function(){s.modelRevealing=!0,s.editorService.openEditor({resource:s.model.currentReference.resource,options:{selection:s.model.currentReference.range}}).done(function(e){return e&&e.getControl()===s.editor?(s.modelRevealing=!1,s.widget.show(s.model.currentReference.range,18),void s.widget.focus()):void s.clear()},function(e){s.modelRevealing=!1,o.onUnexpectedError(e)})});s.callOnClear.push(a),s._startTime=Date.now(),s.widget&&(s.widget.setMetaTitle(r(t)),s.widget.setModel(s.model)),h.stop()},function(e){s.messageService.show(a["default"].Error,e),h.stop()}),this.widget},e.prototype.clear=function(){-1!==this._startTime&&(this.telemetryService.publicLog("zoneWidgetShown",{mode:"reference search",elapsedTime:Date.now()-this._startTime}),this._startTime=-1),this._referenceSearchVisible.reset(),s.cAll(this.callOnClear),this.model=null;var e=!1;return this.widget&&(this.widget.dispose(),this.widget=null,e=!0),this.editor.focus(),this.requestIdPool+=1,e},e.ID="editor.contrib.findReferencesController",e=__decorate([__param(1,l.IEditorService),__param(2,m.ITelemetryService),__param(3,f.IMessageService),__param(4,d.IInstantiationService),__param(5,C.IPeekViewService),__param(6,v.IWorkspaceContextService),__param(7,h.IKeybindingService)],e)}();t.FindReferencesController=D;var A=function(e){function t(t,i,o,r){e.call(this,t,i,b.Behaviour.WidgetFocus|b.Behaviour.ShowInContextMenu|b.Behaviour.UpdateOnCursorPositionChange),this.label=n.localize(2,null),this.peekViewService=o,this.peekViewService&&r.createKey(this.peekViewService.contextKey,!0)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/4_references"},t.prototype.isSupported=function(){return T.ReferenceRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(this.peekViewService&&this.peekViewService.isActive)return!1;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber),i=t.column-1;return T.ReferenceRegistry.all(e).some(function(e){return e.canFindReferences(n,i)})},t.prototype.run=function(){var e=this.editor.getSelection(),t=this.editor.getModel(),n=T.findReferences(t,e.getStartPosition()),i=D.getController(this.editor);return u.TPromise.as(i.processRequest(e,n,I)).then(function(){return!0})},t.ID="editor.action.referenceSearch.trigger",t=__decorate([__param(2,C.IPeekViewService),__param(3,h.IKeybindingService)],t)}(_.EditorAction);t.ReferenceAction=A;var L=function(e,t){var n=t[0],i=t[1];if(!(n instanceof c["default"]))throw new Error("illegal argument, uri");if(!i)throw new Error("illega argument, position");return e.get(l.IEditorService).openEditor({resource:n}).then(function(e){var t=e.getControl();if(t&&"function"==typeof t.getEditorType){var n=T.findReferences(t.getModel(),i),o=D.getController(t),r=new y.Range(i.lineNumber,i.column,i.lineNumber,i.column);return u.TPromise.as(o.processRequest(r,n,I))}})},O=function(e,t){if(!(t[0]instanceof c["default"]))throw new Error("illegal argument, uri expected");return e.get(l.IEditorService).openEditor({resource:t[0]}).then(function(e){var n=e.getControl();if(n&&"function"==typeof n.getEditorType){var i=D.getController(n),o=g.Position.asEmptyRange(t[1]);return u.TPromise.as(i.processRequest(y.Range.lift(o),u.TPromise.as(t[2]),I)).then(function(){return!0})}})},M="referenceSearchVisible";w.EditorBrowserRegistry.registerEditorContribution(D),E.CommonEditorRegistry.registerEditorAction(new E.EditorActionDescriptor(A,A.ID,n.localize(4,null),{context:E.ContextKey.EditorTextFocus,primary:r.KeyMod.Shift|r.KeyCode.F12})),p.KeybindingsRegistry.registerCommandDesc({id:"editor.action.findReferences",handler:L,weight:E.CommonEditorRegistry.commandWeight(50),context:null,primary:void 0}),p.KeybindingsRegistry.registerCommandDesc({id:"editor.action.showReferences",handler:O,weight:E.CommonEditorRegistry.commandWeight(50),context:null,primary:void 0,description:{description:"Show references at a position in a file",args:[{name:"uri",description:"The text document in which to show references",constraint:c["default"]},{name:"position",description:"The position at which to show",constraint:g.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array}]}}),E.CommonEditorRegistry.registerEditorCommand("closeReferenceSearch",E.CommonEditorRegistry.commandWeight(50),{primary:r.KeyCode.Escape,secondary:[r.KeyMod.Shift|r.KeyCode.Escape]},!1,M,function(e,t,n){var i=C.getOuterEditor(e,n);if(i){var o=D.getController(i);o.closeReferenceSearch()}}),E.CommonEditorRegistry.registerEditorCommand("closeReferenceSearchEditor",E.CommonEditorRegistry.commandWeight(-101),{primary:r.KeyCode.Escape,secondary:[r.KeyMod.Shift|r.KeyCode.Escape]},!1,x.ReferenceWidget.INNER_EDITOR_CONTEXT_KEY,function(e,t,n){var i=C.getOuterEditor(e,n);if(i){var o=D.getController(i);o.closeReferenceSearch()}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["require","exports","vs/nls!vs/editor/contrib/goToDeclaration/browser/goToDeclaration","vs/base/common/arrays","vs/base/common/async","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/platform","vs/base/common/severity","vs/base/common/strings","vs/base/common/winjs.base","vs/base/browser/browser","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/platform/request/common/request","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/textToHtmlTokenizer","vs/editor/browser/editorBrowserExtensions","vs/editor/contrib/goToDeclaration/common/goToDeclaration","vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/css!./goToDeclaration"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w){"use strict";function C(e){return e.length>1?n.localize(0,null,e.length):void 0}var T=g.Behaviour.WidgetFocus|g.Behaviour.ShowInContextMenu|g.Behaviour.UpdateOnCursorPositionChange,k=function(e){function t(t,n,i,o,r){void 0===r&&(r=T),e.call(this,t,n,r),this._messageService=i,this._editorService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel(),n=this.editor.getPosition(),o=this._resolve(t.getAssociatedResource(),{lineNumber:n.lineNumber,column:n.column});return o.then(function(t){if(t=i.coalesce(t),t&&0!==t.length){if(t=t.map(function(e){return{resource:e.resource,range:m.Range.collapseToStart(e.range)}}),1!==t.length||e._showSingleReferenceInPeek()){var n=w.FindReferencesController.getController(e.editor);return n.processRequest(e.editor.getSelection(),l.TPromise.as(t),C)}return e._editorService.openEditor({resource:t[0].resource,options:{selection:t[0].range}},e.openToTheSide)}},function(t){return e._messageService.show(c["default"].Error,t),!1})},Object.defineProperty(t.prototype,"openToTheSide",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype._showSingleReferenceInPeek=function(){return!1},t}(v.EditorAction);t.GoToTypeAction=k;var x=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/3_visitTypeDefinition"},t.prototype.isSupported=function(){return!!this.editor.getModel().getMode().typeDeclarationSupport&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(!e.prototype.getEnablementState.call(this))return!1;var t=this.editor.getModel(),n=this.editor.getSelection().getStartPosition();return t.getMode().typeDeclarationSupport.canFindTypeDeclaration(t.getLineContext(n.lineNumber),n.column-1)},t.prototype._resolve=function(e,t){var n=this.editor.getModel().getMode().typeDeclarationSupport;return n?n.findTypeDeclaration(e,t).then(function(e){return[e]}):void 0},t.ID="editor.action.goToTypeDeclaration",t=__decorate([__param(2,p.IMessageService),__param(3,h.IEditorService)],t)}(k);t.GoToTypeDeclarationActions=x;var I=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/2_visitDefinition"},t.prototype.isSupported=function(){return E.DeclarationRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(!e.prototype.getEnablementState.call(this))return!1;var t=this.editor.getModel(),n=this.editor.getSelection().getStartPosition();return E.DeclarationRegistry.all(t).some(function(e){return e.canFindDeclaration(t.getLineContext(n.lineNumber),n.column-1)})},t.prototype._resolve=function(e,t){return E.getDeclarationsAtPosition(this.editor.getModel(),this.editor.getPosition())},t}(k);t.BaseGoToDeclarationAction=I;var D=function(e){function t(t,n,i,o){e.call(this,t,n,i,o,T)}return __extends(t,e),t.ID="editor.action.goToDeclaration",t=__decorate([__param(2,p.IMessageService),__param(3,h.IEditorService)],t)}(I);t.GoToDeclarationAction=D;var A=function(e){function t(t,n,i,o){e.call(this,t,n,i,o,g.Behaviour.WidgetFocus|g.Behaviour.UpdateOnCursorPositionChange)}return __extends(t,e),Object.defineProperty(t.prototype,"openToTheSide",{get:function(){return!0},enumerable:!0,configurable:!0}),t.ID="editor.action.openDeclarationToTheSide",t=__decorate([__param(2,p.IMessageService),__param(3,h.IEditorService)],t)}(I);t.OpenDeclarationToTheSideAction=A;var L=function(e){function t(t,n,i,o){e.call(this,t,n,i,o,T)}return __extends(t,e),t.prototype._showSingleReferenceInPeek=function(){return!0},t.ID="editor.action.previewDeclaration",t=__decorate([__param(2,p.IMessageService),__param(3,h.IEditorService)],t)}(I);t.PreviewDeclarationAction=L;var O=function(){function e(e,t,n,i){var r=this;this.requestService=t,this.messageService=n,this.editorService=i,this.hasRequiredServices=!!this.messageService&&!!this.requestService&&!!this.editorService,this.toUnhook=[],this.decorations=[],this.editor=e,this.throttler=new o.Throttler,this.toUnhook.push(this.editor.addListener(y.EventType.MouseDown,function(e){return r.onEditorMouseDown(e)})),this.toUnhook.push(this.editor.addListener(y.EventType.MouseUp,function(e){return r.onEditorMouseUp(e)})),this.toUnhook.push(this.editor.addListener(y.EventType.MouseMove,function(e){return r.onEditorMouseMove(e)})),this.toUnhook.push(this.editor.addListener(y.EventType.KeyDown,function(e){return r.onEditorKeyDown(e)})),this.toUnhook.push(this.editor.addListener(y.EventType.KeyUp,function(e){return r.onEditorKeyUp(e)})),this.toUnhook.push(this.editor.addListener(y.EventType.ModelChanged,function(e){return r.resetHandler()})),this.toUnhook.push(this.editor.addListener("change",function(e){return r.resetHandler()})),this.toUnhook.push(this.editor.addListener("scroll",function(){return r.resetHandler()}))}return e.prototype.onEditorMouseMove=function(e,t){
this.lastMouseMoveEvent=e,this.startFindDefinition(e,t)},e.prototype.startFindDefinition=function(t,i){var o=this;if(!this.isEnabled(t,i))return this.currentWordUnderMouse=null,void this.removeDecorations();var s=t.target.position,a=s?this.editor.getModel().getWordAtPosition(s):null;if(!a)return this.currentWordUnderMouse=null,void this.removeDecorations();if(!this.currentWordUnderMouse||this.currentWordUnderMouse.startColumn!==a.startColumn||this.currentWordUnderMouse.endColumn!==a.endColumn||this.currentWordUnderMouse.word!==a.word){this.currentWordUnderMouse=a;var c=this.editor.captureState(y.CodeEditorStateFlag.Position,y.CodeEditorStateFlag.Value,y.CodeEditorStateFlag.Selection,y.CodeEditorStateFlag.Scroll);this.throttler.queue(function(){return c.validate(o.editor)?o.findDefinition(t.target):l.TPromise.as(null)}).then(function(t){if(!t||!t.length||!c.validate(o.editor))return void o.removeDecorations();if(t.length>1)o.addDecoration({startLineNumber:s.lineNumber,startColumn:a.startColumn,endLineNumber:s.lineNumber,endColumn:a.endColumn},n.localize(1,null,t.length),!1);else{var i=t[0];o.editorService.resolveEditorModel({resource:i.resource}).then(function(t){var n;if(t&&t.textEditorModel){var r=Math.max(1,i.range.startLineNumber),c=void 0,l=void 0;l=t.textEditorModel,c=i.range.startLineNumber!==i.range.endLineNumber||i.range.startColumn!==i.range.endColumn?Math.min(i.range.endLineNumber,i.range.startLineNumber+e.MAX_SOURCE_PREVIEW_LINES,l.getLineCount()):Math.min(r+e.MAX_SOURCE_PREVIEW_LINES,l.getLineCount()),n=l.getValueInRange({startLineNumber:r,startColumn:1,endLineNumber:c,endColumn:l.getLineMaxColumn(c)}).trim();for(var d=Number.MAX_VALUE,h=/^[ \t]*/,p=void 0,f=void 0;c>=r&&d>0;)f=l.getLineContent(r++),0!==f.trim().length&&(p=h.exec(f),d=Math.min(d,p[0].length));n=n.replace(new RegExp("^([ \\t]{"+d+"})","gm"),u.empty),i.range.endLineNumber-i.range.startLineNumber>e.MAX_SOURCE_PREVIEW_LINES&&(n+="\n…")}o.addDecoration({startLineNumber:s.lineNumber,startColumn:a.startColumn,endLineNumber:s.lineNumber,endColumn:a.endColumn},n,!0)})}}).done(void 0,r.onUnexpectedError)}},e.prototype.addDecoration=function(e,t,n){var i=this.editor.getModel();if(i){var o={tagName:"div",className:"goto-definition-link-hover",style:"tab-size: "+i.getOptions().tabSize};t&&t.trim().length>0&&(o.children=[n?b.tokenizeToHtmlContent(t,i.getMode()):{tagName:"span",text:t}]);var r={range:e,options:{inlineClassName:"goto-definition-link",htmlMessage:[o]}};this.decorations=this.editor.deltaDecorations(this.decorations,[r])}},e.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},e.prototype.onEditorKeyDown=function(t){this.lastMouseMoveEvent&&(t.keyCode===e.TRIGGER_KEY_VALUE||t.keyCode===e.TRIGGER_SIDEBYSIDE_KEY_VALUE&&t[e.TRIGGER_MODIFIER])?this.startFindDefinition(this.lastMouseMoveEvent,t):t[e.TRIGGER_MODIFIER]&&this.removeDecorations()},e.prototype.resetHandler=function(){this.lastMouseMoveEvent=null,this.removeDecorations()},e.prototype.onEditorMouseDown=function(t){this.hasTriggerKeyOnMouseDown=!!t.event[e.TRIGGER_MODIFIER]},e.prototype.onEditorMouseUp=function(e){var t=this;this.isEnabled(e)&&this.hasTriggerKeyOnMouseDown&&this.gotoDefinition(e.target,e.event.altKey).done(function(){t.removeDecorations()},function(e){t.removeDecorations(),r.onUnexpectedError(e)})},e.prototype.onEditorKeyUp=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&(this.removeDecorations(),this.currentWordUnderMouse=null)},e.prototype.isEnabled=function(t,n){return this.hasRequiredServices&&this.editor.getModel()&&(d.isIE11orEarlier||t.event.detail<=1)&&t.target.type===y.MouseTargetType.CONTENT_TEXT&&(t.event[e.TRIGGER_MODIFIER]||n&&n.keyCode===e.TRIGGER_KEY_VALUE)&&E.DeclarationRegistry.has(this.editor.getModel())},e.prototype.findDefinition=function(e){var t=this.editor.getModel();return t?E.getDeclarationsAtPosition(this.editor.getModel(),e.position):l.TPromise.as(null)},e.prototype.gotoDefinition=function(e,t){var n=this,i=this.editor.captureState(y.CodeEditorStateFlag.Position,y.CodeEditorStateFlag.Value,y.CodeEditorStateFlag.Selection,y.CodeEditorStateFlag.Scroll);return this.findDefinition(e).then(function(o){if(o&&o.length&&i.validate(n.editor)){var r=e.position,s=n.editor.getModel().getWordAtPosition(r),a=o.filter(function(t){return t.range&&!(s&&t.range.startColumn===s.startColumn&&t.range.startLineNumber===e.position.lineNumber)}).map(function(e){return{resource:e.resource,range:m.Range.collapseToStart(e.range)}});if(a.length){if(a.length>1){var c=w.FindReferencesController.getController(n.editor);return c.processRequest(n.editor.getSelection(),l.TPromise.as(a),C)}return n.editorService.openEditor({resource:a[0].resource,options:{selection:a[0].range}},t)}}})},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(;this.toUnhook.length>0;)this.toUnhook.pop()()},e.ID="editor.contrib.gotodefinitionwithmouse",e.TRIGGER_MODIFIER=a.isMacintosh?"metaKey":"ctrlKey",e.TRIGGER_SIDEBYSIDE_KEY_VALUE=s.KeyCode.Alt,e.TRIGGER_KEY_VALUE=a.isMacintosh?s.KeyCode.Meta:s.KeyCode.Ctrl,e.MAX_SOURCE_PREVIEW_LINES=7,e=__decorate([__param(1,f.IRequestService),__param(2,p.IMessageService),__param(3,h.IEditorService)],e)}();_.CommonEditorRegistry.registerEditorAction(new _.EditorActionDescriptor(L,L.ID,n.localize(2,null),{context:_.ContextKey.EditorTextFocus,primary:s.KeyMod.Alt|s.KeyCode.F12,linux:{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.F10}}));var M;M=a.isWeb?s.KeyMod.CtrlCmd|s.KeyCode.F12:s.KeyCode.F12,_.CommonEditorRegistry.registerEditorAction(new _.EditorActionDescriptor(D,D.ID,n.localize(3,null),{context:_.ContextKey.EditorTextFocus,primary:M})),_.CommonEditorRegistry.registerEditorAction(new _.EditorActionDescriptor(A,A.ID,n.localize(4,null),{context:_.ContextKey.EditorTextFocus,primary:s.KeyMod.chord(s.KeyMod.CtrlCmd|s.KeyCode.KEY_K,M)})),_.CommonEditorRegistry.registerEditorAction(new _.EditorActionDescriptor(x,x.ID,n.localize(5,null))),S.EditorBrowserRegistry.registerEditorContribution(O)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/common/workspaceStats",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/flags","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e,t,n){this.fileService=e,this.contextService=t,this.telemetryService=n}return e.prototype.searchArray=function(e,t){return e.some(function(e){return e.search(t)>-1})},e.prototype.getWorkspaceTags=function(){var e=this,t=Object.create(null),r=this.contextService.getWorkspace();return r&&this.fileService?this.fileService.resolveFile(r.resource).then(function(n){var i=n.children.map(function(e){return e.name});t["workspace.empty"]=!1,t["workspace.language.cs"]=e.searchArray(i,/^.+\.cs$/i),t["workspace.language.js"]=e.searchArray(i,/^.+\.js$/i),t["workspace.language.ts"]=e.searchArray(i,/^.+\.ts$/i),t["workspace.language.php"]=e.searchArray(i,/^.+\.php$/i),t["workspace.language.python"]=e.searchArray(i,/^.+\.py$/i),t["workspace.language.vb"]=e.searchArray(i,/^.+\.vb$/i),t["workspace.language.aspx"]=e.searchArray(i,/^.+\.aspx$/i),t["workspace.grunt"]=e.searchArray(i,/^gruntfile\.js$/i),t["workspace.gulp"]=e.searchArray(i,/^gulpfile\.js$/i),t["workspace.jake"]=e.searchArray(i,/^jakefile\.js$/i),t["workspace.tsconfig"]=e.searchArray(i,/^tsconfig\.json$/i),t["workspace.jsconfig"]=e.searchArray(i,/^jsconfig\.json$/i),t["workspace.config.xml"]=e.searchArray(i,/^config\.xml/i),t["workspace.vsc.extension"]=e.searchArray(i,/^vsc-extension-quickstart\.md/i),t["workspace.ASP5"]=e.searchArray(i,/^project\.json$/i)&&t["workspace.language.cs"],t["workspace.sln"]=e.searchArray(i,/^.+\.sln$|^.+\.csproj$/i),t["workspace.unity"]=e.searchArray(i,/^Assets$/i)&&e.searchArray(i,/^Library$/i)&&e.searchArray(i,/^ProjectSettings/i),t["workspace.npm"]=e.searchArray(i,/^package\.json$|^node_modules$/i),t["workspace.bower"]=e.searchArray(i,/^bower\.json$|^bower_components$/i),t["workspace.yeoman.code"]=e.searchArray(i,/^vscodequickstart\.md$/i),t["workspace.yeoman.code.ext"]=e.searchArray(i,/^vsc-extension-quickstart\.md$/i);var r=e.searchArray(i,/^MainActivity\.cs$/i)||e.searchArray(i,/^MainActivity\.fs$/i),s=e.searchArray(i,/^AppDelegate\.cs$/i)||e.searchArray(i,/^AppDelegate\.fs$/i),a=e.searchArray(i,/^AndroidManifest\.xml$/i),c=e.searchArray(i,/^platforms$/i),u=e.searchArray(i,/^plugins$/i),l=e.searchArray(i,/^www$/i),d=e.searchArray(i,/^Properties/i),h=e.searchArray(i,/^Resources/i),p=e.searchArray(i,/^JNI/i);return!t["workspace.config.xml"]||t["workspace.language.cs"]||t["workspace.language.vb"]||t["workspace.language.aspx"]||(c&&u&&l?t["workspace.cordova.high"]=!0:t["workspace.cordova.low"]=!0),r&&d&&h&&(t["workspace.xamarin.android"]=!0),s&&h&&(t["workspace.xamarin.ios"]=!0),a&&p&&(t["workspace.android.cpp"]=!0),t["workspace.reactNative"]=e.searchArray(i,/^android$/i)&&e.searchArray(i,/^ios$/i)&&e.searchArray(i,/^index\.android\.js$/i)&&e.searchArray(i,/^index\.ios\.js$/i),t["workspace.enableTypeScriptServiceModeForJS"]=!!o.enableTypeScriptServiceModeForJS,t},function(e){return i.onUnexpectedError(e),null}):(t["workspace.empty"]=!0,n.TPromise.as(t))},e.prototype.reportWorkspaceTags=function(){var e=this;this.getWorkspaceTags().then(function(t){e.telemetryService.publicLog("workspce.tags",t)},function(e){return i.onUnexpectedError(e)})},e=__decorate([__param(0,r.IFileService),__param(1,a.IWorkspaceContextService),__param(2,s.ITelemetryService)],e)}();t.WorkspaceStats=c}),define("vs/platform/workspace/common/baseWorkspaceContextService",["require","exports","vs/base/common/uri","vs/base/common/paths","./workspace"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n){void 0===n&&(n={}),this.serviceId=o.IWorkspaceContextService,this.workspace=e,this.configuration=t,this.options=n}return e.prototype.getWorkspace=function(){return this.workspace},e.prototype.getConfiguration=function(){return this.configuration},e.prototype.getOptions=function(){return this.options},e.prototype.isInsideWorkspace=function(e){return e&&this.workspace?i.isEqualOrParent(e.fsPath,this.workspace.resource.fsPath):!1},e.prototype.toWorkspaceRelativePath=function(e){return this.isInsideWorkspace(e)?i.normalize(i.relative(this.workspace.resource.fsPath,e.fsPath)):null},e.prototype.toResource=function(e){return"string"==typeof e&&this.workspace?n["default"].file(i.join(this.workspace.resource.fsPath,e)):null},e}();t.BaseWorkspaceContextService=r});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostConfiguration",["require","exports","vs/base/common/objects","vs/base/common/lifecycle","vs/platform/thread/common/thread","vs/platform/configuration/common/configuration","vs/base/common/event"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(){this._onDidChangeConfiguration=new s.Emitter}return Object.defineProperty(e.prototype,"onDidChangeConfiguration",{get:function(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event},enumerable:!0,configurable:!0}),e.prototype._acceptConfigurationChanged=function(e){this._config=e,this._hasConfig=!0,this._onDidChangeConfiguration.fire(void 0)},e.prototype.getConfiguration=function(t){if(this._hasConfig){var i=t?e._lookUp(t,this._config):this._config,o=i?n.clone(i):{};return o.has=function(t){return"undefined"!=typeof e._lookUp(t,i)},o.get=function(t,n){var o=e._lookUp(t,i);return"undefined"==typeof o&&(o=n),o},o}},e._lookUp=function(e,t){if(e){for(var n=e.split("."),i=t;i&&n.length;)i=i[n.shift()];return i}},e=__decorate([o.Remotable.ExtHostContext("ExtHostConfiguration")],e)}();t.ExtHostConfiguration=a;var c=function(){function e(e,t){var n=this;this._configurationService=e,this._proxy=t.getRemotable(a),this._toDispose=[],this._toDispose.push(this._configurationService.addListener2(r.ConfigurationServiceEventTypes.UPDATED,function(e){n._proxy._acceptConfigurationChanged(e.config)})),this._configurationService.loadConfiguration().then(function(e){n._proxy._acceptConfigurationChanged(e)})}return e.prototype.dispose=function(){this._toDispose=i.disposeAll(this._toDispose)},e=__decorate([o.Remotable.MainContext("MainProcessConfigurationServiceHelper"),__param(0,r.IConfigurationService),__param(1,o.IThreadService)],e)}();t.MainThreadConfiguration=c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostDiagnostics",["require","exports","vs/platform/thread/common/thread","vs/platform/markers/common/markers","vs/base/common/uri","vs/base/common/severity"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e,t){this._name=e,this._proxy=t}return e.prototype.dispose=function(){var e=this;this._isDisposed||this._proxy._changeAll(this.name,void 0).then(function(){e._proxy=void 0,e._isDisposed=!0})},Object.defineProperty(e.prototype,"name",{get:function(){return this._checkDisposed(),this._name},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this._checkDisposed(),t instanceof o["default"]){var i=void 0;if(n){i=[];var r=n.length;r>e._maxDiagnosticsPerFile&&(console.warn("diagnostics for %s will be capped to %d (actually is %d)",t.toString(),e._maxDiagnosticsPerFile,r),r=e._maxDiagnosticsPerFile);for(var s=0;r>s;s++)i.push(e._toMarkerData(n[s]))}return this._proxy._changeOne(this.name,t,i)}var a=t,i=void 0;if(a){var c=0;i=[];for(var u=0,l=a;u<l.length;u++){var d=l[u],h=d[0],p=d[1];if(p){var r=p.length;r>e._maxDiagnosticsPerFile&&(console.warn("diagnostics for %s will be capped to %d (actually is %d)",h.toString(),e._maxDiagnosticsPerFile,r),r=e._maxDiagnosticsPerFile);for(var s=0;r>s;s++)i.push({resource:h,marker:e._toMarkerData(p[s])});if(c+=r,c>10*e._maxDiagnosticsPerFile){console.warn("too many diagnostics will cap to %d",10*e._maxDiagnosticsPerFile);break}}}}this._proxy._changeAll(this.name,i)},e.prototype["delete"]=function(e){return this.set(e,void 0)},e.prototype.clear=function(){return this.set(void 0)},e.prototype._checkDisposed=function(){if(this._isDisposed)throw new Error("illegal state - object is disposed")},e._toMarkerData=function(t){var n=t.range;return{startLineNumber:n.start.line+1,startColumn:n.start.character+1,endLineNumber:n.end.line+1,endColumn:n.end.character+1,message:t.message,source:t.source,severity:e._convertDiagnosticsSeverity(t.severity),code:String(t.code)}},e._convertDiagnosticsSeverity=function(e){switch(e){case 0:return r["default"].Error;case 1:return r["default"].Warning;case 2:return r["default"].Info;case 3:return r["default"].Ignore;default:return r["default"].Error}},e._maxDiagnosticsPerFile=250,e}(),a=function(){function e(e){this._proxy=e.getRemotable(c)}return e.prototype.createDiagnosticCollection=function(t){return t||(t="_generated_diagnostic_collection_name_#"+e._idPool++),new s(t,this._proxy)},e._idPool=0,e}();t.ExtHostDiagnostics=a;var c=function(){function e(e){this._markerService=e}return e.prototype._changeOne=function(e,t,n){this._markerService.changeOne(e,t,n)},e.prototype._changeAll=function(e,t){this._markerService.changeAll(e,t)},e=__decorate([n.Remotable.MainContext("MainThreadDiagnostics"),__param(0,i.IMarkerService)],e)}();t.MainThreadDiagnostics=c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostLanguages",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/editor/common/services/modeService"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){this._proxy=e.getRemotable(s)}return e.prototype.getLanguages=function(){return this._proxy._getLanguages()},e=__decorate([__param(0,i.IThreadService)],e)}();t.ExtHostLanguages=r;var s=function(){function e(e){this._modeService=e}return e.prototype._getLanguages=function(){return n.TPromise.as(this._modeService.getRegisteredModes())},e=__decorate([i.Remotable.MainContext("MainThreadLanguages"),__param(0,o.IModeService)],e)}();t.MainThreadLanguages=s});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostMessageService",["require","exports","vs/nls!vs/workbench/api/node/extHostMessageService","vs/platform/thread/common/thread","vs/platform/message/common/message","vs/base/common/actions","vs/base/common/winjs.base"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t){this._proxy=e.getRemotable(c),this._commands=t}return e.prototype.showMessage=function(e,t,n){for(var i=[],o=0;o<n.length;o++){var r=n[o];"string"==typeof r?i.push({title:r,handle:o}):i.push({title:r.title,handle:o})}return this._proxy.showMessage(e,t,i).then(function(e){return"number"==typeof e?n[e]:void 0})},e=__decorate([__param(0,i.IThreadService)],e)}();t.ExtHostMessageService=a;var c=function(){function e(e){this._messageService=e}return e.prototype.showMessage=function(e,t,i){var o,a=this,c=[];return c.push(new r.Action("__close",n.localize(0,null),void 0,!0,function(){return o(),s.TPromise.as(void 0)})),i.forEach(function(e){c.push(new r.Action("_extension_message_handle_"+e.handle,e.title,void 0,!0,function(){return o(e.handle),s.TPromise.as(void 0)}))}),new s.TPromise(function(n){var i;o=function(e){i(),n(e)},i=a._messageService.show(e,{message:t,actions:c})})},e=__decorate([i.Remotable.MainContext("MainThreadMessageService"),__param(0,o.IMessageService)],e)}();t.MainThreadMessageService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/api/node/extHostTypes",["require","exports","vs/base/common/uri","vs/base/common/errors"],function(e,t,n,i){"use strict";var o=function(){function e(e){this._callOnDispose=e}return e.from=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return new e(function(){if(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];i&&"function"==typeof i.dispose&&i.dispose()}t=void 0}})},e.prototype.dispose=function(){"function"==typeof this._callOnDispose&&(this._callOnDispose(),this._callOnDispose=void 0)},e}();t.Disposable=o;var r=function(){function e(e,t){if(0>e)throw i.illegalArgument("line must be positive");if(0>t)throw i.illegalArgument("character must be positive");this._line=e,this._character=t}return e.Min=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=e.pop(),i=0,o=e;i<o.length;i++){var r=o[i];r.isBefore(n)&&(n=r)}return n},e.Max=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=e.pop(),i=0,o=e;i<o.length;i++){var r=o[i];r.isAfter(n)&&(n=r)}return n},Object.defineProperty(e.prototype,"line",{get:function(){return this._line},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"character",{get:function(){return this._character},enumerable:!0,configurable:!0}),e.prototype.isBefore=function(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character},e.prototype.isBeforeOrEqual=function(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character},e.prototype.isAfter=function(e){return!this.isBeforeOrEqual(e)},e.prototype.isAfterOrEqual=function(e){return!this.isBefore(e)},e.prototype.isEqual=function(e){return this._line===e._line&&this._character===e._character},e.prototype.compareTo=function(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0},e.prototype.translate=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),0===t&&0===n?this:new e(this.line+t,this.character+n)},e.prototype["with"]=function(t,n){return void 0===t&&(t=this.line),void 0===n&&(n=this.character),t===this.line&&n===this.character?this:new e(t,n)},e.prototype.toJSON=function(){return{line:this.line,character:this.character}},e}();t.Position=r;var s=function(){function e(e,t,n,i){var o,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?(o=new r(e,t),s=new r(n,i)):e instanceof r&&t instanceof r&&(o=e,s=t),!o||!s)throw new Error("Invalid arguments");o.isBefore(s)?(this._start=o,this._end=s):(this._start=s,this._end=o)}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return t instanceof e?this.contains(t._start)&&this.contains(t._end):t instanceof r?t.isBefore(this._start)?!1:!this._end.isBefore(t):!1},e.prototype.isEqual=function(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)},e.prototype.intersection=function(t){var n=r.Max(t.start,this._start),i=r.Min(t.end,this._end);return n.isAfter(i)?void 0:new e(n,i)},e.prototype.union=function(t){if(this.contains(t))return this;if(t.contains(this))return t;var n=r.Min(t.start,this._start),i=r.Max(t.end,this.end);return new e(n,i)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._start.isEqual(this._end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleLine",{get:function(){return this._start.line===this._end.line},enumerable:!0,configurable:!0}),e.prototype["with"]=function(t,n){return void 0===t&&(t=this.start),void 0===n&&(n=this.end),t.isEqual(this._start)&&n.isEqual(this.end)?this:new e(t,n)},e.prototype.toJSON=function(){return[this.start,this.end]},e}();t.Range=s;var a=function(e){function t(t,n,i,o){var s,a;if("number"==typeof t&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o?(s=new r(t,n),a=new r(i,o)):t instanceof r&&n instanceof r&&(s=t,a=n),!s||!a)throw new Error("Invalid arguments");e.call(this,s,a),this._anchor=s,this._active=a}return __extends(t,e),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReversed",{get:function(){return this._anchor===this._end},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}},t}(s);t.Selection=a;var c=function(){function e(e,t){this.range=e,this.newText=t}return e.replace=function(t,n){return new e(t,n)},e.insert=function(t,n){return e.replace(new s(t,t),n)},e["delete"]=function(t){return e.replace(t,"")},Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){if(!e)throw i.illegalArgument("range");this._range=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newText",{get:function(){return this._newText||""},set:function(e){this._newText=e},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{range:this.range,newText:this.newText}},e}();t.TextEdit=c;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n["default"]);t.Uri=u;var l=function(){function e(){this._values=[],this._index=Object.create(null)}return e.prototype.replace=function(e,t,n){var i=new c(t,n),o=this.get(e);o?o.push(i):this.set(e,[i])},e.prototype.insert=function(e,t,n){this.replace(e,new s(t,t),n)},e.prototype["delete"]=function(e,t){this.replace(e,t,"")},e.prototype.has=function(e){return"undefined"!=typeof this._index[e.toString()]},e.prototype.set=function(e,t){var n=this._index[e.toString()];if("undefined"==typeof n){var i=this._values.push([e,t]);this._index[e.toString()]=i-1}else this._values[n][1]=t},e.prototype.get=function(e){var t=this._index[e.toString()];return"undefined"!=typeof t&&this._values[t][1]},e.prototype.entries=function(){return this._values},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return this._values},e}();t.WorkspaceEdit=l,function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"}(t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var d=t.DiagnosticSeverity,h=function(){function e(e,t){if(this.uri=e,t instanceof s)this.range=t;else{if(!(t instanceof r))throw new Error("Illegal argument");this.range=new s(t,t)}}return e.prototype.toJSON=function(){return{uri:this.uri,range:this.range}},e}();t.Location=h;var p=function(){function e(e,t,n){void 0===n&&(n=d.Error),this.range=e,this.message=t,this.severity=n}return e.prototype.toJSON=function(){return{severity:d[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}},e}();t.Diagnostic=p;var f=function(){function e(e,t){if(!e)throw new Error("Illegal argument");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}return e}();t.Hover=f,function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var m=t.DocumentHighlightKind,v=function(){function e(e,t){void 0===t&&(t=m.Text),this.range=e,this.kind=t}return e.prototype.toJSON=function(){return{range:this.range,kind:m[this.kind]}},e}();t.DocumentHighlight=v,function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null"}(t.SymbolKind||(t.SymbolKind={}));var g=t.SymbolKind,y=function(){function e(e,t,n,i,o){this.name=e,this.kind=t,this.location=new h(i,n),this.containerName=o}return e.prototype.toJSON=function(){return{name:this.name,kind:g[this.kind],location:this.location,containerName:this.containerName}},e}();t.SymbolInformation=y;var _=function(){function e(e,t){this.range=e,this.command=t}return Object.defineProperty(e.prototype,"isResolved",{get:function(){return!!this.command},enumerable:!0,configurable:!0}),e}();t.CodeLens=_;var b=function(){function e(e,t){this.label=e,this.documentation=t}return e}();t.ParameterInformation=b;var S=function(){function e(e,t){this.label=e,this.documentation=t,this.parameters=[]}return e}();t.SignatureInformation=S;var E=function(){function e(){this.signatures=[]}return e}();t.SignatureHelp=E,function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference"}(t.CompletionItemKind||(t.CompletionItemKind={}));var w=t.CompletionItemKind,C=function(){function e(e){this.label=e}return e.prototype.toJSON=function(){return{label:this.label,kind:w[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,insertText:this.insertText,textEdit:this.textEdit}},e}();t.CompletionItem=C;var T=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1),this.items=e,this.isIncomplete=t}return e}();t.CompletionList=T,function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(t.ViewColumn||(t.ViewColumn={}));t.ViewColumn;!function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(t.StatusBarAlignment||(t.StatusBarAlignment={}));t.StatusBarAlignment;!function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(t.EndOfLine||(t.EndOfLine={}));t.EndOfLine});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostFileSystemEventService",["require","exports","vs/platform/files/common/files","vs/platform/thread/common/thread","vs/base/common/event","./extHostTypes","vs/platform/event/common/event","vs/base/common/async","vs/base/common/glob"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t,n,i,s){var a=this;this._onDidCreate=new o.Emitter,this._onDidChange=new o.Emitter,this._onDidDelete=new o.Emitter,this._config=0,n||(this._config+=1),i||(this._config+=2),s||(this._config+=4);var u=e(function(e){if(!n)for(var o=0,r=e.created;o<r.length;o++){var u=r[o];c.match(t,u.fsPath)&&a._onDidCreate.fire(u)}if(!i)for(var l=0,d=e.changed;l<d.length;l++){var h=d[l];c.match(t,h.fsPath)&&a._onDidChange.fire(h)}if(!s)for(var p=0,f=e.deleted;p<f.length;p++){var m=f[p];c.match(t,m.fsPath)&&a._onDidDelete.fire(m)}});this._disposable=r.Disposable.from(this._onDidCreate,this._onDidChange,this._onDidDelete,u)}return Object.defineProperty(e.prototype,"ignoreCreateEvents",{get:function(){return Boolean(1&this._config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreChangeEvents",{get:function(){return Boolean(2&this._config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreDeleteEvents",{get:function(){return Boolean(4&this._config)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._disposable.dispose()},Object.defineProperty(e.prototype,"onDidCreate",{get:function(){return this._onDidCreate.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidDelete",{get:function(){return this._onDidDelete.event},enumerable:!0,
configurable:!0}),e}();t.FileSystemWatcher=u;var l=function(){function e(){this._emitter=new o.Emitter}return e.prototype.createFileSystemWatcher=function(e,t,n,i){return new u(this._emitter.event,e,t,n,i)},e.prototype._onFileEvent=function(e){this._emitter.fire(e)},e=__decorate([i.Remotable.ExtHostContext("ExtHostFileSystemEventService")],e)}();t.ExtHostFileSystemEventService=l;var d=function(){function e(e,t){var i=t.getRemotable(l),o={created:[],changed:[],deleted:[]},r=new a.RunOnceScheduler(function(){i._onFileEvent(o),o.created.length=0,o.changed.length=0,o.deleted.length=0},100);e.addListener("files:fileChanges",function(e){for(var t=0,i=e.changes;t<i.length;t++){var s=i[t];switch(s.type){case n.FileChangeType.ADDED:o.created.push(s.resource);break;case n.FileChangeType.UPDATED:o.changed.push(s.resource);break;case n.FileChangeType.DELETED:o.deleted.push(s.resource)}}r.schedule()})}return e=__decorate([__param(0,s.IEventService),__param(1,i.IThreadService)],e)}();t.MainThreadFileSystemEventService=d}),define("vs/workbench/api/node/extHostTypeConverters",["require","exports","vs/base/common/severity","vs/base/common/arrays","./extHostTypes","vs/platform/editor/common/editor"],function(e,t,n,i,o,r){"use strict";function s(e){var t=e.selectionStartLineNumber,n=e.selectionStartColumn,i=e.positionLineNumber,r=e.positionColumn,s=new o.Position(t-1,n-1),a=new o.Position(i-1,r-1);return new o.Selection(s,a)}function a(e){var t=e.anchor,n=e.active;return{selectionStartLineNumber:t.line+1,selectionStartColumn:t.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}function c(e){var t=e.start,n=e.end;return{startLineNumber:t.line+1,startColumn:t.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}function u(e){var t=e.startLineNumber,n=e.startColumn,i=e.endLineNumber,r=e.endColumn;return new o.Range(t-1,n-1,i-1,r-1)}function l(e){return new o.Position(e.lineNumber-1,e.column-1)}function d(e){return{lineNumber:e.line+1,column:e.character+1}}function h(e){switch(e){case o.DiagnosticSeverity.Error:return n["default"].Error;case o.DiagnosticSeverity.Warning:return n["default"].Warning;case o.DiagnosticSeverity.Information:return n["default"].Info;case o.DiagnosticSeverity.Hint:return n["default"].Ignore}return n["default"].Error}function p(e){switch(e){case n["default"].Info:return o.DiagnosticSeverity.Information;case n["default"].Warning:return o.DiagnosticSeverity.Warning;case n["default"].Error:return o.DiagnosticSeverity.Error;case n["default"].Ignore:return o.DiagnosticSeverity.Hint}return o.DiagnosticSeverity.Error}function f(e){var t=r.Position.LEFT;return"number"!=typeof e||(e===o.ViewColumn.Two?t=r.Position.CENTER:e===o.ViewColumn.Three&&(t=r.Position.RIGHT)),t}function m(e){return"number"==typeof e?e===r.Position.LEFT?o.ViewColumn.One:e===r.Position.CENTER?o.ViewColumn.Two:e===r.Position.RIGHT?o.ViewColumn.Three:void 0:void 0}function v(e){return"string"==typeof e?{markdown:e}:"object"==typeof e?{code:e}:void 0}function g(e){if("string"==typeof e.code)return e.code;var t=e.markdown,n=e.text;return t||n||"<???>"}function y(e){return Array.isArray(e)}function _(e){return y(e)?e.map(function(e){return v(e)}):e?[v(e)]:[]}function b(e){return"undefined"!=typeof e.range}function S(e){return 0===e.length?!0:!!b(e[0])}function E(e){return S(e)?e.map(function(e){return{range:c(e.range),hoverMessage:_(e.hoverMessage)}}):e.map(function(e){return{range:c(e)}})}function w(e){return{name:e.name,type:o.SymbolKind[e.kind||o.SymbolKind.Property].toLowerCase(),range:c(e.location.range),resourceUri:e.location.uri,containerName:e.containerName,parameters:""}}function C(e){return new o.SymbolInformation(e.name,o.SymbolKind[e.type.charAt(0).toUpperCase()+e.type.substr(1)],u(e.range),e.resourceUri,e.containerName)}function T(e){return{range:c(e.range),htmlContent:e.contents.map(v)}}function k(e){return new o.Hover(e.htmlContent.map(g),u(e.range))}function x(e){return new o.DocumentHighlight(u(e.range),o.DocumentHighlightKind[e.kind.charAt(0).toUpperCase()+e.kind.substr(1)])}t.toSelection=s,t.fromSelection=a,t.fromRange=c,t.toRange=u,t.toPosition=l,t.fromPosition=d,t.fromDiagnosticSeverity=h,t.toDiagnosticSeverty=p,t.fromViewColumn=f,t.toViewColumn=m,t.fromFormattedString=v,t.toFormattedString=g,t.fromRangeOrRangeWithMessage=E,t.TextEdit={from:function(e){return{text:e.newText,range:c(e.range)}},to:function(e){return new o.TextEdit(u(e.range),e.text)}};var I;!function(e){function t(e){switch(e){case o.SymbolKind.Method:return"method";case o.SymbolKind.Function:return"function";case o.SymbolKind.Constructor:return"constructor";case o.SymbolKind.Variable:return"variable";case o.SymbolKind.Class:return"class";case o.SymbolKind.Interface:return"interface";case o.SymbolKind.Namespace:return"namespace";case o.SymbolKind.Package:return"package";case o.SymbolKind.Module:return"module";case o.SymbolKind.Property:return"property";case o.SymbolKind.Enum:return"enum";case o.SymbolKind.String:return"string";case o.SymbolKind.File:return"file";case o.SymbolKind.Array:return"array";case o.SymbolKind.Number:return"number";case o.SymbolKind.Boolean:return"boolean";case o.SymbolKind.Object:return"object";case o.SymbolKind.Key:return"key";case o.SymbolKind.Null:return"null"}return"property"}function n(e){switch(e){case"method":return o.SymbolKind.Method;case"function":return o.SymbolKind.Function;case"constructor":return o.SymbolKind.Constructor;case"variable":return o.SymbolKind.Variable;case"class":return o.SymbolKind.Class;case"interface":return o.SymbolKind.Interface;case"namespace":return o.SymbolKind.Namespace;case"package":return o.SymbolKind.Package;case"module":return o.SymbolKind.Module;case"property":return o.SymbolKind.Property;case"enum":return o.SymbolKind.Enum;case"string":return o.SymbolKind.String;case"file":return o.SymbolKind.File;case"array":return o.SymbolKind.Array;case"number":return o.SymbolKind.Number;case"boolean":return o.SymbolKind.Boolean;case"object":return o.SymbolKind.Object;case"key":return o.SymbolKind.Key;case"null":return o.SymbolKind.Null}return o.SymbolKind.Property}e.from=t,e.to=n}(I=t.SymbolKind||(t.SymbolKind={}));var D;!function(e){function t(e){return new o.SymbolInformation(e.label,I.to(e.type),u(e.range),void 0,e.containerLabel)}function n(e){return{type:I.from(e.kind),range:c(e.location.range),containerLabel:e.containerName,label:e.name,icon:void 0}}e.fromOutlineEntry=t,e.toOutlineEntry=n}(D=t.SymbolInformation||(t.SymbolInformation={})),t.fromSymbolInformation=w,t.toSymbolInformation=C,t.location={from:function(e){return{range:c(e.range),resource:e.uri}},to:function(e){return new o.Location(e.resource,u(e.range))}},t.fromHover=T,t.toHover=k,t.toDocumentHighlight=x,t.Suggest={from:function(e){var t={label:e.label,codeSnippet:e.insertText||e.label,type:o.CompletionItemKind[e.kind||o.CompletionItemKind.Text].toString().toLowerCase(),typeLabel:e.detail,documentationLabel:e.documentation,sortText:e.sortText,filterText:e.filterText};return t},to:function(e,t,n){var i=new o.CompletionItem(n.label);i.insertText=n.codeSnippet,i.kind=o.CompletionItemKind[n.type.charAt(0).toUpperCase()+n.type.substr(1)],i.detail=n.typeLabel,i.documentation=n.documentationLabel,i.sortText=n.sortText,i.filterText=n.filterText;var r="number"==typeof n.overwriteBefore?n.overwriteBefore:e.currentWord.length,s=new o.Position(t.line,Math.max(0,t.character-r)),a=t;return"number"==typeof n.overwriteAfter&&(a=new o.Position(t.line,t.character+n.overwriteAfter)),i.textEdit=o.TextEdit.replace(new o.Range(s,a),n.codeSnippet),i}};var A;!function(e){function t(e){for(var t={currentSignature:e.activeSignature,currentParameter:e.activeParameter,signatures:[]},n=0,i=e.signatures;n<i.length;n++){for(var o=i[n],r={label:o.label,documentation:o.documentation,parameters:[]},s=0,a=0,c=o.parameters;a<c.length;a++){var u=c[a],l={label:u.label,documentation:u.documentation};r.parameters.push(l),s=o.label.indexOf(u.label,s),s>=0?(l.signatureLabelOffset=s,s+=u.label.length,l.signatureLabelEnd=s):(l.signatureLabelOffset=0,l.signatureLabelEnd=0)}t.signatures.push(r)}return t}function n(e){var t=new o.SignatureHelp;t.activeSignature=e.currentSignature,t.activeParameter=e.currentParameter;for(var n=0,i=e.signatures;n<i.length;n++){var r=i[n],s=new o.SignatureInformation(r.label,r.documentation);t.signatures.push(s);for(var a=0,c=r.parameters;a<c.length;a++){var u=c[a],l=new o.ParameterInformation(u.label,u.documentation);s.parameters.push(l)}}return t}e.from=t,e.to=n}(A=t.SignatureHelp||(t.SignatureHelp={}));var L;!function(e){function t(e,t){if(e){var n={id:e.command,title:e.title};if(!i.isFalsyOrEmpty(e.arguments)){var s=e.command+"-no-args-wrapper-"+r++;n.id=s,o[s]=e;var a=t.commands.registerCommand(s,function(){return(n=t.commands).executeCommand.apply(n,[e.command].concat(o[s].arguments));var n}),c={dispose:function(){delete o[s]}};t.disposables.push(a,c)}return n}}function n(e){var t=o[e.id];return t||(t={command:e.id,title:e.title}),t}var o=Object.create(null),r=1;e.from=t,e.to=n}(L=t.Command||(t.Command={}))}),define("vs/workbench/api/node/mainThreadEditors",["require","exports","vs/editor/common/editorCommon","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/async","vs/editor/common/core/range","vs/editor/common/core/selection","vs/workbench/api/node/extHostTypes"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e,t){return e&&!t||!e&&t?!1:e||t?e.tabSize===t.tabSize&&e.insertSpaces===t.insertSpaces:!0}function l(e,t){return t>e?-1:e>t?1:0}!function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport"}(t.TextEditorRevealType||(t.TextEditorRevealType={}));var d=t.TextEditorRevealType,h=function(){function e(e,t,o,r,s){var c=this;this._id=e,this._model=t,this._codeEditor=null,this._focusTracker=r,this._modelService=s,this._codeEditorListeners=[],this._onSelectionChanged=new i.Emitter,this._onConfigurationChanged=new i.Emitter,this._lastSelection=[new a.Selection(1,1,1,1)],this._setConfiguration(this._readConfiguration(this._model,this._codeEditor)),this._modelListeners=[],this._modelListeners.push(this._model.addListener2(n.EventType.ModelOptionsChanged,function(e){c._setConfiguration(c._readConfiguration(c._model,c._codeEditor))})),this.setCodeEditor(o)}return e.prototype.dispose=function(){this._model=null,this._modelListeners=o.disposeAll(this._modelListeners),this._codeEditor=null,this._codeEditorListeners=o.disposeAll(this._codeEditorListeners)},e.prototype.getId=function(){return this._id},e.prototype.getModel=function(){return this._model},e.prototype.hasCodeEditor=function(e){return this._codeEditor===e},e.prototype.setCodeEditor=function(e){var t=this;if(!this.hasCodeEditor(e)&&(this._codeEditorListeners=o.disposeAll(this._codeEditorListeners),this._codeEditor=e,this._codeEditor)){var i=function(){t._lastSelection=t._codeEditor.getSelections(),t._onSelectionChanged.fire(t._lastSelection)};this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.CursorSelectionChanged,i)),a.Selection.selectionsArrEqual(this._lastSelection,this._codeEditor.getSelections())||i(),this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.EditorFocus,function(){t._focusTracker.onGainedFocus()})),this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.EditorBlur,function(){t._focusTracker.onLostFocus()})),this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.ConfigurationChanged,function(){t._setConfiguration(t._readConfiguration(t._model,t._codeEditor))})),this._setConfiguration(this._readConfiguration(this._model,this._codeEditor))}},e.prototype.isVisible=function(){return!!this._codeEditor},Object.defineProperty(e.prototype,"onSelectionChanged",{get:function(){return this._onSelectionChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onConfigurationChanged",{get:function(){return this._onConfigurationChanged.event},enumerable:!0,configurable:!0}),e.prototype.getSelections=function(){return this._codeEditor?this._codeEditor.getSelections():this._lastSelection},e.prototype.setSelections=function(e){return this._codeEditor?void this._codeEditor.setSelections(e):(this._lastSelection=e.map(a.Selection.liftSelection),void console.warn("setSelections on invisble editor"))},e.prototype.getConfiguration=function(){return this._configuration},e.prototype._setIndentConfiguration=function(e){if("auto"===e.tabSize||"auto"===e.insertSpaces){var t=this._modelService.getCreationOptions(),n=t.insertSpaces,i=t.tabSize;if("auto"!==e.insertSpaces&&"undefined"!=typeof e.insertSpaces&&(n="false"===e.insertSpaces?!1:Boolean(e.insertSpaces)),"auto"!==e.tabSize&&"undefined"!=typeof e.tabSize){var o=parseInt(e.tabSize,10);isNaN(o)||(i=o)}return void this._model.detectIndentation(n,i)}var r={};if("undefined"!=typeof e.insertSpaces&&(r.insertSpaces="false"===e.insertSpaces?!1:Boolean(e.insertSpaces)),"undefined"!=typeof e.tabSize){var o=parseInt(e.tabSize,10);isNaN(o)||(r.tabSize=o)}this._model.updateOptions(r)},e.prototype.setConfiguration=function(e){if(this._setIndentConfiguration(e),e.cursorStyle){var t=n.cursorStyleToString(e.cursorStyle);if(!this._codeEditor)return void console.warn("setConfiguration on invisible editor");this._codeEditor.updateOptions({cursorStyle:t})}},e.prototype.setDecorations=function(e,t){return this._codeEditor?void this._codeEditor.setDecorations(e,t):void console.warn("setDecorations on invisible editor")},e.prototype.revealRange=function(e,t){return this._codeEditor?void(t===d.Default?this._codeEditor.revealRange(e):t===d.InCenter?this._codeEditor.revealRangeInCenter(e):t===d.InCenterIfOutsideViewport?this._codeEditor.revealRangeInCenterIfOutsideViewport(e):console.warn("Unknown revealType")):void console.warn("revealRange on invisible editor")},e.prototype._readConfiguration=function(e,t){if(e.isDisposed())return this._configuration;var i=this._configuration?this._configuration.cursorStyle:n.TextEditorCursorStyle.Line;if(t){var o=t.getConfiguration();i=o.cursorStyle}var r=e.getOptions();return{insertSpaces:r.insertSpaces,tabSize:r.tabSize,cursorStyle:i}},e.prototype._setConfiguration=function(e){u(this._configuration,e)||(this._configuration=e,this._onConfigurationChanged.fire(this._configuration))},e.prototype.isFocused=function(){return this._codeEditor?this._codeEditor.isFocused():!1},e.prototype.matches=function(e){return e.getControl()===this._codeEditor},e.prototype.applyEdits=function(e,t,i){if(this._model.getVersionId()!==e)return console.warn("Model has changed in the meantime!"),!1;if(this._codeEditor){i===c.EndOfLine.CRLF?this._model.setEOL(n.EndOfLineSequence.CRLF):i===c.EndOfLine.LF&&this._model.setEOL(n.EndOfLineSequence.LF);var o=t.map(function(e){return{identifier:null,range:s.Range.lift(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers}});return this._codeEditor.executeEdits("MainThreadTextEditor",o)||!0}return console.warn("applyEdits on invisible editor"),!1},e}();t.MainThreadTextEditor=h;var p=function(){function e(e,t){var n=this;this._codeEditorService=e,this._modelService=t,this._toDispose=[],this._focusedTextEditorId=null,this._visibleTextEditorIds=[],this._editorModelChangeListeners=Object.create(null),this._model2TextEditors=Object.create(null),this._onTextEditorAdd=new i.Emitter,this._onTextEditorRemove=new i.Emitter,this._onDidUpdateTextEditors=new i.Emitter,this._onDidChangeFocusedTextEditor=new i.Emitter,this._focusTracker={onGainedFocus:function(){return n._updateFocusedTextEditor()},onLostFocus:function(){return n._updateFocusedTextEditor()}},this._modelService.onModelAdded(this._onModelAdded,this,this._toDispose),this._modelService.onModelRemoved(this._onModelRemoved,this,this._toDispose),this._codeEditorService.onCodeEditorAdd(this._onCodeEditorAdd,this,this._toDispose),this._codeEditorService.onCodeEditorRemove(this._onCodeEditorRemove,this,this._toDispose),this._updateMapping=new r.RunOnceScheduler(function(){return n._doUpdateMapping()},0),this._toDispose.push(this._updateMapping)}return e.prototype._nextId=function(){return String(++e._LAST_TEXT_EDITOR_ID)},e.prototype.dispose=function(){this._toDispose=o.disposeAll(this._toDispose)},e.prototype._onModelAdded=function(e){this._updateMapping.schedule()},e.prototype._onModelRemoved=function(e){this._updateMapping.schedule()},e.prototype._onCodeEditorAdd=function(e){var t=this;this._editorModelChangeListeners[e.getId()]=e.addListener2(n.EventType.ModelChanged,function(e){return t._updateMapping.schedule()}),this._updateMapping.schedule()},e.prototype._onCodeEditorRemove=function(e){this._editorModelChangeListeners[e.getId()].dispose(),delete this._editorModelChangeListeners[e.getId()],this._updateMapping.schedule()},e.prototype._doUpdateMapping=function(){var e=this,t=this._modelService.getModels();t=t.filter(function(e){return!e.isTooLargeForHavingARichMode()});var n=Object.create(null);t.forEach(function(e){n[e.getAssociatedResource().toString()]=e}),Object.keys(this._model2TextEditors).forEach(function(t){if(!n[t]){var i=e._model2TextEditors[t];delete e._model2TextEditors[t];for(var o=0;o<i.length;o++)e._onTextEditorRemove.fire(i[o]),i[o].dispose()}});var i=this._getVisibleModels();Object.keys(i).forEach(function(t){var n=i[t].model,o=i[t].codeEditors;e._model2TextEditors[t]||(e._model2TextEditors[t]=[]);for(var r=e._model2TextEditors[t];r.length>o.length;){var s=r.pop();e._onTextEditorRemove.fire(s),s.dispose()}for(var a=0;a<r.length;a++)r[a].setCodeEditor(o[a]);for(var a=r.length;a<o.length;a++){var c=new h(e._nextId(),n,o[a],e._focusTracker,e._modelService);r.push(c),e._onTextEditorAdd.fire(c)}}),t.forEach(function(t){var n=t.getAssociatedResource().toString();if(!i[n]){e._model2TextEditors[n]||(e._model2TextEditors[n]=[]);for(var o=e._model2TextEditors[n];o.length>1;){var r=o.pop();e._onTextEditorRemove.fire(r),r.dispose()}if(0===o.length){var s=new h(e._nextId(),t,null,e._focusTracker,e._modelService);o.push(s),e._onTextEditorAdd.fire(s)}else o[0].setCodeEditor(null)}}),this._printState(),this._visibleTextEditorIds=this._findVisibleTextEditorIds(),this._updateFocusedTextEditor(),this._onDidUpdateTextEditors.fire(void 0)},e.prototype._updateFocusedTextEditor=function(){this._setFocusedTextEditorId(this._findFocusedTextEditorId())},e.prototype._findFocusedTextEditorId=function(){for(var e=Object.keys(this._model2TextEditors),t=0,n=e.length;n>t;t++)for(var i=this._model2TextEditors[e[t]],o=0,r=i.length;r>o;o++)if(i[o].isFocused())return i[o].getId();return null},e.prototype._findVisibleTextEditorIds=function(){for(var e=[],t=Object.keys(this._model2TextEditors),n=0,i=t.length;i>n;n++)for(var o=this._model2TextEditors[t[n]],r=0,s=o.length;s>r;r++)o[r].isVisible()&&e.push(o[r].getId());return e.sort(),e},e.prototype._setFocusedTextEditorId=function(e){this._focusedTextEditorId!==e&&(this._focusedTextEditorId=e,this._printState(),this._onDidChangeFocusedTextEditor.fire(this._focusedTextEditorId))},e.prototype._printState=function(){},e.prototype._getVisibleModels=function(){var e={},t=this._codeEditorService.listCodeEditors();return t.sort(function(e,t){return l(e.getId(),t.getId())}),t.forEach(function(t){var n=t.getModel();if(n&&!n.isTooLargeForHavingARichMode()){var i=n.getAssociatedResource().toString();e[i]=e[i]||{model:n,codeEditors:[]},e[i].codeEditors.push(t)}}),e},e.prototype.getFocusedTextEditorId=function(){return this._focusedTextEditorId},e.prototype.getVisibleTextEditorIds=function(){return this._visibleTextEditorIds},Object.defineProperty(e.prototype,"onTextEditorAdd",{get:function(){return this._onTextEditorAdd.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextEditorRemove",{get:function(){return this._onTextEditorRemove.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidUpdateTextEditors",{get:function(){return this._onDidUpdateTextEditors.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onChangedFocusedTextEditor",{get:function(){return this._onDidChangeFocusedTextEditor.event},enumerable:!0,configurable:!0}),e.prototype.findTextEditorIdFor=function(e){for(var t=Object.keys(this._model2TextEditors),n=0,i=t.length;i>n;n++)for(var o=this._model2TextEditors[t[n]],r=0,s=o.length;s>r;r++)if(o[r].hasCodeEditor(e))return o[r].getId();return null},e.prototype.registerTextEditorDecorationType=function(e,t){this._codeEditorService.registerDecorationType(e,t)},e.prototype.removeTextEditorDecorationType=function(e){this._codeEditorService.removeDecorationType(e)},e._LAST_TEXT_EDITOR_ID=0,e}();t.MainThreadEditorsTracker=p}),define("vs/workbench/browser/actionBarRegistry",["require","exports","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/types","vs/base/common/collections","vs/base/browser/ui/actionbar/actionbar"],function(e,t,n,i,o,r,s){"use strict";function a(e){for(var t=0;t<e.length;t++){var n=e[t];o.isUndefinedOrNull(n.order)&&(n.order=t)}e=e.sort(function(e,t){var n=e.order,i=t.order;return i>n?-1:1});for(var i=-1,r=0;r<e.length;r++)if(e[r].id!==s.Separator.ID){i=r;break}if(-1===i)return[];e=e.slice(i);for(var a=e.length-1;a>=0;a--){var c=e[a].id===s.Separator.ID;if(!c)break;e.splice(a,1)}for(var u=!1,l=e.length-1;l>=0;l--){var c=e[l].id===s.Separator.ID;c&&!u?e.splice(l,1):c?c&&(u=!1):u=!0}return e}var c=function(){function e(){}return e.prototype.hasActions=function(e){return!1},e.prototype.getActions=function(e){return[]},e.prototype.hasSecondaryActions=function(e){return!1},e.prototype.getSecondaryActions=function(e){return[]},e.prototype.getActionItem=function(e,t){return null},e}();t.ActionBarContributor=c,t.Scope={GLOBAL:"global",VIEWLET:"viewlet",PANEL:"panel",EDITOR:"editor",VIEWER:"viewer"};var u=function(){function e(){this.registry=i.Registry.as(t.Extensions.Actionbar)}return e.prototype.toContext=function(e,t){return{viewer:e,element:t}},e.prototype.hasActions=function(e,n){for(var i=this.toContext(e,n),o=this.registry.getActionBarContributors(t.Scope.VIEWER),r=0;r<o.length;r++){var s=o[r];if(s.hasActions(i))return!0}return!1},e.prototype.getActions=function(e,i){for(var o=[],r=this.toContext(e,i),s=this.registry.getActionBarContributors(t.Scope.VIEWER),c=0;c<s.length;c++){var u=s[c];u.hasActions(r)&&o.push.apply(o,u.getActions(r))}return n.TPromise.as(a(o))},e.prototype.hasSecondaryActions=function(e,n){for(var i=this.toContext(e,n),o=this.registry.getActionBarContributors(t.Scope.VIEWER),r=0;r<o.length;r++){var s=o[r];if(s.hasSecondaryActions(i))return!0}return!1},e.prototype.getSecondaryActions=function(e,i){for(var o=[],r=this.toContext(e,i),s=this.registry.getActionBarContributors(t.Scope.VIEWER),c=0;c<s.length;c++){var u=s[c];u.hasSecondaryActions(r)&&o.push.apply(o,u.getSecondaryActions(r))}return n.TPromise.as(a(o))},e.prototype.getActionItem=function(e,n,i){for(var o=this.registry.getActionBarContributors(t.Scope.VIEWER),r=this.toContext(e,n),s=o.length-1;s>=0;s--){var a=o[s],c=a.getActionItem(r,i);if(c)return c}return null},e}();t.ContributableActionProvider=u,t.prepareActions=a,t.Extensions={Actionbar:"workbench.contributions.actionbar"};var l=function(){function e(){this.actionBarContributorConstructors=[],this.actionBarContributorInstances={}}return e.prototype.setInstantiationService=function(e){for(this.instantiationService=e;this.actionBarContributorConstructors.length>0;){var t=this.actionBarContributorConstructors.shift();this.createActionBarContributor(t.scope,t.ctor)}},e.prototype.createActionBarContributor=function(e,t){var n=this.instantiationService.createInstance(t),i=r.lookupOrInsert(this.actionBarContributorInstances,e,[]);i.push(n)},e.prototype.getContributors=function(e){return r.lookup(this.actionBarContributorInstances,e,[])},e.prototype.getActionBarActionsForContext=function(e,t){var n=[];return this.getContributors(e).forEach(function(e){e.hasActions(t)&&n.push.apply(n,e.getActions(t))}),n},e.prototype.getSecondaryActionBarActionsForContext=function(e,t){var n=[];return this.getContributors(e).forEach(function(e){e.hasSecondaryActions(t)&&n.push.apply(n,e.getSecondaryActions(t))}),n},e.prototype.getActionItemForContext=function(e,t,n){for(var i=this.getContributors(e),o=0;o<i.length;o++){var r=i[o],s=r.getActionItem(t,n);if(s)return s}return null},e.prototype.registerActionBarContributor=function(e,t){this.instantiationService?this.createActionBarContributor(e,t):this.actionBarContributorConstructors.push({scope:e,ctor:t})},e.prototype.getActionBarContributors=function(e){return this.getContributors(e).slice(0)},e}();i.Registry.add(t.Extensions.Actionbar,new l)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/actions/showPerformanceBox",["require","exports","vs/base/common/winjs.base","vs/base/browser/ui/timer/timer","vs/base/common/actions"],function(e,t,n,i,o){"use strict";var r=null,s=function(e){function t(t,n){e.call(this,t,n,null,!0)}return __extends(t,e),t.prototype.run=function(){return null===r&&(r=new i.TimeKeeperRenderer(function(){r.destroy(),r=null})),n.TPromise.as(!0)},t}(o.Action);t.ShowPerformanceBox=s}),define("vs/workbench/common/constants",["require","exports"],function(e,t){"use strict";t.Preferences={THEME:"workbench.theme"},t.Identifiers={WORKBENCH_CONTAINER:"workbench.main.container",ACTIVITYBAR_PART:"workbench.parts.activitybar",SIDEBAR_PART:"workbench.parts.sidebar",PANEL_PART:"workbench.parts.panel",EDITOR_PART:"workbench.parts.editor",STATUSBAR_PART:"workbench.parts.statusbar"}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/contributions",["require","exports","vs/platform/platform"],function(e,t,n){"use strict";var i;!function(e){e.Workbench="workbench.contributions.kind"}(i=t.Extensions||(t.Extensions={}));var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.registerWorkbenchContribution=function(t){e.prototype._register.call(this,t)},t.prototype.getWorkbenchContributions=function(){return e.prototype._getInstances.call(this)},t.prototype.setWorkbenchContributions=function(t){e.prototype._setInstances.call(this,t)},t}(n.BaseRegistry);n.Registry.add(i.Workbench,new o)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/objects"],function(e,t,n,i,o,r){"use strict";function s(e,t){if(!e)return null;if(e instanceof u)return e.getResource();var n=a(e,t);return n&&n.getResource()}function a(e,t){if(!e)return null;t&&o.isFunction(e.getModifiedInput)&&(e=e.getModifiedInput());var n=e;return n instanceof c&&o.areFunctions(n.setResource,n.setMime,n.setEncoding,n.getEncoding,n.getResource,n.getMime)?n:null}var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getName=function(){return null},t.prototype.getDescription=function(e){return null},t.prototype.getStatus=function(){return null},t.prototype.getPreferredEditorId=function(e){return e&&e.length>0?e[0]:null},t.prototype.matches=function(e){return this===e},t.prototype.dispose=function(){this.disposed=!0,this.emit("dispose"),e.prototype.dispose.call(this)},t.prototype.isDisposed=function(){return this.disposed},t}(i.EventEmitter);t.EditorInput=c,function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"}(t.EncodingMode||(t.EncodingMode={}));var u=(t.EncodingMode,function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(c));t.UntitledEditorInput=u;var l=function(e){function t(t,n){e.call(this),this._originalInput=t,this._modifiedInput=n}return __extends(t,e),Object.defineProperty(t.prototype,"originalInput",{get:function(){return this._originalInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifiedInput",{get:function(){return this._modifiedInput},enumerable:!0,configurable:!0}),t.prototype.getOriginalInput=function(){return this.originalInput},t.prototype.getModifiedInput=function(){return this.modifiedInput},t}(c);t.BaseDiffEditorInput=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.load=function(){return n.TPromise.as(this)},t.prototype.isResolved=function(){return!0},t.prototype.dispose=function(){this.emit("dispose"),e.prototype.dispose.call(this)},t}(i.EventEmitter);t.EditorModel=d;var h=function(){function e(){}return e.create=function(t){var n=new e;return n.preserveFocus=t.preserveFocus,n.forceOpen=t.forceOpen,n},e.prototype.matches=function(e){return this===e},e}();t.EditorOptions=h;var p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.from=function(e){var n=null;if(e&&e.options){if((e.options.selection||e.options.forceOpen||e.options.preserveFocus)&&(n=new t),e.options.selection){var i=e.options.selection;n.selection(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)}e.options.forceOpen&&(n.forceOpen=!0),e.options.preserveFocus&&(n.preserveFocus=!0)}return n},t.create=function(e){var n=new t;return n.preserveFocus=e.preserveFocus,n.forceActive=e.forceActive,n.forceOpen=e.forceOpen,e.selection&&(n.startLineNumber=e.selection.startLineNumber,n.startColumn=e.selection.startColumn,n.endLineNumber=e.selection.endLineNumber||e.selection.startLineNumber,n.endColumn=e.selection.endColumn||e.selection.startColumn),n},t.prototype.hasOptionsDefined=function(){return!!this.editorViewState||!o.isUndefinedOrNull(this.startLineNumber)&&!o.isUndefinedOrNull(this.startColumn)},t.prototype.selection=function(e,t,n,i){return void 0===n&&(n=e),void 0===i&&(i=t),this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i,this},t.prototype.viewState=function(e){this.editorViewState=e},t.prototype.apply=function(e){var t=!1;if(this.editorViewState)e.restoreViewState(this.editorViewState),t=!0;else if(!o.isUndefinedOrNull(this.startLineNumber)&&!o.isUndefinedOrNull(this.startColumn)){if(o.isUndefinedOrNull(this.endLineNumber)||o.isUndefinedOrNull(this.endColumn)){var n={lineNumber:this.startLineNumber,column:this.startColumn};e.setPosition(n),e.revealPositionInCenter(n)}else{var i={startLineNumber:this.startLineNumber,startColumn:this.startColumn,endLineNumber:this.endLineNumber,endColumn:this.endColumn};e.setSelection(i),e.revealRangeInCenter(i)}t=!0}return t},t.prototype.matches=function(n){return e.prototype.matches.call(this,n)===!0?!0:n?n instanceof t&&n.startLineNumber===this.startLineNumber&&n.startColumn===this.startColumn&&n.endLineNumber===this.endLineNumber&&n.endColumn===this.endColumn&&n.preserveFocus===this.preserveFocus&&n.forceOpen===this.forceOpen&&r.equals(n.editorViewState,this.editorViewState):!1},t}(h);t.TextEditorOptions=p;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.create=function(e){var n=new t;return n.autoRevealFirstChange=e.autoRevealFirstChange,n.preserveFocus=e.preserveFocus,n.forceOpen=e.forceOpen,n},t}(p);t.TextDiffEditorOptions=f,t.getUntitledOrFileResource=s,t.asFileEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/binaryEditorModel",["require","exports","vs/workbench/common/editor"],function(e,t,n){"use strict";var i=function(e){function t(t,n){e.call(this),this.name=n,this.resource=t}return __extends(t,e),t.prototype.getName=function(){return this.name},t.prototype.getResource=function(){return this.resource;
},t}(n.EditorModel);t.BinaryEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/diffEditorModel",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor"],function(e,t,n,i){"use strict";var o=function(e){function t(t,n){e.call(this),this._originalModel=t,this._modifiedModel=n}return __extends(t,e),Object.defineProperty(t.prototype,"originalModel",{get:function(){return this._originalModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifiedModel",{get:function(){return this._modifiedModel},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return n.TPromise.join([this._originalModel.load(),this._modifiedModel.load()]).then(function(){return e})},t.prototype.isResolved=function(){return this._originalModel.isResolved()&&this._modifiedModel.isResolved()},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(i.EditorModel);t.DiffEditorModel=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/iframeEditorInput",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor"],function(e,t,n,i){"use strict";var o=function(e){function t(t,n,i){e.call(this),this.resource=t,this.name=n,this.description=i}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getResource=function(){return this.resource},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.resolve=function(e){var t,i=this;if(this.cachedModel&&!e)t=n.TPromise.as(this.cachedModel);else if(this.cachedModel&&e)t=this.cachedModel.load();else{var o=this.createModel();t=o.load()}return t.then(function(e){return i.cachedModel=e,i.cachedModel})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.ID="workbench.editors.iFrameEditorInput",t}(i.EditorInput);t.IFrameEditorInput=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/iframeEditorModel",["require","exports","vs/workbench/common/editor"],function(e,t,n){"use strict";var i=function(e){function t(t){e.call(this),this._resource=t}return __extends(t,e),Object.defineProperty(t.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),t.prototype.setContents=function(e,t,n){this.head=e,this.body=t,this.tail=n},t.prototype.getContents=function(){return{head:this.head,body:this.body,tail:this.tail}},t}(n.EditorModel);t.IFrameEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/textDiffEditorModel",["require","exports","vs/workbench/common/editor/diffEditorModel"],function(e,t,n){"use strict";var i=function(e){function t(t,n){e.call(this,t,n),this.updateTextDiffEditorModel()}return __extends(t,e),t.prototype.load=function(){var t=this;return e.prototype.load.call(this).then(function(){return t.updateTextDiffEditorModel(),t})},t.prototype.updateTextDiffEditorModel=function(){this.originalModel.isResolved()&&this.modifiedModel.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})},Object.defineProperty(t.prototype,"textDiffEditorModel",{get:function(){return this._textDiffEditorModel},enumerable:!0,configurable:!0}),t.prototype.isResolved=function(){return!!this._textDiffEditorModel},t.prototype.dispose=function(){this._textDiffEditorModel=null,e.prototype.dispose.call(this)},t}(n.DiffEditorModel);t.TextDiffEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/textEditorModel",["require","exports","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/workbench/common/editor","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/editor/common/model/textModel"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(e){function t(t,n,o){var r=this;if(e.call(this),this.modelService=t,this.modeService=n,this.textEditorModelHandle=o,o){var s=t.getModel(o);if(!s)throw new Error("Document with resource "+o.toString()+" does not exist");var a=s.addListener(i.EventType.ModelDispose,function(){r.textEditorModelHandle=null,a(),r.dispose()})}}return __extends(t,e),Object.defineProperty(t.prototype,"textEditorModel",{get:function(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null},enumerable:!0,configurable:!0}),t.prototype.createTextEditorModel=function(e,t,i){var o=this,r=this.getFirstLineText(e);return n.TPromise.any([n.TPromise.timeout(50),this.getOrCreateMode(this.modeService,i,r)]).then(function(){var n=o.modelService.createModel(e,o.getOrCreateMode(o.modeService,i,r),t);return o.createdEditorModel=!0,o.textEditorModelHandle=n.getAssociatedResource(),o})},t.prototype.getFirstLineText=function(e){var t=e.substr(0,100),n=t.indexOf("\r");0>n&&(n=t.length);var i=t.indexOf("\n");return 0>i&&(i=t.length),t=t.substr(0,Math.min(n,i))},t.prototype.getOrCreateMode=function(e,t,n){return e.getOrCreateMode(t)},t.prototype.updateTextEditorModel=function(e){if(this.textEditorModel){var t=a.RawText.fromStringWithModelOptions(e,this.textEditorModel);this.textEditorModel.equals(t)||this.textEditorModel.setValueFromRawText(t)}},t.prototype.getValue=function(){var e=this.textEditorModel;return e?e.getValue(i.EndOfLinePreference.TextDefined,!0):null},t.prototype.dispose=function(){this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=null,this.createdEditorModel=!1,e.prototype.dispose.call(this)},t.prototype.isResolved=function(){return!!this.textEditorModelHandle},t=__decorate([__param(0,s.IModelService),__param(1,r.IModeService)],t)}(o.EditorModel);t.BaseTextEditorModel=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor/diffEditorInput",["require","exports","vs/nls!vs/workbench/common/editor/diffEditorInput","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/labels","vs/base/common/mime","vs/base/common/events","vs/workbench/common/editor","vs/workbench/common/editor/textEditorModel","vs/workbench/common/editor/diffEditorModel","vs/workbench/common/editor/textDiffEditorModel"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";function h(e,t,i){var o=r.getPathLabel(e.fsPath,i),s=r.getPathLabel(t.fsPath,i);return n.localize(0,null,o,s)}var p=function(e){function t(t,n,i,o,r){e.call(this,i,o),this.name=t,this.description=n,this.forceOpenAsBinary=r,this._toUnbind=[],this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this._toUnbind.push(this.originalInput.addListener(a.EventType.DISPOSE,function(){e.isDisposed()||e.dispose()})),this._toUnbind.push(this.modifiedInput.addListener(a.EventType.DISPOSE,function(){e.isDisposed()||e.dispose()}))},Object.defineProperty(t.prototype,"toUnbind",{get:function(){return this._toUnbind},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.getStatus=function(){if(this.modifiedInput){var t=this.modifiedInput.getStatus();if(t)return t}if(this.originalInput){var n=this.originalInput.getStatus();if(n)return n}return e.prototype.getStatus.call(this)},t.prototype.setOriginalInput=function(e){this.originalInput=e},t.prototype.setModifiedInput=function(e){this.modifiedInput=e},t.prototype.resolve=function(e){var t,n=this;return t=this.cachedModel&&!e?i.TPromise.as(this.cachedModel):this.createModel(e),t.then(function(e){return n.cachedModel&&n.cachedModel.dispose(),n.cachedModel=e,n.cachedModel})},t.prototype.getPreferredEditorId=function(e){var t=this.forceOpenAsBinary||this.isBinary(this.originalInput)||this.isBinary(this.modifiedInput);return t?"workbench.editors.binaryResourceDiffEditor":"workbench.editors.textDiffEditor"},t.prototype.isBinary=function(e){var t,n=e;return o.isFunction(n.getMime)&&(t=n.getMime()),t&&s.isBinaryMime(t)},t.prototype.createModel=function(e){return i.TPromise.join([this.originalInput.resolve(e),this.modifiedInput.resolve(e)]).then(function(e){var t=e[0],n=e[1];return n instanceof u.BaseTextEditorModel&&t instanceof u.BaseTextEditorModel?new d.TextDiffEditorModel(t,n):new l.DiffEditorModel(t,n)})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n){if(!(n instanceof t))return!1;var i=n;return this.originalInput.matches(i.originalInput)&&this.modifiedInput.matches(i.modifiedInput)}return!1},t.prototype.dispose=function(){for(;this._toUnbind.length;)this._toUnbind.pop()();this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),this.originalInput.dispose(),this.modifiedInput.dispose(),e.prototype.dispose.call(this)},t.ID="workbench.editors.diffEditorInput",t}(c.BaseDiffEditorInput);t.DiffEditorInput=p,t.toDiffLabel=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/resourceEditorModel",["require","exports","vs/workbench/common/editor/textEditorModel","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,n,i){e.call(this,i,n,t)}return __extends(t,e),t=__decorate([__param(1,i.IModeService),__param(2,o.IModelService)],t)}(n.BaseTextEditorModel);t.ResourceEditorModel=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/resourceEditorInput",["require","exports","vs/base/common/winjs.base","vs/base/common/async","vs/workbench/common/editor","vs/workbench/common/editor/resourceEditorModel","vs/base/common/events","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i,o,r){e.call(this),this.modelService=o,this.instantiationService=r,this.name=t,this.description=n,this.resource=i}return __extends(t,e),t.registerResourceContentProvider=function(e,n){var i=t.registry[e];return i?i.unshift(n):(i=[n],t.registry[e]=i),{dispose:function(){var i=t.registry[e],o=i.indexOf(n);o>=0&&(i.splice(o,1),0===i.length&&delete t.registry[e])}}},t.getOrCreateModel=function(e,o){var r=e.getModel(o);if(r)return n.TPromise.as(r);var s=t.loadingModels[o.toString()];if(!s){var a=t.registry[o.scheme];if(!a)return n.TPromise.wrapError("No model with uri '"+o+"' nor a resolver for the scheme '"+o.scheme+"'.");t.loadingModels[o.toString()]=s=new n.TPromise(function(e,t){var n,r;i.sequence(a.map(function(e){return function(){return n?void 0:e.provideTextContent(o).then(function(e){n=e},function(e){r=e})}})).then(function(){!n&&r?t(r):e(n)},t)},function(){}),s.then(function(){return delete t.loadingModels[o.toString()]},function(){return delete t.loadingModels[o.toString()]})}return s},t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.resolve=function(e){var i=this;return this.cachedModel?n.TPromise.as(this.cachedModel):t.getOrCreateModel(this.modelService,this.resource).then(function(){var e=i.instantiationService.createInstance(r.ResourceEditorModel,i.resource),t=e.addListener(s.EventType.DISPOSE,function(){i.cachedModel=null,t(),i.dispose()});return e.load().then(function(e){return i.cachedModel=e,i.cachedModel})})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.loadingModels=Object.create(null),t.registry=Object.create(null),t.ID="workbench.editors.resourceEditorInput",t=__decorate([__param(3,c.IModelService),__param(4,a.IInstantiationService)],t)}(o.EditorInput);t.ResourceEditorInput=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/stringEditorModel",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor/textEditorModel","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/editor/common/core/editOperation"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i,o,r){e.call(this,r,o),this.value=t,this.mime=n,this.resource=i}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.value=e,this.textEditorModel&&this.textEditorModel.setValue(e)},t.prototype.append=function(e){if(this.value+=e,this.textEditorModel){var t=this.textEditorModel,n=t.getLineCount(),i=t.getLineMaxColumn(n);t.applyEdits([c.EditOperation.insert(new o.Position(n,i),e)])}},t.prototype.clearValue=function(){if(this.value="",this.textEditorModel){var e=this.textEditorModel,t=e.getLineCount();e.applyEdits([c.EditOperation["delete"](new r.Range(1,1,t,e.getLineMaxColumn(t)))])}},t.prototype.trim=function(e){if(this.textEditorModel){var t=this.textEditorModel,n=t.getLineCount();if(n>e){t.applyEdits([c.EditOperation["delete"](new r.Range(1,1,n-e+1,1))]);var i=t.getValue();return this.value=i,this.value}}return null},t.prototype.getMime=function(){return this.mime},t.prototype.load=function(){return this.textEditorModel?(this.updateTextEditorModel(this.value),n.TPromise.as(this)):this.createTextEditorModel(this.value,this.resource,this.mime)},t=__decorate([__param(3,s.IModeService),__param(4,a.IModelService)],t)}(i.BaseTextEditorModel);t.StringEditorModel=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/stringEditorInput",["require","exports","vs/base/common/winjs.base","vs/base/common/mime","vs/workbench/common/editor","vs/workbench/common/editor/stringEditorModel","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,o,r,s,a){e.call(this),this.instantiationService=a,this.name=t,this.description=n,this.value=o,this.mime=r||i.MIME_TEXT,this.singleton=s}return __extends(t,e),t.prototype.getResource=function(){return null},t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.getValue=function(){return this.value},t.prototype.getMime=function(){return this.mime},t.prototype.setValue=function(e){this.value=e,this.cachedModel&&this.cachedModel.setValue(e)},t.prototype.clearValue=function(){this.value="",this.cachedModel&&this.cachedModel.clearValue()},t.prototype.append=function(e){this.value+=e,this.cachedModel&&this.cachedModel.append(e)},t.prototype.trim=function(e){if(this.cachedModel){var t=this.cachedModel.trim(e);if(null!==t)return this.value=t,this.value}return null},t.prototype.resolve=function(e){var t=this;if(this.cachedModel)return n.TPromise.as(this.cachedModel);var i=this.instantiationService.createInstance(r.StringEditorModel,this.value,this.mime,this.getResource());return i.load().then(function(e){return t.cachedModel=e,t.cachedModel})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.singleton&&this.singleton&&i.mime===this.mime?!0:i.value===this.value&&i.mime===this.mime&&i.description===this.description&&i.name===this.name}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.ID="workbench.editors.stringEditorInput",t=__decorate([__param(5,s.IInstantiationService)],t)}(o.EditorInput);t.StringEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/events",["require","exports","vs/base/common/events"],function(e,t,n){"use strict";var i=function(){function e(){}return e.EDITOR_OPENED="editorOpened",e.EDITOR_CLOSED="editorClosed",e.EDITOR_INPUT_OPENING="editorInputOpening",e.EDITOR_INPUT_CHANGING="editorInputChanging",e.EDITOR_OPTIONS_CHANGING="editorOptionsChanging",e.EDITOR_INPUT_CHANGED="editorInputChanged",e.EDITOR_INPUT_STATE_CHANGED="editorInputStateChanged",e.EDITOR_SET_INPUT_ERROR="editorSetInputError",e.EDITOR_POSITION_CHANGED="editorPositionChanged",e.TEXT_EDITOR_SELECTION_CHANGED="textEditorSelectionChanged",e.TEXT_EDITOR_MODE_CHANGED="textEditorModeChanged",e.TEXT_EDITOR_CONTENT_CHANGED="textEditorContentChanged",e.TEXT_EDITOR_CONTENT_OPTIONS_CHANGED="textEditorContentOptionsChanged",e.TEXT_EDITOR_CONFIGURATION_CHANGED="textEditorOptionsChanged",e.COMPOSITE_OPENING="compositeOpening",e.COMPOSITE_OPENED="compositeOpened",e.COMPOSITE_CLOSED="compositeClosed",e.WORKBENCH_CREATED="workbenchCreated",e.WORKBENCH_DISPOSING="workbenchDisposing",e.WORKBENCH_DISPOSED="workbenchDisposed",e.UNTITLED_FILE_DIRTY="untitledFileDirty",e.UNTITLED_FILE_DELETED="untitledFileDeleted",e.RESOURCE_ENCODING_CHANGED="resourceEncodingChanged",e.WORKBENCH_OPTIONS_CHANGED="workbenchOptionsChanged",e}();t.EventType=i;var o=function(e){function t(t,n,i,o,r,s){e.call(this,s),this.editor=t,this.editorId=n,this.editorInput=i,this.editorOptions=o,this.position=r}return __extends(t,e),t.prototype.prevent=function(){this.prevented=!0},t.prototype.isPrevented=function(){return this.prevented},t}(n.Event);t.EditorEvent=o;var r=function(e){function t(t,n){e.call(this,n),this.editorInput=t}return __extends(t,e),t}(n.Event);t.EditorInputEvent=r;var s=function(e){function t(t,n,i,o,r,s,a){e.call(this,n,i,o,r,s,a),this.selection=t}return __extends(t,e),t}(o);t.TextEditorSelectionEvent=s;var a=function(e){function t(t,n,i,o){e.call(this,o),this.key=t,this.before=n,this.after=i}return __extends(t,e),t}(n.Event);t.OptionsChangeEvent=a;var c=function(e){function t(t,n){e.call(this,n),this.actionId=t}return __extends(t,e),t}(n.Event);t.CommandEvent=c;var u=function(e){function t(t,n){e.call(this,n),this.compositeId=t}return __extends(t,e),t}(n.Event);t.CompositeEvent=u;var l=function(e){function t(t,n){e.call(this,n),this.resource=t}return __extends(t,e),t}(n.Event);t.ResourceEvent=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(l);t.UntitledEditorEvent=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/untitledEditorModel",["require","exports","vs/workbench/common/editor/stringEditorModel","vs/editor/common/editorCommon","vs/workbench/common/events","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i,o,r,s,a,c){e.call(this,t,n,i,r,s),this.eventService=a,this.configurationService=c,this.dirty=o,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.configurationChangeListenerUnbind=this.configurationService.addListener(r.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)})},t.prototype.onConfigurationChange=function(e){this.configuredEncoding=e&&e.files&&e.files.encoding},t.prototype.getValue=function(){return this.textEditorModel?this.textEditorModel.getValue(i.EndOfLinePreference.TextDefined,!0):null},t.prototype.getModeId=function(){return this.textEditorModel?this.textEditorModel.getModeId():null},t.prototype.getEncoding=function(){return this.preferredEncoding||this.configuredEncoding},t.prototype.setEncoding=function(e){var t=this.getEncoding();this.preferredEncoding=e,t!==this.preferredEncoding&&this.eventService.emit(o.EventType.RESOURCE_ENCODING_CHANGED,new o.ResourceEvent(this.resource))},t.prototype.isDirty=function(){return this.dirty},t.prototype.load=function(){var t=this;return e.prototype.load.call(this).then(function(e){return t.configurationService.loadConfiguration().then(function(n){return t.configuredEncoding=n&&n.files&&n.files.encoding,t.textModelChangeListener=t.textEditorModel.addListener(i.EventType.ModelContentChanged,function(e){return t.onModelContentChanged(e)}),t.dirty&&setTimeout(function(){t.eventService.emit(o.EventType.UNTITLED_FILE_DIRTY,new o.UntitledEditorEvent(t.resource))},0),e})})},t.prototype.onModelContentChanged=function(e){this.dirty||(this.dirty=!0,this.eventService.emit(o.EventType.UNTITLED_FILE_DIRTY,new o.UntitledEditorEvent(this.resource)))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.textModelChangeListener&&(this.textModelChangeListener(),this.textModelChangeListener=null),this.configurationChangeListenerUnbind&&(this.configurationChangeListenerUnbind(),this.configurationChangeListenerUnbind=null),this.eventService.emit(o.EventType.UNTITLED_FILE_DELETED,new o.UntitledEditorEvent(this.resource))},t=__decorate([__param(4,a.IModeService),__param(5,c.IModelService),__param(6,s.IEventService),__param(7,r.IConfigurationService)],t)}(n.StringEditorModel);t.UntitledEditorModel=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/common/editor/untitledEditorInput",["require","exports","vs/base/common/winjs.base","vs/base/common/mime","vs/base/common/labels","vs/base/common/paths","vs/workbench/common/editor","vs/workbench/common/editor/untitledEditorModel","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle","vs/platform/workspace/common/workspace","vs/editor/common/services/modeService"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(e){function t(t,n,i,o,r,s,a){e.call(this),this.instantiationService=o,this.lifecycleService=r,this.contextService=s,this.modeService=a,this.resource=t,this.hasAssociatedFilePath=n,this.modeId=i}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getResource=function(){return this.resource},t.prototype.getName=function(){return this.hasAssociatedFilePath?r.basename(this.resource.fsPath):this.resource.fsPath},t.prototype.getDescription=function(){return this.hasAssociatedFilePath?o.getPathLabel(r.dirname(this.resource.fsPath),this.contextService):null},t.prototype.isDirty=function(){return this.cachedModel&&this.cachedModel.isDirty()},t.prototype.getStatus=function(){var e=this.isDirty();return e?{state:"dirty",decoration:"●"}:null},t.prototype.suggestFileName=function(){if(!this.hasAssociatedFilePath){var e=this.getMime();if(e&&e!==i.MIME_TEXT)return i.suggestFilename(e,this.getName())}return this.getName()},t.prototype.getMime=function(){return this.cachedModel?this.modeService.getMimeForMode(this.cachedModel.getModeId()):null},t.prototype.getEncoding=function(){return this.cachedModel?this.cachedModel.getEncoding():null},t.prototype.setEncoding=function(e,t){this.cachedModel&&this.cachedModel.setEncoding(e)},t.prototype.resolve=function(e){var t=this;if(this.cachedModel)return n.TPromise.as(this.cachedModel);var i=this.createModel();return i.load().then(function(e){return t.cachedModel=e,t.cachedModel})},t.prototype.createModel=function(){var e="",t=this.modeId;if(!t&&this.hasAssociatedFilePath){var n=i.guessMimeTypes(this.resource.fsPath)[0];i.isUnspecific(n)||(t=n)}return this.instantiationService.createInstance(a.UntitledEditorModel,e,t||i.MIME_TEXT,this.resource,this.hasAssociatedFilePath)},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null)},t.ID="workbench.editors.untitledEditorInput",t.SCHEMA="untitled",t=__decorate([__param(3,c.IInstantiationService),__param(4,u.ILifecycleService),__param(5,l.IWorkspaceContextService),__param(6,d.IModeService)],t)}(s.UntitledEditorInput);t.UntitledEditorInput=h}),define("vs/workbench/common/memento",["require","exports","vs/base/common/types","vs/platform/storage/common/storage"],function(e,t,n,i){"use strict";!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.Scope||(t.Scope={}));var o=t.Scope,r=function(){function e(t){this.id=e.COMMON_PREFIX+t.toLowerCase()}return e.prototype.getMemento=function(t,n){if(void 0===n&&(n=o.GLOBAL),n===o.WORKSPACE){var i=e.workspaceMementos[this.id];return i||(i=new s(this.id,n,t),e.workspaceMementos[this.id]=i),i.getMemento()}var r=e.globalMementos[this.id];return r||(r=new s(this.id,n,t),e.globalMementos[this.id]=r),r.getMemento()},e.prototype.saveMemento=function(){e.globalMementos[this.id]&&e.globalMementos[this.id].save(),e.workspaceMementos[this.id]&&e.workspaceMementos[this.id].save()},e.globalMementos={},e.workspaceMementos={},e.COMMON_PREFIX="memento/",e}();t.Memento=r;var s=function(){function e(e,t,n){this.storageService=n,this.id=e,this.scope=t,this.mementoObj=this.loadMemento()}return e.prototype.getMemento=function(){return this.mementoObj},e.prototype.loadMemento=function(){var e=this.scope===o.GLOBAL?i.StorageScope.GLOBAL:i.StorageScope.WORKSPACE,t=this.storageService.get(this.id,e);return t?JSON.parse(t):{}},e.prototype.save=function(){var e=this.scope===o.GLOBAL?i.StorageScope.GLOBAL:i.StorageScope.WORKSPACE;n.isEmptyObject(this.mementoObj)?this.storageService.remove(this.id,e):this.storageService.store(this.id,JSON.stringify(this.mementoObj),e)},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/component",["require","exports","vs/base/common/eventEmitter","vs/workbench/common/memento"],function(e,t,n,i){"use strict";var o=function(e){function t(t){e.call(this),this._toUnbind=[],this.id=t,this.componentMemento=new i.Memento(this.id)}return __extends(t,e),Object.defineProperty(t.prototype,"toUnbind",{get:function(){return this._toUnbind},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return this.id},t.prototype.getMemento=function(e,t){return void 0===t&&(t=i.Scope.GLOBAL),this.componentMemento.getMemento(e,t)},t.prototype.saveMemento=function(){this.componentMemento.saveMemento()},t.prototype.shutdown=function(){this.saveMemento()},t.prototype.dispose=function(){for(;this._toUnbind.length;)this._toUnbind.pop()();e.prototype.dispose.call(this)},t}(n.EventEmitter);t.WorkbenchComponent=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,
new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/composite",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/common/component","vs/workbench/common/events","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/descriptors","vs/platform/selection/common/selection"],function(e,t,n,i,o,r,s,a,c){"use strict";t.EventType={INTERNAL_COMPOSITE_TITLE_AREA_UPDATE:"internalCompositeTitleAreaUpdate"};var u=function(e){function o(t,n){e.call(this,t),this._telemetryService=n,this._telemetryData={},this.visible=!1}return __extends(o,e),o.prototype.getTitle=function(){return null},Object.defineProperty(o.prototype,"telemetryService",{get:function(){return this._telemetryService},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"telemetryData",{get:function(){return this._telemetryData},enumerable:!0,configurable:!0}),o.prototype.create=function(e){return this.parent=e,n.TPromise.as(null)},o.prototype.getContainer=function(){return this.parent},o.prototype.setVisible=function(e){if(this.visible=e,e)this._telemetryData={},this._telemetryData.startTime=new Date;else if(this._telemetryData.timeSpent=(Date.now()-this._telemetryData.startTime)/1e3,delete this._telemetryData.startTime,this._telemetryService&&this._telemetryService.publicLog){var t="compositeShown";this._telemetryData.composite=this.getId(),this._telemetryService.publicLog(t,this._telemetryData)}return n.TPromise.as(null)},o.prototype.focus=function(){},o.prototype.getActions=function(){return[]},o.prototype.getSecondaryActions=function(){return[]},o.prototype.getActionItem=function(e){return null},o.prototype.getActionRunner=function(){return this.actionRunner||(this.actionRunner=new i.ActionRunner),this.actionRunner},o.prototype.updateTitleArea=function(){this.emit(t.EventType.INTERNAL_COMPOSITE_TITLE_AREA_UPDATE,new r.CompositeEvent(this.getId()))},o.prototype.getSelection=function(){return c.Selection.EMPTY},o.prototype.isVisible=function(){return this.visible},o.prototype.getControl=function(){return null},o=__decorate([__param(1,s.ITelemetryService)],o)}(o.WorkbenchComponent);t.Composite=u;var l=function(e){function t(t,n,i,o,r,s){e.call(this,t,n),this.id=i,this.name=o,this.cssClass=r,this.order=s}return __extends(t,e),t}(a.AsyncDescriptor);t.CompositeDescriptor=l;var d=function(){function e(){this.composits=[]}return e.prototype.registerComposite=function(e){null===this.compositById(e.id)&&this.composits.push(e)},e.prototype.getComposite=function(e){return this.compositById(e)},e.prototype.getComposits=function(){return this.composits.slice(0)},e.prototype.setComposits=function(e){this.composits=e},e.prototype.compositById=function(e){for(var t=0;t<this.composits.length;t++)if(this.composits[t].id===e)return this.composits[t];return null},e}();t.CompositeRegistry=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/panel",["require","exports","vs/platform/platform","vs/workbench/browser/composite"],function(e,t,n,i){"use strict";var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i.Composite);t.Panel=o;var r=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t}(i.CompositeDescriptor);t.PanelDescriptor=r;var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.registerPanel=function(t){e.prototype.registerComposite.call(this,t)},t.prototype.getPanel=function(e){return this.getComposite(e)},t.prototype.getPanels=function(){return this.getComposits()},t.prototype.setDefaultPanelId=function(e){this.defaultPanelId=e},t.prototype.getDefaultPanelId=function(){return this.defaultPanelId},t}(i.CompositeRegistry);t.PanelRegistry=s,t.Extensions={Panels:"workbench.contributions.panels"},n.Registry.add(t.Extensions.Panels,new s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/part",["require","exports","vs/base/browser/builder","vs/workbench/common/component","vs/css!./media/part"],function(e,t,n,i){"use strict";var o=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.create=function(e){this.parent=e,this.titleArea=this.createTitleArea(e),this.contentArea=this.createContentArea(e),this.statusArea=this.createStatusArea(e),this.partLayout=new s(this.parent,this.titleArea,this.contentArea,this.statusArea)},t.prototype.getContainer=function(){return this.parent},t.prototype.createTitleArea=function(e){return null},t.prototype.getTitleArea=function(){return this.titleArea},t.prototype.createContentArea=function(e){return null},t.prototype.getContentArea=function(){return this.contentArea},t.prototype.createStatusArea=function(e){return null},t.prototype.getStatusArea=function(){return this.statusArea},t.prototype.layout=function(e){return this.partLayout.layout(e)},t.prototype.getLayout=function(){return this.partLayout},t}(i.WorkbenchComponent);t.Part=o;var r=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(o);t.EmptyPart=r;var s=function(){function e(e,t,n,i){this.container=e,this.titleArea=t,this.contentArea=n,this.statusArea=i}return e.prototype.computeStyle=function(){var e=this.container.getComputedStyle();if(this.containerStyle={borderLeftWidth:parseInt(e.getPropertyValue("border-left-width"),10),borderRightWidth:parseInt(e.getPropertyValue("border-right-width"),10),borderTopWidth:parseInt(e.getPropertyValue("border-top-width"),10),borderBottomWidth:parseInt(e.getPropertyValue("border-bottom-width"),10)},this.titleArea){var t=this.titleArea.getComputedStyle();this.titleStyle={display:t.getPropertyValue("display"),height:this.titleArea.getTotalSize().height}}if(this.statusArea){var n=this.statusArea.getComputedStyle();this.statusStyle={display:n.getPropertyValue("display"),height:this.statusArea.getTotalSize().height}}},e.prototype.layout=function(e){this.containerStyle||this.computeStyle();var t,i=e.width-(this.containerStyle.borderLeftWidth+this.containerStyle.borderRightWidth),o=e.height-(this.containerStyle.borderTopWidth+this.containerStyle.borderBottomWidth),r=[];t=this.titleArea&&"none"!==this.titleStyle.display?new n.Dimension(i,Math.min(o,this.titleStyle.height)):new n.Dimension(0,0);var s;this.statusArea&&"none"!==this.statusStyle.display?(this.statusArea.getHTMLElement().style.height=this.statusArea.getHTMLElement().style.width="",s=new n.Dimension(i,Math.min(o-t.height,this.statusStyle.height))):s=new n.Dimension(0,0);var a=new n.Dimension(i,o-t.height-s.height);return r.push(t),r.push(a),r.push(s),this.contentArea&&this.contentArea.size(a.width,a.height),r},e}();t.PartLayout=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/baseEditor",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/browser/actionBarRegistry","vs/base/common/types","vs/workbench/common/events","vs/platform/platform","vs/workbench/browser/panel","vs/workbench/common/editor","vs/platform/editor/common/editor","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),Object.defineProperty(t.prototype,"input",{get:function(){return this._input},enumerable:!0,configurable:!0}),t.prototype.getInput=function(){return this._input||null},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.getOptions=function(){return this._options||null},t.prototype.setInput=function(e,t){return this._input=e,this._options=t,n.TPromise.as(null)},t.prototype.clearInput=function(){this._input=null,this._options=null},t.prototype.create=function(t){var n=e.prototype.create.call(this,t);return this.createEditor(t),n},t.prototype.setVisible=function(t,n){void 0===n&&(n=null);var i=e.prototype.setVisible.call(this,t);return this._position=n,i},t.prototype.changePosition=function(e){this._position=e,this.emit(s.EventType.EDITOR_POSITION_CHANGED,new s.EditorEvent(this,this.getId(),this.input,this.options,this.position))},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.supportsSplitEditor=function(){return!1},t.prototype.dispose=function(){this._input=null,this._options=null,e.prototype.dispose.call(this)},t}(c.Panel);t.BaseEditor=h;var p=function(e){function t(t,n,i,o){e.call(this,i,o),this.id=t,this.name=n}return __extends(t,e),t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.describes=function(e){return e instanceof h&&e.getId()===this.id},t}(d.AsyncDescriptor);t.EditorDescriptor=p,t.Extensions={Editors:"workbench.contributions.editors"};var f="__$inputDescriptors",m=function(){function e(){this.editorInputFactoryConstructors=Object.create(null),this.editorInputFactoryInstances=Object.create(null),this.editors=[]}return e.prototype.setInstantiationService=function(e){this.instantiationService=e;for(var t in this.editorInputFactoryConstructors){var n=this.editorInputFactoryConstructors[t];this.createEditorInputFactory(t,n)}this.editorInputFactoryConstructors={}},e.prototype.createEditorInputFactory=function(e,t){var n=this.instantiationService.createInstance(t);this.editorInputFactoryInstances[e]=n},e.prototype.registerEditor=function(e,t){var n=[];r.isArray(t)?n=t:n.push(t),e[f]=n,this.editors.push(e)},e.prototype.getEditor=function(e){var t=this,n=function(e,i){for(var o=[],r=0;r<t.editors.length;r++)for(var s=t.editors[r],a=s[f],c=0;c<a.length;c++){var u=a[c].ctor;if(!i&&e.constructor===u){o.push(s);break}if(i&&e instanceof u){o.push(s);break}}return i||0!==o.length?i?o:o:n(e,!0)},i=n(e);if(i&&i.length>0){var o=e.getPreferredEditorId(i.map(function(e){return e.getId()}));return o?this.getEditorById(o):i[0]}return null},e.prototype.getEditorById=function(e){for(var t=0;t<this.editors.length;t++){var n=this.editors[t];if(n.getId()===e)return n}return null},e.prototype.getEditors=function(){return this.editors.slice(0)},e.prototype.setEditors=function(e){this.editors=e},e.prototype.getEditorInputs=function(){for(var e=[],t=0;t<this.editors.length;t++){var n=this.editors[t],i=n[f];e.push.apply(e,i.map(function(e){return e.ctor}))}return e},e.prototype.registerDefaultFileInput=function(e){this.defaultFileInputDescriptor=e},e.prototype.getDefaultFileInput=function(){return this.defaultFileInputDescriptor},e.prototype.registerEditorInputFactory=function(e,t){this.instantiationService?this.createEditorInputFactory(e,t):this.editorInputFactoryConstructors[e]=t},e.prototype.getEditorInputFactory=function(e){return this.editorInputFactoryInstances[e]},e}();a.Registry.add(t.Extensions.Editors,new m);var v=function(e){function t(){e.call(this),this.mapEditorInputActionContextToPrimaryActions=this.createPositionArray(),this.mapEditorInputActionContextToSecondaryActions=this.createPositionArray()}return __extends(t,e),t.prototype.createPositionArray=function(){for(var e=[],t=0;t<l.POSITIONS.length;t++)e[t]={};return e},t.prototype.toId=function(e){return e.editor.getId()+e.input.getId()},t.prototype.clearInputsFromCache=function(e,t){t?this.doClearInputsFromCache(this.mapEditorInputActionContextToPrimaryActions[e]):this.doClearInputsFromCache(this.mapEditorInputActionContextToSecondaryActions[e])},t.prototype.doClearInputsFromCache=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n.forEach(function(e){e.input=null,e.position=null})}},t.prototype.hasActions=function(e){return this.checkEditorContext(e)?this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)]?!0:this.hasActionsForEditorInput(e):!1},t.prototype.getActions=function(e){if(!this.checkEditorContext(e))return[];this.clearInputsFromCache(e.position,!0);var t=e.input,n=e.position,i=this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)];if(i)return i.forEach(function(e){e.input=t,e.position=n}),i;var o=this.getActionsForEditorInput(e);return o.forEach(function(e){e.input=t,e.position=n}),this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)]=o,o},t.prototype.hasSecondaryActions=function(e){return this.checkEditorContext(e)?this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)]?!0:this.hasSecondaryActionsForEditorInput(e):!1},t.prototype.getSecondaryActions=function(e){if(!this.checkEditorContext(e))return[];this.clearInputsFromCache(e.position,!1);var t=e.input,n=e.position,i=this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)];if(i)return i.forEach(function(e){e.input=t,e.position=n}),i;var o=this.getSecondaryActionsForEditorInput(e);return o.forEach(function(e){e.input=t,e.position=n}),this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)]=o,o},t.prototype.checkEditorContext=function(e){return e&&e.input instanceof u.EditorInput&&e.editor instanceof h&&!r.isUndefinedOrNull(e.position)},t.prototype.hasActionsForEditorInput=function(e){return!1},t.prototype.getActionsForEditorInput=function(e){return[]},t.prototype.hasSecondaryActionsForEditorInput=function(e){return!1},t.prototype.getSecondaryActionsForEditorInput=function(e){return[]},t}(o.ActionBarContributor);t.EditorInputActionContributor=v;var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"input",{get:function(){return this._input},set:function(e){this._input=e,this.enabled=this.isEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!0,configurable:!0}),t.prototype.isEnabled=function(){return!!this._input},t}(i.Action);t.EditorInputAction=g});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/storage",["require","exports","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/errors","vs/base/common/strings","vs/platform/storage/common/storage"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n,o){void 0===o&&(o=n),e.call(this),this.serviceId=s.IStorageService;var r=t.getWorkspace();this.globalStorage=n,this.workspaceStorage=o,this.toUnbind=[],this.workspaceKey=this.getWorkspaceKey(r);var a=r?r.uid:null;i.isNumber(a)&&this.cleanupWorkspaceScope(a,r.name)}return __extends(t,e),t.prototype.getWorkspaceKey=function(e){var n=null;return e&&e.resource&&(n=e.resource.toString()),n?this.calculateWorkspaceKey(n):t.NO_WORKSPACE_IDENTIFIER},t.prototype.calculateWorkspaceKey=function(e){var t="file:///",n=e.indexOf(t);return 0===n?r.rtrim(e.substr(t.length),"/")+"/":e},t.prototype.cleanupWorkspaceScope=function(e,n){var o=this,r=this.getInteger(t.WORKSPACE_IDENTIFIER,s.StorageScope.WORKSPACE);if(i.isNumber(r)&&e!==r){for(var a=this.toStorageKey("",s.StorageScope.WORKSPACE),c=[],u=this.workspaceStorage.length,l=0;u>l;l++){var d=this.workspaceStorage.key(l);d.indexOf(t.WORKSPACE_PREFIX)<0||0===d.indexOf(a)&&c.push(d)}c.length>0&&console.warn("Clearing previous version of local storage for workspace ",n),c.forEach(function(e){o.workspaceStorage.removeItem(e)})}e!==r&&this.store(t.WORKSPACE_IDENTIFIER,e,s.StorageScope.WORKSPACE)},t.prototype.clear=function(){this.globalStorage.clear(),this.workspaceStorage.clear()},t.prototype.store=function(e,t,n){void 0===n&&(n=s.StorageScope.GLOBAL);var r=n===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage;if(i.isUndefinedOrNull(t))return void this.remove(e,n);var a=this.toStorageKey(e,n),c=r.getItem(a),u=t.toString();try{r.setItem(a,t)}catch(l){o.onUnexpectedError(l)}c!==u&&this.emit(s.StorageEventType.STORAGE,new s.StorageEvent(e,c,u))},t.prototype.get=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var o=t===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage,r=o.getItem(this.toStorageKey(e,t));return i.isUndefinedOrNull(r)?n:r},t.prototype.remove=function(e,t){void 0===t&&(t=s.StorageScope.GLOBAL);var n=t===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage,i=this.toStorageKey(e,t),o=n.getItem(i),r=null;n.removeItem(i),o!==r&&this.emit(s.StorageEventType.STORAGE,new s.StorageEvent(e,o,r))},t.prototype.swap=function(e,t,n,o,r){void 0===o&&(o=s.StorageScope.GLOBAL);var a=this.get(e,o);i.isUndefinedOrNull(a)&&r?this.store(e,r,o):a===t.toString()?this.store(e,n,o):this.store(e,t,o)},t.prototype.getInteger=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var o=this.get(e,t,n);return i.isUndefinedOrNull(o)?n:parseInt(o,10)},t.prototype.getBoolean=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var o=this.get(e,t,n);return i.isUndefinedOrNull(o)?n:i.isString(o)?"true"===o.toLowerCase():!!o},t.prototype.dispose=function(){for(e.prototype.dispose.call(this);this.toUnbind.length;)this.toUnbind.pop()()},t.prototype.toStorageKey=function(e,n){return n===s.StorageScope.GLOBAL?t.GLOBAL_PREFIX+e.toLowerCase():t.WORKSPACE_PREFIX+this.workspaceKey+e.toLowerCase()},t.COMMON_PREFIX="storage://",t.GLOBAL_PREFIX=t.COMMON_PREFIX+"global/",t.WORKSPACE_PREFIX=t.COMMON_PREFIX+"workspace/",t.WORKSPACE_IDENTIFIER="workspaceIdentifier",t.NO_WORKSPACE_IDENTIFIER="__$noWorkspace__",t}(n.EventEmitter);t.Storage=a;var c=function(){function e(){this.store={}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.store).length},enumerable:!0,configurable:!0}),e.prototype.key=function(e){var t=Object.keys(this.store);return t.length>e?t[e]:null},e.prototype.clear=function(){this.store={}},e.prototype.setItem=function(e,t){this.store[e]=t.toString()},e.prototype.getItem=function(e){var t=this.store[e];return i.isUndefinedOrNull(t)?null:t},e.prototype.removeItem=function(e){delete this.store[e]},e}();t.InMemoryLocalStorage=c,t.inMemoryLocalStorageInstance=new c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/crashReporter",["require","exports","vs/nls!vs/workbench/electron-browser/crashReporter","vs/platform/configuration/common/configurationRegistry","vs/platform/configuration/common/configuration","vs/platform/telemetry/common/telemetry","vs/platform/platform","electron"],function(e,t,n,i,o,r,s,a){"use strict";var c="telemetry",u=s.Registry.as(i.Extensions.Configuration);u.registerConfiguration({id:c,order:20,type:"object",title:n.localize(0,null),properties:{"telemetry.enableCrashReporter":{type:"boolean",description:n.localize(1,null),"default":!0}}});var l=function(){function e(e,t,n,i){this.telemetryService=n,this.configurationService=i,this.configurationService=i,this.telemetryService=n,this.sessionId=this.telemetryService?this.telemetryService.getSessionId():null,this.version=e,this.commit=t,this.isStarted=!1,this.config=null}return e.prototype.start=function(e){var t=this;this.isStarted||(this.config?this.config.enableCrashReporter&&this.doStart(e):this.configurationService.loadConfiguration(c).done(function(n){t.config=n,t.config&&t.config.enableCrashReporter&&t.doStart(e)}))},e.prototype.doStart=function(e){var t=this.toConfiguration(e);a.crashReporter.start(t),a.ipcRenderer.send("vscode:startCrashReporter",t)},e.prototype.toConfiguration=function(e){var t=this;return JSON.parse(JSON.stringify(e,function(e,n){return"$(sessionId)"===n?t.sessionId:"$(version)"===n?t.version:"$(commit)"===n?t.commit:n}))},e=__decorate([__param(2,r.ITelemetryService),__param(3,o.IConfigurationService)],e)}();t.CrashReporter=l}),define("vs/workbench/node/userSettings",["require","exports","fs","path","vs/base/common/json","vs/base/common/objects","vs/base/common/winjs.base","vs/base/common/event"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e,t){this.appSettingsPath=e,this.appKeybindingsPath=t,this._onChange=new a.Emitter,this.registerWatchers()}return e.getValue=function(t,i,r){return new s.TPromise(function(s,a){var c=t.getConfiguration().env.appSettingsPath;n.readFile(c,function(t,n){var a=Object.create(null),c=n?n.toString():"{}",u=Object.create(null);try{u=o.parse(c)}catch(t){}for(var l in u)e.setNode(a,l,u[l]);return s(e.doGetValue(a,i,r))})})},Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t,n){return e.doGetValue(this.globalSettings.settings,t,n)},e.doGetValue=function(e,t,n){if(!t)return n;for(var i=e,o=t.split(".");o.length&&i;){var r=o.shift();i=i[r]}return"undefined"!=typeof i?i:n},e.prototype.registerWatchers=function(){var e=this;this.watcher=n.watch(i.dirname(this.appSettingsPath)),this.watcher.on("change",function(t,n){return e.onSettingsFileChange(t,n)})},e.prototype.onSettingsFileChange=function(t,n){var i=this;this.timeoutHandle&&(global.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.timeoutHandle=global.setTimeout(function(){var e=i.loadSync();e&&i._onChange.fire(i.globalSettings)},e.CHANGE_BUFFER_DELAY)},e.prototype.loadSync=function(){var e=this.doLoadSync();return r.equals(e,this.globalSettings)?!1:(this.globalSettings=e,!0)},e.prototype.doLoadSync=function(){var e=this.doLoadSettingsSync();return{settings:e.contents,settingsParseErrors:e.parseErrors,keybindings:this.doLoadKeybindingsSync()}},e.prototype.doLoadSettingsSync=function(){var t=Object.create(null),i="{}";try{i=n.readFileSync(this.appSettingsPath).toString()}catch(r){}var s=Object.create(null);try{s=o.parse(i)}catch(r){return{contents:Object.create(null),parseErrors:[this.appSettingsPath]}}for(var a in s)e.setNode(t,a,s[a]);return{contents:t}},e.setNode=function(e,t,n){var i=t.split("."),o=i.pop(),r=e;i.forEach(function(e){var n=r[e];switch(typeof n){case"undefined":n=r[e]={};break;case"object":break;default:console.log("Conflicting user settings: "+t+" at "+e+" with "+JSON.stringify(n))}r=n}),r[o]=n},e.prototype.doLoadKeybindingsSync=function(){try{return o.parse(n.readFileSync(this.appKeybindingsPath).toString())}catch(e){}return[]},e.prototype.dispose=function(){this.watcher&&(this.watcher.close(),this.watcher=null)},e.CHANGE_BUFFER_DELAY=300,e}();t.UserSettings=c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/contentprovider/common/contentprovider.contribution",["require","exports","vs/workbench/common/editor/resourceEditorInput","vs/editor/common/services/modelService","vs/editor/common/services/modeService","vs/base/common/winjs.base","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/platform","vs/workbench/common/contributions"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=a.Registry.as(s.Extensions.JSONContribution),l=function(){function e(e,t){this.modelService=e,this.modeService=t,this.start()}return e.prototype.getId=function(){return"vs.contentprovider"},e.prototype.start=function(){var e=this;n.ResourceEditorInput.registerResourceContentProvider("vscode",{provideTextContent:function(t){if("vscode"!==t.scheme)return null;if("schemas"===t.authority){var n=u.getSchemaContributions().schemas,i=n[t.toString()];if(i){var o=JSON.stringify(i),s=e.modeService.getOrCreateMode("json");return r.TPromise.as(e.modelService.createModel(o,s,t))}}return null}})},e=__decorate([__param(0,i.IModelService),__param(1,o.IModeService)],e)}();t.WorkbenchContentProvider=l,a.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(l)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorInputs",["require","exports","vs/base/common/mime","vs/workbench/common/editor/stringEditorInput","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,i,o,r,s,a,c){e.call(this,t,o,r,s||n.MIME_TEXT,a,c),this.resourceUrl=i}return __extends(t,e),t.prototype.getResource=function(){return this.resourceUrl},t=__decorate([__param(6,o.IInstantiationService)],t)}(i.StringEditorInput);t.DebugStringEditorInput=r}),define("vs/workbench/parts/debug/common/debug",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";function i(e,t,n){return e.replace(o,function(e,i){return t&&i.length>0&&"_"!==i[0]?e:n&&n.hasOwnProperty(i)?n[i]:e})}t.VIEWLET_ID="workbench.view.debug",t.REPL_ID="workbench.panel.repl",t.DEBUG_SERVICE_ID="debugService",t.CONTEXT_IN_DEBUG_MODE="inDebugMode",t.EDITOR_CONTRIBUTION_ID="editor.contrib.debug",t.ModelEvents={BREAKPOINTS_UPDATED:"BreakpointsUpdated",CALLSTACK_UPDATED:"CallStackUpdated",WATCH_EXPRESSIONS_UPDATED:"WatchExpressionsUpdated",REPL_ELEMENTS_UPDATED:"ReplElementsUpdated"},t.ViewModelEvents={FOCUSED_STACK_FRAME_UPDATED:"FocusedStackFrameUpdated",SELECTED_EXPRESSION_UPDATED:"SelectedExpressionUpdated",SELECTED_FUNCTION_BREAKPOINT_UPDATED:"SelectedFunctionBreakpointUpdated"},t.ServiceEvents={STATE_CHANGED:"StateChanged",TYPE_NOT_SUPPORTED:"TypeNotSupported"},t.SessionEvents={INITIALIZED:"initialized",STOPPED:"stopped",DEBUGEE_TERMINATED:"terminated",SERVER_EXIT:"exit",CONTINUED:"continued",THREAD:"thread",OUTPUT:"output",BREAKPOINT:"breakpoint"},function(e){e[e.Disabled=0]="Disabled",e[e.Inactive=1]="Inactive",e[e.Initializing=2]="Initializing",e[e.Stopped=3]="Stopped",e[e.Running=4]="Running",e[e.RunningNoDebug=5]="RunningNoDebug"}(t.State||(t.State={}));t.State;t.IDebugService=n.createDecorator(t.DEBUG_SERVICE_ID);var o=/{([^}]+)}/g;t.formatPII=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/breakpointWidget",["require","exports","vs/nls!vs/workbench/parts/debug/browser/breakpointWidget","vs/base/common/async","vs/base/common/errors","vs/base/common/keyCodes","vs/base/common/platform","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/ui/inputbox/inputBox","vs/editor/common/editorCommonExtensions","vs/editor/common/editorCommon","vs/editor/contrib/zoneWidget/browser/zoneWidget","vs/platform/contextview/browser/contextView","vs/platform/keybinding/common/keybindingService","vs/workbench/parts/debug/common/debug","vs/css!../browser/media/breakpointWidget"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=c.emmet,g="breakpointWidgetVisible",y="closeBreakpointWidget",_=function(e){function t(n,i,o,r,s){var a=this;e.call(this,n,{showFrame:!0,showArrow:!1}),this.lineNumber=i,this.contextViewService=o,this.debugService=r,this.toDispose=[],this.create(),this.breakpointWidgetVisible=s.createKey(g,!1),this.breakpointWidgetVisible.set(!0),t.INSTANCE=this,this.toDispose.push(n.addListener2(d.EventType.ModelChanged,function(){return a.dispose()}))}return __extends(t,e),t.prototype.fillContainer=function(e){var t=this;c.addClass(e,"breakpoint-widget");var a=this.editor.getModel().getAssociatedResource(),l=this.debugService.getModel().getBreakpoints().filter(function(e){return e.lineNumber===t.lineNumber&&e.source.uri.toString()===a.toString()}).pop(),d=c.append(e,v(".inputBoxContainer"));this.inputBox=new u.InputBox(d,this.contextViewService,{placeholder:n.localize(0,null,this.lineNumber),ariaLabel:n.localize(1,null)}),this.toDispose.push(this.inputBox),c.addClass(this.inputBox.inputElement,s.isWindows?"windows":s.isMacintosh?"mac":"linux"),this.inputBox.value=l&&l.condition?l.condition:"",setTimeout(function(){return t.inputBox.focus()},0);var h=!1,p=i.once(function(e){if(!h){if(h=!0,e){var n={uri:a,lineNumber:t.lineNumber,enabled:!0,condition:t.inputBox.value};t.debugService.getModel().getBreakpoints().some(function(e){return e.lineNumber===t.lineNumber&&e.source.uri.toString()===a.toString()})&&t.debugService.toggleBreakpoint(n).done(null,o.onUnexpectedError),t.debugService.toggleBreakpoint(n).done(null,o.onUnexpectedError)}t.dispose()}});this.toDispose.push(c.addStandardDisposableListener(this.inputBox.inputElement,"keydown",function(e){var t=e.equals(r.CommonKeybindings.ESCAPE),n=e.equals(r.CommonKeybindings.ENTER);(t||n)&&(e.stopPropagation(),p(n))}))},t.prototype.dispose=function(){var n=this;e.prototype.dispose.call(this),this.breakpointWidgetVisible.reset(),t.INSTANCE=void 0,a.disposeAll(this.toDispose),setTimeout(function(){return n.editor.focus()},0)},t=__decorate([__param(2,p.IContextViewService),__param(3,m.IDebugService),__param(4,f.IKeybindingService)],t)}(h.ZoneWidget);t.BreakpointWidget=_,l.CommonEditorRegistry.registerEditorCommand(y,l.CommonEditorRegistry.commandWeight(8),{primary:r.KeyCode.Escape,secondary:[r.KeyMod.Shift|r.KeyCode.Escape]},!1,g,function(e,t,n){_.INSTANCE&&_.INSTANCE.dispose()})});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorModelManager",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugEditorModelManager","vs/base/common/objects","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/workbench/parts/debug/common/debug","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a){
"use strict";function c(e){for(var t={},n=0,i=e.length;i>n;n++)t[e[n]]=!0;return t}function u(e,t,n,i){return{startLineNumber:e,startColumn:t,endLineNumber:n,endColumn:i}}var l=function(){function e(e,t){this.modelService=e,this.debugService=t,this.modelData={},this.toDispose=[],this.registerListeners()}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(var e in this.modelData)if(this.modelData.hasOwnProperty(e)){var t=this.modelData[e];o.disposeAll(t.toDispose),t.model.deltaDecorations(t.breakpointDecorationIds,[]),t.model.deltaDecorations(t.currentStackDecorations,[])}this.toDispose=o.disposeAll(this.toDispose),this.modelData=null},e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.modelService.onModelAdded(this.onModelAdded,this)),this.modelService.getModels().forEach(function(t){return e.onModelAdded(t)}),this.toDispose.push(this.modelService.onModelRemoved(this.onModelRemoved,this)),this.toDispose.push(this.debugService.getModel().addListener2(s.ModelEvents.BREAKPOINTS_UPDATED,function(){return e.onBreakpointsChanged()})),this.toDispose.push(this.debugService.getViewModel().addListener2(s.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){return e.onFocusedStackFrameUpdated()})),this.toDispose.push(this.debugService.addListener2(s.ServiceEvents.STATE_CHANGED,function(){e.debugService.getState()===s.State.Inactive&&Object.keys(e.modelData).forEach(function(t){return e.modelData[t].dirty=!1})}))},e.prototype.onModelAdded=function(e){var t=this,n=e.getAssociatedResource().toString(),i=this.debugService.getModel().getBreakpoints().filter(function(e){return e.source.uri.toString()===n}),o=e.deltaDecorations([],this.createCallStackDecorations(n)),s=e.deltaDecorations([],this.createBreakpointDecorations(i)),a=[e.addListener2(r.EventType.ModelDecorationsChanged,function(e){return t.onModelDecorationsChanged(n,e)})];this.modelData[n]={model:e,toDispose:a,breakpointDecorationIds:s,breakpointLines:i.map(function(e){return e.lineNumber}),breakpointDecorationsAsMap:c(s),currentStackDecorations:o,topStackFrameRange:null,dirty:!1}},e.prototype.onModelRemoved=function(e){var t=e.getAssociatedResource().toString();if(this.modelData.hasOwnProperty(t)){var n=this.modelData[t];delete this.modelData[t],o.disposeAll(n.toDispose)}},e.prototype.onFocusedStackFrameUpdated=function(){var e=this;Object.keys(this.modelData).forEach(function(t){var n=e.modelData[t];n.currentStackDecorations=n.model.deltaDecorations(n.currentStackDecorations,e.createCallStackDecorations(t))})},e.prototype.createCallStackDecorations=function(t){var n=this,i=[],o=this.debugService.getViewModel().getFocusedStackFrame(),r=this.debugService.getModel().getThreads();if(!o||!r[o.threadId]||!r[o.threadId].getCachedCallStack())return i;var s=r[o.threadId];return s.getCachedCallStack().filter(function(e){return e.source.uri.toString()===t}).forEach(function(r){var a=u(r.lineNumber,r.column,r.lineNumber,Number.MAX_VALUE);r===s.getCachedCallStack()[0]?(i.push({options:e.TOP_STACK_FRAME_MARGIN,range:u(r.lineNumber,r.column,r.lineNumber,r.column+1)}),"exception"===s.stoppedDetails.reason?i.push({options:e.TOP_STACK_FRAME_EXCEPTION_DECORATION,range:a}):(i.push({options:e.TOP_STACK_FRAME_DECORATION,range:a}),n.modelData[t]&&(n.modelData[t].topStackFrameRange&&n.modelData[t].topStackFrameRange.startLineNumber===a.startLineNumber&&n.modelData[t].topStackFrameRange.startColumn!==a.startColumn&&i.push({options:e.TOP_STACK_FRAME_COLUMN_DECORATION,range:a}),n.modelData[t].topStackFrameRange=a))):r===o&&(i.push({options:e.FOCUSED_STACK_FRAME_MARGIN,range:u(r.lineNumber,r.column,r.lineNumber,r.column+1)}),i.push({options:e.FOCUSED_STACK_FRAME_DECORATION,range:a}))}),i},e.prototype.onModelDecorationsChanged=function(e,t){var n=this.modelData[e];if(t.addedOrChangedDecorations.some(function(e){return n.breakpointDecorationsAsMap.hasOwnProperty(e.id)})){var i=[],o={};this.debugService.getModel().getBreakpoints().filter(function(t){return t.source.uri.toString()===e}).forEach(function(e){o[e.lineNumber]={enabled:e.enabled,condition:e.condition}});for(var r=n.model.getAssociatedResource(),s=0,a=n.breakpointDecorationIds.length;a>s;s++){var c=n.model.getDecorationRange(n.breakpointDecorationIds[s]);c.endColumn-c.startColumn>0&&i.push({uri:r,lineNumber:c.startLineNumber,enabled:o[n.breakpointLines[s]].enabled,condition:o[n.breakpointLines[s]].condition})}n.dirty=!!this.debugService.getActiveSession(),this.debugService.setBreakpointsForModel(r,i)}},e.prototype.onBreakpointsChanged=function(){var e=this,t={};this.debugService.getModel().getBreakpoints().forEach(function(e){var n=e.source.uri.toString();t[n]?t[n].push(e):t[n]=[e]}),Object.keys(t).forEach(function(n){e.modelData.hasOwnProperty(n)&&e.updateBreakpoints(e.modelData[n],t[n])}),Object.keys(this.modelData).forEach(function(n){t.hasOwnProperty(n)||e.updateBreakpoints(e.modelData[n],[])})},e.prototype.updateBreakpoints=function(e,t){e.breakpointDecorationIds=e.model.deltaDecorations(e.breakpointDecorationIds,this.createBreakpointDecorations(t)),e.breakpointDecorationsAsMap=c(e.breakpointDecorationIds),e.breakpointLines=t.map(function(e){return e.lineNumber})},e.prototype.createBreakpointDecorations=function(e){var t=this;return e.map(function(e){return{options:t.getBreakpointDecorationOptions(e),range:u(e.lineNumber,1,e.lineNumber,2)}})},e.prototype.getBreakpointDecorationOptions=function(t){var n=this.debugService.getModel().areBreakpointsActivated(),o=this.debugService.getState(),a=o===s.State.Running||o===s.State.Stopped||o===s.State.Initializing,c=this.modelData[t.source.uri.toString()],u=this.debugService.getActiveSession(),l=t.enabled&&n?a&&c&&c.dirty?e.BREAKPOINT_DIRTY_DECORATION:a&&!t.verified?e.BREAKPOINT_UNVERIFIED_DECORATION:t.condition?null:e.BREAKPOINT_DECORATION:e.BREAKPOINT_DISABLED_DECORATION;return l&&t.message&&(l=i.clone(l),l.hoverMessage=t.message),l?l:!u||u.capabilities.supportsConditionalBreakpoints?{glyphMarginClassName:"debug-breakpoint-conditional-glyph",hoverMessage:t.condition,stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}:e.BREAKPOINT_UNSUPPORTED_DECORATION},e.ID="breakpointManager",e.BREAKPOINT_DECORATION={glyphMarginClassName:"debug-breakpoint-glyph",hoverMessage:n.localize(0,null),stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_DISABLED_DECORATION={glyphMarginClassName:"debug-breakpoint-disabled-glyph",hoverMessage:n.localize(1,null),stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_UNVERIFIED_DECORATION={glyphMarginClassName:"debug-breakpoint-unverified-glyph",hoverMessage:n.localize(2,null),stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_DIRTY_DECORATION={glyphMarginClassName:"debug-breakpoint-unverified-glyph",hoverMessage:n.localize(3,null),stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_UNSUPPORTED_DECORATION={glyphMarginClassName:"debug-breakpoint-unsupported-glyph",hoverMessage:n.localize(4,null),stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_MARGIN={glyphMarginClassName:"debug-top-stack-frame-glyph",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.FOCUSED_STACK_FRAME_MARGIN={glyphMarginClassName:"debug-focused-stack-frame-glyph",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_DECORATION={isWholeLine:!0,className:"debug-top-stack-frame-line",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_EXCEPTION_DECORATION={isWholeLine:!0,className:"debug-top-stack-frame-exception-line",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_COLUMN_DECORATION={isWholeLine:!1,className:"debug-top-stack-frame-column",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.FOCUSED_STACK_FRAME_DECORATION={isWholeLine:!0,className:"debug-focused-stack-frame-line",stickiness:r.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e=__decorate([__param(0,a.IModelService),__param(1,s.IDebugService)],e)}();t.DebugEditorModelManager=l}),define("vs/workbench/parts/debug/common/debugSource",["require","exports","vs/base/common/uri","vs/base/common/paths"],function(e,t,n,i){"use strict";var o=function(){function e(t,i){void 0===i&&(i=!0),this.raw=t,this.uri=t.path?n["default"].file(t.path):n["default"].parse(e.INTERNAL_URI_PREFIX+t.name),this.available=i}return Object.defineProperty(e.prototype,"name",{get:function(){return this.raw.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.raw.origin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reference",{get:function(){return this.raw.sourceReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inMemory",{get:function(){return e.isInMemory(this.uri)},enumerable:!0,configurable:!0}),e.toRawSource=function(t,n){if(n){var o=n.getThreads();for(var r in o)if(o.hasOwnProperty(r)&&o[r].getCachedCallStack()){var s=o[r].getCachedCallStack().filter(function(e){return e.source.uri.toString()===t.toString()}).pop();if(s)return s.source.raw}}return e.isInMemory(t)?{name:e.getName(t)}:{path:i.normalize(t.fsPath,!0)}},e.getName=function(e){var t=e.toString();return t.substr(t.lastIndexOf("/")+1)},e.isInMemory=function(t){return 0===t.toString().indexOf(e.INTERNAL_URI_PREFIX)},e.INTERNAL_URI_PREFIX="debug://internal/",e}();t.Source=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/common/debugModel",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/nls!vs/workbench/parts/debug/common/debugModel","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/common/uuid","vs/base/common/types","vs/base/common/arrays","vs/workbench/parts/debug/common/debug","vs/base/common/errors","vs/workbench/parts/debug/common/debugSource"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";function p(e,t){var i=e.getActiveSession();return!i||t.reference<=0?n.TPromise.as([]):i.variables({variablesReference:t.reference}).then(function(e){return u.distinct(e.body.variables.filter(function(e){return!!e}),function(e){return e.name}).map(function(e){return new k(t,e.variablesReference,e.name,e.value)})},function(e){return[new k(t,0,null,e.message,!1)]})}function f(e){return e?e.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):e}function m(e,t,i,r){return e?e.evaluate({expression:i.name,frameId:t?t.frameId:void 0,context:r}).then(function(e){return i.value=e.body.result,i.available=!0,i.reference=e.body.variablesReference,i},function(e){return i.value=e.message,i.available=!1,i.reference=0,i}):(i.value="repl"===r?o.localize(0,null):T.DEFAULT_VALUE,i.available=!1,i.reference=0,n.TPromise.as(i))}function v(e,t){var n=[e.name];if(e instanceof k)for(var i=e.parent;i instanceof k||i instanceof T;)n.push(i.name),i=i.parent;n=n.reverse();var o=null;return n.forEach(function(e){o=o?_.test(e)||"node"===t&&!y.test(e)?e&&0===e.indexOf("[")?""+o+e:o+"['"+e+"']":o+"."+e:e}),o}var g=1e4;t.evaluateExpression=m;var y=/^[a-zA-Z_][a-zA-Z0-9_]*$/,_=/\[.*\]$/;t.getFullExpressionName=v;var b=function(){function e(e,t){this.name=e,this.threadId=t,this.promisedCallStack=void 0,this.stoppedDetails=void 0,this.cachedCallStack=void 0,this.stopped=!1}return e.prototype.getId=function(){return"thread:"+this.name+":"+this.threadId},e.prototype.clearCallStack=function(){this.promisedCallStack=void 0,this.cachedCallStack=void 0},e.prototype.getCachedCallStack=function(){return this.cachedCallStack},e.prototype.getCallStack=function(e){var t=this;return this.stopped?(this.promisedCallStack||(this.promisedCallStack=this.getCallStackImpl(e),this.promisedCallStack.then(function(e){t.cachedCallStack=e},d.onUnexpectedError)),this.promisedCallStack):n.TPromise.as([])},e.prototype.getCallStackImpl=function(e){var t=this,n=e.getActiveSession();return n.stackTrace({threadId:this.threadId,levels:20}).then(function(e){return e.body.stackFrames.map(function(e,n){return e?new I(t.threadId,e.id,e.source?new h.Source(e.source):new h.Source({name:"unknown"},!1),e.name,e.line,e.column):new I(t.threadId,0,new h.Source({name:"unknown"},!1),o.localize(1,null),void 0,void 0)})})},e}();t.Thread=b;var S=function(){function e(e){void 0===e&&(e=a.generateUuid()),this.id=e}return e.prototype.getId=function(){return this.id},e}();t.OutputElement=S;var E=function(e){function t(t,n,i,o){void 0===o&&(o=1),e.call(this),this.value=t,this.severity=n,this.category=i,this.counter=o}return __extends(t,e),t}(S);t.ValueOutputElement=E;var w=function(e){function t(t,n,i){e.call(this),this.key=t,this.valueObj=n,this.annotation=i,this._valueName=null}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return null===this._valueName&&(null===this.valueObj?this._valueName="null":Array.isArray(this.valueObj)?this._valueName="Array["+this.valueObj.length+"]":c.isObject(this.valueObj)?this._valueName="Object":c.isString(this.valueObj)?this._valueName='"'+f(this.valueObj)+'"':this._valueName=String(this.valueObj),this._valueName||(this._valueName="")),this._valueName},enumerable:!0,configurable:!0}),t.prototype.getChildren=function(){var e=this;return this.children||(Array.isArray(this.valueObj)?this.children=this.valueObj.slice(0,t.MAX_CHILDREN).map(function(e,n){return new t(String(n),e,null)}):c.isObject(this.valueObj)?this.children=Object.getOwnPropertyNames(this.valueObj).slice(0,t.MAX_CHILDREN).map(function(n){return new t(n,e.valueObj[n],null)}):this.children=[]),this.children},t.MAX_CHILDREN=1e3,t}(S);t.KeyValueOutputElement=w;var C=function(){function e(e,t,n){this.reference=e,this.id=t,this.cacheChildren=n,this.children=null}return e.prototype.getChildren=function(e){return this.cacheChildren?(this.children||(this.children=p(e,this)),this.children):p(e,this)},e.prototype.getId=function(){return this.id},e.allValues={},e}();t.ExpressionContainer=C;var T=function(e){function t(n,i,o){void 0===o&&(o=a.generateUuid()),e.call(this,0,o,i),this.name=n,this.value=t.DEFAULT_VALUE,this.available=!1}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=f(e),this.valueChanged=C.allValues[this.getId()]&&C.allValues[this.getId()]!==t.DEFAULT_VALUE&&C.allValues[this.getId()]!==e,C.allValues[this.getId()]=e},enumerable:!0,configurable:!0}),t.DEFAULT_VALUE="not available",t}(C);t.Expression=T;var k=function(e){function t(t,n,i,o,r){void 0===r&&(r=!0),e.call(this,n,"variable:"+t.getId()+":"+i,!0),this.parent=t,this.name=i,this.available=r,this.value=f(o),this.valueChanged=C.allValues[this.getId()]&&C.allValues[this.getId()]!==o,C.allValues[this.getId()]=o}return __extends(t,e),t}(C);t.Variable=k;var x=function(){function e(e,t,n,i){this.threadId=e,this.name=t,this.reference=n,this.expensive=i,this.children=null}return e.prototype.getId=function(){return"scope:"+this.threadId+":"+this.name+":"+this.reference},e.prototype.getChildren=function(e){return this.children||(this.children=p(e,this)),this.children},e}();t.Scope=x;var I=function(){function e(e,t,n,i,o,r){this.threadId=e,this.frameId=t,this.source=n,this.name=i,this.lineNumber=o,this.column=r,this.internalId=a.generateUuid(),this.scopes=null}return e.prototype.getId=function(){return this.internalId},e.prototype.getScopes=function(e){var t=this;return this.scopes||(this.scopes=e.getActiveSession().scopes({frameId:this.frameId}).then(function(e){return e.body.scopes.map(function(e){return new x(t.threadId,e.name,e.variablesReference,e.expensive)})},function(e){return[]})),this.scopes},e}();t.StackFrame=I;var D=function(){function e(e,t,n,i){this.source=e,this.desiredLineNumber=t,this.enabled=n,this.condition=i,void 0===n&&(this.enabled=!0),this.lineNumber=this.desiredLineNumber,this.verified=!1,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.Breakpoint=D;var A=function(){function e(e,t){this.name=e,this.enabled=t,this.verified=!1,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.FunctionBreakpoint=A;var L=function(){function e(e,t,n){this.filter=e,this.label=t,this.enabled=n,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.ExceptionBreakpoint=L;var O=function(e){function t(t,n,i,o,r){e.call(this),this.breakpoints=t,this.breakpointsActivated=n,this.functionBreakpoints=i,this.exceptionBreakpoints=o,this.watchExpressions=r,this.threads={},this.replElements=[],this.toDispose=[]}return __extends(t,e),t.prototype.getId=function(){return"root"},t.prototype.getThreads=function(){return this.threads},t.prototype.clearThreads=function(e,t){if(void 0===t&&(t=void 0),t)e?delete this.threads[t]:(this.threads[t].clearCallStack(),this.threads[t].stoppedDetails=void 0);else if(e)this.threads={},C.allValues={};else for(var n in this.threads)this.threads.hasOwnProperty(n)&&(this.threads[n].clearCallStack(),this.threads[n].stoppedDetails=void 0);this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.continueThreads=function(){for(var e in this.threads)this.threads.hasOwnProperty(e)&&(this.threads[e].stopped=!1);this.clearThreads(!1)},t.prototype.getBreakpoints=function(){return this.breakpoints},t.prototype.getFunctionBreakpoints=function(){return this.functionBreakpoints},t.prototype.getExceptionBreakpoints=function(){return this.exceptionBreakpoints},t.prototype.setExceptionBreakpoints=function(e){var t=this;e&&(this.exceptionBreakpoints=e.map(function(e){var n=t.exceptionBreakpoints.filter(function(t){return t.filter===e.filter}).pop();return new L(e.filter,e.label,n?n.enabled:e["default"])}))},t.prototype.areBreakpointsActivated=function(){return this.breakpointsActivated},t.prototype.toggleBreakpointsActivated=function(){this.breakpointsActivated=!this.breakpointsActivated,this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.addBreakpoints=function(e){var t=this;this.breakpoints=this.breakpoints.concat(e.map(function(e){return new D(new h.Source(h.Source.toRawSource(e.uri,t)),e.lineNumber,e.enabled,e.condition)})),this.breakpointsActivated=!0,this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.removeBreakpoints=function(e){this.breakpoints=this.breakpoints.filter(function(t){return!e.some(function(e){return e.getId()===t.getId()})}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.updateBreakpoints=function(e){this.breakpoints.forEach(function(t){var n=e[t.getId()];n&&(t.lineNumber=n.line?n.line:t.lineNumber,t.verified=n.verified,t.idFromAdapter=n.id,t.message=n.message)}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.toggleEnablement=function(e){if(e.enabled=!e.enabled,e instanceof D&&!e.enabled){var t=e;t.lineNumber=t.desiredLineNumber,t.verified=!1}this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.enableOrDisableAllBreakpoints=function(e){this.breakpoints.forEach(function(t){t.enabled=e,e||(t.lineNumber=t.desiredLineNumber,t.verified=!1)}),this.exceptionBreakpoints.forEach(function(t){return t.enabled=e}),this.functionBreakpoints.forEach(function(t){return t.enabled=e}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.addFunctionBreakpoint=function(e){this.functionBreakpoints.push(new A(e,!0)),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.updateFunctionBreakpoints=function(e){this.functionBreakpoints.forEach(function(t){var n=e[t.getId()];n&&(t.name=n.name||t.name,t.verified=n.verified,t.idFromAdapter=n.id)}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.removeFunctionBreakpoints=function(e){this.functionBreakpoints=e?this.functionBreakpoints.filter(function(t){return t.getId()!==e}):[],this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.getReplElements=function(){return this.replElements},t.prototype.addReplExpression=function(e,t,n){var i=this,o=new T(n,!0);return this.addReplElements([o]),m(e,t,o,"repl").then(function(){return i.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,o)})},t.prototype.logToRepl=function(e,t){var n=[],r=this.replElements.length&&this.replElements[this.replElements.length-1];if("string"==typeof e)if(e=i.removeAnsiEscapeCodes(e),e&&e.trim()&&r&&r.value===e&&r.severity===t)r.counter++;else{var s=e.trim().split("\n");s.forEach(function(e,i){n.push(new E(e,t))})}else n.push(new w(e.prototype,e,o.localize(2,null)));n.length&&(this.addReplElements(n),this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,n))},t.prototype.appendReplOutput=function(e,t){e=i.removeAnsiEscapeCodes(e);var n=[],o=this.replElements.length&&this.replElements[this.replElements.length-1],r=e.split("\n"),s=!!o&&"output"===o.category&&t===o.severity;s?o.value+=r.shift():o&&""===o.value&&this.replElements.pop(),r.forEach(function(e,i){n.push(new E(e,t,"output"))}),this.addReplElements(n),this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,n)},t.prototype.addReplElements=function(e){(t=this.replElements).push.apply(t,e),this.replElements.length>g&&this.replElements.splice(0,this.replElements.length-g);var t},t.prototype.clearReplExpressions=function(){this.replElements.length>0&&(this.replElements=[],this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED))},t.prototype.getWatchExpressions=function(){return this.watchExpressions},t.prototype.addWatchExpression=function(e,t,i){var o=new T(i,!1);return this.watchExpressions.push(o),i?this.evaluateWatchExpressions(e,t,o.getId()):(this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,o),n.TPromise.as(null))},t.prototype.renameWatchExpression=function(e,t,i,o){var r=this,s=this.watchExpressions.filter(function(e){return e.getId()===i});return 1===s.length?(s[0].name=o,m(e,t,s[0],"watch").then(function(){r.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,s[0])})):n.TPromise.as(null)},t.prototype.evaluateWatchExpressions=function(e,t,i){var o=this;if(void 0===i&&(i=null),i){var r=this.watchExpressions.filter(function(e){return e.getId()===i});return 1!==r.length?n.TPromise.as(null):m(e,t,r[0],"watch").then(function(){o.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,r[0])})}return n.TPromise.join(this.watchExpressions.map(function(n){return m(e,t,n,"watch")})).then(function(){o.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)})},t.prototype.clearWatchExpressionValues=function(){this.watchExpressions.forEach(function(e){e.value=T.DEFAULT_VALUE,e.available=!1,e.reference=0}),this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)},t.prototype.clearWatchExpressions=function(e){void 0===e&&(e=null),this.watchExpressions=e?this.watchExpressions.filter(function(t){return t.getId()!==e}):[],this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)},t.prototype.sourceIsUnavailable=function(e){var t=this;Object.keys(this.threads).forEach(function(n){t.threads[n].getCachedCallStack()&&t.threads[n].getCachedCallStack().forEach(function(t){t.source.uri.toString()===e.uri.toString()&&(t.source.available=!1)})}),this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.rawUpdate=function(e){if(e.thread&&(this.threads[e.threadId]=new b(e.thread.name,e.thread.id)),e.stoppedDetails){for(var t in this.threads)this.threads.hasOwnProperty(t)&&(e.allThreadsStopped&&(this.threads[t].stoppedDetails=e.stoppedDetails),this.threads[t].stopped=e.allThreadsStopped,this.threads[t].clearCallStack());this.threads[e.threadId].stoppedDetails=e.stoppedDetails,this.threads[e.threadId].stopped=!0}this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.threads=null,this.breakpoints=null,this.exceptionBreakpoints=null,this.functionBreakpoints=null,this.watchExpressions=null,this.replElements=null,this.toDispose=r.disposeAll(this.toDispose)},t}(s.EventEmitter);t.Model=O});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/common/debugViewModel",["require","exports","vs/base/common/eventEmitter","vs/workbench/parts/debug/common/debug"],function(e,t,n,i){"use strict";var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getId=function(){return"root"},t.prototype.getFocusedStackFrame=function(){return this.focusedStackFrame},t.prototype.setFocusedStackFrame=function(e){this.focusedStackFrame=e,this.emit(i.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED)},t.prototype.getFocusedThreadId=function(){return this.focusedStackFrame?this.focusedStackFrame.threadId:0},t.prototype.getSelectedExpression=function(){return this.selectedExpression},t.prototype.setSelectedExpression=function(e){this.selectedExpression=e,this.emit(i.ViewModelEvents.SELECTED_EXPRESSION_UPDATED,e)},t.prototype.getSelectedFunctionBreakpoint=function(){return this.selectedFunctionBreakpoint},t.prototype.setSelectedFunctionBreakpoint=function(e){this.selectedFunctionBreakpoint=e,this.emit(i.ViewModelEvents.SELECTED_FUNCTION_BREAKPOINT_UPDATED,e)},t}(n.EventEmitter);t.ViewModel=o}),define("vs/workbench/parts/debug/node/debugAdapter",["require","exports","vs/nls!vs/workbench/parts/debug/node/debugAdapter","vs/base/common/paths","vs/base/common/platform"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n){e.windows&&(e.win=e.windows),o.isWindows&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")&&e.winx86?(this.runtime=e.winx86.runtime,this.runtimeArgs=e.winx86.runtimeArgs,this.program=e.winx86.program,this.args=e.winx86.args):o.isWindows&&e.win?(this.runtime=e.win.runtime,this.runtimeArgs=e.win.runtimeArgs,this.program=e.win.program,this.args=e.win.args):o.isMacintosh&&e.osx?(this.runtime=e.osx.runtime,this.runtimeArgs=e.osx.runtimeArgs,this.program=e.osx.program,this.args=e.osx.args):o.isLinux&&e.linux&&(this.runtime=e.linux.runtime,this.runtimeArgs=e.linux.runtimeArgs,this.program=e.linux.program,this.args=e.linux.args),this.runtime=this.runtime||e.runtime,this.runtimeArgs=this.runtimeArgs||e.runtimeArgs,this.program=this.program||e.program,this.args=this.args||e.args,this.program&&(this.program=t?t.resolve(this.program):this.program,this.program=i.join(n,this.program)),this.runtime&&0===this.runtime.indexOf("./")&&(this.runtime=t?t.resolve(this.runtime):this.runtime,this.runtime=i.join(n,this.runtime)),this.type=e.type,this.configurationAttributes=e.configurationAttributes,this.initialConfigurations=e.initialConfigurations,this._label=e.label,this.enableBreakpointsFor=e.enableBreakpointsFor,this.aiKey=e.aiKey}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label||this.type},enumerable:!0,configurable:!0}),e.prototype.getSchemaAttributes=function(){var e=this;return this.configurationAttributes?Object.keys(this.configurationAttributes).map(function(t){var i=e.configurationAttributes[t],o=["name","type","request"];i.required=i.required&&i.required.length?o.concat(i.required):o,i.additionalProperties=!1,i.type="object",i.properties||(i.properties={});var r=i.properties;return r.type={"enum":[e.type],description:n.localize(0,null)},r.name={type:"string",description:n.localize(1,null),"default":"Launch"},r.request={"enum":[t],description:n.localize(2,null)},r.preLaunchTask={type:["string","null"],"default":null,description:n.localize(3,null)},e.warnRelativePaths(r.outDir),e.warnRelativePaths(r.program),e.warnRelativePaths(r.cwd),e.warnRelativePaths(r.runtimeExecutable),i}):null},e.prototype.warnRelativePaths=function(e){e&&(e.pattern="^\\${.*}.*|"+i.isAbsoluteRegex.source,e.errorMessage=n.localize(4,null))},e}();t.Adapter=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/node/v8Protocol",["require","exports","vs/base/common/uuid","vs/base/common/eventEmitter","vs/base/common/winjs.base","vs/workbench/parts/debug/common/debug"],function(e,t,n,i,o,r){"use strict";var s=function(e){function t(){e.call(this),this.flowEventsCount=0,this.emittedStopped=!1,this.readyForBreakpoints=!1,this.sequence=1,this.contentLength=-1,this.pendingRequests={},this.rawData=new Buffer(0),this.id=n.generateUuid()}return __extends(t,e),t.prototype.emit=function(t,n){t===r.SessionEvents.STOPPED&&(this.emittedStopped=!0),t===r.SessionEvents.INITIALIZED&&(this.readyForBreakpoints=!0),t!==r.SessionEvents.CONTINUED&&t!==r.SessionEvents.STOPPED&&t!==r.SessionEvents.DEBUGEE_TERMINATED&&t!==r.SessionEvents.SERVER_EXIT||this.flowEventsCount++,n?n.sessionId=this.getId():n={sessionId:this.getId()},e.prototype.emit.call(this,t,n)},t.prototype.getId=function(){return this.id},t.prototype.connect=function(e,t){var n=this;this.outputStream=t,e.on("data",function(e){n.rawData=Buffer.concat([n.rawData,e]),n.handleData()})},t.prototype.send=function(e,t){var n=this;return new o.TPromise(function(i,o){n.doSend(e,t,function(e){e.success?i(e):o(e)})})},t.prototype.doSend=function(e,n,i){var o={type:"request",seq:this.sequence++,command:e};n&&Object.keys(n).length>0&&(o.arguments=n),this.pendingRequests[o.seq]=i;var r=JSON.stringify(o),s=Buffer.byteLength(r,"utf8");this.outputStream.write("Content-Length: "+s.toString()+t.TWO_CRLF,"utf8"),this.outputStream.write(r,"utf8")},t.prototype.handleData=function(){for(;;){if(this.contentLength>=0){if(this.rawData.length>=this.contentLength){var e=this.rawData.toString("utf8",0,this.contentLength);this.rawData=this.rawData.slice(this.contentLength),this.contentLength=-1,e.length>0&&this.dispatch(e);continue}}else{var n=this.rawData.toString("utf8",0,this.rawData.length),i=n.indexOf(t.TWO_CRLF);if(-1!==i){var o=/Content-Length: (\d+)/.exec(n);if(o&&o[1]){this.contentLength=Number(o[1]),this.rawData=this.rawData.slice(i+t.TWO_CRLF.length);continue}}}break}},t.prototype.dispatch=function(e){try{var t=JSON.parse(e);if("undefined"!=typeof t.event){var n=t;this.emit(n.event,n)}else{var i=t,o=this.pendingRequests[i.request_seq];o&&(delete this.pendingRequests[i.request_seq],o(i))}}catch(r){this.onServerError(new Error(r.message||r))}},t.TWO_CRLF="\r\n\r\n",t}(i.EventEmitter);t.V8Protocol=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/node/rawDebugSession",["require","exports","vs/nls!vs/workbench/parts/debug/node/rawDebugSession","child_process","fs","net","vs/base/common/platform","vs/base/common/actions","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/severity","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/node/v8Protocol","vs/base/node/stdFork","vs/platform/message/common/message","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=function(e){function t(t,n,i,o,r){e.call(this),this.messageService=t,this.telemetryService=n,this.debugServerPort=i,this.adapter=o,this.telemtryAdapter=r,this.socket=null,this.capabilities={}}return __extends(t,e),t.prototype.initServer=function(){var e=this;if(this.cachedInitServer)return this.cachedInitServer;var t=this.debugServerPort?this.connectServer(this.debugServerPort):this.startServer();return this.cachedInitServer=t.then(function(){e.startTime=(new Date).getTime()},function(t){return e.cachedInitServer=null,u.TPromise.wrapError(t)}),this.cachedInitServer},t.prototype.send=function(t,i){var o=this;return this.initServer().then(function(){return e.prototype.send.call(o,t,i).then(function(e){return e},function(e){var t=e.body?e.body.error:null,i=t?d.formatPII(t.format,!1,t.variables):e.message;if(t&&t.sendTelemetry&&(o.telemetryService.publicLog("debugProtocolErrorResponse",{error:i}),o.telemtryAdapter.log("debugProtocolErrorResponse",{error:i})),t&&t.url){var r=t.urlLabel?t.urlLabel:n.localize(0,null);
return u.TPromise.wrapError(c.create(i,{actions:[f.CloseAction,new a.Action("debug.moreInfo",r,null,!0,function(){return m.shell.openExternal(t.url),u.TPromise.as(null)})]}))}return u.TPromise.wrapError(new Error(i))})})},t.prototype.initialize=function(e){var t=this;return this.send("initialize",e).then(function(e){return t.capabilities=e.body||t.capabilities,e})},t.prototype.launch=function(e){return this.isAttach=!1,this.sendAndLazyEmit("launch",e)},t.prototype.attach=function(e){return this.isAttach=!0,this.sendAndLazyEmit("attach",e)},t.prototype.next=function(e){return this.sendAndLazyEmit("next",e)},t.prototype.stepIn=function(e){return this.sendAndLazyEmit("stepIn",e)},t.prototype.stepOut=function(e){return this.sendAndLazyEmit("stepOut",e)},t.prototype["continue"]=function(e){return this.sendAndLazyEmit("continue",e)},t.prototype.sendAndLazyEmit=function(e,t,n){var i=this;void 0===n&&(n=d.SessionEvents.CONTINUED);var o=this.flowEventsCount;return this.send(e,t).then(function(e){return setTimeout(function(){i.flowEventsCount===o&&i.emit(n)},500),e})},t.prototype.pause=function(e){return this.send("pause",e)},t.prototype.disconnect=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),this.stopServerPending&&t?this.stopServer():!this.serverProcess&&!this.socket||this.stopServerPending?u.TPromise.as(null):(this.stopServerPending=!0,this.restarted=e,this.send("disconnect",{restart:e}).then(function(){return n.stopServer()},function(){return n.stopServer()}))},t.prototype.setBreakpoints=function(e){return this.send("setBreakpoints",e)},t.prototype.setFunctionBreakpoints=function(e){return this.send("setFunctionBreakpoints",e)},t.prototype.setExceptionBreakpoints=function(e){return this.send("setExceptionBreakpoints",e)},t.prototype.configurationDone=function(){return this.send("configurationDone",null)},t.prototype.stackTrace=function(e){return this.send("stackTrace",e)},t.prototype.scopes=function(e){return this.send("scopes",e)},t.prototype.variables=function(e){return this.send("variables",e)},t.prototype.source=function(e){return this.send("source",e)},t.prototype.threads=function(){return this.send("threads",null)},t.prototype.evaluate=function(e){return this.send("evaluate",e)},t.prototype.getLengthInSeconds=function(){return((new Date).getTime()-this.startTime)/1e3},t.prototype.getType=function(){return this.adapter.type},t.prototype.connectServer=function(e){var t=this;return new u.TPromise(function(n,i){t.socket=r.createConnection(e,"127.0.0.1",function(){t.connect(t.socket,t.socket),n(null)}),t.socket.on("error",function(e){i(e)})})},t.prototype.startServer=function(){var e=this;return this.adapter.program?this.getLaunchDetails().then(function(t){return e.launchServer(t).then(function(){e.serverProcess.on("error",function(t){return e.onServerError(t)}),e.serverProcess.on("exit",function(t,n){return e.onServerExit()});var t=function(e){return e.toString().replace(/\r?\n$/gm,"")};e.serverProcess.stderr.on("data",function(e){console.log(t(e))}),e.connect(e.serverProcess.stdout,e.serverProcess.stdin)})}):u.TPromise.wrapError(new Error(n.localize(1,null,this.adapter.type)))},t.prototype.launchServer=function(e){var t=this;return new u.TPromise(function(o,r){"node"===e.command?p.fork(e.argv[0],e.argv.slice(1),{},function(i,s){i&&r(new Error(n.localize(2,null,e.argv[0]))),t.serverProcess=s,o(null)}):(t.serverProcess=i.spawn(e.command,e.argv,{stdio:["pipe","pipe","pipe"]}),o(null))})},t.prototype.stopServer=function(){var e=this;if(null!==this.socket&&(this.socket.end(),this.cachedInitServer=null,this.emit(d.SessionEvents.SERVER_EXIT)),!this.serverProcess)return u.TPromise.as(null);this.stopServerPending=!0;var t;return s.isWindows?t=new u.TPromise(function(t,n){var o=i.exec("taskkill /F /T /PID "+e.serverProcess.pid,function(e,t,i){return e?n(e):void 0});o.on("exit",t),o.on("error",n)}):(this.serverProcess.kill("SIGTERM"),t=u.TPromise.as(null)),t},t.prototype.getLaunchDetails=function(){var e=this;return new u.TPromise(function(t,i){o.exists(e.adapter.program,function(o){o?t(null):i(new Error(n.localize(3,null,e.adapter.program)))})}).then(function(){return e.adapter.runtime?{command:e.adapter.runtime,argv:(e.adapter.runtimeArgs||[]).concat([e.adapter.program]).concat(e.adapter.args||[])}:{command:e.adapter.program,argv:e.adapter.args||[]}})},t.prototype.onServerError=function(e){this.messageService.show(l["default"].Error,n.localize(4,null,e.message)),this.stopServer().done(null,c.onUnexpectedError)},t.prototype.onServerExit=function(){this.serverProcess=null,this.cachedInitServer=null,this.stopServerPending||this.messageService.show(l["default"].Error,n.localize(5,null)),this.emit(d.SessionEvents.SERVER_EXIT)},t}(h.V8Protocol);t.RawDebugSession=v}),define("vs/workbench/parts/emmet/node/editorAccessor",["require","exports","vs/editor/common/editorCommon","vs/base/common/strings","vs/editor/contrib/snippet/common/snippet","vs/editor/common/core/range","vs/editor/common/commands/replaceCommand"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e){this.lineStarts=null,this.emmetSupportedModes=["html","razor","css","less","scss","xml","xsl","jade","handlebars","hbs","jsx","tsx","erb","php","twig"],this.editor=e}return e.prototype.noExpansionOccurred=function(){this.editor.trigger("emmet",n.Handler.Tab,{})},e.prototype.isEmmetEnabledMode=function(){var e=this.getSyntax();return-1!==this.emmetSupportedModes.indexOf(e)},e.prototype.getSelectionRange=function(){var e=this.editor.getSelection();return{start:this.getOffsetFromPosition(e.getStartPosition()),end:this.getOffsetFromPosition(e.getEndPosition())}},e.prototype.getCurrentLineRange=function(){var e=this.editor.getSelection().startLineNumber,t=this.getLineStarts(),n=t[e-1],i=t[e];return{start:n,end:i}},e.prototype.getCaretPos=function(){var e=this.editor.getSelection().getStartPosition();return this.getOffsetFromPosition(e)},e.prototype.setCaretPos=function(e){},e.prototype.getCurrentLine=function(){var e=this.editor.getSelection().getStartPosition();return this.editor.getModel().getLineContent(e.lineNumber)},e.prototype.replaceContent=function(e,t,n,a){var c=this.getPositionFromOffset(t),u=this.getPositionFromOffset(n),l=this.editor.getModel().getLineContent(c.lineNumber).substr(0,c.column),d=l.match(/<[\/]?$/);if(d){if(!i.startsWith(e,d[0]))return;c={lineNumber:c.lineNumber,column:c.column-d[0].length}}var h=new r.Range(c.lineNumber,c.column+1,u.lineNumber,u.column+1),p=0;if(h.startLineNumber===h.endLineNumber)p=h.endColumn-h.startColumn;else{var f=new s.ReplaceCommand(h,"");this.editor.executeCommand("emmet",f),p=0}var m=o.CodeSnippet.convertExternalSnippet(e,o.ExternalSnippetType.EmmetSnippet),v=new o.CodeSnippet(m);o.getSnippetController(this.editor).run(v,p,0)},e.prototype.getContent=function(){return this.editor.getModel().getValue()},e.prototype.createSelection=function(e,t){},e.prototype.getSyntax=function(){var e=this.editor.getSelection().getStartPosition(),t=this.editor.getModel().getModeAtPosition(e.lineNumber,e.column),n=t.getId().split(".").pop();return/\b(razor|handlebars|erb|php|hbs|twig)\b/.test(n)?"html":/\b(typescriptreact|javascriptreact)\b/.test(n)?"jsx":"sass"===n?"scss":n},e.prototype.getProfileName=function(){return null},e.prototype.prompt=function(e){},e.prototype.getSelection=function(){return""},e.prototype.getFilePath=function(){return""},e.prototype.flushCache=function(){this.lineStarts=null},e.prototype.getPositionFromOffset=function(e){for(var t,n=this.getLineStarts(),i=0,o=n.length-1;o>=i;)t=i+(o-i)/2|0,n[t]>e?o=t-1:i=t+1;return{lineNumber:i,column:e-n[i-1]}},e.prototype.getOffsetFromPosition=function(e){var t=this.getLineStarts();return t[e.lineNumber-1]+e.column-1},e.prototype.getLineStarts=function(){return null===this.lineStarts&&(this.lineStarts=this.computeLineStarts()),this.lineStarts},e.prototype.computeLineStarts=function(){var e=this.editor.getModel().getValue();return i.computeLineStarts(e)},e}();t.EditorAccessor=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/emmet/node/emmetActions",["require","exports","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","./editorAccessor"],function(e,t,n,i,o,r){"use strict";var s=function(t){function i(e,n){t.call(this,e,n,o.Behaviour.TextFocus),this.editorAccessor=new r.EditorAccessor(n)}return __extends(i,t),i.prototype.run=function(){var t=this;return new n.TPromise(function(n,i){e(["emmet"],function(e){try{if(!t.editorAccessor.isEmmetEnabledMode())return void t.editorAccessor.noExpansionOccurred();e.run("expand_abbreviation",t.editorAccessor)||t.editorAccessor.noExpansionOccurred()}catch(n){}finally{t.editorAccessor.flushCache()}},i)})},i.ID="editor.emmet.action.expandAbbreviation",i}(i.EditorAction);t.ExpandAbbreviationAction=s}),define("vs/workbench/parts/emmet/node/emmet.contribution",["require","exports","vs/nls!vs/workbench/parts/emmet/node/emmet.contribution","vs/editor/common/editorCommonExtensions","vs/editor/common/editorCommon","./emmetActions","vs/platform/keybinding/common/keybindingsRegistry","vs/base/common/keyCodes","vs/platform/keybinding/common/keybindingService"],function(e,t,n,i,o,r,s,a,c){"use strict";i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(r.ExpandAbbreviationAction,r.ExpandAbbreviationAction.ID,n.localize(0,null))),s.KeybindingsRegistry.registerCommandRule({id:r.ExpandAbbreviationAction.ID,weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),context:c.KbExpr.and(c.KbExpr.has(o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),c.KbExpr.not(o.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION),c.KbExpr.not(o.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS),c.KbExpr.not(o.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS)),primary:a.KeyCode.Tab})}),define("vs/workbench/parts/errorList/browser/errorListConstants",["require","exports"],function(e,t){"use strict";t.ERROR_LIST_PANEL_ID="workbench.panel.errorList"}),define("vs/workbench/parts/execution/common/execution",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IExecutionService=n.createDecorator("executionService"),t.ITerminalService=n.createDecorator("nativeTerminalService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/execution/electron-browser/executionService",["require","exports","vs/nls!vs/workbench/parts/execution/electron-browser/executionService","vs/base/common/errors","vs/base/common/hash","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/strings","vs/workbench/parts/execution/common/execution","vs/base/common/uri","child_process","vs/base/node/processes"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(){function e(){this.serviceId=c.IExecutionService,this._executions=Object.create(null)}return e.prototype.exec=function(e,t,n){var r,a=s.clone(process.env);"string"==typeof n?r={cwd:n,env:a}:(s.mixin(a,n.env),n.env=a,r=n);var c=t.concat([e,r.cwd]).reduce(function(e,t){return o.combine(o.computeMurmur2StringHashCode(t),e)},17);this._executions[c]&&(this._executions[c].cancel(),delete this._executions[c]);var u=this.doExec(e,t,r);return this._executions[c]=u,u.then(function(e){return e},function(e){if(!i.isPromiseCanceledError(e))throw e})},e.prototype.doExec=function(e,t,n){throw i.notImplemented()},e}();t.AbstractExecutionService=h;var p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.doExec=function(e,t,n){var i;return new r.TPromise(function(o,r,s){var c=d.getWindowsShell();t=["/c","start","/wait",c,"/c",a.format('"{0} {1} & pause"',e,t.join(" "))],n=n||{},n.windowsVerbatimArguments=!0,i=l.spawn(c,t,n),i.on("exit",o),i.on("error",r),s(i)},function(){i&&l.exec("taskkill /F /T /PID "+i.pid,function(e,t,n){e&&console.error(e)})})},t}(h);t.WinExecutionService=p;var f=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.doExec=function(t,n,i){var o;return new r.TPromise(function(r,s,a){n=[u["default"].parse(e.toUrl("vs/workbench/parts/execution/electron-browser/macHelper.scpt")).fsPath,"cd","'"+i.cwd+"'",";",t].concat(n),o=l.spawn("/usr/bin/osascript",n,i),o.on("exit",r),o.on("error",s),a(o)},function(){o&&o.kill("SIGTERM")})},n}(h);t.MacExecutionService=f;var m=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.doExec=function(e,n,i){var o;return new r.TPromise(function(r,s,c){var u="";n.length>0&&(u='"'+n.join('" "')+'"');var d="";i.cwd&&(d=a.format('cd "{0}"',i.cwd));var h=a.format('{0}; "{1}" {2} ; echo; read -p "{3}" -n1;',d,e,u,t.WAIT_MESSAGE);n=["-x","bash","-c",a.format("''{0}''",h)],o=l.spawn(t.LINUX_TERM,n,i),o.on("exit",r),o.on("error",s),c(o)},function(){console.log("SENDING KILL"),o&&o.kill("SIGTERM")})},t.LINUX_TERM="/usr/bin/gnome-terminal",t.WAIT_MESSAGE=n.localize(0,null),t}(h);t.LinuxExecutionService=m});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/execution/electron-browser/terminalService",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/workbench/parts/execution/common/execution","vs/platform/configuration/common/configuration","vs/platform/message/common/message","child_process","vs/base/node/processes"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=function(){function e(e,t){this._configurationService=e,this._messageService=t,this.serviceId=r.ITerminalService}return e.prototype.openTerminal=function(e){c.spawn(u.getWindowsShell(),["/c","start","/wait"],{cwd:e})},e=__decorate([__param(0,s.IConfigurationService),__param(1,a.IMessageService)],e)}();t.WinTerminalService=l;var d=function(){function t(){this.serviceId=r.ITerminalService}return t.prototype.openTerminal=function(e){this.getTerminalHelperScriptPath().done(function(t){c.spawn("/usr/bin/osascript",[t,e])},n.onUnexpectedError)},t.prototype.getTerminalHelperScriptPath=function(){return this._terminalApplicationScriptPath?this._terminalApplicationScriptPath:this._terminalApplicationScriptPath=new o.TPromise(function(e,t){var n="",i=c.spawn("/usr/bin/osascript",["-e",'version of application "iTerm"']);i.on("error",t),i.stdout.on("data",function(e){n+=e.toString()}),i.on("exit",function(t){var i="terminal.scpt";if(0===t){var o=/(\d+).(\d+).(\d+)/.exec(n);if(o.length>=4){var r=+o[1],s=+o[2],a=+o[3];i=2>r||2===r&&9>s||2===r&&9===s&&20150414>a?"iterm.scpt":"itermNew.scpt"}}e(i)})}).then(function(t){return i["default"].parse(e.toUrl("vs/workbench/parts/execution/electron-browser/"+t)).fsPath})},t}();t.MacTerminalService=d;var h=function(){function e(){this.serviceId=r.ITerminalService}return e.prototype.openTerminal=function(e){c.spawn("x-terminal-emulator",[],{cwd:e})},e}();t.LinuxTerminalService=h}),define("vs/workbench/parts/execution/electron-browser/execution.contribution",["require","exports","vs/base/common/platform","vs/workbench/parts/execution/electron-browser/executionService","vs/workbench/parts/execution/electron-browser/terminalService","vs/platform/instantiation/common/extensions","vs/workbench/parts/execution/common/execution"],function(e,t,n,i,o,r,s){"use strict";n.isWindows?(r.registerSingleton(s.IExecutionService,i.WinExecutionService),r.registerSingleton(s.ITerminalService,o.WinTerminalService)):n.isMacintosh?(r.registerSingleton(s.IExecutionService,i.MacExecutionService),r.registerSingleton(s.ITerminalService,o.MacTerminalService)):n.isLinux&&(r.registerSingleton(s.IExecutionService,i.LinuxExecutionService),r.registerSingleton(s.ITerminalService,o.LinuxTerminalService))}),define("vs/workbench/parts/extensions/common/extensions",["require","exports","vs/nls!vs/workbench/parts/extensions/common/extensions","vs/platform/instantiation/common/instantiation"],function(e,t,n,i){"use strict";t.IExtensionsService=i.createDecorator("extensionsService"),t.IGalleryService=i.createDecorator("galleryService"),t.IExtensionTipsService=i.createDecorator("extensionTipsService"),t.ExtensionsLabel=n.localize(0,null)}),define("vs/workbench/parts/extensions/common/extensionsUtil",["require","exports","vs/workbench/parts/extensions/common/extensions","vs/base/common/winjs.base","semver"],function(e,t,n,i,o){"use strict";function r(e,t){return e.publisher===t.publisher&&e.name===t.name}function s(e){var t=e.get(n.IExtensionsService),s=e.get(n.IGalleryService);return s.isEnabled()?i.TPromise.join([s.query(),t.getInstalled()]).then(function(e){var t=e[0],n=e[1];return t.filter(function(e){var t=n.filter(function(t){return r(t,e)})[0];return t&&o.lt(t.version,e.version)})}):i.TPromise.as([])}t.extensionEquals=r,t.getOutdatedExtensions=s});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionTipsService",["require","exports","vs/base/common/objects","vs/base/common/lifecycle","vs/base/common/glob","vs/workbench/parts/extensions/common/extensions","vs/editor/common/services/modelService","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t,i,o){var r=this;if(this._galleryService=e,this._modelService=t,this._storageService=i,this._disposables=[],this._galleryService.isEnabled()){this._recommendations=n.toObject(JSON.parse(i.get("extensionsAssistant/recommendations",a.StorageScope.GLOBAL,"[]")),function(e){return e},function(){return!0});var s=o.getConfiguration().env.extensionTips;if(s){this._availableRecommendations=s,this._disposables.push(this._modelService.onModelAdded(function(e){r._suggest(e.getAssociatedResource())}));for(var c=0,u=this._modelService.getModels();c<u.length;c++){var l=u[c];this._suggest(l.getAssociatedResource())}}}}return e.prototype.getRecommendations=function(){var e=this;return this._galleryService.query().then(null,function(){return[]}).then(function(e){return n.toObject(e,function(e){return e.publisher+"."+e.name})}).then(function(t){return Object.keys(e._recommendations).map(function(e){return t[e]}).filter(function(e){return!!e})})},e.prototype._suggest=function(e){var t=this;if(e){var n=Object.keys(this._availableRecommendations),i=n.filter(function(n){return o.match(t._availableRecommendations[n],e.fsPath)});i.forEach(function(e){return t._recommendations[e]=!0}),this._storageService.store("extensionsAssistant/recommendations",JSON.stringify(Object.keys(this._recommendations)),a.StorageScope.GLOBAL)}},e.prototype.dispose=function(){this._disposables=i.disposeAll(this._disposables)},e=__decorate([__param(0,r.IGalleryService),__param(1,s.IModelService),__param(2,a.IStorageService),__param(3,c.IWorkspaceContextService)],e)}();t.ExtensionTipsService=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/browser/files",["require","exports","vs/workbench/browser/parts/editor/baseEditor"],function(e,t,n){"use strict";var i=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o),this.mimetypes=r}return __extends(t,e),t.prototype.getMimeTypes=function(){return this.mimetypes},t}(n.EditorDescriptor);t.FileEditorDescriptor=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/common/explorerViewModel",["require","exports","vs/base/common/assert","vs/base/common/types","vs/base/common/uri","vs/base/common/platform","vs/base/common/paths","vs/base/common/mime"],function(e,t,n,i,o,r,s,a){"use strict";!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ANY=2]="ANY"}(t.StatType||(t.StatType={}));var c=t.StatType,u=function(){function e(e,t,n,i,o,r){void 0===i&&(i=s.basename(e.fsPath)),this.resource=e,this.name=i,this.isDirectory=!!t,this.hasChildren=t&&n,this.mime=t?void 0:a.guessMimeTypes(this.resource.fsPath).join(", "),this.etag=r,this.mtime=o,this.isDirectory&&(this.children=[]),this.isDirectoryResolved=!1}return e.prototype.getId=function(){return this.resource.toString()},e.create=function(t,n){var i=new e(t.resource,t.isDirectory,t.hasChildren,t.name,t.mtime,t.etag);if(i.isDirectory&&(i.isDirectoryResolved=!!t.children||!!n&&n.some(function(e){return s.isEqualOrParent(e.fsPath,i.resource.fsPath)}),t.children))for(var o=0,r=t.children.length;r>o;o++){var a=e.create(t.children[o],n);a.parent=i,i.children.push(a),i.hasChildren=i.children.length>0}return i},e.mergeLocalWithDisk=function(t,i){n.ok(t.resource.toString()===i.resource.toString(),"Merging only supported for stats with the same resource");var o=t.isDirectory||i.isDirectory;if((!o||!i.isDirectoryResolved||t.isDirectoryResolved)&&(i.resource=t.resource,i.name=t.name,i.isDirectory=t.isDirectory,i.hasChildren=t.isDirectory&&t.hasChildren,i.mtime=t.mtime,i.mime=t.mime,i.isDirectoryResolved=t.isDirectoryResolved,o&&t.isDirectoryResolved)){var r=Object.create(null);i.children.forEach(function(e){r[e.resource.toString()]=e}),i.children=[],t.children.forEach(function(t){var n=r[t.resource.toString()];n?(e.mergeLocalWithDisk(t,n),n.parent=i,i.children.push(n)):(t.parent=i,i.children.push(t))})}},e.prototype.clone=function(){var t=new e(o["default"].parse(this.resource.toString()),this.isDirectory,this.hasChildren,this.name,this.mtime,this.etag);return t.isDirectoryResolved=this.isDirectoryResolved,this.parent&&(t.parent=this.parent),this.isDirectory&&this.children.forEach(function(e){t.addChild(e.clone())}),t},e.prototype.addChild=function(e){n.ok(this.isDirectory,"Can only add a child to a folder"),this.removeChild(e),e.parent=this,e.updateResource(!1),this.children.push(e),this.hasChildren=this.children.length>0},e.prototype.hasChild=function(e,t,o){void 0===o&&(o=c.ANY),n.ok(this.isDirectory,"Can only call hasChild on a directory"),n.ok(i.isString(e),"Expected parameter of type String");for(var r=0;r<this.children.length;r++){var s=this.children[r];if(!(o===c.FILE&&s.isDirectory||o===c.FOLDER&&!s.isDirectory)){if(s.name===e)return!0;if(t&&s.name.toLowerCase()===e.toLowerCase())return!0}}return!1},e.prototype.removeChild=function(e){n.ok(this.isDirectory,"Can only remove a child from a directory"),n.ok(!!this.children,"Expected children for directory but found none: "+this.resource.fsPath);for(var t=0;t<this.children.length;t++)if(this.children[t].resource.toString()===e.resource.toString()){this.children.splice(t,1);break}this.hasChildren=this.children.length>0},e.prototype.move=function(e,t,i){var o=this;n.ok(e.isDirectory,"Can only move an element into a directory"),t||(t=function(e){e()}),this.parent.removeChild(this),t(function(){e.addChild(o),o.updateResource(!0),i&&i()})},e.prototype.updateResource=function(e){this.resource=o["default"].file(s.join(this.parent.resource.fsPath,this.name)),e&&this.isDirectory&&this.hasChildren&&this.children&&this.children.forEach(function(e){e.updateResource(!0)})},e.prototype.rename=function(e){this.name=e.name,this.mime=e.mime,this.mtime=e.mtime,this.updateResource(!0)},e.prototype.find=function(e){if(this.fileResourceEquals(e,this.resource))return this;if(!this.hasChildren)return null;for(var t=0;t<this.children.length;t++){var n=this.children[t];if(this.fileResourceEquals(e,n.resource))return n;if(n.isDirectory&&s.isEqualOrParent(e.fsPath,n.resource.fsPath))return n.find(e)}return null},e.prototype.fileResourceEquals=function(e,t){var n=e.toString()===t.toString();return r.isLinux||n?n:e.toString().toLowerCase()===t.toString().toLowerCase()},e}();t.FileStat=u;var l=function(e){function t(n){e.call(this,o["default"].file("")),this.id=t.ID++,this.isDirectoryResolved=n}return __extends(t,e),t.prototype.destroy=function(){this.parent.removeChild(this),this.isDirectoryResolved=void 0,this.name=void 0,this.isDirectory=void 0,this.hasChildren=void 0,this.mtime=void 0,this.mime=void 0},t.prototype.getId=function(){return"new-stat-placeholder:"+this.id+":"+this.parent.resource.toString()},t.prototype.clone=function(){var e=new t(this.isDirectory);return e.parent=this.parent,e},t.prototype.addChild=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.hasChild=function(e,t){return!1},t.prototype.removeChild=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.move=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.rename=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.find=function(e){return null},t.addNewStatPlaceholder=function(e,i){n.ok(e.isDirectory,"Can only add a child to a folder");var o=new t(i);return o.parent=e,e.children.push(o),e.hasChildren=e.children.length>0,o},t.ID=0,t}(u);t.NewStatPlaceholder=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/common/files",["require","exports","vs/base/common/events","vs/base/common/mime","vs/workbench/common/editor","vs/platform/instantiation/common/instantiation","vs/workbench/parts/files/common/explorerViewModel"],function(e,t,n,i,o,r,s){"use strict";function a(e){if(e instanceof s.FileStat){var n=e;return{resource:n.resource,mimes:n.mime?n.mime.split(", "):[],isDirectory:n.isDirectory}}if(e&&e.CLASS_ID===t.WORKING_FILES_MODEL_ENTRY_CLASS_ID){var o=e;if(o.isFile)return{resource:o.resource,mimes:i.guessMimeTypes(o.resource.fsPath),isDirectory:!1}}return null}t.VIEWLET_ID="workbench.view.explorer",t.FILE_EDITOR_INPUT_ID="workbench.editors.files.fileEditorInput",t.TEXT_FILE_EDITOR_ID="workbench.editors.files.textFileEditor",t.BINARY_FILE_EDITOR_ID="workbench.editors.files.binaryFileEditor",t.WORKING_FILES_MODEL_ENTRY_CLASS_ID="workbench.workingFiles.model.entry.class";var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(o.EditorInput);t.FileEditorInput=c,t.asFileResource=a,t.EventType={FILE_DIRTY:"files:fileDirty",FILE_SAVING:"files:fileSaving",FILE_SAVE_ERROR:"files:fileSaveError",FILE_SAVED:"files:fileSaved",FILE_REVERTED:"files:fileReverted"};var u=function(e){function t(t,n,i){e.call(this,null,t,n,i)}return __extends(t,e),t.prototype.getBefore=function(){return this.oldValue},t.prototype.getAfter=function(){return this.newValue},t.prototype.gotAdded=function(){return!this.oldValue&&!!this.newValue},t.prototype.gotMoved=function(){return!!this.oldValue&&!!this.newValue&&this.oldValue.resource.toString()!==this.newValue.resource.toString()},t.prototype.gotUpdated=function(){return!!this.oldValue&&!!this.newValue&&!this.gotMoved()&&this.oldValue!==this.newValue},t.prototype.gotDeleted=function(){return!!this.oldValue&&!this.newValue},t}(n.PropertyChangeEvent);t.LocalFileChangeEvent=u;var l=function(e){function t(t,n,i,o){void 0===i&&(i=n),e.call(this,n,i,o),this._model=t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.setAutoSaved=function(e){this._isAutoSaved=e},Object.defineProperty(t.prototype,"isAutoSaved",{get:function(){return this._isAutoSaved},enumerable:!0,configurable:!0}),t}(u);t.TextFileChangeEvent=l,t.TEXT_FILE_SERVICE_ID="textFileService",function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"}(t.ConfirmResult||(t.ConfirmResult={}));t.ConfirmResult;!function(e){e[e.OFF=0]="OFF",e[e.AFTER_SHORT_DELAY=1]="AFTER_SHORT_DELAY",e[e.AFTER_LONG_DELAY=2]="AFTER_LONG_DELAY",e[e.ON_FOCUS_CHANGE=3]="ON_FOCUS_CHANGE"}(t.AutoSaveMode||(t.AutoSaveMode={}));t.AutoSaveMode;t.ITextFileService=r.createDecorator(t.TEXT_FILE_SERVICE_ID)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/common/editors/saveParticipant",["require","exports","vs/editor/common/services/codeEditorService","vs/base/common/errors","vs/workbench/parts/files/common/files","vs/editor/common/core/selection","vs/editor/common/commands/trimTrailingWhitespaceCommand","vs/platform/configuration/common/configuration","vs/platform/event/common/event"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t,n){this.configurationService=e,this.eventService=t,this.codeEditorService=n,this.toUnbind=[],this.trimTrailingWhitespace=!1,this.registerListeners(),this.loadConfiguration()}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(o.EventType.FILE_SAVING,function(t){return e.onTextFileSaving(t)})),this.toUnbind.push(this.configurationService.addListener(a.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)}))},e.prototype.loadConfiguration=function(){var e=this;this.configurationService.loadConfiguration().done(function(t){e.onConfigurationChange(t)},i.onUnexpectedError)},e.prototype.onConfigurationChange=function(e){this.trimTrailingWhitespace=e&&e.files&&e.files.trimTrailingWhitespace},e.prototype.getId=function(){return"vs.files.saveparticipant"},e.prototype.onTextFileSaving=function(e){this.trimTrailingWhitespace&&this.doTrimTrailingWhitespace(e.model,e.isAutoSaved)},e.prototype.doTrimTrailingWhitespace=function(e,t){var n=[r.Selection.createSelection(1,1,1,1)],i=[];if(t&&e.isAttachedToEditor())for(var o=this.codeEditorService.listCodeEditors(),a=0,c=o.length;c>a;a++){var u=o[a],l=u.getModel();l&&e===l&&(n=u.getSelections(),i.push.apply(i,n.map(function(e){return{lineNumber:e.positionLineNumber,column:e.positionColumn}})))}var d=s.trimTrailingWhitespace(e,i);d.length&&e.pushEditOperations(n,d,function(e){return n})},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e=__decorate([__param(0,a.IConfigurationService),__param(1,c.IEventService),__param(2,n.ICodeEditorService)],e)}();t.SaveParticipant=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),
s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/common/editors/textFileEditorModel",["require","exports","vs/nls!vs/workbench/parts/files/common/editors/textFileEditorModel","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/uri","vs/base/common/paths","vs/base/common/diagnostics","vs/base/common/types","vs/editor/common/editorCommon","vs/workbench/common/events","vs/workbench/parts/files/common/files","vs/workbench/common/editor","vs/workbench/common/editor/textEditorModel","vs/platform/files/common/files","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S,E=function(){function e(e){this.messageService=e}return e.prototype.onSaveError=function(e,t){this.messageService.show(g.Severity.Error,n.localize(0,null,s.basename(t.getResource().fsPath),o.toErrorMessage(e,!1)))},e=__decorate([__param(0,g.IMessageService)],e)}();S||(S=a.register("TextFileEditorModelDiagnostics",function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log(e[1]+" - "+e[0]+" (time: "+e[2].getTime()+" ["+e[2].toUTCString()+"])")})),function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ERROR=4]="ERROR"}(t.State||(t.State={}));var w=t.State,C=function(e){function a(t,n,i,o,r,s,a,c,u,l){if(e.call(this,r,o),this.messageService=i,this.eventService=s,this.fileService=a,this.instantiationService=c,this.telemetryService=u,this.textFileService=l,this.resource=t,"file"!==this.resource.scheme)throw new Error("TextFileEditorModel can only handle file:// resources.");this.preferredEncoding=n,this.textModelChangeListener=null,this.dirty=!1,this.autoSavePromises=[],this.versionId=0,this.lastDirtyTime=0,this.mapPendingSaveToVersionId={},this.updateAutoSaveConfiguration(l.getAutoSaveConfiguration()),this.registerListeners()}return __extends(a,e),a.prototype.registerListeners=function(){var e=this;this.textFileServiceListener=this.textFileService.onAutoSaveConfigurationChange(function(t){return e.updateAutoSaveConfiguration(t)})},a.prototype.updateAutoSaveConfiguration=function(e){"number"==typeof e.autoSaveDelay&&e.autoSaveDelay>0?(this.autoSaveAfterMillies=e.autoSaveDelay,this.autoSaveAfterMilliesEnabled=!0):(this.autoSaveAfterMillies=void 0,this.autoSaveAfterMilliesEnabled=!1)},a.setSaveErrorHandler=function(e){a.saveErrorHandler=e},a.prototype.setConflictResolutionMode=function(){S("setConflictResolutionMode() - enabled conflict resolution mode",this.resource,new Date),this.inConflictResolutionMode=!0},a.prototype.isInConflictResolutionMode=function(){return this.inConflictResolutionMode},a.prototype.revert=function(){var e=this;if(!this.isResolved())return i.TPromise.as(null);this.cancelAutoSavePromises();var t=this.cloneStat(this.versionOnDiskStat),n=this.setDirty(!1);return this.load(!0).then(function(){e.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(e.textEditorModel,t,e.versionOnDiskStat))},function(o){return o.fileOperationResult===f.FileOperationResult.FILE_NOT_FOUND?e.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(e.textEditorModel,t,e.versionOnDiskStat)):n(),i.TPromise.wrapError(o)})},a.prototype.load=function(e){var t=this;if(S("load() - enter",this.resource,new Date),this.dirty)return S("load() - exit - without loading because model is dirty",this.resource,new Date),i.TPromise.as(this);var n;return e?n=void 0:this.versionOnDiskStat&&(n=this.versionOnDiskStat.etag),this.fileService.resolveContent(this.resource,{acceptTextOnly:!0,etag:n,encoding:this.preferredEncoding}).then(function(e){S("load() - resolved content",t.resource,new Date),t.telemetryService.publicLog("fileGet",{mimeType:e.mime,ext:s.extname(t.resource.fsPath),path:b.anonymize(t.resource.fsPath)});var n={resource:t.resource,name:e.name,mtime:e.mtime,etag:e.etag,mime:e.mime,isDirectory:!1,hasChildren:!1,children:void 0};t.updateVersionOnDiskStat(n);var o=t.contentEncoding;if(t.contentEncoding=e.encoding,t.preferredEncoding?t.updatePreferredEncoding(t.contentEncoding):o!==t.contentEncoding&&t.eventService.emit(l.EventType.RESOURCE_ENCODING_CHANGED,new l.ResourceEvent(t.resource)),t.textEditorModel){S("load() - updated text editor model",t.resource,new Date),t.setDirty(!1),t.blockModelContentChange=!0;try{t.updateTextEditorModel(e.value)}finally{t.blockModelContentChange=!1}return i.TPromise.as(t)}return t.createTextEditorModelPromise?(S("load() - join existing text editor model promise",t.resource,new Date),t.createTextEditorModelPromise):(S("load() - created text editor model",t.resource,new Date),t.createTextEditorModelPromise=t.createTextEditorModel(e.value,e.resource).then(function(){return t.createTextEditorModelPromise=null,t.setDirty(!1),t.textModelChangeListener=t.textEditorModel.addListener(u.EventType.ModelContentChanged,function(e){return t.onModelContentChanged(e)}),t},function(e){return t.createTextEditorModelPromise=null,i.TPromise.wrapError(e)}),t.createTextEditorModelPromise)},function(e){return e.fileOperationResult===f.FileOperationResult.FILE_NOT_MODIFIED_SINCE?(t.setDirty(!1),i.TPromise.as(t)):i.TPromise.wrapError(e)})},a.prototype.getOrCreateMode=function(e,t,n){return e.getOrCreateModeByFilenameOrFirstLine(this.resource.fsPath,n)},a.prototype.onModelContentChanged=function(e){if(S("onModelContentChanged("+e.changeType+") - enter",this.resource,new Date),this.versionId++,S("onModelContentChanged() - new versionId "+this.versionId,this.resource,new Date),!this.blockModelContentChange){if(!this.autoSaveAfterMilliesEnabled&&this.textEditorModel.getAlternativeVersionId()===this.bufferSavedVersionId)return S("onModelContentChanged() - model content changed back to last saved version",this.resource,new Date),this.setDirty(!1),void this.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(this.textEditorModel,this.versionOnDiskStat));S("onModelContentChanged() - model content changed and marked as dirty",this.resource,new Date),this.makeDirty(e),this.autoSaveAfterMilliesEnabled&&(this.inConflictResolutionMode?S("makeDirty() - prevented save because we are in conflict resolution mode",this.resource,new Date):this.doAutoSave(this.versionId))}},a.prototype.makeDirty=function(e){var t=this.dirty;if(this.setDirty(!0),this.lastDirtyTime=(new Date).getTime(),!t){var n=this.cloneStat(this.versionOnDiskStat);this.emitEvent(d.EventType.FILE_DIRTY,new d.TextFileChangeEvent(this.textEditorModel,n,n,e))}},a.prototype.doAutoSave=function(e){var t=this;S("doAutoSave() - enter for versionId "+e,this.resource,new Date),this.cancelAutoSavePromises();var n=i.TPromise.timeout(this.autoSaveAfterMillies).then(function(){e===t.versionId&&t.doSave(e,!0)});return this.autoSavePromises.push(n),n},a.prototype.cancelAutoSavePromises=function(){for(;this.autoSavePromises.length;)this.autoSavePromises.pop().cancel()},a.prototype.save=function(e,t){return this.isResolved()?(S("save() - enter",this.resource,new Date),this.cancelAutoSavePromises(),this.doSave(this.versionId,!1,e,t)):i.TPromise.as(null)},a.prototype.doSave=function(e,t,n,o){var r=this;S("doSave("+e+") - enter with versionId "+e,this.resource,new Date);var a=this.mapPendingSaveToVersionId[e];if(a)return S("doSave("+e+") - exit - found a pending save for versionId "+e,this.resource,new Date),a;if(!this.dirty||e!==this.versionId)return S("doSave("+e+") - exit - because not dirty and/or versionId is different (this.isDirty: "+this.dirty+", this.versionId: "+this.versionId+")",this.resource,new Date),i.TPromise.as(null);if(this.isBusySaving()&&(S("doSave("+e+") - exit - because busy saving",this.resource,new Date),this.autoSaveAfterMilliesEnabled))return this.doAutoSave(e);this.autoSaveAfterMilliesEnabled||this.textEditorModel.pushStackElement();var c=this.cloneStat(this.versionOnDiskStat);this.blockModelContentChange=!0;try{var u=new d.TextFileChangeEvent(this.textEditorModel,c);u.setAutoSaved(t),this.emitEvent(d.EventType.FILE_SAVING,u)}finally{this.blockModelContentChange=!1}return e=this.versionId,this.inErrorMode=!1,S("doSave("+e+") - before updateContent()",this.resource,new Date),this.mapPendingSaveToVersionId[e]=this.fileService.updateContent(this.versionOnDiskStat.resource,this.getValue(),{overwriteReadonly:n,overwriteEncoding:o,mtime:this.versionOnDiskStat.mtime,encoding:this.getEncoding(),etag:this.versionOnDiskStat.etag}).then(function(t){S("doSave("+e+") - after updateContent()",r.resource,new Date),r.telemetryService.publicLog("filePUT",{mimeType:t.mime,ext:s.extname(r.versionOnDiskStat.resource.fsPath)}),delete r.mapPendingSaveToVersionId[e],e===r.versionId?(S("doSave("+e+") - setting dirty to false because versionId did not change",r.resource,new Date),r.setDirty(!1)):S("doSave("+e+") - not setting dirty to false because versionId did change meanwhile",r.resource,new Date);var n=r.versionOnDiskStat;r.updateVersionOnDiskStat(t);var i=r.cloneStat(n),o=r.cloneStat(r.versionOnDiskStat);r.emitEvent("files.internal:fileChanged",new d.TextFileChangeEvent(r.textEditorModel,i,o)),r.emitEvent(d.EventType.FILE_SAVED,new d.TextFileChangeEvent(r.textEditorModel,i,o))},function(t){S("doSave("+e+") - exit - resulted in a save error: "+t.toString(),r.resource,new Date),delete r.mapPendingSaveToVersionId[e],r.inErrorMode=!0,r.onSaveError(t),r.emitEvent(d.EventType.FILE_SAVE_ERROR,new d.TextFileChangeEvent(r.textEditorModel,c))}),this.mapPendingSaveToVersionId[e]},a.prototype.setDirty=function(e){var t=this,n=this.dirty,i=this.inConflictResolutionMode,o=this.inErrorMode,r=this.bufferSavedVersionId;return e?this.dirty=!0:(this.dirty=!1,this.inConflictResolutionMode=!1,this.inErrorMode=!1,this.textEditorModel&&(this.bufferSavedVersionId=this.textEditorModel.getAlternativeVersionId())),function(){t.dirty=n,t.inConflictResolutionMode=i,t.inErrorMode=o,t.bufferSavedVersionId=r}},a.prototype.updateVersionOnDiskStat=function(e){this.versionOnDiskStat?this.versionOnDiskStat.mtime<=e.mtime&&(this.versionOnDiskStat=e):this.versionOnDiskStat=e},a.prototype.onSaveError=function(e){a.saveErrorHandler||a.setSaveErrorHandler(this.instantiationService.createInstance(E)),a.saveErrorHandler.onSaveError(e,this)},a.prototype.emitEvent=function(e,t){try{this.eventService.emit(e,t)}catch(i){i.friendlyMessage=n.localize(1,null,e),o.onUnexpectedError(i)}},a.prototype.isBusySaving=function(){return!c.isEmptyObject(this.mapPendingSaveToVersionId)},a.prototype.isDirty=function(){return this.dirty},a.prototype.getLastDirtyTime=function(){return this.lastDirtyTime},a.prototype.getLastModifiedTime=function(){return this.versionOnDiskStat?this.versionOnDiskStat.mtime:-1},a.prototype.getState=function(){return this.inConflictResolutionMode?w.CONFLICT:this.inErrorMode?w.ERROR:this.dirty?this.isBusySaving()?w.PENDING_SAVE:this.dirty?w.DIRTY:void 0:w.SAVED},a.prototype.getEncoding=function(){return this.preferredEncoding||this.contentEncoding},a.prototype.setEncoding=function(e,t){if(this.isNewEncoding(e))if(t===h.EncodingMode.Encode)this.updatePreferredEncoding(e),this.isDirty()||(this.versionId++,this.makeDirty()),this.inConflictResolutionMode||this.save(!1,!0).done(null,o.onUnexpectedError);else{if(this.isDirty())return void this.messageService.show(g.Severity.Info,n.localize(2,null));this.updatePreferredEncoding(e),this.load(!0).done(null,o.onUnexpectedError)}},a.prototype.updatePreferredEncoding=function(e){this.isNewEncoding(e)&&(this.preferredEncoding=e,this.eventService.emit(l.EventType.RESOURCE_ENCODING_CHANGED,new l.ResourceEvent(this.resource)))},a.prototype.isNewEncoding=function(e){return this.preferredEncoding===e?!1:!(!this.preferredEncoding&&this.contentEncoding===e)},a.prototype.isResolved=function(){return!c.isUndefinedOrNull(this.versionOnDiskStat)},a.prototype.isDisposed=function(){return this.disposed},a.prototype.getResource=function(){return this.resource},a.prototype.dispose=function(){this.disposed=!0,this.inConflictResolutionMode=!1,this.inErrorMode=!1,this.createTextEditorModelPromise=null,this.textModelChangeListener&&(this.textModelChangeListener(),this.textModelChangeListener=null),this.textFileServiceListener&&(this.textFileServiceListener.dispose(),this.textFileServiceListener=null),this.cancelAutoSavePromises(),t.CACHE.remove(this.resource),e.prototype.dispose.call(this)},a.prototype.cloneStat=function(e){return{resource:r["default"].parse(e.resource.toString()),name:e.name,mtime:e.mtime,etag:e.etag,mime:e.mime,isDirectory:e.isDirectory,hasChildren:e.hasChildren,children:e.children}},a.ID="workbench.editors.files.textFileEditorModel",a=__decorate([__param(2,g.IMessageService),__param(3,y.IModeService),__param(4,_.IModelService),__param(5,m.IEventService),__param(6,f.IFileService),__param(7,v.IInstantiationService),__param(8,b.ITelemetryService),__param(9,d.ITextFileService)],a)}(p.BaseTextEditorModel);t.TextFileEditorModel=C;var T=function(){function e(){this.mapResourcePathToModel=Object.create(null)}return e.prototype.dispose=function(e){var t=this.get(e);if(t){if(t.isDirty())return;t.dispose()}},e.prototype.get=function(e){return this.mapResourcePathToModel[e.toString()]},e.prototype.getAll=function(e){var t=this;return Object.keys(this.mapResourcePathToModel).filter(function(t){return!e||e.toString()===t}).map(function(e){return t.mapResourcePathToModel[e]})},e.prototype.add=function(e,t){this.mapResourcePathToModel[e.toString()]=t},e.prototype.clear=function(){this.mapResourcePathToModel=Object.create(null)},e.prototype.remove=function(e){delete this.mapResourcePathToModel[e.toString()]},e}();t.TextFileEditorModelCache=T,t.CACHE=new T}),define("vs/workbench/parts/git/common/git",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";function i(e){return!/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$/.test(e)}!function(e){e[e.INDEX=0]="INDEX",e[e.WORKING_TREE=1]="WORKING_TREE",e[e.MERGE=2]="MERGE"}(t.StatusType||(t.StatusType={}));t.StatusType;!function(e){e[e.INDEX_MODIFIED=0]="INDEX_MODIFIED",e[e.INDEX_ADDED=1]="INDEX_ADDED",e[e.INDEX_DELETED=2]="INDEX_DELETED",e[e.INDEX_RENAMED=3]="INDEX_RENAMED",e[e.INDEX_COPIED=4]="INDEX_COPIED",e[e.MODIFIED=5]="MODIFIED",e[e.DELETED=6]="DELETED",e[e.UNTRACKED=7]="UNTRACKED",e[e.IGNORED=8]="IGNORED",e[e.ADDED_BY_US=9]="ADDED_BY_US",e[e.ADDED_BY_THEM=10]="ADDED_BY_THEM",e[e.DELETED_BY_US=11]="DELETED_BY_US",e[e.DELETED_BY_THEM=12]="DELETED_BY_THEM",e[e.BOTH_ADDED=13]="BOTH_ADDED",e[e.BOTH_DELETED=14]="BOTH_DELETED",e[e.BOTH_MODIFIED=15]="BOTH_MODIFIED"}(t.Status||(t.Status={}));t.Status;t.ModelEvents={MODEL_UPDATED:"ModelUpdated",STATUS_MODEL_UPDATED:"StatusModelUpdated",HEAD_UPDATED:"HEADUpdated",HEADS_UPDATED:"HEADSUpdated",TAGS_UPDATED:"TagsUpdated",REMOTES_UPDATED:"RemotesUpdated"},function(e){e[e.NotInitialized=0]="NotInitialized",e[e.NotARepo=1]="NotARepo",e[e.NotAtRepoRoot=2]="NotAtRepoRoot",e[e.OK=3]="OK",e[e.NoGit=4]="NoGit",e[e.Disabled=5]="Disabled",e[e.NotAWorkspace=6]="NotAWorkspace"}(t.ServiceState||(t.ServiceState={}));t.ServiceState;!function(e){e[e.OK=0]="OK",e[e.GitNotFound=1]="GitNotFound",e[e.Disabled=2]="Disabled"}(t.RawServiceState||(t.RawServiceState={}));t.RawServiceState;t.GitErrorCodes={BadConfigFile:"BadConfigFile",AuthenticationFailed:"AuthenticationFailed",NoUserNameConfigured:"NoUserNameConfigured",NoUserEmailConfigured:"NoUserEmailConfigured",NoRemoteRepositorySpecified:"NoRemoteRepositorySpecified",NotAGitRepository:"NotAGitRepository",NotAtRepositoryRoot:"NotAtRepositoryRoot",Conflict:"Conflict",UnmergedChanges:"UnmergedChanges",PushRejected:"PushRejected",RemoteConnectionError:"RemoteConnectionError",DirtyWorkTree:"DirtyWorkTree",CantOpenResource:"CantOpenResource",GitNotFound:"GitNotFound",CantCreatePipe:"CantCreatePipe",CantAccessRemote:"CantAccessRemote",RepositoryNotFound:"RepositoryNotFound"},function(e){e[e.Disabled=0]="Disabled",e[e.Inactive=1]="Inactive",e[e.Active=2]="Active",e[e.Fetching=3]="Fetching"}(t.AutoFetcherState||(t.AutoFetcherState={}));t.AutoFetcherState;t.ServiceEvents={STATE_CHANGED:"stateChanged",REPO_CHANGED:"repoChanged",OPERATION_START:"operationStart",OPERATION_END:"operationEnd",OPERATION:"operation",ERROR:"error",DISPOSE:"dispose"},t.ServiceOperations={STATUS:"status",INIT:"init",ADD:"add",STAGE:"stage",BRANCH:"branch",CHECKOUT:"checkout",CLEAN:"clean",UNDO:"undo",RESET:"reset",COMMIT:"commit",COMMAND:"command",BACKGROUND_FETCH:"backgroundfetch",PULL:"pull",PUSH:"push",SYNC:"sync"},t.GIT_SERVICE_ID="gitService",t.IGitService=n.createDecorator(t.GIT_SERVICE_ID),t.isValidBranchName=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitEditorContributions",["require","exports","vs/editor/common/editorCommon","vs/workbench/parts/git/common/git","vs/platform/workspace/common/workspace","vs/base/common/lifecycle","vs/base/common/async"],function(e,t,n,i,o,r,s){"use strict";var a=i.IGitService,c=function(e){function t(t,o,r,a){var c=this;e.call(this),this._editor=t,this._model=o,this._gitService=a,this._filePath=r,this._decorations=[],this._redecorateSoon=this._register(new s.RunOnceScheduler(function(){return c.redecorate()},300)),this._register(this._model.addListener2(n.EventType.ModelContentChanged,function(){return c._redecorateSoon.schedule()})),this._register(this._gitService.addListener2(i.ServiceEvents.STATE_CHANGED,function(){return c._redecorateSoon.schedule()})),this._redecorateSoon.schedule()}return __extends(t,e),t.prototype.dispose=function(){this._setDecorations([]),e.prototype.dispose.call(this)},t.prototype._setDecorations=function(e){this._decorations=this._editor.deltaDecorations(this._decorations,e)},t.prototype.redecorate=function(){var e=this._gitService.getModel(),t=e.getStatus().find(this._filePath,i.StatusType.MERGE);if(t){for(var n=[],o=this._model.getLineCount(),r=1;o>=r;r++){var s=this._model.getLineContent(r).substr(0,7);switch(s){case"<<<<<<<":case"=======":case">>>>>>>":n.push({range:{startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1},options:u.DECORATION_OPTIONS})}}this._setDecorations(n)}},t}(r.Disposable),u=function(){function e(e,t,i){this.gitService=t,this.contextService=i,this.editor=e,this.toUnbind=[this.editor.addListener(n.EventType.ModelChanged,this.onModelChanged.bind(this))],this.mergeDecorator=null}return e.prototype.getId=function(){return e.ID},e.prototype.onModelChanged=function(){if(this.mergeDecorator&&(this.mergeDecorator.dispose(),this.mergeDecorator=null),this.contextService&&this.gitService){var e=this.editor.getModel();if(e){var t=e.getAssociatedResource();if(t){var n=this.contextService.toWorkspaceRelativePath(t);n&&(this.mergeDecorator=new c(this.editor,e,n,this.gitService))}}}},e.prototype.dispose=function(){for(this.mergeDecorator&&(this.mergeDecorator.dispose(),this.mergeDecorator=null);this.toUnbind.length;)this.toUnbind.pop()()},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Editor.MergeDecorator",e.DECORATION_OPTIONS={className:"git-merge-control-decoration",isWholeLine:!0,overviewRuler:{color:"rgb(197, 118, 0)",darkColor:"rgb(197, 118, 0)",position:n.OverviewRulerLane.Left},stickiness:n.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e=__decorate([__param(1,a),__param(2,o.IWorkspaceContextService)],e)}();t.MergeDecorator=u}),define("vs/workbench/parts/git/browser/gitOperations",["require","exports","vs/workbench/parts/git/common/git","vs/base/common/winjs.base"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){this.id=e,this.fn=t}return e.prototype.run=function(){return this.fn()},e.prototype.dispose=function(){},e}();t.GitOperation=o;var r=function(){function e(e){this.input=e,this.id=n.ServiceOperations.COMMAND}return e.prototype.run=function(){return i.TPromise.as(null)},e.prototype.dispose=function(){this.id=null,this.input=null},e}();t.CommandOperation=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/git/common/gitModel",["require","exports","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/eventEmitter","vs/workbench/parts/git/common/git"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(t,n,i,o,r){this.path=t,this.mimetype=n,this.status=i,this.rename=o,this.id=e.typeOf(i)+":"+t+(o?":"+o:"")+(r?"$":""),this.pathComponents=t.split("/")}return e.prototype.getPath=function(){return this.path},e.prototype.getPathComponents=function(){return this.pathComponents.slice(0)},e.prototype.getMimetype=function(){return this.mimetype},e.prototype.getStatus=function(){return this.status},e.prototype.getRename=function(){return this.rename},e.prototype.getId=function(){return this.id},e.prototype.getType=function(){switch(e.typeOf(this.status)){case"index":return r.StatusType.INDEX;case"workingTree":return r.StatusType.WORKING_TREE;default:return r.StatusType.MERGE}},e.prototype.clone=function(){return new e(this.path,this.mimetype,this.status,this.rename)},e.prototype.update=function(e){this.status=e.getStatus(),this.rename=e.getRename()},e.typeOf=function(e){switch(e){case r.Status.INDEX_MODIFIED:case r.Status.INDEX_ADDED:case r.Status.INDEX_DELETED:case r.Status.INDEX_RENAMED:case r.Status.INDEX_COPIED:return"index";case r.Status.MODIFIED:case r.Status.DELETED:case r.Status.UNTRACKED:case r.Status.IGNORED:return"workingTree";default:return"merge"}},e}();t.FileStatus=s;var a=function(e){function t(t){e.call(this),this.type=t,this.statusSet=Object.create(null),this.statusList=[],this.statusByName=Object.create(null),this.statusByRename=Object.create(null)}return __extends(t,e),t.prototype.getType=function(){return this.type},t.prototype.update=function(e){var t,n,i,o,r=Object.create(null);for(t in this.statusSet)r[t]=this.statusSet[t];for(var s=0;s<e.length;s++)o=e[s],t=o.getId(),n=o.getPath(),i=o.getRename(),r[t]?(this.statusSet[t].update(o),r[t]=null):this.statusSet[t]=o;for(t in r)(o=r[t])&&(this.emit("fileStatus:dispose",o),delete this.statusSet[t]);this.statusList=[],this.statusByName=Object.create(null),this.statusByRename=Object.create(null);for(t in this.statusSet)o=this.statusSet[t],this.statusList.push(o),o.getRename()?this.statusByRename[o.getPath()]=o:this.statusByName[o.getPath()]=o},t.prototype.all=function(){return this.statusList},t.prototype.find=function(e){return this.statusByName[e]||this.statusByRename[e]||null},t.prototype.dispose=function(){this.type=null,this.statusSet=null,this.statusList=null,this.statusByName=null,this.statusByRename=null,e.prototype.dispose.call(this)},t}(o.EventEmitter);t.StatusGroup=a;var c=function(e){function t(){e.call(this),this.indexStatus=new a(r.StatusType.INDEX),this.workingTreeStatus=new a(r.StatusType.WORKING_TREE),this.mergeStatus=new a(r.StatusType.MERGE),this.toDispose=[this.addEmitter2(this.indexStatus),this.addEmitter2(this.workingTreeStatus),this.addEmitter2(this.mergeStatus)]}return __extends(t,e),t.prototype.getSummary=function(){return{hasWorkingTreeChanges:this.getWorkingTreeStatus().all().length>0,hasIndexChanges:this.getIndexStatus().all().length>0,hasMergeChanges:this.getMergeStatus().all().length>0}},t.prototype.update=function(e){var t=[],n=[],i=[];e.forEach(function(e){switch(e.x+e.y){case"??":return n.push(new s(e.path,e.mimetype,r.Status.UNTRACKED));case"!!":return n.push(new s(e.path,e.mimetype,r.Status.IGNORED));case"DD":return i.push(new s(e.path,e.mimetype,r.Status.BOTH_DELETED));case"AU":return i.push(new s(e.path,e.mimetype,r.Status.ADDED_BY_US));case"UD":return i.push(new s(e.path,e.mimetype,r.Status.DELETED_BY_THEM));case"UA":return i.push(new s(e.path,e.mimetype,r.Status.ADDED_BY_THEM));case"DU":return i.push(new s(e.path,e.mimetype,r.Status.DELETED_BY_US));case"AA":return i.push(new s(e.path,e.mimetype,r.Status.BOTH_ADDED));case"UU":return i.push(new s(e.path,e.mimetype,r.Status.BOTH_MODIFIED))}var o=!1;switch(e.x){case"M":t.push(new s(e.path,e.mimetype,r.Status.INDEX_MODIFIED)),o=!0;break;case"A":t.push(new s(e.path,e.mimetype,r.Status.INDEX_ADDED));break;case"D":t.push(new s(e.path,e.mimetype,r.Status.INDEX_DELETED));break;case"R":t.push(new s(e.path,e.mimetype,r.Status.INDEX_RENAMED,e.rename));break;case"C":t.push(new s(e.path,e.mimetype,r.Status.INDEX_COPIED))}switch(e.y){case"M":n.push(new s(e.path,e.mimetype,r.Status.MODIFIED,e.rename,o));break;case"D":n.push(new s(e.path,e.mimetype,r.Status.DELETED,e.rename))}}),this.indexStatus.update(t),this.workingTreeStatus.update(n),this.mergeStatus.update(i),this.emit(r.ModelEvents.STATUS_MODEL_UPDATED)},t.prototype.getIndexStatus=function(){return this.indexStatus},t.prototype.getWorkingTreeStatus=function(){return this.workingTreeStatus},t.prototype.getMergeStatus=function(){return this.mergeStatus},t.prototype.getGroups=function(){return[this.mergeStatus,this.indexStatus,this.workingTreeStatus]},t.prototype.find=function(e,t){var n;switch(t){case r.StatusType.INDEX:n=this.indexStatus;break;case r.StatusType.WORKING_TREE:n=this.workingTreeStatus;break;case r.StatusType.MERGE:n=this.mergeStatus;break;default:return null}return n.find(e)},t.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),this.indexStatus&&(this.indexStatus.dispose(),this.indexStatus=null),this.workingTreeStatus&&(this.workingTreeStatus.dispose(),this.workingTreeStatus=null),this.mergeStatus&&(this.mergeStatus.dispose(),this.mergeStatus=null),e.prototype.dispose.call(this)},t}(o.EventEmitter);t.StatusModel=c;var u=function(e){function t(){e.call(this),this.toDispose=[],this.repositoryRoot=null,this.status=new c,this.toDispose.push(this.addEmitter2(this.status)),this.HEAD=null,this.heads=[],this.tags=[],this.remotes=[]}return __extends(t,e),t.prototype.getRepositoryRoot=function(){return this.repositoryRoot},t.prototype.getStatus=function(){return this.status},t.prototype.getHEAD=function(){return this.HEAD},t.prototype.getHeads=function(){return this.heads},t.prototype.getTags=function(){return this.tags},t.prototype.getRemotes=function(){return this.remotes},t.prototype.update=function(e){e||(e={repositoryRoot:null,status:[],HEAD:null,heads:[],tags:[],remotes:[]}),this.repositoryRoot=e.repositoryRoot,this.status.update(e.status),this.HEAD=e.HEAD,this.emit(r.ModelEvents.HEAD_UPDATED),this.heads=e.heads,this.emit(r.ModelEvents.HEADS_UPDATED),this.tags=e.tags,this.emit(r.ModelEvents.TAGS_UPDATED),this.remotes=e.remotes,this.emit(r.ModelEvents.REMOTES_UPDATED),this.emit(r.ModelEvents.MODEL_UPDATED)},t.prototype.getStatusSummary=function(){var e=this.getStatus();return{hasWorkingTreeChanges:e.getWorkingTreeStatus().all().length>0,hasIndexChanges:e.getIndexStatus().all().length>0,hasMergeChanges:e.getMergeStatus().all().length>0}},t.prototype.getPS1=function(){if(!this.HEAD)return"";var e=this.HEAD.name||this.HEAD.commit.substr(0,8),t=this.getStatus().getSummary();return i.format("{0}{1}{2}{3}",e,t.hasWorkingTreeChanges?"*":"",t.hasIndexChanges?"+":"",t.hasMergeChanges?"!":"")},t.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(o.EventEmitter);t.Model=u}),define("vs/workbench/parts/git/common/noopGitService",["require","exports","vs/workbench/parts/git/common/git","vs/base/common/winjs.base"],function(e,t,n,i){"use strict";var o=function(){function e(){}return e.prototype.getVersion=function(){return i.TPromise.as(null)},e.prototype.serviceState=function(){return i.TPromise.as(n.RawServiceState.OK)},e.prototype.status=function(){return i.TPromise.as(e.STATUS)},e.prototype.init=function(){return i.TPromise.as(e.STATUS)},e.prototype.add=function(t){return i.TPromise.as(e.STATUS)},e.prototype.stage=function(t,n){return i.TPromise.as(e.STATUS)},e.prototype.branch=function(t,n){return i.TPromise.as(e.STATUS)},e.prototype.checkout=function(t,n){return i.TPromise.as(e.STATUS)},e.prototype.clean=function(t){return i.TPromise.as(e.STATUS)},e.prototype.undo=function(){return i.TPromise.as(e.STATUS)},e.prototype.reset=function(t,n){return i.TPromise.as(e.STATUS)},e.prototype.revertFiles=function(t,n){return i.TPromise.as(e.STATUS)},e.prototype.fetch=function(){return i.TPromise.as(e.STATUS)},e.prototype.pull=function(t){return i.TPromise.as(e.STATUS)},e.prototype.push=function(){return i.TPromise.as(e.STATUS)},e.prototype.sync=function(){return i.TPromise.as(e.STATUS)},e.prototype.commit=function(t,n,o){return i.TPromise.as(e.STATUS)},e.prototype.detectMimetypes=function(e,t){return i.TPromise.as([])},e.prototype.show=function(e,t){return i.TPromise.as(null)},e.prototype.onOutput=function(){return i.TPromise.as(function(){return null})},e.STATUS={repositoryRoot:null,state:n.ServiceState.NotAWorkspace,status:[],HEAD:null,heads:[],tags:[],remotes:[]},e}();t.NoOpGitService=o}),define("vs/workbench/parts/git/common/stageRanges",["require","exports","vs/editor/common/core/range"],function(e,t,n){"use strict";function i(e){e.sort(function(e,t){return e.originalStartLineNumber<t.originalStartLineNumber?-1:e.originalStartLineNumber>t.originalStartLineNumber?1:e.modifiedStartLineNumber<t.modifiedStartLineNumber?-1:1})}function o(e){e.sort(function(e,t){return e.getStartPosition().lineNumber<t.getStartPosition().lineNumber?-1:1})}function r(e){return e.originalEndLineNumber<=0}function s(e){return e.modifiedEndLineNumber<=0}function a(e){var t=e.getSelections(),n=u(e.getLineChanges(),t);return d(e.getModel().original,e.getModel().modified,n)}function c(e,t){var n={modifiedStartLineNumber:Math.max(e.modifiedStartLineNumber,t.startLineNumber),modifiedEndLineNumber:Math.min(e.modifiedEndLineNumber,t.endLineNumber),originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber},i=s(n)&&e.modifiedStartLineNumber>=t.startLineNumber&&e.modifiedStartLineNumber<=t.endLineNumber;return n.modifiedStartLineNumber<=n.modifiedEndLineNumber||i?n:null}function u(e,t){i(e),o(t);for(var n=[],r=0,a=-1,u=0;u<e.length;++u)for(r=Math.max(0,r-1);r<t.length&&(t[r].startLineNumber<=e[u].modifiedEndLineNumber||s(e[u]));){var l=c(e[u],t[r]);null!==l&&(a!==l.modifiedStartLineNumber?(n.push(l),a=l.modifiedEndLineNumber):(l.modifiedStartLineNumber++,l.modifiedStartLineNumber<=l.modifiedEndLineNumber&&(n.push(l),a=l.modifiedEndLineNumber))),r++}return n}function l(e,t,n){var i=e;return""!==i&&(i+=t.getEOL()),i+t.getValueInRange(n)}function d(e,t,o){i(o);for(var a="",c=1,u=0;u<o.length;++u){var d=r(o[u])?o[u].originalStartLineNumber+1:o[u].originalStartLineNumber;d>c&&(a=l(a,e,new n.Range(c,1,d-1,e.getLineMaxColumn(d-1))),c=d),s(o[u])||(a=l(a,t,new n.Range(o[u].modifiedStartLineNumber,1,o[u].modifiedEndLineNumber,t.getLineMaxColumn(o[u].modifiedEndLineNumber)))),r(o[u])||(c=o[u].originalEndLineNumber+1)}return c<=e.getLineCount()&&(a=l(a,e,new n.Range(c,1,e.getLineCount(),e.getLineMaxColumn(e.getLineCount())))),a}t.stageRanges=a,t.intersectChangeAndSelection=c,t.getSelectedChanges=u,t.appendValueFromRange=l,t.applyChangesToModel=d}),define("vs/workbench/parts/git/node/git.lib",["require","exports","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/mime","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/uuid","vs/nls!vs/workbench/parts/git/node/git.lib","vs/base/common/strings","vs/workbench/parts/git/common/git","vs/base/node/mime","vs/platform/files/common/files","child_process","vs/base/node/encoding"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){
"use strict";function m(e,t){void 0===t&&(t="utf8");var i=[],o=function(e,t,n){e.once(t,n),i.push(r.toDisposable(function(){return e.removeListener(t,n)}))},s=function(e,t,n){e.on(t,n),i.push(r.toDisposable(function(){return e.removeListener(t,n)}))};return n.TPromise.join([new n.TPromise(function(t,n){o(e,"error",n),o(e,"exit",t)}),new n.TPromise(function(n){var i=[];s(e.stdout,"data",function(e){return i.push(e)}),o(e.stdout,"close",function(){return n(f.decode(Buffer.concat(i),t))})}),new n.TPromise(function(n){var i=[];s(e.stderr,"data",function(e){return i.push(e)}),o(e.stderr,"close",function(){return n(f.decode(Buffer.concat(i),t))})})]).then(function(e){return r.disposeAll(i),{exitCode:e[0],stdout:e[1],stderr:e[2]}})}var v=function(){function e(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=null,this.message=this.message||e.message||"Git error",this.stdout=e.stdout||null,this.stderr=e.stderr||null,this.exitCode=e.exitCode||null,this.gitErrorCode=e.gitErrorCode||null,this.gitCommand=e.gitCommand||null}return e.prototype.toString=function(){var e=this.message+" "+JSON.stringify({exitCode:this.exitCode,gitErrorCode:this.gitErrorCode,gitCommand:this.gitCommand,stdout:this.stdout,stderr:this.stderr},null,2);return this.error&&(e+=this.error.stack),e},e}();t.GitError=v;var g=function(){function e(e){this.gitPath=e.gitPath,this.version=e.version,this.tmpPath=e.tmpPath;var t=e.defaultEncoding||"utf8";this.defaultEncoding=f.encodingExists(t)?t:"utf8",this.env=e.env||{},this.outputListeners=[]}return e.prototype.run=function(e,t,n){return void 0===n&&(n={}),n=s.assign({cwd:e},n||{}),this.exec(t,n)},e.prototype.stream=function(e,t,n){return void 0===n&&(n={}),n=s.assign({cwd:e},n||{}),this.spawn(t,n)},e.prototype.open=function(e,t){return void 0===t&&(t={}),new y(this,e,this.defaultEncoding,t)},e.prototype.clone=function(e,t){var o=this;return this.exec(["clone",t,e]).then(function(){return!0},function(t){return new n.TPromise(function(t,n){i.del(e,o.tmpPath,function(e){return e?n(e):void t(!0)})})})},e.prototype.config=function(e,t){return this.exec(["config","--global",e,t])},e.prototype.exec=function(e,t){var i=this;void 0===t&&(t={});var o=this.spawn(e,t);return t.input&&o.stdin.end(t.input,"utf8"),m(o).then(function(o){if(o.exitCode){var r=null;return/Authentication failed/.test(o.stderr)?r=l.GitErrorCodes.AuthenticationFailed:/Not a git repository/.test(o.stderr)?r=l.GitErrorCodes.NotAGitRepository:/bad config file/.test(o.stderr)?r=l.GitErrorCodes.BadConfigFile:/cannot make pipe for command substitution|cannot create standard input pipe/.test(o.stderr)?r=l.GitErrorCodes.CantCreatePipe:/Repository not found/.test(o.stderr)?r=l.GitErrorCodes.RepositoryNotFound:/unable to access/.test(o.stderr)&&(r=l.GitErrorCodes.CantAccessRemote),t.log!==!1&&i.log(o.stderr),n.TPromise.wrapError(new v({message:"Failed to execute git",stdout:o.stdout,stderr:o.stderr,exitCode:o.exitCode,gitErrorCode:r,gitCommand:e[0]}))}return o})},e.prototype.spawn=function(e,t){if(void 0===t&&(t={}),!this.gitPath)throw new Error("git could not be found in the system.");return t||(t={}),t.stdio||t.input||(t.stdio=["ignore",null,null]),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),t.env=s.assign(t.env,{MONACO_REQUEST_GUID:a.v4().asHex(),VSCODE_GIT_REQUEST_ID:a.v4().asHex(),MONACO_GIT_COMMAND:e[0]}),t.log!==!1&&this.log(u.format("git {0}\n",e.join(" "))),p.spawn(this.gitPath,e,t)},e.prototype.onOutput=function(e){var t=this;return this.outputListeners.push(e),function(){return t.outputListeners.splice(t.outputListeners.indexOf(e),1)}},e.prototype.log=function(e){this.outputListeners.forEach(function(t){return t(e)})},e}();t.Git=g;var y=function(){function e(e,t,n,i){void 0===i&&(i={}),this.git=e,this.repository=t,this.defaultEncoding=n,this.env=i}return Object.defineProperty(e.prototype,"version",{get:function(){return this.git.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.repository},enumerable:!0,configurable:!0}),e.prototype.run=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.run(this.repository,e,t)},e.prototype.stream=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.stream(this.repository,e,t)},e.prototype.spawn=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.spawn(e,t)},e.prototype.init=function(){return this.run(["init"])},e.prototype.config=function(e,t,n,i){var o=["config"];return e&&o.push("--"+e),o.push(t),n&&o.push(n),this.run(o,i).then(function(e){return e.stdout})},e.prototype.show=function(e){return this.stream(["show",e])},e.prototype.buffer=function(e){var t=this,i=this.show(e);return new n.Promise(function(n,r){d.detectMimesFromStream(i.stdout,null,function(i,s){i?r(i):o.isBinaryMime(s.mimes)?r({message:c.localize(0,null),fileOperationResult:h.FileOperationResult.FILE_IS_BINARY}):n(t.doBuffer(e))})})},e.prototype.doBuffer=function(e){var t=this.show(e);return m(t,this.defaultEncoding).then(function(e){var t=e.exitCode,i=e.stdout;return t?n.TPromise.wrapError(new v({message:"Could not buffer object.",exitCode:t})):n.TPromise.as(i)})},e.prototype.add=function(e){var t=["add","-A","--"];return e&&e.length?t.push.apply(t,e):t.push("."),this.run(t)},e.prototype.stage=function(e,t){var i=this,o=this.stream(["hash-object","--stdin","-w"],{stdio:[null,null,null]});return o.stdin.end(t,"utf8"),m(o).then(function(t){var o=t.exitCode,r=t.stdout;return o?n.TPromise.wrapError(new v({message:"Could not hash object.",exitCode:o})):i.run(["update-index","--cacheinfo","100644",r,e])})},e.prototype.checkout=function(e,t){var i=["checkout","-q"];return e&&i.push(e),t&&t.length&&(i.push("--"),i.push.apply(i,t)),this.run(i).then(null,function(e){return/Please, commit your changes or stash them/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.DirtyWorkTree),n.Promise.wrapError(e)})},e.prototype.commit=function(e,t,i){var o=this,r=["commit","--quiet","--allow-empty-message","--file","-"];return t&&r.push("--all"),i&&r.push("--amend"),this.run(r,{input:e||""}).then(null,function(e){return/not possible because you have unmerged files/.test(e.stderr)?(e.gitErrorCode=l.GitErrorCodes.UnmergedChanges,n.Promise.wrapError(e)):o.run(["config","--get-all","user.name"]).then(null,function(e){return e.gitErrorCode=l.GitErrorCodes.NoUserNameConfigured,n.Promise.wrapError(e)}).then(function(){return o.run(["config","--get-all","user.email"]).then(null,function(e){return e.gitErrorCode=l.GitErrorCodes.NoUserEmailConfigured,n.Promise.wrapError(e)}).then(function(){return n.Promise.wrapError(e)})})})},e.prototype.branch=function(e,t){var n=t?["checkout","-q","-b",e]:["branch","-q",e];return this.run(n)},e.prototype.clean=function(e){var t=["clean","-f","-q","--"].concat(e);return this.run(t)},e.prototype.undo=function(){var e=this;return this.run(["clean","-fd"]).then(function(){return e.run(["checkout","--","."]).then(null,function(e){return/did not match any file\(s\) known to git\./.test(e.stderr)?n.TPromise.as(null):n.Promise.wrapError(e)})})},e.prototype.reset=function(e,t){void 0===t&&(t=!1);var n=["reset"];return t&&n.push("--hard"),n.push(e),this.run(n)},e.prototype.revertFiles=function(e,t){var i=this;return this.run(["branch"]).then(function(o){var r;return r=o.stdout?["reset","-q",e,"--"]:["rm","--cached","-r","--"],t&&t.length?r.push.apply(r,t):r.push("."),i.run(r).then(null,function(e){return/([^:]+: needs merge\n)+/m.test(e.stdout)?n.TPromise.as(null):n.Promise.wrapError(e)})})},e.prototype.fetch=function(){return this.run(["fetch"]).then(null,function(e){return/No remote repository specified\./.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.NoRemoteRepositorySpecified:/Could not read from remote repository/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError),n.Promise.wrapError(e)})},e.prototype.pull=function(e){var t=["pull"];return e&&t.push("-r"),this.run(t).then(null,function(e){return/^CONFLICT \([^)]+\): \b/m.test(e.stdout)?e.gitErrorCode=l.GitErrorCodes.Conflict:/Please tell me who you are\./.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.NoUserNameConfigured:/Could not read from remote repository/.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError:/Pull is not possible because you have unmerged files|Cannot pull with rebase: You have unstaged changes|Your local changes to the following files would be overwritten|Please, commit your changes before you can merge/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.DirtyWorkTree),n.Promise.wrapError(e)})},e.prototype.push=function(e,t,i){var o=["push"];return i&&i.setUpstream&&o.push("-u"),e&&o.push(e),t&&o.push(t),this.run(o).then(null,function(e){return/^error: failed to push some refs to\b/m.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.PushRejected:/Could not read from remote repository/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError),n.Promise.wrapError(e)})},e.prototype.sync=function(){var e=this;return this.pull().then(function(){return e.push()})},e.prototype.getRoot=function(){return this.run(["rev-parse","--show-toplevel"],{log:!1}).then(function(e){return e.stdout.trim()})},e.prototype.getStatus=function(){return this.run(["status","-z","-u"],{log:!1}).then(function(e){function t(){for(var e,t=a;"\x00"!==(e=r.charAt(a));)a++;return r.substring(t,a++)}for(var i,r=e.stdout,s=[],a=0;a<r.length;)i={x:r.charAt(a++),y:r.charAt(a++),path:null,mimetype:null},a++,"R"===i.x&&(i.rename=t()),i.path=t(),i.mimetype=o.guessMimeTypes(i.path)[0],"/"!==i.path[i.path.length-1]&&s.push(i);return n.TPromise.as(s)})},e.prototype.getHEAD=function(){var e=this;return this.run(["symbolic-ref","--short","HEAD"],{log:!1}).then(function(e){return e.stdout?n.TPromise.as({name:e.stdout.trim()}):n.TPromise.wrapError(new Error("Not in a branch"))},function(t){return e.run(["rev-parse","HEAD"],{log:!1}).then(function(e){return e.stdout?n.TPromise.as({commit:e.stdout.trim()}):n.TPromise.wrapError(new Error("Error parsing HEAD"))})})},e.prototype.getHeads=function(){return this.run(["for-each-ref","--format","%(refname:short) %(objectname)","refs/heads/"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return e.trim().split(" ")}).map(function(e){return{name:e[0],commit:e[1]}})})},e.prototype.getTags=function(){return this.run(["for-each-ref","--format","%(refname:short) %(objectname)","refs/tags/"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return e.trim().split(" ")}).map(function(e){return{name:e[0],commit:e[1]}})})},e.prototype.getRemotes=function(){return this.run(["remote"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return{name:e}})})},e.prototype.getBranch=function(e){var t=this;return"HEAD"===e?this.getHEAD():this.run(["rev-parse",e],{log:!1}).then(function(i){if(!i.stdout)return n.TPromise.wrapError(new Error("No such branch"));var o=i.stdout.trim();return t.run(["rev-parse","--symbolic-full-name","--abbrev-ref",e+"@{u}"],{log:!1}).then(function(n){var i=n.stdout.trim();return t.run(["rev-list","--left-right",e+"..."+i],{log:!1}).then(function(t){for(var n=0,r=0,s=0;s<t.stdout.length;){switch(t.stdout.charAt(s)){case"<":n++;break;case">":r++;break;default:s++}for(;"\n"!==t.stdout.charAt(s++););}return{name:e,commit:o,upstream:i,ahead:n,behind:r}})},function(){return{name:e,commit:o}})})},e.prototype.onOutput=function(e){return this.git.onOutput(e)},e}();t.Repository=y}),define("vs/workbench/parts/git/node/rawGitService",["require","exports","path","vs/base/common/winjs.base","vs/base/node/mime","vs/base/node/pfs","vs/workbench/parts/git/node/git.lib","vs/workbench/parts/git/common/git"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(e){this.repo=e}return e.prototype.getVersion=function(){return i.TPromise.as(this.repo.version)},e.prototype.getRepositoryRoot=function(){return this._repositoryRoot||(this._repositoryRoot=r.realpath(this.repo.path))},e.prototype.serviceState=function(){return i.TPromise.as(this.repo?a.RawServiceState.OK:a.RawServiceState.GitNotFound)},e.prototype.status=function(){var e=this;return this.repo.getStatus().then(function(t){return e.repo.getHEAD().then(function(t){return t.name?e.repo.getBranch(t.name).then(null,function(){return t}):t},function(){return null}).then(function(n){return i.Promise.join([e.getRepositoryRoot(),e.repo.getHeads(),e.repo.getTags(),e.repo.getRemotes()]).then(function(e){return{repositoryRoot:e[0],status:t,HEAD:n,heads:e[1],tags:e[2],remotes:e[3]}})})}).then(null,function(e){return e.gitErrorCode===a.GitErrorCodes.BadConfigFile?i.Promise.wrapError(e):e.gitErrorCode===a.GitErrorCodes.NotAtRepositoryRoot?i.Promise.wrapError(e):null})},e.prototype.init=function(){var e=this;return this.repo.init().then(function(){return e.status()})},e.prototype.add=function(e){var t=this;return this.repo.add(e).then(function(){return t.status()})},e.prototype.stage=function(e,t){var n=this;return this.repo.stage(e,t).then(function(){return n.status()})},e.prototype.branch=function(e,t){var n=this;return this.repo.branch(e,t).then(function(){return n.status()})},e.prototype.checkout=function(e,t){var n=this;return this.repo.checkout(e,t).then(function(){return n.status()})},e.prototype.clean=function(e){var t=this;return this.repo.clean(e).then(function(){return t.status()})},e.prototype.undo=function(){var e=this;return this.repo.undo().then(function(){return e.status()})},e.prototype.reset=function(e,t){var n=this;return this.repo.reset(e,t).then(function(){return n.status()})},e.prototype.revertFiles=function(e,t){var n=this;return this.repo.revertFiles(e,t).then(function(){return n.status()})},e.prototype.fetch=function(){var e=this;return this.repo.fetch().then(null,function(e){return e.gitErrorCode===a.GitErrorCodes.NoRemoteRepositorySpecified?i.TPromise.as(null):i.Promise.wrapError(e)}).then(function(){return e.status()})},e.prototype.pull=function(e){var t=this;return this.repo.pull(e).then(function(){return t.status()})},e.prototype.push=function(e,t,n){var i=this;return this.repo.push(e,t,n).then(function(){return i.status()})},e.prototype.sync=function(){var e=this;return this.repo.sync().then(function(){return e.status()})},e.prototype.commit=function(e,t,n){var o=this,r=i.TPromise.as(null);return n&&(r=this.repo.add(null)),r.then(function(){return o.repo.commit(e,n,t)}).then(function(){return o.status()})},e.prototype.detectMimetypes=function(e,t){var s=this;return r.exists(n.join(this.repo.path,e)).then(function(r){if(r)return new i.TPromise(function(t,i){o.detectMimesFromFile(n.join(s.repo.path,e),function(e,n){e?i(e):t(n.mimes)})});var a=s.repo.show(t+":"+e);return new i.TPromise(function(t,n){o.detectMimesFromStream(a.stdout,e,function(e,i){e?n(e):t(i.mimes)})})})},e.prototype.show=function(e,t){return t="~"===t?"":t,this.repo.buffer(t+":"+e).then(null,function(e){return e instanceof s.GitError?"":i.TPromise.wrapError(e)})},e.prototype.onOutput=function(){var e,t=this;return new i.Promise(function(n,i,o){e=t.repo.onOutput(o)},function(){return e()})},e}();t.RawGitService=c;var u=function(){function e(e){this.raw=e}return e.prototype.getVersion=function(){return this.raw.then(function(e){return e.getVersion()})},e.prototype.serviceState=function(){return this.raw.then(function(e){return e.serviceState()})},e.prototype.status=function(){return this.raw.then(function(e){return e.status()})},e.prototype.init=function(){return this.raw.then(function(e){return e.init()})},e.prototype.add=function(e){return this.raw.then(function(t){return t.add(e)})},e.prototype.stage=function(e,t){return this.raw.then(function(n){return n.stage(e,t)})},e.prototype.branch=function(e,t){return this.raw.then(function(n){return n.branch(e,t)})},e.prototype.checkout=function(e,t){return this.raw.then(function(n){return n.checkout(e,t)})},e.prototype.clean=function(e){return this.raw.then(function(t){return t.clean(e)})},e.prototype.undo=function(){return this.raw.then(function(e){return e.undo()})},e.prototype.reset=function(e,t){return this.raw.then(function(n){return n.reset(e,t)})},e.prototype.revertFiles=function(e,t){return this.raw.then(function(n){return n.revertFiles(e,t)})},e.prototype.fetch=function(){return this.raw.then(function(e){return e.fetch()})},e.prototype.pull=function(e){return this.raw.then(function(t){return t.pull(e)})},e.prototype.push=function(e,t,n){return this.raw.then(function(i){return i.push(e,t,n)})},e.prototype.sync=function(){return this.raw.then(function(e){return e.sync()})},e.prototype.commit=function(e,t,n){return this.raw.then(function(i){return i.commit(e,t,n)})},e.prototype.detectMimetypes=function(e,t){return this.raw.then(function(n){return n.detectMimetypes(e,t)})},e.prototype.show=function(e,t){return this.raw.then(function(n){return n.show(e,t)})},e.prototype.onOutput=function(){return this.raw.then(function(e){return e.onOutput()})},e}();t.DelayedRawGitService=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/html/common/htmlInput",["require","exports","vs/workbench/common/editor/resourceEditorInput"],function(e,t,n){"use strict";var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getResource=function(){return this.resource},t}(n.ResourceEditorInput);t.HtmlInput=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/lib/node/systemVariables",["require","exports","vs/base/common/paths","vs/base/common/parsers","vs/workbench/common/editor"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,i,o){var r=this;void 0===o&&(o=null),e.call(this),this.editorService=t;var s=o?o.fsPath:i.getWorkspace().resource.fsPath;this._workspaceRoot=n.normalize(s,!0),this._execPath=i?i.getConfiguration().env.execPath:null,Object.keys(process.env).forEach(function(e){r["env."+e]=process.env[e]})}return __extends(t,e),Object.defineProperty(t.prototype,"execPath",{get:function(){return this._execPath},set:function(e){this._execPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cwd",{get:function(){return this.workspaceRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workspaceRoot",{get:function(){return this._workspaceRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file",{get:function(){return this.getFilePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileBasename",{get:function(){return n.basename(this.getFilePath())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileDirname",{get:function(){return n.dirname(this.getFilePath())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileExtname",{get:function(){return n.extname(this.getFilePath())},enumerable:!0,configurable:!0}),t.prototype.getFilePath=function(){var e=this.editorService.getActiveEditorInput();if(!e)return"";var t=o.asFileEditorInput(e);if(!t)return"";var i=t.getResource();return n.normalize(i.fsPath,!0)},t}(i.AbstractSystemVariables);t.SystemVariables=r}),define("vs/workbench/parts/markdown/common/markdown",["require","exports"],function(e,t){"use strict";t.MARKDOWN_MIME="text/x-web-markdown",t.MARKDOWN_MODE_ID="markdown"}),define("vs/workbench/parts/output/common/output",["require","exports","vs/platform/platform","vs/platform/instantiation/common/instantiation"],function(e,t,n,i){"use strict";t.OUTPUT_MIME="text/x-monaco-output",t.OUTPUT_MODE_ID="Log",t.OUTPUT_EDITOR_INPUT_ID="vs.output",t.OUTPUT_PANEL_ID="workbench.panel.output",t.Extensions={OutputChannels:"workbench.contributions.outputChannels"},t.OUTPUT_SERVICE_ID="outputService",t.MAX_OUTPUT_LENGTH=1e6,t.IOutputService=i.createDecorator(t.OUTPUT_SERVICE_ID);var o=function(){function e(){this.channels=[]}return e.prototype.registerChannel=function(e){-1===this.channels.indexOf(e)&&this.channels.push(e)},e.prototype.getChannels=function(){return this.channels.slice(0)},e}();n.Registry.add(t.Extensions.OutputChannels,new o)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitOutput",["require","exports","vs/workbench/parts/git/common/git","vs/workbench/parts/output/common/output"],function(e,t,n,i){"use strict";var o=function(){function e(e,t){var i=this;this.gitService=e,this.outputService=t,e.addListener2(n.ServiceEvents.OPERATION_START,function(){return i.setup()})}return e.prototype.getId=function(){return e.ID},e.prototype.setup=function(){var e=this;this.promise||(this.promise=this.gitService.onOutput().then(function(){e.promise=null},function(t){t&&"Canceled"===t.name?e.promise=null:console.error(t)},function(t){return e.onOutput(t)}))},e.prototype.onOutput=function(e){this.outputService.append("Git",e)},e.prototype.dispose=function(){this.promise&&(this.promise.cancel(),this.promise=null)},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Workbench.GitOutput",e=__decorate([__param(0,n.IGitService),__param(1,i.IOutputService)],e)}();t.GitOutput=o}),define("vs/workbench/parts/search/common/search",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,o){"use strict";function r(e){var t=s.all().map(function(t){return t.getNavigateToItems(e).then(function(e){return e},i.onUnexpectedError)});return n.TPromise.join(t).then(function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];Array.isArray(o)&&t.push.apply(t,o)}return t})}var s;!function(e){function t(e){return e&&i.push(e),{dispose:function(){if(e){var t=i.indexOf(e);t>=0&&(i.splice(t,1),e=void 0)}}}}function n(){return i.slice(0)}var i=[];e.register=t,e.all=n}(s=t.NavigateTypesSupportRegistry||(t.NavigateTypesSupportRegistry={})),t.getNavigateToItems=r,o.CommonEditorRegistry.registerLanguageCommand("_executeWorkspaceSymbolProvider",function(e,t){var n=t.query;if("string"!=typeof n)throw i.illegalArgument();return r(n)})});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/snippets/electron-browser/snippetsTracker",["require","exports","vs/base/common/paths","vs/base/common/async","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/lifecycle","vs/editor/node/textMate/TMSnippets","vs/platform/files/common/files","vs/platform/lifecycle/common/lifecycle","vs/platform/workspace/common/workspace","fs"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";function h(e){return new o.TPromise(function(t,n,i){r.readdir(e,function(e,i){return e?n(e):void t(i)})})}function p(e){return new o.TPromise(function(t,n,i){d.stat(e,function(e,n){return e?t(!1):n.isFile()?t(!0):void t(!1)})})}function f(e,t){return void 0===t&&(t=null),h(e).then(function(i){return o.TPromise.join(i.map(function(i){return t&&!t.test(i)?o.TPromise.as(null):p(n.join(e,i)).then(function(e){return e?i:null})})).then(function(e){return e.filter(function(e){return null!==e})})})}var m=function(){function e(t,o,r){var s=this;this.fileService=t,this.lifecycleService=o,this.snippetFolder=n.join(r.getConfiguration().env.appSettingsHome,"snippets"),this.toDispose=[],this.fileWatchDelayer=new i.ThrottledDelayer(e.FILE_WATCH_DELAY),d.existsSync(this.snippetFolder)||d.mkdirSync(this.snippetFolder),this.scanUserSnippets().then(function(e){s.registerListeners()})}return e.prototype.registerListeners=function(){var e=this,t=new i.RunOnceScheduler(function(){e.scanUserSnippets()},500);this.toDispose.push(t);try{this.watcher=d.watch(this.snippetFolder),this.watcher.on("change",function(n){return"delete"===n?void e.unregisterListener():void t.schedule()})}catch(n){}this.lifecycleService.onShutdown(this.dispose,this)},e.prototype.scanUserSnippets=function(){var e=this;return f(this.snippetFolder,/\.json$/).then(function(t){return o.TPromise.join(t.map(function(t){var i=t.replace(/\.json$/,"").toLowerCase(),o=n.join(e.snippetFolder,t);return a.snippetUpdated(i,o)}))})},e.prototype.unregisterListener=function(){this.watcher&&(this.watcher.close(),this.watcher=null)},e.prototype.getId=function(){return"vs.snippets.snippetsTracker"},e.prototype.dispose=function(){this.unregisterListener(),this.toDispose=s.disposeAll(this.toDispose)},e.FILE_WATCH_DELAY=200,e=__decorate([__param(0,c.IFileService),__param(1,u.ILifecycleService),__param(2,l.IWorkspaceContextService)],e)}();t.SnippetsTracker=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/common/problemCollectors",["require","exports","vs/base/common/eventEmitter","vs/platform/markers/common/problemMatcher"],function(e,t,n,i){"use strict";var o;!function(e){e.WatchingBeginDetected="watchingBeginDetected",e.WatchingEndDetected="watchingEndDetected"}(o=t.ProblemCollectorEvents||(t.ProblemCollectorEvents={}));var r=function(e){function t(t,n){var o=this;e.call(this),this.modelService=n,this.matchers=Object.create(null),this.bufferLength=1,t.map(function(e){return i.createLineMatcher(e)}).forEach(function(e){var t=e.matchLength;t>o.bufferLength&&(o.bufferLength=t);var n=o.matchers[t];n||(n=[],o.matchers[t]=n),n.push(e)}),this.buffer=[],this.activeMatcher=null,this.openModels=Object.create(null),this.modelListeners=[],this.modelService.onModelAdded(function(e){o.openModels[e.getAssociatedResource().toString()]=!0},this,this.modelListeners),this.modelService.onModelRemoved(function(e){delete o.openModels[e.getAssociatedResource().toString()]},this,this.modelListeners),this.modelService.getModels().forEach(function(e){return o.openModels[e.getAssociatedResource().toString()]=!0})}return __extends(t,e),t.prototype.dispose=function(){this.modelListeners.forEach(function(e){return e.dispose()})},Object.defineProperty(t.prototype,"numberOfMatches",{get:function(){return this._numberOfMatches},enumerable:!0,configurable:!0}),t.prototype.tryFindMarker=function(e){var t=null;if(this.activeMatcher){if(t=this.activeMatcher.next(e))return this._numberOfMatches++,t;this.clearBuffer(),this.activeMatcher=null}if(this.buffer.length<this.bufferLength)this.buffer.push(e);else{for(var n=this.buffer.length-1,i=0;n>i;i++)this.buffer[i]=this.buffer[i+1];this.buffer[n]=e}return t=this.tryMatchers(),t&&this.clearBuffer(),t},t.prototype.isOpen=function(e){return!!this.openModels[e.toString()]},t.prototype.shouldApplyMatch=function(e){switch(e.description.applyTo){case i.ApplyToKind.allDocuments:return!0;case i.ApplyToKind.openDocuments:return this.openModels[e.resource.toString()];case i.ApplyToKind.closedDocuments:return!this.openModels[e.resource.toString()];default:return!0}},t.prototype.tryMatchers=function(){this.activeMatcher=null;for(var e=this.buffer.length,t=0;e>t;t++){var n=this.matchers[e-t];if(n)for(var i=0;i<n.length;i++){var o=n[i],r=o.handle(this.buffer,t);if(r.match)return this._numberOfMatches++,r["continue"]&&(this.activeMatcher=o),r.match}}return null},t.prototype.clearBuffer=function(){this.buffer.length>0&&(this.buffer=[])},t}(n.EventEmitter);t.AbstractProblemCollector=r,function(e){e[e.Clean=0]="Clean"}(t.ProblemHandlingStrategy||(t.ProblemHandlingStrategy={}));var s=t.ProblemHandlingStrategy,a=function(e){function t(t,n,i,o){var r=this;void 0===o&&(o=s.Clean),e.call(this,t,i),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null);var a=Object.create(null);t.forEach(function(e){return a[e.owner]=!0}),this.owners=Object.keys(a),this.markerService=n,this.strategy=o,this.currentResourcesWithMarkers=Object.create(null),this.reportedResourcesWithMarkers=Object.create(null),this.owners.forEach(function(e){r.currentResourcesWithMarkers[e]=r.markerService.read({owner:e}).map(function(e){return e.resource}),r.reportedResourcesWithMarkers[e]=Object.create(null)}),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)}return __extends(t,e),t.prototype.processLine=function(e){var t=this,n=this.tryFindMarker(e);if(n){var i=n.description.owner,o=n.resource,r=o.toString(),s=this.shouldApplyMatch(n);if(s){this.currentResourceAsString!==r&&(this.currentResource&&(Object.keys(this.markers).forEach(function(e){t.markerService.changeOne(e,t.currentResource,t.markers[e])}),this.markers=Object.create(null)),this.reportedResourcesWithMarkers[i][r]=o,this.currentResource=o,this.currentResourceAsString=r);var a=this.markers[i];a||(a=[],this.markers[i]=a),a.push(n.marker)}else this.reportedResourcesWithMarkers[i][r]=o}},t.prototype.done=function(){var e=this;this.currentResource&&Object.keys(this.markers).forEach(function(t){e.markerService.changeOne(t,e.currentResource,e.markers[t])}),this.strategy===s.Clean&&Object.keys(this.currentResourcesWithMarkers).forEach(function(t){var n=[],i=e.reportedResourcesWithMarkers[t];e.currentResourcesWithMarkers[t].forEach(function(e){i[e.toString()]||n.push(e)}),e.markerService.remove(t,n)}),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)},t}(r);t.StartStopProblemCollector=a;var c=function(e){function t(t,n,i){var o=this;e.call(this,t,i),this.problemMatchers=t,this.markerService=n,this.resetCurrentResource(),this.resourcesToClean=Object.create(null),this.ignoreOpenResourcesByOwner=Object.create(null),this.watchingBeginsPatterns=[],this.watchingEndsPatterns=[],this.problemMatchers.forEach(function(e){e.watching&&(o.watchingBeginsPatterns.push({problemMatcher:e,pattern:e.watching.beginsPattern}),o.watchingEndsPatterns.push({problemMatcher:e,pattern:e.watching.endsPattern}))})}return __extends(t,e),t.prototype.aboutToStart=function(){var e=this;this.problemMatchers.forEach(function(t){t.watching&&t.watching.activeOnStart&&(e.emit(o.WatchingBeginDetected,{}),e.recordResourcesToClean(t.owner));var n=e.ignoreOpenResourcesByOwner[t.owner];if(n){var r=n&&t.applyTo===i.ApplyToKind.closedDocuments;r!==n&&(e.ignoreOpenResourcesByOwner[t.owner]=r)}else e.ignoreOpenResourcesByOwner[t.owner]=t.applyTo===i.ApplyToKind.closedDocuments})},t.prototype.processLine=function(e){if(!this.tryBegin(e)&&!this.tryFinish(e)){var t=this.tryFindMarker(e);if(t){var n=t.resource,i=t.description.owner,o=n.toString(),r=this.shouldApplyMatch(t);if(r){this.currentResourceAsString!==o&&(this.removeResourceToClean(i,o),this.currentResource&&this.deliverMarkersForCurrentResource(),this.currentResource=n,this.currentResourceAsString=o);var s=this.markers[i];s||(s=[],this.markers[i]=s),s.push(t.marker)}else this.removeResourceToClean(i,o)}}},t.prototype.forceDelivery=function(){var e=this;this.deliverMarkersForCurrentResource(!1),Object.keys(this.resourcesToClean).forEach(function(t){e.cleanMarkers(t,!1)}),this.resourcesToClean=Object.create(null);
},t.prototype.tryBegin=function(e){for(var t=!1,n=0;n<this.watchingBeginsPatterns.length;n++){var r=this.watchingBeginsPatterns[n],s=r.pattern.regexp.exec(e);if(s){this.emit(o.WatchingBeginDetected,{}),t=!0;var a=r.problemMatcher.owner;if(s[1]){var c=i.getResource(s[1],r.problemMatcher);this.currentResourceAsString&&this.currentResourceAsString===c.toString()&&this.resetCurrentResource(),this.recordResourceToClean(a,c)}else this.recordResourcesToClean(a),this.resetCurrentResource()}}return t},t.prototype.tryFinish=function(e){for(var t=!1,n=0;n<this.watchingEndsPatterns.length;n++){var i=this.watchingEndsPatterns[n],r=i.pattern.regexp.exec(e);if(r){this.emit(o.WatchingEndDetected,{}),t=!0;var s=i.problemMatcher.owner;this.cleanMarkers(s),this.deliverMarkersForCurrentResource()}}return t},t.prototype.recordResourcesToClean=function(e){var t=this.getResourceSetToClean(e);this.markerService.read({owner:e}).forEach(function(e){return t[e.resource.toString()]=e.resource})},t.prototype.recordResourceToClean=function(e,t){this.getResourceSetToClean(e)[t.toString()]=t},t.prototype.removeResourceToClean=function(e,t){var n=this.resourcesToClean[e];n&&delete n[t]},t.prototype.cleanMarkers=function(e,t){var n=this;void 0===t&&(t=!0);var i=this.resourcesToClean[e];if(i){var o=Object.keys(i).map(function(e){return i[e]}).filter(function(t){return n.ignoreOpenResourcesByOwner[e]?!n.isOpen(t):!0});this.markerService.remove(e,o),t&&delete this.resourcesToClean[e]}},t.prototype.deliverMarkersForCurrentResource=function(e){var t=this;void 0===e&&(e=!0),this.currentResource&&Object.keys(this.markers).forEach(function(e){t.markerService.changeOne(e,t.currentResource,t.markers[e])}),e&&this.resetCurrentResource()},t.prototype.getResourceSetToClean=function(e){var t=this.resourcesToClean[e];return t||(t=Object.create(null),this.resourcesToClean[e]=t),t},t.prototype.resetCurrentResource=function(){this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)},t}(r);t.WatchingProblemCollector=c}),define("vs/workbench/parts/tasks/common/taskSystem",["require","exports"],function(e,t){"use strict";!function(e){e[e.NotConfigured=0]="NotConfigured",e[e.RunningTask=1]="RunningTask",e[e.NoBuildTask=2]="NoBuildTask",e[e.NoTestTask=3]="NoTestTask",e[e.ConfigValidationError=4]="ConfigValidationError",e[e.TaskNotFound=5]="TaskNotFound",e[e.NoValidTaskRunner=6]="NoValidTaskRunner",e[e.UnknownError=7]="UnknownError"}(t.TaskErrors||(t.TaskErrors={}));var n=(t.TaskErrors,function(){function e(e,t,n){this.severity=e,this.message=t,this.code=n}return e}());t.TaskError=n;var i;!function(e){e.shortcut="shortcut",e.command="command"}(i=t.Triggers||(t.Triggers={})),function(e){e[e.Always=0]="Always",e[e.Silent=1]="Silent",e[e.Never=2]="Never"}(t.ShowOutput||(t.ShowOutput={}));var o,o=t.ShowOutput;!function(e){function t(t){return t=t.toLowerCase(),"always"===t?e.Always:"silent"===t?e.Silent:"never"===t?e.Never:void 0}e.fromString=t}(o=t.ShowOutput||(t.ShowOutput={}));var r;!function(e){e.Active="active",e.Inactive="inactive"}(r=t.TaskSystemEvents||(t.TaskSystemEvents={})),function(e){e[e.SingleRun=0]="SingleRun",e[e.Watching=1]="Watching"}(t.TaskType||(t.TaskType={}));t.TaskType});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/common/languageServiceTaskSystem",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,n,i){e.call(this),this.configuration=t,this.telemetryService=n,this.modeService=i}return __extends(t,e),t.prototype.build=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.build?e.taskSupport.build():null},"build",o.Triggers.shortcut)},t.prototype.rebuild=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.rebuild?e.taskSupport.rebuild():null},"rebuild",o.Triggers.shortcut)},t.prototype.clean=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.clean?e.taskSupport.clean():null},"clean",o.Triggers.shortcut)},t.prototype.runTest=function(){return{promise:n.TPromise.wrapError("Not implemented yet.")}},t.prototype.run=function(e){return{promise:n.TPromise.wrapError("Not implemented yet.")}},t.prototype.isActive=function(){return n.TPromise.as(!1)},t.prototype.isActiveSync=function(){return!1},t.prototype.canAutoTerminate=function(){return!1},t.prototype.terminate=function(){return n.TPromise.as({success:!0})},t.prototype.terminateSync=function(){return{success:!0}},t.prototype.tasks=function(){var e=[];return n.TPromise.as(e)},t.prototype.processMode=function(e,i,o){var r=this,s={trigger:o,command:"languageService",success:!0};return{promise:n.Promise.join(this.configuration.modes.map(function(e){return r.modeService.getOrCreateMode(e)})).then(function(t){var i=[];return t.forEach(function(t){var n=e(t);n&&i.push(n)}),n.Promise.join(i)}).then(function(e){return r.telemetryService.publicLog(t.TelemetryEventName,s),e},function(e){return s.success=!1,r.telemetryService.publicLog(t.TelemetryEventName,s),n.Promise.wrapError(e)})}},t.TelemetryEventName="taskService",t}(i.EventEmitter);t.LanguageServiceTaskSystem=r}),define("vs/workbench/parts/tasks/common/taskService",["require","exports","vs/platform/instantiation/common/instantiation","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i){"use strict";t.TaskType=i.TaskType,t.ITaskService=n.createDecorator("taskService");var o;!function(e){e.Active="active",e.Inactive="inactive",e.ConfigChanged="configChanged",e.Terminated="terminated"}(o=t.TaskServiceEvents||(t.TaskServiceEvents={}))}),define("vs/workbench/parts/tasks/common/taskTemplates",["require","exports","vs/nls!vs/workbench/parts/tasks/common/taskTemplates"],function(e,t,n){"use strict";var i={id:"gulp",label:"Gulp",autoDetect:!0,content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "gulp",','	"isShellCommand": true,','	"args": ["--no-color"],','	"showOutput": "always"',"}"].join("\n")},o={id:"grunt",label:"Grunt",autoDetect:!0,content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "grunt",','	"isShellCommand": true,','	"args": ["--no-color"],','	"showOutput": "always"',"}"].join("\n")},r={id:"npm",label:"npm",sort:"NPM",autoDetect:!1,content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "npm",','	"isShellCommand": true,','	"showOutput": "always",','	"suppressTaskName": true,','	"tasks": [',"		{",'			"taskName": "install",','			"args": ["install"]',"		},","		{",'			"taskName": "update",','			"args": ["update"]',"		},","		{",'			"taskName": "test",','			"args": ["run", "test"]',"		}","	]","}"].join("\n")},s={id:"tsc.config",label:"TypeScript - tsconfig.json",autoDetect:!1,description:n.localize(0,null),content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "tsc",','	"isShellCommand": true,','	"args": ["-p", "."],','	"showOutput": "silent",','	"problemMatcher": "$tsc"',"}"].join("\n")},a={id:"tsc.watch",label:"TypeScript - Watch Mode",autoDetect:!1,description:n.localize(1,null),content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "tsc",','	"isShellCommand": true,','	"args": ["-w", "-p", "."],','	"showOutput": "silent",','	"isWatching": true,','	"problemMatcher": "$tsc-watch"',"}"].join("\n")},c={id:"dotnetCore",label:".NET Core",sort:"NET Core",autoDetect:!1,description:n.localize(2,null),content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "dotnet",','	"isShellCommand": true,','	"args": [],','	"tasks": [',"		{",'			"taskName": "build",','			"args": [ ],','			"isBuildCommand": true,','			"showOutput": "silent",','			"problemMatcher": "$msCompile"',"		}","	]","}"].join("\n")},u={id:"msbuild",label:"MSBuild",autoDetect:!1,description:n.localize(3,null),content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "msbuild",','	"args": [',"		// Ask msbuild to generate full paths for file names.",'		"/property:GenerateFullPaths=true"',"	],",'	"taskSelector": "/t:",','	"showOutput": "silent",','	"tasks": [',"		{",'			"taskName": "build",',"			// Show the output window only if unrecognized errors occur.",'			"showOutput": "silent",',"			// Use the standard MS compiler pattern to detect errors, warnings and infos",'			"problemMatcher": "$msCompile"',"		}","	]","}"].join("\n")},l={id:"externalCommand",label:"Others",autoDetect:!1,description:n.localize(4,null),content:["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format",'	"version": "0.1.0",','	"command": "echo",','	"isShellCommand": true,','	"args": ["Hello World"],','	"showOutput": "always"',"}"].join("\n")};t.templates=[i,o,s,a,c,u,r].sort(function(e,t){return(e.sort||e.label).localeCompare(t.sort||t.label)}),t.templates.push(l)}),define("vs/workbench/parts/tasks/node/processRunnerConfiguration",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerConfiguration","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/uuid","vs/base/common/parsers","vs/platform/markers/common/problemMatcher","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i,o,r,s,a,c,u){"use strict";function l(e,t){return new p(t).run(e)}var d=function(){function e(){}return e.clean="cleanMatcherMatchers",e}();t.ProblemHandling=d;var h;!function(e){e[e.Unknown=0]="Unknown",e[e.String=1]="String",e[e.ProblemMatcher=2]="ProblemMatcher",e[e.Array=3]="Array"}(h||(h={}));var p=function(){function e(e){this.logger=e,this.validationStatus=new a.ValidationStatus,this.namedProblemMatchers=Object.create(null)}return e.prototype.log=function(e){this.logger.log(e)},e.prototype.run=function(e){return{validationStatus:this.validationStatus,configuration:this.createTaskRunnerConfiguration(e),defaultBuildTaskIdentifier:this.defaultBuildTaskIdentifier,defaultTestTaskIdentifier:this.defaultTestTaskIdentifier}},e.prototype.createTaskRunnerConfiguration=function(e){var t=this.createGlobals(e),i=this.createBaseTaskRunnerConfiguration(e,{isMain:!0,globals:t});if(!this.validationStatus.isFatal()){var s=null,c={isMain:!1,globals:t};e.windows&&o.platform===o.Platform.Windows?s=this.createBaseTaskRunnerConfiguration(e.windows,c):e.osx&&o.platform===o.Platform.Mac?s=this.createBaseTaskRunnerConfiguration(e.osx,c):e.linux&&o.platform===o.Platform.Linux&&(s=this.createBaseTaskRunnerConfiguration(e.linux,c)),this.validationStatus.isFatal()||(s&&this.mergeTaskRunnerConigurations(i,s),r.isUndefined(i.options.cwd)&&(i.options.cwd="${workspaceRoot}"))}return i.command?i:(this.validationStatus.state=a.ValidationState.Fatal,this.log(n.localize(0,null)),null)},e.prototype.createGlobals=function(e){var t=this.parseGlobals(e),n=null;return e.windows&&o.platform===o.Platform.Windows?n=this.parseGlobals(e.windows):e.osx&&o.platform===o.Platform.Mac?n=this.parseGlobals(e.osx):e.linux&&o.platform===o.Platform.Linux&&(n=this.parseGlobals(e.linux)),n&&i.mixin(t,n,!0),r.isUndefined(t.isShellCommand)&&(t.isShellCommand=!1),r.isUndefined(t.showOutput)&&(t.showOutput=u.ShowOutput.Always),r.isUndefined(t.echoCommand)&&(t.echoCommand=!1),r.isUndefined(t.suppressTaskName)&&(t.suppressTaskName=!1),t},e.prototype.parseGlobals=function(e){var t={};return r.isString(e.command)&&(t.command=e.command),r.isBoolean(e.isShellCommand)&&(t.isShellCommand=e.isShellCommand),r.isString(e.showOutput)&&(t.showOutput=u.ShowOutput.fromString(e.showOutput)),r.isUndefined(e.echoCommand)||(t.echoCommand=!!e.echoCommand),r.isUndefined(e.suppressTaskName)||(t.suppressTaskName=!!e.suppressTaskName),r.isString(e.taskSelector)&&(t.taskSelector=e.taskSelector),t},e.prototype.mergeTaskRunnerConigurations=function(e,t){if(t.command&&(e.command=t.command),t.args&&(e.args=e.args?e.args.concat(t.args):t.args),r.isUndefined(t.isShellCommand)||(e.isShellCommand=t.isShellCommand),t.options&&(r.isString(t.options.cwd)&&(e.options.cwd=t.options.cwd),t.options.env)){var n=t.options.env,i=e.options.env;i?Object.keys(n).forEach(function(e){i[e]=n[e]}):e.options.env=n}if(t.tasks){var o=Object.create(null);Object.keys(e.tasks).forEach(function(t){var n=e.tasks[t];o[n.name]=n.id});var s=Object.create(null);Object.keys(t.tasks).forEach(function(e){var n=t.tasks[e];s[n.name]=n.id}),Object.keys(s).forEach(function(n){var i=o[n],r=s[n];i&&delete e.tasks[i],e.tasks[r]=t.tasks[r]})}},e.prototype.createBaseTaskRunnerConfiguration=function(e,t){var i=t.globals,o={isShellCommand:i.isShellCommand,args:[]};r.isString(e.command)&&(o.command=e.command),r.isUndefined(e.isShellCommand)||(o.isShellCommand=e.isShellCommand);var c=r.isUndefined(e.args);r.isStringArray(e.args)&&(c=!0,o.args=e.args.slice()),c||(this.validationStatus.state=a.ValidationState.Fatal,this.log(n.localize(1,null,e.args?JSON.stringify(e.args,null,4):"undefined"))),o.options=this.createCommandOptions(e.options),t.isMain&&(this.namedProblemMatchers=this.createNamedProblemMatchers(e));var u=!r.isUndefined(e.problemMatcher),l=r.isArray(e.tasks);if(l)o.tasks=this.createTasks(e.tasks,t),u&&(this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(2,null)));else if(t.isMain){var d=!1;r.isUndefined(e.isWatching)||(d=!!e.isWatching);var h=!0;h=r.isUndefined(e.promptOnClose)?!d:!!e.promptOnClose;var p={id:s.generateUuid(),name:i.command,showOutput:i.showOutput,suppressTaskName:!0,isWatching:d,promptOnClose:h,echoCommand:i.echoCommand};if(u){var f=this.createProblemMatchers(e.problemMatcher);p.problemMatchers=f}else p.problemMatchers=[];for(var m=0,v=p.problemMatchers;m<v.length;m++){var g=v[m];if(g.tscWatch){p.tscWatch=!0;break}}this.defaultBuildTaskIdentifier=p.id,o.tasks=Object.create(null),o.tasks[p.id]=p}return o},e.prototype.createCommandOptions=function(e){var t={};return e&&(r.isUndefined(e.cwd)||(r.isString(e.cwd)?t.cwd=e.cwd:(this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(3,null,e.cwd)))),r.isUndefined(e.env)||(t.env=i.clone(e.env))),t},e.prototype.createNamedProblemMatchers=function(e){var t=this,n=Object.create(null);if(!r.isArray(e.declares))return n;var i=e.declares;return i.forEach(function(e){var i=t.createNamedProblemMatcher(e);i&&(n[i.name]=i)}),n},e.prototype.createNamedProblemMatcher=function(e){var t=new c.ProblemMatcherParser(c.registry,this.logger,this.validationStatus).parse(e);return c.isNamedProblemMatcher(t)?t:(this.validationStatus.state=a.ValidationState.Error,this.log(n.localize(4,null,JSON.stringify(e,null,4))),null)},e.prototype.createTasks=function(e,t){var i=this,o=Object.create(null);if(!e)return o;var c={id:null,exact:-1},l={id:null,exact:-1};return e.forEach(function(e){var d=e.taskName;if(!d)return i.validationStatus.state=a.ValidationState.Fatal,void i.log(n.localize(5,null,JSON.stringify(e,null,4)));var h=i.createProblemMatchers(e.problemMatcher),p={id:s.generateUuid(),name:d,showOutput:t.globals.showOutput};r.isStringArray(e.args)&&(p.args=e.args.slice()),p.isWatching=!1,r.isUndefined(e.isWatching)||(p.isWatching=!!e.isWatching),p.promptOnClose=!0,r.isUndefined(e.promptOnClose)?p.promptOnClose=!p.isWatching:p.promptOnClose=!!e.promptOnClose,r.isString(e.showOutput)&&(p.showOutput=u.ShowOutput.fromString(e.showOutput)),r.isUndefined(p.showOutput)&&(p.showOutput=t.globals.showOutput),p.echoCommand=t.globals.echoCommand,r.isUndefined(e.echoCommand)||(p.echoCommand=!!e.echoCommand),p.suppressTaskName=t.globals.suppressTaskName,r.isUndefined(e.suppressTaskName)||(p.suppressTaskName=!!e.suppressTaskName),h&&(p.problemMatchers=h);for(var f=0,m=p.problemMatchers;f<m.length;f++){var v=m[f];if(v.tscWatch){p.tscWatch=!0;break}}o[p.id]=p,!r.isUndefined(e.isBuildCommand)&&e.isBuildCommand&&c.exact<2?(c.id=p.id,c.exact=2):"build"===d&&c.exact<2&&(c.id=p.id,c.exact=1),!r.isUndefined(e.isTestCommand)&&e.isTestCommand&&l.exact<2?(l.id=p.id,l.exact=2):"test"===d&&l.exact<2&&(l.id=p.id,l.exact=1)}),c.exact>0&&(this.defaultBuildTaskIdentifier=c.id),l.exact>0&&(this.defaultTestTaskIdentifier=l.id),o},e.prototype.createProblemMatchers=function(e){var t=this,i=[];if(r.isUndefined(e))return i;var o=this.getProblemMatcherKind(e);if(o===h.Unknown)return this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(6,null,JSON.stringify(e,null,4))),i;if(o===h.String||o===h.ProblemMatcher){var s=this.resolveProblemMatcher(e);s&&i.push(s)}else if(o===h.Array){var c=e;c.forEach(function(e){var n=t.resolveProblemMatcher(e);n&&i.push(n)})}return i},e.prototype.getProblemMatcherKind=function(e){return r.isString(e)?h.String:r.isArray(e)?h.Array:r.isUndefined(e)?h.Unknown:h.ProblemMatcher},e.prototype.resolveProblemMatcher=function(e){if(r.isString(e)){var t=e;if(t.length>1&&"$"===t[0]){t=t.substring(1);var o=c.registry.get(t);if(o)return i.clone(o);var s=this.namedProblemMatchers[t];if(s)return s=i.clone(s),delete s.name,s}return this.validationStatus.state=a.ValidationState.Error,this.log(n.localize(7,null,e)),null}var u=e;return new c.ProblemMatcherParser(c.registry,this.logger,this.validationStatus).parse(u)},e}();t.parse=l}),define("vs/workbench/parts/tasks/node/processRunnerDetector",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerDetector","vs/base/common/strings","vs/base/common/processes","vs/base/node/processes"],function(e,t,n,i,o,r){"use strict";var s="build",a="test",c=function(){function e(e){this.regexp=e}return e.prototype.init=function(){},e.prototype.match=function(e,t){var n=this.regexp.exec(t);n&&n.length>0&&e.push(n[1])},e}(),u=function(){function e(){}return e.prototype.init=function(){this.tasksStart=!1,this.tasksEnd=!1,this.descriptionOffset=null},e.prototype.match=function(e,t){if(this.tasksStart||this.tasksEnd){if(this.tasksStart&&!this.tasksEnd)if(0===t.indexOf("Tasks run in the order specified"))this.tasksEnd=!0;else{null===this.descriptionOffset&&(this.descriptionOffset=t.match(/\S  \S/).index+1);var n=t.substr(0,this.descriptionOffset).trim();n.length>0&&e.push(n)}}else 0===t.indexOf("Available tasks")&&(this.tasksStart=!0)},e}(),l=function(){function e(e,t,n,i){void 0===i&&(i=null),this.fileService=e,this.contextService=t,this.variables=n,this.taskConfiguration=i,this._stderr=[],this._stdout=[]}return e.supports=function(t){return e.SupportedRunners[t]},e.detectorConfig=function(t){return e.TaskMatchers[t]},Object.defineProperty(e.prototype,"stderr",{get:function(){return this._stderr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stdout",{get:function(){return this._stdout},enumerable:!0,configurable:!0}),e.prototype.detect=function(t,n){var i=this;if(void 0===t&&(t=!1),this.taskConfiguration&&this.taskConfiguration.command&&e.supports(this.taskConfiguration.command)){var s=e.detectorConfig(this.taskConfiguration.command),a=(this.taskConfiguration.args||[]).concat(s.arg),c=this.taskConfiguration.options?o.resolveCommandOptions(this.taskConfiguration.options,this.variables):{cwd:this.variables.workspaceRoot},u=!!this.taskConfiguration.isShellCommand;return this.runDetection(new r.LineProcess(this.taskConfiguration.command,this.variables.resolve(a),u,c),this.taskConfiguration.command,u,s.matcher,e.DefaultProblemMatchers,t)}if(n){var l=void 0;return"gulp"===n?l=this.tryDetectGulp(t):"jake"===n?l=this.tryDetectJake(t):"grunt"===n&&(l=this.tryDetectGrunt(t)),l.then(function(e){return e?e:{config:null,stdout:i.stdout,stderr:i.stderr}})}return this.tryDetectGulp(t).then(function(e){return e?e:i.tryDetectJake(t).then(function(e){return e?e:i.tryDetectGrunt(t).then(function(e){return e?e:{config:null,stdout:i.stdout,stderr:i.stderr}})})})},e.prototype.tryDetectGulp=function(t){var n=this;return this.fileService.resolveFile(this.contextService.toResource("gulpfile.js")).then(function(i){var o=e.detectorConfig("gulp"),s=new r.LineProcess("gulp",[o.arg,"--no-color"],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(s,"gulp",!0,o.matcher,e.DefaultProblemMatchers,t)},function(e){return null})},e.prototype.tryDetectGrunt=function(t){var n=this;return this.fileService.resolveFile(this.contextService.toResource("Gruntfile.js")).then(function(i){var o=e.detectorConfig("grunt"),s=new r.LineProcess("grunt",[o.arg,"--no-color"],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(s,"grunt",!0,o.matcher,e.DefaultProblemMatchers,t)},function(e){return null})},e.prototype.tryDetectJake=function(t){var n=this,i=function(){var i=e.detectorConfig("jake"),o=new r.LineProcess("jake",[i.arg],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(o,"jake",!0,i.matcher,e.DefaultProblemMatchers,t)};return this.fileService.resolveFile(this.contextService.toResource("Jakefile")).then(function(e){return i()},function(e){return n.fileService.resolveFile(n.contextService.toResource("Jakefile.js")).then(function(e){return i()},function(e){return null})})},e.prototype.runDetection=function(t,r,s,a,c,u){var l=this,d=[];return a.init(),t.start().then(function(t){if(0===d.length)return 0!==t.cmdCode&&("gulp"===r?l._stderr.push(n.localize(0,null)):"jake"===r&&l._stderr.push(n.localize(1,null))),{config:null,stdout:l._stdout,stderr:l._stderr};var i={version:e.Version,command:r,isShellCommand:s};return"gulp"===r&&(i.args=["--no-color"]),i.tasks=l.createTaskDescriptions(d,c,u),{config:i,stdout:l._stdout,stderr:l._stderr}},function(e){var t=e.error;return"ENOENT"===t.code?"gulp"===r?l._stderr.push(n.localize(2,null)):"jake"===r?l._stderr.push(n.localize(3,null)):"grunt"===r&&l._stderr.push(n.localize(4,null)):l._stderr.push(n.localize(5,null,r,t.message)),{config:null,stdout:l._stdout,stderr:l._stderr}},function(e){if(e.source===o.Source.stderr)return void l._stderr.push(e.line);var t=i.removeAnsiEscapeCodes(e.line),n=a.match(d,t);n&&n.length>0&&d.push(n[1])})},e.prototype.createTaskDescriptions=function(e,t,i){var o=this,r=[];if(i)e.forEach(function(e){r.push({taskName:e,args:[],isWatching:!1})});else{var s={build:{index:-1,exact:-1},test:{index:-1,exact:-1}};if(e.forEach(function(e,t){o.testBuild(s.build,e,t),o.testTest(s.test,e,t)}),-1!==s.build.index){var a=e[s.build.index];this._stdout.push(n.localize(6,null,a)),r.push({taskName:a,args:[],isBuildCommand:!0,isWatching:!1,problemMatcher:t})}if(-1!==s.test.index){var c=e[s.test.index];this._stdout.push(n.localize(7,null,c)),r.push({taskName:c,args:[],isTestCommand:!0})}}return r},e.prototype.testBuild=function(e,t,n){t===s?(e.index=n,e.exact=3):(i.startsWith(t,s)||i.endsWith(t,s))&&e.exact<3?(e.index=n,e.exact=2):-1!==t.indexOf(s)&&e.exact<2&&(e.index=n,e.exact=1)},e.prototype.testTest=function(e,t,n){t===a?(e.index=n,e.exact=3):(i.startsWith(t,a)||i.endsWith(t,a))&&e.exact<3?(e.index=n,e.exact=2):-1!==t.indexOf(a)&&e.exact<2&&(e.index=n,e.exact=1)},e.Version="0.1.0",e.SupportedRunners={gulp:!0,jake:!0,grunt:!0},e.TaskMatchers={gulp:{matcher:new c(/^(.*)$/),arg:"--tasks-simple"},jake:{matcher:new c(/^jake\s+([^\s]+)\s/),arg:"--tasks"},grunt:{matcher:new u,arg:"--help"}},e.DefaultProblemMatchers=["$lessCompile","$tsc","$jshint"],e}();t.ProcessRunnerDetector=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/node/processRunnerSystem",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerSystem","vs/base/common/objects","vs/base/common/types","vs/base/common/platform","vs/base/common/winjs.base","vs/base/common/async","vs/base/common/severity","vs/base/common/strings","vs/base/common/eventEmitter","vs/base/node/processes","vs/workbench/parts/tasks/common/problemCollectors","vs/workbench/parts/tasks/common/taskSystem","./processRunnerConfiguration"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(t,n,i,o,r,s,a,c){void 0===c&&(c=!0),e.call(this),this.fileConfig=t,this.variables=n,this.markerService=i,this.modelService=o,this.outputChannel=a,this.outputService=s,this.telemetryService=r,this.defaultBuildTaskIdentifier=null,this.defaultTestTaskIdentifier=null,this.childProcess=null,this.activeTaskIdentifier=null,c&&this.clearOutput(),this.errorsShown=!1;var u=f.parse(t,this);this.validationStatus=u.validationStatus,this.configuration=u.configuration,this.defaultBuildTaskIdentifier=u.defaultBuildTaskIdentifier,this.defaultTestTaskIdentifier=u.defaultTestTaskIdentifier,this.validationStatus.isOK()||this.outputService.showOutput(this.outputChannel,!0)}return __extends(t,e),t.prototype.build=function(){if(!this.defaultBuildTaskIdentifier)throw new p.TaskError(c["default"].Info,n.localize(0,null),p.TaskErrors.NoBuildTask);return this.executeTask(this.defaultBuildTaskIdentifier,p.Triggers.shortcut)},t.prototype.rebuild=function(){throw new Error("Task - Rebuild: not implemented yet")},t.prototype.clean=function(){throw new Error("Task - Clean: not implemented yet")},t.prototype.runTest=function(){if(!this.defaultTestTaskIdentifier)throw new p.TaskError(c["default"].Info,n.localize(1,null),p.TaskErrors.NoTestTask);return this.executeTask(this.defaultTestTaskIdentifier,p.Triggers.shortcut)},t.prototype.run=function(e){return this.executeTask(e)},t.prototype.isActive=function(){return s.TPromise.as(!!this.childProcess)},t.prototype.isActiveSync=function(){return!!this.childProcess},t.prototype.canAutoTerminate=function(){if(this.childProcess){if(this.activeTaskIdentifier){var e=this.configuration.tasks[this.activeTaskIdentifier];if(e)return!e.promptOnClose}return!1}return!0},t.prototype.terminate=function(){return this.childProcess?this.childProcess.terminate():s.TPromise.as({success:!0})},t.prototype.tasks=function(){var e,t=this;return e=this.configuration&&this.configuration.tasks?Object.keys(this.configuration.tasks).map(function(e){return t.configuration.tasks[e]}):[],s.TPromise.as(e)},t.prototype.executeTask=function(e,i){var o=this;if(void 0===i&&(i=p.Triggers.command),this.validationStatus.isFatal())throw new p.TaskError(c["default"].Error,n.localize(2,null),p.TaskErrors.ConfigValidationError);var r=this.configuration.tasks[e];if(!r)throw new p.TaskError(c["default"].Info,n.localize(3,null),p.TaskErrors.TaskNotFound);var a={trigger:i,command:"other",success:!0};try{var u=this.doExecuteTask(r,a);return u.promise=u.promise.then(function(e){return o.telemetryService.publicLog(t.TelemetryEventName,a),e},function(e){return a.success=!1,o.telemetryService.publicLog(t.TelemetryEventName,a),s.TPromise.wrapError(e)}),u}catch(l){if(a.success=!1,this.telemetryService.publicLog(t.TelemetryEventName,a),l instanceof p.TaskError)throw l;if(l instanceof Error){var d=l;throw this.outputService.append(this.outputChannel,d.message),new p.TaskError(c["default"].Error,d.message,p.TaskErrors.UnknownError)}throw this.outputService.append(this.outputChannel,l.toString()),new p.TaskError(c["default"].Error,n.localize(4,null),p.TaskErrors.UnknownError)}},t.prototype.doExecuteTask=function(e,t){var i=this,o={},s=this.configuration;this.validationStatus.isOK()||this.errorsShown?this.clearOutput():(this.showOutput(),this.errorsShown=!0);var c=this.configuration.args?this.configuration.args.slice():[];e.suppressTaskName||(this.fileConfig.taskSelector?c.push(this.fileConfig.taskSelector+e.name):c.push(e.name)),e.args&&(c=c.concat(e.args)),c=this.resolveVariables(c);var l=this.resolveVariable(s.command);if(this.childProcess=new d.LineProcess(l,c,s.isShellCommand,this.resolveOptions(s.options)),t.command=this.childProcess.getSanitizedCommand(),(e.showOutput===p.ShowOutput.Always||e.showOutput===p.ShowOutput.Silent&&0===e.problemMatchers.length)&&this.showOutput(),e.echoCommand){var f=r.isWindows?">":"$";this.log("running command"+f+" "+l+" "+c.join(" "))}if(e.isWatching){var m=new h.WatchingProblemCollector(this.resolveMatchers(e.problemMatchers),this.markerService,this.modelService),v=[],g={taskId:e.id,taskName:e.name,type:p.TaskType.Watching},y=0;v.push(m.on(h.ProblemCollectorEvents.WatchingBeginDetected,function(){y++,i.emit(p.TaskSystemEvents.Active,g)})),v.push(m.on(h.ProblemCollectorEvents.WatchingEndDetected,function(){y--,i.emit(p.TaskSystemEvents.Inactive,g)})),m.aboutToStart();var _=null;this.activeTaskIdentifier=e.id;var b=this.childProcess.start().then(function(t){i.childProcessEnded(),m.dispose(),v.forEach(function(e){return e()}),v=null;for(var r=0;y>r;r++)i.emit(p.TaskSystemEvents.Inactive,g);return y=0,i.checkTerminated(e,t)||i.log(n.localize(5,null)),t.cmdCode&&1===t.cmdCode&&0===m.numberOfMatches&&e.showOutput!==p.ShowOutput.Never&&i.showOutput(),o.exitCode=t.cmdCode,o},function(t){i.childProcessEnded(),m.dispose(),v.forEach(function(e){return e()}),v=null;for(var n=0;y>n;n++)i.emit(p.TaskSystemEvents.Inactive,g);return y=0,i.handleError(e,t)},function(e){var t=u.removeAnsiEscapeCodes(e.line);i.outputService.append(i.outputChannel,t+"\n"),m.processLine(t),null===_&&(_=new a.Delayer(3e3)),_.trigger(function(){return m.forceDelivery(),null}).then(function(){_=null})}),S=e.tscWatch?{restartOnFileChanges:"**/*.ts",promise:b}:{promise:b};return S}var E={taskId:e.id,taskName:e.name,type:p.TaskType.SingleRun};this.emit(p.TaskSystemEvents.Active,E);var w=new h.StartStopProblemCollector(this.resolveMatchers(e.problemMatchers),this.markerService,this.modelService);this.activeTaskIdentifier=e.id;var b=this.childProcess.start().then(function(t){return i.childProcessEnded(),w.done(),w.dispose(),i.checkTerminated(e,t),i.emit(p.TaskSystemEvents.Inactive,E),t.cmdCode&&1===t.cmdCode&&0===w.numberOfMatches&&e.showOutput!==p.ShowOutput.Never&&i.showOutput(),o.exitCode=t.cmdCode,o},function(t){return i.childProcessEnded(),w.dispose(),i.emit(p.TaskSystemEvents.Inactive,E),i.handleError(e,t)},function(e){var t=u.removeAnsiEscapeCodes(e.line);i.outputService.append(i.outputChannel,t+"\n"),w.processLine(t)});return{promise:b}},t.prototype.childProcessEnded=function(){this.childProcess=null,this.activeTaskIdentifier=null},t.prototype.handleError=function(e,t){var i=!1;if(t.error&&!t.terminated){var o=this.configuration.args?this.configuration.args.join(" "):"";this.log(n.localize(6,null,this.configuration.command,o)),this.outputService.append(this.outputChannel,t.error.message),i=!0}return t.stdout&&(this.outputService.append(this.outputChannel,t.stdout),i=!0),t.stderr&&(this.outputService.append(this.outputChannel,t.stderr),i=!0),i=this.checkTerminated(e,t)||i,i&&this.showOutput(),s.Promise.wrapError(t)},t.prototype.checkTerminated=function(e,t){return t.terminated?(this.log(n.localize(7,null,e.name)),!0):!1},t.prototype.resolveOptions=function(e){var t=this,n={cwd:this.resolveVariable(e.cwd)};return e.env&&(n.env=Object.create(null),Object.keys(e.env).forEach(function(i){var r=e.env[i];o.isString(r)?n.env[i]=t.resolveVariable(r):n.env[i]=r.toString()})),n},t.prototype.resolveVariables=function(e){var t=this;return e.map(function(e){return t.resolveVariable(e)})},t.prototype.resolveMatchers=function(e){var t=this;if(0===e.length)return e;var n=[];return e.forEach(function(e){if(e.filePrefix){var o=i.clone(e);o.filePrefix=t.resolveVariable(o.filePrefix),n.push(o)}else n.push(e)}),n},t.prototype.resolveVariable=function(e){var t=this,n=/\$\{(.*?)\}/g;return e.replace(n,function(e,n){var i=t.variables[n];return i?i:e;
})},t.prototype.log=function(e){this.outputService.append(this.outputChannel,e+"\n")},t.prototype.showOutput=function(){this.outputService.showOutput(this.outputChannel,!0)},t.prototype.clearOutput=function(){this.outputService.clearOutput(this.outputChannel)},t.TelemetryEventName="taskService",t}(l.EventEmitter);t.ProcessRunnerSystem=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/activity/common/activityService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";var i=function(){function e(e){this.descriptorFn=e}return e.prototype.getDescription=function(){return this.descriptorFn(null)},e}();t.BaseBadge=i;var o=function(e){function t(t,n){e.call(this,n),this.number=t}return __extends(t,e),t.prototype.getDescription=function(){return this.descriptorFn(this.number)},t}(i);t.NumberBadge=o;var r=function(e){function t(t,n){e.call(this,n),this.text=t}return __extends(t,e),t}(i);t.TextBadge=r;var s=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(i);t.IconBadge=s;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i);t.ProgressBadge=a,t.IActivityService=n.createDecorator("activityService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/activitybar/activityAction",["require","exports","vs/nls!vs/workbench/browser/parts/activitybar/activityAction","vs/base/browser/builder","vs/base/browser/dnd","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/services/activity/common/activityService","vs/css!./media/activityaction"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(e){function t(t,n,i){e.call(this,t,n,i),this.badge=null}return __extends(t,e),t.prototype.activate=function(){this.checked||(this.checked=!0,this.emit("checked",{source:this}))},t.prototype.deactivate=function(){this.checked&&(this.checked=!1,this.emit("checked",{source:this}))},t.prototype.getBadge=function(){return this.badge},t.prototype.setBadge=function(e){this.badge=e,this.emit(t.BADGE,{source:this})},t.BADGE="badge",t}(r.Action);t.ActivityAction=c;var u=function(e){function t(t,n,i){void 0===n&&(n=t.label),void 0===i&&(i=null),e.call(this,null,t),this.cssClass=t["class"],this.name=n,this._keybinding=i}return __extends(t,e),t.prototype.render=function(t){var n=this;e.prototype.render.call(this,t),this.$e=i.$("a.action-label").attr({tabIndex:"0",role:"button"}).appendTo(this.builder),this.cssClass&&this.$e.addClass(this.cssClass),this.$badge=this.builder.div({"class":"badge"},function(e){n.$badgeContent=e.div({"class":"badge-content"})}),this.$badge.hide(),this.keybinding=this._keybinding,[this.$badge,this.$e].forEach(function(e){return new o.DelayedDragHandler(e.getHTMLElement(),function(){n.getAction().checked||n.getAction().run()})})},t.prototype.focus=function(){this.$e.domFocus()},t.prototype.setBadge=function(e){this.updateBadge(e)},Object.defineProperty(t.prototype,"keybinding",{set:function(e){if(this._keybinding=e,this.$e){var t;t=e?n.localize(0,null,this.name,e):this.name,this.$e.title(t),this.$badge.title(t)}},enumerable:!0,configurable:!0}),t.prototype.updateBadge=function(e){if(this.$badgeContent.empty(),this.$badge.hide(),e){if(e instanceof a.NumberBadge){var t=e.number;t&&(this.$badgeContent.text(t>99?"99+":t.toString()),this.$badge.show())}else e instanceof a.TextBadge?(this.$badgeContent.text(e.text),this.$badge.show()):e instanceof a.IconBadge?this.$badge.show():e instanceof a.ProgressBadge&&this.$badge.show();this.$e.attr("aria-label",this.name+" - "+e.getDescription())}},t.prototype._updateClass=function(){this.cssClass&&this.$badge.removeClass(this.cssClass),this.cssClass=this.getAction()["class"],this.$badge.addClass(this.cssClass)},t.prototype._updateChecked=function(){this.getAction().checked?this.$e.addClass("active"):this.$e.removeClass("active")},t.prototype._updateUnknown=function(e){if(e.getType()===c.BADGE){var t=this.getAction();t instanceof c&&this.updateBadge(t.getBadge())}},t.prototype._updateEnabled=function(){this.getAction().enabled?this.builder.removeClass("disabled"):this.builder.addClass("disabled")},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.$badge.destroy(),this.$e.destroy()},t}(s.BaseActionItem);t.ActivityActionItem=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/configuration/node/configurationService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/strings","vs/base/common/platform","vs/base/common/paths","vs/base/node/extfs","vs/base/common/objects","vs/platform/configuration/common/configurationService","vs/workbench/common/events","vs/platform/configuration/common/configuration","fs"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t,n){e.call(this,t,n),this.serviceId=d.IConfigurationService,this.registerListeners()}return __extends(t,e),t.prototype.resolveContents=function(e){var t=this,i=[];return n.TPromise.join(e.map(function(e){return t.resolveContent(e).then(function(e){i.push(e)})})).then(function(){return i})},t.prototype.resolveContent=function(e){return new n.TPromise(function(t,n){h.readFile(e.fsPath,function(i,o){i?n(i):t({resource:e,value:o.toString()})})})},t.prototype.resolveStat=function(e){return new n.TPromise(function(t,n){a.readdir(e.fsPath,function(a,c){a?"ENOTDIR"===a.code?t({resource:e,isDirectory:!1}):n(a):t({resource:e,isDirectory:!0,children:c.map(function(t){return r.isMacintosh&&(t=o.normalizeNFC(t)),{resource:i["default"].file(s.join(e.fsPath,t))}})})})})},t.prototype.registerListeners=function(){var e=this;this.toDispose=this.eventService.addListener(l.EventType.WORKBENCH_OPTIONS_CHANGED,function(t){return e.onOptionsChanged(t)})},t.prototype.onOptionsChanged=function(e){"globalSettings"===e.key&&this.reloadAndEmit()},t.prototype.loadWorkspaceConfiguration=function(t){return this.contextService.getWorkspace()?e.prototype.loadWorkspaceConfiguration.call(this,t):n.TPromise.as({})},t.prototype.loadGlobalConfiguration=function(){var t=this;return e.prototype.loadGlobalConfiguration.call(this).then(function(e){var n=t.contextService.getOptions().globalSettings;return{contents:c.mixin(c.clone(e.contents),n.settings,!0),parseErrors:n.settingsParseErrors}})},t.prototype.dispose=function(){this.toDispose()},t}(u.ConfigurationService);t.ConfigurationService=p}),define("vs/workbench/services/contextview/electron-browser/contextmenuService",["require","exports","vs/base/common/winjs.base","vs/base/common/severity","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/dom","vs/base/browser/builder","vs/platform/contextview/browser/contextView","electron"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(){function e(e,t,n){this.serviceId=a.IContextMenuService,this.messageService=e,this.telemetryService=t,this.keybindingService=n}return e.prototype.showContextMenu=function(e){var t=this;e.getActions().then(function(i){return i.length?n.TPromise.timeout(0).then(function(){var a=new c.remote.Menu,u=null;i.forEach(function(n){if(n instanceof o.Separator)a.append(new c.remote.MenuItem({type:"separator"}));else{var i=e.getKeyBinding?e.getKeyBinding(n):void 0,r=i&&t.keybindingService.getElectronAcceleratorFor(i),s=new c.remote.MenuItem({label:n.label,checked:n.checked,accelerator:r,enabled:n.enabled,click:function(){u=n}});a.append(s)}});var l,d,h=e.getAnchor();if(r.isHTMLElement(h)){var p=s.$(h),f=p.getPosition(),m=p.getTotalSize();l=f.left,d=f.top+m.height}else{var v=h;l=v.x,d=v.y}if(a.popup(c.remote.getCurrentWindow(),Math.floor(l),Math.floor(d)),e.onHide&&e.onHide(!1),u){t.telemetryService.publicLog("workbenchActionExecuted",{id:u.id,from:"contextMenu"});var g=e.getActionsContext?e.getActionsContext():null;return u.run(g)||n.TPromise.as(null)}}):n.TPromise.as(null)}).done(null,function(e){return t.messageService.show(i["default"].Error,e)})},e}();t.ContextMenuService=u}),define("vs/workbench/services/editor/common/editorService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";!function(e){e[e.MINIMIZE_OTHERS=0]="MINIMIZE_OTHERS",e[e.EVEN_WIDTH=1]="EVEN_WIDTH"}(t.EditorArrangement||(t.EditorArrangement={}));t.EditorArrangement;t.IWorkbenchEditorService=n.createDecorator("editorService")});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostOutputService",["require","exports","vs/base/common/errors","vs/platform/thread/common/thread","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e,t){this._name=e,this._proxy=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;this._disposed||this._proxy.clear(this._name).then(function(){e._disposed=!0})},e.prototype.append=function(e){this._proxy.append(this._name,e)},e.prototype.appendLine=function(e){this.append(e+"\n")},e.prototype.clear=function(){this._proxy.clear(this._name)},e.prototype.show=function(e,t){"boolean"==typeof e&&(t=e),this._proxy.reveal(this._name,t)},e.prototype.hide=function(){this._proxy.close(this._name)},e}();t.ExtHostOutputChannel=s;var a=function(){function e(e){this._proxy=e.getRemotable(c)}return e.prototype.createOutputChannel=function(e){if(e=e.trim())return new s(e,this._proxy);throw new Error("illegal argument `name`. must not be falsy")},e}();t.ExtHostOutputService=a;var c=function(){function e(e,t){this._outputService=e,this._editorService=t}return e.prototype.append=function(e,t){this._outputService.append(e,t)},e.prototype.clear=function(e){this._outputService.clearOutput(e)},e.prototype.reveal=function(e,t){this._outputService.showOutput(e,t)},e.prototype.close=function(e){for(var t=this._editorService.getVisibleEditors(),i=0,r=t;i<r.length;i++){var s=r[i];if(s.input.getId()===o.OUTPUT_EDITOR_INPUT_ID)return void this._editorService.closeEditor(s).done(null,n.onUnexpectedError)}},e=__decorate([i.Remotable.MainContext("MainThreadOutputService"),__param(0,o.IOutputService),__param(1,r.IWorkbenchEditorService)],e)}();t.MainThreadOutputService=c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostWorkspace",["require","exports","vs/base/common/errors","vs/platform/search/common/search","vs/platform/workspace/common/workspace","vs/platform/thread/common/thread","vs/platform/event/common/event","vs/workbench/services/editor/common/editorService","vs/workbench/parts/files/common/files","vs/editor/common/services/bulkEdit","vs/base/common/winjs.base","vs/workbench/api/node/extHostTypeConverters"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(){function e(e,t){this._proxy=e.getRemotable(p),this._workspacePath=t}return e.prototype.getPath=function(){return this._workspacePath},e.prototype.getRelativePath=function(e){var t;return t="string"==typeof e?e:e.fsPath,this._workspacePath&&this._workspacePath.length<t.length?t.substring(this._workspacePath.length):t},e.prototype.findFiles=function(t,n,i,o){var r=this,s=e._requestIdPool++,a=this._proxy.$startSearch(t,n,i,s);return o&&o.onCancellationRequested(function(){return r._proxy.$cancelSearch(s)}),a},e.prototype.saveAll=function(e){return this._proxy.$saveAll(e)},e.prototype.appyEdit=function(e){for(var t=[],n=e.entries(),i=0,o=n;i<o.length;i++)for(var r=o[i],s=r[0],a=r[1],c=0,u=a;c<u.length;c++){var l=u[c];t.push({resource:s,newText:l.newText,range:d.fromRange(l.range)})}return this._proxy.$applyWorkspaceEdit(t)},e._requestIdPool=0,e=__decorate([__param(0,r.IThreadService)],e)}();t.ExtHostWorkspace=h;var p=function(){function e(e,t,n,i,o){this._activeSearches=Object.create(null),this._searchService=e,this._workspace=t.getWorkspace(),this._textFileService=n,this._editorService=i,this._eventService=o}return e.prototype.$startSearch=function(e,t,o,r){var s=this;if(this._workspace){var a=this._searchService.search({folderResources:[this._workspace.resource],type:i.QueryType.File,maxResults:o,includePattern:(u={},u[e]=!0,u),excludePattern:(d={},d[t]=!0,d)}).then(function(e){return e.results.map(function(e){return e.resource})},function(e){return n.isPromiseCanceledError(e)?void 0:l.TPromise.wrapError(e)});this._activeSearches[r]=a;var c=function(){return delete s._activeSearches[r]};return a.done(c,c),a;var u,d}},e.prototype.$cancelSearch=function(e){var t=this._activeSearches[e];return t?(delete this._activeSearches[e],t.cancel(),l.TPromise.as(!0)):void 0},e.prototype.$saveAll=function(e){return this._textFileService.saveAll(e).then(function(e){return e.results.every(function(e){return e.success===!0})})},e.prototype.$applyWorkspaceEdit=function(e){var t,n=this._editorService.getActiveEditor();if(n){var i=n.getControl();"function"==typeof i.getEditorType&&(t=i)}return u.bulkEdit(this._eventService,this._editorService,t,e).then(function(){return!0})},e=__decorate([r.Remotable.MainContext("MainThreadWorkspace"),__param(0,i.ISearchService),__param(1,o.IWorkspaceContextService),__param(2,c.ITextFileService),__param(3,a.IWorkbenchEditorService),__param(4,s.IEventService)],e)}();t.MainThreadWorkspace=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/binaryDiffEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/binaryDiffEditor","vs/base/browser/ui/sash/sash","vs/base/browser/builder","vs/base/browser/ui/resourceviewer/resourceViewer","vs/base/browser/ui/scrollbar/scrollableElementImpl","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/binaryEditorModel","vs/workbench/services/editor/common/editorService","vs/platform/telemetry/common/telemetry","vs/css!./media/binarydiffeditor"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(e){function t(n,i){e.call(this,t.ID,n),this.editorService=i}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():i.localize(0,null)},t.prototype.createEditor=function(e){var t=this,n=document.createElement("div");n.className="binary-container",this.leftBinaryContainer=r.$(n),this.leftBinaryContainer.tabindex(0),this.leftScrollbar=new a.ScrollableElement(n,{horizontal:"hidden",vertical:"hidden"}),e.getHTMLElement().appendChild(this.leftScrollbar.getDomNode()),r.$(this.leftScrollbar.getDomNode()).addClass("binarydiff-left"),this.sash=new o.Sash(e.getHTMLElement(),this),this.sash.addListener("start",function(){return t.onSashDragStart()}),this.sash.addListener("change",function(e){return t.onSashDrag(e)}),this.sash.addListener("end",function(){return t.onSashDragEnd()});var i=document.createElement("div");i.className="binary-container",this.rightBinaryContainer=r.$(i),this.rightBinaryContainer.tabindex(0),this.rightScrollbar=new a.ScrollableElement(i,{horizontal:"hidden",vertical:"hidden"}),e.getHTMLElement().appendChild(this.rightScrollbar.getDomNode()),r.$(this.rightScrollbar.getDomNode()).addClass("binarydiff-right")},t.prototype.setInput=function(t,o){var r=this,s=this.getInput();e.prototype.setInput.call(this,t,o);var a=o&&o.forceOpen;return!a&&t.matches(s)?n.TPromise.as(null):this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e.originalModel instanceof u.BinaryEditorModel&&e.modifiedModel instanceof u.BinaryEditorModel))return n.TPromise.wrapError(i.localize(1,null));if(!r.getInput()||r.getInput()!==t)return null;var o=e.originalModel;r.renderInput(o.getName(),o.getResource(),!0);var s=e.modifiedModel;r.renderInput(s.getName(),s.getResource(),!1)})},t.prototype.renderInput=function(e,t,n){this.leftContainerWidth&&this.dimension&&this.leftContainerWidth!==this.dimension.width/2&&(this.leftContainerWidth=this.dimension.width/2,this.layoutContainers(),this.sash.layout());var i=n?this.leftBinaryContainer:this.rightBinaryContainer,o=n?this.leftScrollbar:this.rightScrollbar;s.ResourceViewer.show(e,t,i,o)},t.prototype.clearInput=function(){r.$(this.leftBinaryContainer).empty(),r.$(this.rightBinaryContainer).empty(),e.prototype.clearInput.call(this)},t.prototype.layout=function(e){var t=this.dimension;if(this.dimension=e,this.leftContainerWidth&&t){var n=this.leftContainerWidth/t.width;this.leftContainerWidth=this.dimension.width*n}else this.leftContainerWidth=this.dimension.width/2;this.sash.layout(),this.layoutContainers()},t.prototype.layoutContainers=function(){this.leftBinaryContainer.size(this.leftContainerWidth,this.dimension.height),this.leftScrollbar.onElementDimensions(),this.leftScrollbar.onElementInternalDimensions(),this.rightBinaryContainer.size(this.dimension.width-this.leftContainerWidth,this.dimension.height),this.rightScrollbar.onElementDimensions(),this.rightScrollbar.onElementInternalDimensions()},t.prototype.onSashDragStart=function(){this.startLeftContainerWidth=this.leftContainerWidth},t.prototype.onSashDrag=function(e){var n=this.startLeftContainerWidth+e.currentX-e.startX;this.leftContainerWidth=Math.max(t.MIN_CONTAINER_WIDTH,n),this.dimension.width-this.leftContainerWidth<t.MIN_CONTAINER_WIDTH&&(this.leftContainerWidth=this.dimension.width-t.MIN_CONTAINER_WIDTH),this.layoutContainers()},t.prototype.onSashDragEnd=function(){this.sash.layout()},t.prototype.getVerticalSashTop=function(e){return 0},t.prototype.getVerticalSashLeft=function(e){return this.leftContainerWidth},t.prototype.getVerticalSashHeight=function(e){return this.dimension.height},t.prototype.focus=function(){this.rightBinaryContainer.domFocus()},t.prototype.dispose=function(){this.sash.dispose(),this.leftScrollbar.dispose(),this.rightScrollbar.dispose(),this.leftBinaryContainer.destroy(),this.rightBinaryContainer.destroy(),e.prototype.dispose.call(this)},t.ID="workbench.editors.binaryResourceDiffEditor",t.MIN_CONTAINER_WIDTH=100,t=__decorate([__param(0,d.ITelemetryService),__param(1,l.IWorkbenchEditorService)],t)}(c.BaseEditor);t.BinaryResourceDiffEditor=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/binaryEditor",["require","exports","vs/nls!vs/workbench/browser/parts/editor/binaryEditor","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/ui/resourceviewer/resourceViewer","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/binaryEditorModel","vs/workbench/services/editor/common/editorService","vs/platform/telemetry/common/telemetry","vs/css!./media/binaryeditor"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=function(e){function t(t,n,i){e.call(this,t,n),this._editorService=i}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),t.prototype.createEditor=function(e){var t=document.createElement("div");t.className="binary-container monaco-editor-background",this.binaryContainer=o.$(t),this.binaryContainer.tabindex(0),e.getHTMLElement().appendChild(this.binaryContainer.getHTMLElement())},t.prototype.setInput=function(t,n){var o=this,s=this.getInput();e.prototype.setInput.call(this,t,n);var c=n&&n.forceOpen;return!c&&t.matches(s)?i.TPromise.as(null):this._editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof a.BinaryEditorModel))return i.TPromise.wrapError("Invalid editor input. Binary resource editor requires a model instance of BinaryEditorModel.");if(!o.getInput()||o.getInput()!==t)return null;var n=e;return r.ResourceViewer.show(n.getName(),n.getResource(),o.binaryContainer),i.TPromise.as(null)})},t.prototype.clearInput=function(){o.$(this.binaryContainer).empty(),e.prototype.clearInput.call(this)},t.prototype.layout=function(e){this.binaryContainer.size(e.width,e.height)},t.prototype.focus=function(){this.binaryContainer.domFocus()},t.prototype.dispose=function(){this.binaryContainer.destroy(),e.prototype.dispose.call(this)},t}(s.BaseEditor);t.BaseBinaryResourceEditor=l;var d=function(e){function t(n,i){e.call(this,t.ID,n,i)}return __extends(t,e),t.ID="workbench.editors.binaryResourceEditor",t=__decorate([__param(0,u.ITelemetryService),__param(1,c.IWorkbenchEditorService)],t)}(l);t.BinaryResourceEditor=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/iframeEditor",["require","exports","vs/nls!vs/workbench/browser/parts/editor/iframeEditor","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/browser/builder","vs/base/common/errors","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/iframeEditorInput","vs/workbench/common/editor/iframeEditorModel","vs/platform/storage/common/storage","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/css!./media/iframeeditor"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(n,i,o){e.call(this,t.ID,n),this.editorService=i,this.storageService=o}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},t.prototype.createEditor=function(e){var n=document.createElement("div");n.className="iframe-container monaco-editor-background",this.iframeContainer=r.$(n),this.iframeContainer.tabindex(0),this.iframeBuilder=r.$(this.iframeContainer).element("iframe").addClass("iframe"),this.iframeBuilder.attr({frameborder:"0"}),this.iframeBuilder.removeProperty(t.RESOURCE_PROPERTY),e.getHTMLElement().appendChild(n)},t.prototype.setInput=function(t,n){var o=this.getInput();e.prototype.setInput.call(this,t,n);var r=n&&n.forceOpen;return!r&&t.matches(o)?i.TPromise.as(null):t instanceof c.IFrameEditorInput?this.doSetInput(t,!0):i.TPromise.wrapError("Invalid editor input. IFrame editor requires an input instance of IFrameEditorInput.")},t.prototype.doSetInput=function(e,n){var r=this;return this.editorService.resolveEditorModel(e,!0).then(function(s){if(!(s instanceof u.IFrameEditorModel))return i.TPromise.wrapError("Invalid editor input. IFrame editor requires a model instance of IFrameEditorModel.");if(!r.getInput()||r.getInput()!==e)return null;var a=s,c=!n&&!!r.iframeBuilder.getProperty(t.RESOURCE_PROPERTY),l=a.getContents();l.body=l.body+r.enableKeybindings();try{r.setFrameContents(a.resource,c?l.body:[l.head,l.body,l.tail].join("\n"),c)}catch(d){setTimeout(function(){return r.reload(!0)},1e3)}c||r.clearFocusTracker(),r.focusTracker||(r.focusTracker=o.trackFocus(r.iframeBuilder.getHTMLElement().contentWindow),r.focusTracker.addFocusListener(function(){r.editorService.activateEditor(r.position)}))})},t.prototype.setFrameContents=function(e,n,i){var o=this.iframeBuilder.getHTMLElement().contentWindow;i?o.document.body.innerHTML=n:(o.document.open("text/html","replace"),o.document.write(n),o.document.close(),o.scrollTo(0,0),this.iframeBuilder.setProperty(t.RESOURCE_PROPERTY,e.toString()))},t.prototype.enableKeybindings=function(){return["<script>","var ignoredKeys = [9 /* tab */, 32 /* space */, 33 /* page up */, 34 /* page down */, 38 /* up */, 40 /* down */];","var ignoredCtrlCmdKeys = [65 /* a */, 67 /* c */];","var ignoredShiftKeys = [9 /* tab */];",'window.document.body.addEventListener("keydown", function(event) {',"	try {","		if (ignoredKeys.some(function(i) { return i === event.keyCode; })) {","			if (!event.ctrlKey && !event.altKey && !event.shiftKey && !event.metaKey) {","				return;","			}","		}","","		if (ignoredCtrlCmdKeys.some(function(i) { return i === event.keyCode; })) {","			if (event.ctrlKey || event.metaKey) {","				return;","			}","		}","","		if (ignoredShiftKeys.some(function(i) { return i === event.keyCode; })) {","			if (event.shiftKey) {","				return;","			}","		}","","		event.preventDefault();","",'		var fakeEvent = document.createEvent("KeyboardEvent");','		Object.defineProperty(fakeEvent, "keyCode", {',"			get : function() {","				return event.keyCode;","			}","		});",'		Object.defineProperty(fakeEvent, "which", {',"			get : function() {","				return event.keyCode;","			}","		});",'		Object.defineProperty(fakeEvent, "target", {',"			get : function() {","				return window && window.parent.document.body;","			}","		});","",'		fakeEvent.initKeyboardEvent("keydown", true, true, document.defaultView, null, null, event.ctrlKey, event.altKey, event.shiftKey, event.metaKey);',"","		window.parent.document.dispatchEvent(fakeEvent);","	} catch (error) {}","});",'window.document.addEventListener("dragover", function (e) {',"	e.preventDefault();","});",'window.document.addEventListener("drop", function (e) {',"	e.preventDefault();","});",'window.document.body.addEventListener("dragover", function (e) {',"	e.preventDefault();","});",'window.document.body.addEventListener("drop", function (e) {',"	e.preventDefault();","});","</script>"].join("\n")},t.prototype.clearInput=function(){this.clearIFrame(),e.prototype.clearInput.call(this)},t.prototype.clearIFrame=function(){this.iframeBuilder.src("about:blank"),this.iframeBuilder.removeProperty(t.RESOURCE_PROPERTY),this.clearFocusTracker()},t.prototype.clearFocusTracker=function(){this.focusTracker&&(this.focusTracker.dispose(),this.focusTracker=null)},t.prototype.layout=function(e){this.iframeContainer.size(e.width,e.height),this.iframeBuilder.size(e.width,e.height)},t.prototype.focus=function(){this.iframeContainer.domFocus()},t.prototype.changePosition=function(t){var n=this;e.prototype.changePosition.call(this,t),setTimeout(function(){return n.reload(!0)})},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.reload=function(e){this.input&&(e&&this.clearIFrame(),this.doSetInput(this.input).done(null,s.onUnexpectedError))},t.prototype.dispose=function(){this.iframeContainer.destroy(),this.clearFocusTracker(),e.prototype.dispose.call(this)},t.ID="workbench.editors.iFrameEditor",t.RESOURCE_PROPERTY="resource",t=__decorate([__param(0,d.ITelemetryService),__param(1,h.IWorkbenchEditorService),__param(2,l.IStorageService)],t)}(a.BaseEditor);t.IFrameEditor=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/binaryFileEditor",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/binaryFileEditor","vs/workbench/browser/parts/editor/binaryEditor","vs/workbench/parts/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(n,i){e.call(this,t.ID,n,i)}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},t.prototype.supportsSplitEditor=function(){return!0},t.ID=o.BINARY_FILE_EDITOR_ID,t=__decorate([__param(0,r.ITelemetryService),__param(1,s.IWorkbenchEditorService)],t)}(i.BaseBinaryResourceEditor);t.BinaryFileEditor=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/electronFileActions",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/nls!vs/workbench/parts/files/electron-browser/electronFileActions","vs/base/common/paths","vs/base/common/labels","vs/base/common/platform","vs/base/common/severity","vs/workbench/services/editor/common/editorService","vs/workbench/common/editor","vs/platform/message/common/message","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t){e.call(this,"workbench.action.files.revealInWindows",a.isWindows?o.localize(0,null):a.isMacintosh?o.localize(1,null):o.localize(2,null)),this.resource=t,this.order=45}return __extends(t,e),t.prototype.run=function(){return h.shell.showItemInFolder(r.normalize(this.resource.fsPath,!0)),n.TPromise.as(!0)},t}(i.Action);t.RevealInOSAction=p;var f=function(e){function t(t,n,i,o){e.call(this,t,n),
this.editorService=i,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?h.shell.showItemInFolder(r.normalize(e.getResource().fsPath,!0)):this.messageService.show(c["default"].Info,o.localize(6,null)),n.TPromise.as(!0)},t.ID="workbench.action.files.revealActiveFileInWindows",t.LABEL=a.isWindows?o.localize(3,null):a.isMacintosh?o.localize(4,null):o.localize(5,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.GlobalRevealInOSAction=f;var m=function(e){function t(t){e.call(this,"workbench.action.files.copyPath",o.localize(7,null)),this.resource=t,this.order=140}return __extends(t,e),t.prototype.run=function(){return h.clipboard.writeText(s.getPathLabel(this.resource)),n.TPromise.as(!0)},t}(i.Action);t.CopyPathAction=m;var v=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?(h.clipboard.writeText(s.getPathLabel(e.getResource())),this.editorService.focusEditor()):this.messageService.show(c["default"].Info,o.localize(9,null)),n.TPromise.as(!0)},t.ID="workbench.action.files.copyPathOfActiveFile",t.LABEL=o.localize(8,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.GlobalCopyPathAction=v;var g=function(e){function t(t,n,i){e.call(this,t,n),this.ipcMsg=i}return __extends(t,e),t.prototype.run=function(){return h.ipcRenderer.send(this.ipcMsg),n.TPromise.as(!0)},t}(i.Action);t.BaseOpenAction=g,t.OPEN_FILE_ID="workbench.action.files.openFile",t.OPEN_FILE_LABEL=o.localize(10,null);var y=function(e){function t(t,n){e.call(this,t,n,"vscode:openFilePicker")}return __extends(t,e),t}(g);t.OpenFileAction=y,t.OPEN_FOLDER_ID="workbench.action.files.openFolder",t.OPEN_FOLDER_LABEL=o.localize(11,null);var _=function(e){function t(t,n){e.call(this,t,n,"vscode:openFolderPicker")}return __extends(t,e),t}(g);t.OpenFolderAction=_,t.OPEN_FILE_FOLDER_ID="workbench.action.files.openFileFolder",t.OPEN_FILE_FOLDER_LABEL=o.localize(12,null);var b=function(e){function t(t,n){e.call(this,t,n,"vscode:openFileFolderPicker")}return __extends(t,e),t}(g);t.OpenFileFolderAction=b;var S=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?h.ipcRenderer.send("vscode:windowOpen",[e.getResource().fsPath],!0):this.messageService.show(c["default"].Info,o.localize(14,null)),n.TPromise.as(!0)},t.ID="workbench.action.files.showOpenedFileInNewWindow",t.LABEL=o.localize(13,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.ShowOpenedFileInNewWindow=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitEditorInputs",["require","exports","vs/base/common/lifecycle","vs/base/common/async","vs/workbench/common/editor/stringEditorInput","vs/workbench/common/editor/diffEditorInput","vs/workbench/parts/git/common/git","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){return e instanceof d||e instanceof f}var l=s.IGitService;t.isGitEditorInput=u;var d=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o),this.status=r}return __extends(t,e),t.prototype.getId=function(){throw new Error("To implement.")},t.prototype.getFileStatus=function(){return this.status},t.prototype.contains=function(e){if(this.matches(e))return!0;var t=this.getOriginalInput();if(t&&t.matches(e))return!0;var n=this.getModifiedInput();return!(!n||!n.matches(e))},t}(r.DiffEditorInput);t.GitDiffEditorInput=d;var h=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.GitWorkingTreeDiffEditorInput",t}(d);t.GitWorkingTreeDiffEditorInput=h;var p=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o,r)}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.GitIndexDiffEditorInput",t}(d);t.GitIndexDiffEditorInput=p;var f=function(e){function t(t,n,o,r,a,c,u,l,d){var h=this;e.call(this,t,n,null,o,!1,d),this.gitService=u,this.editorService=l,this.status=r,this.path=a,this.treeish=c,this.delayer=new i.ThrottledDelayer(1e3),this.toDispose=[],this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.STATE_CHANGED,function(){return h.onGitServiceStateChange()})),this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.OPERATION_END,function(){return h.onGitServiceStateChange()}))}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getFileStatus=function(){return this.status},t.prototype.resolve=function(t){var n=this;return t||!this.getValue()?this.gitService.buffer(this.path,this.treeish).then(function(i){return n.getValue()!==i&&n.setValue(i),e.prototype.resolve.call(n,t)}):e.prototype.resolve.call(this,t)},t.prototype.onGitServiceStateChange=function(){var e=this,t=this.editorService.isVisible(this,!0);t&&this.delayer.trigger(function(){return e.resolve(!0)})},t.prototype.dispose=function(){this.delayer&&(this.delayer.cancel(),this.delayer=null),this.toDispose=n.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.NativeGitIndexStringEditorInput",t=__decorate([__param(6,l),__param(7,a.IWorkbenchEditorService),__param(8,c.IInstantiationService)],t)}(o.StringEditorInput);t.NativeGitIndexStringEditorInput=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitServices",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitServices","vs/base/common/platform","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/types","vs/base/common/actions","vs/base/common/errors","vs/base/common/mime","vs/base/common/paths","vs/base/common/eventEmitter","vs/workbench/common/events","vs/workbench/parts/git/common/git","vs/workbench/parts/git/common/gitModel","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/parts/git/browser/gitOperations","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/base/common/async","vs/base/common/severity","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/platform/lifecycle/common/lifecycle","vs/base/common/uri","semver","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L){"use strict";function O(e){return i.isWindows?e.replace(/\//g,"\\"):e}var M=function(){function e(e,t,n,i,o,r){var s=this;this.instantiationService=t,this.fileService=n,this.eventService=i,this.editorService=o,this.contextService=r,this.gitService=e,this.cache={},this.toDispose=[],this.toDispose.push(this.gitService.getModel().addListener2("fileStatus:dispose",function(e){return s.onFileStatusDispose(e)}))}return e.prototype.getInput=function(e){var t=this.cache[e.getId()];return t?t:(t=this.createInput(e),this.cache[e.getId()]=t,t)},e.prototype.createInput=function(e){return o.TPromise.join([this.createLeftInput(e),this.createRightInput(e)]).then(function(t){var i,r,s=t[0],a=t[1];if(e.getStatus()===p.Status.INDEX_RENAMED){var c=e.getRename().split("/");i=c[c.length-1],r=O(c.slice(0,c.length-1).join("/"))}else{var c=e.getPathComponents();i=c[c.length-1],r=O(c.slice(0,c.length-1).join("/"))}if(!s){if(!a){var u=new Error(n.localize(0,null));return u.gitErrorCode=p.GitErrorCodes.CantOpenResource,o.Promise.wrapError(u)}return o.TPromise.as(a)}switch(e.getStatus()){case p.Status.INDEX_MODIFIED:return o.TPromise.as(new m.GitIndexDiffEditorInput(i,n.localize(1,null,r),s,a,e));case p.Status.INDEX_RENAMED:return o.TPromise.as(new m.GitIndexDiffEditorInput(i,n.localize(2,null,r),s,a,e));case p.Status.MODIFIED:return o.TPromise.as(new m.GitWorkingTreeDiffEditorInput(i,n.localize(3,null,r),s,a,e));default:return o.TPromise.as(new m.GitDiffEditorInput(i,n.localize(4,null,r),s,a,e))}}).then(function(e){return e},function(e){return o.Promise.wrapError(s.isArray(e)?e[0]||e[1]:e)})},e.prototype.createLeftInput=function(e){var t=e.getPath(),n=this.gitService.getModel();switch(e.getStatus()){case p.Status.INDEX_MODIFIED:case p.Status.INDEX_RENAMED:return this.gitService.show(t,e,"HEAD",e.getMimetype());case p.Status.MODIFIED:var i=n.getStatus().find(t,p.StatusType.INDEX);return i&&i.getStatus()===p.Status.INDEX_RENAMED?this.gitService.show(i.getRename(),e,"~",e.getMimetype()):i?this.gitService.show(t,e,"~",e.getMimetype()):this.gitService.show(t,e,"HEAD",e.getMimetype());default:return o.TPromise.as(null)}},e.prototype.createRightInput=function(e){var t=this.gitService.getModel(),n=e.getPath(),i=D["default"].file(l.join(t.getRepositoryRoot(),n));switch(e.getStatus()){case p.Status.INDEX_MODIFIED:case p.Status.INDEX_ADDED:case p.Status.INDEX_COPIED:return this.gitService.show(n,e,"~",e.getMimetype());case p.Status.INDEX_RENAMED:return this.gitService.show(e.getRename(),e,"~",e.getMimetype());case p.Status.INDEX_DELETED:case p.Status.DELETED:return this.gitService.show(n,e,"HEAD",e.getMimetype());case p.Status.MODIFIED:case p.Status.UNTRACKED:case p.Status.IGNORED:var r=t.getStatus().find(n,p.StatusType.INDEX);return r&&r.getStatus()===p.Status.INDEX_RENAMED&&(i=D["default"].file(l.join(t.getRepositoryRoot(),r.getRename()))),this.editorService.inputToType({resource:i});case p.Status.BOTH_MODIFIED:return this.editorService.inputToType({resource:i});default:return o.TPromise.as(null)}},e.prototype.onFileStatusDispose=function(e){var t=this,n=e.getId(),i=this.cache[n];i&&(i.done(function(e){t.eventuallyDispose(e)}),delete this.cache[n])},e.prototype.eventuallyDispose=function(e){var t=this;if(!this.maybeDispose(e))var n=this.eventService.addListener2(h.EventType.EDITOR_INPUT_CHANGED,function(){t.maybeDispose(e)&&n.dispose()})},e.prototype.maybeDispose=function(e){return this.editorService.getVisibleEditors().some(function(t){return t.input&&t.input.matches(e)})?!1:(e.dispose(),!0)},e.prototype.dispose=function(){var e=this;Object.keys(this.cache).forEach(function(t){e.cache[t].done(function(e){e.dispose()}),delete e.cache[t]}),this.toDispose=r.disposeAll(this.toDispose)},e=__decorate([__param(1,T.IInstantiationService),__param(2,y.IFileService),__param(3,C.IEventService),__param(4,E.IWorkbenchEditorService),__param(5,x.IWorkspaceContextService)],e)}(),P=function(){function e(t,n,i,o,r,s){var a=this;this._state=p.AutoFetcherState.Disabled,this.gitService=t,this.eventService=n,this.messageService=i,this.configurationService=r,this.instantiationService=s,this.currentRequest=null,this.timeout=e.MIN_TIMEOUT,this.toDispose=[],this.toDispose.push(this.configurationService.addListener2(w.ConfigurationServiceEventTypes.UPDATED,function(e){return a.onConfiguration(e.config.git)})),r.loadConfiguration("git").done(function(e){return a.onConfiguration(e)})}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.onConfiguration=function(e){e.autofetch===!1?this.disable():this.enable()},e.prototype.enable=function(){var e=this;this._state===p.AutoFetcherState.Disabled&&(this.gitServiceStateDisposable=this.gitService.addListener2(p.ServiceEvents.STATE_CHANGED,function(t){return e.onGitServiceStateChange(t)}),this._state=p.AutoFetcherState.Active,this.onGitServiceStateChange(this.gitService.getState()))},e.prototype.disable=function(){this.gitServiceStateDisposable&&(this.gitServiceStateDisposable.dispose(),this.gitServiceStateDisposable=null),this.deactivate(),this._state=p.AutoFetcherState.Disabled},e.prototype.onGitServiceStateChange=function(e){e===p.ServiceState.OK?this.activate():this.deactivate()},e.prototype.activate=function(){this.currentRequest&&this.currentRequest.cancel(),this._state=p.AutoFetcherState.Active,this.loop()},e.prototype.deactivate=function(){this.currentRequest&&(this._state=p.AutoFetcherState.Inactive,this.currentRequest.cancel(),this.currentRequest=null)},e.prototype.loop=function(){var t=this;this._state=p.AutoFetcherState.Fetching,this.currentRequest=this.gitService.fetch().then(function(){t.timeout=e.MIN_TIMEOUT},function(n){return c.isPromiseCanceledError(n)?o.Promise.wrapError(n):n.gitErrorCode===p.GitErrorCodes.AuthenticationFailed?o.Promise.wrapError(n):void(t.timeout=Math.min(Math.round(1.2*t.timeout),e.MAX_TIMEOUT))}),this.currentRequest.then(function(){return t._state=p.AutoFetcherState.Active,t.currentRequest=o.TPromise.timeout(t.timeout),t.currentRequest}).then(function(){return t.loop()},function(e){return t.deactivate()})},e.prototype.dispose=function(){this.disable()},e.MIN_TIMEOUT=12e4,e.MAX_TIMEOUT=3e5,e=__decorate([__param(1,C.IEventService),__param(2,k.IMessageService),__param(3,E.IWorkbenchEditorService),__param(4,w.IConfigurationService),__param(5,T.IInstantiationService)],e)}();t.AutoFetcher=P;var R=function(e){function t(t,i,o,r,s,c,u,l){e.call(this),this.serviceId=p.IGitService,this.instantiationService=i,this.eventService=o,this.messageService=r,this.editorService=s,this.outputService=c,this.contextService=u,this.lifecycleService=l,this.raw=t,this.state=p.ServiceState.NotInitialized,this.operations=[],this.model=new f.Model,this.toDispose=[],this.needsRefresh=!1,this.refreshDelayer=new _.PeriodThrottledDelayer(500,1e4),this.autoFetcher=this.instantiationService.createInstance(P,this),this.registerListeners(),this.inputCache=this.instantiationService.createInstance(M,this),this.triggerStatus(!0),this.raw.getVersion().done(function(e){e=e||"",e=e.replace(/^(\d+\.\d+\.\d+).*$/,"$1"),e=A.valid(e),e&&A.satisfies(e,"<2.0.0")&&r.show(b["default"].Warning,{message:n.localize(5,null,e),actions:[k.CancelAction,new a.Action("downloadLatest",n.localize(6,null),"",!0,function(){return L.shell.openExternal("https://git-scm.com/"),null})]})})}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)})),this.toDispose.push(this.eventService.addListener2(g.EventType.FILE_SAVED,function(t){return e.onLocalFileChange(t)})),this.toDispose.push(this.eventService.addListener2(g.EventType.FILE_REVERTED,function(t){return e.onLocalFileChange(t)})),this.lifecycleService.onShutdown(this.dispose,this)},t.prototype.triggerStatus=function(e){var t=this;if(void 0===e&&(e=!1),this.isInitialized()&&!this.isIdle()&&!e)return void this.refreshDelayer.cancel();var n=_.once(function(e){c.isPromiseCanceledError(e)||t.messageService.show(b["default"].Error,e)});this.refreshDelayer.trigger(function(){return t.status()}).done(null,n)},t.prototype.onLocalFileChange=function(e){var t=e.gotUpdated()&&".gitignore"===l.basename(e.getAfter().resource.fsPath);t&&this.triggerStatus()},t.prototype.onFileChanges=function(e){var t=this,n=this.isIdle(),i=e.changes.some(function(e){var i=t.contextService.toWorkspaceRelativePath(e.resource);return i?".git/index"===i?n:/^\.git/.test(i)?".git"===i?e.type===y.FileChangeType.ADDED||e.type===y.FileChangeType.DELETED:-1===[".git/index.lock",".git/FETCH_HEAD",".gitignore",".gitmodules"].indexOf(i):!0:!1});i&&this.triggerStatus()},t.prototype.onGitServiceOperationEnd=function(e){e.operation.id===p.ServiceOperations.COMMAND&&this.triggerStatus()},t.prototype.getState=function(){return this.state},t.prototype.getModel=function(){return this.model},t.prototype.status=function(){var e=this;return this.run(p.ServiceOperations.STATUS,function(){return e.raw.status()})},t.prototype.init=function(){var e=this;return this.run(p.ServiceOperations.INIT,function(){return e.raw.init()})},t.prototype.add=function(e){var n=this;return this.run(p.ServiceOperations.ADD,function(){return n.raw.add(t.toPaths(e))})},t.prototype.stage=function(e,t){var n=this;return this.run(p.ServiceOperations.STAGE,function(){return n.raw.stage(e,t)})},t.prototype.branch=function(e,t){var n=this;return void 0===t&&(t=!1),this.run(p.ServiceOperations.BRANCH,function(){return n.raw.branch(e,t)})},t.prototype.checkout=function(e,n){var i=this;return void 0===e&&(e=""),void 0===n&&(n=null),this.run(p.ServiceOperations.CHECKOUT,function(){return i.raw.checkout(e,t.toPaths(n))})},t.prototype.clean=function(e){var t=this;return this.run(p.ServiceOperations.CLEAN,function(){return t.raw.clean(e.map(function(e){return e.getPath()}))})},t.prototype.undo=function(){var e=this;return this.run(p.ServiceOperations.UNDO,function(){return e.raw.undo()})},t.prototype.reset=function(e,t){var n=this;return this.run(p.ServiceOperations.RESET,function(){return n.raw.reset(e,t)})},t.prototype.revertFiles=function(e,t){var n=this;return this.run(p.ServiceOperations.RESET,function(){return n.raw.revertFiles(e,(t||[]).map(function(e){return e.getPath()}))})},t.prototype.fetch=function(){var e=this;return this.run(p.ServiceOperations.BACKGROUND_FETCH,function(){return e.raw.fetch()})},t.prototype.pull=function(e){var t=this;return this.run(p.ServiceOperations.PULL,function(){return t.raw.pull(e)})},t.prototype.push=function(e,t,n){var i=this;return this.run(p.ServiceOperations.PUSH,function(){return i.raw.push(e,t,n)})},t.prototype.sync=function(e){var t=this,n=this.model.getHEAD(),i=n&&n.upstream&&!!n.ahead;return i?this.run(p.ServiceOperations.SYNC,function(){return t.raw.sync()}):this.run(p.ServiceOperations.SYNC,function(){return t.raw.pull(e)})},t.prototype.commit=function(e,t,n){var i=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.run(p.ServiceOperations.COMMIT,function(){return i.raw.commit(e,t,n)})},t.prototype.detectMimetypes=function(e,t){return void 0===t&&(t="~"),this.raw.detectMimetypes(e,t)},t.prototype.run=function(e,t){var n=this;return this.raw.serviceState().then(function(i){return i===p.RawServiceState.GitNotFound?(n.transition(p.ServiceState.NoGit),o.TPromise.as(null)):i===p.RawServiceState.Disabled?(n.transition(p.ServiceState.Disabled),o.TPromise.as(null)):n._run(e,t)})},t.prototype._run=function(e,t){var i=this,r=new v.GitOperation(e,t);this.operations.push(r),this.emit(p.ServiceEvents.OPERATION_START,r),this.emit(p.ServiceEvents.OPERATION,r);var u=function(e){void 0===e&&(e=null);var t=i.operations.indexOf(r);t>-1&&i.operations.splice(t,1);var n={operation:r,error:e};i.emit(p.ServiceEvents.OPERATION_END,n),i.onGitServiceOperationEnd(n),i.emit(p.ServiceEvents.OPERATION,r)};return r.run().then(function(e){return i.model.update(e),u(),e?i.transition(s.isUndefinedOrNull(e.state)?p.ServiceState.OK:e.state):i.transition(p.ServiceState.NotARepo),i.model},function(e){if(u(e),c.isPromiseCanceledError(e))return o.Promise.wrapError(e);var t=e.gitErrorCode||null;if(t===p.GitErrorCodes.NotAtRepositoryRoot)return i.transition(p.ServiceState.NotAtRepoRoot),o.TPromise.as(i.model);if(i.emit(p.ServiceEvents.ERROR,e),i.transition(p.ServiceState.OK),t===p.GitErrorCodes.NoUserNameConfigured||t===p.GitErrorCodes.NoUserEmailConfigured)return i.messageService.show(b["default"].Warning,n.localize(7,null)),o.TPromise.as(null);if(t===p.GitErrorCodes.BadConfigFile)return i.messageService.show(b["default"].Error,n.localize(8,null,e.message)),o.TPromise.as(null);if(t===p.GitErrorCodes.UnmergedChanges)return i.messageService.show(b["default"].Warning,n.localize(9,null)),o.TPromise.as(null);var r,s=new a.Action("show.gitOutput",n.localize(10,null),null,!0,function(){return i.outputService.showOutput("Git")}),l=new a.Action("close.message",n.localize(11,null),null,!0,function(){return o.TPromise.as(!0)});return r=c.create(n.localize(12,null),{actions:[s,l]}),r.gitErrorCode=t,o.Promise.wrapError(r)})},t.prototype.transition=function(e){var t=this.state;this.state=e,e!==t&&this.emit(p.ServiceEvents.STATE_CHANGED,e)},t.prototype.buffer=function(e,t){return void 0===t&&(t="~"),this.raw.show(e,t)},t.prototype.show=function(e,t,i,r){var s=this;return void 0===i&&(i="~"),void 0===r&&(r="text/plain"),this.detectMimetypes(e,i).then(function(r){var a,c=t.getPathComponents(),l=c[c.length-1],d=O(c.slice(0,c.length-1).join("/"));return a="~"===i?n.localize(13,null,d):n.localize(14,null,d,i),u.isUnspecific(r)&&(r=u.guessMimeTypes(e)),u.isBinaryMime(u.guessMimeTypes(e))||r.indexOf(u.MIME_BINARY)>=0?o.Promise.wrapError(new Error("The resource seems to be binary and cannot be displayed")):o.TPromise.as(s.instantiationService.createInstance(m.NativeGitIndexStringEditorInput,l,a,r.join(", "),t,e,i))})},t.prototype.getInput=function(e){var t=this;return this.inputCache.getInput(e).then(null,function(e){return(e.gitErrorCode=p.GitErrorCodes.CantOpenResource)?(t.messageService.show(b["default"].Warning,n.localize(15,null)),o.TPromise.as(null)):o.Promise.wrapError(e)})},t.prototype.isInitialized=function(){return this.state===p.ServiceState.OK},t.prototype.isIdle=function(){return this.isInitialized()&&!this.operations.some(function(e){return e.id!==p.ServiceOperations.BACKGROUND_FETCH})},t.prototype.getRunningOperations=function(){return this.operations},t.prototype.onOutput=function(){return this.raw.onOutput()},t.prototype.getAutoFetcher=function(){return this.autoFetcher},t.toPaths=function(e){return e?e.map(function(e){switch(e.getStatus()){case p.Status.MODIFIED:case p.Status.DELETED:if(e.getRename())return e.getRename();default:return e.getPath()}}):null},t.prototype.dispose=function(){this.emit(p.ServiceEvents.DISPOSE),this.model&&(this.model.dispose(),this.model=null),this.remoteListenerUnbind&&(this.remoteListenerUnbind(),this.remoteListenerUnbind=null),e.prototype.dispose.call(this)},t.ID="Monaco.IDE.UI.Services.GitService",t=__decorate([__param(1,T.IInstantiationService),__param(2,C.IEventService),__param(3,k.IMessageService),__param(4,E.IWorkbenchEditorService),__param(5,S.IOutputService),__param(6,x.IWorkspaceContextService),__param(7,I.ILifecycleService)],t)}(d.EventEmitter);t.GitService=R});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/electron-browser/electronGitService",["require","exports","vs/base/common/winjs.base","vs/workbench/parts/git/common/git","vs/workbench/parts/git/common/noopGitService","vs/workbench/parts/git/browser/gitServices","vs/platform/lifecycle/common/lifecycle","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/base/node/service.cp","vs/workbench/parts/git/node/rawGitService","vs/base/common/uri","child_process","path","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";function b(e){return e.replace(/^git version /,"")}function S(e){return new n.TPromise(function(t,n){var i=[],o=g.spawn(e,["--version"]);o.stdout.on("data",function(e){return i.push(e)}),o.on("error",n),o.on("exit",function(o){return o?n(new Error("Not found")):t({path:e,version:b(Buffer.concat(i).toString("utf8").trim())})})})}function E(){return new n.TPromise(function(e,t){g.exec("which git",function(n,i){function o(n){g.exec("git --version",function(i,o){return i?t("git not found"):e({path:n,version:b(o.toString("utf8").trim())})})}if(n)return t("git not found");var r=i.toString().replace(/^\s+|\s+$/g,"");return"/usr/bin/git"!==r?o(r):void g.exec("xcode-select -p",function(e){return e&&2===e.code?t("git not found"):void o(r)})})})}function w(e){return e?S(y.join(e,"Git","cmd","git.exe")):n.TPromise.wrapError("Not found")}function C(){return w(process.env.ProgramW6432).then(null,function(){return w(process.env["ProgramFiles(x86)"])}).then(null,function(){return w(process.env.ProgramFiles)}).then(null,function(){return S("git")})}function T(e){var t=e?S(e):n.TPromise.wrapError(null);return t.then(null,function(){switch(process.platform){case"darwin":return E();case"win32":return C();default:return S("git")}})}function k(t,n,i){return T(n).then(function(n){var o=n.path,r=n.version,s=new f.Client(v["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Git",timeout:6e4,args:[o,t,i,_.remote.process.execPath,r],env:{ATOM_SHELL_INTERNAL_RUN_AS_NODE:1,AMD_ENTRYPOINT:"vs/workbench/parts/git/electron-browser/gitApp"}});return s.getService("GitService",m.RawGitService)},function(){return new x})}var x=function(e){function t(){e.call(this,null)}return __extends(t,e),t}(m.RawGitService),I=function(e){function t(){e.call(this,null)}return __extends(t,e),t.prototype.serviceState=function(){return n.TPromise.as(i.RawServiceState.Disabled)},t}(m.RawGitService),D=function(e){function t(t,i){e.call(this,i.loadConfiguration().then(function(e){var i=e.git?e.git.enabled:!0;if(!i)return n.TPromise.as(new I);var o=e.git&&e.git.path||null,r=e.files&&e.files.encoding||"utf8";return k(t,o,r)}))}return __extends(t,e),t=__decorate([__param(1,u.IConfigurationService)],t)}(m.DelayedRawGitService),A=function(e){function t(t,n,i,r,s,a,c){var u=a.getWorkspace(),l=u?t.createInstance(D,u.resource.fsPath):new o.NoOpGitService;e.call(this,l,t,n,i,r,s,a,c)}return __extends(t,e),t=__decorate([__param(0,d.IInstantiationService),__param(1,l.IEventService),__param(2,h.IMessageService),__param(3,c.IWorkbenchEditorService),__param(4,a.IOutputService),__param(5,p.IWorkspaceContextService),__param(6,s.ILifecycleService)],t)}(r.GitService);t.ElectronGitService=A}),define("vs/workbench/services/files/node/watcher/common",["require","exports","vs/base/common/uri","vs/base/common/paths","vs/platform/files/common/files"],function(e,t,n,i,o){"use strict";function r(e){return new o.FileChangesEvent(e.map(function(e){return{type:e.type,resource:n["default"].file(e.path)}}))}function s(e){for(var t=new a,n=0;n<e.length;n++){var i=e[n];t.processEvent(i)}return t.normalize()}t.toFileChangesEvent=r,t.normalize=s;var a=function(){function e(){this.normalized=[],this.mapPathToChange=Object.create(null)}return e.prototype.processEvent=function(e){var t=this.mapPathToChange[e.path];if(t){var n=t.type,i=e.type;n===o.FileChangeType.ADDED&&i===o.FileChangeType.DELETED?(delete this.mapPathToChange[e.path],this.normalized.splice(this.normalized.indexOf(t),1)):n===o.FileChangeType.DELETED&&i===o.FileChangeType.ADDED?t.type=o.FileChangeType.UPDATED:n===o.FileChangeType.ADDED&&i===o.FileChangeType.UPDATED||(t.type=i)}else this.normalized.push(e),this.mapPathToChange[e.path]=e},e.prototype.normalize=function(){var e=this,t=[],n=[];return this.normalized.filter(function(e){return 2!==e.type?(t.push(e),!1):!0}).sort(function(e,t){return e.path.length-t.path.length}).filter(function(t){return n.some(function(n){return e.isParent(t.path,n)})?!1:(n.push(t.path),!0)}).concat(t)},e.prototype.isParent=function(e,t){return 0===e.indexOf(t+i.nativeSep)},e}()}),define("vs/workbench/services/files/node/watcher/unix/watcherService",["require","exports","vs/base/common/winjs.base","vs/base/node/service.cp","vs/base/common/uri","vs/platform/files/common/files","vs/workbench/services/files/node/watcher/common"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(){}return e.prototype.watch=function(e){throw new Error("not implemented")},e}();t.WatcherService=a;var c=function(){function t(e,t,n,i,o){this.basePath=e,this.ignored=t,this.eventEmitter=n,this.errorLogger=i,this.verboseLogging=o,this.isDisposed=!1,this.restartCounter=0}return t.prototype.startWatching=function(){var r=this,s=new i.Client(o["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Watcher",args:["--type=watcherService"],env:{AMD_ENTRYPOINT:"vs/workbench/services/files/node/watcher/unix/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:this.verboseLogging}}),c=s.getService("WatcherService",a);return c.watch({basePath:this.basePath,ignored:this.ignored,verboseLogging:this.verboseLogging}).then(null,function(e){return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message?void 0:n.TPromise.wrapError(e)},function(e){return r.onRawFileEvents(e)}).done(function(){r.isDisposed||(r.restartCounter<=t.MAX_RESTARTS?(r.errorLogger("Watcher terminated unexpectedly and is restarted again..."),r.restartCounter++,r.startWatching()):r.errorLogger("Watcher failed to start after retrying for some time, giving up. Please report this as a bug report!"))},this.errorLogger),function(){s.dispose(),r.isDisposed=!0}},t.prototype.onRawFileEvents=function(e){e.length>0&&this.eventEmitter.emit(r.EventType.FILE_CHANGES,s.toFileChangesEvent(e))},t.MAX_RESTARTS=5,t}();t.FileWatcher=c}),define("vs/workbench/services/files/node/watcher/win32/csharpWatcherService",["require","exports","child_process","vs/platform/files/common/files","vs/base/node/decoder","vs/base/common/glob","vs/base/common/uri"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function t(e,t,n,i,o){this.watchedFolder=e,this.ignored=t,this.eventCallback=i,this.errorLogger=n,this.verboseLogging=o,this.startWatcher()}return t.prototype.startWatcher=function(){var i=this,a=[this.watchedFolder];this.verboseLogging&&a.push("-verbose"),this.handle=n.spawn(s["default"].parse(e.toUrl("vs/workbench/services/files/node/watcher/win32/CodeHelper.exe")).fsPath,a);var c=new o.LineDecoder;this.handle.stdout.on("data",function(e){var n=[];c.write(e).forEach(function(e){var o=e.split("|");if(2===o.length){var s=Number(o[0]),a=o[1];if(s>=0&&3>s){if(i.ignored&&i.ignored.some(function(e){return r.match(e,a)}))return;n.push({type:t.changeTypeMap[s],path:a})}else console.log("%c[File Watcher]","color: darkgreen",o[1])}}),n.length>0&&i.eventCallback(n)}),this.handle.on("error",function(e){return i.onError(e)}),this.handle.stderr.on("data",function(e){return i.onError(e)}),this.handle.on("exit",function(e,t){return i.onExit(e,t)})},t.prototype.onError=function(e){this.errorLogger("[FileWatcher] process error: "+e.toString())},t.prototype.onExit=function(e,t){this.handle&&(this.errorLogger("[FileWatcher] terminated unexpectedly (code: "+e+", signal: "+t+")"),
this.startWatcher())},t.prototype.dispose=function(){this.handle&&(this.handle.kill(),this.handle=null)},t.changeTypeMap=[i.FileChangeType.UPDATED,i.FileChangeType.ADDED,i.FileChangeType.DELETED],t}();t.OutOfProcessWin32FolderWatcher=a}),define("vs/workbench/services/files/node/watcher/win32/watcherService",["require","exports","vs/platform/files/common/files","vs/workbench/services/files/node/watcher/common","vs/workbench/services/files/node/watcher/win32/csharpWatcherService"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n,i,o){this.basePath=e,this.ignored=t,this.errorLogger=i,this.verboseLogging=o,this.eventEmitter=n}return e.prototype.startWatching=function(){var e=this,t=new o.OutOfProcessWin32FolderWatcher(this.basePath,this.ignored,this.errorLogger,function(t){return e.onRawFileEvents(t)},this.verboseLogging);return function(){return t.dispose()}},e.prototype.onRawFileEvents=function(e){e.length>0&&this.eventEmitter.emit(n.EventType.FILE_CHANGES,i.toFileChangesEvent(e))},e}();t.FileWatcher=r}),define("vs/workbench/services/files/node/fileService",["require","exports","path","fs","os","crypto","assert","vs/platform/files/common/files","vs/base/common/strings","vs/base/common/arrays","vs/base/common/mime","vs/base/common/paths","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/objects","vs/base/node/extfs","vs/base/common/async","vs/base/common/uri","vs/nls!vs/workbench/services/files/node/fileService","vs/base/node/pfs","vs/base/node/encoding","vs/base/node/mime","vs/base/node/flow","vs/workbench/services/files/node/watcher/unix/watcherService","vs/workbench/services/files/node/watcher/win32/watcherService","vs/workbench/services/files/node/watcher/common"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T){"use strict";function k(e,t){var n,i;return"number"==typeof t?(n=e,i=t):(n=e.size,i=e.mtime.getTime()),'"'+r.createHash("sha1").update(String(n)+String(i)).digest("hex")+'"'}var x=function(){function e(t,i,r){if(this.serviceId=a.IFileService,this.basePath=t?n.normalize(t):void 0,this.basePath&&0===this.basePath.indexOf("\\\\")&&c.endsWith(this.basePath,n.sep)&&(this.basePath=c.rtrim(this.basePath,n.sep)),this.basePath&&!n.isAbsolute(t))throw new Error("basePath has to be an absolute path");this.options=r||Object.create(null),this.eventEmitter=i,this.tmpPath=this.options.tmpDir||o.tmpdir(),this.options&&!this.options.errorLogger&&(this.options.errorLogger=console.error),this.basePath&&!this.options.disableWatcher&&("win32"===process.platform?this.setupWin32WorkspaceWatching():this.setupUnixWorkspaceWatching()),this.activeFileChangesWatchers=Object.create(null),this.fileChangesWatchDelayer=new v.ThrottledDelayer(e.FS_EVENT_DELAY),this.undeliveredRawFileChangesEvents=[]}return e.prototype.updateOptions=function(e){e&&f.mixin(this.options,e)},e.prototype.setupWin32WorkspaceWatching=function(){this.workspaceWatcherToDispose=new C.FileWatcher(this.basePath,this.options.watcherIgnoredPatterns,this.eventEmitter,this.options.errorLogger,this.options.verboseLogging).startWatching()},e.prototype.setupUnixWorkspaceWatching=function(){this.workspaceWatcherToDispose=new w.FileWatcher(this.basePath,this.options.watcherIgnoredPatterns,this.eventEmitter,this.options.errorLogger,this.options.verboseLogging).startWatching()},e.prototype.resolveFile=function(e,t){return this.resolve(e,t)},e.prototype.resolveContent=function(e,t){var n=this,i=this.toAbsolutePath(e);return v.nfcall(S.detectMimesFromFile,i).then(function(i){var o=-1===i.mimes.indexOf(l.MIME_BINARY);if(t&&t.acceptTextOnly&&!o)return h.TPromise.wrapError({message:y.localize(0,null),fileOperationResult:a.FileOperationResult.FILE_IS_BINARY});var r;return t&&t.encoding?r=i.encoding===b.UTF8&&t.encoding===b.UTF8?b.UTF8_with_bom:t.encoding:i.encoding?r=i.encoding===b.UTF8?b.UTF8_with_bom:i.encoding:n.options.encoding===b.UTF8_with_bom&&(r=b.UTF8),n.resolveFileContent(e,t&&t.etag,r).then(function(e){return e.mime=i.mimes.join(", "),e})},function(e){return p.isUndefinedOrNull(e.fileOperationResult)?_.exists(i).then(function(t){return t?_.stat(i).then(function(t){return t.isDirectory()?h.TPromise.wrapError({message:y.localize(2,null,i),fileOperationResult:a.FileOperationResult.FILE_IS_DIRECTORY}):h.TPromise.wrapError(e)}):h.TPromise.wrapError({message:y.localize(1,null,i),fileOperationResult:a.FileOperationResult.FILE_NOT_FOUND})}):h.TPromise.wrapError(e)})},e.prototype.resolveContents=function(t){var n=this,i=new v.Limiter(e.MAX_DEGREE_OF_PARALLEL_FS_OPS),o=[];return t.forEach(function(e){o.push(i.queue(function(){return n.resolveFileContent(e).then(function(e){return e},function(e){return h.TPromise.as(null)})}))}),h.TPromise.join(o).then(function(e){return u.coalesce(e)})},e.prototype.updateContent=function(e,t,i){var o=this;void 0===i&&(i=Object.create(null));var r=this.toAbsolutePath(e);return this.checkFile(r,i).then(function(s){var a;return a=s?h.TPromise.as(null):_.mkdirp(n.dirname(r)),a.then(function(){var n=o.getEncoding(e,i.encoding),a=h.TPromise.as(!1);return n===b.UTF16be||n===b.UTF16le||n===b.UTF8_with_bom?a=h.TPromise.as(!0):s&&n===b.UTF8&&(a=i.overwriteEncoding?h.TPromise.as(!1):v.nfcall(b.detectEncodingByBOM,r).then(function(e){return e===b.UTF8})),a.then(function(i){var s;if(i||n!==b.UTF8){var a=b.encode(t,n,{addBOM:i});s=_.writeFile(r,a)}else s=_.writeFile(r,t,b.UTF8);return s.then(function(){return o.resolve(e)})})})})},e.prototype.createFile=function(e,t){return void 0===t&&(t=""),this.updateContent(e,t)},e.prototype.createFolder=function(e){var t=this,n=this.toAbsolutePath(e);return _.mkdirp(n).then(function(){return t.resolve(e)})},e.prototype.rename=function(e,t){var i=n.join(n.dirname(e.fsPath),t);return this.moveFile(e,g["default"].file(i))},e.prototype.moveFile=function(e,t,n){return this.moveOrCopyFile(e,t,!1,n)},e.prototype.copyFile=function(e,t,n){return this.moveOrCopyFile(e,t,!0,n)},e.prototype.moveOrCopyFile=function(e,t,n,i){var o=this,r=this.toAbsolutePath(e),s=this.toAbsolutePath(t);return this.doMoveOrCopyFile(r,s,n,i).then(function(){return o.resolve(t)})},e.prototype.doMoveOrCopyFile=function(e,t,i,o){var r=this;return _.exists(t).then(function(s){var c=e.toLowerCase()===t.toLowerCase();if(s&&!c&&!o)return h.TPromise.wrapError({fileOperationResult:a.FileOperationResult.FILE_MOVE_CONFLICT});var u=h.TPromise.as(null);if(s&&!c){if(d.isEqualOrParent(e,t))return h.TPromise.wrapError(y.localize(3,null));u=r.del(g["default"].file(t))}return u.then(function(){return _.mkdirp(n.dirname(t)).then(function(){return i?v.nfcall(m.copy,e,t):v.nfcall(m.mv,e,t)}).then(function(){return s})})})},e.prototype.importFile=function(e,t){var i=this,o=this.toAbsolutePath(e),r=g["default"].file(n.join(t.fsPath,n.basename(e.fsPath))),s=this.toAbsolutePath(r);return _.stat(o).then(function(e){return e.isDirectory()?h.TPromise.wrapError(y.localize(4,null)):i.doMoveOrCopyFile(o,s,!0,!0).then(function(e){return i.resolve(r).then(function(t){return{isNew:!e,stat:t}})})})},e.prototype.del=function(e){var t=this.toAbsolutePath(e);return v.nfcall(m.del,t,this.tmpPath)},e.prototype.toAbsolutePath=function(e){var t;return t=e instanceof g["default"]?e:e.resource,s.ok(t&&"file"===t.scheme,"Invalid resource: "+t),n.normalize(t.fsPath)},e.prototype.resolve=function(e,t){return void 0===t&&(t=Object.create(null)),this.toStatResolver(e).then(function(e){return e.resolve(t)})},e.prototype.toStatResolver=function(e){var t=this,n=this.toAbsolutePath(e);return _.stat(n).then(function(n){return new I(e,n.isDirectory(),n.mtime.getTime(),n.size,t.options.verboseLogging)})},e.prototype.resolveFileContent=function(e,t,n){var o=this,r=this.toAbsolutePath(e);return this.resolve(e).then(function(e){return t&&t===e.etag?h.TPromise.wrapError({fileOperationResult:a.FileOperationResult.FILE_NOT_MODIFIED_SINCE}):p.isNumber(e.size)&&e.size>a.MAX_FILE_SIZE?h.TPromise.wrapError({fileOperationResult:a.FileOperationResult.FILE_TOO_LARGE}):new h.TPromise(function(t,s){var a=!1,c=[],u=o.getEncoding(e.resource,n),l=i.createReadStream(r).pipe(b.decodeStream(u));l.on("data",function(e){c.push(e)}),l.on("error",function(e){a||(a=!0,s(e))}),l.on("end",function(){var n=e;n.value=c.join(""),n.encoding=u,a||(a=!0,t(n))})})})},e.prototype.getEncoding=function(e,t){var n,i=this.getEncodingOverride(e);return n=i?i:t?t:this.options.encoding,n&&b.encodingExists(n)||(n=b.UTF8),n},e.prototype.getEncodingOverride=function(e){if(e&&this.options.encodingOverride&&this.options.encodingOverride.length)for(var t=0;t<this.options.encodingOverride.length;t++){var n=this.options.encodingOverride[t];if(0===e.toString().indexOf(n.resource.toString()+"/"))return n.encoding}return null},e.prototype.checkFile=function(e,t){return _.exists(e).then(function(n){return n?_.stat(e).then(function(i){if(i.isDirectory())return h.TPromise.wrapError(new Error("Expected file is actually a directory"));if("number"==typeof t.mtime&&"string"==typeof t.etag&&t.mtime<i.mtime.getTime()&&t.etag!==k(i.size,t.mtime))return h.TPromise.wrapError({message:"File Modified Since",fileOperationResult:a.FileOperationResult.FILE_MODIFIED_SINCE});var o=i.mode,r=!(128&o);return r&&!t.overwriteReadonly?h.TPromise.wrapError({message:y.localize(5,null),fileOperationResult:a.FileOperationResult.FILE_READ_ONLY}):r?(o=128|o,_.chmod(e,o).then(function(){return n})):h.TPromise.as(n)}):h.TPromise.as(n)})},e.prototype.watchFileChanges=function(e){var t=this;s.ok(e&&"file"===e.scheme,"Invalid resource for watching: "+e);var n=e.fsPath,o=this.activeFileChangesWatchers[e.toString()];if(!o){try{o=i.watch(n)}catch(r){return}this.activeFileChangesWatchers[e.toString()]=o,o.on("change",function(e){"change"===e&&(t.undeliveredRawFileChangesEvents.push({type:a.FileChangeType.UPDATED,path:n}),t.fileChangesWatchDelayer.trigger(function(){var e=t.undeliveredRawFileChangesEvents;t.undeliveredRawFileChangesEvents=[];var n=T.normalize(e);return t.eventEmitter.emit(a.EventType.FILE_CHANGES,T.toFileChangesEvent(n)),h.TPromise.as(null)}))})}},e.prototype.unwatchFileChanges=function(e){var t="string"==typeof e?g["default"].parse(e):e,n=this.activeFileChangesWatchers[t.toString()];n&&(n.close(),delete this.activeFileChangesWatchers[t.toString()])},e.prototype.dispose=function(){this.workspaceWatcherToDispose&&(this.workspaceWatcherToDispose(),this.workspaceWatcherToDispose=null);for(var e in this.activeFileChangesWatchers){var t=this.activeFileChangesWatchers[e];t.close()}this.activeFileChangesWatchers=Object.create(null)},e.FS_EVENT_DELAY=50,e.MAX_DEGREE_OF_PARALLEL_FS_OPS=10,e}();t.FileService=x;var I=function(){function e(e,t,i,o,r){s.ok(e&&"file"===e.scheme,"Invalid resource: "+e),this.resource=e,this.isDirectory=t,this.mtime=i,this.name=n.basename(e.fsPath),this.mime=this.isDirectory?null:l.guessMimeTypes(e.fsPath).join(", "),this.etag=k(o,i),this.size=o,this.verboseLogging=r}return e.prototype.resolve=function(e){var t=this,n={resource:this.resource,isDirectory:this.isDirectory,hasChildren:void 0,name:this.name,etag:this.etag,size:this.size,mtime:this.mtime,mime:this.mime};if(this.isDirectory){var i=null;return e&&e.resolveTo&&(i=[],e.resolveTo.forEach(function(e){i.push(e.fsPath)})),new h.TPromise(function(o,r){t.resolveChildren(t.resource.fsPath,i,e&&e.resolveSingleChildDescendants,function(e){e=u.coalesce(e),n.hasChildren=e&&e.length>0,n.children=e||[],o(n)})})}return h.TPromise.as(n)},e.prototype.resolveChildren=function(e,t,o,r){var s=this;m.readdir(e,function(a,c){return a?(s.verboseLogging&&console.error(a),r(null)):void E.parallel(c,function(r,a){var h,p=g["default"].file(n.resolve(e,r)),f=s;E.sequence(function(e){f.verboseLogging&&console.error(e),a(null,null)},function(){i.stat(p.fsPath,this)},function(e){var t=this;h=e,h.isDirectory()?m.readdir(p.fsPath,function(e,n){t(null,n?n.length:0)}):this(null,0)},function(e){var n={resource:p,isDirectory:h.isDirectory(),hasChildren:e>0,name:r,mtime:h.mtime.getTime(),etag:k(h),size:h.size,mime:h.isDirectory()?void 0:l.guessMimeTypes(p.fsPath).join(", ")};if(!h.isDirectory())return a(null,n);var i=!1;1===c.length&&o?i=!0:e>0&&t&&t.some(function(e){return d.isEqualOrParent(e,p.fsPath)})&&(i=!0),i?f.resolveChildren(p.fsPath,t,o,function(e){e=u.coalesce(e),n.hasChildren=e&&e.length>0,n.children=e||[],a(null,n)}):a(null,n)})},function(e,t){r(t)})})},e}();t.StatResolver=I}),define("vs/workbench/services/files/electron-browser/fileService",["require","exports","vs/nls!vs/workbench/services/files/electron-browser/fileService","vs/base/common/winjs.base","vs/base/common/paths","vs/base/node/encoding","vs/base/common/errors","vs/base/common/strings","vs/base/common/uri","vs/base/common/timer","vs/platform/files/common/files","vs/workbench/services/files/node/fileService","vs/platform/configuration/common/configuration","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(){function e(e,t,n){var i=this;this.configurationService=e,this.eventService=t,this.contextService=n,this.serviceId=l.IFileService,this.raw=this.configurationService.loadConfiguration().then(function(e){var t=[];t.push({resource:c["default"].file(i.contextService.getConfiguration().env.appSettingsHome),encoding:r.UTF8}),i.contextService.getWorkspace()&&t.push({resource:c["default"].file(o.join(i.contextService.getWorkspace().resource.fsPath,".vscode")),encoding:r.UTF8});var n=[];e.files&&e.files.watcherExclude&&(n=Object.keys(e.files.watcherExclude).filter(function(t){return!!e.files.watcherExclude[t]}));var a={errorLogger:function(e){return s.onUnexpectedError(e)},encoding:e.files&&e.files.encoding,encodingOverride:t,watcherIgnoredPatterns:n,verboseLogging:i.contextService.getConfiguration().env.verboseLogging},u=i.contextService.getWorkspace();return new d.FileService(u?u.resource.fsPath:void 0,i.eventService,a)}),this.raw.done(function(e){i.registerListeners()},s.onUnexpectedError)}return e.prototype.registerListeners=function(){var e=this;this.configurationChangeListenerUnbind=this.configurationService.addListener(h.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)})},e.prototype.onConfigurationChange=function(e){this.updateOptions(e.files)},e.prototype.updateOptions=function(e){this.raw.done(function(t){t.updateOptions(e)},s.onUnexpectedError)},e.prototype.resolveFile=function(e,t){return this.raw.then(function(n){return n.resolveFile(e,t)})},e.prototype.resolveContent=function(e,t){var n=e.toString(),i=u.start(u.Topic.WORKBENCH,a.format("Load {0}",n));return this.raw.then(function(n){return n.resolveContent(e,t).then(function(e){return i.stop(),e})})},e.prototype.resolveContents=function(e){return this.raw.then(function(t){return t.resolveContents(e)})},e.prototype.updateContent=function(e,t,n){var o=u.start(u.Topic.WORKBENCH,a.format("Save {0}",e.toString()));return this.raw.then(function(r){return r.updateContent(e,t,n).then(function(e){return o.stop(),e},function(e){return o.stop(),i.TPromise.wrapError(e)})})},e.prototype.moveFile=function(e,t,n){return this.raw.then(function(i){return i.moveFile(e,t,n)})},e.prototype.copyFile=function(e,t,n){return this.raw.then(function(i){return i.copyFile(e,t,n)})},e.prototype.createFile=function(e,t){return this.raw.then(function(n){return n.createFile(e,t)})},e.prototype.createFolder=function(e){return this.raw.then(function(t){return t.createFolder(e)})},e.prototype.rename=function(e,t){return this.raw.then(function(n){return n.rename(e,t)})},e.prototype.del=function(e,t){return t?this.doMoveItemToTrash(e):this.raw.then(function(t){return t.del(e)})},e.prototype.doMoveItemToTrash=function(e){var t=this.contextService.getWorkspace();if(!t)return i.TPromise.wrapError("Need a workspace to use this");var r=e.fsPath,s=p.shell.moveItemToTrash(r);return s?i.TPromise.as(null):i.TPromise.wrapError(new Error(n.localize(0,null,o.basename(r))))},e.prototype.importFile=function(e,t){return this.raw.then(function(n){return n.importFile(e,t).then(function(e){return{isNew:e&&e.isNew,stat:e&&e.stat}})})},e.prototype.watchFileChanges=function(e){e&&"file"===e.scheme&&(this.contextService.isInsideWorkspace(e)||this.raw.then(function(t){t.watchFileChanges(e)}))},e.prototype.unwatchFileChanges=function(e){this.raw.then(function(t){t.unwatchFileChanges(e)})},e.prototype.dispose=function(){this.configurationChangeListenerUnbind&&(this.configurationChangeListenerUnbind(),this.configurationChangeListenerUnbind=null),this.raw.done(function(e){return e.dispose()})},e}();t.FileService=f}),define("vs/workbench/services/history/common/history",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IHistoryService=n.createDecorator("historyService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/keybinding/electron-browser/nativeKeymap",["require","exports","native-keymap","vs/base/common/keyCodes","vs/base/browser/keyboardEvent","vs/base/common/platform"],function(e,t,n,i,o,r){"use strict";function s(){if(!m){var e=c();m=new b(e)}return m}function a(){if(!v){var e=c();v=r.isMacintosh?new y(e):new _(e)}return v}function c(){if(!g){var e={VKEY_OEM_1:!0,VKEY_OEM_PLUS:!0,VKEY_OEM_COMMA:!0,VKEY_OEM_MINUS:!0,VKEY_OEM_PERIOD:!0,VKEY_OEM_2:!0,VKEY_OEM_3:!0,VKEY_OEM_4:!0,VKEY_OEM_5:!0,VKEY_OEM_6:!0,VKEY_OEM_7:!0,VKEY_OEM_8:!0,VKEY_OEM_102:!0};g=[];for(var t=0,n=i.KeyCode.MAX_VALUE;n>t;t++)g[t]=null;for(var o=u(),r=!1,t=0,n=o.length;n>t;t++){var s=o[t];if(e[s.key_code]){var a=s.value||s.withShift;a.length>0&&(r=!0,g[l[s.key_code]]=a)}}if(r)for(var c in e)if(e.hasOwnProperty(c)){var d=l[c];g[d]=g[d]||""}}return g}var u=function(){var e,t=!1;return function(){return t||(t=!0,e=n.getKeyMap()),e}}(),l={VKEY_BACK:i.KeyCode.Backspace,VKEY_TAB:i.KeyCode.Tab,VKEY_CLEAR:i.KeyCode.Unknown,VKEY_RETURN:i.KeyCode.Enter,VKEY_SHIFT:i.KeyCode.Shift,VKEY_CONTROL:i.KeyCode.Ctrl,VKEY_MENU:i.KeyCode.Alt,VKEY_PAUSE:i.KeyCode.PauseBreak,VKEY_CAPITAL:i.KeyCode.CapsLock,VKEY_KANA:i.KeyCode.Unknown,VKEY_HANGUL:i.KeyCode.Unknown,VKEY_JUNJA:i.KeyCode.Unknown,VKEY_FINAL:i.KeyCode.Unknown,VKEY_HANJA:i.KeyCode.Unknown,VKEY_KANJI:i.KeyCode.Unknown,VKEY_ESCAPE:i.KeyCode.Escape,VKEY_CONVERT:i.KeyCode.Unknown,VKEY_NONCONVERT:i.KeyCode.Unknown,VKEY_ACCEPT:i.KeyCode.Unknown,VKEY_MODECHANGE:i.KeyCode.Unknown,VKEY_SPACE:i.KeyCode.Space,VKEY_PRIOR:i.KeyCode.PageUp,VKEY_NEXT:i.KeyCode.PageDown,VKEY_END:i.KeyCode.End,VKEY_HOME:i.KeyCode.Home,VKEY_LEFT:i.KeyCode.LeftArrow,VKEY_UP:i.KeyCode.UpArrow,VKEY_RIGHT:i.KeyCode.RightArrow,VKEY_DOWN:i.KeyCode.DownArrow,VKEY_SELECT:i.KeyCode.Unknown,VKEY_PRINT:i.KeyCode.Unknown,VKEY_EXECUTE:i.KeyCode.Unknown,VKEY_SNAPSHOT:i.KeyCode.Unknown,VKEY_INSERT:i.KeyCode.Insert,VKEY_DELETE:i.KeyCode.Delete,VKEY_HELP:i.KeyCode.Unknown,VKEY_0:i.KeyCode.KEY_0,VKEY_1:i.KeyCode.KEY_1,VKEY_2:i.KeyCode.KEY_2,VKEY_3:i.KeyCode.KEY_3,VKEY_4:i.KeyCode.KEY_4,VKEY_5:i.KeyCode.KEY_5,VKEY_6:i.KeyCode.KEY_6,VKEY_7:i.KeyCode.KEY_7,VKEY_8:i.KeyCode.KEY_8,VKEY_9:i.KeyCode.KEY_9,VKEY_A:i.KeyCode.KEY_A,VKEY_B:i.KeyCode.KEY_B,VKEY_C:i.KeyCode.KEY_C,VKEY_D:i.KeyCode.KEY_D,VKEY_E:i.KeyCode.KEY_E,VKEY_F:i.KeyCode.KEY_F,VKEY_G:i.KeyCode.KEY_G,VKEY_H:i.KeyCode.KEY_H,VKEY_I:i.KeyCode.KEY_I,VKEY_J:i.KeyCode.KEY_J,VKEY_K:i.KeyCode.KEY_K,VKEY_L:i.KeyCode.KEY_L,VKEY_M:i.KeyCode.KEY_M,VKEY_N:i.KeyCode.KEY_N,VKEY_O:i.KeyCode.KEY_O,VKEY_P:i.KeyCode.KEY_P,VKEY_Q:i.KeyCode.KEY_Q,VKEY_R:i.KeyCode.KEY_R,VKEY_S:i.KeyCode.KEY_S,VKEY_T:i.KeyCode.KEY_T,VKEY_U:i.KeyCode.KEY_U,VKEY_V:i.KeyCode.KEY_V,VKEY_W:i.KeyCode.KEY_W,VKEY_X:i.KeyCode.KEY_X,VKEY_Y:i.KeyCode.KEY_Y,VKEY_Z:i.KeyCode.KEY_Z,VKEY_LWIN:i.KeyCode.Meta,VKEY_COMMAND:i.KeyCode.Meta,VKEY_RWIN:i.KeyCode.Meta,VKEY_APPS:i.KeyCode.Unknown,VKEY_SLEEP:i.KeyCode.Unknown,VKEY_NUMPAD0:i.KeyCode.NUMPAD_0,VKEY_NUMPAD1:i.KeyCode.NUMPAD_1,VKEY_NUMPAD2:i.KeyCode.NUMPAD_2,VKEY_NUMPAD3:i.KeyCode.NUMPAD_3,VKEY_NUMPAD4:i.KeyCode.NUMPAD_4,VKEY_NUMPAD5:i.KeyCode.NUMPAD_5,VKEY_NUMPAD6:i.KeyCode.NUMPAD_6,VKEY_NUMPAD7:i.KeyCode.NUMPAD_7,VKEY_NUMPAD8:i.KeyCode.NUMPAD_8,VKEY_NUMPAD9:i.KeyCode.NUMPAD_9,VKEY_MULTIPLY:i.KeyCode.NUMPAD_MULTIPLY,VKEY_ADD:i.KeyCode.NUMPAD_ADD,VKEY_SEPARATOR:i.KeyCode.NUMPAD_SEPARATOR,VKEY_SUBTRACT:i.KeyCode.NUMPAD_SUBTRACT,VKEY_DECIMAL:i.KeyCode.NUMPAD_DECIMAL,VKEY_DIVIDE:i.KeyCode.NUMPAD_DIVIDE,VKEY_F1:i.KeyCode.F1,VKEY_F2:i.KeyCode.F2,VKEY_F3:i.KeyCode.F3,VKEY_F4:i.KeyCode.F4,VKEY_F5:i.KeyCode.F5,VKEY_F6:i.KeyCode.F6,VKEY_F7:i.KeyCode.F7,VKEY_F8:i.KeyCode.F8,VKEY_F9:i.KeyCode.F9,VKEY_F10:i.KeyCode.F10,VKEY_F11:i.KeyCode.F11,VKEY_F12:i.KeyCode.F12,VKEY_F13:i.KeyCode.F13,VKEY_F14:i.KeyCode.F14,VKEY_F15:i.KeyCode.F15,VKEY_F16:i.KeyCode.F16,VKEY_F17:i.KeyCode.F17,VKEY_F18:i.KeyCode.F18,VKEY_F19:i.KeyCode.F19,VKEY_F20:i.KeyCode.Unknown,VKEY_F21:i.KeyCode.Unknown,VKEY_F22:i.KeyCode.Unknown,VKEY_F23:i.KeyCode.Unknown,VKEY_F24:i.KeyCode.Unknown,VKEY_NUMLOCK:i.KeyCode.NumLock,VKEY_SCROLL:i.KeyCode.ScrollLock,VKEY_LSHIFT:i.KeyCode.Shift,VKEY_RSHIFT:i.KeyCode.Shift,VKEY_LCONTROL:i.KeyCode.Ctrl,VKEY_RCONTROL:i.KeyCode.Ctrl,VKEY_LMENU:i.KeyCode.Unknown,VKEY_RMENU:i.KeyCode.Unknown,VKEY_BROWSER_BACK:i.KeyCode.Unknown,VKEY_BROWSER_FORWARD:i.KeyCode.Unknown,VKEY_BROWSER_REFRESH:i.KeyCode.Unknown,VKEY_BROWSER_STOP:i.KeyCode.Unknown,VKEY_BROWSER_SEARCH:i.KeyCode.Unknown,VKEY_BROWSER_FAVORITES:i.KeyCode.Unknown,VKEY_BROWSER_HOME:i.KeyCode.Unknown,VKEY_VOLUME_MUTE:i.KeyCode.Unknown,VKEY_VOLUME_DOWN:i.KeyCode.Unknown,VKEY_VOLUME_UP:i.KeyCode.Unknown,VKEY_MEDIA_NEXT_TRACK:i.KeyCode.Unknown,VKEY_MEDIA_PREV_TRACK:i.KeyCode.Unknown,VKEY_MEDIA_STOP:i.KeyCode.Unknown,VKEY_MEDIA_PLAY_PAUSE:i.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_MAIL:i.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_MEDIA_SELECT:i.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_APP1:i.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_APP2:i.KeyCode.Unknown,VKEY_OEM_1:i.KeyCode.US_SEMICOLON,VKEY_OEM_PLUS:i.KeyCode.US_EQUAL,VKEY_OEM_COMMA:i.KeyCode.US_COMMA,VKEY_OEM_MINUS:i.KeyCode.US_MINUS,VKEY_OEM_PERIOD:i.KeyCode.US_DOT,VKEY_OEM_2:i.KeyCode.US_SLASH,VKEY_OEM_3:i.KeyCode.US_BACKTICK,VKEY_OEM_4:i.KeyCode.US_OPEN_SQUARE_BRACKET,VKEY_OEM_5:i.KeyCode.US_BACKSLASH,VKEY_OEM_6:i.KeyCode.US_CLOSE_SQUARE_BRACKET,VKEY_OEM_7:i.KeyCode.US_QUOTE,VKEY_OEM_8:i.KeyCode.OEM_8,VKEY_OEM_102:i.KeyCode.OEM_102,VKEY_PROCESSKEY:i.KeyCode.Unknown,VKEY_PACKET:i.KeyCode.Unknown,VKEY_DBE_SBCSCHAR:i.KeyCode.Unknown,VKEY_DBE_DBCSCHAR:i.KeyCode.Unknown,VKEY_ATTN:i.KeyCode.Unknown,VKEY_CRSEL:i.KeyCode.Unknown,VKEY_EXSEL:i.KeyCode.Unknown,VKEY_EREOF:i.KeyCode.Unknown,VKEY_PLAY:i.KeyCode.Unknown,VKEY_ZOOM:i.KeyCode.Unknown,VKEY_NONAME:i.KeyCode.Unknown,VKEY_PA1:i.KeyCode.Unknown,VKEY_OEM_CLEAR:i.KeyCode.Unknown,VKEY_UNKNOWN:i.KeyCode.Unknown,VKEY_ALTGR:i.KeyCode.Unknown},d=[{"char":";",virtualKeyCode:186},{"char":":",virtualKeyCode:186},{"char":"=",virtualKeyCode:187},{"char":"+",virtualKeyCode:187},{"char":",",virtualKeyCode:188},{"char":"<",virtualKeyCode:188},{"char":"-",virtualKeyCode:189},{"char":"_",virtualKeyCode:189},{"char":".",virtualKeyCode:190},{"char":">",virtualKeyCode:190},{"char":"/",virtualKeyCode:191},{"char":"?",virtualKeyCode:191},{"char":"`",virtualKeyCode:192},{"char":"~",virtualKeyCode:192},{"char":"[",virtualKeyCode:219},{"char":"{",virtualKeyCode:219},{"char":"\\",virtualKeyCode:220},{"char":"|",virtualKeyCode:220},{"char":"]",virtualKeyCode:221},{"char":"}",virtualKeyCode:221},{"char":"'",virtualKeyCode:222},{"char":'"',virtualKeyCode:222}],h=Object.create(null);d.forEach(function(e){return h[e["char"]]=!0});var p=Object.create(null);d.forEach(function(e){return p[e.virtualKeyCode]=!0});var f=function(){var e=null;return function(){if(!e){e=Object.create(null);for(var t=u(),n=0,o=t.length;o>n;n++){var r=t[n];if(r.value&&h[r.value]){var s=l[r.key_code];s&&s!==i.KeyCode.Unknown&&(!e[r.value]||e[r.value]>s)&&(e[r.value]=s)}if(r.withShift&&h[r.withShift]){var s=l[r.key_code];s&&s!==i.KeyCode.Unknown&&(!e[r.withShift]||e[r.withShift]>s)&&(e[r.withShift]=s)}}}return e}}();o.setExtractKeyCode(function(e){if(e.charCode){var t=String.fromCharCode(e.charCode).toUpperCase();return i.KeyCode.fromString(t)}if(r.isMacintosh&&p[e.keyCode]&&"string"==typeof e.keyIdentifier){var n=e.keyIdentifier,s=n.substr(2);try{var a=parseInt(s,16),t=String.fromCharCode(a),c=f();if(c[t])return c[t]}catch(u){}}return o.lookupKeyCode(e)});var m=null;t.getNativeAriaLabelProvider=s;var v=null;t.getNativeLabelProvider=a;var g=null,y=function(e){function t(t){e.call(this),this.remaps=t}return __extends(t,e),t.prototype.getLabelForKey=function(t){return null!==this.remaps[t]?this.remaps[t]:e.prototype.getLabelForKey.call(this,t)},t}(i.MacUIKeyLabelProvider),_=function(e){function t(t){e.call(this),this.remaps=t}return __extends(t,e),t.prototype.getLabelForKey=function(t){return null!==this.remaps[t]?this.remaps[t]:e.prototype.getLabelForKey.call(this,t)},t}(i.ClassicUIKeyLabelProvider),b=function(e){function t(t){e.call(this),this.remaps=t}return __extends(t,e),t.prototype.getLabelForKey=function(t){return null!==this.remaps[t]?this.remaps[t]:e.prototype.getLabelForKey.call(this,t)},t}(i.AriaKeyLabelProvider)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/keybinding/electron-browser/keybindingService",["require","exports","vs/nls!vs/workbench/services/keybinding/electron-browser/keybindingService","vs/base/common/platform","vs/base/common/winjs.base","vs/platform/extensions/common/extensionsRegistry","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/keybinding/browser/keybindingServiceImpl","vs/platform/keybinding/common/keybindingResolver","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/platform","vs/workbench/common/events","vs/workbench/services/keybinding/electron-browser/nativeKeymap"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";function p(e){return Array.isArray(e)}function f(e,t){return e?"string"!=typeof e.command?(t.push(n.localize(1,null,"command")),!1):"string"!=typeof e.key?(t.push(n.localize(2,null,"key")),!1):e.when&&"string"!=typeof e.when?(t.push(n.localize(3,null,"when")),!1):e.mac&&"string"!=typeof e.mac?(t.push(n.localize(4,null,"mac")),!1):e.linux&&"string"!=typeof e.linux?(t.push(n.localize(5,null,"linux")),!1):e.win&&"string"!=typeof e.win?(t.push(n.localize(6,null,"win")),!1):!0:(t.push(n.localize(0,null)),!1)}var m={type:"object","default":{command:"",key:""},properties:{command:{description:n.localize(7,null),type:"string"},key:{description:n.localize(8,null),type:"string"},mac:{description:n.localize(9,null),type:"string"},linux:{description:n.localize(10,null),type:"string"},win:{description:n.localize(11,null),type:"string"},when:{description:n.localize(12,null),type:"string"}}},v=r.ExtensionsRegistry.registerExtensionPoint("keybindings",{description:n.localize(13,null),oneOf:[m,{type:"array",items:m}]}),g=function(e){function t(t,n,i,o,r){var s=this;e.call(this,t),this.contextService=n,this.eventService=i,this.telemetryService=o,this.toDispose=this.eventService.addListener(d.EventType.WORKBENCH_OPTIONS_CHANGED,function(e){return s.onOptionsChanged(e)}),this._eventService=i,v.setHandler(function(e){for(var t=!1,n=0,i=e;n<i.length;n++){var o=i[n];t=s._handleKeybindingsExtensionPointUser(o.description.isBuiltin,o.value,o.collector)||t}t&&s.updateResolver()}),this._beginListening(r)}return __extends(t,e),t.prototype.setExtensionService=function(e){this._extensionService=e},t.prototype.customKeybindingsCount=function(){var e=this.contextService.getOptions();return e.globalSettings&&e.globalSettings.keybindings&&Array.isArray(e.globalSettings.keybindings)?e.globalSettings.keybindings.length:0},t.prototype._getExtraKeybindings=function(e){var t=[],n=this.contextService.getOptions();if(n.globalSettings&&n.globalSettings.keybindings){if(!e){var i=0;Array.isArray(n.globalSettings.keybindings)&&(i=n.globalSettings.keybindings.length),this.telemetryService.publicLog("customKeybindingsChanged",{keyCount:i})}Array.isArray(n.globalSettings.keybindings)&&(t=n.globalSettings.keybindings)}return t.map(function(e,t){return c.IOSupport.readKeybindingItem(e,t)})},t.prototype.onOptionsChanged=function(e){"globalSettings"===e.key&&this.updateResolver()},t.prototype.dispose=function(){this.toDispose()},t.prototype.getLabelFor=function(e){return e.toCustomLabel(h.getNativeLabelProvider())},t.prototype.getHTMLLabelFor=function(e){return e.toCustomHTMLLabel(h.getNativeLabelProvider())},t.prototype.getAriaLabelFor=function(e){return e.toCustomLabel(h.getNativeAriaLabelProvider())},t.prototype.getElectronAcceleratorFor=function(t){if(i.isWindows)return e.prototype.getElectronAcceleratorFor.call(this,t);var n=t._toUSLabel(),o=this.getLabelFor(t);return n!==o?null:e.prototype.getElectronAcceleratorFor.call(this,t)},t.prototype._handleKeybindingsExtensionPointUser=function(e,t,n){if(p(t)){for(var i=!1,o=0,r=t.length;r>o;o++)i=this._handleKeybinding(e,o+1,t[o],n)||i;return i}return this._handleKeybinding(e,1,t,n)},t.prototype._handleKeybinding=function(e,t,i,o){var r=[],s=!1;if(f(i,r)){var a=this._asCommandRule(e,t++,i);a&&(u.KeybindingsRegistry.registerCommandRule(a),s=!0)}return r.length>0&&o.error(n.localize(14,null,v.name,r.join("\n"))),s},t.prototype._invokeHandler=function(t,n){var i=this;return this._extensionService?this._extensionService.activateByEvent("onCommand:"+t).then(function(o){return e.prototype._invokeHandler.call(i,t,n)}):o.TPromise.as(null)},t.prototype._asCommandRule=function(e,t,n){var i,o=n.command,r=n.when,s=n.key,a=n.mac,l=n.linux,d=n.win;i=e?u.KeybindingsRegistry.WEIGHT.builtinExtension(t):u.KeybindingsRegistry.WEIGHT.externalExtension(t);var h={id:o,context:c.IOSupport.readKeybindingContexts(r),weight:i,primary:c.IOSupport.readKeybinding(s),mac:a&&{primary:c.IOSupport.readKeybinding(a)},linux:l&&{primary:c.IOSupport.readKeybinding(l)},win:d&&{primary:c.IOSupport.readKeybinding(d)}};return h.primary||h.mac||h.linux||h.win?h:void 0},t}(a.KeybindingService);t.WorkbenchKeybindingService=g;var y="vscode://schemas/keybindings",_={id:y,type:"array",title:n.localize(15,null),items:{required:["key"],type:"object",defaultSnippets:[{body:{key:"{{_}}",command:"{{_}}",when:"{{_}}"}}],properties:{key:{type:"string",description:n.localize(16,null)},command:{description:n.localize(17,null)},when:{type:"string",description:n.localize(18,null)}}}},b=l.Registry.as(s.Extensions.JSONContribution);b.registerSchema(y,_),b.addSchemaFileAssociation("vscode://defaultsettings/keybindings.json",y),b.addSchemaFileAssociation("%APP_SETTINGS_HOME%/keybindings.json",y)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/lifecycle/electron-browser/lifecycleService",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/platform/lifecycle/common/baseLifecycleService","vs/base/common/severity","electron"],function(e,t,n,i,o,r,s){"use strict";var a=function(e){function t(t,n){e.call(this),this.messageService=t,this.windowService=n,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this,t=this.windowService.getWindowId();s.ipcRenderer.on("vscode:beforeUnload",function(n,i){var o=e.beforeUnload();"boolean"==typeof o?s.ipcRenderer.send(o?i.cancelChannel:i.okChannel,t):o.done(function(e){return s.ipcRenderer.send(e?i.cancelChannel:i.okChannel,t)})})},t.prototype.beforeUnload=function(){var e=this,t=this.vetoShutdown();return"boolean"==typeof t?this.handleVeto(t):t.then(function(t){return e.handleVeto(t)})},t.prototype.handleVeto=function(e){if(!e)try{this.fireShutdown()}catch(t){return i.onUnexpectedError(t),!1}return e},t.prototype.vetoShutdown=function(){for(var e=this,t=this.beforeShutdownParticipants,o=[],s=!1,a=0;a<t.length;a++){
var c=t[a].beforeShutdown();if(c===!0)return!0;if(c!==!1){var u=c.then(function(e){e&&(s=!0)},function(t){s=!0,e.messageService.show(r["default"].Error,i.toErrorMessage(t))});o.push(u)}}return 0===o.length?!1:n.TPromise.join(o).then(function(){return s})},t}(o.BaseLifecycleService);t.LifecycleService=a}),define("vs/workbench/services/panel/common/panelService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IPanelService=n.createDecorator("panelService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/common/outputEditorInput",["require","exports","vs/nls!vs/workbench/parts/output/common/outputEditorInput","vs/base/common/lifecycle","vs/base/common/async","vs/workbench/common/editor/stringEditorInput","vs/workbench/parts/output/common/output","vs/platform/instantiation/common/instantiation","vs/platform/event/common/event","vs/workbench/common/events","vs/workbench/services/panel/common/panelService"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(e){function t(i,r,a,c,l){var d=this;e.call(this,n.localize(0,null),i?n.localize(1,null,i):"","",s.OUTPUT_MIME,!0,r),this.outputService=a,this.panelService=c,this.eventService=l,this.channel=i,this.bufferedOutput="",this.toDispose=[],this.toDispose.push(this.outputService.onOutput(this.onOutputReceived,this)),this.toDispose.push(this.outputService.onActiveOutputChannel(function(){return d.scheduleOutputAppend()})),this.toDispose.push(this.eventService.addListener2(u.EventType.COMPOSITE_OPENED,function(e){e.compositeId===s.OUTPUT_PANEL_ID&&d.appendOutput()})),this.appendOutputScheduler=new o.RunOnceScheduler(function(){d.isVisible()&&d.appendOutput()},t.OUTPUT_DELAY)}return __extends(t,e),t.getInstances=function(){return Object.keys(t.instances).map(function(e){return t.instances[e]})},t.getInstance=function(e,n){return t.instances[n]?t.instances[n]:(t.instances[n]=e.createInstance(t,n),t.instances[n])},t.prototype.appendOutput=function(){this.value.length+this.bufferedOutput.length>s.MAX_OUTPUT_LENGTH?this.setValue(this.outputService.getOutput(this.channel)):this.append(this.bufferedOutput),this.bufferedOutput="";var e=this.panelService.getActivePanel();e.revealLastLine()},t.prototype.onOutputReceived=function(e){if(this.outputSet&&e.channel===this.channel)if(e.output){var t=this.bufferedOutput.length+e.output.length;t>s.MAX_OUTPUT_LENGTH&&(this.bufferedOutput="..."+this.bufferedOutput.substr(t-s.MAX_OUTPUT_LENGTH)),e.output.length>s.MAX_OUTPUT_LENGTH?this.bufferedOutput+=e.output.substr(e.output.length-s.MAX_OUTPUT_LENGTH):this.bufferedOutput+=e.output,this.scheduleOutputAppend()}else null===e.output&&this.clearValue()},t.prototype.isVisible=function(){var e=this.panelService.getActivePanel();return e&&e.getId()===s.OUTPUT_PANEL_ID&&this.outputService.getActiveChannel()===this.channel},t.prototype.scheduleOutputAppend=function(){this.isVisible()&&this.bufferedOutput&&!this.appendOutputScheduler.isScheduled()&&this.appendOutputScheduler.schedule()},t.prototype.getId=function(){return s.OUTPUT_EDITOR_INPUT_ID},t.prototype.resolve=function(t){var n=this;return e.prototype.resolve.call(this,t).then(function(e){return n.outputSet?e:(n.setValue(n.outputService.getOutput(n.channel)),n.outputSet=!0,e)})},t.prototype.getChannel=function(){return this.channel},t.prototype.matches=function(n){if(n instanceof t){var i=n;if(i.getChannel()===this.channel)return e.prototype.matches.call(this,n)}return!1},t.prototype.dispose=function(){this.appendOutputScheduler.dispose(),this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.OUTPUT_DELAY=300,t.instances=Object.create(null),t=__decorate([__param(1,a.IInstantiationService),__param(2,s.IOutputService),__param(3,l.IPanelService),__param(4,c.IEventService)],t)}(r.StringEditorInput);t.OutputEditorInput=d});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/common/outputServices",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/event","vs/platform/event/common/event","vs/platform/lifecycle/common/lifecycle","vs/platform/instantiation/common/instantiation","vs/platform/storage/common/storage","vs/platform/platform","vs/workbench/common/editor","vs/workbench/parts/output/common/output","vs/workbench/parts/output/common/outputEditorInput","vs/workbench/services/panel/common/panelService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f="output.activechannel",m=function(){function e(e,t,n,i,r){this.storageService=e,this.instantiationService=t,this.eventService=n,this.lifecycleService=i,this.panelService=r,this.serviceId=d.IOutputService,this._onOutput=new o.Emitter,this._onOutputChannel=new o.Emitter,this._onActiveOutputChannel=new o.Emitter,this.receivedOutput=Object.create(null);var s=u.Registry.as(d.Extensions.OutputChannels).getChannels();this.activeChannel=this.storageService.get(f,c.StorageScope.WORKSPACE,s&&s.length>0?s[0]:null)}return Object.defineProperty(e.prototype,"onOutput",{get:function(){return this._onOutput.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onOutputChannel",{get:function(){return this._onOutputChannel.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onActiveOutputChannel",{get:function(){return this._onActiveOutputChannel.event},enumerable:!0,configurable:!0}),e.prototype.append=function(e,t){if(this.receivedOutput[e]||(this.receivedOutput[e]="",this._onOutputChannel.fire(e)),t=i.removeAnsiEscapeCodes(t)){var n=this.receivedOutput[e].length,o=t.length;if(o+n<=d.MAX_OUTPUT_LENGTH)this.receivedOutput[e]+=t;else if(o>d.MAX_OUTPUT_LENGTH)this.receivedOutput[e]="..."+t.substr(o-d.MAX_OUTPUT_LENGTH);else{var r=d.MAX_OUTPUT_LENGTH-o;this.receivedOutput[e]="..."+this.receivedOutput[e].substr(n-r)+t}}this._onOutput.fire({output:t,channel:e})},e.prototype.getOutput=function(e){return this.receivedOutput[e]||""},e.prototype.getChannels=function(){return Object.keys(this.receivedOutput)},e.prototype.getActiveChannel=function(){return this.activeChannel},e.prototype.clearOutput=function(e){this.receivedOutput[e]="",this._onOutput.fire({channel:e,output:null})},e.prototype.showOutput=function(e,t){var i=this,o=this.panelService.getActivePanel();return this.activeChannel===e&&o&&o.getId()===d.OUTPUT_PANEL_ID?n.TPromise.as(o):(this.activeChannel=e,this.storageService.store(f,this.activeChannel,c.StorageScope.WORKSPACE),this._onActiveOutputChannel.fire(e),this.panelService.openPanel(d.OUTPUT_PANEL_ID,!t).then(function(n){return n&&n.setInput(h.OutputEditorInput.getInstance(i.instantiationService,e),l.EditorOptions.create({preserveFocus:t})).then(function(){return n})}))},e=__decorate([__param(0,c.IStorageService),__param(1,a.IInstantiationService),__param(2,r.IEventService),__param(3,s.ILifecycleService),__param(4,p.IPanelService)],e)}();t.OutputService=m}),define("vs/workbench/services/part/common/partService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";!function(e){e[e.ACTIVITYBAR_PART=0]="ACTIVITYBAR_PART",e[e.SIDEBAR_PART=1]="SIDEBAR_PART",e[e.PANEL_PART=2]="PANEL_PART",e[e.EDITOR_PART=3]="EDITOR_PART",e[e.STATUSBAR_PART=4]="STATUSBAR_PART"}(t.Parts||(t.Parts={}));t.Parts;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.Position||(t.Position={}));t.Position;t.IPartService=n.createDecorator("partService")}),define("vs/workbench/common/actionRegistry",["require","exports","vs/base/common/winjs.base","vs/base/common/collections","vs/platform/platform","vs/platform/keybinding/common/keybindingsRegistry","vs/workbench/services/part/common/partService","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/base/common/severity"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){var t=e.keybindingContext,n="undefined"==typeof e.keybindingWeight?r.KeybindingsRegistry.WEIGHT.workbenchContrib():e.keybindingWeight,i=e.keybindings,o={id:e.id,handler:h(e),weight:n,context:t,primary:i&&i.primary,secondary:i&&i.secondary,win:i&&i.win,mac:i&&i.mac,linux:i&&i.linux};r.KeybindingsRegistry.registerCommandDesc(o)}function h(e){return function(t,i){var o=t.get(a.IMessageService),r=t.get(u.IInstantiationService),d=t.get(c.ITelemetryService),h=t.get(s.IPartService);n.TPromise.as(p(r,d,h,e,i)).done(null,function(e){o.show(l["default"].Error,e)})}}function p(e,t,i,o,r){var s=e.createInstance(o.syncDescriptor);return s.label=o.label||s.label,s.enabled?(t&&t.publicLog("workbenchActionExecuted",{id:s.id,from:r.from||"keybinding"}),i.joinCreation().then(function(){try{return n.TPromise.as(s.run()).then(function(){s.dispose()},function(e){return s.dispose(),n.TPromise.wrapError(e)})}catch(e){return s.dispose(),n.TPromise.wrapError(e)}})):void s.dispose()}t.Extensions={WorkbenchActions:"workbench.contributions.actions"};var f=function(){function e(){this.workbenchActions=Object.create(null),this.mapActionIdToCategory=Object.create(null)}return e.prototype.registerWorkbenchAction=function(e,t){this.workbenchActions[e.id]||(this.workbenchActions[e.id]=e,d(e),t&&(this.mapActionIdToCategory[e.id]=t))},e.prototype.unregisterWorkbenchAction=function(e){return this.workbenchActions[e]?(delete this.workbenchActions[e],delete this.mapActionIdToCategory[e],!0):!1},e.prototype.getWorkbenchAction=function(e){return this.workbenchActions[e]||null},e.prototype.getCategory=function(e){return this.mapActionIdToCategory[e]||null},e.prototype.getWorkbenchActions=function(){return i.values(this.workbenchActions)},e.prototype.setWorkbenchActions=function(e){var t=this;this.workbenchActions=Object.create(null),this.mapActionIdToCategory=Object.create(null),e.forEach(function(e){return t.registerWorkbenchAction(e)},this)},e}();o.Registry.add(t.Extensions.WorkbenchActions,new f),t.createCommandHandler=h,t.triggerAndDisposeAction=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/toggleSidebarPosition",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/toggleSidebarPosition","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/workbench/services/part/common/partService"],function(e,t,n,i,o,r,s,a,c){"use strict";var u="workbench.action.toggleSidebarPosition",l=i.localize(0,null),d=function(e){function t(t,n,i){e.call(this,t,n),this.partService=i,this.enabled=!!this.partService}return __extends(t,e),t.prototype.run=function(){var e=this.partService.getSideBarPosition();return this.partService.setSideBarPosition(e===c.Position.LEFT?c.Position.RIGHT:c.Position.LEFT),n.TPromise.as(null)},t=__decorate([__param(2,c.IPartService)],t)}(r.Action);t.ToggleSidebarPositionAction=d;var h=o.Registry.as(a.Extensions.WorkbenchActions);h.registerWorkbenchAction(new s.SyncActionDescriptor(d,u,l),i.localize(1,null))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/toggleSidebarVisibility",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/toggleSidebarVisibility","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/workbench/services/part/common/partService","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l="workbench.action.toggleSidebarVisibility",d=i.localize(0,null),h=function(e){function t(t,n,i){e.call(this,t,n),this.partService=i,this.enabled=!!this.partService}return __extends(t,e),t.prototype.run=function(){var e=!this.partService.isSideBarHidden();return this.partService.setSideBarHidden(e),n.TPromise.as(null)},t=__decorate([__param(2,c.IPartService)],t)}(r.Action);t.ToggleSidebarVisibilityAction=h;var p=o.Registry.as(a.Extensions.WorkbenchActions);p.registerWorkbenchAction(new s.SyncActionDescriptor(h,l,d,{primary:u.KeyMod.CtrlCmd|u.KeyCode.KEY_B}),i.localize(1,null))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerNavigation",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/triggerNavigation","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/base/common/keyCodes","vs/workbench/services/history/common/history"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l="workbench.action.navigateForward",d=i.localize(0,null),h=function(e){function t(t,n,i){e.call(this,t,n),this.historyService=i}return __extends(t,e),t.prototype.run=function(){return this.historyService.forward(),n.TPromise.as(null)},t=__decorate([__param(2,u.IHistoryService)],t)}(r.Action);t.NavigateForwardAction=h;var p="workbench.action.navigateBack",f=i.localize(1,null),m=function(e){function t(t,n,i){e.call(this,t,n),this.historyService=i}return __extends(t,e),t.prototype.run=function(){return this.historyService.back(),n.TPromise.as(null)},t=__decorate([__param(2,u.IHistoryService)],t)}(r.Action);t.NavigateBackwardsAction=m;var v=o.Registry.as(a.Extensions.WorkbenchActions);v.registerWorkbenchAction(new s.SyncActionDescriptor(h,l,d,{primary:null,win:{primary:c.KeyMod.Alt|c.KeyCode.RightArrow},mac:{primary:c.KeyMod.WinCtrl|c.KeyMod.Shift|c.KeyCode.US_MINUS},linux:{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.US_MINUS}})),v.registerWorkbenchAction(new s.SyncActionDescriptor(m,p,f,{primary:null,win:{primary:c.KeyMod.Alt|c.KeyCode.LeftArrow},mac:{primary:c.KeyMod.WinCtrl|c.KeyCode.US_MINUS},linux:{primary:c.KeyMod.CtrlCmd|c.KeyMod.Alt|c.KeyCode.US_MINUS}}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/errorList/browser/errorList.contribution",["require","exports","vs/nls!vs/workbench/parts/errorList/browser/errorList.contribution","vs/base/common/actions","vs/base/common/winjs.base","vs/platform/platform","vs/workbench/browser/panel","vs/workbench/parts/errorList/browser/errorListConstants","vs/workbench/services/part/common/partService","vs/workbench/services/panel/common/panelService"],function(e,t,n,i,o,r,s,a,c,u){"use strict";(function(e){function t(t,n,i,o){e.call(this,t,n),this.partService=i,this.panelService=o}return __extends(t,e),t.prototype.run=function(e){var t=this.panelService.getActivePanel();return t&&t.getId()===a.ERROR_LIST_PANEL_ID?(this.partService.setPanelHidden(!0),o.TPromise.as(null)):this.panelService.openPanel(a.ERROR_LIST_PANEL_ID,!0)},t.ID="workbench.action.errorList.toggle",t.LABEL=n.localize(0,null),t=__decorate([__param(2,c.IPartService),__param(3,u.IPanelService)],t)})(i.Action);r.Registry.as(s.Extensions.Panels).registerPanel(new s.PanelDescriptor("vs/workbench/parts/errorList/browser/errorList","ErrorList",a.ERROR_LIST_PANEL_ID,n.localize(1,null),"errorList"))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/emptyView",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/emptyView","vs/base/common/platform","vs/base/browser/dom","vs/base/common/winjs.base","vs/base/browser/ui/button/button","vs/base/browser/builder","vs/base/browser/ui/splitview/splitview","vs/platform/platform","vs/workbench/common/actionRegistry","vs/platform/instantiation/common/instantiation","vs/platform/selection/common/selection"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t){e.call(this,{minimumSize:44,ariaHeaderLabel:n.localize(0,null)}),this.instantiationService=t}return __extends(t,e),t.prototype.renderHeader=function(e){var t=a.$("div.title").appendTo(e);a.$("span").text(n.localize(1,null)).appendTo(t)},t.prototype.renderBody=function(e){var t=this;o.addClass(e,"explorer-empty-view");var r=a.$("div.section").appendTo(e);a.$("p").text(n.localize(2,null)).appendTo(r);var c=a.$("div.section").appendTo(e),u=new s.Button(c);u.label=n.localize(3,null),u.on("click",function(){t.runWorkbenchAction(i.isMacintosh?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder")})},t.prototype.runWorkbenchAction=function(e){var t=u.Registry.as(l.Extensions.WorkbenchActions),n=t.getWorkbenchAction(e),i=this.instantiationService.createInstance(n.syncDescriptor);return i.run().done(function(){return i.dispose()})},t.prototype.create=function(){return r.TPromise.as(null)},t.prototype.refresh=function(e,t,n){return r.TPromise.as(null)},t.prototype.setVisible=function(e){return r.TPromise.as(null)},t.prototype.focusBody=function(){},t.prototype.getSelection=function(){return new h.StructuredSelection([])},t.prototype.reveal=function(e,t){return r.TPromise.as(null)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t=__decorate([__param(0,d.IInstantiationService)],t)}(c.CollapsibleView);t.EmptyView=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/outputActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/output/browser/outputActions","vs/platform/platform","vs/base/common/arrays","vs/base/common/actions","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/workbench/parts/output/common/output","vs/base/browser/ui/actionbar/actionbar","vs/workbench/services/part/common/partService","vs/workbench/services/panel/common/panelService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.partService=i,this.panelService=o,this.outputService=r}return __extends(t,e),t.prototype.run=function(e){var t=this.panelService.getActivePanel();return t&&t.getId()===u.OUTPUT_PANEL_ID?(this.partService.setPanelHidden(!0),n.TPromise.as(null)):this.outputService.showOutput(this.outputService.getActiveChannel())},t.ID="workbench.action.output.toggleOutput",t.LABEL=i.localize(0,null),t=__decorate([__param(2,d.IPartService),__param(3,h.IPanelService),__param(4,u.IOutputService)],t)}(s.Action);t.ToggleOutputAction=p;var f=function(e){function t(t,n){e.call(this,"workbench.output.action.clearOutput",i.localize(1,null),"output-action clear-output"),this.outputService=t,this.panelService=n}return __extends(t,e),t.prototype.run=function(){return this.outputService.clearOutput(this.outputService.getActiveChannel()),this.panelService.getActivePanel().focus(),n.TPromise.as(!0)},t=__decorate([__param(0,u.IOutputService),__param(1,h.IPanelService)],t)}(s.Action);t.ClearOutputAction=f;var m=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.WidgetFocus|c.Behaviour.ShowInContextMenu),this.outputService=i}return __extends(t,e),t.prototype.getGroupId=function(){return"clear"},t.prototype.isSupported=function(){var t=this.editor.getModel(),n=t&&t.getMode();return n&&n.getId()===u.OUTPUT_MODE_ID&&e.prototype.isSupported.call(this)},t.prototype.run=function(){return this.outputService.clearOutput(this.outputService.getActiveChannel()),n.TPromise.as(!1)},t.ID="editor.action.clearoutput",t=__decorate([__param(2,u.IOutputService)],t)}(a.EditorAction);t.ClearOutputEditorAction=m;var v=function(e){function t(n){e.call(this,t.ID,i.localize(2,null)),this.outputService=n,this["class"]="output-action switch-to-output"}return __extends(t,e),t.prototype.run=function(e){return this.outputService.showOutput(e)},t.ID="workbench.output.action.switchBetweenOutputs",t=__decorate([__param(0,u.IOutputService)],t)}(s.Action);t.SwitchOutputAction=v;var g=function(e){function t(n,i){e.call(this,null,n,t.getChannels(i),Math.max(0,t.getChannels(i).indexOf(i.getActiveChannel()))),this.outputService=i,this.toDispose.push(this.outputService.onOutputChannel(this.onOutputChannel,this)),this.toDispose.push(this.outputService.onActiveOutputChannel(this.onOutputChannel,this))}return __extends(t,e),t.prototype.onOutputChannel=function(){var e=t.getChannels(this.outputService),n=Math.max(0,e.indexOf(this.outputService.getActiveChannel()));this.setOptions(e,n)},t.getChannels=function(e){var t=o.Registry.as(u.Extensions.OutputChannels).getChannels(),n=e.getChannels();return r.distinct(t.concat(n)).sort()},t=__decorate([__param(1,u.IOutputService)],t)}(l.SelectActionItem);t.SwitchOutputActionItem=g}),define("vs/workbench/parts/output/browser/output.contribution",["require","exports","vs/nls!vs/workbench/parts/output/browser/output.contribution","vs/base/common/keyCodes","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/modesRegistry","vs/platform/platform","vs/platform/actions/common/actions","vs/platform/instantiation/common/extensions","vs/workbench/common/actionRegistry","vs/workbench/parts/output/common/outputServices","vs/workbench/parts/output/browser/outputActions","vs/workbench/parts/output/common/output","vs/workbench/browser/panel","vs/css!../browser/media/output.contribution"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";c.registerSingleton(h.IOutputService,l.OutputService),r.ModesRegistry.registerCompatMode({id:h.OUTPUT_MODE_ID,extensions:[],aliases:[null],mimetypes:[h.OUTPUT_MIME],moduleId:"vs/workbench/parts/output/common/outputMode",ctorName:"OutputMode"}),s.Registry.as(p.Extensions.Panels).registerPanel(new p.PanelDescriptor("vs/workbench/parts/output/browser/outputPanel","OutputPanel",h.OUTPUT_PANEL_ID,n.localize(0,null),"output"));var f=s.Registry.as(u.Extensions.WorkbenchActions);f.registerWorkbenchAction(new a.SyncActionDescriptor(d.ToggleOutputAction,d.ToggleOutputAction.ID,d.ToggleOutputAction.LABEL,{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_U,linux:{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_H}}),n.localize(1,null)),o.CommonEditorRegistry.registerEditorAction(new o.EditorActionDescriptor(d.ClearOutputEditorAction,d.ClearOutputEditorAction.ID,n.localize(2,null)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/progress/browser/progressService",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/workbench/common/events","vs/platform/progress/common/progress"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(e,t){this._eventService=e,this.scopeId=t,this.registerListeners()}return Object.defineProperty(e.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),e.prototype.registerListeners=function(){var e=this;this.eventService.addListener(o.EventType.EDITOR_CLOSED,function(t){t.editorId===e.scopeId&&e.onScopeDeactivated()}),this.eventService.addListener(o.EventType.EDITOR_OPENED,function(t){t.editorId===e.scopeId&&e.onScopeActivated()}),this.eventService.addListener(o.EventType.COMPOSITE_CLOSED,function(t){t.compositeId===e.scopeId&&e.onScopeDeactivated()}),this.eventService.addListener(o.EventType.COMPOSITE_OPENED,function(t){t.compositeId===e.scopeId&&e.onScopeActivated()})},e}();t.ScopedService=s;var a=function(e){function t(t,n,o,s){e.call(this,t,o),this.serviceId=r.IProgressService,this.progressbar=n,this.isActive=s||i.isUndefinedOrNull(o),this.progressState={}}return __extends(t,e),t.prototype.onScopeDeactivated=function(){this.isActive=!1},t.prototype.onScopeActivated=function(){this.isActive=!0,this.progressState.done||(this.progressState.whilePromise?this.doShowWhile():this.progressState.infinite?this.progressbar.infinite().getContainer().show():(this.progressState.total&&this.progressbar.total(this.progressState.total).getContainer().show(),this.progressState.worked&&this.progressbar.worked(this.progressState.worked).getContainer().show()))},t.prototype.clearProgressState=function(){delete this.progressState.infinite,delete this.progressState.done,delete this.progressState.worked,delete this.progressState.total,delete this.progressState.whilePromise},t.prototype.show=function(e,t){var n,o,r=this;return e===!1||e===!0?n=e:o=e,this.clearProgressState(),this.progressState.infinite=n,this.progressState.total=o,this.isActive&&(i.isUndefinedOrNull(n)?i.isUndefinedOrNull(o)||(i.isUndefinedOrNull(t)?this.progressbar.total(o).getContainer().show():this.progressbar.total(o).getContainer().showDelayed(t)):i.isUndefinedOrNull(t)?this.progressbar.infinite().getContainer().show():this.progressbar.infinite().getContainer().showDelayed(t)),{total:function(e){r.progressState.infinite=!1,r.progressState.total=e,r.isActive&&r.progressbar.total(e)},worked:function(e){!r.isActive||r.progressbar.hasTotal()?(r.progressState.infinite=!1,r.progressState.worked?r.progressState.worked+=e:r.progressState.worked=e,r.isActive&&r.progressbar.worked(e)):(r.progressState.infinite=!0,delete r.progressState.worked,delete r.progressState.total,r.progressbar.infinite().getContainer().show())},done:function(){r.progressState.infinite=!1,r.progressState.done=!0,r.isActive&&r.progressbar.stop().getContainer().hide()}}},t.prototype.showWhile=function(e,t){var i=this,o=!!this.progressState.whilePromise;o?e=n.TPromise.join([e,this.progressState.whilePromise]):this.clearProgressState(),this.progressState.whilePromise=e;var r=function(){i.progressState.whilePromise&&i.progressState.whilePromise!==e||(i.clearProgressState(),i.isActive&&i.progressbar.stop().getContainer().hide())};return this.doShowWhile(t),e.then(r,r)},t.prototype.doShowWhile=function(e){this.isActive&&(i.isUndefinedOrNull(e)?this.progressbar.infinite().getContainer().show():this.progressbar.infinite().getContainer().showDelayed(e))},t}(s);t.WorkbenchProgressService=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/compositePart",["require","exports","vs/nls!vs/workbench/browser/parts/compositePart","vs/base/common/timer","vs/base/common/uuid","vs/base/common/winjs.base","vs/platform/platform","vs/base/browser/builder","vs/base/common/events","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/base/browser/ui/toolbar/toolbar","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/progressbar/progressbar","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/part","vs/workbench/common/events","vs/workbench/browser/composite","vs/workbench/services/progress/browser/progressService","vs/platform/storage/common/storage","vs/platform/message/common/message","vs/css!./media/compositePart"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=function(e){function t(t,n,i,o,r,s,a,c,u,l,d,h,p){e.call(this,p),this.messageService=t,this.storageService=n,this.eventService=i,this.telemetryService=o,this.contextMenuService=r,this.partService=s,this.keybindingService=a,this.registry=c,this.activeCompositeSettingsKey=u,this.nameForTelemetry=l,this.compositeCssClass=d,this.actionContributionScope=h,this.activeCompositeListeners=[],this.instantiatedCompositeListeners=[],this.mapCompositeToCompositeContainer={},this.mapActionsBindingToComposite={},this.mapProgressServiceToComposite={},this.activeComposite=null,this.instantiatedComposits=[],this.compositeLoaderPromises={}}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.openComposite=function(e,t){return this.activeComposite&&this.activeComposite.getId()===e?(t&&this.activeComposite.focus(),r.TPromise.as(this.activeComposite)):this.doOpenComposite(e,t);
},t.prototype.doOpenComposite=function(e,t){var n=this,s=i.start(i.Topic.WORKBENCH,u.format("Open Composite {0}",e.substr(e.lastIndexOf(".")+1))),a=o.generateUuid();this.currentCompositeOpenToken=a,this.emit(g.EventType.COMPOSITE_OPENING,new g.CompositeEvent(e));var c;return c=this.activeComposite?this.hideActiveComposite():r.TPromise.as(null),c.then(function(){return n.updateTitle(e),n.createComposite(e,!0).then(function(e){return n.currentCompositeOpenToken!==a||n.activeComposite&&n.activeComposite.getId()!==e.getId()?(s.stop(),r.TPromise.as(null)):n.activeComposite&&n.activeComposite.getId()===e.getId()?(t&&e.focus(),s.stop(),r.TPromise.as(e)):n.showComposite(e).then(function(){return t&&e.focus(),s.stop(),e})})})},t.prototype.createComposite=function(e,t){for(var n=this,i=0;i<this.instantiatedComposits.length;i++)if(this.instantiatedComposits[i].getId()===e)return r.TPromise.as(this.instantiatedComposits[i]);var o=this.registry.getComposite(e);if(o){var s=this.compositeLoaderPromises[e];if(!s){var a=new _.WorkbenchProgressService(this.eventService,this.progressBar,o.id,t),c={progressService:a},l=this.instantiationService.createChild(c);s=l.createInstance(o).then(function(t){return n.mapProgressServiceToComposite[t.getId()]=a,n.instantiatedComposits.push(t),n.instantiatedCompositeListeners.push(t.addListener(y.EventType.INTERNAL_COMPOSITE_TITLE_AREA_UPDATE,function(e){n.onTitleAreaUpdate(e)})),delete n.compositeLoaderPromises[e],t}),a.showWhile(s,this.partService.isCreated()?800:3200),this.compositeLoaderPromises[e]=s}return s}throw new Error(u.format("Unable to find composite with id {0}",e))},t.prototype.showComposite=function(e){var t=this;this.activeComposite=e,this.storageService.store(this.activeCompositeSettingsKey,this.activeComposite.getId(),b.StorageScope.WORKSPACE),this.lastActiveCompositeId=this.activeComposite.getId(),this.activeCompositeListeners.push(this.eventService.addEmitter(this.activeComposite,this.activeComposite.getId()));var n,i=this.mapCompositeToCompositeContainer[e.getId()];i?n=r.TPromise.as(null):(i=a.$().div({"class":["composite",this.compositeCssClass],id:e.getId()},function(t){n=e.create(t)}),this.mapCompositeToCompositeContainer[e.getId()]=i);var o=this.mapProgressServiceToComposite[e.getId()];return o&&!i&&this.mapProgressServiceToComposite[e.getId()].showWhile(n,this.partService.isCreated()?800:3200),n.then(function(){if(t.activeComposite&&e.getId()===t.activeComposite.getId()){i.build(t.getContentArea()),i.show(),t.toolBar.actionRunner=e.getActionRunner();var n=t.registry.getComposite(e.getId());n&&n.name!==e.getTitle()&&t.updateTitle(e.getId(),e.getTitle());var o=t.mapActionsBindingToComposite[e.getId()];return o||(o=t.collectCompositeActions(e),t.mapActionsBindingToComposite[e.getId()]=o),o(),t.telemetryActionsListener&&(t.telemetryActionsListener.dispose(),t.telemetryActionsListener=null),t.telemetryActionsListener=t.toolBar.actionRunner.addListener2(c.EventType.RUN,function(e){e.error&&!d.isPromiseCanceledError(e.error)&&t.messageService.show(S.Severity.Error,e.error),t.telemetryService&&t.telemetryService.publicLog("workbenchActionExecuted",{id:e.action.id,from:t.nameForTelemetry})}),e.setVisible(!0).then(function(){t.activeComposite&&e.getId()===t.activeComposite.getId()&&(t.contentAreaSize&&e.layout(t.contentAreaSize),t.emit(g.EventType.COMPOSITE_OPENED,new g.CompositeEvent(t.activeComposite.getId())))})}},function(e){return t.onError(e)})},t.prototype.onTitleAreaUpdate=function(e){if(this.activeComposite&&this.activeComposite.getId()===e.compositeId){this.updateTitle(this.activeComposite.getId(),this.activeComposite.getTitle());var t=this.collectCompositeActions(this.activeComposite);this.mapActionsBindingToComposite[this.activeComposite.getId()]=t,t()}else delete this.mapActionsBindingToComposite[e.compositeId]},t.prototype.updateTitle=function(e,t){var i=this,o=this.registry.getComposite(e);if(o){t||(t=o.name);var r=null,s=this.keybindingService.lookupKeybindings(e).map(function(e){return i.keybindingService.getLabelFor(e)});s&&s.length&&(r=s[0]),this.titleLabel.safeInnerHtml(t),this.titleLabel.title(r?n.localize(0,null,t,r):t),this.toolBar.setAriaLabel(n.localize(1,null,t))}},t.prototype.collectCompositeActions=function(e){var t=e.getActions(),n=e.getSecondaryActions();t.push.apply(t,this.getActions()),n.push.apply(n,this.getSecondaryActions());var i=s.Registry.as(m.Extensions.Actionbar);return t.push.apply(t,i.getActionBarActionsForContext(this.actionContributionScope,e)),n.push.apply(n,i.getSecondaryActionBarActionsForContext(this.actionContributionScope,e)),this.toolBar.setActions(m.prepareActions(t),m.prepareActions(n))},t.prototype.getActiveComposite=function(){return this.activeComposite},t.prototype.getLastActiveCompositetId=function(){return this.lastActiveCompositeId},t.prototype.hideActiveComposite=function(){var e=this;if(!this.activeComposite)return r.TPromise.as(null);var t=this.activeComposite;this.activeComposite=null;var n=this.mapCompositeToCompositeContainer[t.getId()];return t.setVisible(!1).then(function(){for(n.offDOM(),n.hide(),e.progressBar.stop().getContainer().hide(),e.toolBar.setActions([])();e.activeCompositeListeners.length;)e.activeCompositeListeners.pop()();e.emit(g.EventType.COMPOSITE_CLOSED,new g.CompositeEvent(t.getId()))})},t.prototype.createTitleArea=function(e){var t=this,n=a.$(e).div({"class":["composite","title"]});return a.$(n).div({"class":"title-actions"},function(e){t.toolBar=new h.ToolBar(e.getHTMLElement(),t.contextMenuService,{actionItemProvider:function(e){return t.actionItemProvider(e)},orientation:p.ActionsOrientation.HORIZONTAL})}),a.$(n).div({"class":"title-label"},function(e){t.titleLabel=e.span()}),n},t.prototype.actionItemProvider=function(e){var t;if(this.activeComposite&&(t=this.activeComposite.getActionItem(e)),!t){var n=s.Registry.as(m.Extensions.Actionbar);t=n.getActionItemForContext(this.actionContributionScope,h.CONTEXT,e)}return t},t.prototype.createContentArea=function(e){var t=this;return a.$(e).div({"class":"content"},function(e){t.progressBar=new f.ProgressBar(e),t.progressBar.getContainer().hide()})},t.prototype.onError=function(e){this.messageService.show(S.Severity.Error,l.isString(e)?new Error(e):e)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.contentAreaSize=n[1],this.activeComposite&&this.activeComposite.layout(this.contentAreaSize),n},t.prototype.shutdown=function(){this.instantiatedComposits.forEach(function(e){return e.shutdown()}),e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.mapCompositeToCompositeContainer=null,this.mapProgressServiceToComposite=null,this.mapActionsBindingToComposite=null;for(var t=0;t<this.instantiatedComposits.length;t++)this.instantiatedComposits[t].dispose();for(this.instantiatedComposits=[];this.activeCompositeListeners.length;)this.activeCompositeListeners.pop()();for(;this.instantiatedCompositeListeners.length;)this.instantiatedCompositeListeners.pop()();this.progressBar.dispose(),this.toolBar.dispose(),e.prototype.dispose.call(this)},t}(v.Part);t.CompositePart=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/panel/panelPart",["require","exports","vs/nls!vs/workbench/browser/parts/panel/panelPart","vs/base/common/winjs.base","vs/base/common/keyCodes","vs/base/common/actions","vs/base/browser/dom","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/workbench/browser/parts/compositePart","vs/workbench/browser/panel","vs/workbench/services/panel/common/panelService","vs/workbench/services/part/common/partService","vs/css!./media/panelPart"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(n,i,o,r,s,u,l,d){e.call(this,n,i,o,r,s,u,l,a.Registry.as(h.Extensions.Panels),t.activePanelSettingsKey,"panel","panel",c.Scope.PANEL,d),this.serviceId=p.IPanelService}return __extends(t,e),t.prototype.create=function(t){var n=this;e.prototype.create.call(this,t),s.addStandardDisposableListener(this.getContainer().getHTMLElement(),"keyup",function(e){e.equals(o.CommonKeybindings.ESCAPE)&&(n.partService.setPanelHidden(!0),e.preventDefault())})},t.prototype.openPanel=function(e,t){if(this.blockOpeningPanel)return i.TPromise.as(null);if(this.partService.isPanelHidden())try{this.blockOpeningPanel=!0,this.partService.setPanelHidden(!1)}finally{this.blockOpeningPanel=!1}return this.openComposite(e,t)},t.prototype.getActions=function(){return[this.instantiationService.createInstance(v,v.ID,v.LABEL)]},t.prototype.getActivePanel=function(){return this.getActiveComposite()},t.prototype.getLastActivePanelId=function(){return this.getLastActiveCompositetId()},t.prototype.hideActivePanel=function(){return this.hideActiveComposite()},t.activePanelSettingsKey="workbench.panelpart.activepanelid",t}(d.CompositePart);t.PanelPart=m;var v=function(e){function t(t,n,i){e.call(this,t,n,"close-editor-action"),this.partService=i}return __extends(t,e),t.prototype.run=function(){return this.partService.setPanelHidden(!0),i.TPromise.as(!0)},t.ID="workbench.action.closePanel",t.LABEL=n.localize(0,null),t=__decorate([__param(2,f.IPartService)],t)}(r.Action),g=function(e){function t(t,n,i){e.call(this,t,n,null),this.partService=i}return __extends(t,e),t.prototype.run=function(){return this.partService.setPanelHidden(!this.partService.isPanelHidden()),i.TPromise.as(!0)},t.ID="workbench.action.togglePanel",t.LABEL=n.localize(1,null),t=__decorate([__param(2,f.IPartService)],t)}(r.Action),y=a.Registry.as(l.Extensions.WorkbenchActions);y.registerWorkbenchAction(new u.SyncActionDescriptor(g,g.ID,g.LABEL,{primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_J}),n.localize(2,null))}),define("vs/workbench/services/quickopen/common/quickOpenService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IQuickOpenService=n.createDecorator("quickOpenService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/indentation/common/indentation",["require","exports","vs/nls!vs/editor/contrib/indentation/common/indentation","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","vs/editor/contrib/indentation/common/indentationCommands","vs/workbench/services/quickopen/common/quickOpenService","vs/editor/common/services/modelService","vs/editor/common/editorActionEnablement"],function(e,t,n,i,o,r,s,a,c,u){"use strict";var l=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getModel();if(e){var t=e.getOptions(),n=new s.IndentationToSpacesCommand(this.editor.getSelection(),t.tabSize);return this.editor.executeCommands(this.id,[n]),e.updateOptions({insertSpaces:!0}),i.TPromise.as(!0)}},t.ID="editor.action.indentationToSpaces",t}(o.EditorAction);t.IndentationToSpacesAction=l;var d=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getModel();if(e){var t=e.getOptions(),n=new s.IndentationToTabsCommand(this.editor.getSelection(),t.tabSize);return this.editor.executeCommands(this.id,[n]),e.updateOptions({insertSpaces:!1}),i.TPromise.as(!0)}},t.ID="editor.action.indentationToTabs",t}(o.EditorAction);t.IndentationToTabsAction=d;var h=function(e){function t(t,n,i,o,r){e.call(this,t,n,u.Behaviour.Writeable),this.insertSpaces=i,this.quickOpenService=o,this.modelService=r}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel();if(t){var o=this.modelService.getCreationOptions(),r=[1,2,3,4,5,6,7,8].map(function(e){return{id:e.toString(),label:e.toString(),description:e===o.tabSize?n.localize(0,null):null}}),s=Math.min(t.getOptions().tabSize-1,7);return i.TPromise.timeout(50).then(function(){return e.quickOpenService.pick(r,{placeHolder:n.localize(1,null),autoFocus:{autoFocusIndex:s}}).then(function(n){return n&&t.updateOptions({tabSize:parseInt(n.label,10),insertSpaces:e.insertSpaces}),!0})})}},t}(o.EditorAction);t.ChangeIndentationSizeAction=h;var p=function(e){function t(t,n,i,o){e.call(this,t,n,!1,i,o)}return __extends(t,e),t.ID="editor.action.indentUsingTabs",t=__decorate([__param(2,a.IQuickOpenService),__param(3,c.IModelService)],t)}(h);t.IndentUsingTabs=p;var f=function(e){function t(t,n,i,o){e.call(this,t,n,!0,i,o)}return __extends(t,e),t.ID="editor.action.indentUsingSpaces",t=__decorate([__param(2,a.IQuickOpenService),__param(3,c.IModelService)],t)}(h);t.IndentUsingSpaces=f;var m=function(e){function t(t,n,i){e.call(this,t,n),this.modelService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getModel();if(e){var t=this.modelService.getCreationOptions();e.detectIndentation(t.insertSpaces,t.tabSize)}},t.ID="editor.action.detectIndentation",t=__decorate([__param(2,c.IModelService)],t)}(o.EditorAction);t.DetectIndentation=m;var v=function(e){function t(t,n){e.call(this,t,n,u.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){return this.editor.updateOptions({renderWhitespace:!this.editor.getConfiguration().renderWhitespace}),i.TPromise.as(!0)},t.ID="editor.action.toggleRenderWhitespace",t}(o.EditorAction);t.ToggleRenderWhitespaceAction=v,r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(l,l.ID,n.localize(2,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(d,d.ID,n.localize(3,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(f,f.ID,n.localize(4,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(p,p.ID,n.localize(5,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(m,m.ID,n.localize(6,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(v,v.ID,n.localize(7,null)))}),define("vs/editor/browser/editor.all",["require","exports","vs/editor/browser/widget/codeEditorWidget","vs/editor/browser/widget/diffEditorWidget","vs/editor/contrib/accessibility/browser/accessibility","vs/editor/contrib/clipboard/browser/clipboard","vs/editor/contrib/codelens/browser/codelens","vs/editor/contrib/color/browser/color","vs/editor/contrib/comment/common/comment","vs/editor/contrib/contextmenu/browser/contextmenu","vs/editor/contrib/diffNavigator/common/diffNavigator","vs/editor/contrib/find/browser/find","vs/editor/contrib/format/common/formatActions","vs/editor/contrib/goToDeclaration/browser/goToDeclaration","vs/editor/contrib/gotoError/browser/gotoError","vs/editor/contrib/hover/browser/hover","vs/editor/contrib/inPlaceReplace/common/inPlaceReplace","vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard","vs/editor/contrib/linesOperations/common/linesOperations","vs/editor/contrib/links/browser/links","vs/editor/contrib/multicursor/common/multicursor","vs/editor/contrib/outlineMarker/browser/outlineMarker","vs/editor/contrib/parameterHints/browser/parameterHints","vs/editor/contrib/quickFix/browser/quickFix","vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/editor/contrib/rename/browser/rename2","vs/editor/contrib/smartSelect/common/smartSelect","vs/editor/contrib/smartSelect/common/jumpToBracket","vs/editor/contrib/snippet/common/snippet","vs/editor/contrib/snippet/browser/snippet","vs/editor/contrib/suggest/browser/suggest","vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode","vs/editor/contrib/toggleWordWrap/common/toggleWordWrap","vs/editor/contrib/wordHighlighter/common/wordHighlighter","vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter","vs/editor/contrib/defineKeybinding/browser/defineKeybinding","vs/editor/contrib/folding/browser/folding","vs/editor/contrib/indentation/common/indentation","vs/editor/common/languages.common"],function(e,t){"use strict"});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostQuickOpen",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o){"use strict";var r=function(){function e(e){this._proxy=e.getRemotable(s)}return e.prototype.show=function(e,t){var i=this;this._onDidSelectItem=void 0;var o;o=Array.isArray(e)?n.TPromise.as(e):e;var r=this._proxy.$show({autoFocus:{autoFocusFirstEntry:!0},placeHolder:t&&t.placeHolder,matchOnDescription:t&&t.matchOnDescription,matchOnDetail:t&&t.matchOnDetail});return o.then(function(e){for(var n=[],o=0;o<e.length;o++){var s=e[o],a=void 0,c=void 0,u=void 0;"string"==typeof s?a=s:(a=s.label,c=s.description,u=s.detail),n.push({label:a,description:c,handle:o,detail:u})}return t&&"function"==typeof t.onDidSelectItem&&(i._onDidSelectItem=function(n){t.onDidSelectItem(e[n])}),i._proxy.$setItems(n),r.then(function(t){return"number"==typeof t?e[t]:void 0})},function(e){return i._proxy.$setError(e),n.TPromise.wrapError(e)})},e.prototype.$onItemSelected=function(e){this._onDidSelectItem&&this._onDidSelectItem(e)},e.prototype.input=function(e){return this._validateInput=e.validateInput,this._proxy.$input(e,"function"==typeof e.validateInput)},e.prototype.$validateInput=function(e){return this._validateInput?n.TPromise.as(this._validateInput(e)):void 0},e=__decorate([i.Remotable.ExtHostContext("ExtHostQuickOpen"),__param(0,i.IThreadService)],e)}();t.ExtHostQuickOpen=r;var s=function(){function e(e,t){this._token=0,this._proxy=e.getRemotable(r),this._quickOpenService=t}return e.prototype.$show=function(e){var t=this,i=++this._token;return this._contents=new n.TPromise(function(e,n){t._doSetItems=function(n){i===t._token&&e(n)},t._doSetError=function(e){i===t._token&&n(e)}}),this._quickOpenService.pick(this._contents,e).then(function(e){return e?e.handle:void 0},void 0,function(e){e&&t._proxy.$onItemSelected(e.handle)})},e.prototype.$setItems=function(e){return this._doSetItems?void this._doSetItems(e):void 0},e.prototype.$setError=function(e){return this._doSetError?void this._doSetError(e):void 0},e.prototype.$input=function(e,t){var n=this,i=Object.create(null);return e&&(i.password=e.password,i.placeHolder=e.placeHolder,i.prompt=e.prompt,i.value=e.value),t&&(i.validateInput=function(e){return n._proxy.$validateInput(e)}),this._quickOpenService.input(i)},e=__decorate([i.Remotable.MainContext("MainThreadQuickOpen"),__param(0,i.IThreadService),__param(1,o.IQuickOpenService)],e)}();t.MainThreadQuickOpen=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/quickOpenAction",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,n,i,o){e.call(this,t,n),this.quickOpenService=o,this.prefix=i,this.enabled=!!this.quickOpenService}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show(this.prefix),n.TPromise.as(null)},t=__decorate([__param(3,o.IQuickOpenService)],t)}(i.Action);t.QuickOpenAction=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerQuickOpen",["require","exports","vs/nls!vs/workbench/browser/actions/triggerQuickOpen","vs/workbench/common/actionRegistry","vs/platform/platform","vs/base/common/actions","vs/base/common/winjs.base","vs/platform/keybinding/common/keybindingsRegistry","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/keybinding/common/keybindingService","vs/platform/actions/common/actions","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";function h(e){return e?{primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_E,d.KeyMod.CtrlCmd|d.KeyMod.Shift|_],mac:{primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_E,d.KeyMod.WinCtrl|d.KeyMod.Shift|_]}}:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E,d.KeyMod.CtrlCmd|_],mac:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E,d.KeyMod.WinCtrl|_]}}}var p=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i,this.order=100,this["class"]="quickopen"}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show(null),s.TPromise.as(!0)},t.ID="workbench.action.quickOpen",t.LABEL=n.localize(0,null),t=__decorate([__param(2,c.IQuickOpenService)],t)}(r.Action),f=function(e){function t(t,n,i,o){e.call(this,t,n),this.quickOpenService=i,this.keybindingService=o}return __extends(t,e),t.prototype.run=function(){var e=this.keybindingService.lookupKeybindings(this.id);return this.quickOpenService.show(null,{keybindings:e}),s.TPromise.as(!0)},t.ID="workbench.action.openPreviousEditor",t.LABEL=n.localize(1,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(r.Action),m=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.quickOpenService=o,this.keybindingService=r,this.navigateNext=i}return __extends(t,e),t.prototype.run=function(e){var t=this.keybindingService.lookupKeybindings(this.id);return this.quickOpenService.quickNavigate({keybindings:t},this.navigateNext),s.TPromise.as(!0)},t=__decorate([__param(3,c.IQuickOpenService),__param(4,u.IKeybindingService)],t)}(r.Action),v=function(e){function t(t,n,i,o){e.call(this,t,n,!0,i,o)}return __extends(t,e),t.ID="workbench.action.quickOpenNavigateNext",t.LABEL=n.localize(2,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(m),g=function(e){function t(t,n,i,o){e.call(this,t,n,!1,i,o)}return __extends(t,e),t.ID="workbench.action.quickOpenNavigatePrevious",t.LABEL=n.localize(3,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(m),y={primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E]},_=d.KeyCode.Tab,b={primary:d.KeyMod.CtrlCmd|_,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|_],mac:{primary:d.KeyMod.WinCtrl|_,secondary:[d.KeyMod.WinCtrl|d.KeyMod.Shift|_]}},S=o.Registry.as(i.Extensions.WorkbenchActions);S.registerWorkbenchAction(new l.SyncActionDescriptor(p,p.ID,p.LABEL,y)),S.registerWorkbenchAction(new l.SyncActionDescriptor(f,f.ID,f.LABEL,b)),S.registerWorkbenchAction(new l.SyncActionDescriptor(v,v.ID,v.LABEL,h(!1),u.KbExpr.has("inQuickOpen"))),S.registerWorkbenchAction(new l.SyncActionDescriptor(g,g.ID,g.LABEL,h(!0),u.KbExpr.has("inQuickOpen"),a.KeybindingsRegistry.WEIGHT.workbenchContrib(50)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/quickopen",["require","exports","vs/nls!vs/workbench/browser/quickopen","vs/base/common/winjs.base","vs/base/common/filters","vs/base/common/arrays","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/platform/platform","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/common/editor","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(){function e(){}return e.prototype.getResults=function(e){return i.TPromise.as(null)},e.prototype.getAriaLabel=function(){return null},e.prototype.getClass=function(){return null},e.prototype.canRun=function(){return!0},e.prototype.getAutoFocus=function(e){return{}},e.prototype.onClose=function(e){},e.prototype.getGroupLabel=function(){return null},e.prototype.getEmptyLabel=function(e){return e.length>0?n.localize(0,null):n.localize(1,null)},e}();t.QuickOpenHandler=m;var v=function(e){function t(t,n,i,o,r){void 0===r&&(r=!1),e.call(this,t,n),this.prefix=i,this.id=t+n,this.instantProgress=r,a.isString(o)?this.description=o:this.helpEntries=o}return __extends(t,e),t.prototype.getId=function(){return this.id},t}(f.AsyncDescriptor);t.QuickOpenHandlerDescriptor=v,t.Extensions={Quickopen:"workbench.contributions.quickopen"};var g=function(){function e(){this.handlers=[],this.defaultHandlers=[]}return e.prototype.registerQuickOpenHandler=function(e){this.handlers.push(e),this.handlers.sort(function(e,t){return t.prefix.length-e.prefix.length})},e.prototype.registerDefaultQuickOpenHandler=function(e){this.defaultHandlers.push(e)},e.prototype.getQuickOpenHandlers=function(){return this.handlers.slice(0)},e.prototype.getQuickOpenHandler=function(e){return e?r.first(this.handlers,function(t){return s.startsWith(e,t.prefix)},null):null},e.prototype.getDefaultQuickOpenHandlers=function(){return this.defaultHandlers},e}();u.Registry.add(t.Extensions.Quickopen,new g);var y=function(e){function t(t){e.call(this),this._editorService=t}return __extends(t,e),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),t.prototype.getInput=function(){return null},t.prototype.getOptions=function(){return null},t.prototype.run=function(e,t){if(e===l.Mode.OPEN){var n=t.event,i=n&&(n.ctrlKey||n.metaKey||n.payload&&n.payload.originalEvent&&(n.payload.originalEvent.ctrlKey||n.payload.originalEvent.metaKey)),o=this.getInput();return o instanceof h.EditorInput?this.editorService.openEditor(o,this.getOptions(),i).done(null,c.onUnexpectedError):this.editorService.openEditor(o,i).done(null,c.onUnexpectedError),!0}return!1},t}(d.QuickOpenEntry);t.EditorQuickOpenEntry=y;var _=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getInput=function(){return null},t.prototype.getOptions=function(){return null},t}(d.QuickOpenEntryGroup);t.EditorQuickOpenEntryGroup=_;var b=function(e){function t(t,n,i,o){e.call(this,o),this.quickOpenService=t,this.prefix=n,this.command=i,this.command=i}return __extends(t,e),t.prototype.getIcon=function(){return this.command.icon||null},t.prototype.getLabel=function(){return this.command.aliases[0]},t.prototype.getAriaLabel=function(){return n.localize(2,null,this.getLabel())},t.prototype.run=function(e,t){return e===l.Mode.PREVIEW?!1:(this.quickOpenService.show(this.prefix+" "+this.command.aliases[0]+" "),!1)},t}(d.QuickOpenEntry),S=function(e){function t(t,n){e.call(this),this.quickOpenService=t,this.prefix=n.prefix,this.commands=n.commands.map(function(e){return{regexp:new RegExp("^("+e.aliases.join("|")+")\\b\\W+"),command:e}}),this.defaultCommand=n.defaultCommand||null}return __extends(t,e),t.prototype.getResults=function(e){var t,n,i=r.first(this.commands,function(n){return!!(t=e.match(n.regexp))});return n=i?i.command.getResults(e.substr(t[0].length)):this.defaultCommand?this.defaultCommand.getResults(e):this.getCommands(e),n.then(function(e){return new d.QuickOpenModel(e)})},t.prototype.getCommands=function(e){var t=this,n=this.commands.map(function(t){return{command:t.command,highlights:o.matchesFuzzy(e,t.command.aliases[0])}}).filter(function(t){var n=t.command,i=t.highlights;return!!i||n.aliases.some(function(t){return e===t})}).map(function(e){var n=e.command,i=e.highlights;return new b(t.quickOpenService,t.prefix,n,i)});return i.TPromise.as(n)},t.prototype.getClass=function(){return null},t.prototype.canRun=function(){return!0},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t.prototype.onClose=function(e){},t.prototype.getGroupLabel=function(){return null},t.prototype.getEmptyLabel=function(e){var t,i=r.first(this.commands,function(n){return!!(t=e.match(n.regexp))});return i?i.command.getEmptyLabel(e):n.localize(3,null)},t=__decorate([__param(0,p.IQuickOpenService)],t)}(m);t.CommandQuickOpenHandler=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerEditorActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/triggerEditorActions","vs/base/common/types","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/platform/platform","vs/workbench/common/editor","vs/workbench/browser/actionBarRegistry","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/part/common/partService","vs/platform/editor/common/editor","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){
"use strict";function _(e){if(e instanceof d.QuickOpenEntryGroup){var t=e;t.getEntry()&&(e=t.getEntry())}return e instanceof h.EditorQuickOpenEntry||e instanceof h.EditorQuickOpenEntryGroup?e:null}var b="workbench.action.splitEditor",S=i.localize(0,null),E=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!t)return n.TPromise.as(!0);if(!t.supportsSplitEditor())return n.TPromise.as(!0);var i,r=this.editorService.getVisibleEditors(),s=r.length;switch(s){case 1:i=v.Position.CENTER;break;case 2:if(t.position===v.Position.CENTER)i=v.Position.RIGHT;else if(t.position===v.Position.LEFT&&u.getUntitledOrFileResource(t.input)){var a=r[v.Position.CENTER].input,c=new u.TextEditorOptions;return c.preserveFocus=!0,this.editorService.openEditor(t.input,c,v.Position.CENTER).then(function(){return e.editorService.openEditor(a,c,v.Position.RIGHT).then(function(){return e.editorService.focusEditor(v.Position.CENTER)})})}}return!o.isUndefinedOrNull(i)&&u.getUntitledOrFileResource(t.input)?this.editorService.openEditor(t.input,null,i):n.TPromise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.SplitEditorAction=E;var w="workbench.action.cycleEditor",C=i.localize(1,null),T=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(!e)return n.TPromise.as(!1);var t=this.editorService.getVisibleEditors(),i=t.length,o=(e.position+1)%i;return this.editorService.focusEditor(o)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.CycleEditorAction=T;var k="workbench.action.focusFirstEditor",x=i.localize(2,null),I=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){for(var e=this,t=this.editorService.getVisibleEditors(),i=0,o=t;i<o.length;i++){var r=o[i];if(r.position===v.Position.LEFT)return this.editorService.focusEditor(r)}for(var s=this.quickOpenService.getEditorHistory(),a=0,c=s;a<c.length;a++){var l=c[a];if(u.getUntitledOrFileResource(l))return this.editorService.openEditor(l,null,v.Position.LEFT).then(function(){l.matches(e.editorService.getActiveEditorInput())||e.quickOpenService.removeEditorHistoryEntry(l)})}return n.TPromise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(r.Action);t.FocusFirstEditorAction=I;var D=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){for(var e,t=this,i=this.editorService.getVisibleEditors(),o=0;o<i.length;o++){var r=i[o];if(r.position===this.getTargetEditorSide())return this.editorService.focusEditor(r);r.position===this.getReferenceEditorSide()&&(e=r)}if(e&&e.supportsSplitEditor())return this.editorService.openEditor(e.input,null,this.getTargetEditorSide());if(e)for(var s=this.quickOpenService.getEditorHistory(),a=0,c=s;a<c.length;a++){var l=c[a];if(u.getUntitledOrFileResource(l))return this.editorService.openEditor(l,null,this.getTargetEditorSide()).then(function(){l.matches(t.editorService.getActiveEditorInput())||t.quickOpenService.removeEditorHistoryEntry(l)})}return n.TPromise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(r.Action);t.BaseFocusSideEditorAction=D;var A="workbench.action.focusSecondEditor",L=i.localize(3,null),O=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.getReferenceEditorSide=function(){return v.Position.LEFT},t.prototype.getTargetEditorSide=function(){return v.Position.CENTER},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(D);t.FocusSecondEditorAction=O;var M="workbench.action.focusThirdEditor",P=i.localize(4,null),R=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.getReferenceEditorSide=function(){return v.Position.CENTER},t.prototype.getTargetEditorSide=function(){return v.Position.RIGHT},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(D);t.FocusThirdEditorAction=R;var N="workbench.action.focusLeftEditor",F=i.localize(5,null),W=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(!e)return n.TPromise.as(!0);var t=v.Position.LEFT;e.position===v.Position.RIGHT&&(t=v.Position.CENTER);var i=this.editorService.getVisibleEditors();return this.editorService.focusEditor(i[t])},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.NavigateToLeftEditorAction=W;var H="workbench.action.focusRightEditor",V=i.localize(6,null),K=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.navigateActions=[],this.navigateActions[v.Position.LEFT]=o.createInstance(I,k,x),this.navigateActions[v.Position.CENTER]=o.createInstance(O,A,L),this.navigateActions[v.Position.RIGHT]=o.createInstance(R,M,P)}return __extends(t,e),t.prototype.run=function(e){var t,i=this.editorService.getActiveEditor();return i?i.position===v.Position.LEFT?t=v.Position.CENTER:i.position===v.Position.CENTER&&(t=v.Position.RIGHT):t=v.Position.LEFT,!o.isUndefinedOrNull(t)&&this.navigateActions[t]?this.navigateActions[t].run(e):n.TPromise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,g.IInstantiationService)],t)}(r.Action);t.NavigateToRightEditorAction=K;var B=function(e){function t(n){e.call(this,t.OPEN_TO_SIDE_ID,t.OPEN_TO_SIDE_LABEL),this.editorService=n,this["class"]="quick-open-sidebyside",this.updateEnablement()}return __extends(t,e),t.prototype.updateEnablement=function(){var e=this.editorService.getActiveEditor();this.enabled=!e||e.position!==v.Position.RIGHT},t.prototype.run=function(e){var t=this,i=_(e);if(i){var o=void 0,r=i.getInput();return o=r instanceof u.EditorInput?n.TPromise.as(r):this.editorService.inputToType(r),o.then(function(e){return t.editorService.openEditor(e,i.getOptions(),!0)})}return n.TPromise.as(!1)},t.OPEN_TO_SIDE_ID="workbench.action.openToSide",t.OPEN_TO_SIDE_LABEL=i.localize(7,null),t=__decorate([__param(0,p.IWorkbenchEditorService)],t)}(r.Action);t.OpenToSideAction=B;var U=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActions=function(e){var t=this.getEntry(e);return!!t},t.prototype.getActions=function(e){var t=[],n=this.getEntry(e);return n&&(this.openToSideActionInstance||(this.openToSideActionInstance=this.instantiationService.createInstance(B)),t.push(this.openToSideActionInstance)),t},t.prototype.getEntry=function(e){return e&&e.element?_(e.element):null},t=__decorate([__param(0,g.IInstantiationService)],t)}(l.ActionBarContributor),z=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();return e?this.editorService.closeEditor(e):n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.CloseEditorAction=z;var j="workbench.action.closeAllEditors",q=i.localize(8,null),G=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.closeEditors()},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.CloseAllEditorsAction=G;var Y="workbench.action.closeOtherEditors",$=i.localize(9,null),X=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.closeEditors(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.CloseOtherEditorsAction=X;var Q="workbench.action.moveActiveEditorLeft",Z=i.localize(10,null),J=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(e&&(e.position===v.Position.CENTER||e.position===v.Position.RIGHT)){var t=e.position===v.Position.CENTER?v.Position.LEFT:v.Position.CENTER;this.editorService.moveEditor(e.position,t)}return n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.MoveEditorLeftAction=J;var ee="workbench.action.moveActiveEditorRight",te=i.localize(11,null),ne=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getVisibleEditors(),t=this.editorService.getActiveEditor();if(2===e.length&&t.position===v.Position.LEFT||3===e.length&&t.position!==v.Position.RIGHT){var i=t.position===v.Position.LEFT?v.Position.CENTER:v.Position.RIGHT;this.editorService.moveEditor(t.position,i)}return n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.MoveEditorRightAction=ne;var ie="workbench.action.minimizeOtherEditors",oe=i.localize(12,null),re=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.arrangeEditors(p.EditorArrangement.MINIMIZE_OTHERS),n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.MinimizeOtherEditorsAction=re;var se="workbench.action.evenEditorWidths",ae=i.localize(13,null),ce=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.arrangeEditors(p.EditorArrangement.EVEN_WIDTH),n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(r.Action);t.EvenEditorWidthsAction=ce;var ue="workbench.action.maximizeEditor",le=i.localize(14,null),de=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.partService=o}return __extends(t,e),t.prototype.run=function(){return this.editorService.getActiveEditor()&&(this.editorService.arrangeEditors(p.EditorArrangement.MINIMIZE_OTHERS),this.partService.setSideBarHidden(!0)),n.TPromise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,m.IPartService)],t)}(r.Action);t.MaximizeEditorAction=de;var he=c.Registry.as(l.Extensions.Actionbar);he.registerActionBarContributor(l.Scope.VIEWER,U);var pe=i.localize(15,null),fe=c.Registry.as(a.Extensions.WorkbenchActions);fe.registerWorkbenchAction(new s.SyncActionDescriptor(G,j,q),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(X,Y,$),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(E,b,S,{primary:y.KeyMod.CtrlCmd|y.KeyCode.US_BACKSLASH}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(T,w,C,{primary:y.KeyMod.CtrlCmd|y.KeyCode.US_BACKTICK,mac:{primary:null}}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(I,k,x,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_1}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(O,A,L,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_2}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(R,M,P,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_3}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(ce,se,ae),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(de,ue,le),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(re,ie,oe),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(J,Q,Z,{primary:y.KeyMod.chord(y.KeyMod.CtrlCmd|y.KeyCode.KEY_K,y.KeyCode.LeftArrow)}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(ne,ee,te,{primary:y.KeyMod.chord(y.KeyMod.CtrlCmd|y.KeyCode.KEY_K,y.KeyCode.RightArrow)}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(W,N,F,{primary:y.KeyMod.CtrlCmd|y.KeyMod.Alt|y.KeyCode.LeftArrow,linux:{primary:y.KeyMod.CtrlCmd|y.KeyMod.Shift|y.KeyMod.Alt|y.KeyCode.LeftArrow}}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(K,H,V,{primary:y.KeyMod.CtrlCmd|y.KeyMod.Alt|y.KeyCode.RightArrow,linux:{primary:y.KeyMod.CtrlCmd|y.KeyMod.Shift|y.KeyMod.Alt|y.KeyCode.RightArrow}}),pe)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/quickopen/editorHistoryModel",["require","exports","vs/nls!vs/workbench/browser/parts/quickopen/editorHistoryModel","vs/platform/platform","vs/base/common/filters","vs/base/common/types","vs/base/common/paths","vs/base/common/labels","vs/base/common/events","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/common/editor","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/quickopen"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=200,m=function(e){function t(t,n,i,o,r,s){e.call(this,t),this.contextService=n,this.input=i,this.model=s,this.resource=d.getUntitledOrFileResource(i),this.setHighlights(o,r)}return __extends(t,e),t.prototype.clone=function(e,n){return new t(this.editorService,this.contextService,this.input,e,n,this.model)},t.prototype.getPrefix=function(){var e=this.input.getStatus();return e&&e.decoration?e.decoration+" ":void 0},t.prototype.getLabel=function(){return this.input.getName()},t.prototype.getAriaLabel=function(){return n.localize(0,null,this.getLabel())},t.prototype.getDescription=function(){return this.input.getDescription()},t.prototype.getResource=function(){return this.resource},t.prototype.getInput=function(){return this.input},t.prototype.matches=function(e){return this.input.matches(e)},t.prototype.run=function(e,t){var n=this;if(e===u.Mode.OPEN){var i=t.event,o=!t.quickNavigateConfiguration&&i&&(i.ctrlKey||i.metaKey||i.payload&&i.payload.originalEvent&&(i.payload.originalEvent.ctrlKey||i.payload.originalEvent.metaKey));return this.editorService.openEditor(this.input,null,o).done(function(){n.input.matches(n.editorService.getActiveEditorInput())||n.model.remove(n.input)}),!0}return!1},t}(p.EditorQuickOpenEntry);t.EditorHistoryEntry=m;var v=function(e){function t(t,n,i){e.call(this),this.editorService=t,this.instantiationService=n,this.contextService=i}return __extends(t,e),t.prototype.add=function(e){var t=this;if(e.getName()){var n=e.addListener(c.EventType.DISPOSE,function(){t.remove(e),n()});this.remove(e),this.entries.unshift(new m(this.editorService,this.contextService,e,null,null,this)),this.entries.length>f&&(this.entries=this.entries.slice(0,f))}},t.prototype.remove=function(e){var t=this.indexOf(e);t>=0&&this.entries.splice(t,1)},t.prototype.indexOf=function(e){for(var t=0;t<this.entries.length;t++){var n=this.entries[t];if(n.matches(e))return t}return-1},t.prototype.saveTo=function(e){for(var t=i.Registry.as(h.Extensions.Editors),n=[],o=this.entries.length-1;o>=0;o--){var s=this.entries[o],a=s.getInput(),c=t.getEditorInputFactory(a.getId());if(c){var u=c.serialize(a);r.isString(u)&&n.push({id:a.getId(),value:u})}}n.length>0&&(e.entries=n)},t.prototype.loadFrom=function(e){var t=i.Registry.as(h.Extensions.Editors),n=e.entries;if(n&&n.length>0)for(var o=0;o<n.length;o++){var s=n[o],a=t.getEditorInputFactory(s.id);if(a&&r.isString(s.value)){var c=a.deserialize(this.instantiationService,s.value);c&&this.add(c)}}},t.prototype.getEntries=function(){return this.entries.slice(0)},t.prototype.getResults=function(e){e=e.trim();for(var t=e.indexOf(s.nativeSep)>=0,n=[],i=0;i<this.entries.length;i++){var r=this.entries[i];if(r.getResource()){var c=t?a.getPathLabel(r.getResource(),this.contextService):r.getLabel();if(o.matchesFuzzy(e,c)){var u=l.QuickOpenEntry.highlight(r,e),d=u.labelHighlights,h=u.descriptionHighlights;n.push(r.clone(d,h))}}}return n.sort(function(t,n){return l.QuickOpenEntry.compare(t,n,e)})},t}(l.QuickOpenModel);t.EditorHistoryModel=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/quickopen/quickOpenController",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/quickopen/quickOpenController","vs/base/browser/builder","vs/base/common/strings","vs/base/common/filters","vs/base/common/uuid","vs/base/common/types","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/base/parts/quickopen/browser/quickOpenWidget","vs/workbench/browser/actionBarRegistry","vs/platform/platform","vs/workbench/common/component","vs/workbench/common/events","vs/base/common/event","vs/workbench/common/constants","vs/workbench/common/memento","vs/workbench/browser/quickopen","vs/workbench/browser/parts/quickopen/editorHistoryModel","vs/base/common/errors","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/message/common/message","vs/css!./media/quickopen"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w){"use strict";var C="workbench.component.quickopen",T="quickopen.editorhistory",k="?",x=5,I="inQuickOpen",D=function(e){function t(t,n,i,o,r,s,a,c){e.call(this,C),this.eventService=t,this.storageService=n,this.editorService=i,this.viewletService=o,this.messageService=r,this.telemetryService=s,this.contextService=a,this.serviceId=E.IQuickOpenService,this.actionProvider=new h.ContributableActionProvider,this.previousValue="",this.mapResolvedHandlersToPrefix={},this.autoSaveHistoryCounter=0,this.promisesToCompleteOnHide=[],this.inQuickOpenMode=c.createKey(I,!1),this._onShow=new v.Emitter,this._onHide=new v.Emitter}return __extends(t,e),Object.defineProperty(t.prototype,"onShow",{get:function(){return this._onShow.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide",{get:function(){return this._onHide.event},enumerable:!0,configurable:!0}),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.getEditorHistoryModel=function(){return this.editorHistoryModel},t.prototype.create=function(){var e=this;this.toUnbind.push(this.eventService.addListener(m.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)})),this.toUnbind.push(this.eventService.addListener(m.EventType.EDITOR_SET_INPUT_ERROR,function(t){return e.onEditorInputSetError(t)})),this.editorHistoryModel=new b.EditorHistoryModel(this.editorService,this.instantiationService,this.contextService),this.memento=this.getMemento(this.storageService,y.Scope.WORKSPACE),this.memento[T]&&this.editorHistoryModel.loadFrom(this.memento[T])},t.prototype.onEditorInputChanging=function(e){if(e.editorInput){var t=this.editorService.getActiveEditor();if(t&&e.editor&&t!==e.editor)return;this.editorHistoryModel.add(e.editorInput),this.autoSaveHistoryCounter++>=x&&(this.saveEditorHistory(!0),this.autoSaveHistoryCounter=0)}},t.prototype.onEditorInputSetError=function(e){e.editorInput&&this.removeEditorHistoryEntry(e.editorInput)},t.prototype.getEditorHistory=function(){return this.editorHistoryModel?this.editorHistoryModel.getEntries().map(function(e){return e.getInput()}):[]},t.prototype.removeEditorHistoryEntry=function(e){this.editorHistoryModel.remove(e)},t.prototype.quickNavigate=function(e,t){this.quickOpenWidget&&this.quickOpenWidget.quickNavigate(e,t)},t.prototype.input=function(e){var t,o=this,r=e&&e.prompt?i.localize(0,null,e.prompt):i.localize(1,null),s=r,a=n.TPromise.as(!0),c=e&&e.value||"",u=function(i,l){o.doPick(n.TPromise.as([{label:s}]),{ignoreFocusLost:!0,autoFocus:{autoFocusFirstEntry:!0},password:e.password,placeHolder:e.placeHolder,value:e.value,inputDecoration:t,onDidType:function(o){c=o,e.validateInput&&(a&&a.cancel(),a=n.TPromise.timeout(100).then(function(){return e.validateInput(o).then(function(e){t=e?w.Severity.Error:void 0;var o=e||r;return o!==s&&(s=o,i(new n.TPromise(u))),!e})},function(e){}))}}).then(i,l)};return new n.TPromise(u).then(function(e){return a.then(function(t){return t&&e?c:void 0})})},t.prototype.pick=function(e,t){var i=this;t||(t=Object.create(null));var o;if(Array.isArray(e))o=n.TPromise.as(e);else{if(!n.TPromise.is(e))throw new Error("illegal input");o=e}var r=!1,s=o.then(function(e){return e.map(function(e){return"string"==typeof e?(r=!0,{label:e}):e})});return new n.TPromise(function(e,n,o){function a(e){return e&&r?e.label:e}i.doPick(s,t).then(function(t){return e(a(t))},function(e){return n(e)},function(e){return o(a(e))})})},t.prototype.doPick=function(e,t){var u=this,h=t.autoFocus,p=a.generateUuid();return this.currentPickerToken=p,this.pickOpenWidget?this.pickOpenWidget.setPlaceHolder(t.placeHolder||""):(this.pickOpenWidget=new d.QuickOpenWidget(o.withElementById(g.Identifiers.WORKBENCH_CONTAINER).getHTMLElement(),{onOk:function(){},onCancel:function(){},onType:function(e){},onShow:function(){return u.emitQuickOpenVisibilityChange(!0)},onHide:function(){u.restoreFocus(),u.emitQuickOpenVisibilityChange(!1)}},{inputPlaceHolder:t.placeHolder||""},this.telemetryService),this.pickOpenWidget.create()),t.value&&this.pickOpenWidget.setValue(t.value),this.pickOpenWidget.setPassword(t.password),c.isUndefinedOrNull(t.inputDecoration)?this.pickOpenWidget.clearInputDecoration():this.pickOpenWidget.showInputDecoration(t.inputDecoration),this.layoutDimensions&&this.pickOpenWidget.layout(this.layoutDimensions),new n.TPromise(function(o,a,c){var d=!1;e.then(function(e){if(u.currentPickerToken===p){d=!0,u.pickOpenWidget.getProgressBar().stop().getContainer().hide();var n=new l.QuickOpenModel,a=e.map(function(e){var t=e;return t.height&&t.render?new O(t.label,t.description,t.height,t.render.bind(t),function(){return c(e)}):new L(t.label,t.description,t.detail,function(){return c(e)},t.separator&&t.separator.border,t.separator&&t.separator.label)});0===e.length&&a.push(new L(i.localize(2,null))),n.setEntries(a),u.pickOpenWidget.setCallbacks({onOk:function(){if(0===e.length)return o(null);var t=-1;a.forEach(function(e,n){e.selected&&(t=n)}),o(e[t]||null)},onCancel:function(){return o(void 0)},onFocusLost:function(){return t.ignoreFocusLost},onType:function(i){return t.onDidType?void t.onDidType(i):void(0!==e.length&&(i=i?r.trim(i):i,i?a.forEach(function(e){var n=s.matchesFuzzy(i,e.getLabel()),o=t.matchOnDescription&&s.matchesFuzzy(i,e.getDescription()),r=t.matchOnDetail&&e.getDetail()&&s.matchesFuzzy(i,e.getDetail());n||o||r?(e.setHighlights(n,o,r),e.setHidden(!1)):(e.setHighlights(null,null,null),e.setHidden(!0))}):a.forEach(function(e){e.setHighlights(null),e.setHidden(!1)}),u.pickOpenWidget.refresh(n,i?{autoFocusFirstEntry:!0}:h)))},onShow:function(){u.emitQuickOpenVisibilityChange(!0)},onHide:function(){u.restoreFocus(),u.emitQuickOpenVisibilityChange(!1)}}),u.pickOpenWidget.isVisible()?u.pickOpenWidget.setInput(n,h):u.pickOpenWidget.show(n,h)}},function(e){u.pickOpenWidget.hide(),a(e)}),n.TPromise.timeout(800).then(function(){d||u.currentPickerToken!==p||u.pickOpenWidget.getProgressBar().infinite().getContainer().show()}),d||u.pickOpenWidget.show(new l.QuickOpenModel)})},t.prototype.emitQuickOpenVisibilityChange=function(e){var t=this;this.visibilityChangeTimeoutHandle&&window.clearTimeout(this.visibilityChangeTimeoutHandle),this.visibilityChangeTimeoutHandle=setTimeout(function(){e?t._onShow.fire():t._onHide.fire(),t.visibilityChangeTimeoutHandle=void 0},100)},t.prototype.refresh=function(e){return this.quickOpenWidget.isVisible()?e&&this.previousValue!==e?n.TPromise.as(null):this.show(this.previousValue):n.TPromise.as(null)},t.prototype.show=function(e,t){var r=this;this.previousValue=e;var s=new n.TPromise(function(e){r.promisesToCompleteOnHide.push(e)}),a=p.Registry.as(_.Extensions.Quickopen),c=a.getQuickOpenHandler(e);if(!c){var u=a.getDefaultQuickOpenHandlers();u.length>0&&(c=u[0])}if(c&&this.telemetryService.publicLog("quickOpenWidgetShown",{mode:c.getId(),quickNavigate:!!t}),this.quickOpenWidget||(this.quickOpenWidget=new d.QuickOpenWidget(o.withElementById(g.Identifiers.WORKBENCH_CONTAINER).getHTMLElement(),{onOk:function(){return r.onClose(!1)},onCancel:function(){return r.onCancel()},onType:function(e){return r.onType(e||"")},onShow:function(){r.inQuickOpenMode.set(!0),r.emitQuickOpenVisibilityChange(!0)},onHide:function(){for(r.inQuickOpenMode.reset();r.promisesToCompleteOnHide.length;)r.promisesToCompleteOnHide.pop()(!0);r.restoreFocus(),r.emitQuickOpenVisibilityChange(!1)}},{inputPlaceHolder:this.hasHandler(k)?i.localize(3,null):""},this.telemetryService),this.quickOpenWidget.create()),this.layoutDimensions&&this.quickOpenWidget.layout(this.layoutDimensions),!this.quickOpenWidget.isVisible()||t)if(e)this.quickOpenWidget.show(e);else{var l=this.getEditorHistoryModelWithGroupLabel();l.getEntries().length<2&&(t=null);var h=void 0;if(t){var f=this.editorService.getVisibleEditors().length;h={autoFocusFirstEntry:0===f,autoFocusSecondEntry:0!==f}}else h={autoFocusFirstEntry:!0};this.quickOpenWidget.show(l,h,t)}else this.quickOpenWidget.show(e||"");return s},t.prototype.hasHandler=function(e){return!!p.Registry.as(_.Extensions.Quickopen).getQuickOpenHandler(e)},t.prototype.getEditorHistoryModelWithGroupLabel=function(){var e=this.editorHistoryModel.getEntries();return e.length>0&&(e[0]=new l.QuickOpenEntryGroup(e[0],i.localize(4,null),!1)),new l.QuickOpenModel(e,this.actionProvider)},t.prototype.onCancel=function(e){void 0===e&&(e=!0),e&&this.onClose(!0)},t.prototype.onClose=function(e){this.previousActiveHandlerDescriptor=null;for(var t in this.mapResolvedHandlersToPrefix)if(this.mapResolvedHandlersToPrefix.hasOwnProperty(t)){var n=this.mapResolvedHandlersToPrefix[t];n.onClose(e)}},t.prototype.restoreFocus=function(){var e=this.editorService.getActiveEditor();e&&e.focus()},t.prototype.onType=function(e){var t=this;this.previousValue=e;var i=a.generateUuid();this.currentResultToken=i,this.quickOpenWidget.getProgressBar().stop().getContainer().hide(),this.quickOpenWidget.setExtraClass(null);var o=r.trim(e);if(!o)return void this.quickOpenWidget.setInput(this.getEditorHistoryModelWithGroupLabel(),{autoFocusFirstEntry:!0});var s,u=!1,l=p.Registry.as(_.Extensions.Quickopen),d=l.getQuickOpenHandler(e);if(d)s=this.handleSpecificHandler(d,e,i);else{var h=l.getDefaultQuickOpenHandlers();s=this.handleDefaultHandlers(h,e,i)}this.previousActiveHandlerDescriptor=d,n.TPromise.timeout(d&&d.instantProgress?0:800).then(function(){u||i!==t.currentResultToken||t.quickOpenWidget.getProgressBar().infinite().getContainer().show()}),s.done(function(){u=!0,i===t.currentResultToken&&t.quickOpenWidget.getProgressBar().getContainer().hide()},function(e){u=!0,S.onUnexpectedError(e),t.messageService.show(w.Severity.Error,c.isString(e)?new Error(e):e)})},t.prototype.handleDefaultHandlers=function(e,t,o){var r=this,s=this.editorHistoryModel.getResults(t);s.length>0&&(s[0]=new l.QuickOpenEntryGroup(s[0],i.localize(5,null),!1));var a=new l.QuickOpenModel(s,this.actionProvider);if(this.quickOpenWidget.setInput(a,{autoFocusFirstEntry:!0}),0===e.length)return n.TPromise.as(null);var u=[];return e.forEach(function(e){u.push(r.resolveHandler(e))}),n.TPromise.join(u).then(function(e){var i=[];return e.forEach(function(e){var n=e.canRun();c.isUndefinedOrNull(n)||"boolean"==typeof n&&!n||"string"==typeof n||i.push(e.getResults(t).then(function(t){if(r.currentResultToken===o){var n=t&&t.entries;n||(n=[]),r.mergeResults(a,n,e.getGroupLabel())}}))}),n.TPromise.join(i).then(function(){})})},t.prototype.mergeResults=function(e,t,n){for(var o=this.mapEntriesToResource(e),r=[],s=0;s<t.length;s++){var a=t[s],c=a.getResource();c&&o[c.toString()]||r.push(a)}if(r.length>0){var u=e.getEntries().length>0;r[0]=new l.QuickOpenEntryGroup(r[0],n,u),e.addEntries(r),this.quickOpenWidget.refresh(e,{autoFocusFirstEntry:!0})}else 0===e.getEntries().length&&(e.addEntries([new A(i.localize(6,null))]),this.quickOpenWidget.refresh(e,{autoFocusFirstEntry:!0}))},t.prototype.handleSpecificHandler=function(e,t,o){var r=this;return this.resolveHandler(e).then(function(s){t=t.substr(e.prefix.length);var a=s.canRun();if(c.isUndefinedOrNull(a)||"boolean"==typeof a&&!a||"string"==typeof a){var u="string"==typeof a?a:i.localize(7,null),d=new l.QuickOpenModel([new A(u)],r.actionProvider);return r.showModel(d,s.getAutoFocus(t),s.getAriaLabel()),n.TPromise.as(null)}var h=s.getClass();return h&&r.quickOpenWidget.setExtraClass(h),r.previousActiveHandlerDescriptor!==e&&r.clearModel(),s.getResults(t).then(function(e){if(r.currentResultToken===o)if(e&&e.entries.length)r.showModel(e,s.getAutoFocus(t),s.getAriaLabel());else{var n=new l.QuickOpenModel([new A(s.getEmptyLabel(t))]);r.showModel(n,s.getAutoFocus(t),s.getAriaLabel())}})})},t.prototype.showModel=function(e,t,n){return this.quickOpenWidget.getInput()===e?void this.quickOpenWidget.refresh(e,t):void this.quickOpenWidget.setInput(e,t,n)},t.prototype.clearModel=function(){this.showModel(new l.QuickOpenModel,null)},t.prototype.mapEntriesToResource=function(e){var t=e.getEntries(),n={};return t.forEach(function(e){e.getResource()&&(n[e.getResource().toString()]=e)}),n},t.prototype.resolveHandler=function(e){var t=this,i=e.getId();return this.mapResolvedHandlersToPrefix[i]?n.TPromise.as(this.mapResolvedHandlersToPrefix[i]):this.instantiationService.createInstance(e).then(function(e){return t.mapResolvedHandlersToPrefix[i]=e,e},function(t){return n.TPromise.wrapError("Unable to instanciate quick open handler "+e.moduleName+" - "+e.ctorName+": "+JSON.stringify(t))})},t.prototype.shutdown=function(){this.saveEditorHistory(!1),e.prototype.shutdown.call(this)},t.prototype.saveEditorHistory=function(e){this.memento[T]||(this.memento[T]={}),this.editorHistoryModel.saveTo(this.memento[T]),e&&this.saveMemento()},t.prototype.layout=function(e){this.layoutDimensions=e,this.quickOpenWidget&&this.quickOpenWidget.layout(this.layoutDimensions),this.pickOpenWidget&&this.pickOpenWidget.layout(this.layoutDimensions)},t.prototype.dispose=function(){this.quickOpenWidget&&this.quickOpenWidget.dispose(),this.pickOpenWidget&&this.pickOpenWidget.dispose(),e.prototype.dispose.call(this)},t}(f.WorkbenchComponent);t.QuickOpenController=D;var A=function(e){function t(t){e.call(this),this.placeHolderLabel=t}return __extends(t,e),t.prototype.getLabel=function(){return this.placeHolderLabel},t}(l.QuickOpenEntryGroup),L=function(e){function t(t,n,i,o,r,s){e.call(this,t),this.onPreview=o,this.hasSeparator=r,this.separatorLabel=s,this.description=n,this.detail=i}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),t.prototype.getDescription=function(){return this.description},t.prototype.getDetail=function(){return this.detail},t.prototype.showBorder=function(){return this.hasSeparator},t.prototype.getGroupLabel=function(){return this.separatorLabel},t.prototype.run=function(e,t){return e===u.Mode.OPEN?(this._selected=!0,!0):(e===u.Mode.PREVIEW&&this.onPreview&&this.onPreview(),!1)},t}(A),O=function(e){function t(t,n,i,o,r){e.call(this),this.label=t,this.description=n,this.height=i,this.renderFn=o,this.onPreview=r}return __extends(t,e),t.prototype.getHeight=function(){return this.height},t.prototype.render=function(e,t,n){return this.renderFn(e,t,n)},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),t.prototype.getLabel=function(){return this.label},t.prototype.getDescription=function(){return this.description},t.prototype.run=function(e,t){return e===u.Mode.OPEN?(this._selected=!0,!0):(e===u.Mode.PREVIEW&&this.onPreview&&this.onPreview(),!1)},t}(l.QuickOpenEntryItem)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsWidgets",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWidgets","vs/base/common/severity","vs/base/common/async","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/errors","vs/base/common/objects","vs/workbench/parts/output/common/output","vs/platform/extensions/common/extensions","vs/platform/instantiation/common/instantiation","vs/workbench/parts/extensions/common/extensions","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/parts/extensions/common/extensionsUtil"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){
"use strict";function m(e,t){return e.publisher===t.publisher&&e.name===t.name}var v={errors:[],installing:[],outdated:[]},g=3e5,y=function(){function e(e,t,n,i,r){this.extensionService=e,this.outputService=t,this.extensionsService=n,this.instantiationService=i,this.quickOpenService=r,this.state=v,this.outdatedDelayer=new o.ThrottledDelayer(g)}return e.prototype.render=function(e){var t=this;this.domNode=r.append(e,r.emmet("a.extensions-statusbar")),r.append(this.domNode,r.emmet(".icon")),this.domNode.onclick=function(){return t.onClick()},this.checkErrors(),this.checkOutdated();var n=[];return this.extensionsService.onInstallExtension(this.onInstallExtension,this,n),this.extensionsService.onDidInstallExtension(this.onDidInstallExtension,this,n),this.extensionsService.onDidUninstallExtension(this.onDidUninstallExtension,this,n),s.combinedDispose.apply(void 0,n)},e.prototype.updateState=function(e){this.state=c.assign(this.state,e),this.onStateChange()},Object.defineProperty(e.prototype,"hasErrors",{get:function(){return this.state.errors.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstalling",{get:function(){return this.state.installing.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUpdates",{get:function(){return this.state.outdated.length>0},enumerable:!0,configurable:!0}),e.prototype.onStateChange=function(){if(r.toggleClass(this.domNode,"has-errors",this.hasErrors),r.toggleClass(this.domNode,"is-installing",!this.hasErrors&&this.isInstalling),r.toggleClass(this.domNode,"has-updates",!this.hasErrors&&!this.isInstalling&&this.hasUpdates),this.hasErrors){var e=n.localize(0,null),t=n.localize(1,null,this.state.errors.length);this.domNode.title=this.state.errors.length>1?t:e}else if(this.isInstalling)this.domNode.title=n.localize(2,null,this.state.installing.length);else if(this.hasUpdates){var e=n.localize(3,null),t=n.localize(4,null,this.state.outdated.length);this.domNode.title=this.state.outdated.length>1?t:e}else this.domNode.title=n.localize(5,null)},e.prototype.onClick=function(){this.hasErrors?(this.showErrors(this.state.errors),this.updateState({errors:[]})):this.hasUpdates?this.quickOpenService.show("ext update "):this.quickOpenService.show(">"+h.ExtensionsLabel+": ")},e.prototype.showErrors=function(e){var t=this,n=a.onUnexpectedPromiseError(this.extensionsService.getInstalled());n.done(function(n){e.forEach(function(e){var i=n.filter(function(t){return t.path===e.source}).pop(),o=i&&i.name,r=o?o+": "+e.message:e.message;t.outputService.append(h.ExtensionsLabel,r),t.outputService.showOutput(h.ExtensionsLabel,!0)})})},e.prototype.onInstallExtension=function(e){var t=this.state.installing.concat([e]);this.updateState({installing:t})},e.prototype.onDidInstallExtension=function(e){var t=this,n=e.extension,i=this.state.installing.filter(function(e){return!m(n,e)});this.updateState({installing:i}),this.outdatedDelayer.trigger(function(){return t.checkOutdated()},0)},e.prototype.onDidUninstallExtension=function(){var e=this;this.outdatedDelayer.trigger(function(){return e.checkOutdated()},0)},e.prototype.checkErrors=function(){var e=this,t=a.onUnexpectedPromiseError(this.extensionService.onReady());t.done(function(){var t=e.extensionService.getExtensionsStatus(),n=Object.keys(t).map(function(e){return t[e].messages}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.type>i["default"].Info});e.updateState({errors:n})})},e.prototype.checkOutdated=function(){var e=this;return this.instantiationService.invokeFunction(f.getOutdatedExtensions).then(null,function(e){return[]}).then(function(t){e.updateState({outdated:t}),e.outdatedDelayer.trigger(function(){return e.checkOutdated()})})},e=__decorate([__param(0,l.IExtensionService),__param(1,u.IOutputService),__param(2,h.IExtensionsService),__param(3,d.IInstantiationService),__param(4,p.IQuickOpenService)],e)}();t.ExtensionsStatusbarItem=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitQuickOpen",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitQuickOpen","vs/base/common/filters","vs/base/common/winjs.base","vs/base/common/severity","vs/workbench/parts/git/common/git","vs/workbench/browser/quickopen","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=s.IGitService,p=function(e){function t(t,n,i,o){e.call(this,o),this.gitService=t,this.messageService=n,this.head=i}return __extends(t,e),t.prototype.getIcon=function(){return"git"},t.prototype.getLabel=function(){return this.head.name},t.prototype.getDescription=function(){return""},t.prototype.getAriaLabel=function(){return n.localize(0,null,this.getLabel())},t.prototype.run=function(e,t){return e!==c.Mode.PREVIEW},t}(u.QuickOpenEntry),f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(1,null,this.head.commit.substr(0,8))},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.checkout(this.head.name).done(null,function(e){return n.messageService.show(r["default"].Error,e)}),!0)},t}(p),m=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(2,null,this.head.commit.substr(0,8))},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.checkout(this.head.name).done(null,function(e){return n.messageService.show(r["default"].Error,e)}),!0)},t}(p),v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(3,null,this.head.name)},t}(p),g=function(e){function t(t,n,i){e.call(this,[{start:0,end:i.length}]),this.gitService=t,this.messageService=n,this.name=i}return __extends(t,e),t.prototype.getIcon=function(){return"git"},t.prototype.getLabel=function(){return this.name},t.prototype.getAriaLabel=function(){return n.localize(4,null,this.getLabel())},t.prototype.getDescription=function(){return n.localize(5,null,this.name)},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.branch(this.name,!0).done(null,function(e){return n.messageService.show(r["default"].Error,e)}),!0)},t}(u.QuickOpenEntry),y=function(){function e(e,t){this.gitService=e,this.messageService=t,this.aliases=["checkout","co"],this.icon="git"}return e.prototype.getResults=function(e){var t=this;e=e.trim();var n=this.gitService.getModel(),r=n.getHEAD(),a=n.getHeads().map(function(t){return{head:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),c=a.filter(function(e){var t=e.head;return t.name!==r.name}).map(function(e){var n=e.head,i=e.highlights;return new f(t.gitService,t.messageService,n,i)}),l=n.getTags().map(function(t){return{tag:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),d=l.filter(function(e){var t=e.tag;return t.name!==r.name}).map(function(e){var n=e.tag,i=e.highlights;return new m(t.gitService,t.messageService,n,i)}),h=c.concat(d).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel())});h.length>0&&(h[0]=new u.QuickOpenEntryGroup(h[0],"checkout",!1));var p=a.filter(function(t){var n=t.head;return n.name===e}),y=p.filter(function(e){var t=e.head;return t.name===r.name});if(y.length>0)h.unshift(new v(this.gitService,this.messageService,y[0].head,y[0].highlights));else if(0===p.length&&s.isValidBranchName(e)){var _=new g(this.gitService,this.messageService,e);h.push(new u.QuickOpenEntryGroup(_,"branch",!1))}return o.TPromise.as(h)},e.prototype.getEmptyLabel=function(e){return n.localize(6,null)},e}(),_=function(){function e(e,t){this.gitService=e,this.messageService=t,this.aliases=["branch"],this.icon="git"}return e.prototype.getResults=function(e){if(e=e.trim(),!s.isValidBranchName(e))return o.TPromise.as([]);var t=this.gitService.getModel(),n=t.getHEAD(),r=t.getHeads().map(function(t){return{head:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),a=r.filter(function(t){var n=t.head;return n.name===e}),c=a.filter(function(e){var t=e.head;return t.name===n.name});if(c.length>0)return o.TPromise.as([new v(this.gitService,this.messageService,c[0].head,c[0].highlights)]);if(a.length>0)return o.TPromise.as([new f(this.gitService,this.messageService,a[0].head,a[0].highlights)]);var l=new g(this.gitService,this.messageService,e);return o.TPromise.as([new u.QuickOpenEntryGroup(l,"branch",!1)])},e.prototype.getEmptyLabel=function(e){return n.localize(7,null)},e}(),b=function(e){function t(t,n,i){e.call(this,t,{prefix:"git",commands:[new y(n,i),new _(n,i)]})}return __extends(t,e),t=__decorate([__param(0,l.IQuickOpenService),__param(1,h),__param(2,d.IMessageService)],t)}(a.CommandQuickOpenHandler);t.CommandQuickOpenHandler=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/commandsHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/commandsHandler","vs/base/common/arrays","vs/base/common/types","vs/base/common/strings","vs/base/common/errors","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/platform/platform","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/base/common/filters","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybindingService","vs/workbench/services/quickopen/common/quickOpenService","vs/css!./media/commandsHandler"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w){"use strict";t.ALL_COMMANDS_PREFIX=">",t.EDITOR_COMMANDS_PREFIX="$";var C=function(e){function n(n,i,o){e.call(this,n,i,t.ALL_COMMANDS_PREFIX,o)}return __extends(n,e),n.ID="workbench.action.showCommands",n.LABEL=i.localize(0,null),n=__decorate([__param(2,w.IQuickOpenService)],n)}(f.QuickOpenAction);t.ShowAllCommandsAction=C;var T=function(e){function t(t,n,i,o,r,s){e.call(this),this.messageService=r,this.telemetryService=s,this.keyLabel=t,this.keyAriaLabel=n,this.description=i,this.setHighlights(o)}return __extends(t,e),t.prototype.getLabel=function(){return this.description},t.prototype.getAriaLabel=function(){return this.keyAriaLabel?i.localize(1,null,this.getLabel(),this.keyAriaLabel):i.localize(2,null,this.getLabel())},t.prototype.getGroupLabel=function(){return this.keyLabel},t.prototype.onError=function(e){var t=e?a.toErrorMessage(e):i.localize(3,null,this.description);this.messageService.show(b.Severity.Error,t)},t.prototype.runAction=function(e){var t=this;n.TPromise.timeout(50).done(function(){if(e&&e.enabled)try{t.telemetryService.publicLog("workbenchActionExecuted",{id:e.id,from:"quick open"}),(e.run()||n.TPromise.as(null)).done(function(){e.dispose()},function(e){return t.onError(e)})}catch(o){t.onError(o)}else t.messageService.show(b.Severity.Info,i.localize(4,null,t.getLabel()))},function(e){return t.onError(e)})},t=__decorate([__param(4,b.IMessageService),__param(5,S.ITelemetryService)],t)}(u.QuickOpenEntryGroup),k=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n,i,o,c,u),this.editorService=s,this.instantiationService=a,this.actionDescriptor=r}return __extends(t,e),t.prototype.run=function(e,t){if(e===c.Mode.OPEN){var n=this.instantiationService.createInstance(this.actionDescriptor.syncDescriptor);return this.runAction(n),!0}return!1},t=__decorate([__param(5,y.IWorkbenchEditorService),__param(6,_.IInstantiationService),__param(7,b.IMessageService),__param(8,S.ITelemetryService)],t)}(T),x=function(e){function t(t,n,i,o,r,s,a,c){e.call(this,t,n,i,o,a,c),this.editorService=s,this.action=r}return __extends(t,e),t.prototype.run=function(e,t){return e===c.Mode.OPEN?(this.runAction(this.action),!0):!1},t=__decorate([__param(5,y.IWorkbenchEditorService),__param(6,b.IMessageService),__param(7,S.ITelemetryService)],t)}(T),I=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n,i,o,s,a),this.action=r}return __extends(t,e),t.prototype.run=function(e,t){return e===c.Mode.OPEN?(this.runAction(this.action),!0):!1},t=__decorate([__param(5,b.IMessageService),__param(6,S.ITelemetryService)],t)}(T),D=function(e){function t(t,n,i,o,r){e.call(this),this.editorService=t,this.instantiationService=n,this.messageService=i,this.keybindingService=o,this.actionsService=r}return __extends(t,e),t.prototype.includeWorkbenchCommands=function(){return!0},t.prototype.getResults=function(e){e=e.trim();var t=[];if(this.includeWorkbenchCommands()){var i=h.Registry.as(d.Extensions.WorkbenchActions).getWorkbenchActions();t=this.actionDescriptorsToEntries(i,e)}var a=this.editorService.getActiveEditor(),c=a?a.getControl():null,l=[];c&&r.isFunction(c.getActions)&&(l=c.getActions());var p=this.editorActionsToEntries(l,e),f=this.actionsService.getActions(),m=this.otherActionsToEntries(f,e),v=t.concat(p,m);return v=o.distinct(v,function(e){return e.getLabel()+e.getGroupLabel()}),v=v.sort(function(e,t){return s.localeCompare(e.getLabel().toLowerCase(),t.getLabel().toLowerCase())}),n.TPromise.as(new u.QuickOpenModel(v))},t.prototype.actionDescriptorsToEntries=function(e,t){for(var n=this,o=[],r=h.Registry.as(d.Extensions.WorkbenchActions),s=0;s<e.length;s++){var a=e[s],c=this.keybindingService.lookupKeybindings(a.id),u=c.map(function(e){return n.keybindingService.getLabelFor(e)}),l=c.map(function(e){return n.keybindingService.getAriaLabelFor(e)});if(a.label){var p=a.label,f=r.getCategory(a.id);f&&(p=i.localize(5,null,f,p));var v=m.matchesFuzzy(t,p);v&&o.push(this.instantiationService.createInstance(k,u.length>0?u.join(", "):"",l.length>0?l.join(", "):"",p,v,a))}}return o},t.prototype.editorActionsToEntries=function(e,t){for(var n=this,i=[],o=0;o<e.length;o++){var r=e[o],s=r;if(s.isSupported()){var a=this.keybindingService.lookupKeybindings(s.id),c=a.map(function(e){return n.keybindingService.getLabelFor(e)}),u=a.map(function(e){return n.keybindingService.getAriaLabelFor(e)});if(r.label){var l=m.matchesFuzzy(t,r.label);l&&i.push(this.instantiationService.createInstance(x,c.length>0?c.join(", "):"",u.length>0?u.join(", "):"",r.label,l,r))}}}return i},t.prototype.otherActionsToEntries=function(e,t){for(var n=this,i=[],o=0,r=e;o<r.length;o++){var s=r[o],a=this.keybindingService.lookupKeybindings(s.id),c=a.map(function(e){return n.keybindingService.getLabelFor(e)}),u=a.map(function(e){return n.keybindingService.getAriaLabelFor(e)}),l=m.matchesFuzzy(t,s.label);l&&i.push(this.instantiationService.createInstance(I,c.join(", "),u.join(", "),s.label,l,s))}return i},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:e.trim()}},t.prototype.getClass=function(){return"commands-handler"},t.prototype.getEmptyLabel=function(e){return i.localize(6,null)},t=__decorate([__param(0,y.IWorkbenchEditorService),__param(1,_.IInstantiationService),__param(2,b.IMessageService),__param(3,E.IKeybindingService),__param(4,l.IActionsService)],t)}(p.QuickOpenHandler);t.CommandsHandler=D;var A=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.includeWorkbenchCommands=function(){return!1},t}(D);t.EditorCommandsHandler=A;var L=function(e){function t(t,n,o){e.call(this,t,n,g.Behaviour.WidgetFocus|g.Behaviour.ShowInContextMenu),this.quickOpenService=o,this.label=i.localize(7,null)}return __extends(t,e),t.prototype.getGroupId=function(){return"4_tools/1_commands"},t.prototype.run=function(){return this.editor.focus(),this.quickOpenService.show("$"),e.prototype.run.call(this)},t.ID="editor.action.quickCommand",t=__decorate([__param(2,w.IQuickOpenService)],t)}(v.EditorAction);t.QuickCommandsEditorAction=L});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/helpHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/helpHandler","vs/base/browser/builder","vs/base/common/types","vs/platform/platform","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";t.HELP_PREFIX="?";var d=function(e){function t(t,n,i,o){e.call(this),this.prefix=t,this.description=n,this.quickOpenService=i,this.openOnPreview=o}return __extends(t,e),t.prototype.getLabel=function(){return this.prefix},t.prototype.getAriaLabel=function(){return i.localize(0,null,this.getLabel())},t.prototype.getDescription=function(){return this.description},t.prototype.getHeight=function(){return 22},t.prototype.getGroupLabel=function(){return this.groupLabel},t.prototype.setGroupLabel=function(e){this.groupLabel=e},t.prototype.showBorder=function(){return this.useBorder},t.prototype.setShowBorder=function(e){this.useBorder=e},t.prototype.render=function(e,t,n){var i=this,r=o.$(t);r.addClass("quick-open-entry"),this.showBorder()?o.$(t).addClass("results-group-separator"):o.$(t).removeClass("results-group-separator"),this.getGroupLabel()&&o.$(t).div(function(e){e.addClass("results-group"),e.attr({text:i.getGroupLabel()})});var s=r.clone().div({text:this.prefix,"class":"quick-open-help-entry-label"});return this.prefix||s.text("…"),r.span({text:this.description,"class":"quick-open-entry-description"}),null},t.prototype.run=function(e,t){return(e===a.Mode.OPEN||this.openOnPreview)&&this.quickOpenService.show(this.prefix),!1},t}(c.QuickOpenEntryItem),h=function(e){function o(t){e.call(this),this.quickOpenService=t}return __extends(o,e),o.prototype.getResults=function(e){var o=this;e=e.trim();var a=s.Registry.as(u.Extensions.Quickopen),l=a.getQuickOpenHandlers(),h=a.getDefaultQuickOpenHandlers();h.length>0&&l.push.apply(l,h);var p,f=[],m=[];return l.sort(function(e,t){return e.prefix.localeCompare(t.prefix)}).forEach(function(n){if(n.prefix!==t.HELP_PREFIX)if(r.isArray(n.helpEntries))for(var i=0;i<n.helpEntries.length;i++){var s=n.helpEntries[i];0===s.prefix.indexOf(e)&&(p=new d(s.prefix,s.description,o.quickOpenService,e.length>0),s.needsEditor?m.push(p):f.push(p))}else 0===n.prefix.indexOf(e)&&(p=new d(n.prefix,n.description,o.quickOpenService,e.length>0),f.push(p))}),f.length>0&&f[0].setGroupLabel(i.localize(1,null)),m.length>0&&(m[0].setGroupLabel(i.localize(2,null)),f.length>0&&m[0].setShowBorder(!0)),n.TPromise.as(new c.QuickOpenModel(f.concat(m)))},o.prototype.getAutoFocus=function(e){return e=e.trim(),{autoFocusFirstEntry:e.length>0,autoFocusPrefixMatch:e}},o=__decorate([__param(0,l.IQuickOpenService)],o)}(u.QuickOpenHandler);t.HelpHandler=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/snippets/electron-browser/snippets.contribution",["require","exports","vs/nls!vs/workbench/parts/snippets/electron-browser/snippets.contribution","vs/base/common/winjs.base","vs/base/common/paths","vs/base/common/actions","vs/platform/actions/common/actions","vs/platform/platform","vs/workbench/common/actionRegistry","vs/workbench/common/contributions","./snippetsTracker","vs/base/common/errors","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/workspace/common/workspace","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/editor/common/services/modeService","electron","fs"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";function y(e){return new i.TPromise(function(t,n,i){g.stat(e,function(e,n){return e?t(!1):n.isFile()?t(!0):void t(!1)})})}function _(e,t){return new i.Promise(function(n,i,o){g.writeFile(e,t,function(e){e&&i(e),n(!0)})})}var b=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.contextService=i,this.quickOpenService=o,this.modeService=r}return __extends(t,e),t.prototype.openFile=function(e){v.ipcRenderer.send("vscode:windowOpen",[e])},t.prototype.run=function(){var e=this,t=this.modeService.getRegisteredModes(),r=[];return t.forEach(function(t){var n=e.modeService.getLanguageName(t);n&&r.push({label:n,id:t})}),r=r.sort(function(e,t){return e.label.localeCompare(t.label)}),this.quickOpenService.pick(r,{placeHolder:n.localize(1,null)}).then(function(t){if(t){var r=o.join(e.contextService.getConfiguration().env.appSettingsHome,"snippets",t.id+".json");return y(r).then(function(o){if(o)return e.openFile(r),i.TPromise.as(null);var s=["{","/*","	 // Place your snippets for "+t.label+" here. Each snippet is defined under a snippet name and has a prefix, body and ","	 // description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:","	 // $1, $2 for tab stops, ${id} and ${id:label} and ${1:label} for variables. Variables with the same id are connected.","	 // Example:",'	 "Print to console": {','		"prefix": "log",','		"body": [',"			\"console.log('$1');\",",'			"$2"',"		],",'		"description": "Log output to console"',"	}","*/","}"].join("\n");return _(r,s).then(function(){e.openFile(r)},function(e){d.onUnexpectedError(n.localize(2,null,r))})})}return i.TPromise.as(null)})},t.ID="workbench.action.openSnippets",t.LABEL=n.localize(0,null),t=__decorate([__param(2,p.IWorkspaceContextService),__param(3,h.IQuickOpenService),__param(4,m.IModeService)],t)}(r.Action),S=n.localize(3,null),E=a.Registry.as(c.Extensions.WorkbenchActions);E.registerWorkbenchAction(new s.SyncActionDescriptor(b,b.ID,b.LABEL),S),a.Registry.as(u.Extensions.Workbench).registerWorkbenchContribution(l.SnippetsTracker);var w="vscode://schemas/snippets",C={id:w,defaultSnippets:[{label:n.localize(4,null),body:{"{{snippetName}}":{prefix:"{{prefix}}",body:"{{snippet}}",description:"{{description}}"}}}],type:"object",description:n.localize(5,null),additionalProperties:{type:"object",required:["prefix","body"],properties:{prefix:{description:n.localize(6,null),type:"string"},body:{description:n.localize(7,null),type:["string","array"],items:{type:"string"}},description:{description:n.localize(8,null),type:"string"}},additionalProperties:!1}},T=a.Registry.as(f.Extensions.JSONContribution);T.registerSchema(w,C),T.addSchemaFileAssociation("%APP_SETTINGS_HOME%/snippets/*.json",w)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/tasks/browser/taskQuickOpen",["require","exports","vs/nls!vs/workbench/parts/tasks/browser/taskQuickOpen","vs/base/common/filters","vs/workbench/browser/quickopen","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/parts/tasks/common/taskService"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,n,i){void 0===i&&(i=[]),e.call(this,i),this.taskService=t,this.task=n}return __extends(t,e),t.prototype.getLabel=function(){return this.task.name},t.prototype.getAriaLabel=function(){return n.localize(0,null,this.getLabel())},t.prototype.run=function(e,t){return e===r.Mode.PREVIEW?!1:(this.taskService.run(this.task.id),!0)},t}(s.QuickOpenEntry),l=function(e){function t(t,n){e.call(this),this.quickOpenService=t,this.taskService=n}return __extends(t,e),t.prototype.getAriaLabel=function(){return n.localize(1,null)},t.prototype.getResults=function(e){var t=this;return this.taskService.tasks().then(function(n){return n.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(t){return{task:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var n=e.task,i=e.highlights;return new u(t.taskService,n,i)})},function(e){return[]}).then(function(e){return new s.QuickOpenModel(e)})},t.prototype.getClass=function(){return null},t.prototype.canRun=function(){return!0},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!!e}},t.prototype.onClose=function(e){},t.prototype.getGroupLabel=function(){return null},t.prototype.getEmptyLabel=function(e){return e.length>0?n.localize(2,null):n.localize(3,null)},t=__decorate([__param(0,a.IQuickOpenService),__param(1,c.ITaskService)],t)}(o.QuickOpenHandler);t.QuickOpenHandler=l}),define("vs/workbench/services/search/node/fileSearch",["require","exports","fs","path","vs/base/common/scorer","vs/base/common/arrays","vs/base/common/strings","vs/base/common/types","vs/base/common/glob","vs/base/node/extfs","vs/base/node/flow"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(){function e(e){this.config=e,this.filePattern=e.filePattern,this.excludePattern=e.excludePattern,this.includePattern=e.includePattern,this.maxResults=e.maxResults||null,this.maxFilesize=e.maxFilesize||null,this.walkedPaths=Object.create(null),this.resultCount=0,this.isLimitHit=!1,this.filePattern&&(this.filePattern=this.filePattern.replace(/\\/g,"/"),this.normalizedFilePatternLowercase=s.stripWildcards(this.filePattern).toLowerCase())}return e.prototype.cancel=function(){this.isCanceled=!0},e.prototype.walk=function(e,t,n,o){var r=this;this.checkFilePatternAbsoluteMatch(function(s){return r.isCanceled?o(null,r.isLimitHit):s?(n({path:r.filePattern}),o(null,r.isLimitHit)):(t&&t.forEach(function(e){c.match(r.excludePattern,e)||r.matchFile(n,e,e)}),void l.parallel(e,function(e,t){u.readdir(e,function(o,s){return o||r.isCanceled||r.isLimitHit?t(null,null):r.checkFilePatternRelativeMatch(e,function(o){return r.isCanceled||r.isLimitHit?t(null,null):(o&&n({path:o}),r.doWalk(i.normalize(e),"",s,n,t))})})},function(e,t){o(e?e[0]:null,r.isLimitHit)}))})},e.prototype.checkFilePatternAbsoluteMatch=function(e){return this.filePattern&&i.isAbsolute(this.filePattern)?n.stat(this.filePattern,function(t,n){return e(!t&&!n.isDirectory())}):e(!1)},e.prototype.checkFilePatternRelativeMatch=function(e,t){if(!this.filePattern||i.isAbsolute(this.filePattern))return t(null);var o=i.join(e,this.filePattern);return n.stat(o,function(e,n){return t(e||n.isDirectory()?null:o)})},e.prototype.doWalk=function(e,t,o,s,d){var h=this;l.parallel(o,function(r,l){if(h.isCanceled||h.isLimitHit)return l(null);var d=o;h.config.filePattern===r&&(d=[]);var p=t?[t,r].join("/"):r;if(c.match(h.excludePattern,p,d))return l(null);var f=[e,r].join(i.sep);n.lstat(f,function(e,t){return e||h.isCanceled||h.isLimitHit?l(null):void h.statLinkIfNeeded(f,t,function(e,n){return e||h.isCanceled||h.isLimitHit?l(null):n.isDirectory()?h.realPathIfNeeded(f,t,function(e,t){return e||h.isCanceled||h.isLimitHit?l(null):h.walkedPaths[t]?l(null):(h.walkedPaths[t]=!0,u.readdir(f,function(e,t){return e||h.isCanceled||h.isLimitHit?l(null):void h.doWalk(f,p,t,s,l)}))}):p===h.filePattern?l(null):h.maxFilesize&&a.isNumber(n.size)&&n.size>h.maxFilesize?l(null):(h.matchFile(s,f,p),l(null))})})},function(e){return e&&(e=r.coalesce(e)),d(e&&e.length>0?e[0]:null,null)})},e.prototype.matchFile=function(e,t,n){!this.isFilePatternMatch(n)||this.includePattern&&!c.match(this.includePattern,n)||(this.resultCount++,this.maxResults&&this.resultCount>this.maxResults&&(this.isLimitHit=!0),this.isLimitHit||e({path:t}))},e.prototype.isFilePatternMatch=function(e){return this.filePattern?"*"===this.filePattern?!0:o.matches(e,this.normalizedFilePatternLowercase):!0},e.prototype.statLinkIfNeeded=function(e,t,i){return t.isSymbolicLink()?n.stat(e,i):i(null,t)},e.prototype.realPathIfNeeded=function(e,t,i){return t.isSymbolicLink()?n.realpath(e,function(e,t){return e?i(e):i(null,t)}):i(null,e)},e}();t.FileWalker=d;var h=function(){function e(e){this.rootFolders=e.rootFolders,this.extraFiles=e.extraFiles,this.walker=new d(e)}return e.prototype.search=function(e,t,n){this.walker.walk(this.rootFolders,this.extraFiles,e,n)},e.prototype.cancel=function(){this.walker.cancel()},e}();t.Engine=h}),define("vs/workbench/services/search/node/textSearch",["require","exports","vs/base/common/strings","fs","vs/base/common/mime","vs/base/node/mime","vs/base/node/encoding"],function(e,t,n,i,o,r,s){"use strict";var a=function(){function e(e,t){this.rootFolders=e.rootFolders,this.extraFiles=e.extraFiles,this.walker=t,this.contentPattern=n.createRegExp(e.contentPattern.pattern,e.contentPattern.isRegExp,e.contentPattern.isCaseSensitive,e.contentPattern.isWordMatch,!0),this.isCanceled=!1,this.limitReached=!1,this.maxResults=e.maxResults,this.worked=0,this.total=0,this.fileEncoding=s.encodingExists(e.fileEncoding)?e.fileEncoding:s.UTF8}return e.prototype.cancel=function(){this.isCanceled=!0,this.walker.cancel()},e.prototype.search=function(e,t,n){var i=this,o=0,r=function(e){i.worked+=e,!e||i.isDone||i.isCanceled||i.limitReached||t({total:i.total,worked:i.worked}),i.worked===i.total&&i.walkerIsDone&&!i.isDone&&(i.isDone=!0,n(i.walkerError,i.limitReached))};this.walker.walk(this.rootFolders,this.extraFiles,function(n){if(i.total++,
i.limitReached||i.isCanceled)return r(1);t({total:i.total,worked:i.worked});var s=null,a=function(t){return t||i.isCanceled||!s||s.isEmpty()||e(s.serialize()),r(1)},l=function(e,t){if(!i.limitReached&&!i.isCanceled)for(var r=null,a=i.contentPattern.exec(e);null!==a&&a[0].length>0&&!i.limitReached&&!i.isCanceled;)o++,i.maxResults&&o>=i.maxResults&&(i.limitReached=!0),null===s&&(s=new c(n.path)),null===r&&(r=new u(e,t),s.addMatch(r)),r.addMatch(a.index,a[0].length),a=i.contentPattern.exec(e)};i.readlinesAsync(n.path,l,{bufferLength:8096,encoding:i.fileEncoding},a)},function(e,t){i.walkerIsDone=!0,i.walkerError=e,r(0)})},e.prototype.readlinesAsync=function(e,t,n,a){var c=this;i.open(e,"r",null,function(e,u){function l(e){return n.encoding===s.UTF8||n.encoding===s.UTF8_with_bom?e.toString():s.decode(e,n.encoding)}function d(e){v+=l(m.slice(p,f+e)),t(v,g),v="",g++,p=f+e}function h(e,t){return _.limitReached||_.isCanceled?t(null):void i.read(u,m,0,m.length,null,function(i,a,c){if(i||0===a||_.limitReached||_.isCanceled)return t(i);if(p=0,f=0,e){var u=r.detectMimeAndEncodingFromBuffer(c,a);if(u.mimes[u.mimes.length-1]!==o.MIME_TEXT)return t(null);switch(u.encoding){case s.UTF8:p=f=3,n.encoding=s.UTF8;break;case s.UTF16be:p=f=2,n.encoding=s.UTF16be;break;case s.UTF16le:p=f=2,n.encoding=s.UTF16le}}for(y&&(10===c[f]?(d(1),f++):d(0),y=!1);a>f;++f)10===c[f]?d(1):13===c[f]&&(f+1===a?y=!0:10===c[f+1]?(d(2),f++):d(1));v+=l(c.slice(p,a)),h(!1,t)})}if(e)return a(e);var p,f,m=new Buffer(n.bufferLength),v="",g=0,y=!1,_=c;h(!0,function(e){return e?a(e):(v.length&&t(v,g),void i.close(u,function(e){a(e)}))})})},e}();t.Engine=a;var c=function(){function e(e){this.path=e,this.lineMatches=[]}return e.prototype.addMatch=function(e){this.lineMatches.push(e)},e.prototype.isEmpty=function(){return 0===this.lineMatches.length},e.prototype.serialize=function(){for(var e=[],t=0;t<this.lineMatches.length;t++)e.push(this.lineMatches[t].serialize());return{path:this.path,lineMatches:e}},e}(),u=function(){function e(e,t){this.preview=e.replace(/(\r|\n)*$/,""),this.lineNumber=t,this.offsetAndLengths=[]}return e.prototype.getText=function(){return this.preview},e.prototype.getLineNumber=function(){return this.lineNumber},e.prototype.addMatch=function(e,t){this.offsetAndLengths.push([e,t])},e.prototype.serialize=function(){var e={preview:this.preview,lineNumber:this.lineNumber,offsetAndLengths:this.offsetAndLengths};return e},e}()}),define("vs/workbench/services/search/node/rawSearchService",["require","exports","fs","graceful-fs","vs/base/common/winjs.base","vs/platform/files/common/files","vs/workbench/services/search/node/fileSearch","vs/workbench/services/search/node/textSearch"],function(e,t,n,i,o,r,s,a){"use strict";i.gracefulify(n);var c=function(){function e(){}return e.prototype.fileSearch=function(e){var t=new s.Engine(e);return this.doSearch(t)},e.prototype.textSearch=function(e){var t=new a.Engine(e,new s.FileWalker({rootFolders:e.rootFolders,extraFiles:e.extraFiles,includePattern:e.includePattern,excludePattern:e.excludePattern,filePattern:e.filePattern,maxFilesize:r.MAX_FILE_SIZE}));return this.doSearch(t)},e.prototype.doSearch=function(e){return new o.PPromise(function(t,n,i){e.search(function(e){e&&i(e)},function(e){i(e)},function(e,i){e?n(e):t({limitHit:i})})},function(){return e.cancel()})},e}();t.SearchService=c}),define("vs/workbench/services/statusbar/common/statusbarService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IStatusbarService=n.createDecorator("statusbarService"),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.StatusbarAlignment||(t.StatusbarAlignment={}));t.StatusbarAlignment});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostStatusBar",["require","exports","vs/platform/thread/common/thread","vs/workbench/services/statusbar/common/statusbarService","./extHostTypes"],function(e,t,n,i,o){"use strict";var r=function(){function e(t,n,i){void 0===n&&(n=o.StatusBarAlignment.Left),this._id=e.ID_GEN++,this._proxy=t,this._alignment=n,this._priority=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this._command},set:function(e){this._command=e,this.update()},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._visible=!0,this.update()},e.prototype.hide=function(){this._visible=!1,this._proxy.dispose(this.id)},e.prototype.update=function(){var e=this;!this._disposed&&this._visible&&(this._timeoutHandle&&clearTimeout(this._timeoutHandle),this._timeoutHandle=setTimeout(function(){e._timeoutHandle=null,e._proxy.setEntry(e.id,e.text,e.tooltip,e.command,e.color,e._alignment===o.StatusBarAlignment.Left?i.StatusbarAlignment.LEFT:i.StatusbarAlignment.RIGHT,e._priority)},0))},e.prototype.dispose=function(){this.hide(),this._disposed=!0},e.ID_GEN=0,e}();t.ExtHostStatusBarEntry=r;var s=function(){function e(e){this._messages=[],this._item=e.createStatusBarEntry(o.StatusBarAlignment.Left,Number.MIN_VALUE)}return e.prototype.dispose=function(){this._messages.length=0,this._item.dispose()},e.prototype.setMessage=function(e){var t=this,n={message:e};return this._messages.unshift(n),this._update(),new o.Disposable(function(){var e=t._messages.indexOf(n);e>=0&&(t._messages.splice(e,1),t._update())})},e.prototype._update=function(){this._messages.length>0?(this._item.text=this._messages[0].message,this._item.show()):this._item.hide()},e}(),a=function(){function e(e){this._proxy=e.getRemotable(c),this._statusMessage=new s(this)}return e.prototype.createStatusBarEntry=function(e,t){return new r(this._proxy,e,t)},e.prototype.setStatusBarMessage=function(e,t){var n,i=this._statusMessage.setMessage(e);return"number"==typeof t?n=setTimeout(function(){return i.dispose()},t):"undefined"!=typeof t&&t.then(function(){return i.dispose()},function(){return i.dispose()}),new o.Disposable(function(){i.dispose(),clearTimeout(n)})},e=__decorate([__param(0,n.IThreadService)],e)}();t.ExtHostStatusBar=a;var c=function(){function e(e){this.statusbarService=e,this.mapIdToDisposable=Object.create(null)}return e.prototype.setEntry=function(e,t,n,i,o,r,s){this.dispose(e);var a=this.statusbarService.addEntry({text:t,tooltip:n,command:i,color:o},r,s);this.mapIdToDisposable[e]=a},e.prototype.dispose=function(e){var t=this.mapIdToDisposable[e];t&&t.dispose(),delete this.mapIdToDisposable[e]},e=__decorate([n.Remotable.MainContext("MainThreadStatusBar"),__param(0,i.IStatusbarService)],e)}();t.MainThreadStatusBar=c}),define("vs/workbench/browser/parts/statusbar/statusbar",["require","exports","vs/platform/platform","vs/workbench/services/statusbar/common/statusbarService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o){"use strict";t.StatusbarAlignment=i.StatusbarAlignment;var r=function(){function e(e,n,i){this.syncDescriptor=o.createSyncDescriptor(e),this.alignment=n||t.StatusbarAlignment.LEFT,this.priority=i||0}return e}();t.StatusbarItemDescriptor=r;var s=function(){function e(){this._items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),e.prototype.registerStatusbarItem=function(e){this._items.push(e)},e}();t.Extensions={Statusbar:"workbench.contributions.statusbar"},n.Registry.add(t.Extensions.Statusbar,new s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/statusbar/statusbarPart",["require","exports","vs/base/browser/dom","vs/base/common/types","vs/nls!vs/workbench/browser/parts/statusbar/statusbarPart","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/browser/builder","vs/base/browser/ui/octiconLabel/octiconLabel","vs/platform/platform","vs/platform/keybinding/common/keybindingService","vs/workbench/services/editor/common/editorService","vs/workbench/browser/part","vs/workbench/common/actionRegistry","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/workbench/services/statusbar/common/statusbarService","vs/css!./media/statusbarPart"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";var b=function(e){function t(t){e.call(this,t),this.serviceId=_.IStatusbarService,this.toDispose=[]}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.addEntry=function(e,n,i){void 0===i&&(i=0);for(var o=this.doCreateStatusItem(n,i),r=this.instantiationService.createInstance(S,e),s=r.render(o),a=this.statusItemsContainer.getHTMLElement(),u=this.getEntries(n),l=!1,d=0;d<u.length;d++){var h=u[d],p=c.$(h).getProperty(t.PRIORITY_PROP);if(n===m.StatusbarAlignment.LEFT&&i>p||n===m.StatusbarAlignment.RIGHT&&p>i){a.insertBefore(o,h),l=!0;break}}return l||a.appendChild(o),{dispose:function(){c.$(o).destroy(),s&&s.dispose()}}},t.prototype.getEntries=function(e){for(var n=[],i=this.statusItemsContainer.getHTMLElement(),o=i.children,r=0;r<o.length;r++){var s=o.item(r);c.$(s).getProperty(t.ALIGNMENT_PROP)===e&&n.push(s)}return n},t.prototype.createContentArea=function(e){var t=this;this.statusItemsContainer=c.$(e);var n=l.Registry.as(m.Extensions.Statusbar),i=n.items.filter(function(e){return e.alignment===m.StatusbarAlignment.LEFT}).sort(function(e,t){return t.priority-e.priority}),o=n.items.filter(function(e){return e.alignment===m.StatusbarAlignment.RIGHT}).sort(function(e,t){return e.priority-t.priority}),r=o.concat(i);return(s=this.toDispose).push.apply(s,r.map(function(e){var n=t.instantiationService.createInstance(e.syncDescriptor),i=t.doCreateStatusItem(e.alignment,e.priority),o=n.render(i);return t.statusItemsContainer.append(i),o})),this.statusItemsContainer;var s},t.prototype.doCreateStatusItem=function(e,i){void 0===i&&(i=0);var o=document.createElement("div");return n.addClass(o,"statusbar-item"),e===m.StatusbarAlignment.RIGHT?n.addClass(o,"right"):n.addClass(o,"left"),c.$(o).setProperty(t.PRIORITY_PROP,i),c.$(o).setProperty(t.ALIGNMENT_PROP,e),o},t.prototype.dispose=function(){this.toDispose=a.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.PRIORITY_PROP="priority",t.ALIGNMENT_PROP="alignment",t}(p.Part);t.StatusbarPart=b;var S=function(){function e(e,t,n,i,o,r){this.keybindingService=t,this.instantiationService=n,this.messageService=i,this.telemetryService=o,this.editorService=r,this.entry=e}return e.prototype.render=function(e){var t=this,i=[];n.addClass(e,"statusbar-entry");var o;return this.entry.command?(o=document.createElement("a"),c.$(o).on("click",function(){return t.executeCommand(t.entry.command)},i)):o=document.createElement("span"),new u.OcticonLabel(o).text=this.entry.text,this.entry.tooltip&&c.$(o).title(this.entry.tooltip),this.entry.color&&c.$(o).color(this.entry.color),e.appendChild(o),{dispose:function(){i=a.disposeAll(i)}}},e.prototype.executeCommand=function(e){var t,n=this,a=this.editorService.getActiveEditor(),c=l.Registry.as(f.Extensions.WorkbenchActions).getWorkbenchAction(e);if(c&&(t=this.instantiationService.createInstance(c.syncDescriptor)),!t){var u=a?a.getControl():null;u&&i.isFunction(u.getAction)&&(t=u.getAction(e))}a&&a.focus(),t?t.enabled?(this.telemetryService.publicLog("workbenchActionExecuted",{id:t.id,from:"status bar"}),(t.run()||s.TPromise.as(null)).done(function(){t.dispose()},function(e){return n.messageService.show(y.Severity.Error,r.toErrorMessage(e))})):this.messageService.show(y.Severity.Warning,o.localize(0,null,t.label||e)):this.keybindingService.executeCommand(e).done(void 0,function(e){return n.messageService.show(y.Severity.Error,r.toErrorMessage(e))})},e=__decorate([__param(1,d.IKeybindingService),__param(2,v.IInstantiationService),__param(3,y.IMessageService),__param(4,g.ITelemetryService),__param(5,h.IWorkbenchEditorService)],e)}()}),define("vs/workbench/services/message/browser/messageService",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/browser/ui/messagelist/messageList","vs/workbench/common/constants","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(t,n){this.telemetryService=t,this.serviceId=a.IMessageService,this.messagesShowingContextKey=n.createKey(e.GLOBAL_MESSAGES_SHOWING_CONTEXT,!1),this.handler=new o.MessageList(r.Identifiers.WORKBENCH_CONTAINER,t),this.messageBuffer=[],this.canShowMessages=!0,this.disposeables=[],this.registerListeners()}return e.prototype.setWorkbenchServices=function(e,t){this.statusbarService=t,this.quickOpenService=e,this.disposeables.push(this.quickOpenService.onShow(this.onQuickOpenShowing,this)),this.disposeables.push(this.quickOpenService.onHide(this.onQuickOpenHiding,this))},e.prototype.registerListeners=function(){this.disposeables.push(this.handler.onMessagesShowing(this.onMessagesShowing,this)),this.disposeables.push(this.handler.onMessagesCleared(this.onMessagesCleared,this))},e.prototype.onMessagesShowing=function(){this.messagesShowingContextKey.set(!0)},e.prototype.onMessagesCleared=function(){this.messagesShowingContextKey.reset()},e.prototype.onQuickOpenShowing=function(){this.canShowMessages=!1,this.handler.hide()},e.prototype.onQuickOpenHiding=function(){for(this.canShowMessages=!0,this.handler.show();this.messageBuffer.length;){var e=this.messageBuffer.pop();e.disposeFn=this.show(e.severity,e.message)}},e.prototype.toBaseSeverity=function(e){switch(e){case a.Severity.Info:return o.Severity.Info;case a.Severity.Warning:return o.Severity.Warning}return o.Severity.Error},e.prototype.show=function(e,t){var o=this;if(!t)return function(){};if(Array.isArray(t)){var r=[];return t.forEach(function(t){return r.push(o.show(e,t))}),function(){return r.forEach(function(e){return e()})}}return n.isPromiseCanceledError(t)?function(){}:(i.isNumber(t.severity)&&(e=t.severity),this.doShow(e,t))},e.prototype.doShow=function(e,t){var i=this;if(!this.canShowMessages){var o={severity:e,message:t,disposeFn:function(){return i.messageBuffer.splice(i.messageBuffer.indexOf(o),1)}};return this.messageBuffer.push(o),function(){return o.disposeFn()}}return e===a.Severity.Error&&console.error(n.toErrorMessage(t,!0)),this.handler.showMessage(this.toBaseSeverity(e),t)},e.prototype.setStatusMessage=function(e,t,n){var i=this;if(void 0===t&&(t=-1),void 0===n&&(n=0),this.statusbarService){this.statusMsgDispose&&this.statusMsgDispose.dispose();var o,r,a=setTimeout(function(){o=i.statusbarService.addEntry({text:e},s.StatusbarAlignment.LEFT,Number.MIN_VALUE),a=null},n),c={dispose:function(){a&&clearTimeout(a),r&&clearTimeout(r),o&&o.dispose()}};return this.statusMsgDispose=c,"number"==typeof t&&t>0&&(r=setTimeout(function(){return c.dispose()},t)),c}return{dispose:function(){}}},e.prototype.hideAll=function(){this.handler&&this.handler.hideMessages()},e.prototype.confirm=function(e){var t=e.message;return e.detail&&(t=t+"\n\n"+e.detail),window.confirm(t)},e.prototype.dispose=function(){for(;this.disposeables.length;)this.disposeables.pop().dispose()},e.GLOBAL_MESSAGES_SHOWING_CONTEXT="globalMessageVisible",e}();t.WorkbenchMessageService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/message/electron-browser/messageService",["require","exports","vs/nls!vs/workbench/services/message/electron-browser/messageService","vs/workbench/services/message/browser/messageService","vs/base/common/platform"],function(e,t,n,i,o){"use strict";var r=function(e){function t(t,n,i,o){e.call(this,i,o),this.contextService=t,this.windowService=n}return __extends(t,e),t.prototype.confirm=function(e){e.primaryButton||(e.primaryButton=n.localize(0,null)),e.secondaryButton||(e.secondaryButton=n.localize(1,null));var t={title:e.title||this.contextService.getConfiguration().env.appName,message:e.message,buttons:[this.mnemonicLabel(e.primaryButton),this.mnemonicLabel(e.secondaryButton)],noLink:!0,cancelId:1};e.detail&&(t.detail=e.detail);var i=this.windowService.getWindow().showMessageBox(t);return 0===i},t.prototype.mnemonicLabel=function(e){return o.isWindows?e.replace(/&&/g,"&"):e.replace(/&&/g,"")},t}(i.WorkbenchMessageService);t.MessageService=r}),define("vs/workbench/services/themes/common/themeService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IThemeService=n.createDecorator("themeService"),t.DEFAULT_THEME_ID="vs-dark vscode-theme-defaults-themes-dark_plus-json"});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/html/browser/htmlPreviewPart",["require","exports","vs/nls!vs/workbench/parts/html/browser/htmlPreviewPart","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/base/common/lifecycle","vs/base/browser/dom","vs/workbench/browser/parts/editor/baseEditor","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace","vs/platform/storage/common/storage","vs/workbench/services/editor/common/editorService","vs/workbench/common/editor/textEditorModel","vs/workbench/common/constants","vs/workbench/parts/html/common/htmlInput","vs/platform/theme/common/themes","vs/workbench/services/themes/common/themeService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(e){function t(n,i,o,s){e.call(this,t.ID,n),this._iFrameMessageSubscription=r.empty,this._modelChangeSubscription=r.empty,this._themeChangeSubscription=r.empty,this._editorService=i,this._storageService=o,this._iFrameBase=s.toResource("/")}return __extends(t,e),t.prototype.dispose=function(){var e=this._iFrameElement.parentElement;e.parentElement.removeChild(e),this._modelChangeSubscription.dispose(),this._model=void 0,this._themeChangeSubscription.dispose()},t.prototype.createEditor=function(e){var t=this;this._iFrameElement=document.createElement("iframe"),this._iFrameElement.setAttribute("frameborder","0"),this._iFrameElement.className="iframe";var n=document.createElement("div");n.className="iframe-container monaco-editor-background",n.tabIndex=0,n.appendChild(this._iFrameElement),e.getHTMLElement().appendChild(n),this._themeChangeSubscription=this._storageService.addListener2(l.StorageEventType.STORAGE,function(e){e.key===p.Preferences.THEME&&t.isVisible()&&t._updateIFrameContent(!0)}),this._iFrameMessageSubscription=s.addDisposableListener(window,"message",function(e){if(e.source===t._iFrameElement.contentWindow){var n=document.createEvent("KeyboardEvent");Object.defineProperty(n,"keyCode",{get:function(){return e.data.keyCode}}),Object.defineProperty(n,"which",{get:function(){return e.data.keyCode}}),Object.defineProperty(n,"target",{get:function(){return window&&window.parent.document.body}}),n.initKeyboardEvent("keydown",!0,!0,document.defaultView,null,null,e.data.ctrlKey,e.data.altKey,e.data.shiftKey,e.data.metaKey),document.dispatchEvent(n)}})},t.prototype.layout=function(e){var t=e.width,n=e.height;this._iFrameElement.parentElement.style.width=t+"px",this._iFrameElement.parentElement.style.height=n+"px",this._iFrameElement.style.width=t+"px",this._iFrameElement.style.height=n+"px"},t.prototype.focus=function(){this._iFrameElement.focus()},t.prototype.getTitle=function(){return this.input?this.input.getName():n.localize(0,null)},t.prototype.setVisible=function(t,n){var i=this;return e.prototype.setVisible.call(this,t,n).then(function(){t&&i._model?(i._modelChangeSubscription=i._model.addListener2(o.EventType.ModelContentChanged2,function(){return i._updateIFrameContent()}),i._updateIFrameContent()):i._modelChangeSubscription.dispose()})},t.prototype.changePosition=function(t){var n=this;e.prototype.changePosition.call(this,t),setTimeout(function(){n._updateIFrameContent(!0)},0)},t.prototype.setInput=function(t,r){var s=this;return this._model=void 0,this._modelChangeSubscription.dispose(),this._lastModelVersion=-1,t instanceof f.HtmlInput?this._editorService.resolveEditorModel({resource:t.getResource()}).then(function(a){return a instanceof h.BaseTextEditorModel&&(s._model=a.textEditorModel),s._model?(s._modelChangeSubscription=s._model.addListener2(o.EventType.ModelContentChanged2,function(){return s._updateIFrameContent()}),s._updateIFrameContent(),e.prototype.setInput.call(s,t,r)):i.TPromise.wrapError(n.localize(1,null))}):i.TPromise.wrapError("Invalid input")},t.prototype._updateIFrameContent=function(e){if(void 0===e&&(e=!1),this._model&&(e||this._lastModelVersion!==this._model.getVersionId())){var t=this._model.getValue(),n=this._iFrameElement.contentDocument;if(n){var i=new DOMParser,o=i.parseFromString(t,"text/html"),r=y.defaultStyle(this._iFrameElement.parentElement,this._storageService.get(p.Preferences.THEME,l.StorageScope.GLOBAL,v.DEFAULT_THEME_ID));if(o.head.hasChildNodes()?o.head.insertBefore(r,o.head.firstChild):o.head.appendChild(r),this._iFrameBase){var s=document.createElement("base");s.href=this._iFrameBase.toString(),o.head.appendChild(s)}o.body.appendChild(y.bubbleKeybindings),n.open("text/html","replace"),n.write(o.documentElement.innerHTML),n.close(),this._lastModelVersion=this._model.getVersionId()}}},t.ID="workbench.editor.htmlPreviewPart",t=__decorate([__param(0,c.ITelemetryService),__param(1,d.IWorkbenchEditorService),__param(2,l.IStorageService),__param(3,u.IWorkspaceContextService)],t)}(a.BaseEditor);t.HtmlPreviewPart=g;var y;!function(e){function t(e,t){var o=window.getComputedStyle(e),r=document.createElement("style");return r.innerHTML="* {\n			color: "+o.color+";\n			background: "+o.background+";\n			font-family: "+o.fontFamily+";\n			font-size: "+o.fontSize+";\n		}\n		img {\n			max-width: 100%;\n			max-height: 100%;\n		}\n		a:focus,\n		input:focus,\n		select:focus,\n		textarea:focus {\n			outline: 1px solid -webkit-focus-ring-color;\n			outline-offset: -1px;\n		}\n		::-webkit-scrollbar {\n			width: 14px;\n			height: 14px;\n		}\n		"+(m.isLightTheme(t)?n:i),r}e.bubbleKeybindings=document.createElement("script"),e.bubbleKeybindings.innerHTML='\n		var ignoredKeys = [9 /* tab */, 32 /* space */, 33 /* page up */, 34 /* page down */, 38 /* up */, 40 /* down */];\n		var ignoredCtrlCmdKeys = [65 /* a */, 67 /* c */];\n		var ignoredShiftKeys = [9 /* tab */];\n		window.document.body.addEventListener("keydown", function(event) {\n			try {\n				if (!event.ctrlKey && !event.altKey && !event.shiftKey && !event.metaKey && ignoredKeys.some(function(i) {return i === event.keyCode;})) {\n						return;\n				}\n				if ((event.ctrlKey || event.metaKey) && ignoredCtrlCmdKeys.some(function(i) { return i === event.keyCode; })) {\n						return;\n				}\n				if (event.shiftKey && ignoredShiftKeys.some(function(i) { return i === event.keyCode; })) {\n					return;\n				}\n				event.preventDefault();\n				window.parent.postMessage({ which: event.which, keyCode: event.keyCode, charCode: event.charCode, metaKey: event.metaKey, altKey: event.altKey, shiftKey: event.shiftKey, ctrlKey: event.ctrlKey }, "*");\n			} catch (error) { }\n		});\n		function defaultPreventHandler(e) { e.preventDefault(); };\n		window.document.addEventListener("dragover", defaultPreventHandler);\n		window.document.addEventListener("drop", defaultPreventHandler);\n		window.document.body.addEventListener("dragover", defaultPreventHandler);\n		window.document.body.addEventListener("drop", defaultPreventHandler);\n	';var n=["::-webkit-scrollbar-thumb {","	background-color: rgba(100, 100, 100, 0.4);","}","::-webkit-scrollbar-thumb:hover {","	background-color: rgba(100, 100, 100, 0.7);","}","::-webkit-scrollbar-thumb:active {","	background-color: rgba(0, 0, 0, 0.6);","}"].join("\n"),i=["::-webkit-scrollbar-thumb {","	background-color: rgba(121, 121, 121, 0.4);","}","::-webkit-scrollbar-thumb:hover {","	background-color: rgba(100, 100, 100, 0.7);","}","::-webkit-scrollbar-thumb:active {","	background-color: rgba(85, 85, 85, 0.8);","}"].join("\n");e.defaultStyle=t}(y||(y={}))}),define("vs/workbench/parts/html/browser/html.contribution",["require","exports","vs/nls!vs/workbench/parts/html/browser/html.contribution","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/instantiation/common/instantiation","vs/workbench/services/editor/common/editorService","../common/htmlInput","vs/workbench/parts/html/browser/htmlPreviewPart","vs/platform/platform","vs/workbench/browser/parts/editor/baseEditor","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";c.Registry.as(u.Extensions.Editors).registerEditor(new u.EditorDescriptor(a.HtmlPreviewPart.ID,n.localize(0,null),"vs/workbench/parts/html/browser/htmlPreviewPart","HtmlPreviewPart"),[new l.SyncDescriptor(s.HtmlInput)]),i.KeybindingsRegistry.registerCommandDesc({id:"_workbench.previewHtml",weight:i.KeybindingsRegistry.WEIGHT.workbenchContrib(0),handler:function(e,t){var n=t[0],i=t[1],a=n.fsPath,c=e.get(o.IInstantiationService).createInstance(s.HtmlInput,a,void 0,n);return e.get(r.IWorkbenchEditorService).openEditor(c,null,i).then(function(e){return!0})},context:void 0,primary:void 0})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/common/markdownEditorModel",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/markdown/common/markdownEditorModel","vs/base/common/paths","vs/workbench/common/editor/iframeEditorModel","vs/workbench/common/constants","vs/platform/theme/common/themes","vs/workbench/services/themes/common/themeService","vs/workbench/parts/markdown/common/markdown","vs/workbench/services/editor/common/editorService","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(t){function r(e,n,i,o){t.call(this,e),this.editorService=n,this.contextService=i,this.storageService=o}return __extends(r,t),r.prototype.load=function(){var t,r=this,l=!1;return new n.TPromise(function(n,h){var p=function(e){try{var t=r.storageService.get(s.Preferences.THEME,d.StorageScope.GLOBAL,c.DEFAULT_THEME_ID),u=a.isLightTheme(t),l=i.localize(0,null,o.basename(r.resource.fsPath));r.setContents('<html><head><style type="text/css">body {color: '+(u?"black":"white")+'; font-family: "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback"; font-size: 13px; margin: 0; line-height: 1.4em; padding-left: 20px;}</style></head><body>',l,"</body></html>"),n(r)}catch(e){h(e)}},f=function(t){try{var i=t.getMode(),o=e.toUrl("vs/languages/markdown/common");i&&i.emitOutputSupport&&i.getId()===u.MARKDOWN_MODE_ID?i.emitOutputSupport.getEmitOutput(r.resource,o).then(function(e){r.setContents(e.head,e.body,e.tail),n(r)},p):p(null)}catch(s){p(s)}};r.editorService.resolveEditorModel({resource:r.resource,mime:u.MARKDOWN_MIME}).then(function(e){return l?void 0:(t=e.textEditorModel,t.whenModeIsReady())}).then(function(){l||f(t)},p)},function(){l=!0})},r=__decorate([__param(1,l.IWorkbenchEditorService),__param(2,h.IWorkspaceContextService),__param(3,d.IStorageService)],r)}(r.IFrameEditorModel);t.MarkdownEditorModel=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/common/markdownEditorInput",["require","exports","vs/nls!vs/workbench/parts/markdown/common/markdownEditorInput","vs/base/common/paths","vs/base/common/labels","vs/workbench/common/editor/iframeEditorInput","vs/workbench/parts/markdown/common/markdownEditorModel","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace"],function(e,t,n,i,o,r,s,a,c){"use strict";var u=function(e){function t(t,r,s,a,c){e.call(this,t,r||n.localize(0,null,i.basename(t.fsPath)),s||o.getPathLabel(i.dirname(t.fsPath),c)),this.instantiationService=a,this.contextService=c}return __extends(t,e),t.prototype.createNew=function(e){return this.instantiationService.createInstance(t,e,void 0,void 0)},t.prototype.getId=function(){return t.ID},t.prototype.createModel=function(){return this.instantiationService.createInstance(s.MarkdownEditorModel,this.getResource())},t.prototype.matches=function(n){return n instanceof t?e.prototype.matches.call(this,n):!1},t.ID="vs.markdown",t=__decorate([__param(3,a.IInstantiationService),__param(4,c.IWorkspaceContextService)],t)}(r.IFrameEditorInput);t.MarkdownEditorInput=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);
e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownActions",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/base/common/errors","vs/nls!vs/workbench/parts/markdown/browser/markdownActions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/parts/markdown/common/markdownEditorInput","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/css!./media/markdownactions"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.messageService=r}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditorInput();if(t instanceof c.MarkdownEditorInput)this.editorService.openEditor({resource:t.getResource()}).done(null,o.onUnexpectedError);else{var i=void 0,s=a.getUntitledOrFileResource(t);if(s){var u=this.instantiationService.createInstance(f,s);u.run().done(function(){return u.dispose()},o.onUnexpectedError)}else i=r.localize(1,null);i&&this.messageService.show(d.Severity.Info,i)}return n.TPromise.as(!0)},t.ID="workbench.action.markdown.togglePreview",t.LABEL=r.localize(0,null),t=__decorate([__param(2,l.IInstantiationService),__param(3,u.IWorkbenchEditorService),__param(4,d.IMessageService)],t)}(i.Action);t.GlobalTogglePreviewMarkdownAction=h;var p=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.messageService=r}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditorInput();if(t instanceof c.MarkdownEditorInput)return n.TPromise.as(!0);var i=void 0,o=a.getUntitledOrFileResource(t);if(o){var s=this.instantiationService.createInstance(c.MarkdownEditorInput,o,void 0,void 0);return this.editorService.openEditor(s,null,!0)}return i=r.localize(3,null),i&&this.messageService.show(d.Severity.Info,i),n.TPromise.as(!0)},t.ID="workbench.action.markdown.openPreviewSideBySide",t.LABEL=r.localize(2,null),t=__decorate([__param(2,l.IInstantiationService),__param(3,u.IWorkbenchEditorService),__param(4,d.IMessageService)],t)}(i.Action);t.OpenPreviewToSideAction=p;var f=function(e){function t(t,n,i){e.call(this,"workbench.markdown.action.previewFromExplorer",r.localize(4,null)),this.instantiationService=n,this.editorService=i,this.markdownResource=t}return __extends(t,e),t.prototype.run=function(e){var t=this.instantiationService.createInstance(c.MarkdownEditorInput,this.markdownResource,void 0,void 0);return this.editorService.openEditor(t)},t=__decorate([__param(1,l.IInstantiationService),__param(2,u.IWorkbenchEditorService)],t)}(i.Action);t.PreviewMarkdownAction=f;var m=function(e){function t(t,n){e.call(this,"workbench.markdown.action.previewFromEditor",r.localize(5,null)),this.instantiationService=t,this.editorService=n,this["class"]="markdown-action action-preview",this.order=100}return __extends(t,e),t.prototype.run=function(e){var t=this.input,n=!(!e||!e.ctrlKey&&!e.metaKey),i=this.instantiationService.createInstance(c.MarkdownEditorInput,t.getResource(),void 0,void 0);return this.editorService.openEditor(i,null,n)},t=__decorate([__param(0,l.IInstantiationService),__param(1,u.IWorkbenchEditorService)],t)}(s.EditorInputAction);t.PreviewMarkdownEditorInputAction=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownActions.contribution",["require","exports","vs/nls!vs/workbench/parts/markdown/browser/markdownActions.contribution","vs/platform/platform","vs/platform/actions/common/actions","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/common/files","vs/base/common/mime","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/markdown/browser/markdownActions","vs/workbench/parts/markdown/common/markdown","vs/workbench/common/actionRegistry","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element,n=s.asFileResource(t);return n?!n.isDirectory&&a.guessMimeTypes(n.resource.fsPath).indexOf(l.MARKDOWN_MIME)>=0:!1},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=s.asFileResource(e.element),i=this.instantiationService.createInstance(u.PreviewMarkdownAction,n.resource);i.order=0,t.push(i)}return t},t=__decorate([__param(0,h.IInstantiationService)],t)}(r.ActionBarContributor),m=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.toId=function(t){var n=e.prototype.toId.call(this,t),i=this.getMimeFromContext(t);return i&&(n+=i),n},t.prototype.getMimeFromContext=function(e){if(e&&e.input&&e.input instanceof s.FileEditorInput){var t=e.input;return t.getMime()}return null},t.prototype.hasActionsForEditorInput=function(e){var t=e.input;if(t instanceof s.FileEditorInput){var n=t.getResource();return a.guessMimeTypes(n.fsPath).indexOf(l.MARKDOWN_MIME)>=0}return!1},t.prototype.getActionsForEditorInput=function(e){return this.hasActionsForEditorInput(e)?[this.instantiationService.createInstance(u.PreviewMarkdownEditorInputAction)]:[]},t=__decorate([__param(0,h.IInstantiationService)],t)}(c.EditorInputActionContributor),v=i.Registry.as(r.Extensions.Actionbar);v.registerActionBarContributor(r.Scope.VIEWER,f),v.registerActionBarContributor(r.Scope.EDITOR,m);var g=n.localize(0,null),y=i.Registry.as(d.Extensions.WorkbenchActions);y.registerWorkbenchAction(new o.SyncActionDescriptor(u.GlobalTogglePreviewMarkdownAction,u.GlobalTogglePreviewMarkdownAction.ID,u.GlobalTogglePreviewMarkdownAction.LABEL,{primary:p.KeyMod.CtrlCmd|p.KeyMod.Shift|p.KeyCode.KEY_V}),g),y.registerWorkbenchAction(new o.SyncActionDescriptor(u.OpenPreviewToSideAction,u.OpenPreviewToSideAction.ID,u.OpenPreviewToSideAction.LABEL,{primary:p.KeyMod.chord(p.KeyMod.CtrlCmd|p.KeyCode.KEY_K,p.KeyCode.KEY_V)}),g)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/themes/electron-browser/themes.contribution",["require","exports","vs/nls!vs/workbench/parts/themes/electron-browser/themes.contribution","vs/base/common/actions","vs/workbench/common/constants","vs/platform/actions/common/actions","vs/platform/message/common/message","vs/platform/storage/common/storage","vs/platform/platform","vs/workbench/common/actionRegistry","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/workspace/common/workspace","vs/workbench/services/themes/common/themeService","vs/base/common/async","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.contextService=i,this.quickOpenService=o,this.storageService=r,this.messageService=s,this.themeService=a}return __extends(t,e),t.prototype.run=function(){var e=this;return this.themeService.getThemes().then(function(t){var i=e.storageService.get(o.Preferences.THEME,a.StorageScope.GLOBAL,h.DEFAULT_THEME_ID),r=[],c={};t.forEach(function(e){r.push({id:e.id,label:e.label,description:e.description}),t[e.id]=e}),r=r.sort(function(e,t){return e.label.localeCompare(t.label)});var u;r.forEach(function(e,t){e.id===i&&(u=t)});var l=function(t){if(t){var r=t.id;if(c[r])return e.themeService.applyThemeCSS(r).then(function(e){f.ipcRenderer.send("vscode:changeTheme",r)},function(t){e.messageService.show(s.Severity.Info,n.localize(1,null,t.message))});f.ipcRenderer.send("vscode:changeTheme",r)}else e.storageService.get(o.Preferences.THEME,a.StorageScope.GLOBAL)!==i&&f.ipcRenderer.send("vscode:changeTheme",i)},d=null,m=new p.RunOnceScheduler(function(){l(d)},200),v=function(e){d=e,m.schedule()},g=function(e){m.dispose(),l(e)};return e.quickOpenService.pick(r,{placeHolder:n.localize(2,null),autoFocus:{autoFocusIndex:u}}).then(g,null,v)})},t.ID="workbench.action.selectTheme",t.LABEL=n.localize(0,null),t=__decorate([__param(2,d.IWorkspaceContextService),__param(3,l.IQuickOpenService),__param(4,a.IStorageService),__param(5,s.IMessageService),__param(6,h.IThemeService)],t)}(i.Action),v=n.localize(3,null),g=c.Registry.as(u.Extensions.WorkbenchActions);g.registerWorkbenchAction(new r.SyncActionDescriptor(m,m.ID,m.LABEL),v)}),define("vs/workbench/services/themes/node/themeService",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/services/themes/node/themeService","vs/base/common/paths","vs/base/common/json","vs/platform/theme/common/themes","vs/platform/extensions/common/extensionsRegistry","vs/workbench/services/themes/common/themeService","vs/base/node/plist","vs/base/node/pfs"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){switch(e){case"vs":return"vs "+_+"-themes-light_vs-json";case"vs-dark":return"vs-dark "+_+"-themes-dark_vs-json";case"hc-black":return"hc-black "+_+"-themes-hc_black-json";case"vs "+b+"-themes-light_plus-tmTheme":return"vs "+_+"-themes-light_plus-json";case"vs-dark "+b+"-themes-dark_plus-tmTheme":return"vs-dark "+_+"-themes-dark_plus-json"}return e}function h(e){return e.replace(/[^_\-a-zA-Z0-9]/g,"-")}function p(e){return e.styleSheetContent&&g(e.styleSheetContent),f(e.path).then(function(t){var n=m(e.id,t);return e.styleSheetContent=n,g(n),!0},function(t){return n.TPromise.wrapError(i.localize(7,null,e.path))})}function f(e){return l.readFile(e).then(function(t){if(".json"===o.extname(e)){var s=[],a=r.parse(t.toString(),s);return s.length>0?n.TPromise.wrapError(new Error(i.localize(8,null,s.join(", ")))):a.include?f(o.join(o.dirname(e),a.include)).then(function(e){return a.settings=e.settings.concat(a.settings),n.TPromise.as(a)}):n.TPromise.as(a)}var c=u.parse(t.toString());return c.errors&&c.errors.length?n.TPromise.wrapError(new Error(i.localize(9,null,c.errors.join(", ")))):n.TPromise.as(c.value)})}function m(e,t){var n=[],i=t.settings,o={background:void 0,foreground:void 0,caret:void 0,invisibles:void 0,lineHighlight:void 0,selection:void 0},r=s.getBaseThemeId(e)+"."+s.getSyntaxThemeId(e);if(Array.isArray(i)&&i.forEach(function(e,t,i){if(0!==t||e.scope){var s=e.scope,a=e.settings;if(s&&a){var c=Array.isArray(s)?s:s.split(","),u=v(a);c.forEach(function(e){e=e.trim().replace(/ /g,"."),n.push(".monaco-editor."+r+" .token."+e+" { "+u+" }")})}}else o=e.settings}),o.background){var a=new C(o.background);n.push(".monaco-editor."+r+" .monaco-editor-background { background-color: "+a+"; }"),n.push(".monaco-editor."+r+" .glyph-margin { background-color: "+a+"; }"),n.push(".monaco-workbench."+r+" .monaco-editor-background { background-color: "+a+"; }")}if(o.foreground){var c=new C(o.foreground);n.push(".monaco-editor."+r+" { color: "+c+"; }"),n.push(".monaco-editor."+r+" .token { color: "+c+"; }")}if(o.selection){var u=new C(o.selection);n.push(".monaco-editor."+r+" .focused .selected-text { background-color: "+u+"; }"),n.push(".monaco-editor."+r+" .selected-text { background-color: "+u.transparent(.5)+"; }")}if(o.lineHighlight){var l=new C(o.lineHighlight);n.push(".monaco-editor."+r+" .current-line { background-color: "+l+"; border:0; }")}if(o.caret){var d=new C(o.caret);n.push(".monaco-editor."+r+" .cursor { background-color: "+d+"; border-color: "+d+"; }")}if(o.invisibles){var h=new C(o.invisibles);n.push(".monaco-editor."+r+" .token.whitespace { color: "+h+" !important; }")}return n.join("\n")}function v(e){var t=[];for(var n in e){var i=e[n];switch(n){case"foreground":var o=new C(i);t.push("color: "+o+";");break;case"background":break;case"fontStyle":var r=i.split(" ");r.forEach(function(e){switch(i){case"italic":t.push("font-style: italic;");break;case"bold":t.push("font-weight: bold;");break;case"underline":t.push("text-decoration: underline;")}})}}return t.join(" ")}function g(e){var t=document.head.getElementsByClassName(w);if(0===t.length){var n=document.createElement("style");n.type="text/css",n.className=w,n.innerHTML=e,document.head.appendChild(n)}else t[0].innerHTML=e}var y=s.getBaseThemeId(c.DEFAULT_THEME_ID),_="vscode-theme-defaults",b="vscode-theme-colorful-defaults",S=a.ExtensionsRegistry.registerExtensionPoint("themes",{description:i.localize(0,null),type:"array",defaultSnippets:[{body:[{label:"{{label}}",uiTheme:"vs-dark",path:"./themes/{{id}}.tmTheme."}]}],items:{type:"object",defaultSnippets:[{body:{label:"{{label}}",uiTheme:"vs-dark",path:"./themes/{{id}}.tmTheme."}}],properties:{label:{description:i.localize(1,null),type:"string"},uiTheme:{description:i.localize(2,null),"enum":["vs","vs-dark","hc-black"]},path:{description:i.localize(3,null),type:"string"}}}}),E=function(){function e(e){var t=this;this.extensionService=e,this.serviceId=c.IThemeService,this.knownThemes=[],S.setHandler(function(e){for(var n=0,i=e;n<i.length;n++){var o=i[n];t.onThemes(o.description.extensionFolderPath,o.description.id,o.value,o.collector)}})}return e.prototype.loadTheme=function(e){return e=d(e),this.getThemes().then(function(t){var n=t.filter(function(t){return t.id===e});return n.length>0?n[0]:null})},e.prototype.applyThemeCSS=function(e){return this.loadTheme(e).then(function(e){return e?p(e):null})},e.prototype.getThemes=function(){var e=this;return this.extensionService.onReady().then(function(t){return e.knownThemes})},e.prototype.onThemes=function(e,t,n,r){var s=this;return Array.isArray(n)?void n.forEach(function(n){if(!n.path||"string"!=typeof n.path)return void r.error(i.localize(5,null,S.name,String(n.path)));var a=o.normalize(o.join(e,n.path));0!==a.indexOf(e)&&r.warn(i.localize(6,null,S.name,a,e));var c=h(t+"-"+o.normalize(n.path));s.knownThemes.push({id:(n.uiTheme||y)+" "+c,label:n.label||o.basename(n.path),description:n.description,path:a})}):void r.error(i.localize(4,null,S.name))},e}();t.ThemeService=E;var w="contributedColorTheme",C=function(){function e(t){"string"==typeof t?this.parsed=e.parse(t):this.parsed=t,this.str=null}return e.parse=function(e){function t(e){return parseInt("0x"+e)}if("#"===e.charAt(0)&&e.length>=7){var n=t(e.substr(1,2)),i=t(e.substr(3,2)),o=t(e.substr(5,2)),r=9===e.length?t(e.substr(7,2))/255:1;return{r:n,g:i,b:o,a:r}}return{r:255,g:0,b:0,a:1}},e.prototype.toString=function(){if(!this.str){var e=this.parsed;this.str="rgba("+e.r+", "+e.g+", "+e.b+", "+ +e.a.toFixed(2)+")"}return this.str},e.prototype.transparent=function(t){var n=this.parsed;return new e({r:n.r,g:n.g,b:n.b,a:n.a*t})},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/thread/electron-browser/threadService",["require","exports","vs/nls!vs/workbench/services/thread/electron-browser/threadService","vs/base/common/actions","vs/base/common/errors","vs/base/common/marshalling","vs/base/common/objects","vs/base/common/strings","vs/base/common/uri","vs/base/common/winjs.base","vs/base/node/ports","vs/platform/extensions/common/ipcRemoteCom","vs/platform/message/common/message","vs/platform/thread/common/mainThreadService","child_process","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";t.PLUGIN_LOG_BROADCAST_CHANNEL="vscode:pluginLog",t.PLUGIN_ATTACH_BROADCAST_CHANNEL="vscode:pluginAttach";var v=!1,g=function(e){function t(t,n,i){var o=this;e.call(this,t,"vs/editor/common/worker/editorWorkerServer",1),this.extensionHostProcessManager=new y(t,n,i);var r=v||t.getConfiguration().env.logPluginHostCommunication;this.remoteCom=d.create(function(e){r&&console.log("%c[Window → Extension]%c[len: "+a.pad(e.length,5," ")+"]","color: darkgreen","color: grey",e),o.extensionHostProcessManager.postMessage(e)}),this.extensionHostProcessManager.startExtensionHostProcess(function(e){r&&console.log("%c[Extension → Window]%c[len: "+a.pad(e.length,5," ")+"]","color: darkgreen","color: grey",e),o.remoteCom.handle(e)}),this.remoteCom.setManyHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.extensionHostProcessManager.terminate()},t.prototype._registerAndInstantiateExtHostActor=function(e,t){return this._getOrCreateProxyInstance(this.remoteCom,e,t)},t}(p.MainThreadService);t.MainThreadService=g;var y=function(){function a(e,t,n){this.messageService=t,this.contextService=e,this.windowService=n,this.isExtensionDevelopmentHost=!!this.contextService.getConfiguration().env.extensionDevelopmentPath,this.unsentMessages=[]}return a.prototype.startExtensionHostProcess=function(a){var l=this,d=this.contextService.getConfiguration(),p=!d.env.isBuilt||!!d.env.extensionDevelopmentPath,v=!!d.env.extensionTestsPath&&!d.env.debugBrkPluginHost,g={env:s.mixin(s.clone(process.env),{AMD_ENTRYPOINT:"vs/workbench/node/pluginHostProcess",PIPE_LOGGING:"true",VERBOSE_LOGGING:!0})};p&&(this.initializeTimer=setTimeout(function(){var e=d.env.debugBrkPluginHost?n.localize(0,null):n.localize(1,null);l.messageService.show(h.Severity.Warning,e)},1e4)),this.initializeExtensionHostProcess=new u.TPromise(function(s,y){return l.resolveDebugPort(d,function(y){y&&(g.execArgv=["--nolazy",(d.env.debugBrkPluginHost?"--debug-brk=":"--debug=")+y]),l.extensionHostProcessHandle=f.fork(c["default"].parse(e.toUrl("bootstrap")).fsPath,["--type=pluginHost"],g),d.env.extensionDevelopmentPath&&y&&l.windowService.broadcast({channel:t.PLUGIN_ATTACH_BROADCAST_CHANNEL,payload:{port:y}},d.env.extensionDevelopmentPath),l.extensionHostProcessHandle.on("message",function(e){if("ready"===e){l.initializeTimer&&window.clearTimeout(l.initializeTimer);var n=r.stringify({parentPid:process.pid,contextService:{workspace:l.contextService.getWorkspace(),configuration:l.contextService.getConfiguration(),options:l.contextService.getOptions()}});l.extensionHostProcessHandle.send(n)}else if("initialized"===e)l.unsentMessages.forEach(function(e){return l.postMessage(e)}),l.unsentMessages=[],s(l.extensionHostProcessHandle);else if(e&&"__$console"===e.type){var i=e,o=[];try{var c=JSON.parse(i.arguments);o.push.apply(o,Object.getOwnPropertyNames(c).map(function(e){return c[e]}))}catch(u){o.push(i.arguments)}var h=[];h="string"==typeof o[0]&&o[0].indexOf("%")>=0?["%c[Extension Host]%c "+o[0],"color: blue","color: black"].concat(o.slice(1)):["%c[Extension Host]","color: blue"].concat(o),v||console[i.severity].apply(console,h),v?m.ipcRenderer.send("vscode:log",i):p&&l.windowService.broadcast({channel:t.PLUGIN_LOG_BROADCAST_CHANNEL,payload:i},d.env.extensionDevelopmentPath)}else a(e)});var _=function(){return l.terminate()};process.once("exit",_),l.extensionHostProcessHandle.on("error",function(e){var t=o.toErrorMessage(e);t!==l.lastExtensionHostError&&(l.lastExtensionHostError=t,l.messageService.show(h.Severity.Error,n.localize(2,null,t)))}),l.extensionHostProcessHandle.on("exit",function(e,t){process.removeListener("exit",_),l.terminating||(l.isExtensionDevelopmentHost?v?m.ipcRenderer.send("vscode:exit",e):l.windowService.getWindow().close():(l.messageService.show(h.Severity.Error,{message:n.localize(3,null),actions:[new i.Action("reloadWindow",n.localize(4,null),null,!0,function(){return l.windowService.getWindow().reload(),u.TPromise.as(null)})]}),console.error("Extension host terminated unexpectedly. Code: ",e," Signal: ",t)))})})},function(){return l.terminate()})},a.prototype.resolveDebugPort=function(e,t){return"number"==typeof e.env.debugPluginHostPort?l.findFreePort(e.env.debugPluginHostPort,10,function(n){return n?(n!==e.env.debugPluginHostPort&&console.warn("%c[Extension Host] %cProvided debugging port "+e.env.debugPluginHostPort+" is not free, using "+n+" instead.","color: blue","color: black"),e.env.debugBrkPluginHost?console.warn("%c[Extension Host] %cSTOPPED on first line for debugging on port "+n,"color: blue","color: black"):console.info("%c[Extension Host] %cdebugger listening on port "+n,"color: blue","color: black"),t(n)):(console.warn("%c[Extension Host] %cCould not find a free port for debugging","color: blue","color: black"),t(void 0))}):t(void 0)},a.prototype.postMessage=function(e){this.initializeExtensionHostProcess?this.initializeExtensionHostProcess.done(function(t){return t.send(e)}):this.unsentMessages.push(e)},a.prototype.terminate=function(){this.terminating=!0,this.extensionHostProcessHandle&&this.extensionHostProcessHandle.send({type:"__$terminate"})},a}()}),define("vs/workbench/services/untitled/common/untitledEditorService",["require","exports","vs/base/common/uri","vs/platform/instantiation/common/instantiation","vs/base/common/events","vs/base/common/arrays","vs/workbench/common/editor/untitledEditorInput"],function(e,t,n,i,o,r,s){"use strict";t.IUntitledEditorService=i.createDecorator("untitledEditorService");var a=function(){function e(){this.serviceId=t.IUntitledEditorService}return e.prototype.setInstantiationService=function(e){this.instantiationService=e},e.prototype.get=function(t){return e.CACHE[t.toString()]},e.prototype.getAll=function(t){var n=this;return t?r.coalesce(t.map(function(e){return n.get(e)})):Object.keys(e.CACHE).map(function(t){return e.CACHE[t]})},e.prototype.isDirty=function(e){var t=this.get(e);return t&&t.isDirty()},e.prototype.getDirty=function(){return Object.keys(e.CACHE).map(function(t){return e.CACHE[t]}).filter(function(e){return e.isDirty()}).map(function(e){return e.getResource()})},e.prototype.createOrGet=function(t,n){var i=!1;return t&&(i="file"===t.scheme,t=this.resourceToUntitled(t),i&&(e.KNOWN_ASSOCIATED_FILE_PATHS[t.toString()]=!0)),t&&e.CACHE[t.toString()]?e.CACHE[t.toString()]:this.doCreate(t,i,n)},e.prototype.doCreate=function(t,i,r){if(!t){var a=Object.keys(e.CACHE).length+1;do t=n["default"].create(s.UntitledEditorInput.SCHEMA,null,"Untitled-"+a),a++;while(Object.keys(e.CACHE).indexOf(t.toString())>=0)}var c=this.instantiationService.createInstance(s.UntitledEditorInput,t,i,r);return c.addOneTimeListener(o.EventType.DISPOSE,function(){delete e.CACHE[c.getResource().toString()],delete e.KNOWN_ASSOCIATED_FILE_PATHS[c.getResource().toString()]}),e.CACHE[t.toString()]=c,c},e.prototype.resourceToUntitled=function(e){return e.scheme===s.UntitledEditorInput.SCHEMA?e:n["default"].create(s.UntitledEditorInput.SCHEMA,null,e.fsPath)},e.prototype.hasAssociatedFilePath=function(t){return!!e.KNOWN_ASSOCIATED_FILE_PATHS[t.toString()]},e.CACHE=Object.create(null),e.KNOWN_ASSOCIATED_FILE_PATHS=Object.create(null),e}();t.UntitledEditorService=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/services/editor/browser/editorService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/network","vs/base/common/mime","vs/platform/platform","vs/base/common/paths","vs/base/common/types","vs/editor/common/editorCommon","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/common/editor/resourceEditorInput","vs/workbench/common/editor/untitledEditorInput","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(){function e(e,t,n){this.untitledEditorService=t,this.instantiationService=n,this.serviceId=m.IWorkbenchEditorService,this.editorPart=e,this.fileInputDescriptor=s.Registry.as(l.Extensions.Editors).getDefaultFileInput()}return e.prototype.setInstantiationService=function(e){this.instantiationService=e},e.prototype.getActiveEditor=function(){return this.editorPart.getActiveEditor()},e.prototype.getActiveEditorInput=function(){return this.editorPart.getActiveEditorInput()},e.prototype.getVisibleEditors=function(){return this.editorPart.getVisibleEditors()},e.prototype.isVisible=function(e,t){return e?this.getVisibleEditors().some(function(n){if(!n.input)return!1;if(e.matches(n.input))return!0;if(t){var i=n.input;if(c.isFunction(i.getOriginalInput)&&c.isFunction(i.getModifiedInput))return e.matches(i.getModifiedInput())||e.matches(i.getOriginalInput())}return!1}):!1},e.prototype.moveEditor=function(e,t){this.editorPart.moveEditor(e,t)},e.prototype.arrangeEditors=function(e){this.editorPart.arrangeEditors(e)},e.prototype.setEditors=function(e,t){var i=this;return n.Promise.join(e.map(function(e){return i.inputToType(e)})).then(function(n){return i.editorPart.setEditors(n,t||e.map(function(e){return e instanceof d.EditorInput?null:d.TextEditorOptions.from(e)}))})},e.prototype.openEditor=function(e,t,r){var s=this;if(null===e)return this.doOpenEditor(e,null,c.isNumber(t)||c.isBoolean(t)?t:r);if(e instanceof d.EditorInput)return this.doOpenEditor(e,t,r);var a=e;if(a.resource instanceof i["default"]){var u=a.resource.scheme;if(u===o.Schemas.http||u===o.Schemas.https)return window.open(a.resource.toString()),n.TPromise.as(null)}var l=e;return this.inputToType(l).then(function(e){return e?s.doOpenEditor(e,d.TextEditorOptions.from(l),t):n.TPromise.as(null)})},e.prototype.doOpenEditor=function(e,t,n){return this.editorPart.openEditor(e,t,n)},e.prototype.closeEditor=function(e){var t=this.findEditor(e);return t?this.editorPart.openEditor(null,null,t.position):n.TPromise.as(null)},e.prototype.closeEditors=function(e){return this.editorPart.closeEditors(e)},e.prototype.focusEditor=function(e){var t=this.findEditor(e);return t?this.editorPart.openEditor(t.input,null,t.position):n.TPromise.as(null)},e.prototype.activateEditor=function(e){var t=this.findEditor(e);t&&this.editorPart.activateEditor(t)},e.prototype.findEditor=function(e){if(e instanceof l.BaseEditor)return e;if(c.isUndefinedOrNull(e))return this.editorPart.getActiveEditor();if(c.isNumber(e))for(var t=e,n=this.editorPart.getVisibleEditors(),i=0;i<n.length;i++){var o=n[i];if(o.position===t)return o}return null},e.prototype.resolveEditorModel=function(e,t){return this.inputToType(e).then(function(e){return e&&e instanceof d.EditorInput?e.resolve(!!t):n.TPromise.as(null)})},e.prototype.inputToType=function(e){if(e instanceof d.EditorInput)return n.TPromise.as(e);var t=e;if(t.resource instanceof i["default"]&&t.resource.scheme===o.Schemas.inMemory){var r=this.getActiveEditor();if(r){var s=r.getControl();if(c.isFunction(s.getEditorType))if(s.getEditorType()===u.EditorType.ICodeEditor){var l=s,f=this.findModel(l,e);if(f)return n.TPromise.as(r.input)}else if(s.getEditorType()===u.EditorType.IDiffEditor){var m=r.input,v=s,g=this.findModel(v.getOriginalEditor(),e);if(g)return n.TPromise.as(m.getOriginalInput());var y=this.findModel(v.getModifiedEditor(),e);if(y)return n.TPromise.as(m.getModifiedInput())}}}else{if(t.resource instanceof i["default"]&&t.resource.scheme===p.UntitledEditorInput.SCHEMA)return n.TPromise.as(this.untitledEditorService.createOrGet(t.resource));if(this.fileInputDescriptor&&t.resource instanceof i["default"]&&t.resource.scheme===o.Schemas.file)return this.createFileInput(t.resource,t.mime);if(t.resource instanceof i["default"])return n.TPromise.as(this.instantiationService.createInstance(h.ResourceEditorInput,a.basename(t.resource.fsPath),a.dirname(t.resource.fsPath),t.resource))}return n.TPromise.as(null)},e.prototype.createFileInput=function(e,t){return this.instantiationService.createInstance(this.fileInputDescriptor).then(function(n){return n.setResource(e),n.setMime(t||r.guessMimeTypes(e.fsPath).join(", ")),n})},e.prototype.findModel=function(e,t){var n=e.getModel();return n&&n.getAssociatedResource().toString()===t.resource.toString()?n:null},e=__decorate([__param(1,f.IUntitledEditorService),__param(2,v.IInstantiationService)],e)}();t.WorkbenchEditorService=g;var y=function(){function e(e){this.editorService=e}return e.prototype.setEditors=function(e){return this.editorService.setEditors(e)},e.prototype.openEditor=function(e,t,n){return this.editorService.openEditor(e,t,n)},e.prototype.getActiveEditor=function(){return this.editorService.getActiveEditor()},e.prototype.activateEditor=function(e){this.editorService.activateEditor(e)},e.prototype.getActiveEditorInput=function(){return this.editorService.getActiveEditorInput()},e.prototype.getVisibleEditors=function(){return this.editorService.getVisibleEditors()},e.prototype.moveEditor=function(e,t){this.editorService.moveEditor(e,t)},e.prototype.arrangeEditors=function(e){this.editorService.arrangeEditors(e)},e.prototype.closeEditors=function(e){return this.editorService.closeEditors(e)},e}(),_=function(e){function t(t,n,i,o,r){e.call(this,new y(r),i,o),this.editor=t,this.handler=n}return __extends(t,e),t.prototype.doOpenEditor=function(t,i,o){var r=this;return this.handler(this.editor,t,i,o).then(function(s){return s?n.TPromise.as(r.editor):e.prototype.doOpenEditor.call(r,t,i,o)})},t=__decorate([__param(2,f.IUntitledEditorService),__param(3,v.IInstantiationService),__param(4,m.IWorkbenchEditorService)],t)}(g);t.DelegatingWorkbenchEditorService=_});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/services/search/node/searchService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/glob","vs/base/common/objects","vs/base/common/scorer","vs/base/common/strings","vs/base/node/service.cp","vs/platform/search/common/search","vs/workbench/services/untitled/common/untitledEditorService","vs/editor/common/services/modelService","vs/platform/workspace/common/workspace","vs/platform/configuration/common/configuration","vs/workbench/services/search/node/rawSearchService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){
"use strict";var m=function(){function e(e,t,n,i){this.modelService=e,this.untitledEditorService=t,this.contextService=n,this.configurationService=i,this.serviceId=u.ISearchService;var o=n.getConfiguration();this.diskSearch=new v(!o.env.isBuilt||o.env.verboseLogging)}return e.prototype.search=function(e){var t=this;return this.configurationService.loadConfiguration().then(function(i){if(!e.fileEncoding){var o=i&&i.files&&i.files.encoding;e.fileEncoding=o}var s=i&&i.files&&i.files.exclude;s&&(e.excludePattern?r.mixin(e.excludePattern,s,!1):e.excludePattern=s);var a;return new n.PPromise(function(n,i,o){var r=!1,s=t.getLocalResults(e),c=function(){r||(r=!0,Object.keys(s).map(function(e){return s[e]}).filter(function(e){return!!e}).forEach(o))};a=t.diskSearch.search(e).then(function(e){c(),n({results:e.results.filter(function(e){return"undefined"==typeof s[e.resource.toString()]}),limitHit:e.limitHit})},function(e){c(),i(e)},function(e){c(),e.resource?"undefined"==typeof s[e.resource.toString()]&&o(e):o(e)})},function(){return a&&a.cancel()})})},e.prototype.getLocalResults=function(e){var t=this,n=Object.create(null);if(e.type===u.QueryType.Text){var i=this.modelService.getModels();i.forEach(function(i){var o=i.getAssociatedResource();if(o){if("untitled"===o.scheme){if(!t.untitledEditorService.get(o))return}else if("file"!==o.scheme)return;if(t.matches(o,e.filePattern,e.includePattern,e.excludePattern)){var r=i.findMatches(e.contentPattern.pattern,!1,e.contentPattern.isRegExp,e.contentPattern.isCaseSensitive,e.contentPattern.isWordMatch);if(r.length){var s=new u.FileMatch(o);n[o.toString()]=s,r.forEach(function(e){s.lineMatches.push(new u.LineMatch(i.getLineContent(e.startLineNumber),e.startLineNumber-1,[[e.startColumn-1,e.endColumn-e.startColumn]]))})}else n[o.toString()]=!1}}})}return n},e.prototype.matches=function(e,t,n,i){var r=this.contextService.toWorkspaceRelativePath(e);if(t){if("file"!==e.scheme)return!1;if(!s.matches(e.fsPath,a.stripWildcards(t).toLowerCase()))return!1}if(n){if("file"!==e.scheme)return!1;if(!o.match(n,r||e.fsPath))return!1}if(i){if("file"!==e.scheme)return!0;if(o.match(i,r||e.fsPath))return!1}return!0},e=__decorate([__param(0,d.IModelService),__param(1,l.IUntitledEditorService),__param(2,h.IWorkspaceContextService),__param(3,p.IConfigurationService)],e)}();t.SearchService=m;var v=function(){function t(t){var n=new c.Client(i["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Search",timeout:6e4,args:["--type=searchService"],env:{AMD_ENTRYPOINT:"vs/workbench/services/search/node/searchApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:t}});this.raw=n.getService("SearchService",f.SearchService)}return t.prototype.search=function(e){var t,o=[],r={rootFolders:e.folderResources?e.folderResources.map(function(e){return e.fsPath}):[],extraFiles:e.extraFileResources?e.extraFileResources.map(function(e){return e.fsPath}):[],filePattern:e.filePattern,excludePattern:e.excludePattern,includePattern:e.includePattern,maxResults:e.maxResults};return e.type===u.QueryType.Text&&(r.contentPattern=e.contentPattern,r.fileEncoding=e.fileEncoding),t=e.type===u.QueryType.File?this.raw.fileSearch(r):this.raw.textSearch(r),new n.PPromise(function(e,n,r){t.done(function(t){e({limitHit:t.limitHit,results:o})},n,function(e){if(e.path){var t=new u.FileMatch(i["default"].file(e.path));if(o.push(t),e.lineMatches)for(var n=0;n<e.lineMatches.length;n++)t.lineMatches.push(new u.LineMatch(e.lineMatches[n].preview,e.lineMatches[n].lineNumber,e.lineMatches[n].offsetAndLengths));r(t)}else r(e)})},function(){return t.cancel()})},t}()}),define("vs/workbench/services/viewlet/common/viewletService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){"use strict";t.IViewletService=n.createDecorator("viewletService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/viewlet",["require","exports","vs/nls!vs/workbench/browser/viewlet","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/errors","vs/platform/platform","vs/base/browser/builder","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/base/browser/ui/toolbar/toolbar","vs/base/browser/dnd","vs/base/common/lifecycle","vs/base/browser/ui/splitview/splitview","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/workbench/browser/composite","vs/platform/contextview/browser/contextView","vs/platform/message/common/message","vs/platform/selection/common/selection"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";function S(e){var t=document.createElement("div");return e.appendChild(t),t}function E(e,t){e&&(t?a.$(e.getHTMLElement()).show():a.$(e.getHTMLElement()).hide(),t?e.onVisible():e.onHidden())}function w(e){if(e){var t=e.getSelection();t.length>0&&C(e,t[0],.5),e.DOMFocus()}}function C(e,t,n){return e?e.reveal(t,n):i.TPromise.as(null)}var T=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(g.Composite);t.Viewlet=T;var k=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.create=function(t){var n=this;return e.prototype.create.call(this,t),this.viewerContainer=t.div(),this.viewer=this.createViewer(this.viewerContainer),this.toUnbind.push(this.viewer.addListener("selection",function(e){return n.onSelection(e)})),this.toUnbind.push(this.viewer.addListener("focus",function(e){return n.onFocus(e)})),i.TPromise.as(null)},t.prototype.getViewer=function(){return this.viewer},t.prototype.setVisible=function(t){var n;return t?(n=e.prototype.setVisible.call(this,t),this.getViewer().onVisible()):(this.getViewer().onHidden(),n=e.prototype.setVisible.call(this,t)),n},t.prototype.focus=function(){if(this.viewer){var e=this.viewer.getSelection();e.length>0&&this.reveal(e[0],.5).done(null,r.onUnexpectedError),this.viewer.DOMFocus()}},t.prototype.reveal=function(e,t){return this.viewer?(this.wasLayouted||this.viewer.layout(),this.viewer.reveal(e,t)):i.TPromise.as(null)},t.prototype.layout=function(e){this.viewer&&(this.wasLayouted=!0,this.viewer.layout(e.height))},t.prototype.getControl=function(){return this.viewer},t.prototype.getSelection=function(){return this.viewer?new b.StructuredSelection(this.viewer.getSelection()):new b.StructuredSelection([])},t.prototype.dispose=function(){this.viewer&&this.viewer.dispose(),e.prototype.dispose.call(this)},t}(T);t.ViewerViewlet=k;var x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(g.CompositeDescriptor);t.ViewletDescriptor=x,t.Extensions={Viewlets:"workbench.contributions.viewlets"};var I=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.registerViewlet=function(t){e.prototype.registerComposite.call(this,t)},t.prototype.getViewlet=function(e){return this.getComposite(e)},t.prototype.getViewlets=function(){return this.getComposits()},t.prototype.setDefaultViewletId=function(e){this.defaultViewletId=e},t.prototype.getDefaultViewletId=function(){return this.defaultViewletId},t}(g.CompositeRegistry);t.ViewletRegistry=I,s.Registry.add(t.Extensions.Viewlets,new I);var D=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.viewletService=o,this.editorService=r,this.viewletId=i,this.enabled=!!this.viewletService&&!!this.editorService}return __extends(t,e),t.prototype.run=function(){if(this.otherViewletShowing()||!this.sidebarHasFocus())return this.viewletService.openViewlet(this.viewletId,!0);var e=this.editorService.getActiveEditor();return e&&e.focus(),i.TPromise.as(!0)},t.prototype.otherViewletShowing=function(){var e=this.viewletService.getActiveViewlet();return!e||e.getId()!==this.viewletId},t.prototype.sidebarHasFocus=function(){var e=this.viewletService.getActiveViewlet(),t=document.activeElement;return e&&t&&o.isAncestor(t,e.getContainer().getHTMLElement())},t=__decorate([__param(3,m.IViewletService),__param(4,v.IWorkbenchEditorService)],t)}(c.Action);t.ToggleViewletAction=D;var A=function(e){function t(t,o,r){e.call(this,"workbench.action.collapse",n.localize(0,null),r,o,function(e){return t.getHighlight()?i.TPromise.as(null):(t.collapseAll(),t.clearSelection(),t.clearFocus(),t.DOMFocus(),t.focusFirst(),i.TPromise.as(null))})}return __extends(t,e),t}(c.Action);t.CollapseAction=A;var L=function(e){function t(t,n,i,o,r,s){e.call(this,{expandedBodySize:n,headerSize:22,initialState:i?f.CollapsibleState.COLLAPSED:f.CollapsibleState.EXPANDED,ariaHeaderLabel:o}),this.viewName=o,this.messageService=r,this.contextMenuService=s,this.actionRunner=t,this.toDispose=[]}return __extends(t,e),t.prototype.create=function(){return i.TPromise.as(null)},t.prototype.renderHeader=function(e){var t=this;this.toolBar=new d.ToolBar(a.$("div.actions").appendTo(e).getHTMLElement(),this.contextMenuService,{orientation:u.ActionsOrientation.HORIZONTAL,actionItemProvider:function(e){return t.getActionItem(e)},ariaLabel:n.localize(1,null,this.viewName)}),this.toolBar.actionRunner=this.actionRunner,this.toolBar.setActions(l.prepareActions(this.getActions()),l.prepareActions(this.getSecondaryActions()))(),this.dragHandler=new h.DelayedDragHandler(e,function(){t.isExpanded()||t.expand()})},t.prototype.changeState=function(t){E(this.tree,t===f.CollapsibleState.EXPANDED),e.prototype.changeState.call(this,t)},t.prototype.renderViewTree=function(e){return S(e)},t.prototype.getViewer=function(){return this.tree},t.prototype.refresh=function(e,t,n){return i.TPromise.as(null)},t.prototype.setVisible=function(e){return this.isVisible=e,E(this.tree,this.state===f.CollapsibleState.EXPANDED),i.TPromise.as(null)},t.prototype.focusBody=function(){w(this.tree)},t.prototype.getSelection=function(){return new b.StructuredSelection(this.tree.getSelection())},t.prototype.reveal=function(e,t){return C(this.tree,e,t)},t.prototype.layoutBody=function(e){this.treeContainer.style.height=e+"px",this.tree.layout(e)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t.prototype.dispose=function(){this.isDisposed=!0,this.treeContainer=null,this.tree.dispose(),this.dragHandler.dispose(),this.toDispose=p.disposeAll(this.toDispose),this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t=__decorate([__param(4,_.IMessageService),__param(5,y.IContextMenuService)],t)}(f.FixedCollapsibleView);t.AdaptiveCollapsibleViewletView=L;var O=function(e){function t(t,n,i,o,r){e.call(this,{minimumSize:44,initialState:n?f.CollapsibleState.COLLAPSED:f.CollapsibleState.EXPANDED,ariaHeaderLabel:i}),this.viewName=i,this.messageService=o,this.contextMenuService=r,this.actionRunner=t,this.toDispose=[]}return __extends(t,e),t.prototype.changeState=function(t){E(this.tree,t===f.CollapsibleState.EXPANDED),e.prototype.changeState.call(this,t)},t.prototype.create=function(){return i.TPromise.as(null)},t.prototype.renderHeader=function(e){var t=this;this.toolBar=new d.ToolBar(a.$("div.actions").appendTo(e).getHTMLElement(),this.contextMenuService,{orientation:u.ActionsOrientation.HORIZONTAL,actionItemProvider:function(e){return t.getActionItem(e)},ariaLabel:n.localize(2,null,this.viewName)}),this.toolBar.actionRunner=this.actionRunner,this.toolBar.setActions(l.prepareActions(this.getActions()),l.prepareActions(this.getSecondaryActions()))(),this.dragHandler=new h.DelayedDragHandler(e,function(){t.isExpanded()||t.expand()})},t.prototype.renderViewTree=function(e){return S(e)},t.prototype.getViewer=function(){return this.tree},t.prototype.refresh=function(e,t,n){return i.TPromise.as(null)},t.prototype.setVisible=function(e){return this.isVisible=e,E(this.tree,this.state===f.CollapsibleState.EXPANDED),i.TPromise.as(null)},t.prototype.focusBody=function(){w(this.tree)},t.prototype.getSelection=function(){return new b.StructuredSelection(this.tree.getSelection())},t.prototype.reveal=function(e,t){return C(this.tree,e,t)},t.prototype.layoutBody=function(e){this.treeContainer.style.height=e+"px",this.tree.layout(e)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t.prototype.dispose=function(){this.isDisposed=!0,this.treeContainer=null,this.tree.dispose(),this.dragHandler.dispose(),this.toDispose=p.disposeAll(this.toDispose),this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t=__decorate([__param(3,_.IMessageService),__param(4,y.IContextMenuService)],t)}(f.CollapsibleView);t.CollapsibleViewletView=O});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/activitybar/activitybarPart",["require","exports","vs/nls!vs/workbench/browser/parts/activitybar/activitybarPart","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/common/errors","vs/base/browser/ui/actionbar/actionbar","vs/platform/platform","vs/workbench/common/events","vs/workbench/browser/viewlet","vs/workbench/browser/part","vs/workbench/browser/parts/activitybar/activityAction","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/activity/common/activityService","vs/workbench/services/part/common/partService","vs/css!./media/activityBarPart"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(t,n,i,o,r,s,a){e.call(this,a),this.viewletService=t,this.messageService=n,this.telemetryService=i,this.eventService=o,this.contextMenuService=r,this.keybindingService=s,this.serviceId=p.IActivityService,this.activityActionItems={},this.viewletIdToActions={},this.registerListeners()}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(c.EventType.COMPOSITE_OPENING,function(t){return e.onCompositeOpening(t)})),this.toUnbind.push(this.eventService.addListener(c.EventType.COMPOSITE_CLOSED,function(t){return e.onCompositeClosed(t)}))},t.prototype.onCompositeOpening=function(e){if(this.viewletIdToActions[e.compositeId]){this.viewletIdToActions[e.compositeId].activate();for(var t in this.viewletIdToActions)this.viewletIdToActions.hasOwnProperty(t)&&t!==e.compositeId&&this.viewletIdToActions[t].deactivate()}},t.prototype.onCompositeClosed=function(e){this.viewletIdToActions[e.compositeId]&&this.viewletIdToActions[e.compositeId].deactivate()},t.prototype.showActivity=function(e,t,n){var i=this.viewletIdToActions[e];i&&(i.setBadge(t),n&&(i["class"]=n))},t.prototype.clearActivity=function(e){this.showActivity(e,null)},t.prototype.createContentArea=function(e){var t=o.$(e),n=o.$(".content").appendTo(t);return this.createViewletSwitcher(n.clone()),n},t.prototype.createViewletSwitcher=function(e){var t=this;this.viewletSwitcherBar=new s.ActionBar(e,{actionItemProvider:function(e){return t.activityActionItems[e.id]},orientation:s.ActionsOrientation.VERTICAL,ariaLabel:n.localize(0,null)}),this.viewletSwitcherBar.getContainer().addClass("position-top");var i=this.viewletService.getActiveViewlet(),o=a.Registry.as(u.Extensions.Viewlets),r=o.getViewlets().sort(function(e,t){return e.order-t.order}).map(function(e){var n=t.instantiationService.createInstance(v,e.id+".activity-bar-action",e),o=null,r=t.keybindingService.lookupKeybindings(e.id).map(function(e){return t.keybindingService.getLabelFor(e)});return r&&r.length&&(o=r[0]),t.activityActionItems[n.id]=new d.ActivityActionItem(n,e.name,o),t.viewletIdToActions[e.id]=n,i&&i.getId()===e.id&&n.activate(),n});this.viewletSwitcherBar.push(r,{label:!0,icon:!0})},t.prototype.dispose=function(){this.viewletSwitcherBar&&(this.viewletSwitcherBar.dispose(),this.viewletSwitcherBar=null),this.globalToolBar&&(this.globalToolBar.dispose(),this.globalToolBar=null),e.prototype.dispose.call(this)},t}(l.Part);t.ActivitybarPart=m;var v=function(e){function t(t,n,i,o){e.call(this,t,n.name,n.cssClass),this.viewletService=i,this.partService=o,this.viewlet=n}return __extends(t,e),t.prototype.run=function(){var e=(new Date).getTime();if(e-t.lastRun<t.preventDoubleClickDelay)return i.TPromise.as(!0);t.lastRun=e;var n=this.partService.isSideBarHidden(),o=this.viewletService.getActiveViewlet();return!n&&o&&o.getId()===this.viewlet.id?this.partService.setSideBarHidden(!0):(this.viewletService.openViewlet(this.viewlet.id,!0).done(null,r.onUnexpectedError),this.activate()),i.TPromise.as(!0)},t.preventDoubleClickDelay=300,t.lastRun=0,t=__decorate([__param(2,h.IViewletService),__param(3,f.IPartService)],t)}(d.ActivityAction)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/sidebar/sidebarPart",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/sidebar/sidebarPart","vs/platform/platform","vs/base/common/actions","vs/workbench/browser/parts/compositePart","vs/workbench/browser/viewlet","vs/workbench/common/actionRegistry","vs/platform/actions/common/actions","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/workbench/browser/actionBarRegistry","vs/base/common/keyCodes","vs/css!./media/sidebarpart"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(e){function t(n,i,r,s,c,u,d,p){e.call(this,n,i,r,s,c,u,d,o.Registry.as(a.Extensions.Viewlets),t.activeViewletSettingsKey,"sideBar","viewlet",h.Scope.VIEWLET,p),this.serviceId=l.IViewletService}return __extends(t,e),t.prototype.openViewlet=function(e,t){if(this.blockOpeningViewlet)return n.TPromise.as(null);if(this.partService.isSideBarHidden())try{this.blockOpeningViewlet=!0,this.partService.setSideBarHidden(!1)}finally{this.blockOpeningViewlet=!1}return this.openComposite(e,t)},t.prototype.getActiveViewlet=function(){return this.getActiveComposite()},t.prototype.getLastActiveViewletId=function(){return this.getLastActiveCompositetId()},t.prototype.hideActiveViewlet=function(){return this.hideActiveComposite()},t.activeViewletSettingsKey="workbench.sidebar.activeviewletid",t}(s.CompositePart);t.SidebarPart=f;var m=function(e){function t(t,n,i,o){e.call(this,t,n),this.viewletService=i,this.partService=o}return __extends(t,e),t.prototype.run=function(){if(this.partService.isSideBarHidden())this.partService.setSideBarHidden(!1);else{var e=this.viewletService.getActiveViewlet();e&&e.focus()}return n.TPromise.as(!0)},t.ID="workbench.action.focusSideBar",t.LABEL=i.localize(0,null),t=__decorate([__param(2,l.IViewletService),__param(3,d.IPartService)],t)}(r.Action);t.FocusSideBarAction=m;var v=o.Registry.as(c.Extensions.WorkbenchActions);v.registerWorkbenchAction(new u.SyncActionDescriptor(m,m.ID,m.LABEL,{primary:p.KeyMod.CtrlCmd|p.KeyCode.KEY_0}),i.localize(1,null))});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/window",["require","exports","vs/base/common/platform","vs/base/common/paths","vs/base/common/uri","vs/workbench/common/constants","vs/workbench/common/events","vs/workbench/common/editor","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/browser/dom","vs/platform/storage/common/storage","vs/platform/event/common/event","vs/platform/workspace/common/workspace","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=f.remote.dialog,v=function(){function e(e,t,n,i,o,r,s){this.contextService=n,this.eventService=i,this.storageService=o,this.editorService=r,this.viewletService=s,this.win=e,this.windowId=e.id,this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;n.platform===n.Platform.Mac&&this.eventService.addListener(s.EventType.EDITOR_INPUT_CHANGED,function(t){var n=a.asFileEditorInput(t.editorInput,!0),i="";n&&(i=n.getResource().fsPath),f.ipcRenderer.send("vscode:setRepresentedFilename",e.windowId,i)}),window.document.body.addEventListener("dragover",function(e){e.preventDefault()}),window.document.body.addEventListener("drop",function(t){t.preventDefault();var n=window.document.getElementById(r.Identifiers.EDITOR_PART);if(l.isAncestor(t.toElement,n)){var s=!1;if(t.dataTransfer&&t.dataTransfer.files){for(var a=[],c=0;c<t.dataTransfer.files.length;c++)t.dataTransfer.files[c]&&t.dataTransfer.files[c].path&&a.push(t.dataTransfer.files[c].path);a.length&&(s=!0,e.focus(),e.open(a))}if(!s&&t.dataTransfer&&t.dataTransfer.items){var u=t.dataTransfer.items;u.length&&"function"==typeof u[0].getAsString&&u[0].getAsString(function(t){try{var n=o["default"].parse(t);if("file"===n.scheme){var r=e.contextService.getWorkspace();if(r&&i.isEqualOrParent(n.fsPath,r.resource.fsPath))return;e.focus(),e.open([decodeURIComponent(n.fsPath)])}}catch(s){}})}}}),window.open=function(e,t,n,i){return f.shell.openExternal(e),null}},e.prototype.open=function(e){var t;t=Array.isArray(e)?e:"string"==typeof e?[e]:[e.fsPath],f.ipcRenderer.send("vscode:windowOpen",t)},e.prototype.openNew=function(){f.ipcRenderer.send("vscode:openNewWindow")},e.prototype.close=function(){this.win.close()},e.prototype.reload=function(){f.ipcRenderer.send("vscode:reloadWindow",this.windowId)},e.prototype.showMessageBox=function(e){return m.showMessageBox(this.win,e)},e.prototype.showSaveDialog=function(e,t){return t?m.showSaveDialog(this.win,e,t):m.showSaveDialog(this.win,e)},e.prototype.setFullScreen=function(e){f.ipcRenderer.send("vscode:setFullScreen",this.windowId,e)},e.prototype.openDevTools=function(){f.ipcRenderer.send("vscode:openDevTools",this.windowId)},e.prototype.setMenuBarVisibility=function(e){f.ipcRenderer.send("vscode:setMenuBarVisibility",this.windowId,e)},e.prototype.focus=function(){f.ipcRenderer.send("vscode:focusWindow",this.windowId)},e.prototype.flashFrame=function(){f.ipcRenderer.send("vscode:flashFrame",this.windowId)},e=__decorate([__param(2,p.IWorkspaceContextService),__param(3,h.IEventService),__param(4,d.IStorageService),__param(5,u.IWorkbenchEditorService),__param(6,c.IViewletService)],e)}();t.ElectronWindow=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debugActions",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debugActions","vs/base/common/actions","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/platform/event/common/event","vs/platform/keybinding/common/keybindingService","vs/workbench/common/events","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/services/part/common/partService","vs/workbench/services/panel/common/panelService","vs/workbench/services/viewlet/common/viewletService","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=h.IDebugService,_=function(e){function t(t,n,i,o,r){var s=this;e.call(this,t,n,i,!1),this.debugService=o,this.keybindingService=r,this.toDispose=[],this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){return s.updateEnablement()}));var a=this.keybindingService.lookupKeybindings(t).map(function(e){return s.keybindingService.getLabelFor(e)});a&&a.length&&(this.keybinding=a[0]),this.updateLabel(n),this.updateEnablement()}return __extends(t,e),t.prototype.run=function(e){throw new Error("implement me")},t.prototype.updateLabel=function(e){this.keybinding?this.label=n.localize(0,null,e,this.keybinding):this.label=e},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t.prototype.isEnabled=function(){return this.debugService.getState()!==h.State.Disabled},t.prototype.dispose=function(){this.debugService=null,this.toDispose=o.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(3,y),__param(4,l.IKeybindingService)],t)}(i.Action);t.AbstractDebugAction=_;var b=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action configure",i,o)}return __extends(t,e),t.prototype.run=function(e){var t=!(!e||!e.ctrlKey&&!e.metaKey);return this.debugService.openConfigFile(t)},t.ID="workbench.action.debug.configure",t.LABEL=n.localize(1,null,"launch.json"),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ConfigureAction=b;var S=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action select-active-config",i,o)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.setConfiguration(e)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Inactive},t.ID="workbench.debug.action.setActiveConfig",t.LABEL=n.localize(2,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.SelectConfigAction=S;var E=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action start",i,o),this.updateEnablement()}return __extends(t,e),t.prototype.run=function(){return this.debugService.createSession(!1)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Inactive},t.ID="workbench.action.debug.start",t.LABEL=n.localize(3,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.StartDebugAction=E;var w=function(e){function t(n,i,o,r){var s=this;e.call(this,n,i,"debug-action restart",o,r),this.updateEnablement(),this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){var e=s.debugService.getActiveSession();e&&s.updateLabel(e.isAttach?t.RECONNECT_LABEL:t.LABEL)}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.restartSession()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()!==h.State.Inactive},t.ID="workbench.action.debug.restart",t.LABEL=n.localize(4,null),t.RECONNECT_LABEL=n.localize(5,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RestartDebugAction=w;var C=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action step-over",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().next({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Stopped},t.ID="workbench.action.debug.stepOver",t.LABEL=n.localize(6,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.StepOverDebugAction=C;var T=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action step-into",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().stepIn({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Stopped},t.ID="workbench.action.debug.stepInto",t.LABEL=n.localize(7,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.StepIntoDebugAction=T;var k=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action step-out",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().stepOut({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Stopped},t.ID="workbench.action.debug.stepOut",t.LABEL=n.localize(8,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.StepOutDebugAction=k;var x=function(e){function t(n,i,o,r){var s=this;e.call(this,n,i,"debug-action stop",o,r),this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){var e=s.debugService.getActiveSession();e&&s.updateLabel(e.isAttach?t.DISCONNECT_LABEL:t.LABEL)}))}return __extends(t,e),t.prototype.run=function(){var e=this.debugService.getActiveSession();return e?e.disconnect(!1,!0):r.TPromise.as(null)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()!==h.State.Inactive},t.ID="workbench.action.debug.stop",t.LABEL=n.localize(9,null),t.DISCONNECT_LABEL=n.localize(10,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.StopDebugAction=x;var I=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action continue",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession()["continue"]({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Stopped},t.ID="workbench.action.debug.continue",t.LABEL=n.localize(11,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ContinueAction=I;var D=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action pause",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().pause({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Running},t.ID="workbench.action.debug.pause",t.LABEL=n.localize(12,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.PauseAction=D;var A=function(e){
function t(t,n,i,o){e.call(this,t,n,"debug-action remove",i,o),this.updateEnablement()}return __extends(t,e),t.prototype.run=function(e){return e instanceof p.Breakpoint?this.debugService.toggleBreakpoint({uri:e.source.uri,lineNumber:e.lineNumber}):this.debugService.removeFunctionBreakpoints(e.getId())},t.ID="workbench.debug.viewlet.action.removeBreakpoint",t.LABEL=n.localize(13,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RemoveBreakpointAction=A;var L=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,"debug-action remove-all",i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return r.TPromise.join([this.debugService.removeAllBreakpoints(),this.debugService.removeFunctionBreakpoints()])},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&(this.debugService.getModel().getBreakpoints().length>0||this.debugService.getModel().getFunctionBreakpoints().length>0)},t.ID="workbench.debug.viewlet.action.removeAllBreakpoints",t.LABEL=n.localize(14,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RemoveAllBreakpointsAction=L;var O=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action toggle-enablement",i,o)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.toggleEnablement(e)},t.ID="workbench.debug.viewlet.action.toggleBreakpointEnablement",t.LABEL=n.localize(15,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ToggleEnablementAction=O;var M=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,"debug-action enable-all-breakpoints",i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.enableOrDisableAllBreakpoints(!0)},t.prototype.isEnabled=function(){var t=this.debugService.getModel();return e.prototype.isEnabled.call(this)&&t.getBreakpoints().concat(t.getFunctionBreakpoints()).concat(t.getExceptionBreakpoints()).some(function(e){return!e.enabled})},t.ID="workbench.debug.viewlet.action.enableAllBreakpoints",t.LABEL=n.localize(16,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.EnableAllBreakpointsAction=M;var P=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,"debug-action disable-all-breakpoints",i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.enableOrDisableAllBreakpoints(!1)},t.prototype.isEnabled=function(){var t=this.debugService.getModel();return e.prototype.isEnabled.call(this)&&t.getBreakpoints().concat(t.getFunctionBreakpoints()).concat(t.getExceptionBreakpoints()).some(function(e){return e.enabled})},t.ID="workbench.debug.viewlet.action.disableAllBreakpoints",t.LABEL=n.localize(17,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.DisableAllBreakpointsAction=P;var R=function(e){function t(n,i,o,r){var s=this;e.call(this,n,i,"debug-action breakpoints-activate",o,r),this.updateLabel(this.debugService.getModel().areBreakpointsActivated()?t.DEACTIVATE_LABEL:t.ACTIVATE_LABEL),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){s.updateLabel(s.debugService.getModel().areBreakpointsActivated()?t.DEACTIVATE_LABEL:t.ACTIVATE_LABEL),s.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.toggleBreakpointsActivated()},t.prototype.isEnabled=function(){return this.debugService.getModel().getFunctionBreakpoints().length+this.debugService.getModel().getBreakpoints().length>0},t.ID="workbench.debug.viewlet.action.toggleBreakpointsActivatedAction",t.ACTIVATE_LABEL=n.localize(18,null),t.DEACTIVATE_LABEL=n.localize(19,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ToggleBreakpointsActivatedAction=R;var N=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,null,i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.BREAKPOINTS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.sendAllBreakpoints()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()!==h.State.Disabled&&this.debugService.getState()!==h.State.Inactive&&this.debugService.getModel().getFunctionBreakpoints().length+this.debugService.getModel().getBreakpoints().length>0},t.ID="workbench.debug.viewlet.action.reapplyBreakpointsAction",t.LABEL=n.localize(20,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ReapplyBreakpointsAction=N;var F=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action add-function-breakpoint",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.addFunctionBreakpoint(),r.TPromise.as(null)},t.ID="workbench.debug.viewlet.action.addFunctionBreakpointAction",t.LABEL=n.localize(21,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.AddFunctionBreakpointAction=F;var W=function(e){function t(t,n,i,o){e.call(this,t,n,null,i,o)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.getViewModel().setSelectedFunctionBreakpoint(e),r.TPromise.as(null)},t.ID="workbench.debug.viewlet.action.renameFunctionBreakpointAction",t.LABEL=n.localize(22,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RenameFunctionBreakpointAction=W;var H=function(e){function t(t,n,i,o,r,s){e.call(this,t,n,null,r,s),this.editor=i,this.lineNumber=o}return __extends(t,e),t.prototype.run=function(){return this.debugService.editBreakpoint(this.editor,this.lineNumber)},t.ID="workbench.debug.viewlet.action.addConditionalBreakpointAction",t.LABEL=n.localize(23,null),t=__decorate([__param(4,y),__param(5,l.IKeybindingService)],t)}(_);t.AddConditionalBreakpointAction=H;var V=function(e){function t(t,n,i,o,r,s){e.call(this,t,n,null,r,s),this.editor=i,this.lineNumber=o}return __extends(t,e),t.prototype.run=function(e){return this.debugService.editBreakpoint(this.editor,this.lineNumber)},t.ID="workbench.debug.viewlet.action.editConditionalBreakpointAction",t.LABEL=n.localize(24,null),t=__decorate([__param(4,y),__param(5,l.IKeybindingService)],t)}(_);t.EditConditionalBreakpointAction=V;var K=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){if(this.debugService.getState()!==h.State.Disabled){var e=this.editor.getPosition().lineNumber,t=this.editor.getModel().getAssociatedResource();if(this.debugService.canSetBreakpointsIn(this.editor.getModel()))return this.debugService.toggleBreakpoint({uri:t,lineNumber:e})}return r.TPromise.as(null)},t.ID="editor.debug.action.toggleBreakpoint",t=__decorate([__param(2,y)],t)}(a.EditorAction);t.ToggleBreakpointAction=K;var B=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){if(this.debugService.getState()!==h.State.Disabled){var e=this.editor.getPosition().lineNumber;if(this.debugService.canSetBreakpointsIn(this.editor.getModel()))return this.debugService.editBreakpoint(this.editor,e)}return r.TPromise.as(null)},t.ID="editor.debug.action.conditionalBreakpoint",t=__decorate([__param(2,y)],t)}(a.EditorAction);t.EditorConditionalBreakpointAction=B;var U=function(e){function t(t,n,i,o,r){e.call(this,t,n,"debug-action copy-value",o,r),this.value=i}return __extends(t,e),t.prototype.run=function(){var e=this;if(this.value instanceof p.Variable){var t=this.debugService.getViewModel().getFocusedStackFrame().frameId,n=this.debugService.getActiveSession();return n.evaluate({expression:p.getFullExpressionName(this.value,n.getType()),frameId:t}).then(function(e){g.clipboard.writeText(e.body.result)},function(t){return g.clipboard.writeText(e.value.value)})}return g.clipboard.writeText(this.value),r.TPromise.as(null)},t.ID="workbench.debug.viewlet.action.copyValue",t.LABEL=n.localize(25,null),t=__decorate([__param(3,y),__param(4,l.IKeybindingService)],t)}(_);t.CopyValueAction=U;var z=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getPosition().lineNumber,n=this.editor.getModel().getAssociatedResource();return this.debugService.getActiveSession().addOneTimeListener(h.SessionEvents.STOPPED,function(){e.debugService.toggleBreakpoint({uri:n,lineNumber:t})}),this.debugService.toggleBreakpoint({uri:n,lineNumber:t}).then(function(){return e.debugService.getActiveSession()["continue"]({threadId:e.debugService.getViewModel().getFocusedThreadId()}).then(function(e){return e.success})})},t.prototype.getGroupId=function(){return"5_debug/1_run_to_cursor"},t.prototype.shouldShowInContextMenu=function(){if(this.debugService.getState()!==h.State.Stopped)return!1;var e=this.editor.getPosition().lineNumber,t=this.editor.getModel().getAssociatedResource(),n=this.debugService.getModel().getBreakpoints().filter(function(n){return n.lineNumber===e&&n.source.uri.toString()===t.toString()});return 0===n.length},t.ID="editor.debug.action.runToCursor",t=__decorate([__param(2,y)],t)}(a.EditorAction);t.RunToCursorAction=z;var j=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,"debug-action add-watch-expression",i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.addWatchExpression()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getModel().getWatchExpressions().every(function(e){return!!e.name})},t.ID="workbench.debug.viewlet.action.addWatchExpression",t.LABEL=n.localize(26,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.AddWatchExpressionAction=j;var q=function(e){function t(t,n,i,o){e.call(this,t,n,c.Behaviour.TextFocus),this.debugService=i,this.viewletService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel().getValueInRange(this.editor.getSelection());return this.viewletService.openViewlet(h.VIEWLET_ID).then(function(){return e.debugService.addWatchExpression(t)})},t.prototype.getGroupId=function(){return"5_debug/3_selection_to_watch"},t.prototype.shouldShowInContextMenu=function(){var e=this.editor.getSelection(),t=this.editor.getModel().getValueInRange(e);return!!e&&!e.isEmpty()&&this.debugService.getConfigurationName()&&t&&/\S/.test(t)},t.ID="editor.debug.action.selectionToWatch",t=__decorate([__param(2,y),__param(3,v.IViewletService)],t)}(a.EditorAction);t.SelectionToWatchExpressionsAction=q;var G=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel().getValueInRange(this.editor.getSelection());return this.debugService.addReplExpression(t).then(function(){return e.debugService.revealRepl()})},t.prototype.getGroupId=function(){return"5_debug/2_selection_to_repl"},t.prototype.shouldShowInContextMenu=function(){var e=this.editor.getSelection();return!!e&&!e.isEmpty()&&this.debugService.getState()===h.State.Stopped},t.ID="editor.debug.action.selectionToRepl",t=__decorate([__param(2,y)],t)}(a.EditorAction);t.SelectionToReplAction=G;var Y=function(e){function t(t,n){e.call(this,t,n,c.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getPosition(),t=this.editor.getModel().getWordAtPosition(e);if(!t)return r.TPromise.as(null);var n=new s.Range(e.lineNumber,e.column,e.lineNumber,t.endColumn);return this.editor.getContribution(h.EDITOR_CONTRIBUTION_ID).showHover(n,t.word,!0)},t.ID="editor.debug.action.showDebugHover",t}(a.EditorAction);t.ShowDebugHoverAction=Y;var $=function(e){function t(t,n,i,o,r){e.call(this,t,n,"debug-action add-to-watch",o,r),this.expression=i}return __extends(t,e),t.prototype.run=function(){return this.debugService.addWatchExpression(p.getFullExpressionName(this.expression,this.debugService.getActiveSession().getType()))},t.ID="workbench.debug.viewlet.action.addToWatchExpressions",t.LABEL=n.localize(27,null),t=__decorate([__param(3,y),__param(4,l.IKeybindingService)],t)}(_);t.AddToWatchExpressionsAction=$;var X=function(e){function t(t,n,i,o,r){e.call(this,t,n,"debug-action rename",o,r),this.expression=i}return __extends(t,e),t.prototype.run=function(){return this.debugService.getViewModel().setSelectedExpression(this.expression),r.TPromise.as(null)},t.ID="workbench.debug.viewlet.action.renameWatchExpression",t.LABEL=n.localize(28,null),t=__decorate([__param(3,y),__param(4,l.IKeybindingService)],t)}(_);t.RenameWatchExpressionAction=X;var Q=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action remove",i,o)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.clearWatchExpressions(e.getId()),r.TPromise.as(null)},t.ID="workbench.debug.viewlet.action.removeWatchExpression",t.LABEL=n.localize(29,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RemoveWatchExpressionAction=Q;var Z=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,"debug-action remove-all",i,o),this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(){return r.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.clearWatchExpressions(),r.TPromise.as(null)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getModel().getWatchExpressions().length>0},t.ID="workbench.debug.viewlet.action.removeAllWatchExpressions",t.LABEL=n.localize(30,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RemoveAllWatchExpressionsAction=Z;var J=function(e){function t(t,n,i,o){e.call(this,t,n,"debug-action clear-repl",i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.clearReplExpressions(),this.debugService.revealRepl()},t.ID="workbench.debug.panel.action.clearReplAction",t.LABEL=n.localize(31,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.ClearReplAction=J;var ee=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n,"debug-action toggle-repl",i,s),this.partService=o,this.panelService=r,this.eventService=a,this.enabled=this.debugService.getState()!==h.State.Disabled,this.registerListeners()}return __extends(t,e),t.prototype.run=function(){return this.isReplVisible()?(this.partService.setPanelHidden(!0),r.TPromise.as(null)):this.debugService.revealRepl()},t.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.debugService.getModel().addListener2(h.ModelEvents.REPL_ELEMENTS_UPDATED,function(){e.isReplVisible()||(e["class"]="debug-action toggle-repl notification")})),this.toDispose.push(this.eventService.addListener2(d.EventType.COMPOSITE_OPENED,function(t){t.compositeId===h.REPL_ID&&(e["class"]="debug-action toggle-repl")}))},t.prototype.isReplVisible=function(){var e=this.panelService.getActivePanel();return e&&e.getId()===h.REPL_ID},t.ID="workbench.debug.action.toggleRepl",t.LABEL=n.localize(32,null),t=__decorate([__param(2,y),__param(3,f.IPartService),__param(4,m.IPanelService),__param(5,l.IKeybindingService),__param(6,u.IEventService)],t)}(_);t.ToggleReplAction=ee;var te=function(e){function t(t,n,i,o){e.call(this,t,n,null,i,o)}return __extends(t,e),t.prototype.run=function(){return this.debugService.createSession(!0)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===h.State.Inactive},t.ID="workbench.action.debug.run",t.LABEL=n.localize(33,null),t=__decorate([__param(2,y),__param(3,l.IKeybindingService)],t)}(_);t.RunAction=te});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugActionsWidget",["require","exports","vs/base/common/lifecycle","vs/base/common/errors","vs/base/common/severity","vs/base/browser/builder","vs/base/common/events","vs/base/browser/ui/actionbar/actionbar","vs/workbench/common/constants","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/electron-browser/debugActions","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=u.IDebugService,m=r.$,v=function(){function e(e,t,n,i){this.messageService=e,this.telemetryService=t,this.debugService=n,this.instantiationService=i,this.$el=m().div().addClass("debug-actions-widget"),this.toDispose=[],this.actionBar=new a.ActionBar(this.$el,{orientation:a.ActionsOrientation.HORIZONTAL}),this.toDispose.push(this.actionBar),this.registerListeners(),this.hide(),this.isBuilt=!1}return e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.debugService.addListener2(u.ServiceEvents.STATE_CHANGED,function(){e.onDebugStateChange()})),this.toDispose.push(this.actionBar.actionRunner.addListener2(s.EventType.RUN,function(t){t.error&&!i.isPromiseCanceledError(t.error)&&e.messageService.show(o["default"].Error,t.error),e.telemetryService&&e.telemetryService.publicLog("workbenchActionExecuted",{id:t.action.id,from:"debugActionsWidget"})}))},e.prototype.getId=function(){return e.ID},e.prototype.onDebugStateChange=function(){return this.debugService.getState()===u.State.Inactive?this.hide():(this.actionBar.clear(),this.actionBar.push(this.getActions(this.instantiationService,this.debugService.getState()),{icon:!0,label:!1}),void this.show())},e.prototype.show=function(){this.isVisible||(this.isBuilt||(this.isBuilt=!0,this.$el.build(r.withElementById(c.Identifiers.WORKBENCH_CONTAINER).getHTMLElement())),this.isVisible=!0,this.$el.show())},e.prototype.hide=function(){this.isVisible=!1,this.$el.hide()},e.prototype.getActions=function(e,t){var n=this;return this.actions||(this.continueAction=e.createInstance(l.ContinueAction,l.ContinueAction.ID,l.ContinueAction.LABEL),this.pauseAction=e.createInstance(l.PauseAction,l.PauseAction.ID,l.PauseAction.LABEL),this.actions=[this.continueAction,e.createInstance(l.StepOverDebugAction,l.StepOverDebugAction.ID,l.StepOverDebugAction.LABEL),e.createInstance(l.StepIntoDebugAction,l.StepIntoDebugAction.ID,l.StepIntoDebugAction.LABEL),e.createInstance(l.StepOutDebugAction,l.StepOutDebugAction.ID,l.StepOutDebugAction.LABEL),e.createInstance(l.RestartDebugAction,l.RestartDebugAction.ID,l.RestartDebugAction.LABEL),e.createInstance(l.StopDebugAction,l.StopDebugAction.ID,l.StopDebugAction.LABEL)],this.actions.forEach(function(e){n.toDispose.push(e)}),this.toDispose.push(this.pauseAction)),this.actions[0]=t===u.State.Running?this.pauseAction:this.continueAction,this.actions},e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),this.$el&&(this.$el.destroy(),delete this.$el)},e.ID="debug.actionsWidget",e=__decorate([__param(0,h.IMessageService),__param(1,p.ITelemetryService),__param(2,f),__param(3,d.IInstantiationService)],e)}();t.DebugActionsWidget=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugViewer",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugViewer","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/keyCodes","vs/base/common/paths","vs/base/common/async","vs/base/common/errors","vs/base/common/strings","vs/base/common/platform","vs/base/browser/dom","vs/base/common/labels","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/inputbox/inputBox","vs/base/parts/tree/browser/treeDefaults","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/common/debugViewModel","vs/workbench/parts/debug/electron-browser/debugActions","vs/platform/contextview/browser/contextView","vs/platform/workspace/common/workspace","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E){"use strict";function w(e,t,n){var i="string"==typeof e?e:e.value;t.className="value",null===i||(e instanceof g.Expression||e instanceof g.Variable)&&!e.available?(d.addClass(t,"unavailable"),i!==g.Expression.DEFAULT_VALUE&&d.addClass(t,"error")):isNaN(+i)?I.test(i)?d.addClass(t,"boolean"):D.test(i)&&d.addClass(t,"string"):d.addClass(t,"number"),n&&e.valueChanged&&(t.className="value changed"),t.textContent=i,t.title=i}function C(e,t,n,i){t.available&&(n.name.textContent=t.name+":"),t.value?w(t,n.value,i):(n.value.textContent="",n.value.title="")}function T(e,t,n,i,s,u,l){var h=d.append(s,x(".inputBoxContainer")),p=new f.InputBox(h,t,{validationOptions:{validation:null,showMessage:!1},placeholder:u,ariaLabel:l});p.value=i.name?i.name:"",p.focus();var m=!1,v=[p],y=a.once(function(t){m||(m=!0,i instanceof g.Expression&&t&&p.value?e.renameWatchExpression(i.getId(),p.value).done(null,c.onUnexpectedError):i instanceof g.Expression&&!i.name?e.clearWatchExpressions(i.getId()):i instanceof g.FunctionBreakpoint&&t&&p.value?e.renameFunctionBreakpoint(i.getId(),p.value).done(null,c.onUnexpectedError):i instanceof g.FunctionBreakpoint&&!i.name&&e.removeFunctionBreakpoints(i.getId()).done(null,c.onUnexpectedError),n.clearHighlight(),n.DOMFocus(),n.setFocus(i),s.removeChild(h),o.disposeAll(v))});v.push(d.addStandardDisposableListener(p.inputElement,"keydown",function(e){var t=e.equals(r.CommonKeybindings.ESCAPE),n=e.equals(r.CommonKeybindings.ENTER);(t||n)&&y(n)})),v.push(d.addDisposableListener(p.inputElement,"blur",function(){y(!0)}))}function k(e,t){return e.inMemory?e.name:h.getPathLabel(s.basename(e.uri.fsPath),t)}var x=d.emmet,I=/^true|false$/i,D=/^(['"]).*\1$/;t.renderExpressionValue=w,t.renderVariable=C;var A=function(e){function t(t,n,i,o){void 0===o&&(o=!0),e.call(this),this.debugService=t,this.contextMenuService=n,this.actionProvider=i,this.focusOnContextMenu=o,l.isMacintosh?this.downKeyBindingDispatcher.set(r.CommonKeybindings.CTRLCMD_BACKSPACE,this.onDelete.bind(this)):(this.downKeyBindingDispatcher.set(r.CommonKeybindings.DELETE,this.onDelete.bind(this)),this.downKeyBindingDispatcher.set(r.CommonKeybindings.SHIFT_DELETE,this.onDelete.bind(this)))}return __extends(t,e),t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(n.preventDefault(),n.stopPropagation(),this.focusOnContextMenu&&e.setFocus(t),this.actionProvider.hasSecondaryActions(e,t)){var o={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return o},getActions:function(){return i.actionProvider.getSecondaryActions(e,t)},onHide:function(t){t&&e.DOMFocus()},getActionsContext:function(){return t}}),!0}return!1},t.prototype.onDelete=function(e,t){return!1},t}(m.DefaultController);t.BaseDebugController=A;var L=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t instanceof g.Model||t instanceof g.Thread},e.prototype.getChildren=function(e,t){if(t instanceof g.Thread)return t.getCallStack(this.debugService);var n=t.getThreads(),o=[];return Object.keys(n).forEach(function(e){o.push(n[e])}),1===o.length?o[0].getCallStack(this.debugService):i.TPromise.as(o)},e.prototype.getParent=function(e,t){return i.TPromise.as(null)},e=__decorate([__param(0,v.IDebugService)],e)}();t.CallStackDataSource=L;var O=function(){function e(e){this.contextService=e}return e.prototype.getHeight=function(e,t){return 22},e.prototype.getTemplateId=function(t,n){return n instanceof g.Thread?e.THREAD_TEMPLATE_ID:n instanceof g.StackFrame?e.STACK_FRAME_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){if(n===e.THREAD_TEMPLATE_ID){var o=Object.create(null);return o.name=d.append(i,x(".thread")),o}var r=Object.create(null);return r.stackFrame=d.append(i,x(".stack-frame")),r.label=d.append(r.stackFrame,x("span.label")),r.file=d.append(r.stackFrame,x(".file")),r.fileName=d.append(r.file,x("span.file-name")),r.lineNumber=d.append(r.file,x("span.line-number")),r},e.prototype.renderElement=function(t,n,i,o){i===e.THREAD_TEMPLATE_ID?this.renderThread(n,o):this.renderStackFrame(n,o)},e.prototype.renderThread=function(e,t){t.name.textContent=e.name},e.prototype.renderStackFrame=function(e,t){e.source.available?d.removeClass(t.stackFrame,"disabled"):d.addClass(t.stackFrame,"disabled"),t.file.title=e.source.uri.fsPath,t.label.textContent=e.name,t.label.title=e.name,t.fileName.textContent=k(e.source,this.contextService),t.lineNumber.textContent=void 0!==e.lineNumber?""+e.lineNumber:""},e.prototype.disposeTemplate=function(e,t,n){},e.THREAD_TEMPLATE_ID="thread",e.STACK_FRAME_TEMPLATE_ID="stackFrame",e=__decorate([__param(0,S.IWorkspaceContextService)],e)}();t.CallStackRenderer=O;var M=function(){function e(e){this.contextService=e}return e.prototype.getAriaLabel=function(e,t){return t instanceof g.Thread?n.localize(0,null,t.name):t instanceof g.StackFrame?n.localize(1,null,t.name,t.lineNumber,k(t.source,this.contextService)):null},e=__decorate([__param(0,S.IWorkspaceContextService)],e)}();t.CallstackAccessibilityProvider=M;var P=function(){function e(e){this.instantiationService=e}return e.prototype.hasActions=function(e,t){return!1},e.prototype.getActions=function(e,t){return i.TPromise.as([])},e.prototype.hasSecondaryActions=function(e,t){return t instanceof g.Variable},e.prototype.getSecondaryActions=function(e,t){var n=[],o=t;return n.push(this.instantiationService.createInstance(_.AddToWatchExpressionsAction,_.AddToWatchExpressionsAction.ID,_.AddToWatchExpressionsAction.LABEL,o)),0===o.reference&&n.push(this.instantiationService.createInstance(_.CopyValueAction,_.CopyValueAction.ID,_.CopyValueAction.LABEL,o)),i.TPromise.as(n)},e.prototype.getActionItem=function(e,t,n){return null},e}();t.VariablesActionProvider=P;var R=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){if(t instanceof y.ViewModel||t instanceof g.Scope)return!0;var n=t;return 0!==n.reference&&!u.equalsIgnoreCase(n.value,"null")},e.prototype.getChildren=function(e,t){if(t instanceof y.ViewModel){var n=t.getFocusedStackFrame();return n?n.getScopes(this.debugService):i.TPromise.as([])}var o=t;return o.getChildren(this.debugService)},e.prototype.getParent=function(e,t){return i.TPromise.as(null)},e}();t.VariablesDataSource=R;var N=function(){function e(){}return e.prototype.getHeight=function(e,t){return 22},e.prototype.getTemplateId=function(t,n){return n instanceof g.Scope?e.SCOPE_TEMPLATE_ID:n instanceof g.Variable?e.VARIABLE_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){if(n===e.SCOPE_TEMPLATE_ID){var o=Object.create(null);return o.name=d.append(i,x(".scope")),o}var r=Object.create(null);return r.expression=d.append(i,x(l.isMacintosh?".expression.mac":".expression.win-linux")),r.name=d.append(r.expression,x("span.name")),r.value=d.append(r.expression,x("span.value")),r},e.prototype.renderElement=function(t,n,i,o){i===e.SCOPE_TEMPLATE_ID?this.renderScope(n,o):C(t,n,o,!0)},e.prototype.renderScope=function(e,t){t.name.textContent=e.name},e.prototype.disposeTemplate=function(e,t,n){},e.SCOPE_TEMPLATE_ID="scope",e.VARIABLE_TEMPLATE_ID="variable",e}();t.VariablesRenderer=N;var F=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return t instanceof g.Scope?n.localize(2,null,t.name):t instanceof g.Variable?n.localize(3,null,t.name,t.value):null},e}();t.VariablesAccessibilityProvider=F;var W=function(){function e(e){this.instantiationService=e}return e.prototype.hasActions=function(e,t){return t instanceof g.Expression&&t.name},e.prototype.hasSecondaryActions=function(e,t){return!0},e.prototype.getActions=function(e,t){return i.TPromise.as(this.getExpressionActions())},e.prototype.getExpressionActions=function(){return[this.instantiationService.createInstance(_.RemoveWatchExpressionAction,_.RemoveWatchExpressionAction.ID,_.RemoveWatchExpressionAction.LABEL)]},e.prototype.getSecondaryActions=function(e,t){var n=[];if(t instanceof g.Expression){var o=t;n.push(this.instantiationService.createInstance(_.AddWatchExpressionAction,_.AddWatchExpressionAction.ID,_.AddWatchExpressionAction.LABEL)),n.push(this.instantiationService.createInstance(_.RenameWatchExpressionAction,_.RenameWatchExpressionAction.ID,_.RenameWatchExpressionAction.LABEL,o)),0===o.reference&&n.push(this.instantiationService.createInstance(_.CopyValueAction,_.CopyValueAction.ID,_.CopyValueAction.LABEL,o.value)),n.push(new p.Separator),n.push(this.instantiationService.createInstance(_.RemoveWatchExpressionAction,_.RemoveWatchExpressionAction.ID,_.RemoveWatchExpressionAction.LABEL)),n.push(this.instantiationService.createInstance(_.RemoveAllWatchExpressionsAction,_.RemoveAllWatchExpressionsAction.ID,_.RemoveAllWatchExpressionsAction.LABEL))}else{if(n.push(this.instantiationService.createInstance(_.AddWatchExpressionAction,_.AddWatchExpressionAction.ID,_.AddWatchExpressionAction.LABEL)),t instanceof g.Variable){var r=t;0===r.reference&&n.push(this.instantiationService.createInstance(_.CopyValueAction,_.CopyValueAction.ID,_.CopyValueAction.LABEL,r.value)),n.push(new p.Separator)}n.push(this.instantiationService.createInstance(_.RemoveAllWatchExpressionsAction,_.RemoveAllWatchExpressionsAction.ID,_.RemoveAllWatchExpressionsAction.LABEL))}return i.TPromise.as(n)},e.prototype.getActionItem=function(e,t,n){return null},e}();t.WatchExpressionsActionProvider=W;var H=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){if(t instanceof g.Model)return!0;var n=t;return 0!==n.reference&&!u.equalsIgnoreCase(n.value,"null")},e.prototype.getChildren=function(e,t){if(t instanceof g.Model)return i.TPromise.as(t.getWatchExpressions());var n=t;return n.getChildren(this.debugService)},e.prototype.getParent=function(e,t){return i.TPromise.as(null)},e}();t.WatchExpressionsDataSource=H;var V=function(){function e(e,t,n,i,o){this.actionRunner=t,this.messageService=n,this.debugService=i,this.contextViewService=o,this.toDispose=[],this.actionProvider=e}return e.prototype.getHeight=function(e,t){return 22},e.prototype.getTemplateId=function(t,n){return n instanceof g.Expression?e.WATCH_EXPRESSION_TEMPLATE_ID:e.VARIABLE_TEMPLATE_ID},e.prototype.renderTemplate=function(t,n,i){var o=Object.create(null);return n===e.WATCH_EXPRESSION_TEMPLATE_ID&&(o.actionBar=new p.ActionBar(i,{actionRunner:this.actionRunner}),o.actionBar.push(this.actionProvider.getExpressionActions(),{icon:!0,label:!1})),o.expression=d.append(i,x(l.isMacintosh?".expression.mac":".expression.win-linux")),
o.name=d.append(o.expression,x("span.name")),o.value=d.append(o.expression,x("span.value")),o},e.prototype.renderElement=function(t,n,i,o){i===e.WATCH_EXPRESSION_TEMPLATE_ID?this.renderWatchExpression(t,n,o):C(t,n,o,!0)},e.prototype.renderWatchExpression=function(e,t,i){var o=this.debugService.getViewModel().getSelectedExpression();(o instanceof g.Expression&&o.getId()===t.getId()||t instanceof g.Expression&&!t.name)&&T(this.debugService,this.contextViewService,e,t,i.expression,n.localize(4,null),n.localize(5,null)),i.actionBar.context=t,i.name.textContent=t.name+":",t.value&&w(t,i.value,!0)},e.prototype.disposeTemplate=function(e,t,n){},e.prototype.dispose=function(){this.toDispose=o.disposeAll(this.toDispose)},e.WATCH_EXPRESSION_TEMPLATE_ID="watchExpression",e.VARIABLE_TEMPLATE_ID="variables",e=__decorate([__param(2,E.IMessageService),__param(3,v.IDebugService),__param(4,b.IContextViewService)],e)}();t.WatchExpressionsRenderer=V;var K=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return t instanceof g.Expression?n.localize(6,null,t.name,t.value):t instanceof g.Variable?n.localize(7,null,t.name,t.value):null},e}();t.WatchExpressionsAccessibilityProvider=K;var B=function(e){function t(t,n,i){e.call(this,t,n,i),l.isMacintosh?this.downKeyBindingDispatcher.set(r.CommonKeybindings.ENTER,this.onRename.bind(this)):this.downKeyBindingDispatcher.set(r.CommonKeybindings.F2,this.onRename.bind(this))}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i){if(n instanceof g.Expression&&2===i.detail){var o=n;return 0===o.reference&&this.debugService.getViewModel().setSelectedExpression(o),!0}return e.prototype.onLeftClick.call(this,t,n,i)},t.prototype.onRename=function(e,t){var n=e.getFocus();if(n instanceof g.Expression){var i=n;return 0===i.reference&&this.debugService.getViewModel().setSelectedExpression(i),!0}return!1},t.prototype.onDelete=function(e,t){var n=e.getFocus();if(n instanceof g.Expression){var i=n;return this.debugService.clearWatchExpressions(i.getId()),!0}return!1},t}(A);t.WatchExpressionsController=B;var U=function(){function e(e){this.instantiationService=e}return e.prototype.hasActions=function(e,t){return t instanceof g.Breakpoint},e.prototype.hasSecondaryActions=function(e,t){return t instanceof g.Breakpoint||t instanceof g.ExceptionBreakpoint||t instanceof g.FunctionBreakpoint},e.prototype.getActions=function(e,t){return t instanceof g.Breakpoint?i.TPromise.as(this.getBreakpointActions()):i.TPromise.as([])},e.prototype.getBreakpointActions=function(){return[this.instantiationService.createInstance(_.RemoveBreakpointAction,_.RemoveBreakpointAction.ID,_.RemoveBreakpointAction.LABEL)]},e.prototype.getSecondaryActions=function(e,t){var n=[this.instantiationService.createInstance(_.ToggleEnablementAction,_.ToggleEnablementAction.ID,_.ToggleEnablementAction.LABEL)];return n.push(new p.Separator),(t instanceof g.Breakpoint||t instanceof g.FunctionBreakpoint)&&n.push(this.instantiationService.createInstance(_.RemoveBreakpointAction,_.RemoveBreakpointAction.ID,_.RemoveBreakpointAction.LABEL)),n.push(this.instantiationService.createInstance(_.RemoveAllBreakpointsAction,_.RemoveAllBreakpointsAction.ID,_.RemoveAllBreakpointsAction.LABEL)),n.push(new p.Separator),n.push(this.instantiationService.createInstance(_.ToggleBreakpointsActivatedAction,_.ToggleBreakpointsActivatedAction.ID,_.ToggleBreakpointsActivatedAction.LABEL)),n.push(new p.Separator),n.push(this.instantiationService.createInstance(_.EnableAllBreakpointsAction,_.EnableAllBreakpointsAction.ID,_.EnableAllBreakpointsAction.LABEL)),n.push(this.instantiationService.createInstance(_.DisableAllBreakpointsAction,_.DisableAllBreakpointsAction.ID,_.DisableAllBreakpointsAction.LABEL)),n.push(new p.Separator),n.push(this.instantiationService.createInstance(_.AddFunctionBreakpointAction,_.AddFunctionBreakpointAction.ID,_.AddFunctionBreakpointAction.LABEL)),t instanceof g.FunctionBreakpoint&&n.push(this.instantiationService.createInstance(_.RenameFunctionBreakpointAction,_.RenameFunctionBreakpointAction.ID,_.RenameFunctionBreakpointAction.LABEL)),n.push(new p.Separator),n.push(this.instantiationService.createInstance(_.ReapplyBreakpointsAction,_.ReapplyBreakpointsAction.ID,_.ReapplyBreakpointsAction.LABEL)),i.TPromise.as(n)},e.prototype.getActionItem=function(e,t,n){return null},e}();t.BreakpointsActionProvider=U;var z=function(){function e(){}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t instanceof g.Model},e.prototype.getChildren=function(e,t){var n=t,o=n.getExceptionBreakpoints();return i.TPromise.as(o.concat(n.getFunctionBreakpoints()).concat(n.getBreakpoints()))},e.prototype.getParent=function(e,t){return i.TPromise.as(null)},e}();t.BreakpointsDataSource=z;var j=function(){function e(e,t,n,i,o,r){this.actionProvider=e,this.actionRunner=t,this.messageService=n,this.contextService=i,this.debugService=o,this.contextViewService=r}return e.prototype.getHeight=function(e,t){return 22},e.prototype.getTemplateId=function(t,n){return n instanceof g.Breakpoint?e.BREAKPOINT_TEMPLATE_ID:n instanceof g.FunctionBreakpoint?e.FUNCTION_BREAKPOINT_TEMPLATE_ID:n instanceof g.ExceptionBreakpoint?e.EXCEPTION_BREAKPOINT_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){var o=Object.create(null);return n!==e.BREAKPOINT_TEMPLATE_ID&&n!==e.FUNCTION_BREAKPOINT_TEMPLATE_ID||(o.actionBar=new p.ActionBar(i,{actionRunner:this.actionRunner}),o.actionBar.push(this.actionProvider.getBreakpointActions(),{icon:!0,label:!1})),o.breakpoint=d.append(i,x(".breakpoint")),o.toDisposeBeforeRender=[],o.checkbox=x("input"),o.checkbox.type="checkbox",l.isMacintosh||(o.checkbox.className="checkbox-win-linux"),d.append(o.breakpoint,o.checkbox),o.name=d.append(o.breakpoint,x("span.name")),n===e.BREAKPOINT_TEMPLATE_ID&&(o.lineNumber=d.append(o.breakpoint,x("span.line-number")),o.filePath=d.append(o.breakpoint,x("span.file-path"))),o},e.prototype.renderElement=function(t,n,i,r){var s=this;r.toDisposeBeforeRender=o.disposeAll(r.toDisposeBeforeRender),r.toDisposeBeforeRender.push(d.addStandardDisposableListener(r.checkbox,"change",function(e){s.debugService.toggleEnablement(n)})),i===e.EXCEPTION_BREAKPOINT_TEMPLATE_ID?this.renderExceptionBreakpoint(n,r):i===e.FUNCTION_BREAKPOINT_TEMPLATE_ID?this.renderFunctionBreakpoint(t,n,r):this.renderBreakpoint(t,n,r)},e.prototype.renderExceptionBreakpoint=function(e,t){t.name.textContent=e.label||e.filter+" exceptions",t.checkbox.checked=e.enabled},e.prototype.renderFunctionBreakpoint=function(e,t,i){var o=this.debugService.getViewModel().getSelectedFunctionBreakpoint();!t.name||o&&o.getId()===t.getId()?T(this.debugService,this.contextViewService,e,t,i.breakpoint,n.localize(8,null),n.localize(9,null)):(this.debugService.getModel().areBreakpointsActivated()?e.removeTraits("disabled",[t]):e.addTraits("disabled",[t]),i.name.textContent=t.name,i.checkbox.checked=t.enabled),i.actionBar.context=t},e.prototype.renderBreakpoint=function(e,t,n){this.debugService.getModel().areBreakpointsActivated()?e.removeTraits("disabled",[t]):e.addTraits("disabled",[t]),n.name.textContent=h.getPathLabel(s.basename(t.source.uri.fsPath),this.contextService),n.lineNumber.textContent=t.desiredLineNumber!==t.lineNumber?t.desiredLineNumber+" → "+t.lineNumber:""+t.lineNumber,n.filePath.textContent=h.getPathLabel(s.dirname(t.source.uri.fsPath),this.contextService),n.checkbox.checked=t.enabled,n.actionBar.context=t,t.condition&&(n.breakpoint.title=t.condition)},e.prototype.disposeTemplate=function(t,n,i){n!==e.BREAKPOINT_TEMPLATE_ID&&n!==e.FUNCTION_BREAKPOINT_TEMPLATE_ID||i.actionBar.dispose()},e.EXCEPTION_BREAKPOINT_TEMPLATE_ID="exceptionBreakpoint",e.FUNCTION_BREAKPOINT_TEMPLATE_ID="functionBreakpoint",e.BREAKPOINT_TEMPLATE_ID="breakpoint",e=__decorate([__param(2,E.IMessageService),__param(3,S.IWorkspaceContextService),__param(4,v.IDebugService),__param(5,b.IContextViewService)],e)}();t.BreakpointsRenderer=j;var q=function(){function e(e){this.contextService=e}return e.prototype.getAriaLabel=function(e,t){return t instanceof g.Breakpoint?n.localize(10,null,t.lineNumber,k(t.source,this.contextService)):t instanceof g.FunctionBreakpoint?n.localize(11,null,t.name):t instanceof g.ExceptionBreakpoint?n.localize(12,null,t.filter):null},e=__decorate([__param(0,S.IWorkspaceContextService)],e)}();t.BreakpointsAccessibilityProvider=q;var G=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i){return n instanceof g.FunctionBreakpoint&&2===i.detail?(this.debugService.getViewModel().setSelectedFunctionBreakpoint(n),!0):e.prototype.onLeftClick.call(this,t,n,i)},t.prototype.onSpace=function(t,n){e.prototype.onSpace.call(this,t,n);var i=t.getFocus();return this.debugService.toggleEnablement(i).done(null,c.onUnexpectedError),!0},t.prototype.onDelete=function(e,t){var n=e.getFocus();if(n instanceof g.Breakpoint){var i=n;return this.debugService.toggleBreakpoint({uri:i.source.uri,lineNumber:i.lineNumber}).done(null,c.onUnexpectedError),!0}if(n instanceof g.FunctionBreakpoint){var o=n;return this.debugService.removeFunctionBreakpoints(o.getId()).done(null,c.onUnexpectedError),!0}return!1},t}(A);t.BreakpointsController=G});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/browser/debugHover",["require","exports","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/keyCodes","vs/base/browser/dom","vs/nls!vs/workbench/parts/debug/browser/debugHover","vs/base/parts/tree/browser/treeImpl","vs/base/parts/tree/browser/treeDefaults","vs/editor/browser/editorBrowser","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugViewer"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=s.emmet,f={indentPixels:6,twistiePixels:15,ariaLabel:a.localize(0,null)},m=18,v=function(){function e(e,t,n){var i=this;this.editor=e,this.debugService=t,this.instantiationService=n,this.allowEditorOverflow=!0,this.domNode=p(".debug-hover-widget monaco-editor-background"),this.treeContainer=s.append(this.domNode,p(".debug-hover-tree")),this.treeContainer.setAttribute("role","tree"),this.tree=new c.Tree(this.treeContainer,{dataSource:new h.VariablesDataSource(this.debugService),renderer:this.instantiationService.createInstance(y),controller:new g(e)},f),this.toDispose=[],this.toDispose.push(this.tree.addListener2("item:expanded",function(){i.layoutTree()})),this.toDispose.push(this.tree.addListener2("item:collapsed",function(){i.layoutTree()})),this.toDispose.push(s.addStandardDisposableListener(this.domNode,"keydown",function(e){e.equals(r.CommonKeybindings.ESCAPE)&&i.hide()})),this.valueContainer=s.append(this.domNode,p(".value")),this.valueContainer.tabIndex=0,this.valueContainer.setAttribute("role","tooltip"),this.isVisible=!1,this.showAtPosition=null,this.highlightDecorations=[],this.editor.addContentWidget(this)}return e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this.domNode},e.prototype.showAt=function(e,t,n){var i=this,o=e.getStartPosition(),r=this.editor.getModel(),s=this.debugService.getViewModel().getFocusedStackFrame();if(t&&s&&s.source.uri.toString()===r.getAssociatedResource().toString()){var a=r.getLineContent(o.lineNumber),c=a.substring(0,a.indexOf("."+t)).split(".").map(function(e){return e.trim()}).filter(function(e){return!!e});return c.push(t),c[0]=c[0].substring(c[0].lastIndexOf(" ")+1),this.getExpression(c).then(function(e){return e&&e.available?(i.highlightDecorations=i.editor.deltaDecorations(i.highlightDecorations,[{range:{startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:a.indexOf(t)+1,endColumn:a.indexOf(t)+1+t.length},options:{className:"hoverHighlight"}}]),i.doShow(o,e,n)):void i.hide()})}},e.prototype.getExpression=function(e){var t=this,n=this.debugService.getActiveSession(),r=this.debugService.getViewModel().getFocusedStackFrame();if(n.capabilities.supportsEvaluateForHovers)return d.evaluateExpression(n,r,new d.Expression(e.join("."),!0),"hover");var s=[];return r.getScopes(this.debugService).then(function(n){return n.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!e.expensive}).map(function(n){return n.getChildren(t.debugService).done(function(n){for(var i=0;i<e.length&&n;i++){var o=n.filter(function(t){return"string"==typeof t.name&&(e[i]===t.name||e[i]===t.name.substr(t.name.lastIndexOf(" ")+1))});if(1!==o.length)break;i===e.length-1?s.push(o[0]):o[0].getChildren(t.debugService).done(function(e){return n=e},n=null)}},o.onUnexpectedError)})}).then(function(){return 1===s.length?i.TPromise.as(s[0]):i.TPromise.as(null)})},e.prototype.doShow=function(e,t,n,o){var r=this;return void 0===o&&(o=!1),this.showAtPosition=e,this.isVisible=!0,this.stoleFocus=n,0===t.reference||o?(this.treeContainer.hidden=!0,this.valueContainer.hidden=!1,h.renderExpressionValue(t,this.valueContainer,!1),this.valueContainer.title="",this.editor.layoutContentWidget(this),n&&(this.editor.render(),this.valueContainer.focus()),i.TPromise.as(null)):(this.valueContainer.hidden=!0,this.treeContainer.hidden=!1,this.tree.setInput(t).then(function(){r.layoutTree(),r.editor.layoutContentWidget(r),n&&(r.editor.render(),r.tree.DOMFocus())}))},e.prototype.layoutTree=function(){for(var e=this.tree.getNavigator(),t=0;e.next();)t++;if(0===t)this.doShow(this.showAtPosition,this.tree.getInput(),!1,!0);else{var n=18*Math.min(t,m);this.treeContainer.clientHeight!==n&&(this.treeContainer.style.height=n+"px",this.tree.layout())}},e.prototype.hide=function(){this.isVisible&&(this.isVisible=!1,this.editor.deltaDecorations(this.highlightDecorations,[]),this.highlightDecorations=[],this.editor.layoutContentWidget(this),this.stoleFocus&&this.editor.focus())},e.prototype.getPosition=function(){return this.isVisible?{position:this.showAtPosition,preference:[l.ContentWidgetPositionPreference.ABOVE,l.ContentWidgetPositionPreference.BELOW]}:null},e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose)},e.ID="debug.hoverWidget",e}();t.DebugHoverWidget=v;var g=function(e){function t(t){e.call(this),this.editor=t}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i,o){return void 0===o&&(o="mouse"),n.reference>0&&(e.prototype.onLeftClick.call(this,t,n,i,o),t.clearFocus(),t.deselect(n),this.editor.focus()),!0},t}(u.DefaultController),y=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getHeight=function(e,t){return 18},t}(h.VariablesRenderer)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/search/browser/search.contribution",["require","exports","vs/platform/platform","vs/workbench/browser/viewlet","vs/platform/configuration/common/configurationRegistry","vs/nls!vs/workbench/parts/search/browser/search.contribution","vs/workbench/parts/files/common/files","vs/platform/actions/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/workbench/common/actionRegistry","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/descriptors","vs/platform/workspace/common/workspace","vs/platform/keybinding/common/keybindingService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/css!./media/search.contribution"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";t.VIEWLET_ID="workbench.view.search",p.KeybindingsRegistry.registerCommandDesc({id:"workbench.action.search.toggleQueryDetails",weight:p.KeybindingsRegistry.WEIGHT.workbenchContrib(),context:g.KbExpr.has("searchViewletVisible"),primary:S.KeyMod.CtrlCmd|S.KeyMod.Shift|S.KeyCode.KEY_J,handler:function(e){var n=e.get(_.IViewletService);n.openViewlet(t.VIEWLET_ID,!0).then(function(e){return e.toggleFileTypes()})}});var E=function(e){function n(n,i,o,r){e.call(this,n,i,t.VIEWLET_ID,o,r)}return __extends(n,e),n.ID=t.VIEWLET_ID,n.LABEL=r.localize(0,null),n=__decorate([__param(2,_.IViewletService),__param(3,b.IWorkbenchEditorService)],n)}(i.ToggleViewletAction),w=function(e){function t(t,n){e.call(this),this._instantiationService=t,this._contextService=n}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element,n=s.asFileResource(t);return n?n.isDirectory:!1},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=s.asFileResource(e.element),i=new a.DeferredAction(this._instantiationService,new m.AsyncDescriptor("vs/workbench/parts/search/browser/searchViewlet","FindInFolderAction",n.resource),"workbench.search.action.findInFolder",r.localize(1,null));i.order=55,t.push(i),t.push(new c.Separator("",56))}return t},t=__decorate([__param(0,f.IInstantiationService),__param(1,v.IWorkspaceContextService)],t)}(u.ActionBarContributor),C="workbench.action.showAllSymbols",T=r.localize(2,null),k="#",x=function(e){function t(t,n,i){e.call(this,t,n,k,i)}return __extends(t,e),t=__decorate([__param(2,y.IQuickOpenService)],t)}(h.QuickOpenAction);n.Registry.as(i.Extensions.Viewlets).registerViewlet(new i.ViewletDescriptor("vs/workbench/parts/search/browser/searchViewlet","SearchViewlet",t.VIEWLET_ID,r.localize(3,null),"search",10));var I={primary:S.KeyMod.CtrlCmd|S.KeyMod.Shift|S.KeyCode.KEY_F};n.Registry.as(l.Extensions.WorkbenchActions).registerWorkbenchAction(new a.SyncActionDescriptor(E,E.ID,E.LABEL,I),r.localize(4,null));var D=n.Registry.as(u.Extensions.Actionbar);D.registerActionBarContributor(u.Scope.VIEWER,w),n.Registry.as(d.Extensions.Quickopen).registerDefaultQuickOpenHandler(new d.QuickOpenHandlerDescriptor("vs/workbench/parts/search/browser/openAnythingHandler","OpenAnythingHandler","",r.localize(5,null))),n.Registry.as(d.Extensions.Quickopen).registerQuickOpenHandler(new d.QuickOpenHandlerDescriptor("vs/workbench/parts/search/browser/openAnythingHandler","OpenSymbolHandler",k,[{prefix:k,needsEditor:!1,description:r.localize(6,null)}]));var A=n.Registry.as(l.Extensions.WorkbenchActions);A.registerWorkbenchAction(new a.SyncActionDescriptor(x,C,T,{primary:S.KeyMod.CtrlCmd|S.KeyCode.KEY_T}));var L=n.Registry.as(o.Extensions.Configuration);L.registerConfiguration({id:"search",order:10,title:r.localize(7,null),type:"object",properties:{"search.exclude":{type:"object",description:r.localize(8,null),"default":{"**/node_modules":!0,"**/bower_components":!0},additionalProperties:{anyOf:[{type:"boolean",description:r.localize(9,null)},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*","default":"$(basename).ext",description:r.localize(10,null)}}}]}}}})}),define("vs/workbench/services/window/electron-browser/windowService",["require","exports","vs/platform/instantiation/common/instantiation","vs/base/common/event","electron"],function(e,t,n,i,o){"use strict";var r=o.remote.getCurrentWindow().id;t.IWindowService=n.createDecorator("windowService");var s=function(){function e(){this.serviceId=t.IWindowService,this._onBroadcast=new i.Emitter,this.windowId=r,this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;o.ipcRenderer.on("vscode:broadcast",function(t,n){e._onBroadcast.fire(n)})},Object.defineProperty(e.prototype,"onBroadcast",{get:function(){return this._onBroadcast.event},enumerable:!0,configurable:!0}),e.prototype.getWindowId=function(){return this.windowId},e.prototype.getWindow=function(){return this.win},e.prototype.registerWindow=function(e){this.win=e},e.prototype.broadcast=function(e,t){o.ipcRenderer.send("vscode:broadcast",this.getWindowId(),t,{channel:e.channel,payload:e.payload})},e}();t.WindowService=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/actions",["require","exports","vs/base/common/winjs.base","vs/base/common/timer","vs/base/common/paths","vs/base/common/actions","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/editor/common/editorService","vs/nls!vs/workbench/electron-browser/actions","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/configuration/common/configuration","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.windowService=o}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();return e?this.editorService.closeEditor(e):(this.windowService.getWindow().close(),n.TPromise.as(!1))},t.ID="workbench.action.closeActiveEditor",t.LABEL=c.localize(0,null),t=__decorate([__param(2,a.IWorkbenchEditorService),__param(3,s.IWindowService)],t)}(r.Action);t.CloseEditorAction=f;var m=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return this.windowService.getWindow().close(),n.TPromise.as(!0)},t.ID="workbench.action.closeWindow",t.LABEL=c.localize(1,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.CloseWindowAction=m;var v=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.contextService=i,this.messageService=o,this.windowService=r}return __extends(t,e),t.prototype.run=function(){return this.contextService.getWorkspace()?p.ipcRenderer.send("vscode:closeFolder",this.windowService.getWindowId()):this.messageService.show(u.Severity.Info,c.localize(3,null)),n.TPromise.as(!0)},t.ID="workbench.action.closeFolder",t.LABEL=c.localize(2,null),t=__decorate([__param(2,l.IWorkspaceContextService),__param(3,u.IMessageService),__param(4,s.IWindowService)],t)}(r.Action);t.CloseFolderAction=v;var g=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return this.windowService.getWindow().openNew(),n.TPromise.as(!0)},t.ID="workbench.action.newWindow",t.LABEL=c.localize(4,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.NewWindowAction=g;var y=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return p.ipcRenderer.send("vscode:toggleFullScreen",this.windowService.getWindowId()),n.TPromise.as(!0)},t.ID="workbench.action.toggleFullScreen",t.LABEL=c.localize(5,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.ToggleFullScreenAction=y;var _=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return p.ipcRenderer.send("vscode:toggleMenuBar",this.windowService.getWindowId()),n.TPromise.as(!0)},t.ID="workbench.action.toggleMenuBar",t.LABEL=c.localize(6,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.ToggleMenuBarAction=_;var b=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return p.ipcRenderer.send("vscode:toggleDevTools",this.windowService.getWindowId()),n.TPromise.as(!0)},t.ID="workbench.action.toggleDevTools",t.LABEL=c.localize(7,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.ToggleDevToolsAction=b;var S=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){return p.webFrame.setZoomLevel(p.webFrame.getZoomLevel()+1),n.TPromise.as(!0)},t.ID="workbench.action.zoomIn",t.LABEL=c.localize(8,null),t}(r.Action);t.ZoomInAction=S;var E=function(e){function t(t,n,i){e.call(this,t,n),this.configurationService=i}return __extends(t,e),t.prototype.run=function(){return n.TPromise.as(!1)},t.prototype.loadConfiguredZoomLevel=function(){return this.configurationService.loadConfiguration().then(function(e){return e.window&&"number"==typeof e.window.zoomLevel?e.window.zoomLevel:0})},t=__decorate([__param(2,h.IConfigurationService)],t)}(r.Action);t.BaseZoomAction=E;var w=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){return this.loadConfiguredZoomLevel().then(function(e){var t=p.webFrame.getZoomLevel()-1;return 0>t&&e>t&&(t=Math.min(e,0)),p.webFrame.setZoomLevel(t),!0})},t.ID="workbench.action.zoomOut",t.LABEL=c.localize(9,null),t=__decorate([__param(2,h.IConfigurationService)],t)}(E);t.ZoomOutAction=w;var C=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){return this.loadConfiguredZoomLevel().then(function(e){return p.webFrame.setZoomLevel(e),!0})},t.ID="workbench.action.zoomReset",t.LABEL=c.localize(10,null),t=__decorate([__param(2,h.IConfigurationService)],t)}(E);t.ZoomResetAction=C;var T;!function(e){e[e.LoaderAvailable=1]="LoaderAvailable",e[e.BeginLoadingScript=10]="BeginLoadingScript",e[e.EndLoadingScriptOK=11]="EndLoadingScriptOK",e[e.EndLoadingScriptError=12]="EndLoadingScriptError",e[e.BeginInvokeFactory=21]="BeginInvokeFactory",e[e.EndInvokeFactory=22]="EndInvokeFactory",e[e.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",e[e.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",e[e.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",e[e.NodeEndNativeRequire=34]="NodeEndNativeRequire"}(T||(T={}));var k=function(t){function o(e,n,i,o){t.call(this,e,n),this.windowService=i,this.contextService=o,this.enabled=o.getConfiguration().env.enablePerformance}return __extends(o,t),o.prototype._analyzeLoaderTimes=function(){for(var t=e.getStats(),n=[],i=0,o=0,r=t.length;r>o;o++)if(t[o].type===T.NodeEndNativeRequire&&t[o-1].type===T.NodeBeginNativeRequire&&t[o-1].detail===t[o].detail){var s={};s.Event="nodeRequire "+t[o].detail,s["Took (ms)"]=t[o].timestamp-t[o-1].timestamp,i+=t[o].timestamp-t[o-1].timestamp,s["Start (ms)"]="**"+t[o-1].timestamp,s["End (ms)"]="**"+t[o-1].timestamp,n.push(s)}if(i>0){var s={};s.Event="===nodeRequire TOTAL",s["Took (ms)"]=i,s["Start (ms)"]="**",s["End (ms)"]="**",n.push(s)}return n},o.prototype.run=function(){var e=[];e.push.apply(e,this._analyzeLoaderTimes());var t,o=Math.round(p.remote.getGlobal("programStart")||p.remote.getGlobal("vscodeStart")),r=Math.round(p.remote.getGlobal("windowShow")),s=i.getTimeKeeper().getCollectedEvents();s.forEach(function(n){if("Startup"===n.topic){t=n;var i={};i.Event=n.name,i["Took (ms)"]=n.stopTime.getTime()-n.startTime.getTime(),i["Start (ms)"]=Math.max(n.startTime.getTime()-o,0),i["End (ms)"]=n.stopTime.getTime()-o,e.push(i)}}),e.push({Event:"---------------------------"});var a={};a.Event="Show Window at",a["Start (ms)"]=r-o,e.push(a);var c={};return c.Event="Total",c["Took (ms)"]=t.stopTime.getTime()-o,e.push(c),this.windowService.getWindow().openDevTools(),setTimeout(function(){console.warn("Run the action again if you do not see the numbers!"),console.table(e)},1e3),n.TPromise.as(!0)},o.ID="workbench.action.appPerf",o.LABEL=c.localize(11,null),o=__decorate([__param(2,s.IWindowService),__param(3,l.IWorkspaceContextService)],o)}(r.Action);t.ShowStartupPerformance=k;var x=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return this.windowService.getWindow().reload(),n.TPromise.as(!0)},t.ID="workbench.action.reloadWindow",t.LABEL=c.localize(12,null),t=__decorate([__param(2,s.IWindowService)],t)}(r.Action);t.ReloadWindowAction=x;var I=function(e){function t(t,n,i,o){e.call(this,t,n),this.contextService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){var e=this.contextService.getConfiguration().env.recentPaths.map(function(e){return{label:o.basename(e),description:o.dirname(e),path:e}}),t=!!this.contextService.getWorkspace();return this.quickOpenService.pick(e,{autoFocus:{autoFocusFirstEntry:!t,autoFocusSecondEntry:t},placeHolder:c.localize(14,null),matchOnDescription:!0}).then(function(e){return e&&p.ipcRenderer.send("vscode:windowOpen",[e.path]),!0})},t.ID="workbench.action.openRecent",t.LABEL=c.localize(13,null),t=__decorate([__param(2,l.IWorkspaceContextService),__param(3,d.IQuickOpenService)],t)}(r.Action);t.OpenRecentAction=I;var D=function(e){function t(t,n,i,o){e.call(this,t,n),this.messageService=i,this.editorService=o}return __extends(t,e),t.prototype.run=function(){this.messageService.hideAll();var e=this.editorService.getActiveEditor();return e&&e.focus(),n.TPromise.as(!0)},t.ID="workbench.action.closeMessages",t.LABEL=c.localize(15,null),t=__decorate([__param(2,u.IMessageService),__param(3,a.IWorkbenchEditorService)],t)}(r.Action);t.CloseMessagesAction=D}),define("vs/workbench/electron-browser/main.contribution",["require","exports","vs/platform/platform","vs/nls!vs/workbench/electron-browser/main.contribution","vs/platform/actions/common/actions","vs/platform/configuration/common/configurationRegistry","vs/workbench/common/actionRegistry","vs/base/common/keyCodes","vs/base/common/platform","vs/platform/keybinding/common/keybindingService","vs/workbench/services/message/browser/messageService","vs/workbench/electron-browser/actions"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=i.localize(0,null),p=i.localize(1,null),f=i.localize(2,null),m=n.Registry.as(s.Extensions.WorkbenchActions);m.registerWorkbenchAction(new o.SyncActionDescriptor(d.NewWindowAction,d.NewWindowAction.ID,d.NewWindowAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.KEY_N})),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.CloseWindowAction,d.CloseWindowAction.ID,d.CloseWindowAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.KEY_W})),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.CloseFolderAction,d.CloseFolderAction.ID,d.CloseFolderAction.LABEL,{primary:a.KeyMod.chord(a.KeyMod.CtrlCmd|a.KeyCode.KEY_K,a.KeyCode.KEY_F)}),f),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.OpenRecentAction,d.OpenRecentAction.ID,d.OpenRecentAction.LABEL),f),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ToggleDevToolsAction,d.ToggleDevToolsAction.ID,d.ToggleDevToolsAction.LABEL),p),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ZoomInAction,d.ZoomInAction.ID,d.ZoomInAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.US_EQUAL}),h),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ZoomOutAction,d.ZoomOutAction.ID,d.ZoomOutAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.US_MINUS}),h),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ZoomResetAction,d.ZoomResetAction.ID,d.ZoomResetAction.LABEL),h),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ShowStartupPerformance,d.ShowStartupPerformance.ID,d.ShowStartupPerformance.LABEL),p),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ReloadWindowAction,d.ReloadWindowAction.ID,d.ReloadWindowAction.LABEL)),
m.registerWorkbenchAction(new o.SyncActionDescriptor(d.CloseMessagesAction,d.CloseMessagesAction.ID,d.CloseMessagesAction.LABEL,{primary:a.KeyCode.Escape,secondary:[a.KeyMod.Shift|a.KeyCode.Escape]},u.KbExpr.has(l.WorkbenchMessageService.GLOBAL_MESSAGES_SHOWING_CONTEXT))),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.CloseEditorAction,d.CloseEditorAction.ID,d.CloseEditorAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.KEY_W,win:{primary:a.KeyMod.CtrlCmd|a.KeyCode.F4,secondary:[a.KeyMod.CtrlCmd|a.KeyCode.KEY_W]}}),h),m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ToggleFullScreenAction,d.ToggleFullScreenAction.ID,d.ToggleFullScreenAction.LABEL,{primary:a.KeyCode.F11,mac:{primary:a.KeyMod.CtrlCmd|a.KeyMod.WinCtrl|a.KeyCode.KEY_F}}),h),(c.isWindows||c.isLinux)&&m.registerWorkbenchAction(new o.SyncActionDescriptor(d.ToggleMenuBarAction,d.ToggleMenuBarAction.ID,d.ToggleMenuBarAction.LABEL),h);var v=n.Registry.as(r.Extensions.Configuration);v.registerConfiguration({id:"window",order:6,title:i.localize(3,null),type:"object",properties:{"window.openFilesInNewWindow":{type:"boolean","default":!0,description:i.localize(4,null)},"window.reopenFolders":{type:"string","enum":["none","one","all"],"default":"one",description:i.localize(5,null)},"window.zoomLevel":{type:"number","default":0,description:i.localize(6,null)}}}),v.registerConfiguration({id:"update",order:10,title:i.localize(7,null),type:"object",properties:{"update.channel":{type:"string","enum":["none","default"],"default":"default",description:i.localize(8,null)}}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsActions",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/base/common/winjs.base","vs/base/common/actions","vs/base/common/severity","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/workbench/electron-browser/actions","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/common/extensionsUtil","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=new o.Action("action.close",n.localize(0,null)),f=function(e){function t(t,n,i,o){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listExtensions",t.LABEL=n.localize(1,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,h.IQuickOpenService)],t)}(o.Action);t.ListExtensionsAction=f;var m=function(e){function t(t,n,i,o){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext install ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.installExtension",t.LABEL=n.localize(2,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,h.IQuickOpenService)],t)}(o.Action);t.InstallExtensionAction=m;var v=function(e){function t(t,n,i,o){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext update ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listOutdatedExtensions",t.LABEL=n.localize(3,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,h.IQuickOpenService)],t)}(o.Action);t.ListOutdatedExtensionsAction=v;var g=function(e){function t(t,n,i,o){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext recommend ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listSuggestedExtensions",t.LABEL=n.localize(4,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,h.IQuickOpenService)],t)}(o.Action);t.ListSuggestedExtensionsAction=g;var y=function(e){function t(t,n,i,o,r,s){e.call(this,"extensions.install",t,"octicon octicon-cloud-download",!0),this.quickOpenService=n,this.extensionsService=i,this.messageService=o,this.telemetryService=r,this.instantiationService=s}return __extends(t,e),t.prototype.run=function(e){var t=this;return this.enabled=!1,this.extensionsService.getInstalled().then(function(t){return t.some(function(t){return d.extensionEquals(t,e)})}).then(function(n){return t.extensionsService.install(e).then(function(){return t.onSuccess(e,n)},function(i){return t.onError(i,e,n)}).then(function(){return t.enabled=!0}).then(function(){return null})})},t.prototype.onSuccess=function(e,t){this.reportTelemetry(e,t,!0),this.messageService.show(r["default"].Info,{message:n.localize(5,null,e.displayName),actions:[p,this.instantiationService.createInstance(u.ReloadWindowAction,u.ReloadWindowAction.ID,n.localize(6,null))]})},t.prototype.onError=function(e,t,n){this.reportTelemetry(t,n,!1),this.messageService.show(r["default"].Error,e)},t.prototype.reportTelemetry=function(e,t,n){var i=t?"extensionGallery:update":"extensionGallery:install",o={success:n,id:e.galleryInformation?e.galleryInformation.id:null,name:e.name,publisherId:e.galleryInformation?e.galleryInformation.publisherId:null,publisherName:e.publisher,publisherDisplayName:e.galleryInformation?e.galleryInformation.publisherDisplayName:null};this.telemetryService.publicLog(i,o)},t=__decorate([__param(1,h.IQuickOpenService),__param(2,l.IExtensionsService),__param(3,c.IMessageService),__param(4,a.ITelemetryService),__param(5,s.IInstantiationService)],t)}(o.Action);t.InstallAction=y;var _=function(e){function t(t,i,o,r,s){e.call(this,"extensions.uninstall",n.localize(7,null),"octicon octicon-x",!0),this.quickOpenService=t,this.extensionsService=i,this.messageService=o,this.telemetryService=r,this.instantiationService=s}return __extends(t,e),t.prototype.run=function(e){var t=this;return window.confirm(n.localize(8,null,e.displayName))?(this.enabled=!1,this.extensionsService.uninstall(e).then(function(){return t.onSuccess(e)},function(n){return t.onError(n,e)}).then(function(){return t.enabled=!0}).then(function(){return null})):i.TPromise.as(null)},t.prototype.onSuccess=function(e){this.reportTelemetry(e,!0),this.messageService.show(r["default"].Info,{message:n.localize(9,null,e.displayName),actions:[p,this.instantiationService.createInstance(u.ReloadWindowAction,u.ReloadWindowAction.ID,n.localize(10,null))]})},t.prototype.onError=function(e,t){this.reportTelemetry(t,!1),this.messageService.show(r["default"].Error,e)},t.prototype.reportTelemetry=function(e,t){this.telemetryService.publicLog("extensionGallery:uninstall",{success:t,id:e.galleryInformation?e.galleryInformation.id:null,name:e.name,publisherId:e.galleryInformation?e.galleryInformation.publisherId:null,publisherName:e.publisher,publisherDisplayName:e.galleryInformation?e.galleryInformation.publisherDisplayName:null})},t=__decorate([__param(0,h.IQuickOpenService),__param(1,l.IExtensionsService),__param(2,c.IMessageService),__param(3,a.ITelemetryService),__param(4,s.IInstantiationService)],t)}(o.Action);t.UninstallAction=_});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/workspace/common/contextService",["require","exports","vs/workbench/common/events","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/baseWorkspaceContextService"],function(e,t,n,i,o){"use strict";t.IWorkspaceContextService=i.createDecorator("contextService");var r=function(e){function i(n,i,o,r){void 0===r&&(r={}),e.call(this,i,o,r),this.eventService=n,this.serviceId=t.IWorkspaceContextService}return __extends(i,e),i.prototype.updateOptions=function(e,t){var i=this.options[e];this.options[e]=t,this.eventService.emit(n.EventType.WORKBENCH_OPTIONS_CHANGED,new n.OptionsChangeEvent(e,i,t))},i}(o.BaseWorkspaceContextService);t.WorkspaceContextService=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/configureLocale",["require","exports","vs/nls!vs/workbench/browser/actions/configureLocale","vs/base/common/paths","vs/base/common/uri","vs/base/common/labels","vs/base/common/actions","vs/platform/platform","vs/workbench/common/actionRegistry","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/actions/common/actions"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.fileService=i,this.contextService=o,this.editorService=r}return __extends(t,e),t.prototype.run=function(e){var s=this,a=o["default"].file(i.join(this.contextService.getConfiguration().env.appSettingsHome,"locale.json"));return this.fileService.resolveFile(a).then(null,function(e){return s.fileService.createFile(a,t.DEFAULT_CONTENT)}).then(function(e){return e?s.editorService.openEditor({resource:e.resource,options:{forceOpen:!0}}):void 0},function(e){throw new Error(n.localize(4,null,r.getPathLabel(a,s.contextService),e))})},t.ID="workbench.action.configureLocale",t.LABEL=n.localize(0,null),t.DEFAULT_CONTENT=["{","	// "+n.localize(1,null),"	// "+n.localize(2,null,"http://go.microsoft.com/fwlink/?LinkId=761051"),"	// "+n.localize(3,null),'	"locale":"en-US"',"}"].join("\n"),t=__decorate([__param(2,d.IFileService),__param(3,l.IWorkspaceContextService),__param(4,u.IWorkbenchEditorService)],t)}(s.Action),f=a.Registry.as(c.Extensions.WorkbenchActions);f.registerWorkbenchAction(new h.SyncActionDescriptor(p,p.ID,p.LABEL))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/openSettings",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/openSettings","vs/base/common/uri","vs/base/common/labels","vs/platform/platform","vs/base/common/actions","vs/workbench/common/actionRegistry","vs/workbench/common/editor/stringEditorInput","vs/platform/configuration/common/model","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/configuration/common/configuration","vs/platform/editor/common/editor","vs/platform/storage/common/storage","vs/platform/files/common/files","vs/platform/message/common/message","vs/platform/keybinding/common/keybindingService","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n),this.editorService=i,this.fileService=o,this.configurationService=r,this.messageService=s,this.contextService=a,this.keybindingService=c,this.instantiationService=u,this.enabled=!0}return __extends(t,e),t.prototype.createIfNotExists=function(e,t){var o=this;return this.fileService.resolveContent(e,{acceptTextOnly:!0}).then(null,function(s){return s.fileOperationResult===v.FileOperationResult.FILE_NOT_FOUND?o.fileService.updateContent(e,t).then(null,function(t){return n.TPromise.wrapError(new Error(i.localize(0,null,r.getPathLabel(e,o.contextService),t)))}):n.TPromise.wrapError(s)})},t.prototype.openTwoEditors=function(e,t,n){var i=this;return this.createIfNotExists(t,n).then(function(){return i.editorService.inputToType({resource:t}).then(function(t){return i.editorService.setEditors([e,t]).then(function(){return i.editorService.focusEditor(f.Position.CENTER)})})})},t=__decorate([__param(2,d.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,p.IConfigurationService),__param(5,g.IMessageService),__param(6,h.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(a.Action);t.BaseTwoEditorsAction=E;var w=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n,i,o,r,s,a,c,u)}return __extends(t,e),t.prototype.open=function(e,t){return this.openTwoEditors(x.getInstance(this.instantiationService),t,e)},t=__decorate([__param(2,d.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,p.IConfigurationService),__param(5,g.IMessageService),__param(6,h.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(E);t.BaseOpenSettingsAction=w;var C=function(e){function t(t,n,i,o,r,s,a,c,u,l){e.call(this,t,n,i,o,r,s,a,c,u),this.storageService=l}return __extends(t,e),t.prototype.run=function(e){var r=this;this.configurationService.hasWorkspaceConfiguration()&&!this.storageService.getBoolean(t.SETTINGS_INFO_IGNORE_KEY,m.StorageScope.WORKSPACE)&&this.messageService.show(g.Severity.Info,{message:i.localize(2,null),actions:[g.CloseAction,new a.Action("neverShowAgain",i.localize(3,null),null,!0,function(){return r.storageService.store(t.SETTINGS_INFO_IGNORE_KEY,!0,m.StorageScope.WORKSPACE),n.TPromise.as(!0)}),new a.Action("open.workspaceSettings",i.localize(4,null),null,!0,function(){var e=r.editorService.getVisibleEditors().length;return r.editorService.inputToType({resource:r.contextService.toResource(".vscode/settings.json")}).then(function(t){return r.editorService.openEditor(t,null,2===e?f.Position.RIGHT:1===e?f.Position.CENTER:void 0)})})]});var s=i.localize(5,null);return this.open("// "+s+"\n{\n}",o["default"].file(this.contextService.getConfiguration().env.appSettingsPath))},t.ID="workbench.action.openGlobalSettings",t.LABEL=i.localize(1,null),t.SETTINGS_INFO_IGNORE_KEY="settings.workspace.info.ignore",t=__decorate([__param(2,d.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,p.IConfigurationService),__param(5,g.IMessageService),__param(6,h.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService),__param(9,m.IStorageService)],t)}(w);t.OpenGlobalSettingsAction=C;var T=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n,i,o,r,s,a,c,u)}return __extends(t,e),t.prototype.run=function(e){var t="// "+i.localize(7,null)+"\n[\n]";return this.openTwoEditors(I.getInstance(this.instantiationService,this.keybindingService),o["default"].file(this.contextService.getConfiguration().env.appKeybindingsPath),t)},t.ID="workbench.action.openGlobalKeybindings",t.LABEL=i.localize(6,null),t=__decorate([__param(2,d.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,p.IConfigurationService),__param(5,g.IMessageService),__param(6,h.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(E);t.OpenGlobalKeybindingsAction=T;var k=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e){if(!this.contextService.getWorkspace())return void this.messageService.show(g.Severity.Info,i.localize(9,null));var t=["// "+i.localize(10,null),"{","}"].join("\n");return this.open(t,this.contextService.toResource(".vscode/settings.json"))},t.ID="workbench.action.openWorkspaceSettings",t.LABEL=i.localize(8,null),t}(w);t.OpenWorkspaceSettingsAction=k;var x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e){if(!t.INSTANCE){var n=l.getDefaultValuesContent(),o="// "+i.localize(11,null);t.INSTANCE=e.createInstance(t,i.localize(12,null),null,o+"\n"+n,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return o["default"].create("vscode","defaultsettings","/settings.json")},t}(u.StringEditorInput),I=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e,n){if(!t.INSTANCE){var o="// "+i.localize(13,null),r=n.getDefaultKeybindings();t.INSTANCE=e.createInstance(t,i.localize(14,null),null,o+"\n"+r,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return o["default"].create("vscode","defaultsettings","/keybindings.json")},t}(u.StringEditorInput),D=i.localize(15,null),A=s.Registry.as(c.Extensions.WorkbenchActions);A.registerWorkbenchAction(new _.SyncActionDescriptor(C,C.ID,C.LABEL,{primary:null,mac:{primary:S.KeyMod.CtrlCmd|S.KeyCode.US_COMMA}}),D),A.registerWorkbenchAction(new _.SyncActionDescriptor(T,T.ID,T.LABEL),D),A.registerWorkbenchAction(new _.SyncActionDescriptor(k,k.ID,k.LABEL),D)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/layout",["require","exports","vs/base/browser/builder","vs/workbench/common/constants","vs/workbench/common/events","vs/base/browser/ui/sash/sash","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/contextview/browser/contextView","vs/platform/event/common/event"],function(e,t,n,i,o,r,s,a,c,u,l,d){"use strict";var h=170,p=170,f=170,m=50,v=50,g=[i.Preferences.THEME],y=function(){function e(){this.margin=new n.Box(0,0,0,0)}return e.prototype.setMargin=function(e){return this.margin=e,this},e}();t.LayoutOptions=y;var _=function(){function e(t,n,i,o,s,a,c,l,d,h,p){this.storageService=a,this.eventService=c,this.contextViewService=l,this.editorService=d,this.contextService=h,this.partService=p,this.parent=t,this.workbenchContainer=n,this.activitybar=i.activitybar,this.editor=i.editor,this.sidebar=i.sidebar,this.panel=i.panel,this.statusbar=i.statusbar,this.quickopen=o,this.options=s||new y,this.toUnbind=[],this.computedStyles=null,this.sashX=new r.Sash(this.workbenchContainer.getHTMLElement(),this,{baseSize:5}),this.sashY=new r.Sash(this.workbenchContainer.getHTMLElement(),this,{baseSize:5,orientation:r.Orientation.HORIZONTAL}),this.sidebarWidth=this.storageService.getInteger(e.sashXWidthSettingsKey,u.StorageScope.GLOBAL,-1),this.panelHeight=this.storageService.getInteger(e.sashYHeightSettingsKey,u.StorageScope.GLOBAL,0),this.registerListeners(),this.registerSashListeners()}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(u.StorageEventType.STORAGE,function(t){return e.onPreferenceChange(t)})),this.toUnbind.push(this.eventService.addListener(o.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)}))},e.prototype.registerSashListeners=function(){var t=this,n=0,i=0;this.sashX.addListener("start",function(e){t.startSidebarWidth=t.sidebarWidth,n=e.startX}),this.sashY.addListener("start",function(e){t.startPanelHeight=t.panelHeight,i=e.startY}),this.sashX.addListener("change",function(e){var i=!1,o=t.partService.getSideBarPosition(),r=t.partService.isSideBarHidden(),s=o===a.Position.LEFT?t.startSidebarWidth+e.currentX-n:t.startSidebarWidth-e.currentX+n;if(r)(o===a.Position.LEFT&&e.currentX-n>=t.computedStyles.sidebar.minWidth||o===a.Position.RIGHT&&n-e.currentX>=t.computedStyles.sidebar.minWidth)&&(t.startSidebarWidth=t.computedStyles.sidebar.minWidth-(o===a.Position.LEFT?e.currentX-n:n-e.currentX),t.sidebarWidth=t.computedStyles.sidebar.minWidth,t.partService.setSideBarHidden(!1));else if(s+m<t.computedStyles.sidebar.minWidth){var c=h-m;t.partService.setSideBarHidden(!0),n=o===a.Position.LEFT?Math.max(t.computedStyles.activitybar.minWidth,e.currentX-c):Math.min(e.currentX+c,t.workbenchSize.width-t.computedStyles.activitybar.minWidth),t.sidebarWidth=t.startSidebarWidth}else t.sidebarWidth=Math.max(t.computedStyles.sidebar.minWidth,s),i=s>=t.computedStyles.sidebar.minWidth;i&&t.layout()}),this.sashY.addListener("change",function(e){var n=!1,o=t.partService.isPanelHidden(),r=t.startPanelHeight-(e.currentY-i);if(o)i-e.currentY>=t.computedStyles.panel.minHeight&&(t.startPanelHeight=0,t.panelHeight=t.computedStyles.panel.minHeight,t.partService.setPanelHidden(!1));else if(r+v<t.computedStyles.panel.minHeight){var s=p-v;t.partService.setPanelHidden(!0),i=Math.min(t.sidebarHeight-t.computedStyles.statusbar.height,e.currentY+s),t.panelHeight=t.startPanelHeight}else t.panelHeight=Math.max(t.computedStyles.panel.minHeight,r),n=r>=t.computedStyles.panel.minHeight;n&&t.layout()}),this.sashX.addListener("end",function(){t.storageService.store(e.sashXWidthSettingsKey,t.sidebarWidth,u.StorageScope.GLOBAL)}),this.sashY.addListener("end",function(){t.storageService.store(e.sashYHeightSettingsKey,t.panelHeight,u.StorageScope.GLOBAL)})},e.prototype.onEditorInputChanging=function(e){if(this.workbenchSize&&this.sidebarWidth){var t=this.editorService.getVisibleEditors().length;t>1&&this.workbenchSize.width-this.sidebarWidth<t*h&&this.layout()}},e.prototype.onPreferenceChange=function(e){e.key&&g.indexOf(e.key)>=0&&(this.computeStyle(),this.editor.getLayout().computeStyle(),this.sidebar.getLayout().computeStyle(),this.panel.getLayout().computeStyle(),this.layout())},e.prototype.computeStyle=function(){var e=this.sidebar.getContainer().getComputedStyle(),t=this.panel.getContainer().getComputedStyle(),n=this.editor.getContainer().getComputedStyle(),i=this.activitybar.getContainer().getComputedStyle();if(this.computedStyles={activitybar:{minWidth:parseInt(i.getPropertyValue("min-width"),10)||0},sidebar:{minWidth:parseInt(e.getPropertyValue("min-width"),10)||h},panel:{minHeight:parseInt(t.getPropertyValue("min-height"),10)||p},editor:{minWidth:parseInt(n.getPropertyValue("min-width"),10)||h},statusbar:{height:0}},this.statusbar){var o=this.statusbar.getContainer().getComputedStyle();this.computedStyles.statusbar.height=parseInt(o.getPropertyValue("height"),10)||18}},e.prototype.layout=function(t){t&&(this.computeStyle(),this.editor.getLayout().computeStyle(),this.sidebar.getLayout().computeStyle(),this.panel.getLayout().computeStyle()),this.computedStyles||this.computeStyle(),this.workbenchSize=this.getWorkbenchArea();var i,o=this.partService.isSideBarHidden(),r=this.partService.isPanelHidden(),s=this.partService.getSideBarPosition();o?i=0:-1!==this.sidebarWidth?i=Math.max(this.computedStyles.sidebar.minWidth,this.sidebarWidth):(i=this.workbenchSize.width/5,this.sidebarWidth=i),this.sidebarHeight=this.workbenchSize.height-this.computedStyles.statusbar.height;var c,l=new n.Dimension(i,this.sidebarHeight),d=this.computedStyles.activitybar.minWidth,p=new n.Dimension(d,l.height);c=r?0:this.panelHeight>0?Math.min(l.height-f,Math.max(this.computedStyles.panel.minHeight,this.panelHeight)):.4*l.height;var m=new n.Dimension(this.workbenchSize.width-l.width-p.width,c);this.panelWidth=m.width;var v={width:0,height:0,remainderLeft:0,remainderRight:0},g=new n.Dimension(m.width,l.height-m.height);v.width=g.width,v.height=g.height,o&&(v.width=Math.min(this.workbenchSize.width-p.width,this.workbenchSize.width-d),s===a.Position.LEFT?(v.remainderLeft=Math.round((this.workbenchSize.width-v.width+p.width)/2),v.remainderRight=this.workbenchSize.width-v.width-v.remainderLeft):(v.remainderRight=Math.round((this.workbenchSize.width-v.width+p.width)/2),v.remainderLeft=this.workbenchSize.width-v.width-v.remainderRight));var y=this.computedStyles.editor.minWidth,_=this.editorService.getVisibleEditors().length;if(_>1&&(y*=_),v.width<y){var b=y-v.width;v.width=y,m.width=y,l.width-=b,l.width=Math.max(h,l.width)}o||(this.sidebarWidth=l.width,this.storageService.store(e.sashXWidthSettingsKey,this.sidebarWidth,u.StorageScope.GLOBAL)),r||(this.panelHeight=m.height,this.storageService.store(e.sashYHeightSettingsKey,this.panelHeight,u.StorageScope.GLOBAL)),this.workbenchContainer.position(this.options.margin.top,this.options.margin.right,this.options.margin.bottom,this.options.margin.left,"relative").size(this.workbenchSize.width,this.workbenchSize.height),this.workbenchContainer.getHTMLElement().scrollTop>0&&(this.workbenchContainer.getHTMLElement().scrollTop=0),this.editor.getContainer().size(v.width,v.height),this.panel.getContainer().size(m.width,m.height);var S=this.computedStyles.statusbar.height+m.height;o?(this.editor.getContainer().position(0,v.remainderRight,S,v.remainderLeft),this.panel.getContainer().position(g.height,v.remainderRight,this.computedStyles.statusbar.height,v.remainderLeft)):s===a.Position.LEFT?(this.editor.getContainer().position(0,0,S,l.width+p.width),this.panel.getContainer().position(g.height,0,this.computedStyles.statusbar.height,l.width+p.width)):(this.editor.getContainer().position(0,l.width,S,0),this.panel.getContainer().position(g.height,l.width,this.computedStyles.statusbar.height,0)),this.activitybar.getContainer().size(null,p.height),s===a.Position.LEFT?(this.activitybar.getContainer().getHTMLElement().style.right="",this.activitybar.getContainer().position(0,null,0,0)):(this.activitybar.getContainer().getHTMLElement().style.left="",this.activitybar.getContainer().position(0,0,0,null)),this.sidebar.getContainer().size(l.width,l.height),s===a.Position.LEFT?this.sidebar.getContainer().position(0,v.width,0,p.width):this.sidebar.getContainer().position(0,null,0,v.width),this.statusbar&&this.statusbar.getContainer().position(this.workbenchSize.height-this.computedStyles.statusbar.height),this.quickopen.layout(this.workbenchSize),this.sashX.layout(),this.sashY.layout(),this.editor.layout(new n.Dimension(v.width,v.height)),this.sidebar.layout(l),this.panel.layout(m),this.contextViewService&&this.contextViewService.layout()},e.prototype.getWorkbenchArea=function(){var e=this.parent.getClientArea();return e.substract(this.options.margin)},e.prototype.getVerticalSashTop=function(e){return 0},e.prototype.getVerticalSashLeft=function(e){var t=this.partService.isSideBarHidden(),n=this.partService.getSideBarPosition(),i=this.computedStyles.activitybar.minWidth;return n===a.Position.LEFT?t?i:this.sidebarWidth+i:t?this.workbenchSize.width-i:this.workbenchSize.width-this.sidebarWidth-i},e.prototype.getVerticalSashHeight=function(e){return this.sidebarHeight},e.prototype.getHorizontalSashTop=function(e){return this.partService.isPanelHidden()?this.sidebarHeight:this.sidebarHeight-this.panelHeight},e.prototype.getHorizontalSashLeft=function(e){return this.partService.getSideBarPosition()===a.Position.LEFT?this.getVerticalSashLeft(e):0},e.prototype.getHorizontalSashWidth=function(e){return this.panelWidth},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e.sashXWidthSettingsKey="workbench.sidebar.width",e.sashYHeightSettingsKey="workbench.panel.height",e=__decorate([__param(5,u.IStorageService),__param(6,d.IEventService),__param(7,l.IContextViewService),__param(8,s.IWorkbenchEditorService),__param(9,c.IWorkspaceContextService),__param(10,a.IPartService)],e)}();t.WorkbenchLayout=_});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/sideBySideEditorControl",["require","exports","vs/nls!vs/workbench/browser/parts/editor/sideBySideEditorControl","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/base/common/actions","vs/base/common/arrays","vs/base/common/eventEmitter","vs/base/browser/mouseEvent","vs/base/common/errors","vs/base/common/platform","vs/base/common/types","vs/base/browser/builder","vs/base/browser/ui/sash/sash","vs/base/browser/ui/progressbar/progressbar","vs/workbench/common/editor","vs/workbench/common/editor/diffEditorInput","vs/base/common/events","vs/workbench/common/events","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/toolbar/toolbar","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/css!./media/sidebyside"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D){"use strict";!function(e){e[e.NONE=0]="NONE",e[e.CENTER_TO_LEFT=1]="CENTER_TO_LEFT",e[e.RIGHT_TO_CENTER=2]="RIGHT_TO_CENTER",e[e.CENTER_AND_RIGHT_TO_LEFT=3]="CENTER_AND_RIGHT_TO_LEFT"}(t.Rochade||(t.Rochade={}));var A=t.Rochade;t.EventType={EDITOR_FOCUS_CHANGED:"editorFocusChanged"};var L=function(a){function L(e,t,n,i,o,r,s,c,u){var l=this;a.call(this),this.editorService=t,this.messageService=n,this.quickOpenService=i,this.telemetryService=o,this.contextViewService=r,this.contextMenuService=s,this.eventService=c,this.contextService=u,this.parent=e,this.dimension=new h.Dimension(0,0),this.containers=[],this.containerWidth=[],this.titleContainer=[],this.titleLabel=[],this.titleDescription=[],this.editorInputStateDescription=[],this.editorActionsToolbar=[],this.progressBar=[],this.visibleEditors=[],this.visibleEditorContainers=[],this.visibleEditorFocusTrackers=[],this.closeEditorAction=k.POSITIONS.map(function(e){return l.makeCloseEditorAction(e)}),this.splitEditorAction=this.makeSplitEditorAction(),this.initStyles(),this.registerListeners(),this.create(this.parent)}return __extends(L,a),L.prototype.registerListeners=function(){var e=this;this.editorInputStateChangeListener=this.eventService.addListener(y.EventType.EDITOR_INPUT_STATE_CHANGED,function(t){e.updateEditorInputStateIndicator(t)})},L.prototype.initStyles=function(){var t=l.isWindows?'cursor: url("'+e.toUrl("vs/workbench/browser/parts/editor/media/grab.cur")+'"), move;':"cursor: -webkit-grab;",n=l.isWindows?'cursor: url("'+e.toUrl("vs/workbench/browser/parts/editor/media/grabbing.cur")+'"), move;':"cursor: -webkit-grabbing;";
_.createCSSRule(".monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title .title-label a, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title .title-label span",t),_.createCSSRule("#monaco-workbench-editor-move-overlay, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title .title-label a, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title .title-label span, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .monaco-editor .view-lines",n)},L.prototype.makeCloseEditorAction=function(e){var t=this;return new r.Action("close.editor.action",n.localize(0,null),"close-editor-action",!0,function(){return t.editorService.closeEditor(e)})},L.prototype.makeSplitEditorAction=function(){var e=this;return new r.Action("split.editor.action",n.localize(1,null),"split-editor-action",!0,function(){var t=e.editorService.getActiveEditor(),n=e.getVisibleEditorCount();if(n>1&&t.position===k.Position.LEFT){var i=e.visibleEditors[k.Position.CENTER].input,o=new m.TextEditorOptions;return o.preserveFocus=!0,e.editorService.openEditor(t.input,o,k.Position.CENTER).then(function(){return e.editorService.openEditor(i,o,k.Position.RIGHT).then(function(){return e.editorService.focusEditor(k.Position.CENTER)})})}return e.editorService.openEditor(t.input,null,!0)})},L.prototype.show=function(e,t,n,i,o){var r=this.getVisibleEditorCount();this.visibleEditors[n]=e,this.visibleEditorContainers[n]=t,i&&this.lastActiveEditor||this.doSetActive(e,n),this.trackFocus(e,n);var s=this.containers[n];if(t.build(s),!o||2!==o.length&&3!==o.length)0===r&&this.dimension?(this.containerWidth[n]=this.dimension.width,this.layoutContainers()):n===k.Position.CENTER&&this.leftSash.isHidden()&&this.rightSash.isHidden()&&this.dimension?(this.containerWidth[k.Position.LEFT]=this.dimension.width/2,this.containerWidth[k.Position.CENTER]=this.dimension.width-this.containerWidth[k.Position.LEFT],this.leftSash.show(),this.leftSash.layout(),this.layoutContainers()):n===k.Position.RIGHT&&this.rightSash.isHidden()&&this.dimension&&(this.containerWidth[k.Position.LEFT]=this.dimension.width/3,this.containerWidth[k.Position.CENTER]=this.dimension.width/3,this.containerWidth[k.Position.RIGHT]=this.dimension.width-this.containerWidth[k.Position.LEFT]-this.containerWidth[k.Position.CENTER],this.leftSash.layout(),this.rightSash.show(),this.rightSash.layout(),this.layoutContainers());else{var a=this.dimension&&this.dimension.width;a||(this.containerInitialRatios=o),2===o.length?a&&(this.containerWidth[n]=this.dimension.width*o[n]):3===o.length&&(a&&(this.containerWidth[n]=this.dimension.width*o[n]),this.rightSash.isHidden()&&(this.rightSash.show(),this.rightSash.layout())),this.leftSash.isHidden()&&(this.leftSash.show(),this.leftSash.layout()),a&&this.layoutContainers()}t.show(),this.updateParentStyle()},L.prototype.getVisibleEditorCount=function(){var e=0;return this.visibleEditors.forEach(function(t){t&&e++}),e},L.prototype.indexOf=function(e){return this.visibleEditors.indexOf(e)},L.prototype.trackFocus=function(e,t){var n=this;this.visibleEditorFocusTrackers[t]&&this.visibleEditorFocusTrackers[t].dispose(),this.visibleEditorFocusTrackers[t]=_.trackFocus(e.getContainer().getHTMLElement()),this.visibleEditorFocusTrackers[t].addFocusListener(function(){n.onFocusGained(e)})},L.prototype.onFocusGained=function(e){this.setActive(e)},L.prototype.setActive=function(e){var n=this;if(this.lastActiveEditor!==e){if(this.doSetActive(e,this.indexOf(e)),this.containerWidth[this.lastActivePosition]===L.MIN_EDITOR_WIDTH){this.telemetryService&&this.telemetryService.publicLog("workbenchEditorMaximized");var i=this.dimension.width;k.POSITIONS.forEach(function(e){n.lastActivePosition!==e&&n.visibleEditors[e]&&(n.containerWidth[e]=L.MIN_EDITOR_WIDTH,i-=n.containerWidth[e])}),i>L.MIN_EDITOR_WIDTH&&(this.containerWidth[this.lastActivePosition]=i,this.leftSash.isHidden()||this.leftSash.layout(),this.rightSash.isHidden()||this.rightSash.layout(),this.layoutContainers())}this.emit(t.EventType.EDITOR_FOCUS_CHANGED)}},L.prototype.focusNextNonMinimized=function(){var e=this;if(!d.isUndefinedOrNull(this.lastActivePosition)&&this.containerWidth[this.lastActivePosition]===L.MIN_EDITOR_WIDTH){var t=null,n=L.MIN_EDITOR_WIDTH;k.POSITIONS.forEach(function(i){i!==e.lastActivePosition&&e.visibleEditors[i]&&e.containerWidth[i]>n&&(t=i,n=e.containerWidth[i])}),d.isUndefinedOrNull(t)||this.editorService.focusEditor(this.visibleEditors[t]).done(null,u.onUnexpectedError)}},L.prototype.hide=function(e,t,n,i){var o=A.NONE,r=this.getVisibleEditorCount(),s=!!this.visibleEditors[k.Position.CENTER],a=!!this.visibleEditors[k.Position.RIGHT];if(e!==this.visibleEditors[n])return o;if(this.clearPosition(n),t.offDOM(),t.hide(),i&&(1===r?(this.containerWidth[n]=0,this.leftSash.hide(),this.rightSash.hide(),this.layoutContainers()):s&&!a?(this.containerWidth[k.Position.LEFT]=this.dimension.width,this.containerWidth[k.Position.CENTER]=0,this.leftSash.hide(),this.rightSash.hide(),n===k.Position.LEFT&&(this.rochade(k.Position.CENTER,k.Position.LEFT),o=A.CENTER_TO_LEFT,this.clearTitle(k.Position.CENTER)),this.layoutContainers()):s&&a&&(this.containerWidth[k.Position.LEFT]=this.dimension.width/2,this.containerWidth[k.Position.CENTER]=this.dimension.width-this.containerWidth[k.Position.LEFT],this.containerWidth[k.Position.RIGHT]=0,this.leftSash.layout(),this.rightSash.hide(),n===k.Position.CENTER?(this.rochade(k.Position.RIGHT,k.Position.CENTER),o=A.RIGHT_TO_CENTER,this.clearTitle(k.Position.RIGHT)):n===k.Position.LEFT&&(this.rochade(k.Position.CENTER,k.Position.LEFT),this.rochade(k.Position.RIGHT,k.Position.CENTER),o=A.CENTER_AND_RIGHT_TO_LEFT,this.clearTitle(k.Position.RIGHT)),this.layoutContainers())),this.lastActiveEditor===e&&(this.doSetActive(null,null),i)){var c=void 0;switch(n){case k.Position.LEFT:c=s?k.Position.LEFT:null;break;case k.Position.CENTER:c=k.Position.LEFT;break;case k.Position.RIGHT:c=k.Position.CENTER}d.isUndefinedOrNull(c)||this.doSetActive(this.visibleEditors[c],c)}return this.updateParentStyle(),o},L.prototype.updateParentStyle=function(){var e=this.getVisibleEditorCount();e>1?this.parent.addClass("multiple-editors"):this.parent.removeClass("multiple-editors")},L.prototype.doSetActive=function(e,t){var n=this.lastActivePosition;this.lastActivePosition=t,this.lastActiveEditor=e,d.isUndefinedOrNull(n)||(this.containers[n].addClass("inactive"),this.containers[n].removeClass("active")),d.isUndefinedOrNull(t)||(this.containers[t].removeClass("inactive"),this.containers[t].addClass("active"))},L.prototype.clearPosition=function(e){this.visibleEditorFocusTrackers[e]&&(this.visibleEditorFocusTrackers[e].dispose(),this.visibleEditorFocusTrackers[e]=null),this.visibleEditors[e]=null,this.visibleEditorContainers[e]=null},L.prototype.rochade=function(e,t){var n=this.visibleEditorContainers[e],i=this.visibleEditors[e];n.offDOM(),n.build(this.containers[t]),i.changePosition(t);var o=this.visibleEditorFocusTrackers[e];this.visibleEditorContainers[t]=n,this.visibleEditors[t]=i,this.visibleEditorFocusTrackers[t]=o,this.visibleEditorContainers[e]=null,this.visibleEditors[e]=null,this.visibleEditorFocusTrackers[e]=null,this.lastActivePosition===e&&this.doSetActive(this.lastActiveEditor,t)},L.prototype.move=function(e,t){var n,i,o,r;if(1===Math.abs(e-t))n=this.visibleEditorContainers[e],i=this.visibleEditors[e],n.offDOM(),n.build(this.containers[t]),i.changePosition(t),o=this.visibleEditorContainers[t],r=this.visibleEditors[t],o.offDOM(),o.build(this.containers[e]),r.changePosition(e),this.lastActivePosition===e?this.doSetActive(this.lastActiveEditor,t):this.lastActivePosition===t&&this.doSetActive(this.lastActiveEditor,e);else{var a=void 0,c=void 0,u=void 0;e===k.Position.LEFT?(a=k.Position.RIGHT,c=k.Position.LEFT,u=k.Position.CENTER):(a=k.Position.CENTER,c=k.Position.RIGHT,u=k.Position.LEFT),n=this.visibleEditorContainers[k.Position.LEFT],i=this.visibleEditors[k.Position.LEFT],n.offDOM(),n.build(this.containers[a]),i.changePosition(a),o=this.visibleEditorContainers[k.Position.CENTER],r=this.visibleEditors[k.Position.CENTER],o.offDOM(),o.build(this.containers[c]),r.changePosition(c);var l=this.visibleEditorContainers[k.Position.RIGHT],d=this.visibleEditors[k.Position.RIGHT];l.offDOM(),l.build(this.containers[u]),d.changePosition(u),this.lastActivePosition===k.Position.LEFT?this.doSetActive(this.lastActiveEditor,a):this.lastActivePosition===k.Position.CENTER?this.doSetActive(this.lastActiveEditor,c):this.lastActivePosition===k.Position.RIGHT&&this.doSetActive(this.lastActiveEditor,u)}s.move(this.visibleEditorContainers,e,t),s.move(this.visibleEditors,e,t),s.move(this.visibleEditorFocusTrackers,e,t),s.move(this.containerWidth,e,t),this.leftSash.isHidden()||this.leftSash.layout(),this.rightSash.isHidden()||this.rightSash.layout(),this.layoutContainers()},L.prototype.arrangeEditors=function(e){var t=this;if(this.dimension){var n=this.dimension.width,i=this.getVisibleEditorCount();1>=i||(e===E.EditorArrangement.MINIMIZE_OTHERS?(k.POSITIONS.forEach(function(e){t.visibleEditors[e]&&e!==t.lastActivePosition&&(t.containerWidth[e]=L.MIN_EDITOR_WIDTH,n-=L.MIN_EDITOR_WIDTH)}),this.containerWidth[this.lastActivePosition]=n):e===E.EditorArrangement.EVEN_WIDTH&&k.POSITIONS.forEach(function(e){t.visibleEditors[e]&&(t.containerWidth[e]=n/i)}),this.layoutControl(this.dimension))}},L.prototype.getWidthRatios=function(){var e=this,t=[];if(this.dimension){var n=this.dimension.width;k.POSITIONS.forEach(function(i){e.visibleEditors[i]&&t.push(e.containerWidth[i]/n)})}return t},L.prototype.getActiveEditor=function(){return this.lastActiveEditor},L.prototype.getActivePosition=function(){return this.lastActivePosition},L.prototype.create=function(e){var t=this;this.containers[k.Position.LEFT]=h.$(e).div({"class":"one-editor-container editor-left"}),this.leftSash=new p.Sash(e.getHTMLElement(),this,{baseSize:5}),this.leftSash.addListener("start",function(){return t.onLeftSashDragStart()}),this.leftSash.addListener("change",function(e){return t.onLeftSashDrag(e)}),this.leftSash.addListener("end",function(){return t.onLeftSashDragEnd()}),this.leftSash.hide(),this.containers[k.Position.CENTER]=h.$(e).div({"class":"one-editor-container editor-center"}),this.rightSash=new p.Sash(e.getHTMLElement(),this,{baseSize:5}),this.rightSash.addListener("start",function(){return t.onRightSashDragStart()}),this.rightSash.addListener("change",function(e){return t.onRightSashDrag(e)}),this.rightSash.addListener("end",function(){return t.onRightSashDragEnd()}),this.rightSash.hide(),this.containers[k.Position.RIGHT]=h.$(e).div({"class":"one-editor-container editor-right"}),k.POSITIONS.forEach(function(e){t.titleContainer[e]=h.$(t.containers[e]).div({"class":"title monaco-editor-background"}),t.fillTitleArea(h.$(t.titleContainer[e]),e)}),k.POSITIONS.forEach(function(e){t.progressBar[e]=new f.ProgressBar(h.$(t.containers[e])),t.progressBar[e].getContainer().hide()})},L.prototype.updateEditorInputStateIndicator=function(e){var t=this;k.POSITIONS.forEach(function(n){t.visibleEditors[n]&&t.isInputRelated(t.visibleEditors[n].input,e.editorInput)&&t.setEditorInputStateIndicator(e.editorInput,e.editorInput.getStatus(),n)})},L.prototype.setEditorInputStateIndicator=function(e,t,i){var o=e&&e.getName()||"";t&&t.decoration&&(o=n.localize(2,null,t.decoration,o)),this.titleLabel[i].safeInnerHtml(o)},L.prototype.isInputRelated=function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e instanceof v.DiffEditorInput){var n=e.getModifiedInput();if(n===t)return!0}return!1},L.prototype.fillTitleArea=function(e,t){var i=this,o=!1,r=!1;e.on(_.EventType.MOUSE_DOWN,function(e){if(o=!1,r=!1,!(i.getVisibleEditorCount()<=1||_.isAncestor(e.target||e.srcElement,i.editorActionsToolbar[t].getContainer().getHTMLElement()))&&0===e.button){_.EventHelper.stop(e);var n=h.$("div").style({position:"absolute",top:L.EDITOR_TITLE_HEIGHT+"px",left:0,width:"100%",height:"100%",zIndex:3e6}).id("monaco-workbench-editor-move-overlay");n.appendTo(i.parent),i.dragging=!0;var s=i.getVisibleEditorCount(),a=new c.StandardMouseEvent(e),l=a.posx,d=null;i.containers[t].style({zIndex:2e6});var p=h.$(window);p.on(_.EventType.MOUSE_MOVE,function(e){_.EventHelper.stop(e,!1);var n=new c.StandardMouseEvent(e),o=n.posx-l,a=null;switch(Math.abs(o)>5&&(r=!0),t){case k.Position.LEFT:a=Math.max(-1,Math.min(o,i.dimension.width-i.containerWidth[k.Position.LEFT]));break;case k.Position.CENTER:a=2===s?Math.min(i.containerWidth[k.Position.LEFT],Math.max(-1,i.containerWidth[k.Position.LEFT]+o)):Math.min(i.dimension.width-i.containerWidth[k.Position.CENTER],Math.max(-1,i.containerWidth[k.Position.LEFT]+o));break;case k.Position.RIGHT:a=Math.min(i.containerWidth[k.Position.LEFT]+i.containerWidth[k.Position.CENTER],Math.max(-1,i.containerWidth[k.Position.LEFT]+i.containerWidth[k.Position.CENTER]+o))}if(d!==a){d=a;var u=i.findMoveTarget(t,o);switch(t){case k.Position.LEFT:u===k.Position.LEFT||null===u?(i.containers[k.Position.CENTER].style({left:i.containerWidth[k.Position.LEFT]+"px",right:"auto",borderLeftWidth:"1px"}),i.containers[k.Position.RIGHT].style({left:"auto",right:0})):u===k.Position.CENTER?(i.containers[k.Position.CENTER].style({left:0,right:"auto",borderLeftWidth:0}),i.containers[k.Position.CENTER].addClass("draggedunder"),i.containers[k.Position.RIGHT].style({left:"auto",right:0})):u===k.Position.RIGHT&&(i.containers[k.Position.CENTER].style({left:0,right:"auto"}),i.containers[k.Position.RIGHT].style({left:"auto",right:i.containerWidth[k.Position.LEFT]+"px"}),i.containers[k.Position.RIGHT].addClass("draggedunder"));break;case k.Position.CENTER:u===k.Position.LEFT?(i.containers[k.Position.LEFT].style({left:i.containerWidth[k.Position.CENTER]+"px",right:"auto"}),i.containers[k.Position.LEFT].addClass("draggedunder")):u===k.Position.CENTER||null===u?(i.containers[k.Position.LEFT].style({left:0,right:"auto"}),i.containers[k.Position.RIGHT].style({left:"auto",right:0})):u===k.Position.RIGHT&&(i.containers[k.Position.RIGHT].style({left:"auto",right:i.containerWidth[k.Position.CENTER]+"px"}),i.containers[k.Position.RIGHT].addClass("draggedunder"),i.containers[k.Position.LEFT].style({left:0,right:"auto"}));break;case k.Position.RIGHT:u===k.Position.LEFT?(i.containers[k.Position.LEFT].style({left:i.containerWidth[k.Position.RIGHT]+"px",right:"auto"}),i.containers[k.Position.LEFT].addClass("draggedunder")):u===k.Position.CENTER?(i.containers[k.Position.LEFT].style({left:0,right:"auto"}),i.containers[k.Position.CENTER].style({left:i.containerWidth[k.Position.LEFT]+i.containerWidth[k.Position.RIGHT]+"px",right:"auto"}),i.containers[k.Position.CENTER].addClass("draggedunder")):u!==k.Position.RIGHT&&null!==u||(i.containers[k.Position.LEFT].style({left:0,right:"auto"}),i.containers[k.Position.CENTER].style({left:i.containerWidth[k.Position.LEFT]+"px",right:"auto"}))}null!==a&&(i.containers[t].style({left:a+"px"}),i.containers[t].addClass("dragged"),i.parent.addClass("dragged"))}}).once(_.EventType.MOUSE_UP,function(e){_.EventHelper.stop(e,!1),n.destroy(),i.dragging=!1,i.parent.removeClass("dragged"),i.containers[t].removeClass("dragged"),i.containers[t].style({zIndex:"auto"}),k.POSITIONS.forEach(function(e){return i.containers[e].removeClass("draggedunder")}),i.containers[k.Position.LEFT].style({left:0,right:"auto"}),i.containers[k.Position.CENTER].style({left:"auto",right:"auto",borderLeftWidth:"1px"}),i.containers[k.Position.RIGHT].style({left:"auto",right:0,borderLeftWidth:"1px"});var s=new c.StandardMouseEvent(e),a=s.posx-l,d=i.findMoveTarget(t,a);null!==d?i.editorService.moveEditor(t,d):i.layoutContainers(),r?o=!0:t!==i.getActivePosition()&&i.editorService.focusEditor(i.visibleEditors[t]).done(null,u.onUnexpectedError),p.off("mousemove")})}}),e.on(_.EventType.MOUSE_UP,function(e){_.EventHelper.stop(e,!1),1===e.button?i.editorService.closeEditor(t).done(null,u.onUnexpectedError):1!==i.getVisibleEditorCount()||_.isAncestor(e.target||e.srcElement,i.editorActionsToolbar[t].getContainer().getHTMLElement())||i.editorService.focusEditor(i.visibleEditors[t]).done(null,u.onUnexpectedError)}),e.div({"class":"title-actions"},function(e){i.editorActionsToolbar[t]=new S.ToolBar(e.getHTMLElement(),i.contextMenuService,{actionItemProvider:function(e){return i.actionItemProvider(e,t)},orientation:b.ActionsOrientation.HORIZONTAL,ariaLabel:n.localize(3,null)}),i.editorActionsToolbar[t].actionRunner.addListener(g.EventType.RUN,function(e){e.error&&!u.isPromiseCanceledError(e.error)&&i.messageService.show(I.Severity.Error,e.error),i.telemetryService&&i.telemetryService.publicLog("workbenchActionExecuted",{id:e.action.id,from:"editorPart"})})}),e.div({"class":"title-label"},function(e){var n=function(e){o||(_.EventHelper.stop(e,!0),i.quickOpenService.show())};i.titleLabel[t]=h.$(e).a().on(_.EventType.CLICK,n),i.titleDescription[t]=h.$(e).span().on(_.EventType.CLICK,n)})},L.prototype.findMoveTarget=function(e,t){var n=this.getVisibleEditorCount();switch(e){case k.Position.LEFT:if(2===n&&(t>=this.containerWidth[k.Position.LEFT]/2||t>=this.containerWidth[k.Position.CENTER]/2))return k.Position.CENTER;if(3===n&&(t>=this.containerWidth[k.Position.LEFT]/2+this.containerWidth[k.Position.CENTER]||t>=this.containerWidth[k.Position.RIGHT]/2+this.containerWidth[k.Position.CENTER]))return k.Position.RIGHT;if(3===n&&(t>=this.containerWidth[k.Position.LEFT]/2||t>=this.containerWidth[k.Position.CENTER]/2))return k.Position.CENTER;break;case k.Position.CENTER:if(2===n&&t>0)return null;if(2===n&&(Math.abs(t)>=this.containerWidth[k.Position.CENTER]/2||Math.abs(t)>=this.containerWidth[k.Position.LEFT]/2))return k.Position.LEFT;if(3===n&&(0>t&&Math.abs(t)>=this.containerWidth[k.Position.CENTER]/2||0>t&&Math.abs(t)>=this.containerWidth[k.Position.LEFT]/2))return k.Position.LEFT;if(3===n&&(t>0&&Math.abs(t)>=this.containerWidth[k.Position.CENTER]/2||t>0&&Math.abs(t)>=this.containerWidth[k.Position.RIGHT]/2))return k.Position.RIGHT;break;case k.Position.RIGHT:if(t>0)return null;if(Math.abs(t)>=this.containerWidth[k.Position.RIGHT]/2+this.containerWidth[k.Position.CENTER]||Math.abs(t)>=this.containerWidth[k.Position.LEFT]/2+this.containerWidth[k.Position.CENTER])return k.Position.LEFT;if(Math.abs(t)>=this.containerWidth[k.Position.RIGHT]/2||Math.abs(t)>=this.containerWidth[k.Position.CENTER]/2)return k.Position.CENTER}return null},L.prototype.actionItemProvider=function(e,t){var n,r=this.visibleEditors[t];if(r&&(n=r.getActionItem(e)),!n){var s=i.Registry.as(o.Extensions.Actionbar);n=s.getActionItemForContext(o.Scope.EDITOR,{input:r&&r.input,editor:r,position:t},e)}return n},L.prototype.setTitle=function(e,t,n,i,o){o?(this.containers[e].removeClass("inactive"),this.containers[e].addClass("active")):(this.containers[e].addClass("inactive"),this.containers[e].removeClass("active"));var r=t.getName()||"",s=o?t.getDescription()||"":"",a=o?t.getDescription(!0)||"":"";s===a&&(a=""),this.titleLabel[e].safeInnerHtml(r),this.titleLabel[e].title(a),this.titleDescription[e].safeInnerHtml(s),this.titleDescription[e].title(a),t?this.setEditorInputStateIndicator(t,t.getStatus(),e):this.setEditorInputStateIndicator(null,null,null),o&&this.getVisibleEditorCount()<3&&this.lastActiveEditor.supportsSplitEditor()&&n.unshift(this.splitEditorAction),this.editorActionsToolbar[e].setActions(n,i)(),t&&this.editorActionsToolbar[e].addPrimaryAction(this.closeEditorAction[e])()},L.prototype.setLoading=function(e,t){this.titleLabel[e].safeInnerHtml(t.getName()||""),this.titleDescription[e].safeInnerHtml(n.localize(4,null)),this.editorActionsToolbar[e].setActions([],[])(),t&&this.editorActionsToolbar[e].addPrimaryAction(this.closeEditorAction[e])()},L.prototype.clearTitle=function(e){this.titleLabel[e].safeInnerHtml(""),this.titleDescription[e].safeInnerHtml(""),this.editorActionsToolbar[e].setActions([],[])()},L.prototype.onLeftSashDragStart=function(){this.startLeftContainerWidth=this.containerWidth[k.Position.LEFT]},L.prototype.onLeftSashDrag=function(e){var t=this.containerWidth[k.Position.LEFT],n=this.startLeftContainerWidth+e.currentX-e.startX;this.rightSash.isHidden()?(n<L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-n<L.MIN_EDITOR_WIDTH?n=this.dimension.width-L.MIN_EDITOR_WIDTH:n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH&&(n=this.dimension.width-L.MIN_EDITOR_WIDTH),this.containerWidth[k.Position.LEFT]=n,this.containerWidth[k.Position.CENTER]=this.dimension.width-n):(n<L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-n-this.containerWidth[k.Position.RIGHT]<L.MIN_EDITOR_WIDTH?(this.dimension.width-n-this.containerWidth[k.Position.CENTER]<L.MIN_EDITOR_WIDTH?(n=this.dimension.width-2*L.MIN_EDITOR_WIDTH,this.containerWidth[k.Position.CENTER]=this.containerWidth[k.Position.RIGHT]=L.MIN_EDITOR_WIDTH):this.dimension.width-n-this.containerWidth[k.Position.CENTER]-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH?this.containerWidth[k.Position.RIGHT]=L.MIN_EDITOR_WIDTH:this.containerWidth[k.Position.RIGHT]=this.containerWidth[k.Position.RIGHT]-(n-t),this.rightSash.layout()):n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-this.containerWidth[k.Position.RIGHT]-n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH&&(n=this.dimension.width-this.containerWidth[k.Position.RIGHT]-L.MIN_EDITOR_WIDTH),this.containerWidth[k.Position.LEFT]=n,this.containerWidth[k.Position.CENTER]=this.dimension.width-this.containerWidth[k.Position.LEFT]-this.containerWidth[k.Position.RIGHT]),this.layoutContainers()},L.prototype.onLeftSashDragEnd=function(){this.leftSash.layout(),this.rightSash.layout(),this.focusNextNonMinimized()},L.prototype.onRightSashDragStart=function(){this.startRightContainerWidth=this.containerWidth[k.Position.RIGHT]},L.prototype.onRightSashDrag=function(e){var t=this.containerWidth[k.Position.RIGHT],n=this.startRightContainerWidth-e.currentX+e.startX;n<L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-n-this.containerWidth[k.Position.LEFT]<L.MIN_EDITOR_WIDTH?(this.dimension.width-n-this.containerWidth[k.Position.CENTER]<L.MIN_EDITOR_WIDTH?(n=this.dimension.width-2*L.MIN_EDITOR_WIDTH,this.containerWidth[k.Position.LEFT]=this.containerWidth[k.Position.CENTER]=L.MIN_EDITOR_WIDTH):this.dimension.width-n-this.containerWidth[k.Position.CENTER]-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH?this.containerWidth[k.Position.LEFT]=L.MIN_EDITOR_WIDTH:this.containerWidth[k.Position.LEFT]=this.containerWidth[k.Position.LEFT]-(n-t),this.leftSash.layout()):n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH?n=L.MIN_EDITOR_WIDTH:this.dimension.width-this.containerWidth[k.Position.LEFT]-n-L.SNAP_TO_MINIMIZED_THRESHOLD<=L.MIN_EDITOR_WIDTH&&(n=this.dimension.width-this.containerWidth[k.Position.LEFT]-L.MIN_EDITOR_WIDTH),this.containerWidth[k.Position.RIGHT]=n,this.containerWidth[k.Position.CENTER]=this.dimension.width-this.containerWidth[k.Position.LEFT]-this.containerWidth[k.Position.RIGHT],this.layoutContainers()},L.prototype.onRightSashDragEnd=function(){this.leftSash.layout(),this.rightSash.layout(),this.focusNextNonMinimized()},L.prototype.getVerticalSashTop=function(e){return 0},L.prototype.getVerticalSashLeft=function(e){return e===this.leftSash?this.containerWidth[k.Position.LEFT]:this.containerWidth[k.Position.CENTER]+this.containerWidth[k.Position.LEFT]},L.prototype.getVerticalSashHeight=function(e){return this.dimension.height},L.prototype.isDragging=function(){return this.dragging},L.prototype.layout=function(e){e instanceof h.Dimension?this.layoutControl(e):this.layoutEditor(e)},L.prototype.layoutControl=function(e){var t=this,n=this.dimension;this.dimension=e,n&&n.width&&n.height||(n=e);var i=0;if(k.POSITIONS.forEach(function(e){if(t.visibleEditors[e]){if(t.containerWidth[e]!==L.MIN_EDITOR_WIDTH){var o=void 0;t.containerInitialRatios&&d.isNumber(t.containerInitialRatios[e])?(o=t.containerInitialRatios[e],delete t.containerInitialRatios[e]):o=t.containerWidth[e]/n.width,t.containerWidth[e]=Math.max(Math.round(t.dimension.width*o),L.MIN_EDITOR_WIDTH)}i+=t.containerWidth[e]}}),i>0){var o=i-this.dimension.width;if(0>o){var r=null;k.POSITIONS.forEach(function(e){t.visibleEditors[e]&&null===r&&t.containerWidth[e]!==L.MIN_EDITOR_WIDTH&&(r=e)}),null===r&&(r=k.Position.LEFT),this.containerWidth[r]-=o}else o>0&&k.POSITIONS.forEach(function(e){var n=t.containerWidth[e]-L.MIN_EDITOR_WIDTH;if(n>=o)t.containerWidth[e]-=o,o=0;else if(n>0){var i=o-n;t.containerWidth[e]-=i,o-=i}})}this.leftSash.layout(),this.rightSash.layout(),this.layoutContainers()},L.prototype.layoutContainers=function(){var e=this;k.POSITIONS.forEach(function(t){e.containers[t].size(e.containerWidth[t],e.dimension.height)}),this.visibleEditors[k.Position.RIGHT]?this.containers[k.Position.CENTER].position(null,this.containerWidth[k.Position.RIGHT]):this.containers[k.Position.CENTER].position(null,this.dimension.width-this.containerWidth[k.Position.LEFT]-this.containerWidth[k.Position.CENTER]),k.POSITIONS.forEach(function(t){e.visibleEditors[t]&&e.containers[t].isHidden()?e.containers[t].show():e.visibleEditors[t]||e.containers[t].isHidden()||e.containers[t].hide()}),k.POSITIONS.forEach(function(t){e.layoutEditor(t)})},L.prototype.layoutEditor=function(e){var t=this.containerWidth[e];t&&this.visibleEditors[e]&&this.visibleEditors[e].layout(new h.Dimension(t,this.dimension.height-L.EDITOR_TITLE_HEIGHT))},L.prototype.getProgressBar=function(e){return this.progressBar[e]},L.prototype.dispose=function(){var e=this;k.POSITIONS.forEach(function(t){e.clearPosition(t)}),this.editorActionsToolbar.forEach(function(e){e.dispose()}),this.progressBar.forEach(function(e){e.dispose()}),this.closeEditorAction.forEach(function(e){e.dispose()}),this.leftSash.dispose(),this.rightSash.dispose(),this.containers.forEach(function(e){e.destroy()}),this.editorInputStateChangeListener&&this.editorInputStateChangeListener(),this.lastActiveEditor=null,this.lastActivePosition=null,this.visibleEditors=null,this.visibleEditorContainers=null,a.prototype.dispose.call(this)},L.MIN_EDITOR_WIDTH=170,L.EDITOR_TITLE_HEIGHT=35,L.SNAP_TO_MINIMIZED_THRESHOLD=50,L=__decorate([__param(1,E.IWorkbenchEditorService),__param(2,I.IMessageService),__param(3,w.IQuickOpenService),__param(4,D.ITelemetryService),__param(5,T.IContextViewService),__param(6,T.IContextMenuService),__param(7,x.IEventService),__param(8,C.IWorkspaceContextService)],L)}(a.EventEmitter);t.SideBySideEditorControl=L});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/textEditor",["require","exports","vs/base/common/objects","vs/base/common/errors","vs/editor/browser/widget/codeEditorWidget","vs/workbench/common/constants","vs/workbench/common/events","vs/workbench/common/memento","vs/workbench/browser/parts/editor/baseEditor","vs/editor/common/config/commonEditorConfig","vs/editor/common/editorCommon","vs/workbench/services/workspace/common/contextService","vs/workbench/services/themes/common/themeService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService","vs/css!./media/texteditor"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S="editorViewState",E=function(e){function t(t,n,i,o,r,a,c,u,l,d){var h=this;e.call(this,t,n),this._instantiationService=i,this._contextService=o,this._storageService=r,this._messageService=a,this.configurationService=c,this._eventService=u,this._editorService=l,this._modeService=d,this.toUnbind.push(this._eventService.addListener(p.StorageEventType.STORAGE,function(e){return h.onPreferencesChanged(e)})),this.toUnbind.push(this._eventService.addListener(s.EventType.WORKBENCH_OPTIONS_CHANGED,function(e){return h.onOptionsChanged(e)})),this.toUnbind.push(this.configurationService.addListener(f.ConfigurationServiceEventTypes.UPDATED,function(e){return h.applyConfiguration(e.config)}))}return __extends(t,e),Object.defineProperty(t.prototype,"instantiationService",{get:function(){return this._instantiationService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextService",{get:function(){return this._contextService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storageService",{get:function(){return this._storageService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"messageService",{get:function(){return this._messageService},enumerable:!0,configurable:!0}),t.prototype.applyConfiguration=function(e){if(this.editorControl){var t=this.getCodeEditorOptions();e=n.clone(e),n.assign(e[u.EditorConfiguration.EDITOR_SECTION],t),u.EditorConfiguration.apply(e,this.editorControl)}this._modeService.configureAllModes(e)},t.prototype.onOptionsChanged=function(e){this.editorControl&&this.editorControl.updateOptions(this.getCodeEditorOptions())},t.prototype.onPreferencesChanged=function(e){e.key===r.Preferences.THEME&&this.editorControl.updateOptions(this.getCodeEditorOptions())},t.prototype.getCodeEditorOptions=function(){var e={overviewRulerLanes:3,readOnly:this.contextService.getOptions().readOnly,glyphMargin:!0,lineNumbersMinChars:3,theme:this._storageService.get(r.Preferences.THEME,p.StorageScope.GLOBAL,h.DEFAULT_THEME_ID)};return n.mixin(e,this.contextService.getOptions().editor)},Object.defineProperty(t.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorContainer",{get:function(){return this._editorContainer},enumerable:!0,configurable:!0}),t.prototype.createEditor=function(e){var t=this;this._editorContainer=e,this.editorControl=this.createEditorControl(e),this.toUnbind.push(this.editorControl.addListener(l.EventType.CursorPositionChanged,function(e){var n=t.editorControl.getSelection();t.eventService.emit(s.EventType.TEXT_EDITOR_SELECTION_CHANGED,new s.TextEditorSelectionEvent(n,t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ModelModeChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_MODE_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ModelContentChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_CONTENT_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ModelOptionsChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_CONTENT_OPTIONS_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ConfigurationChanged,function(e){
t.eventService.emit(s.EventType.TEXT_EDITOR_CONFIGURATION_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.configurationService.loadConfiguration().then(function(e){t.applyConfiguration(e)},i.onUnexpectedError)},t.prototype.createEditorControl=function(e){return this._instantiationService.createInstance(o.CodeEditorWidget,e.getHTMLElement(),this.getCodeEditorOptions())},t.prototype.setInput=function(t,n){var i=this;return e.prototype.setInput.call(this,t,n).then(function(){i.editorControl.updateOptions(i.getCodeEditorOptions())})},t.prototype.setVisible=function(t,n){void 0===n&&(n=null);var i=e.prototype.setVisible.call(this,t,n);return t?this.editorControl.onVisible():this.editorControl.onHide(),i},t.prototype.focus=function(){this.editorControl.focus()},t.prototype.layout=function(e){this.editorControl.layout(e)},t.prototype.getControl=function(){return this.editorControl},t.prototype.getSelection=function(){return this.editorControl.getSelection()},t.prototype.saveTextEditorViewState=function(e,t){var n=this.editorControl.saveViewState(),i=this.getMemento(e,a.Scope.WORKSPACE),o=i[S];o||(o={},i[S]=o),o[t]=n},t.prototype.clearTextEditorViewState=function(e,t){var n=this.getMemento(e,a.Scope.WORKSPACE),i=n[S];i&&t.forEach(function(e){return delete i[e]})},t.prototype.loadTextEditorViewState=function(e,t){var n=this.getMemento(e,a.Scope.WORKSPACE),i=n[S];return i?i[t]:null},t.prototype.dispose=function(){this.editorControl.destroy(),e.prototype.dispose.call(this)},t=__decorate([__param(1,y.ITelemetryService),__param(2,v.IInstantiationService),__param(3,d.IWorkspaceContextService),__param(4,p.IStorageService),__param(5,g.IMessageService),__param(6,f.IConfigurationService),__param(7,m.IEventService),__param(8,_.IWorkbenchEditorService),__param(9,b.IModeService)],t)}(c.BaseEditor);t.BaseTextEditor=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/editorStatus",["require","exports","vs/nls!vs/workbench/browser/parts/editor/editorStatus","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/strings","vs/base/common/paths","vs/base/common/types","vs/base/common/errors","vs/base/common/actions","vs/workbench/common/editor/untitledEditorInput","vs/workbench/common/editor","vs/base/common/lifecycle","vs/platform/message/common/message","vs/workbench/browser/actions/openSettings","vs/editor/common/editorCommon","vs/editor/contrib/indentation/common/indentation","vs/workbench/common/events","vs/workbench/browser/parts/editor/textEditor","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modeService","vs/base/browser/styleMutator","vs/css!./media/editorstatus"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k){"use strict";function x(e){if(e instanceof y.BaseTextEditor){var t=e.getControl();return t.getEditorType()===m.EditorType.IDiffEditor?t.getModifiedEditor():t.getEditorType()===m.EditorType.ICodeEditor?t:null}return null}function I(e){var t,n=e.getModel();return t=n&&n.modified?n.modified:n}function D(e){return e instanceof l.UntitledEditorInput?e:d.asFileEditorInput(e,!0)}function A(e){k.StyleMutator.setDisplay(e,"")}function L(e){k.StyleMutator.setDisplay(e,"none")}function O(e){var t=e.getControl();if(t.getEditorType()===m.EditorType.IDiffEditor&&(t=t.getModifiedEditor()),t.getEditorType()!==m.EditorType.ICodeEditor)return!1;var n=t.getConfiguration();return n.tabFocusMode&&!n.readOnly}function M(e){var t=e.getControl();return t.getEditorType()===m.EditorType.IDiffEditor&&(t=t.getModifiedEditor()),t.getEditorType()===m.EditorType.ICodeEditor&&!t.getConfiguration().readOnly}var P=function(){function e(){this._selectionStatus=null,this._mode=null,this._encoding=null,this._EOL=null,this._tabFocusMode=!1}return Object.defineProperty(e.prototype,"selectionStatus",{get:function(){return this._selectionStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encoding",{get:function(){return this._encoding},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EOL",{get:function(){return this._EOL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indentation",{get:function(){return this._indentation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabFocusMode",{get:function(){return this._tabFocusMode},enumerable:!0,configurable:!0}),e.prototype.update=function(e){var t={selectionStatus:!1,mode:!1,encoding:!1,EOL:!1,tabFocusMode:!1,indentation:!1},n=!1;return"undefined"!=typeof e.selectionStatus&&this._selectionStatus!==e.selectionStatus&&(this._selectionStatus=e.selectionStatus,n=!0,t.selectionStatus=!0),"undefined"!=typeof e.indentation&&this._indentation!==e.indentation&&(this._indentation=e.indentation,n=!0,t.indentation=!0),"undefined"!=typeof e.mode&&this._mode!==e.mode&&(this._mode=e.mode,n=!0,t.mode=!0),"undefined"!=typeof e.encoding&&this._encoding!==e.encoding&&(this._encoding=e.encoding,n=!0,t.encoding=!0),"undefined"!=typeof e.EOL&&this._EOL!==e.EOL&&(this._EOL=e.EOL,n=!0,t.EOL=!0),"undefined"!=typeof e.tabFocusMode&&this._tabFocusMode!==e.tabFocusMode&&(this._tabFocusMode=e.tabFocusMode,n=!0,t.tabFocusMode=!0),n?t:null},e}(),R=n.localize(0,null),N=n.localize(1,null),F=n.localize(2,null),W=n.localize(3,null),H=n.localize(4,null),V=n.localize(5,null),K=n.localize(6,null),B=function(){function e(e,t,n,i,o,r){this.editorService=e,this.quickOpenService=t,this.instantiationService=n,this.eventService=i,this.modeService=o,this.configurationService=r,this.toDispose=[],this.state=new P}return e.prototype.render=function(e){var t=this;return this.element=o.append(e,o.emmet(".editor-statusbar-item")),this.tabFocusModeElement=o.append(this.element,o.emmet("a.editor-status-tabfocusmode")),this.tabFocusModeElement.title=n.localize(7,null),this.tabFocusModeElement.onclick=function(){return t.onTabFocusModeClick()},this.tabFocusModeElement.textContent=K,L(this.tabFocusModeElement),this.selectionElement=o.append(this.element,o.emmet("a.editor-status-selection")),this.selectionElement.title=n.localize(8,null),this.selectionElement.onclick=function(){return t.onSelectionClick()},L(this.selectionElement),this.indentationElement=o.append(this.element,o.emmet("a.editor-status-indentation")),this.indentationElement.title=n.localize(9,null),this.indentationElement.onclick=function(){return t.onIndentationClick()},L(this.indentationElement),this.encodingElement=o.append(this.element,o.emmet("a.editor-status-encoding")),this.encodingElement.title=n.localize(10,null),this.encodingElement.onclick=function(){return t.onEncodingClick()},L(this.encodingElement),this.eolElement=o.append(this.element,o.emmet("a.editor-status-eol")),this.eolElement.title=n.localize(11,null),this.eolElement.onclick=function(){return t.onEOLClick()},L(this.eolElement),this.modeElement=o.append(this.element,o.emmet("a.editor-status-mode")),this.modeElement.title=n.localize(12,null),this.modeElement.onclick=function(){return t.onModeClick()},L(this.modeElement),this.toDispose.push(this.eventService.addListener2(g.EventType.EDITOR_INPUT_CHANGED,function(e){return t.onEditorInputChange(e.editor)}),this.eventService.addListener2(g.EventType.RESOURCE_ENCODING_CHANGED,function(e){return t.onResourceEncodingChange(e.resource)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_SELECTION_CHANGED,function(e){return t.onSelectionChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_MODE_CHANGED,function(e){return t.onModeChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_CONTENT_CHANGED,function(e){return t.onEOLChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_CONFIGURATION_CHANGED,function(e){return t.onTabFocusModeChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_CONTENT_OPTIONS_CHANGED,function(e){return t.onIndentationChange(e.editor)})),h.combinedDispose.apply(void 0,this.toDispose)},e.prototype.updateState=function(e){var t=this.state.update(e);t&&(t.tabFocusMode&&(this.state.tabFocusMode&&this.state.tabFocusMode===!0?A(this.tabFocusModeElement):L(this.tabFocusModeElement)),t.indentation&&(this.state.indentation?(this.indentationElement.textContent=this.state.indentation,A(this.indentationElement)):L(this.indentationElement)),t.selectionStatus&&(this.state.selectionStatus?(this.selectionElement.textContent=this.state.selectionStatus,A(this.selectionElement)):L(this.selectionElement)),t.encoding&&(this.state.encoding?(this.encodingElement.textContent=this.state.encoding,A(this.encodingElement)):L(this.encodingElement)),t.EOL&&(this.state.EOL?(this.eolElement.textContent="\r\n"===this.state.EOL?V:H,A(this.eolElement)):L(this.eolElement)),t.mode&&(this.state.mode?(this.modeElement.textContent=this.state.mode,A(this.modeElement)):L(this.modeElement)))},e.prototype.getSelectionLabel=function(e){return e&&e.selections?1===e.selections.length?e.charactersSelected?r.format(R,e.selections[0].positionLineNumber,e.selections[0].positionColumn,e.charactersSelected):r.format(N,e.selections[0].positionLineNumber,e.selections[0].positionColumn):e.charactersSelected?r.format(F,e.selections.length,e.charactersSelected):r.format(W,e.selections.length):null},e.prototype.onModeClick=function(){var e=this.instantiationService.createInstance(U,U.ID,U.LABEL);e.run().done(null,c.onUnexpectedError),e.dispose()},e.prototype.onIndentationClick=function(){var e=this.instantiationService.createInstance(z,z.ID,z.LABEL);e.run().done(null,c.onUnexpectedError),e.dispose()},e.prototype.onSelectionClick=function(){this.quickOpenService.show(":")},e.prototype.onEOLClick=function(){var e=this.instantiationService.createInstance(j,j.ID,j.LABEL);e.run().done(null,c.onUnexpectedError),e.dispose()},e.prototype.onEncodingClick=function(){var e=this.instantiationService.createInstance(q,q.ID,q.LABEL);e.run().done(null,c.onUnexpectedError),e.dispose()},e.prototype.onTabFocusModeClick=function(){var e=this.editorService.getActiveEditor();e instanceof y.BaseTextEditor&&O(e)&&e.getControl().updateOptions({tabFocusMode:!1})},e.prototype.onEditorInputChange=function(e){this.onSelectionChange(e),this.onModeChange(e),this.onEOLChange(e),this.onEncodingChange(e),this.onTabFocusModeChange(e),this.onIndentationChange(e)},e.prototype.onModeChange=function(e){if(!e||this.isActiveEditor(e)){var t={mode:null};if(e instanceof y.BaseTextEditor){var n=e.getControl(),i=I(n);if(i&&i.getMode){var o=i.getMode();o&&(t={mode:this.modeService.getLanguageName(o.getId())})}}this.updateState(t)}},e.prototype.onIndentationChange=function(e){if(!e||this.isActiveEditor(e)){var t={indentation:null};if(e instanceof y.BaseTextEditor){var i=e.getControl();if(i){i.getEditorType()===m.EditorType.IDiffEditor&&(i=i.getModifiedEditor());var o=i.getModel();if(o){var r=o.getOptions();t.indentation=r.insertSpaces?n.localize(13,null,r.tabSize):n.localize(14,null,r.tabSize)}}}this.updateState(t)}},e.prototype.onSelectionChange=function(e){if(!e||this.isActiveEditor(e)){var t={};if(e instanceof y.BaseTextEditor){var n=e.getControl();t.selections=n.getSelections()||[],t.charactersSelected=0;var i=I(n);if(i&&t.selections.forEach(function(e){t.charactersSelected+=i.getValueLengthInRange(e)}),1===t.selections.length){var o=n.getVisibleColumnFromPosition(n.getPosition()),r=t.selections[0].clone();r.positionColumn=o,t.selections[0]=r}}this.updateState({selectionStatus:this.getSelectionLabel(t)})}},e.prototype.onEOLChange=function(e){if(!e||this.isActiveEditor(e)){var t={EOL:null},n=x(e);if(n&&!n.getConfiguration().readOnly){var i=n.getModel();i&&(t.EOL=i.getEOL())}this.updateState(t)}},e.prototype.onEncodingChange=function(e){if(!e||this.isActiveEditor(e)){var t={encoding:null};if(e instanceof y.BaseTextEditor){var n=D(e.input);if(n&&a.isFunction(n.getEncoding)){var i=n.getEncoding(),o=w.SUPPORTED_ENCODINGS[i];o?t.encoding=o.labelShort:t.encoding=i}}this.updateState(t)}},e.prototype.onResourceEncodingChange=function(e){var t=this.editorService.getActiveEditor();if(t){var n=d.getUntitledOrFileResource(t.input,!0);if(n&&n.toString()===e.toString())return this.onEncodingChange(t)}},e.prototype.onTabFocusModeChange=function(e){if(!e||this.isActiveEditor(e)){var t={tabFocusMode:!1};e instanceof y.BaseTextEditor&&O(e)&&(t={tabFocusMode:!0}),this.updateState(t)}},e.prototype.isActiveEditor=function(e){var t=this.editorService.getActiveEditor();return t&&e&&t===e},e=__decorate([__param(0,_.IWorkbenchEditorService),__param(1,b.IQuickOpenService),__param(2,C.IInstantiationService),__param(3,E.IEventService),__param(4,T.IModeService),__param(5,S.IConfigurationService)],e)}();t.EditorStatus=B;var U=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.modeService=i,this.editorService=o,this.messageService=r,this.instantiationService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.modeService.getRegisteredLanguageNames(),i=this.editorService.getActiveEditor();if(!(i instanceof y.BaseTextEditor))return this.quickOpenService.pick([{label:n.localize(16,null)}]);var o,r=i.getControl(),a=I(r),u=d.asFileEditorInput(i.input,!0);if(a.getMode){var l=a.getMode();l&&(o=this.modeService.getLanguageName(l.getId()))}var h=t.sort().map(function(e,t){return{label:e,description:o===e?n.localize(17,null):void 0}});h[0].separator={border:!0,label:n.localize(18,null)};var m=n.localize(19,null);if(u){var v=u.getResource(),g=s.extname(v.fsPath)||s.basename(v.fsPath);g&&(m=n.localize(20,null,g))}var _={label:m};h.unshift(_);var b={label:n.localize(21,null)};return h.unshift(b),this.quickOpenService.pick(h,{placeHolder:n.localize(22,null)}).then(function(t){if(t&&(i=e.editorService.getActiveEditor(),i instanceof y.BaseTextEditor)){var o=i.getControl(),r=[],s=I(o);r.push(s);var a=o.getModel();a&&a.original&&r.push(a.original);var u;if(t===b)u=e.modeService.getOrCreateModeByFilenameOrFirstLine(d.getUntitledOrFileResource(i.input,!0).fsPath,s.getLineContent(1));else if(t===_){var l=e.instantiationService.createInstance(f.OpenGlobalSettingsAction,f.OpenGlobalSettingsAction.ID,f.OpenGlobalSettingsAction.LABEL);l.run().done(function(){return l.dispose()},c.onUnexpectedError),e.messageService.show(p.Severity.Info,n.localize(23,null))}else u=e.modeService.getOrCreateModeByLanguageName(t.label);r.forEach(function(e){e.getMode&&e.setMode(u)})}})},t.ID="workbench.action.editor.changeLanguageMode",t.LABEL=n.localize(15,null),t=__decorate([__param(2,T.IModeService),__param(3,_.IWorkbenchEditorService),__param(4,p.IMessageService),__param(5,C.IInstantiationService),__param(6,b.IQuickOpenService)],t)}(u.Action);t.ChangeModeAction=U;var z=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(!(e instanceof y.BaseTextEditor))return this.quickOpenService.pick([{label:n.localize(25,null)}]);if(!M(e))return this.quickOpenService.pick([{label:n.localize(26,null)}]);var t=e.getControl(),i=[t.getAction(v.IndentUsingSpaces.ID),t.getAction(v.IndentUsingTabs.ID),t.getAction(v.DetectIndentation.ID),t.getAction(v.IndentationToSpacesAction.ID),t.getAction(v.IndentationToTabsAction.ID)];return i[0].separator={label:n.localize(27,null)},i[3].separator={label:n.localize(28,null),border:!0},this.quickOpenService.pick(i,{placeHolder:n.localize(29,null)}).then(function(e){return e&&e.run()})},t.ID="workbench.action.editor.changeIndentation",t.LABEL=n.localize(24,null),t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,b.IQuickOpenService)],t)}(u.Action),j=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!(t instanceof y.BaseTextEditor))return this.quickOpenService.pick([{label:n.localize(31,null)}]);if(!M(t))return this.quickOpenService.pick([{label:n.localize(32,null)}]);var i=t.getControl(),o=I(i),r=[{label:H,eol:m.EndOfLineSequence.LF},{label:V,eol:m.EndOfLineSequence.CRLF}],s="\n"===o.getEOL()?0:1;return this.quickOpenService.pick(r,{placeHolder:n.localize(33,null),autoFocus:{autoFocusIndex:s}}).then(function(n){if(n&&(t=e.editorService.getActiveEditor(),t instanceof y.BaseTextEditor&&M(t))){var i=t.getControl(),o=I(i);o.setEOL(n.eol)}})},t.ID="workbench.action.editor.changeEOL",t.LABEL=n.localize(30,null),t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,b.IQuickOpenService)],t)}(u.Action);t.ChangeEOLAction=j;var q=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.editorService=i,this.quickOpenService=o,this.configurationService=r}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!(t instanceof y.BaseTextEditor&&t.input))return this.quickOpenService.pick([{label:n.localize(35,null)}]);var o=D(t.input);if(!a.areFunctions(o.setEncoding,o.getEncoding))return this.quickOpenService.pick([{label:n.localize(36,null)}]);var r,s={label:n.localize(37,null)},c={label:n.localize(38,null)};return r=o instanceof l.UntitledEditorInput?i.TPromise.as(s):M(t)?this.quickOpenService.pick([c,s],{placeHolder:n.localize(39,null)}):i.TPromise.as(c),r.then(function(r){return r?i.TPromise.timeout(50).then(function(){var i=r===c;return e.configurationService.loadConfiguration().then(function(r){var s,c,u=r&&r.files&&r.files.encoding,l=Object.keys(w.SUPPORTED_ENCODINGS).sort(function(e,t){return e===u?-1:t===u?1:w.SUPPORTED_ENCODINGS[e].order-w.SUPPORTED_ENCODINGS[t].order}).filter(function(e){return!i||!w.SUPPORTED_ENCODINGS[e].encodeOnly}).map(function(e,t){return e===o.getEncoding()?s=t:w.SUPPORTED_ENCODINGS[e].alias===o.getEncoding()&&(c=t),{id:e,label:w.SUPPORTED_ENCODINGS[e].labelLong}});return e.quickOpenService.pick(l,{placeHolder:i?n.localize(40,null):n.localize(41,null),autoFocus:{autoFocusIndex:"number"==typeof s?s:"number"==typeof c?c:void 0}}).then(function(n){n&&(t=e.editorService.getActiveEditor(),o=D(t.input),o&&a.areFunctions(o.setEncoding,o.getEncoding)&&o.getEncoding()!==n.id&&o.setEncoding(n.id,i?d.EncodingMode.Decode:d.EncodingMode.Encode))})})}):void 0})},t.ID="workbench.action.editor.changeEncoding",t.LABEL=n.localize(34,null),t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,b.IQuickOpenService),__param(4,S.IConfigurationService)],t)}(u.Action);t.ChangeEncodingAction=q});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/stringEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/stringEditor","vs/base/common/types","vs/workbench/common/editor/textEditorModel","vs/workbench/common/editor/untitledEditorInput","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/events","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=function(e){function t(n,i,o,r,s,a,u,l,d){var h=this;e.call(this,t.ID,n,i,o,r,s,a,u,l,d),this.mapResourceToEditorViewState=Object.create(null),this.toUnbind.push(this.eventService.addListener(c.EventType.UNTITLED_FILE_DELETED,function(e){return h.onUntitledDeletedEvent(e)}))}return __extends(t,e),t.prototype.onUntitledDeletedEvent=function(e){delete this.mapResourceToEditorViewState[e.resource.toString()]},t.prototype.getTitle=function(){return this.input?this.input.getName():i.localize(0,null)},t.prototype.setInput=function(t,i){var a=this,c=this.getInput();e.prototype.setInput.call(this,t,i);var u=i&&i.forceOpen;if(!u&&t.matches(c)){var l=i;return l&&o.isFunction(l.apply)&&l.apply(this.getControl()),n.TPromise.as(null)}return c instanceof s.UntitledEditorInput&&(this.mapResourceToEditorViewState[c.getResource().toString()]=this.getControl().saveViewState()),this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof r.BaseTextEditorModel))return n.TPromise.wrapError("Invalid editor input. String editor requires a model instance of BaseTextEditorModel.");if(!a.getInput()||a.getInput()!==t)return null;var c=a.getControl(),u=e.textEditorModel;c.setModel(u);var l=!1,d=i;if(d&&o.isFunction(d.apply)&&(l=d.apply(c)),!l&&t instanceof s.UntitledEditorInput){var h=a.mapResourceToEditorViewState[t.getResource().toString()];h&&c.restoreViewState(h)}c.updateOptions(a.getCodeEditorOptions())})},t.prototype.getCodeEditorOptions=function(){var t=e.prototype.getCodeEditorOptions.call(this),n=this.getInput(),o=n instanceof s.UntitledEditorInput,r=!o;t.readOnly=r;var a,c=n&&n.getName();return a=r?c?i.localize(1,null,c):i.localize(2,null):c?i.localize(3,null,c):i.localize(4,null),t.ariaLabel=a,t},t.prototype.revealLastLine=function(){var e=this.getControl(),t=e.getModel();if(t){var n=t.getLineCount();e.revealLine(n)}},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.clearInput=function(){this.input instanceof s.UntitledEditorInput&&(this.mapResourceToEditorViewState[this.input.getResource().toString()]=this.getControl().saveViewState()),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.ID="workbench.editors.stringEditor",t=__decorate([__param(0,u.ITelemetryService),__param(1,f.IInstantiationService),__param(2,l.IWorkspaceContextService),__param(3,d.IStorageService),__param(4,m.IMessageService),__param(5,h.IConfigurationService),__param(6,p.IEventService),__param(7,v.IWorkbenchEditorService),__param(8,g.IModeService)],t)}(a.BaseTextEditor);t.StringEditor=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/textDiffEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/textDiffEditor","vs/base/common/actions","vs/base/common/errors","vs/base/common/types","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/editor","vs/workbench/common/editor/stringEditorInput","vs/workbench/common/editor/resourceEditorInput","vs/workbench/common/editor/diffEditorInput","vs/editor/contrib/diffNavigator/common/diffNavigator","vs/editor/browser/widget/diffEditorWidget","vs/workbench/common/editor/textDiffEditorModel","vs/workbench/services/editor/browser/editorService","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService","vs/platform/keybinding/common/keybindingService","vs/css!./media/textdiffeditor"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k){"use strict";var x=function(e){function t(n,i,o,r,s,a,c,u,l,d){e.call(this,t.ID,n,i,o,r,s,a,c,u,l),this.textDiffEditorVisible=d.createKey("textCompareEditorVisible",!1)}return __extends(t,e),t.prototype.getTitle=function(){return this.input?this.input.getName():i.localize(0,null)},t.prototype.createEditorControl=function(e){var t=this;this.nextDiffAction=new I(this,!0),this.previousDiffAction=new I(this,!1);var i=this.instantiationService.createInstance(m.DelegatingWorkbenchEditorService,this,function(e,i,o,r){if(s.isUndefinedOrNull(r)||r===!1||r===t.position){var a=t.getInput();if(i&&o&&a){if(i.matches(a.getModifiedInput()))return t.setInput(t.getInput(),o).then(function(){return!0});if(i.matches(a.getOriginalInput())){var u=t.getControl().getOriginalEditor();if(o instanceof c.TextEditorOptions)return o.apply(u),n.TPromise.as(!0)}}}return n.TPromise.as(!1)}),o=this.instantiationService.createChild({editorService:i});return o.createInstance(p.DiffEditorWidget,e.getHTMLElement(),this.getCodeEditorOptions())},t.prototype.setInput=function(t,i){var o=this,r=this.getInput();e.prototype.setInput.call(this,t,i);var a=i&&i.forceOpen;if(!a&&t.matches(r)){var u=i;return u&&s.isFunction(u.apply)&&u.apply(this.getControl()),n.TPromise.as(null)}return this.diffNavigator&&this.diffNavigator.dispose(),this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof f.TextDiffEditorModel)&&o.openAsBinary(t,i))return null;if(!o.getInput()||o.getInput()!==t)return null;var n=o.getControl();n.setModel(e.textDiffEditorModel);var r=!0;if(i instanceof c.TextDiffEditorOptions){var a=i;r=s.isUndefinedOrNull(a.autoRevealFirstChange)?r:a.autoRevealFirstChange}o.diffNavigator=new h.DiffNavigator(n,{alwaysRevealFirst:r}),o.diffNavigator.addListener(h.DiffNavigator.Events.UPDATED,function(){o.nextDiffAction.updateEnablement(),o.previousDiffAction.updateEnablement()}),i&&s.isFunction(i.apply)&&i.apply(n),n.updateOptions(o.getCodeEditorOptions())},function(e){return o.isFileBinaryError(e)&&o.openAsBinary(t,i)?null:n.TPromise.wrapError(e)})},t.prototype.openAsBinary=function(e,t){if(e instanceof d.DiffEditorInput){var n=e.originalInput,i=e.modifiedInput,o=new d.DiffEditorInput(e.getName(),e.getDescription(),n,i,!0);return this.editorService.openEditor(o,t,this.position).done(null,r.onUnexpectedError),!0}return!1},t.prototype.getCodeEditorOptions=function(){var t=e.prototype.getCodeEditorOptions.call(this),n=this.input;if(n&&s.isFunction(n.getModifiedInput)){var o=n.getModifiedInput(),r=o instanceof u.StringEditorInput||o instanceof l.ResourceEditorInput;t.readOnly=r;var a=void 0,c=n&&n.getName();a=r?c?i.localize(1,null,c):i.localize(2,null):c?i.localize(3,null,c):i.localize(4,null),t.ariaLabel=a}return t},t.prototype.isFileBinaryError=function(e){var t=this;if(s.isArray(e)){var n=e;return n.some(function(e){return t.isFileBinaryError(e)})}return e.fileOperationResult===v.FileOperationResult.FILE_IS_BINARY},t.prototype.clearInput=function(){this.diffNavigator&&this.diffNavigator.dispose(),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.prototype.setVisible=function(t,n){return this.textDiffEditorVisible.set(t),e.prototype.setVisible.call(this,t,n)},t.prototype.getDiffNavigator=function(){return this.diffNavigator},t.prototype.getActions=function(){return[this.previousDiffAction,this.nextDiffAction]},t.prototype.getSecondaryActions=function(){var t=this,r=e.prototype.getSecondaryActions.call(this),s=this.getControl(),a=s&&!s.renderSideBySide,c=i.localize(5,null),u=i.localize(6,null),l=new o.Action("toggle.diff.editorMode",a?u:c,null,!0,function(){return t.getControl().updateOptions({renderSideBySide:a}),a=!a,l.label=a?u:c,n.TPromise.as(!0)});return l.order=50,r.push.apply(r,[l]),r},t.prototype.getControl=function(){return e.prototype.getControl.call(this)},t.prototype.dispose=function(){this.diffNavigator&&this.diffNavigator.dispose(),e.prototype.dispose.call(this)},t.ID="workbench.editors.textDiffEditor",t=__decorate([__param(0,g.ITelemetryService),__param(1,E.IInstantiationService),__param(2,y.IWorkspaceContextService),__param(3,_.IStorageService),__param(4,w.IMessageService),__param(5,b.IConfigurationService),__param(6,S.IEventService),__param(7,C.IWorkbenchEditorService),__param(8,T.IModeService),__param(9,k.IKeybindingService)],t)}(a.BaseTextEditor);t.TextDiffEditor=x;var I=function(e){function t(n,o){e.call(this,o?t.ID_NEXT:t.ID_PREV),this.editor=n,this.next=o,this.label=this.next?i.localize(7,null):i.localize(8,null),this["class"]=this.next?"textdiff-editor-action next":"textdiff-editor-action previous",this.enabled=!1}return __extends(t,e),t.prototype.run=function(){return this.next?this.editor.getDiffNavigator().next():this.editor.getDiffNavigator().previous(),null},t.prototype.updateEnablement=function(){this.enabled=this.editor.getDiffNavigator().canNavigate()},t.ID_NEXT="workbench.action.compareEditor.nextChange",t.ID_PREV="workbench.action.compareEditor.previousChange",t}(o.Action)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/editor.contribution",["require","exports","vs/platform/platform","vs/nls!vs/workbench/browser/parts/editor/editor.contribution","vs/base/common/winjs.base","vs/platform/workspace/common/workspace","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/stringEditorInput","vs/workbench/browser/parts/editor/stringEditor","vs/workbench/common/editor/diffEditorInput","vs/workbench/common/editor/untitledEditorInput","vs/workbench/common/editor/resourceEditorInput","vs/platform/instantiation/common/instantiation","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybindingService","vs/workbench/browser/parts/editor/textDiffEditor","vs/workbench/services/editor/common/editorService","vs/workbench/browser/parts/editor/binaryDiffEditor","vs/workbench/browser/parts/editor/iframeEditor","vs/workbench/common/editor/iframeEditorInput","vs/workbench/browser/parts/editor/editorStatus","vs/workbench/common/actionRegistry","vs/workbench/browser/actionBarRegistry","vs/platform/actions/common/actions","vs/platform/instantiation/common/descriptors","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k){
"use strict";function x(e,t){var n=e.get(g.IWorkbenchEditorService),i=[n.getActiveEditor()].concat(n.getVisibleEditors()).filter(function(e){return e instanceof v.TextDiffEditor});i.length>0&&(t?i[0].getDiffNavigator().next():i[0].getDiffNavigator().previous())}n.Registry.as(a.Extensions.Editors).registerEditor(new a.EditorDescriptor(u.StringEditor.ID,i.localize(0,null),"vs/workbench/browser/parts/editor/stringEditor","StringEditor"),[new T.SyncDescriptor(c.StringEditorInput),new T.SyncDescriptor(d.UntitledEditorInput),new T.SyncDescriptor(h.ResourceEditorInput)]),n.Registry.as(a.Extensions.Editors).registerEditor(new a.EditorDescriptor(v.TextDiffEditor.ID,i.localize(1,null),"vs/workbench/browser/parts/editor/textDiffEditor","TextDiffEditor"),[new T.SyncDescriptor(l.DiffEditorInput)]),n.Registry.as(a.Extensions.Editors).registerEditor(new a.EditorDescriptor(y.BinaryResourceDiffEditor.ID,i.localize(2,null),"vs/workbench/browser/parts/editor/binaryDiffEditor","BinaryResourceDiffEditor"),[new T.SyncDescriptor(l.DiffEditorInput)]),n.Registry.as(a.Extensions.Editors).registerEditor(new a.EditorDescriptor(_.IFrameEditor.ID,i.localize(3,null),"vs/workbench/browser/parts/editor/iframeEditor","IFrameEditor"),[new T.SyncDescriptor(b.IFrameEditorInput)]);var I=n.Registry.as(s.Extensions.Statusbar);I.registerStatusbarItem(new s.StatusbarItemDescriptor(S.EditorStatus,s.StatusbarAlignment.RIGHT,100));var D=n.Registry.as(E.Extensions.WorkbenchActions);D.registerWorkbenchAction(new C.SyncActionDescriptor(S.ChangeModeAction,S.ChangeModeAction.ID,S.ChangeModeAction.LABEL,{primary:k.KeyMod.chord(k.KeyMod.CtrlCmd|k.KeyCode.KEY_K,k.KeyCode.KEY_M)})),D.registerWorkbenchAction(new C.SyncActionDescriptor(S.ChangeEOLAction,S.ChangeEOLAction.ID,S.ChangeEOLAction.LABEL)),D.registerWorkbenchAction(new C.SyncActionDescriptor(S.ChangeEncodingAction,S.ChangeEncodingAction.ID,S.ChangeEncodingAction.LABEL));var A=function(e){function t(t,n){e.call(this,"workbench.files.action.viewSourceFromEditor",i.localize(4,null),"iframe-editor-action view-source"),this.editorService=t,this.contextService=n}return __extends(t,e),t.prototype.run=function(e){var t=this.input,n=!(!e||!e.ctrlKey&&!e.metaKey);return this.editorService.openEditor({resource:t.getResource()},n)},t=__decorate([__param(0,g.IWorkbenchEditorService),__param(1,r.IWorkspaceContextService)],t)}(a.EditorInputAction);t.ViewSourceEditorInputAction=A;var L=function(e){function t(t){e.call(this,"workbench.files.action.refreshIFrameEditor",i.localize(5,null),"iframe-editor-action refresh"),this.editorService=t}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditor();return t instanceof _.IFrameEditor&&(t.reload(!0),t.focus()),o.TPromise.as(null)},t=__decorate([__param(0,g.IWorkbenchEditorService)],t)}(a.EditorInputAction);t.RefreshIFrameEditorInputAction=L;var O=n.Registry.as(w.Extensions.Actionbar),M=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof b.IFrameEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(L),this.instantiationService.createInstance(A)]},t=__decorate([__param(0,p.IInstantiationService)],t)}(a.EditorInputActionContributor);O.registerActionBarContributor(w.Scope.EDITOR,M),f.KeybindingsRegistry.registerCommandDesc({id:"workbench.action.compareEditor.nextChange",weight:f.KeybindingsRegistry.WEIGHT.workbenchContrib(),context:m.KbExpr.has("textCompareEditorVisible"),primary:k.KeyMod.chord(k.KeyMod.CtrlCmd|k.KeyCode.KEY_K,k.KeyMod.CtrlCmd|k.KeyCode.RightArrow),handler:function(e){return x(e,!0)}}),f.KeybindingsRegistry.registerCommandDesc({id:"workbench.action.compareEditor.previousChange",weight:f.KeybindingsRegistry.WEIGHT.workbenchContrib(),context:m.KbExpr.has("textCompareEditorVisible"),primary:k.KeyMod.chord(k.KeyMod.CtrlCmd|k.KeyCode.KEY_K,k.KeyMod.CtrlCmd|k.KeyCode.LeftArrow),handler:function(e){return x(e,!1)}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/editorPart",["require","exports","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/timer","vs/base/common/events","vs/base/browser/builder","vs/nls!vs/workbench/browser/parts/editor/editorPart","vs/base/common/strings","vs/base/common/assert","vs/base/common/arrays","vs/base/common/types","vs/base/common/errors","vs/workbench/common/memento","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/part","vs/workbench/common/events","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/browser/parts/editor/sideBySideEditorControl","vs/workbench/services/progress/browser/progressService","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/css!./media/editorpart","vs/workbench/browser/parts/editor/editor.contribution"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w){"use strict";var C="editorpart.editorState",T=function(e){function t(t,n,i,o,r,s){e.call(this,s),this.messageService=t,this.eventService=n,this.telemetryService=i,this.storageService=o,this.partService=r,this.visibleInputs=[],this.visibleInputListeners=[],this.visibleEditors=[],this.editorOpenToken=[];for(var a=0;a<E.POSITIONS.length;a++)this.editorOpenToken[a]=0;this.editorSetInputErrorCounter=[];for(var a=0;a<E.POSITIONS.length;a++)this.editorSetInputErrorCounter[a]=0;this.visibleEditorListeners=this.createPositionArray(!0),this.instantiatedEditors=this.createPositionArray(!0),this.mapEditorToEditorContainers=this.createPositionArray(!1),this.mapActionsToEditors=this.createPositionArray(!1),this.mapEditorLoadingPromiseToEditor=this.createPositionArray(!1),this.mapEditorCreationPromiseToEditor=this.createPositionArray(!1),this.pendingEditorInputsToClose=[],this.pendingEditorInputCloseTimeout=null}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.createPositionArray=function(e){for(var t=[],n=0;n<E.POSITIONS.length;n++)t[n]=e?[]:{};return t},t.prototype.getActiveEditorInput=function(){var e=this.sideBySideControl.getActiveEditor();return e?e.input:null},t.prototype.getActiveEditor=function(){return this.sideBySideControl.getActiveEditor()},t.prototype.getVisibleEditors=function(){return this.visibleEditors?this.visibleEditors.filter(function(e){return!!e}):[]},t.prototype.setEditors=function(e,t){var n=this;return this.closeEditors().then(function(){return n.restoreEditorState(e,t)})},t.prototype.openEditor=function(e,t,a,l){var d=this;e||(e=null),t||(t=null);var h=this.findPosition(a,l);if(null===h)return n.TPromise.as(null);if(Object.keys(this.mapEditorLoadingPromiseToEditor[h]).length>0||Object.keys(this.mapEditorCreationPromiseToEditor[h]).length>0)return n.TPromise.as(null);if(this.sideBySideControl.isDragging())return n.TPromise.as(null);var p=new v.EditorEvent(this.visibleEditors[h],this.visibleEditors[h]&&this.visibleEditors[h].getId(),e,t,h);if(this.emit(v.EventType.EDITOR_INPUT_OPENING,p),p.isPrevented())return n.TPromise.as(null);this.editorOpenToken[h]++;var f=this.editorOpenToken[h];if(e&&h!==E.Position.LEFT&&this.telemetryService.publicLog("workbenchSideEditorOpened",{position:h}),e&&h!==E.Position.LEFT&&(t=this.findSideOptions(e,t,h)),this.visibleInputs[h]=e,this.visibleInputListeners[h]&&(this.visibleInputListeners[h](),this.visibleInputListeners[h]=null),e&&(this.visibleInputListeners[h]=e.addListener(r.EventType.DISPOSE,function(){e===d.visibleInputs[h]&&(d.pendingEditorInputsToClose.push(e),d.startDelayedCloseEditorsFromInputDispose())})),null===e)return this.visibleEditors[h]?(this.editorSetInputErrorCounter[h]=0,this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(null,null,null,null,h)),this.hideEditor(this.visibleEditors[h],h,!0).then(function(){d.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(null,null,null,null,h));var e=d.sideBySideControl.getActiveEditor();return e?d.openEditor(e.input,null,e.position).then(function(){return d.onEditorFocusChanged(),e}):n.TPromise.as(null)})):n.TPromise.as(null);var m=i.Registry.as(g.Extensions.Editors).getEditor(e);u.ok(m,c.format("Can not find a registered editor for the input {0}",e));var y,_=n.TPromise.timeout(this.partService.isCreated()?800:3200).then(function(){f===d.editorOpenToken[h]&&(d.sideBySideControl.getProgressBar(h).infinite().getContainer().show(),d.sideBySideControl.setLoading(h,e))});if(this.visibleEditors[h]){if(m.describes(this.visibleEditors[h])){var b=this.mapEditorCreationPromiseToEditor[h][m.getId()];return b||(b=n.TPromise.as(null)),b.then(function(){return d.setInput(d.visibleEditors[h],e,t,h,_)})}y=this.hideEditor(this.visibleEditors[h],h,!1)}else y=n.TPromise.as(null);return y.then(function(){var i,r=o.start(o.Topic.WORKBENCH,c.format("Creating Editor: {0}",m.getName())),a=d.mapEditorToEditorContainers[h][m.getId()];a||(a=s.$().div({"class":"editor-container",id:m.getId()},function(e){i=e}),d.mapEditorToEditorContainers[h][m.getId()]=a);var u,p=d.getEditorFromCache(m,h);if(null===p){var g=d.mapEditorLoadingPromiseToEditor[h][m.getId()];if(g)u=g;else{var y=!1;u=d.createEditor(m,i.getHTMLElement(),h).then(function(e){return y=!0,d.instantiatedEditors[h].push(e),delete d.mapEditorLoadingPromiseToEditor[h][m.getId()],e},function(e){return y=!0,delete d.mapEditorLoadingPromiseToEditor[h][m.getId()],n.TPromise.wrapError(e)}),y||(d.mapEditorLoadingPromiseToEditor[h][m.getId()]=u)}}else u=n.TPromise.as(p);return u.then(function(o){if(f!==d.editorOpenToken[h])return r.stop(),_.cancel(),null;d.visibleEditors[h]=o,d.visibleEditorListeners[h].push(d.eventService.addEmitter(d.visibleEditors[h],d.visibleEditors[h].getId()));var s;if(i){var c=!1;s=o.create(i).then(function(){c=!0,delete d.mapEditorCreationPromiseToEditor[h][m.getId()]},function(e){return c=!0,delete d.mapEditorCreationPromiseToEditor[h][m.getId()],n.TPromise.wrapError(e)}),c||(d.mapEditorCreationPromiseToEditor[h][m.getId()]=s)}else{var u=d.mapEditorCreationPromiseToEditor[h][m.getId()];s=u?u:n.TPromise.as(null)}return s.then(function(){return d.visibleEditors[h]&&o.getId()===d.visibleEditors[h].getId()?(d.sideBySideControl.show(o,a,h,t&&t.preserveFocus,l),o.setVisible(!0,h).then(function(){return d.sideBySideControl.layout(h),d.emit(v.EventType.EDITOR_OPENED,new v.EditorEvent(o,o.getId(),e,t,h)),r.stop(),d.setInput(o,e,t,h,_)})):(r.stop(),_.cancel(),null)},function(e){return d.showError(e)})})})},t.prototype.startDelayedCloseEditorsFromInputDispose=function(){var e=this;null===this.pendingEditorInputCloseTimeout&&(this.pendingEditorInputCloseTimeout=setTimeout(function(){e.closeEditors(!1,e.pendingEditorInputsToClose).done(null,h.onUnexpectedError),e.pendingEditorInputCloseTimeout=null,e.pendingEditorInputsToClose=[]},0))},t.prototype.closeEditors=function(e,t){for(var i=[],o=this.getVisibleEditors().reverse(),r=0;r<o.length;r++){var s=o[r];e&&this.getActiveEditor()===s||t&&!t.some(function(e){return e===s.input})||i.push(this.openEditor(null,null,s.position))}return n.TPromise.join(i).then(function(){})},t.prototype.findPosition=function(e,t){if(t&&d.isNumber(e))return e;var n=this.getVisibleEditors(),i=this.getActiveEditor();if(0===n.length||!i)return E.Position.LEFT;if(d.isUndefinedOrNull(e)||e===!1){var o=this.sideBySideControl.getActivePosition();return o||E.Position.LEFT}if(e===!0){switch(i.position){case E.Position.LEFT:return E.Position.CENTER;case E.Position.CENTER:return E.Position.RIGHT;case E.Position.RIGHT:return null}return null}return e===E.Position.RIGHT&&1===n.length?E.Position.CENTER:e},t.prototype.findSideOptions=function(e,t,n){if(this.visibleEditors[n]&&e.matches(this.visibleEditors[n].input))return t;if(t instanceof y.TextEditorOptions&&t.hasOptionsDefined())return t;for(var i=null,o=this.getVisibleEditors(),r=0;r<o.length;r++){var s=o[r];if(s instanceof _.BaseTextEditor&&e.matches(s.input)){var a=s.getControl();i=a.saveViewState();break}}if(i){var c=null;return t instanceof y.TextEditorOptions?(c=t,c.viewState(i),c):(c=new y.TextEditorOptions,c.viewState(i),t&&(c.forceOpen=t.forceOpen,c.preserveFocus=t.preserveFocus),c)}return t},t.prototype.rochade=function(e,t){if(d.isUndefinedOrNull(t)){var n=e;switch(n){case b.Rochade.CENTER_TO_LEFT:this.rochade(E.Position.CENTER,E.Position.LEFT);break;case b.Rochade.RIGHT_TO_CENTER:this.rochade(E.Position.RIGHT,E.Position.CENTER);break;case b.Rochade.CENTER_AND_RIGHT_TO_LEFT:this.rochade(E.Position.CENTER,E.Position.LEFT),this.rochade(E.Position.RIGHT,E.Position.CENTER)}}else{var i=e,o=t;this.doRochade(this.visibleInputs,i,o,null),this.doRochade(this.visibleInputListeners,i,o,null),this.doRochade(this.visibleEditors,i,o,null),this.doRochade(this.editorOpenToken,i,o,null),this.doRochade(this.mapEditorLoadingPromiseToEditor,i,o,{}),this.doRochade(this.mapEditorCreationPromiseToEditor,i,o,{}),this.doRochade(this.visibleEditorListeners,i,o,[]),this.doRochade(this.instantiatedEditors,i,o,[]),this.doRochade(this.mapEditorToEditorContainers,i,o,{}),this.doRochade(this.mapActionsToEditors,i,o,{})}},t.prototype.doRochade=function(e,t,n,i){e[n]=e[t],e[t]=i},t.prototype.moveEditor=function(e,t){if(this.visibleEditors[e]&&this.visibleEditors[t]&&e!==t){this.sideBySideControl.move(e,t),l.move(this.visibleInputs,e,t),l.move(this.visibleInputListeners,e,t),l.move(this.visibleEditors,e,t),l.move(this.visibleEditorListeners,e,t),l.move(this.editorOpenToken,e,t),l.move(this.mapEditorLoadingPromiseToEditor,e,t),l.move(this.mapEditorCreationPromiseToEditor,e,t),l.move(this.instantiatedEditors,e,t),l.move(this.mapEditorToEditorContainers,e,t),l.move(this.mapActionsToEditors,e,t),this.updateEditorTitleArea();var n=this.sideBySideControl.getActiveEditor();this.openEditor(n.input,null,n.position).done(null,h.onUnexpectedError)}},t.prototype.arrangeEditors=function(e){this.sideBySideControl.arrangeEditors(e)},t.prototype.setInput=function(e,t,n,i,r){var s=this,a=e.getInput(),u=e.getOptions(),l=!a||!a.matches(t)||n&&n.forceOpen;l?this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(e,e.getId(),t,n,i)):u&&u.matches(n)||this.emit(v.EventType.EDITOR_OPTIONS_CHANGING,new v.EditorEvent(e,e.getId(),t,n,i));var d=o.start(o.Topic.WORKBENCH,c.format("Set Editor Input: {0}",t.getName()));return e.setInput(t,n).then(function(){return s.editorSetInputErrorCounter[i]=0,r.cancel(),s.visibleInputs[i]!==t?(d.stop(),s.visibleInputs[i]&&s.visibleInputs[i].matches(t)&&(s.updateEditorTitleArea(),s.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(e,e.getId(),s.visibleInputs[i],n,i))),e):(n&&n.preserveFocus?n&&n.forceActive&&s.sideBySideControl.setActive(e):e.focus(),s.sideBySideControl.getProgressBar(i).done().getContainer().hide(),l&&s.updateEditorTitleArea(),l&&s.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(e,e.getId(),t,n,i)),d.stop(),e)},function(o){s.editorSetInputErrorCounter[i]++,r.cancel(),s.onSetInputError(o,e,t,n,i),!a&&s.visibleInputs[i]===t&&t?s.openEditor(null,null,i).done(null,h.onUnexpectedError):s.editorSetInputErrorCounter[i]>1?s.openEditor(null,null,i).done(null,h.onUnexpectedError):a&&s.openEditor(a,null,i).done(null,h.onUnexpectedError)})},t.prototype.getEditorFromCache=function(e,t){for(var n=0;n<this.instantiatedEditors[t].length;n++)if(e.describes(this.instantiatedEditors[t][n]))return this.instantiatedEditors[t][n];return null},t.prototype.createEditor=function(e,t,n){var i={progressService:new S.WorkbenchProgressService(this.eventService,this.sideBySideControl.getProgressBar(n),e.getId(),!0)},o=this.instantiationService.createChild(i);return o.createInstance(e)},t.prototype.hideEditor=function(e,t,n){var i=this,o=this.mapEditorToEditorContainers[t][e.getId()],r=this.sideBySideControl.hide(e,o,t,n);for(this.sideBySideControl.getProgressBar(t).stop().getContainer().hide();this.visibleEditorListeners[t].length;)this.visibleEditorListeners[t].pop()();return e.clearInput(),e.setVisible(!1).then(function(){return i.visibleEditors[t]=null,i.rochade(r),i.sideBySideControl.clearTitle(t),i.emit(v.EventType.EDITOR_CLOSED,new v.EditorEvent(e,e.getId(),null,null,t)),e})},t.prototype.updateEditorTitleArea=function(){for(var e=this.sideBySideControl.getActivePosition(),t=0;t<E.POSITIONS.length;t++){var n=this.visibleEditors[t],i=n?n.input:null;i&&n&&this.doUpdateEditorTitleArea(n,i,t,e===t)}},t.prototype.doUpdateEditorTitleArea=function(e,t,n,i){var o=[],r=[];if(i){var s=this.mapActionsToEditors[n][e.getId()];s||(s=this.getEditorActionsForContext(e,e,n),this.mapActionsToEditors[n][e.getId()]=s),o.push.apply(o,s.primary),r.push.apply(r,s.secondary);var a=this.getEditorActionsForContext({input:t,editor:e,position:n},e,n);o.push.apply(o,a.primary),r.push.apply(r,a.secondary)}this.sideBySideControl.setTitle(n,t,f.prepareActions(o),f.prepareActions(r),i)},t.prototype.getEditorActionsForContext=function(e,t,n){var o=[],r=[];e instanceof g.BaseEditor&&(o.push.apply(o,e.getActions()),r.push.apply(r,e.getSecondaryActions()));var s=i.Registry.as(f.Extensions.Actionbar);return o.push.apply(o,s.getActionBarActionsForContext(f.Scope.EDITOR,e)),r.push.apply(r,s.getSecondaryActionBarActionsForContext(f.Scope.EDITOR,e)),{primary:o,secondary:r}},t.prototype.createContentArea=function(e){var t=this,n=s.$(e).div().addClass("content");return this.sideBySideControl=this.instantiationService.createInstance(b.SideBySideEditorControl,n),this.toUnbind.push(this.sideBySideControl.addListener(b.EventType.EDITOR_FOCUS_CHANGED,function(){t.onEditorFocusChanged()})),this.memento=this.getMemento(this.storageService,p.Scope.WORKSPACE),n},t.prototype.restoreEditorState=function(e,t){var o,r,s,a=this;if(e&&e.length)e.length>3&&(e=e.slice(e.length-3)),r=e,s=3===r.length?[.33,.33,.34]:2===r.length?[.5,.5]:[1];else if(this.memento[C]){var c=this.memento[C];if(c&&c.editors){var u=i.Registry.as(g.Extensions.Editors),l=[];s=c.widthRatio;for(var p=0;p<c.editors.length;p++){var f=c.editors[p],m=u.getEditorInputFactory(f.inputId);if(m&&d.isString(f.inputValue)){var v=m.deserialize(this.instantiationService,f.inputValue);v&&(f.hasFocus&&(o=v),l.push(v))}}l.length&&(r=l)}}if(r&&r.length){!o&&r.length&&(o=r[0]),s&&s.length!==r.length&&(s=2===r.length?[.5,.5]:null);var _=[];return r.forEach(function(e,n){var i,r=e!==o;t&&t[n]?(i=t[n],i.preserveFocus=r):i=y.EditorOptions.create({preserveFocus:r}),_.push(a.openEditor(e,i,n,s))}),n.TPromise.join(_).then(function(e){return a.getVisibleEditors().length!==r.length&&a.closeEditors().done(null,h.onUnexpectedError),a.sideBySideControl.layout(a.dimension),e})}return n.TPromise.as([])},t.prototype.activateEditor=function(e){e&&this.sideBySideControl.setActive(e)},t.prototype.onEditorFocusChanged=function(){var e=this.sideBySideControl.getActiveEditor();e&&(this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(e,e.getId(),e.input,null,e.position)),this.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(e,e.getId(),e.input,null,e.position))),this.updateEditorTitleArea()},t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.dimension=n[1],this.sideBySideControl.layout(this.dimension),n},t.prototype.onSetInputError=function(e,t,n,i,o){if(this.partService.isCreated()&&!h.isPromiseCanceledError(e)){var r=a.localize(0,null,n.getName(),h.toErrorMessage(e)),s=void 0;s=e&&e.actions&&e.actions.length?h.create(r,{actions:e.actions}):r,this.showError(s)}this.sideBySideControl.getProgressBar(o).done().getContainer().hide(),this.emit(v.EventType.EDITOR_SET_INPUT_ERROR,new v.EditorEvent(t,t.getId(),n,i,o))},t.prototype.showError=function(e){return this.messageService.show(w.Severity.Error,d.isString(e)?new Error(e):e)},t.prototype.shutdown=function(){this.saveEditorState();for(var t=0;t<this.instantiatedEditors.length;t++)for(var n=0;n<this.instantiatedEditors[t].length;n++)this.instantiatedEditors[t][n].shutdown();e.prototype.shutdown.call(this)},t.prototype.saveEditorState=function(){var e=i.Registry.as(g.Extensions.Editors),t=this.getVisibleEditors(),n=this.getActiveEditor(),o=this.sideBySideControl.getWidthRatios(),r={editors:[],widthRatio:o};this.memento[C]=r;for(var s=0;s<t.length;s++){var a=t[s],c=a.input;if(c){var u=e.getEditorInputFactory(c.getId());if(u){var l=u.serialize(c);r.editors.push({inputId:c.getId(),inputValue:l,hasFocus:n===a})}}}},t.prototype.dispose=function(){var t=this;this.mapEditorToEditorContainers=null,this.mapActionsToEditors=null,this.editorOpenToken=[];for(var n=0;n<E.POSITIONS.length;n++)this.editorOpenToken[n]=0;this.sideBySideControl.dispose();for(var i=0;i<this.visibleEditorListeners.length;i++)for(;this.visibleEditorListeners[i].length;)this.visibleEditorListeners[i].pop()();for(var o=0;o<this.visibleInputListeners.length;o++){var r=this.visibleInputListeners[o];r&&r(),this.visibleInputListeners=[]}this.visibleEditors.forEach(function(e){e&&e.dispose()});for(var s=0;s<this.instantiatedEditors.length;s++)for(var a=0;a<this.instantiatedEditors[s].length;a++)this.visibleEditors.some(function(e){return e===t.instantiatedEditors[s][a]})||this.instantiatedEditors[s][a].dispose();this.visibleEditors=null,this.visibleInputs=null,e.prototype.dispose.call(this)},t}(m.Part);t.EditorPart=T});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/darwin/cli.contribution",["require","exports","vs/nls!vs/workbench/electron-browser/darwin/cli.contribution","path","fs","os","child_process","vs/base/node/pfs","vs/base/common/async","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/actions","vs/workbench/common/actionRegistry","vs/workbench/common/contributions","vs/platform/platform","vs/platform/actions/common/actions","vs/workbench/services/workspace/common/contextService","vs/platform/message/common/message","vs/platform/editor/common/editor","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";function b(e,t){return void 0===t&&(t=null),function(n){return n.code===e?u.TPromise.as(t):u.TPromise.wrapError(n)}}function S(e){return a.readFile(e,"utf8").then(null,b("ENOENT",""))}var E=l["default"].parse(e.toUrl("")).fsPath,w=i.resolve(E,"..","bin","code"),C=o.existsSync(w),T=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.contextService=i,this.messageService=o,this.editorService=r}return __extends(t,e),Object.defineProperty(t.prototype,"applicationName",{get:function(){return this.contextService.getConfiguration().env.applicationName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return"/usr/local/bin/"+this.applicationName},enumerable:!0,configurable:!0}),t.prototype.run=function(){var e=this;return this.checkLegacy().then(function(t){if(t.length>0){var i=t[0],o=i.file,r=i.lineNumber,s=l["default"].create("file",null,o),c=e.contextService.getConfiguration().env,h=n.localize(1,null,c.darwinBundleIdentifier,o,r),p={resource:s,mime:"text/x-shellscript"},f=[new d.Action("inlineEdit",n.localize(2,null,o),"",!0,function(){return e.editorService.openEditor(p).then(function(){var t=n.localize(3,null,e.applicationName,o),i=[new d.Action("cancel",n.localize(4,null)),new d.Action("continue",n.localize(5,null),"",!0,function(){return e.run()})];e.messageService.show(g.Severity.Info,{message:t,actions:i})})})];return e.messageService.show(g.Severity.Warning,{message:h,actions:f}),u.TPromise.as(null)}return e.isInstalled().then(function(t){if(!C||t)return u.TPromise.as(null);var n=function(){return a.unlink(e.target).then(null,b("ENOENT")).then(function(){return a.symlink(w,e.target)})};return n().then(null,function(t){return"EACCES"===t.code||"ENOENT"===t.code?e.createBinFolder().then(function(){return n()}):u.TPromise.wrapError(t)})}).then(function(){return e.messageService.show(g.Severity.Info,n.localize(6,null,e.applicationName))})})},t.prototype.isInstalled=function(){var e=this;return a.lstat(this.target).then(function(e){return e.isSymbolicLink()}).then(function(){return a.readlink(e.target)}).then(function(e){return e===w}).then(null,b("ENOENT",!1))},t.prototype.createBinFolder=function(){var e=this;return new u.TPromise(function(t,i){var o=n.localize(7,null),r=[new d.Action("cancel2",n.localize(8,null),"",!0,function(){return i(new Error(n.localize(9,null))),null}),new d.Action("ok",n.localize(10,null),"",!0,function(){var e='osascript -e "do shell script \\"mkdir -p /usr/local/bin && chown \\" & (do shell script (\\"whoami\\")) & \\" /usr/local/bin\\" with administrator privileges"';return c.nfcall(s.exec,e,{}).then(null,function(e){return u.TPromise.wrapError(new Error(n.localize(11,null)))}).done(t,i),null})];e.messageService.show(g.Severity.Info,{message:o,actions:r})})},t.prototype.checkLegacy=function(){var e=this,t=[i.join(r.homedir(),".bash_profile"),i.join(r.homedir(),".bashrc"),i.join(r.homedir(),".zshrc")];return u.TPromise.join(t.map(function(e){return S(e)})).then(function(n){return n.reduce(function(n,i,o){var r=t[o],s=e.contextService.getConfiguration().env,a=i.split(/\r?\n/);return a.some(function(e,t){return e.indexOf(s.darwinBundleIdentifier)>-1&&!/^\s*#/.test(e)?(n.push({file:r,lineNumber:t+1}),!0):!1}),n},[])})},t.ID="workbench.action.installCommandLine",t.LABEL=n.localize(0,null),t=__decorate([__param(2,v.IWorkspaceContextService),__param(3,g.IMessageService),__param(4,y.IEditorService)],t)}(d.Action),k=function(e){function t(t,n,i,o){e.call(this,t,n),this.contextService=i,this.messageService=o}return __extends(t,e),Object.defineProperty(t.prototype,"applicationName",{get:function(){return this.contextService.getConfiguration().env.applicationName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return"/usr/local/bin/"+this.applicationName},enumerable:!0,configurable:!0}),t.prototype.run=function(){var e=this;return a.unlink(this.target).then(null,b("ENOENT")).then(function(){return e.messageService.show(g.Severity.Info,n.localize(13,null,e.applicationName))})},t.ID="workbench.action.uninstallCommandLine",t.LABEL=n.localize(12,null),t=__decorate([__param(2,v.IWorkspaceContextService),__param(3,g.IMessageService)],t)}(d.Action),x=function(){function e(e,t){var i=e.createInstance(T,T.ID,T.LABEL);i.checkLegacy().done(function(e){if(e.length>0){var o=n.localize(14,null,i.applicationName),r=new d.Action("changeNow",n.localize(15,null),"",!0,function(){return i.run()}),s=new d.Action("later",n.localize(16,null),"",!0,function(){return t.show(g.Severity.Info,n.localize(17,null,i.label)),null}),a=[s,r];t.show(g.Severity.Info,{message:o,actions:a})}})}return e.prototype.getId=function(){return"darwin.cli"},e=__decorate([__param(0,_.IInstantiationService),__param(1,g.IMessageService)],e)}();if(C&&"darwin"===process.platform){var I=n.localize(18,null),D=f.Registry.as(h.Extensions.WorkbenchActions);D.registerWorkbenchAction(new m.SyncActionDescriptor(T,T.ID,T.LABEL),I),D.registerWorkbenchAction(new m.SyncActionDescriptor(k,k.ID,k.LABEL),I);var A=f.Registry.as(p.Extensions.Workbench);A.registerWorkbenchContribution(x)}});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/integration",["require","exports","vs/nls!vs/workbench/electron-browser/integration","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/arrays","vs/base/common/severity","vs/base/browser/ui/actionbar/actionbar","vs/base/common/actions","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/message/common/message","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/contextview/browser/contextView","vs/platform/keybinding/common/keybindingService","vs/workbench/services/workspace/common/contextService","vs/workbench/services/window/electron-browser/windowService","vs/platform/configuration/common/configuration","vs/workbench/electron-browser/window","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S=b.remote.getCurrentWindow(),E=[new c.Action("undo",n.localize(0,null),null,!0,function(){return document.execCommand("undo")&&i.TPromise.as(!0)}),new c.Action("redo",n.localize(1,null),null,!0,function(){return document.execCommand("redo")&&i.TPromise.as(!0)}),new a.Separator,new c.Action("editor.action.clipboardCutAction",n.localize(2,null),null,!0,function(){return document.execCommand("cut")&&i.TPromise.as(!0)}),new c.Action("editor.action.clipboardCopyAction",n.localize(3,null),null,!0,function(){return document.execCommand("copy")&&i.TPromise.as(!0)}),new c.Action("editor.action.clipboardPasteAction",n.localize(4,null),null,!0,function(){return document.execCommand("paste")&&i.TPromise.as(!0)}),new a.Separator,new c.Action("editor.action.selectAll",n.localize(5,null),null,!0,function(){return document.execCommand("selectAll")&&i.TPromise.as(!0)})],w=function(){function e(e,t,n,i,o,r,s,a,c,u){this.instantiationService=e,this.windowService=t,this.partService=n,this.contextService=i,this.telemetryService=o,this.configurationService=r,this.keybindingService=s,this.storageService=a,this.messageService=c,this.contextMenuService=u}return e.prototype.integrate=function(e){var t=this,n=this.instantiationService.createInstance(_.ElectronWindow,S,e);this.windowService.registerWindow(n),b.ipcRenderer.on("vscode:runAction",function(e,n){t.keybindingService.executeCommand(n,{from:"menu"}).done(void 0,function(e){return t.messageService.show(s["default"].Error,e)})}),b.ipcRenderer.on("vscode:optionsChange",function(e,n){var i=JSON.parse(n);for(var o in i)if(i.hasOwnProperty(o)){var r=i[o];t.contextService.updateOptions(o,r)}}),b.ipcRenderer.on("vscode:resolveKeybindings",function(e,n){var i=[];try{i=JSON.parse(n)}catch(r){}t.resolveKeybindings(i).done(function(e){e.length&&b.ipcRenderer.send("vscode:keybindingsResolved",JSON.stringify(e))},function(){return o.onUnexpectedError})}),b.ipcRenderer.on("vscode:telemetry",function(e,n){var i=n.eventName,o=n.data;t.telemetryService.publicLog(i,o)}),b.ipcRenderer.on("vscode:reportError",function(e,t){if(t){var n=JSON.parse(t);n.mainProcess=!0,o.onUnexpectedError(n)}}),this.partService.joinCreation().then(function(){b.ipcRenderer.send("vscode:workbenchLoaded",t.windowService.getWindowId())}),b.ipcRenderer.on("vscode:changeTheme",function(e,n){t.storageService.store("workbench.theme",n,l.StorageScope.GLOBAL)}),b.ipcRenderer.on("vscode:showInfoMessage",function(e,n){t.messageService.show(s["default"].Info,n)});var r;this.configurationService.addListener(y.ConfigurationServiceEventTypes.UPDATED,function(e){var t=e.config,n=0;if(t.window&&"number"==typeof t.window.zoomLevel){if(n=t.window.zoomLevel,r===n)return;r=n}b.webFrame.getZoomLevel()!==n&&b.webFrame.setZoomLevel(n)}),window.document.addEventListener("contextmenu",function(e){if(e.target instanceof HTMLElement){var n=e.target;
!n.nodeName||"input"!==n.nodeName.toLowerCase()&&"textarea"!==n.nodeName.toLowerCase()||(e.preventDefault(),e.stopPropagation(),t.contextMenuService.showContextMenu({getAnchor:function(){return n},getActions:function(){return i.TPromise.as(E)},getKeyBinding:function(e){var n=t.keybindingService.lookupKeybindings(e.id);return n.length>0?n[0]:null}}))}})},e.prototype.resolveKeybindings=function(e){var t=this;return this.partService.joinCreation().then(function(){return r.coalesce(e.map(function(e){for(var n=t.keybindingService.lookupKeybindings(e),i=0;i<n.length;i++){var o=n[i],r=t.keybindingService.getElectronAcceleratorFor(o);if(r)return{id:e,binding:o.value}}return null}))})},e=__decorate([__param(0,h.IInstantiationService),__param(1,g.IWindowService),__param(2,u.IPartService),__param(3,v.IWorkspaceContextService),__param(4,p.ITelemetryService),__param(5,y.IConfigurationService),__param(6,m.IKeybindingService),__param(7,l.IStorageService),__param(8,d.IMessageService),__param(9,f.IContextMenuService)],e)}();t.ElectronIntegration=w});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/update",["require","exports","vs/nls!vs/workbench/electron-browser/update","vs/base/common/severity","vs/base/common/winjs.base","vs/base/common/actions","electron","vs/base/common/platform","vs/platform/message/common/message","vs/workbench/services/workspace/common/contextService","vs/platform/request/common/request"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=new r.Action("update.applyUpdate",n.localize(0,null),null,!0,function(){return s.ipcRenderer.send("vscode:update-apply"),o.TPromise.as(!0)}),h=new r.Action("update.later",n.localize(1,null),null,!0,function(){return o.TPromise.as(!0)});t.ShowReleaseNotesAction=function(e,t){return void 0===t&&(t=!1),new r.Action("update.showReleaseNotes",n.localize(2,null),null,!0,function(){return s.shell.openExternal(e),o.TPromise.as(t)})};var p=function(){function e(e,c,u){var l=this;this.contextService=e,this.messageService=c,this.requestService=u;var p=this.contextService.getConfiguration().env;s.ipcRenderer.on("vscode:update-downloaded",function(e,o){l.messageService.show(i["default"].Info,{message:n.localize(3,null,p.appName),actions:[t.ShowReleaseNotesAction(p.releaseNotesUrl),h,d]})}),s.ipcRenderer.on("vscode:update-not-available",function(){l.messageService.show(i["default"].Info,n.localize(4,null))});var f=p.updateFeedUrl;a.isLinux&&f&&this.requestService.makeRequest({url:f}).done(function(e){200===e.status&&l.messageService.show(i["default"].Info,{message:n.localize(5,null,p.appName),actions:[new r.Action("pleaseUpdate",n.localize(6,null),"",!0,function(){return s.shell.openExternal(p.productDownloadUrl),o.TPromise.as(!0)}),new r.Action("releaseNotes",n.localize(7,null),"",!0,function(){return s.shell.openExternal(p.releaseNotesUrl),o.TPromise.as(!1)})]})})}return e=__decorate([__param(0,u.IWorkspaceContextService),__param(1,c.IMessageService),__param(2,l.IRequestService)],e)}();t.Update=p});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorContribution",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugEditorContribution","vs/base/common/winjs.base","vs/base/common/async","vs/base/common/lifecycle","vs/base/common/platform","vs/base/common/actions","vs/base/common/keyCodes","vs/editor/common/editorCommon","vs/workbench/parts/debug/browser/debugHover","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/common/debug","vs/workbench/services/workspace/common/contextService","vs/platform/instantiation/common/instantiation","vs/platform/contextview/browser/contextView"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=300,g=function(){function e(e,t,n,i,r){var s=this;this.editor=e,this.debugService=t,this.contextService=n,this.contextMenuService=i,this.instantiationService=r,this.breakpointHintDecoration=[],this.hoverWidget=new l.DebugHoverWidget(this.editor,this.debugService,this.instantiationService),this.toDispose=[this.hoverWidget],this.showHoverScheduler=new o.RunOnceScheduler(function(){return s.showHover(s.hoverRange,s.hoveringOver,!1)},v),this.hideHoverScheduler=new o.RunOnceScheduler(function(){return s.hoverWidget.hide()},v),this.registerListeners()}return e.getDebugEditorContribution=function(e){return e.getContribution(h.EDITOR_CONTRIBUTION_ID)},e.prototype.getContextMenuActions=function(e,t,o){var r=this,s=[];return e?(s.push(this.instantiationService.createInstance(d.RemoveBreakpointAction,d.RemoveBreakpointAction.ID,d.RemoveBreakpointAction.LABEL)),s.push(this.instantiationService.createInstance(d.EditConditionalBreakpointAction,d.EditConditionalBreakpointAction.ID,d.EditConditionalBreakpointAction.LABEL,this.editor,o)),s.push(this.instantiationService.createInstance(d.ToggleEnablementAction,d.ToggleEnablementAction.ID,d.ToggleEnablementAction.LABEL))):(s.push(new a.Action("addBreakpoint",n.localize(0,null),null,!0,function(){return r.debugService.toggleBreakpoint({uri:t,lineNumber:o})})),s.push(this.instantiationService.createInstance(d.AddConditionalBreakpointAction,d.AddConditionalBreakpointAction.ID,d.AddConditionalBreakpointAction.LABEL,this.editor,o))),i.TPromise.as(s)},e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.editor.addListener2(u.EventType.MouseDown,function(t){if(t.target.type===u.MouseTargetType.GUTTER_GLYPH_MARGIN&&!t.target.detail&&e.debugService.canSetBreakpointsIn(e.editor.getModel())){var n=t.target.position.lineNumber,i=e.editor.getModel().getAssociatedResource();if(t.event.rightButton||s.isMacintosh&&t.event.leftButton&&t.event.ctrlKey){var o={x:t.event.posx+1,y:t.event.posy},r=e.debugService.getModel().getBreakpoints().filter(function(e){return e.lineNumber===n&&e.source.uri.toString()===i.toString()}).pop();e.contextMenuService.showContextMenu({getAnchor:function(){return o},getActions:function(){return e.getContextMenuActions(r,i,n)},getActionsContext:function(){return r}})}else e.debugService.toggleBreakpoint({uri:i,lineNumber:n})}})),this.toDispose.push(this.editor.addListener2(u.EventType.MouseMove,function(t){var n=-1;t.target.type===u.MouseTargetType.GUTTER_GLYPH_MARGIN&&e.debugService.canSetBreakpointsIn(e.editor.getModel())&&(t.target.detail||(n=t.target.position.lineNumber)),e.ensureBreakpointHintDecoration(n)})),this.toDispose.push(this.editor.addListener2(u.EventType.MouseLeave,function(t){e.ensureBreakpointHintDecoration(-1)})),this.toDispose.push(this.debugService.addListener2(h.ServiceEvents.STATE_CHANGED,function(){return e.onDebugStateUpdate()})),this.toDispose.push(this.editor.addListener2(u.EventType.MouseDown,function(t){return e.onEditorMouseDown(t)})),this.toDispose.push(this.editor.addListener2(u.EventType.MouseMove,function(t){return e.onEditorMouseMove(t)})),this.toDispose.push(this.editor.addListener2(u.EventType.MouseLeave,function(t){return e.hoverWidget.hide()})),this.toDispose.push(this.editor.addListener2(u.EventType.KeyDown,function(t){return e.onKeyDown(t)})),this.toDispose.push(this.editor.addListener2(u.EventType.ModelChanged,function(){return e.hideHoverWidget()})),this.toDispose.push(this.editor.addListener2("scroll",function(){return e.hideHoverWidget}))},e.prototype.getId=function(){return h.EDITOR_CONTRIBUTION_ID},e.prototype.showHover=function(e,t,n){return this.hoverWidget.showAt(e,t,n)},e.prototype.ensureBreakpointHintDecoration=function(t){var n=[];-1!==t&&n.push({options:e.BREAKPOINT_HELPER_DECORATION,range:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1}}),this.breakpointHintDecoration=this.editor.deltaDecorations(this.breakpointHintDecoration,n)},e.prototype.onDebugStateUpdate=function(){this.debugService.getState()!==h.State.Stopped&&this.hideHoverWidget(),this.contextService.updateOptions("editor",{hover:this.debugService.getState()!==h.State.Stopped})},e.prototype.hideHoverWidget=function(){!this.hideHoverScheduler.isScheduled()&&this.hoverWidget.isVisible&&this.hideHoverScheduler.schedule(),this.showHoverScheduler.cancel(),this.hoveringOver=null},e.prototype.onEditorMouseDown=function(e){e.target.type===u.MouseTargetType.CONTENT_WIDGET&&e.target.detail===l.DebugHoverWidget.ID||this.hideHoverWidget()},e.prototype.onEditorMouseMove=function(e){if(this.debugService.getState()===h.State.Stopped){var t=e.target.type,n=s.isMacintosh?"metaKey":"ctrlKey";if(t!==u.MouseTargetType.CONTENT_WIDGET||e.target.detail!==l.DebugHoverWidget.ID||e.event[n])if(t===u.MouseTargetType.CONTENT_TEXT){var i=this.editor.getModel().getWordAtPosition(e.target.range.getStartPosition());i&&this.hoveringOver!==i.word&&(this.hoverRange=e.target.range,this.hoveringOver=i.word,this.showHoverScheduler.schedule())}else this.hideHoverWidget()}},e.prototype.onKeyDown=function(e){var t=s.isMacintosh?c.KeyCode.Meta:c.KeyCode.Ctrl;e.keyCode!==t&&this.hideHoverWidget()},e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose)},e.BREAKPOINT_HELPER_DECORATION={glyphMarginClassName:"debug-breakpoint-hint-glyph",stickiness:u.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e=__decorate([__param(1,h.IDebugService),__param(2,p.IWorkspaceContextService),__param(3,m.IContextMenuService),__param(4,f.IInstantiationService)],e)}();t.DebugEditorContribution=g});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/node/debugConfigurationManager",["require","exports","path","vs/nls!vs/workbench/parts/debug/node/debugConfigurationManager","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/uri","vs/base/common/network","vs/base/common/paths","vs/platform/extensions/common/extensionsRegistry","vs/platform/platform","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/configuration/common/configuration","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/parts/lib/node/systemVariables","vs/workbench/parts/debug/node/debugAdapter","vs/workbench/services/workspace/common/contextService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";t.debuggersExtPoint=u.ExtensionsRegistry.registerExtensionPoint("debuggers",{description:i.localize(0,null),type:"array",defaultSnippets:[{body:[{type:"",extensions:[]}]}],items:{type:"object",defaultSnippets:[{body:{type:"",program:"",runtime:"",enableBreakpointsFor:{languageIds:[""]}}}],properties:{type:{description:i.localize(1,null),type:"string"},label:{description:i.localize(2,null),type:"string"},enableBreakpointsFor:{description:i.localize(3,null),type:"object",properties:{languageIds:{description:i.localize(4,null),type:"array",items:{type:"string"}}}},program:{description:i.localize(5,null),type:"string"},args:{description:i.localize(6,null),type:"array"},runtime:{description:i.localize(7,null),type:"string"},runtimeArgs:{description:i.localize(8,null),type:"array"},initialConfigurations:{description:i.localize(9,null),type:"array"},configurationAttributes:{description:i.localize(10,null),type:"object"},windows:{description:i.localize(11,null),type:"object",properties:{runtime:{description:i.localize(12,null),type:"string"}}},osx:{description:i.localize(13,null),type:"object",properties:{runtime:{description:i.localize(14,null),type:"string"}}},linux:{description:i.localize(15,null),type:"object",properties:{runtime:{description:i.localize(16,null),type:"string"}}}}}}),t.schemaId="vscode://schemas/launch";var b={id:t.schemaId,type:"object",title:i.localize(17,null),required:["version","configurations"],properties:{version:{type:"string",description:i.localize(18,null),"default":"0.2.0"},configurations:{type:"array",description:i.localize(19,null),items:{oneOf:[]}}}},S=l.Registry.as(d.Extensions.JSONContribution);S.registerSchema(t.schemaId,b),S.addSchemaFileAssociation("/.vscode/launch.json",t.schemaId);var E=function(){function e(e,t,n,i,o,r,s){this.contextService=t,this.fileService=n,this.telemetryService=i,this.editorService=o,this.configurationService=r,this.quickOpenService=s,this.systemVariables=this.contextService.getWorkspace()?new m.SystemVariables(this.editorService,this.contextService):null,this.setConfiguration(e),this.adapters=[],this.registerListeners(),this.allModeIdsForBreakpoints={}}return e.prototype.registerListeners=function(){var e=this;t.debuggersExtPoint.setHandler(function(t){t.forEach(function(t){t.value.forEach(function(n){var o=new v.Adapter(n,e.systemVariables,t.description.extensionFolderPath),r=e.adapters.filter(function(e){return e.type===o.type})[0];n.type&&"string"==typeof n.type||t.collector.error(i.localize(20,null)),r?Object.keys(o).forEach(function(e){o[e]&&("enableBreakpointsFor"===e?Object.keys(o.enableBreakpointsFor).forEach(function(e){return r.enableBreakpointsFor[e]=!0}):r[e]&&"type"!==e?(r[e]=o[e],t.collector.error(i.localize(21,null,o.type,e))):r[e]=o[e])}):e.adapters.push(o),o.enableBreakpointsFor&&o.enableBreakpointsFor.languageIds.forEach(function(t){e.allModeIdsForBreakpoints[t]=!0})})}),e.adapters.forEach(function(e){var t=e.getSchemaAttributes();t&&(n=b.properties.configurations.items.oneOf).push.apply(n,t);var n})})},e.prototype.getConfiguration=function(){return this.configuration},e.prototype.getConfigurationName=function(){return this.configuration?this.configuration.name:null},e.prototype.getAdapter=function(){var e=this;return this.adapters.filter(function(t){return t.type===e.configuration.type}).pop()},e.prototype.setConfiguration=function(e){var t=this;return this.loadLaunchConfig().then(function(n){if(!n||!n.configurations)return void(t.configuration=null);var i=e?n.configurations.filter(function(t){return t.name===e}):[n.configurations[0]];t.configuration=1===i.length?r.deepClone(i[0]):null,t.configuration&&(t.systemVariables&&Object.keys(t.configuration).forEach(function(e){t.configuration[e]=t.systemVariables.resolveAny(t.configuration[e])}),t.configuration.debugServer=n.debugServer)})},e.prototype.openConfigFile=function(e){var t=this,n=s["default"].file(c.join(this.contextService.getWorkspace().resource.fsPath,"/.vscode/launch.json"));return this.fileService.resolveContent(n).then(function(e){return!0},function(e){return t.getInitialConfigFileContent().then(function(e){return e?t.fileService.updateContent(n,e).then(function(){return!0}):!1})}).then(function(i){return i?(t.telemetryService.publicLog("debugConfigure"),t.editorService.openEditor({resource:n,options:{forceOpen:!0}},e).then(function(){return!0})):!1},function(e){throw new Error(i.localize(22,null,e))})},e.prototype.getInitialConfigFileContent=function(){var e=this;return this.quickOpenService.pick(this.adapters,{placeHolder:i.localize(23,null)}).then(function(t){return t?e.massageInitialConfigurations(t).then(function(){return JSON.stringify({version:"0.2.0",configurations:t.initialConfigurations?t.initialConfigurations:[]},null,"	")}):null})},e.prototype.massageInitialConfigurations=function(e){if(!e||!e.initialConfigurations||"node"!==e.type)return o.TPromise.as(void 0);var t=s["default"].file(c.join(this.contextService.getWorkspace().resource.fsPath,"/package.json"));return this.fileService.resolveContent(t).then(function(e){try{var t=JSON.parse(e.value);if(t.main)return t.main;if(t.scripts&&"string"==typeof t.scripts.start)return t.scripts.start.split(" ").pop()}catch(n){}return null},function(e){return null}).then(function(t){e.initialConfigurations.forEach(function(e){t&&e.program&&(n.isAbsolute(t)||(t=c.join("${workspaceRoot}",t)),e.program=t)})})},e.prototype.canSetBreakpointsIn=function(e){if(e.getAssociatedResource().scheme===a.Schemas.inMemory)return!1;var t=e?e.getMode():null,n=t?t.getId():null;return!!this.allModeIdsForBreakpoints[n]},e.prototype.loadLaunchConfig=function(){return this.configurationService.loadConfiguration("launch")},e=__decorate([__param(1,g.IWorkspaceContextService),__param(2,p.IFileService),__param(3,f.ITelemetryService),__param(4,y.IWorkbenchEditorService),__param(5,h.IConfigurationService),__param(6,_.IQuickOpenService)],e)}();t.ConfigurationManager=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debugService",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debugService","vs/base/common/lifecycle","vs/base/common/mime","vs/base/common/eventEmitter","vs/base/common/uri","vs/base/common/actions","vs/base/common/arrays","vs/base/common/types","vs/base/common/errors","vs/base/common/severity","vs/base/common/winjs.base","vs/base/browser/ui/aria/aria","vs/base/node/aiAdapter","vs/platform/keybinding/common/keybindingService","vs/platform/markers/common/markers","vs/platform/lifecycle/common/lifecycle","vs/platform/extensions/common/extensions","vs/platform/instantiation/common/instantiation","vs/platform/files/common/files","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/storage/common/storage","vs/workbench/common/editor","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/node/rawDebugSession","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugEditorInputs","vs/workbench/parts/debug/common/debugViewModel","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/browser/breakpointWidget","vs/workbench/parts/debug/node/debugConfigurationManager","vs/workbench/parts/debug/common/debugSource","vs/workbench/parts/tasks/common/taskService","vs/workbench/parts/tasks/common/taskSystem","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/panel/common/panelService","vs/workbench/services/part/common/partService","vs/workbench/parts/files/common/files","vs/workbench/services/workspace/common/contextService","vs/workbench/services/editor/common/editorService","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/thread/electron-browser/threadService","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F,W,H,V,K,B,U,z,j){"use strict";var q="debug.breakpoint",G="debug.breakpointactivated",Y="debug.functionbreakpoint",$="debug.exceptionbreakpoint",X="debug.watchexpressions",Q="debug.selectedconfigname",Z=function(e){function t(t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){e.call(this),this.storageService=t,this.editorService=n,this.textFileService=i,this.viewletService=o,this.panelService=r,this.fileService=s,this.messageService=a,this.partService=c,this.windowService=u,this.telemetryService=l,this.contextService=d,this.lifecycleService=f,this.instantiationService=m,this.extensionService=v,this.markerService=g,this.serviceId=k.IDebugService,this.toDispose=[],this.toDisposeOnSessionEnd=[],this.debugStringEditorInputs=[],this.session=null,this.state=k.State.Inactive,this.taskService=this.instantiationService.getInstance(R.ITaskService),this.contextService.getWorkspace()||(this.state=k.State.Disabled),this.configurationManager=this.instantiationService.createInstance(M.ConfigurationManager,this.storageService.get(Q,C.StorageScope.WORKSPACE,"null")),this.inDebugMode=h.createKey(k.CONTEXT_IN_DEBUG_MODE,!1),this.model=new I.Model(this.loadBreakpoints(),this.storageService.getBoolean(G,C.StorageScope.WORKSPACE,!0),this.loadFunctionBreakpoints(),this.loadExceptionBreakpoints(),this.loadWatchExpressions()),this.viewModel=new A.ViewModel,this.registerListeners(p,f)}return __extends(t,e),t.prototype.registerListeners=function(e,t){var n=this;this.toDispose.push(e.addListener2(b.EventType.FILE_CHANGES,function(e){return n.onFileChanges(e)})),this.taskService&&(this.toDispose.push(this.taskService.addListener2(R.TaskServiceEvents.Active,function(e){n.lastTaskEvent=e})),this.toDispose.push(this.taskService.addListener2(R.TaskServiceEvents.Inactive,function(e){e.type===R.TaskType.SingleRun&&(n.lastTaskEvent=null)})),this.toDispose.push(this.taskService.addListener2(R.TaskServiceEvents.Terminated,function(e){n.lastTaskEvent=null}))),t.onShutdown(this.store,this),t.onShutdown(this.dispose,this),this.windowService.onBroadcast(this.onBroadcast,this)},t.prototype.onBroadcast=function(e){if(e.channel===z.PLUGIN_ATTACH_BROADCAST_CHANNEL)return void this.rawAttach(e.payload.port);var t=this.getActiveSession();if(t&&"extensionHost"===t.getType()&&e.channel===z.PLUGIN_LOG_BROADCAST_CHANNEL){var n=e.payload,i="warn"===n.severity?d["default"].Warning:"error"===n.severity?d["default"].Error:d["default"].Info,o=[];try{var r=JSON.parse(n.arguments);o.push.apply(o,Object.getOwnPropertyNames(r).map(function(e){return r[e]}))}catch(s){o.push(n.arguments)}for(var a=[],c=0;c<o.length;c++){var l=o[c];if("undefined"==typeof l)a.push("undefined");else if(null===l)a.push("null");else if(u.isObject(l)||Array.isArray(l))a.length&&(this.logToRepl(a.join(" "),i),a=[]),this.logToRepl(l,i);else if("string"==typeof l){for(var h="",p=0,f=l.length;f>p;p++)"%"!==l[p]||"s"!==l[p+1]&&"i"!==l[p+1]&&"d"!==l[p+1]?h+=l[p]:(c++,h+=u.isUndefinedOrNull(o[c])?"":o[c],p++);a.push(h)}else a.push(l)}a.length&&this.logToRepl(a.join(" "),i)}},t.prototype.registerSessionListeners=function(){var e=this;this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.INITIALIZED,function(t){p.status(n.localize(0,null)),e.sendAllBreakpoints().then(function(){e.session.capabilities.supportsConfigurationDoneRequest&&e.session.configurationDone().done(null,l.onUnexpectedError)})})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.STOPPED,function(t){e.setStateAndEmit(k.State.Stopped);var i=t.body.threadId;e.getThreadData(i).done(function(){var o=e.model.getThreads()[i];e.model.rawUpdate({threadId:i,stoppedDetails:t.body,allThreadsStopped:t.body.allThreadsStopped}),o.getCallStack(e).then(function(i){if(e.windowService.getWindow().focus(),i.length>0){var o=c.first(i,function(e){return e.source&&e.source.available},i[0]);return e.setFocusedStackFrameAndEvaluate(o),p.alert(n.localize(1,null,t.body.reason,o.source?o.source.name:"",o.lineNumber)),e.openOrRevealEditor(o.source,o.lineNumber,!1,!1)}e.setFocusedStackFrameAndEvaluate(null)})},l.onUnexpectedError)})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.CONTINUED,function(){p.status(n.localize(2,null)),e.model.continueThreads(),e.setFocusedStackFrameAndEvaluate(null),e.setStateAndEmit(e.configurationManager.getConfiguration().noDebug?k.State.RunningNoDebug:k.State.Running)})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.THREAD,function(t){"started"===t.body.reason?e.session.threads().done(function(n){var i=n.body.threads.filter(function(e){return e.id===t.body.threadId}).pop();i&&e.model.rawUpdate({threadId:i.id,thread:i})},l.onUnexpectedError):"exited"===t.body.reason&&e.model.clearThreads(!0,t.body.threadId)})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.DEBUGEE_TERMINATED,function(t){p.status(n.localize(3,null)),e.session&&e.session.getId()===t.sessionId&&(t.body&&"boolean"==typeof t.body.restart&&t.body.restart?e.restartSession().done(null,function(t){return e.messageService.show(d["default"].Error,t.message)}):e.session.disconnect().done(null,l.onUnexpectedError))})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.OUTPUT,function(t){t.body&&"telemetry"===t.body.category?e.telemetryAdapter&&e.telemetryAdapter.log(t.body.output,t.body.data):t.body&&"string"==typeof t.body.output&&t.body.output.length>0&&e.onOutput(t)})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.BREAKPOINT,function(t){var n=t.body&&t.body.breakpoint?t.body.breakpoint.id:void 0,i=e.model.getBreakpoints().filter(function(e){return e.idFromAdapter===n}).pop();if(i)e.model.updateBreakpoints((r={},r[i.getId()]=t.body.breakpoint,r));else{var o=e.model.getFunctionBreakpoints().filter(function(e){return e.idFromAdapter===n}).pop();o&&e.model.updateFunctionBreakpoints((s={},s[o.getId()]=t.body.breakpoint,s))}var r,s})),this.toDisposeOnSessionEnd.push(this.session.addListener2(k.SessionEvents.SERVER_EXIT,function(t){"extensionHost"===e.session.getType()&&e.state===k.State.RunningNoDebug&&j.ipcRenderer.send("vscode:closeExtensionHostWindow",e.contextService.getWorkspace().resource.fsPath),e.session&&e.session.getId()===t.sessionId&&e.onSessionEnd()}))},t.prototype.onOutput=function(e){var t="stderr"===e.body.category?d["default"].Error:"console"===e.body.category?d["default"].Warning:d["default"].Info;this.appendReplOutput(e.body.output,t)},t.prototype.getThreadData=function(e){var t=this;return this.model.getThreads()[e]?h.TPromise.as(void 0):this.session.threads().then(function(i){var o=i.body.threads.filter(function(t){return t.id===e}).pop();if(!o)throw new Error(n.localize(4,null,e));t.model.rawUpdate({threadId:o.id,thread:o})})},t.prototype.loadBreakpoints=function(){try{return JSON.parse(this.storageService.get(q,C.StorageScope.WORKSPACE,"[]")).map(function(e){return new I.Breakpoint(new P.Source(e.source.raw?e.source.raw:{path:s["default"].parse(e.source.uri).fsPath,name:e.source.name}),e.desiredLineNumber||e.lineNumber,e.enabled,e.condition)})}catch(e){return[]}},t.prototype.loadFunctionBreakpoints=function(){try{return JSON.parse(this.storageService.get(Y,C.StorageScope.WORKSPACE,"[]")).map(function(e){return new I.FunctionBreakpoint(e.name,e.enabled)})}catch(e){return[]}},t.prototype.loadExceptionBreakpoints=function(){var e=null;try{e=JSON.parse(this.storageService.get($,C.StorageScope.WORKSPACE,"[]")).map(function(e){return new I.ExceptionBreakpoint(e.filter||e.name,e.label,e.enabled)})}catch(t){e=[]}return e},t.prototype.loadWatchExpressions=function(){try{return JSON.parse(this.storageService.get(X,C.StorageScope.WORKSPACE,"[]")).map(function(e){return new I.Expression(e.name,!1,e.id)})}catch(e){return[]}},t.prototype.getState=function(){return this.state},t.prototype.setStateAndEmit=function(e){this.state=e,this.emit(k.ServiceEvents.STATE_CHANGED)},Object.defineProperty(t.prototype,"enabled",{get:function(){return!!this.contextService.getWorkspace()},enumerable:!0,configurable:!0}),t.prototype.setFocusedStackFrameAndEvaluate=function(e){this.viewModel.setFocusedStackFrame(e),e?this.model.evaluateWatchExpressions(this.session,e):this.model.clearWatchExpressionValues()},t.prototype.setBreakpointsForModel=function(e,t){this.model.removeBreakpoints(this.model.getBreakpoints().filter(function(t){return t.source.uri.toString()===e.toString()})),this.model.addBreakpoints(t)},t.prototype.toggleBreakpoint=function(e){var t=this.model.getBreakpoints().filter(function(t){return t.lineNumber===e.lineNumber&&t.source.uri.toString()===e.uri.toString()}).pop();return t?this.model.removeBreakpoints([t]):this.model.addBreakpoints([e]),this.sendBreakpoints(e.uri)},t.prototype.enableOrDisableAllBreakpoints=function(e){return this.model.enableOrDisableAllBreakpoints(e),this.sendAllBreakpoints()},t.prototype.toggleEnablement=function(e){if(this.model.toggleEnablement(e),e instanceof I.Breakpoint){var t=e;return this.sendBreakpoints(t.source.uri)}return e instanceof I.FunctionBreakpoint?this.sendFunctionBreakpoints():this.sendExceptionBreakpoints()},t.prototype.removeAllBreakpoints=function(){var e=this,t=c.distinct(this.model.getBreakpoints(),function(e){return e.source.uri.toString()}).map(function(e){return e.source.uri});return this.model.removeBreakpoints(this.model.getBreakpoints()),h.TPromise.join(t.map(function(t){return e.sendBreakpoints(t)}))},t.prototype.toggleBreakpointsActivated=function(){return this.model.toggleBreakpointsActivated(),this.sendAllBreakpoints()},t.prototype.editBreakpoint=function(e,t){return O.BreakpointWidget.INSTANCE&&O.BreakpointWidget.INSTANCE.dispose(),this.instantiationService.createInstance(O.BreakpointWidget,e,t),O.BreakpointWidget.INSTANCE.show({lineNumber:t,column:1},2),h.TPromise.as(null)},t.prototype.addFunctionBreakpoint=function(){this.model.addFunctionBreakpoint("")},t.prototype.renameFunctionBreakpoint=function(e,t){return this.model.updateFunctionBreakpoints((n={},n[e]={name:t},n)),this.sendFunctionBreakpoints();var n},t.prototype.removeFunctionBreakpoints=function(e){return this.model.removeFunctionBreakpoints(e),this.sendFunctionBreakpoints()},t.prototype.addReplExpression=function(e){return this.telemetryService.publicLog("debugService/addReplExpression"),this.model.addReplExpression(this.session,this.viewModel.getFocusedStackFrame(),e)},t.prototype.logToRepl=function(e,t){this.model.logToRepl(e,t)},t.prototype.appendReplOutput=function(e,t){this.model.appendReplOutput(e,t)},t.prototype.clearReplExpressions=function(){this.model.clearReplExpressions()},t.prototype.addWatchExpression=function(e){return this.model.addWatchExpression(this.session,this.viewModel.getFocusedStackFrame(),e)},t.prototype.renameWatchExpression=function(e,t){return this.model.renameWatchExpression(this.session,this.viewModel.getFocusedStackFrame(),e,t)},t.prototype.clearWatchExpressions=function(e){this.model.clearWatchExpressions(e)},t.prototype.createSession=function(e,t){var i=this;return void 0===t&&(t=!this.partService.isSideBarHidden()),this.clearReplExpressions(),this.textFileService.saveAll().then(function(){return i.extensionService.onReady()}).then(function(){return i.configurationManager.setConfiguration(i.configurationManager.getConfigurationName())}).then(function(){var o=i.configurationManager.getConfiguration();return o?(o.noDebug=e,i.configurationManager.getAdapter()?i.runPreLaunchTask(o.preLaunchTask).then(function(e){var r=o.preLaunchTask?i.markerService.getStatistics().errors:0,s=e&&void 0!==e.exitCode&&0!==e.exitCode;return 0!==r||s?void i.messageService.show(d["default"].Error,{message:r>1?n.localize(8,null,o.preLaunchTask):1===r?n.localize(9,null,o.preLaunchTask):n.localize(10,null,o.preLaunchTask,e.exitCode),actions:[E.CloseAction,new a.Action("debug.continue",n.localize(11,null),null,!0,function(){return i.messageService.hideAll(),i.doCreateSession(o,t)})]}):i.doCreateSession(o,t)},function(e){if(e.code!==N.TaskErrors.NotConfigured)throw e;i.messageService.show(e.severity,{message:e.message,actions:[E.CloseAction,i.taskService.configureAction()]
})}):(i.emit(k.ServiceEvents.TYPE_NOT_SUPPORTED,o.type),o.type?h.TPromise.wrapError(new Error(n.localize(6,null,o.type))):h.TPromise.wrapError(l.create(n.localize(7,null),{actions:[E.CloseAction,i.instantiationService.createInstance(L.ConfigureAction,L.ConfigureAction.ID,L.ConfigureAction.LABEL)]})))):i.configurationManager.openConfigFile(!1).then(function(e){e&&i.messageService.show(d["default"].Info,n.localize(5,null))})})},t.prototype.doCreateSession=function(e,t){var i=this,o=this.configurationManager.getAdapter().aiKey,r=Object.create(null);return this.telemetryService.getTelemetryInfo().then(function(e){r["common.vscodemachineid"]=e.machineId,r["common.vscodesessionid"]=e.sessionId},l.onUnexpectedError),this.telemetryAdapter=new f.AIAdapter(o,this.configurationManager.getAdapter().type,null,r),this.session=new x.RawDebugSession(this.messageService,this.telemetryService,e.debugServer,this.configurationManager.getAdapter(),this.telemetryAdapter),this.registerSessionListeners(),this.session.initialize({adapterID:e.type,pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0}).then(function(t){return i.session?(i.setStateAndEmit(k.State.Initializing),i.model.setExceptionBreakpoints(i.session.capabilities.exceptionBreakpointFilters),"attach"===e.request?i.session.attach(e):i.session.launch(e)):h.TPromise.wrapError(new Error(n.localize(12,null)))}).then(function(n){t&&(i.viewletService.openViewlet(k.VIEWLET_ID),i.revealRepl(!1).done(void 0,l.onUnexpectedError)),i.partService.addClass("debugging"),i.contextService.updateOptions("editor",{glyphMargin:!0}),i.inDebugMode.set(!0),i.telemetryService.publicLog("debugSessionStart",{type:e.type,breakpointCount:i.model.getBreakpoints().length,exceptionBreakpoints:i.model.getExceptionBreakpoints(),watchExpressionsCount:i.model.getWatchExpressions().length})}).then(void 0,function(t){i.telemetryService.publicLog("debugMisconfiguration",{type:e?e.type:void 0}),i.session&&i.session.disconnect();var n=i.instantiationService.createInstance(L.ConfigureAction,L.ConfigureAction.ID,L.ConfigureAction.LABEL),o=t.actions&&t.actions.length?t.actions.concat([n]):[E.CloseAction,n];return h.TPromise.wrapError(l.create(t.message,{actions:o}))})},t.prototype.runPreLaunchTask=function(e){var t=this;return e?this.taskService.tasks().then(function(i){var o=i.filter(function(t){return t.name===e});if(1!==o.length)return h.TPromise.wrapError(l.create(n.localize(13,null,e),{actions:[E.CloseAction,t.taskService.configureAction(),t.instantiationService.createInstance(L.ConfigureAction,L.ConfigureAction.ID,L.ConfigureAction.LABEL)]}));if(t.lastTaskEvent&&t.lastTaskEvent.taskName===e)return h.TPromise.as(null);if(t.lastTaskEvent)return h.TPromise.wrapError(l.create(n.localize(14,null,t.lastTaskEvent.taskName,e)));var r=t.taskService.run(o[0].id).then(function(e){return t.lastTaskEvent=null,e},function(e){t.lastTaskEvent=null});return o[0].isWatching?new h.TPromise(function(e,n){return t.taskService.addOneTimeListener(R.TaskServiceEvents.Inactive,function(){return e(null)})}):r}):h.TPromise.as(null)},t.prototype.rawAttach=function(e){if(this.session){if(!this.session.isAttach)return this.session.attach({port:e});this.session.disconnect().done(null,l.onUnexpectedError)}var t=this.configurationManager.getConfiguration();return this.doCreateSession({type:t.type,request:"attach",port:e,sourceMaps:t.sourceMaps,outDir:t.outDir,debugServer:t.debugServer},!1)},t.prototype.restartSession=function(){var e=this;return this.session?this.session.disconnect(!0).then(function(){return new h.TPromise(function(t,n){setTimeout(function(){e.createSession(!1,!1).then(function(){return t(null)},function(e){return n(e)})},300)})}):this.createSession(!1,!1)},t.prototype.getActiveSession=function(){return this.session},t.prototype.onSessionEnd=function(){try{this.debugStringEditorInputs=i.disposeAll(this.debugStringEditorInputs)}catch(e){}if(this.session){var t=this.model.getBreakpoints().length>0;this.session.dispose(),this.telemetryService.publicLog("debugSessionStop",{type:this.session.getType(),success:this.session.emittedStopped||!t,sessionLengthInSeconds:this.session.getLengthInSeconds(),breakpointCount:this.model.getBreakpoints().length,watchExpressionsCount:this.model.getWatchExpressions().length})}this.session=null,this.toDisposeOnSessionEnd=i.disposeAll(this.toDisposeOnSessionEnd),this.partService.removeClass("debugging"),this.editorService.focusEditor(),this.model.clearThreads(!0),this.setFocusedStackFrameAndEvaluate(null),this.setStateAndEmit(k.State.Inactive);var n={};this.model.getBreakpoints().forEach(function(e){delete e.source.raw.sourceReference,n[e.getId()]={line:e.lineNumber,verified:!1}}),this.model.updateBreakpoints(n),this.telemetryAdapter&&(this.telemetryAdapter.dispose(),this.telemetryAdapter=null),this.inDebugMode.reset()},t.prototype.getModel=function(){return this.model},t.prototype.getViewModel=function(){return this.viewModel},t.prototype.openOrRevealEditor=function(e,t,n,i){for(var r=this,s=this.editorService.getVisibleEditors(),a=0;a<s.length;a++){var c=T.asFileEditorInput(s[a].input);if(c&&c.getResource().toString()===e.uri.toString()||s[a].input instanceof D.DebugStringEditorInput&&s[a].input.getResource().toString()===e.uri.toString()){var u=s[a].getControl();return u?(u.revealLineInCenterIfOutsideViewport(t),u.setSelection({startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1}),this.editorService.openEditor(s[a].input,T.TextEditorOptions.create({preserveFocus:n,forceActive:!0}),s[a].position)):h.TPromise.as(null)}}return e.inMemory?0!==e.reference&&this.session?this.session.source({sourceReference:e.reference}).then(function(s){var a=r.getDebugStringEditorInput(e,s.body.content,o.guessMimeTypes(e.name)[0]);return r.editorService.openEditor(a,T.TextEditorOptions.create({selection:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1},preserveFocus:n}),i)}):this.sourceIsUnavailable(e,i):this.fileService.resolveFile(e.uri).then(function(){return r.editorService.openEditor({resource:e.uri,options:{selection:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1},preserveFocus:n}},i)},function(t){return r.sourceIsUnavailable(e,i)})},t.prototype.sourceIsUnavailable=function(e,t){this.model.sourceIsUnavailable(e);var i=this.getDebugStringEditorInput(e,n.localize(15,null,e.uri.fsPath),"text/plain");return this.editorService.openEditor(i,T.TextEditorOptions.create({preserveFocus:!0}),t)},t.prototype.revealRepl=function(e){var t=this;return void 0===e&&(e=!0),this.panelService.openPanel(k.REPL_ID,e).then(function(e){var n=t.model.getReplElements();return n.length>0?e.reveal(n[n.length-1]):void 0})},t.prototype.canSetBreakpointsIn=function(e){return this.configurationManager.canSetBreakpointsIn(e)},t.prototype.getConfigurationName=function(){return this.configurationManager.getConfigurationName()},t.prototype.setConfiguration=function(e){return this.configurationManager.setConfiguration(e)},t.prototype.openConfigFile=function(e){return this.configurationManager.openConfigFile(e)},t.prototype.loadLaunchConfig=function(){return this.configurationManager.loadLaunchConfig()},t.prototype.getDebugStringEditorInput=function(e,t,n){var i=this.debugStringEditorInputs.filter(function(t){return t.getResource().toString()===e.uri.toString()});if(0===i.length){var o=this.instantiationService.createInstance(D.DebugStringEditorInput,e.name,e.uri,e.origin,t,n,void 0);return this.debugStringEditorInputs.push(o),o}return i[0]},t.prototype.sendAllBreakpoints=function(){var e=this;return h.TPromise.join(c.distinct(this.model.getBreakpoints(),function(e){return e.source.uri.toString()}).map(function(t){return e.sendBreakpoints(t.source.uri)})).then(function(){return e.sendFunctionBreakpoints()}).then(function(){return e.sendExceptionBreakpoints()})},t.prototype.sendBreakpoints=function(e){var t=this;if(!this.session||!this.session.readyForBreakpoints)return h.TPromise.as(null);var n=c.distinct(this.model.getBreakpoints().filter(function(n){return t.model.areBreakpointsActivated()&&n.enabled&&n.source.uri.toString()===e.toString()}),function(e){return""+e.desiredLineNumber}),i=n.length>0?n[0].source.raw:P.Source.toRawSource(e,null);return this.session.setBreakpoints({source:i,lines:n.map(function(e){return e.desiredLineNumber}),breakpoints:n.map(function(e){return{line:e.desiredLineNumber,condition:e.condition}})}).then(function(e){for(var i={},o=0;o<n.length;o++)i[n[o].getId()]=e.body.breakpoints[o];t.model.updateBreakpoints(i)})},t.prototype.sendFunctionBreakpoints=function(){var e=this;if(!this.session||!this.session.readyForBreakpoints||!this.session.capabilities.supportsFunctionBreakpoints)return h.TPromise.as(null);var t=this.model.getFunctionBreakpoints().filter(function(e){return e.enabled});return this.session.setFunctionBreakpoints({breakpoints:t}).then(function(n){for(var i={},o=0;o<t.length;o++)i[t[o].getId()]=n.body.breakpoints[o];e.model.updateFunctionBreakpoints(i)})},t.prototype.sendExceptionBreakpoints=function(){if(!this.session||!this.session.readyForBreakpoints||0===this.model.getExceptionBreakpoints().length)return h.TPromise.as(null);var e=this.model.getExceptionBreakpoints().filter(function(e){return e.enabled});return this.session.setExceptionBreakpoints({filters:e.map(function(e){return e.filter})})},t.prototype.onFileChanges=function(e){this.model.removeBreakpoints(this.model.getBreakpoints().filter(function(t){return e.contains(t.source.uri,b.FileChangeType.DELETED)}))},t.prototype.store=function(){this.storageService.store(q,JSON.stringify(this.model.getBreakpoints()),C.StorageScope.WORKSPACE),this.storageService.store(G,this.model.areBreakpointsActivated()?"true":"false",C.StorageScope.WORKSPACE),this.storageService.store(Y,JSON.stringify(this.model.getFunctionBreakpoints()),C.StorageScope.WORKSPACE),this.storageService.store($,JSON.stringify(this.model.getExceptionBreakpoints()),C.StorageScope.WORKSPACE),this.storageService.store(Q,this.configurationManager.getConfigurationName(),C.StorageScope.WORKSPACE),this.storageService.store(X,JSON.stringify(this.model.getWatchExpressions()),C.StorageScope.WORKSPACE)},t.prototype.dispose=function(){this.session&&(this.session.disconnect(),this.session=null),this.model.dispose(),this.toDispose=i.disposeAll(this.toDispose),this.toDisposeOnSessionEnd=i.disposeAll(this.toDisposeOnSessionEnd)},t=__decorate([__param(0,C.IStorageService),__param(1,B.IWorkbenchEditorService),__param(2,V.ITextFileService),__param(3,F.IViewletService),__param(4,W.IPanelService),__param(5,b.IFileService),__param(6,E.IMessageService),__param(7,H.IPartService),__param(8,U.IWindowService),__param(9,w.ITelemetryService),__param(10,K.IWorkspaceContextService),__param(11,m.IKeybindingService),__param(12,S.IEventService),__param(13,g.ILifecycleService),__param(14,_.IInstantiationService),__param(15,y.IExtensionService),__param(16,v.IMarkerService)],t)}(r.EventEmitter);t.DebugService=Z});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debug.contribution",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debug.contribution","vs/base/common/keyCodes","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/platform/actions/common/actions","vs/platform/platform","vs/platform/instantiation/common/extensions","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybindingService","vs/editor/browser/editorBrowserExtensions","vs/workbench/common/actionRegistry","vs/workbench/browser/viewlet","vs/workbench/browser/panel","vs/workbench/common/contributions","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/browser/debugEditorModelManager","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/browser/debugActionsWidget","vs/workbench/parts/debug/electron-browser/debugService","vs/workbench/parts/debug/browser/debugEditorContribution","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/css!../browser/media/debug.contribution","vs/css!../browser/media/debugHover"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w){"use strict";var C=v.IDebugService,T=function(e){function t(t,n,i,o){e.call(this,t,n,v.VIEWLET_ID,i,o)}return __extends(t,e),t.ID=v.VIEWLET_ID,t.LABEL=n.localize(0,null),t=__decorate([__param(2,E.IViewletService),__param(3,w.IWorkbenchEditorService)],t)}(p.ToggleViewletAction);d.EditorBrowserRegistry.registerEditorContribution(S.DebugEditorContribution),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.ToggleBreakpointAction,y.ToggleBreakpointAction.ID,n.localize(1,null),{context:r.ContextKey.EditorTextFocus,primary:i.KeyCode.F9})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.ShowDebugHoverAction,y.ShowDebugHoverAction.ID,n.localize(2,null),{context:r.ContextKey.EditorTextFocus,kbExpr:l.KbExpr.and(l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE),l.KbExpr.has(o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS)),primary:i.KeyMod.chord(i.KeyMod.CtrlCmd|i.KeyCode.KEY_K,i.KeyMod.CtrlCmd|i.KeyCode.KEY_I)})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.EditorConditionalBreakpointAction,y.EditorConditionalBreakpointAction.ID,n.localize(3,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.SelectionToReplAction,y.SelectionToReplAction.ID,n.localize(4,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.SelectionToWatchExpressionsAction,y.SelectionToWatchExpressionsAction.ID,n.localize(5,null))),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y.RunToCursorAction,y.RunToCursorAction.ID,n.localize(6,null))),a.Registry.as(p.Extensions.Viewlets).registerViewlet(new p.ViewletDescriptor("vs/workbench/parts/debug/browser/debugViewlet","DebugViewlet",v.VIEWLET_ID,n.localize(7,null),"debug",40));var k={primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_D};a.Registry.as(f.Extensions.Panels).registerPanel(new f.PanelDescriptor("vs/workbench/parts/debug/browser/repl","Repl",v.REPL_ID,n.localize(8,null),"repl")),a.Registry.as(f.Extensions.Panels).setDefaultPanelId(v.REPL_ID);var x=a.Registry.as(h.Extensions.WorkbenchActions);x.registerWorkbenchAction(new s.SyncActionDescriptor(T,T.ID,T.LABEL,k),n.localize(9,null)),a.Registry.as(m.Extensions.Workbench).registerWorkbenchContribution(g.DebugEditorModelManager),a.Registry.as(m.Extensions.Workbench).registerWorkbenchContribution(_.DebugActionsWidget);var I=n.localize(10,null);x.registerWorkbenchAction(new s.SyncActionDescriptor(y.StartDebugAction,y.StartDebugAction.ID,y.StartDebugAction.LABEL,{primary:i.KeyCode.F5},l.KbExpr.not(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.StepOverDebugAction,y.StepOverDebugAction.ID,y.StepOverDebugAction.LABEL,{primary:i.KeyCode.F10},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.StepIntoDebugAction,y.StepIntoDebugAction.ID,y.StepIntoDebugAction.LABEL,{primary:i.KeyCode.F11},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE),u.KeybindingsRegistry.WEIGHT.workbenchContrib(1)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.StepOutDebugAction,y.StepOutDebugAction.ID,y.StepOutDebugAction.LABEL,{primary:i.KeyMod.Shift|i.KeyCode.F11},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.RestartDebugAction,y.RestartDebugAction.ID,y.RestartDebugAction.LABEL,{primary:i.KeyMod.Shift|i.KeyMod.CtrlCmd|i.KeyCode.F5},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.StopDebugAction,y.StopDebugAction.ID,y.StopDebugAction.LABEL,{primary:i.KeyMod.Shift|i.KeyCode.F5},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.ContinueAction,y.ContinueAction.ID,y.ContinueAction.LABEL,{primary:i.KeyCode.F5},l.KbExpr.has(v.CONTEXT_IN_DEBUG_MODE)),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.PauseAction,y.PauseAction.ID,y.PauseAction.LABEL),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.ConfigureAction,y.ConfigureAction.ID,y.ConfigureAction.LABEL),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.ToggleReplAction,y.ToggleReplAction.ID,y.ToggleReplAction.LABEL,{primary:i.KeyMod.CtrlCmd|i.KeyMod.Shift|i.KeyCode.KEY_Y}),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.AddFunctionBreakpointAction,y.AddFunctionBreakpointAction.ID,y.AddFunctionBreakpointAction.LABEL),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.ReapplyBreakpointsAction,y.ReapplyBreakpointsAction.ID,y.ReapplyBreakpointsAction.LABEL),I),x.registerWorkbenchAction(new s.SyncActionDescriptor(y.RunAction,y.RunAction.ID,y.RunAction.LABEL,{primary:i.KeyMod.CtrlCmd|i.KeyCode.F5},l.KbExpr.not(v.CONTEXT_IN_DEBUG_MODE)),I),c.registerSingleton(C,b.DebugService)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/execution/electron-browser/terminal.contribution",["require","exports","vs/nls!vs/workbench/parts/execution/electron-browser/terminal.contribution","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/platform","vs/base/common/actions","vs/workbench/common/actionRegistry","vs/base/common/paths","vs/workbench/browser/actionBarRegistry","vs/base/common/uri","vs/workbench/parts/files/common/files","vs/workbench/services/workspace/common/contextService","vs/workbench/parts/execution/common/execution","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(e){function t(t,n,i,o){e.call(this,t,n),this.terminalService=i,this.contextService=o,this.order=49}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e,this.enabled=!c.isUNC(this.resource.fsPath)},t.prototype.run=function(e){var t=this.contextService.getWorkspace(),n=this.resource?this.resource.fsPath:t&&t.resource.fsPath;return n?(this.terminalService.openTerminal(n),i.TPromise.as(null)):i.TPromise.as(null)},t.ID="workbench.action.terminal.openNativeConsole",t.Label=r.isWindows?n.localize(0,null):n.localize(1,null),t.ScopedLabel=r.isWindows?n.localize(2,null):n.localize(3,null),t=__decorate([__param(2,p.ITerminalService),__param(3,h.IWorkspaceContextService)],t)}(s.Action);t.OpenConsoleAction=g;var y=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){return!!d.asFileResource(e.element)},t.prototype.getSecondaryActions=function(e){var t=d.asFileResource(e.element),n=t.resource;t.isDirectory||(n=l["default"].file(c.dirname(n.fsPath)));var i=this.instantiationService.createInstance(g,g.ID,g.ScopedLabel);return i.setResource(n),[i]},t=__decorate([__param(0,m.IInstantiationService)],t)}(u.ActionBarContributor),_=o.Registry.as(u.Extensions.Actionbar);_.registerActionBarContributor(u.Scope.VIEWER,y),o.Registry.as(a.Extensions.WorkbenchActions).registerWorkbenchAction(new f.SyncActionDescriptor(g,g.ID,g.Label,{primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_C}))});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/common/vsoGalleryService",["require","exports","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/base/common/objects","vs/platform/request/common/request","vs/workbench/services/workspace/common/contextService","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a){"use strict";function c(e){if(!e)return 0;var t=e.filter(function(e){return"install"===e.statisticName})[0];return t?t.value:0}var u=3e5,l=function(){function e(e,t,n){this.requestService=e,this.serviceId=i.IGalleryService;var o=t.getConfiguration().env.extensionsGallery;this.extensionsGalleryUrl=o&&o.serviceUrl,this.extensionsCacheUrl=o&&o.cacheUrl,this.machineId=n.getTelemetryInfo().then(function(e){var t=e.machineId;return t})}return e.prototype.api=function(e){return void 0===e&&(e=""),""+this.extensionsGalleryUrl+e},e.prototype.isEnabled=function(){return!!this.extensionsGalleryUrl},e.prototype.query=function(){var e=this;if(!this.isEnabled())return n.TPromise.wrapError(new Error("No extension gallery service configured."));var t=this.queryCache().then(null,function(t){return e.queryGallery()}).then(function(t){var i=t.getResponseHeader("last-modified");if(!i)return e.queryGallery();var o=new Date(i).getTime(),r=(new Date).getTime(),s=r-o;return s>u?e.queryGallery():n.TPromise.as(t)});return t.then(function(e){return JSON.parse(e.responseText).results[0].extensions||[]}).then(function(t){return e.getRequestHeaders().then(function(n){return t.map(function(t){var i=t.versions.map(function(e){return{version:e.version,date:e.lastUpdated,downloadHeaders:n,downloadUrl:e.assetUri+"/Microsoft.VisualStudio.Services.VSIXPackage?install=true",manifestUrl:e.assetUri+"/Microsoft.VisualStudio.Code.Manifest"}});return{name:t.extensionName,displayName:t.displayName||t.extensionName,publisher:t.publisher.publisherName,version:i[0].version,engines:{vscode:void 0},description:t.shortDescription||"",galleryInformation:{galleryApiUrl:e.extensionsGalleryUrl,id:t.extensionId,publisherId:t.publisher.publisherId,publisherDisplayName:t.publisher.displayName,installCount:c(t.statistics),versions:i}}})})})},e.prototype.queryCache=function(){var e=this.extensionsCacheUrl;return e?this.requestService.makeRequest({url:e}):n.TPromise.wrapError(new Error("No cache configured."))},e.prototype.queryGallery=function(){var e=this,t=JSON.stringify({filters:[{criteria:[{filterType:1,value:"vscode"}]}],flags:389});return this.getRequestHeaders().then(function(n){n=o.assign(n,{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Content-Length":t.length});var i={type:"POST",url:e.api("/extensionquery"),data:t,headers:n};return e.requestService.makeRequest(i)})},e.prototype.getRequestHeaders=function(){return this.machineId.then(function(e){var t={"X-Market-Client-Id":"VSCode"};return e&&(t["X-Market-User-Id"]=e),t})},e=__decorate([__param(0,r.IRequestService),__param(1,s.IWorkspaceContextService),__param(2,a.ITelemetryService)],e)}();t.GalleryService=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/common/types","vs/base/browser/dom","vs/base/common/severity","vs/base/common/errors","vs/base/parts/quickopen/common/quickOpen","vs/base/common/filters","vs/workbench/browser/quickopen","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/workbench/services/workspace/common/contextService","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","electron","vs/workbench/parts/extensions/common/extensionsUtil"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E){"use strict";function w(e,t){var n=l.matchesContiguousSubString(e,t.publisher+"."+t.name)||[],i=l.matchesContiguousSubString(e,t.name)||[],o=l.matchesContiguousSubString(e,t.displayName)||[],r=l.matchesContiguousSubString(e,t.description)||[];return n.length||i.length||o.length||r.length?{id:n,name:i,displayName:o,description:r}:null}function C(e,t){var n=e.extension.galleryInformation?e.extension.galleryInformation.installCount:0,i=t.extension.galleryInformation?t.extension.galleryInformation.installCount:0,o=i-n;return 0!==o?o:e.extension.displayName.localeCompare(t.extension.displayName)}var T=s.emmet,k=n.localize(0,null),x=n.localize(1,null);!function(e){e[e.Uninstalled=0]="Uninstalled",e[e.Installed=1]="Installed",e[e.Outdated=2]="Outdated"}(t.ExtensionState||(t.ExtensionState={}));var I=t.ExtensionState,D=function(e){function t(t){e.call(this,"extensions.open-license",n.localize(2,null),"",!0),this.contextService=t}return __extends(t,e),t.prototype.run=function(e){var t=this.contextService.getConfiguration().env.extensionsGallery.itemUrl+"/"+e.publisher+"."+e.name+"/license";return S.shell.openExternal(t),o.TPromise.as(null)},t=__decorate([__param(0,g.IWorkspaceContextService)],t)}(_.Action),A=function(e){function t(t,i,o,r){e.call(this,"extensions.open-in-gallery",n.localize(3,null),"",!0),this.promptToInstall=t,this.messageService=i,this.contextService=o,this.instantiationService=r}return __extends(t,e),t.prototype.run=function(e){var t=this,i=this.contextService.getConfiguration().env.extensionsGallery.itemUrl+"/"+e.publisher+"."+e.name;if(S.shell.openExternal(i),!this.promptToInstall)return o.TPromise.as(null);var r=this.messageService.show(a["default"].Info,{message:n.localize(4,null,e.displayName),actions:[new _.Action("cancelaction",n.localize(5,null)),new _.Action("installNow",n.localize(6,null),null,!0,function(){r();var i=t.messageService.show(a["default"].Info,n.localize(7,null,e.displayName)),s=t.instantiationService.createInstance(p.InstallAction,"");return s.run(e).then(function(e){return i(),o.TPromise.as(e)},function(e){return i(),o.TPromise.wrapError(e)})})]});return o.TPromise.as(null)},t=__decorate([__param(1,f.IMessageService),__param(2,g.IWorkspaceContextService),__param(3,v.IInstantiationService)],t)}(_.Action),L=function(){function e(e){this.instantiationService=e}return e.prototype.run=function(e,t,n){return t===u.Mode.PREVIEW?!1:e.state===I.Installed?!1:(this.action||(this.action=this.instantiationService.createInstance(p.InstallAction,k)),this.action.run(e.extension).done(null,c.onUnexpectedError),!0)},e=__decorate([__param(0,v.IInstantiationService)],e)}(),O=function(){function e(){}return e.prototype.getAriaLabel=function(e){return n.localize(8,null,e.extension.displayName,e.extension.description)},e}(),M=function(){function e(e,t){this.instantiationService=e,this.extensionsService=t}return e.prototype.getHeight=function(e){return 48},e.prototype.getTemplateId=function(e){return"extension"},e.prototype.renderTemplate=function(e,t){var n=s.append(t,T(".extension")),i=s.append(n,T(".row")),o=s.append(n,T(".row")),r=s.append(i,T(".published")),a=new y.HighlightedLabel(s.append(i,T("span.name"))),c=s.append(i,T("span.installCount")),u=s.append(r,T("span.version")),l=s.append(r,T("span.author"));return{root:n,author:l,displayName:a,version:u,installCount:c,actionbar:new b.ActionBar(s.append(o,T(".actions"))),description:new y.HighlightedLabel(s.append(o,T("span.description"))),disposables:[]}},e.prototype.renderElement=function(e,t,o){var a=this,c=e.extension,u=c.galleryInformation?c.galleryInformation.publisherDisplayName:c.publisher,l=c.galleryInformation?c.galleryInformation.installCount:null,d={icon:!0,label:!1},h=function(){switch(o.actionbar.clear(),e.extension.galleryInformation&&(o.actionbar.push(a.instantiationService.createInstance(A,e.state!==I.Installed),{label:!0,icon:!1}),o.actionbar.push(a.instantiationService.createInstance(D),{label:!0,icon:!1})),e.state){case I.Uninstalled:e.extension.galleryInformation&&o.actionbar.push(a.instantiationService.createInstance(p.InstallAction,k),d);break;case I.Installed:o.actionbar.push(a.instantiationService.createInstance(p.UninstallAction),d);break;case I.Outdated:o.actionbar.push(a.instantiationService.createInstance(p.UninstallAction),d),o.actionbar.push(a.instantiationService.createInstance(p.InstallAction,x),d)}},f=function(t,n){E.extensionEquals(t,c)&&(e.state=n,h())};o.actionbar.context=c,h(),o.disposables=i.disposeAll(o.disposables),o.disposables.push(this.extensionsService.onDidInstallExtension(function(e){return f(e.extension,I.Installed)})),o.disposables.push(this.extensionsService.onDidUninstallExtension(function(e){return f(e,I.Uninstalled)})),o.displayName.set(c.displayName,e.highlights.displayName),o.displayName.element.title=c.name,o.version.textContent=c.version,r.isNumber(l)?(o.installCount.textContent=String(l),s.addClass(o.installCount,"octicon"),s.addClass(o.installCount,"octicon-cloud-download"),l?1===l?o.installCount.title=n.localize(10,null,c.displayName):o.installCount.title=n.localize(11,null,c.displayName,l):o.installCount.title=n.localize(9,null,c.displayName)):(o.installCount.textContent="",s.removeClass(o.installCount,"octicon"),s.removeClass(o.installCount,"octicon-cloud-download")),o.author.textContent=u,o.description.set(c.description,e.highlights.description),o.description.element.title=c.description},e.prototype.disposeTemplate=function(e,t){t.displayName.dispose(),t.description.dispose(),t.disposables=i.disposeAll(t.disposables)},e=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService)],e)}(),P=function(){function e(){}return e.prototype.getId=function(e){var t=e.extension;if(!t)throw new Error("Not an extension entry. Found "+Object.keys(e).slice(5)+",... instead.");return t.galleryInformation?t.galleryInformation.id+"-"+t.version:"local@"+t.publisher+"."+t.name+"-"+t.version+"@"+(t.path||"")},e.prototype.getLabel=function(e){return e.extension.name},e}(),R=function(){function e(e,t){this.extensions=e,this.dataSource=new P,this.accessibilityProvider=new O,this.runner={run:function(){return!1}},this.renderer=t.createInstance(M),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){this.entries=this.extensions.map(function(t){return{extension:t,highlights:w(e.trim(),t)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var t=e.extension,n=e.highlights;return{extension:t,highlights:n,state:I.Installed}}).sort(C)},enumerable:!0,
configurable:!0}),e=__decorate([__param(1,v.IInstantiationService)],e)}(),N=function(e){function t(t,n){e.call(this),this.instantiationService=t,this.extensionsService=n,this.modelPromise=null}return __extends(t,e),t.prototype.getAriaLabel=function(){return n.localize(12,null)},t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.modelPromise=this.extensionsService.getInstalled().then(function(e){return t.instantiationService.createInstance(R,e)})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.getEmptyLabel=function(e){return n.localize(13,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t.prototype.onClose=function(e){this.modelPromise=null},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService)],t)}(d.QuickOpenHandler);t.LocalExtensionsHandler=N;var F=function(){function e(e,t,n){this.galleryExtensions=e,this.localExtensions=t,this.dataSource=new P,this.accessibilityProvider=new O,this.renderer=n.createInstance(M),this.runner=n.createInstance(L),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){var t=this;this.entries=this.galleryExtensions.map(function(t){return{extension:t,highlights:w(e.trim(),t)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var n=e.extension,i=e.highlights,o=t.localExtensions.filter(function(e){return E.extensionEquals(e,n)})[0];return{extension:n,highlights:i,state:o?o.version===n.version?I.Installed:I.Outdated:I.Uninstalled}}).sort(C)},enumerable:!0,configurable:!0}),e=__decorate([__param(2,v.IInstantiationService)],e)}(),W=function(e){function t(t,n,i,o){e.call(this),this.instantiationService=t,this.extensionsService=n,this.galleryService=i,this.telemetryService=o}return __extends(t,e),t.prototype.getAriaLabel=function(){return n.localize(14,null)},t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.telemetryService.publicLog("extensionGallery:open"),this.modelPromise=o.TPromise.join([this.galleryService.query(),this.extensionsService.getInstalled()]).then(function(e){return t.instantiationService.createInstance(F,e[0],e[1])})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.onClose=function(e){this.modelPromise=null},t.prototype.getEmptyLabel=function(e){return n.localize(15,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService),__param(2,h.IGalleryService),__param(3,m.ITelemetryService)],t)}(d.QuickOpenHandler);t.GalleryExtensionsHandler=W;var H=function(){function e(e,t){this.outdatedExtensions=e,this.dataSource=new P,this.accessibilityProvider=new O,this.renderer=t.createInstance(M),this.runner=t.createInstance(L),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){this.entries=this.outdatedExtensions.map(function(t){return{extension:t,highlights:w(e.trim(),t)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var t=e.extension,n=e.highlights;return{extension:t,highlights:n,state:I.Outdated}}).sort(C)},enumerable:!0,configurable:!0}),e=__decorate([__param(1,v.IInstantiationService)],e)}(),V=function(e){function t(t,n,i,o){e.call(this),this.instantiationService=t,this.extensionsService=n,this.galleryService=i,this.telemetryService=o}return __extends(t,e),t.prototype.getAriaLabel=function(){return n.localize(16,null)},t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.telemetryService.publicLog("extensionGallery:open"),this.modelPromise=this.instantiationService.invokeFunction(E.getOutdatedExtensions).then(function(e){return t.instantiationService.createInstance(H,e)})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.onClose=function(e){this.modelPromise=null},t.prototype.getEmptyLabel=function(e){return n.localize(17,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService),__param(2,h.IGalleryService),__param(3,m.ITelemetryService)],t)}(d.QuickOpenHandler);t.OutdatedExtensionsHandler=V;var K=function(){function e(e,t,n){this.suggestedExtensions=e,this.localExtensions=t,this.dataSource=new P,this.renderer=n.createInstance(M),this.runner=n.createInstance(L),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){var t=this;this.entries=this.suggestedExtensions.map(function(t){return{extension:t,highlights:w(e.trim(),t)}}).filter(function(e){var n=e.extension,i=e.highlights,o=t.localExtensions.filter(function(e){return E.extensionEquals(e,n)})[0];return!o&&!!i}).map(function(e){var t=e.extension,n=e.highlights;return{extension:t,highlights:n,state:I.Uninstalled}}).sort(C)},enumerable:!0,configurable:!0}),e=__decorate([__param(2,v.IInstantiationService)],e)}(),B=function(e){function t(t,n,i,o){e.call(this),this.extensionTipsService=t,this.instantiationService=n,this.telemetryService=i,this.extensionsService=o}return __extends(t,e),t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.telemetryService.publicLog("extensionRecommendations:open"),this.modelPromise=o.TPromise.join([this.extensionTipsService.getRecommendations(),this.extensionsService.getInstalled()]).then(function(e){return t.instantiationService.createInstance(K,e[0],e[1])})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.onClose=function(e){this.modelPromise=null},t.prototype.getEmptyLabel=function(e){return n.localize(18,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,h.IExtensionTipsService),__param(1,v.IInstantiationService),__param(2,m.ITelemetryService),__param(3,h.IExtensionsService)],t)}(d.QuickOpenHandler);t.SuggestedExtensionHandler=B});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension","vs/base/common/errors","vs/platform/platform","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/services/workspace/common/contextService","vs/workbench/electron-browser/actions","vs/workbench/common/actionRegistry","vs/platform/actions/common/actions","./extensionsActions","./extensionTipsService","vs/workbench/browser/quickopen","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=function(){function e(e,t,r,a,c){this.instantiationService=e,this.extensionsService=t,this.messageService=r,this.registerListeners();var u=a.getOptions();u.extensionsToInstall&&u.extensionsToInstall.length&&this.install(u.extensionsToInstall).done(null,i.onUnexpectedError),e.addSingleton(s.IExtensionTipsService,this.instantiationService.createInstance(m.ExtensionTipsService));var l=o.Registry.as(h.Extensions.WorkbenchActions);l.registerWorkbenchAction(new p.SyncActionDescriptor(f.ListExtensionsAction,f.ListExtensionsAction.ID,f.ListExtensionsAction.LABEL),s.ExtensionsLabel),o.Registry.as(v.Extensions.Quickopen).registerQuickOpenHandler(new v.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","LocalExtensionsHandler","ext ",n.localize(0,null))),c.isEnabled()&&(l.registerWorkbenchAction(new p.SyncActionDescriptor(f.InstallExtensionAction,f.InstallExtensionAction.ID,f.InstallExtensionAction.LABEL),s.ExtensionsLabel),o.Registry.as(v.Extensions.Quickopen).registerQuickOpenHandler(new v.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","GalleryExtensionsHandler","ext install ",n.localize(1,null))),l.registerWorkbenchAction(new p.SyncActionDescriptor(f.ListOutdatedExtensionsAction,f.ListOutdatedExtensionsAction.ID,f.ListOutdatedExtensionsAction.LABEL),s.ExtensionsLabel),o.Registry.as(v.Extensions.Quickopen).registerQuickOpenHandler(new v.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","OutdatedExtensionsHandler","ext update ",n.localize(2,null))),l.registerWorkbenchAction(new p.SyncActionDescriptor(f.ListSuggestedExtensionsAction,f.ListSuggestedExtensionsAction.ID,f.ListSuggestedExtensionsAction.LABEL),s.ExtensionsLabel),o.Registry.as(v.Extensions.Quickopen).registerQuickOpenHandler(new v.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","SuggestedExtensionHandler","ext recommend ",n.localize(3,null))))}return e.prototype.registerListeners=function(){var e=this;g.ipcRenderer.on("vscode:installExtensions",function(t,n){n.extensionsToInstall&&e.install(n.extensionsToInstall).done(null,i.onUnexpectedError)})},e.prototype.install=function(e){var t=this;return r.Promise.join(e.map(function(e){return t.extensionsService.install(e)})).then(function(e){t.messageService.show(u["default"].Info,{message:e.length>1?n.localize(4,null):n.localize(5,null,e[0].displayName),actions:[t.instantiationService.createInstance(d.ReloadWindowAction,d.ReloadWindowAction.ID,n.localize(6,null))]})})},e.prototype.getId=function(){return"vs.extensions.workbenchextension"},e=__decorate([__param(0,a.IInstantiationService),__param(1,s.IExtensionsService),__param(2,c.IMessageService),__param(3,l.IWorkspaceContextService),__param(4,s.IGalleryService)],e)}();t.ExtensionsWorkbenchExtension=y}),define("vs/workbench/parts/extensions/electron-browser/extensions.contribution",["require","exports","vs/platform/platform","vs/platform/instantiation/common/extensions","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/parts/extensions/electron-browser/extensionsWidgets","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/common/vsoGalleryService","vs/workbench/common/contributions","vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension","vs/workbench/parts/output/common/output","vs/css!./media/extensions"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";i.registerSingleton(s.IGalleryService,a.GalleryService),n.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(u.ExtensionsWorkbenchExtension),n.Registry.as(o.Extensions.Statusbar).registerStatusbarItem(new o.StatusbarItemDescriptor(r.ExtensionsStatusbarItem,o.StatusbarAlignment.LEFT,1e4)),n.Registry.as(l.Extensions.OutputChannels).registerChannel(s.ExtensionsLabel)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/feedback/browser/feedback",["require","exports","vs/nls!vs/workbench/parts/feedback/browser/feedback","vs/base/browser/builder","vs/base/browser/ui/dropdown/dropdown","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/css!./media/feedback"],function(e,t,n,i,o,r,s){"use strict";var a;!function(e){e[e.SENDING=0]="SENDING",e[e.SENT=1]="SENT",e[e.SEND_ERROR=2]="SEND_ERROR"}(a||(a={}));var c=function(e){function t(t,o,r,s){e.call(this,t,{contextViewProvider:o.contextViewProvider,labelRenderer:function(e){return i.$(e).addClass("send-feedback"),null}}),this.telemetryService=r,this.contextService=s,this.$el.addClass("send-feedback"),this.$el.title(n.localize(0,null)),this.feedbackService=o.feedbackService,this.feedback="",this.sentiment=1,this.feedbackForm=null,this.feedbackDescriptionInput=null,this.smileyInput=null,this.frownyInput=null,this.sendButton=null;var a=s.getConfiguration().env;this.reportIssueLink=a.sendASmile.reportIssueUrl,this.requestFeatureLink=a.sendASmile.requestFeatureUrl}return __extends(t,e),t.prototype.renderContents=function(e){var o=this,r=i.$("form.feedback-form").attr({action:"javascript:void(0);",tabIndex:"-1"}).appendTo(e);i.$(e).addClass("monaco-menu-container"),this.feedbackForm=r.getHTMLElement(),i.$("h2.title").text(n.localize(1,null)).appendTo(r),this.invoke(i.$("div.cancel").attr("tabindex","0"),function(){o.hide()}).appendTo(r);var s=i.$("div.content").appendTo(r),a=i.$("div").appendTo(s);i.$("span").text(n.localize(2,null)).appendTo(a);var c=i.$("div.feedback-sentiment").appendTo(a);this.smileyInput=i.$("div").addClass("sentiment smile").attr({"aria-checked":"false","aria-label":n.localize(3,null),tabindex:0,role:"checkbox"}),this.invoke(this.smileyInput,function(){o.setSentiment(!0)}).appendTo(c),this.frownyInput=i.$("div").addClass("sentiment frown").attr({"aria-checked":"false","aria-label":n.localize(4,null),tabindex:0,role:"checkbox"}),this.invoke(this.frownyInput,function(){o.setSentiment(!1)}).appendTo(c),1===this.sentiment?this.smileyInput.addClass("checked").attr("aria-checked","true"):this.frownyInput.addClass("checked").attr("aria-checked","true");var u=i.$("div.contactus").appendTo(s);i.$("span").text(n.localize(5,null)).appendTo(u);var l=i.$("div.channels").appendTo(u);i.$("div").append(i.$("a").attr("target","_blank").attr("href",this.reportIssueLink).text(n.localize(6,null)).attr("tabindex","0")).appendTo(l),i.$("div").append(i.$("a").attr("target","_blank").attr("href",this.requestFeatureLink).text(n.localize(7,null)).attr("tabindex","0")).appendTo(l);var d=i.$("span.char-counter").text(this.getCharCountText(0));i.$("h3").text(n.localize(8,null)).append(d).appendTo(r),this.feedbackDescriptionInput=i.$("textarea.feedback-description").attr({rows:3,maxlength:t.MAX_FEEDBACK_CHARS,"aria-label":n.localize(9,null)}).text(this.feedback).attr("required","required").on("keyup",function(){d.text(o.getCharCountText(o.feedbackDescriptionInput.value.length)),o.feedbackDescriptionInput.value?o.sendButton.removeAttribute("disabled"):o.sendButton.attr("disabled","")}).appendTo(r).domFocus().getHTMLElement();var h=i.$("div.form-buttons").appendTo(r);return this.sendButton=this.invoke(i.$("input.send").type("submit").attr("disabled","").value(n.localize(10,null)).appendTo(h),function(){o.isSendingFeedback||o.onSubmit()}),{dispose:function(){o.feedbackForm=null,o.feedbackDescriptionInput=null,o.smileyInput=null,o.frownyInput=null}}},t.prototype.getCharCountText=function(e){var i=t.MAX_FEEDBACK_CHARS-e,o=1===i?n.localize(11,null):n.localize(12,null);return"("+i+" "+o+")"},t.prototype.setSentiment=function(e){e?(this.smileyInput.addClass("checked"),this.smileyInput.attr("aria-checked","true"),this.frownyInput.removeClass("checked"),this.frownyInput.attr("aria-checked","false")):(this.frownyInput.addClass("checked"),this.frownyInput.attr("aria-checked","true"),this.smileyInput.removeClass("checked"),this.smileyInput.attr("aria-checked","false")),this.sentiment=e?1:0},t.prototype.invoke=function(e,t){return e.on("click",t),e.on("keypress",function(e){if(e instanceof KeyboardEvent){var n=e;13!==n.keyCode&&32!==n.keyCode||t()}}),e},t.prototype.hide=function(){this.feedbackDescriptionInput&&(this.feedback=this.feedbackDescriptionInput.value),this.autoHideTimeout&&(clearTimeout(this.autoHideTimeout),this.autoHideTimeout=null),e.prototype.hide.call(this)},t.prototype.onEvent=function(e,t){if(e instanceof KeyboardEvent){var n=e;27===n.keyCode&&this.hide()}},t.prototype.onSubmit=function(){this.feedbackForm.checkValidity&&!this.feedbackForm.checkValidity()||(this.changeFormStatus(a.SENDING),this.feedbackService.submitFeedback({feedback:this.feedbackDescriptionInput.value,sentiment:this.sentiment}),this.changeFormStatus(a.SENT))},t.prototype.changeFormStatus=function(e){var t=this;switch(e){case a.SENDING:this.isSendingFeedback=!0,this.sendButton.setClass("send in-progress"),this.sendButton.value(n.localize(13,null));break;case a.SENT:this.isSendingFeedback=!1,this.sendButton.setClass("send success").value(n.localize(14,null)),this.resetForm(),this.autoHideTimeout=setTimeout(function(){t.hide()},1e3),this.sendButton.off(["click","keypress"]),this.invoke(this.sendButton,function(){t.hide(),t.sendButton.off(["click","keypress"])});break;case a.SEND_ERROR:this.isSendingFeedback=!1,this.sendButton.setClass("send error").value(n.localize(15,null))}},t.prototype.resetForm=function(){this.feedbackDescriptionInput&&(this.feedbackDescriptionInput.value=""),this.sentiment=1,this.aliasEnabled=!1},t.MAX_FEEDBACK_CHARS=140,t=__decorate([__param(2,r.ITelemetryService),__param(3,s.IWorkspaceContextService)],t)}(o.Dropdown);t.FeedbackDropdown=c});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/feedback/electron-browser/feedbackStatusbarItem",["require","exports","vs/workbench/parts/feedback/browser/feedback","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","electron"],function(e,t,n,i,o,r){"use strict";var s=function(){function e(){}return e.prototype.submitFeedback=function(t){var n="?"+(1===t.sentiment?"hashtags=HappyCoding&":null)+"ref_src=twsrc%5Etfw&related=twitterapi%2Ctwitter&text="+t.feedback+"&tw_p=tweetbutton&via=code",i=e.TWITTER_URL+n;r.shell.openExternal(i)},e.TWITTER_URL="https://twitter.com/intent/tweet",e}(),a=function(){function e(e,t){this.instantiationService=e,this.contextViewService=t}return e.prototype.render=function(e){return this.instantiationService.createInstance(n.FeedbackDropdown,e,{contextViewProvider:this.contextViewService,feedbackService:this.instantiationService.createInstance(s)})},e=__decorate([__param(0,o.IInstantiationService),__param(1,i.IContextViewService)],e)}();t.FeedbackStatusbarItem=a}),define("vs/workbench/parts/feedback/electron-browser/feedback.contribution",["require","exports","vs/platform/platform","vs/base/common/flags","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/parts/feedback/electron-browser/feedbackStatusbarItem"],function(e,t,n,i,o,r){"use strict";i.enableSendASmile&&n.Registry.as(o.Extensions.Statusbar).registerStatusbarItem(new o.StatusbarItemDescriptor(r.FeedbackStatusbarItem,o.StatusbarAlignment.RIGHT,-100))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/fileEditorInput",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/fileEditorInput","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/types","vs/base/common/paths","vs/base/common/mime","vs/base/common/labels","vs/base/common/strings","vs/base/common/assert","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/binaryEditorModel","vs/platform/files/common/files","vs/workbench/parts/files/common/files","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/services/workspace/common/contextService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g){"use strict";var y=function(e){function t(t,n,i,o,r,s){e.call(this),this.instantiationService=o,this.contextService=r,this.textFileService=s,t&&(this.setResource(t),this.setMime(n||a.guessMimeTypes(this.resource.fsPath).join(", ")),this.preferredEncoding=i)}return __extends(t,e),t.prototype.setResource=function(e){if("file"!==e.scheme)throw new Error("FileEditorInput can only handle file:// resources.");this.resource=e,this.name=null,this.description=null,this.verboseDescription=null},t.prototype.getResource=function(){return this.resource},t.prototype.getMime=function(){return this.mime},t.prototype.setMime=function(e){l.ok(e,"Editor input needs mime type"),this.mime=e},t.prototype.getEncoding=function(){var e=m.CACHE.get(this.resource);return e?e.getEncoding():this.preferredEncoding},t.prototype.setEncoding=function(e,t){this.preferredEncoding=e;var n=m.CACHE.get(this.resource);n&&n.setEncoding(e,t)},t.prototype.getId=function(){return f.FILE_EDITOR_INPUT_ID},t.prototype.getName=function(){return this.name||(this.name=s.basename(this.resource.fsPath)),this.name},t.prototype.getDescription=function(e){return e?(this.verboseDescription||(this.verboseDescription=c.getPathLabel(this.resource.fsPath)),this.verboseDescription):(this.description||(this.description=c.getPathLabel(s.dirname(this.resource.fsPath),this.contextService)),this.description)},t.prototype.getStatus=function(){var e=m.CACHE.get(this.resource);if(e){var n=e.getState();switch(n){case m.State.SAVED:return{state:"saved",displayText:t.nlsSavedDisplay,description:t.nlsSavedMeta};case m.State.DIRTY:return{state:"dirty",decoration:this.textFileService.getAutoSaveMode()!==f.AutoSaveMode.AFTER_SHORT_DELAY?"●":"",displayText:t.nlsDirtyDisplay,description:t.nlsDirtyMeta};case m.State.PENDING_SAVE:return{state:"saving",decoration:this.textFileService.getAutoSaveMode()!==f.AutoSaveMode.AFTER_SHORT_DELAY?"●":"",displayText:t.nlsPendingSaveDisplay,description:t.nlsPendingSaveMeta};case m.State.ERROR:return{state:"error",decoration:"●",displayText:t.nlsErrorDisplay,description:t.nlsErrorMeta};case m.State.CONFLICT:return{state:"conflict",decoration:"●",displayText:t.nlsConflictDisplay,description:t.nlsConflictMeta}}}return null},t.prototype.getPreferredEditorId=function(e){for(var t,n=o.Registry.as(d.Extensions.Editors),i=this.mime.split(","),s=0;s<i.length;s++)for(var a=u.trim(i[s]),c=0;c<e.length;c++)if(t=n.getEditorById(e[c]),r.isFunction(t.getMimeTypes))for(var l=t.getMimeTypes(),h=0;h<l.length;h++){var p=l[h];if(a===p)return t.getId();if(u.endsWith(p,"/*")&&u.startsWith(a,p.substring(0,p.length-1)))return t.getId()}return f.BINARY_FILE_EDITOR_ID},t.prototype.resolve=function(e){var n,o=this,s=t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()];if(r.isUndefinedOrNull(s)?t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()]=[this]:-1===this.indexOfClient()&&t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].push(this),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()])return t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()];var a=m.CACHE.get(this.resource);return a&&!e?n=i.TPromise.as(a):a&&e?(n=a.load(),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()]=n):(n=this.createAndLoadModel(),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()]=n),n.then(function(e){return e instanceof m.TextFileEditorModel&&m.CACHE.add(o.resource,e),t.FILE_EDITOR_MODEL_LOADERS[o.resource.toString()]=null,e},function(e){return t.FILE_EDITOR_MODEL_LOADERS[o.resource.toString()]=null,i.TPromise.wrapError(e)})},t.prototype.indexOfClient=function(){if(!r.isUndefinedOrNull(t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()]))for(var e=0;e<t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].length;e++){var n=t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()][e];if(n===this)return e}return-1},t.prototype.createAndLoadModel=function(){var e=this,t=o.Registry.as(d.Extensions.Editors).getEditor(this);if(!t)throw new Error("Unable to find an editor in the registry for this input.");var n=this.instantiationService.createInstance(m.TextFileEditorModel,this.resource,this.preferredEncoding);return n.load().then(function(){return n},function(t){if(t.fileOperationResult===p.FileOperationResult.FILE_IS_BINARY||t.fileOperationResult===p.FileOperationResult.FILE_TOO_LARGE){n.dispose();var o=new h.BinaryEditorModel(e.resource,e.getName());return o.load()}return i.TPromise.wrapError(t)})},t.prototype.dispose=function(n){var i=m.CACHE.get(this.resource);if(i){var o=this.indexOfClient();if(o>=0){if(t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].splice(o,1),!n&&t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].length>0)return;if(!n)return;m.CACHE.dispose(this.resource)}}e.prototype.dispose.call(this)},t.prototype.matches=function(n){return e.prototype.matches.call(this,n)===!0?!0:n?n instanceof t&&n.resource.toString()===this.resource.toString():!1},t.getAll=function(e){var n=[],i=t.FILE_EDITOR_MODEL_CLIENTS;for(var o in i){var r=i[o];s.isEqualOrParent(o,e.toString())&&n.push.apply(n,r)}return n},t.FILE_EDITOR_MODEL_CLIENTS=Object.create(null),t.FILE_EDITOR_MODEL_LOADERS=Object.create(null),t.nlsSavedDisplay=n.localize(0,null),t.nlsSavedMeta=n.localize(1,null),t.nlsDirtyDisplay=n.localize(2,null),t.nlsDirtyMeta=n.localize(3,null),t.nlsPendingSaveDisplay=n.localize(4,null),t.nlsPendingSaveMeta=n.localize(5,null),t.nlsErrorDisplay=n.localize(6,null),t.nlsErrorMeta=n.localize(7,null),t.nlsConflictDisplay=n.localize(8,null),t.nlsConflictMeta=n.localize(9,null),t=__decorate([__param(3,g.IInstantiationService),__param(4,v.IWorkspaceContextService),__param(5,f.ITextFileService)],t)}(f.FileEditorInput);t.FileEditorInput=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/fileActions","vs/base/common/platform","vs/base/common/async","vs/base/common/mime","vs/base/common/paths","vs/base/common/uri","vs/base/common/errors","vs/base/common/strings","vs/base/common/events","vs/base/common/labels","vs/base/common/diagnostics","vs/base/common/actions","vs/base/browser/ui/inputbox/inputBox","vs/base/common/lifecycle","vs/workbench/common/events","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/common/editor/diffEditorInput","vs/workbench/common/editor","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/common/explorerViewModel","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/base/common/keyCodes","vs/css!./media/fileactions"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F){"use strict";function W(e,t){var n=e.getActiveEditorInput();return e.getVisibleEditors().filter(function(e){if("file"===t.scheme&&n!==e.input)return!1;var i=S.getUntitledOrFileResource(e.input);return i&&i.toString()===t.toString()}).map(function(e){return e.position})}function H(e,t,n,i){var o=e.getVisibleEditors().map(function(e){return S.asFileEditorInput(e.input,!0)}).filter(function(e){return e instanceof E.FileEditorInput});o.forEach(function(o){i&&i.toString()===o.getResource().toString()||n.isDirty(o.getResource())||K(o.getResource(),e,t).forEach(function(e){e.isDisposed()||e.dispose(!0)})})}function V(e){var t=e.getVisibleEditors().filter(function(e){return!S.getUntitledOrFileResource(e.input,!0)});return n.TPromise.join(t.map(function(t){return e.closeEditor(t)})).then(function(){return!0},u.onUnexpectedError)}function K(e,t,n){for(var i=E.FileEditorInput.getAll(e),o=n.getEditorHistory(),r=0;r<o.length;r++){var s=o[r];s instanceof E.FileEditorInput&&s.getResource().toString()===e.toString()&&i.push(s)}var a=t.getVisibleEditors();return a.forEach(function(t){var n=t.input;n instanceof E.FileEditorInput&&n.getResource().toString()===e.toString()&&i.push(n)}),i}function B(e){switch(e){case ee.ID:return new F.Keybinding(F.KeyMod.CtrlCmd|F.KeyCode.KEY_N);case G.ID:return new F.Keybinding(o.isMacintosh?F.KeyCode.Enter:F.KeyCode.F2);case Ee.ID:return new F.Keybinding(F.KeyMod.CtrlCmd|F.KeyCode.KEY_S);case ae.ID:case se.ID:return new F.Keybinding(F.KeyCode.Delete);case de.ID:return new F.Keybinding(F.KeyMod.CtrlCmd|F.KeyCode.KEY_C);case he.ID:return new F.Keybinding(F.KeyMod.CtrlCmd|F.KeyCode.KEY_V);case fe.ID:return o.isMacintosh?new F.Keybinding(F.KeyMod.WinCtrl|F.KeyCode.Enter):new F.Keybinding(F.KeyMod.CtrlCmd|F.KeyCode.Enter)}return null}function U(e,t,n){if(void 0===n&&(n=!1),t=z(t),!t||0===t.length||/^\s+$/.test(t))return i.localize(58,null);if(!n&&e.children&&e.children.some(function(e){return o.isLinux?e.name===t:e.name.toLowerCase()===t.toLowerCase()}))return i.localize(59,null,t);if(!a.isValidBasename(t))return i.localize(60,null,t);if(o.isWindows){var r=t.length+e.resource.fsPath.length+1;if(r>255)return i.localize(61,null,t)}return null}function z(e){return e?(e=l.trim(l.trim(e," "),"	"),e=l.rtrim(e,".")):e}var j=y.ITextFileService,q=function(e){function t(t,n,i,o,r,s,a,c){var u=this;e.call(this,t,n),this._contextService=i,this._editorService=o,this._fileService=r,this._messageService=s,this._textFileService=a,this._eventService=c,this.enabled=!1,this.listenerToUnbind=this._eventService.addListener(g.EventType.WORKBENCH_OPTIONS_CHANGED,function(){return u._updateEnablement()})}return __extends(t,e),Object.defineProperty(t.prototype,"contextService",{get:function(){return this._contextService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"messageService",{get:function(){return this._messageService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileService",{get:function(){return this._fileService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFileService",{get:function(){return this._textFileService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),t.prototype._isEnabled=function(){
return!0},t.prototype._updateEnablement=function(){this.enabled=!!(this._contextService&&this._fileService&&this._editorService&&!this._contextService.getOptions().readOnly&&this._isEnabled())},t.prototype.onError=function(e){this._messageService.show(P.Severity.Error,e)},t.prototype.onWarning=function(e){this._messageService.show(P.Severity.Warning,e)},t.prototype.onErrorWithRetry=function(e,t,n){var o=[P.CancelAction,new f.Action(this.id,i.localize(0,null),null,!0,function(){return t()})];n&&o.push(n);var r={actions:o,message:u.toErrorMessage(e,!1)};this._messageService.show(P.Severity.Error,r)},t.prototype.handleDirty=function(){if(this.textFileService.isDirty(this._element.resource)){var e=this.textFileService.confirmSave([this._element.resource]);return e===y.ConfirmResult.SAVE?this.textFileService.save(this._element.resource).then(function(){return!1}):e===y.ConfirmResult.DONT_SAVE?this.textFileService.revert(this._element.resource).then(function(){return!1}):n.TPromise.as(!0)}return n.TPromise.as(!1)},t.prototype.dispose=function(){this.listenerToUnbind(),e.prototype.dispose.call(this)},t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService)],t)}(f.Action);t.BaseFileAction=q;var G=function(e){function t(n,o,r,s,a,c,u,l,d){e.call(this,t.ID,i.localize(1,null),r,s,a,c,u,l),this.tree=n,this.element=o,this.renameAction=d.createInstance($,o),this._updateEnablement()}return __extends(t,e),t.prototype.validateFileName=function(e,t){return this.renameAction.validateFileName(this.element.parent,t)},t.prototype.run=function(e){var t=this;if(!e)return n.TPromise.wrapError("No context provided to BaseEnableFileRenameAction.");var i=e.viewletState;if(!i)return n.TPromise.wrapError("Invalid viewlet state provided to BaseEnableFileRenameAction.");var o=e.stat;return o?(i.setEditable(o,{action:this.renameAction,validator:function(e){var n=t.validateFileName(t.element.parent,e);return n?{content:n,formatContent:!0,type:m.MessageType.ERROR}:null}}),void this.tree.refresh(o,!1).then(function(){t.tree.setHighlight(o);var e=t.tree.addListener(d.EventType.HIGHLIGHT,function(n){n.highlight||(i.clearEditable(o),t.tree.refresh(o).done(null,u.onUnexpectedError),e())})}).done(null,u.onUnexpectedError)):n.TPromise.wrapError("Invalid stat provided to BaseEnableFileRenameAction.")},t.ID="workbench.files.action.triggerRename",t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService),__param(8,M.IInstantiationService)],t)}(q);t.TriggerRenameFileAction=G;var Y=function(e){function t(t,n,i,o,r,s,a,c,u,l){e.call(this,t,n,o,r,s,a,c,l),this.progressService=u,this.element=i}return __extends(t,e),t.prototype.run=function(e){var t=this;if(!e)return n.TPromise.wrapError("No context provided to BaseRenameFileAction.");var i=e.value;if(!i)return n.TPromise.wrapError("No new name provided to BaseRenameFileAction.");i=z(i);var o=z(this.element.name);if(i===o||this.validateFileName(this.element.parent,i))return n.TPromise.as(null);var r=this.runAction(i).then(function(e){e&&t.onSuccess(e)},function(e){t.onError(e)});return this.progressService&&this.progressService.showWhile(r,800),r},t.prototype.validateFileName=function(e,t){var n=this.element.name,i=t;return o.isLinux||(n=n.toLowerCase(),i=i.toLowerCase()),z(n)===z(i)?null:U(e,t,!1)},t.prototype.onSuccess=function(e){var t=null;this.element instanceof w.NewStatPlaceholder||(t=this.element.clone()),this.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(t,e))},t=__decorate([__param(3,N.IWorkspaceContextService),__param(4,k.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,P.IMessageService),__param(7,j),__param(8,R.IProgressService),__param(9,O.IEventService)],t)}(q);t.BaseRenameAction=Y;var $=function(e){function t(n,o,r,s,a,c,u,l){e.call(this,t.ID,i.localize(2,null),n,o,r,s,a,c,u,l),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.handleDirty().then(function(o){return o?n.TPromise.as(null):t.textFileService.isDirty(t.element.resource)?(t.onWarning(i.localize(3,null,h.getPathLabel(t.element.resource))),n.TPromise.as(null)):t.fileService.rename(t.element.resource,e).then(null,function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})})},t.ID="workbench.files.action.renameFile",t=__decorate([__param(1,N.IWorkspaceContextService),__param(2,k.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,P.IMessageService),__param(5,j),__param(6,R.IProgressService),__param(7,O.IEventService)],t)}(Y);t.RenameFileAction=$;var X=function(e){function t(t,n,i,o,r,s,a,c,u,l,d,h){e.call(this,t,n,a,c,u,l,d,h),s&&(this.presetFolder=s.isDirectory?s:s.parent),this.tree=i,this.isFile=o,this.renameAction=r}return __extends(t,e),t.prototype.run=function(e){var t=this;if(!e)return n.TPromise.wrapError("No context provided to BaseNewAction.");var i=e.viewletState;if(!i)return n.TPromise.wrapError("Invalid viewlet state provided to BaseNewAction.");var o=this.presetFolder;if(!o){var r=this.tree.getFocus();o=r?r.isDirectory?r:r.parent:this.tree.getInput()}return o?this.tree.reveal(o,.5).then(function(){return t.tree.expand(o).then(function(){var e=w.NewStatPlaceholder.addNewStatPlaceholder(o,!t.isFile);return t.renameAction.element=e,i.setEditable(e,{action:t.renameAction,validator:function(e){var n=t.renameAction.validateFileName(o,e);return n?{content:n,formatContent:!0,type:m.MessageType.ERROR}:null}}),t.tree.refresh(o).then(function(){return t.tree.expand(o).then(function(){return t.tree.reveal(e,.5).then(function(){t.tree.setHighlight(e);var n=t.tree.addListener(d.EventType.HIGHLIGHT,function(i){i.highlight||(e.destroy(),t.tree.refresh(o).done(null,u.onUnexpectedError),n())})})})})})}):n.TPromise.wrapError("Invalid parent folder to create.")},t=__decorate([__param(6,N.IWorkspaceContextService),__param(7,k.IWorkbenchEditorService),__param(8,_.IFileService),__param(9,P.IMessageService),__param(10,j),__param(11,O.IEventService)],t)}(q);t.BaseNewAction=X;var Q=function(e){function t(t,n,o,r,s,a,c,u,l){e.call(this,"workbench.action.files.newFile",i.localize(4,null),t,!0,l.createInstance(ie,n),null,o,r,s,a,c,u),this["class"]="explorer-action new-file",this._updateEnablement()}return __extends(t,e),t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService),__param(8,M.IInstantiationService)],t)}(X);t.NewFileAction=Q;var Z=function(e){function t(t,n,o,r,s,a,c,u,l){e.call(this,"workbench.action.files.newFolder",i.localize(5,null),t,!1,l.createInstance(oe,n),null,o,r,s,a,c,u),this["class"]="explorer-action new-folder",this._updateEnablement()}return __extends(t,e),t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService),__param(8,M.IInstantiationService)],t)}(X);t.NewFolderAction=Z;var J=function(e){function t(t,n,i,o){e.call(this,t,n),this.viewletService=i,this.instantiationService=o}return __extends(t,e),t.prototype.run=function(){var e=this;return this.viewletService.openViewlet(y.VIEWLET_ID,!0).then(function(t){return n.TPromise.timeout(100).then(function(){t.focus();var n=t,i=n.getExplorerView();i.isExpanded()||i.expand();var o=e.toDispose=e.instantiationService.createInstance(e.getAction(),i.getViewer(),null);return n.getActionRunner().run(o)})})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.toDispose&&(this.toDispose.dispose(),this.toDispose=null)},t=__decorate([__param(2,I.IViewletService),__param(3,M.IInstantiationService)],t)}(f.Action);t.BaseGlobalNewAction=J;var ee=function(e){function t(t,n,i,o,r,s){e.call(this,t,n),this.storageService=i,this.editorService=o,this.textFileService=r,this.untitledEditorService=s}return __extends(t,e),t.prototype.run=function(){var e=this.untitledEditorService.createOrGet();return this.textFileService.getWorkingFilesModel().addEntry(e.getResource()),this.editorService.openEditor(e)},t.ID="workbench.action.files.newUntitledFile",t.LABEL=i.localize(6,null),t=__decorate([__param(2,A.IStorageService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,T.IUntitledEditorService)],t)}(f.Action);t.GlobalNewFileAction=ee;var te=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getAction=function(){return Z},t.ID="workbench.action.files.newFolder",t.LABEL=i.localize(7,null),t}(J);t.GlobalNewFolderAction=te;var ne=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.validateFileName=function(t,n){return this.element instanceof w.NewStatPlaceholder?U(t,n,!1):e.prototype.validateFileName.call(this,t,n)},t}(Y);t.BaseCreateAction=ne;var ie=function(e){function t(n,i,o,r,s,a,c,u){e.call(this,t.ID,t.LABEL,n,i,o,r,s,a,c,u),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.fileService.createFile(c["default"].file(a.join(this.element.parent.resource.fsPath,e))).then(function(e){return t.textFileService.getWorkingFilesModel().addEntry(e.resource),e},function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})},t.ID="workbench.files.action.createFileFromExplorer",t.LABEL=i.localize(8,null),t=__decorate([__param(1,N.IWorkspaceContextService),__param(2,k.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,P.IMessageService),__param(5,j),__param(6,R.IProgressService),__param(7,O.IEventService)],t)}(ne);t.CreateFileAction=ie;var oe=function(e){function t(n,i,o,r,s,a,c,u){e.call(this,t.ID,t.LABEL,null,i,o,r,s,a,c,u),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.fileService.createFolder(c["default"].file(a.join(this.element.parent.resource.fsPath,e))).then(null,function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})},t.ID="workbench.files.action.createFolderFromExplorer",t.LABEL=i.localize(9,null),t=__decorate([__param(1,N.IWorkspaceContextService),__param(2,k.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,P.IMessageService),__param(5,j),__param(6,R.IProgressService),__param(7,O.IEventService)],t)}(ne);t.CreateFolderAction=oe;var re=function(e){function t(t,n,i,o,r,s,c,u,l,d,h){e.call(this,t,n,s,c,u,l,d,h),this.tree=i,this.element=o,this.useTrash=r&&!a.isUNC(o.resource.fsPath),this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){var e=this;if(this.tree&&this.tree.clearHighlight(),!this.skipConfirm){var t;if(t=this.useTrash?{message:this.element.isDirectory?i.localize(10,null,this.element.name):i.localize(11,null,this.element.name),detail:o.isWindows?i.localize(12,null):i.localize(13,null),primaryButton:o.isWindows?i.localize(14,null):i.localize(15,null)}:{message:this.element.isDirectory?i.localize(16,null,this.element.name):i.localize(17,null,this.element.name),detail:i.localize(18,null),primaryButton:i.localize(19,null)},!this.messageService.confirm(t))return n.TPromise.as(null)}return this.handleDirty().then(function(t){if(t)return n.TPromise.as(null);if(e.textFileService.isDirty(e.element.resource))return e.onWarning(i.localize(20,null,h.getPathLabel(e.element.resource))),n.TPromise.as(null);e.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(e.element.clone(),null));var o=e.fileService.del(e.element.resource,e.useTrash).then(function(){e.element.parent&&e.tree.setFocus(e.element.parent)},function(t){var n;e.useTrash&&(n=new f.Action("permanentDelete",i.localize(21,null),null,!0,function(){return e.useTrash=!1,e.skipConfirm=!0,e.run()})),e.onErrorWithRetry(t,function(){return e.run()},n);var o=new y.LocalFileChangeEvent(new w.FileStat(e.contextService.getWorkspace().resource,!0,!0),new w.FileStat(e.contextService.getWorkspace().resource,!0,!0));e.eventService.emit("files.internal:fileChanged",o),e.tree.DOMFocus()});return o})},t=__decorate([__param(5,N.IWorkspaceContextService),__param(6,k.IWorkbenchEditorService),__param(7,_.IFileService),__param(8,P.IMessageService),__param(9,j),__param(10,O.IEventService)],t)}(q);t.BaseDeleteFileAction=re;var se=function(e){function t(n,o,r,s,a,c,u,l){e.call(this,t.ID,i.localize(22,null),n,o,!0,r,s,a,c,u,l)}return __extends(t,e),t.ID="workbench.files.action.moveFileToTrash",t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService)],t)}(re);t.MoveFileToTrashAction=se;var ae=function(e){function t(n,o,r,s,a,c,u,l){e.call(this,t.ID,i.localize(23,null),n,o,!1,r,s,a,c,u,l)}return __extends(t,e),t.ID="workbench.files.action.deleteFile",t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService)],t)}(re);t.DeleteFileAction=ae;var ce=function(e){function t(n,o,r,s,a,c,u,l,d,h){e.call(this,t.ID,i.localize(24,null),s,a,c,u,l,d),this.progressService=h,this.tree=n,this.element=o,r&&(this["class"]=r),this._updateEnablement()}return __extends(t,e),t.prototype.getViewer=function(){return this.tree},t.prototype.run=function(e){var t,s=this,a=n.TPromise.as(null).then(function(){var n=e.input;if(n.files&&n.files.length>0){var a;a=s.element?s.element:s.tree.getFocus()||s.tree.getInput(),a.isDirectory||(a=a.parent);for(var u=[],l=0;l<n.files.length;l++){var d=n.files[l];u.push(d)}return s.fileService.resolveFile(a.resource).then(function(n){var l={};n.children.forEach(function(e){l[o.isLinux?e.name:e.name.toLowerCase()]=e});var d=!0;if(u.some(function(e){return!!l[o.isLinux?e.name:e.name.toLowerCase()]})){var h={message:i.localize(25,null),detail:i.localize(26,null),primaryButton:i.localize(27,null)};d=s.messageService.confirm(h)}if(d){u.length>1&&s.progressService&&(t=s.progressService.show(u.length));var p=[];return u.forEach(function(n){p.push(function(){return s.fileService.importFile(c["default"].file(n.path),a.resource).then(function(i){if(t&&t.worked(1),i.stat){var r=l[o.isLinux?n.name:n.name.toLowerCase()];r&&s.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(r,null)),s.eventService.emit("files.internal:fileChanged",new ue(i.stat,i.isNew,e.event))}},function(e){s.messageService.show(P.Severity.Error,e)})})}),r.sequence(p)}})}});return this.progressService&&!t&&this.progressService.showWhile(a,800),a.then(function(){s.tree.clearHighlight()},function(e){s.onError(e),s.tree.clearHighlight()})},t.ID="workbench.files.action.importFile",t=__decorate([__param(3,N.IWorkspaceContextService),__param(4,k.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,P.IMessageService),__param(7,j),__param(8,O.IEventService),__param(9,R.IProgressService)],t)}(q);t.ImportFileAction=ce;var ue=function(e){function t(t,n,i){e.call(this,null,t,i),this.isNew=n}return __extends(t,e),t.prototype.gotAdded=function(){return this.isNew},t.prototype.gotMoved=function(){return!1},t.prototype.gotUpdated=function(){return!this.isNew},t.prototype.gotDeleted=function(){return!1},t}(y.LocalFileChangeEvent);t.FileImportedEvent=ue;var le,de=function(e){function t(n,o,r,s,a,c,u,l){e.call(this,t.ID,i.localize(28,null),r,s,a,c,u,l),this.tree=n,this.element=o,this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){return le=this.element,this.tree&&this.tree.clearHighlight(),this.tree.DOMFocus(),n.TPromise.as(null)},t.ID="workbench.files.action.copyFile",t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService)],t)}(q);t.CopyFileAction=de;var he=function(e){function t(n,o,r,s,a,c,u,l,d){e.call(this,t.ID,i.localize(29,null),r,s,a,c,u,l),this.instantiationService=d,this.tree=n,this.element=o,this._updateEnablement()}return __extends(t,e),t.prototype._isEnabled=function(){if(!le)return!1;var e=this.tree.getInput(),t=e.find(le.resource);return t?this.element.resource.toString()===le.resource.toString()||!a.isEqualOrParent(this.element.resource.fsPath,le.resource.fsPath):(le=null,!1)},t.prototype.run=function(){var e,t=this;e=this.element.resource.toString()===le.resource.toString()?this.element.parent:this.element.isDirectory?this.element:this.element.parent;var n=this.instantiationService.createInstance(pe,this.tree,le,e);return n.run().then(function(){t.tree.DOMFocus()})},t.ID="workbench.files.action.pasteFile",t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,k.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,P.IMessageService),__param(6,j),__param(7,O.IEventService),__param(8,M.IInstantiationService)],t)}(q);t.PasteFileAction=he;var pe=function(e){function t(t,n,o,r,s,a,c,u,l,d){e.call(this,"workbench.files.action.duplicateFile",i.localize(30,null),r,s,a,c,u,l),this.progressService=d,this.tree=t,this.element=n,this.target=o&&o.isDirectory?o:n.parent,this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){var e=this;this.tree&&this.tree.clearHighlight();var t=this.fileService.copyFile(this.element.resource,this.findTarget()).then(function(t){e.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(null,t))},function(t){e.onError(t)});return this.progressService&&this.progressService.showWhile(t,800),t},t.prototype.onError=function(e){this.messageService.show(P.Severity.Error,e)},t.prototype.findTarget=function(){for(var e=this.tree.getInput(),t=this.element.name,n=c["default"].file(a.join(this.target.resource.fsPath,t));;){if(!e.find(n))break;t=this.toCopyName(t,this.element.isDirectory),n=c["default"].file(a.join(this.target.resource.fsPath,t))}return n},t.prototype.toCopyName=function(e,t){if(!t&&e.match(/(\d+)(\..*)$/))return e.replace(/(\d+)(\..*)$/,function(e,t,n){return parseInt(t)+1+n});var n=e.lastIndexOf(".");return!t&&n>=0?l.format("{0}.1{1}",e.substr(0,n),e.substr(n)):t&&e.match(/(\d+)$/)?e.replace(/(\d+)$/,function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return String(parseInt(t[0])+1)}):l.format("{0}.1",e)},t=__decorate([__param(3,N.IWorkspaceContextService),__param(4,k.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,P.IMessageService),__param(7,j),__param(8,O.IEventService),__param(9,R.IProgressService)],t)}(q);t.DuplicateFileAction=pe;var fe=function(e){function t(n,i,o,r){e.call(this,t.ID,t.LABEL),this.editorService=r,this.tree=n,this.preserveFocus=o,this.resource=i,this.updateEnablement()}return __extends(t,e),t.prototype.updateEnablement=function(){var e=this.editorService.getActiveEditor();this.enabled=!e||e.position!==L.Position.RIGHT},t.prototype.run=function(){return this.tree.clearHighlight(),this.editorService.openEditor({resource:this.resource,options:{preserveFocus:this.preserveFocus}},!0)},t.ID="workbench.files.action.openToSide",t.LABEL=i.localize(31,null),t=__decorate([__param(3,k.IWorkbenchEditorService)],t)}(f.Action);t.OpenToSideAction=fe;var me,ve=function(e){function t(t,n){e.call(this,"workbench.files.action.selectForCompare",i.localize(32,null)),this.tree=n,this.resource=t,this.enabled=!0}return __extends(t,e),t.prototype.run=function(){return me=this.resource,this.tree&&(this.tree.clearHighlight(),this.tree.DOMFocus()),n.TPromise.as(null)},t}(f.Action);t.SelectResourceForCompareAction=ve;var ge=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.quickOpenService=i,this.instantiationService=o,this.editorService=r,this.messageService=s,this.eventService=a}return __extends(t,e),t.prototype.run=function(){var e=this,t=S.asFileEditorInput(this.editorService.getActiveEditorInput());if(t){me=t.getResource();var o=this.eventService.addListener(g.EventType.EDITOR_INPUT_OPENING,function(t){o();var n=S.asFileEditorInput(t.editorInput);if(n){var r=e.instantiationService.createInstance(ye,n.getResource(),null);r._isEnabled()?(t.prevent(),r.run().done(function(){return r.dispose()})):e.messageService.show(P.Severity.Info,i.localize(34,null,a.basename(me.fsPath)))}});this.quickOpenService.show().then(function(){o()})}else this.messageService.show(P.Severity.Info,i.localize(35,null));return n.TPromise.as(!0)},t.ID="workbench.files.action.compareFileWith",t.LABEL=i.localize(33,null),t=__decorate([__param(2,x.IQuickOpenService),__param(3,M.IInstantiationService),__param(4,k.IWorkbenchEditorService),__param(5,P.IMessageService),__param(6,O.IEventService)],t)}(f.Action);t.GlobalCompareResourcesAction=ge;var ye=function(e){function t(n,i,o,r,s){e.call(this,"workbench.files.action.compareFiles",t.computeLabel()),this.contextService=o,this.instantiationService=r,this.editorService=s,this.tree=i,this.resource=n}return __extends(t,e),t.computeLabel=function(){return me?i.localize(36,null,a.basename(me.fsPath)):i.localize(37,null)},t.prototype.getLabel=function(){return t.computeLabel()},t.prototype._isEnabled=function(){if(!me)return!1;if(this.tree){var e=this.tree.getInput();if(e instanceof w.FileStat){var t=e.find(me);if(!t)return me=null,!1}}if(this.resource.toString()===me.toString())return!1;var n=s.guessMimeTypes(this.resource.fsPath).join(", "),i=s.guessMimeTypes(me.fsPath).join(", ");if(n===i)return!0;var o=s.isBinaryMime(n),r=s.isBinaryMime(i);return o===r},t.prototype.run=function(){this.tree&&this.tree.clearHighlight();var e=this.instantiationService.createInstance(E.FileEditorInput,me,void 0,void 0),t=this.instantiationService.createInstance(E.FileEditorInput,this.resource,void 0,void 0);return this.editorService.openEditor(new b.DiffEditorInput(b.toDiffLabel(me,this.resource,this.contextService),null,e,t))},t=__decorate([__param(2,N.IWorkspaceContextService),__param(3,M.IInstantiationService),__param(4,k.IWorkbenchEditorService)],t)}(f.Action);t.CompareResourcesAction=ye;var _e=function(e){function t(t,o){e.call(this,"workbench.files.action.refreshExplorer",i.localize(38,null),o,!0,function(e){return t.getViewer().getHighlight()?n.TPromise.as(null):(t.focusBody(),t.refresh(!0,!0,!0))})}return __extends(t,e),t}(f.Action);t.RefreshViewExplorerAction=_e;var be=function(e){function t(t,n,i){e.call(this,t,n),this.messageService=i}return __extends(t,e),t.prototype.run=function(){var e=this;return this.doRun().then(function(){return!0},function(t){e.messageService.show(P.Severity.Error,u.toErrorMessage(t,!1))})},t}(f.Action);t.BaseActionWithErrorReporting=be;var Se=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n,a),this.editorService=i,this.textFileService=o,this.untitledEditorService=r,this.instantiationService=s,this.enabled=!0}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e},t.prototype.doRun=function(){var e,t=this;if(e=this.resource?this.resource:S.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0)){if(this.isSaveAs()||"untitled"===e.scheme){var i,o=W(this.editorService,e);if("untitled"===e.scheme){var r=this.untitledEditorService.get(e).getMime();s.isUnspecific(r)||(i=[r,s.MIME_TEXT].join(", "))}var a;if("untitled"===e.scheme)a=this.untitledEditorService.get(e).getEncoding();else if("file"===e.scheme){var u=C.CACHE.get(e);a=u&&u.getEncoding()}var l;if(o.length){var d=this.editorService.getActiveEditor();d&&o.indexOf(d.position)>=0&&(l=d.getSelection())}var h=void 0;return h=!this.isSaveAs()&&"untitled"===e.scheme&&this.untitledEditorService.hasAssociatedFilePath(e)?this.textFileService.save(e).then(function(t){return t?c["default"].file(e.fsPath):null}):this.textFileService.saveAs(e),h.then(function(r){if(r){var s=n.TPromise.as(null);if(r.toString()!==e.toString()&&o.length){var c,u=t.instantiationService.createInstance(E.FileEditorInput,r,i,a);l&&(c=new S.TextEditorOptions,c.selection(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn)),s=t.editorService.openEditor(u,c,o[0]).then(function(){return o.length>1?t.editorService.openEditor(u,c,o[1]).then(function(){return o.length>2?t.editorService.openEditor(u,c,o[2]):void 0}):void 0})}return s}})}return this.textFileService.save(e)}return n.TPromise.as(!1)},t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,T.IUntitledEditorService),__param(5,M.IInstantiationService),__param(6,P.IMessageService)],t)}(be);t.BaseSaveFileAction=Se;var Ee=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.isSaveAs=function(){return!1},t.ID="workbench.action.files.save",t.LABEL=i.localize(39,null),t}(Se);t.SaveFileAction=Ee;var we=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.isSaveAs=function(){return!0},t.ID="workbench.action.files.saveAs",t.LABEL="Save As...",t}(Se);t.SaveFileAsAction=we;var Ce=function(e){function t(t,n,i,o,r,s,a,c){e.call(this,t,n,c),this.editorService=i,this.textFileService=o,this.untitledEditorService=r,this.instantiationService=s,this.eventService=a,this.toDispose=[],this.lastIsDirty=this.textFileService.isDirty(),this.enabled=this.lastIsDirty,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_DIRTY,function(t){return e.updateEnablement(!0)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_SAVED,function(t){return e.updateEnablement(!1)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_REVERTED,function(t){return e.updateEnablement(!1)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_SAVE_ERROR,function(t){return e.updateEnablement(!0)})),this.includeUntitled()&&(this.toDispose.push(this.eventService.addListener2(g.EventType.UNTITLED_FILE_DIRTY,function(){return e.updateEnablement(!0)})),this.toDispose.push(this.eventService.addListener2(g.EventType.UNTITLED_FILE_DELETED,function(){return e.updateEnablement(!1)})))},t.prototype.updateEnablement=function(e){this.lastIsDirty!==e&&(this.enabled=this.textFileService.isDirty(),this.lastIsDirty=this.enabled)},t.prototype.doRun=function(){var e=this,t=Object.create(null);return this.textFileService.getDirty().filter(function(e){return"untitled"===e.scheme}).map(function(t){return e.untitledEditorService.get(t)}).filter(function(e){return!!e}).forEach(function(e){return t[e.getResource().toString()]={mime:e.getMime(),encoding:e.getEncoding()}}),this.textFileService.saveAll(this.includeUntitled()).then(function(i){if(e.includeUntitled()){var o=i.results.filter(function(e){return"untitled"===e.source.scheme}),r=[];o.forEach(function(n){if(n.success){var i=W(e.editorService,n.source),o=void 0,a=t[n.source.toString()]&&t[n.source.toString()].mime;s.isUnspecific(a)||(o=[a,s.MIME_TEXT].join(", "));var c=t[n.source.toString()]&&t[n.source.toString()].encoding,u=e.instantiationService.createInstance(E.FileEditorInput,n.target,o,c),l=new S.EditorOptions;l.preserveFocus=!0,i.forEach(function(t){r.push(function(){return e.editorService.openEditor(u,l,t)})})}});var a=n.TPromise.as(null);return r.length&&(a=r[0]().then(function(){return r.length>1?r[1]().then(function(){return r.length>2?r[2]():void 0}):void 0})),a}})},t.prototype.dispose=function(){this.toDispose=v.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,T.IUntitledEditorService),__param(5,M.IInstantiationService),__param(6,O.IEventService),__param(7,P.IMessageService)],t)}(be);t.BaseSaveAllAction=Ce;var Te=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"class",{get:function(){return"explorer-action save-all"},enumerable:!0,configurable:!0}),t.prototype.includeUntitled=function(){return!0},t.ID="workbench.action.files.saveAll",t.LABEL=i.localize(40,null),t}(Ce);t.SaveAllAction=Te;var ke=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.includeUntitled=function(){return!1},t.ID="workbench.action.files.saveFiles",t.LABEL=i.localize(41,null),t}(Ce);t.SaveFilesAction=ke;var xe=function(e){function t(t,n,i,o){e.call(this,t,n),this.editorService=i,this.textFileService=o,this.enabled=!0}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e},t.prototype.run=function(){var e;if(this.resource)e=this.resource;else{var t=S.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);t&&(e=t.getResource())}return e&&"untitled"!==e.scheme?this.textFileService.revert(e,!0):n.TPromise.as(!0)},t.ID="workbench.action.files.revert",t.LABEL=i.localize(42,null),t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j)],t)}(f.Action);t.RevertFileAction=xe;var Ie=function(e){function t(t,n,i,o,r,s,a){e.call(this,"workbench.files.action.openResourcesAction"),this.partService=i,this.editorService=o,this.viewletService=r,this.textFileService=s,this.contextService=a,this.resources=t,this.diffMode=n}return __extends(t,e),t.prototype.run=function(){var e=this;return this.partService.joinCreation().then(function(){var t=n.TPromise.as(null);return e.partService.isSideBarHidden()||(t=e.viewletService.openViewlet(y.VIEWLET_ID,!1)),t.then(function(){return e.resources.forEach(function(t){var n=t.resource,i=e.contextService.getWorkspace();i&&a.isEqualOrParent(n.fsPath,i.resource.fsPath)||e.textFileService.getWorkingFilesModel().addEntry(n)}),e.diffMode?n.TPromise.join(e.resources.map(function(t){return e.editorService.inputToType(t)})).then(function(t){return e.editorService.openEditor(new b.DiffEditorInput(b.toDiffLabel(e.resources[0].resource,e.resources[1].resource,e.contextService),null,t[0],t[1]))}):1===e.resources.length?e.editorService.openEditor(e.resources[0]):e.editorService.setEditors(e.resources)})})},t=__decorate([__param(2,D.IPartService),__param(3,k.IWorkbenchEditorService),__param(4,I.IViewletService),__param(5,j),__param(6,N.IWorkspaceContextService)],t)}(f.Action);t.OpenResourcesAction=Ie;var De=function(e){function t(t,n,i,o,r,s,a,c,u,l){e.call(this,t,n,i),this.untitledEditorService=s,this.editorService=a,this.textFileService=c,this.messageService=u,this.quickOpenService=l,this.model=o,this.elements=r?r.map(function(e){return e.resource}):void 0}return __extends(t,e),t.prototype.run=function(){var e,t=this,i=this.model.getEntries().length;e=this.elements?this.elements.some(function(e){return t.textFileService.isDirty(e)}):this.textFileService.isDirty();var o=n.TPromise.as(null);if(e){var r=this.textFileService.confirmSave(this.elements);switch(r){case y.ConfirmResult.SAVE:o=this.elements?this.textFileService.saveAll(this.elements):this.textFileService.saveAll(!0);break;case y.ConfirmResult.DONT_SAVE:o=this.elements?this.textFileService.revertAll(this.elements):this.textFileService.revertAll();break;case y.ConfirmResult.CANCEL:return n.TPromise.as(null)}}return o.then(function(e){var n=[];if(n=t.elements?t.elements:t.model.getEntries().map(function(e){return e.resource}),e){var o=e.results.filter(function(e){return!e.success}).map(function(e){return e.source.toString()});n=n.filter(function(e){return o.indexOf(e.toString())<0})}n.length===i?t.model.clear():n.forEach(function(e){return t.model.removeEntry(e)}),n.forEach(function(e){return t.disposeResource(e)})},function(e){t.messageService.show(P.Severity.Error,e)})},t.prototype.disposeResource=function(e){K(e,this.editorService,this.quickOpenService).forEach(function(e){e.isDisposed()||e.dispose(!0)});var t=this.untitledEditorService.get(e);t&&t.dispose()},t=__decorate([__param(5,T.IUntitledEditorService),__param(6,k.IWorkbenchEditorService),__param(7,j),__param(8,P.IMessageService),__param(9,x.IQuickOpenService)],t)}(f.Action);t.BaseCloseWorkingFileAction=De;var Ae=function(e){function t(n,o,r,s,a,c){e.call(this,t.ID,i.localize(43,null),"action-close-all-files",n,null,o,r,s,a,c),this.enabled=n.count()>0,this.listenerToDispose=n.onModelChange(this.onModelChange,this);
}return __extends(t,e),t.prototype.run=function(){var t=this;return e.prototype.run.call(this).then(function(){return V(t.editorService)})},t.prototype.onModelChange=function(e){this.enabled=this.model.count()>0},t.prototype.dispose=function(){this.listenerToDispose&&(this.listenerToDispose.dispose(),this.listenerToDispose=null),e.prototype.dispose.call(this)},t.ID="workbench.files.action.closeAllWorkingFiles",t=__decorate([__param(1,T.IUntitledEditorService),__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,P.IMessageService),__param(5,x.IQuickOpenService)],t)}(De);t.CloseAllWorkingFilesAction=Ae;var Le=function(e){function t(n,o,r,s,a,c,u){e.call(this,t.ID,i.localize(44,null),o.dirty?"action-close-dirty-file":"action-close-file",n,[o],r,s,a,c,u)}return __extends(t,e),t.ID="workbench.files.action.closeOneWorkingFile",t=__decorate([__param(2,T.IUntitledEditorService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,P.IMessageService),__param(6,x.IQuickOpenService)],t)}(De);t.CloseOneWorkingFileAction=Le;var Oe=function(e){function t(n,o,r,s,a,c,u){e.call(this,t.ID,i.localize(45,null),"action-close-file",n,n.getEntries().filter(function(e){return e!==o}),r,s,a,c,u)}return __extends(t,e),t.prototype.run=function(){var t=this;return e.prototype.run.call(this).then(function(){return V(t.editorService)})},t.ID="workbench.files.action.closeOtherWorkingFiles",t=__decorate([__param(2,T.IUntitledEditorService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,P.IMessageService),__param(6,x.IQuickOpenService)],t)}(De);t.CloseOtherWorkingFilesAction=Oe;var Me=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.textFileService=r,this.messageService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor(),t=this.editorService.getActiveEditorInput(),o=S.getUntitledOrFileResource(t,!0);if(o){var r=this.textFileService.getWorkingFilesModel(),s=r.findEntry(o);if(s){var a=this.instantiationService.createInstance(Le,r,s);a.run().done(function(){return a.dispose()},u.onUnexpectedError)}else t instanceof b.DiffEditorInput&&(t=t.getModifiedInput()),t instanceof E.FileEditorInput?K(t.getResource(),this.editorService,this.quickOpenService).forEach(function(e){e.isDisposed()||e.dispose(!0)}):t.dispose()}else e?this.editorService.closeEditor(e).done(null,u.onUnexpectedError):this.messageService.show(P.Severity.Info,i.localize(47,null));return n.TPromise.as(!0)},t.ID="workbench.files.action.closeFile",t.LABEL=i.localize(46,null),t=__decorate([__param(2,M.IInstantiationService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,P.IMessageService),__param(6,x.IQuickOpenService)],t)}(f.Action);t.CloseFileAction=Me;var Pe=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.textFileService=r,this.messageService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e,t=this,n=this.textFileService.getWorkingFilesModel(),i=S.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0);return e=i&&n.hasEntry(i)?this.instantiationService.createInstance(Oe,n,n.findEntry(i)):this.instantiationService.createInstance(Ae,n),e.run().then(function(){e.dispose(),H(t.editorService,t.quickOpenService,t.textFileService,i)})},t.ID="workbench.files.action.closeOtherFiles",t.LABEL=i.localize(48,null),t=__decorate([__param(2,M.IInstantiationService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,P.IMessageService),__param(6,x.IQuickOpenService)],t)}(f.Action);t.CloseOtherFilesAction=Pe;var Re=function(e){function t(t,n,i,o,r,s,a){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.textFileService=r,this.messageService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.instantiationService.createInstance(Ae,this.textFileService.getWorkingFilesModel());return t.run().then(function(){t.dispose(),H(e.editorService,e.quickOpenService,e.textFileService)})},t.ID="workbench.files.action.closeAllFiles",t.LABEL=i.localize(49,null),t=__decorate([__param(2,M.IInstantiationService),__param(3,k.IWorkbenchEditorService),__param(4,j),__param(5,P.IMessageService),__param(6,x.IQuickOpenService)],t)}(f.Action);t.CloseAllFilesAction=Re;var Ne=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.editorService=i,this.textFileService=o,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=this.textFileService.getWorkingFilesModel();if(0!==e.count()){var t=S.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0);return this.editorService.openEditor({resource:e.next(t).resource})}return this.messageService.show(P.Severity.Info,i.localize(51,null)),n.TPromise.as(!0)},t.ID="workbench.files.action.openNextWorkingFile",t.LABEL=i.localize(50,null),t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,P.IMessageService)],t)}(f.Action);t.OpenNextWorkingFile=Ne;var Fe=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.editorService=i,this.textFileService=o,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=this.textFileService.getWorkingFilesModel();if(0!==e.count()){var t=S.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0);return this.editorService.openEditor({resource:e.previous(t).resource})}return this.messageService.show(P.Severity.Info,i.localize(53,null)),n.TPromise.as(!0)},t.ID="workbench.files.action.openPreviousWorkingFile",t.LABEL=i.localize(52,null),t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,P.IMessageService)],t)}(f.Action);t.OpenPreviousWorkingFile=Fe;var We=function(e){function t(t,n,i,o,r){e.call(this,t,n),this.editorService=i,this.textFileService=o,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=S.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?this.textFileService.getWorkingFilesModel().addEntry(e.getResource()):this.messageService.show(P.Severity.Info,i.localize(55,null)),n.TPromise.as(!0)},t.ID="workbench.files.action.addToWorkingFiles",t.LABEL=i.localize(54,null),t=__decorate([__param(2,k.IWorkbenchEditorService),__param(3,j),__param(4,P.IMessageService)],t)}(f.Action);t.AddToWorkingFiles=We;var He=function(e){function t(t,n,i){e.call(this,t,n),this.viewletService=i}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(y.VIEWLET_ID,!0).then(function(e){e.getWorkingFilesView().expand(),e.getWorkingFilesView().getViewer().DOMFocus()})},t.ID="workbench.files.action.focusWorkingFiles",t.LABEL=i.localize(56,null),t=__decorate([__param(2,I.IViewletService)],t)}(f.Action);t.FocusWorkingFiles=He;var Ve=function(e){function t(t,n,i){e.call(this,t,n),this.viewletService=i}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(y.VIEWLET_ID,!0).then(function(e){var t=e.getExplorerView();t&&(t.expand(),t.getViewer().DOMFocus())})},t.ID="workbench.files.action.focusFilesExplorer",t.LABEL=i.localize(57,null),t=__decorate([__param(2,I.IViewletService)],t)}(f.Action);t.FocusFilesExplorer=Ve,t.keybindingForAction=B,t.validateFileName=U,t.getWellFormedFileName=z;var Ke;Ke||(Ke=p.register("FileActionsDiagnostics",function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log(e[1]+" - "+e[0]+" (time: "+e[2].getTime()+" ["+e[2].toUTCString()+"])")}))});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileTracker",["require","exports","vs/base/common/errors","vs/nls!vs/workbench/parts/files/browser/fileTracker","vs/base/common/mime","vs/base/common/uri","vs/base/common/paths","vs/workbench/common/editor/diffEditorInput","vs/workbench/common/editor","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/common/editor/iframeEditorInput","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/common/events","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/activity/common/activityService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S=function(){function e(e,t,n,i,o,r,s){this.eventService=e,this.quickOpenService=t,this.editorService=n,this.activityService=i,this.textFileService=o,this.instantiationService=r,this.untitledEditorService=s,this.toUnbind=[],this.workingFiles=o.getWorkingFilesModel(),this.registerListeners()}return e.prototype.getId=function(){return"vs.files.filetracker"},e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(f.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)})),this.toUnbind.push(this.eventService.addListener(f.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledEditorDeleted(t)})),this.toUnbind.push(this.eventService.addListener(f.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledEditorDirty(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVING,function(t){return e.onTextFileSaving(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toUnbind.push(this.eventService.addListener("files.internal:fileChanged",function(t){return e.onLocalFileChange(t)})),this.toUnbind.push(this.eventService.addListener(l.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)}))},e.prototype.onEditorInputChanged=function(e){this.disposeTextFileModels()},e.prototype.onTextFileDirty=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.textFileService.getAutoSaveMode()!==u.AutoSaveMode.AFTER_SHORT_DELAY&&this.updateActivityBadge()},e.prototype.onTextFileSaving=function(e){this.emitInputStateChangeEvent(e.getAfter().resource)},e.prototype.onTextFileSaveError=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.updateActivityBadge()},e.prototype.onTextFileSaved=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.onTextFileReverted=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.onUntitledEditorDirty=function(e){var t=this.untitledEditorService.get(e.resource);t&&this.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(t)),this.updateActivityBadge()},e.prototype.onUntitledEditorDeleted=function(e){var t=this.untitledEditorService.get(e.resource);t&&this.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(t)),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.updateActivityBadge=function(){var e=this.textFileService.getDirty().length;this.lastDirtyCount=e,e>0?this.activityService.showActivity(u.VIEWLET_ID,new y.NumberBadge(e,function(t){return i.localize(0,null,e)}),"explorer-viewlet-label"):this.activityService.clearActivity(u.VIEWLET_ID)},e.prototype.emitInputStateChangeEvent=function(e){var t=this,n=this.editorService.getVisibleEditors();n.forEach(function(n){var i=n.input;if(i instanceof a.DiffEditorInput&&(i=i.getModifiedInput()),i instanceof d.FileEditorInput){var o=i;if(o.getResource().toString()===e.toString()){var r=n.input instanceof a.DiffEditorInput?n.input:o;t.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(r))}}})},e.prototype.onLocalFileChange=function(e){if(e.gotMoved()){var t=e.getBefore(),n=e.getAfter();this.handleMovedFileInVisibleEditors(t?t.resource:null,n?n.resource:null,n?n.mime:null)}var i=e.getBefore();(e.gotMoved()||e.gotDeleted())&&this.disposeAll(i.resource,this.quickOpenService.getEditorHistory())},e.prototype.onFileChanges=function(t){var i=this,o=t.getDeleted();o&&o.length>0&&o.forEach(function(e){i.disposeAll(e.resource,i.quickOpenService.getEditorHistory())}),t.getUpdated().map(function(e){return p.CACHE.get(e.resource)}).filter(function(t){var n=i.canDispose(t);return n?!((new Date).getTime()-t.getLastDirtyTime()<e.FILE_CHANGE_UPDATE_DELAY):!1}).forEach(function(e){return p.CACHE.dispose(e.getResource())});var r=this.editorService.getVisibleEditors();r.forEach(function(o){var r=o.input;if(r instanceof a.DiffEditorInput&&(r=i.getMatchingFileEditorInputFromDiff(r,t)),r instanceof d.FileEditorInput){var s=r,f=s.getResource();if(t.contains(f,l.FileChangeType.UPDATED)||t.contains(f,l.FileChangeType.ADDED)){var m=p.CACHE.get(f);if(m){var v=m.getState();if(v===p.State.SAVED){var g=m.getLastDirtyTime();if((new Date).getTime()-g>e.FILE_CHANGE_UPDATE_DELAY){var y=o.getControl(),_=y.saveViewState(),b=m.getLastModifiedTime();m.load().done(function(){m.getLastModifiedTime()!==b&&i.isEditorShowingPath(o,m.getResource())&&y.restoreViewState(_)},n.onUnexpectedError)}}}else if(o.getId()===u.BINARY_FILE_EDITOR_ID){var S=new c.EditorOptions;S.forceOpen=!0,S.preserveFocus=!0,i.editorService.openEditor(o.input,S,o.position).done(null,n.onUnexpectedError)}}}else if(r instanceof h.IFrameEditorInput){var E=r;t.contains(E.getResource(),l.FileChangeType.UPDATED)&&o.reload()}})},e.prototype.isEditorShowingPath=function(e,t){if(!e.isVisible())return!1;var n=e.getInput();return n?(n instanceof a.DiffEditorInput&&(n=n.getModifiedInput()),n instanceof d.FileEditorInput&&n.getResource().toString()===t.toString()):!1},e.prototype.handleMovedFileInVisibleEditors=function(e,t,i){var u=this,l=this.editorService.getVisibleEditors();l.forEach(function(l){var p=l.input;p instanceof a.DiffEditorInput&&(p=p.getModifiedInput());var f;if(p instanceof d.FileEditorInput?f=p.getResource():p instanceof h.IFrameEditorInput&&(f=p.getResource()),f){var m=!1;if(s.isEqualOrParent(f.fsPath,e.fsPath)&&(m=!0),m){var v=void 0;if(e.toString()===f.toString())v=t;else{var g=f.fsPath.indexOf(e.fsPath);v=r["default"].file(s.join(t.fsPath,f.fsPath.substr(g+e.fsPath.length+1)))}var y=void 0,_=new c.EditorOptions;if(_.preserveFocus=!0,p instanceof d.FileEditorInput)y=u.instantiationService.createInstance(d.FileEditorInput,v,i||o.MIME_UNKNOWN,void 0);else if(p instanceof h.IFrameEditorInput){var b=p;y=b.createNew(v)}y&&u.editorService.openEditor(y,_,l.position).done(null,n.onUnexpectedError)}}})},e.prototype.getMatchingFileEditorInputFromDiff=function(e,t){var n=e.getModifiedInput(),i=this.getMatchingFileEditorInputFromInput(n,t);if(i)return i;var o=e.getOriginalInput();return this.getMatchingFileEditorInputFromInput(o,t)},e.prototype.getMatchingFileEditorInputFromInput=function(e,t){if(e instanceof d.FileEditorInput)if(t instanceof r["default"]){var n=t;if(this.containsResource(e,n))return e}else{var i=t;if(i.contains(e.getResource(),l.FileChangeType.UPDATED))return e}return null},e.prototype.disposeAll=function(e,t){var n=this;if(!this.textFileService.isDirty(e)){for(var i=d.FileEditorInput.getAll(e),o=0;o<t.length;o++){var r=t[o];r instanceof d.FileEditorInput&&this.containsResource(r,e)?i.push(r):r instanceof h.IFrameEditorInput&&this.containsResource(r,e)&&i.push(r)}var s=this.editorService.getVisibleEditors();s.forEach(function(t){var o=t.input;o instanceof a.DiffEditorInput?(o=n.getMatchingFileEditorInputFromDiff(o,e),o instanceof d.FileEditorInput&&i.push(o)):o instanceof d.FileEditorInput&&n.containsResource(o,e)?i.push(o):o instanceof h.IFrameEditorInput&&n.containsResource(o,e)&&i.push(o)}),i.forEach(function(e){if(!e.isDisposed())if(e instanceof d.FileEditorInput){var t=e;t.dispose(!0)}else e.dispose()})}},e.prototype.containsResource=function(e,t){var n;return n=e instanceof d.FileEditorInput?e.getResource():e.getResource(),!!s.isEqualOrParent(n.fsPath,t.fsPath)},e.prototype.disposeTextFileModels=function(){var e=this;p.CACHE.getAll().filter(function(t){return!e.workingFiles.hasEntry(t.getResource())&&e.canDispose(t)}).forEach(function(e){return p.CACHE.dispose(e.getResource())})},e.prototype.canDispose=function(e){return e?e.textEditorModel&&e.textEditorModel.isAttachedToEditor()?!1:e.getState()!==p.State.SAVED?!1:!this.editorService.getVisibleEditors().some(function(t){if(t.input instanceof h.IFrameEditorInput){var n=t.input.getResource();return n&&n.toString()===e.getResource().toString()}return!1}):!1},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e.FILE_CHANGE_UPDATE_DELAY=2e3,e=__decorate([__param(0,_.IEventService),__param(1,g.IQuickOpenService),__param(2,v.IWorkbenchEditorService),__param(3,y.IActivityService),__param(4,u.ITextFileService),__param(5,b.IInstantiationService),__param(6,m.IUntitledEditorService)],e)}();t.FileTracker=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/saveErrorHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/saveErrorHandler","vs/base/common/errors","vs/base/common/paths","vs/base/common/actions","vs/base/common/uri","vs/base/common/mime","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/resourceEditorInput","vs/workbench/common/editor/diffEditorInput","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/fileActions","vs/platform/files/common/files","vs/workbench/services/editor/common/editorService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=function(){function e(e,t){this.messageService=e,this.instantiationService=t}return e.prototype.onSaveError=function(e,t){var a,c=this;if(e.fileOperationResult===f.FileOperationResult.FILE_MODIFIED_SINCE)a=this.instantiationService.createInstance(T,t,null);else{var u=e.fileOperationResult===f.FileOperationResult.FILE_READ_ONLY,l=[];l.push(y.CancelAction),u?l.push(new s.Action("workbench.files.action.overwrite",i.localize(0,null),null,!0,function(){return t.isDisposed()?n.TPromise.as(!0):t.save(!0).then(function(){return!0})})):l.push(new s.Action("workbench.files.action.retry",i.localize(1,null),null,!0,function(){var e=c.instantiationService.createInstance(p.SaveFileAction,p.SaveFileAction.ID,p.SaveFileAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})})),l.push(new s.Action("workbench.files.action.discard",i.localize(2,null),null,!0,function(){var e=c.instantiationService.createInstance(p.RevertFileAction,p.RevertFileAction.ID,p.RevertFileAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})})),l.push(new s.Action("workbench.files.action.saveAs",p.SaveFileAsAction.LABEL,null,!0,function(){var e=c.instantiationService.createInstance(p.SaveFileAsAction,p.SaveFileAsAction.ID,p.SaveFileAsAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})}));var d=void 0;d=u?i.localize(3,null,r.basename(t.getResource().fsPath)):i.localize(4,null,r.basename(t.getResource().fsPath),o.toErrorMessage(e,!1)),a={message:d,actions:l}}this.messageService&&this.messageService.show(y.Severity.Error,a)},e=__decorate([__param(0,y.IMessageService),__param(1,g.IInstantiationService)],e)}();t.SaveErrorHandler=E;var w=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,n,i,o,r),this.messageService=s,this.instantiationService=a,this.eventService=c,this.editorService=u,this.model=t}return __extends(t,e),t.prototype.getModel=function(){return this.model},t.prototype.getId=function(){return t.ID},t.ID="workbench.editors.files.conflictResolutionDiffEditorInput",t=__decorate([__param(5,y.IMessageService),__param(6,g.IInstantiationService),__param(7,v.IEventService),__param(8,m.IWorkbenchEditorService)],t)}(d.DiffEditorInput);t.ConflictResolutionDiffEditorInput=w;var C=function(e){function t(t,n,i,o,r,s,c,u){e.call(this,i,o,a["default"].create("disk",null,t.fsPath),r,c),this.modeService=s,this.fileService=u,this.fileResource=t,this.mime=n}return __extends(t,e),t.prototype.getLastModified=function(){return this.lastModified},t.prototype.resolve=function(t){var n=this;return this.fileService.resolveContent(this.fileResource).then(function(i){n.lastModified=i.mtime;var o=n.modelService.getModel(n.resource);return o?o.setValue(i.value):(n.modelService.createModel(i.value,n.modeService.getOrCreateMode(n.mime),n.resource),n.createdEditorModel=!0),e.prototype.resolve.call(n,t)})},t.prototype.dispose=function(){this.createdEditorModel&&(this.modelService.destroyModel(this.resource),this.createdEditorModel=!1),e.prototype.dispose.call(this)},t=__decorate([__param(4,S.IModelService),__param(5,b.IModeService),__param(6,g.IInstantiationService),__param(7,f.IFileService)],t)}(l.ResourceEditorInput);t.FileOnDiskEditorInput=C;var T=function(){function e(e,t,o,a,u,l){var d=this;this.messageService=o,this.instantiationService=a,this.contextService=u,this.editorService=l,this.model=e;var p=e.getResource();t?this.message=t:this.message=i.localize(5,null,r.basename(p.fsPath)),this.actions=[new s.Action("workbench.files.action.resolveConflict",i.localize(6,null),null,!0,function(){if(!d.model.isDisposed()){var e=c.guessMimeTypes(p.fsPath).join(", "),t=d.instantiationService.createInstance(C,p,e,r.basename(p.fsPath),p.fsPath),o=d.instantiationService.createInstance(h.FileEditorInput,p,e,void 0),s=d.instantiationService.createInstance(w,d.model,i.localize(7,null,o.getName(),d.contextService.getConfiguration().env.appName),i.localize(8,null,o.getDescription()),t,o);return d.editorService.openEditor(s).then(function(){d.model.setConflictResolutionMode(),d.messageService.show(y.Severity.Info,i.localize(9,null))})}return n.TPromise.as(!0)})]}return e=__decorate([__param(2,y.IMessageService),__param(3,g.IInstantiationService),__param(4,_.IWorkspaceContextService),__param(5,m.IWorkbenchEditorService)],e)}(),k=function(e){function t(t,n,o){e.call(this,"workbench.files.action.acceptLocalChanges",i.localize(10,null),"conflict-editor-action accept-changes"),this.messageService=t,this.instantiationService=n,this.editorService=o,this.messagesToHide=[]}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.input,n=t.getModel(),o=n.getValue();return t.resolve(!1).then(function(r){var s=t.originalInput.getLastModified();return n.revert().then(function(){var r=n.getLastModifiedTime();return s>=r?(n.textEditorModel.setValue(o),n.save().then(function(){for(;e.messagesToHide.length;)e.messagesToHide.pop()();var i=e.instantiationService.createInstance(h.FileEditorInput,n.getResource(),c.guessMimeTypes(n.getResource().fsPath).join(", "),void 0);return e.editorService.openEditor(i,null,e.position).then(function(){t.dispose()})})):(n.setConflictResolutionMode(),n.textEditorModel.setValue(o),t.originalInput.resolve(!0).then(function(){e.messagesToHide.push(e.messageService.show(y.Severity.Info,i.localize(11,null)))}))})})},t=__decorate([__param(0,y.IMessageService),__param(1,g.IInstantiationService),__param(2,m.IWorkbenchEditorService)],t)}(u.EditorInputAction);t.AcceptLocalChangesAction=k;var x=function(e){function t(t,n){e.call(this,"workbench.action.files.revert",i.localize(12,null),"conflict-editor-action revert-changes"),this.instantiationService=t,this.editorService=n}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.input,n=t.getModel();return n.revert().then(function(){var i=e.instantiationService.createInstance(h.FileEditorInput,n.getResource(),c.guessMimeTypes(n.getResource().fsPath).join(", "),void 0);return e.editorService.openEditor(i,null,e.position).then(function(){t.dispose()})})},t=__decorate([__param(0,g.IInstantiationService),__param(1,m.IWorkbenchEditorService)],t)}(u.EditorInputAction);t.RevertLocalChangesAction=x});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/textFileEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/editors/textFileEditor","vs/base/common/errors","vs/base/common/mime","vs/base/common/labels","vs/base/common/types","vs/base/common/paths","vs/base/common/actions","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/saveErrorHandler","vs/workbench/browser/parts/editor/textEditor","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/common/editor/binaryEditorModel","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x){"use strict";var I=function(e){function t(n,i,o,r,s,a,c,u,l,h,f,m,v){var g=this;e.call(this,t.ID,n,a,c,u,l,h,f,m,v),this.fileService=i,this.textFileService=o,this.viewletService=r,this.quickOpenService=s,p.TextFileEditorModel.setSaveErrorHandler(a.createInstance(d.SaveErrorHandler)),this.toUnbind.push(this.eventService.addListener(y.EventType.FILE_CHANGES,function(e){return g.onFilesChanged(e)}))}return __extends(t,e),t.prototype.onFilesChanged=function(e){var t=e.getDeleted();t&&t.length&&this.clearTextEditorViewState(this.storageService,t.map(function(e){return e.resource.toString()}))},t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():i.localize(0,null)},t.prototype.setInput=function(t,s){var l=this,d=this.getInput();e.prototype.setInput.call(this,t,s);var h=s&&s.forceOpen;return!h&&t.matches(d)?(s&&a.isFunction(s.apply)&&s.apply(this.getControl()),n.TPromise.as(null)):(d&&this.saveTextEditorViewState(this.storageService,d.getResource().toString()),this.editorService.resolveEditorModel(t,!0).then(function(e){if(e instanceof f.BinaryEditorModel&&l.openAsBinary(t,s))return null;if(!(e instanceof p.TextFileEditorModel))return n.TPromise.wrapError("Invalid editor input. Text file editor requires a model instance of TextFileEditorModel.");var i=e,o=l.getControl();if(!i.textEditorModel)return n.TPromise.wrapError("Unable to open the file because the associated text model is undefined.");if(!l.getInput()||l.getInput().getResource().toString()!==i.getResource().toString())return null;var r=i.textEditorModel.getMode(),c=l.telemetryService.start("editorSetModel",{mode:r&&r.getId(),resource:i.textEditorModel.getAssociatedResource().toString()});o.setModel(i.textEditorModel),c.stop();var u=!1;if(s&&a.isFunction(s.apply)&&(u=s.apply(o)),!u){var d=l.loadTextEditorViewState(l.storageService,l.getInput().getResource().toString());d&&o.restoreViewState(d)}l.contextService.isInsideWorkspace(i.getResource())||l.textFileService.getWorkingFilesModel().addEntry(i.getResource())},function(e){return e.fileOperationResult===y.FileOperationResult.FILE_IS_BINARY&&l.openAsBinary(t,s)||e.fileOperationResult===y.FileOperationResult.FILE_IS_DIRECTORY&&l.openAsFolder(t)?void 0:e.fileOperationResult===y.FileOperationResult.FILE_NOT_FOUND&&c.isValidBasename(c.basename(t.getResource().fsPath))?n.TPromise.wrapError(o.create(o.toErrorMessage(e),{actions:[T.CancelAction,new u.Action("workbench.files.action.createMissingFile",i.localize(1,null),null,!0,function(){return l.fileService.updateContent(t.getResource(),"").then(function(){return l.textFileService.getWorkingFilesModel().addEntry(t.getResource()),l.editorService.openEditor({resource:t.getResource(),mime:r.MIME_TEXT})})})]})):e.fileOperationResult===y.FileOperationResult.FILE_TOO_LARGE?void l.messageService.show(T.Severity.Info,i.localize(2,null)):n.TPromise.wrapError(e)}))},t.prototype.openAsBinary=function(e,t){if(e instanceof m.FileEditorInput){var n=e,i=this.instantiationService.createInstance(m.FileEditorInput,n.getResource(),r.MIME_BINARY,void 0);return this.editorService.openEditor(i,t,this.position).done(null,o.onUnexpectedError),!0}return!1},t.prototype.openAsFolder=function(e){var t,n=this,r=this.quickOpenService.getEditorHistory()[1];return t=r?this.editorService.openEditor(r,null,this.position):this.editorService.closeEditor(this),t.done(function(){if(e instanceof m.FileEditorInput){var t=e;n.contextService.isInsideWorkspace(t.getResource())?n.viewletService.openViewlet(l.VIEWLET_ID,!0).done(function(e){return e.getExplorerView().select(t.getResource(),!0)},o.onUnexpectedError):n.messageService.show(T.Severity.Info,i.localize(3,null,s.getPathLabel(t.getResource())))}},o.onUnexpectedError),!0},t.prototype.getCodeEditorOptions=function(){var t=e.prototype.getCodeEditorOptions.call(this),n=this.getInput(),o=n&&n.getName();return t.ariaLabel=o?i.localize(4,null,o):i.localize(5,null),t},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.clearInput=function(){this.input&&this.saveTextEditorViewState(this.storageService,this.input.getResource().toString()),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.prototype.shutdown=function(){this.input&&this.saveTextEditorViewState(this.storageService,this.input.getResource().toString()),e.prototype.shutdown.call(this)},t.ID=l.TEXT_FILE_EDITOR_ID,t=__decorate([__param(0,_.ITelemetryService),__param(1,y.IFileService),__param(2,l.ITextFileService),__param(3,g.IViewletService),__param(4,v.IQuickOpenService),__param(5,C.IInstantiationService),__param(6,b.IWorkspaceContextService),__param(7,S.IStorageService),__param(8,T.IMessageService),__param(9,E.IConfigurationService),__param(10,w.IEventService),__param(11,k.IWorkbenchEditorService),__param(12,x.IModeService)],t);
}(h.BaseTextEditor);t.TextFileEditor=I});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileActions.contribution",["require","exports","vs/nls!vs/workbench/parts/files/browser/fileActions.contribution","vs/platform/platform","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/saveErrorHandler","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/platform/keybinding/common/keybindingService","vs/workbench/parts/files/common/explorerViewModel","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){"use strict";var v=function(e){function t(t,n,i){e.call(this),this.instantiationService=t,this.contextService=n,this.keybindingService=i}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element;return t instanceof f.FileStat},t.prototype.getSecondaryActions=function(e){var t=e.element,n=e.viewer,i=[],r=!1;if(t.isDirectory||(i.push(this.instantiationService.createInstance(a.OpenToSideAction,n,t.resource,!1)),r=!0),r&&i.push(new o.Separator(null,50)),t.isDirectory)i.push(this.instantiationService.createInstance(a.NewFileAction,n,t)),i.push(this.instantiationService.createInstance(a.NewFolderAction,n,t)),i.push(new o.Separator(null,50));else if(!t.isDirectory){var s=this.instantiationService.createInstance(a.CompareResourcesAction,t.resource,n);s._isEnabled()&&i.push(s),i.push(this.instantiationService.createInstance(a.SelectResourceForCompareAction,t.resource,n)),i.push(new o.Separator(null,100))}var c=this.contextService.getWorkspace(),u=c&&t.resource.toString()===c.resource.toString();u||i.push(this.instantiationService.createInstance(a.CopyFileAction,n,t)),t.isDirectory&&i.push(this.instantiationService.createInstance(a.PasteFileAction,n,t)),u||(i.push(new o.Separator(null,150)),i.push(this.instantiationService.createInstance(a.TriggerRenameFileAction,n,t))),u||i.push(this.instantiationService.createInstance(a.MoveFileToTrashAction,n,t));for(var l=10,d=0;d<i.length;d++){var h=i[d];h.order?l=h.order:(l+=10,h.order=l)}return i},t.prototype.getActionItem=function(e,t){if(e&&e.element instanceof f.FileStat){var n=a.keybindingForAction(t.id);if(n)return new o.ActionItem(e,t,{label:!0,keybinding:this.keybindingService.getLabelFor(n)})}return null},t=__decorate([__param(0,d.IInstantiationService),__param(1,h.IWorkspaceContextService),__param(2,p.IKeybindingService)],t)}(r.ActionBarContributor),g=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof c.ConflictResolutionDiffEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(c.AcceptLocalChangesAction),this.instantiationService.createInstance(c.RevertLocalChangesAction)]},t=__decorate([__param(0,d.IInstantiationService)],t)}(s.EditorInputActionContributor),y=i.Registry.as(r.Extensions.Actionbar);y.registerActionBarContributor(r.Scope.VIEWER,v),y.registerActionBarContributor(r.Scope.EDITOR,g);var _=n.localize(0,null),b=i.Registry.as(l.Extensions.WorkbenchActions);b.registerWorkbenchAction(new u.SyncActionDescriptor(a.SaveFileAction,a.SaveFileAction.ID,a.SaveFileAction.LABEL,{primary:m.KeyMod.CtrlCmd|m.KeyCode.KEY_S}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.SaveAllAction,a.SaveAllAction.ID,a.SaveAllAction.LABEL),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.SaveFilesAction,a.SaveFilesAction.ID,null)),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.RevertFileAction,a.RevertFileAction.ID,a.RevertFileAction.LABEL),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.GlobalNewFolderAction,a.GlobalNewFolderAction.ID,a.GlobalNewFolderAction.LABEL),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.GlobalCompareResourcesAction,a.GlobalCompareResourcesAction.ID,a.GlobalCompareResourcesAction.LABEL),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.CloseFileAction,a.CloseFileAction.ID,a.CloseFileAction.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyCode.KEY_W)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.CloseOtherFilesAction,a.CloseOtherFilesAction.ID,a.CloseOtherFilesAction.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyMod.CtrlCmd|m.KeyMod.Shift|m.KeyCode.KEY_W)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.CloseAllFilesAction,a.CloseAllFilesAction.ID,a.CloseAllFilesAction.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyMod.CtrlCmd|m.KeyCode.KEY_W)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.OpenNextWorkingFile,a.OpenNextWorkingFile.ID,a.OpenNextWorkingFile.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyCode.DownArrow)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.OpenPreviousWorkingFile,a.OpenPreviousWorkingFile.ID,a.OpenPreviousWorkingFile.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyCode.UpArrow)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.AddToWorkingFiles,a.AddToWorkingFiles.ID,a.AddToWorkingFiles.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyCode.Enter)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.FocusWorkingFiles,a.FocusWorkingFiles.ID,a.FocusWorkingFiles.LABEL,{primary:m.KeyMod.chord(m.KeyMod.CtrlCmd|m.KeyCode.KEY_K,m.KeyCode.KEY_E)}),_),b.registerWorkbenchAction(new u.SyncActionDescriptor(a.FocusFilesExplorer,a.FocusFilesExplorer.ID,a.FocusFilesExplorer.LABEL),_)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/files.contribution",["require","exports","vs/base/common/uri","vs/workbench/browser/viewlet","vs/nls!vs/workbench/parts/files/browser/files.contribution","vs/platform/actions/common/actions","vs/platform/platform","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/browser/actions/quickOpenAction","vs/platform/configuration/common/configurationRegistry","vs/workbench/common/actionRegistry","vs/workbench/common/contributions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/quickopen","vs/workbench/parts/files/browser/files","vs/platform/files/common/files","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/fileTracker","vs/workbench/parts/files/common/editors/saveParticipant","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/editors/textFileEditor","vs/workbench/parts/files/browser/editors/binaryFileEditor","vs/platform/instantiation/common/descriptors","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/base/common/platform","vs/css!./media/files.contribution"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k){"use strict";var x=function(e){function t(t,n,i,o){e.call(this,t,n,v.VIEWLET_ID,i,o)}return __extends(t,e),t.ID=v.VIEWLET_ID,t.LABEL=o.localize(0,null),t=__decorate([__param(2,w.IViewletService),__param(3,C.IWorkbenchEditorService)],t)}(i.ToggleViewletAction);t.OpenExplorerViewletAction=x,s.Registry.as(i.Extensions.Viewlets).registerViewlet(new i.ViewletDescriptor("vs/workbench/parts/files/browser/explorerViewlet","ExplorerViewlet",v.VIEWLET_ID,o.localize(1,null),"explore",0)),s.Registry.as(i.Extensions.Viewlets).setDefaultViewletId(v.VIEWLET_ID);var I={primary:T.KeyMod.CtrlCmd|T.KeyMod.Shift|T.KeyCode.KEY_E},D=s.Registry.as(l.Extensions.WorkbenchActions);D.registerWorkbenchAction(new r.SyncActionDescriptor(x,x.ID,x.LABEL,I),o.localize(2,null)),s.Registry.as(h.Extensions.Editors).registerEditor(new f.FileEditorDescriptor(b.TextFileEditor.ID,o.localize(3,null),"vs/workbench/parts/files/browser/editors/textFileEditor","TextFileEditor",["text/*","application/unknown"]),[new E.SyncDescriptor(_.FileEditorInput)]),s.Registry.as(h.Extensions.Editors).registerEditor(new f.FileEditorDescriptor(S.BinaryFileEditor.ID,o.localize(4,null),"vs/workbench/parts/files/browser/editors/binaryFileEditor","BinaryFileEditor",["image/*","application/pdf","audio/*","video/*","application/octet-stream"]),[new E.SyncDescriptor(_.FileEditorInput)]);var A=new E.AsyncDescriptor("vs/workbench/parts/files/browser/editors/fileEditorInput","FileEditorInput",void 0,void 0,void 0);s.Registry.as(h.Extensions.Editors).registerDefaultFileInput(A);var L=function(){function e(){}return e.prototype.serialize=function(e){var t=e,n={resource:t.getResource().toString(),mime:t.getMime()};return JSON.stringify(n)},e.prototype.deserialize=function(e,t){var i=JSON.parse(t);return e.createInstance(_.FileEditorInput,n["default"].parse(i.resource),i.mime,void 0)},e}();s.Registry.as(h.Extensions.Editors).registerEditorInputFactory(v.FILE_EDITOR_INPUT_ID,L),s.Registry.as(d.Extensions.Workbench).registerWorkbenchContribution(g.FileTracker),s.Registry.as(d.Extensions.Workbench).registerWorkbenchContribution(y.SaveParticipant);var O=s.Registry.as(u.Extensions.Configuration);O.registerConfiguration({id:"files",order:7,title:o.localize(5,null),type:"object",properties:{"files.exclude":{type:"object",description:o.localize(6,null),"default":{"**/.git":!0,"**/.DS_Store":!0},additionalProperties:{anyOf:[{type:"boolean",description:o.localize(7,null)},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*","default":"$(basename).ext",description:o.localize(8,null)}}}]}},"files.associations":{type:"object",description:o.localize(9,null)},"files.encoding":{type:"string","enum":Object.keys(m.SUPPORTED_ENCODINGS),"default":"utf8",description:o.localize(10,null)},"files.eol":{type:"string","enum":["\n","\r\n"],"default":k.isLinux||k.isMacintosh?"\n":"\r\n",description:o.localize(11,null)},"files.trimTrailingWhitespace":{type:"boolean","default":!1,description:o.localize(12,null)},"files.autoSave":{type:"string","enum":[m.AutoSaveConfiguration.OFF,m.AutoSaveConfiguration.AFTER_DELAY,m.AutoSaveConfiguration.ON_FOCUS_CHANGE],"default":m.AutoSaveConfiguration.OFF,description:o.localize(13,null,m.AutoSaveConfiguration.OFF,m.AutoSaveConfiguration.AFTER_DELAY,m.AutoSaveConfiguration.ON_FOCUS_CHANGE,m.AutoSaveConfiguration.AFTER_DELAY)},"files.autoSaveDelay":{type:"number","default":1e3,description:o.localize(14,null,m.AutoSaveConfiguration.AFTER_DELAY)},"files.watcherExclude":{type:"object","default":k.isLinux||k.isMacintosh?{"**/.git/objects/**":!0,"**/node_modules/**":!0}:{"**/.git/objects/**":!0},description:o.localize(15,null)}}}),O.registerConfiguration({id:"explorer",order:8,title:o.localize(16,null),type:"object",properties:{"explorer.workingFiles.maxVisible":{type:"number",description:o.localize(17,null),"default":9},"explorer.workingFiles.dynamicHeight":{type:"boolean",description:o.localize(18,null),"default":!0}}});var M="~",P=function(e){function t(t,n,i){e.call(this,t,n,M,i)}return __extends(t,e),t.ID="workbench.files.action.workingFilesPicker",t.LABEL=o.localize(19,null),t=__decorate([__param(2,a.IQuickOpenService)],t)}(c.QuickOpenAction);s.Registry.as(p.Extensions.Quickopen).registerQuickOpenHandler(new p.QuickOpenHandlerDescriptor("vs/workbench/parts/files/browser/workingFilesPicker","WorkingFilesPicker",M,[{prefix:M,needsEditor:!1,description:o.localize(20,null)}])),D.registerWorkbenchAction(new r.SyncActionDescriptor(P,P.ID,P.LABEL,{primary:T.KeyMod.chord(T.KeyMod.CtrlCmd|T.KeyCode.KEY_K,T.KeyMod.CtrlCmd|T.KeyCode.KEY_P)}),o.localize(21,null))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/explorerViewer",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/views/explorerViewer","vs/base/common/lifecycle","vs/base/common/objects","vs/base/browser/dom","vs/base/common/uri","vs/base/common/mime","vs/base/common/async","vs/base/common/paths","vs/base/common/errors","vs/base/common/types","vs/base/common/actions","vs/base/common/comparers","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/builder","vs/base/common/platform","vs/base/common/glob","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/fileActions","vs/workbench/common/editor","vs/base/parts/tree/browser/tree","vs/base/common/labels","vs/base/parts/tree/browser/treeDnd","vs/base/parts/tree/browser/treeDefaults","vs/base/parts/tree/browser/actionsRenderer","vs/workbench/parts/files/common/explorerViewModel","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/progress/common/progress","vs/platform/telemetry/common/telemetry","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F,W,H,V){"use strict";var K=function(){function e(e,t,n,i,o){this.progressService=e,this.messageService=t,this.fileService=n,this.partService=i,this.workspace=o.getWorkspace()}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t.isDirectory},e.prototype.getChildren=function(e,t){var i=this;if(t.isDirectoryResolved)return n.TPromise.as(t.children);var o=this.fileService.resolveFile(t.resource,{resolveSingleChildDescendants:!0}).then(function(e){for(var n=A.FileStat.create(e),i=0;i<n.children.length;i++)t.addChild(n.children[i]);return t.isDirectoryResolved=!0,t.children},function(e){return i.messageService.show(F.Severity.Error,e),[]});return this.progressService.showWhile(o,this.partService.isCreated()?800:3200),o},e.prototype.getParent=function(e,t){return t?this.workspace&&t.resource.toString()===this.workspace.resource.toString()?n.TPromise.as(null):t.parent?n.TPromise.as(t.parent):n.TPromise.as(null):n.TPromise.as(null)},e=__decorate([__param(0,W.IProgressService),__param(1,F.IMessageService),__param(2,S.IFileService),__param(3,O.IPartService),__param(4,M.IWorkspaceContextService)],e)}();t.FileDataSource=K;var B=function(e){function t(t){e.call(this),this.state=t}return __extends(t,e),t.prototype.hasActions=function(t,n){return n instanceof A.NewStatPlaceholder?!1:e.prototype.hasActions.call(this,t,n)},t.prototype.getActions=function(t,i){return i instanceof A.NewStatPlaceholder?n.TPromise.as([]):e.prototype.getActions.call(this,t,i)},t.prototype.hasSecondaryActions=function(t,n){return n instanceof A.NewStatPlaceholder?!1:e.prototype.hasSecondaryActions.call(this,t,n)},t.prototype.getSecondaryActions=function(t,i){return i instanceof A.NewStatPlaceholder?n.TPromise.as([]):e.prototype.getSecondaryActions.call(this,t,i)},t.prototype.runAction=function(e,t,i,o){var s=this;if(void 0===o&&(o={}),o=r.mixin({viewletState:this.state,stat:t},o),!h.isString(i)){var a=i;return a.enabled?a.run(o):null}var c=i,u=this.hasActions(e,t)?this.getActions(e,t):n.TPromise.as([]);return u.then(function(i){for(var r=0,a=i.length;a>r;r++)if(i[r].id===c&&i[r].enabled)return i[r].run(o);return u=s.hasSecondaryActions(e,t)?s.getSecondaryActions(e,t):n.TPromise.as([]),u.then(function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].id===c&&e[t].enabled)return e[t].run(o);return null})})},t}(_.ContributableActionProvider);t.FileActionProvider=B;var U=function(){function e(){this._actionProvider=new B(this),this.editableStats=Object.create(null)}return Object.defineProperty(e.prototype,"actionProvider",{get:function(){return this._actionProvider},enumerable:!0,configurable:!0}),e.prototype.getEditableData=function(e){return this.editableStats[e.resource&&e.resource.toString()]},e.prototype.setEditable=function(e,t){t&&(this.editableStats[e.resource&&e.resource.toString()]=t)},e.prototype.clearEditable=function(e){delete this.editableStats[e.resource&&e.resource.toString()]},e}();t.FileViewletState=U;var z=function(e){function t(t){e.call(this),this.viewletState=t}return __extends(t,e),t.prototype.run=function(t,n){return e.prototype.run.call(this,t,{viewletState:this.viewletState})},t}(p.ActionRunner);t.ActionRunner=z;var j=function(e){function t(t,n,i){e.call(this,{actionProvider:t.actionProvider,actionRunner:n}),this.contextViewService=i,this.state=t}return __extends(t,e),t.prototype.getContentHeight=function(e,t){return 22},t.prototype.renderContents=function(e,t,n,r){var a=this,c=v.$(n).clearChildren(),l=v.$(".explorer-item").addClass(this.iconClass(t)).appendTo(c),d=this.state.getEditableData(t);if(!d){var h=v.$(".explorer-item-label").appendTo(l);return v.$("a.plain").text(t.name).appendTo(h),null}var p=new m.InputBox(l.getHTMLElement(),this.contextViewService,{validationOptions:{validation:d.validator,showMessage:!0},ariaLabel:i.localize(0,null)}),f=t.name||"",g=f.lastIndexOf(".");p.value=f,p.select({start:0,end:g>0&&!t.isDirectory?g:f.length}),p.focus();var y=u.once(function(n){e.clearHighlight(),n&&p.value&&a.state.actionProvider.runAction(e,t,d.action,{value:p.value}),setTimeout(function(){e.DOMFocus(),o.disposeAll(_)},0)}),_=[p,s.addStandardDisposableListener(p.inputElement,s.EventType.KEY_DOWN,function(e){e.equals(V.CommonKeybindings.ENTER)?p.validate()&&y(!0):e.equals(V.CommonKeybindings.ESCAPE)&&y(!1)}),s.addDisposableListener(p.inputElement,"blur",function(){y(p.isInputValid())})];return function(){return y(!0)}},t.prototype.iconClass=function(e){return e.isDirectory?"folder-icon":"text-file-icon"},t=__decorate([__param(2,P.IContextViewService)],t)}(D.ActionsRenderer);t.FileRenderer=j;var q=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return i.localize(1,null,t.name)},e}();t.FileAccessibilityProvider=q;var G=function(e){function t(t,n,i,o,r,s,a,c){e.call(this,{clickBehavior:I.ClickBehavior.ON_MOUSE_DOWN}),this.editorService=n,this.textFileService=i,this.contextMenuService=o,this.eventService=r,this.instantiationService=s,this.telemetryService=a,this.contextService=c,this.workspace=c.getWorkspace(),this.didCatchEnterDown=!1,this.downKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.CTRLCMD_DOWN_ARROW:V.CommonKeybindings.ENTER,this.onEnterDown.bind(this)),this.upKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.CTRLCMD_DOWN_ARROW:V.CommonKeybindings.ENTER,this.onEnterUp.bind(this)),g.isMacintosh?this.upKeyBindingDispatcher.set(V.CommonKeybindings.WINCTRL_ENTER,this.onModifierEnterUp.bind(this)):this.upKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_ENTER,this.onModifierEnterUp.bind(this)),this.downKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.ENTER:V.CommonKeybindings.F2,this.onF2.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_C,this.onCopy.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_V,this.onPaste.bind(this)),g.isMacintosh?(this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_UP_ARROW,this.onLeft.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_BACKSPACE,this.onDelete.bind(this))):(this.downKeyBindingDispatcher.set(V.CommonKeybindings.DELETE,this.onDelete.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.SHIFT_DELETE,this.onDelete.bind(this))),this.state=t}return __extends(t,e),t.prototype.onLeftClick=function(e,t,n,i){void 0===i&&(i="mouse");var o={origin:i},r="mouse"===i&&2===n.detail;if(e.getHighlight())return n.preventDefault(),n.stopPropagation(),e.clearHighlight(o),!1;if(this.workspace&&t.resource.toString()===this.workspace.resource.toString())return e.clearFocus(o),e.clearSelection(o),!1;var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;if(s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),e.toggleExpansion(t),!n.shiftKey||t instanceof A.NewStatPlaceholder){if(!(t instanceof A.NewStatPlaceholder)){var a=!r;e.setFocus(t,o),r&&n.preventDefault(),t.isDirectory||(e.setSelection([t],o),this.openEditor(t,a,n&&(n.ctrlKey||n.metaKey)),r&&this.textFileService.getWorkingFilesModel().addEntry(t))}}else{var c=e.getSelection();c&&c.length>0&&c[0]===t&&e.clearSelection(o)}return!0},t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(n.preventDefault(),n.stopPropagation(),e.setFocus(t),!this.state.actionProvider.hasSecondaryActions(e,t))return!0;var o={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return o},getActions:function(){return i.state.actionProvider.getSecondaryActions(e,t)},getActionItem:this.state.actionProvider.getActionItem.bind(this.state.actionProvider,e,t),getKeyBinding:function(e){return w.keybindingForAction(e.id)},getActionsContext:function(){return{viewletState:i.state,stat:t}},onHide:function(t){t&&e.DOMFocus()}}),!0},t.prototype.onEnterDown=function(e,t){if(e.getHighlight())return!1;var n={origin:"keyboard"},i=e.getFocus();return i&&(i.isDirectory?e.toggleExpansion(i):(e.setFocus(i,n),this.openEditor(i,!1,!1))),this.didCatchEnterDown=!0,!0},t.prototype.onEnterUp=function(e,t){if(!this.didCatchEnterDown||e.getHighlight())return!1;var n=e.getFocus();return n&&!n.isDirectory&&this.openEditor(n,!1,!1),this.didCatchEnterDown=!1,!0},t.prototype.onModifierEnterUp=function(e,t){if(e.getHighlight())return!1;var n=e.getFocus();return n&&!n.isDirectory&&this.openEditor(n,!1,!0),this.didCatchEnterDown=!1,!0},t.prototype.onCopy=function(e,t){var n=e.getFocus();return n?(this.runAction(e,n,"workbench.files.action.copyFile").done(),!0):!1},t.prototype.onPaste=function(e,t){var n=e.getFocus()||e.getInput();if(n){var i=this.instantiationService.createInstance(w.PasteFileAction,e,n);if(i._isEnabled())return i.run().done(null,d.onUnexpectedError),!0}return!1},t.prototype.openEditor=function(e,t,n){if(e&&!e.isDirectory){var i=this.instantiationService.createInstance(E.FileEditorInput,e.resource,e.mime,void 0),o=new C.EditorOptions;t&&(o.preserveFocus=!0),this.telemetryService.publicLog("workbenchActionExecuted",{id:"workbench.files.openFile",from:"explorer"}),this.editorService.openEditor(i,o,n).done(null,d.onUnexpectedError)}},t.prototype.onF2=function(e,t){var n=e.getFocus();return n?(this.runAction(e,n,"workbench.files.action.triggerRename").done(),!0):!1},t.prototype.onDelete=function(e,t){var n=!t.shiftKey,i=e.getFocus();return i?(this.runAction(e,i,n?"workbench.files.action.moveFileToTrash":"workbench.files.action.deleteFile").done(),!0):!1},t.prototype.runAction=function(e,t,n){return this.state.actionProvider.runAction(e,t,n)},t=__decorate([__param(1,L.IWorkbenchEditorService),__param(2,b.ITextFileService),__param(3,P.IContextMenuService),__param(4,R.IEventService),__param(5,N.IInstantiationService),__param(6,H.ITelemetryService),__param(7,M.IWorkspaceContextService)],t)}(I.DefaultController);t.FileController=G;var Y=function(){function e(){}return e.prototype.compare=function(e,t,n){return t.isDirectory&&!n.isDirectory?-1:n.isDirectory&&!t.isDirectory?1:t.isDirectory&&n.isDirectory?t.name.toLowerCase().localeCompare(n.name.toLowerCase()):t instanceof A.NewStatPlaceholder?-1:n instanceof A.NewStatPlaceholder?1:f.compareFileNames(t.name,n.name)},e}();t.FileSorter=Y;var $=function(){function e(e){this.contextService=e,this.hiddenExpression=Object.create(null)}return e.prototype.updateConfiguration=function(e){var t=e&&e.files&&e.files.exclude||Object.create(null),n=!r.equals(this.hiddenExpression,t);return this.hiddenExpression=r.clone(t),n},e.prototype.isVisible=function(e,t){return this.doIsVisible(t)},e.prototype.doIsVisible=function(e){if(e instanceof A.NewStatPlaceholder)return!0;var t=e.parent&&e.parent.children&&e.parent.children.map(function(e){return e.name});return!y.match(this.hiddenExpression,this.contextService.toWorkspaceRelativePath(e.resource),t)},e=__decorate([__param(0,M.IWorkspaceContextService)],e)}();t.FileFilter=$;var X=function(){function e(e,t,n,i,o,r,s){this.messageService=e,this.contextService=t,this.eventService=n,this.progressService=i,this.fileService=o,this.instantiationService=r,this.textFileService=s}return e.prototype.getDragURI=function(e,t){return t.resource&&t.resource.toString()},e.prototype.onDragStart=function(e,t,n){var i=t.getData(),o=null;i.length>0&&(o=i[0]),o&&o.isDirectory&&e.isExpanded(o)&&e.collapse(o,!1),t instanceof x.DesktopDragAndDropData||o&&!o.isDirectory&&n.dataTransfer.setData("DownloadURL",[c.MIME_BINARY,o.name,o.resource.toString()].join(":"))},e.prototype.onDragOver=function(e,t,n,i){var o=i&&(i.ctrlKey&&!g.isMacintosh||i.altKey&&g.isMacintosh),r=t instanceof x.DesktopDragAndDropData;if(this.contextService.getOptions().readOnly)return T.DRAG_OVER_REJECT;if(r){for(var s=t.getData(),a=s.types,c=[],u=0;u<a.length;u++)c.push(a[u]);if(0===c.length||!c.some(function(e){return"Files"===e}))return T.DRAG_OVER_REJECT}else{if(t instanceof x.ExternalElementsDragAndDropData)return T.DRAG_OVER_REJECT;var d=t.getData();if(!Array.isArray(d))return T.DRAG_OVER_REJECT;if(d.some(function(e){return e instanceof A.NewStatPlaceholder?!0:e.resource.toString()===n.resource.toString()?!0:o||l.dirname(e.resource.fsPath)!==n.resource.fsPath?!!l.isEqualOrParent(n.resource.fsPath,e.resource.fsPath):!0}))return T.DRAG_OVER_REJECT}return n.isDirectory?r||o?T.DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY:T.DRAG_OVER_ACCEPT_BUBBLE_DOWN:n.resource.toString()!==this.contextService.getWorkspace().resource.toString()?r||o?T.DRAG_OVER_ACCEPT_BUBBLE_UP_COPY:T.DRAG_OVER_ACCEPT_BUBBLE_UP:T.DRAG_OVER_REJECT},e.prototype.drop=function(e,t,o,r){var s=this,c=n.TPromise.as(null);if(t instanceof x.DesktopDragAndDropData){var u=this.instantiationService.createInstance(w.ImportFileAction,e,o,null);c=u.run({input:{files:t.getData().files}})}else{var h=t.getData()[0],p=r.ctrlKey&&!g.isMacintosh||r.altKey&&g.isMacintosh;c=e.expand(o).then(function(){if(p){var t=s.instantiationService.createInstance(w.DuplicateFileAction,e,h,o);return t.run()}var r=n.TPromise.as(null);if(s.textFileService.isDirty(h.resource)){var c=s.textFileService.confirmSave([h.resource]);if(c===b.ConfirmResult.SAVE)r=s.textFileService.save(h.resource);else if(c===b.ConfirmResult.DONT_SAVE)r=s.textFileService.revert(h.resource);else if(c===b.ConfirmResult.CANCEL)return n.TPromise.as(null)}return r.then(function(){if(s.textFileService.isDirty(h.resource))return s.messageService.show(F.Severity.Warning,i.localize(2,null,k.getPathLabel(h.resource))),n.TPromise.as(null);var e=a["default"].file(l.join(o.resource.fsPath,h.name)),t=!1,r=function(e){s.eventService.emit("files.internal:fileChanged",new b.LocalFileChangeEvent(h.clone(),e))};return s.fileService.moveFile(h.resource,e).then(r,function(n){if(n.fileOperationResult!==S.FileOperationResult.FILE_MOVE_CONFLICT)s.messageService.show(F.Severity.Error,n);else{t=!0;var o={message:i.localize(3,null,h.name),detail:i.localize(4,null),primaryButton:i.localize(5,null)};if(s.messageService.confirm(o))return s.fileService.moveFile(h.resource,e,!0).then(function(t){var n=new A.FileStat(e);s.eventService.emit("files.internal:fileChanged",new b.LocalFileChangeEvent(n,null)),r(t)},function(e){s.messageService.show(F.Severity.Error,e)})}})})},d.onUnexpectedError)}this.progressService.showWhile(c,800),c.done(null,d.onUnexpectedError)},e=__decorate([__param(0,F.IMessageService),__param(1,M.IWorkspaceContextService),__param(2,R.IEventService),__param(3,W.IProgressService),__param(4,S.IFileService),__param(5,N.IInstantiationService),__param(6,b.ITextFileService)],e)}();t.FileDragAndDrop=X});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/explorerView",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/explorerView","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/common/uri","vs/base/common/async","vs/base/common/errors","vs/base/common/paths","vs/workbench/browser/actionBarRegistry","vs/base/parts/tree/browser/treeImpl","vs/workbench/common/events","vs/platform/files/common/files","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/views/explorerViewer","vs/base/common/lifecycle","vs/base/browser/dom","vs/workbench/browser/viewlet","vs/workbench/parts/files/common/explorerViewModel","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/platform/contextview/browser/contextView","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D){"use strict";var A=function(e){function t(i,o,r,a,c,u,l,d,h,p,f,m,v,g){e.call(this,o,!1,n.localize(0,null),a,c),this.instantiationService=u,this.eventService=l,this.storageService=d,this.contextService=h,this.progressService=p,this.editorService=f,this.fileService=m,this.partService=v,this.configurationService=g,this.workspace=h.getWorkspace(),this.settings=r,this.viewletState=i,this.actionRunner=o,this.explorerRefreshDelayer=new s.ThrottledDelayer(t.EXPLORER_FILE_CHANGES_REFRESH_DELAY),this.explorerImportDelayer=new s.ThrottledDelayer(t.EXPLORER_IMPORT_REFRESH_DELAY)}return __extends(t,e),
t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=o.$("div.title").appendTo(t);o.$("span").text(this.workspace.name).appendTo(n)},t.prototype.renderBody=function(t){this.treeContainer=e.prototype.renderViewTree.call(this,t),g.addClass(this.treeContainer,"explorer-folders-view"),this.tree=this.createViewer(o.$(this.treeContainer)),this.fillToolBar()},t.prototype.fillToolBar=function(){var e=[];e.push(this.instantiationService.createInstance(p.NewFileAction,this.getViewer(),null)),e.push(this.instantiationService.createInstance(p.NewFolderAction,this.getViewer(),null)),e.push(this.instantiationService.createInstance(p.RefreshViewExplorerAction,this,"explorer-action refresh-explorer")),e.push(this.instantiationService.createInstance(y.CollapseAction,this.getViewer(),!0,"explorer-action collapse-explorer"));for(var t=0;t<e.length;t++){var n=e[t];n.order=10*(t+1)}this.toolBar.setActions(u.prepareActions(e),[])()},t.prototype.create=function(){var e=this;return this.configurationService.loadConfiguration().then(function(t){return e.onConfigurationUpdated(t),e.refresh(!1,!1).then(function(){e.toDispose.push(e.eventService.addListener2(d.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)})),e.toDispose.push(e.configurationService.addListener2(w.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationUpdated(t.config,!0)}))})})},t.prototype.onEditorInputChanging=function(e){if(this.partService.isCreated()||!e.editorOptions||!e.editorOptions.preserveFocus){var n=!0;if(e.editorInput&&e.editorInput instanceof f.FileEditorInput){var i=e.editorInput;this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]=i.getResource().toString(),this.isVisible&&this.contextService.isInsideWorkspace(i.getResource())&&(this.select(i.getResource(),!1).done(null,a.onUnexpectedError),n=!1)}this.isVisible&&n&&this.explorerViewer.clearSelection()}},t.prototype.onConfigurationUpdated=function(e,t){var n=!1;this.filter&&(n=this.filter.updateConfiguration(e)),t&&n&&this.refresh(!1,!1).done(null,a.onUnexpectedError)},t.prototype.focusBody=function(){e.prototype.focusBody.call(this);var t=this.editorService.getActiveEditorInput();t&&t instanceof f.FileEditorInput||this.openFocusedElement()},t.prototype.setVisible=function(n){var o=this;return e.prototype.setVisible.call(this,n).then(function(){if(n){var e=i.TPromise.as(null);o.shouldRefresh&&(e=o.refresh(!1,!1),o.shouldRefresh=!1);var s=o.getActiveEditorInputResource();if(s)return e.then(function(){return o.select(s)});if(!o.partService.isCreated())return i.TPromise.as(null);var c=o.getInput(),u=void 0;if(o.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]&&(u=r["default"].parse(o.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE])),u&&c&&c.find(u)){var l=o.instantiationService.createInstance(f.FileEditorInput,u,void 0,void 0);return o.openOrFocusEditor(l).done(null,a.onUnexpectedError),e}return e.then(function(){o.openFocusedElement()})}})},t.prototype.openFocusedElement=function(){var e=this.explorerViewer.getFocus();if(e&&!e.isDirectory){var t=this.instantiationService.createInstance(f.FileEditorInput,e.resource,e.mime,void 0);return this.openOrFocusEditor(t).done(null,a.onUnexpectedError),!0}return!1},t.prototype.openOrFocusEditor=function(e){var t=this.editorService.getVisibleEditors();if(t)for(var n=0;n<t.length;n++){var i=t[n];if(e.matches(i.input))return this.editorService.focusEditor(i)}return this.editorService.openEditor(e)},t.prototype.getActiveEditorInputResource=function(){var e=this.editorService.getActiveEditorInput();return e&&e instanceof f.FileEditorInput?e.getResource():null},t.prototype.getInput=function(){return this.explorerViewer?this.explorerViewer.getInput():null},t.prototype.createViewer=function(e){var t=this,i=this.instantiationService.createInstance(m.FileDataSource),o=this.instantiationService.createInstance(m.FileRenderer,this.viewletState,this.actionRunner),r=this.instantiationService.createInstance(m.FileController,this.viewletState),s=new m.FileSorter;this.filter=this.instantiationService.createInstance(m.FileFilter);var a=this.instantiationService.createInstance(m.FileDragAndDrop),c=this.instantiationService.createInstance(m.FileAccessibilityProvider);return this.explorerViewer=new l.Tree(e.getHTMLElement(),{dataSource:i,renderer:o,controller:r,sorter:s,filter:this.filter,dnd:a,accessibilityProvider:c},{autoExpandSingleChildren:!0,ariaLabel:n.localize(1,null)}),this.toDispose.push(v.toDisposable(function(){return o.dispose()})),this.toDispose.push(this.eventService.addListener2("files.internal:fileChanged",function(e){return t.onLocalFileChange(e)})),this.toDispose.push(this.eventService.addListener2(h.EventType.FILE_CHANGES,function(e){return t.onFileChanges(e)})),this.explorerViewer},t.prototype.onLocalFileChange=function(e){var t,n,i,o,s=this;if(e.gotAdded()){var u=e.getAfter();if(i=r["default"].file(c.dirname(u.resource.fsPath)),o=this.getInput().find(i)){var l=_.FileStat.create(u);o.addChild(l);var d=function(){return s.explorerViewer.refresh(o).then(function(){return s.reveal(l,.5).then(function(){if(s.explorerViewer.setFocus(l),!l.isDirectory){var e=s.instantiationService.createInstance(f.FileEditorInput,l.resource,l.mime,void 0);return s.editorService.openEditor(e)}})})};e instanceof p.FileImportedEvent?this.explorerImportDelayer.trigger(d).done(null,a.onUnexpectedError):d().done(null,a.onUnexpectedError)}}else if(e.gotMoved()){var h=e.getBefore(),m=e.getAfter(),v=r["default"].file(c.dirname(h.resource.fsPath)),g=r["default"].file(c.dirname(m.resource.fsPath)),y=!1,b=this.explorerViewer.getFocus();if(b&&b.resource&&b.resource.toString()===h.resource.toString()&&(y=!0),v&&g&&v.toString()===g.toString()){if(t=this.getInput().find(h.resource)){if(!t.isDirectory&&!t.mime)return;t.rename(m),n=t.parent,n&&this.explorerViewer.refresh(n).done(function(){y&&s.explorerViewer.setFocus(t)},a.onUnexpectedError)}}else if(v&&g){var S=this.getInput().find(v),E=this.getInput().find(g);t=this.getInput().find(h.resource),S&&E&&t&&t.move(E,function(e){s.explorerViewer.refresh(S,!0).done(e,a.onUnexpectedError)},function(){s.explorerViewer.refresh(E,!0).done(function(){return s.explorerViewer.expand(E)},a.onUnexpectedError)})}}else if(e.gotDeleted()){var w=e.getBefore();t=this.getInput().find(w.resource),t&&t.parent&&(n=t.parent,n.removeChild(t),this.explorerViewer.refresh(n).done(function(){s.explorerViewer.DOMFocus()},a.onUnexpectedError))}else if(e instanceof p.FileImportedEvent){var C=e.getAfter();i=r["default"].file(c.dirname(C.resource.fsPath)),o=this.getInput().find(i),o&&this.explorerViewer.refresh(o).then(function(){var e=s.instantiationService.createInstance(f.FileEditorInput,C.resource,C.mime,void 0);return s.editorService.openEditor(e)}).done(null,a.onUnexpectedError)}else this.workspace&&e.gotUpdated()&&e.getAfter().resource.toString()===this.workspace.resource.toString()&&!this.explorerViewer.getHighlight()&&this.refreshFromEvent()},t.prototype.onFileChanges=function(e){var n=this,o=this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE];o&&e.contains(r["default"].parse(o),h.FileChangeType.DELETED)&&(this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]=null),i.TPromise.timeout(t.EXPLORER_FILE_CHANGES_REACT_DELAY).then(function(){!n.shouldRefresh&&n.shouldRefreshFromEvent(e)&&n.refreshFromEvent()})},t.prototype.shouldRefreshFromEvent=function(e){if(e=this.filterToAddRemovedOnWorkspacePath(e,function(e,t){return".git"!==t[0]?!0:1===t.length}),e.gotAdded()||e.gotDeleted()){var t=e.getAdded(),n=e.getDeleted(),i=this.getInput();if(!i)return!1;for(var o={},s=0;s<t.length;s++){var a=t[s];if(this.contextService.isInsideWorkspace(a.resource)){var u=c.dirname(a.resource.fsPath);if(!o[u]){var l=i.find(r["default"].file(u));if(l&&l.isDirectoryResolved&&!i.find(a.resource))return!0;l&&l.isDirectoryResolved||(o[u]=!0)}}}for(var d=0;d<n.length;d++){var h=n[d];if(this.contextService.isInsideWorkspace(h.resource)&&i.find(h.resource))return!0}}return!1},t.prototype.filterToAddRemovedOnWorkspacePath=function(e,t){var n=this;return new h.FileChangesEvent(e.changes.filter(function(e){if(e.type===h.FileChangeType.UPDATED)return!1;var i=n.contextService.toWorkspaceRelativePath(e.resource);if(!i)return!1;var o=i.split(/\//);return t(e,o)}))},t.prototype.refreshFromEvent=function(){var e=this;this.isVisible?this.explorerRefreshDelayer.trigger(function(){return e.explorerViewer.getHighlight()?i.TPromise.as(null):e.refresh(!1,!1)}).done(null,a.onUnexpectedError):this.shouldRefresh=!0},t.prototype.refresh=function(e,n,o){var s=this,a=this.getInput(),c=[],u=[];if(this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES]&&(u=this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES].map(function(e){return r["default"].parse(e)})),a)this.getResolvedDirectories(a,c);else{var l=this.getActiveEditorInputResource();l&&c.push(l),u.length&&c.push.apply(c,u)}var d;if(n&&(d=this.getActiveEditorInputResource(),!d)){var h=this.explorerViewer.getSelection();h&&1===h.length&&(d=h[0].resource)}var p={resolveTo:c},f=this.fileService.resolveFile(this.workspace.resource,p).then(function(t){var n,o=_.FileStat.create(t,p.resolveTo);return a?(_.FileStat.mergeLocalWithDisk(o,a),n=s.explorerViewer.refresh(a)):n=s.explorerViewer.setInput(o).then(function(){return u?s.explorerViewer.expandAll(u.map(function(e){return s.getInput().find(e)})):i.TPromise.as(null)}),n.then(function(){var t;return t=d?s.select(d):i.TPromise.as(null),t.then(function(){e&&s.explorerViewer.DOMFocus()})})},function(e){return i.TPromise.wrapError(e)});return this.progressService.showWhile(f,o?0:this.partService.isCreated()?800:3200),f},t.prototype.getResolvedDirectories=function(e,t){if(e.isDirectoryResolved){if(e.resource.toString()!==this.workspace.resource.toString()){for(var n=t.length-1;n>=0;n--){var i=t[n];0===e.resource.toString().indexOf(i.toString())&&t.splice(n)}t.push(e.resource)}for(var n=0;n<e.children.length;n++){var o=e.children[n];this.getResolvedDirectories(o,t)}}},t.prototype.select=function(e,t){var n=this;if(void 0===t&&(t=!0),!e||e.toString()===this.workspace.resource.toString())return i.TPromise.as(null);for(var o=this.explorerViewer.getSelection(),r=0;r<o.length;r++)if(o[r].resource.toString()===e.toString())return t?this.reveal(o[r],.5):i.TPromise.as(null);var s=this.getInput();if(!s)return i.TPromise.as(null);var a=s.find(e);if(a)return this.doRevealAndSelect(a);var c={resolveTo:[e]};return this.fileService.resolveFile(this.workspace.resource,c).then(function(t){var i=_.FileStat.create(t,c.resolveTo);return _.FileStat.mergeLocalWithDisk(i,s),n.explorerViewer.refresh(s).then(function(){return n.doRevealAndSelect(s.find(e))})},function(e){return n.messageService.show(D.Severity.Error,e)})},t.prototype.doRevealAndSelect=function(e){var t=this;return e&&(this.filter.isVisible(this.tree,e)||(e=e.parent))?this.reveal(e,.5).then(function(){e.isDirectory||t.explorerViewer.setSelection([e]),t.explorerViewer.setFocus(e)}):i.TPromise.as(null)},t.prototype.shutdown=function(){var n=this,i=this.getInput();if(i){var o=this.explorerViewer.getExpandedElements().filter(function(e){return e.resource.toString()!==n.workspace.resource.toString()}).map(function(e){return e.resource.toString()});this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES]=o}e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t.EXPLORER_FILE_CHANGES_REACT_DELAY=500,t.EXPLORER_FILE_CHANGES_REFRESH_DELAY=100,t.EXPLORER_IMPORT_REFRESH_DELAY=300,t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE="explorer.memento.lastActiveFileResource",t.MEMENTO_EXPANDED_FOLDER_RESOURCES="explorer.memento.expandedFolderResources",t=__decorate([__param(3,D.IMessageService),__param(4,I.IContextMenuService),__param(5,T.IInstantiationService),__param(6,C.IEventService),__param(7,E.IStorageService),__param(8,x.IWorkspaceContextService),__param(9,k.IProgressService),__param(10,b.IWorkbenchEditorService),__param(11,h.IFileService),__param(12,S.IPartService),__param(13,w.IConfigurationService)],t)}(y.CollapsibleViewletView);t.ExplorerView=A});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/common/workingFilesModel",["require","exports","vs/base/common/arrays","vs/base/common/uri","vs/base/common/event","vs/base/common/paths","vs/base/common/errors","vs/base/common/labels","vs/base/common/lifecycle","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/common/events","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/workbench/common/editor","vs/platform/storage/common/storage","vs/platform/event/common/event"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){"use strict";var _=function(){function e(e,t,n,i,r,s,c){this.storageService=e,this.eventService=t,this.partService=n,this.contextService=i,this.editorService=r,this.untitledEditorService=s,this.textFileService=c,this.pathLabelProvider=new a.PathLabelProvider(this.contextService),this.entries=[],this.toDispose=[],this.mapEntryToResource=Object.create(null),this._onModelChange=new o.Emitter,this._onWorkingFileChange=new o.Emitter,this.load(),this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2("files.internal:fileChanged",function(t){return e.onLocalFileChange(t)})),this.toDispose.push(this.eventService.addListener2(l.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledFileDeleted(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.EDITOR_SET_INPUT_ERROR,function(t){return e.onEditorInputSetError(t)}))},e.prototype.onUntitledFileDirty=function(e){this.updateDirtyState(e.resource,!0)},e.prototype.onUntitledFileDeleted=function(e){var t=this.mapEntryToResource[e.resource.toString()];t&&this.removeEntry(t)},e.prototype.onTextFileDirty=function(e){this.textFileService.getAutoSaveMode()!==u.AutoSaveMode.AFTER_SHORT_DELAY?this.updateDirtyState(e.getAfter().resource,!0):this.addEntry(e.getAfter().resource)},e.prototype.onTextFileSaveError=function(e){this.updateDirtyState(e.getAfter().resource,!0)},e.prototype.onTextFileSaved=function(e){this.updateDirtyState(e.getAfter().resource,!1)},e.prototype.onTextFileReverted=function(e){this.hasEntry(e.getAfter().resource)&&this.updateDirtyState(e.getAfter().resource,!1)},e.prototype.updateDirtyState=function(e,t){var n=this.addEntry(e),i=n.dirty;n.setDirty(t),i!==t&&this.fireWorkingFileChange(n)},e.prototype.onLocalFileChange=function(e){e.gotMoved()&&this.moveEntry(e.getBefore().resource,e.getAfter().resource)},e.prototype.onFileChanges=function(e){for(var t in this.mapEntryToResource){var n=this.mapEntryToResource[t];!n.dirty&&e.contains(i["default"].parse(t),l.FileChangeType.DELETED)&&this.removeEntry(n)}},e.prototype.onEditorInputSetError=function(e){var t=v.asFileEditorInput(e.editorInput);if(t){var n=this.mapEntryToResource[t.getResource().toString()];n&&!n.dirty&&this.removeEntry(t.getResource())}},Object.defineProperty(e.prototype,"onModelChange",{get:function(){return this._onModelChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onWorkingFileChange",{get:function(){return this._onWorkingFileChange.event},enumerable:!0,configurable:!0}),e.prototype.getEntries=function(e){return this.entries},e.prototype.first=function(){return this.entries.length?this.entries.slice(0).sort(e.compare)[0]:null},e.prototype.last=function(){return this.entries.length?this.entries.slice(0).sort(e.compare)[this.entries.length-1]:null},e.prototype.next=function(t){var n=t&&this.findEntry(t);if(n){var i=this.entries.slice(0).sort(e.compare),o=i.indexOf(n);if(o+1<i.length)return i[o+1]}return this.first()},e.prototype.previous=function(t){var n=t&&this.findEntry(t);if(n){var i=this.entries.slice(0).sort(e.compare),o=i.indexOf(n);if(o>0)return i[o-1]}return this.last()},e.prototype.getOutOfWorkspaceContextEntries=function(){var e=this;return this.entries.filter(function(t){return e.isOutOfWorkspace(t.resource)})},e.prototype.isOutOfWorkspace=function(e){if("file"!==e.scheme)return!1;var t=this.contextService.getWorkspace();return!t||!r.isEqualOrParent(e.fsPath,t.resource.fsPath)},e.prototype.count=function(){return this.entries.length},e.prototype.addEntry=function(e){var t;t=e instanceof b?e.resource:e instanceof i["default"]?e:e.resource;var n=this.findEntry(t);if(n)return n;var o;return o=e instanceof b?e:this.createEntry(t),this.entries.push(o),this.mapEntryToResource[o.resource.toString()]=o,this.fireModelChange({added:[o]}),o},e.prototype.createEntry=function(e,t,n){return new b(e,"number"==typeof t?t:this.entries.length,n)},e.prototype.moveEntry=function(e,t){var n=this.findEntry(e);if(n&&!this.findEntry(t)){var i=this.createEntry(t,n.index,n.dirty);this.entries.push(i),this.mapEntryToResource[t.toString()]=i,this.entries.splice(this.entries.indexOf(n),1),delete this.mapEntryToResource[e.toString()],this.fireModelChange({added:[i],removed:[n]})}},e.prototype.removeEntry=function(t){var n=t instanceof b?t.resource:t,i=this.indexOf(n);if(i>=0){var o=this.entries.splice(i,1)[0];delete this.mapEntryToResource[n.toString()];for(var r=this.entries.slice(0).sort(e.compare),s=0,a=0;a<r.length;a++)r[a]!==o&&r[a].setIndex(s++);return this.fireModelChange({removed:[o]}),o}return null},e.prototype.reorder=function(t,i){var o=this.entries.slice(0).sort(e.compare),r=o.indexOf(t),s=o.indexOf(i);n.move(o,r,s);for(var a=0,c=0;c<o.length;c++)o[c].setIndex(a++);this.fireModelChange({})},e.prototype.clear=function(){var e=this.entries;this.entries=[],this.mapEntryToResource=Object.create(null),this.fireModelChange({removed:e})},e.prototype.hasEntry=function(e){return!!this.findEntry(e)},e.prototype.findEntry=function(e){return this.mapEntryToResource[e.toString()]},e.prototype.indexOf=function(e){var t=this.findEntry(e);return t?this.entries.indexOf(t):-1},e.prototype.shutdown=function(){var t=this.entries.slice(0).sort(e.compare),n=0,i=[];t.forEach(function(e){e.isUntitled||i.push({resource:e.resource.toString(),index:n++})}),this.storageService.store(e.STORAGE_KEY,JSON.stringify(i),g.StorageScope.WORKSPACE)},e.prototype.load=function(){var t=this,o=this.storageService.get(e.STORAGE_KEY,g.StorageScope.WORKSPACE);if(o){var r=JSON.parse(o);r.forEach(function(e){t.addEntry(new b(i["default"].parse(e.resource),e.index,!1))})}var a=this.contextService.getOptions(),c=a&&a.filesToOpen||[];a&&a.filesToDiff&&c.push.apply(c,a.filesToDiff),n.distinct(c,function(e){return e.resource.toString()}).map(function(e){return e.resource}).filter(function(e){return"untitled"===e.scheme||t.isOutOfWorkspace(e)}).forEach(function(e){t.addEntry(e)}),this.partService.joinCreation().done(function(){t.untitledEditorService&&t.untitledEditorService.getAll().map(function(e){return e.getResource()}).filter(function(e){return!t.untitledEditorService.hasAssociatedFilePath(e)}).forEach(function(e){t.addEntry(e)})},s.onUnexpectedError)},e.prototype.dispose=function(){this.toDispose=c.disposeAll(this.toDispose)},e.prototype.fireModelChange=function(e){this._onModelChange.fire(e)},e.prototype.fireWorkingFileChange=function(e){this._onWorkingFileChange.fire(e)},e.compare=function(e,t){return e.index-t.index},e.STORAGE_KEY="workingFiles.model.entries",e=__decorate([__param(0,g.IStorageService),__param(1,y.IEventService),__param(2,f.IPartService),__param(3,m.IWorkspaceContextService),__param(4,p.IWorkbenchEditorService),__param(5,h.IUntitledEditorService),__param(6,u.ITextFileService)],e)}();t.WorkingFilesModel=_;var b=function(){function e(e,t,n){this._resource=e,this._index=t,this._dirty=n}return Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(e){this._index=e},Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),e.prototype.setDirty=function(e){this._dirty=e},Object.defineProperty(e.prototype,"CLASS_ID",{get:function(){return u.WORKING_FILES_MODEL_ENTRY_CLASS_ID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFile",{get:function(){return"file"===this._resource.scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUntitled",{get:function(){return"untitled"===this._resource.scheme},enumerable:!0,configurable:!0}),e}();t.WorkingFileEntry=b});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/textFileServices",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/event","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/parts/files/common/files","vs/workbench/common/events","vs/workbench/parts/files/common/workingFilesModel","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle","vs/platform/event/common/event","vs/platform/configuration/common/configuration","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(){function e(e,t,n,i,r,s){this.contextService=e,this.instantiationService=t,this.configurationService=n,this.telemetryService=i,this.lifecycleService=r,this.eventService=s,this.serviceId=a.ITextFileService,this.listenerToUnbind=[],this._onAutoSaveConfigurationChange=new o.Emitter}return e.prototype.init=function(){this.registerListeners(),this.loadConfiguration()},Object.defineProperty(e.prototype,"onAutoSaveConfigurationChange",{get:function(){return this._onAutoSaveConfigurationChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workingFilesModel",{get:function(){return this._workingFilesModel||(this._workingFilesModel=this.instantiationService.createInstance(u.WorkingFilesModel)),this._workingFilesModel},enumerable:!0,configurable:!0}),e.prototype.registerListeners=function(){var e=this;this.lifecycleService.addBeforeShutdownParticipant(this),this.lifecycleService.onShutdown(this.dispose,this),this.listenerToUnbind.push(this.configurationService.addListener(m.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)})),window.addEventListener("blur",function(){return e.onEditorFocusChange()},!0),this.listenerToUnbind.push(this.eventService.addListener(c.EventType.EDITOR_INPUT_CHANGED,function(){return e.onEditorFocusChange()}))},e.prototype.onEditorFocusChange=function(){this.configuredAutoSaveOnFocusChange&&this.getDirty().length&&this.saveAll().done(null,i.onUnexpectedError)},e.prototype.loadConfiguration=function(){var e=this;this.configurationService.loadConfiguration().done(function(t){e.onConfigurationChange(t),e.telemetryService.publicLog("autoSave",e.getAutoSaveConfiguration())},i.onUnexpectedError)},e.prototype.onConfigurationChange=function(e){var t=this.getAutoSaveMode()!==a.AutoSaveMode.OFF,n=e&&e.files&&e.files.autoSave||d.AutoSaveConfiguration.OFF;switch(n){case d.AutoSaveConfiguration.AFTER_DELAY:this.configuredAutoSaveDelay=e&&e.files&&e.files.autoSaveDelay,this.configuredAutoSaveOnFocusChange=!1;break;case d.AutoSaveConfiguration.ON_FOCUS_CHANGE:this.configuredAutoSaveDelay=void 0,this.configuredAutoSaveOnFocusChange=!0;break;default:this.configuredAutoSaveDelay=void 0,this.configuredAutoSaveOnFocusChange=!1}this._onAutoSaveConfigurationChange.fire(this.getAutoSaveConfiguration()),t||this.getAutoSaveMode()===a.AutoSaveMode.OFF||this.saveAll().done(null,i.onUnexpectedError)},e.prototype.getDirty=function(e){return this.getDirtyFileModels(e).map(function(e){return e.getResource()})},e.prototype.isDirty=function(e){return s.CACHE.getAll(e).some(function(e){return e.isDirty()})},e.prototype.save=function(e){return this.saveAll([e]).then(function(e){return 1===e.results.length&&e.results[0].success})},e.prototype.saveAll=function(e){var t=this.getDirtyFileModels(Array.isArray(e)?e:void 0),i=Object.create(null);return t.forEach(function(e){i[e.getResource().toString()]={source:e.getResource()}}),n.TPromise.join(t.map(function(e){return e.save().then(function(){e.isDirty()||(i[e.getResource().toString()].success=!0)})})).then(function(e){return{results:Object.keys(i).map(function(e){return i[e]})}})},e.prototype.getFileModels=function(e){var t=this;if(Array.isArray(e)){var n=[];return e.forEach(function(e){n.push.apply(n,t.getFileModels(e))}),n}return s.CACHE.getAll(e)},e.prototype.getDirtyFileModels=function(e){return this.getFileModels(e).filter(function(e){return e.isDirty()})},e.prototype.confirmSave=function(e){throw new Error("Unsupported")},e.prototype.revert=function(e,t){return this.revertAll([e],t).then(function(e){return 1===e.results.length&&e.results[0].success})},e.prototype.revertAll=function(e,t){var i=this,o=t?this.getFileModels(e):this.getDirtyFileModels(e),s=Object.create(null);return o.forEach(function(e){s[e.getResource().toString()]={source:e.getResource()}}),n.TPromise.join(o.map(function(e){return e.revert().then(function(){e.isDirty()||(s[e.getResource().toString()].success=!0)},function(t){if(t.fileOperationResult!==d.FileOperationResult.FILE_NOT_FOUND)return n.TPromise.wrapError(t);var o=r.FileEditorInput.getAll(e.getResource());o.forEach(function(e){return e.dispose(!0)}),i.workingFilesModel.removeEntry(e.getResource()),s[e.getResource().toString()].success=!0})})).then(function(e){return{results:Object.keys(s).map(function(e){return s[e]})}})},e.prototype.beforeShutdown=function(){return this.workingFilesModel.shutdown(),!1},e.prototype.getWorkingFilesModel=function(){return this.workingFilesModel},e.prototype.getAutoSaveMode=function(){return this.configuredAutoSaveOnFocusChange?a.AutoSaveMode.ON_FOCUS_CHANGE:this.configuredAutoSaveDelay&&this.configuredAutoSaveDelay>0?this.configuredAutoSaveDelay<=1e3?a.AutoSaveMode.AFTER_SHORT_DELAY:a.AutoSaveMode.AFTER_LONG_DELAY:a.AutoSaveMode.OFF},e.prototype.getAutoSaveConfiguration=function(){return{autoSaveDelay:this.configuredAutoSaveDelay&&this.configuredAutoSaveDelay>0?this.configuredAutoSaveDelay:void 0,autoSaveFocusChange:this.configuredAutoSaveOnFocusChange}},e.prototype.dispose=function(){for(;this.listenerToUnbind.length;)this.listenerToUnbind.pop()();this.workingFilesModel.dispose(),s.CACHE.clear()},e=__decorate([__param(0,l.IWorkspaceContextService),__param(1,h.IInstantiationService),__param(2,m.IConfigurationService),__param(3,v.ITelemetryService),__param(4,p.ILifecycleService),__param(5,f.IEventService)],e)}();t.TextFileService=g});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/workingFilesViewer",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/workingFilesViewer","vs/base/common/winjs.base","vs/base/common/platform","vs/base/browser/builder","vs/base/parts/tree/browser/tree","vs/base/browser/ui/filelabel/fileLabel","vs/base/parts/tree/browser/treeDnd","vs/base/parts/tree/browser/treeDefaults","vs/base/common/errors","vs/base/common/mime","vs/base/common/paths","vs/base/browser/ui/actionbar/actionbar","vs/base/parts/tree/browser/actionsRenderer","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/common/files","vs/workbench/parts/files/common/workingFilesModel","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T){"use strict";var k="__WORKING_FILES_ROOT",x=function(){function e(){}return e.prototype.getId=function(e,t){return t instanceof y.WorkingFileEntry?t.resource.toString():k},e.prototype.hasChildren=function(e,t){return t instanceof y.WorkingFilesModel?t.count()>0:!1},e.prototype.getChildren=function(e,t){return t instanceof y.WorkingFilesModel?i.TPromise.as(t.getEntries()):i.TPromise.as([])},e.prototype.getParent=function(e,t){return i.TPromise.as(null)},e}();t.WorkingFilesDataSource=x;var I=function(){function e(){}return e.prototype.compare=function(e,t,n){return y.WorkingFilesModel.compare(t,n)},e}();t.WorkingFilesSorter=I;var D=function(e){function t(t,n,i,o){e.call(this,{actionProvider:n,actionRunner:i}),this.contextService=o}return __extends(t,e),t.prototype.getHeight=function(e,n){return t.FILE_ITEM_HEIGHT},t.prototype.renderContents=function(e,t,n){var i=t,o=r.$(n).clearChildren(),s=r.$(".working-files-item").appendTo(o),c=r.$(".working-files-item-label").appendTo(s);return new a.FileLabel(c.getHTMLElement(),i.resource,this.contextService),i.dirty?r.$(n.parentElement).addClass("working-file-dirty"):r.$(n.parentElement).removeClass("working-file-dirty"),null},t.FILE_ITEM_HEIGHT=22,t=__decorate([__param(3,S.IWorkspaceContextService)],t)}(f.ActionsRenderer);t.WorkingFilesRenderer=D;var A=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){var i=t;return n.localize(0,null,h.basename(i.resource.fsPath))},e}();t.WorkingFilesAccessibilityProvider=A;var L=function(e){function t(t,n,i,o){e.call(this),this.instantiationService=n,this.untitledEditorService=i,this.textFileService=o,this.model=t}return __extends(t,e),t.prototype.hasActions=function(t,n){return n instanceof y.WorkingFileEntry||e.prototype.hasActions.call(this,t,n)},t.prototype.getActions=function(e,t){var n=[];return t instanceof y.WorkingFileEntry&&n.push(this.instantiationService.createInstance(v.CloseOneWorkingFileAction,this.model,t)),
i.TPromise.as(n)},t.prototype.hasSecondaryActions=function(t,n){return n instanceof y.WorkingFileEntry||e.prototype.hasActions.call(this,t,n)},t.prototype.getSecondaryActions=function(t,n){var i=this;return e.prototype.getSecondaryActions.call(this,t,n).then(function(e){if(n instanceof y.WorkingFileEntry){var o=i.instantiationService.createInstance(v.OpenToSideAction,t,n.resource,!1);e.unshift(o);var r=i.textFileService.getAutoSaveMode()!==g.AutoSaveMode.OFF;if((!r||n.dirty)&&n.isFile){e.push(new p.Separator);var s=i.instantiationService.createInstance(v.SaveFileAction,v.SaveFileAction.ID,v.SaveFileAction.LABEL);s.setResource(n.resource),s.enabled=n.dirty,e.push(s);var a=i.instantiationService.createInstance(v.RevertFileAction,v.RevertFileAction.ID,v.RevertFileAction.LABEL);a.setResource(n.resource),a.enabled=n.dirty,e.push(a)}if(n.isUntitled){if(e.push(new p.Separator),i.untitledEditorService.hasAssociatedFilePath(n.resource)){var c=i.instantiationService.createInstance(v.SaveFileAction,v.SaveFileAction.ID,v.SaveFileAction.LABEL);c.setResource(n.resource),e.push(c)}var u=i.instantiationService.createInstance(v.SaveFileAsAction,v.SaveFileAsAction.ID,v.SaveFileAsAction.LABEL);u.setResource(n.resource),e.push(u)}if(!n.isUntitled){e.push(new p.Separator);var l=i.instantiationService.createInstance(v.CompareResourcesAction,n.resource,t);l._isEnabled()&&e.push(l),e.push(i.instantiationService.createInstance(v.SelectResourceForCompareAction,n.resource,t))}e.push(new p.Separator),e.push(i.instantiationService.createInstance(v.CloseOneWorkingFileAction,i.model,n)),e.push(i.instantiationService.createInstance(v.CloseAllWorkingFilesAction,i.model)),i.model.count()>1&&e.push(i.instantiationService.createInstance(v.CloseOtherWorkingFilesAction,i.model,n))}return e})},t=__decorate([__param(1,w.IInstantiationService),__param(2,_.IUntitledEditorService),__param(3,g.ITextFileService)],t)}(m.ContributableActionProvider);t.WorkingFilesActionProvider=L;var O=function(e){function t(t,n){e.call(this),this.contextService=n,this.model=t}return __extends(t,e),t.prototype.getDragURI=function(e,t){return t.resource.toString()},t.prototype.onDragStart=function(e,t,n){var i=t.getData(),o=null;if(Array.isArray(i)&&(o=i[0]),!(t instanceof c.DesktopDragAndDropData)&&o&&o.isFile){var r=h.basename(o.resource.fsPath);n.dataTransfer.setData("DownloadURL",[d.MIME_BINARY,r,o.resource.toString()].join(":"))}},t.prototype.onDragOver=function(e,t,n,i){if(!(n instanceof y.WorkingFileEntry))return s.DRAG_OVER_REJECT;if(t instanceof c.ExternalElementsDragAndDropData){var o=g.asFileResource(t.getData()[0]);return o?o.isDirectory?s.DRAG_OVER_REJECT:s.DRAG_OVER_ACCEPT:s.DRAG_OVER_REJECT}if(t instanceof c.DesktopDragAndDropData)return s.DRAG_OVER_REJECT;if(!(t instanceof c.ElementsDragAndDropData))return s.DRAG_OVER_REJECT;var r,a=n.resource,u=t.getData()[0];if(u instanceof y.WorkingFileEntry)r=u.resource;else{var l=g.asFileResource(u);if(!l)return s.DRAG_OVER_REJECT;r=l.resource}return a&&r?a.toString()===r.toString()?s.DRAG_OVER_REJECT:s.DRAG_OVER_ACCEPT:s.DRAG_OVER_REJECT},t.prototype.drop=function(e,t,n,i){var o;if(t instanceof c.ExternalElementsDragAndDropData){var r=g.asFileResource(t.getData()[0]);o=this.model.addEntry(r.resource)}else{var s=t.getData();Array.isArray(s)&&(o=s[0])}o&&this.model.reorder(o,n)},t=__decorate([__param(1,S.IWorkspaceContextService)],t)}(u.DefaultDragAndDrop);t.WorkingFilesDragAndDrop=O;var M=function(e){function t(t,n,i,r,s,a){e.call(this,{clickBehavior:u.ClickBehavior.ON_MOUSE_DOWN}),this.editorService=i,this.instantiationService=r,this.contextMenuService=s,this.telemetryService=a,this.model=t,this.actionProvider=n,this.downKeyBindingDispatcher.set(T.CommonKeybindings.ENTER,this.onEnterDown.bind(this)),o.isMacintosh?this.upKeyBindingDispatcher.set(T.CommonKeybindings.WINCTRL_ENTER,this.onModifierEnterUp.bind(this)):this.upKeyBindingDispatcher.set(T.CommonKeybindings.CTRLCMD_ENTER,this.onModifierEnterUp.bind(this))}return __extends(t,e),t.prototype.onClick=function(t,n,i){if(n instanceof y.WorkingFileEntry&&i.browserEvent&&1===i.browserEvent.button){var o=this.instantiationService.createInstance(v.CloseOneWorkingFileAction,this.model,n);return o.run().done(function(){o.dispose()},l.onUnexpectedError),!0}return e.prototype.onClick.call(this,t,n,i)},t.prototype.onLeftClick=function(e,t,n,i){void 0===i&&(i="mouse");var o={origin:i},r="mouse"===i&&2===n.detail;if(t instanceof y.WorkingFilesModel)return e.clearFocus(o),e.clearSelection(o),!1;var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;if(s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),n.shiftKey){var a=e.getSelection();a&&a.length>0&&a[0]===t&&e.clearSelection(o)}else{var c=!r;e.setFocus(t,o),r&&n.preventDefault(),e.setSelection([t],o),this.openEditor(t,c,n&&(n.ctrlKey||n.metaKey))}return!0},t.prototype.onEnterDown=function(e,t){var n={origin:"keyboard"},i=e.getFocus();return i&&(e.setFocus(i,n),this.openEditor(i,!1,!1)),!0},t.prototype.onModifierEnterUp=function(e,t){var n=e.getFocus();return n&&this.openEditor(n,!1,!0),!0},t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;n.preventDefault(),n.stopPropagation(),e.setFocus(t);var o={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return o},getActions:function(){return i.actionProvider.getSecondaryActions(e,t)},getKeyBinding:function(e){return i.getKeyBinding(e)},onHide:function(t){t&&e.DOMFocus()}}),!0},t.prototype.getKeyBinding=function(e){return v.keybindingForAction(e.id)},t.prototype.openEditor=function(e,t,n){e&&(this.telemetryService.publicLog("workbenchActionExecuted",{id:"workbench.files.openFile",from:"workingSet"}),this.editorService.openEditor({resource:e.resource,options:{preserveFocus:t}},n).done(null,l.onUnexpectedError))},t=__decorate([__param(2,b.IWorkbenchEditorService),__param(3,w.IInstantiationService),__param(4,E.IContextMenuService),__param(5,C.ITelemetryService)],t)}(u.DefaultController);t.WorkingFilesController=M});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/workingFilesView",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/workingFilesView","vs/base/browser/builder","vs/base/parts/tree/browser/treeImpl","vs/workbench/common/editor","vs/base/browser/ui/splitview/splitview","vs/workbench/parts/files/common/files","vs/base/browser/dom","vs/base/common/errors","vs/workbench/common/events","vs/workbench/browser/viewlet","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/views/workingFilesViewer","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/contextview/browser/contextView","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";var b=function(e){function t(i,o,r,s,a,c,u,l,d){e.call(this,i,t.computeExpandedBodySize(u.getWorkingFilesModel()),!!o[t.MEMENTO_COLLAPSED],n.localize(0,null),a,c),this.eventService=r,this.instantiationService=s,this.textFileService=u,this.editorService=l,this.configurationService=d,this.settings=o,this.model=this.textFileService.getWorkingFilesModel(),this.lastDirtyCount=0,this.disposeables=[]}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var o=i.$("div.title").appendTo(t);i.$("span").text(n.localize(1,null)).appendTo(o),this.dirtyCountElement=i.$("div.monaco-count-badge").appendTo(o).hide().getHTMLElement(),this.updateDirtyIndicator()},t.prototype.getActions=function(){return[this.instantiationService.createInstance(h.SaveAllAction,h.SaveAllAction.ID,h.SaveAllAction.LABEL),this.instantiationService.createInstance(h.CloseAllWorkingFilesAction,this.model)]},t.prototype.renderBody=function(t){this.treeContainer=e.prototype.renderViewTree.call(this,t),c.addClass(this.treeContainer,"explorer-working-files"),this.createViewer(i.$(this.treeContainer))},t.prototype.create=function(){var t=this;return this.configurationService.loadConfiguration().then(function(n){return t.onConfigurationUpdated(n),t.registerListeners(),t.highlightInput(t.editorService.getActiveEditorInput()),e.prototype.create.call(t)})},t.prototype.onConfigurationUpdated=function(e){var n=e&&e.explorer&&e.explorer.workingFiles&&e.explorer.workingFiles.maxVisible;"number"==typeof n?this.maxVisibleWorkingFiles=n:this.maxVisibleWorkingFiles=t.DEFAULT_MAX_VISIBLE_FILES;var i=e&&e.explorer&&e.explorer.workingFiles&&e.explorer.workingFiles.dynamicHeight;"boolean"==typeof i?this.dynamicHeight=i:this.dynamicHeight=t.DEFAULT_DYNAMIC_HEIGHT,this.expandedBodySize=this.getExpandedBodySize(this.model)},t.prototype.registerListeners=function(){var e=this;this.disposeables.push(this.model.onModelChange(this.onWorkingFilesModelChange,this)),this.disposeables.push(this.model.onWorkingFileChange(this.onWorkingFileChange,this)),this.toDispose.push(this.eventService.addListener2(l.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledFileDirty()})),this.toDispose.push(this.eventService.addListener2(l.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledFileDeleted()})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toDispose.push(this.eventService.addListener2(l.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)})),this.toDispose.push(this.configurationService.addListener2(m.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationUpdated(t.config)}))},t.prototype.onTextFileDirty=function(e){this.textFileService.getAutoSaveMode()!==a.AutoSaveMode.AFTER_SHORT_DELAY&&this.updateDirtyIndicator()},t.prototype.onTextFileSaved=function(e){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.onTextFileSaveError=function(e){this.updateDirtyIndicator()},t.prototype.onTextFileReverted=function(e){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.onUntitledFileDirty=function(){this.updateDirtyIndicator()},t.prototype.onUntitledFileDeleted=function(){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.updateDirtyIndicator=function(){var e=this.textFileService.getDirty().length;if(this.lastDirtyCount=e,0===e)i.$(this.dirtyCountElement).hide();else{var t=n.localize(2,null,e);i.$(this.dirtyCountElement).show().text(t).title(t)}},t.prototype.onWorkingFilesModelChange=function(e){if(!this.isDisposed&&(this.expandedBodySize=this.getExpandedBodySize(this.model),this.tree)){this.tree.refresh();var t=this.editorService.getActiveEditorInput();this.highlightInput(t)}},t.prototype.onWorkingFileChange=function(e){this.isDisposed||this.tree&&this.tree.refresh(e)},t.prototype.getExpandedBodySize=function(e){return t.computeExpandedBodySize(e,this.maxVisibleWorkingFiles,this.dynamicHeight)},t.computeExpandedBodySize=function(e,n,i){var o=e.count(),r=n;"number"!=typeof r&&(r=t.DEFAULT_MAX_VISIBLE_FILES);var s=i;"boolean"!=typeof s&&(s=t.DEFAULT_DYNAMIC_HEIGHT);var a;return a=s?Math.min(Math.max(r,1),o):Math.max(r,1),a*p.WorkingFilesRenderer.FILE_ITEM_HEIGHT},t.prototype.onEditorInputChanged=function(e){var t=this.editorService.getActiveEditorInput();t===e.editorInput&&this.highlightInput(e.editorInput)},t.prototype.highlightInput=function(e){var t,n=r.getUntitledOrFileResource(e);n&&(t=this.model.findEntry(n)),t?this.highlightEntry(t):this.highlightEntry(null)},t.prototype.highlightEntry=function(e){this.tree.clearFocus(),this.tree.clearSelection(),e&&(this.tree.setFocus(e),this.tree.setSelection([e]),this.tree.reveal(e).done(null,u.onUnexpectedError))},t.prototype.createViewer=function(e){var t=this.instantiationService.createInstance(p.WorkingFilesActionProvider,this.model),i=this.instantiationService.createInstance(p.WorkingFilesRenderer,this.model,t,this.actionRunner),r=this.instantiationService.createInstance(p.WorkingFilesDataSource),s=this.instantiationService.createInstance(p.WorkingFilesController,this.model,t),a=this.instantiationService.createInstance(p.WorkingFilesSorter),c=this.instantiationService.createInstance(p.WorkingFilesDragAndDrop,this.model),u=this.instantiationService.createInstance(p.WorkingFilesAccessibilityProvider);return this.tree=new o.Tree(e.getHTMLElement(),{dataSource:r,renderer:i,sorter:a,controller:s,dnd:c,accessibilityProvider:u},{indentPixels:0,twistiePixels:8,ariaLabel:n.localize(3,null)}),this.tree.setInput(this.model),this.tree},t.prototype.shutdown=function(){this.settings[t.MEMENTO_COLLAPSED]=this.state===s.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.prototype.dispose=function(){for(e.prototype.dispose.call(this);this.disposeables.length;)this.disposeables.pop().dispose()},t.MEMENTO_COLLAPSED="workingFiles.memento.collapsed",t.DEFAULT_MAX_VISIBLE_FILES=9,t.DEFAULT_DYNAMIC_HEIGHT=!0,t=__decorate([__param(2,v.IEventService),__param(3,g.IInstantiationService),__param(4,_.IMessageService),__param(5,y.IContextMenuService),__param(6,a.ITextFileService),__param(7,f.IWorkbenchEditorService),__param(8,m.IConfigurationService)],t)}(d.AdaptiveCollapsibleViewletView);t.WorkingFilesView=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/explorerViewlet",["require","exports","vs/base/common/winjs.base","vs/workbench/common/memento","vs/workbench/parts/files/common/files","vs/workbench/browser/viewlet","vs/base/browser/ui/splitview/splitview","vs/workbench/parts/files/browser/views/explorerViewer","vs/workbench/parts/files/browser/views/explorerView","vs/workbench/parts/files/browser/views/emptyView","vs/workbench/parts/files/browser/views/workingFilesView","vs/platform/storage/common/storage","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/css!./media/explorerviewlet"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";var m=function(e){function t(t,n,r,s){e.call(this,o.VIEWLET_ID,t),this.contextService=n,this.storageService=r,this.instantiationService=s,this.views=[],this.viewletState=new a.FileViewletState,this.viewletSettings=this.getMemento(r,i.Scope.WORKSPACE)}return __extends(t,e),t.prototype.create=function(t){var i=this;return e.prototype.create.call(this,t),this.viewletContainer=t.div().addClass("explorer-viewlet"),this.splitView=new s.SplitView(this.viewletContainer.getHTMLElement()),this.addWorkingFilesView(),this.addExplorerView(),this.focusListener=this.splitView.onFocus(function(e){i.lastFocusedView=e}),n.TPromise.join(this.views.map(function(e){return e.create()})).then(function(){})},t.prototype.addWorkingFilesView=function(){this.workingFilesView=this.instantiationService.createInstance(l.WorkingFilesView,this.getActionRunner(),this.viewletSettings),this.splitView.addView(this.workingFilesView),this.views.push(this.workingFilesView)},t.prototype.addExplorerView=function(){var e;this.contextService.getWorkspace()?this.explorerView=e=this.instantiationService.createInstance(c.ExplorerView,this.viewletState,this.getActionRunner(),this.viewletSettings):e=this.instantiationService.createInstance(u.EmptyView),this.splitView.addView(e),this.views.push(e)},t.prototype.refresh=function(e,t,i){return n.TPromise.join(this.views.map(function(n){return n.refresh(e,t,i)})).then(function(){})},t.prototype.getExplorerView=function(){return this.explorerView},t.prototype.getWorkingFilesView=function(){return this.workingFilesView},t.prototype.setVisible=function(t){var i=this;return e.prototype.setVisible.call(this,t).then(function(){return n.TPromise.join(i.views.map(function(e){return e.setVisible(t)})).then(function(){})})},t.prototype.focus=function(){return e.prototype.focus.call(this),this.lastFocusedView&&this.lastFocusedView.isExpanded()&&this.hasSelectionOrFocus(this.lastFocusedView)?void this.lastFocusedView.focusBody():this.hasSelectionOrFocus(this.workingFilesView)?this.workingFilesView.focusBody():this.hasSelectionOrFocus(this.explorerView)?this.explorerView.focusBody():this.workingFilesView&&this.workingFilesView.isExpanded()?this.workingFilesView.focusBody():this.explorerView&&this.explorerView.isExpanded()?this.explorerView.focusBody():this.workingFilesView.focus()},t.prototype.hasSelectionOrFocus=function(e){if(!e)return!1;if(!e.isExpanded())return!1;var t=e.getViewer();return t?!!t.getFocus()||t.getSelection()&&t.getSelection().length>0:!1},t.prototype.layout=function(e){this.splitView.layout(e.height)},t.prototype.getSelection=function(){return this.explorerView?this.explorerView.getSelection():this.workingFilesView.getSelection()},t.prototype.getActionRunner=function(){return this.actionRunner||(this.actionRunner=new a.ActionRunner(this.viewletState)),this.actionRunner},t.prototype.shutdown=function(){this.views.forEach(function(e){return e.shutdown()}),e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.splitView&&(this.splitView.dispose(),this.splitView=null),this.focusListener&&(this.focusListener.dispose(),this.focusListener=null)},t=__decorate([__param(0,f.ITelemetryService),__param(1,p.IWorkspaceContextService),__param(2,d.IStorageService),__param(3,h.IInstantiationService)],t)}(r.Viewlet);t.ExplorerViewlet=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/workingFilesPicker",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/workingFilesPicker","vs/base/common/paths","vs/base/common/labels","vs/base/common/errors","vs/base/common/strings","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/parts/files/common/workingFilesModel","vs/base/common/scorer","vs/workbench/browser/quickopen","vs/workbench/parts/files/common/files","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(e){function t(t,n,i,o){e.call(this),this.editorService=o,this.workingFilesEntry=i,this.name=t,this.description=n}return __extends(t,e),t.prototype.getPrefix=function(){return this.workingFilesEntry.dirty?"● ":void 0},t.prototype.getLabel=function(){return this.name},t.prototype.getAriaLabel=function(){return i.localize(0,null,this.getLabel())},t.prototype.getDescription=function(){return this.description},t.prototype.getResource=function(){return this.workingFilesEntry.resource},t.prototype.getWorkingFilesEntry=function(){return this.workingFilesEntry},t.prototype.run=function(t,n){return t===c.Mode.OPEN?this.runOpen(n):e.prototype.run.call(this,t,n)},t.prototype.runOpen=function(e){var t=e.event,n=t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey));return this.editorService.openEditor({resource:this.workingFilesEntry.resource},n).done(null,s.onUnexpectedError),!0},t=__decorate([__param(3,f.IWorkbenchEditorService)],t)}(u.QuickOpenEntryGroup);t.WorkingFilePickerEntry=g;var y=function(e){function t(t,n,i){e.call(this),this.instantiationService=t,this.contextService=n,this.textFileService=i,this.scorerCache=Object.create(null)}return __extends(t,e),t.prototype.getResults=function(e){var t=this;e=e.trim();var s=a.stripWildcards(e).toLowerCase();return n.TPromise.as(new u.QuickOpenModel(this.textFileService.getWorkingFilesModel().getEntries().map(function(e){var n=o.basename(e.resource.fsPath),i=r.getPathLabel(o.dirname(e.resource.fsPath),t.contextService);return"."===i&&(i=null),t.instantiationService.createInstance(g,n,i,e)}).filter(function(n){if(!e)return!0;var i=r.getPathLabel(n.getResource(),t.contextService);if(!d.matches(i,s))return!1;var o=u.QuickOpenEntry.highlight(n,e,!0),a=o.labelHighlights,c=o.descriptionHighlights;return n.setHighlights(a,c),!0}).sort(function(n,i){return e?u.QuickOpenEntry.compareByScore(n,i,e,s,t.scorerCache):l.WorkingFilesModel.compare(n.getWorkingFilesEntry(),i.getWorkingFilesEntry())}).map(function(e,t){return 0===t&&e.setGroupLabel(i.localize(1,null)),e})))},t.prototype.getEmptyLabel=function(e){return e?i.localize(2,null):i.localize(3,null)},t.prototype.getAutoFocus=function(t){return t?{autoFocusFirstEntry:!0}:e.prototype.getAutoFocus.call(this,t)},t.prototype.onClose=function(e){this.scorerCache=Object.create(null)},t=__decorate([__param(0,m.IInstantiationService),__param(1,v.IWorkspaceContextService),__param(2,p.ITextFileService)],t)}(h.QuickOpenHandler);t.WorkingFilesPicker=y});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/electronFileTracker",["require","exports","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/fileActions","vs/base/common/platform","vs/workbench/common/editor","vs/base/common/errors","vs/workbench/services/editor/common/editorService","vs/base/common/uri","vs/workbench/services/window/electron-browser/windowService","vs/workbench/common/events","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle","electron"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){"use strict";var _=function(){function e(e,t,n,i,o,s,a,c,u,l){this.contextService=e,this.eventService=t,this.partService=n,this.fileService=i,this.textFileService=o,this.editorService=s,this.instantiationService=a,this.untitledEditorService=c,this.lifecycleService=u,this.windowService=l,this.toUnbind=[],this.isDocumentedEdited=!1,this.activeOutOfWorkspaceWatchers=Object.create(null),r.platform===r.Platform.Mac&&y.ipcRenderer.send("vscode:setDocumentEdited",this.windowService.getWindowId(),!1),this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(d.EventType.UNTITLED_FILE_DELETED,function(){return e.onUntitledDeletedEvent()})),this.toUnbind.push(this.eventService.addListener(d.EventType.UNTITLED_FILE_DIRTY,function(){return e.onUntitledDirtyEvent()})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),y.ipcRenderer.on("vscode:openFiles",function(t,n){var i=[],r=2===n.filesToDiff.length;if(!r&&n.filesToOpen&&i.push.apply(i,e.toInputs(n.filesToOpen,!1)),!r&&n.filesToCreate&&i.push.apply(i,e.toInputs(n.filesToCreate,!0)),r&&i.push.apply(i,e.toInputs(n.filesToDiff,!1)),i.length){var s=e.instantiationService.createInstance(o.OpenResourcesAction,i,r);s.run().done(null,a.onUnexpectedError),s.dispose()}}),this.toUnbind.push(this.eventService.addListener(d.EventType.EDITOR_INPUT_CHANGED,function(){return e.onEditorInputChanged()})),this.lifecycleService.onShutdown(this.dispose,this)},e.prototype.toInputs=function(e,t){var n=this;return e.map(function(e){var i={resource:t?n.untitledEditorService.createOrGet(u["default"].file(e.filePath)).getResource():u["default"].file(e.filePath)};return!t&&e.lineNumber&&(i.options={selection:{startLineNumber:e.lineNumber,startColumn:e.columnNumber}}),i})},e.prototype.onEditorInputChanged=function(){var e=this,t=this.editorService.getVisibleEditors().map(function(e){return s.asFileEditorInput(e.input,!0)}).filter(function(t){return!!t&&!e.contextService.isInsideWorkspace(t.getResource())}).map(function(e){return e.getResource().toString()});Object.keys(this.activeOutOfWorkspaceWatchers).forEach(function(n){t.indexOf(n)<0&&(e.fileService.unwatchFileChanges(n),delete e.activeOutOfWorkspaceWatchers[n])}),t.forEach(function(t){e.activeOutOfWorkspaceWatchers[t]||(e.fileService.watchFileChanges(u["default"].parse(t)),e.activeOutOfWorkspaceWatchers[t]=!0)})},e.prototype.onUntitledDirtyEvent=function(){this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onUntitledDeletedEvent=function(){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.onTextFileDirty=function(e){this.textFileService.getAutoSaveMode()===n.AutoSaveMode.AFTER_SHORT_DELAY||this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onTextFileSaved=function(e){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.onTextFileSaveError=function(e){this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onTextFileReverted=function(e){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.updateDocumentEdited=function(){if(r.platform===r.Platform.Mac){var e=this.textFileService.isDirty();this.isDocumentedEdited=e,y.ipcRenderer.send("vscode:setDocumentEdited",this.windowService.getWindowId(),e)}},e.prototype.getId=function(){return"vs.files.electronFileTracker"},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()();for(var e in this.activeOutOfWorkspaceWatchers)this.fileService.unwatchFileChanges(e);this.activeOutOfWorkspaceWatchers=Object.create(null)},e=__decorate([__param(0,f.IWorkspaceContextService),__param(1,m.IEventService),__param(2,p.IPartService),__param(3,i.IFileService),__param(4,n.ITextFileService),__param(5,c.IWorkbenchEditorService),__param(6,v.IInstantiationService),__param(7,h.IUntitledEditorService),__param(8,g.ILifecycleService),__param(9,l.IWindowService)],e)}();t.FileTracker=_});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/textFileServices",["require","exports","vs/nls!vs/workbench/parts/files/electron-browser/textFileServices","vs/base/common/winjs.base","vs/base/common/paths","vs/base/common/strings","vs/base/common/platform","vs/base/common/uri","vs/platform/event/common/event","vs/workbench/parts/files/browser/textFileServices","vs/workbench/parts/files/common/editors/textFileEditorModel","vs/workbench/parts/files/common/files","vs/workbench/services/untitled/common/untitledEditorService","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/workbench/services/workspace/common/contextService","vs/platform/lifecycle/common/lifecycle","vs/platform/telemetry/common/telemetry","vs/platform/configuration/common/configuration","vs/editor/common/services/modeService","vs/workbench/services/window/electron-browser/windowService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S=function(e){function t(t,n,i,o,r,s,a,c,u,l){e.call(this,t,n,a,s,r,c),this.fileService=i,this.untitledEditorService=o,this.modeService=u,this.windowService=l,this.modeService=u,this.init()}return __extends(t,e),t.prototype.beforeShutdown=function(){var t=this;return e.prototype.beforeShutdown.call(this),this.getDirty().length?this.getAutoSaveMode()!==d.AutoSaveMode.OFF?this.saveAll(!1).then(function(){return t.getDirty().length?t.confirmBeforeShutdown():!1}):this.confirmBeforeShutdown():!1},t.prototype.confirmBeforeShutdown=function(){var e=this.confirmSave();return e===d.ConfirmResult.SAVE?this.saveAll(!0).then(function(e){return!!e.results.some(function(e){return!e.success})}):e===d.ConfirmResult.DONT_SAVE?!1:e===d.ConfirmResult.CANCEL?!0:void 0},t.prototype.revertAll=function(t,n){var i=this;return e.prototype.revertAll.call(this,t,n).then(function(e){var n=i.untitledEditorService.getAll(t);return n.forEach(function(t){t&&(t.dispose(),e.results.push({source:t.getResource(),success:!0}))}),e})},t.prototype.getDirty=function(t){var n=this,i=e.prototype.getDirty.call(this,t);if(t){var o=t.map(function(e){return n.untitledEditorService.get(e)}).filter(function(e){return e&&e.isDirty()}).map(function(e){return e.getResource()});i.push.apply(i,o)}else i.push.apply(i,this.untitledEditorService.getDirty());return i},t.prototype.isDirty=function(t){return e.prototype.isDirty.call(this,t)?!0:this.untitledEditorService.getDirty().some(function(e){return!t||e.toString()===t.toString()})},t.prototype.confirmSave=function(e){if(this.contextService.getConfiguration().env.extensionDevelopmentPath)return d.ConfirmResult.DONT_SAVE;var t=this.getDirty(e);if(0===t.length)return d.ConfirmResult.DONT_SAVE;var i=[1===t.length?n.localize(0,null,o.basename(t[0].fsPath)):n.localize(1,null)];t.length>1&&(i.push(""),i.push.apply(i,t.map(function(e){return o.basename(e.fsPath)})),i.push(""));var r={label:t.length>1?this.mnemonicLabel(n.localize(2,null)):this.mnemonicLabel(n.localize(3,null)),result:d.ConfirmResult.SAVE},a={label:this.mnemonicLabel(n.localize(4,null)),
result:d.ConfirmResult.DONT_SAVE},c={label:n.localize(5,null),result:d.ConfirmResult.CANCEL},u=[r];s.isWindows?u.push(a,c):u.push(c,a);var l={title:this.contextService.getConfiguration().env.appName,message:i.join("\n"),type:"warning",detail:n.localize(6,null),buttons:u.map(function(e){return e.label}),noLink:!0,cancelId:u.indexOf(c)},h=this.windowService.getWindow().showMessageBox(l);return u[h].result},t.prototype.mnemonicLabel=function(e){return s.isWindows?e.replace(/&&/g,"&"):e.replace(/&&/g,"")},t.prototype.saveAll=function(e){var t=[];t=Array.isArray(e)?this.getDirty(e):this.getDirty();var n=[],i=[];return t.forEach(function(t){"file"===t.scheme?n.push(t):!Array.isArray(e)&&e!==!0||"untitled"!==t.scheme||i.push(t)}),this.doSaveAll(n,i)},t.prototype.doSaveAll=function(t,n){for(var o=this,r=[],s=0;s<n.length;s++){var c=this.untitledEditorService.get(n[s]);if(c){var u=void 0;if(this.untitledEditorService.hasAssociatedFilePath(c.getResource()))u=c.getResource().fsPath;else if(u=this.promptForPathSync(this.suggestFileName(n[s])),!u)return i.TPromise.as({results:t.concat(n).map(function(e){return{source:e}})});r.push(a["default"].file(u))}}return e.prototype.saveAll.call(this,t).then(function(e){var t=[];return r.forEach(function(i,r){var s=o.saveAs(n[r],i).then(function(t){e.results.push({source:n[r],target:t,success:!!t})});t.push(s)}),i.TPromise.join(t).then(function(){return e})})},t.prototype.saveAs=function(e,t){var n,o=this;if(t)n=i.TPromise.as(t);else{var r=e.fsPath;"untitled"===e.scheme&&(r=this.suggestFileName(e)),n=this.promptForPathAsync(r).then(function(e){return e?a["default"].file(e):null})}return n.then(function(t){return t?e.toString()===t.toString()?o.save(e).then(function(){return e}):o.doSaveAs(e,t):null})},t.prototype.doSaveAs=function(e,t){var n=this,o=i.TPromise.as(null);if("file"===e.scheme)o=i.TPromise.as(l.CACHE.get(e));else if("untitled"===e.scheme){var r=this.untitledEditorService.get(e);r&&(o=r.resolve())}return o.then(function(i){return i?n.fileService.updateContent(t,i.getValue(),{encoding:i.getEncoding()}):n.fileService.copyFile(e,t)}).then(function(){return n.getWorkingFilesModel().addEntry(t),n.revert(e).then(function(){return t})})},t.prototype.suggestFileName=function(e){var t=this.contextService.getWorkspace();return t?a["default"].file(o.join(t.resource.fsPath,this.untitledEditorService.get(e).suggestFileName())).fsPath:this.untitledEditorService.get(e).suggestFileName()},t.prototype.promptForPathAsync=function(e){var t=this;return new i.TPromise(function(n,i){t.windowService.getWindow().showSaveDialog(t.getSaveDialogOptions(e?o.normalize(e,!0):void 0),function(e){n(e)})})},t.prototype.promptForPathSync=function(e){return this.windowService.getWindow().showSaveDialog(this.getSaveDialogOptions(e?o.normalize(e,!0):void 0))},t.prototype.getSaveDialogOptions=function(e){var t=this,i={defaultPath:e},s=!0;if(s)return i;var a,c=o.extname(e),u=this.modeService.getRegisteredLanguageNames().map(function(e){var n=t.modeService.getExtensions(e);if(!n||!n.length)return null;var i={name:e,extensions:n.map(function(e){return r.trim(e,".")})};return c&&n.indexOf(c)>=0?(a=i,null):i}).filter(function(e){return!!e}),l={name:n.localize(7,null),extensions:["*"]};return a?(u.unshift(a),u.push(l)):u.unshift(l),i.filters=u,i},t=__decorate([__param(0,m.IWorkspaceContextService),__param(1,f.IInstantiationService),__param(2,p.IFileService),__param(3,h.IUntitledEditorService),__param(4,v.ILifecycleService),__param(5,g.ITelemetryService),__param(6,y.IConfigurationService),__param(7,c.IEventService),__param(8,_.IModeService),__param(9,b.IWindowService)],t)}(u.TextFileService);t.TextFileService=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/files.electron.contribution",["require","exports","vs/nls!vs/workbench/parts/files/electron-browser/files.electron.contribution","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/workbench/common/actionRegistry","vs/platform/actions/common/actions","vs/base/common/platform","vs/workbench/parts/files/common/files","vs/workbench/common/contributions","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/electron-browser/electronFileTracker","vs/workbench/parts/files/electron-browser/textFileServices","vs/workbench/parts/files/electron-browser/electronFileActions","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/extensions","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v){"use strict";var g=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element;return!!c.asFileResource(t)},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=c.asFileResource(e.element);t.push(this.instantiationService.createInstance(p.RevealInOSAction,n.resource)),t.push(this.instantiationService.createInstance(p.CopyPathAction,n.resource))}return t},t=__decorate([__param(0,f.IInstantiationService)],t)}(o.ActionBarContributor),y=n.localize(0,null),_=i.Registry.as(r.Extensions.WorkbenchActions);_.registerWorkbenchAction(new s.SyncActionDescriptor(l.SaveFileAsAction,l.SaveFileAsAction.ID,l.SaveFileAsAction.LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_S}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(l.GlobalNewFileAction,l.GlobalNewFileAction.ID,l.GlobalNewFileAction.LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_N}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.GlobalCopyPathAction,p.GlobalCopyPathAction.ID,p.GlobalCopyPathAction.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_P)}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.GlobalRevealInOSAction,p.GlobalRevealInOSAction.ID,p.GlobalRevealInOSAction.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_R)}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.ShowOpenedFileInNewWindow,p.ShowOpenedFileInNewWindow.ID,p.ShowOpenedFileInNewWindow.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_O)}),y),a.isMacintosh?_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFileFolderAction,p.OPEN_FILE_FOLDER_ID,p.OPEN_FILE_FOLDER_LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_O}),y):(_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFileAction,p.OPEN_FILE_ID,p.OPEN_FILE_LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_O}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFolderAction,p.OPEN_FOLDER_ID,p.OPEN_FOLDER_LABEL),y));var b=i.Registry.as(o.Extensions.Actionbar);b.registerActionBarContributor(o.Scope.VIEWER,g),i.Registry.as(u.Extensions.Workbench).registerWorkbenchContribution(d.FileTracker),m.registerSingleton(c.ITextFileService,h.TextFileService)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/gettingStarted/common/abstractGettingStarted",["require","exports","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n){this.storageService=e,this.contextService=t,this.telemetryService=n;var i=t.getConfiguration().env;this.appName=i.appName,i.welcomePage&&!i.extensionTestsPath&&(this.welcomePageURL=i.welcomePage,this.handleWelcome())}return e.prototype.handleWelcome=function(){var t=this,n=!this.storageService.get(e.hideWelcomeSettingskey);n&&this.welcomePageURL&&this.telemetryService.getTelemetryInfo().then(function(n){var i=t.getUrl(n);t.openExternal(i),t.storageService.store(e.hideWelcomeSettingskey,!0)})},e.prototype.getUrl=function(e){return this.welcomePageURL+"&&from="+this.appName+"&&id="+e.machineId},e.prototype.openExternal=function(e){throw new Error("implement me")},e.prototype.getId=function(){return"vs.gettingstarted"},e.hideWelcomeSettingskey="workbench.hide.welcome",e=__decorate([__param(0,i.IStorageService),__param(1,n.IWorkspaceContextService),__param(2,o.ITelemetryService)],e)}();t.AbstractGettingStarted=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/gettingStarted/electron-browser/electronGettingStarted",["require","exports","vs/workbench/parts/gettingStarted/common/abstractGettingStarted","electron"],function(e,t,n,i){"use strict";var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.openExternal=function(e){i.shell.openExternal(e)},t.prototype.handleWelcome=function(){navigator.onLine&&e.prototype.handleWelcome.call(this)},t}(n.AbstractGettingStarted);t.ElectronGettingStarted=o}),define("vs/workbench/parts/gettingStarted/electron-browser/electronGettingStarted.contribution",["require","exports","vs/platform/platform","vs/workbench/parts/gettingStarted/electron-browser/electronGettingStarted","vs/workbench/common/contributions"],function(e,t,n,i,o){"use strict";n.Registry.as(o.Extensions.Workbench).registerWorkbenchContribution(i.ElectronGettingStarted)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/git/browser/gitActions","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/types","vs/base/common/actions","vs/workbench/parts/git/common/gitModel","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/common/editor","vs/base/common/errors","vs/base/common/platform","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/event/common/event","vs/platform/files/common/files","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/parts/git/common/git","vs/workbench/services/quickopen/common/quickOpenService","vs/base/common/paths","vs/base/common/uri"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E){"use strict";function w(e,t){if(void 0===t&&(t=!1),e){if(Array.isArray(e)){if(e.some(function(e){return!(e instanceof c.FileStatus)}))throw new Error("Invalid context.");return e}if(e instanceof c.FileStatus)return[e];if(e instanceof c.StatusGroup)return e.all();if(e.tree){var n=e.tree.getSelection();return n.indexOf(e.fileStatus)>-1?n:[e.fileStatus]}if(e.selection)return!t&&e.selection.indexOf(e.focus)>-1?e.selection:[e.focus];throw new Error("Invalid context.")}return e}var C=function(e){function t(t,n,i,o){var r=this;e.call(this,t,n,i,!1),this.gitService=o,this.toDispose=[this.gitService.addBulkListener2(function(){return r.onGitServiceChange()})],this.onGitServiceChange()}return __extends(t,e),t.prototype.onGitServiceChange=function(){this.updateEnablement()},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t.prototype.isEnabled=function(){return!!this.gitService},t.prototype.dispose=function(){this.gitService=null,this.toDispose=o.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(a.Action);t.GitAction=C;var T=function(e){function t(n,o){e.call(this,t.ID,i.localize(0,null),"git-action open-change",o),this.editorService=n,this.onGitServiceChange()}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService},t.prototype.run=function(e){var t=this,n=w(e,!0);return this.gitService.getInput(n[0]).then(function(e){var n=new l.TextDiffEditorOptions;return n.forceOpen=!0,t.editorService.openEditor(e,n)})},t.ID="workbench.action.git.openChange",t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,_.IGitService)],t)}(C);t.OpenChangeAction=T;var k=function(e){function t(n,o,r,s){e.call(this,t.ID,i.localize(1,null),"git-action open-file",r),this.fileService=o,this.editorService=n,this.contextService=s,this.onGitServiceChange()}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService||!!this.fileService},t.prototype.getPath=function(e){if(e.getStatus()===_.Status.INDEX_RENAMED)return e.getRename();var t=this.gitService.getModel().getStatus().find(e.getPath(),_.StatusType.INDEX);return t&&t.getStatus()===_.Status.INDEX_RENAMED?e.getRename():e.getPath()},t.prototype.run=function(e){var i=this,o=w(e,!0),r=o[0];if(!(r instanceof c.FileStatus))return n.Promise.wrapError(new Error("Can't open file."));if(t.DELETED_STATES.indexOf(r.getStatus())>-1)return n.Promise.wrapError(new Error("Can't open file which is has been deleted."));var s=E["default"].file(S.join(this.gitService.getModel().getRepositoryRoot(),this.getPath(r)));return this.fileService.resolveFile(s).then(function(e){return i.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}})})},t.DELETED_STATES=[_.Status.BOTH_DELETED,_.Status.DELETED,_.Status.DELETED_BY_US,_.Status.INDEX_DELETED],t.ID="workbench.action.git.openFile",t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,v.IFileService),__param(2,_.IGitService),__param(3,f.IWorkspaceContextService)],t)}(C);t.OpenFileAction=k;var x=function(e){function t(n){e.call(this,t.ID,i.localize(2,null),"git-action init",n)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getState()===_.ServiceState.NotARepo},t.prototype.run=function(){return this.gitService.init()},t.ID="workbench.action.git.init",t=__decorate([__param(0,_.IGitService)],t)}(C);t.InitAction=x;var I=function(e){function t(n){e.call(this,t.ID,i.localize(3,null),"git-action refresh",n)}return __extends(t,e),t.prototype.run=function(){return this.gitService.status()},t.ID="workbench.action.git.refresh",t=__decorate([__param(0,_.IGitService)],t)}(C);t.RefreshAction=I;var D=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o),this.editorService=r}return __extends(t,e),t.prototype.run=function(e){var t=this,i=w(e);return this.gitService.add(w(e)).then(function(e){var o=t.findGitWorkingTreeEditor();if(!o)return n.TPromise.as(e);var r=o.input,s=r.getFileStatus();if(i&&i.every(function(e){return e!==s}))return n.TPromise.as(e);var a=r.getFileStatus().getPath(),c=e.getStatus().find(a,_.StatusType.INDEX);if(!c)return n.TPromise.as(e);var u=o.getControl(),d=u?u.saveViewState():null;return t.gitService.getInput(c).then(function(n){var i=new l.TextDiffEditorOptions;return i.forceOpen=!0,t.editorService.openEditor(n,i,o.position).then(function(t){return d&&u.restoreViewState(d),e})})})},t.prototype.findGitWorkingTreeEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(u.isGitEditorInput(n.input))return n}return null},t.prototype.dispose=function(){this.editorService=null,e.prototype.dispose.call(this)},t}(C);t.BaseStageAction=D;var A=function(e){function t(n,i){e.call(this,t.ID,t.LABEL,"git-action stage",n,i)}return __extends(t,e),t.ID="workbench.action.git.stage",t.LABEL=i.localize(4,null),t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(D);t.StageAction=A;var L=function(e){function t(n,o){e.call(this,t.ID,i.localize(5,null),"git-action stage",n,o)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getWorkingTreeStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this)},t.ID="workbench.action.git.stageAll",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(D);t.GlobalStageAction=L;var O=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n,i,o),this.eventService=r,this.editorService=c,this.messageService=s,this.fileService=a,this.contextService=u,this.onGitServiceChange()}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.eventService&&!!this.editorService&&!!this.fileService},t.prototype.run=function(e){var t=this;if(!this.messageService.confirm(this.getConfirm(e)))return n.TPromise.as(null);var i=[];if(e instanceof c.StatusGroup)i=[this.gitService.undo()];else{for(var o=w(e),r=[],s=[],a=0;a<o.length;a++){var u=o[a].clone();switch(u.getStatus()){case _.Status.UNTRACKED:case _.Status.IGNORED:r.push(u);break;default:s.push(u)}}r.length>0&&i.push(this.gitService.clean(r)),s.length>0&&i.push(this.gitService.checkout("",s))}return n.Promise.join(i).then(function(e){if(0===e.length)return n.TPromise.as(null);var i=e[e.length-1],r=t.findWorkingTreeDiffEditor();if(!r)return n.TPromise.as(i);var s=r.input,a=s.getFileStatus();if(o&&o.every(function(e){return e!==a}))return n.TPromise.as(i);var c=s.getFileStatus().getPath(),u=r.getControl(),l=u?u.getModifiedEditor():null,d=l?l.saveViewState():null;return t.fileService.resolveFile(t.contextService.toResource(c)).then(function(e){return t.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}},r.position).then(function(e){if(d){var t=r.getControl();t&&t.restoreViewState(d)}})})}).then(null,function(e){return console.error("One or more errors occurred",e),n.Promise.wrapError(e[0])})},t.prototype.findWorkingTreeDiffEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(n.input instanceof u.GitWorkingTreeDiffEditorInput)return n}return null},t.prototype.getConfirm=function(e){var t=w(e);if(t.length>1){var n=t.length;return{message:i.localize(6,null),detail:1===n?i.localize(7,null,n):i.localize(8,null,n),primaryButton:i.localize(9,null)}}var o=t[0].getPathComponents().reverse()[0];return{message:i.localize(10,null,o),detail:i.localize(11,null),primaryButton:i.localize(12,null)}},t.prototype.dispose=function(){this.eventService=null,this.editorService=null,this.fileService=null,e.prototype.dispose.call(this)},t}(C);t.BaseUndoAction=O;var M=function(e){function t(n,o,r,s,a,c){e.call(this,t.ID,i.localize(13,null),"git-action undo",n,o,r,s,a,c)}return __extends(t,e),t.ID="workbench.action.git.undo",t=__decorate([__param(0,_.IGitService),__param(1,m.IEventService),__param(2,g.IMessageService),__param(3,v.IFileService),__param(4,p.IWorkbenchEditorService),__param(5,f.IWorkspaceContextService)],t)}(O);t.UndoAction=M;var P=function(e){function t(n,o,r,s,a,c){e.call(this,t.ID,i.localize(14,null),"git-action undo",n,o,r,s,a,c)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getWorkingTreeStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this,this.gitService.getModel().getStatus().getWorkingTreeStatus())},t.ID="workbench.action.git.undoAll",t=__decorate([__param(0,_.IGitService),__param(1,m.IEventService),__param(2,g.IMessageService),__param(3,v.IFileService),__param(4,p.IWorkbenchEditorService),__param(5,f.IWorkspaceContextService)],t)}(O);t.GlobalUndoAction=P;var R=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o),this.editorService=r,this.onGitServiceChange()}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService},t.prototype.run=function(e){var t=this,i=w(e);return this.gitService.revertFiles("HEAD",i).then(function(e){var o=t.findGitIndexEditor();if(!o)return n.TPromise.as(e);var r=o.input,s=r.getFileStatus();if(i&&i.every(function(e){return e!==s}))return n.TPromise.as(e);var a=r.getFileStatus().getPath(),c=e.getStatus().find(a,_.StatusType.WORKING_TREE);if(!c)return n.TPromise.as(e);var u=o.getControl(),d=u?u.saveViewState():null;return t.gitService.getInput(c).then(function(n){var i=new l.TextDiffEditorOptions;return i.forceOpen=!0,t.editorService.openEditor(n,i,o.position).then(function(t){return d&&u.restoreViewState(d),e})})})},t.prototype.findGitIndexEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(u.isGitEditorInput(n.input))return n}return null},t.prototype.dispose=function(){this.editorService=null,e.prototype.dispose.call(this)},t}(C);t.BaseUnstageAction=R;var N=function(e){function t(n,o){e.call(this,t.ID,i.localize(15,null),"git-action unstage",n,o)}return __extends(t,e),t.ID="workbench.action.git.unstage",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(R);t.UnstageAction=N;var F=function(e){function t(n,o){e.call(this,t.ID,i.localize(16,null),"git-action unstage",n,o)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getIndexStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this)},t.ID="workbench.action.git.unstageAll",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(R);t.GlobalUnstageAction=F;var W;!function(e){e[e.Alive=0]="Alive",e[e.Disposing=1]="Disposing",e[e.Disposed=2]="Disposed"}(W||(W={}));var H=function(e){function t(n,i,o){e.call(this,t.ID,n.name,"git-action checkout",i),this.editorService=o,this.branch=n,this.HEAD=null,this.state=W.Alive,this.runPromises=[],this.onGitServiceChange()}return __extends(t,e),t.prototype.onGitServiceChange=function(){this.gitService.getState()===_.ServiceState.OK&&(this.HEAD=this.gitService.getModel().getHEAD(),this.HEAD&&this.HEAD.name===this.branch.name?this["class"]="git-action checkout HEAD":this["class"]="git-action checkout"),e.prototype.onGitServiceChange.call(this)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.HEAD},t.prototype.run=function(e){var t=this;if(this.state!==W.Alive)return n.Promise.wrapError("action disposed");if(this.HEAD&&this.HEAD.name===this.branch.name)return n.TPromise.as(null);var o=this.gitService.checkout(this.branch.name).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.DirtyWorkTree?n.Promise.wrapError(new Error(i.localize(17,null))):n.Promise.wrapError(e)});return this.runPromises.push(o),o.done(function(){return t.runPromises.splice(t.runPromises.indexOf(o),1)}),o},t.prototype.dispose=function(){var e=this;this.state===W.Alive&&(this.state=W.Disposing,n.Promise.join(this.runPromises).done(function(){return e.actuallyDispose()}))},t.prototype.actuallyDispose=function(){this.editorService=null,this.branch=null,this.HEAD=null,e.prototype.dispose.call(this),this.state=W.Disposed},t.ID="workbench.action.git.checkout",t=__decorate([__param(1,_.IGitService),__param(2,p.IWorkbenchEditorService)],t)}(C);t.CheckoutAction=H;var V=function(e){function t(n,o){e.call(this,t.ID,i.localize(18,null),"git-action checkout",o),this.checkout=n}return __extends(t,e),t.prototype.run=function(e){return s.isString(e)?this.gitService.branch(e,this.checkout):n.TPromise.as(!1)},t.ID="workbench.action.git.branch",t=__decorate([__param(1,_.IGitService)],t)}(C);t.BranchAction=V;var K=function(e){function t(t,n,i,o,r){var s=this;e.call(this,n,i,o,r),this.commitState=t,this.toDispose.push(t.addListener2("change/commitInputBox",function(){s.updateEnablement()})),this.onGitServiceChange()}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getIndexStatus().all().length>0},t.prototype.run=function(e){return this.commitState.getCommitMessage()?this.gitService.commit(this.commitState.getCommitMessage()):(this.commitState.onEmptyCommitMessage(),n.TPromise.as(null))},t}(C);t.BaseCommitAction=K;var B=function(e){function t(n,o){e.call(this,n,t.ID,i.localize(19,null),"git-action commit",o)}return __extends(t,e),t.ID="workbench.action.git.commit",t=__decorate([__param(1,_.IGitService)],t)}(K);t.CommitAction=B;var U=function(e){function t(n,o){e.call(this,n,t.ID,i.localize(20,null),"git-action stage-and-commit",o)}return __extends(t,e),t.prototype.isEnabled=function(){if(!this.gitService)return!1;if(!this.gitService.isIdle())return!1;var e=this.gitService.getModel().getStatus();return e.getIndexStatus().all().length>0||e.getWorkingTreeStatus().all().length>0},t.prototype.run=function(e){return this.commitState.getCommitMessage()?this.gitService.commit(this.commitState.getCommitMessage(),!1,!0):(this.commitState.onEmptyCommitMessage(),n.TPromise.as(null))},t.ID="workbench.action.git.stageAndCommit",t=__decorate([__param(1,_.IGitService)],t)}(K);t.StageAndCommitAction=U;var z=function(e){function t(n,i,o){e.call(this,n,t.ID,t.ALL,"git-action smart-commit",i),this.messageService=o,this.onGitServiceChange()}return __extends(t,e),t.prototype.onGitServiceChange=function(){if(e.prototype.onGitServiceChange.call(this),!this.enabled)return void(this.label=t.ALL);var n=this.gitService.getModel().getStatus();n.getIndexStatus().all().length>0?this.label=t.STAGED:this.label=t.ALL,this.label+=" ("+(h.isMacintosh?"Cmd+Enter":"Ctrl+Enter")+")"},t.prototype.isEnabled=function(){if(!this.gitService)return!1;if(!this.gitService.isIdle())return!1;var e=this.gitService.getModel().getStatus();return e.getIndexStatus().all().length>0||e.getWorkingTreeStatus().all().length>0},t.prototype.run=function(e){if(!this.commitState.getCommitMessage())return this.commitState.onEmptyCommitMessage(),n.TPromise.as(null);var t=this.gitService.getModel().getStatus();return this.gitService.commit(this.commitState.getCommitMessage(),!1,0===t.getIndexStatus().all().length)},t.ID="workbench.action.git.commitAll",t.ALL=i.localize(21,null),t.STAGED=i.localize(22,null),t=__decorate([__param(1,_.IGitService),__param(2,g.IMessageService)],t)}(K);t.SmartCommitAction=z;var j=function(e){function t(n,i,o){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action pull",o)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return!!(n&&n.name&&n.upstream)},t.prototype.run=function(e){return this.pull()},t.prototype.pull=function(e){return void 0===e&&(e=!1),this.gitService.pull(e).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.DirtyWorkTree?n.Promise.wrapError(d.create(i.localize(24,null),{severity:y["default"].Warning})):e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(25,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.git.pull",t.LABEL=i.localize(23,null),t=__decorate([__param(2,_.IGitService)],t)}(C);t.PullAction=j;var q=function(e){function t(n){e.call(this,t.ID,t.LABEL,n)}return __extends(t,e),t.prototype.run=function(e){return this.pull(!0)},t.ID="workbench.action.git.pull.rebase",t.LABEL=i.localize(26,null),t=__decorate([__param(0,_.IGitService)],t)}(j);t.PullWithRebaseAction=q;var G=function(e){function t(n,i,o){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action push",o)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return n&&n.name&&n.upstream?!!n.ahead:!1},t.prototype.run=function(e){return this.gitService.push().then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(28,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.git.push",t.LABEL=i.localize(27,null),t=__decorate([__param(2,_.IGitService)],t)}(C);t.PushAction=G;var Y=function(e){function t(n,i,o,r,s){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action publish",o),this.quickOpenService=r,this.messageService=s}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel();if(0===t.getRemotes().length)return!1;var n=t.getHEAD();return!(!n||!n.name||n.upstream)},t.prototype.run=function(e){var t,o=this,r=this.gitService.getModel(),s=r.getRemotes(),a=r.getHEAD().name;if(1===s.length){var c=s[0].name,u=this.messageService.confirm({message:i.localize(30,null,a,c),primaryButton:i.localize(31,null)});t=n.TPromise.as(u?c:null)}else t=this.quickOpenService.pick(s.map(function(e){return e.name}),{placeHolder:i.localize(32,null,a)});return t.then(function(e){return e&&o.gitService.push(e,a,{setUpstream:!0})}).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(33,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.git.publish",t.LABEL=i.localize(29,null),t=__decorate([__param(2,_.IGitService),__param(3,b.IQuickOpenService),__param(4,g.IMessageService)],t)}(C);t.PublishAction=Y;var $=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return!!(n&&n.name&&n.upstream)},t.prototype.run=function(e){return this.enabled?this.gitService.sync().then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(34,null))):n.Promise.wrapError(e)}):n.TPromise.as(null)},t}(C);t.BaseSyncAction=$;var X=function(e){function t(t,n,i){e.call(this,t,n,"git-action sync",i)}return __extends(t,e),t.ID="workbench.action.git.sync",t.LABEL=i.localize(35,null),t=__decorate([__param(2,_.IGitService)],t)}($);t.SyncAction=X;var Q=function(e){function t(n){e.call(this,t.ID,i.localize(36,null),t.CLASS_NAME,n)}return __extends(t,e),t.prototype.onGitServiceChange=function(){if(e.prototype.onGitServiceChange.call(this),this.gitService.getRunningOperations().some(function(e){return e.id===_.ServiceOperations.SYNC||e.id===_.ServiceOperations.PULL||e.id===_.ServiceOperations.PUSH}))this.label="",this["class"]=t.CLASS_NAME_LOADING,this.tooltip=i.localize(37,null);else{this["class"]=t.CLASS_NAME;var n=this.gitService.getModel(),o=n.getHEAD();o?o.name?o.upstream?o.ahead||o.behind?(this.label=r.format("{0}↓ {1}↑",o.behind,o.ahead),n.getStatus().getGroups().some(function(e){return e.all().length>0})?this.tooltip=i.localize(41,null):1===o.behind&&1===o.ahead?this.tooltip=i.localize(42,null,o.name,o.behind,o.ahead,o.upstream):1===o.behind?this.tooltip=i.localize(43,null,o.name,o.behind,o.ahead,o.upstream):1===o.ahead?this.tooltip=i.localize(44,null,o.name,o.behind,o.ahead,o.upstream):this.tooltip=i.localize(45,null,o.name,o.behind,o.ahead,o.upstream)):(this.label="",this.tooltip=i.localize(40,null,o.name)):(this.label="",this.tooltip=i.localize(39,null,o.name)):(this.label="",
this.tooltip=i.localize(38,null)):(this.label="",this.tooltip="")}},t.ID="workbench.action.git.liveSync",t.CLASS_NAME="git-action live-sync",t.CLASS_NAME_LOADING="git-action live-sync loading",t=__decorate([__param(0,_.IGitService)],t)}($);t.LiveSyncAction=Q;var Z=function(e){function t(n){e.call(this,t.ID,i.localize(46,null),"git-action undo-last-commit",n)}return __extends(t,e),t.prototype.run=function(){return this.gitService.reset("HEAD~")},t.ID="workbench.action.git.undoLastCommit",t=__decorate([__param(0,_.IGitService)],t)}(C);t.UndoLastCommitAction=Z;var J=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("git checkout "),n.TPromise.as(null)},t.ID="workbench.action.git.startGitCheckout",t.LABEL=i.localize(47,null),t=__decorate([__param(2,b.IQuickOpenService)],t)}(a.Action);t.StartGitCheckoutAction=J;var ee=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("git branch "),n.TPromise.as(null)},t.ID="workbench.action.git.startGitBranch",t.LABEL=i.localize(48,null),t=__decorate([__param(2,b.IQuickOpenService)],t)}(a.Action);t.StartGitBranchAction=ee});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitWidgets",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitWidgets","vs/base/common/strings","vs/base/common/async","vs/base/browser/dom","vs/base/common/lifecycle","vs/workbench/parts/git/common/git","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/instantiation/common/instantiation","./gitActions","vs/base/common/severity","vs/platform/message/common/message"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=500,f=function(){function e(e,t,n,i){this.messageService=i,this.instantiationService=e,this.gitService=t,this.quickOpenService=n,this.disablementDelayer=new o.Delayer(p),this.syncAction=e.createInstance(l.SyncAction,l.SyncAction.ID,l.SyncAction.LABEL),this.publishAction=e.createInstance(l.PublishAction,l.PublishAction.ID,l.PublishAction.LABEL),this.toDispose=[this.syncAction,this.publishAction],this.state={serviceState:a.ServiceState.NotInitialized,isBusy:!1,isSyncing:!1,HEAD:null,remotes:[],ps1:""}}return e.prototype.render=function(e){var t=this;return this.element=r.append(e,r.emmet(".git-statusbar-group")),this.branchElement=r.append(this.element,r.emmet("a")),this.publishElement=r.append(this.element,r.emmet("a.octicon.octicon-cloud-upload")),this.publishElement.title=n.localize(0,null),this.publishElement.onclick=function(){return t.onPublishClick()},this.syncElement=r.append(this.element,r.emmet("a.git-statusbar-sync-item")),this.syncElement.title=n.localize(1,null),this.syncElement.onclick=function(){return t.onSyncClick()},r.append(this.syncElement,r.emmet("span.octicon.octicon-sync")),this.syncLabelElement=r.append(this.syncElement,r.emmet("span.ahead-behind")),this.setState(this.state),this.toDispose.push(this.gitService.addBulkListener2(function(){return t.onGitServiceChange()})),s.combinedDispose.apply(void 0,this.toDispose)},e.prototype.onGitServiceChange=function(){var e=this.gitService.getModel();this.setState({serviceState:this.gitService.getState(),isBusy:this.gitService.getRunningOperations().some(function(e){return e.id===a.ServiceOperations.CHECKOUT||e.id===a.ServiceOperations.BRANCH}),isSyncing:this.gitService.getRunningOperations().some(function(e){return e.id===a.ServiceOperations.SYNC}),HEAD:e.getHEAD(),remotes:e.getRemotes(),ps1:e.getPS1()})},e.prototype.setState=function(e){var t=this;this.state=e;var o,s=!1,c="git-statusbar-branch-item",u="",l="",d=null;if(e.serviceState!==a.ServiceState.OK)s=!0,c+=" disabled",l=n.localize(2,null),o=" ";else{var h=e.HEAD;e.isBusy?c+=" busy":d=function(){return t.onBranchClick()},h?h.name?h.commit&&h.upstream&&(h.ahead||h.behind)?(o=e.ps1,u=i.format("{0}↓ {1}↑",h.behind,h.ahead)):o=e.ps1:(o=e.ps1,c+=" headless"):o=e.ps1}this.branchElement.className=c,this.branchElement.title=l,this.branchElement.textContent=o,this.branchElement.onclick=d,this.syncLabelElement.textContent=u,s?(r.hide(this.branchElement),r.hide(this.publishElement),r.hide(this.syncElement)):(r.show(this.branchElement),e.HEAD&&e.HEAD.upstream?(r.show(this.syncElement),r.toggleClass(this.syncElement,"syncing",this.state.isSyncing),r.toggleClass(this.syncElement,"empty",!u),this.disablementDelayer.trigger(function(){return r.toggleClass(t.syncElement,"disabled",!t.syncAction.enabled)},this.syncAction.enabled?0:p),r.hide(this.publishElement)):e.remotes.length>0?(r.hide(this.syncElement),r.show(this.publishElement),this.disablementDelayer.trigger(function(){return r.toggleClass(t.publishElement,"disabled",!t.publishAction.enabled)},this.publishAction.enabled?0:p)):(r.hide(this.syncElement),r.hide(this.publishElement)))},e.prototype.onBranchClick=function(){this.quickOpenService.show("git checkout ")},e.prototype.onPublishClick=function(){var e=this;this.publishAction.enabled&&this.publishAction.run().done(null,function(t){return e.messageService.show(d["default"].Error,t)})},e.prototype.onSyncClick=function(){var e=this;this.syncAction.enabled&&this.syncAction.run().done(null,function(t){return e.messageService.show(d["default"].Error,t)})},e=__decorate([__param(0,u.IInstantiationService),__param(1,a.IGitService),__param(2,c.IQuickOpenService),__param(3,h.IMessageService)],e)}();t.GitStatusbarItem=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitWorkbenchContributions",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/base/common/async","vs/base/common/errors","vs/base/common/paths","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/workbench/common/contributions","vs/workbench/parts/git/common/git","vs/workbench/common/events","vs/editor/common/editorCommon","vs/editor/browser/widget/codeEditorWidget","vs/workbench/browser/viewlet","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/platform","vs/workbench/parts/git/browser/gitWidgets","vs/workbench/common/actionRegistry","vs/workbench/parts/git/browser/gitOutput","vs/workbench/parts/output/common/output","vs/platform/actions/common/actions","vs/editor/browser/editorBrowserExtensions","vs/platform/configuration/common/configurationRegistry","vs/workbench/browser/quickopen","vs/workbench/parts/git/browser/gitEditorContributions","vs/workbench/services/activity/common/activityService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/editor/common/services/modelService","vs/editor/common/model/textModel","vs/editor/common/services/editorWorkerService","vs/css!./media/git.contribution"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R){"use strict";function N(){m.Registry.as(f.Extensions.Statusbar).registerStatusbarItem(new f.StatusbarItemDescriptor(v.GitStatusbarItem,f.StatusbarAlignment.LEFT,100));var e=m.Registry.as(_.Extensions.OutputChannels);e.registerChannel("Git"),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(y.GitOutput),m.Registry.as(p.Extensions.Viewlets).registerViewlet(new p.ViewletDescriptor("vs/workbench/parts/git/browser/gitViewlet","GitViewlet",t.VIEWLET_ID,n.localize(3,null),"git",35)),m.Registry.as(g.Extensions.WorkbenchActions).registerWorkbenchAction(new b.SyncActionDescriptor(K,K.ID,K.LABEL,{primary:null,win:{primary:O.KeyMod.CtrlCmd|O.KeyMod.Shift|O.KeyCode.KEY_G},linux:{primary:O.KeyMod.CtrlCmd|O.KeyMod.Shift|O.KeyCode.KEY_G},mac:{primary:O.KeyMod.WinCtrl|O.KeyMod.Shift|O.KeyCode.KEY_G}}),n.localize(4,null)),S.EditorBrowserRegistry.registerEditorContribution(C.MergeDecorator),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(W),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(V),m.Registry.as(w.Extensions.Quickopen).registerQuickOpenHandler(new w.QuickOpenHandlerDescriptor("vs/workbench/parts/git/browser/gitQuickOpen","CommandQuickOpenHandler","git ",n.localize(5,null)));var i=m.Registry.as(E.Extensions.Configuration);i.registerConfiguration({id:"git",order:10,title:n.localize(6,null),type:"object",properties:{"git.enabled":{type:"boolean",description:n.localize(7,null),"default":!0},"git.path":{type:["string","null"],description:n.localize(8,null),"default":null},"git.autofetch":{type:"boolean",description:n.localize(9,null),"default":!0}}})}var F=u.IGitService,W=function(){function e(e,t,n,o){var r=this;this.gitService=e,this.eventService=t,this.activityService=n,this.messageService=o,this.progressBadgeDelayer=new i.Delayer(200),this.toDispose=[],this.toDispose.push(this.gitService.addBulkListener2(function(e){return r.onGitServiceChange()}))}return e.prototype.onGitServiceChange=function(){var e=this;this.gitService.getState()!==u.ServiceState.OK?(this.progressBadgeDelayer.cancel(),this.activityService.showActivity("workbench.view.git",null,"git-viewlet-label")):this.gitService.isIdle()?this.showChangesBadge():this.progressBadgeDelayer.trigger(function(){e.activityService.showActivity("workbench.view.git",new T.ProgressBadge(function(){return n.localize(0,null)}),"git-viewlet-label-progress")})},e.prototype.showChangesBadge=function(){var e=this.gitService.getModel().getStatus().getGroups().map(function(e){return e.all().length}).reduce(function(e,t){return e+t},0),t=new T.NumberBadge(e,function(e){return n.localize(1,null,e)});this.progressBadgeDelayer.cancel(),this.activityService.showActivity("workbench.view.git",t,"git-viewlet-label")},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=s.disposeAll(this.toDispose)},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Workbench.StatusUpdater",e=__decorate([__param(0,F),__param(1,k.IEventService),__param(2,T.IActivityService),__param(3,I.IMessageService)],e)}();t.StatusUpdater=W;var H=function(){function e(t,n,o,r,s,a,c){var l=this;this.modelService=o,this.editorWorkerService=r,this.editorService=s,this.contextService=a,this.gitService=c,this.model=t,this._originalContentsURI=t.getAssociatedResource().withScheme(e.GIT_ORIGINAL_SCHEME),this.path=n,this.decorations=[],this.delayer=new i.ThrottledDelayer(500),this.diffDelayer=new i.ThrottledDelayer(200),this.toDispose=[],this.toDispose.push(t.addListener2(d.EventType.ModelContentChanged,function(){return l.triggerDiff()})),this.toDispose.push(this.gitService.addListener2(u.ServiceEvents.STATE_CHANGED,function(){return l.onChanges()})),this.toDispose.push(this.gitService.addListener2(u.ServiceEvents.OPERATION_END,function(e){e.operation.id!==u.ServiceOperations.BACKGROUND_FETCH&&l.onChanges()})),this.onChanges()}return e.prototype.onChanges=function(){this.gitService&&this.gitService.getState()===u.ServiceState.OK&&this.trigger()},e.prototype.trigger=function(){var e=this;this.delayer.trigger(function(){return e.diffOriginalContents()}).done(null,o.onUnexpectedError)},e.prototype.diffOriginalContents=function(){var e=this;return this.getOriginalContents().then(function(t){if(e.model&&!e.model.isDisposed()){if(!t)return e.modelService.destroyModel(e._originalContentsURI),e.triggerDiff();var n=e.modelService.getModel(e._originalContentsURI);if(n){var i=P.RawText.fromStringWithModelOptions(t,n);if(n.equals(i))return a.TPromise.as(null);n.setValueFromRawText(i)}else e.modelService.createModel(t,null,e._originalContentsURI);return e.triggerDiff()}})},e.prototype.getOriginalContents=function(){var e=this.gitService.getModel(),t=e.getStatus().find(this.path,u.StatusType.INDEX)?"~":"HEAD";return this.gitService.buffer(this.path,t)},e.prototype.triggerDiff=function(){var t=this;return this.diffDelayer?this.diffDelayer.trigger(function(){return!t.model||t.model.isDisposed()?a.TPromise.as([]):t.editorWorkerService.computeDirtyDiff(t._originalContentsURI,t.model.getAssociatedResource(),!0)}).then(function(n){return t.model&&!t.model.isDisposed()?t.decorations=t.model.deltaDecorations(t.decorations,e.changesToDecorations(n||[])):void 0}):a.TPromise.as(null)},e.changesToDecorations=function(t){return t.map(function(t){var n=t.modifiedStartLineNumber,i=t.modifiedEndLineNumber||n;return 0===t.originalEndLineNumber?{range:{startLineNumber:n,startColumn:1,endLineNumber:i,endColumn:1},options:e.ADDED_DECORATION_OPTIONS}:0===t.modifiedEndLineNumber?{range:{startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:1},options:e.DELETED_DECORATION_OPTIONS}:{range:{startLineNumber:n,startColumn:1,endLineNumber:i,endColumn:1},options:e.MODIFIED_DECORATION_OPTIONS}})},e.prototype.dispose=function(){this.modelService.destroyModel(this._originalContentsURI),this.toDispose=s.disposeAll(this.toDispose),this.model&&!this.model.isDisposed()&&this.model.deltaDecorations(this.decorations,[]),this.model=null,this.decorations=null,this.delayer&&(this.delayer.cancel(),this.delayer=null),this.diffDelayer&&(this.diffDelayer.cancel(),this.diffDelayer=null)},e.GIT_ORIGINAL_SCHEME="git-index",e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Editor.DirtyDiffDecorator",e.MODIFIED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-modified-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e.ADDED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-added-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e.DELETED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-deleted-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e=__decorate([__param(2,M.IModelService),__param(3,R.IEditorWorkerService),__param(4,L.IWorkbenchEditorService),__param(5,D.IWorkspaceContextService),__param(6,F)],e)}(),V=function(){function e(e,t,n,i,o,r){var s=this;this.gitService=e,this.messageService=t,this.editorService=n,this.eventService=i,this.contextService=o,this.instantiationService=r,this.models=[],this.decorators=Object.create(null),this.toDispose=[],this.toDispose.push(i.addListener2(l.EventType.EDITOR_INPUT_CHANGED,function(){return s.onEditorInputChange()})),this.toDispose.push(e.addListener2(u.ServiceEvents.DISPOSE,function(){return s.dispose()}))}return e.prototype.getId=function(){return"git.DirtyDiffModelDecorator"},e.prototype.onEditorInputChange=function(){var e=this,t=this.gitService.getModel().getRepositoryRoot();if("string"!=typeof t)return this.gitService.addOneTimeListener(u.ServiceEvents.STATE_CHANGED,function(){return e.onEditorInputChange()}),this.models.forEach(function(t){return e.onModelInvisible(t)}),void(this.models=[]);var n=this.editorService.getVisibleEditors().map(function(e){return e.getControl()}).filter(function(e){return e instanceof h.CodeEditorWidget}).map(function(e){return e.getModel()}).filter(function(e,t,n){return!!e&&-1===n.indexOf(e,t+1)}).map(function(e){return{model:e,resource:e.getAssociatedResource()}}).filter(function(e){return!!e.resource&&"file"===e.resource.scheme&&r.isEqualOrParent(e.resource.fsPath,t)}).map(function(e){return{model:e.model,path:r.normalize(r.relative(t,e.resource.fsPath))}}).filter(function(e){return!!e.path&&-1===e.path.indexOf(".git/")}),i=n.filter(function(t){return e.models.every(function(e){return t.model!==e})}),o=this.models.filter(function(e){return n.every(function(t){return t.model!==e})});i.forEach(function(t){return e.onModelVisible(t.model,t.path)}),o.forEach(function(t){return e.onModelInvisible(t)}),this.models=n.map(function(e){return e.model})},e.prototype.onModelVisible=function(e,t){this.decorators[e.id]=this.instantiationService.createInstance(H,e,t)},e.prototype.onModelInvisible=function(e){this.decorators[e.id].dispose(),delete this.decorators[e.id]},e.prototype.dispose=function(){var e=this;this.toDispose=s.disposeAll(this.toDispose),this.models.forEach(function(t){return e.decorators[t.id].dispose()}),this.models=null,this.decorators=null},e=__decorate([__param(0,F),__param(1,I.IMessageService),__param(2,L.IWorkbenchEditorService),__param(3,k.IEventService),__param(4,D.IWorkspaceContextService),__param(5,x.IInstantiationService)],e)}();t.DirtyDiffDecorator=V,t.VIEWLET_ID="workbench.view.git";var K=function(e){function i(n,i,o,r){e.call(this,n,i,t.VIEWLET_ID,o,r)}return __extends(i,e),i.ID=t.VIEWLET_ID,i.LABEL=n.localize(2,null),i=__decorate([__param(2,A.IViewletService),__param(3,L.IWorkbenchEditorService)],i)}(p.ToggleViewletAction);t.registerContributions=N});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitActions.contribution",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitActions.contribution","vs/base/common/lifecycle","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textDiffEditor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/parts/files/common/files","vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/workbench/parts/git/common/git","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/parts/git/common/stageRanges","vs/workbench/services/editor/common/editorService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/workbench/common/actionRegistry","vs/platform/actions/common/actions","./gitActions","vs/base/common/paths","vs/base/common/uri"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x){"use strict";function I(e,t,n){var i=e.getModel(),o=i.getRepositoryRoot(),r=i.getStatus(),s=k.normalize(k.relative(o,n.getResource().fsPath));return r.getWorkingTreeStatus().find(s)||r.getIndexStatus().find(s)}var D=function(e){function t(n,i,o,r,s){var a=this;e.call(this,t.ID,t.Label),this["class"]="git-action open-in-diff",this.gitService=i,this.viewletService=o,this.editorService=n,this.partService=r,this.contextService=s,this.toDispose=[this.gitService.addBulkListener2(function(){return a.onGitStateChanged()})],this.enabled=this.isEnabled()}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if("string"!=typeof this.gitService.getModel().getRepositoryRoot())return!1;var t=this.getStatus();return t&&(t.getStatus()===f.Status.MODIFIED||t.getStatus()===f.Status.INDEX_MODIFIED||t.getStatus()===f.Status.INDEX_RENAMED)},t.prototype.onGitStateChanged=function(){this.gitService.isIdle()&&(this.enabled=this.isEnabled())},t.prototype.getStatus=function(){return I(this.gitService,this.contextService,this.input)},t.prototype.run=function(e){var t=this,n=!(!e||!e.ctrlKey&&!e.metaKey),i=this.editorService.getActiveEditor().getControl(),o=i?i.saveViewState():null;return this.gitService.getInput(this.getStatus()).then(function(e){var i=s.TPromise.as(null);return t.partService.isVisible(_.Parts.SIDEBAR_PART)&&(i=t.viewletService.openViewlet(p.VIEWLET_ID,!1)),i.then(function(){var i=new u.TextDiffEditorOptions;return i.forceOpen=!0,i.autoRevealFirstChange=!1,t.editorService.openEditor(e,i,n).then(function(e){if(o){var n=t.editorService.getActiveEditor().getControl();n.restoreViewState({original:{},modified:o})}})})})},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose)},t.ID="workbench.action.git.openInDiff",t.Label=n.localize(0,null),t=__decorate([__param(0,g.IWorkbenchEditorService),__param(1,f.IGitService),__param(2,y.IViewletService),__param(3,_.IPartService),__param(4,b.IWorkspaceContextService)],t)}(c.EditorInputAction),A=function(e){function t(n,i,o,r,s,a){e.call(this,t.ID,t.LABEL),this["class"]="git-action open-in-editor",this.gitService=o,this.fileService=n,this.viewletService=r,this.editorService=i,this.partService=s,this.contextService=a,this.enabled=this.isEnabled()}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if("string"!=typeof this.gitService.getModel().getRepositoryRoot())return!1;var n=this.input.getFileStatus();return!(t.DELETED_STATES.indexOf(n.getStatus())>-1)},t.prototype.run=function(e){var t=this,n=this.gitService.getModel(),i=x["default"].file(k.join(n.getRepositoryRoot(),this.getRepositoryRelativePath())),o=!(!e||!e.ctrlKey&&!e.metaKey),r=this.saveTextViewState();return this.fileService.resolveFile(i).then(function(e){return t.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}},o).then(function(e){return t.restoreTextViewState(r),t.partService.isVisible(_.Parts.SIDEBAR_PART)?t.viewletService.openViewlet(h.VIEWLET_ID,!1):void 0})})},t.prototype.saveTextViewState=function(){var e=this.getTextEditor();return e?e.saveViewState():null},t.prototype.restoreTextViewState=function(e){var t=this.getTextEditor();return t?t.restoreViewState(e):void 0},t.prototype.getTextEditor=function(){var e=this.editorService.getActiveEditor();return e instanceof l.TextDiffEditor?e.getControl().getModifiedEditor():e instanceof d.BaseTextEditor?e.getControl():null},t.prototype.getRepositoryRelativePath=function(){var e=this.input.getFileStatus();if(e.getStatus()===f.Status.INDEX_RENAMED)return e.getRename();var t=this.gitService.getModel().getStatus().find(e.getPath(),f.StatusType.INDEX);return t&&t.getStatus()===f.Status.INDEX_RENAMED?t.getRename():e.getPath()},t.DELETED_STATES=[f.Status.BOTH_DELETED,f.Status.DELETED,f.Status.DELETED_BY_US,f.Status.INDEX_DELETED],t.ID="workbench.action.git.openInEditor",t.LABEL=n.localize(1,null),t=__decorate([__param(0,S.IFileService),__param(1,g.IWorkbenchEditorService),__param(2,f.IGitService),__param(3,y.IViewletService),__param(4,_.IPartService),__param(5,b.IWorkspaceContextService)],t)}(c.EditorInputAction),L=function(e){function t(t,i,o){e.call(this,"workbench.action.git.stageRanges",n.localize(2,null)),this.editorService=o,this.gitService=i,this.editor=t.getControl(),this.editor.addListener(a.EventType.CursorSelectionChanged,this.updateEnablement.bind(this)),this.editor.addListener(a.EventType.DiffUpdated,this.updateEnablement.bind(this)),this["class"]="git-action stage-ranges"}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService||!this.editorService)return!1;var t=this.editor.getLineChanges(),n=this.editor.getSelections();return t&&n&&0!==n.length?v.getSelectedChanges(t,n).length>0:!1},t.prototype.run=function(){var e=this,t=v.stageRanges(this.editor),n=this.input.getFileStatus(),i=n.getPath(),o=this.editor.saveViewState();return this.gitService.stage(n.getPath(),t).then(function(){var t=e.gitService.getModel().getStatus();return n=t.getWorkingTreeStatus().find(i)||t.getIndexStatus().find(i),n?e.gitService.getInput(n).then(function(t){var n=new u.TextDiffEditorOptions;return n.forceOpen=!0,n.autoRevealFirstChange=!1,e.editorService.openEditor(t,n,e.position).then(function(){e.editor.restoreViewState(o)})}):void 0})},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t=__decorate([__param(1,f.IGitService),__param(2,g.IWorkbenchEditorService)],t)}(c.EditorInputAction);t.StageRangesAction=L;var O=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof h.FileEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(D)]},t=__decorate([__param(0,E.IInstantiationService)],t)}(c.EditorInputActionContributor),M=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return m.isGitEditorInput(e.input)},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(A)]},t=__decorate([__param(0,E.IInstantiationService)],t)}(c.EditorInputActionContributor),P=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActionsForEditorInput=function(e){return e.input instanceof m.GitWorkingTreeDiffEditorInput&&e.editor instanceof l.TextDiffEditor},t.prototype.getSecondaryActionsForEditorInput=function(e){return[this.instantiationService.createInstance(L,e.editor)]},t=__decorate([__param(0,E.IInstantiationService)],t)}(c.EditorInputActionContributor),R=function(e){function t(t,n,i,o,r,s,a){e.call(this,i,o),this.contextService=r,this.viewletService=s,this.partService=a}return __extends(t,e),t.prototype.getInput=function(){return u.asFileEditorInput(this.editorService.getActiveEditorInput())},t.prototype.run=function(e){var t=this,n=this.getInput();if(!n)return s.TPromise.as(null);var i=I(this.gitService,this.contextService,n);if(!i)return s.TPromise.as(null);var o=!(!e||!e.ctrlKey&&!e.metaKey),r=this.editorService.getActiveEditor().getControl(),a=r?r.saveViewState():null;return this.gitService.getInput(i).then(function(e){var n=s.TPromise.as(null);return t.partService.isVisible(_.Parts.SIDEBAR_PART)&&(n=t.viewletService.openViewlet(p.VIEWLET_ID,!1)),n.then(function(){var n=new u.TextDiffEditorOptions;return n.forceOpen=!0,n.autoRevealFirstChange=!1,t.editorService.openEditor(e,n,o).then(function(e){if(a){var n=t.editorService.getActiveEditor().getControl();n.restoreViewState({original:{},modified:a})}})})})},t.ID="workbench.action.git.globalOpenChange",t.LABEL=n.localize(3,null),t=__decorate([__param(2,g.IWorkbenchEditorService),__param(3,f.IGitService),__param(4,b.IWorkspaceContextService),__param(5,y.IViewletService),__param(6,_.IPartService)],t)}(T.OpenChangeAction),N=function(e){function t(n,i,o,r,s,a){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,o,r,s,a)}return __extends(t,e),t.prototype.run=function(t){var n=u.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);if(!n)return s.TPromise.as(null);var i=I(this.gitService,this.contextService,n);return i?e.prototype.run.call(this,i):s.TPromise.as(null)},t.ID="workbench.action.git.globalOpenFile",t.LABEL=n.localize(4,null),t=__decorate([__param(2,g.IWorkbenchEditorService),__param(3,S.IFileService),__param(4,f.IGitService),__param(5,b.IWorkspaceContextService)],t)}(T.OpenFileAction),F=o.Registry.as(r.Extensions.Actionbar);F.registerActionBarContributor(r.Scope.EDITOR,O),F.registerActionBarContributor(r.Scope.EDITOR,M),F.registerActionBarContributor(r.Scope.EDITOR,P);var W=o.Registry.as(w.Extensions.WorkbenchActions),H=n.localize(5,null);W.registerWorkbenchAction(new C.SyncActionDescriptor(R,R.ID,R.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(N,N.ID,N.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.PullAction,T.PullAction.ID,T.PullAction.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.PushAction,T.PushAction.ID,T.PushAction.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.SyncAction,T.SyncAction.ID,T.SyncAction.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.PublishAction,T.PublishAction.ID,T.PublishAction.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.StartGitBranchAction,T.StartGitBranchAction.ID,T.StartGitBranchAction.LABEL),H),W.registerWorkbenchAction(new C.SyncActionDescriptor(T.StartGitCheckoutAction,T.StartGitCheckoutAction.ID,T.StartGitCheckoutAction.LABEL),H)}),define("vs/workbench/parts/git/electron-browser/git.contribution",["require","exports","vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/workbench/parts/git/electron-browser/electronGitService","vs/workbench/parts/git/common/git","vs/platform/instantiation/common/extensions"],function(e,t,n,i,o,r){"use strict";n.registerContributions(),r.registerSingleton(o.IGitService,i.ElectronGitService)});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownExtension",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/common/events","vs/platform/files/common/files","vs/base/common/paths","vs/editor/common/editorCommon","vs/workbench/common/constants","vs/platform/theme/common/themes","vs/workbench/browser/parts/editor/iframeEditor","vs/workbench/parts/markdown/common/markdownEditorInput","vs/workbench/common/events","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/editor/common/services/modelService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modeService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){"use strict";var S=function(){function e(e,t,n,i,o,r,s,a){this.modeService=e,this.eventService=t,this.editorService=n,this.configurationService=i,this.storageService=o,this.contextService=r,this.modelService=s,this.instantiationService=a,this.markdownConfigurationPaths=[],this.hasModelListenerOnResourcePath=Object.create(null),this.configureMode(this.storageService.get(c.Preferences.THEME,m.StorageScope.GLOBAL)),this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;this.fileChangeListener=this.eventService.addListener(r.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)}),this.configFileChangeListener=this.configurationService.addListener(v.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigFileChange(t)}),this.editorInputChangeListener=this.eventService.addListener(h.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)}),this.configurationService.loadConfiguration().done(function(t){
e.readMarkdownConfiguration(t)},n.onUnexpectedError),this.themeChangeListener=this.storageService.addListener(m.StorageEventType.STORAGE,function(t){t.key===c.Preferences.THEME&&(e.configureMode(t.newValue),e.reloadMarkdownEditors(!0))})},e.prototype.onEditorInputChanged=function(t){var n=this,i=t.editorInput;if(i instanceof d.MarkdownEditorInput){var r=i.getResource(),s=this.modelService.getModel(r);if(s&&!this.hasModelListenerOnResourcePath[r.toString()]){var c=[],u=function(){for(;c.length;)c.pop()();n.hasModelListenerOnResourcePath[r.toString()]=!1};c.push(s.addListener(a.EventType.ModelContentChanged,function(t){n.reloadTimeout&&window.clearTimeout(n.reloadTimeout),n.reloadTimeout=setTimeout(function(){n.reloadMarkdownEditors(!1,r)||u()},e.RELOAD_MARKDOWN_DELAY)})),this.hasModelListenerOnResourcePath[r.toString()]=!0,c.push(i.addListener(o.EventType.DISPOSE,u)),c.push(s.addListener(a.EventType.ModelDispose,u))}}},e.prototype.configureMode=function(e){if(e){var t=u.getBaseThemeId(e);this.modeService.configureMode("text/x-web-markdown",{theme:t})}},e.prototype.getId=function(){return"vs.markdown.filetracker"},e.prototype.onConfigFileChange=function(e){this.readMarkdownConfiguration(e.config)&&this.reloadMarkdownEditors(!0)},e.prototype.readMarkdownConfiguration=function(e){var t,n=this.markdownConfigurationThumbprint;if(this.markdownConfigurationThumbprint=null,this.markdownConfigurationPaths=[],e){var o=e.markdown;if(o&&i.isArray(o.styles)){t=o.styles.join("");var r=o.styles.map(function(e){return s.makeAbsolute(s.normalize(e))});this.markdownConfigurationPaths=r}}return this.markdownConfigurationThumbprint=t,n!==t},e.prototype.onFileChanges=function(e){var t=this;this.markdownConfigurationPaths.length&&e.containsAny(this.markdownConfigurationPaths.map(function(e){return t.contextService.toResource(e)}),r.FileChangeType.UPDATED)&&this.reloadMarkdownEditors(!0)},e.prototype.reloadMarkdownEditors=function(e,t){var n=!1,i=this.editorService.getVisibleEditors();return i.forEach(function(i){var o=i.input;o instanceof d.MarkdownEditorInput&&i instanceof l.IFrameEditor&&(t&&t.toString()!==o.getResource().toString()||(i.reload(e),n=!0))}),n},e.prototype.dispose=function(){this.fileChangeListener&&(this.fileChangeListener(),this.fileChangeListener=null),this.configFileChangeListener&&(this.configFileChangeListener(),this.configFileChangeListener=null),this.editorInputChangeListener&&(this.editorInputChangeListener(),this.editorInputChangeListener=null)},e.RELOAD_MARKDOWN_DELAY=300,e=__decorate([__param(0,b.IModeService),__param(1,y.IEventService),__param(2,p.IWorkbenchEditorService),__param(3,v.IConfigurationService),__param(4,m.IStorageService),__param(5,f.IWorkspaceContextService),__param(6,g.IModelService),__param(7,_.IInstantiationService)],e)}();t.MarkdownFileTracker=S}),define("vs/workbench/parts/markdown/browser/markdown.contribution",["require","exports","vs/platform/platform","vs/base/common/uri","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/markdown/common/markdownEditorInput","vs/workbench/parts/markdown/browser/markdownExtension","vs/workbench/common/contributions"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(){}return e.prototype.serialize=function(e){var t=e;return t.getResource().toString()},e.prototype.deserialize=function(e,t){return e.createInstance(r.MarkdownEditorInput,i["default"].parse(t),void 0,void 0)},e}();n.Registry.as(o.Extensions.Editors).registerEditorInputFactory(r.MarkdownEditorInput.ID,c),n.Registry.as(a.Extensions.Workbench).registerWorkbenchContribution(s.MarkdownFileTracker)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/gotoLineHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/gotoLineHandler","vs/base/common/types","vs/base/common/errors","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/editor/common/editorCommon","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f){"use strict";t.GOTO_LINE_PREFIX=":";var m=function(e){function n(n,i,o){e.call(this,n,i,t.GOTO_LINE_PREFIX,o)}return __extends(n,e),n.ID="workbench.action.gotoLine",n.LABEL=i.localize(0,null),n=__decorate([__param(2,f.IQuickOpenService)],n)}(u.QuickOpenAction);t.GotoLineAction=m;var v=function(e){function t(t,n,i){e.call(this,n),this.parseInput(t),this.handler=i}return __extends(t,e),t.prototype.parseInput=function(e){var t=e.split(/,|:|#/).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)});this.line=t[0],this.column=t[1]},t.prototype.getLabel=function(){var e=this.getMaxLineNumber();return this.invalidRange(e)?e>0?i.localize(1,null,e):i.localize(2,null):this.column?i.localize(3,null,this.line,this.column):i.localize(4,null,this.line)},t.prototype.invalidRange=function(e){return void 0===e&&(e=this.getMaxLineNumber()),!this.line||!o.isNumber(this.line)||e>0&&o.isNumber(this.line)&&this.line>e},t.prototype.getMaxLineNumber=function(){var e=this.editorService.getActiveEditor(),t=e.getControl(),n=t.getModel();return n&&n.modified&&n.original&&(n=n.modified),n&&o.isFunction(n.getLineCount)?n.getLineCount():-1},t.prototype.run=function(e,t){return e===s.Mode.OPEN?this.runOpen(t):this.runPreview()},t.prototype.getInput=function(){return this.editorService.getActiveEditorInput()},t.prototype.getOptions=function(){var e=this.toSelection(),t=new l.TextEditorOptions;return t.selection(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn),t},t.prototype.runOpen=function(e){if(this.invalidRange())return!1;var t=e.event,n=t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey));n&&this.editorService.openEditor(this.getInput(),this.getOptions(),!0).done(null,r.onUnexpectedError);var i=this.toSelection(),o=this.editorService.getActiveEditor();if(o){var s=o.getControl();s.setSelection(i),s.revealRangeInCenter(i)}return!0},t.prototype.runPreview=function(){if(this.invalidRange())return this.handler.clearDecorations(),!1;var e=this.toSelection(),t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.revealRangeInCenter(e),o.isFunction(n.changeDecorations)&&this.handler.decorateOutline(e,n,t.position)}return!1},t.prototype.toSelection=function(){return{startLineNumber:this.line,startColumn:this.column||1,endLineNumber:this.line,endColumn:this.column||1}},t}(c.EditorQuickOpenEntry),g=function(e){function t(t){e.call(this),this.editorService=t}return __extends(t,e),t.prototype.getAriaLabel=function(){return i.localize(5,null)},t.prototype.getResults=function(e){if(e=e.trim(),!this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();this.lastKnownEditorViewState=t.getControl().saveViewState()}return n.TPromise.as(new a.QuickOpenModel([new v(e,this.editorService,this)]))},t.prototype.canRun=function(){var e=this.editorService.getActiveEditor()instanceof d.BaseTextEditor;return e?!0:i.localize(6,null)},t.prototype.decorateOutline=function(e,t,n){var i=this;t.changeDecorations(function(t){var o=[];i.lineHighlightDecorationId&&(o.push(i.lineHighlightDecorationId.lineDecorationId),o.push(i.lineHighlightDecorationId.lineHighlightId),i.lineHighlightDecorationId=null);var r=[{range:e,options:{className:"lineHighlight",isWholeLine:!0}},{range:e,options:{overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:h.OverviewRulerLane.Full}}}],s=t.deltaDecorations(o,r),a=s[0],c=s[1];i.lineHighlightDecorationId={lineHighlightId:a,lineDecorationId:c,position:n}})},t.prototype.clearDecorations=function(){var e=this;this.lineHighlightDecorationId&&(this.editorService.getVisibleEditors().forEach(function(t){if(t.position===e.lineHighlightDecorationId.position){var n=t.getControl();n.changeDecorations(function(t){t.deltaDecorations([e.lineHighlightDecorationId.lineDecorationId,e.lineHighlightDecorationId.lineHighlightId],[])})}}),this.lineHighlightDecorationId=null)},t.prototype.onClose=function(e){if(this.clearDecorations(),e&&this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.restoreViewState(this.lastKnownEditorViewState)}}this.lastKnownEditorViewState=null},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:e.trim().length>0}},t=__decorate([__param(0,p.IWorkbenchEditorService)],t)}(c.QuickOpenHandler);t.GotoLineHandler=g});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/gotoSymbolHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/gotoSymbolHandler","vs/base/common/arrays","vs/base/common/errors","vs/base/common/types","vs/base/common/strings","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/editor","vs/base/common/filters","vs/editor/common/editorCommon","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/workspace/common/workspace","vs/editor/contrib/quickOpen/common/quickOpen","vs/css!./media/gotoSymbolHandler"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_){"use strict";t.GOTO_SYMBOL_PREFIX="@",t.SCOPE_PREFIX=":";var b=function(e){function n(n,i,o){e.call(this,n,i,t.GOTO_SYMBOL_PREFIX,o)}return __extends(n,e),n.ID="workbench.action.gotoSymbol",n.LABEL=i.localize(0,null),n=__decorate([__param(2,g.IQuickOpenService)],n)}(d.QuickOpenAction);t.GotoSymbolAction=b;var S=function(e){function n(t,n){e.call(this,n),this.outline=t}return __extends(n,e),n.prototype.dofilter=function(e){var n=e;0===e.indexOf(t.SCOPE_PREFIX)&&(n=n.substr(t.SCOPE_PREFIX.length)),this.entries.forEach(function(e){if(e.setGroupLabel(null),e.setShowBorder(!1),e.setHighlights(null),e.setHidden(!1),n){var t=f.matchesFuzzy(n,e.getLabel());t?(e.setHighlights(t),e.setHidden(!1)):e.isHidden()||e.setHidden(!0)}}),e?0===e.indexOf(t.SCOPE_PREFIX)?this.entries.sort(this.sortScoped.bind(this,e.toLowerCase())):this.entries.sort(this.sortNormal.bind(this,e.toLowerCase())):this.entries.sort(function(e,t){return e.getIndex()-t.getIndex()});var o=this.getEntries(!0);if(o.length>0&&0===e.indexOf(t.SCOPE_PREFIX)){for(var r=null,s=null,a=0,c=0;c<o.length;c++){var u=o[c];r!==u.getType()?(s&&s.setGroupLabel(this.renderGroupLabel(r,a,this.outline)),r=u.getType(),s=u,a=1,u.setShowBorder(c>0)):a++}s&&s.setGroupLabel(this.renderGroupLabel(r,a,this.outline))}else o.length>0&&o[0].setGroupLabel(i.localize(1,null,o.length))},n.prototype.sortNormal=function(e,t,n){if(t.isHidden()&&n.isHidden())return 0;if(t.isHidden())return 1;if(n.isHidden())return-1;var i=t.getLabel().toLowerCase(),o=n.getLabel().toLowerCase(),r=a.localeCompare(i,o);if(0!==r)return r;var s=t.getRange(),c=n.getRange();return s.startLineNumber-c.startLineNumber},n.prototype.sortScoped=function(e,n,i){if(n.isHidden()&&i.isHidden())return 0;if(n.isHidden())return 1;if(i.isHidden())return-1;e=e.substr(t.SCOPE_PREFIX.length);var o=n.getType(),r=i.getType(),s=a.localeCompare(o,r);if(0!==s)return s;if(e){var c=n.getLabel().toLowerCase(),u=i.getLabel().toLowerCase();if(s=a.localeCompare(c,u),0!==s)return s}var l=n.getRange(),d=i.getRange();return l.startLineNumber-d.startLineNumber},n.prototype.renderGroupLabel=function(e,t,i){var o=i.outlineGroupLabel[e]||n.getDefaultGroupLabelPatterns()[e];return o?a.format(o,t):e},n.getDefaultGroupLabelPatterns=function(){var e=Object.create(null);return e.method=i.localize(2,null),e["function"]=i.localize(3,null),e.constructor=i.localize(4,null),e.variable=i.localize(5,null),e["class"]=i.localize(6,null),e["interface"]=i.localize(7,null),e.namespace=i.localize(8,null),e["package"]=i.localize(9,null),e.module=i.localize(10,null),e.property=i.localize(11,null),e["enum"]=i.localize(12,null),e.string=i.localize(13,null),e.rule=i.localize(14,null),e.file=i.localize(15,null),e.array=i.localize(16,null),e.number=i.localize(17,null),e["boolean"]=i.localize(18,null),e.object=i.localize(19,null),e.key=i.localize(20,null),e},n}(u.QuickOpenModel),E=function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this),this.index=t,this.name=n,this.type=i,this.icon=r,this.description=o,this.range=s,this.setHighlights(a),this.editorService=c,this.handler=u}return __extends(t,e),t.prototype.getIndex=function(){return this.index},t.prototype.getLabel=function(){return this.name},t.prototype.getAriaLabel=function(){return i.localize(21,null,this.getLabel())},t.prototype.getIcon=function(){return this.icon},t.prototype.getDescription=function(){return this.description},t.prototype.getType=function(){return this.type},t.prototype.getRange=function(){return this.range},t.prototype.getInput=function(){return this.editorService.getActiveEditorInput()},t.prototype.getOptions=function(){var e=new p.TextEditorOptions;return e.selection(this.range.startLineNumber,this.range.startColumn,this.range.startLineNumber,this.range.startColumn),e},t.prototype.run=function(e,t){return e===c.Mode.OPEN?this.runOpen(t):this.runPreview()},t.prototype.runOpen=function(e){var t=e.event,n=t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey));if(n)this.editorService.openEditor(this.getInput(),this.getOptions(),!0).done(null,r.onUnexpectedError);else{var i=this.toSelection(),o=this.editorService.getActiveEditor();if(o){var s=o.getControl();s.setSelection(i),s.revealRangeInCenter(i)}}return!0},t.prototype.runPreview=function(){var e=this.toSelection(),t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.revealRangeInCenter(e),s.isFunction(n.changeDecorations)&&this.handler.decorateOutline(this.range,e,n,t.position)}return!1},t.prototype.toSelection=function(){return{startLineNumber:this.range.startLineNumber,startColumn:this.range.startColumn||1,endLineNumber:this.range.startLineNumber,endColumn:this.range.startColumn||1}},t}(l.EditorQuickOpenEntryGroup),w=function(e){function r(t,n){e.call(this),this.editorService=t,this.contextService=n,this.outlineToModelCache={}}return __extends(r,e),r.prototype.getResults=function(e){if(e=e.trim(),!this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();this.lastKnownEditorViewState=t.getControl().saveViewState()}return this.getActiveOutline().then(function(t){return t.dofilter(e),t})},r.prototype.getEmptyLabel=function(e){return e.length>0?i.localize(22,null):i.localize(23,null)},r.prototype.getAriaLabel=function(){return i.localize(24,null)},r.prototype.canRun=function(){var e=!1,t=this.editorService.getActiveEditor();if(t instanceof h.BaseTextEditor){var n=t.getControl(),o=n.getModel();o&&o.modified&&o.original&&(o=o.modified),o&&s.isFunction(o.getMode)&&(e=_.OutlineRegistry.has(o))}return e?!0:t instanceof h.BaseTextEditor?i.localize(25,null):i.localize(26,null)},r.prototype.getAutoFocus=function(e){return e=e.trim(),0===e.indexOf(t.SCOPE_PREFIX)&&(e=e.substr(t.SCOPE_PREFIX.length)),{autoFocusPrefixMatch:e,autoFocusFirstEntry:!!e}},r.prototype.toQuickOpenEntries=function(e){var t=[],n=[];e&&this.flatten(e.entries,n);for(var i=0;i<n.length;i++){var r=n[i],s=a.trim(r.label),c=r.containerLabel;r.parentScope&&(c=o.tail(r.parentScope));var u=r.icon||r.type;t.push(new E(i,s,r.type,c,u,r.range,null,this.editorService,this))}return t},r.prototype.flatten=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(t.push(o),n&&(o.parentScope=n),o.children){var r=[];n&&(r=n.slice(0)),r.push(o.label),this.flatten(o.children,t,r)}}},r.prototype.getActiveOutline=function(){return this.activeOutlineRequest||(this.activeOutlineRequest=this.doGetActiveOutline()),this.activeOutlineRequest},r.prototype.doGetActiveOutline=function(){var e=this,t=this.editorService.getActiveEditor();if(t instanceof h.BaseTextEditor){var i=t.getControl(),o=i.getModel();if(o&&o.modified&&o.original&&(o=o.modified),o&&s.isFunction(o.getMode)){var r=o.id;return this.outlineToModelCache[r]?n.TPromise.as(this.outlineToModelCache[r]):_.getOutlineEntries(o).then(function(t){var n=new S(t,e.toQuickOpenEntries(t));return e.outlineToModelCache={},e.outlineToModelCache[r]=n,n})}}return n.TPromise.as(null)},r.prototype.decorateOutline=function(e,t,n,i){var o=this;n.changeDecorations(function(n){var r=[];o.lineHighlightDecorationId&&(r.push(o.lineHighlightDecorationId.lineDecorationId),r.push(o.lineHighlightDecorationId.lineHighlightId),o.lineHighlightDecorationId=null);var s=[{range:e,options:{className:"lineHighlight",isWholeLine:!0}},{range:t,options:{overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:m.OverviewRulerLane.Full}}}],a=n.deltaDecorations(r,s),c=a[0],u=a[1];o.lineHighlightDecorationId={lineHighlightId:c,lineDecorationId:u,position:i}})},r.prototype.clearDecorations=function(){var e=this;this.lineHighlightDecorationId&&(this.editorService.getVisibleEditors().forEach(function(t){if(t.position===e.lineHighlightDecorationId.position){var n=t.getControl();n.changeDecorations(function(t){t.deltaDecorations([e.lineHighlightDecorationId.lineDecorationId,e.lineHighlightDecorationId.lineHighlightId],[])})}}),this.lineHighlightDecorationId=null)},r.prototype.onClose=function(e){if(this.outlineToModelCache={},this.clearDecorations(),e&&this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.restoreViewState(this.lastKnownEditorViewState)}}this.lastKnownEditorViewState=null,this.activeOutlineRequest=null},r=__decorate([__param(0,v.IWorkbenchEditorService),__param(1,y.IWorkspaceContextService)],r)}(l.QuickOpenHandler);t.GotoSymbolHandler=w});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/markersHandler",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/network","vs/base/common/errors","vs/base/browser/dom","vs/nls!vs/workbench/parts/quickopen/browser/markersHandler","vs/base/common/labels","vs/base/common/severity","vs/workbench/browser/quickopen","vs/workbench/browser/parts/editor/textEditor","vs/workbench/browser/actions/quickOpenAction","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/services/editor/common/editorService","vs/platform/markers/common/markers","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/common/quickOpenService","vs/editor/common/services/codeEditorService","vs/base/common/filters","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/css!./media/markerHandler"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";var E=function(e){function t(t,n,i,o){e.call(this),this._editorService=t,this._codeEditorService=n,this._labelProvider=new c.PathLabelProvider(i),this._marker=o;var r=o.message,s=o.source,u=o.resource,l=o.startLineNumber,d=o.startColumn;this._label=s?a.localize(0,null,s,r):r,this._description=a.localize(1,null,this._labelProvider.getLabel(u.fsPath),l,d)}return __extends(t,e),t.prototype.update=function(e){if(this._marker.resource.scheme===o.Schemas.inMemory)return void this.setHidden(!0);var n=t._filter(e,this._label),i=t._filter(e,this._description);this.setHighlights(n,i),this.setHidden(!n&&!i)},t.prototype.getAriaLabel=function(){return a.localize(2,null,this._label)},t.prototype.getHeight=function(){return 48},t.prototype.render=function(e,t,n){s.clearNode(t);var i=this.getHighlights(),o=i[0],r=i[1],a=document.createElement("div");s.addClass(a,"row");var c=document.createElement("div");s.addClass(c,"row");var l=document.createElement("div");s.addClass(l,"severity "+u["default"].toString(this._marker.severity).toLowerCase()),a.appendChild(l);var d=document.createElement("div");s.addClass(d,"inline"),new S.HighlightedLabel(d).set(this._label,o),a.appendChild(d);var h=document.createElement("div");s.addClass(h,"inline description"),new S.HighlightedLabel(h).set(this._description,r),c.appendChild(h),t.appendChild(a),t.appendChild(c)},t.prototype.run=function(e,t){switch(e){case p.Mode.OPEN:return this._open(),!0;case p.Mode.PREVIEW:return this._preview(),!0;default:return!1}},t.prototype._open=function(){this._editorService.openEditor({resource:this._marker.resource,options:{selection:{startLineNumber:this._marker.startLineNumber,startColumn:this._marker.startColumn,endLineNumber:this._marker.endLineNumber,endColumn:this._marker.endColumn}}}).done(null,r.onUnexpectedError)},t.prototype._preview=function(){for(var e,t=this._codeEditorService.listCodeEditors(),n=0,i=t;n<i.length;n++){var o=i[n];o.getModel()&&o.getModel().getAssociatedResource().toString()===this._marker.resource.toString()&&(!e||this._editorService.getActiveEditor()&&o===this._editorService.getActiveEditor().getControl())&&(e=o)}e&&e.revealRangeInCenter(this._marker)},t._filter=b.or(b.matchesPrefix,b.matchesContiguousSubString),t}(f.QuickOpenEntryItem),w=function(e){function t(t,n,i,o){e.call(this),this._markerService=t,this._editorService=n,this._codeEditorService=i,this._contextService=o}return __extends(t,e),t.prototype.getAriaLabel=function(){return a.localize(3,null)},t.prototype.getResults=function(e){var i=this;if(!this._activeSession){var o=new f.QuickOpenModel(this._markerService.read({take:500}).sort(t._sort).map(function(e){return new E(i._editorService,i._codeEditorService,i._contextService,e)})),r=this._editorService.getActiveEditor(),s=void 0;r instanceof d.BaseTextEditor&&(s=r.getControl().saveViewState()),this._activeSession=[o,s]}e=e.trim();for(var a=this._activeSession[0],c=0,u=a.entries;c<u.length;c++){var l=u[c];l.update(e)}return n.TPromise.as(a)},t.prototype.onClose=function(e){if(this._activeSession){if(e){var t=this._activeSession,n=t[1];if(n){var i=this._editorService.getActiveEditor();i.getControl().restoreViewState(n)}}this._activeSession=void 0}},t._sort=function(e,t){var n;return n=u["default"].compare(e.severity,t.severity),0!==n?n:e.source&&t.source&&(n=e.source.localeCompare(t.source),0!==n)?n:(n=i.localeCompare(e.resource.fsPath,t.resource.fsPath),0!==n?n:(n=e.startLineNumber-t.startLineNumber,0!==n?n:(n=e.startColumn-t.startColumn,0!==n?n:0)))},t.prototype.getClass=function(){return"marker-handler"},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!!e}},t.prototype.getEmptyLabel=function(e){return e.length>0?a.localize(4,null):a.localize(5,null)},t=__decorate([__param(0,v.IMarkerService),__param(1,m.IWorkbenchEditorService),__param(2,_.ICodeEditorService),__param(3,g.IWorkspaceContextService)],t)}(l.QuickOpenHandler);t.MarkersHandler=w;var C=function(e){function t(n,i,o){e.call(this,n,i,t.Prefix,o)}return __extends(t,e),t.Prefix="!",t.Id="workbench.action.showErrorsWarnings",t.Label=a.localize(6,null),t=__decorate([__param(2,y.IQuickOpenService)],t)}(h.QuickOpenAction);t.GotoMarkerAction=C}),define("vs/workbench/parts/quickopen/browser/quickopen.contribution",["require","exports","vs/base/common/platform","vs/nls!vs/workbench/parts/quickopen/browser/quickopen.contribution","vs/workbench/browser/quickopen","vs/platform/platform","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/base/common/keyCodes","vs/workbench/parts/quickopen/browser/gotoSymbolHandler","vs/workbench/parts/quickopen/browser/commandsHandler","vs/workbench/parts/quickopen/browser/gotoLineHandler","vs/workbench/parts/quickopen/browser/helpHandler","vs/workbench/parts/quickopen/browser/markersHandler"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=r.Registry.as(a.Extensions.WorkbenchActions);f.registerWorkbenchAction(new s.SyncActionDescriptor(p.GotoMarkerAction,p.GotoMarkerAction.Id,p.GotoMarkerAction.Label,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_M})),f.registerWorkbenchAction(new s.SyncActionDescriptor(l.ShowAllCommandsAction,l.ShowAllCommandsAction.ID,l.ShowAllCommandsAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_P,secondary:[c.KeyCode.F1]})),f.registerWorkbenchAction(new s.SyncActionDescriptor(d.GotoLineAction,d.GotoLineAction.ID,d.GotoLineAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyCode.KEY_G,mac:{primary:c.KeyMod.WinCtrl|c.KeyCode.KEY_G}})),f.registerWorkbenchAction(new s.SyncActionDescriptor(u.GotoSymbolAction,u.GotoSymbolAction.ID,u.GotoSymbolAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_O})),r.Registry.as(o.Extensions.Quickopen).registerQuickOpenHandler(new o.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/markersHandler","MarkersHandler",p.GotoMarkerAction.Prefix,[{prefix:p.GotoMarkerAction.Prefix,needsEditor:!1,description:n.isMacintosh?i.localize(0,null):i.localize(1,null)}])),r.Registry.as(o.Extensions.Quickopen).registerQuickOpenHandler(new o.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/commandsHandler","CommandsHandler",l.ALL_COMMANDS_PREFIX,i.localize(2,null))),r.Registry.as(o.Extensions.Quickopen).registerQuickOpenHandler(new o.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/gotoLineHandler","GotoLineHandler",d.GOTO_LINE_PREFIX,[{prefix:d.GOTO_LINE_PREFIX,needsEditor:!0,description:n.isMacintosh?i.localize(3,null):i.localize(4,null)}])),r.Registry.as(o.Extensions.Quickopen).registerQuickOpenHandler(new o.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/gotoSymbolHandler","GotoSymbolHandler",u.GOTO_SYMBOL_PREFIX,[{prefix:u.GOTO_SYMBOL_PREFIX,needsEditor:!0,description:n.isMacintosh?i.localize(5,null):i.localize(6,null)},{prefix:u.GOTO_SYMBOL_PREFIX+u.SCOPE_PREFIX,needsEditor:!0,description:i.localize(7,null)}])),r.Registry.as(o.Extensions.Quickopen).registerQuickOpenHandler(new o.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/helpHandler","HelpHandler",h.HELP_PREFIX,i.localize(8,null)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/tasks/electron-browser/task.contribution",["require","exports","vs/nls!vs/workbench/parts/tasks/electron-browser/task.contribution","vs/base/common/flags","vs/base/common/winjs.base","vs/base/common/severity","vs/base/common/objects","vs/base/common/actions","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/browser/builder","vs/base/common/types","vs/base/common/keyCodes","vs/base/common/glob","vs/base/common/platform","vs/platform/platform","vs/platform/lifecycle/common/lifecycle","vs/platform/actions/common/actions","vs/platform/instantiation/common/extensions","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/markers/common/markers","vs/platform/telemetry/common/telemetry","vs/platform/configuration/common/configuration","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/platform/extensions/common/extensions","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/workbench/common/contributions","vs/workbench/common/actionRegistry","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/browser/quickopen","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/workbench/parts/lib/node/systemVariables","vs/workbench/parts/files/common/files","vs/workbench/parts/output/common/output","vs/workbench/parts/tasks/common/taskSystem","vs/workbench/parts/tasks/common/taskService","vs/workbench/parts/tasks/common/taskTemplates","vs/workbench/parts/tasks/common/languageServiceTaskSystem","vs/workbench/parts/tasks/node/processRunnerSystem","vs/workbench/parts/tasks/node/processRunnerDetector","vs/css!./media/task.contribution","vs/workbench/parts/tasks/browser/taskQuickOpen"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F,W,H,V,K,B,U,z,j,q){"use strict";var G=d.$,Y=function(e){function t(t,n,i,o){e.call(this,t,n),this.taskService=i,this.telemetryService=o}return __extends(t,e),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(a.Action),$=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.run=function(){return this.taskService.build()},t.ID="workbench.action.tasks.build",t.TEXT=n.localize(0,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(Y),X=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.run=function(){return this.taskService.runTest()},t.ID="workbench.action.tasks.test",t.TEXT=n.localize(1,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(Y),Q=(function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.run=function(){return this.taskService.rebuild()},t.ID="workbench.action.tasks.rebuild",t.TEXT=n.localize(2,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(Y),function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.run=function(){return this.taskService.clean()},t.ID="workbench.action.tasks.clean",t.TEXT=n.localize(3,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(Y),function(e){function t(t,n,i,o,r,s,a,c,u){e.call(this,t,n),this.configurationService=i,this.editorService=o,
this.fileService=r,this.contextService=s,this.outputService=a,this.messageService=c,this.quickOpenService=u}return __extends(t,e),t.prototype.run=function(e){var t=this;if(!this.contextService.getWorkspace())return this.messageService.show(r["default"].Info,n.localize(5,null)),o.TPromise.as(void 0);var i=!(!e||!e.ctrlKey&&!e.metaKey);return this.fileService.resolveFile(this.contextService.toResource(".vscode/tasks.json")).then(function(e){return e},function(e){return t.quickOpenService.pick(U.templates,{placeHolder:n.localize(6,null)}).then(function(e){if(e){var i;if(e.autoDetect){t.outputService.showOutput(ie.OutputChannel),t.outputService.append(ie.OutputChannel,n.localize(7,null,e.id)+"\n");var s=new q.ProcessRunnerDetector(t.fileService,t.contextService,new W.SystemVariables(t.editorService,t.contextService));i=s.detect(!1,e.id).then(function(i){var o=i.config;if(i.stderr&&i.stderr.length>0)return i.stderr.forEach(function(e){t.outputService.append(ie.OutputChannel,e+"\n")}),t.messageService.show(r["default"].Warning,n.localize(8,null)),e.content;if(o){i.stdout&&i.stdout.length>0&&i.stdout.forEach(function(e){return t.outputService.append(ie.OutputChannel,e+"\n")});var s=JSON.stringify(o,null,"	");return s=["{","	// See http://go.microsoft.com/fwlink/?LinkId=733558","	// for the documentation about the tasks.json format"].join("\n")+s.substr(1)}return e.content})}else i=o.TPromise.as(e.content);return i.then(function(e){return t.fileService.createFile(t.contextService.toResource(".vscode/tasks.json"),e)})}})}).then(function(e){return e?t.editorService.openEditor({resource:e.resource,options:{forceOpen:!0}},i):void 0},function(e){throw new Error(n.localize(9,null))})},t.ID="workbench.action.tasks.configureTaskRunner",t.TEXT=n.localize(4,null),t=__decorate([__param(2,C.IConfigurationService),__param(3,N.IWorkbenchEditorService),__param(4,T.IFileService),__param(5,F.IWorkspaceContextService),__param(6,V.IOutputService),__param(7,S.IMessageService),__param(8,R.IQuickOpenService)],t)}(a.Action)),Z=function(e){function t(){e.call(this,t.ID,t.TEXT)}return __extends(t,e),t.prototype.run=function(){return this.closeFunction&&this.closeFunction(),o.TPromise.as(null)},t.ID="workbench.action.build.closeMessage",t.TEXT=n.localize(10,null),t}(a.Action),J=function(e){function t(t,n,i,o){e.call(this,t,n,i,o)}return __extends(t,e),t.prototype.run=function(){var e=this;return this.taskService.isActive().then(function(t){return t?e.taskService.terminate().then(function(e){return e.success?void 0:o.Promise.wrapError(n.localize(12,null))}):void 0})},t.ID="workbench.action.tasks.terminate",t.TEXT=n.localize(11,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService)],t)}(Y),ee=function(e){function t(t,n,i,o,r){e.call(this,t,n,i,o),this.outputService=r}return __extends(t,e),t.prototype.run=function(){return this.outputService.showOutput(ie.OutputChannel)},t.ID="workbench.action.tasks.showLog",t.TEXT=n.localize(13,null),t=__decorate([__param(2,B.ITaskService),__param(3,w.ITelemetryService),__param(4,V.IOutputService)],t)}(Y),te=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("task "),o.TPromise.as(null)},t.ID="workbench.action.tasks.runTask",t.TEXT=n.localize(14,null),t=__decorate([__param(2,R.IQuickOpenService)],t)}(a.Action),ne=function(){function e(e,t,n,i){this.quickOpenService=e,this.markerService=t,this.outputService=n,this.taskService=i,this.activeCount=0}return e.prototype.render=function(t){var i=this,o=[],r=document.createElement("div"),s=document.createElement("div"),a=document.createElement("a"),l=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div");c.addClass(r,"task-statusbar-item"),c.addClass(s,"task-statusbar-item-progress"),r.appendChild(s),s.innerHTML=e.progressChars[0],G(s).hide(),c.addClass(a,"task-statusbar-item-label"),r.appendChild(a),c.addClass(l,"task-statusbar-item-label-error"),l.innerHTML="0",a.appendChild(l),c.addClass(d,"task-statusbar-item-label-warning"),d.innerHTML="0",a.appendChild(d),c.addClass(h,"task-statusbar-item-label-info"),a.appendChild(h),G(h).hide(),o.push(c.addDisposableListener(a,"click",function(e){i.quickOpenService.show("!")}));var p=function(e,t){return t>0?(e.innerHTML=t.toString(),G(e).show(),!0):(G(e).hide(),!1)},f=n.localize(15,null),m=function(e){l.innerHTML=e.errors<100?e.errors.toString():f,d.innerHTML=e.warnings<100?e.warnings.toString():f,p(h,e.infos)};return this.markerService.onMarkerChanged(function(e){m(i.markerService.getStatistics())}),o.push(this.taskService.addListener2(B.TaskServiceEvents.Active,function(){if(i.activeCount++,1===i.activeCount){var t=1,n=e.progressChars;s.innerHTML=n[0],i.intervalToken=setInterval(function(){s.innerHTML=n[t],t++,t>=n.length&&(t=0)},50),G(s).show()}})),o.push(this.taskService.addListener2(B.TaskServiceEvents.Inactive,function(e){i.activeCount--,0===i.activeCount&&(G(s).hide(),clearInterval(i.intervalToken),i.intervalToken=null)})),o.push(this.taskService.addListener2(B.TaskServiceEvents.Terminated,function(){0!==i.activeCount&&(G(s).hide(),i.intervalToken&&(clearInterval(i.intervalToken),i.intervalToken=null),i.activeCount=0)})),t.appendChild(r),{dispose:function(){o=u.disposeAll(o)}}},e.progressChars="|/-\\",e=__decorate([__param(0,R.IQuickOpenService),__param(1,E.IMarkerService),__param(2,V.IOutputService),__param(3,B.ITaskService)],e)}(),ie=function(e){function t(t,n,i,o,r,s,a,c,u,l,d,h,p,f,m){var v=this;e.call(this),this.serviceId=B.ITaskService,this.modeService=t,this.configurationService=n,this.markerService=i,this.outputService=o,this.messageService=r,this.editorService=s,this.fileService=a,this.contextService=c,this.telemetryService=u,this.textFileService=l,this.eventService=h,this.modelService=p,this.extensionService=f,this.quickOpenService=m,this.taskSystemListeners=[],this.clearTaskSystemPromise=!1,this.configurationService.addListener(C.ConfigurationServiceEventTypes.UPDATED,function(){v.emit(B.TaskServiceEvents.ConfigChanged),v._taskSystem&&v._taskSystem.isActiveSync()?v.clearTaskSystemPromise=!0:(v._taskSystem=null,v._taskSystemPromise=null),v.disposeTaskSystemListeners()}),d.addBeforeShutdownParticipant(this)}return __extends(t,e),t.prototype.disposeTaskSystemListeners=function(){this.taskSystemListeners.forEach(function(e){return e()}),this.taskSystemListeners=[]},t.prototype.disposeFileChangesListener=function(){this.fileChangesListener&&(this.fileChangesListener(),this.fileChangesListener=null)},Object.defineProperty(t.prototype,"taskSystemPromise",{get:function(){var e=this;if(!this._taskSystemPromise){var i=new W.SystemVariables(this.editorService,this.contextService),a=!0;this._taskSystemPromise=this.configurationService.loadConfiguration("tasks").then(function(c){var u=c?c.$parseErrors:null;if(u){for(var l=!1,d=0;d<u.length;d++)if(/tasks\.json$/.test(u[d])){l=!0;break}if(l)return e.outputService.append(t.OutputChannel,n.localize(16,null)),e.outputService.showOutput(t.OutputChannel,!0),o.TPromise.wrapError({})}var h;if(c)if(e.isRunnerConfig(c)&&e.hasDetectorSupport(c)){var p=c;h=new q.ProcessRunnerDetector(e.fileService,e.contextService,i,p).detect(!0).then(function(t){a=e.printStderr(t.stderr);var n=t.config;if(!n)return c;var i=s.clone(p),o=Object.create(null);return i.tasks?(i.tasks.forEach(function(e){return o[e.taskName]=e}),n.tasks.forEach(function(e){o[e.taskName]||i.tasks.push(e)})):n.tasks&&(i.tasks=n.tasks),i})}else h=o.TPromise.as(c);else h=new q.ProcessRunnerDetector(e.fileService,e.contextService,i).detect(!0).then(function(t){return a=e.printStderr(t.stderr),t.config});return h.then(function(o){if(!o)throw e._taskSystemPromise=null,new K.TaskError(r["default"].Info,n.localize(17,null),K.TaskErrors.NotConfigured);var s=null;if("service"===o.buildSystem?s=new z.LanguageServiceTaskSystem(o,e.telemetryService,e.modeService):e.isRunnerConfig(o)&&(s=new j.ProcessRunnerSystem(o,i,e.markerService,e.modelService,e.telemetryService,e.outputService,t.OutputChannel,a)),null===s)throw e._taskSystemPromise=null,new K.TaskError(r["default"].Info,n.localize(18,null),K.TaskErrors.NoValidTaskRunner);return e.taskSystemListeners.push(s.addListener(K.TaskSystemEvents.Active,function(t){return e.emit(B.TaskServiceEvents.Active,t)})),e.taskSystemListeners.push(s.addListener(K.TaskSystemEvents.Inactive,function(t){return e.emit(B.TaskServiceEvents.Inactive,t)})),e._taskSystem=s,s},function(t){return e.handleError(t),o.Promise.wrapError(t)})})}return this._taskSystemPromise},enumerable:!0,configurable:!0}),t.prototype.printStderr=function(e){var n=this,i=!0;return e&&e.length>0&&(e.forEach(function(e){i=!1,n.outputService.append(t.OutputChannel,e+"\n")}),this.outputService.showOutput(t.OutputChannel,!0)),i},t.prototype.isRunnerConfig=function(e){return!e.buildSystem||"program"===e.buildSystem},t.prototype.hasDetectorSupport=function(e){return e.command?q.ProcessRunnerDetector.supports(e.command):!1},t.prototype.configureAction=function(){return new Q(Q.ID,Q.TEXT,this.configurationService,this.editorService,this.fileService,this.contextService,this.outputService,this.messageService,this.quickOpenService)},t.prototype.build=function(){return this.executeTarget(function(e){return e.build()})},t.prototype.rebuild=function(){return this.executeTarget(function(e){return e.rebuild()})},t.prototype.clean=function(){return this.executeTarget(function(e){return e.clean()})},t.prototype.runTest=function(){return this.executeTarget(function(e){return e.runTest()})},t.prototype.run=function(e){return this.executeTarget(function(t){return t.run(e)})},t.prototype.executeTarget=function(e){var t=this;return this.textFileService.saveAll().then(function(i){return t.taskSystemPromise.then(function(t){return t.isActive().then(function(i){if(i)throw new K.TaskError(r["default"].Warning,n.localize(19,null),K.TaskErrors.RunningTask);return e(t)})}).then(function(n){if(n.restartOnFileChanges){var i=n.restartOnFileChanges;t.fileChangesListener=t.eventService.addListener(T.EventType.FILE_CHANGES,function(n){var o=n.changes.some(function(e){return(e.type===T.FileChangeType.ADDED||e.type===T.FileChangeType.DELETED)&&!!f.match(i,e.resource.fsPath)});o&&t.terminate().done(function(){m.setTimeout(function(){t.executeTarget(e)},2e3)})})}return n.promise.then(function(e){return t.clearTaskSystemPromise&&(t._taskSystemPromise=null,t.clearTaskSystemPromise=!1),e})},function(e){t.handleError(e)})})},t.prototype.isActive=function(){return this._taskSystemPromise?this.taskSystemPromise.then(function(e){return e.isActive()}):o.TPromise.as(!1)},t.prototype.terminate=function(){var e=this;return this._taskSystemPromise?this.taskSystemPromise.then(function(e){return e.terminate()}).then(function(t){return t.success&&(e.clearTaskSystemPromise&&(e._taskSystemPromise=null,e.clearTaskSystemPromise=!1),e.emit(B.TaskServiceEvents.Terminated,{}),e.disposeFileChangesListener()),t}):o.TPromise.as({success:!0})},t.prototype.tasks=function(){return this.taskSystemPromise.then(function(e){return e.tasks()})},t.prototype.beforeShutdown=function(){var e=this;return this._taskSystem&&this._taskSystem.isActiveSync()?this._taskSystem.canAutoTerminate()||this.messageService.confirm({message:n.localize(20,null),primaryButton:n.localize(21,null)})?this._taskSystem.terminate().then(function(t){return t.success?(e.emit(B.TaskServiceEvents.Terminated,{}),e._taskSystem=null,e.disposeFileChangesListener(),e.disposeTaskSystemListeners(),!1):!0},function(e){return!0}):!0:!1},t.prototype.handleError=function(e){var i=!0;if(e instanceof K.TaskError){var o=e,s=o.code===K.TaskErrors.NotConfigured||o.code===K.TaskErrors.NoBuildTask||o.code===K.TaskErrors.NoTestTask,a=o.code===K.TaskErrors.RunningTask;if(s||a){var c=new Z,u=s?this.configureAction():new J(J.ID,J.TEXT,this,this.telemetryService);c.closeFunction=this.messageService.show(o.severity,{message:o.message,actions:[c,u]})}else this.messageService.show(o.severity,o.message)}else if(e instanceof Error){var l=e;this.messageService.show(r["default"].Error,l.message)}else h.isString(e)?this.messageService.show(r["default"].Error,e):this.messageService.show(r["default"].Error,n.localize(22,null));i&&this.outputService.showOutput(t.OutputChannel,!0)},t.SERVICE_ID="taskService",t.OutputChannel="Tasks",t=__decorate([__param(0,I.IModeService),__param(1,C.IConfigurationService),__param(2,E.IMarkerService),__param(3,V.IOutputService),__param(4,S.IMessageService),__param(5,N.IWorkbenchEditorService),__param(6,T.IFileService),__param(7,F.IWorkspaceContextService),__param(8,w.ITelemetryService),__param(9,H.ITextFileService),__param(10,g.ILifecycleService),__param(11,b.IEventService),__param(12,D.IModelService),__param(13,x.IExtensionService),__param(14,R.IQuickOpenService)],t)}(l.EventEmitter),oe=function(){function e(e){this.instantiationService=e,this.instantiationService.getInstance(B.ITaskService)}return e.prototype.getId=function(){return"vs.taskService"},e=__decorate([__param(0,k.IInstantiationService)],e)}();t.TaskServiceParticipant=oe;var re=n.localize(23,null),se=v.Registry.as(O.Extensions.WorkbenchActions);if(se.registerWorkbenchAction(new y.SyncActionDescriptor(Q,Q.ID,Q.TEXT),re),i.enableTasks){_.registerSingleton(B.ITaskService,ie),se.registerWorkbenchAction(new y.SyncActionDescriptor($,$.ID,$.TEXT,{primary:p.KeyMod.CtrlCmd|p.KeyMod.Shift|p.KeyCode.KEY_B}),re),se.registerWorkbenchAction(new y.SyncActionDescriptor(X,X.ID,X.TEXT,{primary:p.KeyMod.CtrlCmd|p.KeyMod.Shift|p.KeyCode.KEY_T}),re),se.registerWorkbenchAction(new y.SyncActionDescriptor(J,J.ID,J.TEXT),re),se.registerWorkbenchAction(new y.SyncActionDescriptor(ee,ee.ID,ee.TEXT),re),se.registerWorkbenchAction(new y.SyncActionDescriptor(te,te.ID,te.TEXT),re),v.Registry.as(P.Extensions.Quickopen).registerQuickOpenHandler(new P.QuickOpenHandlerDescriptor("vs/workbench/parts/tasks/browser/taskQuickOpen","QuickOpenHandler","task ",n.localize(24,null)));var ae=v.Registry.as(M.Extensions.Statusbar);ae.registerStatusbarItem(new M.StatusbarItemDescriptor(ne,M.StatusbarAlignment.LEFT,50));var ce=v.Registry.as(V.Extensions.OutputChannels);ce.registerChannel(ie.OutputChannel),v.Registry.as(L.Extensions.Workbench).registerWorkbenchContribution(oe);var ue="vscode://schemas/tasks",le={id:ue,description:"Task definition file",type:"object","default":{version:"0.1.0",command:"myCommand",isShellCommand:!1,args:[],showOutput:"always",tasks:[{taskName:"build",showOutput:"silent",isBuildCommand:!0,problemMatcher:["$tsc","$lessCompile"]}]},definitions:{showOutputType:{type:"string","enum":["always","silent","never"],"default":"silent"},patternType:{anyOf:[{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$cpp","$csc","$vb","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]},{$ref:"#/definitions/pattern"},{type:"array",items:{$ref:"#/definitions/pattern"}}]},pattern:{"default":{regexp:"^([^\\\\s].*)\\\\((\\\\d+,\\\\d+)\\\\):\\\\s*(.*)$",file:1,location:2,message:3},additionalProperties:!1,properties:{regexp:{type:"string",description:n.localize(25,null)},file:{type:"integer",description:n.localize(26,null)},location:{type:"integer",description:n.localize(27,null)},line:{type:"integer",description:n.localize(28,null)},column:{type:"integer",description:n.localize(29,null)},endLine:{type:"integer",description:n.localize(30,null)},endColumn:{type:"integer",description:n.localize(31,null)},severity:{type:"integer",description:n.localize(32,null)},code:{type:"integer",description:n.localize(33,null)},message:{type:"integer",description:n.localize(34,null)},loop:{type:"boolean",description:n.localize(35,null)}}},problemMatcherType:{oneOf:[{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]},{$ref:"#/definitions/problemMatcher"},{type:"array",items:{anyOf:[{$ref:"#/definitions/problemMatcher"},{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]}]}}]},watchingPattern:{type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:n.localize(36,null)},file:{type:"integer",description:n.localize(37,null)}}},problemMatcher:{type:"object",additionalProperties:!1,properties:{base:{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"],description:n.localize(38,null)},owner:{type:"string",description:n.localize(39,null)},severity:{type:"string","enum":["error","warning","info"],description:n.localize(40,null)},applyTo:{type:"string","enum":["allDocuments","openDocuments","closedDocuments"],description:n.localize(41,null)},pattern:{$ref:"#/definitions/patternType",description:n.localize(42,null)},fileLocation:{oneOf:[{type:"string","enum":["absolute","relative"]},{type:"array",items:{type:"string"}}],description:n.localize(43,null)},watching:{type:"object",additionalProperties:!1,properties:{activeOnStart:{type:"boolean",description:n.localize(44,null)},beginsPattern:{oneOf:[{type:"string"},{type:"#/definitions/watchingPattern"}],description:n.localize(45,null)},endsPattern:{oneOf:[{type:"string"},{type:"#/definitions/watchingPattern"}],description:n.localize(46,null)}}},watchedTaskBeginsRegExp:{type:"string",description:n.localize(47,null)},watchedTaskEndsRegExp:{type:"string",description:n.localize(48,null)}}},baseTaskRunnerConfiguration:{type:"object",properties:{command:{type:"string",description:n.localize(49,null)},isShellCommand:{type:"boolean","default":!0,description:n.localize(50,null)},args:{type:"array",description:n.localize(51,null),items:{type:"string"}},options:{type:"object",description:n.localize(52,null),properties:{cwd:{type:"string",description:n.localize(53,null)},env:{type:"object",additionalProperties:{type:"string"},description:n.localize(54,null)}},additionalProperties:{type:["string","array","object"]}},showOutput:{$ref:"#/definitions/showOutputType",description:n.localize(55,null)},isWatching:{type:"boolean",description:n.localize(56,null),"default":!0},promptOnClose:{type:"boolean",description:n.localize(57,null),"default":!1},echoCommand:{type:"boolean",description:n.localize(58,null),"default":!0},suppressTaskName:{type:"boolean",description:n.localize(59,null),"default":!0},taskSelector:{type:"string",description:n.localize(60,null)},problemMatcher:{$ref:"#/definitions/problemMatcherType",description:n.localize(61,null)},tasks:{type:"array",description:n.localize(62,null),items:{type:"object",$ref:"#/definitions/taskDescription"}}}},taskDescription:{type:"object",required:["taskName"],additionalProperties:!1,properties:{taskName:{type:"string",description:n.localize(63,null)},args:{type:"array",description:n.localize(64,null),items:{type:"string"}},suppressTaskName:{type:"boolean",description:n.localize(65,null),"default":!0},showOutput:{$ref:"#/definitions/showOutputType",description:n.localize(66,null)},echoCommand:{type:"boolean",description:n.localize(67,null),"default":!0},isWatching:{type:"boolean",description:n.localize(68,null),"default":!0},isBuildCommand:{type:"boolean",description:n.localize(69,null),"default":!0},isTestCommand:{type:"boolean",description:n.localize(70,null),"default":!0},problemMatcher:{$ref:"#/definitions/problemMatcherType",description:n.localize(71,null)}},defaultSnippets:[{label:"Empty task",body:{taskName:"{{taskName}}"}}]}},allOf:[{type:"object",required:["version"],properties:{version:{type:"string","enum":["0.1.0"],description:n.localize(72,null)},windows:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(73,null)},osx:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(74,null)},linux:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(75,null)}}},{$ref:"#/definitions/baseTaskRunnerConfiguration"}]},de=v.Registry.as(A.Extensions.JSONContribution);de.registerSchema(ue,le),de.addSchemaFileAssociation("/.vscode/tasks.json",ue)}});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/update/electron-browser/update.contribution",["require","exports","vs/nls!vs/workbench/parts/update/electron-browser/update.contribution","vs/platform/platform","vs/base/common/winjs.base","vs/workbench/common/contributions","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/electron-browser/update","vs/base/common/actions","electron","semver"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";var f=new d.Action("close",n.localize(0,null),"",!0,function(){return null}),m=function(e){return new d.Action("update.showLicense",n.localize(1,null),null,!0,function(){return h.shell.openExternal(e),o.TPromise.as(null)})},v=function(){function e(t,i,o){var r=i.getConfiguration().env,a=t.get(e.KEY,s.StorageScope.GLOBAL,"");r.releaseNotesUrl&&a&&r.version!==a&&setTimeout(function(){o.show(u["default"].Info,{message:n.localize(2,null,r.appName,r.version),actions:[f,l.ShowReleaseNotesAction(r.releaseNotesUrl,!0)]})},0),
// should we show the new license?
r.licenseUrl&&a&&p.satisfies(a,"<1.0.0")&&p.satisfies(r.version,">=1.0.0")&&setTimeout(function(){o.show(u["default"].Info,{message:n.localize(3,null,r.appName,r.version),actions:[f,m(r.licenseUrl)]})},0),t.store(e.KEY,r.version,s.StorageScope.GLOBAL)}return e.prototype.getId=function(){return"vs.update"},e.KEY="releaseNotes/lastVersion",e=__decorate([__param(0,s.IStorageService),__param(1,a.IWorkspaceContextService),__param(2,c.IMessageService)],e)}();t.UpdateContribution=v,i.Registry.as(r.Extensions.Workbench).registerWorkbenchContribution(v)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/history/browser/history",["require","exports","vs/base/common/errors","vs/base/common/platform","vs/nls!vs/workbench/services/history/browser/history","vs/base/common/events","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/events","vs/workbench/services/history/common/history","vs/editor/common/core/selection"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";var d=function(){function e(e,t){this._editorInput=e,this._selection=t}return Object.defineProperty(e.prototype,"editorInput",{get:function(){return this._editorInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},enumerable:!0,configurable:!0}),e.prototype.justifiesNewPushState=function(t){if(!this._editorInput.matches(t._editorInput))return!0;if(!l.Selection.isISelection(this._selection)||!l.Selection.isISelection(t._selection))return!0;var n=l.Selection.liftSelection(this._selection),i=l.Selection.liftSelection(t._selection);return!(Math.abs(n.getStartPosition().lineNumber-i.getStartPosition().lineNumber)<e.EDITOR_SELECTION_THRESHOLD)},e.EDITOR_SELECTION_THRESHOLD=5,e}();t.EditorState=d;var h=function(){function e(e,t,n){var i=this;this.eventService=e,this.editorService=t,this.contextService=n,this.toUnbind=[],window.document.title=this.getWindowTitle(null),this.toUnbind.push(this.eventService.addListener(c.EventType.EDITOR_INPUT_CHANGED,function(e){return i.onEditorInputChanged(e)})),this.toUnbind.push(this.eventService.addListener(c.EventType.EDITOR_INPUT_STATE_CHANGED,function(e){return i.onEditorInputStateChanged(e.editorInput)})),this.toUnbind.push(this.eventService.addListener(c.EventType.TEXT_EDITOR_SELECTION_CHANGED,function(e){return i.onTextEditorSelectionChanged(e)}))}return e.prototype.onEditorInputStateChanged=function(e){var t=this.editorService.getActiveEditor();t&&!e.matches(t.input)||this.updateWindowTitle(e)},e.prototype.onTextEditorSelectionChanged=function(e){var t=e.editor,n=this.editorService.getActiveEditor();n&&t&&n!==t||this.handleEditorSelectionChangeEvent(e.editor)},e.prototype.onEditorInputChanged=function(e){this.onEditorEvent(e.editor)},e.prototype.onEditorEvent=function(e){var t=e?e.input:null,n=this.editorService.getActiveEditor();n&&e&&n!==e||(this.updateWindowTitle(t),this.handleEditorInputChangeEvent(e))},e.prototype.updateWindowTitle=function(e){var t=null;t=e&&e.getName()?this.getWindowTitle(e):this.getWindowTitle(null),window.document.title=t},e.prototype.getWindowTitle=function(e){var t=this.doGetWindowTitle(e);return this.contextService.getConfiguration().env.extensionDevelopmentPath?o.localize(0,null,t):t},e.prototype.doGetWindowTitle=function(e){var t=this.contextService.getConfiguration().env.appName,n=e&&e.getName();if(n&&e){var r=e.getStatus();r&&r.decoration&&!i.isMacintosh&&(n=o.localize(1,null,r.decoration,n))}var s=this.contextService.getWorkspace();if(s){var a=s.name;return n?i.isMacintosh?o.localize(2,null,n,a):o.localize(3,null,n,a,t):i.isMacintosh?a:o.localize(4,null,a,t)}return n?i.isMacintosh?n:o.localize(5,null,n,t):t},e.prototype.findVisibleEditorPosition=function(e){var t=this.editorService.getActiveEditor();if(t&&e.matches(t.input))return t.position;for(var n=this.editorService.getVisibleEditors(),i=0;i<n.length;i++){var o=n[i];if(o!==t&&e.matches(o.input))return o.position}return null},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e}();t.BaseHistoryService=h;var p=function(e){function t(t,n,i,o){e.call(this,t,n,i),this.serviceId=u.IHistoryService,this.quickOpenService=o,this.index=-1}return __extends(t,e),Object.defineProperty(t.prototype,"stack",{get:function(){if(!this._stack){this._stack=[];for(var e=this.quickOpenService.getEditorHistory(),t=e.length-1;t>=0;t--)this.addToStack(e[t])}return this._stack},enumerable:!0,configurable:!0}),t.prototype.forward=function(){this.stack.length>this.index+1&&(this.index++,this.navigate())},t.prototype.back=function(){this.index>0&&(this.index--,this.navigate())},t.prototype.navigate=function(){var e=this,t=this.stack[this.index];this.blockEditorEvent=!0,this.editorService.openEditor(t.input,t.options,this.findVisibleEditorPosition(t.input)).done(function(){e.blockEditorEvent=!1},function(t){e.blockEditorEvent=!1,n.onUnexpectedError(t)})},t.prototype.handleEditorSelectionChangeEvent=function(e){this.handleEditorEvent(e,!0)},t.prototype.handleEditorInputChangeEvent=function(e){this.handleEditorEvent(e,!1)},t.prototype.handleEditorEvent=function(e,t){if(!this.blockEditorEvent){if(e instanceof a.BaseTextEditor&&e.input)return void this.handleTextEditorEvent(e,t);this.currentFileEditorState=null,e&&e.input&&this.handleNonTextEditorEvent(e)}},t.prototype.handleTextEditorEvent=function(e,t){var n=new d(e.input,e.getSelection());if(!this.currentFileEditorState||this.currentFileEditorState.justifiesNewPushState(n)){this.currentFileEditorState=n;var i=void 0;t&&(i=new s.TextEditorOptions,i.selection(e.getSelection().startLineNumber,e.getSelection().startColumn)),this.addToStack(e.input,i)}},t.prototype.handleNonTextEditorEvent=function(e){var t=this.stack[this.index];t&&t.input.matches(e.input)||this.addToStack(e.input)},t.prototype.addToStack=function(e,n){var i=this,o=!1;if(this.stack[this.index]){var s=this.stack[this.index];s.input.matches(e)&&!s.options&&(o=!0)}var a={input:e,options:n};o?this.stack[this.index]=a:(this.index++,this.stack.splice(this.index,0,a),this.stack.length>t.MAX_HISTORY_ITEMS&&(this.stack.shift(),this.index>0&&this.index--)),e.addOneTimeListener(r.EventType.DISPOSE,function(){i.stack.forEach(function(t,n){t.input.matches(e)&&(i.stack.splice(n,1),i.index>=n&&i.index--)})})},t.MAX_HISTORY_ITEMS=200,t}(h);t.HistoryService=p}),define("vs/workbench/browser/workbench",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/lifecycle","vs/base/common/strings","vs/base/browser/dom","vs/base/browser/builder","vs/base/common/async","vs/base/common/assert","vs/base/common/timer","vs/base/common/errors","vs/platform/platform","vs/workbench/common/constants","vs/workbench/common/events","vs/workbench/common/contributions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/services/history/browser/history","vs/workbench/browser/parts/activitybar/activitybarPart","vs/workbench/browser/parts/editor/editorPart","vs/workbench/browser/parts/sidebar/sidebarPart","vs/workbench/browser/parts/panel/panelPart","vs/workbench/browser/parts/statusbar/statusbarPart","vs/workbench/browser/layout","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/viewlet","vs/workbench/browser/panel","vs/workbench/browser/parts/quickopen/quickOpenController","vs/workbench/common/editor/diffEditorInput","vs/platform/instantiation/common/extensions","vs/platform/keybinding/browser/keybindingServiceImpl","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/services/editor/browser/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/themes/common/themeService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/keybinding/common/keybindingService","vs/platform/contextview/browser/contextView","vs/workbench/services/activity/common/activityService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/panel/common/panelService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/common/quickOpenService","vs/workbench/services/history/common/history","vs/platform/event/common/event","vs/platform/lifecycle/common/lifecycle","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/platform/extensions/common/extensions","vs/workbench/services/statusbar/common/statusbarService","vs/css!./media/workbench"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F,W,H,V,K,B,U,z,j,q,G,Y,$,X,Q,Z){"use strict";var J=function(){function e(e,t,o,r,s){var u=this;if(this.serviceId=P.IPartService,this.validateParams(e,o,r),i.isString(e)){var l=a.withElementById(e.toString());this.container=l.getHTMLElement()}else this.container=e;this.workbenchParams={workspace:t,configuration:o,options:r||{},instantiationService:s},this.currentTheme=null,this.toDispose=[],this.toShutdown=[],this.editorBackgroundDelayer=new c.Delayer(50),this.creationPromise=new n.TPromise(function(e,t,n){u.creationPromiseComplete=e})}return e.prototype.validateParams=function(e,t,n){if(u.ok(e,"Workbench requires a container to be created with"),i.isString(e)){var o=a.withElementById(e.toString());u.ok(o,r.format("Can not find HTMLElement with id '{0}'.",e))}},e.prototype.startup=function(e){var t=this;u.ok(!this.workbenchStarted,"Can not start a workbench that was already started"),u.ok(!this.workbenchShutdown,"Can not start a workbench that was shutdown");try{this.workbenchStarted=!0,this.callbacks=e,this.createWorkbench(),this.initServices(),this.callbacks&&this.callbacks.onServicesCreated&&this.callbacks.onServicesCreated(),this.registerListeners(),this.initSettings(),this.renderWorkbench(),this.createWorkbenchLayout(),this.registerEmitters();var i=[],o=h.Registry.as(k.Extensions.Viewlets),s=o.getDefaultViewletId();if(this.workbenchParams.configuration.env.isBuilt||(s=this.storageService.get(S.SidebarPart.activeViewletSettingsKey,F.StorageScope.WORKSPACE,o.getDefaultViewletId())),!this.sideBarHidden&&s){var a=l.start(l.Topic.STARTUP,r.format("Opening Viewlet: {0}",s));i.push(this.sidebarPart.openViewlet(s,!1).then(function(){return a.stop()}))}var c=h.Registry.as(x.Extensions.Panels),p=this.storageService.get(E.PanelPart.activePanelSettingsKey,F.StorageScope.WORKSPACE,c.getDefaultPanelId());!this.panelHidden&&p&&i.push(this.panelPart.openPanel(p,!1));var m=l.start(l.Topic.STARTUP,r.format("Restoring Editor(s)")),v=n.TPromise.as(null),y=[],_=this.workbenchParams.options;if(_.filesToCreate&&_.filesToCreate.length||_.filesToOpen&&_.filesToOpen.length||_.filesToDiff&&_.filesToDiff.length){var b=_.filesToCreate||[],w=_.filesToOpen||[],C=_.filesToDiff;if(C&&C.length)v=n.TPromise.join(C.map(function(e){return t.editorService.inputToType(e)})).then(function(e){return[new D.DiffEditorInput(D.toDiffLabel(C[0].resource,C[1].resource,t.contextService),null,e[0],e[1])]});else{var T=[];T.push.apply(T,b.map(function(e){return t.untitledEditorService.createOrGet(e.resource)})),y.push.apply(y,b.map(function(e){return null})),v=n.TPromise.join(w.map(function(e){return t.editorService.inputToType(e)})).then(function(e){return T.push.apply(T,e),y.push.apply(y,w.map(function(e){return g.TextEditorOptions.from(e)})),T})}}else this.workbenchParams.workspace||(v=n.TPromise.as([this.untitledEditorService.createOrGet()]));i.push(v.then(function(e){return t.editorPart.restoreEditorState(e,y).then(function(){t.onEditorOpenedOrClosed(),m.stop()})}));var I=function(e){t.workbenchCreated=!0,t.eventService.emit(f.EventType.WORKBENCH_CREATED),t.creationPromiseComplete(!0),t.callbacks&&t.callbacks.onWorkbenchStarted&&t.callbacks.onWorkbenchStarted(),e&&d.onUnexpectedError(e)};n.TPromise.join(i).then(function(){return I()},function(e){return I(e)})}catch(A){throw console.error(d.toErrorMessage(A,!0)),A}},e.prototype.initServices=function(){this.instantiationService=this.workbenchParams.instantiationService,this.eventService=this.instantiationService.getInstance(q.IEventService),this.storageService=this.instantiationService.getInstance(F.IStorageService),this.keybindingService=this.instantiationService.getInstance(W.IKeybindingService),this.contextService=this.instantiationService.getInstance(N.IWorkspaceContextService),this.telemetryService=this.instantiationService.getInstance($.ITelemetryService);var e=this.instantiationService.getInstance(Y.IMessageService);this.keybindingService instanceof L.AbstractKeybindingService&&this.keybindingService.setMessageService(e);var t=this.instantiationService.getInstance(X.IThreadService);this.instantiationService.getInstance(Q.IExtensionService),this.lifecycleService=this.instantiationService.getInstance(G.ILifecycleService),this.toDispose.push(this.lifecycleService.onShutdown(this.shutdownComponents,this));var n=this.instantiationService.getInstance(H.IContextMenuService);this.untitledEditorService=this.instantiationService.getInstance(O.IUntitledEditorService),this.instantiationService.addSingleton(P.IPartService,this),this.sidebarPart=new S.SidebarPart(e,this.storageService,this.eventService,this.telemetryService,n,this,this.keybindingService,p.Identifiers.SIDEBAR_PART),this.toDispose.push(this.sidebarPart),this.toShutdown.push(this.sidebarPart),this.instantiationService.addSingleton(K.IViewletService,this.sidebarPart),this.panelPart=new E.PanelPart(e,this.storageService,this.eventService,this.telemetryService,n,this,this.keybindingService,p.Identifiers.PANEL_PART),this.toDispose.push(this.panelPart),this.toShutdown.push(this.panelPart),this.instantiationService.addSingleton(B.IPanelService,this.panelPart),this.activitybarPart=new _.ActivitybarPart(this.sidebarPart,e,this.telemetryService,this.eventService,n,this.keybindingService,p.Identifiers.ACTIVITYBAR_PART),this.toDispose.push(this.activitybarPart),this.toShutdown.push(this.activitybarPart),this.instantiationService.addSingleton(V.IActivityService,this.activitybarPart),this.editorPart=new b.EditorPart(e,this.eventService,this.telemetryService,this.storageService,this,p.Identifiers.EDITOR_PART),this.toDispose.push(this.editorPart),this.toShutdown.push(this.editorPart),this.editorService=new M.WorkbenchEditorService(this.editorPart,this.untitledEditorService),this.instantiationService.addSingleton(U.IWorkbenchEditorService,this.editorService),this.quickOpen=new I.QuickOpenController(this.eventService,this.storageService,this.editorService,this.sidebarPart,e,this.telemetryService,this.contextService,this.keybindingService),this.toDispose.push(this.quickOpen),this.toShutdown.push(this.quickOpen),this.instantiationService.addSingleton(z.IQuickOpenService,this.quickOpen),this.statusbarPart=new w.StatusbarPart(p.Identifiers.STATUSBAR_PART),this.toDispose.push(this.statusbarPart),this.toShutdown.push(this.statusbarPart),this.instantiationService.addSingleton(Z.IStatusbarService,this.statusbarPart),this.instantiationService.addSingleton(j.IHistoryService,new y.HistoryService(this.eventService,this.editorService,this.contextService,this.quickOpen));for(var i=A.getServices(),o=0,r=i;o<r.length;o++){var s=r[o];this.instantiationService.addSingleton(s.id,s.descriptor)}t.setInstantiationService(this.instantiationService),this.telemetryService.setInstantiationService(this.instantiationService),e.setWorkbenchServices(this.quickOpen,this.statusbarPart),this.quickOpen.setInstantiationService(this.instantiationService),this.statusbarPart.setInstantiationService(this.instantiationService),this.activitybarPart.setInstantiationService(this.instantiationService),this.sidebarPart.setInstantiationService(this.instantiationService),this.panelPart.setInstantiationService(this.instantiationService),this.editorPart.setInstantiationService(this.instantiationService),this.untitledEditorService.setInstantiationService(this.instantiationService),this.editorService.setInstantiationService(this.instantiationService),this.keybindingService.setInstantiationService(this.instantiationService),h.Registry.as(T.Extensions.Actionbar).setInstantiationService(this.instantiationService),h.Registry.as(m.Extensions.Workbench).setInstantiationService(this.instantiationService),h.Registry.as(v.Extensions.Editors).setInstantiationService(this.instantiationService)},e.prototype.initSettings=function(){this.sideBarHidden=this.storageService.getBoolean(e.sidebarHiddenSettingKey,F.StorageScope.WORKSPACE,!1),this.workbenchParams.options.singleFileMode&&(this.sideBarHidden=!0);var t=h.Registry.as(k.Extensions.Viewlets);t.getDefaultViewletId()||(this.sideBarHidden=!0);var n=h.Registry.as(x.Extensions.Panels);this.panelHidden=this.storageService.getBoolean(e.panelHiddenSettingKey,F.StorageScope.WORKSPACE,!0),!this.workbenchParams.options.singleFileMode&&n.getDefaultPanelId()||(this.panelHidden=!0);var i=this.storageService.get(e.sidebarPositionSettingKey,F.StorageScope.GLOBAL,"left");this.sideBarPosition="left"===i?P.Position.LEFT:P.Position.RIGHT},e.prototype.isStarted=function(){return this.workbenchStarted&&!this.workbenchShutdown},e.prototype.isCreated=function(){return this.workbenchCreated&&this.workbenchStarted},e.prototype.joinCreation=function(){return this.creationPromise},e.prototype.hasFocus=function(e){var t=document.activeElement;if(!t)return!1;var n=null;switch(e){case P.Parts.ACTIVITYBAR_PART:n=this.activitybarPart.getContainer();break;case P.Parts.SIDEBAR_PART:n=this.sidebarPart.getContainer();break;case P.Parts.PANEL_PART:n=this.panelPart.getContainer();break;case P.Parts.EDITOR_PART:n=this.editorPart.getContainer();break;case P.Parts.STATUSBAR_PART:if(!this.statusbarPart)return!1;n=this.statusbarPart.getContainer()}return s.isAncestor(t,n.getHTMLElement())},e.prototype.isVisible=function(e){return e===P.Parts.SIDEBAR_PART?!this.sideBarHidden:e===P.Parts.PANEL_PART?!this.panelHidden:!0},e.prototype.isSideBarHidden=function(){return this.sideBarHidden},e.prototype.setSideBarHidden=function(t,n){if(this.sideBarHidden=t,t?this.workbench.addClass("nosidebar"):this.workbench.removeClass("nosidebar"),n||this.workbenchLayout.layout(!0),t&&this.sidebarPart.getActiveViewlet()){this.sidebarPart.hideActiveViewlet();var i=this.editorPart.getActiveEditor();i&&i.focus()}else if(!t&&!this.sidebarPart.getActiveViewlet()){var o=h.Registry.as(k.Extensions.Viewlets),r=this.sidebarPart.getLastActiveViewletId()||o.getDefaultViewletId();r&&this.sidebarPart.openViewlet(r,!0).done(null,d.onUnexpectedError)}this.storageService.store(e.sidebarHiddenSettingKey,t?"true":"false",F.StorageScope.WORKSPACE)},e.prototype.isPanelHidden=function(){return this.panelHidden},e.prototype.setPanelHidden=function(t,n){if(this.panelHidden=t,n||this.workbenchLayout.layout(!0),t&&this.panelPart.getActivePanel()){this.panelPart.hideActivePanel();var i=this.editorPart.getActiveEditor();i&&i.focus()}else if(!t&&!this.panelPart.getActivePanel()){var o=h.Registry.as(x.Extensions.Panels),r=this.panelPart.getLastActivePanelId()||o.getDefaultPanelId();r&&this.panelPart.openPanel(r,!0).done(null,d.onUnexpectedError)}this.storageService.store(e.panelHiddenSettingKey,t?"true":"false",F.StorageScope.WORKSPACE)},e.prototype.getSideBarPosition=function(){return this.sideBarPosition},e.prototype.setSideBarPosition=function(t){this.sideBarHidden&&this.setSideBarHidden(!1,!0);var n=t===P.Position.LEFT?"left":"right",i=this.sideBarPosition===P.Position.LEFT?"left":"right";this.sideBarPosition=t,this.activitybarPart.getContainer().removeClass(i),this.sidebarPart.getContainer().removeClass(i),this.activitybarPart.getContainer().addClass(n),this.sidebarPart.getContainer().addClass(n),this.workbenchLayout.layout(!0),this.storageService.store(e.sidebarPositionSettingKey,t===P.Position.LEFT?"left":"right",F.StorageScope.GLOBAL)},e.prototype.shutdown=function(e){return this.isStarted()&&(e||this.shutdownComponents(),this.eventService.emit(f.EventType.WORKBENCH_DISPOSING),this.workbenchShutdown=!0,this.dispose()),null},e.prototype.dispose=function(){this.toDispose=o.disposeAll(this.toDispose),this.eventService.emit(f.EventType.WORKBENCH_DISPOSED)},e.prototype.layout=function(){this.isStarted()&&this.workbenchLayout.layout()},e.prototype.shutdownComponents=function(){this.toShutdown.forEach(function(e){return e.shutdown()})},e.prototype.registerEmitters=function(){this.hookPartListeners(this.activitybarPart),this.hookPartListeners(this.editorPart),this.hookPartListeners(this.sidebarPart),this.hookPartListeners(this.panelPart),this.toDispose.push(this.toDisposable(this.eventService.addEmitter(this.storageService)))},e.prototype.hookPartListeners=function(e){this.toDispose.push(this.toDisposable(this.eventService.addEmitter(e,e.getId())))},e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.toDisposable(this.eventService.addListener(F.StorageEventType.STORAGE,function(t){switch(t.key){case p.Preferences.THEME:e.applyTheme(t.newValue)}}))),this.toDispose.push(this.toDisposable(this.eventService.addListener(f.EventType.EDITOR_CLOSED,function(){return e.onEditorOpenedOrClosed()}))),this.toDispose.push(this.toDisposable(this.eventService.addListener(f.EventType.EDITOR_OPENED,function(){return e.onEditorOpenedOrClosed()})))},e.prototype.onEditorOpenedOrClosed=function(){var e=this,t=this.editorService.getVisibleEditors().length;0===t?this.editorBackgroundDelayer.trigger(function(){return e.editorPart.getContainer().addClass("empty")}):this.editorBackgroundDelayer.trigger(function(){return e.editorPart.getContainer().removeClass("empty")})},e.prototype.toDisposable=function(e){return{dispose:function(){e()}}},e.prototype.createWorkbenchLayout=function(){var e=new C.LayoutOptions;e.setMargin(new a.Box(0,0,0,0)),this.workbenchLayout=this.instantiationService.createInstance(C.WorkbenchLayout,a.$(this.container),this.workbench,{activitybar:this.activitybarPart,editor:this.editorPart,sidebar:this.sidebarPart,panel:this.panelPart,statusbar:this.statusbarPart},this.quickOpen,e),this.toDispose.push(this.workbenchLayout)},e.prototype.createWorkbench=function(){this.workbenchContainer=a.$(".monaco-workbench-container"),this.workbench=a.$().div({"class":"monaco-workbench",id:p.Identifiers.WORKBENCH_CONTAINER}).appendTo(this.workbenchContainer)},e.prototype.renderWorkbench=function(){this.sideBarHidden&&this.workbench.addClass("nosidebar"),this.workbenchParams.options.readOnly&&this.workbench.addClass("readonly"),this.workbenchParams.workspace||this.workbench.addClass("no-workspace"),this.createActivityBarPart(),this.createSidebarPart(),this.createEditorPart(),this.createPanelPart(),this.createStatusbarPart(),this.createQuickOpen();var e=this.storageService.get(p.Preferences.THEME,F.StorageScope.GLOBAL,R.DEFAULT_THEME_ID);this.applyTheme(e),this.workbenchContainer.build(this.container)},e.prototype.applyTheme=function(e){this.currentTheme&&this.workbench.removeClass(this.currentTheme),this.currentTheme=e||null,this.currentTheme&&this.workbench.addClass(this.currentTheme)},e.prototype.createActivityBarPart=function(){var e=a.$(this.workbench).div({"class":["part","activitybar",this.sideBarPosition===P.Position.LEFT?"left":"right"],id:p.Identifiers.ACTIVITYBAR_PART,role:"navigation"});this.activitybarPart.create(e)},e.prototype.createSidebarPart=function(){var e=a.$(this.workbench).div({"class":["part","sidebar",this.sideBarPosition===P.Position.LEFT?"left":"right"],id:p.Identifiers.SIDEBAR_PART,role:"complementary"});this.sidebarPart.create(e)},e.prototype.createPanelPart=function(){var e=a.$(this.workbench).div({"class":["part","panel","monaco-editor-background"],id:p.Identifiers.PANEL_PART,role:"complementary"});this.panelPart.create(e)},e.prototype.createEditorPart=function(){var e=a.$(this.workbench).div({"class":["part","editor","monaco-editor-background"],id:p.Identifiers.EDITOR_PART,role:"main"});this.editorPart.create(e)},e.prototype.createStatusbarPart=function(){var e=a.$(this.workbench).div({"class":["part","statusbar"],id:p.Identifiers.STATUSBAR_PART,role:"contentinfo"});this.statusbarPart.create(e)},e.prototype.createQuickOpen=function(){this.quickOpen.create()},e.prototype.getEditorPart=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.editorPart},e.prototype.getSidebarPart=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.sidebarPart},e.prototype.getPanelPart=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.panelPart},e.prototype.getInstantiationService=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.instantiationService},e.prototype.addClass=function(e){this.workbench&&this.workbench.addClass(e)},e.prototype.removeClass=function(e){this.workbench&&this.workbench.removeClass(e)},e.sidebarPositionSettingKey="workbench.sidebar.position",e.sidebarHiddenSettingKey="workbench.sidebar.hidden",e.panelHiddenSettingKey="workbench.panel.hidden",e}();t.Workbench=J});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/textMate/TMSyntax",["require","exports","vs/nls!vs/editor/node/textMate/TMSyntax","vs/base/common/errors","vs/base/common/paths","vs/platform/extensions/common/extensionsRegistry","vs/editor/common/modes/TMState","vs/editor/common/modes/supports","vs/editor/common/services/modeService","vscode-textmate"],function(e,t,n,i,o,r,s,a,c,u){"use strict";function l(e,t){var n=new m(e.getId(),t);return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new s.TMState(e,null,null)},tokenize:function(e,t,i,o){return n.tokenize(e,t,i,o)}}}function d(e,t){for(var n=[],i=1;i<t.scopes.length;++i)n=n.concat(t.scopes[i].split("."));var o="";if(t.scopes.length>0){var r=t.scopes[0].lastIndexOf(".");r>=0&&(o=t.scopes[0].substr(r+1))}var s=[];return h(n,o,s),{tokenType:s.join("."),modeToken:e}}function h(e,t,n){e.sort();for(var i=null,o=null,r=0,s=e.length;s>r;r++)i=o,o=e[r],o!==i&&o!==t&&n.push(o);n.push(t)}var p=r.ExtensionsRegistry.registerExtensionPoint("grammars",{description:n.localize(0,null),type:"array",defaultSnippets:[{body:[{id:"",extensions:[]}]}],items:{type:"object",defaultSnippets:[{body:{language:"{{id}}",scopeName:"source.{{id}}",path:"./syntaxes/{{id}}.tmLanguage."}}],properties:{language:{description:n.localize(1,null),type:"string"},scopeName:{description:n.localize(2,null),type:"string"},path:{description:n.localize(3,null),type:"string"}}}}),f=function(){function e(e){var t=this;this._modeService=e,this._grammarRegistry=new u.Registry({getFilePath:function(e){return t._scopeNameToFilePath[e]}}),this._scopeNameToFilePath={},p.setHandler(function(e){for(var n=0;n<e.length;n++)for(var i=e[n].value,o=0;o<i.length;o++)t._handleGrammarExtensionPointUser(e[n].description.extensionFolderPath,i[o],e[n].collector)})}return e.prototype._handleGrammarExtensionPointUser=function(e,t,i){var r=this;if(t.language&&("string"!=typeof t.language||!this._modeService.isRegisteredMode(t.language)))return void i.error(n.localize(4,null,p.name,String(t.language)));if(!t.scopeName||"string"!=typeof t.scopeName)return void i.error(n.localize(5,null,p.name,String(t.scopeName)));if(!t.path||"string"!=typeof t.path)return void i.error(n.localize(6,null,p.name,String(t.path)));var s=o.normalize(o.join(e,t.path));0!==s.indexOf(e)&&i.warn(n.localize(7,null,p.name,s,e)),this._scopeNameToFilePath[t.scopeName]=s;var a=t.language;if(a)var c=this._modeService.onDidCreateMode(function(e){e.getId()===a&&(r.registerDefinition(a,t.scopeName),c.dispose())})},e.prototype.registerDefinition=function(e,t){var n=this;this._grammarRegistry.loadGrammar(t,function(t,o){return t?void i.onUnexpectedError(t):void n._modeService.registerTokenizationSupport(e,function(e){return l(e,o)})})},e=__decorate([__param(0,c.IModeService)],e)}();t.MainProcessTextMateSyntax=f;var m=function(){function e(e,t){this._modeId=e,this._grammar=t}return e.prototype.tokenize=function(e,t,n,i){if(void 0===n&&(n=0),e.length>=2e4)return{tokens:[{startIndex:n,type:""}],actualStopOffset:n,endState:t,modeTransitions:[{startIndex:n,mode:t.getMode()}]};var o=t.clone(),r=this._grammar.tokenizeLine(e,o.getRuleStack());o.setRuleStack(r.ruleStack);for(var s={tokens:[],actualStopOffset:n+e.length,endState:o,modeTransitions:[{startIndex:n,mode:o.getMode()}]},c=null,u=0,l=r.tokens.length;l>u;u++){var h=r.tokens[u],p=h.startIndex,f=d(this._modeId,h);f.tokenType!==c&&(s.tokens.push(new a.Token(p+n,f.tokenType)),c=f.tokenType)}return s},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostDocuments",["require","exports","vs/base/common/errors","vs/editor/common/services/modelService","vs/editor/common/editorCommon","vs/editor/common/model/mirrorModel2","vs/platform/thread/common/thread","vs/base/common/event","vs/base/common/uri","vs/base/common/lifecycle","vs/workbench/api/node/extHostTypes","vs/platform/event/common/event","vs/workbench/services/editor/common/editorService","vs/workbench/parts/files/common/files","./extHostTypeConverters","vs/base/common/winjs.base","vs/editor/common/model/textModelWithTokensHelpers","vs/platform/files/common/files","vs/editor/common/services/modeService","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/common/editor/resourceEditorInput","vs/base/common/async","weak"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E){"use strict";function w(e,t){T[e]=t}function C(e){return T[e]}var T=Object.create(null);t.setWordDefinitionFor=w,t.getWordDefinitionFor=C;var k=function(){function e(e){this._proxy=e.getRemotable(I),this._onDidAddDocumentEventEmitter=new a.Emitter,this.onDidAddDocument=this._onDidAddDocumentEventEmitter.event,this._onDidRemoveDocumentEventEmitter=new a.Emitter,this.onDidRemoveDocument=this._onDidRemoveDocumentEventEmitter.event,this._onDidChangeDocumentEventEmitter=new a.Emitter,this.onDidChangeDocument=this._onDidChangeDocumentEventEmitter.event,this._onDidSaveDocumentEventEmitter=new a.Emitter,this.onDidSaveDocument=this._onDidSaveDocumentEventEmitter.event,this._documentData=Object.create(null),this._documentLoader=Object.create(null),this._documentContentProviders=Object.create(null)}return e.prototype.getAllDocumentData=function(){var e=[];for(var t in this._documentData)e.push(this._documentData[t]);return e},e.prototype.getDocumentData=function(e){if(e){var t=this._documentData[e.toString()];return t?t:void 0}},e.prototype.ensureDocumentData=function(e){var t=this,n=this._documentData[e.toString()];if(n)return m.TPromise.as(n);var i=this._documentLoader[e.toString()];return i||(i=this._proxy._tryOpenDocument(e).then(function(){return delete t._documentLoader[e.toString()],t._documentData[e.toString()]},function(n){return delete t._documentLoader[e.toString()],
m.TPromise.wrapError(n)}),this._documentLoader[e.toString()]=i),i},e.prototype.registerTextDocumentContentProvider=function(t,i){var o=this;if("file"===t||"untitled"===t)throw new Error("scheme '"+t+"' already registered");var r=e._handlePool++;this._documentContentProviders[r]=i,this._proxy.$registerTextContentProvider(r,t);var s;return"function"==typeof i.onDidChange&&(s=i.onDidChange(function(e){o._documentData[e.toString()]&&o.$provideTextDocumentContent(r,e).then(function(t){return o._proxy.$onVirtualDocumentChange(e,t)},n.onUnexpectedError)})),new l.Disposable(function(){delete o._documentContentProviders[r]&&o._proxy.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})},e.prototype.$provideTextDocumentContent=function(e,t){var n=this._documentContentProviders[e];return n?S.asWinJsPromise(function(e){return n.provideTextDocumentContent(t,e)}):m.TPromise.wrapError("unsupported uri-scheme: "+t.scheme)},e.prototype.$isDocumentReferenced=function(e){var t=e.toString(),n=this._documentData[t];return n?m.TPromise.as(n.isDocumentReferenced):void 0},e.prototype._acceptModelAdd=function(e){var t=new x(this._proxy,e.url,e.value.lines,e.value.EOL,e.modeId,e.versionId,e.isDirty),n=t.document.uri.toString();if(this._documentData[n])throw new Error("Document `"+n+"` already exists.");this._documentData[n]=t,this._onDidAddDocumentEventEmitter.fire(t.document)},e.prototype._acceptModelModeChanged=function(e,t,n){var i=this._documentData[e];this._onDidRemoveDocumentEventEmitter.fire(i.document),i._acceptLanguageId(n),this._onDidAddDocumentEventEmitter.fire(i.document)},e.prototype._acceptModelSaved=function(e){var t=this._documentData[e];t._acceptIsDirty(!1),this._onDidSaveDocumentEventEmitter.fire(t.document)},e.prototype._acceptModelDirty=function(e){var t=this._documentData[e];t._acceptIsDirty(!0)},e.prototype._acceptModelReverted=function(e){var t=this._documentData[e];t._acceptIsDirty(!1)},e.prototype._acceptModelRemoved=function(e){if(!this._documentData[e])throw new Error("Document `"+e+"` does not exist.");var t=this._documentData[e];delete this._documentData[e],this._onDidRemoveDocumentEventEmitter.fire(t.document),t.dispose()},e.prototype._acceptModelChanged=function(e,t){var n=this._documentData[e];n.onEvents(t),this._onDidChangeDocumentEventEmitter.fire({document:n.document,contentChanges:t.map(function(e){return{range:f.toRange(e.range),rangeLength:e.rangeLength,text:e.text}})})},e._handlePool=0,e=__decorate([s.Remotable.ExtHostContext("ExtHostModelService"),__param(0,s.IThreadService)],e)}();t.ExtHostModelService=k;var x=function(e){function t(t,n,i,o,r,s,a){e.call(this,n,i,o,s),this._proxy=t,this._languageId=r,this._isDirty=a,this._textLines=[]}return __extends(t,e),t.prototype.dispose=function(){this._textLines.length=0,this._isDirty=!1,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"document",{get:function(){if(!this.isDocumentReferenced){var e=this,t={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return"file"!==e._uri.scheme},get languageId(){return e._languageId},get version(){return e._versionId},get isDirty(){return e._isDirty},save:function(){return e._proxy._trySaveDocument(e._uri)},getText:function(t){return t?e._getTextInRange(t):e.getText()},get lineCount(){return e._lines.length},lineAt:function(t){return e.lineAt(t)},offsetAt:function(t){return e.offsetAt(t)},positionAt:function(t){return e.positionAt(t)},validateRange:function(t){return e.validateRange(t)},validatePosition:function(t){return e.validatePosition(t)},getWordRangeAtPosition:function(t){return e.getWordRangeAtPosition(t)}};this._documentRef=E(t)}return E.get(this._documentRef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDocumentReferenced",{get:function(){return this._documentRef&&!E.isDead(this._documentRef)},enumerable:!0,configurable:!0}),t.prototype._acceptLanguageId=function(e){this._languageId=e},t.prototype._acceptIsDirty=function(e){this._isDirty=e},t.prototype._getTextInRange=function(e){var t=this.validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);var n=this._eol,i=t.start.line,o=t.end.line,r=[];r.push(this._lines[i].substring(t.start.character));for(var s=i+1;o>s;s++)r.push(this._lines[s]);return r.push(this._lines[o].substring(0,t.end.character)),r.join(n)},t.prototype.lineAt=function(e){var t;if(e instanceof l.Position?t=e.line:"number"==typeof e&&(t=e),0>t||t>=this._lines.length)throw new Error("Illegal value "+t+" for `line`");var n=this._textLines[t];if(!n||n.lineNumber!==t||n.text!==this._lines[t]){var i=this._lines[t],o=/^(\s*)/.exec(i)[1].length,r=new l.Range(t,0,t,i.length),s=new l.Range(t,0,t+1,0);n=Object.freeze({lineNumber:t,range:r,rangeIncludingLineBreak:s,text:i,firstNonWhitespaceCharacterIndex:o,isEmptyOrWhitespace:o===i.length}),this._textLines[t]=n}return n},t.prototype.offsetAt=function(e){return e=this.validatePosition(e),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(e.line-1)+e.character},t.prototype.positionAt=function(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();var t={index:0,remainder:0};this._lineStarts.getIndexOf(e,t);var n=this._lines[t.index].length;return new l.Position(t.index,Math.min(t.remainder,n))},t.prototype.validateRange=function(e){if(!(e instanceof l.Range))throw new Error("Invalid argument");var t=this.validatePosition(e.start),n=this.validatePosition(e.end);return t===e.start&&n===e.end?e:new l.Range(t.line,t.character,n.line,n.character)},t.prototype.validatePosition=function(e){if(!(e instanceof l.Position))throw new Error("Invalid argument");var t=e.line,n=e.character,i=!1;0>t&&(t=0,i=!0),t>=this._lines.length&&(t=this._lines.length-1,i=!0),0>n&&(n=0,i=!0);var o=this._lines[t].length;return n>o&&(n=o,i=!0),i?new l.Position(t,n):e},t.prototype.getWordRangeAtPosition=function(e){var t=this.validatePosition(e),n=v.WordHelper._getWordAtText(t.character+1,v.WordHelper.ensureValidWordDefinition(C(this._languageId)),this._lines[t.line],0);return n?new l.Range(t.line,n.startColumn-1,t.line,n.endColumn-1):void 0},t}(r.MirrorModel2);t.ExtHostDocumentData=x;var I=function(){function e(e,t,n,i,o,r,s,a){var c=this;this._modelService=t,this._modeService=n,this._textFileService=o,this._editorService=r,this._fileService=s,this._untitledEditorService=a,this._proxy=e.getRemotable(k),this._modelIsSynced={},this._toDispose=[],t.onModelAdded(this._onModelAdded,this,this._toDispose),t.onModelRemoved(this._onModelRemoved,this,this._toDispose),t.onModelModeChanged(this._onModelModeChanged,this,this._toDispose),this._toDispose.push(i.addListener2(p.EventType.FILE_SAVED,function(e){c._proxy._acceptModelSaved(e.getAfter().resource.toString())})),this._toDispose.push(i.addListener2(p.EventType.FILE_REVERTED,function(e){c._proxy._acceptModelReverted(e.getAfter().resource.toString())})),this._toDispose.push(i.addListener2(p.EventType.FILE_DIRTY,function(e){c._proxy._acceptModelDirty(e.getAfter().resource.toString())}));var u=setInterval(function(){return c._runDocumentCleanup()},3e4);this._toDispose.push({dispose:function(){clearInterval(u)}}),this._modelToDisposeMap=Object.create(null),this._resourceContentProvider=Object.create(null),this._virtualDocumentSet=Object.create(null)}return e.prototype.dispose=function(){var e=this;Object.keys(this._modelToDisposeMap).forEach(function(t){e._modelToDisposeMap[t].dispose()}),this._modelToDisposeMap=Object.create(null),this._toDispose=u.disposeAll(this._toDispose)},e.prototype._onModelAdded=function(e){var t=this;if(e.isTooLargeForHavingARichMode())return null;var n=e.getAssociatedResource();this._modelIsSynced[n.toString()]=!0,this._modelToDisposeMap[n.toString()]=e.addBulkListener2(function(e){return t._onModelEvents(n,e)}),this._proxy._acceptModelAdd({url:e.getAssociatedResource(),versionId:e.getVersionId(),value:e.toRawText(),modeId:e.getMode().getId(),isDirty:this._textFileService.isDirty(n)})},e.prototype._onModelModeChanged=function(e){var t=e.model,n=e.oldModeId,i=t.getAssociatedResource();this._modelIsSynced[i.toString()]&&this._proxy._acceptModelModeChanged(t.getAssociatedResource().toString(),n,t.getMode().getId())},e.prototype._onModelRemoved=function(e){var t=e.getAssociatedResource();this._modelIsSynced[t.toString()]&&(delete this._modelIsSynced[t.toString()],this._modelToDisposeMap[t.toString()].dispose(),delete this._modelToDisposeMap[t.toString()],this._proxy._acceptModelRemoved(t.toString()))},e.prototype._onModelEvents=function(e,t){for(var n=[],i=0,r=t.length;r>i;i++){var s=t[i];switch(s.getType()){case o.EventType.ModelContentChanged2:n.push(s.getData())}}n.length>0&&this._proxy._acceptModelChanged(e.toString(),n)},e.prototype._trySaveDocument=function(e){return this._textFileService.save(e)},e.prototype._tryOpenDocument=function(e){if(!e.scheme||!e.fsPath&&!e.authority)return m.TPromise.wrapError("Invalid uri. Scheme and authority or path must be set.");var t;switch(e.scheme){case"untitled":t=this._handleUnititledScheme(e);break;case"file":default:t=this._handleAsResourceInput(e)}return t.then(function(t){return t?void 0:m.TPromise.wrapError("cannot open "+e.toString())},function(t){return m.TPromise.wrapError("cannot open "+e.toString()+". Detail: "+n.toErrorMessage(t))})},e.prototype._handleAsResourceInput=function(e){return this._editorService.resolveEditorModel({resource:e}).then(function(e){return!!e})},e.prototype._handleUnititledScheme=function(e){var t=this,n=c["default"].file(e.fsPath);return this._fileService.resolveFile(n).then(function(e){return m.TPromise.wrapError("file already exists on disk")},function(i){var o=t._untitledEditorService.createOrGet(n);return o.resolve(!0).then(function(n){if(o.getResource().toString()!==e.toString())throw new Error("expected URI "+e.toString()+" BUT GOT "+o.getResource().toString());return t._proxy._acceptModelDirty(e.toString())}).then(function(){return!0})})},e.prototype.$registerTextContentProvider=function(e,t){var n=this;this._resourceContentProvider[e]=b.ResourceEditorInput.registerResourceContentProvider(t,{provideTextContent:function(t){return n._proxy.$provideTextDocumentContent(e,t).then(function(e){if(e){n._virtualDocumentSet[t.toString()]=!0;var i=e.substr(0,1+e.search(/\r?\n/)),o=n._modeService.getOrCreateModeByFilenameOrFirstLine(t.fsPath,i);return n._modelService.createModel(e,o,t)}})}})},e.prototype.$unregisterTextContentProvider=function(e){var t=this._resourceContentProvider[e];t&&(t.dispose(),delete this._resourceContentProvider[e])},e.prototype.$onVirtualDocumentChange=function(e,t){var n=this._modelService.getModel(e);n&&n.setValue(t)},e.prototype._runDocumentCleanup=function(){var e=this,t=[];m.TPromise.join(Object.keys(this._virtualDocumentSet).map(function(n){var i=c["default"].parse(n);return e._proxy.$isDocumentReferenced(i).then(function(n){return n?void 0:e._editorService.inputToType({resource:i}).then(function(n){e._editorService.isVisible(n,!0)||t.push(i)})})})).then(function(){for(var n=0,i=t;n<i.length;n++){var o=i[n];e._modelService.destroyModel(o),delete e._virtualDocumentSet[o.toString()]}},n.onUnexpectedError)},e=__decorate([s.Remotable.MainContext("MainThreadDocuments"),__param(0,s.IThreadService),__param(1,i.IModelService),__param(2,y.IModeService),__param(3,d.IEventService),__param(4,p.ITextFileService),__param(5,h.IWorkbenchEditorService),__param(6,g.IFileService),__param(7,_.IUntitledEditorService)],e)}();t.MainThreadDocuments=I});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostEditors",["require","exports","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/workbench/api/node/extHostDocuments","./extHostTypes","vs/editor/common/editorCommon","vs/editor/common/services/codeEditorService","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modelService","vs/workbench/api/node/mainThreadEditors","./extHostTypeConverters","vs/workbench/common/events","vs/platform/telemetry/common/telemetry","vs/platform/event/common/event","vs/base/common/arrays","vs/base/common/objects"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y){"use strict";function _(e,t){var n="The property '"+e+"' is readonly.";return t&&(n+=" Use '"+t+"' instead."),new Error(n)}function b(e){return new Error("illgeal argument '"+e+"'")}function S(e,t){return void 0===t&&(t="Refer to the documentation for further details."),function(n,i,o){var r=o.value;return o.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];return console.warn("[Deprecation Warning] method '"+e+"' is deprecated and should no longer be used. "+t),r.apply(this,n)},o}}var E=function(){function e(e){this._onDidChangeTextEditorSelection=new n.Emitter,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this._onDidChangeTextEditorOptions=new n.Emitter,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this._onDidChangeTextEditorViewColumn=new n.Emitter,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this._modelService=e.getRemotable(s.ExtHostModelService),this._proxy=e.getRemotable(k),this._onDidChangeActiveTextEditor=new n.Emitter,this._editors=Object.create(null),this._visibleEditorIds=[]}return e.prototype.getActiveTextEditor=function(){return this._activeEditorId&&this._editors[this._activeEditorId]},e.prototype.getVisibleTextEditors=function(){var e=this;return this._visibleEditorIds.map(function(t){return e._editors[t]})},Object.defineProperty(e.prototype,"onDidChangeActiveTextEditor",{get:function(){return this._onDidChangeActiveTextEditor&&this._onDidChangeActiveTextEditor.event},enumerable:!0,configurable:!0}),e.prototype.showTextDocument=function(e,t,n){var i=this;return this._proxy._tryShowTextDocument(e.uri,p.fromViewColumn(t),n).then(function(e){var t=i._editors[e];if(t)return t;throw new Error("Failed to create editor with id: "+e)})},e.prototype.createTextEditorDecorationType=function(e){return new w(this._proxy,e)},e.prototype._acceptTextEditorAdd=function(e){var t=this._modelService.getDocumentData(e.document),n=new T(this._proxy,e.id,t,e.selections.map(p.toSelection),e.options,p.toViewColumn(e.editorPosition));this._editors[e.id]=n},e.prototype._acceptOptionsChanged=function(e,t){var n=this._editors[e];n._acceptOptions(t),this._onDidChangeTextEditorOptions.fire({textEditor:n,options:t})},e.prototype._acceptSelectionsChanged=function(e,t){var n=t.map(p.toSelection),i=this._editors[e];i._acceptSelections(n),this._onDidChangeTextEditorSelection.fire({textEditor:i,selections:n})},e.prototype._acceptActiveEditorAndVisibleEditors=function(e,t){this._visibleEditorIds=t,this._activeEditorId!==e&&(this._activeEditorId=e,this._onDidChangeActiveTextEditor.fire(this.getActiveTextEditor()))},e.prototype._acceptEditorPositionData=function(e){for(var t in e){var n=this._editors[t],i=p.toViewColumn(e[t]);n.viewColumn!==i&&(n._acceptViewColumn(i),this._onDidChangeTextEditorViewColumn.fire({textEditor:n,viewColumn:i}))}},e.prototype._acceptTextEditorRemove=function(e){var t=this._visibleEditorIds.filter(function(t){return t!==e});this._activeEditorId===e?this._acceptActiveEditorAndVisibleEditors(void 0,t):this._acceptActiveEditorAndVisibleEditors(this._activeEditorId,t);var n=this._editors[e];n.dispose(),delete this._editors[e]},e=__decorate([r.Remotable.ExtHostContext("ExtHostEditors"),__param(0,r.IThreadService)],e)}();t.ExtHostEditors=E;var w=function(){function e(t,n){this.key="TextEditorDecorationType"+ ++e.LAST_ID,this._proxy=t,this._proxy._registerTextEditorDecorationType(this.key,n)}return e.prototype.dispose=function(){this._proxy._removeTextEditorDecorationType(this.key)},e.LAST_ID=0,e}(),C=function(){function e(e){this._documentVersionId=e.version,this._collectedEdits=[],this._setEndOfLine=0}return e.prototype.finalize=function(){return{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine}},e.prototype.replace=function(e,t){var n=null;if(e instanceof a.Position)n=new a.Range(e,e);else if(e instanceof a.Range)n=e;else{if(!(e instanceof a.Selection))throw new Error("Unrecognized location");n=new a.Range(e.start,e.end)}this._collectedEdits.push({range:n,text:t,forceMoveMarkers:!1})},e.prototype.insert=function(e,t){this._collectedEdits.push({range:new a.Range(e,e),text:t,forceMoveMarkers:!0})},e.prototype["delete"]=function(e){var t=null;if(e instanceof a.Range)t=e;else{if(!(e instanceof a.Selection))throw new Error("Unrecognized location");t=new a.Range(e.start,e.end)}this._collectedEdits.push({range:t,text:null,forceMoveMarkers:!0})},e.prototype.setEndOfLine=function(e){if(e!==a.EndOfLine.LF&&e!==a.EndOfLine.CRLF)throw b("endOfLine");this._setEndOfLine=e},e}();t.TextEditorEdit=C;var T=function(){function e(e,t,n,i,o,r){this._proxy=e,this._id=t,this._documentData=n,this._selections=i,this._options=o,this._viewColumn=r}return e.prototype.dispose=function(){this._documentData=null},e.prototype.show=function(e){this._proxy._tryShowEditor(this._id,p.fromViewColumn(e))},e.prototype.hide=function(){this._proxy._tryHideEditor(this._id)},Object.defineProperty(e.prototype,"document",{get:function(){return this._documentData.document},set:function(e){throw _("document")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){var t=this;this._options=e,this._runOnProxy(function(){return t._proxy._trySetOptions(t._id,t._options)},!0)},enumerable:!0,configurable:!0}),e.prototype._acceptOptions=function(e){this._options=e},Object.defineProperty(e.prototype,"viewColumn",{get:function(){return this._viewColumn},set:function(e){throw _("viewColumn")},enumerable:!0,configurable:!0}),e.prototype._acceptViewColumn=function(e){this._viewColumn=e},Object.defineProperty(e.prototype,"selection",{get:function(){return this._selections&&this._selections[0]},set:function(e){if(!(e instanceof a.Selection))throw b("selection");this._selections=[e],this._trySetSelection(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selections",{get:function(){return this._selections},set:function(e){if(!Array.isArray(e)||e.some(function(e){return!(e instanceof a.Selection)}))throw b("selections");this._selections=e,this._trySetSelection(!0)},enumerable:!0,configurable:!0}),e.prototype.setDecorations=function(e,t){var n=this;this._runOnProxy(function(){return n._proxy._trySetDecorations(n._id,e.key,p.fromRangeOrRangeWithMessage(t))},!0)},e.prototype.revealRange=function(e,t){var n=this;this._runOnProxy(function(){return n._proxy._tryRevealRange(n._id,p.fromRange(e),t||h.TextEditorRevealType.Default)},!0)},e.prototype._trySetSelection=function(e){var t=this,n=this._selections.map(p.fromSelection);return this._runOnProxy(function(){return t._proxy._trySetSelections(t._id,n)},e)},e.prototype._acceptSelections=function(e){this._selections=e},e.prototype.edit=function(e){var t=new C(this._documentData.document);return e(t),this._applyEdit(t)},e.prototype._applyEdit=function(e){var t=e.finalize(),n=t.edits.map(function(e){return{range:p.fromRange(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers}});return this._proxy._tryApplyEdits(this._id,t.documentVersionId,n,t.setEndOfLine)},e.prototype._runOnProxy=function(e,t){var n=this;return e().then(function(){return n},function(e){return t?void console.warn(e):o.TPromise.wrapError(t)})},__decorate([S("TextEditor.show")],e.prototype,"show",null),__decorate([S("TextEditor.hide")],e.prototype,"hide",null),e}(),k=function(){function e(e,t,n,i,o,r){var s=this;this._proxy=e.getRemotable(E),this._workbenchEditorService=t,this._telemetryService=n,this._toDispose=[],this._textEditorsListenersMap=Object.create(null),this._textEditorsMap=Object.create(null),this._activeTextEditor=null,this._visibleEditors=[],this._editorPositionData=null,this._editorTracker=new h.MainThreadEditorsTracker(i,r),this._toDispose.push(this._editorTracker),this._toDispose.push(this._editorTracker.onTextEditorAdd(function(e){return s._onTextEditorAdd(e)})),this._toDispose.push(this._editorTracker.onTextEditorRemove(function(e){return s._onTextEditorRemove(e)})),this._toDispose.push(this._editorTracker.onDidUpdateTextEditors(function(){return s._updateActiveAndVisibleTextEditors()})),this._toDispose.push(this._editorTracker.onChangedFocusedTextEditor(function(e){return s._updateActiveAndVisibleTextEditors()})),this._toDispose.push(o.addListener2(f.EventType.EDITOR_INPUT_CHANGED,function(){return s._updateActiveAndVisibleTextEditors()})),this._toDispose.push(o.addListener2(f.EventType.EDITOR_POSITION_CHANGED,function(){return s._updateActiveAndVisibleTextEditors()}))}return e.prototype.dispose=function(){var e=this;Object.keys(this._textEditorsListenersMap).forEach(function(t){i.disposeAll(e._textEditorsListenersMap[t])}),this._textEditorsListenersMap=Object.create(null),this._toDispose=i.disposeAll(this._toDispose)},e.prototype._onTextEditorAdd=function(e){var t=this,n=e.getId(),i=[];i.push(e.onConfigurationChanged(function(e){t._proxy._acceptOptionsChanged(n,e)})),i.push(e.onSelectionChanged(function(e){t._proxy._acceptSelectionsChanged(n,e)})),this._proxy._acceptTextEditorAdd({id:n,document:e.getModel().getAssociatedResource(),options:e.getConfiguration(),selections:e.getSelections(),editorPosition:this._findEditorPosition(e)}),this._textEditorsListenersMap[n]=i,this._textEditorsMap[n]=e},e.prototype._onTextEditorRemove=function(e){var t=e.getId();i.disposeAll(this._textEditorsListenersMap[t]),delete this._textEditorsListenersMap[t],delete this._textEditorsMap[t],this._proxy._acceptTextEditorRemove(t)},e.prototype._updateActiveAndVisibleTextEditors=function(){var e=this._editorTracker.getVisibleTextEditorIds(),t=this._findActiveTextEditorId();t===this._activeTextEditor&&g.equals(this._visibleEditors,e,function(e,t){return e===t})||(this._activeTextEditor=t,this._visibleEditors=e,this._proxy._acceptActiveEditorAndVisibleEditors(this._activeTextEditor,this._visibleEditors));var n=this._getTextEditorPositionData();y.equals(this._editorPositionData,n)||(this._editorPositionData=n,this._proxy._acceptEditorPositionData(this._editorPositionData))},e.prototype._findActiveTextEditorId=function(){var e=this._editorTracker.getFocusedTextEditorId();if(e)return e;var t=this._workbenchEditorService.getActiveEditor();if(!t)return null;var n=t.getControl();return n&&"function"==typeof n.getEditorType?n.getEditorType()===c.EditorType.ICodeEditor?this._editorTracker.findTextEditorIdFor(n):this._editorTracker.findTextEditorIdFor(n.getModifiedEditor()):null},e.prototype._findEditorPosition=function(e){for(var t=0,n=this._workbenchEditorService.getVisibleEditors();t<n.length;t++){var i=n[t];if(e.matches(i))return i.position}},e.prototype._getTextEditorPositionData=function(){for(var e=Object.create(null),t=0,n=this._workbenchEditorService.getVisibleEditors();t<n.length;t++){var i=n[t],o=i.getControl();if(o&&"function"==typeof o.getEditorType&&o.getEditorType()===c.EditorType.ICodeEditor){var r=this._editorTracker.findTextEditorIdFor(o);r&&(e[r]=i.position)}}return e},e.prototype._tryShowTextDocument=function(e,t,n){var i=this,r={resource:e,options:{preserveFocus:n}};return this._workbenchEditorService.openEditor(r,t).then(function(e){return new o.TPromise(function(e){function t(){n.dispose(),clearTimeout(o),e(void 0)}var n,o;n=i._editorTracker.onDidUpdateTextEditors(function(){t()}),o=setTimeout(function(){t()},1e3)}).then(function(){for(var t in i._textEditorsMap)if(i._textEditorsMap[t].matches(e))return t})})},e.prototype._tryShowEditor=function(e,t){this._telemetryService.publicLog("api.deprecated",{"function":"TextEditor.show"});var n=this._textEditorsMap[e];if(n){var i=n.getModel();return this._workbenchEditorService.openEditor({resource:i.getAssociatedResource(),options:{preserveFocus:!1}},t).then(function(){})}},e.prototype._tryHideEditor=function(e){this._telemetryService.publicLog("api.deprecated",{"function":"TextEditor.hide"});var t=this._textEditorsMap[e];if(t)for(var n=this._workbenchEditorService.getVisibleEditors(),i=0,o=n;i<o.length;i++){var r=o[i];if(t.matches(r))return this._workbenchEditorService.closeEditor(r).then(function(){})}},e.prototype._trySetSelections=function(e,t){return this._textEditorsMap[e]?(this._textEditorsMap[e].setSelections(t),o.TPromise.as(null)):o.TPromise.wrapError("TextEditor disposed")},e.prototype._trySetDecorations=function(e,t,n){return this._textEditorsMap[e]?(this._textEditorsMap[e].setDecorations(t,n),o.TPromise.as(null)):o.TPromise.wrapError("TextEditor disposed")},e.prototype._tryRevealRange=function(e,t,n){return this._textEditorsMap[e]?void this._textEditorsMap[e].revealRange(t,n):o.TPromise.wrapError("TextEditor disposed")},e.prototype._trySetOptions=function(e,t){return this._textEditorsMap[e]?(this._textEditorsMap[e].setConfiguration(t),o.TPromise.as(null)):o.TPromise.wrapError("TextEditor disposed")},e.prototype._tryApplyEdits=function(e,t,n,i){return this._textEditorsMap[e]?o.TPromise.as(this._textEditorsMap[e].applyEdits(t,n,i)):o.TPromise.wrapError("TextEditor disposed")},e.prototype._registerTextEditorDecorationType=function(e,t){this._editorTracker.registerTextEditorDecorationType(e,t)},e.prototype._removeTextEditorDecorationType=function(e){this._editorTracker.removeTextEditorDecorationType(e)},e=__decorate([r.Remotable.MainContext("MainThreadEditors"),__param(0,r.IThreadService),__param(1,l.IWorkbenchEditorService),__param(2,m.ITelemetryService),__param(3,u.ICodeEditorService),__param(4,v.IEventService),__param(5,d.IModelService)],e)}();t.MainThreadEditors=k});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostCommands",["require","exports","vs/platform/thread/common/thread","vs/base/common/types","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybindingService","vs/base/common/winjs.base","vs/workbench/api/node/extHostEditors","vs/workbench/api/node/extHostTypes","vs/workbench/api/node/extHostTypeConverters","vs/base/common/objects"],function(e,t,n,i,o,r,s,a,c,u,l){"use strict";function d(e){if("string"==typeof e)return e;var t=[e.description];if(t.push("\n\n"),e.args)for(var n=0,i=e.args;n<i.length;n++){var o=i[n];t.push("* _"+o.name+"_ "+(o.description||"")+"\n")}return e.returns&&t.push("* _(returns)_ "+e.returns),t.push("\n\n"),t.join("")}var h=function(){function e(e){this._commands=Object.create(null),this._extHostEditors=e.getRemotable(a.ExtHostEditors),this._proxy=e.getRemotable(p)}return e.prototype.registerCommand=function(e,t,n,i){var o=this;if(!e.trim().length)throw new Error("invalid id");if(this._commands[e])throw new Error("command with id already exists");return this._commands[e]={callback:t,thisArg:n,description:i},this._proxy.$registerCommand(e),new c.Disposable(function(){return delete o._commands[e]})},e.prototype.executeCommand=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._commands[e]?this.$executeContributedCommand.apply(this,[e].concat(t)):(t=l.cloneAndChange(t,function(e){return e instanceof c.Position?u.fromPosition(e):e instanceof c.Range?u.fromRange(e):e instanceof c.Location?u.location.from(e):Array.isArray(e)?void 0:e}),this._proxy.$executeCommand(e,t))},e.prototype.$executeContributedCommand=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this._commands[e];if(!o)return Promise.reject("Contributed command '"+e+"' does not exist.");try{var r=o.callback,s=o.thisArg,a=o.description;if(a)for(var c=0;c<a.args.length;c++)i.validateConstraint(t[c],a.args[c].constraint);var u=r.apply(s,t);return Promise.resolve(u)}catch(l){return Promise.reject("Running the contributed command:'"+e+"' failed.")}},e.prototype.getCommands=function(e){return void 0===e&&(e=!1),this._proxy.$getCommands().then(function(t){return e&&(t=t.filter(function(e){return"_"!==e[0]})),t})},e.prototype.$getContributedCommandHandlerDescriptions=function(){var e=Object.create(null);for(var t in this._commands){var n=this._commands[t].description;n&&(e[t]=n)}return s.TPromise.as(e)},e=__decorate([n.Remotable.ExtHostContext("ExtHostCommands"),__param(0,n.IThreadService)],e)}();t.ExtHostCommands=h;var p=function(){function e(e,t){this._threadService=e,this._keybindingService=t,this._proxy=this._threadService.getRemotable(h)}return e.prototype.$registerCommand=function(e){var t=this;o.KeybindingsRegistry.registerCommandDesc({id:e,handler:function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=t._proxy).$executeContributedCommand.apply(r,[e].concat(i));var r},weight:void 0,context:void 0,win:void 0,mac:void 0,linux:void 0,primary:void 0,secondary:void 0})},e.prototype.$executeCommand=function(e,t){return this._keybindingService.executeCommand(e,t)},e.prototype.$getCommands=function(){return s.TPromise.as(Object.keys(o.KeybindingsRegistry.getCommands()))},e=__decorate([n.Remotable.MainContext("MainThreadCommands"),__param(0,n.IThreadService),__param(1,r.IKeybindingService)],e)}();t.MainThreadCommands=p,o.KeybindingsRegistry.registerCommandDesc({id:"_generateCommandsDocumentation",handler:function(e){return e.get(n.IThreadService).getRemotable(h).$getContributedCommandHandlerDescriptions().then(function(e){var t=o.KeybindingsRegistry.getCommands();for(var n in t){var i=t[n].description;i&&(e[n]=i)}var r=[];for(var n in e)r.push("`"+n+"` - "+d(e[n]));console.log(r.join("\n"))})},context:void 0,weight:o.KeybindingsRegistry.WEIGHT.builtinExtension(0),primary:void 0})}),define("vs/workbench/api/node/extHostApiCommands",["require","exports","vs/base/common/uri","vs/base/common/winjs.base","vs/workbench/api/node/extHostTypeConverters","vs/workbench/api/node/extHostTypes","vs/workbench/api/node/extHostCommands"],function(e,t,n,i,o,r,s){"use strict";function a(e){var t=e.getRemotable(s.ExtHostCommands);new c(t).registerCommands()}t.registerApiCommands=a;var c=function(){function e(e){this._disposables=[],this._commands=e}return e.prototype.registerCommands=function(){var e=this;this._register("vscode.executeWorkspaceSymbolProvider",this._executeWorkspaceSymbolProvider,{description:"Execute all workspace symbol provider.",args:[{name:"query",description:"Search string",constraint:String}],returns:"A promise that resolves to an array of SymbolInformation-instances."}),this._register("vscode.executeDefinitionProvider",this._executeDefinitionProvider,{description:"Execute all definition provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position of a symbol",constraint:r.Position}],returns:"A promise that resolves to an array of Location-instances."}),this._register("vscode.executeHoverProvider",this._executeHoverProvider,{description:"Execute all hover provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position of a symbol",constraint:r.Position}],returns:"A promise that resolves to an array of Hover-instances."}),this._register("vscode.executeDocumentHighlights",this._executeDocumentHighlights,{
description:"Execute document highlight provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position}],returns:"A promise that resolves to an array of DocumentHighlight-instances."}),this._register("vscode.executeReferenceProvider",this._executeReferenceProvider,{description:"Execute reference provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position}],returns:"A promise that resolves to an array of Location-instances."}),this._register("vscode.executeDocumentRenameProvider",this._executeDocumentRenameProvider,{description:"Execute rename provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position},{name:"newName",description:"The new symbol name",constraint:String}],returns:"A promise that resolves to a WorkspaceEdit."}),this._register("vscode.executeSignatureHelpProvider",this._executeSignatureHelpProvider,{description:"Execute signature help provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position}],returns:"A promise that resolves to SignatureHelp."}),this._register("vscode.executeDocumentSymbolProvider",this._executeDocumentSymbolProvider,{description:"Execute document symbol provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]}],returns:"A promise that resolves to an array of SymbolInformation-instances."}),this._register("vscode.executeCompletionItemProvider",this._executeCompletionItemProvider,{description:"Execute completion item provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position}],returns:"A promise that resolves to a CompletionList-instance."}),this._register("vscode.executeCodeActionProvider",this._executeCodeActionProvider,{description:"Execute code action provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"range",description:"Range in a text document",constraint:r.Range}],returns:"A promise that resolves to an array of CompletionItem-instances."}),this._register("vscode.executeCodeLensProvider",this._executeCodeLensProvider,{description:"Execute completion item provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]}],returns:"A promise that resolves to an array of Commands."}),this._register("vscode.executeFormatDocumentProvider",this._executeFormatDocumentProvider,{description:"Execute document format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."}),this._register("vscode.executeFormatRangeProvider",this._executeFormatRangeProvider,{description:"Execute range format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"range",description:"Range in a text document",constraint:r.Range},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."}),this._register("vscode.executeFormatOnTypeProvider",this._executeFormatOnTypeProvider,{description:"Execute document format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:r.Position},{name:"ch",description:"Character that got typed",constraint:String},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."}),this._register("vscode.previewHtml",function(t,n){return e._commands.executeCommand("_workbench.previewHtml",t,"number"==typeof n?o.fromViewColumn(n):void 0)},{description:"Preview an html document.",args:[{name:"uri",description:"Uri of the document to preview.",constraint:n["default"]},{name:"column",description:"(optional) Column in which to preview."}]})},e.prototype._register=function(e,t,n){var i=this._commands.registerCommand(e,t,this,n);this._disposables.push(i)},e.prototype._executeWorkspaceSymbolProvider=function(e){return this._commands.executeCommand("_executeWorkspaceSymbolProvider",{query:e}).then(function(e){return Array.isArray(e)?e.map(o.toSymbolInformation):void 0})},e.prototype._executeDefinitionProvider=function(e,t){var n={resource:e,position:t&&o.fromPosition(t)};return this._commands.executeCommand("_executeDefinitionProvider",n).then(function(e){return Array.isArray(e)?e.map(o.location.to):void 0})},e.prototype._executeHoverProvider=function(e,t){var n={resource:e,position:t&&o.fromPosition(t)};return this._commands.executeCommand("_executeHoverProvider",n).then(function(e){return Array.isArray(e)?e.map(o.toHover):void 0})},e.prototype._executeDocumentHighlights=function(e,t){var n={resource:e,position:t&&o.fromPosition(t)};return this._commands.executeCommand("_executeDocumentHighlights",n).then(function(e){return Array.isArray(e)?e.map(o.toDocumentHighlight):void 0})},e.prototype._executeReferenceProvider=function(e,t){var n={resource:e,position:t&&o.fromPosition(t)};return this._commands.executeCommand("_executeDocumentHighlights",n).then(function(e){return Array.isArray(e)?e.map(o.location.to):void 0})},e.prototype._executeDocumentRenameProvider=function(e,t,n){var s={resource:e,position:t&&o.fromPosition(t),newName:n};return this._commands.executeCommand("_executeDocumentRenameProvider",s).then(function(e){if(e){if(e.rejectReason)return i.TPromise.wrapError(e.rejectReason);for(var t=new r.WorkspaceEdit,n=0,s=e.edits;n<s.length;n++){var a=s[n];t.replace(a.resource,o.toRange(a.range),a.newText)}return t}})},e.prototype._executeSignatureHelpProvider=function(e,t,n){var i={resource:e,position:t&&o.fromPosition(t),triggerCharacter:n};return this._commands.executeCommand("_executeSignatureHelpProvider",i).then(function(e){return e?o.SignatureHelp.to(e):void 0})},e.prototype._executeCompletionItemProvider=function(e,t,n){var i={resource:e,position:t&&o.fromPosition(t),triggerCharacter:n};return this._commands.executeCommand("_executeCompletionItemProvider",i).then(function(e){if(e){for(var n=[],i=void 0,s=0,a=e;s<a.length;s++)for(var c=a[s],u=0,l=c;u<l.length;u++){var d=l[u];i=d.incomplete||i;for(var h=0,p=d.suggestions;h<p.length;h++){var f=p[h],m=o.Suggest.to(d,t,f);n.push(m)}}return new r.CompletionList(n,i)}})},e.prototype._executeDocumentSymbolProvider=function(e){var t={resource:e};return this._commands.executeCommand("_executeDocumentSymbolProvider",t).then(function(e){return e&&Array.isArray(e.entries)?e.entries.map(o.SymbolInformation.fromOutlineEntry):void 0})},e.prototype._executeCodeActionProvider=function(e,t){var n={resource:e,range:o.fromRange(t)};return this._commands.executeCommand("_executeCodeActionProvider",n).then(function(e){return Array.isArray(e)?e.map(function(e){return o.Command.to(e.command)}):void 0})},e.prototype._executeCodeLensProvider=function(e){var t={resource:e};return this._commands.executeCommand("_executeCodeLensProvider",t).then(function(e){return Array.isArray(e)?e.map(function(e){return new r.CodeLens(o.toRange(e.symbol.range),o.Command.to(e.symbol.command))}):void 0})},e.prototype._executeFormatDocumentProvider=function(e,t){var n={resource:e,options:t};return this._commands.executeCommand("_executeFormatDocumentProvider",n).then(function(e){return Array.isArray(e)?e.map(function(e){return new r.TextEdit(o.toRange(e.range),e.text)}):void 0})},e.prototype._executeFormatRangeProvider=function(e,t,n){var i={resource:e,range:o.fromRange(t),options:n};return this._commands.executeCommand("_executeFormatRangeProvider",i).then(function(e){return Array.isArray(e)?e.map(function(e){return new r.TextEdit(o.toRange(e.range),e.text)}):void 0})},e.prototype._executeFormatOnTypeProvider=function(e,t,n,i){var s={resource:e,position:o.fromPosition(t),ch:n,options:i};return this._commands.executeCommand("_executeFormatOnTypeProvider",s).then(function(e){return Array.isArray(e)?e.map(function(e){return new r.TextEdit(o.toRange(e.range),e.text)}):void 0})},e}()});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHostLanguageFeatures",["require","exports","vs/editor/common/modes/modesFilters","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/platform/thread/common/thread","vs/editor/common/core/range","vs/workbench/api/node/extHostTypeConverters","vs/workbench/api/node/extHostTypes","vs/workbench/api/node/extHostDocuments","vs/platform/markers/common/markers","vs/workbench/api/node/extHostCommands","vs/editor/contrib/goToDeclaration/common/goToDeclaration","vs/editor/contrib/hover/common/hover","vs/editor/contrib/wordHighlighter/common/wordHighlighter","vs/editor/contrib/referenceSearch/common/referenceSearch","vs/editor/contrib/quickFix/common/quickFix","vs/editor/contrib/quickOpen/common/quickOpen","vs/workbench/parts/search/common/search","vs/editor/contrib/rename/common/rename","vs/editor/contrib/format/common/format","vs/editor/contrib/codelens/common/codelens","vs/editor/contrib/parameterHints/common/parameterHints","vs/editor/contrib/suggest/common/suggest","vs/base/common/async"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C){"use strict";var T=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.getOutline=function(e){var t=this,n=this._documents.getDocumentData(e).document;return C.asWinJsPromise(function(e){return t._provider.provideDocumentSymbols(n,e)}).then(function(e){return Array.isArray(e)?e.map(a.SymbolInformation.toOutlineEntry):void 0})},e}(),k=function(){function e(e,t,n){this._cache=Object.create(null),this._documents=e,this._commands=t,this._provider=n}return e.prototype.findCodeLensSymbols=function(e){var t=this,n=this._documents.getDocumentData(e).document,i=n.version,r=e.toString(),s=this._cache[r];if(s&&s.version===i)return new C.ShallowCancelThenPromise(s.data.then(function(e){return e.symbols}));var c=C.asWinJsPromise(function(e){return t._provider.provideCodeLenses(n,e)}).then(function(e){if(Array.isArray(e)){var n={lenses:e,symbols:[],disposables:[]};return e.forEach(function(e,i){n.symbols.push({id:String(i),range:a.fromRange(e.range),command:a.Command.from(e.command,{commands:t._commands,disposables:n.disposables})})}),n}});return this._cache[r]={version:i,data:c},new C.ShallowCancelThenPromise(c.then(function(e){return s&&s.data.then(function(e){return o.disposeAll(e.disposables)}),e&&e.symbols}))},e.prototype.resolveCodeLensSymbol=function(e,t){var n=this,o=this._cache[e.toString()];return o?o.data.then(function(e){if(e){var o=e.lenses[Number(t.id)];if(o){var r;return r="function"!=typeof n._provider.resolveCodeLens||o.isResolved?i.TPromise.as(o):C.asWinJsPromise(function(e){return n._provider.resolveCodeLens(o,e)}),r.then(function(i){o=i||o;var r=o.command;return r||(r={title:"<<MISSING COMMAND>>",command:"missing"}),t.command=a.Command.from(r,{commands:n._commands,disposables:e.disposables}),t})}}}):void 0},e}(),x=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.canFindDeclaration=function(){return!0},e.prototype.findDeclaration=function(t,n){var i=this,o=this._documents.getDocumentData(t).document,r=a.toPosition(n);return C.asWinJsPromise(function(e){return i._provider.provideDefinition(o,r,e)}).then(function(t){return Array.isArray(t)?t.map(e._convertLocation):t?e._convertLocation(t):void 0})},e._convertLocation=function(e){return e?{resource:e.uri,range:a.fromRange(e.range)}:void 0},e}(),I=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.computeInfo=function(e,t){var n=this,i=this._documents.getDocumentData(e).document,o=a.toPosition(t);return C.asWinJsPromise(function(e){return n._provider.provideHover(i,o,e)}).then(function(e){return e?(e.range||(e.range=i.getWordRangeAtPosition(o)),e.range||(e.range=new c.Range(o,o)),a.fromHover(e)):void 0})},e}(),D=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.findOccurrences=function(t,n){var i=this,o=this._documents.getDocumentData(t).document,r=a.toPosition(n);return C.asWinJsPromise(function(e){return i._provider.provideDocumentHighlights(o,r,e)}).then(function(t){return Array.isArray(t)?t.map(e._convertDocumentHighlight):void 0})},e._convertDocumentHighlight=function(e){return{range:a.fromRange(e.range),kind:c.DocumentHighlightKind[e.kind].toString().toLowerCase()}},e}(),A=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.canFindReferences=function(){return!0},e.prototype.findReferences=function(t,n,i){var o=this,r=this._documents.getDocumentData(t).document,s=a.toPosition(n);return C.asWinJsPromise(function(e){return o._provider.provideReferences(r,s,{includeDeclaration:i},e)}).then(function(t){return Array.isArray(t)?t.map(e._convertLocation):void 0})},e._convertLocation=function(e){return{resource:e.uri,range:a.fromRange(e.range)}},e}(),L=function(){function e(e,t,n){this._cachedCommands=[],this._documents=e,this._commands=t,this._provider=n}return e.prototype.getQuickFixes=function(e,t,n){var i=this,r=this._documents.getDocumentData(e).document,s=a.toRange(t),u=n.map(function(e){var t=new c.Diagnostic(a.toRange(e),e.message);return t.code=e.code,t.severity=a.toDiagnosticSeverty(e.severity),t});this._cachedCommands=o.disposeAll(this._cachedCommands);var l={commands:this._commands,disposables:this._cachedCommands};return C.asWinJsPromise(function(e){return i._provider.provideCodeActions(r,s,{diagnostics:u},e)}).then(function(e){return Array.isArray(e)?e.map(function(e,t){return{command:a.Command.from(e,l),score:t}}):void 0})},e.prototype.runQuickFixAction=function(e,t,n){var i=a.Command.to(n.command);return(o=this._commands).executeCommand.apply(o,[i.command].concat(i.arguments));var o},e}(),O=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.formatDocument=function(e,t){var n=this,i=this._documents.getDocumentData(e).document;return C.asWinJsPromise(function(e){return n._provider.provideDocumentFormattingEdits(i,t,e)}).then(function(e){return Array.isArray(e)?e.map(a.TextEdit.from):void 0})},e}(),M=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.formatRange=function(e,t,n){var i=this,o=this._documents.getDocumentData(e).document,r=a.toRange(t);return C.asWinJsPromise(function(e){return i._provider.provideDocumentRangeFormattingEdits(o,r,n,e)}).then(function(e){return Array.isArray(e)?e.map(a.TextEdit.from):void 0})},e}(),P=function(){function e(e,t){this.autoFormatTriggerCharacters=[],this._documents=e,this._provider=t}return e.prototype.formatAfterKeystroke=function(e,t,n,i){var o=this,r=this._documents.getDocumentData(e).document,s=a.toPosition(t);return C.asWinJsPromise(function(e){return o._provider.provideOnTypeFormattingEdits(r,s,n,i,e)}).then(function(e){return Array.isArray(e)?e.map(a.TextEdit.from):void 0})},e}(),R=function(){function e(e){this._provider=e}return e.prototype.getNavigateToItems=function(e){var t=this;return C.asWinJsPromise(function(n){return t._provider.provideWorkspaceSymbols(e,n)}).then(function(e){return Array.isArray(e)?e.map(a.fromSymbolInformation):void 0})},e}(),N=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.rename=function(e,t,n){var o=this,r=this._documents.getDocumentData(e).document,s=a.toPosition(t);return C.asWinJsPromise(function(e){return o._provider.provideRenameEdits(r,s,n,e)}).then(function(e){if(e){for(var t={currentName:void 0,edits:[]},n=0,i=e.entries();n<i.length;n++)for(var o=i[n],r=o[0],s=o[1],c=0,u=s;c<u.length;c++){var l=u[c];t.edits.push({resource:r,newText:l.newText,range:a.fromRange(l.range)})}return t}},function(e){return"string"==typeof e?{currentName:void 0,edits:void 0,rejectReason:e}:i.TPromise.wrapError(e)})},e}(),F=function(){function e(e,t){this._cache=Object.create(null),this._documents=e,this._provider=t}return e.prototype.suggest=function(e,t){var n=this,i=this._documents.getDocumentData(e).document,o=a.toPosition(t),r=i.getWordRangeAtPosition(o),s=e.toString();return delete this._cache[s],C.asWinJsPromise(function(e){return n._provider.provideCompletionItems(i,o,e)}).then(function(e){var t,u={suggestions:[],currentWord:r?i.getText(new c.Range(r.start.line,r.start.character,o.line,o.character)):""},l=[u];if(Array.isArray(e))t=new c.CompletionList(e);else{if(!(e instanceof c.CompletionList))return;t=e,u.incomplete=t.isIncomplete}for(var d=0;d<t.items.length;d++){var h=t.items[d],p=a.Suggest.from(h);if(h.textEdit){var f=h.textEdit.range;if(!f.isSingleLine||f.start.line!==o.line){console.warn("INVALID text edit, must be single line and on the same line");continue}p.codeSnippet=h.textEdit.newText,p.overwriteBefore=o.character-f.start.character,p.overwriteAfter=f.end.character-o.character,l.push({currentWord:i.getText(f),suggestions:[p],incomplete:t.isIncomplete})}else u.suggestions.push(p);p.id=String(d)}return n._cache[s]=t,l})},e.prototype.getSuggestionDetails=function(e,t,n){var o=this;if("function"!=typeof this._provider.resolveCompletionItem)return i.TPromise.as(n);var r=this._cache[e.toString()];if(!r)return i.TPromise.as(n);var s=r.items[Number(n.id)];return s?C.asWinJsPromise(function(e){return o._provider.resolveCompletionItem(s,e)}).then(function(e){return a.Suggest.from(e||s)}):i.TPromise.as(n)},e.prototype.getFilter=function(){throw new Error("illegal state")},e.prototype.getTriggerCharacters=function(){throw new Error("illegal state")},e.prototype.shouldShowEmptySuggestionList=function(){throw new Error("illegal state")},e.prototype.shouldAutotriggerSuggest=function(e,t,n){throw new Error("illegal state")},e}(),W=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.getParameterHints=function(e,t,n){var i=this,o=this._documents.getDocumentData(e).document,r=a.toPosition(t);return C.asWinJsPromise(function(e){return i._provider.provideSignatureHelp(o,r,e)}).then(function(e){return e instanceof c.SignatureHelp?a.SignatureHelp.from(e):void 0})},e.prototype.getParameterHintsTriggerCharacters=function(){throw new Error("illegal state")},e.prototype.shouldTriggerParameterHints=function(e,t){throw new Error("illegal state")},e}(),H=function(){function e(e){this._adapter=Object.create(null),this._proxy=e.getRemotable(V),this._documents=e.getRemotable(u.ExtHostModelService),this._commands=e.getRemotable(d.ExtHostCommands)}return e.prototype._createDisposable=function(e){var t=this;return new c.Disposable(function(){delete t._adapter[e],t._proxy.$unregister(e)})},e.prototype._nextHandle=function(){return e._handlePool++},e.prototype._withAdapter=function(e,t,n){var o=this._adapter[e];return o instanceof t?n(o):i.TPromise.wrapError(new Error("no adapter found"))},e.prototype.registerDocumentSymbolProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new T(this._documents,t),this._proxy.$registerOutlineSupport(n,e),this._createDisposable(n)},e.prototype.$getOutline=function(e,t){return this._withAdapter(e,T,function(e){return e.getOutline(t)})},e.prototype.registerCodeLensProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new k(this._documents,this._commands,t),this._proxy.$registerCodeLensSupport(n,e),this._createDisposable(n)},e.prototype.$findCodeLensSymbols=function(e,t){return this._withAdapter(e,k,function(e){return e.findCodeLensSymbols(t)})},e.prototype.$resolveCodeLensSymbol=function(e,t,n){return this._withAdapter(e,k,function(e){return e.resolveCodeLensSymbol(t,n)})},e.prototype.registerDefinitionProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new x(this._documents,t),this._proxy.$registerDeclaractionSupport(n,e),this._createDisposable(n)},e.prototype.$findDeclaration=function(e,t,n){return this._withAdapter(e,x,function(e){return e.findDeclaration(t,n)})},e.prototype.registerHoverProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new I(this._documents,t),this._proxy.$registerExtraInfoSupport(n,e),this._createDisposable(n)},e.prototype.$computeInfo=function(e,t,n){return this._withAdapter(e,I,function(e){return e.computeInfo(t,n)})},e.prototype.registerDocumentHighlightProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new D(this._documents,t),this._proxy.$registerOccurrencesSupport(n,e),this._createDisposable(n)},e.prototype.$findOccurrences=function(e,t,n){return this._withAdapter(e,D,function(e){return e.findOccurrences(t,n)})},e.prototype.registerReferenceProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new A(this._documents,t),this._proxy.$registerReferenceSupport(n,e),this._createDisposable(n)},e.prototype.$findReferences=function(e,t,n,i){return this._withAdapter(e,A,function(e){return e.findReferences(t,n,i)})},e.prototype.registerCodeActionProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new L(this._documents,this._commands,t),this._proxy.$registerQuickFixSupport(n,e),this._createDisposable(n)},e.prototype.$getQuickFixes=function(e,t,n,i){return this._withAdapter(e,L,function(e){return e.getQuickFixes(t,n,i)})},e.prototype.$runQuickFixAction=function(e,t,n,i){return this._withAdapter(e,L,function(e){return e.runQuickFixAction(t,n,i)})},e.prototype.registerDocumentFormattingEditProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new O(this._documents,t),this._proxy.$registerDocumentFormattingSupport(n,e),this._createDisposable(n)},e.prototype.$formatDocument=function(e,t,n){return this._withAdapter(e,O,function(e){return e.formatDocument(t,n)})},e.prototype.registerDocumentRangeFormattingEditProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new M(this._documents,t),this._proxy.$registerRangeFormattingSupport(n,e),this._createDisposable(n)},e.prototype.$formatRange=function(e,t,n,i){return this._withAdapter(e,M,function(e){return e.formatRange(t,n,i)})},e.prototype.registerOnTypeFormattingEditProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new P(this._documents,t),this._proxy.$registerOnTypeFormattingSupport(i,e,n),this._createDisposable(i)},e.prototype.$formatAfterKeystroke=function(e,t,n,i,o){return this._withAdapter(e,P,function(e){return e.formatAfterKeystroke(t,n,i,o)})},e.prototype.registerWorkspaceSymbolProvider=function(e){var t=this._nextHandle();return this._adapter[t]=new R(e),this._proxy.$registerNavigateTypeSupport(t),this._createDisposable(t)},e.prototype.$getNavigateToItems=function(e,t){return this._withAdapter(e,R,function(e){return e.getNavigateToItems(t)})},e.prototype.registerRenameProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new N(this._documents,t),this._proxy.$registerRenameSupport(n,e),this._createDisposable(n)},e.prototype.$rename=function(e,t,n,i){return this._withAdapter(e,N,function(e){return e.rename(t,n,i)})},e.prototype.registerCompletionItemProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new F(this._documents,t),this._proxy.$registerSuggestSupport(i,e,n),this._createDisposable(i)},e.prototype.$suggest=function(e,t,n){return this._withAdapter(e,F,function(e){return e.suggest(t,n)})},e.prototype.$getSuggestionDetails=function(e,t,n,i){return this._withAdapter(e,F,function(e){return e.getSuggestionDetails(t,n,i)})},e.prototype.registerSignatureHelpProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new W(this._documents,t),this._proxy.$registerParameterHintsSupport(i,e,n),this._createDisposable(i)},e.prototype.$getParameterHints=function(e,t,n,i){return this._withAdapter(e,W,function(e){return e.getParameterHints(t,n,i)})},e._handlePool=0,e=__decorate([r.Remotable.ExtHostContext("ExtHostLanguageFeatures"),__param(0,r.IThreadService)],e)}();t.ExtHostLanguageFeatures=H;var V=function(){function e(e,t){this._registrations=Object.create(null),this._proxy=e.getRemotable(H),this._markerService=t}return e.prototype.$unregister=function(e){var t=this._registrations[e];t&&(t.dispose(),delete this._registrations[e])},e.prototype.$registerOutlineSupport=function(e,t){var n=this;this._registrations[e]=g.OutlineRegistry.register(t,{getOutline:function(t){return n._proxy.$getOutline(e,t)}})},e.prototype.$registerCodeLensSupport=function(e,t){var n=this;this._registrations[e]=S.CodeLensRegistry.register(t,{findCodeLensSymbols:function(t){return n._proxy.$findCodeLensSymbols(e,t)},resolveCodeLensSymbol:function(t,i){return n._proxy.$resolveCodeLensSymbol(e,t,i)}})},e.prototype.$registerDeclaractionSupport=function(e,t){var n=this;this._registrations[e]=h.DeclarationRegistry.register(t,{canFindDeclaration:function(){return!0},findDeclaration:function(t,i){return n._proxy.$findDeclaration(e,t,i)}})},e.prototype.$registerExtraInfoSupport=function(e,t){var n=this;this._registrations[e]=p.ExtraInfoRegistry.register(t,{computeInfo:function(t,i){return n._proxy.$computeInfo(e,t,i)}})},e.prototype.$registerOccurrencesSupport=function(e,t){var n=this;this._registrations[e]=f.OccurrencesRegistry.register(t,{findOccurrences:function(t,i){return n._proxy.$findOccurrences(e,t,i)}})},e.prototype.$registerReferenceSupport=function(e,t){var n=this;this._registrations[e]=m.ReferenceRegistry.register(t,{canFindReferences:function(){return!0},findReferences:function(t,i,o){return n._proxy.$findReferences(e,t,i,o)}})},e.prototype.$registerQuickFixSupport=function(e,t){var n=this;this._registrations[e]=v.QuickFixRegistry.register(t,{getQuickFixes:function(t,i){var o=[];return n._markerService.read({resource:t}).forEach(function(e){s.Range.lift(e).intersectRanges(i)&&o.push(e)}),n._proxy.$getQuickFixes(e,t,i,o)},runQuickFixAction:function(t,i,o){return n._proxy.$runQuickFixAction(e,t,i,o)}})},e.prototype.$registerDocumentFormattingSupport=function(e,t){var n=this;this._registrations[e]=b.FormatRegistry.register(t,{formatDocument:function(t,i){return n._proxy.$formatDocument(e,t,i)}})},e.prototype.$registerRangeFormattingSupport=function(e,t){var n=this;this._registrations[e]=b.FormatRegistry.register(t,{formatRange:function(t,i,o){return n._proxy.$formatRange(e,t,i,o)}})},e.prototype.$registerOnTypeFormattingSupport=function(e,t,n){var i=this;this._registrations[e]=b.FormatOnTypeRegistry.register(t,{autoFormatTriggerCharacters:n,formatAfterKeystroke:function(t,n,o,r){return i._proxy.$formatAfterKeystroke(e,t,n,o,r)}})},e.prototype.$registerNavigateTypeSupport=function(e){var t=this;this._registrations[e]=y.NavigateTypesSupportRegistry.register({getNavigateToItems:function(n){return t._proxy.$getNavigateToItems(e,n)}})},e.prototype.$registerRenameSupport=function(e,t){var n=this;this._registrations[e]=_.RenameRegistry.register(t,{rename:function(t,i,o){return n._proxy.$rename(e,t,i,o)}})},e.prototype.$registerSuggestSupport=function(e,t,i){var o=this;this._registrations[e]=w.SuggestRegistry.register(t,{suggest:function(t,n,i){return o._proxy.$suggest(e,t,n)},getSuggestionDetails:function(t,n,i){return o._proxy.$getSuggestionDetails(e,t,n,i)},getFilter:function(){return n.DefaultFilter},getTriggerCharacters:function(){return i},shouldShowEmptySuggestionList:function(){return!0},shouldAutotriggerSuggest:function(){return!0}})},e.prototype.$registerParameterHintsSupport=function(e,t,n){var i=this;this._registrations[e]=E.ParameterHintsRegistry.register(t,{getParameterHints:function(t,n,o){return i._proxy.$getParameterHints(e,t,n,o)},getParameterHintsTriggerCharacters:function(){return n},shouldTriggerParameterHints:function(e,t){return!0}})},e=__decorate([r.Remotable.MainContext("MainThreadLanguageFeatures"),__param(0,r.IThreadService),__param(1,l.IMarkerService)],e)}();t.MainThreadLanguageFeatures=V});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/node/extHost.api.impl",["require","exports","vs/base/common/event","vs/editor/common/modes/languageSelector","vs/base/common/platform","vs/base/common/strings","vs/platform/thread/common/thread","vs/base/common/errors","vs/workbench/api/node/extHostFileSystemEventService","vs/workbench/api/node/extHostDocuments","vs/workbench/api/node/extHostConfiguration","vs/workbench/api/node/extHostDiagnostics","vs/workbench/api/node/extHostWorkspace","vs/workbench/api/node/extHostQuickOpen","vs/workbench/api/node/extHostStatusBar","vs/workbench/api/node/extHostCommands","vs/workbench/api/node/extHostOutputService","vs/workbench/api/node/extHostMessageService","vs/workbench/api/node/extHostEditors","vs/workbench/api/node/extHostLanguages","vs/workbench/api/node/extHostLanguageFeatures","vs/workbench/api/node/extHostApiCommands","vs/workbench/api/node/extHostTypes","vs/editor/common/modes","vs/editor/common/services/modeService","vs/base/common/uri","vs/base/common/severity","vs/editor/common/editorCommon","vs/platform/extensions/common/extensions","vs/platform/extensions/common/extensionsRegistry","vs/platform/workspace/common/workspace","vs/base/common/cancellation","vs/workbench/api/node/mainThreadEditors","vs/base/common/paths","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P){"use strict";function R(t){var n=e.__$__nodeRequire("module"),i=n._load;n._load=function(e,n,o){return"vscode"===e?t:i.apply(this,arguments)},define("vscode",[],t)}var N=function(){function e(e,t,r,s){var C=this;this._threadService=e,this._proxy=e.getRemotable(W),this.version=r.getConfiguration().env.version,this.Uri=T["default"],this.Location=E.Location,this.Diagnostic=E.Diagnostic,this.DiagnosticSeverity=E.DiagnosticSeverity,this.EventEmitter=n.Emitter,this.Disposable=E.Disposable,this.TextEdit=E.TextEdit,this.WorkspaceEdit=E.WorkspaceEdit,this.Position=E.Position,this.Range=E.Range,this.Selection=E.Selection,this.CancellationTokenSource=L.CancellationTokenSource,this.Hover=E.Hover,this.SymbolKind=E.SymbolKind,this.SymbolInformation=E.SymbolInformation,this.DocumentHighlightKind=E.DocumentHighlightKind,this.DocumentHighlight=E.DocumentHighlight,this.CodeLens=E.CodeLens,this.ParameterInformation=E.ParameterInformation,this.SignatureInformation=E.SignatureInformation,this.SignatureHelp=E.SignatureHelp,this.CompletionItem=E.CompletionItem,this.CompletionItemKind=E.CompletionItemKind,this.CompletionList=E.CompletionList,this.ViewColumn=E.ViewColumn,this.StatusBarAlignment=E.StatusBarAlignment,this.IndentAction=w.IndentAction,this.OverviewRulerLane=x.OverviewRulerLane,this.TextEditorRevealType=O.TextEditorRevealType,this.EndOfLine=E.EndOfLine,this.TextEditorCursorStyle=x.TextEditorCursorStyle,a.setUnexpectedErrorHandler(function(e){C._proxy.onUnexpectedExtHostError(a.transformErrorForSerialization(e))});var I,A=this._threadService.getRemotable(m.ExtHostCommands),M=this._threadService.getRemotable(y.ExtHostEditors),P=new g.ExtHostMessageService(this._threadService,this.commands),N=this._threadService.getRemotable(p.ExtHostQuickOpen),H=new f.ExtHostStatusBar(this._threadService),V=new v.ExtHostOutputService(this._threadService);
this.env=Object.freeze({get machineId(){return I.machineId},get sessionId(){return I.sessionId},get language(){return o.language}}),s.getTelemetryInfo().then(function(e){return I=e},a.onUnexpectedError),this.commands={registerCommand:function(e,t,n){return A.registerCommand(e,t,n)},registerTextEditorCommand:function(e,t,n){var i=n?t.bind(n):t;return A.registerCommand(e,function(){var t=M.getActiveTextEditor();return t?void t.edit(function(e){i(t,e)}).then(function(t){t||console.warn("Edits from command "+e+" were not applied.")},function(t){console.warn("An error occured while running command "+e,t)}):void console.warn("Cannot execute "+e+" because there is no active text editor.")})},executeCommand:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return A.executeCommand.apply(A,[e].concat(t))},getCommands:function(e){return void 0===e&&(e=!1),A.getCommands(e)}},this.window={get activeTextEditor(){return M.getActiveTextEditor()},get visibleTextEditors(){return M.getVisibleTextEditors()},showTextDocument:function(e,t,n){return M.showTextDocument(e,t,n)},createTextEditorDecorationType:function(e){return M.createTextEditorDecorationType(e)},onDidChangeActiveTextEditor:M.onDidChangeActiveTextEditor.bind(M),onDidChangeTextEditorSelection:function(e,t,n){return M.onDidChangeTextEditorSelection(e,t,n)},onDidChangeTextEditorOptions:function(e,t,n){return M.onDidChangeTextEditorOptions(e,t,n)},onDidChangeTextEditorViewColumn:function(e,t,n){return M.onDidChangeTextEditorViewColumn(e,t,n)},showInformationMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return P.showMessage(k["default"].Info,e,t)},showWarningMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return P.showMessage(k["default"].Warning,e,t)},showErrorMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return P.showMessage(k["default"].Error,e,t)},showQuickPick:function(e,t){return N.show(e,t)},showInputBox:N.input.bind(N),createStatusBarItem:function(e,t){return H.createStatusBarEntry(e,t)},setStatusBarMessage:function(e,t){return H.setStatusBarMessage(e,t)},createOutputChannel:function(e){return V.createOutputChannel(e)}};var K=r.getWorkspace()?r.getWorkspace().resource.fsPath:void 0,B=e.getRemotable(c.ExtHostFileSystemEventService),U=new h.ExtHostWorkspace(this._threadService,K),z=this._threadService.getRemotable(u.ExtHostModelService);this.workspace=Object.freeze({get rootPath(){return U.getPath()},set rootPath(e){throw a.readonly()},asRelativePath:function(e){return U.getRelativePath(e)},findFiles:function(e,t,n,i){return U.findFiles(e,t,n,i)},saveAll:function(e){return U.saveAll(e)},applyEdit:function(e){return U.appyEdit(e)},createFileSystemWatcher:function(e,t,n,i){return B.createFileSystemWatcher(e,t,n,i)},get textDocuments(){return z.getAllDocumentData().map(function(e){return e.document})},set textDocuments(e){throw a.readonly()},openTextDocument:function(e){var t;if("string"==typeof e)t=T["default"].file(e);else{if(!(e instanceof T["default"]))throw new Error("illegal argument - uriOrFileName");t=e}return z.ensureDocumentData(t).then(function(){var e=z.getDocumentData(t);return e&&e.document})},registerTextDocumentContentProvider:function(e,t){return z.registerTextDocumentContentProvider(e,t)},onDidOpenTextDocument:function(e,t,n){return z.onDidAddDocument(e,t,n)},onDidCloseTextDocument:function(e,t,n){return z.onDidRemoveDocument(e,t,n)},onDidChangeTextDocument:function(e,t,n){return z.onDidChangeDocument(e,t,n)},onDidSaveTextDocument:function(e,t,n){return z.onDidSaveDocument(e,t,n)},onDidChangeConfiguration:function(e,t,n){return Y.onDidChangeConfiguration(e,t,n)},getConfiguration:function(e){return Y.getConfiguration(e)}}),S.registerApiCommands(e);var j=new _.ExtHostLanguages(this._threadService),q=new d.ExtHostDiagnostics(this._threadService),G=e.getRemotable(b.ExtHostLanguageFeatures);this.languages={createDiagnosticCollection:function(e){return q.createDiagnosticCollection(e)},getLanguages:function(){return j.getLanguages()},match:function(e,t){return i.score(e,t.uri,t.languageId)},registerCodeActionsProvider:function(e,t){return G.registerCodeActionProvider(e,t)},registerCodeLensProvider:function(e,t){return G.registerCodeLensProvider(e,t)},registerDefinitionProvider:function(e,t){return G.registerDefinitionProvider(e,t)},registerHoverProvider:function(e,t){return G.registerHoverProvider(e,t)},registerDocumentHighlightProvider:function(e,t){return G.registerDocumentHighlightProvider(e,t)},registerReferenceProvider:function(e,t){return G.registerReferenceProvider(e,t)},registerRenameProvider:function(e,t){return G.registerRenameProvider(e,t)},registerDocumentSymbolProvider:function(e,t){return G.registerDocumentSymbolProvider(e,t)},registerWorkspaceSymbolProvider:function(e){return G.registerWorkspaceSymbolProvider(e)},registerDocumentFormattingEditProvider:function(e,t){return G.registerDocumentFormattingEditProvider(e,t)},registerDocumentRangeFormattingEditProvider:function(e,t){return G.registerDocumentRangeFormattingEditProvider(e,t)},registerOnTypeFormattingEditProvider:function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return G.registerOnTypeFormattingEditProvider(e,t,[n].concat(i))},registerSignatureHelpProvider:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return G.registerSignatureHelpProvider(e,t,n)},registerCompletionItemProvider:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return G.registerCompletionItemProvider(e,t,n)},setLanguageConfiguration:function(e,t){return C._setLanguageConfiguration(e,t)}};var Y=e.getRemotable(l.ExtHostConfiguration);this.extensions={getExtension:function(e){var n=D.ExtensionsRegistry.getExtensionDescription(e);return n?new F(t,n):void 0},get all(){return D.ExtensionsRegistry.getAllExtensionDescriptions().map(function(e){return new F(t,e)})}},R(this)}return e.generateDisposeToken=function(){return String(++e._LAST_REGISTER_TOKEN)},e.prototype._disposableFromToken=function(e){var t=this;return new E.Disposable(function(){return t._proxy.disposeByToken(e)})},e.prototype._setLanguageConfiguration=function(e,t){var n=t.wordPattern;if(n&&r.regExpLeadsToEndlessLoop(n))throw new Error("Invalid language configuration: wordPattern '"+n+"' is not allowed to match the empty string.");return n?u.setWordDefinitionFor(e,n):u.setWordDefinitionFor(e,null),this.Modes_RichEditSupport_register(e,t)},e.prototype.Modes_RichEditSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_RichEditSupport_register(i,t,n),this._disposableFromToken(i)},e._LAST_REGISTER_TOKEN=0,e=__decorate([__param(0,s.IThreadService),__param(1,I.IExtensionService),__param(2,A.IWorkspaceContextService),__param(3,P.ITelemetryService)],e)}();t.ExtHostAPIImplementation=N;var F=function(){function e(e,t){this._extensionService=e,this.id=t.id,this.extensionPath=M.normalize(t.extensionFolderPath,!0),this.packageJSON=t}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._extensionService.isActivated(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exports",{get:function(){return this._extensionService.get(this.id)},enumerable:!0,configurable:!0}),e.prototype.activate=function(){var e=this;return this._extensionService.activateById(this.id).then(function(){return e.exports})},e}(),W=function(){function e(e){this._modeService=e,this._token2Dispose={}}return e.prototype.onUnexpectedExtHostError=function(e){a.onUnexpectedError(e)},e.prototype.disposeByToken=function(e){this._token2Dispose[e]&&(this._token2Dispose[e].dispose(),delete this._token2Dispose[e])},e.prototype.Modes_RichEditSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerRichEditSupport(t,n)},e=__decorate([s.Remotable.MainContext("MainProcessVSCodeAPIHelper"),__param(0,C.IModeService)],e)}();t.MainProcessVSCodeAPIHelper=W});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/telemetry/node/nodeAppInsightsTelemetryAppender",["require","exports","vs/base/common/errors","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace","vs/base/node/aiAdapter","winreg","os"],function(e,t,n,i,o,r,s,a){"use strict";var c=function(){function e(){}return e.sqmUserId="telemetry.sqm.userId",e.sqmMachineId="telemetry.sqm.machineId",e.lastSessionDate="telemetry.lastSessionDate",e.firstSessionDate="telemetry.firstSessionDate",e}(),u=function(){function e(t,n,i){this.commonProperties={},this.commonMetrics={},this.contextService=n,this.storageService=t;var o=this.contextService.getConfiguration().env.aiConfig,s=o?o.key:null,a=o?o.asimovKey:null;return i?(this.appInsights=i,void(a&&(this.appInsightsVortex=i))):(s&&(this.appInsights=new r.AIAdapter(s,e.EVENT_NAME_PREFIX)),a&&(this.appInsightsVortex=new r.AIAdapter(a,e.EVENT_NAME_PREFIX)),void this.loadAddtionaProperties())}return e.prototype.loadAddtionaProperties=function(){var t=this;if(process.versions&&(this.commonProperties["version.shell"]=process.versions.electron,this.commonProperties["version.renderer"]=process.versions.chrome),"win32"===process.platform){var n=this.storageService.get(c.sqmUserId);n?this.commonProperties["sqm.userid"]=n:this.getWinRegKeyData(e.SQM_KEY,"UserId",s.HKCU,function(e,n){!e&&n&&(t.commonProperties["sqm.userid"]=n,t.storageService.store(c.sqmUserId,n))});var i=this.storageService.get(c.sqmMachineId);i?this.commonProperties["sqm.machineid"]=i:this.getWinRegKeyData(e.SQM_KEY,"MachineId",s.HKLM,function(e,n){!e&&n&&(t.commonProperties["sqm.machineid"]=n,t.storageService.store(c.sqmMachineId,n))})}var o=this.storageService.get(c.firstSessionDate);o||(o=(new Date).toUTCString(),this.storageService.store(c.firstSessionDate,o)),this.commonProperties.firstSessionDate=o;var r=this.storageService.get(c.lastSessionDate);r?(this.commonMetrics.isNewSession=0,this.commonProperties.lastSessionDate=r):this.commonMetrics.isNewSession=1,this.storageService.store(c.lastSessionDate,(new Date).toUTCString()),a&&(this.commonProperties.osVersion=a.release())},e.prototype.getWinRegKeyData=function(e,t,i,o){if("win32"===process.platform)try{var r=new s({hive:i,key:e});r.get(t,function(e,t){e||!t?o(e,null):o(null,t.value)})}catch(a){n.onUnexpectedError(a),o(a,null)}else o(null,null)},e.prototype.log=function(e,t){t=t||Object.create(null),t=this.addCommonMetrics(t),t=this.addCommonProperties(t),this.appInsights&&this.appInsights.log(e,t),this.appInsightsVortex&&this.appInsightsVortex.log(e,t)},e.prototype.dispose=function(){this.appInsights&&this.appInsights.dispose(),this.appInsightsVortex&&this.appInsightsVortex.dispose(),this.appInsights=null,this.appInsightsVortex=null},e.prototype.addCommonProperties=function(e){for(var t in this.commonProperties)e["common."+t]=this.commonProperties[t];return e},e.prototype.addCommonMetrics=function(e){for(var t in this.commonMetrics)e["common."+t]=this.commonMetrics[t];return e},e.EVENT_NAME_PREFIX="monacoworkbench",e.SQM_KEY="\\Software\\Microsoft\\SQMClient",e=__decorate([__param(0,i.IStorageService),__param(1,o.IWorkspaceContextService)],e)}();t.NodeAppInsightsTelemetryAppender=u}),define("vs/workbench/parts/telemetry/node/appInsights.telemetry.contribution",["require","exports","vs/platform/platform","vs/platform/telemetry/common/abstractTelemetryService","vs/workbench/parts/telemetry/node/nodeAppInsightsTelemetryAppender","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,o,r){"use strict";var s=r.createSyncDescriptor(o.NodeAppInsightsTelemetryAppender);n.Registry.as(i.Extenstions.TelemetryAppenders).registerTelemetryAppenderDescriptor(s)}),define("vs/base/node/zip",["require","exports","vs/nls!vs/base/node/zip","path","fs","vs/base/common/async","vs/base/node/pfs","vs/base/common/winjs.base","yauzl"],function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){var t=e.externalFileAttributes>>16||33188;return[448,56,7].map(function(e){return t&e}).reduce(function(e,t){return e+t},61440&t)}function l(e,t,n,c){var l=t.fileName.replace(c.sourcePathRegex,""),d=i.dirname(l),h=i.join(n,d),p=i.join(n,l),f=u(t);return r.ninvoke(e,e.openReadStream,t).then(function(e){return s.mkdirp(h).then(function(){return new a.Promise(function(t,n){var i=o.createWriteStream(p,{mode:f});i.once("finish",function(){return t(null)}),i.once("error",n),e.once("error",n),e.pipe(i)})})})}function d(e,t,n){return new a.Promise(function(i,o){var r=[];e.once("error",o),e.on("entry",function(i){n.sourcePathRegex.test(i.fileName)&&r.push(l(e,i,t,n))}),e.once("close",function(){return a.Promise.join(r).done(i,o)})})}function h(e,t,n){var i=new RegExp(n.sourcePath?"^"+n.sourcePath:""),o=r.nfcall(c.open,e);return n.overwrite&&(o=o.then(function(e){return s.rimraf(t),e})),o.then(function(e){return d(e,t,{sourcePathRegex:i})})}function p(e,t){return r.nfcall(c.open,e).then(function(e){return new a.TPromise(function(i,o){e.on("entry",function(n){n.fileName===t&&r.ninvoke(e,e.openReadStream,n).done(function(e){return i(e)},function(e){return o(e)})}),e.once("close",function(){return o(new Error(n.localize(0,null,t)))})})})}function f(e,t){return p(e,t).then(function(e){return new a.TPromise(function(t,n){var i=[];e.once("error",n),e.on("data",function(e){return i.push(e)}),e.on("end",function(){return t(Buffer.concat(i))})})})}t.extract=h,t.buffer=f});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=3>r?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>r?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/node/extensionsService",["require","exports","vs/nls!vs/workbench/parts/extensions/node/extensionsService","os","path","vs/base/common/types","vs/base/common/service","vs/base/node/pfs","vs/base/common/objects","vs/base/common/arrays","vs/base/node/zip","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/base/node/request","vs/base/node/proxy","vs/workbench/services/workspace/common/contextService","vs/base/common/async","vs/base/common/event","vs/workbench/node/userSettings","semver","vs/base/common/collections","vs/platform/extensions/node/extensionValidator"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S){"use strict";function E(e){return new d.Promise(function(t,i){try{t(JSON.parse(e))}catch(o){i(new Error(n.localize(0,null)))}})}function w(e,t,i){return void 0===i&&(i=t&&t.version),l.buffer(e,"extension/package.json").then(function(e){return E(e.toString("utf8"))}).then(function(e){if(t){if(t.name!==e.name)return d.Promise.wrapError(Error(n.localize(1,null)));if(t.publisher!==e.publisher)return d.Promise.wrapError(Error(n.localize(2,null)));if(i!==e.version)return d.Promise.wrapError(Error(n.localize(3,null)))}return d.TPromise.as(e)})}function C(e,t,n){var i={name:e.name,displayName:e.displayName||e.name,publisher:e.publisher,version:e.version,engines:{vscode:e.engines.vscode},description:e.description||""};return t&&(i.galleryInformation=t),n&&(i.path=n),i}function T(e,t){return void 0===t&&(t=e.version),e.publisher+"."+e.name+"-"+t}var k=function(){function e(e){this.contextService=e,this.serviceId=h.IExtensionsService,this._onInstallExtension=new g.Emitter,this.onInstallExtension=this._onInstallExtension.event,this._onDidInstallExtension=new g.Emitter,this.onDidInstallExtension=this._onDidInstallExtension.event,this._onUninstallExtension=new g.Emitter,this.onUninstallExtension=this._onUninstallExtension.event,this._onDidUninstallExtension=new g.Emitter,this.onDidUninstallExtension=this._onDidUninstallExtension.event;var t=e.getConfiguration().env;this.extensionsPath=t.userExtensionsHome,this.obsoletePath=o.join(this.extensionsPath,".obsolete"),this.obsoleteFileLimiter=new v.Limiter(1)}return e.prototype.install=function(e){var t=this;if(r.isString(e))return this.installFromZip(e);var i=e;return this.isObsolete(i).then(function(o){return o?d.TPromise.wrapError(new Error(n.localize(4,null,i.name))):t.installFromGallery(e)})},e.prototype.installFromGallery=function(e){var t=this,r=e.galleryInformation;return r?(this._onInstallExtension.fire(e),this.getLastValidExtensionVersion(e,e.galleryInformation.versions).then(function(n){var s=n.version,u=n.downloadUrl,h=n.downloadHeaders,f=o.join(i.tmpdir(),r.id),m=o.join(t.extensionsPath,T(e,s)),v=o.join(m,"package.json");return t.request(u).then(function(e){return c.assign(e,{headers:h})}).then(function(e){return p.download(f,e)}).then(function(){return w(f,e,s)}).then(function(e){return l.extract(f,m,{sourcePath:"extension",overwrite:!0}).then(function(){return e})}).then(function(e){return c.assign({__metadata:r},e)}).then(function(e){return a.writeFile(v,JSON.stringify(e,null,"	"))}).then(function(){return t._onDidInstallExtension.fire({extension:e}),e}).then(null,function(n){return t._onDidInstallExtension.fire({extension:e,error:n}),d.TPromise.wrapError(n)})})):d.TPromise.wrapError(new Error(n.localize(5,null)))},e.prototype.getLastValidExtensionVersion=function(e,t){var i=this;if(!t.length)return d.TPromise.wrapError(new Error(n.localize(6,null,e.displayName)));var o=t[0];return this.request(o.manifestUrl).then(function(e){return p.json(e)}).then(function(n){var r=i.contextService.getConfiguration().env.version,s={isBuiltin:!1,engines:{vscode:n.engines.vscode},main:n.main};return S.isValidExtensionVersion(r,s,[])?o:i.getLastValidExtensionVersion(e,t.slice(1))})},e.prototype.installFromZip=function(e){var t=this;return w(e).then(function(n){var i=o.join(t.extensionsPath,T(n));return t._onInstallExtension.fire(n),l.extract(e,i,{sourcePath:"extension",overwrite:!0}).then(function(){return C(n,n.__metadata,i)}).then(function(e){return t._onDidInstallExtension.fire({extension:e}),e})})},e.prototype.uninstall=function(e){var t=this,i=e.path||o.join(this.extensionsPath,T(e));return a.exists(i).then(function(e){return e?null:d.Promise.wrapError(new Error(n.localize(7,null)))}).then(function(){return t._onUninstallExtension.fire(e)}).then(function(){return t.setObsolete(e)}).then(function(){return a.rimraf(i)}).then(function(){return t.unsetObsolete(e)}).then(function(){return t._onDidUninstallExtension.fire(e)})},e.prototype.getInstalled=function(e){void 0===e&&(e=!1);var t=this.getAllInstalled();return e?t:t.then(function(e){var t=b.values(b.groupBy(e,function(e){return e.publisher+"."+e.name}));return t.map(function(e){return e.sort(function(e,t){return _.rcompare(e.version,t.version)})[0]})})},e.prototype.getAllInstalled=function(){var e=this,t=new v.Limiter(10);return this.getObsoleteExtensions().then(function(n){return a.readdir(e.extensionsPath).then(function(e){return e.filter(function(e){return!n[e]})}).then(function(n){return d.Promise.join(n.map(function(n){var i=o.join(e.extensionsPath,n);return t.queue(function(){return a.readFile(o.join(i,"package.json"),"utf8").then(function(e){return E(e)}).then(function(e){return C(e,e.__metadata,i)}).then(null,function(){return null})})}))}).then(function(e){return e.filter(function(e){return!!e})})})},e.prototype.removeDeprecatedExtensions=function(){var e=this,t=this.getOutdatedExtensions().then(function(e){return e.map(function(e){return T(e)})}),n=this.getObsoleteExtensions().then(function(e){return Object.keys(e)});return d.TPromise.join([t,n]).then(function(e){return u.flatten(e)}).then(function(t){return d.TPromise.join(t.map(function(t){return a.rimraf(o.join(e.extensionsPath,t)).then(function(){return e.withObsoleteExtensions(function(e){return delete e[t]})})}))})},e.prototype.getOutdatedExtensions=function(){return this.getAllInstalled().then(function(e){var t=b.values(b.groupBy(e,function(e){return e.publisher+"."+e.name})),n=u.flatten(t.map(function(e){return e.sort(function(e,t){return _.rcompare(e.version,t.version)}).slice(1)}));return n.filter(function(e){return!!e.path})})},e.prototype.isObsolete=function(e){var t=T(e);return this.withObsoleteExtensions(function(e){return!!e[t]})},e.prototype.setObsolete=function(e){var t=T(e);return this.withObsoleteExtensions(function(e){return c.assign(e,(n={},n[t]=!0,n));var n})},e.prototype.unsetObsolete=function(e){var t=T(e);return this.withObsoleteExtensions(function(e){return delete e[t]})},e.prototype.getObsoleteExtensions=function(){return this.withObsoleteExtensions(function(e){return e})},e.prototype.withObsoleteExtensions=function(e){var t=this;return this.obsoleteFileLimiter.queue(function(){var n=null;return a.readFile(t.obsoletePath,"utf8").then(null,function(e){return"ENOENT"===e.code?d.TPromise.as("{}"):d.TPromise.wrapError(e)}).then(function(e){return JSON.parse(e)}).then(function(t){return n=e(t),t}).then(function(e){if(0===Object.keys(e).length)return a.rimraf(t.obsoletePath);var n=JSON.stringify(e);return a.writeFile(t.obsoletePath,n)}).then(function(){return n})})},e.prototype.request=function(e){var t=d.TPromise.join([y.UserSettings.getValue(this.contextService,"http.proxy"),y.UserSettings.getValue(this.contextService,"http.proxyStrictSSL")]);return t.then(function(t){var n=t[0],i=t[1],o=f.getProxyAgent(e,{proxyUrl:n,strictSSL:i});return{url:e,agent:o,strictSSL:i}})},__decorate([s.ServiceEvent],e.prototype,"onInstallExtension",void 0),__decorate([s.ServiceEvent],e.prototype,"onDidInstallExtension",void 0),__decorate([s.ServiceEvent],e.prototype,"onUninstallExtension",void 0),__decorate([s.ServiceEvent],e.prototype,"onDidUninstallExtension",void 0),e=__decorate([__param(0,m.IWorkspaceContextService)],e)}();t.ExtensionsService=k}),define("vs/workbench/services/request/node/rawHttpService",["require","exports","vs/base/common/winjs.base","vs/base/common/objects","vs/base/node/request","vs/base/node/proxy","zlib"],function(e,t,n,i,o,r,s){"use strict";function a(e,t){u=e,l=t}function c(e){var t=r.getProxyAgent(e.url,{proxyUrl:u,strictSSL:l});return e=i.assign({},e),e=i.assign(e,{agent:t,strictSSL:l}),o.request(e).then(function(i){return new n.TPromise(function(t,n,o){var r=i.res,a=r;"gzip"===r.headers["content-encoding"]&&(a=a.pipe(s.createGunzip()));var u=[];a.on("data",function(e){return u.push(e)}),a.on("end",function(){var i=r.statusCode;if(e.followRedirects>0&&(i>=300&&303>=i||307===i)){var s=r.headers.location;if(s){var a={type:e.type,url:s,user:e.user,password:e.password,responseType:e.responseType,headers:e.headers,timeout:e.timeout,followRedirects:e.followRedirects-1,data:e.data};return void c(a).done(t,n,o)}}var l={responseText:u.join(""),status:i,getResponseHeader:function(e){return r.headers[e]},readyState:4};i>=200&&300>i||1223===i?t(l):n(l)})},function(i){var o;return o=t?"Unable to to connect to "+e.url+" through a proxy . Error: "+i.message:"Unable to to connect to "+e.url+". Error: "+i.message,n.TPromise.wrapError({responseText:o,status:404})})})}var u=null,l=!0;t.configure=a,t.xhr=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/request/node/requestService",["require","exports","vs/base/common/winjs.base","vs/platform/configuration/common/configurationRegistry","vs/base/common/strings","vs/nls!vs/workbench/services/request/node/requestService","vs/base/common/lifecycle","vs/base/common/timer","vs/platform/platform","vs/base/common/async","vs/platform/configuration/common/configuration","vs/platform/request/common/baseRequestService","vs/workbench/services/request/node/rawHttpService"],function(e,t,n,i,o,r,s,a,c,u,l,d,h){"use strict";var p=function(e){function t(t,n,i){var o=this;e.call(this,t,i),this.configurationService=n,this.callOnDispose=[],this.callOnDispose.push(n.addListener(l.ConfigurationServiceEventTypes.UPDATED,function(e){o.rawHttpServicePromise.then(function(t){t.configure(e.config.http&&e.config.http.proxy,e.config.http.proxyStrictSSL)})}))}return __extends(t,e),Object.defineProperty(t.prototype,"rawHttpServicePromise",{get:function(){return this._rawHttpServicePromise||(this._rawHttpServicePromise=this.configurationService.loadConfiguration().then(function(e){return h.configure(e.http&&e.http.proxy,e.http.proxyStrictSSL),h})),this._rawHttpServicePromise},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){s.cAll(this.callOnDispose)},t.prototype.makeRequest=function(t){var i=t.url;if(!i)throw new Error("IRequestService.makeRequest: Url is required.");return o.startsWith(i,"file://")?n.xhr(t).then(null,function(e){return 0===e.status&&e.responseText?e:n.Promise.wrapError({status:404,responseText:r.localize(0,null)})}):e.prototype.makeRequest.call(this,t)},t.prototype.makeCrossOriginRequest=function(e){var t=a.nullEvent;return this.rawHttpServicePromise.then(function(n){return u.always(n.xhr(e),function(e){t.data&&(t.data.status=e.status),t.stop()})})},t}(d.BaseRequestService);t.RequestService=p;var f=c.Registry.as(i.Extensions.Configuration);f.registerConfiguration({id:"http",order:9,title:r.localize(1,null),type:"object",properties:{"http.proxy":{type:"string",description:r.localize(2,null)},"http.proxyStrictSSL":{type:"boolean","default":!0,description:r.localize(3,null)}}})}),define("vs/workbench/electron-browser/shell",["require","exports","vs/nls!vs/workbench/electron-browser/shell","vs/base/browser/builder","vs/base/common/objects","vs/base/common/strings","vs/base/browser/dom","vs/base/browser/ui/aria/aria","vs/base/common/lifecycle","vs/base/common/errors","vs/platform/contextview/browser/contextViewService","vs/workbench/services/contextview/electron-browser/contextmenuService","vs/workbench/common/constants","vs/base/common/timer","vs/workbench/browser/workbench","vs/workbench/common/storage","vs/platform/telemetry/common/telemetry","vs/platform/telemetry/electron-browser/electronTelemetryService","vs/workbench/electron-browser/integration","vs/workbench/electron-browser/update","vs/platform/telemetry/common/workspaceStats","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/message/electron-browser/messageService","vs/workbench/services/request/node/requestService","vs/platform/configuration/common/configuration","vs/workbench/services/configuration/node/configurationService","vs/workbench/services/files/electron-browser/fileService","vs/workbench/services/search/node/searchService","vs/workbench/services/lifecycle/electron-browser/lifecycleService","vs/workbench/services/keybinding/electron-browser/keybindingService","vs/workbench/services/thread/electron-browser/threadService","vs/platform/markers/common/markerService","vs/platform/actions/common/actions","vs/platform/actions/common/actionsService","vs/editor/common/services/modelService","vs/editor/common/services/modelServiceImpl","vs/editor/browser/services/codeEditorServiceImpl","vs/editor/common/services/codeEditorService","vs/editor/common/services/editorWorkerServiceImpl","vs/editor/common/services/editorWorkerService","vs/workbench/api/node/extHost.api.impl","vs/platform/extensions/common/nativeExtensionService","vs/workbench/api/node/extHostDocuments","vs/editor/node/textMate/TMSyntax","vs/editor/node/textMate/TMSnippets","vs/platform/jsonschemas/common/jsonValidationExtensionPoint","vs/editor/node/languageConfiguration","vs/workbench/api/node/extHostFileSystemEventService","vs/workbench/api/node/extHostQuickOpen","vs/workbench/api/node/extHostStatusBar","vs/workbench/api/node/extHostCommands","vs/platform/telemetry/common/abstractRemoteTelemetryService","vs/workbench/api/node/extHostDiagnostics","vs/workbench/api/node/extHostOutputService","vs/workbench/api/node/extHostMessageService","vs/workbench/api/node/extHostLanguages","vs/workbench/api/node/extHostEditors","vs/workbench/api/node/extHostWorkspace","vs/workbench/api/node/extHostConfiguration","vs/workbench/api/node/extHostLanguageFeatures","vs/platform/event/common/eventService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/storage/common/remotable.storage","vs/platform/instantiation/common/instantiationService","vs/platform/contextview/browser/contextView","vs/platform/event/common/event","vs/platform/files/common/files","vs/platform/keybinding/common/keybindingService","vs/platform/lifecycle/common/lifecycle","vs/platform/markers/common/markers","vs/platform/message/common/message","vs/platform/request/common/request","vs/platform/search/common/search","vs/platform/thread/common/thread","vs/platform/workspace/common/workspace","vs/platform/extensions/common/extensions","vs/editor/common/services/modeServiceImpl","vs/editor/common/services/modeService","vs/workbench/services/untitled/common/untitledEditorService","vs/workbench/electron-browser/crashReporter","vs/workbench/services/themes/common/themeService","vs/workbench/services/themes/node/themeService","vs/base/common/service","vs/base/node/service.net","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/node/extensionsService","vs/workbench/electron-browser/actions","vs/css!./media/shell","vs/css!vs/workbench/browser/media/vs-theme","vs/css!vs/workbench/browser/media/vs-dark-theme","vs/css!vs/workbench/browser/media/hc-black-theme"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,S,E,w,C,T,k,x,I,D,A,L,O,M,P,R,N,F,W,H,V,K,B,U,z,j,q,G,Y,$,X,Q,Z,J,ee,te,ne,ie,oe,re,se,ae,ce,ue,le,de,he,pe,fe,me,ve,ge,ye,_e,be,Se,Ee,we,Ce,Te,ke,xe,Ie,De,Ae,Le,Oe,Me){"use strict";var Pe=function(){function e(e,t,n,i){this.container=e,this.workspace=t,this.configuration=n,this.options=o.mixin({},i),this.toUnbind=[],this.previousErrorTime=0}return e.prototype.createContents=function(e){var t=this;a.setARIAContainer(document.body);var o=i.$(e).div(),r=this.initInstantiationService();if(this.configuration.env.crashReporter){var s=r.createInstance(ke.CrashReporter,this.configuration.env.version,this.configuration.env.commitHash);s.start(this.configuration.env.crashReporter)}var c=Ae.connect(process.env.VSCODE_SHARED_IPC_HOOK);c.done(function(e){e.onClose(function(){t.messageService.show(ge.Severity.Error,{message:n.localize(0,null),actions:[r.createInstance(Me.ReloadWindowAction,Me.ReloadWindowAction.ID,Me.ReloadWindowAction.LABEL)]})})},u.onUnexpectedError),r.addSingleton(Le.IExtensionsService,De.getService(c,"ExtensionService",Oe.ExtensionsService)),this.workbench=new f.Workbench(o.getHTMLElement(),this.workspace,this.configuration,this.options,r),this.workbench.startup({onServicesCreated:function(){t.initExtensionSystem()},onWorkbenchStarted:function(){t.onWorkbenchStarted()}}),this.workbench.getInstantiationService().createInstance(y.ElectronIntegration).integrate(this.container),this.workbench.getInstantiationService().createInstance(_.Update);var l=setTimeout(function(){console.warn("Workbench did not finish loading in 10 seconds, that might be a problem that should be reported.")},1e4);return this.workbench.joinCreation().then(function(){clearTimeout(l)}),o},e.prototype.onWorkbenchStarted=function(){var e={innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth};this.telemetryService.publicLog("workspaceLoad",{userAgent:navigator.userAgent,windowSize:e,emptyWorkbench:!this.contextService.getWorkspace(),customKeybindingsCount:this.keybindingService.customKeybindingsCount(),theme:this.currentTheme});var t=this.workbench.getInstantiationService().createInstance(b.WorkspaceStats);
t.reportWorkspaceTags()},e.prototype.initInstantiationService=function(){var e=this,t=new se.EventService;this.contextService=new ae.WorkspaceContextService(t,this.workspace,this.configuration,this.options),this.windowService=new S.WindowService;var n=this.configuration.env.extensionTestsPath||!this.workspace&&!this.configuration.env.extensionDevelopmentPath;this.storageService=new m.Storage(this.contextService,window.localStorage,n?m.inMemoryLocalStorageInstance:window.localStorage);var i=new T.ConfigurationService(this.contextService,t),o=this.configuration.env.isBuilt&&!this.configuration.env.extensionDevelopmentPath?!!this.configuration.env.enableTelemetry:!1,s=[new RegExp(r.escapeRegExpCharacters(this.configuration.env.appRoot),"gi"),new RegExp(r.escapeRegExpCharacters(this.configuration.env.userExtensionsHome),"gi")];this.telemetryService=new g.ElectronTelemetryService(i,this.storageService,{cleanupPatterns:s,enableTelemetry:o,version:this.configuration.env.version,commitHash:this.configuration.env.commitHash}),this.keybindingService=new D.WorkbenchKeybindingService(i,this.contextService,t,this.telemetryService,window),this.messageService=new E.MessageService(this.contextService,this.windowService,this.telemetryService,this.keybindingService),this.keybindingService.setMessageService(this.messageService);var a=new k.FileService(i,t,this.contextService);this.contextViewService=new l.ContextViewService(this.container,this.telemetryService,this.messageService);var c=new I.LifecycleService(this.messageService,this.windowService);c.onShutdown(function(){return a.dispose()}),this.threadService=new A.MainThreadService(this.contextService,this.messageService,this.windowService),c.onShutdown(function(){return e.threadService.dispose()});var u=new w.RequestService(this.contextService,i,this.telemetryService);c.onShutdown(function(){return u.dispose()});var h=new L.MainProcessMarkerService(this.threadService),p=new K.MainProcessExtensionService(this.contextService,this.threadService,this.messageService,this.telemetryService);this.keybindingService.setExtensionService(p);var f=new we.MainThreadModeServiceImpl(this.threadService,p,i),y=new R.ModelServiceImpl(this.threadService,h,f,i,this.messageService),_=new W.EditorWorkerServiceImpl(y),b=new Te.UntitledEditorService;this.themeService=new Ie.ThemeService(p);var V=le.createInstantiationService();return V.addSingleton(v.ITelemetryService,this.telemetryService),V.addSingleton(he.IEventService,t),V.addSingleton(ye.IRequestService,u),V.addSingleton(Se.IWorkspaceContextService,this.contextService),V.addSingleton(de.IContextViewService,this.contextViewService),V.addSingleton(de.IContextMenuService,new d.ContextMenuService(this.messageService,this.telemetryService,this.keybindingService)),V.addSingleton(ge.IMessageService,this.messageService),V.addSingleton(ce.IStorageService,this.storageService),V.addSingleton(me.ILifecycleService,c),V.addSingleton(be.IThreadService,this.threadService),V.addSingleton(Ee.IExtensionService,p),V.addSingleton(Ce.IModeService,f),V.addSingleton(pe.IFileService,a),V.addSingleton(Te.IUntitledEditorService,b),V.addSingleton(_e.ISearchService,new x.SearchService(y,b,this.contextService,i)),V.addSingleton(S.IWindowService,this.windowService),V.addSingleton(C.IConfigurationService,i),V.addSingleton(fe.IKeybindingService,this.keybindingService),V.addSingleton(ve.IMarkerService,h),V.addSingleton(P.IModelService,y),V.addSingleton(F.ICodeEditorService,new N.CodeEditorServiceImpl),V.addSingleton(H.IEditorWorkerService,_),V.addSingleton(xe.IThemeService,this.themeService),V.addSingleton(O.IActionsService,new M["default"](p,this.keybindingService)),V},e.prototype.initExtensionSystem=function(){this.threadService.getRemotable(V.MainProcessVSCodeAPIHelper),this.threadService.getRemotable(B.MainThreadDocuments),this.threadService.getRemotable(Q.RemoteTelemetryServiceHelper),this.workbench.getInstantiationService().createInstance(U.MainProcessTextMateSyntax),this.workbench.getInstantiationService().createInstance(z.MainProcessTextMateSnippet),this.workbench.getInstantiationService().createInstance(j.JSONValidationExtensionPoint),this.workbench.getInstantiationService().createInstance(q.LanguageConfigurationFileHandler),this.threadService.getRemotable(oe.MainThreadConfiguration),this.threadService.getRemotable(Y.MainThreadQuickOpen),this.threadService.getRemotable($.MainThreadStatusBar),this.workbench.getInstantiationService().createInstance(G.MainThreadFileSystemEventService),this.threadService.getRemotable(X.MainThreadCommands),this.threadService.getRemotable(J.MainThreadOutputService),this.threadService.getRemotable(Z.MainThreadDiagnostics),this.threadService.getRemotable(ee.MainThreadMessageService),this.threadService.getRemotable(te.MainThreadLanguages),this.threadService.getRemotable(ie.MainThreadWorkspace),this.threadService.getRemotable(ne.MainThreadEditors),this.threadService.getRemotable(ue.MainThreadStorage),this.threadService.getRemotable(re.MainThreadLanguageFeatures)},e.prototype.open=function(){var e=this;u.setUnexpectedErrorHandler(function(t){e.onUnexpectedError(t)}),i.$(this.container).addClass("monaco-shell"),this.content=i.$(".monaco-shell-content").appendTo(this.container).getHTMLElement(),this.writeTimers(),this.contentsContainer=this.createContents(i.$(this.content)),this.layout(),this.registerListeners();var t=this.storageService.get(h.Preferences.THEME,ce.StorageScope.GLOBAL,null);t||(t=xe.DEFAULT_THEME_ID,this.storageService.store(h.Preferences.THEME,t,ce.StorageScope.GLOBAL)),this.setTheme(t,!1),this.toUnbind.push(this.storageService.addListener2(ce.StorageEventType.STORAGE,function(t){t.key===h.Preferences.THEME&&e.setTheme(t.newValue)}))},e.prototype.setTheme=function(e,t){var n=this;if(void 0===t&&(t=!0),e){var o=function(e){n.currentTheme&&i.$(n.container).removeClass(n.currentTheme),n.currentTheme=e,i.$(n.container).addClass(n.currentTheme),t&&n.layout()};this.themeService.loadTheme(e).then(function(t){var i=t?t.id:xe.DEFAULT_THEME_ID;n.themeService.applyThemeCSS(i),o(i),i!==e&&n.storageService.store(h.Preferences.THEME,i,ce.StorageScope.GLOBAL)},function(e){u.onUnexpectedError(e)})}},e.prototype.registerListeners=function(){var e=this;i.$(window).on(s.EventType.RESIZE,function(){return e.layout()},this.toUnbind)},e.prototype.writeTimers=function(){var e=window.MonacoEnvironment.timers;if(e){var t=[];e.beforeProgram&&t.push({startTime:e.beforeProgram,stopTime:e.afterProgram,topic:"Startup",name:"Program Start",description:"Time it takes to pass control to VSCodes main method"}),e.vscodeStart&&t.push({startTime:e.vscodeStart,stopTime:e.beforeLoad,topic:"Startup",name:"VSCode Startup",description:"Time it takes to create a window and startup VSCode"}),t.push({startTime:e.beforeLoad,stopTime:e.afterLoad,topic:"Startup",name:"Load Modules",description:"Time it takes to load VSCodes main modules"}),t.push({startTime:e.beforeReady,stopTime:e.afterReady,topic:"Startup",name:"Event DOMContentLoaded",description:"Time it takes for the DOM to emit DOMContentLoaded event"}),p.getTimeKeeper().setInitialCollectedEvents(t,e.start)}},e.prototype.onUnexpectedError=function(e){var t=u.toErrorMessage(e,!0);if(t){var n=(new Date).getTime();t===this.previousErrorValue&&n-this.previousErrorTime<=1e3||(this.previousErrorTime=n,this.previousErrorValue=t,console.error(t),e&&e.friendlyMessage&&this.messageService&&this.messageService.show(ge.Severity.Error,e.friendlyMessage))}},e.prototype.layout=function(){var e=i.$(this.container).getClientArea(),t=new i.Dimension(e.width,e.height);this.contentsContainer.size(t.width,t.height),this.contextViewService.layout(),this.workbench.layout()},e.prototype.joinCreation=function(){return this.workbench.joinCreation()},e.prototype.dispose=function(e){if(this.workbench){var t=this.workbench.shutdown(e);if(t)return}this.contextViewService.dispose(),this.storageService.dispose(),this.toUnbind=c.disposeAll(this.toUnbind),i.$(this.container).empty()},e}();t.WorkbenchShell=Pe}),define("vs/workbench/electron-browser/main",["require","exports","vs/base/common/winjs.base","vs/workbench/electron-browser/shell","vs/base/common/errors","vs/base/common/platform","vs/base/common/paths","vs/base/common/timer","vs/base/common/objects","vs/base/common/uri","vs/base/common/strings","path","fs","graceful-fs"],function(e,t,n,i,o,r,s,a,c,u,l,d,h,p){"use strict";function f(e,t){c.assign(process.env,e.userEnv);var n={env:e},i=e.filesToOpen&&e.filesToOpen.length?m(e.filesToOpen):null,o=e.filesToCreate&&e.filesToCreate.length?m(e.filesToCreate):null,r=e.filesToDiff&&e.filesToDiff.length?m(e.filesToDiff):null,s={singleFileMode:!e.workspacePath,filesToOpen:i,filesToCreate:o,filesToDiff:r,extensionsToInstall:e.extensionsToInstall,globalSettings:t};return e.enablePerformance&&(a.ENABLE_TIMER=!0),g(v(e),n,s)}function m(e){return e.map(function(e){var t={resource:u["default"].file(e.filePath)};return e.lineNumber&&(t.options={selection:{startLineNumber:e.lineNumber,startColumn:e.columnNumber}}),t})}function v(e){if(!e.workspacePath)return null;var t=d.normalize(h.realpathSync(e.workspacePath));s.isUNC(t)&&l.endsWith(t,s.nativeSep)&&(t=l.rtrim(t,s.nativeSep));var n=u["default"].file(t),i=d.basename(t)||t,o=h.statSync(t),a={resource:n,id:r.isLinux?t:t.toLowerCase(),name:i,uid:r.isLinux?o.ino:o.birthtime.getTime(),mtime:o.mtime.getTime()};return a}function g(e,t,r){return window.MonacoEnvironment.timers.beforeReady=new Date,n.Utilities.ready(function(){window.MonacoEnvironment.timers.afterReady=new Date;var n=new Date,s=new i.WorkbenchShell(document.body,e,t,r);s.open(),s.joinCreation().then(function(){a.start(a.Topic.STARTUP,"Open Shell, Viewlet & Editor",n,"Workbench has opened after this event with viewlet and editor restored").stop()}),self.require.config({onError:function(e){"load"===e.errorCode&&s.onUnexpectedError(o.loaderError(e))}})},!0)}p.gracefulify(h),t.startup=f}),require.config({ignoreDuplicateModules:["vs/workbench/parts/search/common/searchModel","vs/workbench/parts/search/common/searchQuery"]}),define("vs/workbench/workbench.main",["vs/base/common/strings","vs/base/common/errors","vs/editor/contrib/selectionClipboard/electron-browser/selectionClipboard","vs/editor/browser/editor.all","vs/languages/languages.main","vs/workbench/browser/actions/toggleSidebarVisibility","vs/workbench/browser/actions/toggleSidebarPosition","vs/workbench/browser/actions/triggerQuickOpen","vs/workbench/browser/actions/triggerEditorActions","vs/workbench/browser/actions/triggerNavigation","vs/workbench/browser/actions/showPerformanceBox","vs/workbench/browser/actions/openSettings","vs/workbench/browser/actions/configureLocale","vs/workbench/parts/quickopen/browser/quickopen.contribution","vs/workbench/parts/files/browser/explorerViewlet","vs/workbench/parts/files/browser/workingFilesPicker","vs/workbench/parts/files/browser/fileActions.contribution","vs/workbench/parts/files/browser/files.contribution","vs/workbench/parts/files/electron-browser/files.electron.contribution","vs/workbench/parts/search/browser/search.contribution","vs/workbench/parts/git/electron-browser/git.contribution","vs/workbench/parts/git/browser/gitQuickOpen","vs/workbench/parts/git/browser/gitActions.contribution","vs/workbench/parts/debug/electron-browser/debug.contribution","vs/workbench/parts/errorList/browser/errorList.contribution","vs/workbench/parts/html/browser/html.contribution","vs/workbench/parts/extensions/electron-browser/extensions.contribution","vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","vs/workbench/parts/output/browser/output.contribution","vs/workbench/parts/markdown/browser/markdown.contribution","vs/workbench/parts/markdown/browser/markdownActions.contribution","vs/workbench/browser/workbench","vs/workbench/parts/tasks/electron-browser/task.contribution","vs/workbench/parts/emmet/node/emmet.contribution","vs/workbench/parts/execution/electron-browser/execution.contribution","vs/workbench/parts/execution/electron-browser/terminal.contribution","vs/workbench/parts/snippets/electron-browser/snippets.contribution","vs/workbench/parts/contentprovider/common/contentprovider.contribution","vs/workbench/parts/telemetry/node/appInsights.telemetry.contribution","vs/workbench/parts/themes/electron-browser/themes.contribution","vs/workbench/parts/feedback/electron-browser/feedback.contribution","vs/workbench/parts/gettingStarted/electron-browser/electronGettingStarted.contribution","vs/workbench/parts/update/electron-browser/update.contribution","vs/workbench/electron-browser/darwin/cli.contribution","vs/workbench/electron-browser/main.contribution","vs/workbench/electron-browser/main"],function(){"use strict"});
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/fa6d0f03813dfb9df4589c30121e9fcffa8a8ec8/vs\workbench\workbench.main.js.map
