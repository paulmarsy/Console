/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/base/browser/iframe",["require","exports"],function(e,t){function n(e){if(!e.parent||e.parent===e)return null;try{var t=e.location,n=e.parent.location;if(t.protocol!==n.protocol||t.hostname!==n.hostname||t.port!==n.port)return a=!0,null}catch(i){return a=!0,null}return e.parent}function i(e,t){for(var n,i=e.document.getElementsByTagName("iframe"),r=0,o=i.length;o>r;r++)if(n=i[r],n.contentWindow===t)return n;return null}function r(){if(!c){c=[];var e,t=window;do e=n(t),e?c.push({window:t,iframeElement:i(e,t)}):c.push({window:t,iframeElement:null}),t=e;while(t)}return c.slice(0)}function o(){return c||r(),a}function s(e,t){if(!t||e===t)return{top:0,left:0};for(var n=0,i=0,o=r(),s=0;s<o.length;s++){var a=o[s];if(a.window===t)break;if(!a.iframeElement)break;var c=a.iframeElement.getBoundingClientRect();n+=c.top,i+=c.left}return{top:n,left:i}}var a=!1,c=null;t.getSameOriginWindowChain=r,t.hasDifferentOriginAncestor=o,t.getPositionOfChildWindowRelativeToAncestorWindow=s}),define("vs/base/browser/ui/scrollbar/impl/common",["require","exports"],function(e,t){function n(e){switch(e){case"hidden":return i.Hidden;case"visible":return i.Visible;default:return i.Auto}}!function(e){e[e.Auto=0]="Auto",e[e.Hidden=1]="Hidden",e[e.Visible=2]="Visible"}(t.Visibility||(t.Visibility={}));var i=t.Visibility;t.visibilityFromString=n}),define("vs/base/common/arrays",["require","exports"],function(e,t){function n(e,t){return void 0===t&&(t=0),e[e.length-(1+t)]}function i(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],function(){e.splice(n,1),n--,i--})}function r(e,t,n){if(e.length!==t.length)return!1;for(var i=0,r=e.length;r>i;i++)if(!n(e[i],t[i]))return!1;return!0}function o(e,t){void 0===t&&(t=null);for(var n=new Array(e);e-- >0;)n.push(t);return n}function s(e,t,n){for(var i=0,r=e.length-1;r>=i;){var o=(i+r)/2|0,s=n(e[o],t);if(0>s)i=o+1;else{if(!(s>0))return o;r=o-1}}return-(i+1)}function a(e,t){var n=0,i=e.length;if(0===i)return 0;for(;i>n;){var r=Math.floor((n+i)/2);t(e[r])?i=r:n=r+1}return n}function c(e,t){var n=new Array;if(t)for(var i={},r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++){var s=e[r][o],a=t(s);i.hasOwnProperty(a)||(i[a]=!0,n.push(s))}else for(var r=0,c=e.length;c>r;r++)n.push.apply(n,e[r]);return n}function u(e){return e?e.filter(function(e){return!!e}):e}function l(e,t){return e.indexOf(t)>=0}function d(e,t,n){var i=e[t],r=e[n];e[t]=r,e[n]=i}function h(e,t,n){e.splice(n,0,e.splice(t,1)[0])}function p(e){return!Array.isArray(e)||0===e.length}function f(e,t){if(!t)return e.filter(function(t,n){return e.indexOf(t)===n});var n={};return e.filter(function(e){var i=t(e);return n[i]?!1:(n[i]=!0,!0)})}function m(e,t,n){void 0===n&&(n=null);for(var i=0;i<e.length;i++){var r=e[i];if(t(r))return r}return n}function v(e,t){for(var n=[],i=0;t>i;i++)n.push(e);return n}function g(e,t,n){void 0===n&&(n=function(e,t){return e===t});for(var i=0,r=0,o=Math.min(e.length,t.length);o>r&&n(e[r],t[r]);r++)i++;return i}function y(e){return e.reduce(function(e,t){return e.concat(t)},[])}t.tail=n,t.forEach=i,t.equals=r,t.fill=o,t.binarySearch=s,t.findFirst=a,t.merge=c,t.coalesce=u,t.contains=l,t.swap=d,t.move=h,t.isFalsyOrEmpty=p,t.distinct=f,t.first=m,t.repeat=v,t.commonPrefixLength=g,t.flatten=y}),define("vs/base/common/assert",["require","exports"],function(e,t){function n(e,t){if(!e||null===e)throw new Error(t?"Assertion failed ("+t+")":"Assertion Failed")}t.ok=n}),define("vs/base/common/bits/bits",["require","exports"],function(e,t){function n(e,t,n){return void 0===n&&(n="0"),new Array(t-e.length+1).join(n)+e}function i(e,t){return void 0===t&&(t=32),n((e>>>0).toString(16),t/4)}function r(e,t,n){void 0===n&&(n=32);var i=n-t,r=~((1<<i)-1);return(e<<t|(r&e)>>>i)>>>0}function o(e,t){var n=65535&e,i=e>>>16,r=65535&t,o=t>>>16,s=0,a=0,c=0,u=0,l=r*n;return s+=65535&l,a+=l>>>16,l=r*i,a+=65535&l,c+=l>>>16,l=o*n,a+=65535&l,c+=l>>>16,c+=a>>>16,a=65535&a,l=o*i,c+=65535&l,u+=l>>>16,u+=c>>>16,c=65535&c,[(u<<16|c)>>>0,(a<<16|s)>>>0]}t.leftPad=n,t.toHexString=i,t.leftRotate=r,t.multiply64=o}),define("vs/base/common/bits/encoding",["require","exports","./bits"],function(e,t,n){function i(e){if(e>>>=0,128>e)return 1;if(2048>e)return 2;if(65536>e)return 3;if(2097152>e)return 4;if(67108864>e)return 5;if(2147483648>e)return 6;throw new Error("Code point 0x"+n.toHexString(e)+" not encodable in UTF8.")}function r(e,t,n){var r=i(e);if(1===r)return t[n]=e,1;t[n]=255&(252<<6-r|e>>>6*(r-1));for(var o=1;r>o;o++)t[n+o]=255&(128|63&e>>>6*(r-o-1));return r}function o(e,t){var n,o,s=0,a=0,c=0,u=0;for(n=0,o=e.length;o>n;n++){if(a=e.charCodeAt(n),a>=55296&&56320>a){if(c=e.charCodeAt(++n),!(c>=56320&&57344>c))throw new Error("Invalid char code");u=((a-55296&1023)<<10|c-56320&1023)+65536}else u=a;s+=i(u)}t&&(s+=3);var l=new ArrayBuffer(s),d=new Uint8Array(l),h=0;for(t&&(d[0]=239,d[1]=187,d[2]=191,h+=3),n=0,o=e.length;o>n;n++)a=e.charCodeAt(n),a>=55296&&56320>a?(c=e.charCodeAt(++n),u=((a-55296&1023)<<10|c-56320&1023)+65536):u=a,h+=r(u,d,h);return l}function s(e,t,n,i){var r=2*e.length;if(r>i)throw Error("Unable to encode string to UTF16. Need "+r+" bytes, but only have "+i+" bytes.");for(var o=0;o<e.length;o++)t.setUint16(n+2*o,e.charCodeAt(o),!1);return r}t.UTF8="utf8",t.encodeToUTF8=o,t.encodeToUTF16=s,t.SUPPORTED_ENCODINGS={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:2},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:3},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:4},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:5},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:6},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:7},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:8},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:9},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:10},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:11},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:12},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:13},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:14},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:15},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:16},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:17},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:18},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:19},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:20},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:21},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:22},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:23},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:24},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:25},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:26},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:27},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:28},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:29},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:30},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:31},gbk:{labelLong:"Chinese (GBK)",labelShort:"GBK",order:32},gb18030:{labelLong:"Chinese (GB18030)",labelShort:"GB18030",order:33},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:34},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:35},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:36},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:37},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:38},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:39},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:40},"koi8-ru":{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:41},"koi8-t":{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:42},GB2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:43}}}),define("vs/base/common/collections",["require","exports"],function(e,t){function n(){return Object.create(null)}function i(){return Object.create(null)}function r(e,t,n){void 0===n&&(n=null);var i=String(t);return a(e,i)?e[i]:n}function o(e,t,n){var i=String(t);return a(e,i)?e[i]:("function"==typeof n&&(n=n()),e[i]=n,n)}function s(e,t,n){e[n(t)]=t}function a(e,t){return v.call(e,t)}function c(e){return{every:function(t){for(var n in e)if(v.call(e,n)&&!t(n))return!1;return!0}}}function u(e){var t=[];for(var n in e)v.call(e,n)&&t.push(e[n]);return t}function l(e,t){for(var n in e)if(v.call(e,n)){var i=t({key:n,value:e[n]},function(){delete e[n]});if(i===!1)return}}function d(e,t){return v.call(e,t)?(delete e[t],!0):!1}function h(e,t){var i=n();return e.forEach(function(e){return o(i,t(e),[]).push(e)}),i}function p(e){var n=e.length;return 0===n?t.EmptyIterable:1===n?e[0]:{every:function(t){for(var i=0;n>i;i++)if(!e[i].every(t))return!1;return!0}}}function f(e){return{every:function(t){return t(e)}}}function m(e){if(Array.isArray(e))return e;var t=[];return e.every(function(e){return t.push(e),!0}),t}t.createStringDictionary=n,t.createNumberDictionary=i,t.lookup=r,t.lookupOrInsert=o,t.insert=s;var v=Object.prototype.hasOwnProperty;t.contains=a,t.keys=c,t.values=u,t.forEach=l,t.remove=d,t.groupBy=h,t.EmptyIterable={every:function(e){return!0}},t.combine=p,t.singleton=f,t.toArray=m;var g=function(){function e(e){this.size=e,this.cache=Object.create(null),this.order=[]}return e.prototype.get=function(e){var t=this.cache[e];return t&&t.element},e.prototype.put=function(e,t,n){var i=this.cache[e],r={element:t,onRemove:n};this.cache[e]=r,i||this.order.push(e),this.swipe()},e.prototype.swipe=function(){for(;this.order.length>this.size;){var e=this.order.shift(),t=this.cache[e];t.onRemove(),delete this.cache[e]}},e}();t.LimitedSizeCache=g}),define("vs/base/common/diff/diffChange",["require","exports"],function(e,t){t.DifferenceType={Add:0,Remove:1,Change:2};var n=function(){function e(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}return e.prototype.getChangeType=function(){return 0===this.originalLength?t.DifferenceType.Add:0===this.modifiedLength?t.DifferenceType.Remove:t.DifferenceType.Change},e.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength},e.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength},e}();t.DiffChange=n}),define("vs/base/common/diff/diff",["require","exports","vs/base/common/diff/diffChange"],function(e,t,n){var i=function(){function e(){}return e.Assert=function(e,t){if(!e)throw new Error(t)},e}();t.Debug=i;var r=function(){function e(){}return e.Copy=function(e,t,n,i,r){for(var o=0;r>o;o++)n[i+o]=e[t+o]},e}();t.MyArray=r;var o=1447,s=function(){function e(){this.m_changes=[],this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE,this.m_originalCount=0,this.m_modifiedCount=0}return e.prototype.MarkNextChange=function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new n.DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE},e.prototype.AddOriginalElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++},e.prototype.AddModifiedElement=function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++},e.prototype.getChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes},e.prototype.getReverseChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes},e}(),a=function(){function e(e,t,n){void 0===n&&(n=null),this.OriginalSequence=e,this.ModifiedSequence=t,this.ContinueProcessingPredicate=n,this.m_originalIds=[],this.m_modifiedIds=[],this.m_forwardHistory=[],this.m_reverseHistory=[],this.ComputeUniqueIdentifiers()}return e.prototype.ComputeUniqueIdentifiers=function(){var e=this.OriginalSequence.getLength(),t=this.ModifiedSequence.getLength();this.m_originalIds=new Array(e),this.m_modifiedIds=new Array(t);var n,i={},r=1;for(n=0;e>n;n++){var o=this.OriginalSequence.getElementHash(n);i.hasOwnProperty(o)?this.m_originalIds[n]=i[o]:(this.m_originalIds[n]=r++,i[o]=this.m_originalIds[n])}for(n=0;t>n;n++){var s=this.ModifiedSequence.getElementHash(n);i.hasOwnProperty(s)?this.m_modifiedIds[n]=i[s]:(this.m_modifiedIds[n]=r++,i[s]=this.m_modifiedIds[n])}},e.prototype.ElementsAreEqual=function(e,t){return this.m_originalIds[e]===this.m_modifiedIds[t]},e.prototype.ComputeDiff=function(){return this._ComputeDiff(0,this.OriginalSequence.getLength()-1,0,this.ModifiedSequence.getLength()-1)},e.prototype._ComputeDiff=function(e,t,n,i){var r=[!1];return this.ComputeDiffRecursive(e,t,n,i,r)},e.prototype.ComputeDiffRecursive=function(e,t,r,o,s){for(s[0]=!1;t>=e&&o>=r&&this.ElementsAreEqual(e,r);)e++,r++;for(;t>=e&&o>=r&&this.ElementsAreEqual(t,o);)t--,o--;if(e>t||r>o){var a;return o>=r?(i.Assert(e===t+1,"originalStart should only be one more than originalEnd"),a=[new n.DiffChange(e,0,r,o-r+1)]):t>=e?(i.Assert(r===o+1,"modifiedStart should only be one more than modifiedEnd"),a=[new n.DiffChange(e,t-e+1,r,0)]):(i.Assert(e===t+1,"originalStart should only be one more than originalEnd"),i.Assert(r===o+1,"modifiedStart should only be one more than modifiedEnd"),a=[]),a}var c=[0],u=[0],l=this.ComputeRecursionPoint(e,t,r,o,c,u,s),d=c[0],h=u[0];if(null!==l)return l;if(!s[0]){var p=this.ComputeDiffRecursive(e,d,r,h,s),f=[];return f=s[0]?[new n.DiffChange(d+1,t-(d+1)+1,h+1,o-(h+1)+1)]:this.ComputeDiffRecursive(d+1,t,h+1,o,s),this.ConcatenateChanges(p,f)}return[new n.DiffChange(e,t-e+1,r,o-r+1)]},e.prototype.WALKTRACE=function(e,t,i,r,o,a,c,u,l,d,h,p,f,m,v,g,y,_){var b,E=null,S=null,w=new s,C=t,T=i,I=f[0]-g[0]-r,k=Number.MIN_VALUE,x=this.m_forwardHistory.length-1;do b=I+e,b===C||T>b&&l[b-1]<l[b+1]?(h=l[b+1],m=h-I-r,k>h&&w.MarkNextChange(),k=h,w.AddModifiedElement(h+1,m),I=b+1-e):(h=l[b-1]+1,m=h-I-r,k>h&&w.MarkNextChange(),k=h-1,w.AddOriginalElement(h,m+1),I=b-1-e),x>=0&&(l=this.m_forwardHistory[x],e=l[0],C=1,T=l.length-1);while(--x>=-1);if(E=w.getReverseChanges(),_[0]){var A=f[0]+1,R=g[0]+1;if(null!==E&&E.length>0){var D=E[E.length-1];A=Math.max(A,D.getOriginalEnd()),R=Math.max(R,D.getModifiedEnd())}S=[new n.DiffChange(A,p-A+1,R,v-R+1)]}else{w=new s,C=a,T=c,I=f[0]-g[0]-u,k=Number.MAX_VALUE,x=y?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do b=I+o,b===C||T>b&&d[b-1]>=d[b+1]?(h=d[b+1]-1,m=h-I-u,h>k&&w.MarkNextChange(),k=h+1,w.AddOriginalElement(h+1,m+1),I=b+1-o):(h=d[b-1],m=h-I-u,h>k&&w.MarkNextChange(),k=h,w.AddModifiedElement(h+1,m+1),I=b-1-o),x>=0&&(d=this.m_reverseHistory[x],o=d[0],C=1,T=d.length-1);while(--x>=-1);S=w.getChanges()}return this.ConcatenateChanges(E,S)},e.prototype.ComputeRecursionPoint=function(e,t,i,s,a,c,u){var l,d,h,p=0,f=0,m=0,v=0;e--,i--,a[0]=0,c[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var g=t-e+(s-i),y=g+1,_=new Array(y),b=new Array(y),E=s-i,S=t-e,w=e-i,C=t-s,T=S-E,I=T%2===0;_[E]=e,b[S]=t,u[0]=!1;var k,x;for(h=1;g/2+1>=h;h++){var A=0,R=0;for(p=this.ClipDiagonalBound(E-h,h,E,y),f=this.ClipDiagonalBound(E+h,h,E,y),k=p;f>=k;k+=2){for(l=k===p||f>k&&_[k-1]<_[k+1]?_[k+1]:_[k-1]+1,d=l-(k-E)-w,x=l;t>l&&s>d&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(_[k]=l,l+d>A+R&&(A=l,R=d),!I&&Math.abs(k-S)<=h-1&&l>=b[k])return a[0]=l,c[0]=d,x<=b[k]&&o>0&&o+1>=h?this.WALKTRACE(E,p,f,w,S,m,v,C,_,b,l,t,a,d,s,c,I,u):null}var D=(A-e+(R-i)-h)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(A,this.OriginalSequence,D))return u[0]=!0,a[0]=A,c[0]=R,D>0&&o>0&&o+1>=h?this.WALKTRACE(E,p,f,w,S,m,v,C,_,b,l,t,a,d,s,c,I,u):(e++,i++,[new n.DiffChange(e,t-e+1,i,s-i+1)]);for(m=this.ClipDiagonalBound(S-h,h,S,y),v=this.ClipDiagonalBound(S+h,h,S,y),k=m;v>=k;k+=2){for(l=k===m||v>k&&b[k-1]>=b[k+1]?b[k+1]-1:b[k-1],d=l-(k-S)-C,x=l;l>e&&d>i&&this.ElementsAreEqual(l,d);)l--,d--;if(b[k]=l,I&&Math.abs(k-E)<=h&&l<=_[k])return a[0]=l,c[0]=d,x>=_[k]&&o>0&&o+1>=h?this.WALKTRACE(E,p,f,w,S,m,v,C,_,b,l,t,a,d,s,c,I,u):null}if(o>=h){var L=new Array(f-p+2);L[0]=E-p+1,r.Copy(_,p,L,1,f-p+1),this.m_forwardHistory.push(L),L=new Array(v-m+2),L[0]=S-m+1,r.Copy(b,m,L,1,v-m+1),this.m_reverseHistory.push(L)}}return this.WALKTRACE(E,p,f,w,S,m,v,C,_,b,l,t,a,d,s,c,I,u)},e.prototype.ConcatenateChanges=function(e,t){var n=[],i=null;return 0===e.length||0===t.length?t.length>0?t:e:this.ChangesOverlap(e[e.length-1],t[0],n)?(i=new Array(e.length+t.length-1),r.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],r.Copy(t,1,i,e.length,t.length-1),i):(i=new Array(e.length+t.length),r.Copy(e,0,i,0,e.length),r.Copy(t,0,i,e.length,t.length),i)},e.prototype.ChangesOverlap=function(e,t,r){if(i.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),i.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){var o=e.originalStart,s=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(c=t.modifiedStart+t.modifiedLength-e.modifiedStart),r[0]=new n.DiffChange(o,s,a,c),!0}return r[0]=null,!1},e.prototype.ClipDiagonalBound=function(e,t,n,i){if(e>=0&&i>e)return e;var r=n,o=i-n-1,s=t%2===0;if(0>e){var a=r%2===0;return s===a?0:1}var c=o%2===0;return s===c?i-1:i-2},e}();t.LcsDiff=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/events",["require","exports"],function(e,t){var n=function(){function e(e){this.time=(new Date).getTime(),this.originalEvent=e,this.source=null}return e}();t.Event=n;var i=function(e){function t(t,n,i,r){e.call(this,r),this.key=t,this.oldValue=n,this.newValue=i}return __extends(t,e),t}(n);t.PropertyChangeEvent=i;var r=function(e){function t(t,n){e.call(this,n),this.element=t}return __extends(t,e),t}(n);t.ViewerEvent=r,t.EventType={PROPERTY_CHANGED:"propertyChanged",SELECTION:"selection",FOCUS:"focus",BLUR:"blur",HIGHLIGHT:"highlight",EXPAND:"expand",COLLAPSE:"collapse",TOGGLE:"toggle",CONTENTS_CHANGED:"contentsChanged",BEFORE_RUN:"beforeRun",RUN:"run",EDIT:"edit",SAVE:"save",CANCEL:"cancel",CHANGE:"change",DISPOSE:"dispose"}}),define("vs/base/common/hash",["require","exports"],function(e,t){function n(e){for(var t=1540483477,n=24,i=0,r=e.length,o=r,s=0^o,a=i;o>=2;){var c=e.charCodeAt(a),u=e.charCodeAt(a+1),l=c|u<<16;l*=t,l^=l>>n,l*=t,s*=t,s^=l,a+=2,o-=2}return 1===o&&(s^=e.charCodeAt(a),s*=t),s^=s>>13,s*=t,s^=s>>15}function i(e,t){return(t<<5)+t+e&2147483647}t.computeMurmur2StringHashCode=n,t.combine=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/iterator",["require","exports"],function(e,t){var n=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.items=e,this.start=t,this.end=n,this.index=t-1}return e.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.index===this.end?null:this.items[this.index]},e}();t.ArrayIterator=n;var i=function(){function e(e,t){this.iterator=e,this.fn=t}return e.prototype.next=function(){return this.fn(this.iterator.next())},e}();t.MappedIterator=i;var r=function(e){function t(t,n){e.call(this,t,n),this.navigator=t}return __extends(t,e),t.prototype.current=function(){return this.fn(this.navigator.current())},t.prototype.previous=function(){return this.fn(this.navigator.previous())},t.prototype.parent=function(){return this.fn(this.navigator.parent())},t.prototype.first=function(){return this.fn(this.navigator.first())},t.prototype.last=function(){return this.fn(this.navigator.last())},t}(i);t.MappedNavigator=r}),define("vs/base/common/lifecycle",["require","exports"],function(e,t){function n(e){for(var t=0,n=e.length;n>t;t++)e[t]&&e[t].dispose();return[]}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return{dispose:function(){return n(e)}}}function r(e){return{dispose:function(){return n(e)}}}function o(e){return{dispose:function(){return e()}}}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r(e.map(o))}function a(e){if(e){if("function"==typeof e)return e(),null;if(Array.isArray(e)){for(;e.length>0;)e.pop()();return e}return null}return null}t.empty=Object.freeze({dispose:function(){}}),t.disposeAll=n,t.combinedDispose=i,t.combinedDispose2=r,t.fnToDisposable=o,t.toDisposable=s,t.cAll=a}),define("vs/base/common/platform",["require","exports"],function(e,t){function n(){return"undefined"!=typeof d.Worker}var i=!1,r=!1,o=!1,s=!1,a=!1,c=!1;if("object"==typeof process)i="win32"===process.platform,r="darwin"===process.platform,o="linux"===process.platform,s=!0;else if("object"==typeof navigator){var u=navigator.userAgent;i=u.indexOf("Windows")>=0,r=u.indexOf("Macintosh")>=0,o=u.indexOf("Linux")>=0,a=!0,c=!!self.QUnit}!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(t.Platform||(t.Platform={}));var l=t.Platform;t._platform=l.Web,s&&(r?t._platform=l.Mac:i?t._platform=l.Windows:o&&(t._platform=l.Linux)),t.isWindows=i,t.isMacintosh=r,t.isLinux=o,t.isNative=s,t.isWeb=a,t.isQunit=c,t.platform=t._platform;var d="object"==typeof self?self:global;t.globals=d,t.hasWebWorkerSupport=n,t.setTimeout=d.setTimeout.bind(d),t.clearTimeout=d.clearTimeout.bind(d),t.setInterval=d.setInterval.bind(d),t.clearInterval=d.clearInterval.bind(d)}),define("vs/base/common/diagnostics",["require","exports","vs/base/common/platform"],function(e,t,n){function i(e,t){return function(){}}var r=n.globals;r.Monaco||(r.Monaco={}),r.Monaco.Diagnostics={};r.Monaco.Diagnostics;t.register=i}),define("vs/base/common/flags",["require","exports","vs/base/common/platform"],function(e,t,n){function i(e,t){return void 0===t&&(t=!1),n.globals.MonacoEnvironment&&n.globals.MonacoEnvironment.hasOwnProperty(e)?n.globals.MonacoEnvironment[e]:t}t.workersCount=i("workersCount",2),t.enableTasks=i("enableTasks"),t.enableSendASmile=i("enableSendASmile"),t.enableJavaScriptRewriting=i("enableJavaScriptRewriting"),t.enableTypeScriptServiceMode=i("enableTypeScriptServiceMode"),t.enableTypeScriptServiceModeForJS=i("enableTypeScriptServiceModeForJS"),t.standaloneEditorTelemetryEndpoint=i("telemetryEndpoint",null),t.getCrossOriginWorkerScriptUrl=i("getWorkerUrl",null)}),define("vs/base/common/paths",["require","exports","vs/base/common/platform"],function(e,t,n){function i(e,n){e=r(e),n=r(n);for(var i=e.split(t.sep),o=n.split(t.sep);i.length>0&&o.length>0&&i[0]===o[0];)i.shift(),o.shift();for(var s=0,a=i.length;a>s;s++)o.unshift("..");return o.join(t.sep)}function r(e,i){if(!e)return e;if(!v.test(e)){var r=i&&n.isWindows?"/":"\\";if(-1===e.indexOf(r))return e}for(var o=e.split(/[\\\/]/),s=0,a=o.length;a>s;s++)"."===o[s]&&o[s+1]?(o.splice(s,1),s-=1):".."===o[s]&&o[s-1]&&(o.splice(s-1,2),s-=2);return o.join(i?t.nativeSep:t.sep)}function o(e){function t(){return"."===n||"/"===n||"\\"===n?(n=void 0,i=!0):n=s(n),{value:n,done:i}}var n=e,i=!1;return{next:t}}function s(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?".":0===~t?e[0]:e.substring(0,~t)}function a(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t===e.length-1?a(e.substring(0,e.length-1)):e.substr(~t+1)}function c(e){e=a(e);var t=~e.lastIndexOf(".");return t?e.substring(~t):""}function u(e){if(!e)return 0;if(e=e.replace(/\/|\\/g,"/"),"/"===e[0])return"/"!==e[1]?1:2;if(":"===e[1])return"/"===e[2]?3:2;if(0===e.indexOf("file:///"))return 8;var t=e.indexOf("://");return-1!==t?t+3:0}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n,i=u(e[0]);n=e[0].substr(0,i),e[0]=e[0].substr(i);for(var r=[],o=/[\\\/]$/.test(e[e.length-1]),s=0;s<e.length;s++)r.push.apply(r,e[s].split(/\/|\\/));for(var s=0;s<r.length;s++){var a=r[s];"."===a||0===a.length?(r.splice(s,1),s-=1):".."===a&&r[s-1]&&".."!==r[s-1]&&(r.splice(s-1,2),s-=2)}o&&r.push("");var c=r.join("/");return n&&(c=n.replace(/\/|\\/g,"/")+c),c}function d(e){return n.isWindows&&e?(e=this.normalize(e,!0),e[0]===t.nativeSep&&e[1]===t.nativeSep):!1}function h(e){return e&&"/"===e[0]}function p(e,n){return h(n?e:r(e))?e:t.sep+e}function f(e){return e&&e.length>1&&"."===e[0]}function m(e,t){if(e===t)return!0;e=r(e),t=r(t);var i=t.length,o=t.charCodeAt(i-1);if(o===g&&(t=t.substring(0,i-1),i-=1),e===t)return!0;if(n.isLinux||(e=e.toLowerCase(),t=t.toLowerCase()),e===t)return!0;if(0!==e.indexOf(t))return!1;var s=e.charCodeAt(i);return s===g}t.sep="/",t.nativeSep=n.isWindows?"\\":"/",t.relative=i;var v=/[\\\/]\.\.?[\\\/]?|[\\\/]?\.\.?[\\\/]/;t.normalize=r,t.dirnames=o,t.dirname=s,t.basename=a,t.extname=c,t.join=l,t.isUNC=d,t.isAbsolute=h,t.makeAbsolute=p,t.isRelative=f;var g="/".charCodeAt(0);t.isEqualOrParent=m}),define("vs/base/common/remote",["require","exports"],function(e,t){function n(e,t,n){var r={$__IS_REMOTE_OBJ:!0};for(var o in n.prototype)"function"==typeof n.prototype[o]&&(r[o]=i(e,t,o));return r}function i(e,t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];return e.callOnRemote(t,n,i)}}var r=Object.prototype.hasOwnProperty;t.createProxyFromCtor=n;var o=function(){function e(e){this._remoteCom=e}return e.prototype.canSerialize=function(e){return"string"==typeof e.$__CREATE__PROXY__REQUEST},e.prototype.serialize=function(e,t){for(var n={methods:[],props:{}},i=Object.keys(e),r=0;r<i.length;r++){var o=i[r];"function"==typeof e[o]?n.methods.push(o):n.props[o]=t(e[o])}return{$isProxyDescriptor:!0,proxyId:e.$__CREATE__PROXY__REQUEST,desc:n}},e.prototype.canDeserialize=function(e){return e.$isProxyDescriptor===!0},e.prototype.deserialize=function(e,t){for(var n={$__IS_REMOTE_OBJ:!0},o=e.desc.methods,s=0;s<o.length;s++)n[o[s]]=i(this._remoteCom,e.proxyId,o[s]);var a=e.desc.props;for(var c in a)r.call(a,c)&&(n[c]=t(a[c]));return n},e}();t.ProxiesMarshallingContribution=o}),define("vs/base/common/sortedList",["require","exports","vs/base/common/arrays"],function(e,t,n){var i=function(){function e(t){this.keys=[],this.values=[],this.comparator=t||e.DEFAULT_COMPARATOR}return Object.defineProperty(e.prototype,"count",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.getValueByIndex=function(e){return e>=0&&e<this.values.length?this.values[e]:null},e.prototype.getKey=function(e){return e>=0&&e<this.keys.length?this.keys[e]:null},e.prototype.getKeys=function(){return new o(this.keys)},e.prototype.getValue=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0?this.values[t]:null},e.prototype.getValues=function(){return new o(this.values)},e.prototype.indexOfKey=function(e){if(!e)throw new Error("Key must be defined.");return Math.max(-1,n.binarySearch(this.keys,e,this.comparator))},e.prototype.add=function(e,t){if(!e||!t)throw new Error("Key and value must be defined.");for(var n=0;n<this.keys.length&&this.comparator(e,this.keys[n])>0;)n++;this.keys.splice(n,0,e),this.values.splice(n,0,t)},e.prototype.remove=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0&&(this.values.splice(t,1),this.keys.splice(t,1)),t>=0},e.prototype.getIterator=function(){return new r(this.keys,this.values)},e.DEFAULT_COMPARATOR=function(e,t){return t>e?-1:e>t?1:0},e}();t.SortedList=i;var r=function(){function e(e,t){this.keys=e,this.values=t,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.keys.length<this.index?null:{key:this.keys[this.index],value:this.values[this.index]}},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.keys.length},e.prototype.hasNext=function(){return this.index+1<this.keys.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.keys=null,this.values=null},e}(),o=function(){function e(e){this.values=e,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.values.length<this.index?null:this.values[this.index]},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.values.length},e.prototype.hasNext=function(){return this.index+1<this.values.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.values=null},e}()}),define("vs/base/common/stopwatch",["require","exports","vs/base/common/platform"],function(e,t,n){var i=n.globals.performance&&"function"==typeof n.globals.performance.now,r=function(){function e(e){this._startTime=e,this._stopTime=-1}return e.create=function(){return new e(i?n.globals.performance.now():(new Date).getTime())},e.prototype.stop=function(){this._stopTime=i?n.globals.performance.now():(new Date).getTime()},e.prototype.elapsed=function(){if(-1!==this._stopTime)return this._stopTime-this._startTime;var e=i?n.globals.performance.now():(new Date).getTime();return e-this._startTime},e}();t.StopWatch=r}),define("vs/base/common/types",["require","exports"],function(e,t){function n(e){return Array.isArray?Array.isArray(e):e&&"number"==typeof e.length&&e.constructor===Array?!0:!1}function i(e){return"string"==typeof e||e instanceof String?!0:!1}function r(e){return n(e)&&e.every(function(e){return i(e)})}function o(e){return"undefined"==typeof e||null===e?!1:"[object Object]"===Object.prototype.toString.call(e)}function s(e){return("number"==typeof e||e instanceof Number)&&!isNaN(e)?!0:!1}function a(e){return e===!0||e===!1}function c(e){return"undefined"==typeof e}function u(e){return c(e)||null===e}function l(e){if(!o(e))return!1;for(var t in e)if(v.call(e,t))return!1;return!0}function d(e){return"[object Function]"===Object.prototype.toString.call(e)}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e&&e.length>0&&e.every(function(e){return d(e)})}function p(e,t){for(var n=Math.min(e.length,t.length),i=0;n>i;i++)f(e[i],t[i])}function f(e,t){if("string"==typeof t){if(typeof e!==t)throw new Error("argument does not match constraint: typeof "+t)}else if("function"==typeof t){if(e instanceof t)return;if(e&&e.constructor===t)return;if(1===t.length&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Object.create(e.prototype);return e.apply(i,t),i}t.isArray=n,t.isString=i,t.isStringArray=r,t.isObject=o,t.isNumber=s,t.isBoolean=a,t.isUndefined=c,t.isUndefinedOrNull=u;var v=Object.prototype.hasOwnProperty;t.isEmptyObject=l,t.isFunction=d,t.areFunctions=h,t.validateConstraints=p,t.validateConstraint=f,t.create=m;
}),define("vs/base/browser/browser",["require","exports","vs/base/common/types","vs/base/common/platform"],function(e,t,n,i){function r(){return!p&&d.history&&d.history.pushState}function o(){p=!0}function s(){if(this._hasCSSAnimationSupport===!0||this._hasCSSAnimationSupport===!1)return this._hasCSSAnimationSupport;if(!d.document)return!1;for(var e=!1,t=d.document.createElement("div"),i=["animationName","webkitAnimationName","msAnimationName","MozAnimationName","OAnimationName"],r=0;r<i.length;r++){var o=i[r];if(!n.isUndefinedOrNull(t.style[o])||t.style.hasOwnProperty(o)){e=!0;break}}return e?this._hasCSSAnimationSupport=!0:this._hasCSSAnimationSupport=!1,this._hasCSSAnimationSupport}function a(e){if(!d.document)return!1;var t=d.document.createElement("video");if(t.canPlayType){var n=t.canPlayType(e);return"maybe"===n||"probably"===n}return!1}function c(e){if(!d.document)return!1;var t=d.document.createElement("audio");if(t.canPlayType){var n=t.canPlayType(e);return"maybe"===n||"probably"===n}return!1}function u(){return!d.document&&"undefined"!=typeof d.importScripts}function l(e){return(t.isIE11orEarlier||i.isNative)&&document.queryCommandSupported(e)}var d="object"==typeof self?self:global,h=d.navigator?d.navigator.userAgent:"";!!d.isTest;t.isIE11=h.indexOf("Trident")>=0&&h.indexOf("MSIE")<0,t.isIE10=h.indexOf("MSIE 10")>=0,t.isIE9=h.indexOf("MSIE 9")>=0,t.isIE11orEarlier=t.isIE11||t.isIE10||t.isIE9,t.isIE10orEarlier=t.isIE10||t.isIE9,t.isIE10orLater=t.isIE11||t.isIE10,t.isOpera=h.indexOf("Opera")>=0,t.isFirefox=h.indexOf("Firefox")>=0,t.isWebKit=h.indexOf("AppleWebKit")>=0,t.isChrome=h.indexOf("Chrome")>=0,t.isSafari=-1===h.indexOf("Chrome")&&h.indexOf("Safari")>=0,t.isIPad=h.indexOf("iPad")>=0,t.canUseTranslate3d=!t.isIE9&&!t.isFirefox,t.enableEmptySelectionClipboard=t.isWebKit,t.canPushState=r;var p=!1;t.disablePushState=o,t.hasCSSAnimationSupport=s,t.canPlayVideo=a,t.canPlayAudio=c,t.isInWebWorker=u,t.supportsExecCommand=l}),define("vs/base/browser/browserService",["require","exports","vs/base/browser/browser"],function(e,t,n){function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(){return s}t.regularIsHTMLElement=i;var o=function(){function e(){this.restore()}return e.prototype.mock=function(e){this.document=e.document,this.window=e.window,this.isHTMLElement=e.isHTMLElement},e.prototype.restore=function(){this.isHTMLElement=i,n.isInWebWorker()?(this.document=null,this.window=null):(this.document=window.document,this.window=window)},e}(),s=new o;t.getService=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/mouseEvent",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/browser/iframe"],function(e,t,n,i,r){var o=function(){function e(e){var t=this;this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.target=e.target||e.targetNode||e.srcElement,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.posx=0,this.posy=0,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=function(){return e.clientX||e.clientY?(t.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,!0):!1},o=function(){return e.pageX||e.pageY?(t.posx=e.pageX,t.posy=e.pageY,!0):!1},s=o,a=n;i.isIE10&&(s=n,a=o),s()||a();var c=r.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=c.left,this.posy-=c.top}return e.prototype.preventDefault=function(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e}();t.StandardMouseEvent=o;var s=function(e){function t(t){e.call(this,t),this.dataTransfer=t.dataTransfer}return __extends(t,e),t}(o);t.DragMouseEvent=s;var a=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(s);t.DropMouseEvent=a;var c=function(){function e(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=0),this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t,e){var o=e,s=e;"undefined"!=typeof o.wheelDeltaY?this.deltaY=o.wheelDeltaY/120:"undefined"!=typeof s.VERTICAL_AXIS&&s.axis===s.VERTICAL_AXIS&&(this.deltaY=-s.detail/3),"undefined"!=typeof o.wheelDeltaX?i.isSafari&&n.isWindows?this.deltaX=-(o.wheelDeltaX/120):this.deltaX=o.wheelDeltaX/120:"undefined"!=typeof s.HORIZONTAL_AXIS&&s.axis===s.HORIZONTAL_AXIS&&(this.deltaX=-e.detail/3),0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}return e.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e}();t.StandardMouseWheelEvent=c}),define("vs/base/common/bits/hash",["require","exports","vs/base/common/bits/bits","vs/base/common/bits/encoding","vs/base/common/types"],function(e,t,n,i,r){function o(e,t,n,i,r){for(var o=0,s=Math.min(e.byteLength-t,n.byteLength-i,r);s>o;o++)e[t+o]=n[i+o];return s}function s(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e.byteLength),void 0===i&&(i=0);for(var r=0;n>r;r++)e[t+r]=i}function a(e,t,n){if("undefined"==typeof ArrayBuffer)return null;var o=r.isString(e)?i.encodeToUTF8(e,t):e,s=new c;return n&&s.update(n(o.byteLength)),o.byteLength&&s.update(o),s.digest()}var c=function(){function e(){this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.length=0,this.buffer=new Uint8Array(e.BLOCK_SIZE),this.bufferDV=new DataView(this.buffer.buffer),this.bufferLength=0,this.bigBlock32=new DataView(new ArrayBuffer(320))}return e.digest=function(t){var n=new e;return n.update(t),n.digest()},e.prototype.update=function(t){if(!this.buffer)throw new Error("Digest already computed.");var n;n=r.isString(t)?new Uint8Array(i.encodeToUTF8(t)):t instanceof ArrayBuffer?new Uint8Array(t):t instanceof DataView?new Uint8Array(t.buffer):t;for(var s=0,a=0;a<n.byteLength;)s=o(this.buffer,this.bufferLength,n,a,n.byteLength),this.bufferLength+=s,a+=s,this.bufferLength===e.BLOCK_SIZE&&(this.step(this.bufferDV),this.bufferLength=0);this.length+=a},e.prototype.digest=function(){return this.buffer&&this.wrapUp(),n.toHexString(this.h0)+n.toHexString(this.h1)+n.toHexString(this.h2)+n.toHexString(this.h3)+n.toHexString(this.h4)},e.prototype.wrapUp=function(){this.buffer[this.bufferLength++]=128,s(this.buffer,this.bufferLength),this.bufferLength>56&&(this.step(this.bufferDV),s(this.buffer));var e=n.multiply64(8,this.length);this.bufferDV.setUint32(56,e[0],!1),this.bufferDV.setUint32(60,e[1],!1),this.step(this.bufferDV),this.buffer=null,this.bufferDV=null,this.bufferLength=-1},e.prototype.step=function(e){for(var t=0;64>t;t+=4)this.bigBlock32.setUint32(t,e.getUint32(t,!1),!1);for(t=64;320>t;t+=4)this.bigBlock32.setUint32(t,n.leftRotate(this.bigBlock32.getUint32(t-12,!1)^this.bigBlock32.getUint32(t-32,!1)^this.bigBlock32.getUint32(t-56,!1)^this.bigBlock32.getUint32(t-64,!1),1),!1);var i,r,o,s=this.h0,a=this.h1,c=this.h2,u=this.h3,l=this.h4;for(t=0;80>t;t++)20>t?(i=a&c|~a&u,r=1518500249):40>t?(i=a^c^u,r=1859775393):60>t?(i=a&c|a&u|c&u,r=2400959708):(i=a^c^u,r=3395469782),o=n.leftRotate(s,5)+i+l+r+this.bigBlock32.getUint32(4*t,!1)&4294967295,l=u,u=c,c=n.leftRotate(a,30),a=s,s=o;this.h0=this.h0+s&4294967295,this.h1=this.h1+a&4294967295,this.h2=this.h2+c&4294967295,this.h3=this.h3+u&4294967295,this.h4=this.h4+l&4294967295},e.BLOCK_SIZE=64,e}();t.SHA1=c,t.computeSHA1Hash=a}),define("vs/base/common/graph",["require","exports","vs/base/common/types","vs/base/common/collections"],function(e,t,n,i){function r(e){return{data:e,incoming:{},outgoing:{}}}t.newNode=r;var o=function(){function e(e){this._hashFn=e,this._nodes=Object.create(null)}return e.prototype.roots=function(){var e=[];return i.forEach(this._nodes,function(t){n.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e},e.prototype.traverse=function(e,t,n){var i=this.lookup(e);i&&this._traverse(i,t,{},n)},e.prototype._traverse=function(e,t,n,r){var o=this,s=this._hashFn(e.data);if(!i.contains(n,s)){n[s]=!0,r(e.data);var a=t?e.outgoing:e.incoming;i.forEach(a,function(e){return o._traverse(e.value,t,n,r)})}},e.prototype.insertEdge=function(e,t){var n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing[this._hashFn(t)]=i,i.incoming[this._hashFn(e)]=n},e.prototype.removeNode=function(e){var t=this._hashFn(e);delete this._nodes[t],i.forEach(this._nodes,function(e){delete e.value.outgoing[t],delete e.value.incoming[t]})},e.prototype.lookupOrInsertNode=function(e){var t=this._hashFn(e),n=i.lookup(this._nodes,t);return n||(n=r(e),this._nodes[t]=n),n},e.prototype.lookup=function(e){return i.lookup(this._nodes,this._hashFn(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this._nodes).length},enumerable:!0,configurable:!0}),e}();t.Graph=o}),define("vs/base/common/numbers",["require","exports","vs/base/common/types"],function(e,t,n){function i(e,t,i){var r,o;n.isNumber(t)?(r=e,o=t):(r=0,o=e,i=t);for(var s=o>=r?function(e){return e+1}:function(e){return e-1},a=o>=r?function(e,t){return t>e}:function(e,t){return e>t},c=r;a(c,o);c=s(c))i(c)}function r(e,t){var r=[],o=function(e){return r.push(e)};return n.isUndefined(t)?i(e,o):i(e,t,o),r}t.count=i,t.countToArray=r}),define("vs/base/common/objects",["require","exports","vs/base/common/types"],function(e,t,n){function i(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(n){e[n]&&"object"==typeof e[n]?t[n]=i(e[n]):t[n]=e[n]}),t}function r(e){if(!e||"object"!=typeof e)return e;var t=Array.isArray(e)?[]:{};return Object.getOwnPropertyNames(e).forEach(function(n){e[n]&&"object"==typeof e[n]?t[n]=r(e[n]):t[n]=e[n]}),t}function o(e,t){return s(e,t,[])}function s(e,t,i){if(n.isUndefinedOrNull(e))return e;var r=t(e);if("undefined"!=typeof r)return r;if(n.isArray(e)){for(var o=[],a=0;a<e.length;a++)o.push(s(e[a],t,i));return o}if(n.isObject(e)){if(i.indexOf(e)>=0)throw new Error("Cannot clone recursive data-structure");i.push(e);var c={};for(var u in e)v.call(e,u)&&(c[u]=s(e[u],t,i));return i.pop(),c}return e}function a(e,t,i){return void 0===i&&(i=!0),n.isObject(e)?(n.isObject(t)&&Object.keys(t).forEach(function(r){r in e?i&&(n.isObject(e[r])&&n.isObject(t[r])?a(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){return Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}function u(e,t){return a(i(t),e||{})}function l(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1}else{var r=[];for(i in e)r.push(i);r.sort();var o=[];for(i in t)o.push(i);if(o.sort(),!l(r,o))return!1;for(n=0;n<r.length;n++)if(!l(e[r[n]],t[r[n]]))return!1}return!0}function d(e,t,n){"undefined"==typeof e[t]&&(e[t]=n)}function h(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function p(e,t){void 0===t&&(t=!1),t&&(e=e.map(function(e){return e.toLowerCase()}));var n=h(e);return t?function(e){return void 0!==n[e.toLowerCase()]&&n.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==n[e]&&n.hasOwnProperty(e)}}function f(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t=t||function(){};var i=e.prototype,r=t.prototype;t.prototype=Object.create(i);for(var n in r)r.hasOwnProperty(n)&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r,n));Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0,enumerable:!0})}function m(e){var t=[];return JSON.stringify(e,function(e,i){if(n.isObject(i)||Array.isArray(i)){if(-1!==t.indexOf(i))return"[Circular]";t.push(i)}return i})}t.clone=i,t.deepClone=r;var v=Object.prototype.hasOwnProperty;t.cloneAndChange=o,t.mixin=a,t.assign=c,t.withDefaults=u,t.equals=l,t.ensureProperty=d,t.arrayToHash=h,t.createKeywordMatcher=p,t.derive=f,t.safeStringify=m}),define("vs/base/common/marshalling",["require","exports","vs/base/common/objects","vs/base/common/types"],function(e,t,n,i){function r(e){l.push(e)}function o(e){for(var t=0;t<l.length;t++){var n=l[t];if(n.canSerialize(e))return!0}return d&&d.canSerialize(e)?!0:void 0}function s(e){return n.cloneAndChange(e,function(e){if("object"==typeof e){for(var t=0;t<l.length;t++){var n=l[t];if(n.canSerialize(e))return n.serialize(e,s)}if(d&&d.canSerialize(e))return d.serialize(e,s)}})}function a(e){return n.cloneAndChange(e,function(e){if(i.isObject(e)){for(var t=0;t<l.length;t++){var n=l[t];if(n.canDeserialize(e))return n.deserialize(e,a)}if(d&&d.canDeserialize(e))return d.deserialize(e,a)}})}function c(e,t){void 0===t&&(t=null),d=t;var n=JSON.stringify(s(e));return d=null,n}function u(e,t){void 0===t&&(t=null),d=t;var n=a(JSON.parse(e));return d=null,n}var l=[];t.registerMarshallingContribution=r;var d=null;t.canSerialize=o,t.serialize=s,t.deserialize=a,r({canSerialize:function(e){return e instanceof RegExp},serialize:function(e,t){var n="";return e.global?n+="g":e.ignoreCase?n+="i":e.multiline&&(n+="m"),{$isRegExp:!0,source:e.source,flags:n}},canDeserialize:function(e){return e.$isRegExp},deserialize:function(e,t){return new RegExp(e.source,e.flags)}}),t.marshallObject=c,t.demarshallObject=u}),define("vs/base/common/parsers",["require","exports","vs/base/common/types"],function(e,t,n){!function(e){e[e.OK=0]="OK",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Fatal=4]="Fatal"}(t.ValidationState||(t.ValidationState={}));var i=t.ValidationState,r=function(){function e(){this._state=i.OK}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){e>this._state&&(this._state=e)},enumerable:!0,configurable:!0}),e.prototype.isOK=function(){return this._state===i.OK},e.prototype.isFatal=function(){return this._state===i.Fatal},e}();t.ValidationStatus=r;var o=function(){function e(e,t){void 0===t&&(t=new r),this._logger=e,this.validationStatus=t}return Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.validationStatus},enumerable:!0,configurable:!0}),e.prototype.log=function(e){this._logger.log(e)},e.prototype.is=function(e,t,i,r,o,s){return n.isUndefined(e)?(o&&(this.validationStatus.state=o),s&&this.log(s),!1):t(e)?!0:(i&&(this.validationStatus.state=i),r&&this.log(r),!1)},e.merge=function(e,t,i){var r=this;Object.keys(t).forEach(function(o){var s=e[o],a=t[o];if(!n.isUndefined(a))if(n.isUndefined(s))e[o]=a;else if(i){n.isObject(s)&&n.isObject(a)?r.merge(s,a,i):e[o]=a}})},e}();t.Parser=o;var s=function(){function e(){}return e.prototype.resolve=function(e){return n.isString(e)?this.__resolveString(e):n.isArray(e)?this.__resolveArray(e):n.isObject(e)?this.__resolveLiteral(e):void 0},e.prototype.__resolveString=function(e){var t=this,i=/\$\{(.*?)\}/g;return e.replace(i,function(e,i){var r=t[i];return n.isString(r)?r:e&&e.indexOf("env.")>0?"":e})},e.prototype.__resolveLiteral=function(e){var t=this,n=Object.create(null);return Object.keys(e).forEach(function(i){var r=e[i];n[i]=t.resolve(r)}),n},e.prototype.__resolveArray=function(e){var t=this;return e.map(function(e){return t.__resolveString(e)})},e}();t.AbstractSystemVariables=s}),define("vs/base/common/uri",["require","exports","vs/base/common/marshalling","vs/base/common/platform"],function(e,t,n,i){function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var o=function(){function e(){this._scheme=e._empty,this._authority=e._empty,this._path=e._empty,this._query=e._empty,this._fragment=e._empty}return Object.defineProperty(e.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fsPath",{get:function(){if(!this._fsPath){var t;t=this._authority&&"file"===this.scheme?"//"+this._authority+this._path:e._driveLetterPath.test(this._path)?this._path[1].toLowerCase()+this._path.substr(2):this._path,i.isWindows&&(t=t.replace(/\//g,"\\")),this._fsPath=t}return this._fsPath},enumerable:!0,configurable:!0}),e.prototype["with"]=function(t,n,i,r,o){var s=new e;return s._scheme=t||this.scheme,s._authority=n||this.authority,s._path=i||this.path,s._query=r||this.query,s._fragment=o||this.fragment,e._validate(s),s},e.prototype.withScheme=function(e){return this["with"](e,void 0,void 0,void 0,void 0)},e.prototype.withAuthority=function(e){return this["with"](void 0,e,void 0,void 0,void 0)},e.prototype.withPath=function(e){return this["with"](void 0,void 0,e,void 0,void 0)},e.prototype.withQuery=function(e){return this["with"](void 0,void 0,void 0,e,void 0)},e.prototype.withFragment=function(e){return this["with"](void 0,void 0,void 0,void 0,e)},e.parse=function(t){var n=e._parse(t);return n=n["with"](void 0,decodeURIComponent(n.authority),decodeURIComponent(n.path),decodeURIComponent(n.query),decodeURIComponent(n.fragment))},e.file=function(t){t=t.replace(/\\/g,"/"),t=t.replace(/%/g,"%25"),t=t.replace(/#/g,"%23"),t=t.replace(/\?/g,"%3F"),t=e._driveLetter.test(t)?"/"+t:t;var n=e._parse(t);if(n.scheme||n.fragment||n.query)throw new Error("Path contains a scheme, fragment or a query. Can not convert it to a file uri.");return n=n["with"]("file",void 0,decodeURIComponent(n.path),void 0,void 0)},e._parse=function(t){var n=new e,i=e._regexp.exec(t);return i&&(n._scheme=i[2]||n._scheme,n._authority=i[4]||n._authority,n._path=i[5]||n._path,n._query=i[7]||n._query,n._fragment=i[9]||n._fragment),e._validate(n),n},e.create=function(t,n,i,r,o){return(new e)["with"](t,n,i,r,o)},e._validate=function(e){if(e.authority&&e.path&&"/"!==e.path[0])throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character');if(!e.authority&&0===e.path.indexOf("//"))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')},e.prototype.toString=function(){if(!this._formatted){var t=[];if(this._scheme&&(t.push(this._scheme),t.push(":")),(this._authority||"file"===this._scheme)&&t.push("//"),this._authority){var n,i=this._authority;i=i.toLowerCase(),n=i.indexOf(":"),-1===n?t.push(r(i)):(t.push(r(i.substr(0,n))),t.push(i.substr(n)))}if(this._path){var o,s=this._path;e._driveLetterPath.test(s)?s="/"+s[1].toLowerCase()+s.substr(2):e._driveLetter.test(s)&&(s=s[0].toLowerCase()+s.substr(1)),o=s.split("/");for(var a=0,c=o.length;c>a;a++)o[a]=r(o[a]);t.push(o.join("/"))}if(this._query){var u=/https?/i.test(this.scheme)?encodeURI:r;t.push("?"),t.push(u(this._query))}this._fragment&&(t.push("#"),t.push(r(this._fragment))),this._formatted=t.join("")}return this._formatted},e.prototype.toJSON=function(){return this.toString()},e.prototype._toSerialized=function(){return{$isURI:!0,_scheme:this._scheme,_authority:this._authority,_path:this._path,_query:this._query,_fragment:this._fragment.replace(/URL_MARSHAL_REMOVE.*$/,""),_fsPath:this._fsPath,_formatted:this._formatted&&this._formatted.replace(/#?URL_MARSHAL_REMOVE.*$/,"")}},e._fromSerialized=function(t){var n=new e;return n._scheme=t._scheme,n._authority=t._authority,n._path=t._path,n._query=t._query,n._fragment=t._fragment,n._fsPath=t._fsPath,n._formatted=t._formatted,n},e.isURI=function(t){return t instanceof e?!0:t?"string"!=typeof t.scheme?!1:"string"!=typeof t.authority?!1:"string"!=typeof t.fsPath?!1:"string"!=typeof t.query?!1:"string"!=typeof t.fragment?!1:"function"!=typeof t["with"]?!1:"function"!=typeof t.withScheme?!1:"function"!=typeof t.withAuthority?!1:"function"!=typeof t.withPath?!1:"function"!=typeof t.withQuery?!1:"function"!=typeof t.withFragment?!1:"function"!=typeof t.toString?!1:"function"!=typeof t.toJSON?!1:!0:!1},e._empty="",e._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,e._driveLetterPath=/^\/[a-zA-z]:/,e._driveLetter=/^[a-zA-z]:/,e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o,n.registerMarshallingContribution({canSerialize:function(e){return o.isURI(e)},serialize:function(e,t){return e._toSerialized()},canDeserialize:function(e){return e.$isURI},deserialize:function(e,t){return o._fromSerialized(e)}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/uuid",["require","exports"],function(e,t){function n(){return new s}function i(e){if(!a.test(e))throw new Error("invalid uuid");return new o(e)}function r(){return n().asHex()}var o=function(){function e(e){this._value=e}return e.prototype.asHex=function(){return this._value},e.prototype.equals=function(e){return this.asHex()===e.asHex()},e}(),s=function(e){function t(){e.call(this,[t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}return __extends(t,e),t._oneOf=function(e){var t=Math.floor(e.length*Math.random());return e[t]},t._randomHex=function(){return t._oneOf(t._chars)},t._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t._timeHighBits=["8","9","a","b"],t}(o);t.empty=new o("00000000-0000-0000-0000-000000000000"),t.v4=n;var a=/^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/;t.parse=i,t.generateUuid=r}),"undefined"==typeof WinJS&&(!function(e){e.setImmediate||("undefined"!=typeof process&&"function"==typeof process.nextTick?e.setImmediate=function(e){return process.nextTick(e)}:e.setImmediate=function(e){return setTimeout(e,0)})}(this),function(e,t){function n(e,n){var i,r,o,s=Object.keys(n);for(r=0,o=s.length;o>r;r++){var a=s[r],c=95!==a.charCodeAt(0),u=n[a];!u||"object"!=typeof u||u.value===t&&"function"!=typeof u.get&&"function"!=typeof u.set?c?e[a]=u:(i=i||{},i[a]={value:u,enumerable:c,configurable:!0,writable:!0}):(u.enumerable===t&&(u.enumerable=c),i=i||{},i[a]=u)}i&&Object.defineProperties(e,i)}!function(t){function i(e,t,i){for(var r=e,o=t.split("."),s=0,a=o.length;a>s;s++){var c=o[s];r[c]||Object.defineProperty(r,c,{value:{},writable:!1,enumerable:!0,configurable:!0}),r=r[c]}return i&&n(r,i),r}function r(t,n){return i(e,t,n)}e[t]||(e[t]=Object.create(Object.prototype));var o=e[t];o.Namespace||(o.Namespace=Object.create(Object.prototype)),Object.defineProperties(o.Namespace,{defineWithParent:{value:i,writable:!0,enumerable:!0,configurable:!0},define:{value:r,writable:!0,enumerable:!0,configurable:!0}})}("WinJS"),function(e){function t(t,i,r){return t=t||function(){},e.Utilities.markSupportedForProcessing(t),i&&n(t.prototype,i),r&&n(t,r),t}function i(i,r,o,s){if(i){r=r||function(){};var a=i.prototype;return r.prototype=Object.create(a),e.Utilities.markSupportedForProcessing(r),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,configurable:!0,enumerable:!0}),o&&n(r.prototype,o),s&&n(r,s),r}return t(r,o,s)}function r(e){e=e||function(){};var t,i;for(t=1,i=arguments.length;i>t;t++)n(e.prototype,arguments[t]);return e}e.Namespace.define("WinJS.Class",{define:t,derive:i,mix:r})}(e.WinJS)}(this),function(e,t){function n(e){return e}function i(e,t,n){return e.split(".").reduce(function(e,t){return e?n(e[t]):null},t)}var r=!!e.Windows,o={notSupportedForProcessing:"Value is not supported within a declarative processing context, if you want it to be supported mark it using WinJS.Utilities.markSupportedForProcessing. The value was: '{0}'"};t.Namespace.define("WinJS.Utilities",{_setHasWinRT:{value:function(e){r=e},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return r},configurable:!1,enumerable:!0},_getMemberFiltered:i,getMember:function(t,r){return t?i(t,r||e,n):null},ready:function(n,i){return new t.Promise(function(r,o){function s(){if(n)try{n(),r()}catch(e){o(e)}else r()}var a=t.Utilities.testReadyState;a||(a=e.document?document.readyState:"complete"),"complete"===a||e.document&&null!==document.body?i?e.setImmediate(s):s():e.addEventListener("DOMContentLoaded",s,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:function(e){return e.supportedForProcessing=!0,e},configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(n){var i=!0;switch(i=i&&!(n===e),i=i&&!(n===e.location),i=i&&!(n instanceof HTMLIFrameElement),i=i&&!("function"==typeof n&&!n.supportedForProcessing),e.frames.length){case 0:break;case 1:i=i&&!(n===e.frames[0]);break;default:for(var r=0,s=e.frames.length;i&&s>r;r++)i=i&&!(n===e.frames[r])}if(i)return n;throw new t.ErrorFromName("WinJS.Utilities.requireSupportedForProcessing",t.Resources._formatString(o.notSupportedForProcessing,n))},configurable:!1,writable:!1,enumerable:!0}}),t.Namespace.define("WinJS",{validation:!1,strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})}(this,this.WinJS),function(e){function t(e,t,n){var i=e;return"function"==typeof i&&(i=i()),(n&&o.test(n)?"":n?n+": ":"")+(t?t.replace(r,":")+": ":"")+i}function n(t,n,i){var r=e.Utilities.formatLog(t,n,i);console[i&&o.test(i)?i:"log"](r)}function i(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var r=/\s+/g,o=/^(error|warn|info|log)$/;e.Namespace.define("WinJS.Utilities",{startLog:function(t){t=t||{},"string"==typeof t&&(t={tags:t});var o=t.type&&new RegExp("^("+i(t.type).replace(r," ").split(" ").join("|")+")$"),s=t.excludeTags&&new RegExp("(^|\\s)("+i(t.excludeTags).replace(r," ").split(" ").join("|")+")(\\s|$)","i"),a=t.tags&&new RegExp("(^|\\s)("+i(t.tags).replace(r," ").split(" ").join("|")+")(\\s|$)","i"),c=t.action||n;if(!(o||s||a||e.log))return void(e.log=c);var u=function(e,t,n){o&&!o.test(n)||s&&s.test(t)||a&&!a.test(t)||c(e,t,n),u.next&&u.next(e,t,n)};u.next=e.log,e.log=u},stopLog:function(){delete e.log},formatLog:t})}(this.WinJS),function(e,t){function n(e){var t="_on"+e+"state";return{get:function(){var e=this[t];return e&&e.userHandler},set:function(n){var i=this[t];n?(i||(i={wrapper:function(e){return i.userHandler(e)},userHandler:n},Object.defineProperty(this,t,{value:i,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(e,i.wrapper,!1)),i.userHandler=n):i&&(this.removeEventListener(e,i.wrapper,!1),this[t]=null)},enumerable:!0}}function i(e){for(var t={},i=0,r=arguments.length;r>i;i++){var o=arguments[i];t["on"+o]=n(o)}return t}var r=e.Class.define(function(e,t,n){this.detail=t,this.target=n,this.timeStamp=Date.now(),this.type=e},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),o={_listeners:null,addEventListener:function(e,t,n){n=n||!1,this._listeners=this._listeners||{};for(var i=this._listeners[e]=this._listeners[e]||[],r=0,o=i.length;o>r;r++){var s=i[r];if(s.useCapture===n&&s.listener===t)return}i.push({listener:t,useCapture:n})},dispatchEvent:function(e,t){var n=this._listeners&&this._listeners[e];if(n){var i=new r(e,t,this);n=n.slice(0,n.length);for(var o=0,s=n.length;s>o&&!i._stopImmediatePropagationCalled;o++)n[o].listener(i);return i.defaultPrevented||!1}return!1},removeEventListener:function(e,t,n){n=n||!1;var i=this._listeners&&this._listeners[e];if(i)for(var r=0,o=i.length;o>r;r++){var s=i[r];if(s.listener===t&&s.useCapture===n){i.splice(r,1),0===i.length&&delete this._listeners[e];break}}}};e.Namespace.define("WinJS.Utilities",{_createEventProperty:n,createEventProperties:i,eventMixin:o})}(this.WinJS),function(e,t,n){var i,r=!1,o="contextchanged",s=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),t.Utilities.eventMixin),a=new s,c={malformedFormatStringInput:"Malformed, did you mean to escape your '{0}'?"};t.Namespace.define("WinJS.Resources",{addEventListener:function(e,n,i){if(t.Utilities.hasWinRT&&!r&&e===o)try{Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(e){t.Resources.dispatchEvent(o,{qualifier:e.key,changed:e.target[e.key]})},!1),r=!0}catch(s){}a.addEventListener(e,n,i)},removeEventListener:a.removeEventListener.bind(a),dispatchEvent:a.dispatchEvent.bind(a),_formatString:function(e){var n=arguments;return n.length>1&&(e=e.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(e,i,r,o,s,a){if(s||a)throw t.Resources._formatString(c.malformedFormatStringInput,s||a);return i&&"{"||r&&"}"||n[(0|o)+1]})),e},_getStringWinRT:function(e){if(!i){var t=Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{i=t.getSubtree("Resources")}catch(r){}i||(i=t)}var o,s,a;try{a=i.getValue(e),a&&(o=a.valueAsString,o===n&&(o=a.toString()))}catch(r){}if(!o)return{value:e,empty:!0};try{s=a.getQualifierValue("Language")}catch(r){return{value:o}}return{value:o,lang:s}},_getStringJS:function(t){var n=e.strings&&e.strings[t];return"string"==typeof n&&(n={value:n}),n||{value:t,empty:!0}}}),Object.defineProperties(t.Resources,t.Utilities.createEventProperties(o));var u;t.Resources.getString=function(e){return(u=u||(t.Utilities.hasWinRT?t.Resources._getStringWinRT:t.Resources._getStringJS))(e)}}(this,this.WinJS),function(e,t,n){function i(){}function r(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?D:P,e._value=t,e._setState(n)}function o(e,t,n,i,r,o){return{exception:e,error:t,promise:n,handler:o,id:i,parent:r}}function s(e,t,n,i){var r=n._isException,s=n._errorId;return o(r?t:null,r?null:t,e,s,n,i)}function a(e,t,n){var i=n._isException,r=n._errorId;return g(e,r,i),o(i?t:null,i?null:t,e,r,n)}function c(e,t){var n=++H;return g(e,n),o(null,t,e,n)}function u(e,t){var n=++H;return g(e,n,!0),o(t,null,e,n)}function l(e,t,n,i){v(e,{c:t,e:n,p:i})}function d(e,t,n,i){e._value=t,f(e,t,n,i),e._setState(F)}function h(e,t){var n=e._value,i=e._listeners;if(i){e._listeners=null;var r,o;for(r=0,o=Array.isArray(i)?i.length:1;o>r;r++){var s=1===o?i:i[r],a=s.c,c=s.promise;if(c){try{c._setCompleteValue(a?a(n):n)}catch(u){c._setExceptionValue(u)}c._state!==D&&c._listeners&&t.push(c)}else j.prototype.done.call(e,a)}}}function p(e,t){var n=e._value,i=e._listeners;
if(i){e._listeners=null;var r,o;for(r=0,o=Array.isArray(i)?i.length:1;o>r;r++){var a=1===o?i:i[r],c=a.e,u=a.promise;if(u){try{c?(c.handlesOnError||f(u,n,s,e,c),u._setCompleteValue(c(n))):u._setChainedErrorValue(n,e)}catch(l){u._setExceptionValue(l)}u._state!==D&&u._listeners&&t.push(u)}else U.prototype.done.call(e,null,c)}}}function f(e,t,n,i,r){if(C._listeners[T]){if(t instanceof Error&&t.message===I)return;C.dispatchEvent(T,n(e,t,i,r))}}function m(e,t){var n=e._listeners;if(n){var i,r;for(i=0,r=Array.isArray(n)?n.length:1;r>i;i++){var o=1===r?n:n[i],s=o.p;if(s)try{s(t)}catch(a){}o.c||o.e||!o.promise||o.promise._progress(t)}}}function v(e,t){var n=e._listeners;n?(n=Array.isArray(n)?n:[n],n.push(t)):n=t,e._listeners=n}function g(e,t,n){e._isException=n||!1,e._errorId=t}function y(e,t,n,i){e._value=t,f(e,t,n,i),e._setState(W)}function _(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?D:N,e._value=t,e._setState(n)}function b(e,t,n,i){var r=new K(e);return v(e,{promise:r,c:t,e:n,p:i}),r}function E(e){var n;return new t.Promise(function(t){e?n=setTimeout(t,e):setImmediate(t)},function(){n&&clearTimeout(n)})}function S(e,t){var n=function(){t.cancel()},i=function(){e.cancel()};return e.then(n),t.then(i,i),t}e.Debug&&(e.Debug.setNonUserCodeExceptions=!0);var w=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),t.Utilities.eventMixin),C=new w;C._listeners={};var T="error",I="Canceled",k=!1,x={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};x.all=x.promise|x.thenPromise|x.errorPromise|x.exceptionPromise|x.completePromise;var A,R,D,L,M,O,P,N,F,W,H=1;A={name:"created",enter:function(e){e._setState(R)},cancel:i,done:i,then:i,_completed:i,_error:i,_notify:i,_progress:i,_setCompleteValue:i,_setErrorValue:i},R={name:"working",enter:i,cancel:function(e){e._setState(M)},done:l,then:b,_completed:r,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},D={name:"waiting",enter:function(e){var t=e._value,n=function(i){t._errorId?e._chainedError(i,t):(f(e,i,s,t,n),e._error(i))};n.handlesOnError=!0,t.then(e._completed.bind(e),n,e._progress.bind(e))},cancel:function(e){e._setState(L)},done:l,then:b,_completed:r,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},L={name:"waiting_canceled",enter:function(e){e._setState(O);var t=e._value;t.cancel&&t.cancel()},cancel:i,done:l,then:b,_completed:r,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},M={name:"canceled",enter:function(e){e._setState(O),e._cancelAction()},cancel:i,done:l,then:b,_completed:r,_error:d,_notify:i,_progress:m,_setCompleteValue:_,_setErrorValue:y},O={name:"canceling",enter:function(e){var t=new Error(I);t.name=t.message,e._value=t,e._setState(F)},cancel:i,done:i,then:i,_completed:i,_error:i,_notify:i,_progress:i,_setCompleteValue:i,_setErrorValue:i},P={name:"complete_notify",enter:function(e){if(e.done=j.prototype.done,e.then=j.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.pop(),t._state._notify(t,n);e._setState(N)},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:h,_progress:i,_setCompleteValue:i,_setErrorValue:i},N={name:"success",enter:function(e){e.done=j.prototype.done,e.then=j.prototype.then,e._cleanupAction()},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:h,_progress:i,_setCompleteValue:i,_setErrorValue:i},F={name:"error_notify",enter:function(e){if(e.done=U.prototype.done,e.then=U.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.pop(),t._state._notify(t,n);e._setState(W)},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:p,_progress:i,_setCompleteValue:i,_setErrorValue:i},W={name:"error",enter:function(e){e.done=U.prototype.done,e.then=U.prototype.then,e._cleanupAction()},cancel:i,done:null,then:null,_completed:i,_error:i,_notify:p,_progress:i,_setCompleteValue:i,_setErrorValue:i};var V,B=t.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(e,t,n){this._state.done(this,e,t,n)},then:function(e,t,n){return this._state.then(this,e,t,n)},_chainedError:function(e,t){var n=this._state._error(this,e,a,t);return this._run(),n},_completed:function(e){var t=this._state._completed(this,e);return this._run(),t},_error:function(e){var t=this._state._error(this,e,c);return this._run(),t},_progress:function(e){this._state._progress(this,e)},_setState:function(e){this._nextState=e},_setCompleteValue:function(e){this._state._setCompleteValue(this,e),this._run()},_setChainedErrorValue:function(e,t){var n=this._state._setErrorValue(this,e,a,t);return this._run(),n},_setExceptionValue:function(e){var t=this._state._setErrorValue(this,e,u);return this._run(),t},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),K=t.Class.derive(B,function(e){k&&(k===!0||k&x.thenPromise)&&(this._stack=t.Promise._getStack()),this._creator=e,this._setState(A),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),U=t.Class.define(function(e){k&&(k===!0||k&x.errorPromise)&&(this._stack=t.Promise._getStack()),this._value=e,f(this,e,c)},{cancel:function(){},done:function(e,t){var n=this._value;if(t)try{t.handlesOnError||f(null,n,s,this,t);var i=t(n);return void(i&&"object"==typeof i&&"function"==typeof i.done&&i.done())}catch(r){n=r}n instanceof Error&&n.message===I||setImmediate(function(){throw n})},then:function(e,t){if(!t)return this;var n,i=this._value;try{t.handlesOnError||f(null,i,s,this,t),n=new j(t(i))}catch(r){n=r===i?this:new z(r)}return n}},{supportedForProcessing:!1}),z=t.Class.derive(U,function(e){k&&(k===!0||k&x.exceptionPromise)&&(this._stack=t.Promise._getStack()),this._value=e,f(this,e,u)},{},{supportedForProcessing:!1}),j=t.Class.define(function(e){if(k&&(k===!0||k&x.completePromise)&&(this._stack=t.Promise._getStack()),e&&"object"==typeof e&&"function"==typeof e.then){var n=new K(null);return n._setCompleteValue(e),n}this._value=e},{cancel:function(){},done:function(e){if(e)try{var t=e(this._value);t&&"object"==typeof t&&"function"==typeof t.done&&t.done()}catch(n){setImmediate(function(){throw n})}},then:function(e){try{var t=e?e(this._value):this._value;return t===this._value?this:new j(t)}catch(n){return new z(n)}}},{supportedForProcessing:!1}),q=t.Class.derive(B,function(e,n){k&&(k===!0||k&x.promise)&&(this._stack=t.Promise._getStack()),this._oncancel=n,this._setState(A),this._run();try{var i=this._completed.bind(this),r=this._error.bind(this),o=this._progress.bind(this);e(i,r,o)}catch(s){this._setExceptionValue(s)}},{_oncancel:null,_cancelAction:function(){try{if(!this._oncancel)throw new Error("Promise did not implement oncancel");this._oncancel()}catch(e){e.message,e.stack;C.dispatchEvent("error",e)}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(e,t,n){C.addEventListener(e,t,n)},any:function(e){return new q(function(n,i,r){var o=Object.keys(e);Array.isArray(e)?[]:{};0===o.length&&n();var s=0;o.forEach(function(r){q.as(e[r]).then(function(){n({key:r,value:e[r]})},function(a){return a instanceof Error&&a.name===I?void(++s===o.length&&n(t.Promise.cancel)):void i({key:r,value:e[r]})})})},function(){var t=Object.keys(e);t.forEach(function(t){var n=q.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},as:function(e){return e&&"object"==typeof e&&"function"==typeof e.then?e:new j(e)},cancel:{get:function(){return V=V||new U(new t.ErrorFromName(I))}},dispatchEvent:function(e,t){return C.dispatchEvent(e,t)},is:function(e){return e&&"object"==typeof e&&"function"==typeof e.then},join:function(e){return new q(function(i,r,o){var s=Object.keys(e),a=Array.isArray(e)?[]:{},c=Array.isArray(e)?[]:{},u=0,l=s.length,d=function(e){if(0===--l){var n=Object.keys(a).length;if(0===n)i(c);else{var u=0;s.forEach(function(e){var t=a[e];t instanceof Error&&t.name===I&&u++}),u===n?i(t.Promise.cancel):r(a)}}else o({Key:e,Done:!0})};return s.forEach(function(t){var i=e[t];i===n?u++:q.then(i,function(e){c[t]=e,d(t)},function(e){a[t]=e,d(t)})}),l-=u,0===l?void i(c):void 0},function(){Object.keys(e).forEach(function(t){var n=q.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},removeEventListener:function(e,t,n){C.removeEventListener(e,t,n)},supportedForProcessing:!1,then:function(e,t,n,i){return q.as(e).then(t,n,i)},thenEach:function(e,t,n,i){var r=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(o){r[o]=q.as(e[o]).then(t,n,i)}),q.join(r)},timeout:function(e,t){var n=E(e);return t?S(n,t):n},wrap:function(e){return new j(e)},wrapError:function(e){return new U(e)},_veryExpensiveTagWithStack:{get:function(){return k},set:function(e){k=e}},_veryExpensiveTagWithStack_tag:x,_getStack:function(){if(Debug.debuggerEnabled)try{throw new Error}catch(e){return e.stack}}});Object.defineProperties(q,t.Utilities.createEventProperties(T));var G=t.Class.derive(B,function(e){this._oncancel=e,this._setState(A),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),Y=t.Class.define(function(e){this._promise=new G(e)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(e){this._promise._completed(e)},error:function(e){this._promise._error(e)},progress:function(e){this._promise._progress(e)}},{supportedForProcessing:!1});t.Namespace.define("WinJS",{Promise:q,_Signal:Y})}(this,this.WinJS),function(e,t){t.Namespace.define("WinJS",{ErrorFromName:t.Class.derive(Error,function(e,t){this.name=e,this.message=t||e},{},{supportedForProcessing:!1})})}(this,this.WinJS),function(e){e.Namespace.define("WinJS",{xhr:function(t){var n;return new e.Promise(function(e,i,r){n=new XMLHttpRequest,n.onreadystatechange=function(){n._canceled||(4===n.readyState?(n.status>=200&&n.status<300||1223===n.status?e(n):i(n),n.onreadystatechange=function(){}):r(n))},n.open(t.type||"GET",t.url,!0,t.user,t.password),n.responseType=t.responseType||"",Object.keys(t.headers||{}).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),t.customRequestInitializer&&t.customRequestInitializer(n),n.send(t.data)},function(){n._canceled=!0,n.abort()})}})}(this.WinJS),function(e,t,n){var i,r,o,s,a,c,u={nonStaticHTML:"Unable to add dynamic content. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property or the document.write method to add a script element will generate this exception. If the content is safe and from a trusted source, use a method to explicitly manipulate elements and attributes, such as createElement, or use setInnerHTMLUnsafe (or other unsafe method)."};i=r=function(e,t){e.innerHTML=t},o=s=function(e,t){e.outerHTML=t},a=c=function(e,t,n){e.insertAdjacentHTML(t,n)};var l=e.MSApp;if(l)r=function(e,t){l.execUnsafeLocalFunction(function(){e.innerHTML=t})},s=function(e,t){l.execUnsafeLocalFunction(function(){e.outerHTML=t})},c=function(e,t,n){l.execUnsafeLocalFunction(function(){e.insertAdjacentHTML(t,n)})};else if(e.msIsStaticHTML){var d=function(n){if(!e.msIsStaticHTML(n))throw new t.ErrorFromName("WinJS.Utitilies.NonStaticHTML",u.nonStaticHTML)};i=function(e,t){d(t),e.innerHTML=t},o=function(e,t){d(t),e.outerHTML=t},a=function(e,t,n){d(n),e.insertAdjacentHTML(t,n)}}t.Namespace.define("WinJS.Utilities",{setInnerHTML:i,setInnerHTMLUnsafe:r,setOuterHTML:o,setOuterHTMLUnsafe:s,insertAdjacentHTML:a,insertAdjacentHTMLUnsafe:c})}(this,this.WinJS)),function(e){"undefined"==typeof exports&&"function"==typeof define&&define.amd?define("vs/base/common/winjs.base.raw",e.WinJS):module.exports=e.WinJS}(this),define("vs/base/node/decoder",["require","exports","string_decoder"],function(e,t,n){var i=function(){function e(e){void 0===e&&(e="utf8"),this.stringDecoder=new n.StringDecoder(e),this.remaining=null}return e.prototype.write=function(e){var t=[],n=this.remaining?this.remaining+this.stringDecoder.write(e):this.stringDecoder.write(e);if(n.length<1)return t;for(var i,r=0;r<n.length&&(13===(i=n.charCodeAt(r))||10===i);)r++;for(var o=r;o<n.length;)if(i=n.charCodeAt(o),13===i||10===i){for(t.push(n.substring(r,o)),o++;o<n.length&&(13===(i=n.charCodeAt(o))||10===i);)o++;r=o}else o++;return this.remaining=r<n.length?n.substr(r):null,t},e.prototype.end=function(){return this.remaining},e}();t.LineDecoder=i}),define("vs/base/node/flow",["require","exports","assert"],function(e,t,n){function i(e,t,n){var i=new Array(e.length),r=new Array(e.length),o=!1,s=0;return 0===e.length?n(null,[]):void e.forEach(function(a,c){t(a,function(t,a){return t?(o=!0,i[c]=null,r[c]=t):(i[c]=a,r[c]=null),++s===e.length?n(o?r:null,i):void 0})})}function r(e,t,i){if(n.ok(e,"Missing first parameter"),n.ok("function"==typeof t,"Second parameter must be a function that is called for each element"),n.ok("function"==typeof i,"Third parameter must be a function that is called on error and success"),"function"==typeof e)try{e(function(e,n){e?i(e,null):r(n,t,i)})}catch(o){i(o,null)}else{var s=[],a=function(n){if(n<e.length)try{t(e[n],function(e,t){(e===!0||e===!1)&&(t=e,e=null),e?i(e,null):(t&&s.push(t),process.nextTick(function(){a(n+1)}))},n,e.length)}catch(r){i(r,null)}else i(null,s)};a(0)}}function o(e){n.ok(e.length>1,"Need at least one error handler and one function to process sequence"),e.forEach(function(e){n.ok("function"==typeof e)});var t=e.splice(0,1)[0],i=null;r(e,function(e,t){var n=function(e,n){(e===!0||e===!1)&&(n=e,e=null),e?t(e,null):(i=n,t(null,null))};try{e.call(n,i)}catch(r){t(r,null)}},function(e,n){e&&t(e)})}function s(e){o(Array.isArray(e)?e:Array.prototype.slice.call(arguments))}t.parallel=i,t.loop=r,t.sequence=s}),define("vs/base/node/plist",["require","exports","sax"],function(e,t,n){function i(e){var t=[],i=null,r=null,o=null,s=n.parser(!1,{lowercase:!0});return s.onerror=function(e){t.push(e.message)},s.ontext=function(e){o=e},s.onopentag=function(e){switch(e.name){case"dict":i={parent:i,value:{}};break;case"array":i={parent:i,value:[]};break;case"key":i&&(i.lastKey=null)}o=""},s.onclosetag=function(e){var n;switch(e){case"key":return!i||Array.isArray(i.value)?void t.push("key can only be used inside an open dict element"):void(i.lastKey=o);case"dict":case"array":if(!i)return void t.push(e+" closing tag found, without opening tag");n=i.value,i=i.parent;break;case"string":case"data":n=o;break;case"date":n=new Date(o);break;case"integer":if(n=parseInt(o),isNaN(n))return void t.push(o+" is not a integer");break;case"real":if(n=parseFloat(o),isNaN(n))return void t.push(o+" is not a float");break;case"true":n=!0;break;case"false":n=!1;break;case"plist":return;default:return void t.push("Invalid tag name: "+e)}i?Array.isArray(i.value)?i.value.push(n):i.lastKey?i.value[i.lastKey]=n:t.push("Dictionary key missing for value "+n):r=n},s.write(e),{errors:t,value:r}}t.parse=i}),define("vs/base/node/ports",["require","exports","net"],function(e,t,n){function i(e,t,r){if(0===t)return r(0);var o=e,s=n.createServer();s.listen(o,function(e){s.once("close",function(){return r(o)}),s.close()}),s.on("error",function(n){i(e+1,t-1,r)})}t.findFreePort=i}),define("vs/base/node/stdFork",["require","exports","path","os","net","child_process","vs/base/common/uri"],function(e,t,n,i,r,o,s){function a(e){for(var t=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n="",i=0;e>i;i++){var r=Math.floor(t.length*Math.random());n+=t[r]}return n}function c(){var e="vscode-"+a(40);return"win32"===process.platform?"\\\\.\\pipe\\"+e+"-sock":n.join(i.tmpdir(),e+".sock")}function u(e,t,n){var i={};for(var r in e)i[r]=e[r];return i.STDIN_PIPE_NAME=t,i.STDOUT_PIPE_NAME=n,i.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",i}function l(t,n,i,a){var l,d=!1,h=function(e){d||(d=!0,a(null,e))},p=function(e){d||(d=!0,a(e,null))},f=c(),m=c(),v=u(i.env||process.env,f,m),g=r.createServer(function(e){e.once("data",function(t){l.stdin=r.connect(f),l.stdout=e,h(l)})});g.listen(m);var y=!1,_=function(){y||(y=!0,g.close())},b=s["default"].parse(e.toUrl("./stdForkStart.js")).fsPath;l=o.fork(b,[t].concat(n),{silent:!0,cwd:i.cwd,env:v,execArgv:i.execArgv}),l.once("error",function(e){_(),p(e)}),l.once("exit",function(e){_(),p(e)})}t.fork=l}),define("vs/base/node/stream",["require","exports","fs"],function(e,t,n){function i(e,t,n){var i=!1,r=new Buffer(t),o=0;e.on("data",function(n){var i=Math.min(t-o,n.length);n.copy(r,o,0,i),o+=i,o===t&&e.destroy()}),e.on("error",function(e){i||(i=!0,n(e,null,null))});var s=function(){i||(i=!0,n(null,r,o))};e.on("close",s)}function r(e,t,i){n.open(e,"r",null,function(e,r){function o(e,t,o){n.close(r,function(n){return n?i(n,null,o):e&&"EISDIR"===e.code?i(e,null,o):i(null,t,o)})}function s(){n.read(r,a,c,t-c,null,function(e,n){return e?o(e,null,0):0===n?10===++u?o(null,a,c):s():(c+=n,c===t?o(null,a,c):s())})}if(e)return i(e,null,0);var a=new Buffer(t),c=0,u=0;s()})}t.readExactlyByStream=i,t.readExactlyByFile=r}),define("vs/base/node/encoding",["require","exports","vs/base/node/stream"],function(e,t,n){function i(e,n){if(!e||2>n)return null;var i=e.readUInt8(0),r=e.readUInt8(1);if(254===i&&255===r)return t.UTF16be;if(255===i&&254===r)return t.UTF16le;if(3>n)return null;var o=e.readUInt8(2);return 239===i&&187===r&&191===o?t.UTF8:null}function r(e,t){n.readExactlyByFile(e,3,function(e,n,r){return e?t(e,null):t(null,i(n,r))})}t.UTF8="utf8",t.UTF16be="utf16be",t.UTF16le="utf16le",t.detectEncodingByBOMFromBuffer=i,t.detectEncodingByBOM=r}),define("vs/base/parts/quickopen/browser/quickOpen",["require","exports"],function(e,t){!function(e){e[e.PREVIEW=0]="PREVIEW",e[e.OPEN=1]="OPEN"}(t.Mode||(t.Mode={}));t.Mode}),define("vs/base/parts/tree/browser/treeDnd",["require","exports"],function(e,t){var n=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}();t.ElementsDragAndDropData=n;var i=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}();t.ExternalElementsDragAndDropData=i;var r=function(){function e(){this.types=[],this.files=[]}return e.prototype.update=function(e){e.dataTransfer.types&&(this.types=[],Array.prototype.push.apply(this.types,e.dataTransfer.types)),e.dataTransfer.files&&(this.files=[],Array.prototype.push.apply(this.files,e.dataTransfer.files),this.files=this.files.filter(function(e){return e.size||e.type}))},e.prototype.getData=function(){return{types:this.types,files:this.files}},e}();t.DesktopDragAndDropData=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/common/tree",["require","exports"],function(e,t){var n=function(){function e(e,t,n){this._posx=e,this._posy=t,this._target=n}return e.prototype.preventDefault=function(){},e.prototype.stopPropagation=function(){},Object.defineProperty(e.prototype,"posx",{get:function(){return this._posx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"posy",{get:function(){return this._posy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e}();t.ContextMenuEvent=n;var i=function(e){function t(t){e.call(this,t.posx,t.posy,t.target),this.originalEvent=t}return __extends(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(n);t.MouseContextMenuEvent=i;var r=function(e){function t(t,n,i){e.call(this,t,n,i.target),this.originalEvent=i}return __extends(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(n);t.KeyboardContextMenuEvent=r,function(e){e[e.COPY=0]="COPY",e[e.MOVE=1]="MOVE"}(t.DragOverEffect||(t.DragOverEffect={}));var o=t.DragOverEffect;!function(e){e[e.BUBBLE_DOWN=0]="BUBBLE_DOWN",e[e.BUBBLE_UP=1]="BUBBLE_UP"}(t.DragOverBubble||(t.DragOverBubble={}));var s=t.DragOverBubble;t.DRAG_OVER_REJECT={accept:!1},t.DRAG_OVER_ACCEPT={accept:!0},t.DRAG_OVER_ACCEPT_BUBBLE_UP={accept:!0,bubble:s.BUBBLE_UP},t.DRAG_OVER_ACCEPT_BUBBLE_DOWN={accept:!0,bubble:s.BUBBLE_DOWN},t.DRAG_OVER_ACCEPT_BUBBLE_UP_COPY={accept:!0,bubble:s.BUBBLE_UP,effect:o.COPY},t.DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY={accept:!0,bubble:s.BUBBLE_DOWN,effect:o.COPY}}),define("vs/css!vs/base/browser/builder",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/actionbar/actionbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/button/button",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/checkbox/checkbox",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/contextview/contextview",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/countBadge/countBadge",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/dropdown/dropdown",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/filelabel/filelabel",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/findinput/findInput",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/inputbox/inputBox",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/leftRightWidget/leftRightWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/messagelist/messageList",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/progressbar/progressbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/resourceviewer/resourceviewer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/sash/sash",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/scrollbar/impl/scrollbars",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/splitview/splitview",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/timer/timer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/browser/ui/toolbar/toolbar",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/quickopen/browser/quickopen",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/tree/browser/actionsRenderer",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/base/parts/tree/browser/tree",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/contentWidgets/contentWidgets",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/decorations/decorations",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/glyphMargin/glyphMargin",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/lineNumbers/lineNumbers",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/linesDecorations/linesDecorations",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/overlayWidgets/overlayWidgets",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/scrollDecoration/scrollDecoration",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/selections/selections",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/viewParts/viewCursors/viewCursors",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/default-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/diffEditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/editor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/browser/widget/media/tokens",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/clipboard/browser/clipboard",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/codelens/browser/codelens",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/color/browser/color",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/find/browser/findWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/gotoError/browser/gotoError",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/hover/browser/hover",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/links/browser/links",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/outlineMarker/browser/outlineMarker",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/parameterHints/browser/parameterHints",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/quickFix/browser/quickFix",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/rename/browser/rename",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/snippet/browser/snippet",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/suggest/browser/suggest",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/zoneWidget/browser/peekViewWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/contrib/zoneWidget/browser/zoneWidget",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/css/hc-black-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/css/vs-dark-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/editor/css/vs-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/languages/css/common/css-hover",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/languages/typescript/common/typescript",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/platform/keybinding/browser/keybindings",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/hc-black-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/octicons/octicons",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/part",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/vs-dark-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/vs-theme",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/media/workbench",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/activitybar/media/activityBarPart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/activitybar/media/activityaction",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/binarydiffeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/binaryeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/editorpart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/editorstatus",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/iframeeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/sidebyside",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/textdiffeditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/editor/media/texteditor",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/quickopen/media/quickopen",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/sidebar/media/sidebarpart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/browser/parts/statusbar/media/statusbarPart",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/electron-browser/media/shell",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/debug/browser/media/debug.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/debug/browser/media/repl",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/extensions/electron-browser/media/extensions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/feedback/browser/media/feedback",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/explorerviewlet",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/fileactions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/files/browser/media/files.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/git/browser/media/git.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/markdown/browser/media/markdownactions",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/output/browser/media/outputactions.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/commandsHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/gotoSymbolHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/quickopen/browser/media/markerHandler",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/search/browser/media/search.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/css!vs/workbench/parts/tasks/electron-browser/media/task.contribution",["vs/css!vs/workbench/workbench.main"],{}),define("vs/editor/browser/config/elementSizeObserver",["require","exports"],function(e,t){var n=function(){function e(e,t){this.referenceDomElement=e,this.changeCallback=t,this.measureReferenceDomElementToken=-1,this.width=-1,this.height=-1,this.measureReferenceDomElement(!1)}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.dispose=function(){this.stopObserving()},e.prototype.startObserving=function(){var e=this;-1===this.measureReferenceDomElementToken&&(this.measureReferenceDomElementToken=window.setInterval(function(){return e.measureReferenceDomElement(!0)},100))},e.prototype.stopObserving=function(){-1!==this.measureReferenceDomElementToken&&(window.clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)},e.prototype.observe=function(e){this.measureReferenceDomElement(!0,e)},e.prototype.measureReferenceDomElement=function(e,t){var n=0,i=0;t?(n=t.width,i=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,
i=this.referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this.width!==n||this.height!==i)&&(this.width=n,this.height=i,e&&this.changeCallback())},e}();t.ElementSizeObserver=n}),define("vs/editor/browser/editorBrowser",["require","exports"],function(e,t){t.ClassNames={TEXTAREA_COVER:"textAreaCover",TEXTAREA:"inputarea",LINES_CONTENT:"lines-content",OVERFLOW_GUARD:"overflow-guard",VIEW_LINES:"view-lines",VIEW_LINE:"view-line",SCROLLABLE_ELEMENT:"editor-scrollable",CONTENT_WIDGETS:"contentWidgets",OVERLAY_WIDGETS:"overlayWidgets",MARGIN_VIEW_OVERLAYS:"margin-view-overlays",LINE_NUMBERS:"line-numbers",GLYPH_MARGIN:"glyph-margin",SCROLL_DECORATION:"scroll-decoration",VIEW_CURSORS_LAYER:"cursors-layer",VIEW_ZONES:"view-zones"},function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(t.ContentWidgetPositionPreference||(t.ContentWidgetPositionPreference={}));t.ContentWidgetPositionPreference;!function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(t.OverlayWidgetPositionPreference||(t.OverlayWidgetPositionPreference={}));t.OverlayWidgetPositionPreference}),define("vs/editor/common/config/defaultConfig",["require","exports"],function(e,t){var n=function(){function e(){this.editor={lineNumbers:!0,selectOnLineNumbers:!0,lineNumbersMinChars:5,glyphMargin:!1,lineDecorationsWidth:10,revealHorizontalRightPadding:30,roundedSelection:!0,theme:"vs",readOnly:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1},overviewRulerLanes:2,cursorBlinking:"blink",hideCursorInOverviewRuler:!1,scrollBeyondLastLine:!0,automaticLayout:!1,wrappingColumn:300,wrappingIndent:"same",wordWrapBreakBeforeCharacters:"{([+",wordWrapBreakAfterCharacters:" 	})]?|&,;",wordWrapBreakObtrusiveCharacters:".",tabFocusMode:!1,longLineBoundary:300,forcedTokenizationBoundary:1e3,hover:!0,contextmenu:!0,mouseWheelScrollSensitivity:1,quickSuggestions:!0,quickSuggestionsDelay:10,iconsInSuggestions:!0,autoClosingBrackets:!0,formatOnType:!1,suggestOnTriggerCharacters:!0,selectionHighlight:!0,outlineMarkers:!1,referenceInfos:!0,renderWhitespace:!1,tabSize:4,insertSpaces:!0,fontFamily:"",fontSize:0,lineHeight:0}}return e}();t.DefaultConfig=new n}),define("vs/editor/common/controller/cursorMoveHelper",["require","exports"],function(e,t){var n=function(){function e(e){this.configuration=e}return e.prototype.getLeftOfPosition=function(e,t,n){return n>e.getLineMinColumn(t)?n-=1:t>1&&(t-=1,n=e.getLineMaxColumn(t)),{lineNumber:t,column:n}},e.prototype.getRightOfPosition=function(e,t,n){return n<e.getLineMaxColumn(t)?n+=1:t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),{lineNumber:t,column:n}},e.prototype.getPositionUp=function(e,t,n,i,r){var o=this.visibleColumnFromColumn(e,t,n)+i;return t-=r,1>t?(t=1,n=e.getLineMinColumn(t)):n=this.columnFromVisibleColumn(e,t,o),i=o-this.visibleColumnFromColumn(e,t,n),{lineNumber:t,column:n,leftoverVisibleColumns:i}},e.prototype.getPositionDown=function(e,t,n,i,r){var o=this.visibleColumnFromColumn(e,t,n)+i;t+=r;var s=e.getLineCount();return t>s?(t=s,n=e.getLineMaxColumn(t)):n=this.columnFromVisibleColumn(e,t,o),i=o-this.visibleColumnFromColumn(e,t,n),{lineNumber:t,column:n,leftoverVisibleColumns:i}},e.prototype.getColumnAtBeginningOfLine=function(e,t,n){var i=e.getLineFirstNonWhitespaceColumn(t)||1,r=e.getLineMinColumn(t);return n=n!==r&&i>=n?r:i},e.prototype.getColumnAtEndOfLine=function(e,t,n){var i=e.getLineMaxColumn(t),r=e.getLineLastNonWhitespaceColumn(t)||i;return n=n!==i&&n>=r?i:r},e.prototype.visibleColumnFromColumn=function(t,n,i){return e.visibleColumnFromColumn(t,n,i,this.configuration.getIndentationOptions().tabSize)},e.visibleColumnFromColumn=function(t,n,i,r){return e.visibleColumnFromColumn2(t.getLineContent(n),i,r)},e.visibleColumnFromColumn2=function(t,n,i){for(var r=0,o=0;n-1>o;o++)r="	"===t.charAt(o)?e.nextTabColumn(r,i):r+1;return r},e.prototype.columnFromVisibleColumn=function(t,n,i){for(var r=t.getLineContent(n),o=-1,s=0,a=0;a<r.length&&i>=s;a++)o=s,s="	"===r.charAt(a)?e.nextTabColumn(s,this.configuration.getIndentationOptions().tabSize):s+1;s=Math.abs(i-s),o=Math.abs(i-o);var c;c=o>s?a+1:a;var u=t.getLineMinColumn(n);return u>c&&(c=u),c},e.nextTabColumn=function(e,t){return e+t-e%t},e.prevTabColumn=function(e,t){return e-1-(e-1)%t},e}();t.CursorMoveHelper=n}),define("vs/editor/common/controller/handlerDispatcher",["require","exports"],function(e,t){var n=function(){function e(e,t){this.source=e,this.data=t}return e.prototype.getSource=function(){return this.source},e.prototype.getData=function(){return this.data},e}();t.DispatcherEvent=n;var i=function(){function e(){this.registry={}}return e.prototype.setHandler=function(e,t){this.registry[e]=t},e.prototype.clearHandlers=function(){this.registry={}},e.prototype.getHandler=function(e){return this.registry.hasOwnProperty(e)?this.registry[e]:null},e.prototype.trigger=function(e,t,i){var r=this.getHandler(t),o=!1;if(r){var s=new n(e,i);o=r(s)}return o},e}();t.HandlerDispatcher=i}),define("vs/editor/common/core/arrays",["require","exports"],function(e,t){var n;!function(e){function t(e,t){for(var n,i=0,r=e.length-1;r>i;)n=i+Math.ceil((r-i)/2),e[n].startIndex>t?r=n-1:i=n;return i}e.findIndexInSegmentsArray=t}(n=t.Arrays||(t.Arrays={}))}),define("vs/editor/common/core/idGenerator",["require","exports"],function(e,t){var n=function(){function e(e){this._prefix=e,this._lastId=0}return e.prototype.generate=function(){return this._prefix+ ++this._lastId},e}();t.IdGenerator=n}),define("vs/editor/common/core/position",["require","exports"],function(e,t){var n=function(){function e(e,t){this.lineNumber=e,this.column=t}return e.prototype.equals=function(e){return!!e&&this.lineNumber===e.lineNumber&&this.column===e.column},e.prototype.isBefore=function(e){return this.lineNumber<e.lineNumber?!0:e.lineNumber<this.lineNumber?!1:this.column<e.column},e.prototype.isBeforeOrEqual=function(e){return this.lineNumber<e.lineNumber?!0:e.lineNumber<this.lineNumber?!1:this.column<=e.column},e.prototype.clone=function(){return new e(this.lineNumber,this.column)},e.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"},e.lift=function(t){return new e(t.lineNumber,t.column)},e.isIPosition=function(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column},e.asEmptyRange=function(e){return{startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column}},e.startPosition=function(e){return{lineNumber:e.startLineNumber,column:e.startColumn}},e.endPosition=function(e){return{lineNumber:e.endLineNumber,column:e.endColumn}},e}();t.Position=n}),define("vs/editor/common/core/range",["require","exports","vs/editor/common/core/position"],function(e,t,n){var i=function(){function e(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}return e.prototype.isEmpty=function(){return e.isEmpty(this)},e.prototype.containsPosition=function(t){return e.containsPosition(this,t)},e.prototype.containsRange=function(t){return e.containsRange(this,t)},e.prototype.plusRange=function(t){return e.plusRange(this,t)},e.prototype.intersectRanges=function(t){return e.intersectRanges(this,t)},e.prototype.equalsRange=function(t){return e.equalsRange(this,t)},e.prototype.getEndPosition=function(){return new n.Position(this.endLineNumber,this.endColumn)},e.prototype.getStartPosition=function(){return new n.Position(this.startLineNumber,this.startColumn)},e.prototype.cloneRange=function(){return new e(this.startLineNumber,this.startColumn,this.endLineNumber,this.endColumn)},e.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"},e.prototype.setEndPosition=function(t,n){return new e(this.startLineNumber,this.startColumn,t,n)},e.prototype.setStartPosition=function(t,n){return new e(t,n,this.endLineNumber,this.endColumn)},e.prototype.collapseToStart=function(){return new e(this.startLineNumber,this.startColumn,this.startLineNumber,this.startColumn)},e.lift=function(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null},e.isIRange=function(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn},e.isEmpty=function(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn},e.containsPosition=function(e,t){return t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber?!1:t.lineNumber===e.startLineNumber&&t.column<e.startColumn?!1:t.lineNumber===e.endLineNumber&&t.column>e.endColumn?!1:!0},e.containsRange=function(e,t){return t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber?!1:t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber?!1:t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn?!1:t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn?!1:!0},e.areIntersectingOrTouching=function(e,t){return e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn?!1:t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn?!1:!0},e.intersectRanges=function(t,n){var i=t.startLineNumber,r=t.startColumn,o=t.endLineNumber,s=t.endColumn,a=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,l=n.endColumn;return a>i?(i=a,r=c):i===a&&(r=Math.max(r,c)),o>u?(o=u,s=l):o===u&&(s=Math.min(s,l)),i>o?null:i===o&&r>s?null:new e(i,r,o,s)},e.plusRange=function(t,n){var i,r,o,s;return n.startLineNumber<t.startLineNumber?(i=n.startLineNumber,r=n.startColumn):n.startLineNumber===t.startLineNumber?(i=n.startLineNumber,r=Math.min(n.startColumn,t.startColumn)):(i=t.startLineNumber,r=t.startColumn),n.endLineNumber>t.endLineNumber?(o=n.endLineNumber,s=n.endColumn):n.endLineNumber===t.endLineNumber?(o=n.endLineNumber,s=Math.max(n.endColumn,t.endColumn)):(o=t.endLineNumber,s=t.endColumn),new e(i,r,o,s)},e.equalsRange=function(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn},e.compareRangesUsingStarts=function(e,t){return e.startLineNumber===t.startLineNumber?e.startColumn===t.startColumn?e.endLineNumber===t.endLineNumber?e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber:e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber},e.compareRangesUsingEnds=function(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber},e.spansMultipleLines=function(e){return e.endLineNumber>e.startLineNumber},e.hashCode=function(e){return 17*e.startLineNumber+23*e.startColumn+29*e.endLineNumber+37*e.endColumn},e.collapseToStart=function(e){return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.startLineNumber,endColumn:e.startColumn}},e}();t.Range=i}),define("vs/editor/common/core/editOperation",["require","exports","vs/editor/common/core/range"],function(e,t,n){var i=function(){function e(){}return e.insert=function(e,t){return{identifier:null,range:new n.Range(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}},e["delete"]=function(e){return{identifier:null,range:e,text:null,forceMoveMarkers:!0}},e.replace=function(e,t){return{identifier:null,range:e,text:t,forceMoveMarkers:!1}},e.replaceMove=function(e,t){return{identifier:null,range:e,text:t,forceMoveMarkers:!0}},e}();t.EditOperation=i}),define("vs/editor/common/modes",["require","exports"],function(e,t){!function(e){e[e.None=0]="None",e[e.Open=1]="Open",e[e.Close=-1]="Close"}(t.Bracket||(t.Bracket={}));t.Bracket;!function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(t.IndentAction||(t.IndentAction={}));t.IndentAction}),define("vs/editor/common/modes/abstractState",["require","exports"],function(e,t){var n=function(){function e(e,t){void 0===t&&(t=null),this.mode=e,this.stateData=t}return e.prototype.getMode=function(){return this.mode},e.prototype.clone=function(){var e=this.makeClone();return e.initializeFrom(this),e},e.prototype.makeClone=function(){throw new Error("Abstract Method")},e.prototype.initializeFrom=function(e){this.stateData=null!==e.stateData?e.stateData.clone():null},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e.prototype.equals=function(t){return null===t||this.mode!==t.getMode()?!1:t instanceof e?e.safeEquals(this.stateData,t.stateData):!1},e.prototype.tokenize=function(e){throw new Error("Abstract Method")},e.safeEquals=function(e,t){return null===e&&null===t?!0:null===e||null===t?!1:e.equals(t)},e.safeClone=function(e){return e?e.clone():null},e}();t.AbstractState=n}),define("vs/editor/common/modes/TMState",["require","exports","vs/editor/common/modes/abstractState"],function(e,t,n){function i(e,t){return e||t?e&&t?e.ruleId===t.ruleId&&e.endRule===t.endRule&&e.scopeName===t.scopeName&&e.contentName===t.contentName:!1:!0}var r=function(){function e(e,t,n){this._mode=e,this._parentEmbedderState=t,this._ruleStack=n}return e.prototype.clone=function(){var t=n.AbstractState.safeClone(this._parentEmbedderState),i=this._ruleStack?this._ruleStack.map(function(e){return e.clone()}):null;return new e(this._mode,t,i)},e.prototype.equals=function(t){if(!(t&&t instanceof e))return!1;var r=t;if(!n.AbstractState.safeEquals(this._parentEmbedderState,r._parentEmbedderState))return!1;if(null===this._ruleStack&&null===r._ruleStack)return!0;if(null===this._ruleStack||null===r._ruleStack)return!1;if(this._ruleStack.length!==r._ruleStack.length)return!1;for(var o=0,s=this._ruleStack.length;s>o;o++)if(!i(this._ruleStack[o],r._ruleStack[o]))return!1;return!0},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(e){throw new Error},e.prototype.getStateData=function(){return this._parentEmbedderState},e.prototype.setStateData=function(e){this._parentEmbedderState=e},e.prototype.getRuleStack=function(){return this._ruleStack},e.prototype.setRuleStack=function(e){this._ruleStack=e},e}();t.TMState=r}),define("vs/editor/common/modes/lineStream",["require","exports"],function(e,t){var n=function(){function e(e){this._source=e,this.sourceLength=e.length,this._pos=0,this.whitespace="	 ",this.whitespaceArr=this.stringToArray(this.whitespace),this.separators="",this.separatorsArr=this.stringToArray(this.separators),this.tokenStart=-1,this.tokenEnd=-1}return e.prototype.stringToArray=function(t){return e.STRING_TO_ARRAY_CACHE.hasOwnProperty(t)||(e.STRING_TO_ARRAY_CACHE[t]=this.actualStringToArray(t)),e.STRING_TO_ARRAY_CACHE[t]},e.prototype.actualStringToArray=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e.charCodeAt(n));for(var i=[],n=0;t>=n;n++)i[n]=!1;for(var n=0;n<e.length;n++)i[e.charCodeAt(n)]=!0;return i},e.prototype.pos=function(){return this._pos},e.prototype.eos=function(){return this._pos>=this.sourceLength},e.prototype.peek=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");return this._source[this._pos]},e.prototype.next=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");return this.tokenStart=-1,this.tokenEnd=-1,this._source[this._pos++]},e.prototype.next2=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");this.tokenStart=-1,this.tokenEnd=-1,this._pos++},e.prototype.advance=function(e){if(0===e)return"";var t=this._pos;return this._pos+=e,this.tokenStart=-1,this.tokenEnd=-1,this._source.substring(t,this._pos)},e.prototype._advance2=function(e){return 0===e?e:(this._pos+=e,this.tokenStart=-1,this.tokenEnd=-1,e)},e.prototype.advanceToEOS=function(){var e=this._pos;return this._pos=this.sourceLength,this.resetPeekedToken(),this._source.substring(e,this._pos)},e.prototype.goBack=function(e){this._pos-=e,this.resetPeekedToken()},e.prototype.createPeeker=function(e){var t=this;if(e instanceof RegExp)return function(){var n=e.exec(t._source.substr(t._pos));if(null===n)return 0;if(0!==n.index)throw new Error('Regular expression must begin with the character "^"');return n[0].length};if((e instanceof String||"string"==typeof e)&&e)return function(){for(var n=e.length,i=t._pos+n<=t.sourceLength,r=0;i&&n>r;r++)i=t._source.charCodeAt(t._pos+r)===e.charCodeAt(r);return i?n:0};throw new Error("Condition must be either a regular expression, function or a non-empty string")},e.prototype._advanceIfStringCaseInsensitive=function(e){var t,n=this._pos,i=this._source,r=e.length;if(1>r||n+r>this.sourceLength)return 0;for(t=0;r>t;t++)if(i.charAt(n+t).toLowerCase()!==e.charAt(t).toLowerCase())return 0;return r},e.prototype.advanceIfStringCaseInsensitive=function(e){return this.advance(this._advanceIfStringCaseInsensitive(e))},e.prototype.advanceIfStringCaseInsensitive2=function(e){return this._advance2(this._advanceIfStringCaseInsensitive(e))},e.prototype._advanceIfString=function(e){var t,n=this._pos,i=this._source,r=e.length;if(1>r||n+r>this.sourceLength)return 0;for(t=0;r>t;t++)if(i.charCodeAt(n+t)!==e.charCodeAt(t))return 0;return r},e.prototype.advanceIfString=function(e){return this.advance(this._advanceIfString(e))},e.prototype.advanceIfString2=function(e){return this._advance2(this._advanceIfString(e))},e.prototype._advanceIfCharCode=function(e){return this._pos<this.sourceLength&&this._source.charCodeAt(this._pos)===e?1:0},e.prototype.advanceIfCharCode=function(e){return this.advance(this._advanceIfCharCode(e))},e.prototype.advanceIfCharCode2=function(e){return this._advance2(this._advanceIfCharCode(e))},e.prototype._advanceIfRegExp=function(e){return this._pos>=this.sourceLength?0:e.test(this._source.substr(this._pos))?RegExp.lastMatch.length:0},e.prototype.advanceIfRegExp=function(e){return this.advance(this._advanceIfRegExp(e))},e.prototype.advanceIfRegExp2=function(e){return this._advance2(this._advanceIfRegExp(e))},e.prototype.advanceLoop=function(e,t,n){if(this.eos())return"";var i=this.createPeeker(e),r=this._pos,o=0,s=null;for(s=t?function(e){return e>0}:function(e){return 0===e};!this.eos()&&s(o=i());)o>0?this.advance(o):this.next();return n&&!this.eos()&&this.advance(o),this._source.substring(r,this._pos)},e.prototype.advanceWhile=function(e){return this.advanceLoop(e,!0,!1)},e.prototype.advanceUntil=function(e,t){return this.advanceLoop(e,!1,t)},e.prototype._advanceUntilString=function(e,t){if(this.eos()||0===e.length)return 0;var n=this._pos,i=this._source.indexOf(e,n);return-1===i?this.sourceLength-n:t?i+e.length-n:i-n},e.prototype.advanceUntilString=function(e,t){return this.advance(this._advanceUntilString(e,t))},e.prototype.advanceUntilString2=function(e,t){return this._advance2(this._advanceUntilString(e,t))},e.prototype.resetPeekedToken=function(){this.tokenStart=-1,this.tokenEnd=-1},e.prototype.setTokenRules=function(e,t){(this.separators!==e||this.whitespace!==t)&&(this.separators=e,this.separatorsArr=this.stringToArray(this.separators),this.whitespace=t,this.whitespaceArr=this.stringToArray(this.whitespace),this.resetPeekedToken())},e.prototype.peekToken=function(){if(-1!==this.tokenStart)return this._source.substring(this.tokenStart,this.tokenEnd);var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this.separatorsArr,r=this._pos;if(r>=t)throw new Error("Stream is at the end");for(;n[e.charCodeAt(r)]&&t>r;)r++;var o=r;if(i[e.charCodeAt(o)]&&t>o)o++;else for(;!i[e.charCodeAt(o)]&&!n[e.charCodeAt(o)]&&t>o;)o++;return this.tokenStart=r,this.tokenEnd=o,e.substring(r,o)},e.prototype.nextToken=function(){if(this._pos>=this.sourceLength)throw new Error("Stream is at the end");var e;return e=-1===this.tokenStart?this.peekToken():this._source.substring(this.tokenStart,this.tokenEnd),this._pos=this.tokenEnd,this.tokenStart=-1,this.tokenEnd=-1,e},e.prototype.peekWhitespace=function(){for(var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this._pos;n[e.charCodeAt(i)]&&t>i;)i++;return e.substring(this._pos,i)},e.prototype._skipWhitespace=function(){for(var e=this._source,t=this.sourceLength,n=this.whitespaceArr,i=this._pos,r=this._pos;n[e.charCodeAt(r)]&&t>r;)r++;return r-i},e.prototype.skipWhitespace=function(){return this.advance(this._skipWhitespace())},e.prototype.skipWhitespace2=function(){return this._advance2(this._skipWhitespace())},e.STRING_TO_ARRAY_CACHE={},e}();t.LineStream=n}),define("vs/editor/common/modes/monarch/monarchCommon",["require","exports"],function(e,t){function n(e){return e?!1:!0}function i(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function r(e){return e.replace(/[&<>'"_]/g,"-")}function o(e,t){console.log(e.name+": "+t)}function s(e,t){throw new Error(e.name+": "+t)}function a(e,t,r,o,s){var a=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,c=null;return t.replace(a,function(t,a,u,l,d,h,p,f,m){return n(u)?n(l)?!n(d)&&d<o.length?i(e,o[d]):!n(p)&&e&&"string"==typeof e[p]?e[p]:(null===c&&(c=s.split("."),c.unshift(s)),!n(h)&&h<c.length?i(e,c[h]):""):i(e,r):"$"})}function c(e,t){for(;t&&t.length>0;){var n=e.tokenizer[t];if(n)return n;var i=t.lastIndexOf(".");t=0>i?null:t.substr(0,i)}return null}function u(e,t){for(;t&&t.length>0;){var n=e.stateNames[t];if(n)return!0;var i=t.lastIndexOf(".");t=0>i?null:t.substr(0,i)}return!1}t.empty=n,t.fixCase=i,t.sanitize=r,t.log=o,t.throwError=s,t.substituteMatches=a,t.findRules=c,t.stateExists=u}),define("vs/editor/common/modes/monarch/monarchCompile",["require","exports","vs/editor/common/modes/monarch/monarchCommon","vs/editor/common/modes","vs/base/common/objects"],function(e,t,n,i,r){function o(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;var n;for(n in t)if(t.hasOwnProperty(n)&&!e(t[n]))return!1;return!0}function s(e,t,n){return"boolean"==typeof e?e:(n&&(e||void 0===t)&&n(),void 0===t?null:t)}function a(e,t,n){return"string"==typeof e?e:(n&&(e||void 0===t)&&n(),void 0===t?null:t)}function c(e,t){if("string"!=typeof t)return null;for(var i=0;t.indexOf("@")>=0&&5>i;)i++,t=t.replace(/@(\w+)/g,function(i,r){var o="";return"string"==typeof e[r]?o=e[r]:e[r]&&e[r]instanceof RegExp?o=e[r].source:void 0===e[r]?n.throwError(e,"language definition does not contain attribute '"+r+"', used at: "+t):n.throwError(e,"attribute reference '"+r+"' must be a string, used at: "+t),n.empty(o)?"":"(?:"+o+")"});return new RegExp(t,e.ignoreCase?"i":"")}function u(e,t,n,i){if(0>i)return e;if(i<t.length)return t[i];if(i>=100){i-=100;var r=n.split(".");if(r.unshift(n),i<r.length)return r[i]}return null}function l(e,t,i,s){var a=-1,l=i,d=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);d&&(d[3]&&(a=parseInt(d[3]),d[2]&&(a+=100)),l=d[4]);var h="~",p=l;l&&0!==l.length?/^\w*$/.test(p)?h="==":(d=l.match(/^(@|!@|~|!~|==|!=)(.*)$/),d&&(h=d[1],p=d[2])):(h="!=",p="");var f;if("~"!==h&&"!~"!==h||!/^(\w|\|)*$/.test(p))if("@"===h||"!@"===h){var m=e[p];m||n.throwError(e,"the @ match target '"+p+"' is not defined, in rule: "+t),o(function(e){return"string"==typeof e},m)||n.throwError(e,"the @ match target '"+p+"' must be an array of strings, in rule: "+t);var v=r.createKeywordMatcher(m,e.ignoreCase);f=function(e){return"@"===h?v(e):!v(e)}}else if("~"===h||"!~"===h)if(p.indexOf("$")<0){var g=c(e,"^"+p+"$");f=function(e){return"~"===h?g.test(e):!g.test(e)}}else f=function(t,i,r,o){var s=c(e,"^"+n.substituteMatches(e,p,i,r,o)+"$");return s.test(t)};else if(p.indexOf("$")<0){var y=n.fixCase(e,p);f=function(e){return"=="===h?e===y:e!==y}}else{var y=n.fixCase(e,p);f=function(t,i,r,o,s){var a=n.substituteMatches(e,y,i,r,o);return"=="===h?t===a:t!==a}}else{var v=r.createKeywordMatcher(p.split("|"),e.ignoreCase);f=function(e){return"~"===h?v(e):!v(e)}}return-1===a?{name:i,value:s,test:function(e,t,n,i){return f(e,e,t,n,i)}}:{name:i,value:s,test:function(e,t,n,i){var r=u(e,t,n,a);return f(r?r:"",e,t,n,i)}}}function d(e,t,r){if(r){if("string"==typeof r)return r;if(r.token||""===r.token){if("string"!=typeof r.token)return n.throwError(e,"a 'token' attribute must be of type string, in rule: "+t),{token:""};var o={token:r.token};if(r.token.indexOf("$")>=0&&(o.tokenSubst=!0),"string"==typeof r.bracket&&("@open"===r.bracket?o.bracket=i.Bracket.Open:"@close"===r.bracket?o.bracket=i.Bracket.Close:n.throwError(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t)),r.next)if("string"!=typeof r.next)n.throwError(e,"the next state must be a string value in rule: "+t);else{var s=r.next;/^(@pop|@push|@popall)$/.test(s)||("@"===s[0]&&(s=s.substr(1)),s.indexOf("$")<0&&(n.stateExists(e,n.substituteMatches(e,s,"",[],""))||n.throwError(e,"the next state '"+r.next+"' is not defined in rule: "+t))),o.next=s}return"number"==typeof r.goBack&&(o.goBack=r.goBack),"string"==typeof r.switchTo&&(o.switchTo=r.switchTo),"string"==typeof r.log&&(o.log=r.log),"string"==typeof r.nextEmbedded&&(o.nextEmbedded=r.nextEmbedded,e.usesEmbedded=!0),o}if(Array.isArray(r)){var a,c=[];for(a in r)r.hasOwnProperty(a)&&(c[a]=d(e,t,r[a]));return{group:c}}if(r.cases){var u,h=[];for(u in r.cases)if(r.cases.hasOwnProperty(u)){var p=d(e,t,r.cases[u]);"@default"===u||"@"===u||""===u?h.push({test:null,value:p,name:u}):"@eos"===u?h.push({test:function(e,t,n,i){return i},value:p,name:u}):h.push(l(e,t,u,p))}var f=e.defaultToken;return{test:function(e,t,n,i){var r;for(r in h)if(h.hasOwnProperty(r)){var o=!h[r].test||h[r].test(e,t,n,i);if(o)return h[r].value}return f}}}return n.throwError(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t),""}return{token:""}}function h(e){function t(r,o,c){var u;for(u in c)if(c.hasOwnProperty(u)){var d=c[u],h=d.include;if(h)"string"!=typeof h&&n.throwError(i,"an 'include' attribute must be a string at: "+r),"@"===h[0]&&(h=h.substr(1)),e.tokenizer[h]||n.throwError(i,"include target '"+h+"' is not defined at: "+r),t(r+"."+h,o,e.tokenizer[h]);else{var f=new p(r);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(f.setRegex(l,d[0]),d.length>=3)if("string"==typeof d[1])f.setAction(l,{token:d[1],next:d[2]});else if("object"==typeof d[1]){var m=d[1];m.next=d[2],f.setAction(l,m)}else n.throwError(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else f.setAction(l,d[1]);else d.regex||n.throwError(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r),d.name&&(f.name=a(d.name)),d.matchOnlyAtStart&&(f.matchOnlyAtLineStart=s(d.matchOnlyAtLineStart)),f.setRegex(l,d.regex),f.setAction(l,d.action);o.push(f)}}}if(!e||"object"!=typeof e)throw new Error("Monarch: expecting a language definition object");if("string"!=typeof e.name)throw new Error("Monarch: a language definition must include a string 'name' attribute");var i={};if(i.name=e.name,i.displayName=a(e.displayName,i.name),i.noThrow=!1,i.maxStack=100,i.start=a(e.start),i.ignoreCase=s(e.ignoreCase,!1),i.lineComment=a(e.lineComment,"//"),i.blockCommentStart=a(e.blockCommentStart,"/*"),i.blockCommentEnd=a(e.blockCommentEnd,"*/"),i.tokenPostfix=a(e.tokenPostfix,"."+i.name),i.defaultToken=a(e.defaultToken,"source",function(){n.throwError(i,"the 'defaultToken' must be a string")}),i.usesEmbedded=!1,i.wordDefinition=e.wordDefinition||void 0,!i.lineComment&&e.lineComments&&("string"==typeof e.lineComments?i.lineComment=e.lineComments:"string"==typeof e.lineComments[0]&&(i.lineComment=e.lineComments[0])),i.suggestSupport={textualCompletions:!0,disableAutoTrigger:!1,triggerCharacters:[],snippets:[]},"undefined"!=typeof e.suggestSupport){var r=e.suggestSupport;if(Array.isArray(r.snippets))for(var o=r.snippets,c=0,u=o.length;u>c;c++)"string"==typeof o[c]?i.suggestSupport.snippets.push({type:"snippet",label:o[c],codeSnippet:o[c]}):i.suggestSupport.snippets.push(o[c]);Array.isArray(r.triggerCharacters)&&(i.suggestSupport.triggerCharacters=r.triggerCharacters),"undefined"!=typeof r.textualCompletions&&(i.suggestSupport.textualCompletions=r.textualCompletions),"undefined"!=typeof r.disableAutoTrigger&&(i.suggestSupport.disableAutoTrigger=r.disableAutoTrigger)}var l=e;l.name=i.name,l.displayName=i.displayName,l.ignoreCase=i.ignoreCase,l.noThrow=i.noThrow,l.usesEmbedded=i.usesEmbedded,l.stateNames=e.tokenizer,l.defaultToken=i.defaultToken,e.tokenizer&&"object"==typeof e.tokenizer||n.throwError(i,"a language definition must define the 'tokenizer' attribute as an object"),i.tokenizer=[];var d;for(d in e.tokenizer)if(e.tokenizer.hasOwnProperty(d)){i.start||(i.start=d);var h=e.tokenizer[d];i.tokenizer[d]=new Array,t("tokenizer."+d,i.tokenizer[d],h)}i.usesEmbedded=l.usesEmbedded,e.brackets?Array.isArray(e.brackets)||n.throwError(i,"the 'brackets' attribute must be defined as an array"):e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];var f=[];for(var m in e.brackets)if(e.brackets.hasOwnProperty(m)){var v=e.brackets[m];v&&Array.isArray(v)&&3===v.length&&(v={token:v[2],open:v[0],close:v[1]}),v.open===v.close&&n.throwError(i,"open and close brackets in a 'brackets' attribute must be different: "+v.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required."),"string"==typeof v.open&&"string"==typeof v.token?f.push({token:a(v.token)+i.tokenPostfix,open:n.fixCase(i,a(v.open)),close:n.fixCase(i,a(v.close))}):n.throwError(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}i.brackets=f;var g;if(e.autoClosingPairs?(Array.isArray(e.autoClosingPairs)||n.throwError(i,"the 'autoClosingPairs' attribute must be an array of string pairs (as arrays)"),g=e.autoClosingPairs.slice(0)):g=[['"','"'],["'","'"],["@brackets"]],i.autoClosingPairs=[],g)for(var y in g)if(g.hasOwnProperty(y)){var _,b=g[y];if("@brackets"===b||"@brackets"===b[0]){var E;for(E in f)f.hasOwnProperty(E)&&f[E].open&&1===f[E].open.length&&f[E].close&&1===f[E].close.length&&(_={open:f[E].open,close:f[E].close,notIn:["string","comment"]},i.autoClosingPairs.push(_))}else Array.isArray(b)&&2===b.length&&"string"==typeof b[0]&&1===b[0].length&&"string"==typeof b[1]&&1===b[1].length?(_={open:n.fixCase(i,b[0]),close:n.fixCase(i,b[1]),notIn:["string","comment"]},i.autoClosingPairs.push(_)):"string"==typeof b.open&&1===b.open.length&&"string"==typeof b.close&&1===b.close.length?(_={open:n.fixCase(i,b.open[0]),close:n.fixCase(i,b.close[0]),notIn:["string","comment"]},i.autoClosingPairs.push(_)):n.throwError(i,"every element in an 'autoClosingPairs' array must be a pair of 1 character strings, or a '@brackets' directive")}var S=[];if(e.enhancedBrackets){Array.isArray(e.enhancedBrackets)||n.throwError(i,"the 'enhancedBrackets' attribute must be defined as an array");for(var m in e.enhancedBrackets)if(e.enhancedBrackets.hasOwnProperty(m)){var v=e.enhancedBrackets[m];v.hasOwnProperty("openTrigger")&&"string"!=typeof v.openTrigger&&n.throwError(i,"openTrigger in the 'enhancedBrackets' array must be a string"),!v.hasOwnProperty("open")||v.open instanceof RegExp||n.throwError(i,"open in the 'enhancedBrackets' array must be a regex"),v.hasOwnProperty("closeComplete")&&"string"!=typeof v.closeComplete&&n.throwError(i,"closeComplete in the 'enhancedBrackets' array must be a string"),v.hasOwnProperty("matchCase")&&"boolean"!=typeof v.matchCase&&n.throwError(i,"matchCase in the 'enhancedBrackets' array must be a boolean"),v.hasOwnProperty("closeTrigger")&&"string"!=typeof v.closeTrigger&&n.throwError(i,"closeTrigger in the 'enhancedBrackets' array must be a string"),!v.hasOwnProperty("close")||v.close instanceof RegExp||n.throwError(i,"close in the 'enhancedBrackets' array must be a regex"),v.hasOwnProperty("tokenType")&&("string"!=typeof v.tokenType?n.throwError(i,"tokenType in the 'enhancedBrackets' array must be a string"):v.tokenType+=i.tokenPostfix),
S.push(v)}}i.enhancedBrackets=S;for(var w=[],c=0;c<f.length;++c)w.push({tokenType:f[c].token,open:f[c].open,close:f[c].close,isElectric:!0});return i.standardBrackets=w,i.outdentTriggers=a(e.outdentTriggers,""),i.noThrow=!0,i}var p=function(){function e(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}return e.prototype.setRegex=function(e,t){var i;"string"==typeof t?i=t:t instanceof RegExp?i=t.source:n.throwError(e,"rules must start with a match string or regular expression: "+this.name),this.matchOnlyAtLineStart=i.length>0&&"^"===i[0],this.name=this.name+": "+i,this.regex=c(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")},e.prototype.setAction=function(e,t){this.action=d(e,this.name,t)},e}();t.compile=h}),define("vs/editor/common/modes/nullMode",["require","exports","vs/editor/common/modes"],function(e,t,n){function i(e,t,i,r,o){void 0===r&&(r=0);var s=[{startIndex:r,type:"",bracket:n.Bracket.None}],a=[{startIndex:r,mode:e}];return{tokens:s,actualStopOffset:r+t.length,endState:i,modeTransitions:a}}var r=function(){function e(e,t){this.mode=e,this.stateData=t}return e.prototype.clone=function(){var t=this.stateData?this.stateData.clone():null;return new e(this.mode,t)},e.prototype.equals=function(e){if(this.mode!==e.getMode())return!1;var t=e.getStateData();return this.stateData||t?this.stateData&&t?this.stateData.equals(t):!1:!0},e.prototype.getMode=function(){return this.mode},e.prototype.tokenize=function(e){return e.advanceToEOS(),{type:""}},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e}();t.NullState=r;var o=function(){function e(){this.tokenTypeClassificationSupport=this}return e.createWordRegExp=function(e){void 0===e&&(e="");for(var t="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",n="(-?\\d*\\.\\d\\w*)|([^",i=0;i<t.length;i++)e.indexOf(t[i])>=0||(n+="\\"+t[i]);return n+="\\s]+)",new RegExp(n,"g")},e.prototype.getId=function(){return e.ID},e.prototype.toSimplifiedMode=function(){return this},e.prototype.getWordDefinition=function(){return e.DEFAULT_WORD_REGEXP},e.DEFAULT_WORD_REGEXP=e.createWordRegExp(),e.ID="vs.editor.modes.nullMode",e}();t.NullMode=o,t.nullTokenize=i}),define("vs/editor/common/viewLayout/editorLayoutProvider",["require","exports"],function(e,t){var n=function(){function e(){}return e.compute=function(e){var t=this.computeLineNumbersWidth(e),n=this.computeGlyphMarginWidth(e),i=e.outerWidth-n-t-e.lineDecorationsWidth,r=0,o=r+n,s=o+t,a=s+e.lineDecorationsWidth,c=e.verticalScrollbarHasArrows?e.scrollbarArrowSize:0;return{width:e.outerWidth,height:e.outerHeight,glyphMarginLeft:r,glyphMarginWidth:n,glyphMarginHeight:e.outerHeight,lineNumbersLeft:o,lineNumbersWidth:t,lineNumbersHeight:e.outerHeight,decorationsLeft:s,decorationsWidth:e.lineDecorationsWidth,decorationsHeight:e.outerHeight,contentLeft:a,contentWidth:i,contentHeight:e.outerHeight,verticalScrollbarWidth:e.verticalScrollbarWidth,horizontalScrollbarHeight:e.horizontalScrollbarHeight,overviewRuler:{top:c,width:e.verticalScrollbarWidth,height:e.outerHeight-2*c-e.horizontalScrollbarHeight,right:0}}},e.layoutEqual=function(e,t){return e.width===t.width&&e.height===t.height&&e.glyphMarginLeft===t.glyphMarginLeft&&e.glyphMarginWidth===t.glyphMarginWidth&&e.glyphMarginHeight===t.glyphMarginHeight&&e.lineNumbersLeft===t.lineNumbersLeft&&e.lineNumbersWidth===t.lineNumbersWidth&&e.lineNumbersHeight===t.lineNumbersHeight&&e.decorationsLeft===t.decorationsLeft&&e.decorationsWidth===t.decorationsWidth&&e.decorationsHeight===t.decorationsHeight&&e.contentLeft===t.contentLeft&&e.contentWidth===t.contentWidth&&e.contentHeight===t.contentHeight&&e.verticalScrollbarWidth===t.verticalScrollbarWidth&&e.horizontalScrollbarHeight===t.horizontalScrollbarHeight&&e.overviewRuler.top===t.overviewRuler.top&&e.overviewRuler.width===t.overviewRuler.width&&e.overviewRuler.height===t.overviewRuler.height&&e.overviewRuler.right===t.overviewRuler.right},e.computeGlyphMarginWidth=function(e){return e.showGlyphMargin?e.lineHeight:0},e.digitCount=function(e){for(var t=0;e;)e=Math.floor(e/10),t++;return t?t:1},e.computeLineNumbersWidth=function(e){if(e.showLineNumbers){var t=Math.max(this.digitCount(e.lineCount),e.lineNumbersMinChars);return Math.round(t*e.maxDigitWidth)}return 0},e}();t.EditorLayoutProvider=n}),define("vs/editor/common/viewLayout/whitespaceComputer",["require","exports"],function(e,t){var n=function(){function e(){this.heights=[],this.ids=[],this.afterLineNumbers=[],this.ordinals=[],this.prefixSum=[],this.prefixSumValidIndex=-1,this.whitespaceId2Index={},this.lastWhitespaceId=0}return e.findInsertionIndex=function(e,t,n,i){for(var r,o=0,s=e.length;s>o;)r=Math.floor((o+s)/2),t===e[r]?i<n[r]?s=r:o=r+1:t<e[r]?s=r:o=r+1;return o},e.prototype.insertWhitespace=function(t,n,i){var r=++this.lastWhitespaceId,o=e.findInsertionIndex(this.afterLineNumbers,t,this.ordinals,n);return this.insertWhitespaceAtIndex(r,o,t,n,i),r},e.prototype.insertWhitespaceAtIndex=function(e,t,n,i,r){this.heights.splice(t,0,r),this.ids.splice(t,0,e),this.afterLineNumbers.splice(t,0,n),this.ordinals.splice(t,0,i),this.prefixSum.splice(t,0,0);var o,s;for(o in this.whitespaceId2Index)this.whitespaceId2Index.hasOwnProperty(o)&&(s=this.whitespaceId2Index[o],s>=t&&(this.whitespaceId2Index[o]=s+1));this.whitespaceId2Index[e.toString()]=t,this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,t-1)},e.prototype.changeWhitespace=function(e,t){var n=e.toString();if(this.whitespaceId2Index.hasOwnProperty(n)){var i=this.whitespaceId2Index[n];if(this.heights[i]!==t)return this.heights[i]=t,this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,i-1),!0}return!1},e.prototype.changeAfterLineNumberForWhitespace=function(t,n){var i=t.toString();if(this.whitespaceId2Index.hasOwnProperty(i)){var r=this.whitespaceId2Index[i];if(this.afterLineNumbers[r]!==n){var o=this.ordinals[r],s=this.heights[r];this.removeWhitespace(t);var a=e.findInsertionIndex(this.afterLineNumbers,n,this.ordinals,o);return this.insertWhitespaceAtIndex(t,a,n,o,s),!0}}return!1},e.prototype.removeWhitespace=function(e){var t=e.toString();if(this.whitespaceId2Index.hasOwnProperty(t)){var n=this.whitespaceId2Index[t];return delete this.whitespaceId2Index[t],this.removeWhitespaceAtIndex(n),!0}return!1},e.prototype.removeWhitespaceAtIndex=function(e){this.heights.splice(e,1),this.ids.splice(e,1),this.afterLineNumbers.splice(e,1),this.ordinals.splice(e,1),this.prefixSum.splice(e,1),this.prefixSumValidIndex=Math.min(this.prefixSumValidIndex,e-1);var t,n;for(t in this.whitespaceId2Index)this.whitespaceId2Index.hasOwnProperty(t)&&(n=this.whitespaceId2Index[t],n>=e&&(this.whitespaceId2Index[t]=n-1))},e.prototype.onModelLinesDeleted=function(e,t){var n,i,r;for(i=0,r=this.afterLineNumbers.length;r>i;i++)n=this.afterLineNumbers[i],n>=e&&t>=n?this.afterLineNumbers[i]=e-1:n>t&&(this.afterLineNumbers[i]-=t-e+1)},e.prototype.onModelLinesInserted=function(e,t){var n,i,r;for(i=0,r=this.afterLineNumbers.length;r>i;i++)n=this.afterLineNumbers[i],n>=e&&(this.afterLineNumbers[i]+=t-e+1)},e.prototype.getTotalHeight=function(){return 0===this.heights.length?0:this.getAccumulatedHeight(this.heights.length-1)},e.prototype.getAccumulatedHeight=function(e){var t=Math.max(0,this.prefixSumValidIndex+1);0===t&&(this.prefixSum[0]=this.heights[0],t++);for(var n=t;e>=n;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.heights[n];return this.prefixSumValidIndex=Math.max(this.prefixSumValidIndex,e),this.prefixSum[e]},e.prototype.getAccumulatedHeightBeforeLineNumber=function(e){var t=this.findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getAccumulatedHeight(t)},e.prototype.findLastWhitespaceBeforeLineNumber=function(e){for(var t,n=this.afterLineNumbers,i=0,r=n.length-1;r>=i;)if(t=Math.floor((i+r)/2),n[t]<e){if(t+1>=n.length||n[t+1]>=e)return t;i=t+1}else r=t-1;return-1},e.prototype.findFirstWhitespaceAfterLineNumber=function(e){var t=this.findLastWhitespaceBeforeLineNumber(e),n=t+1;return n<this.heights.length?n:-1},e.prototype.getFirstWhitespaceIndexAfterLineNumber=function(e){return this.findFirstWhitespaceAfterLineNumber(e)},e.prototype.getCount=function(){return this.heights.length},e.prototype.getAfterLineNumberForWhitespaceIndex=function(e){return this.afterLineNumbers[e]},e.prototype.getIdForWhitespaceIndex=function(e){return this.ids[e]},e.prototype.getHeightForWhitespaceIndex=function(e){return this.heights[e]},e.prototype.getWhitespaces=function(e){for(var t=[],n=0;n<this.heights.length;n++)t.push({id:this.ids[n],afterLineNumber:this.afterLineNumbers[n],heightInLines:this.heights[n]/e});return t},e}();t.WhitespaceComputer=n}),define("vs/editor/common/viewLayout/verticalObjects",["require","exports","vs/editor/common/viewLayout/whitespaceComputer"],function(e,t,n){var i=function(){function e(){this.whitespaces=new n.WhitespaceComputer}return e.prototype.replaceLines=function(e){this.linesCount=e},e.prototype.insertWhitespace=function(e,t,n){return this.whitespaces.insertWhitespace(e,t,n)},e.prototype.changeWhitespace=function(e,t){return this.whitespaces.changeWhitespace(e,t)},e.prototype.changeAfterLineNumberForWhitespace=function(e,t){return this.whitespaces.changeAfterLineNumberForWhitespace(e,t)},e.prototype.removeWhitespace=function(e){return this.whitespaces.removeWhitespace(e)},e.prototype.onModelLinesDeleted=function(e,t){this.linesCount-=t-e+1,this.whitespaces.onModelLinesDeleted(e,t)},e.prototype.onModelLinesInserted=function(e,t){this.linesCount+=t-e+1,this.whitespaces.onModelLinesInserted(e,t)},e.prototype.getTotalHeight=function(e){var t=e*this.linesCount,n=this.whitespaces.getTotalHeight();return t+n},e.prototype.getVerticalOffsetForLineNumber=function(e,t){var n;n=e>1?t*(e-1):0;var i=this.whitespaces.getAccumulatedHeightBeforeLineNumber(e);return n+i},e.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){return this.whitespaces.getAccumulatedHeightBeforeLineNumber(e)},e.prototype.hasWhitespace=function(){return this.whitespaces.getCount()>0},e.prototype.isAfterLines=function(e,t){var n=this.getTotalHeight(t);return e>n},e.prototype.getLineNumberAtOrAfterVerticalOffset=function(e,t){if(0>e)return 1;for(var n,i,r,o=1,s=this.linesCount;s>o;)if(n=Math.floor((o+s)/2),i=this.getVerticalOffsetForLineNumber(n,t),r=t,e>=i+r)o=n+1;else{if(e>=i)return n;s=n}return o>this.linesCount?this.linesCount:o},e.prototype.getCenteredLineInViewport=function(e,t,n){for(var i,r,o=this.getLinesViewportData(e,t,n),s=(t-e)/2,a=o.startLineNumber;a<=o.endLineNumber;a++)if(i=o.visibleRangesDeltaTop+o.relativeVerticalOffset[a-o.startLineNumber],r=i+n,s>=i&&r>s||i>s)return a;return o.endLineNumber},e.prototype.getLinesViewportData=function(e,t,n){var i,r,o=this.getLineNumberAtOrAfterVerticalOffset(e,n),s=this.linesCount,a=this.getVerticalOffsetForLineNumber(o,n),c=this.whitespaces.getFirstWhitespaceIndexAfterLineNumber(o),u=this.whitespaces.getCount();-1===c?(c=u,r=s+1):(r=this.whitespaces.getAfterLineNumberForWhitespaceIndex(c),i=this.whitespaces.getHeightForWhitespaceIndex(c));var l=a,d=l,h=5e5,p=0;a>=h&&(p=Math.floor(a/h)*h,p=Math.floor(p/n)*n,d-=p);for(var f=[],m=o;s>=m;m++){for(l+=n,f.push(d),d+=n;r===m;)d+=i,l+=i,c++,c>=u?r=s+1:(r=this.whitespaces.getAfterLineNumberForWhitespaceIndex(c),i=this.whitespaces.getHeightForWhitespaceIndex(c));if(l>t){s=m;break}}return{viewportTop:e-p,viewportHeight:t-e,bigNumbersDelta:p,startLineNumber:o,endLineNumber:s,visibleRangesDeltaTop:-(e-p),relativeVerticalOffset:f,visibleRange:null,getInlineDecorationsForLineInViewport:null,getDecorationsInViewport:null}},e.prototype.getVerticalOffsetForWhitespaceIndex=function(e,t){var n,n,i=this.whitespaces.getAfterLineNumberForWhitespaceIndex(e);n=i>=1?t*i:0;var r;return r=e>0?this.whitespaces.getAccumulatedHeight(e-1):0,n+r},e.prototype.getWhitespaceIndexAtOrAfterVerticallOffset=function(e,t){var n,i,r,o=0,s=this.whitespaces.getCount()-1;if(0>s)return-1;var a=this.getVerticalOffsetForWhitespaceIndex(s,t),c=this.whitespaces.getHeightForWhitespaceIndex(s);if(e>=a+c)return-1;for(;s>o;)if(n=Math.floor((o+s)/2),i=this.getVerticalOffsetForWhitespaceIndex(n,t),r=this.whitespaces.getHeightForWhitespaceIndex(n),e>=i+r)o=n+1;else{if(e>=i)return n;s=n}return o},e.prototype.getWhitespaceAtVerticalOffset=function(e,t){var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e,t);if(0>n)return null;if(n>=this.whitespaces.getCount())return null;var i=this.getVerticalOffsetForWhitespaceIndex(n,t);if(i>e)return null;var r=this.whitespaces.getHeightForWhitespaceIndex(n),o=this.whitespaces.getIdForWhitespaceIndex(n),s=this.whitespaces.getAfterLineNumberForWhitespaceIndex(n);return{id:o,afterLineNumber:s,verticalOffset:i,height:r}},e.prototype.getWhitespaceViewportData=function(e,t,n){var i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e,n),r=this.whitespaces.getCount()-1;if(0>i)return[];var o,s,a,c=[];for(o=i;r>=o&&(s=this.getVerticalOffsetForWhitespaceIndex(o,n),a=this.whitespaces.getHeightForWhitespaceIndex(o),!(s>=t));o++)c.push({id:this.whitespaces.getIdForWhitespaceIndex(o),afterLineNumber:this.whitespaces.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:s,height:a});return c},e.prototype.getWhitespaces=function(e){return this.whitespaces.getWhitespaces(e)},e}();t.VerticalObjects=i}),define("vs/editor/common/viewLayout/linesLayout",["require","exports","vs/editor/common/viewLayout/verticalObjects"],function(e,t,n){var i=function(){function e(e,t){this.configuration=e,this.model=t,this.verticalObjects=new n.VerticalObjects,this.verticalObjects.replaceLines(t.getLineCount())}return e.prototype.insertWhitespace=function(e,t,n){return this.verticalObjects.insertWhitespace(e,t,n)},e.prototype.changeWhitespace=function(e,t){return this.verticalObjects.changeWhitespace(e,t)},e.prototype.changeAfterLineNumberForWhitespace=function(e,t){return this.verticalObjects.changeAfterLineNumberForWhitespace(e,t)},e.prototype.removeWhitespace=function(e){return this.verticalObjects.removeWhitespace(e)},e.prototype.onModelFlushed=function(){this.verticalObjects.replaceLines(this.model.getLineCount())},e.prototype.onModelLinesDeleted=function(e){this.verticalObjects.onModelLinesDeleted(e.fromLineNumber,e.toLineNumber)},e.prototype.onModelLinesInserted=function(e){this.verticalObjects.onModelLinesInserted(e.fromLineNumber,e.toLineNumber)},e.prototype.getVerticalOffsetForLineNumber=function(e){return this.verticalObjects.getVerticalOffsetForLineNumber(e,this.configuration.editor.lineHeight)},e.prototype.getLinesTotalHeight=function(){return this.verticalObjects.getTotalHeight(this.configuration.editor.lineHeight)},e.prototype.getTotalHeight=function(e,t){var n=this.getLinesTotalHeight();return n+=this.configuration.editor.scrollBeyondLastLine?e.height-this.configuration.editor.lineHeight:t,Math.max(e.height,n)},e.prototype.isAfterLines=function(e){return this.verticalObjects.isAfterLines(e,this.configuration.editor.lineHeight)},e.prototype.getLineNumberAtOrAfterVerticalOffset=function(e){return this.verticalObjects.getLineNumberAtOrAfterVerticalOffset(e,this.configuration.editor.lineHeight)},e.prototype.getHeightForLineNumber=function(e){return this.configuration.editor.lineHeight},e.prototype.getWhitespaceViewportData=function(e){return this.verticalObjects.getWhitespaceViewportData(e.top,e.top+e.height,this.configuration.editor.lineHeight)},e.prototype.getWhitespaces=function(){return this.verticalObjects.getWhitespaces(this.configuration.editor.lineHeight)},e.prototype.getWhitespaceAtVerticalOffset=function(e){return this.verticalObjects.getWhitespaceAtVerticalOffset(e,this.configuration.editor.lineHeight)},e.prototype.getLinesViewportData=function(e){var t=this.verticalObjects.getLinesViewportData(e.top,e.top+e.height,this.configuration.editor.lineHeight),n=this.model.getDecorationsResolver(t.startLineNumber,t.endLineNumber);return t.getDecorationsInViewport=function(){return n.getDecorations()},t.getInlineDecorationsForLineInViewport=function(e){return n.getInlineDecorations(e)},t},e.prototype.getCenteredLineInViewport=function(e){return this.verticalObjects.getCenteredLineInViewport(e.top,e.top+e.height,this.configuration.editor.lineHeight)},e.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(e){return this.verticalObjects.getWhitespaceAccumulatedHeightBeforeLineNumber(e)},e.prototype.hasWhitespace=function(){return this.verticalObjects.hasWhitespace()},e}();t.LinesLayout=i}),define("vs/editor/common/viewModel/prefixSumComputer",["require","exports"],function(e,t){var n=function(){function e(e){this.values=e,this.prefixSum=[];for(var t=0,n=this.values.length;n>t;t++)this.prefixSum[t]=0;this.prefixSumValidIndex=-1}return e.prototype.getCount=function(){return this.values.length},e.prototype.insertValue=function(e,t){this.values.splice(e,0,t),this.prefixSum.splice(e,0,0),e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1)},e.prototype.insertValues=function(t,n){0!==n.length&&(this.values=this.values.slice(0,t).concat(n).concat(this.values.slice(t)),this.prefixSum=this.prefixSum.slice(0,t).concat(e._zeroArray(n.length)).concat(this.prefixSum.slice(t)),t-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=t-1))},e._zeroArray=function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=0;return t},e.prototype.changeValue=function(e,t){this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1))},e.prototype.removeValues=function(e,t){this.values.splice(e,t),this.prefixSum.splice(e,t),e-1<this.prefixSumValidIndex&&(this.prefixSumValidIndex=e-1)},e.prototype.getTotalValue=function(){return 0===this.values.length?0:this.getAccumulatedValue(this.values.length-1)},e.prototype.getAccumulatedValue=function(e){if(0>e)return 0;if(e<=this.prefixSumValidIndex)return this.prefixSum[e];var t=this.prefixSumValidIndex+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(var n=t;e>=n;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex=Math.max(this.prefixSumValidIndex,e),this.prefixSum[e]},e.prototype.getIndexOf=function(e,t){for(var n,i,r,o=0,s=this.values.length-1;s>=o;)if(n=o+(s-o)/2|0,r=this.getAccumulatedValue(n),i=r-this.values[n],i>e)s=n-1;else{if(!(e>=r))break;o=n+1}t.index=n,t.remainder=e-i},e}();t.PrefixSumComputer=n});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/smartSelect/common/tokenTree",["require","exports","vs/editor/common/modes","vs/editor/common/core/range","vs/editor/common/core/position"],function(e,t,n,i,r){function o(e){var t=new c;return t.start=r.Position.startPosition(e.range),t.end=r.Position.endPosition(e.range),t}function s(e){var t=new h(e).build();return t}function a(e,t){if(!i.Range.containsPosition(e.range,t))return null;var n;if(e instanceof u)for(var r=0,o=e.children.length;o>r&&!n;r++)n=a(e.children[r],t);else e instanceof l&&(n=a(e.open,t)||a(e.elements,t)||a(e.close,t));return n||e}var c=function(){function e(){}return Object.defineProperty(e.prototype,"range",{get:function(){return{startLineNumber:this.start.lineNumber,startColumn:this.start.column,endLineNumber:this.end.lineNumber,endColumn:this.end.column}},enumerable:!0,configurable:!0}),e}();t.Node=c;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"start",{get:function(){return this.hasChildren?this.children[0].start:this.parent.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.hasChildren?this.children[this.children.length-1].end:this.parent.end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasChildren",{get:function(){return this.children&&this.children.length>0},enumerable:!0,configurable:!0}),t.prototype.append=function(e){return e?(e.parent=this,this.children||(this.children=[]),e instanceof t?e.children&&this.children.push.apply(this.children,e.children):this.children.push(e),!0):!1},t}(c);t.NodeList=u;var l=function(e){function t(){e.call(this),this.elements=new u,this.elements.parent=this}return __extends(t,e),Object.defineProperty(t.prototype,"start",{get:function(){return this.open.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.close.end},enumerable:!0,configurable:!0}),t}(c);t.Block=l;var d=function(){function e(e){this._model=e,this._versionId=e.getVersionId(),this._currentLineNumber=1}return e.prototype.next=function(){if(this._versionId!==this._model.getVersionId())return null;if(this._currentLineNumber>=this._model.getLineCount()+1)return null;if(this._currentLineTokens||(this._currentLineTokens=this._model.getLineTokens(this._currentLineNumber),this._currentTokenIndex=0),this._currentTokenIndex>=this._currentLineTokens.getTokenCount())return this._currentLineNumber+=1,this._currentLineTokens=null,this.next();var e={type:this._currentLineTokens.getTokenType(this._currentTokenIndex),bracket:this._currentLineTokens.getTokenBracket(this._currentTokenIndex),range:{startLineNumber:this._currentLineNumber,startColumn:1+this._currentLineTokens.getTokenStartIndex(this._currentTokenIndex),endLineNumber:this._currentLineNumber,endColumn:1+this._currentLineTokens.getTokenEndIndex(this._currentTokenIndex,this._model.getLineMaxColumn(this._currentLineNumber))}};return this._currentTokenIndex+=1,e},e}(),h=function(){function e(e){this._stack=[],this._scanner=new d(e)}return e.prototype.build=function(){for(var e=new u;e.append(this._line()||this._any()););return e},e.prototype._accept=function(e){var t=this._stack.pop()||this._scanner.next();if(!t)return!1;var n=e(t);return n?this._currentToken=t:(this._stack.push(t),this._currentToken=null),n},e.prototype._peek=function(e){var t=!1;return this._accept(function(n){return t=e(n),!1}),t},e.prototype._line=function(){var e,t=new u;for(this._peek(function(t){return e=t.range.startLineNumber,!1});this._peek(function(t){return t.range.startLineNumber===e})&&t.append(this._token()||this._block()););return t.children&&0!==t.children.length?1===t.children.length?t.children[0]:t:null},e.prototype._token=function(){return this._accept(function(e){return e.bracket===n.Bracket.None})?o(this._currentToken):null},e.prototype._block=function(){var e,t;if(t=this._accept(function(t){return e=t.type,t.bracket===n.Bracket.Open}),!t)return null;var i=new l;for(i.open=o(this._currentToken);i.elements.append(this._line()););if(!this._accept(function(t){return t.bracket===n.Bracket.Close&&t.type===e})){var r=new u;return r.append(i.open),r.append(i.elements),r}return i.close=o(this._currentToken),i},e.prototype._any=function(){return this._accept(function(e){return!0})?o(this._currentToken):null},e}();t.build=s,t.find=a}),define("vs/editor/contrib/snippet/browser/snippet",["require","exports","vs/css!./snippet"],function(e,t){}),define("vs/languages/css/common/level",["require","exports"],function(e,t){function n(e){switch(e){case"ignore":return i.Ignore;case"warning":return i.Warning;case"error":return i.Error}return null}!function(e){e[e.Ignore=1]="Ignore",e[e.Warning=2]="Warning",e[e.Error=4]="Error"}(t.Level||(t.Level={}));var i=t.Level;t.toLevel=n}),define("vs/languages/typescript/common/options",["require","exports","vs/base/common/objects"],function(e,t,n){var i;return function(e){function t(e,t){return n.mixin(n.clone(t),e)}e.typeScriptOptions=Object.freeze({suggest:{alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1},validate:{enable:!0,semanticValidation:!0,syntaxValidation:!0,_surpressSuperWithoutSuperTypeError:!1,lint:{comparisonOperatorsNotStrict:"ignore",curlyBracketsMustNotBeOmitted:"ignore",emptyBlocksWithoutComment:"ignore",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",missingSemicolon:"ignore",newOnLowercaseFunctions:"ignore",semicolonsInsteadOfBlocks:"ignore",tripleSlashReferenceAlike:"ignore",unknownTypeOfResults:"ignore",unusedFunctions:"ignore",unusedImports:"ignore",unusedMembers:"ignore",unusedVariables:"ignore",forcedTypeConversion:"error",mixedTypesArithmetics:"error",newOnReturningFunctions:"error",parametersDontMatchSignature:"error",parametersOptionalButNotLast:"error",primitivesInInstanceOf:"error",redeclaredVariables:"error",undeclaredVariables:"error",unknownModule:"error",unknownProperty:"error"}}}),e.javaScriptOptions=Object.freeze({suggest:{alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1},validate:{enable:!0,semanticValidation:!0,syntaxValidation:!0,_surpressSuperWithoutSuperTypeError:!1,lint:{comparisonOperatorsNotStrict:"ignore",curlyBracketsMustNotBeOmitted:"ignore",emptyBlocksWithoutComment:"ignore",forcedTypeConversion:"warning",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",missingSemicolon:"ignore",mixedTypesArithmetics:"warning",newOnLowercaseFunctions:"warning",newOnReturningFunctions:"warning",parametersDontMatchSignature:"ignore",parametersOptionalButNotLast:"ignore",primitivesInInstanceOf:"error",redeclaredVariables:"warning",semicolonsInsteadOfBlocks:"ignore",tripleSlashReferenceAlike:"warning",undeclaredVariables:"warning",unknownModule:"ignore",unknownProperty:"ignore",unknownTypeOfResults:"warning",unusedFunctions:"ignore",unusedImports:"ignore",unusedMembers:"ignore",unusedVariables:"warning"}}}),e.withDefaultOptions=t}(i||(i={})),i}),define("vs/nls!vs/base/browser/ui/actionbar/actionbar",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/actionbar/actionbar",t)}),define("vs/nls!vs/base/browser/ui/findinput/findInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/findinput/findInput",t)}),define("vs/nls!vs/base/browser/ui/messagelist/messageList",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/messagelist/messageList",t)}),define("vs/nls!vs/base/browser/ui/resourceviewer/resourceViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/resourceviewer/resourceViewer",t)}),define("vs/nls!vs/base/browser/ui/toolbar/toolbar",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/browser/ui/toolbar/toolbar",t)}),define("vs/nls!vs/base/common/dates",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/dates",t)}),define("vs/base/common/dates",["require","exports","vs/nls!vs/base/common/dates"],function(e,t,n){function i(e){var t=((new Date).getTime()-e.getTime())/1e3;if(60>t)return n.localize(0,null);var i=t/60;if(60>i)return 1===Math.floor(i)?n.localize(1,null):n.localize(2,null,Math.floor(i));var r=i/60;if(24>r)return 1===Math.floor(r)?n.localize(3,null):n.localize(4,null,Math.floor(r));var o=r/24;return 1===Math.floor(o)?n.localize(5,null):o>6&&8>o?n.localize(6,null):o>30&&40>o?n.localize(7,null):n.localize(8,null,Math.floor(o))}t.since=i}),define("vs/nls!vs/base/common/errors",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/errors",t)}),define("vs/nls!vs/base/common/http",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/http",t)}),define("vs/base/common/http",["require","exports","vs/nls!vs/base/common/http"],function(e,t,n){function i(e){return e>=300&&303>=e||307===e}function r(e,t,n,i){var r,o;return{header:function(n){if("undefined"==typeof o)for(o=Object.create(null),d.lastIndex=t;;){var i=d.exec(e);if(!i)break;if(o[i[1].toLowerCase()]=i[2],i[3])break}return o[n.toLowerCase()]},value:function(){return"undefined"==typeof r&&(r=e.substr(n+2,i)),r}}}function o(e,t,n){void 0===n&&(n=0);var i=e.responseText;for(l.lastIndex=n;;){var o=l.exec(i);if(!o)return n;var s=parseInt(o[1],10);if(i.length<l.lastIndex+s)return n;t.push(r(i,n,l.lastIndex-2,s)),n=l.lastIndex+s}}function s(e){if(!(400>e))switch(e){case 400:return n.localize(0,null);case 401:return n.localize(1,null);case 403:return n.localize(2,null);case 404:return n.localize(3,null);case 405:return n.localize(4,null);case 406:return n.localize(5,null);case 407:return n.localize(6,null);case 408:return n.localize(7,null);case 409:return n.localize(8,null);case 410:return n.localize(9,null);case 411:return n.localize(10,null);case 412:return n.localize(11,null);case 413:return n.localize(12,null);case 414:return n.localize(13,null);case 415:return n.localize(14,null);case 500:return n.localize(15,null);case 501:return n.localize(16,null);case 503:return n.localize(17,null);default:return n.localize(18,null,e)}}t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE";var a;!function(e){e.CONTENT_TYPE="Content-Type",e.CONTENT_LENGTH="Content-Length",e.LAST_MODIFIED="Last-Modified",e.LOCATION="Location",e.ETAG="ETag",e.X_CONTENT_CHARSET="X-Content-Charset",e.X_CONTENT_TYPES="X-Content-Types",e.X_CONTENT_HASH="X-Content-Hash",e.X_FILEPATH="X-Filepath",e.X_RESOURCE="X-Resource"}(a=t.Header||(t.Header={}));var c;!function(e){e.RAW="application/octet-stream",e.JSON="application/json",e.TEXT="text/plain",e.HTML="text/html"}(c=t.Mime||(t.Mime={}));var u;!function(e){e.UTF8="utf-8",e.UTF8_BOM="UTF8_BOM"}(u=t.Charset||(t.Charset={})),t.isRedirect=i;var l=/X-Chunk-Length:(\d+)\r\n\r\n/gi,d=/(.+?):(.+?)\r\n(\r\n)?/gm;t.parseChunkedData=o,t.getErrorStatusDescription=s}),define("vs/nls!vs/base/common/json",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/json",t)}),define("vs/base/common/json",["require","exports","vs/nls!vs/base/common/json"],function(e,t,n){function i(e,t){function n(t,n){for(var i=0,r=0;t>i||!n;){var o=e.charCodeAt(f);if(o>=h._0&&o<=h._9)r=16*r+o-h._0;else if(o>=h.A&&o<=h.F)r=16*r+o-h.A+10;else{if(!(o>=h.a&&o<=h.f))break;r=16*r+o-h.a+10}f++,i++}return t>i&&(r=-1),r}function i(){var t=f;if(e.charCodeAt(f)===h._0)f++;else for(f++;f<e.length&&s(e.charCodeAt(f));)f++;if(f<e.length&&e.charCodeAt(f)===h.dot){if(f++,!(f<e.length&&s(e.charCodeAt(f))))return _=l.UnexpectedEndOfNumber,e.substring(t,n);for(f++;f<e.length&&s(e.charCodeAt(f));)f++}var n=f;if(f<e.length&&(e.charCodeAt(f)===h.E||e.charCodeAt(f)===h.e))if(f++,(f<e.length&&e.charCodeAt(f)===h.plus||e.charCodeAt(f)===h.minus)&&f++,f<e.length&&s(e.charCodeAt(f))){for(f++;f<e.length&&s(e.charCodeAt(f));)f++;n=f}else _=l.UnexpectedEndOfNumber;return e.substring(t,n)}function a(){for(var t="",i=f;;){if(f>=m){t+=e.substring(i,f),_=l.UnexpectedEndOfString;break}var r=e.charCodeAt(f);if(r===h.doubleQuote){t+=e.substring(i,f),f++;break}if(r!==h.backslash){if(o(r)){t+=e.substring(i,f),_=l.UnexpectedEndOfString;break}f++}else{if(t+=e.substring(i,f),f++,f>=m){_=l.UnexpectedEndOfString;break}switch(r=e.charCodeAt(f++)){case h.doubleQuote:t+='"';break;case h.backslash:t+="\\";break;case h.slash:t+="/";break;case h.b:t+="\b";break;case h.f:t+="\f";break;case h.n:t+="\n";break;case h.r:t+="\r";break;case h.t:t+="	";break;case h.u:var r=n(4,!0);r>=0?t+=String.fromCharCode(r):_=l.InvalidUnicode;break;default:_=l.InvalidEscapeCharacter}i=f}}return t}function c(){if(v="",_=l.None,g=f,f>=m)return g=m,y=d.EOF;var t=e.charCodeAt(f);if(r(t)){do f++,v+=String.fromCharCode(t),t=e.charCodeAt(f);while(r(t));return y=d.Trivia}if(o(t))return f++,v+=String.fromCharCode(t),t===h.carriageReturn&&e.charCodeAt(f)===h.lineFeed&&(f++,v+="\n"),y=d.LineBreakTrivia;switch(t){case h.openBrace:return f++,y=d.OpenBraceToken;case h.closeBrace:return f++,y=d.CloseBraceToken;case h.openBracket:return f++,y=d.OpenBracketToken;case h.closeBracket:return f++,y=d.CloseBracketToken;case h.colon:return f++,y=d.ColonToken;case h.comma:return f++,y=d.CommaToken;case h.doubleQuote:return f++,v=a(),y=d.StringLiteral;case h.slash:var n=f-1;if(e.charCodeAt(f+1)===h.slash){for(f+=2;m>f&&!o(e.charCodeAt(f));)f++;return v=e.substring(n,f),y=d.LineCommentTrivia}if(e.charCodeAt(f+1)===h.asterisk){
f+=2;for(var c=m-1,p=!1;c>f;){var b=e.charCodeAt(f);if(b===h.asterisk&&e.charCodeAt(f+1)===h.slash){f+=2,p=!0;break}f++}return p||(f++,_=l.UnexpectedEndOfComment),v=e.substring(n,f),y=d.BlockCommentTrivia}return v+=String.fromCharCode(t),f++,y=d.Unknown;case h.minus:if(v+=String.fromCharCode(t),f++,f===m||!s(e.charCodeAt(f)))return y=d.Unknown;case h._0:case h._1:case h._2:case h._3:case h._4:case h._5:case h._6:case h._7:case h._8:case h._9:return v+=i(),y=d.NumericLiteral;default:for(;m>f&&u(t);)f++,t=e.charCodeAt(f);if(g!==f){switch(v=e.substring(g,f)){case"true":return y=d.TrueKeyword;case"false":return y=d.FalseKeyword;case"null":return y=d.NullKeyword}return y=d.Unknown}return v+=String.fromCharCode(t),f++,y=d.Unknown}}function u(e){if(r(e)||o(e))return!1;switch(e){case h.closeBrace:case h.closeBracket:case h.openBrace:case h.openBracket:case h.doubleQuote:case h.colon:case h.comma:return!1}return!0}function p(){var e;do e=c();while(e>=d.LineCommentTrivia&&e<=d.Trivia);return e}void 0===t&&(t=!1);var f=0,m=e.length,v="",g=0,y=d.Unknown,_=l.None;return{getPosition:function(){return f},scan:t?p:c,getToken:function(){return y},getTokenValue:function(){return v},getTokenOffset:function(){return g},getTokenLength:function(){return f-g},getTokenError:function(){return _}}}function r(e){return e===h.space||e===h.tab||e===h.verticalTab||e===h.formFeed||e===h.nonBreakingSpace||e===h.ogham||e>=h.enQuad&&e<=h.zeroWidthSpace||e===h.narrowNoBreakSpace||e===h.mathematicalSpace||e===h.ideographicSpace||e===h.byteOrderMark}function o(e){return e===h.lineFeed||e===h.carriageReturn||e===h.lineSeparator||e===h.paragraphSeparator}function s(e){return e>=h._0&&e<=h._9}function a(e){return e>=h.a&&e<=h.z||e>=h.A&&e<=h.Z}function c(e,t){var n,r,o=i(e),s=[],a=0;do switch(r=o.getPosition(),n=o.scan()){case d.LineCommentTrivia:case d.BlockCommentTrivia:case d.EOF:a!==r&&s.push(e.substring(a,r)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}while(n!==d.EOF);return s.join("")}function u(e,t){function r(){for(var e=f.scan();e===d.Unknown;)o(n.localize(0,null)),e=f.scan();return e}function o(e,n,i){if(void 0===n&&(n=[]),void 0===i&&(i=[]),t.push(e),n.length+i.length>0)for(var o=f.getToken();o!==d.EOF;){if(-1!==n.indexOf(o)){r();break}if(-1!==i.indexOf(o))break;o=r()}}function s(){if(f.getToken()!==d.StringLiteral)return p;var e=f.getTokenValue();return r(),e}function a(){var e;switch(f.getToken()){case d.NumericLiteral:try{e=JSON.parse(f.getTokenValue()),"number"!=typeof e&&(o(n.localize(1,null)),e=0)}catch(t){e=0}break;case d.NullKeyword:e=null;break;case d.TrueKeyword:e=!0;break;case d.FalseKeyword:e=!1;break;default:return p}return r(),e}function c(e){var t=s();if(t===p)return o(n.localize(2,null),[],[d.CloseBraceToken,d.CommaToken]),!1;if(f.getToken()===d.ColonToken){r();var i=h();i!==p?e[t]=i:o(n.localize(3,null),[],[d.CloseBraceToken,d.CommaToken])}else o(n.localize(4,null),[],[d.CloseBraceToken,d.CommaToken]);return!0}function u(){if(f.getToken()!==d.OpenBraceToken)return p;var e={};r();for(var t=!1;f.getToken()!==d.CloseBraceToken&&f.getToken()!==d.EOF;){f.getToken()===d.CommaToken?(t||o(n.localize(5,null),[],[]),r()):t&&o(n.localize(6,null),[],[]);var i=c(e);i||o(n.localize(7,null),[],[d.CloseBraceToken,d.CommaToken]),t=!0}return f.getToken()!==d.CloseBraceToken?o(n.localize(8,null),[d.CloseBraceToken],[]):r(),e}function l(){if(f.getToken()!==d.OpenBracketToken)return p;var e=[];r();for(var t=!1;f.getToken()!==d.CloseBracketToken&&f.getToken()!==d.EOF;){f.getToken()===d.CommaToken?(t||o(n.localize(9,null),[],[]),r()):t&&o(n.localize(10,null),[],[]);var i=h();i===p?o(n.localize(11,null),[],[d.CloseBracketToken,d.CommaToken]):e.push(i),t=!0}return f.getToken()!==d.CloseBracketToken?o(n.localize(12,null),[d.CloseBracketToken],[]):r(),e}function h(){var e=l();return e!==p?e:(e=u(),e!==p?e:(e=s(),e!==p?e:a()))}void 0===t&&(t=[]);var p=Object(),f=i(e,!0);r();var m=h();return m===p?void o(n.localize(13,null),[],[]):(f.getToken()!==d.EOF&&o(n.localize(14,null),[],[]),m)}!function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter"}(t.ScanError||(t.ScanError={}));var l=t.ScanError;!function(e){e[e.Unknown=0]="Unknown",e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.EOF=16]="EOF"}(t.SyntaxKind||(t.SyntaxKind={}));var d=t.SyntaxKind;t.createScanner=i,t.isLetter=a;var h;!function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(h||(h={})),t.stripComments=c,t.parse=u}),define("vs/nls!vs/base/common/keyCodes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/keyCodes",t)}),define("vs/base/common/keyCodes",["require","exports","vs/nls!vs/base/common/keyCodes","vs/base/common/platform"],function(e,t,n,i){function r(e,t){var n=[],o=m.hasCtrlCmd(e),s=m.hasShift(e),a=m.hasAlt(e),c=m.hasWinCtrl(e),u=m.extractKeyCode(e),l=t.getLabelForKey(u);if(!l)return"";(o&&!i.isMacintosh||c&&i.isMacintosh)&&n.push(t.ctrlKeyLabel),s&&n.push(t.shiftKeyLabel),a&&n.push(t.altKeyLabel),o&&i.isMacintosh&&n.push(t.cmdKeyLabel),c&&!i.isMacintosh&&n.push(t.windowsKeyLabel),n.push(l);var d=n.join(t.modifierSeparator);return m.hasChord(e)?d+" "+r(m.extractChordPart(e),t):d}function o(e,t){e.length>0&&e.push({tagName:"span",text:"+"}),e.push({tagName:"span",className:"monaco-kbkey",text:t})}function s(e,t,n){void 0===n&&(n=!1);var r=[],a=m.hasCtrlCmd(e),c=m.hasShift(e),u=m.hasAlt(e),l=m.hasWinCtrl(e),d=m.extractKeyCode(e),h=t.getLabelForKey(d);if(!h)return[];(a&&!i.isMacintosh||l&&i.isMacintosh)&&o(r,t.ctrlKeyLabel),c&&o(r,t.shiftKeyLabel),u&&o(r,t.altKeyLabel),a&&i.isMacintosh&&o(r,t.cmdKeyLabel),l&&!i.isMacintosh&&o(r,t.windowsKeyLabel),o(r,h);var p=null;return m.hasChord(e)&&(p=s(m.extractChordPart(e),t,!0),r.push({tagName:"span",text:" "}),r=r.concat(p)),n?r:[{tagName:"span",className:"monaco-kb",children:r}]}!function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.NUMPAD_0=91]="NUMPAD_0",e[e.NUMPAD_1=92]="NUMPAD_1",e[e.NUMPAD_2=93]="NUMPAD_2",e[e.NUMPAD_3=94]="NUMPAD_3",e[e.NUMPAD_4=95]="NUMPAD_4",e[e.NUMPAD_5=96]="NUMPAD_5",e[e.NUMPAD_6=97]="NUMPAD_6",e[e.NUMPAD_7=98]="NUMPAD_7",e[e.NUMPAD_8=99]="NUMPAD_8",e[e.NUMPAD_9=100]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=101]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=102]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=103]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=104]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=105]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=106]="NUMPAD_DIVIDE",e[e.MAX_VALUE=107]="MAX_VALUE"}(t.KeyCode||(t.KeyCode={}));var a=t.KeyCode,c=[];!function(){c[a.Unknown]="unknown",c[a.Backspace]="Backspace",c[a.Tab]="Tab",c[a.Enter]="Enter",c[a.Shift]="Shift",c[a.Ctrl]="Ctrl",c[a.Alt]="Alt",c[a.PauseBreak]="PauseBreak",c[a.CapsLock]="CapsLock",c[a.Escape]="Escape",c[a.Space]="Space",c[a.PageUp]="PageUp",c[a.PageDown]="PageDown",c[a.End]="End",c[a.Home]="Home",c[a.LeftArrow]="LeftArrow",c[a.UpArrow]="UpArrow",c[a.RightArrow]="RightArrow",c[a.DownArrow]="DownArrow",c[a.Insert]="Insert",c[a.Delete]="Delete",c[a.KEY_0]="0",c[a.KEY_1]="1",c[a.KEY_2]="2",c[a.KEY_3]="3",c[a.KEY_4]="4",c[a.KEY_5]="5",c[a.KEY_6]="6",c[a.KEY_7]="7",c[a.KEY_8]="8",c[a.KEY_9]="9",c[a.KEY_A]="A",c[a.KEY_B]="B",c[a.KEY_C]="C",c[a.KEY_D]="D",c[a.KEY_E]="E",c[a.KEY_F]="F",c[a.KEY_G]="G",c[a.KEY_H]="H",c[a.KEY_I]="I",c[a.KEY_J]="J",c[a.KEY_K]="K",c[a.KEY_L]="L",c[a.KEY_M]="M",c[a.KEY_N]="N",c[a.KEY_O]="O",c[a.KEY_P]="P",c[a.KEY_Q]="Q",c[a.KEY_R]="R",c[a.KEY_S]="S",c[a.KEY_T]="T",c[a.KEY_U]="U",c[a.KEY_V]="V",c[a.KEY_W]="W",c[a.KEY_X]="X",c[a.KEY_Y]="Y",c[a.KEY_Z]="Z",c[a.ContextMenu]="ContextMenu",c[a.F1]="F1",c[a.F2]="F2",c[a.F3]="F3",c[a.F4]="F4",c[a.F5]="F5",c[a.F6]="F6",c[a.F7]="F7",c[a.F8]="F8",c[a.F9]="F9",c[a.F10]="F10",c[a.F11]="F11",c[a.F12]="F12",c[a.F13]="F13",c[a.F14]="F14",c[a.F15]="F15",c[a.F16]="F16",c[a.F17]="F17",c[a.F18]="F18",c[a.F19]="F19",c[a.NumLock]="NumLock",c[a.ScrollLock]="ScrollLock",c[a.US_SEMICOLON]=";",c[a.US_EQUAL]="=",c[a.US_COMMA]=",",c[a.US_MINUS]="-",c[a.US_DOT]=".",c[a.US_SLASH]="/",c[a.US_BACKTICK]="`",c[a.US_OPEN_SQUARE_BRACKET]="[",c[a.US_BACKSLASH]="\\",c[a.US_CLOSE_SQUARE_BRACKET]="]",c[a.US_QUOTE]="'",c[a.NUMPAD_0]="NumPad0",c[a.NUMPAD_1]="NumPad1",c[a.NUMPAD_2]="NumPad2",c[a.NUMPAD_3]="NumPad3",c[a.NUMPAD_4]="NumPad4",c[a.NUMPAD_5]="NumPad5",c[a.NUMPAD_6]="NumPad6",c[a.NUMPAD_7]="NumPad7",c[a.NUMPAD_8]="NumPad8",c[a.NUMPAD_9]="NumPad9",c[a.NUMPAD_MULTIPLY]="NumPad_Multiply",c[a.NUMPAD_ADD]="NumPad_Add",c[a.NUMPAD_SEPARATOR]="NumPad_Separator",c[a.NUMPAD_SUBTRACT]="NumPad_Subtract",c[a.NUMPAD_DECIMAL]="NumPad_Decimal",c[a.NUMPAD_DIVIDE]="NumPad_Divide"}();var u={};u["\r"]=a.Enter,function(){for(var e=0,t=c.length;t>e;e++)c[e]&&(u[c[e]]=e,u[c[e].toLowerCase()]=e)}();var a;!function(e){function t(e){return c[e]}function n(t){return u.hasOwnProperty(t)?u[t]:e.Unknown}e.toString=t,e.fromString=n}(a=t.KeyCode||(t.KeyCode={}));var l=32768,d=16384,h=8192,p=4096,f=4095,m=function(){function e(){}return e.extractFirstPart=function(e){return 65535&e},e.extractChordPart=function(e){return e>>16&65535},e.hasChord=function(e){return 0!==this.extractChordPart(e)},e.hasCtrlCmd=function(e){return e&l?!0:!1},e.hasShift=function(e){return e&d?!0:!1},e.hasAlt=function(e){return e&h?!0:!1},e.hasWinCtrl=function(e){return e&p?!0:!1},e.extractKeyCode=function(e){return e&f},e}();t.BinaryKeybindings=m;var v=function(){function e(){}return e.chord=function(e,t){return e|(65535&t)<<16},e.CtrlCmd=l,e.Shift=d,e.Alt=h,e.WinCtrl=p,e}();t.KeyMod=v;var g=function(){function e(){}return e.ENTER=a.Enter,e.SHIFT_ENTER=v.Shift|a.Enter,e.CTRLCMD_ENTER=v.CtrlCmd|a.Enter,e.WINCTRL_ENTER=v.WinCtrl|a.Enter,e.TAB=a.Tab,e.ESCAPE=a.Escape,e.SPACE=a.Space,e.DELETE=a.Delete,e.SHIFT_DELETE=v.Shift|a.Delete,e.CTRLCMD_BACKSPACE=v.CtrlCmd|a.Backspace,e.UP_ARROW=a.UpArrow,e.SHIFT_UP_ARROW=v.Shift|a.UpArrow,e.CTRLCMD_UP_ARROW=v.CtrlCmd|a.UpArrow,e.DOWN_ARROW=a.DownArrow,e.SHIFT_DOWN_ARROW=v.Shift|a.DownArrow,e.CTRLCMD_DOWN_ARROW=v.CtrlCmd|a.DownArrow,e.LEFT_ARROW=a.LeftArrow,e.RIGHT_ARROW=a.RightArrow,e.PAGE_UP=a.PageUp,e.SHIFT_PAGE_UP=v.Shift|a.PageUp,e.PAGE_DOWN=a.PageDown,e.SHIFT_PAGE_DOWN=v.Shift|a.PageDown,e.F2=a.F2,e.CTRLCMD_S=v.CtrlCmd|a.KEY_S,e.CTRLCMD_C=v.CtrlCmd|a.KEY_C,e.CTRLCMD_V=v.CtrlCmd|a.KEY_V,e}();t.CommonKeybindings=g;var y=function(){function e(e){this.value=e}return e._toUSLabel=function(e){return r(e,i.isMacintosh?b.INSTANCE:E.INSTANCE)},e._toUSHTMLLabel=function(e){return s(e,i.isMacintosh?b.INSTANCE:E.INSTANCE)},e._toCustomLabel=function(e,t){return r(e,t)},e._toCustomHTMLLabel=function(e,t){return s(e,t)},e._toElectronAccelerator=function(e){return m.hasChord(e)?null:r(e,_.INSTANCE)},e.toUserSettingsLabel=function(e){var t=r(e,S.INSTANCE);return t=t.toLowerCase().replace(/arrow/g,""),i.isMacintosh?t=t.replace(/meta/g,"cmd"):i.isWindows&&(t=t.replace(/meta/g,"win")),t},e.prototype.hasCtrlCmd=function(){return m.hasCtrlCmd(this.value)},e.prototype.hasShift=function(){return m.hasShift(this.value)},e.prototype.hasAlt=function(){return m.hasAlt(this.value)},e.prototype.hasWinCtrl=function(){return m.hasWinCtrl(this.value)},e.prototype.extractKeyCode=function(){return m.extractKeyCode(this.value)},e.prototype._toUSLabel=function(){return e._toUSLabel(this.value)},e.prototype._toUSHTMLLabel=function(){return e._toUSHTMLLabel(this.value)},e.prototype.toCustomLabel=function(t){return e._toCustomLabel(this.value,t)},e.prototype.toCustomHTMLLabel=function(t){return e._toCustomHTMLLabel(this.value,t)},e.prototype._toElectronAccelerator=function(){return e._toElectronAccelerator(this.value)},e.prototype.toUserSettingsLabel=function(){return e.toUserSettingsLabel(this.value)},e}();t.Keybinding=y;var _=function(){function e(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Cmd",this.windowsKeyLabel="Super",this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){switch(e){case a.UpArrow:return"Up";case a.DownArrow:return"Down";case a.LeftArrow:return"Left";case a.RightArrow:return"Right"}return a.toString(e)},e.INSTANCE=new e,e}();t.ElectronAcceleratorLabelProvider=_;var b=function(){function e(){this.ctrlKeyLabel="",this.shiftKeyLabel="",this.altKeyLabel="",this.cmdKeyLabel="",this.windowsKeyLabel=n.localize(0,null),this.modifierSeparator=""}return e.prototype.getLabelForKey=function(t){switch(t){case a.LeftArrow:return e.leftArrowUnicodeLabel;case a.UpArrow:return e.upArrowUnicodeLabel;case a.RightArrow:return e.rightArrowUnicodeLabel;case a.DownArrow:return e.downArrowUnicodeLabel}return a.toString(t)},e.INSTANCE=new e,e.leftArrowUnicodeLabel=String.fromCharCode(8592),e.upArrowUnicodeLabel=String.fromCharCode(8593),e.rightArrowUnicodeLabel=String.fromCharCode(8594),e.downArrowUnicodeLabel=String.fromCharCode(8595),e}();t.MacUIKeyLabelProvider=b;var E=function(){function e(){this.ctrlKeyLabel=n.localize(1,null),this.shiftKeyLabel=n.localize(2,null),this.altKeyLabel=n.localize(3,null),this.cmdKeyLabel=n.localize(4,null),this.windowsKeyLabel=n.localize(5,null),this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){return a.toString(e)},e.INSTANCE=new e,e}();t.ClassicUIKeyLabelProvider=E;var S=function(){function e(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Meta",this.windowsKeyLabel="Meta",this.modifierSeparator="+"}return e.prototype.getLabelForKey=function(e){return a.toString(e)},e.INSTANCE=new e,e}()}),define("vs/base/browser/keyboardEvent",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/common/keyCodes"],function(e,t,n,i,r){function o(e){return a[e.keyCode]||r.KeyCode.Unknown}function s(e){c=e}var a={};!function(){a[8]=r.KeyCode.Backspace,a[9]=r.KeyCode.Tab,a[13]=r.KeyCode.Enter,a[16]=r.KeyCode.Shift,a[17]=r.KeyCode.Ctrl,a[18]=r.KeyCode.Alt,a[19]=r.KeyCode.PauseBreak,a[20]=r.KeyCode.CapsLock,a[27]=r.KeyCode.Escape,a[32]=r.KeyCode.Space,a[33]=r.KeyCode.PageUp,a[34]=r.KeyCode.PageDown,a[35]=r.KeyCode.End,a[36]=r.KeyCode.Home,a[37]=r.KeyCode.LeftArrow,a[38]=r.KeyCode.UpArrow,a[39]=r.KeyCode.RightArrow,a[40]=r.KeyCode.DownArrow,a[45]=r.KeyCode.Insert,a[46]=r.KeyCode.Delete,a[48]=r.KeyCode.KEY_0,a[49]=r.KeyCode.KEY_1,a[50]=r.KeyCode.KEY_2,a[51]=r.KeyCode.KEY_3,a[52]=r.KeyCode.KEY_4,a[53]=r.KeyCode.KEY_5,a[54]=r.KeyCode.KEY_6,a[55]=r.KeyCode.KEY_7,a[56]=r.KeyCode.KEY_8,a[57]=r.KeyCode.KEY_9,a[65]=r.KeyCode.KEY_A,a[66]=r.KeyCode.KEY_B,a[67]=r.KeyCode.KEY_C,a[68]=r.KeyCode.KEY_D,a[69]=r.KeyCode.KEY_E,a[70]=r.KeyCode.KEY_F,a[71]=r.KeyCode.KEY_G,a[72]=r.KeyCode.KEY_H,a[73]=r.KeyCode.KEY_I,a[74]=r.KeyCode.KEY_J,a[75]=r.KeyCode.KEY_K,a[76]=r.KeyCode.KEY_L,a[77]=r.KeyCode.KEY_M,a[78]=r.KeyCode.KEY_N,a[79]=r.KeyCode.KEY_O,a[80]=r.KeyCode.KEY_P,a[81]=r.KeyCode.KEY_Q,a[82]=r.KeyCode.KEY_R,a[83]=r.KeyCode.KEY_S,a[84]=r.KeyCode.KEY_T,a[85]=r.KeyCode.KEY_U,a[86]=r.KeyCode.KEY_V,a[87]=r.KeyCode.KEY_W,a[88]=r.KeyCode.KEY_X,a[89]=r.KeyCode.KEY_Y,a[90]=r.KeyCode.KEY_Z,a[93]=r.KeyCode.ContextMenu,a[96]=r.KeyCode.NUMPAD_0,a[97]=r.KeyCode.NUMPAD_1,a[98]=r.KeyCode.NUMPAD_2,a[99]=r.KeyCode.NUMPAD_3,a[100]=r.KeyCode.NUMPAD_4,a[101]=r.KeyCode.NUMPAD_5,a[102]=r.KeyCode.NUMPAD_6,a[103]=r.KeyCode.NUMPAD_7,a[104]=r.KeyCode.NUMPAD_8,a[105]=r.KeyCode.NUMPAD_9,a[106]=r.KeyCode.NUMPAD_MULTIPLY,a[107]=r.KeyCode.NUMPAD_ADD,a[108]=r.KeyCode.NUMPAD_SEPARATOR,a[109]=r.KeyCode.NUMPAD_SUBTRACT,a[110]=r.KeyCode.NUMPAD_DECIMAL,a[111]=r.KeyCode.NUMPAD_DIVIDE,a[112]=r.KeyCode.F1,a[113]=r.KeyCode.F2,a[114]=r.KeyCode.F3,a[115]=r.KeyCode.F4,a[116]=r.KeyCode.F5,a[117]=r.KeyCode.F6,a[118]=r.KeyCode.F7,a[119]=r.KeyCode.F8,a[120]=r.KeyCode.F9,a[121]=r.KeyCode.F10,a[122]=r.KeyCode.F11,a[123]=r.KeyCode.F12,a[124]=r.KeyCode.F13,a[125]=r.KeyCode.F14,a[126]=r.KeyCode.F15,a[127]=r.KeyCode.F16,a[128]=r.KeyCode.F17,a[129]=r.KeyCode.F18,a[130]=r.KeyCode.F19,a[144]=r.KeyCode.NumLock,a[145]=r.KeyCode.ScrollLock,a[186]=r.KeyCode.US_SEMICOLON,a[187]=r.KeyCode.US_EQUAL,a[188]=r.KeyCode.US_COMMA,a[189]=r.KeyCode.US_MINUS,a[190]=r.KeyCode.US_DOT,a[191]=r.KeyCode.US_SLASH,a[192]=r.KeyCode.US_BACKTICK,a[219]=r.KeyCode.US_OPEN_SQUARE_BRACKET,a[220]=r.KeyCode.US_BACKSLASH,a[221]=r.KeyCode.US_CLOSE_SQUARE_BRACKET,a[222]=r.KeyCode.US_QUOTE,i.isIE11orEarlier?a[91]=r.KeyCode.Meta:i.isFirefox?(a[59]=r.KeyCode.US_SEMICOLON,a[107]=r.KeyCode.US_EQUAL,a[109]=r.KeyCode.US_MINUS,n.isMacintosh&&(a[224]=r.KeyCode.Meta)):i.isWebKit&&(a[91]=r.KeyCode.Meta,n.isMacintosh?a[93]=r.KeyCode.Meta:a[92]=r.KeyCode.Meta)}(),t.lookupKeyCode=o;var c=function(e){if(e.charCode){var t=String.fromCharCode(e.charCode).toUpperCase();return r.KeyCode.fromString(t)}return o(e)};t.setExtractKeyCode=s;var u=n.isMacintosh?r.KeyMod.WinCtrl:r.KeyMod.CtrlCmd,l=r.KeyMod.Alt,d=r.KeyMod.Shift,h=n.isMacintosh?r.KeyMod.CtrlCmd:r.KeyMod.WinCtrl,p=function(){function e(t){if(t instanceof e)this.browserEvent=null,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=t.keyCode,this._asKeybinding=t._asKeybinding;else{var n=t;this.browserEvent=n,this.target=n.target||n.targetNode,this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.altKey=n.altKey,this.metaKey=n.metaKey,this.keyCode=c(n),this.ctrlKey=this.ctrlKey||this.keyCode===r.KeyCode.Ctrl,this.altKey=this.altKey||this.keyCode===r.KeyCode.Alt,this.shiftKey=this.shiftKey||this.keyCode===r.KeyCode.Shift,this.metaKey=this.metaKey||this.keyCode===r.KeyCode.Meta,this._asKeybinding=this._computeKeybinding()}}return e.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},e.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},e.prototype.clone=function(){return new e(this)},e.prototype.asKeybinding=function(){return this._asKeybinding},e.prototype.equals=function(e){return this._asKeybinding===e},e.prototype._computeKeybinding=function(){var e=r.KeyCode.Unknown;this.keyCode!==r.KeyCode.Ctrl&&this.keyCode!==r.KeyCode.Shift&&this.keyCode!==r.KeyCode.Alt&&this.keyCode!==r.KeyCode.Meta&&(e=this.keyCode);var t=0;return this.ctrlKey&&(t|=u),this.altKey&&(t|=l),this.shiftKey&&(t|=d),this.metaKey&&(t|=h),t|=e},e}();t.StandardKeyboardEvent=p}),define("vs/nls!vs/base/common/processes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/processes",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/processes",["require","exports","vs/nls!vs/base/common/processes","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/parsers"],function(e,t,n,i,r,o,s){function a(e,t){var n=i.clone(e);return n.cwd&&(n.cwd=t.resolve(n.cwd)),n.env&&(n.env=t.resolve(n.env)),n}function c(e,t){var n=i.clone(e);return n.command=t.resolve(n.command),n.args=t.resolve(n.args),n.options&&(n.options=a(n.options,t)),n}!function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"}(t.Source||(t.Source={}));var u=(t.Source,function(e){function t(t,n){void 0===n&&(n=new s.ValidationStatus),e.call(this,t,n)}return __extends(t,e),t.prototype.parse=function(e,i){void 0===i&&(i={globals:null,emptyCommand:!1,noDefaults:!1});var o=this.parseExecutable(e,i.globals);if(this.status.isFatal())return o;var a;return e.windows&&r.platform===r.Platform.Windows?a=this.parseExecutable(e.windows):e.osx&&r.platform===r.Platform.Mac?a=this.parseExecutable(e.osx):e.linux&&r.platform===r.Platform.Linux&&(a=this.parseExecutable(e.linux)),a&&(o=t.mergeExecutable(o,a)),o&&o.command||i.emptyCommand?(i.noDefaults||s.Parser.merge(o,{command:void 0,isShellCommand:!1,args:[],options:{}},!1),o):(this.status.state=s.ValidationState.Fatal,this.log(n.localize(0,null)),null)},t.prototype.parseExecutable=function(e,t){var i=void 0,r=void 0,a=void 0,c=void 0;return this.is(e.command,o.isString)&&(i=e.command),this.is(e.isShellCommand,o.isBoolean,s.ValidationState.Warning,n.localize(1,null,e.isShellCommand))&&(r=e.isShellCommand),this.is(e.args,o.isStringArray,s.ValidationState.Warning,n.localize(2,null,e.isShellCommand))&&(a=e.args.slice(0)),this.is(e.options,o.isObject)&&(c=this.parseCommandOptions(e.options)),{command:i,isShellCommand:r,args:a,options:c}},t.prototype.parseCommandOptions=function(e){var t={};return e?(this.is(e.cwd,o.isString,s.ValidationState.Warning,n.localize(3,null,e.cwd))&&(t.cwd=e.cwd),o.isUndefined(e.env)||(t.env=i.clone(e.env)),t):t},t.mergeExecutable=function(e,t){return e?(s.Parser.merge(e,t,!0),e):t},t}(s.Parser));t.ExecutableParser=u,t.resolveCommandOptions=a,t.resolveExecutable=c}),define("vs/nls!vs/base/common/severity",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/severity",t)}),define("vs/nls!vs/base/common/strings",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/common/strings",t)}),define("vs/base/common/strings",["require","exports","vs/nls!vs/base/common/strings"],function(e,t,n){function i(e,t,n){void 0===n&&(n="0");for(var i=""+e,r=[i],o=i.length;t>o;o++)r.push(n);return r.reverse().join("")}function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return 0===t.length?e:e.replace(K,function(e,n){var i=parseInt(n,10);return isNaN(i)||0>i||i>=t.length?e:t[i]})}function o(e){return void 0===e&&(e=new Date),n.localize(0,null,i(e.getMonth()+1,2),i(e.getDate(),2),i(e.getFullYear(),4),i(e.getHours(),2),i(e.getMinutes(),2),i(e.getSeconds(),2))}function s(e){return void 0===e&&(e=new Date),n.localize(1,null,i(e.getHours(),2),i(e.getMinutes(),2),i(e.getSeconds(),2))}function a(e){return e.replace(/[<|>|&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function c(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}function u(e,t,n){return e.replace(new RegExp(c(t.toString()),"g"),n)}function l(e,t){void 0===t&&(t=" ");var n=d(e,t);return h(n,t)}function d(e,t){if(!e||!t)return e;var n=t.length;if(0===n||0===e.length)return e;for(var i=0,r=-1;(r=e.indexOf(t,i))===i;)i+=n;return e.substring(i)}function h(e,t){if(!e||!t)return e;var n=t.length,i=e.length;if(0===n||0===i)return e;for(var r=i,o=-1;;){if(o=e.lastIndexOf(t,r-1),-1===o||o+n!==r)break;if(0===o)return"";r=o}return e.substring(0,r)}function p(e){return e.replace(/(^\s+|\s+$)/g,"")}function f(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function m(e){return u(e,"*","")}function v(e,t){if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function g(e,t){var n=e.length-t.length;return n>0?e.lastIndexOf(t)===e.length-t.length:0===n?e===t:!1}function y(e,t,n,i){return void 0===i&&(i=""),e.substring(0,t)+i+e.substring(t+n)}function _(e,t,n,i){if(""===e)throw new Error("Cannot create regex from empty string");t||(e=e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")),i&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));var r="g";return n||(r+="i"),new RegExp(e,r)}function b(e){if("^"===e.source||"^$"===e.source||"$"===e.source)return!1;var t=e.exec("");return t&&0===e.lastIndex}function E(e,n){if(!t.canNormalize||!e)return e;if(n&&n[e])return n[e];var i=e.normalize("NFC");return n&&(n[e]=i),i}function S(e,t){if(!e)return e;if(t){for(var n=e.split("/"),i=0,r=n.length;r>i;i++)n[i]=encodeURIComponent(n[i]);return n.join("/")}return encodeURIComponent(e)}function w(e){return/^\w[\w.]*$/.test(e)}function C(e){return!e||!e.trim()}function T(e,t,n){return t&&(e="^"+e),n&&(e+="$"),e}function I(e,t){if(b(new RegExp(e,t)))throw new Error("Regular expression /"+e+"/g results in infinitive matches")}function k(e){return e?(0===e.indexOf("/")&&(e=e.substring(1)),S(e,!0)):""}function x(e,t){return"["+e+"m"+t+"[0m"}function A(e){for(var t=0,n=e.length;n>t;t++)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return t;return-1}function R(e){for(var t=0,n=e.length;n>t;t++)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return e.substring(0,t);return e}function D(e){for(var t=e.length-1;t>=0;t--)if(" "!==e.charAt(t)&&"	"!==e.charAt(t))return t;return-1}function L(e,t){return e.localeCompare(t)}function M(e){return e>=97&&122>=e||e>=65&&90>=e}function O(e,t){var n=e.length,i=t.length;if(n!==i)return!1;for(var r=0;n>r;r++){var o=e.charCodeAt(r),s=t.charCodeAt(r);if(o!==s)if(M(o)&&M(s)){var a=Math.abs(o-s);if(0!==a&&32!==a)return!1}else if(String.fromCharCode(o).toLocaleLowerCase()!==String.fromCharCode(s).toLocaleLowerCase())return!1}return!0}function P(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return i}function N(e,t){var n,i=Math.min(e.length,t.length),r=e.length-1,o=t.length-1;for(n=0;i>n;n++)if(e.charCodeAt(r-n)!==t.charCodeAt(o-n))return n;return i}function F(e,t,n){void 0===n&&(n=4);var i=Math.abs(e.length-t.length);if(i>n)return 0;var r,o,s=[],a=[];for(r=0;r<t.length+1;++r)a.push(0);for(r=0;r<e.length+1;++r)s.push(a);for(r=1;r<e.length+1;++r)for(o=1;o<t.length+1;++o)e[r-1]===t[o-1]?s[r][o]=s[r-1][o-1]+1:s[r][o]=Math.max(s[r-1][o],s[r][o-1]);return s[e.length][t.length]-Math.sqrt(i)}function W(e){for(var t,n=/\r\n|\r|\n/g,i=[0];t=n.exec(e);)i.push(n.lastIndex);return i}function H(e,n){if(e.length<n)return e;for(var i=e.split(/\b/),r=0,o=i.length-1;o>=0;o--)if(r+=i[o].length,r>n){i.splice(0,o);break}return i.join(t.empty).replace(/^\s/,t.empty)}function V(e){return e&&(e=e.replace(U,""),e=e.replace(z,"\n"),e=e.replace(j,""),e=e.replace(q,"")),e}function B(e){return e&&e.length>0&&e.charCodeAt(0)===G}t.empty="",t.pad=i;var K=/{(\d+)}/g;t.format=r,t.formatDate=o,t.formatTime=s,t.escape=a,t.escapeRegExpCharacters=c,t.replaceAll=u,t.trim=l,t.ltrim=d,t.rtrim=h,t.trimWhitespace=p,t.convertSimple2RegExpPattern=f,t.stripWildcards=m,t.startsWith=v,t.endsWith=g,t.splice=y,t.createRegExp=_,t.regExpLeadsToEndlessLoop=b,t.canNormalize="function"==typeof"".normalize,t.normalizeNFC=E,t.encodeURIPart=S,t.isCamelCasePattern=w,t.isFalsyOrWhitespace=C,t.anchorPattern=T,t.assertRegExp=I,t.normalizePath=k,t.colorize=x,t.firstNonWhitespaceIndex=A,t.getLeadingWhitespace=R,t.lastNonWhitespaceIndex=D,t.localeCompare=L,t.equalsIgnoreCase=O,t.commonPrefixLength=P,t.commonSuffixLength=N,t.difference=F,t.computeLineStarts=W,t.lcut=H;var U=/\x1B\x5B[12]?K/g,z=/\xA/g,j=/\x1b\[\d+m/g,q=/\x1b\[0?m/g;
t.removeAnsiEscapeCodes=V;var G=65279;t.UTF8_BOM_CHARACTER=String.fromCharCode(G),t.startsWithUTF8BOM=B}),define("vs/base/common/comparers",["require","exports","vs/base/common/strings"],function(e,t,n){function i(e,t){var n=o.exec(e.toLowerCase()),i=o.exec(t.toLowerCase()),r=n[1]||n[3]||"",s=n[2]||"",a=i[1]||i[3]||"",c=i[2]||"";return r!==a?a>r?-1:1:c>s?-1:1}function r(e,t,r){var o=e.toLowerCase(),s=t.toLowerCase(),a=0===o.indexOf(r),c=0===s.indexOf(r);if(a!==c)return a?-1:1;if(a&&c){if(o.length<s.length)return-1;if(o.length>s.length)return 1}var u=n.endsWith(o,r),l=n.endsWith(s,r);if(u!==l)return u?-1:1;var d=i(o,s);return 0!==d?d:n.localeCompare(o,s)}var o=/^(.*)\.([^.]*)|([^.]+)$/;t.compareFileNames=i,t.compareAnything=r}),define("vs/base/common/errors",["require","exports","vs/nls!vs/base/common/errors","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/arrays","vs/base/common/strings"],function(e,t,n,i,r,o,s,a){function c(e){t.errorHandler.setUnexpectedErrorHandler(e)}function u(e){m(e)||t.errorHandler.onUnexpectedError(e)}function l(e){if(!(e instanceof Error))return e;var t={};return e.stacktrace?t.stack=e.stacktrace:e.stack&&(t.stack=e.stack),t.message=e.toString(),t}function d(e,t){var n=new C(e);return t?n.verboseMessage:n.message}function h(e,t){return t&&e.message&&(e.stack||e.stacktrace)?n.localize(7,null,e.message,e.stack||e.stacktrace):e.message?e.message:n.localize(8,null)}function p(e,t){if(void 0===e&&(e=null),void 0===t&&(t=!1),!e)return n.localize(9,null);if(Array.isArray(e)){var i=s.coalesce(e),r=p(i[0],t);return i.length>1?n.localize(10,null,r,i.length):r}if(o.isString(e))return e;if(!o.isUndefinedOrNull(e.status))return d(e,t);if(e.detail){var a=e.detail;if(a.error){if(a.error&&!o.isUndefinedOrNull(a.error.status))return d(a.error,t);if(!o.isArray(a.error))return h(a.error,t);for(var c=0;c<a.error.length;c++)if(a.error[c]&&!o.isUndefinedOrNull(a.error[c].status))return d(a.error[c],t)}if(a.exception)return o.isUndefinedOrNull(a.exception.status)?h(a.exception,t):d(a.exception,t)}return e.stack?h(e,t):e.message?e.message:n.localize(11,null)}function f(e){if(e)if(o.isArray(e)){for(var t=0;t<e.length;t++)if(e[t]&&e[t].status)return e[t].status}else if(e.status)return e.status;return-1}function m(e){return e instanceof Error&&e.name===T&&e.message===T}function v(){var e=new Error(T);return e.name=e.message,e}function g(){return new Error(n.localize(12,null))}function y(e){return e?new Error(n.localize(13,null,e)):new Error(n.localize(14,null))}function _(e){return e?new Error(n.localize(15,null,e)):new Error(n.localize(16,null))}function b(){return new Error("readonly property cannot be changed")}function E(e){return r.isWeb?new Error(n.localize(17,null)):new Error(n.localize(18,null,JSON.stringify(e)))}function S(e,t){void 0===t&&(t={});var n=new Error(e);return o.isNumber(t.severity)&&(n.severity=t.severity),t.actions&&(n.actions=t.actions),n}var w=function(){function e(){this.listeners=[],this.unexpectedErrorHandler=function(e){r.setTimeout(function(){if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}return e.prototype.addListener=function(e){var t=this;return this.listeners.push(e),function(){t._removeListener(e)}},e.prototype.emit=function(e){this.listeners.forEach(function(t){t(e)})},e.prototype._removeListener=function(e){this.listeners.splice(this.listeners.indexOf(e),1)},e.prototype.setUnexpectedErrorHandler=function(e){this.unexpectedErrorHandler=e},e.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler},e.prototype.onUnexpectedError=function(e){this.unexpectedErrorHandler(e),this.emit(e)},e}();t.ErrorHandler=w,t.errorHandler=new w,t.setUnexpectedErrorHandler=c,t.onUnexpectedError=u,t.transformErrorForSerialization=l;var C=function(){function e(e){this.status=e.status,this.statusText=e.statusText,this.name="ConnectionError";try{this.responseText=e.responseText}catch(t){this.responseText=""}if(this.errorMessage=null,this.errorCode=null,this.errorObject=null,this.responseText)try{var n=JSON.parse(this.responseText);this.errorMessage=n.message,this.errorCode=n.code,this.errorObject=n}catch(i){}}return Object.defineProperty(e.prototype,"message",{get:function(){return this.connectionErrorToMessage(this,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verboseMessage",{get:function(){return this.connectionErrorToMessage(this,!0)},enumerable:!0,configurable:!0}),e.prototype.connectionErrorDetailsToMessage=function(e,t){var i=e.errorCode,r=e.errorMessage;return null!==i&&null!==r?n.localize(0,null,a.rtrim(r,"."),i):null!==r?r:t&&null!==e.responseText?e.responseText:null},e.prototype.connectionErrorToMessage=function(e,t){var i=this.connectionErrorDetailsToMessage(e,t);return 401===e.status?null!==i?n.localize(1,null,i):n.localize(2,null):i?i:e.status>0&&null!==e.statusText?t&&null!==e.responseText&&e.responseText.length>0?n.localize(3,null,e.statusText,e.status,e.responseText):n.localize(4,null,e.statusText,e.status):t&&null!==e.responseText&&e.responseText.length>0?n.localize(5,null,e.responseText):n.localize(6,null)},e}();t.ConnectionError=C,i.derive(Error,C),t.toErrorMessage=p,t.getHttpStatus=f;var T="Canceled";t.isPromiseCanceledError=m,t.canceled=v,t.notImplemented=g,t.illegalArgument=y,t.illegalState=_,t.readonly=b,t.loaderError=E,t.create=S}),define("vs/base/common/callbackList",["require","exports","vs/base/common/errors"],function(e,t,n){var i=function(){function e(){}return e.prototype.add=function(e,t,n){var i=this;void 0===t&&(t=null),this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:function(){return i.remove(e,t)}})},e.prototype.remove=function(e,t){if(void 0===t&&(t=null),this._callbacks){for(var n=!1,i=0,r=this._callbacks.length;r>i;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(this._callbacks){for(var i=[],r=this._callbacks.slice(0),o=this._contexts.slice(0),s=0,a=r.length;a>s;s++)try{i.push(r[s].apply(o[s],e))}catch(c){n.onUnexpectedError(c)}return i}},e.prototype.isEmpty=function(){return!this._callbacks||0===this._callbacks.length},e.prototype.dispose=function(){this._callbacks=void 0,this._contexts=void 0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}),define("vs/base/common/event",["require","exports","vs/base/common/callbackList"],function(e,t,n){function i(e,t){return function(n,i,r){var o=e.addListener2(t,function(){n.apply(i,arguments)});return Array.isArray(r)&&r.push(o),o}}var r;!function(e){var t={dispose:function(){}};e.None=function(){return t}}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=function(){function e(e){this._options=e}return Object.defineProperty(e.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(i,r,o){t._callbacks||(t._callbacks=new n["default"]),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(i,r);var s;return s={dispose:function(){s.dispose=e._noop,t._disposed||(t._callbacks.remove(i,r),t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}},Array.isArray(o)&&o.push(s),s}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)},e.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0,this._disposed=!0)},e._noop=function(){},e}();t.Emitter=o,t.fromEventEmitter=i}),define("vs/base/common/cancellation",["require","exports","vs/base/common/event"],function(e,t,n){var i;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n["default"].None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n["default"].None})}(i=t.CancellationToken||(t.CancellationToken={}));var r=Object.freeze(function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}}),o=function(){function e(){this._isCancelled=!1}return e.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))},Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?r:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),e}(),s=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token||(this._token=new o),this._token},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._token?this._token.cancel():this._token=i.Cancelled},e.prototype.dispose=function(){this.cancel()},e}();t.CancellationTokenSource=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/eventEmitter",["require","exports","vs/base/common/errors"],function(e,t,n){var i=function(){function e(e,t,n){void 0===n&&(n=null),this._type=e,this._data=t,this._emitterType=n}return e.prototype.getType=function(){return this._type},e.prototype.getData=function(){return this._data},e.prototype.getEmitterType=function(){return this._emitterType},e}();t.EmitterEvent=i;var r=function(){function e(e){if(void 0===e&&(e=null),this._listeners={},this._bulkListeners=[],this._collectedEvents=[],this._deferredCnt=0,e){this._allowedEventTypes={};for(var t=0;t<e.length;t++)this._allowedEventTypes[e[t]]=!0}else this._allowedEventTypes=null}return e.prototype.dispose=function(){this._listeners={},this._bulkListeners=[],this._collectedEvents=[],this._deferredCnt=0,this._allowedEventTypes=null},e.prototype.addListener=function(e,t){if("*"===e)throw new Error("Use addBulkListener(listener) to register your listener!");if(this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("This object will never emit this event type!");this._listeners.hasOwnProperty(e)?this._listeners[e].push(t):this._listeners[e]=[t];var n=this;return function(){n&&(n._removeListener(e,t),n=null,t=null)}},e.prototype.addListener2=function(e,t){var n=this.addListener(e,t);return{dispose:n}},e.prototype.on=function(e,t){return this.addListener(e,t)},e.prototype.addOneTimeListener=function(e,t){var n=this.addListener(e,function(e){n(),t(e)});return n},e.prototype.addOneTimeDisposableListener=function(e,t){var n=this.addOneTimeListener(e,t);return{dispose:n}},e.prototype.addBulkListener=function(e){var t=this;return this._bulkListeners.push(e),function(){t._removeBulkListener(e)}},e.prototype.addBulkListener2=function(e){var t=this.addBulkListener(e);return{dispose:t}},e.prototype.addEmitter=function(e,t){var n=this;return void 0===t&&(t=null),e.addBulkListener(function(e){var r=e;if(t){r=[];for(var o=0,s=e.length;s>o;o++)r.push(new i(e[o].getType(),e[o].getData(),t))}0===n._deferredCnt?n._emitEvents(r):n._collectedEvents.push.apply(n._collectedEvents,r)})},e.prototype.addEmitter2=function(e,t){var n=this.addEmitter(e,t);return{dispose:n}},e.prototype.addEmitterTypeListener=function(e,t,n){if(t){if("*"===e)throw new Error("Bulk listeners cannot specify an emitter type");return this.addListener(e+"/"+t,n)}return this.addListener(e,n)},e.prototype._removeListener=function(e,t){if(this._listeners.hasOwnProperty(e))for(var n=this._listeners[e],i=0,r=n.length;r>i;i++)if(n[i]===t){n.splice(i,1);break}},e.prototype._removeBulkListener=function(e){for(var t=0,n=this._bulkListeners.length;n>t;t++)if(this._bulkListeners[t]===e){this._bulkListeners.splice(t,1);break}},e.prototype._emitToSpecificTypeListeners=function(e,t){if(this._listeners.hasOwnProperty(e))for(var i=this._listeners[e].slice(0),r=0,o=i.length;o>r;r++)try{i[r](t)}catch(s){n.onUnexpectedError(s)}},e.prototype._emitToBulkListeners=function(e){for(var t=this._bulkListeners.slice(0),i=0,r=t.length;r>i;i++)try{t[i](e)}catch(o){n.onUnexpectedError(o)}},e.prototype._emitEvents=function(e){this._bulkListeners.length>0&&this._emitToBulkListeners(e);for(var t=0,n=e.length;n>t;t++){var i=e[t];this._emitToSpecificTypeListeners(i.getType(),i.getData()),i.getEmitterType()&&this._emitToSpecificTypeListeners(i.getType()+"/"+i.getEmitterType(),i.getData())}},e.prototype.emit=function(e,t){if(void 0===t&&(t={}),this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("Cannot emit this event type because it wasn't white-listed!");if(this._listeners.hasOwnProperty(e)||0!==this._bulkListeners.length){var n=new i(e,t);0===this._deferredCnt?this._emitEvents([n]):this._collectedEvents.push(n)}},e.prototype.deferredEmit=function(e){this._deferredCnt=this._deferredCnt+1;var t=null;try{t=e()}catch(i){n.onUnexpectedError(i)}return this._deferredCnt=this._deferredCnt-1,0===this._deferredCnt&&this._emitCollected(),t},e.prototype._emitCollected=function(){var e=this._collectedEvents;this._collectedEvents=[],e.length>0&&this._emitEvents(e)},e}();t.EventEmitter=r;var o=function(){function e(e,t){this.target=e,this.arg=t}return e}(),s=function(e){function t(t){void 0===t&&(t=null),e.call(this,t),this._emitQueue=[]}return __extends(t,e),t.prototype._emitToSpecificTypeListeners=function(e,t){if(this._listeners.hasOwnProperty(e))for(var n=this._listeners[e],i=0,r=n.length;r>i;i++)this._emitQueue.push(new o(n[i],t))},t.prototype._emitToBulkListeners=function(e){for(var t=this._bulkListeners,n=0,i=t.length;i>n;n++)this._emitQueue.push(new o(t[n],e))},t.prototype._emitEvents=function(t){for(e.prototype._emitEvents.call(this,t);this._emitQueue.length>0;){var i=this._emitQueue.shift();try{i.target(i.arg)}catch(r){n.onUnexpectedError(r)}}},t}(r);t.OrderGuaranteeEventEmitter=s}),define("vs/base/browser/dom",["require","exports","vs/base/browser/browser","vs/base/common/types","vs/base/common/eventEmitter","vs/base/browser/mouseEvent","vs/base/browser/keyboardEvent","vs/base/common/errors","vs/base/browser/browserService"],function(e,t,n,i,r,o,s,a,c){function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function l(e){var t=[];return JSON.stringify(e,function(e,n){if(n instanceof Element)return"[Element]";if(i.isObject(n)||Array.isArray(n)){if(-1!==t.indexOf(n))return"[Circular]";t.push(n)}return n})}function d(e){for(;e;){if(e===document.body)return!0;e=e.parentNode}return!1}function h(e,t){var n=e.className;if(!n)return void(te=-1);t=t.trim();var i=n.length,r=t.length;if(0===r)return void(te=-1);if(r>i)return void(te=-1);if(n===t)return te=0,void(ne=i);for(var o,s=-1;(s=n.indexOf(t,s+1))>=0;){if(o=s+r,(0===s||n.charCodeAt(s-1)===ie)&&n.charCodeAt(o)===ie)return te=s,void(ne=o+1);if(s>0&&n.charCodeAt(s-1)===ie&&o===i)return te=s-1,void(ne=o);if(0===s&&o===i)return te=0,void(ne=o)}te=-1}function p(e,t){return h(e,t),-1!==te}function f(e,t){e.className?(h(e,t),-1===te&&(e.className=e.className+" "+t)):e.className=t}function m(e,t){h(e,t),-1!==te&&(e.className=e.className.substring(0,te)+e.className.substring(ne))}function v(e,t,n){h(e,t),-1===te||n||m(e,t),-1===te&&n&&f(e,t)}function g(e,t){e.getAttribute("data-transform")!==t&&(e.setAttribute("data-transform",t),e.style.webkitTransform=t)}function y(e,t){e.getAttribute("data-transform")!==t&&(e.setAttribute("data-transform",t),e.style.transform=t)}function _(e,t,n,r){var o=function(e){e=e||window.event,n(e)};return i.isFunction(e.addEventListener)?(e.addEventListener(t,o,r||!1),function(){o&&(e.removeEventListener(t,o,r||!1),o=null,e=null,n=null)}):(e.attachEvent("on"+t,o),function(){e.detachEvent("on"+t,o)})}function b(e,t,n,i){var r=_(e,t,n,i);return{dispose:r}}function E(e){return function(t){return e(new o.StandardMouseEvent(t))}}function S(e){return function(t){return e(new s.StandardKeyboardEvent(t))}}function w(e,t){return _(e,"mouseout",function(n){for(var i=n.relatedTarget||n.toElement;i&&i!==e;)i=i.parentNode;i!==e&&t(n)})}function C(e,t){var n=w(e,t);return{dispose:n}}function T(e,t,n,i,r){function o(){c=-1,a=(new Date).getTime(),n(s),s=null}void 0===i&&(i=ae),void 0===r&&(r=se);var s=null,a=0,c=-1,u=_(e,t,function(e){s=i(s,e);var t=(new Date).getTime()-a;t>=r?(-1!==c&&window.clearTimeout(c),o()):-1===c&&(c=window.setTimeout(o,r-t))});return function(){-1!==c&&window.clearTimeout(c),u()}}function I(e,t,n,i,r){return T(e,t,n,i,r)}function k(e,t,n,i,r){var o=I(e,t,n,i,r);return{dispose:o}}function x(e){return document.defaultView.getComputedStyle(e,null)}function A(e,t,n){var i=x(e),r="0";return i&&(r=i.getPropertyValue?i.getPropertyValue(t):i.getAttribute(n)),ce(e,r)}function R(e){for(var t=e.offsetParent,n=e.offsetTop,i=e.offsetLeft;null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement;){n-=e.scrollTop;var r=x(e);r&&(i-="rtl"!==r.direction?e.scrollLeft:-e.scrollLeft),e===t&&(i+=ue.getBorderLeftWidth(e),n+=ue.getBorderTopWidth(e),n+=e.offsetTop,i+=e.offsetLeft,t=e.offsetParent)}return{left:i,top:n}}function D(e){var t=R(e);return{left:t.left,top:t.top,width:e.clientWidth,height:e.clientHeight}}function L(e){var t=ue.getBorderLeftWidth(e)+ue.getBorderRightWidth(e),n=ue.getPaddingLeft(e)+ue.getPaddingRight(e);return e.offsetWidth-t-n}function M(e){var t=ue.getMarginLeft(e)+ue.getMarginRight(e);return e.offsetWidth+t}function O(e){var t=ue.getBorderTopWidth(e)+ue.getBorderBottomWidth(e),n=ue.getPaddingTop(e)+ue.getPaddingBottom(e);return e.offsetHeight-t-n}function P(e){var t=ue.getMarginTop(e)+ue.getMarginBottom(e);return e.offsetHeight+t}function N(e,t){if(null===e)return 0;for(var n=e.offsetLeft,i=e.parentNode;null!==i&&(n-=i.offsetLeft,i!==t);)i=i.parentNode;return n}function F(e,t){if(null===e)return 0;for(var n=e.offsetTop,i=e.parentNode;null!==i&&(n-=i.offsetTop,i!==t);)i=i.parentNode;return n}function W(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function H(e,t,n){for(;e;){if(p(e,t))return e;if(n&&p(e,n))return null;e=e.parentNode}return null}function V(){var e=document.createElement("style");return e.type="text/css",e.media="screen",document.getElementsByTagName("head")[0].appendChild(e),e}function B(e){return e&&e.sheet&&e.sheet.rules?e.sheet.rules:e&&e.sheet&&e.sheet.cssRules?e.sheet.cssRules:[]}function K(e,t,n){void 0===n&&(n=le),n&&t&&n.sheet.insertRule(e+"{"+t+"}",0)}function U(e,t){if(void 0===t&&(t=le),!t)return null;for(var n=B(t),i=0;i<n.length;i++){var r=n[i],o=r.selectorText.replace(/::/gi,":");if(o===e)return r}return null}function z(e,t){if(void 0===t&&(t=le),t){for(var n=B(t),i=[],r=0;r<n.length;r++){var o=n[r],s=o.selectorText.replace(/::/gi,":");0===s.indexOf(e)&&i.push(r)}for(var r=i.length-1;r>=0;r--)t.sheet.deleteRule(i[r])}}function j(e){return c.getService().isHTMLElement(e)}function q(e){try{var t=G(e);e.select(),e.setSelectionRange&&e.setSelectionRange(0,9999),Y(e,t)}catch(n){}}function G(e){for(var t=[],n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}function Y(e,t){for(var n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}function $(e){var n=!1,i=!1,o=new r.EventEmitter,s=[],a=null;a={addFocusListener:function(e){var t=o.addListener("focus",e);return s.push(t),t},addBlurListener:function(e){var t=o.addListener("blur",e);return s.push(t),t},dispose:function(){for(;s.length>0;)s.pop()()}};var c=function(e){i=!1,n||(n=!0,o.emit("focus",{}))},u=function(e){n&&(i=!0,window.setTimeout(function(){i&&(i=!1,n=!1,o.emit("blur",{}))},0))};return s.push(_(e,t.EventType.FOCUS,c,!0)),s.push(_(e,t.EventType.BLUR,u,!0)),a}function X(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),i=n.length;i--;)n[i].parentNode.removeChild(n[i]);return t.innerHTML}function Q(e,t){return e.appendChild(t),t}function Z(e){var t=de.exec(e);if(!t)throw new Error("Bad use of emmet");var n=document.createElement(t[1]||"div");return t[3]&&(n.id=t[3]),t[4]&&(n.className=t[4].replace(/\./g," ").trim()),n}function J(e){e.style.display=null}function ee(e){e.style.display="none"}t.clearNode=u,t.safeStringifyDOMAware=l,t.isInDOM=d;var te,ne,ie=" ".charCodeAt(0);t.hasClass=p,t.addClass=f,t.removeClass=m,t.toggleClass=v,t.StyleMutator={setMaxWidth:function(e,t){var n=t+"px";e.style.maxWidth!==n&&(e.style.maxWidth=n)},setWidth:function(e,t){var n=t+"px";e.style.width!==n&&(e.style.width=n)},setHeight:function(e,t){var n=t+"px";e.style.height!==n&&(e.style.height=n)},setTop:function(e,t){var n=t+"px";e.style.top!==n&&(e.style.top=n)},setLeft:function(e,t){var n=t+"px";e.style.left!==n&&(e.style.left=n)},setBottom:function(e,t){var n=t+"px";e.style.bottom!==n&&(e.style.bottom=n)},setRight:function(e,t){var n=t+"px";e.style.right!==n&&(e.style.right=n)},setFontSize:function(e,t){var n=t+"px";e.style.fontSize!==n&&(e.style.fontSize=n)},setLineHeight:function(e,t){var n=t+"px";e.style.lineHeight!==n&&(e.style.lineHeight=n)},setTransform:null,setDisplay:function(e,t){e.style.display!==t&&(e.style.display=t)},setVisibility:function(e,t){e.style.visibility!==t&&(e.style.visibility=t)}},function(){var e=document.createElement("div");"undefined"!=typeof e.style.webkitTransform?t.StyleMutator.setTransform=g:t.StyleMutator.setTransform=y}(),t.addListener=_,t.addDisposableListener=b,t.addStandardDisposableListener=function(e,t,n,i){var r=n;return"click"===t?r=E(n):("keydown"===t||"keypress"===t||"keyup"===t)&&(r=S(n)),e.addEventListener(t,r,i||!1),{dispose:function(){r&&(e.removeEventListener(t,r,i||!1),r=null,e=null,n=null)}}},t.addNonBubblingMouseOutListener=w,t.addDisposableNonBubblingMouseOutListener=C;var re=function(){var e=function(e){return setTimeout(function(){return e((new Date).getTime())},0)},t=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame,n=self.cancelAnimationFrame||self.cancelRequestAnimationFrame||self.msCancelAnimationFrame||self.msCancelRequestAnimationFrame||self.webkitCancelAnimationFrame||self.webkitCancelRequestAnimationFrame||self.mozCancelAnimationFrame||self.mozCancelRequestAnimationFrame||self.oCancelAnimationFrame||self.oCancelRequestAnimationFrame,i=!!t,r=t||e,o=n||n;return{isNative:i,request:function(e){return r(e)},cancel:function(e){return o(e)}}}(),oe=function(){function e(e,t){this._runner=e,this.priority=t,this._canceled=!1}return e.prototype.dispose=function(){this._canceled=!0},e.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(e){a.onUnexpectedError(e)}},e.sort=function(e,t){return t.priority-e.priority},e}();!function(){var e=[],i=null,r=!1,o=!1,s=function(){for(r=!1,i=e,e=[],o=!0;i.length>0;){i.sort(oe.sort);var t=i.shift();t.execute()}o=!1};t.scheduleAtNextAnimationFrame=function(t,i){void 0===i&&(i=0);var o=new oe(t,i);if(e.push(o),!r)if(r=!0,n.isChrome){var a;re.request(function(){clearTimeout(a),s()}),a=setTimeout(s,1e3)}else re.request(s);return o},t.runAtThisOrScheduleAtNextAnimationFrame=function(e,n){if(o){var r=new oe(e,n);return i.push(r),r}return t.scheduleAtNextAnimationFrame(e,n)}}();var se=16,ae=function(e,t){return t};t.addThrottledListener=I,t.addDisposableThrottledListener=k,t.getComputedStyle=x;var ce=function(){return function(e,t){return parseFloat(t)||0}}(),ue={getBorderLeftWidth:function(e){return A(e,"border-left-width","borderLeftWidth")},getBorderTopWidth:function(e){return A(e,"border-top-width","borderTopWidth")},getBorderRightWidth:function(e){return A(e,"border-right-width","borderRightWidth")},getBorderBottomWidth:function(e){return A(e,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(e){return A(e,"padding-left","paddingLeft")},getPaddingTop:function(e){return A(e,"padding-top","paddingTop")},getPaddingRight:function(e){return A(e,"padding-right","paddingRight")},getPaddingBottom:function(e){return A(e,"padding-bottom","paddingBottom")},getMarginLeft:function(e){return A(e,"margin-left","marginLeft")},getMarginTop:function(e){return A(e,"margin-top","marginTop")},getMarginRight:function(e){return A(e,"margin-right","marginRight")},getMarginBottom:function(e){return A(e,"margin-bottom","marginBottom")},__commaSentinel:!1};t.getTopLeftOffset=R,t.getDomNodePosition=D,t.getContentWidth=L,t.getTotalWidth=M,t.getContentHeight=O,t.getTotalHeight=P,t.getRelativeLeft=N,t.getRelativeTop=F,t.isAncestor=W,t.findParentWithClass=H,t.createStyleSheet=V;var le=V();t.createCSSRule=K,t.getCSSRule=U,t.removeCSSRulesWithPrefix=z,t.isHTMLElement=j,t.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:n.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:n.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:n.isWebKit?"webkitAnimationIteration":"animationiteration"},t.EventHelper={stop:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}},t.selectTextInInputElement=q,t.saveParentsScrollTop=G,t.restoreParentsScrollTop=Y,t.trackFocus=$,t.removeScriptTags=X,t.append=Q;var de=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.emmet=Z,t.show=J,t.hide=ee}),define("vs/base/browser/globalMouseMoveMonitor",["require","exports","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/browser/mouseEvent","vs/base/browser/iframe"],function(e,t,n,i,r,o){function s(e,t){var n=new r.StandardMouseEvent(t);return n.preventDefault(),{leftButton:n.leftButton,posx:n.posx,posy:n.posy}}t.standardMouseMoveMerger=s;var a=function(){function e(){this.hooks=[],this.mouseMoveEventMerger=null,this.mouseMoveCallback=null,this.onStopCallback=null}return e.prototype.dispose=function(){this.stopMonitoring(!1)},e.prototype.stopMonitoring=function(e){if(this.isMonitoring()){this.hooks=n.disposeAll(this.hooks),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;var t=this.onStopCallback;this.onStopCallback=null,e&&t()}},e.prototype.isMonitoring=function(){return this.hooks.length>0},e.prototype.startMonitoring=function(e,t,n){var s=this;if(!this.isMonitoring()){this.mouseMoveEventMerger=e,this.mouseMoveCallback=t,this.onStopCallback=n;for(var a=o.getSameOriginWindowChain(),c=0;c<a.length;c++)this.hooks.push(i.addDisposableThrottledListener(a[c].window.document,"mousemove",function(e){return s.mouseMoveCallback(e)},function(e,t){return s.mouseMoveEventMerger(e,t)})),this.hooks.push(i.addDisposableListener(a[c].window.document,"mouseup",function(e){return s.stopMonitoring(!0)}));if(o.hasDifferentOriginAncestor()){var u=a[a.length-1];this.hooks.push(i.addDisposableListener(u.window.document,"mouseout",function(e){var t=new r.StandardMouseEvent(e);"html"===t.target.tagName.toLowerCase()&&s.stopMonitoring(!0)})),this.hooks.push(i.addDisposableListener(u.window.document,"mouseover",function(e){var t=new r.StandardMouseEvent(e);"html"===t.target.tagName.toLowerCase()&&s.stopMonitoring(!0)})),this.hooks.push(i.addDisposableListener(u.window.document.body,"mouseleave",function(e){s.stopMonitoring(!0)}))}}},e}();t.GlobalMouseMoveMonitor=a}),define("vs/base/browser/htmlContentRenderer",["require","exports","vs/base/browser/dom"],function(e,t,n){function i(e,t){return"string"==typeof e?[document.createTextNode(e)]:Array.isArray(e)?e.map(function(e){return r(e,t)}):e?[r(e,t)]:[]}function r(e,t,n){if(e.isText)return document.createTextNode(e.text);var i=o(e.tagName)||"div",c=document.createElement(i);if(e.className&&(c.className=e.className),e.text&&(c.textContent=e.text),e.style&&c.setAttribute("style",e.style),e.customStyle&&Object.keys(e.customStyle).forEach(function(t){c.style[t]=e.customStyle[t]}),e.code&&n){var u=n(e.code.language,e.code.value);c.appendChild(r(u,t,n))}return e.children&&e.children.forEach(function(e){c.appendChild(r(e,t,n))}),e.formattedText&&s(c,a(e.formattedText),t),c}function o(e){return e&&d.hasOwnProperty(e)?e:null}function s(e,t,i){var r;if(t.type===l.Text)r=document.createTextNode(t.content);else if(t.type===l.Bold)r=document.createElement("b");else if(t.type===l.Italics)r=document.createElement("i");else if(t.type===l.Action){var o=document.createElement("a");o.href="#",n.addStandardDisposableListener(o,"click",function(e){i(t.index,e)}),r=o}else t.type===l.NewLine?r=document.createElement("br"):t.type===l.Root&&(r=e);e!==r&&e.appendChild(r),Array.isArray(t.children)&&t.children.forEach(function(e){s(r,e,i)})}function a(e){for(var t={type:l.Root,children:[]},n=0,i=t,r=[],o=new h(e);!o.eos();){var s=o.next(),a="\\"===s&&u(o.peek())!==l.Invalid;if(a&&(s=o.next()),!a&&c(s)&&s===o.peek()){o.advance(),i.type===l.Text&&(i=r.pop());var d=u(s);if(i.type===d||i.type===l.Action&&d===l.ActionClose)i=r.pop();else{var p={type:d,children:[]};d===l.Action&&(p.index=n,n++),i.children.push(p),r.push(i),i=p}}else if("\n"===s)i.type===l.Text&&(i=r.pop()),i.children.push({type:l.NewLine});else if(i.type!==l.Text){var f={type:l.Text,content:s};i.children.push(f),r.push(i),i=f}else i.content+=s}return i.type===l.Text&&(i=r.pop()),r.length,t}function c(e){return u(e)!==l.Invalid}function u(e){switch(e){case"*":return l.Bold;case"_":return l.Italics;case"[":return l.Action;case"]":return l.ActionClose;default:return l.Invalid}}t.renderHtml2=i,t.renderHtml=r;var l,d={a:!0,b:!0,blockquote:!0,code:!0,del:!0,dd:!0,div:!0,dl:!0,dt:!0,em:!0,h1h2h3i:!0,img:!0,kbd:!0,li:!0,ol:!0,p:!0,pre:!0,s:!0,span:!0,sup:!0,sub:!0,strong:!0,strike:!0,ul:!0,br:!0,hr:!0},h=function(){function e(e){this.source=e,this.index=0}return e.prototype.eos=function(){return this.index>=this.source.length},e.prototype.next=function(){var e=this.peek();return this.advance(),e},e.prototype.peek=function(){return this.source[this.index]},e.prototype.advance=function(){this.index++},e}();!function(e){e[e.Invalid=0]="Invalid",e[e.Root=1]="Root",e[e.Text=2]="Text",e[e.Bold=3]="Bold",e[e.Italics=4]="Italics",e[e.Action=5]="Action",e[e.ActionClose=6]="ActionClose",e[e.NewLine=7]="NewLine"}(l||(l={}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/idleMonitor",["require","exports","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/browser/browserService"],function(e,t,n,i,r,o){!function(e){e[e.Idle=0]="Idle",e[e.Active=1]="Active"}(t.UserStatus||(t.UserStatus={}));var s=t.UserStatus;t.DEFAULT_IDLE_TIME=36e5;var a=function(){function e(e){var n=this;void 0===e&&(e=t.DEFAULT_IDLE_TIME),this.instance=u.INSTANCE,this.instance.increment(),this.status=null,this.idleCheckTimeout=-1,this.lastActiveTime=-1,this.idleTime=e,this.toDispose=[],this.eventEmitter=new r.EventEmitter,this.toDispose.push(this.eventEmitter),this.toDispose.push({dispose:this.instance.addListener(function(){return n.onUserActive()})}),this.onUserActive()}return e.prototype.addOneTimeActiveListener=function(e){return this.eventEmitter.addOneTimeDisposableListener("onActive",e)},e.prototype.addOneTimeIdleListener=function(e){return this.eventEmitter.addOneTimeDisposableListener("onIdle",e)},e.prototype.getStatus=function(){
return this.status},e.prototype.dispose=function(){this.cancelIdleCheck(),this.toDispose=i.disposeAll(this.toDispose),this.instance.decrement()},e.prototype.onUserActive=function(){this.lastActiveTime=(new Date).getTime(),this.status!==s.Active&&(this.status=s.Active,this.scheduleIdleCheck(),this.eventEmitter.emit("onActive"))},e.prototype.onUserIdle=function(){this.status!==s.Idle&&(this.status=s.Idle,this.eventEmitter.emit("onIdle"))},e.prototype.scheduleIdleCheck=function(){var e=this;if(-1===this.idleCheckTimeout){var t=this.lastActiveTime+this.idleTime;this.idleCheckTimeout=setTimeout(function(){e.idleCheckTimeout=-1,e.checkIfUserIsIdle()},t-(new Date).getTime())}},e.prototype.cancelIdleCheck=function(){-1!==this.idleCheckTimeout&&(clearTimeout(this.idleCheckTimeout),this.idleCheckTimeout=-1)},e.prototype.checkIfUserIsIdle=function(){var e=(new Date).getTime()-this.lastActiveTime;e>=this.idleTime?this.onUserIdle():this.scheduleIdleCheck()},e}();t.IdleMonitor=a;var c=function(){function e(){this.referenceCount=0}return e.prototype.increment=function(){0===this.referenceCount&&this.construct(),this.referenceCount++},e.prototype.decrement=function(){this.referenceCount>0&&(this.referenceCount--,0===this.referenceCount&&this.dispose())},e.prototype.construct=function(){throw new Error("Implement me")},e.prototype.dispose=function(){throw new Error("Implement me")},e}(),u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.construct=function(){var e=this;this.toDispose=[],this.eventEmitter=new r.EventEmitter,this.toDispose.push(this.eventEmitter),this.toDispose.push(n.addDisposableListener(o.getService().document,"mousemove",function(){return e.onUserActive()})),this.toDispose.push(n.addDisposableListener(o.getService().document,"keydown",function(){return e.onUserActive()})),this.onUserActive()},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose)},t.prototype.onUserActive=function(){this.eventEmitter.emit("onActive")},t.prototype.addListener=function(e){return this.eventEmitter.addListener("onActive",e)},t.INSTANCE=new t,t}(c)}),define("vs/base/browser/keyboardController",["require","exports","vs/base/browser/dom","vs/base/common/lifecycle"],function(e,t,n,i){var r=function(){function e(e){var t=this;this._listeners={},this._previousKeyDown=null,this._previousEventType=null,this._toDispose=[],this._toDispose.push(n.addStandardDisposableListener(e,"keydown",function(e){return t._onKeyDown(e)})),this._toDispose.push(n.addStandardDisposableListener(e,"keypress",function(e){return t._onKeyPress(e)})),this._toDispose.push(n.addStandardDisposableListener(e,"keyup",function(e){return t._onKeyUp(e)})),this._toDispose.push(n.addDisposableListener(e,"input",function(e){return t._onInput(e)}))}return e.prototype.dispose=function(){this._toDispose=i.disposeAll(this._toDispose),this._listeners=null,this._previousKeyDown=null,this._previousEventType=null},e.prototype.addListener=function(e,t){var n=this;return this._listeners[e]=t,function(){n._listeners[e]=null}},e.prototype._fire=function(e,t){this._listeners.hasOwnProperty(e)&&this._listeners[e](t)},e.prototype._onKeyDown=function(e){this._previousKeyDown=e.clone(),this._previousEventType="keydown",this._fire("keydown",e)},e.prototype._onKeyPress=function(e){this._previousKeyDown&&(e.shiftKey&&this._previousKeyDown.asKeybinding()!==e.asKeybinding()&&(e.shiftKey=!1),"keypress"===this._previousEventType&&this._fire("keydown",this._previousKeyDown)),this._previousEventType="keypress",this._fire("keypress",e)},e.prototype._onInput=function(e){this._fire("input",e)},e.prototype._onKeyUp=function(e){this._fire("keyup",e)},e}();t.KeyboardController=r}),define("vs/base/browser/touch",["require","exports","vs/base/common/arrays","vs/base/common/lifecycle","vs/base/browser/dom"],function(e,t,n,i,r){var o;!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend"}(o=t.EventType||(t.EventType={}));var s=function(){function e(e){this.callOnTarget=[],this.activeTouches={},this.target=e,this.handle=null}return e.prototype.dispose=function(){this.target=null,this.handle&&(this.handle.dispose(),this.handle=null)},Object.defineProperty(e.prototype,"target",{set:function(e){var t=this;i.cAll(this.callOnTarget),this.activeTouches={},this.targetElement=e,this.targetElement&&(this.callOnTarget.push(r.addListener(this.targetElement,"touchstart",function(e){return t.onTouchStart(e)})),this.callOnTarget.push(r.addListener(this.targetElement,"touchend",function(e){return t.onTouchEnd(e)})),this.callOnTarget.push(r.addListener(this.targetElement,"touchmove",function(e){return t.onTouchMove(e)})))},enumerable:!0,configurable:!0}),e.newGestureEvent=function(e){var t=document.createEvent("CustomEvent");return t.initEvent(e,!1,!0),t},e.prototype.onTouchStart=function(t){var n=Date.now();t.preventDefault(),t.stopPropagation(),this.handle&&(this.handle.dispose(),this.handle=null);for(var i=0,r=t.targetTouches.length;r>i;i++){var s=t.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:n,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[n],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};var a=e.newGestureEvent(o.Start);a.pageX=s.pageX,a.pageY=s.pageY,this.targetElement.dispatchEvent(a)}},e.prototype.onTouchEnd=function(t){var i=Date.now();t.preventDefault(),t.stopPropagation();for(var r=Object.keys(this.activeTouches).length,s=0,a=t.changedTouches.length;a>s;s++){var c=t.changedTouches.item(s);if(this.activeTouches.hasOwnProperty(String(c.identifier))){var u=this.activeTouches[c.identifier],l=Date.now()-u.initialTimeStamp;if(l<e.HOLD_DELAY&&Math.abs(u.initialPageX-n.tail(u.rollingPageX))<30&&Math.abs(u.initialPageY-n.tail(u.rollingPageY))<30){var d=e.newGestureEvent(o.Tap);d.initialTarget=u.initialTarget,d.pageX=n.tail(u.rollingPageX),d.pageY=n.tail(u.rollingPageY),this.targetElement.dispatchEvent(d)}else if(1===r){var h=n.tail(u.rollingPageX),p=n.tail(u.rollingPageY),f=n.tail(u.rollingTimestamps)-u.rollingTimestamps[0],m=h-u.rollingPageX[0],v=p-u.rollingPageY[0];this.inertia(i,Math.abs(m)/f,m>0?1:-1,h,Math.abs(v)/f,v>0?1:-1,p)}delete this.activeTouches[c.identifier]}else console.warn("move of an UNKNOWN touch",c)}},e.prototype.inertia=function(t,n,i,s,a,c,u){var l=this;this.handle=r.scheduleAtNextAnimationFrame(function(){var r=Date.now(),d=r-t,h=0,p=0,f=!0;n+=e.SCROLL_FRICTION*d,a+=e.SCROLL_FRICTION*d,n>0&&(f=!1,h=i*n*d),a>0&&(f=!1,p=c*a*d);var m=e.newGestureEvent(o.Change);m.translationX=h,m.translationY=p,l.targetElement.dispatchEvent(m),f||l.inertia(r,n,i,s+h,a,c,u+p)})},e.prototype.onTouchMove=function(t){var i=Date.now();t.preventDefault(),t.stopPropagation();for(var r=0,s=t.changedTouches.length;s>r;r++){var a=t.changedTouches.item(r);if(this.activeTouches.hasOwnProperty(String(a.identifier))){var c=this.activeTouches[a.identifier],u=e.newGestureEvent(o.Change);u.translationX=a.pageX-n.tail(c.rollingPageX),u.translationY=a.pageY-n.tail(c.rollingPageY),u.pageX=a.pageX,u.pageY=a.pageY,this.targetElement.dispatchEvent(u),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(a.pageX),c.rollingPageY.push(a.pageY),c.rollingTimestamps.push(i)}else console.warn("end of an UNKNOWN touch",a)}},e.HOLD_DELAY=2e3,e.SCROLL_FRICTION=-.005,e}();t.Gesture=s}),define("vs/base/browser/ui/highlightedlabel/highlightedLabel",["require","exports","vs/base/common/strings","vs/base/browser/dom","vs/base/common/objects"],function(e,t,n,i,r){var o=function(){function e(e){this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",this.didEverRender=!1,e.appendChild(this.domNode)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.domNode},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){void 0===e&&(e=""),void 0===t&&(t=[]),this.didEverRender&&this.text===e&&r.equals(this.highlights,e)||(this.text=e,this.highlights=t,this.render())},e.prototype.render=function(){i.clearNode(this.domNode);for(var e,t=[],r=0,o=0;o<this.highlights.length;o++)e=this.highlights[o],e.end!==e.start&&(r<e.start&&(t.push("<span>"),t.push(n.escape(this.text.substring(r,e.start))),t.push("</span>"),r=e.end),t.push('<span class="highlight">'),t.push(n.escape(this.text.substring(e.start,e.end))),t.push("</span>"),r=e.end);r<this.text.length&&(t.push("<span>"),t.push(n.escape(this.text.substring(r))),t.push("</span>")),this.domNode.innerHTML=t.join(""),this.didEverRender=!0},e.prototype.dispose=function(){this.text=null,this.highlights=null},e}();t.HighlightedLabel=o}),define("vs/base/browser/ui/scrollbar/impl/abstractScrollbar",["require","exports","vs/base/browser/dom","vs/base/browser/mouseEvent","vs/base/browser/ui/scrollbar/impl/common","vs/base/common/lifecycle","vs/base/browser/globalMouseMoveMonitor","vs/base/browser/browser","vs/base/common/platform"],function(e,t,n,i,r,o,s,a,c){function u(e){return e+"px"}function l(e,t,n,i,r){null!==t&&(e.style.top=u(t)),null!==n&&(e.style.left=u(n)),null!==i&&(e.style.bottom=u(i)),null!==r&&(e.style.right=u(r))}function d(e,t,n){null!==t&&(e.style.width=u(t)),null!==n&&(e.style.height=u(n))}var h=function(){function e(e,t,n){this.visibleSize=0,this.scrollSize=0,this.scrollPosition=0,this.scrollbarSize=t,this.oppositeScrollbarSize=n,this.arrowSize=e,this.refreshComputedValues()}return e.prototype.setVisibleSize=function(e){return this.visibleSize!==e?(this.visibleSize=e,this.refreshComputedValues(),!0):!1},e.prototype.setScrollSize=function(e){return this.scrollSize!==e?(this.scrollSize=e,this.refreshComputedValues(),!0):!1},e.prototype.setScrollPosition=function(e){return this.scrollPosition!==e?(this.scrollPosition=e,this.refreshComputedValues(),!0):!1},e.prototype.refreshComputedValues=function(){if(this.computedAvailableSize=Math.max(0,this.visibleSize-this.oppositeScrollbarSize),this.computedRepresentableSize=Math.max(0,this.computedAvailableSize-2*this.arrowSize),this.computedRatio=this.scrollSize>0?this.computedRepresentableSize/this.scrollSize:0,this.computedIsNeeded=this.scrollSize>this.visibleSize,this.computedIsNeeded){if(this.computedSliderSize=Math.floor(this.visibleSize*this.computedRatio),this.computedSliderPosition=Math.floor(this.scrollPosition*this.computedRatio),this.computedSliderSize<e.MINIMUM_SLIDER_SIZE){var t=(e.MINIMUM_SLIDER_SIZE-this.computedSliderSize)/2;this.computedSliderSize=e.MINIMUM_SLIDER_SIZE,this.computedSliderPosition-=t,this.computedSliderPosition+this.computedSliderSize>this.computedRepresentableSize&&(this.computedSliderPosition=this.computedRepresentableSize-this.computedSliderSize),this.computedSliderPosition<0&&(this.computedSliderPosition=0)}}else this.computedSliderSize=this.computedRepresentableSize,this.computedSliderPosition=0},e.prototype.getArrowSize=function(){return this.arrowSize},e.prototype.getRectangleLargeSize=function(){return this.computedAvailableSize},e.prototype.getRectangleSmallSize=function(){return this.scrollbarSize},e.prototype.isNeeded=function(){return this.computedIsNeeded},e.prototype.getSliderSize=function(){return this.computedSliderSize},e.prototype.getSliderPosition=function(){return this.computedSliderPosition},e.prototype.convertSliderPositionToScrollPosition=function(e){return e/this.computedRatio},e.prototype.validateScrollPosition=function(e){return e=Math.round(e),e=Math.max(e,0),e=Math.min(e,this.scrollSize-this.visibleSize)},e.MINIMUM_SLIDER_SIZE=20,e}();t.ScrollbarState=h;var p=function(){function e(e,t,i,r,o,a,c,u,h){var p=this;this.parent=h,this.mouseWheelEventFactory=u,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",d(this.bgDomNode,a,c),l(this.bgDomNode,null!==t?0:null,null!==i?0:null,null!==r?0:null,null!==o?0:null),this.domNode=document.createElement("div"),this.domNode.className=e,this.domNode.style.position="absolute",d(this.domNode,m.ARROW_IMG_SIZE,m.ARROW_IMG_SIZE),l(this.domNode,t,i,r,o),this.mouseMoveMonitor=new s.GlobalMouseMoveMonitor,this.toDispose=[],this.toDispose.push(n.addDisposableListener(this.bgDomNode,"mousedown",function(e){return p._arrowMouseDown(e)})),this.toDispose.push(n.addDisposableListener(this.domNode,"mousedown",function(e){return p._arrowMouseDown(e)})),this.toDispose.push(this.mouseMoveMonitor),this.interval=-1,this.timeout=-1}return e.prototype.dispose=function(){this.toDispose=o.disposeAll(this.toDispose),this._clearArrowTimers()},e.prototype._arrowMouseDown=function(e){var t=this,n=function(){t.parent.onMouseWheel(t.mouseWheelEventFactory())},r=function(){t.interval=window.setInterval(n,1e3/24)};n(),this._clearArrowTimers(),this.timeout=window.setTimeout(r,200),this.mouseMoveMonitor.startMonitoring(s.standardMouseMoveMerger,function(e){},function(){t._clearArrowTimers()});var o=new i.StandardMouseEvent(e);o.preventDefault()},e.prototype._clearArrowTimers=function(){-1!==this.interval&&(window.clearInterval(this.interval),this.interval=-1),-1!==this.timeout&&(window.clearTimeout(this.timeout),this.timeout=-1)},e}(),f=function(){function e(e,t,n){this._revealTimeout=-1,this.visibility=e,this.visibleClassName=t,this.invisibleClassName=n,this.domNode=null,this.isVisible=!1,this.isNeeded=!1,this.shouldBeVisible=!1,this.fadeAwayTimeout=-1}return e.prototype.dispose=function(){-1!==this.fadeAwayTimeout&&(window.clearTimeout(this.fadeAwayTimeout),this.fadeAwayTimeout=-1),-1!==this._revealTimeout&&(window.clearTimeout(this._revealTimeout),this._revealTimeout=-1)},e.prototype.applyVisibilitySetting=function(e){return this.visibility===r.Visibility.Hidden?!1:this.visibility===r.Visibility.Visible?!0:e},e.prototype.setShouldBeVisible=function(e){var t=this.applyVisibilitySetting(e);this.shouldBeVisible!==t&&(this.shouldBeVisible=t,this.ensureVisibility())},e.prototype.setIsNeeded=function(e){this.isNeeded!==e&&(this.isNeeded=e,this.ensureVisibility())},e.prototype.setDomNode=function(e){this.domNode=e,this.domNode.className=this.invisibleClassName,this.setShouldBeVisible(!1)},e.prototype.ensureVisibility=function(){return this.isNeeded?void(this.shouldBeVisible?this._reveal():this._hide(!0)):void this._hide(!1)},e.prototype._reveal=function(){var e=this;this.isVisible||(this.isVisible=!0,-1===this._revealTimeout&&(this._revealTimeout=window.setTimeout(function(){e._revealTimeout=-1,e.domNode.className=e.visibleClassName},0)),-1!==this.fadeAwayTimeout&&(window.clearTimeout(this.fadeAwayTimeout),this.fadeAwayTimeout=-1))},e.prototype._hide=function(e){-1!==this._revealTimeout&&(window.clearTimeout(this._revealTimeout),this._revealTimeout=-1),this.isVisible&&(this.isVisible=!1,this.domNode.className=this.invisibleClassName+(e?" fade":""))},e}(),m=function(){function e(e,t,n,i,r){this.forbidTranslate3dUse=e,this.parent=t,this.scrollbarState=n,this.visibilityController=new f(i,"visible scrollbar "+r,"invisible scrollbar "+r),this.mouseMoveMonitor=new s.GlobalMouseMoveMonitor,this.toDispose=[],this.toDispose.push(this.visibilityController),this.toDispose.push(this.mouseMoveMonitor)}return e.prototype._createDomNode=function(){var e=this;this.domNode=document.createElement("div"),!this.forbidTranslate3dUse&&a.canUseTranslate3d&&(this.domNode.style.transform="translate3d(0px, 0px, 0px)"),this.visibilityController.setDomNode(this.domNode),this.domNode.style.position="absolute",this.toDispose.push(n.addDisposableListener(this.domNode,"mousedown",function(t){return e._domNodeMouseDown(t)}))},e.prototype._createArrow=function(e,t,n,i,r,o,s,a){var c=new p(e,t,n,i,r,o,s,a,this.parent);this.domNode.appendChild(c.bgDomNode),this.domNode.appendChild(c.domNode),this.toDispose.push(c)},e.prototype._createSlider=function(e,t,r,o){var s=this;this.slider=document.createElement("div"),this.slider.className="slider",this.slider.style.position="absolute",l(this.slider,e,t,null,null),d(this.slider,r,o),this.domNode.appendChild(this.slider),this.toDispose.push(n.addDisposableListener(this.slider,"mousedown",function(e){return s._sliderMouseDown(new i.StandardMouseEvent(e))}))},e.prototype.destroy=function(){this.toDispose=o.disposeAll(this.toDispose)},e.prototype.onElementSize=function(e){this.scrollbarState.setVisibleSize(e)&&(this._renderDomNode(this.scrollbarState.getRectangleLargeSize(),this.scrollbarState.getRectangleSmallSize()),this._renderSlider(),this.visibilityController.setIsNeeded(this.scrollbarState.isNeeded()))},e.prototype.onElementScrollSize=function(e){this.scrollbarState.setScrollSize(e)&&(this._renderSlider(),this.visibilityController.setIsNeeded(this.scrollbarState.isNeeded()))},e.prototype.onElementScrollPosition=function(e){this.scrollbarState.setScrollPosition(e)&&(this._renderSlider(),this.visibilityController.setIsNeeded(this.scrollbarState.isNeeded()))},e.prototype.beginReveal=function(){this.visibilityController.setShouldBeVisible(!0)},e.prototype.beginHide=function(){this.visibilityController.setShouldBeVisible(!1)},e.prototype._renderSlider=function(){this._updateSlider(this.scrollbarState.getSliderSize(),this.scrollbarState.getArrowSize()+this.scrollbarState.getSliderPosition())},e.prototype._domNodeMouseDown=function(e){var t=new i.StandardMouseEvent(e);t.target===this.domNode&&this._onMouseDown(t)},e.prototype.delegateMouseDown=function(e){var t=new i.StandardMouseEvent(e),n=this.domNode.getClientRects()[0].top,r=n+this.scrollbarState.getSliderPosition(),o=n+this.scrollbarState.getSliderPosition()+this.scrollbarState.getSliderSize(),s=this._sliderMousePosition(t);s>=r&&o>=s?this._sliderMouseDown(t):this._onMouseDown(t)},e.prototype._onMouseDown=function(e){var t=n.getDomNodePosition(this.domNode),i=this._mouseDownRelativePosition(e,t)-this.scrollbarState.getArrowSize()-this.scrollbarState.getSliderSize()/2;this.setDesiredScrollPosition(this.scrollbarState.convertSliderPositionToScrollPosition(i)),this._sliderMouseDown(e)},e.prototype._sliderMouseDown=function(t){var i=this;if(t.leftButton){var r=this._sliderOrthogonalMousePosition(t),o=this._getScrollPosition(),a=this._sliderMousePosition(t)-this.scrollbarState.getSliderPosition();n.toggleClass(this.slider,"active",!0),this.mouseMoveMonitor.startMonitoring(s.standardMouseMoveMerger,function(t){var n=i._sliderOrthogonalMousePosition(t),s=Math.abs(n-r);if(c.isWindows&&s>e.MOUSE_DRAG_RESET_DISTANCE)i.setDesiredScrollPosition(o);else{var u=i._sliderMousePosition(t)-a;i.setDesiredScrollPosition(i.scrollbarState.convertSliderPositionToScrollPosition(u))}},function(){n.toggleClass(i.slider,"active",!1),i.parent.onDragEnd()}),t.preventDefault(),this.parent.onDragStart()}},e.prototype.validateScrollPosition=function(e){return this.scrollbarState.validateScrollPosition(e)},e.prototype.setDesiredScrollPosition=function(e){e=this.validateScrollPosition(e),this._setScrollPosition(e),this.onElementScrollPosition(e),this._renderSlider()},e.prototype._renderDomNode=function(e,t){},e.prototype._updateSlider=function(e,t){},e.prototype._mouseDownRelativePosition=function(e,t){return 0},e.prototype._sliderMousePosition=function(e){return 0},e.prototype._sliderOrthogonalMousePosition=function(e){return 0},e.prototype._getScrollPosition=function(){return 0},e.prototype._setScrollPosition=function(e){},e.ARROW_IMG_SIZE=11,e.MOUSE_DRAG_RESET_DISTANCE=140,e}();t.AbstractScrollbar=m}),define("vs/base/browser/ui/scrollbar/impl/domNodeScrollable",["require","exports","vs/base/browser/dom","vs/base/browser/touch","vs/base/common/eventEmitter"],function(e,t,n,i,r){var o=function(){function e(e){this.eventEmitterHelper=new r.EventEmitter,this.domNode=e,this.gestureHandler=new i.Gesture(this.domNode)}return e.prototype.getScrollHeight=function(){return this.domNode.scrollHeight},e.prototype.getScrollWidth=function(){return this.domNode.scrollWidth},e.prototype.getScrollLeft=function(){return this.domNode.scrollLeft},e.prototype.setScrollLeft=function(e){this.domNode.scrollLeft=e},e.prototype.getScrollTop=function(){return this.domNode.scrollTop},e.prototype.setScrollTop=function(e){this.domNode.scrollTop=e},e.prototype.addScrollListener=function(e){var t=this,i=this.eventEmitterHelper.addListener2("scroll",e),r=n.addDisposableListener(this.domNode,"scroll",function(e){t.eventEmitterHelper.emit("scroll",{browserEvent:e})});return{dispose:function(){r.dispose(),i.dispose()}}},e.prototype.dispose=function(){this.domNode=null,this.eventEmitterHelper.dispose(),this.gestureHandler&&(this.gestureHandler.dispose(),this.gestureHandler=null)},e}();t.DomNodeScrollable=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/impl/horizontalScrollbar",["require","exports","vs/base/browser/ui/scrollbar/impl/abstractScrollbar","vs/base/browser/mouseEvent","vs/base/browser/dom","vs/base/browser/ui/scrollbar/impl/common","vs/base/browser/browser"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,i,r){var s=this,a=new n.ScrollbarState(r.horizontalHasArrows?r.arrowSize:0,r.horizontal===o.Visibility.Hidden?0:r.horizontalScrollbarSize,r.vertical===o.Visibility.Hidden?0:r.verticalScrollbarSize);if(e.call(this,r.forbidTranslate3dUse,i,a,r.horizontal,"horizontal"),this.scrollable=t,this._createDomNode(),r.horizontalHasArrows){var c=(r.arrowSize-n.AbstractScrollbar.ARROW_IMG_SIZE)/2,u=(r.horizontalScrollbarSize-n.AbstractScrollbar.ARROW_IMG_SIZE)/2;this._createArrow("left-arrow",u,c,null,null,r.arrowSize,r.horizontalScrollbarSize,function(){return s._createMouseWheelEvent(1)}),this._createArrow("right-arrow",u,null,null,c,r.arrowSize,r.horizontalScrollbarSize,function(){return s._createMouseWheelEvent(-1)})}this._createSlider(Math.floor((r.horizontalScrollbarSize-r.horizontalSliderSize)/2),0,null,r.horizontalSliderSize)}return __extends(t,e),t.prototype._createMouseWheelEvent=function(e){return new i.StandardMouseWheelEvent(null,e,0)},t.prototype._updateSlider=function(e,t){r.StyleMutator.setWidth(this.slider,e),!this.forbidTranslate3dUse&&s.canUseTranslate3d?r.StyleMutator.setTransform(this.slider,"translate3d("+t+"px, 0px, 0px)"):r.StyleMutator.setLeft(this.slider,t)},t.prototype._renderDomNode=function(e,t){r.StyleMutator.setWidth(this.domNode,e),r.StyleMutator.setHeight(this.domNode,t),r.StyleMutator.setLeft(this.domNode,0),r.StyleMutator.setBottom(this.domNode,0)},t.prototype._mouseDownRelativePosition=function(e,t){return e.posx-t.left},t.prototype._sliderMousePosition=function(e){return e.posx},t.prototype._sliderOrthogonalMousePosition=function(e){return e.posy},t.prototype._getScrollPosition=function(){return this.scrollable.getScrollLeft()},t.prototype._setScrollPosition=function(e){this.scrollable.setScrollLeft(e)},t}(n.AbstractScrollbar);t.HorizontalScrollbar=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/scrollbar/impl/verticalScrollbar",["require","exports","vs/base/browser/ui/scrollbar/impl/abstractScrollbar","vs/base/browser/mouseEvent","vs/base/browser/dom","vs/base/browser/ui/scrollbar/impl/common","vs/base/browser/browser"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,i,r){var s=this,a=new n.ScrollbarState(r.verticalHasArrows?r.arrowSize:0,r.vertical===o.Visibility.Hidden?0:r.verticalScrollbarSize,r.horizontal===o.Visibility.Hidden?0:r.horizontalScrollbarSize);if(e.call(this,r.forbidTranslate3dUse,i,a,r.vertical,"vertical"),this.scrollable=t,this._createDomNode(),r.verticalHasArrows){var c=(r.arrowSize-n.AbstractScrollbar.ARROW_IMG_SIZE)/2,u=(r.verticalScrollbarSize-n.AbstractScrollbar.ARROW_IMG_SIZE)/2;this._createArrow("up-arrow",c,u,null,null,r.verticalScrollbarSize,r.arrowSize,function(){return s._createMouseWheelEvent(1)}),this._createArrow("down-arrow",null,u,c,null,r.verticalScrollbarSize,r.arrowSize,function(){return s._createMouseWheelEvent(-1)})}this._createSlider(0,Math.floor((r.verticalScrollbarSize-r.verticalSliderSize)/2),r.verticalSliderSize,null)}return __extends(t,e),t.prototype._createMouseWheelEvent=function(e){return new i.StandardMouseWheelEvent(null,0,e)},t.prototype._updateSlider=function(e,t){r.StyleMutator.setHeight(this.slider,e),!this.forbidTranslate3dUse&&s.canUseTranslate3d?r.StyleMutator.setTransform(this.slider,"translate3d(0px, "+t+"px, 0px)"):r.StyleMutator.setTop(this.slider,t)},t.prototype._renderDomNode=function(e,t){r.StyleMutator.setWidth(this.domNode,t),r.StyleMutator.setHeight(this.domNode,e),r.StyleMutator.setRight(this.domNode,0),r.StyleMutator.setTop(this.domNode,0)},t.prototype._mouseDownRelativePosition=function(e,t){return e.posy-t.top},t.prototype._sliderMousePosition=function(e){return e.posy},t.prototype._sliderOrthogonalMousePosition=function(e){return e.posx},t.prototype._getScrollPosition=function(){return this.scrollable.getScrollTop()},t.prototype._setScrollPosition=function(e){this.scrollable.setScrollTop(e)},t}(n.AbstractScrollbar);t.VerticalScrollbar=a}),define("vs/base/browser/ui/scrollbar/impl/scrollableElement",["require","exports","vs/base/browser/dom","vs/base/browser/mouseEvent","vs/base/common/platform","vs/base/browser/ui/scrollbar/impl/common","vs/base/browser/ui/scrollbar/impl/domNodeScrollable","vs/base/browser/ui/scrollbar/impl/horizontalScrollbar","vs/base/browser/ui/scrollbar/impl/verticalScrollbar","vs/base/common/lifecycle","vs/css!./scrollbars"],function(e,t,n,i,r,o,s,a,c,u){var l=500,d=50,h=function(){function e(e,t,i){var r=this;void 0===i&&(i=null),this.originalElement=e,this.originalElement.style.overflow="hidden",this.options=this._createOptions(t),this.options.scrollable?this.scrollable=this.options.scrollable:this.scrollable=new s.DomNodeScrollable(this.originalElement),this.verticalScrollbarWidth=this.options.verticalScrollbarSize,this.horizontalScrollbarHeight=this.options.horizontalScrollbarSize,this.verticalScrollbar=new c.VerticalScrollbar(this.scrollable,this,this.options),this.horizontalScrollbar=new a.HorizontalScrollbar(this.scrollable,this,this.options),this.domNode=document.createElement("div"),this.domNode.className="monaco-scrollable-element "+this.options.className,this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation"),this.domNode.style.position="relative",this.domNode.style.overflow="hidden",this.domNode.appendChild(this.originalElement),this.domNode.appendChild(this.horizontalScrollbar.domNode),this.domNode.appendChild(this.verticalScrollbar.domNode),this.options.useShadows&&(this.leftShadowDomNode=document.createElement("div"),this.leftShadowDomNode.className="shadow",this.domNode.appendChild(this.leftShadowDomNode)),this.options.useShadows&&(this.topShadowDomNode=document.createElement("div"),this.topShadowDomNode.className="shadow",this.domNode.appendChild(this.topShadowDomNode),this.topLeftShadowDomNode=document.createElement("div"),this.topLeftShadowDomNode.className="shadow top-left-corner",this.domNode.appendChild(this.topLeftShadowDomNode)),this.listenOnDomNode=this.options.listenOnDomNode||this.domNode,this.toDispose=[],this.toDispose.push(this.scrollable.addScrollListener(function(){return r._onScroll()})),this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this.options.handleMouseWheel),this.toDispose.push(n.addDisposableListener(this.listenOnDomNode,"mouseover",function(e){return r._onMouseOver(e)})),this.toDispose.push(n.addDisposableNonBubblingMouseOutListener(this.listenOnDomNode,function(e){return r._onMouseOut(e)})),this.onElementDimensionsTimeout=-1,this.onElementInternalDimensionsTimeout=-1,this.hideTimeout=-1,this.isDragging=!1,this.mouseIsOver=!1,this.onElementDimensions(i,!0),this.onElementInternalDimensions(!0)}return e.prototype.dispose=function(){this.toDispose=u.disposeAll(this.toDispose),this._mouseWheelToDispose=u.disposeAll(this._mouseWheelToDispose),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),-1!==this.onElementDimensionsTimeout&&(window.clearTimeout(this.onElementDimensionsTimeout),this.onElementDimensionsTimeout=-1),-1!==this.onElementInternalDimensionsTimeout&&(window.clearTimeout(this.onElementInternalDimensionsTimeout),this.onElementInternalDimensionsTimeout=-1)},e.prototype.getDomNode=function(){return this.domNode},e.prototype.getOverviewRulerLayoutInfo=function(){return{parent:this.domNode,insertBefore:this.verticalScrollbar.domNode}},e.prototype.getVerticalSliderDomNode=function(){return this.verticalScrollbar.slider},e.prototype.delegateVerticalScrollbarMouseDown=function(e){this.verticalScrollbar.delegateMouseDown(e)},e.prototype.onElementDimensions=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!1),t?this.actualElementDimensions(e):-1===this.onElementDimensionsTimeout&&(this.onElementDimensionsTimeout=window.setTimeout(function(){return n.actualElementDimensions(e)},0))},e.prototype.actualElementDimensions=function(e){void 0===e&&(e=null),this.onElementDimensionsTimeout=-1,e||(e={width:this.domNode.clientWidth,height:this.domNode.clientHeight}),this.dimensions=this._computeDimensions(e.width,e.height),this.verticalScrollbar.onElementSize(this.dimensions.height),this.horizontalScrollbar.onElementSize(this.dimensions.width)},e.prototype.onElementInternalDimensions=function(e){var t=this;void 0===e&&(e=!1),e?this.actualElementInternalDimensions():-1===this.onElementInternalDimensionsTimeout&&(this.onElementInternalDimensionsTimeout=window.setTimeout(function(){return t.actualElementInternalDimensions()},0))},e.prototype.actualElementInternalDimensions=function(){this.onElementInternalDimensionsTimeout=-1,this.horizontalScrollbar.onElementScrollSize(this.scrollable.getScrollWidth()),this.verticalScrollbar.onElementScrollSize(this.scrollable.getScrollHeight())},e.prototype.updateClassName=function(e){this.options.className=e,r.isMacintosh&&(this.options.className+=" mac"),this.domNode.className="monaco-scrollable-element "+this.options.className},e.prototype.updateOptions=function(e){var t=this._createOptions(e);this.options.handleMouseWheel=t.handleMouseWheel,this.options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity,this._setListeningToMouseWheel(this.options.handleMouseWheel)},e.prototype._setListeningToMouseWheel=function(e){var t=this,r=this._mouseWheelToDispose.length>0;if(r!==e&&(this._mouseWheelToDispose=u.disposeAll(this._mouseWheelToDispose),e)){var o=function(e){var n=new i.StandardMouseWheelEvent(e);t.onMouseWheel(n)};this._mouseWheelToDispose.push(n.addDisposableListener(this.listenOnDomNode,"mousewheel",o)),this._mouseWheelToDispose.push(n.addDisposableListener(this.listenOnDomNode,"DOMMouseScroll",o))}},e.prototype.onMouseWheel=function(e){if(r.isMacintosh&&e.browserEvent&&this.options.saveLastScrollTimeOnClassName){var t=e.browserEvent.target;if(t&&1===t.nodeType){var i=n.findParentWithClass(t,this.options.saveLastScrollTimeOnClassName);i&&i.setAttribute("last-scroll-time",String((new Date).getTime()))}}var o=-1,s=-1;if(e.deltaY||e.deltaX){var a=e.deltaY*this.options.mouseWheelScrollSensitivity,c=e.deltaX*this.options.mouseWheelScrollSensitivity;if(this.options.flipAxes&&(a=e.deltaX,c=e.deltaY),r.isMacintosh&&(a&&Math.abs(c)<.2&&(c=0),Math.abs(a)>.5*Math.abs(c)&&(c=0)),a){var u=this.scrollable.getScrollTop();o=this.verticalScrollbar.validateScrollPosition((-1!==o?o:u)-d*a),o===u&&(o=-1)}if(c){var l=this.scrollable.getScrollLeft();s=this.horizontalScrollbar.validateScrollPosition((-1!==s?s:l)-d*c),s===l&&(s=-1)}(-1!==o||-1!==s)&&(-1!==o&&(this.verticalScrollbar.setDesiredScrollPosition(o),o=-1),-1!==s&&(this.horizontalScrollbar.setDesiredScrollPosition(s),s=-1))}e.preventDefault(),e.stopPropagation()},e.prototype._onScroll=function(){var e=this.scrollable.getScrollHeight(),t=this.scrollable.getScrollTop(),i=this.scrollable.getScrollWidth(),r=this.scrollable.getScrollLeft();
if(this.verticalScrollbar.onElementScrollPosition(t),this.horizontalScrollbar.onElementScrollPosition(r),this.options.useShadows){var o=e>0&&t>0,s=this.options.useShadows&&i>0&&r>0;this.topShadowDomNode&&n.toggleClass(this.topShadowDomNode,"top",o),this.topLeftShadowDomNode&&n.toggleClass(this.topLeftShadowDomNode,"top",o),this.leftShadowDomNode&&n.toggleClass(this.leftShadowDomNode,"left",s),this.topLeftShadowDomNode&&n.toggleClass(this.topLeftShadowDomNode,"left",s)}this._reveal()},e.prototype.onDragStart=function(){this.isDragging=!0,this._reveal()},e.prototype.onDragEnd=function(){this.isDragging=!1,this._hide()},e.prototype._onMouseOut=function(e){this.mouseIsOver=!1,this._hide()},e.prototype._onMouseOver=function(e){this.mouseIsOver=!0,this._reveal()},e.prototype._reveal=function(){this.verticalScrollbar.beginReveal(),this.horizontalScrollbar.beginReveal(),this._scheduleHide()},e.prototype._hide=function(){this.mouseIsOver||this.isDragging||(this.verticalScrollbar.beginHide(),this.horizontalScrollbar.beginHide())},e.prototype._scheduleHide=function(){-1!==this.hideTimeout&&window.clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout(this._hide.bind(this),l)},e.prototype._computeDimensions=function(e,t){var n=e,i=t;return{width:n,height:i}},e.prototype._createOptions=function(e){function t(e,t,n){return e.hasOwnProperty(t)?e[t]:n}var n={forbidTranslate3dUse:t(e,"forbidTranslate3dUse",!1),className:t(e,"className",""),useShadows:t(e,"useShadows",!0),handleMouseWheel:t(e,"handleMouseWheel",!0),flipAxes:t(e,"flipAxes",!1),mouseWheelScrollSensitivity:t(e,"mouseWheelScrollSensitivity",1),arrowSize:t(e,"arrowSize",11),scrollable:t(e,"scrollable",null),listenOnDomNode:t(e,"listenOnDomNode",null),horizontal:o.visibilityFromString(t(e,"horizontal","auto")),horizontalScrollbarSize:t(e,"horizontalScrollbarSize",10),horizontalSliderSize:0,horizontalHasArrows:t(e,"horizontalHasArrows",!1),vertical:o.visibilityFromString(t(e,"vertical","auto")),verticalScrollbarSize:t(e,"verticalScrollbarSize",10),verticalHasArrows:t(e,"verticalHasArrows",!1),verticalSliderSize:0,saveLastScrollTimeOnClassName:t(e,"saveLastScrollTimeOnClassName",null)};return n.horizontalSliderSize=t(e,"horizontalSliderSize",n.horizontalScrollbarSize),n.verticalSliderSize=t(e,"verticalSliderSize",n.verticalScrollbarSize),r.isMacintosh&&(n.className+=" mac"),n},e}();t.ScrollableElement=h}),define("vs/base/common/eventSource",["require","exports","vs/base/common/callbackList"],function(e,t,n){var i=function(){function e(){}return e.prototype.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this._value?this._value.invoke.apply(this._value,e):void 0},Object.defineProperty(e.prototype,"value",{get:function(){var e=this;return this._value||(this._value=new n["default"]),{add:function(t,n,i){e._value.add(t,n,i)},remove:this._value.remove.bind(this._value)}},enumerable:!0,configurable:!0}),e}();t.EventSource=i}),define("vs/base/common/filters",["require","exports","vs/base/common/strings"],function(e,t,n){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t,n){for(var i=0,r=e.length;r>i;i++){var o=e[i](t,n);if(o)return o}return null}}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t,n){for(var i=[],r=0,o=e.length;o>r;r++){var s=e[r](t,n);if(!s)return null;i=i.concat(s)}return i}}function o(e,t,n){if(0===n.length||n.length<t.length)return null;e&&(t=t.toLowerCase(),n=n.toLowerCase());for(var i=0;i<t.length;i++)if(t[i]!==n[i])return null;return t.length>0?[{start:0,end:t.length}]:[]}function s(e,t){var n=t.toLowerCase().indexOf(e.toLowerCase());return-1===n?null:[{start:n,end:n+e.length}]}function a(e,t){return c(e.toLowerCase(),t.toLowerCase(),0,0)}function c(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]===t[i]){var r=null;if(r=c(e,t,n+1,i+1))return f({start:i,end:i+1},r)}return c(e,t,n,i+1)}function u(e){return e>=97&&122>=e}function l(e){return e>=65&&90>=e}function d(e){return e>=48&&57>=e}function h(e){return[32,9,10,13].indexOf(e)>-1}function p(e){return u(e)||l(e)||d(e)}function f(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function m(e,t){for(var n=t;n<e.length;n++){var i=e.charCodeAt(n);if(l(i)||d(i)||n>0&&!p(e.charCodeAt(n-1)))return n}return e.length}function v(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]!==t[i].toLowerCase())return null;var r=null,o=i+1;for(r=v(e,t,n+1,i+1);!r&&(o=m(t,o))<t.length;)r=v(e,t,n+1,o),o++;return null===r?null:f({start:i,end:i+1},r)}function g(e){if(e.length>40)return!1;for(var t=0,n=0,i=0,r=0,o=0;o<e.length;o++)r=e.charCodeAt(o),l(r)&&t++,u(r)&&n++,p(r)&&i++;var s=t/e.length,a=n/e.length,c=i/e.length;return a>.2&&.8>s&&c>.6}function y(e){for(var t=0,n=0,i=0,r=0,o=0;o<e.length;o++)i=e.charCodeAt(o),l(i)&&t++,u(i)&&n++,h(i)&&r++;return 0!==t&&0!==n||0!==r?5>=t:e.length<=30}function _(e,t){if(0===t.length)return null;if(!y(e))return null;if(!g(t))return null;for(var n=null,i=0;i<t.length&&null===(n=v(e.toLowerCase(),t,0,i));)i=m(t,i+1);return n}function b(e,t,i){void 0===i&&(i=!1);var r=w[e];r||(r=new RegExp(n.convertSimple2RegExpPattern(e),"i"),w[e]=r);var o=r.exec(t);return o?[{start:o.index,end:o.index+o[0].length}]:i?S(e,t):E(e,t)}t.or=i,t.and=r,t.matchesStrictPrefix=function(e,t){return o(!1,e,t)},t.matchesPrefix=function(e,t){return o(!0,e,t)},t.matchesContiguousSubString=s,t.matchesSubString=a,t.matchesCamelCase=_,function(e){e[e.Contiguous=0]="Contiguous",e[e.Separate=1]="Separate"}(t.SubstringMatching||(t.SubstringMatching={}));var E=(t.SubstringMatching,i(t.matchesPrefix,_,s)),S=i(t.matchesPrefix,_,a),w={};t.matchesFuzzy=b}),define("vs/base/common/glob",["require","exports","vs/base/common/strings","vs/base/common/paths"],function(e,t,n,i){function r(e){switch(e){case 0:return"";case 1:return h+"*?";default:return"(?:"+d+"|"+h+"+"+d+"|"+d+h+"+)*?"}}function o(e,t){if(!e)return[];for(var n,i=[],r=!1,o=!1,s="",a=0;a<e.length;a++){switch(n=e[a]){case t:if(!r&&!o){i.push(s),s="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":o=!0;break;case"]":o=!1}s+=n}return s&&i.push(s),i}function s(e){if(!e)return"";var t="",i=o(e,"/");if(i.every(function(e){return"**"===e}))t=".*";else{var a=!1;i.forEach(function(e,c){if("**"===e)return void(a||(t+=r(2),a=!0));for(var u,l=!1,p="",f=!1,m="",v=0;v<e.length;v++)if(u=e[v],"}"!==u&&l)p+=u;else if("]"!==u&&f){var g;switch(u){case"-":g=u;break;case"^":g=u;break;default:g=n.escapeRegExpCharacters(u)}m+=g}else switch(u){case"{":l=!0;continue;case"[":f=!0;continue;case"}":var y=o(p,","),_="(?:"+y.reduce(function(e,t,n,i){return e+"|"+s(t)},s(y[0]))+")";t+=_,l=!1,p="";break;case"]":t+="["+m+"]",f=!1,m="";break;case"?":t+=h;continue;case"*":t+=r(1);continue;default:t+=n.escapeRegExpCharacters(u)}c<i.length-1&&"**"!==i[c+1]&&(t+=d),a=!1})}return t}function a(e){if(!e)return null;if(e=e.trim(),l[e]){var t=l[e];return t.lastIndex=0,t}var n=s(e);n="^"+n+"$";var i;try{i=new RegExp(n)}catch(r){i=/.^/}return l[e]=i,i}function c(e,t,n){if(!e||!t)return!1;if("string"==typeof e)try{return a(e).test(t)}catch(i){return!1}return u(e,t,n)}function u(e,t,r){for(var o=Object.getOwnPropertyNames(e),s=0;s<o.length;s++){var a=o[s];if(c(a,t)){var u=e[a];if("boolean"==typeof u){if(u===!1)continue;return a}if(u&&"string"==typeof u.when){if(!r||!r.length)continue;var l=u,d=n.rtrim(i.basename(t),i.extname(t)),h=n.replaceAll(l.when,"$(basename)",d);if(r.some(function(e){return e===h}))return a;continue}return a}}return null}var l=Object.create(null),d="[/\\\\]",h="[^/\\\\]";t.splitGlobAware=o,t.match=c}),define("vs/base/common/labels",["require","exports","vs/base/common/platform","vs/base/common/types","vs/base/common/strings","vs/base/common/paths"],function(e,t,n,i,r,o){function s(e,t){var i=t&&a(t),s=a(e);return i&&o.isEqualOrParent(s,i)?o.normalize(r.ltrim(s.substr(i.length),o.nativeSep),!0):n.isWindows&&":"===s[1]?o.normalize(s.charAt(0).toUpperCase()+s.slice(1),!0):o.normalize(s,!0)}function a(e){if(!e)return null;if("string"==typeof e)return e;if(i.isFunction(e.getWorkspace)){var t=e.getWorkspace();return t?t.resource.fsPath:void 0}return e.fsPath}var c=function(){function e(e){this.root=e&&a(e)}return e.prototype.getLabel=function(e){return s(a(e),this.root)},e}();t.PathLabelProvider=c,t.getPathLabel=s}),define("vs/base/browser/ui/filelabel/fileLabel",["require","exports","vs/base/browser/dom","vs/base/common/paths","vs/base/common/types","vs/base/common/labels","vs/css!./filelabel"],function(e,t,n,i,r,o){function s(e){if(!e)return null;if("string"==typeof e)return e;if(r.isFunction(e.getWorkspace)){var t=e.getWorkspace();return t?t.resource.fsPath:void 0}return e.fsPath}var a=function(){function e(e,t,n){this.domNode=document.createElement("span"),this.domNode.className="monaco-file-label",e.appendChild(this.domNode),n&&(this.basepath=s(n)),t&&this.setValue(t)}return e.prototype.getHTMLElement=function(){return this.domNode},e.prototype.setValue=function(e){var t=s(e);this.renderedOnce&&this.path===t||(this.path=t,this.render(),this.renderedOnce=!0)},e.prototype.render=function(){n.clearNode(this.domNode);var e=[];e.push('<span class="file-name">'),e.push(i.basename(this.path)),e.push("</span>");var t=i.dirname(this.path);if(t&&"."!==t){var r=o.getPathLabel(t,this.basepath);e.push('<span class="file-path" title="'+r+'">'),e.push(r),e.push("</span>")}this.domNode.innerHTML=e.join("")},e}();t.FileLabel=a}),define("vs/base/common/mime",["require","exports","vs/base/common/paths","vs/base/common/types","vs/base/common/strings"],function(e,t,n,i,r){function o(e){void 0===e&&(e=!0);var t=function(t){return e?/^\./.test(t):!0},n=function(e){return e.replace(/^\./,"")},i=[];i=i.concat(Object.keys(h)),i=i.filter(t).map(n),i.sort();for(var r=[],o=null,s=null,a=[],c=function(){a.length>0&&r.push("'"+a.join("', '")+"'")},u=0,l=i.length;l>u;u++){var d=i[u];if(0!==d.length&&d!==s){var p=d.charAt(0);o!==p&&(c(),o=p,a=[]),a.push(d),s=d}}return c(),r.join(",\n")}function s(e,t){e&&t&&(h[e]&&h[e]!==t&&console.warn("Overwriting filename <<"+e+">> to now point to mime <<"+t+">>"),h[e]=t)}function a(e,t){e&&t&&p.push({regexp:e,mime:t})}function c(e){if(!e)return!1;var n;return n=i.isArray(e)?e:e.split(",").map(function(e){return e.trim()}),n.indexOf(t.MIME_BINARY)>=0}function u(e,i){if(!e)return[t.MIME_UNKNOWN];if(i&&(r.startsWithUTF8BOM(i)&&(i=i.substr(1)),i.length>0))for(var o=0;o<p.length;++o){var s=i.match(p[o].regexp);if(s&&s.length>0&&s[0].length===i.length)return[p[o].mime,t.MIME_TEXT]}e=e.toLowerCase();var a,c,u=n.basename(e);n.extname(e);for(var l in h){var d=l.toLowerCase();if(!a&&u===d){a=l;break}"."===l[0]&&r.endsWith(u,d)&&(!c||d.length>c.length)&&(c=l)}return a?[h[a],t.MIME_TEXT]:c?[h[c],t.MIME_TEXT]:[t.MIME_UNKNOWN]}function l(e){return e?"string"==typeof e?e===t.MIME_BINARY||e===t.MIME_TEXT||e===t.MIME_UNKNOWN:1===e.length&&l(e[0]):!0}function d(e,t){for(var n in h){var i=h[n];if(i===e)return t+n}return null}t.MIME_TEXT="text/plain",t.MIME_BINARY="application/octet-stream",t.MIME_UNKNOWN="application/unknown";var h=Object.create(null),p=[];t.generateKnownFilenames=o,t.registerTextMimeByFilename=s,t.registerTextMimeByFirstLine=a,t.isBinaryMime=c,t.guessMimeTypes=u,t.isUnspecific=l,t.suggestFilename=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/network",["require","exports","vs/base/common/assert","vs/base/common/strings","vs/base/common/hash","vs/base/common/paths","vs/base/common/uri"],function(e,t,n,i,r,o,s){var a=":".charCodeAt(0),c="/".charCodeAt(0),u="?".charCodeAt(0),l="#".charCodeAt(0),d=function(){function e(e){this.spec=e||i.empty,this.specLength=this.spec.length,this.parse()}return e.prototype.forwardSubstring=function(e,t){return t>e?this.spec.substring(e,t):i.empty},e.prototype.getScheme=function(){return this.forwardSubstring(this.schemeStart,this.domainStart-1)},e.prototype.getProtocol=function(){return this.forwardSubstring(this.schemeStart,this.domainStart)},e.prototype.getDomain=function(){return this.forwardSubstring(this.domainStart+2,this.portStart)},e.prototype.getPort=function(){return this.forwardSubstring(this.portStart+1,this.pathStart)},e.prototype.getHost=function(){return this.forwardSubstring(this.domainStart+2,this.pathStart)},e.prototype.getPath=function(){return this.forwardSubstring(this.pathStart,this.queryStringStart)},e.prototype.getQueryString=function(){return this.forwardSubstring(this.queryStringStart+1,this.fragmentIdStart)},e.prototype.getFragmentId=function(){return this.forwardSubstring(this.fragmentIdStart+1,this.specLength)},e.prototype.getAllBeforePath=function(){return this.forwardSubstring(0,this.pathStart)},e.prototype.getAllBeforeFragmentId=function(){return this.forwardSubstring(0,this.fragmentIdStart)},e.prototype.combine=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),r=e.length;-1!==t&&r>t&&(r=t),-1!==n&&r>n&&(r=n);var s=e.substring(0,r),a=e.substring(r);s=s.replace("\\","/");var c;for(c=i.startsWith(s,"/")?o.join(s):o.join(o.dirname(this.getPath()),s);"/"===c.charAt(0);)c=c.substr(1);for(;0===c.indexOf("../");)c=c.substr(3);return this.getAllBeforePath()+"/"+c+a},e.prototype.parse=function(){var e,t,n=0,i=1,r=2,o=3,s=4,d=n,h=this.spec,p=this.specLength,f=-1,m=-1;for(this.schemeStart=0,this.domainStart=this.specLength,this.portStart=this.specLength,this.pathStart=this.specLength,this.queryStringStart=this.specLength,this.fragmentIdStart=this.specLength,e=0;p>e;e++){switch(t=h.charCodeAt(e),d){case n:f===c&&t===c&&(d=i,this.domainStart=e-1);break;case i:t===a?(d=r,this.portStart=e):t===c?(d=o,this.portStart=e,this.pathStart=e):t===l&&(this.portStart=e,this.pathStart=e,this.queryStringStart=e,this.fragmentIdStart=e,e=p);break;case r:t===c?(d=o,this.pathStart=e):t===l&&(this.pathStart=e,this.queryStringStart=e,this.fragmentIdStart=e,e=p);break;case o:t===u?(d=s,this.queryStringStart=e):t===l&&(this.queryStringStart=e,this.fragmentIdStart=e,e=p);break;case s:t===l&&(this.fragmentIdStart=e,e=p)}m=f,f=t}d===n&&(this.schemeStart=this.specLength)},e}();t.ParsedUrl=d;var h=function(e){function t(t){e.call(this),n.ok(!!t,"spec must not be null"),"string"==typeof t?this._uri=s["default"].parse(t):this._uri=t,this._spec=this._uri.toString(),this._parsed=null}return __extends(t,e),t.fromEncoded=function(e){return new t(decodeURIComponent(e))},t.fromValue=function(e){return new t(e)},t.fromUri=function(e){return e?e instanceof t?e:new t(e):e},t.prototype.equals=function(e){return this.toString()!==String(e)?!1:e instanceof t||s["default"].isURI(e)},t.prototype.hashCode=function(){return r.computeMurmur2StringHashCode(this._spec)},t.prototype.isInMemory=function(){return this.scheme===p.inMemory},t.prototype.getScheme=function(){return this._ensureParsedUrl(),this._parsed.getScheme()},t.prototype.getPath=function(){return this._ensureParsedUrl(),this._parsed.getPath()},t.prototype.toUnique=function(){return this._ensureParsedUrl(),this._parsed.getAllBeforeFragmentId()},t.prototype.startsWith=function(e){return i.startsWith(this._spec,e._spec)},t.prototype.combine=function(e){return this._ensureParsedUrl(),new t(this._parsed.combine(e))},t.prototype._ensureParsedUrl=function(){null===this._parsed&&(this._parsed=new d(this._spec))},Object.defineProperty(t.prototype,"scheme",{get:function(){return this._uri.scheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authority",{get:function(){return this._uri.authority},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._uri.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._uri.fsPath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return this._uri.query},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fragment",{get:function(){return this._uri.fragment},enumerable:!0,configurable:!0}),t.prototype.withScheme=function(e){return s["default"].create(e,this.authority,this.fsPath,this.query,this.fragment)},t.prototype.withAuthority=function(e){return s["default"].create(this.scheme,e,this.fsPath,this.query,this.fragment)},t.prototype.withPath=function(e){return s["default"].create(this.scheme,this.authority,e,this.query,this.fragment)},t.prototype.withQuery=function(e){return s["default"].create(this.scheme,this.authority,this.fsPath,e,this.fragment)},t.prototype.withFragment=function(e){return s["default"].create(this.scheme,this.authority,this.fsPath,this.query,e)},t.prototype["with"]=function(e,t,n,i,r){return s["default"].create(e,t,n,i,r)},t.prototype.toString=function(){return this._spec},t.prototype.toJSON=function(){return this.toString()},t}(s["default"]);t.URL=h;var p;!function(e){e.inMemory="inmemory",e.http="http",e.https="https",e.file="file"}(p=t.schemas||(t.schemas={}))}),define("vs/base/common/severity",["require","exports","vs/nls!vs/base/common/severity","vs/base/common/strings"],function(e,t,n,i){var r;!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={}));var r;!function(e){function t(t){return t?i.equalsIgnoreCase(s,t)?e.Error:i.equalsIgnoreCase(a,t)||i.equalsIgnoreCase(c,t)?e.Warning:i.equalsIgnoreCase(u,t)?e.Info:e.Ignore:e.Ignore}function r(e){return l[e]||i.empty}function o(e,t){return t-e}var s="error",a="warning",c="warn",u="info",l=Object.create(null);l[e.Error]=n.localize(0,null),l[e.Warning]=n.localize(1,null),l[e.Info]=n.localize(2,null),e.fromValue=t,e.toString=r,e.compare=o}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}),define("vs/base/common/timer",["require","exports","vs/base/common/platform","vs/base/common/errors","vs/base/common/stopwatch"],function(e,t,n,i,r){function o(e,t,n,i){return h.start(e,t,n,i)}function s(){return h}t.ENABLE_TIMER=!1;var a=n.globals.msWriteProfilerMark;!function(e){e[e.EDITOR=0]="EDITOR",e[e.LANGUAGES=1]="LANGUAGES",e[e.WORKER=2]="WORKER",e[e.WORKBENCH=3]="WORKBENCH",e[e.STARTUP=4]="STARTUP"}(t.Topic||(t.Topic={}));var c=t.Topic,u=function(){function e(){}return e.prototype.stop=function(){},e.prototype.timeTaken=function(){return-1},e}(),l=function(){function e(e,t,n,i,o){if(this.timeKeeper=e,this.name=t,this.description=o,this.topic=n,this.stopTime=null,i)return void(this.startTime=i);if(this.startTime=new Date,this.sw=r.StopWatch.create(),a){var s=["Monaco",this.topic,this.name,"start"];a(s.join("|"))}}return e.prototype.stop=function(e){if(null===this.stopTime){if(e)return this.stopTime=e,this.sw=null,void this.timeKeeper._onEventStopped(this);if(this.stopTime=new Date,this.sw&&this.sw.stop(),this.timeKeeper._onEventStopped(this),a){var t=["Monaco",this.topic,this.name,"stop"];a(t.join("|"))}}},e.prototype.timeTaken=function(){return this.sw?this.sw.elapsed():this.stopTime?this.stopTime.getTime()-this.startTime.getTime():-1},e}(),d=function(){function e(){this.cleaningIntervalId=-1,this.collectedEvents=[],this.listeners=[]}return e.prototype.isEnabled=function(){return t.ENABLE_TIMER},e.prototype.start=function(e,n,i,r){if(!this.isEnabled())return t.nullEvent;var o;"string"==typeof e?o=e:e===c.EDITOR?o="Editor":e===c.LANGUAGES?o="Languages":e===c.WORKER?o="Worker":e===c.WORKBENCH?o="Workbench":e===c.STARTUP&&(o="Startup"),this.initAutoCleaning();var s=new l(this,n,o,i,r);return this.addEvent(s),s},e.prototype.dispose=function(){-1!==this.cleaningIntervalId&&(n.clearInterval(this.cleaningIntervalId),this.cleaningIntervalId=-1)},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return void this.listeners.splice(t,1)},e.prototype.addEvent=function(t){t.id=e.EVENT_ID,e.EVENT_ID++,this.collectedEvents.push(t),this.collectedEvents.length>e._EVENT_CACHE_LIMIT&&this.collectedEvents.shift()},e.prototype.initAutoCleaning=function(){var t=this;-1===this.cleaningIntervalId&&(this.cleaningIntervalId=n.setInterval(function(){var n=Date.now();t.collectedEvents.forEach(function(t){!t.stopTime&&n-t.startTime.getTime()>=e._MAX_TIMER_LENGTH&&t.stop()})},e._CLEAN_UP_INTERVAL))},e.prototype.getCollectedEvents=function(){return this.collectedEvents.slice(0)},e.prototype.clearCollectedEvents=function(){this.collectedEvents=[]},e.prototype._onEventStopped=function(e){for(var t=[e],n=this.listeners.slice(0),r=0;r<n.length;r++)try{n[r](t)}catch(o){i.onUnexpectedError(o)}},e.prototype.setInitialCollectedEvents=function(t,n){var i=this;this.isEnabled()&&(n&&(e.PARSE_TIME=n),t.forEach(function(e){var t=new l(i,e.name,e.topic,e.startTime,e.description);t.stop(e.stopTime),i.addEvent(t)}))},e._MAX_TIMER_LENGTH=6e4,e._CLEAN_UP_INTERVAL=12e4,e._EVENT_CACHE_LIMIT=1e3,e.EVENT_ID=1,e.PARSE_TIME=new Date,e}();t.TimeKeeper=d;var h=new d;t.nullEvent=new u,t.start=o,t.getTimeKeeper=s}),define("vs/base/browser/ui/timer/timer",["require","exports","vs/base/common/timer","vs/base/browser/dom","vs/css!./timer"],function(e,t,n,i){var r=function(){function e(e){var t=this;this.timeKeeper=n.getTimeKeeper(),this.onHide=e,this.lastEventIndex=0,this.renderedEvents={},this.renderCnt=0,this.listenersToRemove=[],this.domNode=this._createDomNode(),this.intervalTokenId=window.setInterval(function(){return t._render()},500)}return e.prototype.destroy=function(){document.body.removeChild(this.outerDomNode),window.clearInterval(this.intervalTokenId),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[]},e.prototype._createDomNode=function(){var e=this;this.outerDomNode=document.createElement("div"),this.outerDomNode.className="benchmarktimerbox";var t=document.createElement("input");t.type="button",t.value="Clear",this.listenersToRemove.push(i.addListener(t,"click",function(){return e._onClear()})),this.outerDomNode.appendChild(t),this.textFilterDomNode=document.createElement("input"),this.textFilterDomNode.type="text",this.textFilterDomNode.className="textFilter",this.listenersToRemove.push(i.addListener(this.textFilterDomNode,"keydown",function(){return e.onTextFilterChange()})),this.textFilter="",this.outerDomNode.appendChild(document.createTextNode("Filter")),this.outerDomNode.appendChild(this.textFilterDomNode),this.timeFilterDomNode=document.createElement("input"),this.timeFilterDomNode.type="text",this.timeFilterDomNode.value="0",this.timeFilterDomNode.className="timeFilter",this.listenersToRemove.push(i.addListener(this.timeFilterDomNode,"keydown",function(){return e.onTimeFilterChange()})),this.timeFilter=0,this.outerDomNode.appendChild(document.createTextNode("Hide time under")),this.outerDomNode.appendChild(this.timeFilterDomNode);var n=document.createElement("input");n.type="button",n.value="Close",this.listenersToRemove.push(i.addListener(n,"click",function(){e.onHide()})),this.outerDomNode.appendChild(n);var r=document.createElement("pre");r.appendChild(document.createTextNode(this.renderRow("TOPIC","NAME","TOOK","START","END"))),this.outerDomNode.appendChild(r),this.outerDomNode.appendChild(document.createElement("hr"));var o=document.createElement("div");return o.className="inner",this.outerDomNode.appendChild(o),document.body.appendChild(this.outerDomNode),o},e.prototype.onTextFilterChange=function(){var e=this;setTimeout(function(){e.refilter()})},e.prototype.onTimeFilterChange=function(){var e=this;setTimeout(function(){e.refilter()})},e.prototype.matchesTextFilter=function(e){return this.textFilter?e.topic.toLowerCase().indexOf(this.textFilter.toLowerCase())>=0?!0:e.name.toLowerCase().indexOf(this.textFilter.toLowerCase())>=0?!0:!1:!0},e.prototype.matchesTimeFilter=function(e){return this.timeFilter?e.timeTaken()>=this.timeFilter?!0:!1:!0},e.prototype.shouldShow=function(e){return this.matchesTextFilter(e)&&this.matchesTimeFilter(e)},e.prototype.refilter=function(){this.textFilter=this.textFilterDomNode.value,this.timeFilter=parseInt(this.timeFilterDomNode.value,10);for(var e=Array.prototype.slice.call(this.domNode.children,0),t=0;t<e.length;t++){var n=e[t].getAttribute("data-event-id"),i=this.renderedEvents[n];this.shouldShow(i)?e[t].style.display="inherit":e[t].style.display="none"}},e.prototype._onClear=function(){this.lastEventIndex=this.timeKeeper.getCollectedEvents().length,this.renderedEvents={},this.renderCnt=0,i.clearNode(this.domNode)},e.prototype.leftPaddedString=function(e,t,n){var i=this._repeatStr(t,Math.max(0,e-n.length));return i+n},e.prototype.rightPaddedString=function(e,t,n){var i=this._repeatStr(t,Math.max(0,e-n.length));return n+i},e.prototype.renderRow=function(e,t,n,i,r){var o=" ";return o+=this.rightPaddedString(10," ",e),o+=this.rightPaddedString(30," ",t),o+=" "+this.leftPaddedString(15," ",n),o+=" "+this.leftPaddedString(13," ",i)},e.prototype._suffix0=function(e){return"."===e.charAt(e.length-3)?e:"."===e.charAt(e.length-2)?e+"0":e+".00"},e.prototype._twoPrecision=function(e){return this._suffix0(Math.round(100*e)/100+"")},e.prototype._absoluteTime=function(e){return 1e3>e?this._twoPrecision(e)+" ms":(e/=1e3,60>e?this._twoPrecision(e)+" s":(e/=60,60>e?this._twoPrecision(e)+" m":(e/=60,this._twoPrecision(e)+" h")))},e.prototype._renderEvent=function(e,t){var i=t.startTime.getTime()-n.TimeKeeper.PARSE_TIME.getTime(),r=this.renderRow(t.topic,t.name,this._twoPrecision(t.timeTaken()),this._absoluteTime(i)+"",this._absoluteTime(i+t.timeTaken()));e.textContent="",e.appendChild(document.createTextNode(r))},e.prototype._renderStartTimerEvent=function(e){var t=document.createElement("pre");this._renderEvent(t,e),this.domNode.appendChild(t);var n=e.id.toString();t.setAttribute("data-event-id",n),t.className="timer-event-"+e.id%2,this.renderedEvents[n]=e,this.shouldShow(this.renderedEvents[n])?t.style.display="inherit":t.style.display="none",this.renderCnt++},e.prototype._render=function(){for(var e=this.timeKeeper.getCollectedEvents(),t=!1,n=this.lastEventIndex;n<e.length;n++){var i=e[n];if(!i.stopTime)return this.lastEventIndex=n,void(t&&(this.domNode.scrollTop=1e5));this._renderStartTimerEvent(i),t=!0}t&&(this.domNode.scrollTop=1e5),this.lastEventIndex=e.length},e.prototype._repeatStr=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},e}();t.TimeKeeperRenderer=r}),define("vs/base/common/winjs.base",["./winjs.base.raw","vs/base/common/errors"],function(e,t){function n(e){var n=e.detail,i=n.id;return n.parent?void(n.handler&&o&&delete o[i]):(o[i]=n,void(1===Object.keys(o).length&&setTimeout(function(){var e=o;o={},Object.keys(e).forEach(function(n){var i=e[n];i.exception?t.onUnexpectedError(i.exception):i.error&&t.onUnexpectedError(i.error),console.log("WARNING: Promise with no error callback:"+i.id),console.log(i),i.exception&&console.log(i.exception.stack)})},0)))}function i(e,t,n){var i,o,s,a=new r.Promise(function(e,t,n){i=e,o=t,s=n},function(){e.cancel()});return e.then(function(e){t&&t(e),i(e)},function(e){n&&n(e),o(e)},s),a}var r=e,o={};return r.Promise.addEventListener("error",n),{decoratePromise:i,Class:r.Class,xhr:r.xhr,Promise:r.Promise,TPromise:r.Promise,PPromise:r.Promise,Utilities:r.Utilities}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/builder",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/strings","vs/base/common/assert","vs/base/browser/dom","vs/base/browser/browserService","vs/css!./builder"],function(e,t,n,i,r,o,s,a){function c(e,t){o.ok(i.isString(e),"Expected String as parameter");var n=a.getService().document.getElementById(e);return n?new k(n,t):null}function u(e){return e[b]||(e[b]={}),e[b]}function l(e){return!!e[b]}function d(e,t){return e instanceof x?new x(e):new k(e.getHTMLElement(),t)}function h(e,t){return new k(e,t)}function p(){return new k(null,!0)}function f(e,t,n){u(e)[t]=n}function m(e,t,n){if(l(e)){var r=u(e)[t];if(!i.isUndefined(r))return r}return n}function v(e,t){l(e)&&delete u(e)[t]}function g(e,t){f(e,E,t)}function y(e){v(e,E)}function _(e){return m(e,E)}t.withElementById=c,t.Build={withElementById:c};var b="_msDataKey",E="__$binding",S="__$listeners",w="__$visibility",C=function(){function e(e,t){this.x=e,this.y=t}return e}();t.Position=C;var T=function(){function e(e,t,n,i){this.top=e,this.right=t,this.bottom=n,this.left=i}return e}();t.Box=T;var I=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.substract=function(t){return new e(this.width-t.left-t.right,this.height-t.top-t.bottom)},e}();t.Dimension=I;var k=function(){function e(e,t){this.offdom=t,this.container=e,this.currentElement=e,this.createdElements=[],this.toUnbind={},this.captureToUnbind={},this.browserService=a.getService()}return e.prototype.asContainer=function(){return d(this,this.offdom)},e.prototype.clone=function(){var t=new e(this.container,this.offdom);return t.currentElement=this.currentElement,t.createdElements=this.createdElements,t.captureToUnbind=this.captureToUnbind,t.toUnbind=this.toUnbind,t},e.prototype.and=function(t){t instanceof e||t instanceof x||(t=new e(t,this.offdom));var n=[this];if(t instanceof x)for(var i=0;i<t.length;i++)n.push(t.item(i));else n.push(t);return new x(n)},e.prototype.build=function(t,n){o.ok(this.offdom,"This builder was not created off-dom, so build() can not be called."),t?t instanceof e&&(t=t.getHTMLElement()):t=this.container,o.ok(t,"Builder can only be build() with a container provided."),o.ok(s.isHTMLElement(t),"The container must either be a HTMLElement or a Builder.");var r,a,c=t,u=c.childNodes;if(i.isNumber(n)&&n<u.length)for(r=0,a=this.createdElements.length;a>r;r++)c.insertBefore(this.createdElements[r],u[n++]);else for(r=0,a=this.createdElements.length;a>r;r++)c.appendChild(this.createdElements[r]);return this},e.prototype.appendTo=function(t,n){t?t instanceof e&&(t=t.getHTMLElement()):t=this.container,o.ok(t,"Builder can only be build() with a container provided."),o.ok(s.isHTMLElement(t),"The container must either be a HTMLElement or a Builder.");var r=t;this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement);var a=r.childNodes;return i.isNumber(n)&&n<a.length?r.insertBefore(this.currentElement,a[n]):r.appendChild(this.currentElement),this},e.prototype.append=function(t,n){return o.ok(t,"Need a child to append"),s.isHTMLElement(t)&&(t=h(t)),o.ok(t instanceof e||t instanceof x,"Need a child to append"),t.appendTo(this,n),this},e.prototype.offDOM=function(){return this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this},e.prototype.getHTMLElement=function(){return this.currentElement},e.prototype.getContainer=function(){return this.container},e.prototype.div=function(e,t){return this.doElement("div",e,t)},e.prototype.p=function(e,t){return this.doElement("p",e,t)},e.prototype.ul=function(e,t){return this.doElement("ul",e,t)},e.prototype.ol=function(e,t){return this.doElement("ol",e,t)},e.prototype.li=function(e,t){return this.doElement("li",e,t)},e.prototype.span=function(e,t){return this.doElement("span",e,t)},e.prototype.img=function(e,t){return this.doElement("img",e,t)},e.prototype.a=function(e,t){return this.doElement("a",e,t)},e.prototype.header=function(e,t){return this.doElement("header",e,t)},e.prototype.section=function(e,t){return this.doElement("section",e,t)},e.prototype.footer=function(e,t){return this.doElement("footer",e,t)},e.prototype.element=function(e,t,n){return this.doElement(e,t,n)},e.prototype.doElement=function(t,n,r){var o=this.browserService.document.createElement(t);if(this.currentElement=o,this.offdom&&this.createdElements.push(o),i.isObject(n)&&this.attr(n),i.isFunction(n)&&(r=n),i.isFunction(r)){var s=new e(o);r.call(s,s)}return this.offdom||this.container.appendChild(o),
this},e.prototype.domFocus=function(){return this.currentElement.focus(),this},e.prototype.hasFocus=function(){var e=this.browserService.document.activeElement;return e===this.currentElement},e.prototype.domSelect=function(e){void 0===e&&(e=null);var t=this.currentElement;return t.select(),e&&t.setSelectionRange(e.start,e.end),this},e.prototype.domBlur=function(){return this.currentElement.blur(),this},e.prototype.domClick=function(){return this.currentElement.click(),this},e.prototype.on=function(e,t,n,r){var o=this;if(i.isArray(e))e.forEach(function(e){o.on(e,t,n,r)});else{var a=e,c=s.addListener(this.currentElement,a,function(e){t(e,o,c)},r||!1);r?(this.captureToUnbind[a]||(this.captureToUnbind[a]=[]),this.captureToUnbind[a].push(c)):(this.toUnbind[a]||(this.toUnbind[a]=[]),this.toUnbind[a].push(c));var u=this.getProperty(S,[]);u.push(c),this.setProperty(S,u),n&&i.isArray(n)&&n.push(c)}return this},e.prototype.off=function(e,t){var n=this;if(i.isArray(e))e.forEach(function(e){n.off(e)});else{var r=e;if(t){if(this.captureToUnbind[r])for(;this.captureToUnbind[r].length;)this.captureToUnbind[r].pop()()}else if(this.toUnbind[r])for(;this.toUnbind[r].length;)this.toUnbind[r].pop()()}return this},e.prototype.once=function(e,t,n,r){var o=this;if(i.isArray(e))e.forEach(function(e){o.once(e,t)});else{var a=e,c=s.addListener(this.currentElement,a,function(e){t(e,o,c),c()},r||!1);n&&i.isArray(n)&&n.push(c)}return this},e.prototype.preventDefault=function(e,t,n,i){var r=function(e){e.preventDefault(),t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)};return this.on(e,r,n)},e.prototype.attr=function(e,t){if(i.isObject(e)){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];this.doSetAttr(n,r)}return this}return i.isString(e)&&!i.isString(t)?this.currentElement.getAttribute(e):(i.isString(e)&&(i.isString(t)||(t=String(t)),this.doSetAttr(e,t)),this)},e.prototype.doSetAttr=function(e,t){"class"===e&&(e="addClass"),this[e]?i.isArray(t)?this[e].apply(this,t):this[e].call(this,t):this.currentElement.setAttribute(e,t)},e.prototype.removeAttribute=function(e){this.currentElement.removeAttribute(e)},e.prototype.id=function(e){return this.currentElement.setAttribute("id",e),this},e.prototype.src=function(e){return this.currentElement.setAttribute("src",e),this},e.prototype.href=function(e){return this.currentElement.setAttribute("href",e),this},e.prototype.title=function(e){return this.currentElement.setAttribute("title",e),this},e.prototype.name=function(e){return this.currentElement.setAttribute("name",e),this},e.prototype.type=function(e){return this.currentElement.setAttribute("type",e),this},e.prototype.value=function(e){return this.currentElement.setAttribute("value",e),this},e.prototype.alt=function(e){return this.currentElement.setAttribute("alt",e),this},e.prototype.draggable=function(e){return this.currentElement.setAttribute("draggable",e?"true":"false"),this},e.prototype.tabindex=function(e){return this.currentElement.setAttribute("tabindex",e.toString()),this},e.prototype.style=function(e,t){if(i.isObject(e)){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];this.doSetStyle(n,r)}}else{if(i.isString(e)&&!i.isString(t))return this.currentElement.style[this.cssKeyToJavaScriptProperty(e)];i.isString(e)&&i.isString(t)&&this.doSetStyle(e,t)}return this},e.prototype.doSetStyle=function(e,t){if(e.indexOf("-")>=0){var n=e.split("-");e=n[0];for(var i=1;i<n.length;i++){var r=n[i];e=e+r.charAt(0).toUpperCase()+r.substr(1)}}this.currentElement.style[this.cssKeyToJavaScriptProperty(e)]=t},e.prototype.cssKeyToJavaScriptProperty=function(e){if(e.indexOf("-")>=0){var t=e.split("-");e=t[0];for(var n=1;n<t.length;n++){var i=t[n];e=e+i.charAt(0).toUpperCase()+i.substr(1)}}else"float"===e&&(e="cssFloat");return e},e.prototype.getComputedStyle=function(){return s.getComputedStyle(this.currentElement)},e.prototype.addClass=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return t.forEach(function(t){var n=t.split(" ");n.forEach(function(t){s.addClass(e.currentElement,t)})}),this},e.prototype.setClass=function(e,t){return void 0===t&&(t=null),null===t?this.currentElement.className=e:t?this.addClass(e):this.removeClass(e),this},e.prototype.hasClass=function(e){return s.hasClass(this.currentElement,e)},e.prototype.removeClass=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return t.forEach(function(t){var n=t.split(" ");n.forEach(function(t){s.removeClass(e.currentElement,t)})}),this},e.prototype.swapClass=function(e,t){return this.hasClass(e)?(this.removeClass(e),this.addClass(t)):(this.removeClass(t),this.addClass(e)),this},e.prototype.toggleClass=function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},e.prototype.color=function(e){return this.currentElement.style.color=e,this},e.prototype.background=function(e){return this.currentElement.style.backgroundColor=e,this},e.prototype.padding=function(e,t,n,r){return i.isString(e)&&e.indexOf(" ")>=0?this.padding.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.paddingTop=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.paddingRight=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.paddingBottom=this.toPixel(n)),i.isUndefinedOrNull(r)||(this.currentElement.style.paddingLeft=this.toPixel(r)),this)},e.prototype.margin=function(e,t,n,r){return i.isString(e)&&e.indexOf(" ")>=0?this.margin.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.marginTop=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.marginRight=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.marginBottom=this.toPixel(n)),i.isUndefinedOrNull(r)||(this.currentElement.style.marginLeft=this.toPixel(r)),this)},e.prototype.position=function(e,t,n,r,o){return i.isString(e)&&e.indexOf(" ")>=0?this.position.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.top=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.right=this.toPixel(t)),i.isUndefinedOrNull(n)||(this.currentElement.style.bottom=this.toPixel(n)),i.isUndefinedOrNull(r)||(this.currentElement.style.left=this.toPixel(r)),o||(o="absolute"),this.currentElement.style.position=o,this)},e.prototype.size=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.size.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.width=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.height=this.toPixel(t)),this)},e.prototype.minSize=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.minSize.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.minWidth=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.minHeight=this.toPixel(t)),this)},e.prototype.maxSize=function(e,t){return i.isString(e)&&e.indexOf(" ")>=0?this.maxSize.apply(this,e.split(" ")):(i.isUndefinedOrNull(e)||(this.currentElement.style.maxWidth=this.toPixel(e)),i.isUndefinedOrNull(t)||(this.currentElement.style.maxHeight=this.toPixel(t)),this)},e.prototype["float"]=function(e){return this.currentElement.style.cssFloat=e,this},e.prototype.clear=function(e){return this.currentElement.style.clear=e,this},e.prototype.normal=function(){return this.currentElement.style.fontStyle="normal",this.currentElement.style.fontWeight="normal",this.currentElement.style.textDecoration="none",this},e.prototype.italic=function(){return this.currentElement.style.fontStyle="italic",this},e.prototype.bold=function(){return this.currentElement.style.fontWeight="bold",this},e.prototype.underline=function(){return this.currentElement.style.textDecoration="underline",this},e.prototype.overflow=function(e){return this.currentElement.style.overflow=e,this},e.prototype.display=function(e){return this.currentElement.style.display=e,this},e.prototype.disable=function(){return this.currentElement.setAttribute("disabled","disabled"),this},e.prototype.enable=function(){return this.currentElement.removeAttribute("disabled"),this},e.prototype.show=function(){return this.hasClass("hidden")&&this.removeClass("hidden"),this.attr("aria-hidden","false"),this.cancelVisibilityPromise(),this},e.prototype.showDelayed=function(e){var t=this;this.cancelVisibilityPromise();var i=n.Promise.timeout(e);return this.setProperty(w,i),i.done(function(){t.removeProperty(w),t.show()}),this},e.prototype.hide=function(){return this.hasClass("hidden")||this.addClass("hidden"),this.attr("aria-hidden","true"),this.cancelVisibilityPromise(),this},e.prototype.isHidden=function(){return this.hasClass("hidden")||"none"===this.currentElement.style.display},e.prototype.toggleVisibility=function(){return this.cancelVisibilityPromise(),this.swapClass("builder-visible","hidden"),this.isHidden()?this.attr("aria-hidden","true"):this.attr("aria-hidden","false"),this},e.prototype.cancelVisibilityPromise=function(){var e=this.getProperty(w);e&&(e.cancel(),this.removeProperty(w))},e.prototype.border=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.border.apply(this,e.split(" ")):(this.currentElement.style.borderWidth=this.toPixel(e),n&&(this.currentElement.style.borderColor=n),t&&(this.currentElement.style.borderStyle=t),this)},e.prototype.borderTop=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderTop.apply(this,e.split(" ")):(this.currentElement.style.borderTopWidth=this.toPixel(e),n&&(this.currentElement.style.borderTopColor=n),t&&(this.currentElement.style.borderTopStyle=t),this)},e.prototype.borderBottom=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderBottom.apply(this,e.split(" ")):(this.currentElement.style.borderBottomWidth=this.toPixel(e),n&&(this.currentElement.style.borderBottomColor=n),t&&(this.currentElement.style.borderBottomStyle=t),this)},e.prototype.borderLeft=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderLeft.apply(this,e.split(" ")):(this.currentElement.style.borderLeftWidth=this.toPixel(e),n&&(this.currentElement.style.borderLeftColor=n),t&&(this.currentElement.style.borderLeftStyle=t),this)},e.prototype.borderRight=function(e,t,n){return i.isString(e)&&e.indexOf(" ")>=0?this.borderRight.apply(this,e.split(" ")):(this.currentElement.style.borderRightWidth=this.toPixel(e),n&&(this.currentElement.style.borderRightColor=n),t&&(this.currentElement.style.borderRightStyle=t),this)},e.prototype.textAlign=function(e){return this.currentElement.style.textAlign=e,this},e.prototype.verticalAlign=function(e){return this.currentElement.style.verticalAlign=e,this},e.prototype.toPixel=function(e){return-1===e.toString().indexOf("px")?e.toString()+"px":e},e.prototype.innerHtml=function(e,t){return t?this.currentElement.innerHTML+=e:this.currentElement.innerHTML=e,this},e.prototype.text=function(e,t){return t?0===this.currentElement.children.length?this.currentElement.textContent+=e:this.currentElement.appendChild(this.browserService.document.createTextNode(e)):this.currentElement.textContent=e,this},e.prototype.safeInnerHtml=function(e,t){return this.innerHtml(r.escape(e),t)},e.prototype.bind=function(e){return g(this.currentElement,e),this},e.prototype.unbind=function(){return y(this.currentElement),this},e.prototype.getBinding=function(){return _(this.currentElement)},e.prototype.setProperty=function(e,t){return f(this.currentElement,e,t),this},e.prototype.getProperty=function(e,t){return m(this.currentElement,e,t)},e.prototype.removeProperty=function(e){return l(this.currentElement)&&delete u(this.currentElement)[e],this},e.prototype.parent=function(e){return o.ok(!this.offdom,"Builder was created with offdom = true and thus has no parent set"),h(this.currentElement.parentNode,e)},e.prototype.children=function(e){for(var t=this.currentElement.children,n=[],i=0;i<t.length;i++)n.push(h(t.item(i),e));return new x(n)},e.prototype.removeChild=function(e){return this.currentElement===e.parent().getHTMLElement()&&this.currentElement.removeChild(e.getHTMLElement()),this},e.prototype.select=function(e,t){o.ok(i.isString(e),"Expected String as parameter");for(var n=this.currentElement.querySelectorAll(e),r=[],s=0;s<n.length;s++)r.push(h(n.item(s),t));return new x(r)},e.prototype.matches=function(e){var t=this.currentElement,n=t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return n&&n.call(t,e)},e.prototype.isEmpty=function(){return!this.currentElement.childNodes||0===this.currentElement.childNodes.length},e.prototype.unbindDescendants=function(e){if(e&&e.children)for(var t=0,n=e.children.length;n>t;t++){var r=e.children.item(t);if(l(r)){var o=u(r)[S];if(i.isArray(o))for(;o.length;)o.pop()();delete r[b]}this.unbindDescendants(r)}},e.prototype.empty=function(){return this.unbindDescendants(this.currentElement),this.clearChildren(),this.offdom&&(this.createdElements=[]),this},e.prototype.clearChildren=function(){return this.currentElement&&s.clearNode(this.currentElement),this},e.prototype.destroy=function(){if(this.currentElement&&(this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this.empty(),l(this.currentElement))){var e=u(this.currentElement)[S];if(i.isArray(e))for(;e.length;)e.pop()();delete this.currentElement[b]}var t;for(t in this.toUnbind)if(this.toUnbind.hasOwnProperty(t)&&i.isArray(this.toUnbind[t]))for(;this.toUnbind[t].length;)this.toUnbind[t].pop()();for(t in this.captureToUnbind)if(this.captureToUnbind.hasOwnProperty(t)&&i.isArray(this.captureToUnbind[t]))for(;this.captureToUnbind[t].length;)this.captureToUnbind[t].pop()();this.currentElement=null,this.container=null,this.offdom=null,this.createdElements=null,this.captureToUnbind=null,this.toUnbind=null},e.prototype.dispose=function(){this.destroy()},e.prototype.getPositionRelativeTo=function(t){t instanceof e&&(t=t.getHTMLElement());var n=s.getRelativeLeft(this.currentElement,t),i=s.getRelativeTop(this.currentElement,t);return new T(i,-1,-1,n)},e.prototype.getPosition=function(){var e=s.getTopLeftOffset(this.currentElement);return new T(e.top,-1,-1,e.left)},e.prototype.getTotalSize=function(){var e=s.getTotalWidth(this.currentElement),t=s.getTotalHeight(this.currentElement);return new I(e,t)},e.prototype.getContentSize=function(){var e=s.getContentWidth(this.currentElement),t=s.getContentHeight(this.currentElement);return new I(e,t)},e.prototype.getClientArea=function(){if(this.currentElement!==this.browserService.document.body){var e=s.getDomNodePosition(this.currentElement);return new I(e.width,e.height)}if(this.browserService.window.innerWidth&&this.browserService.window.innerHeight)return new I(this.browserService.window.innerWidth,this.browserService.window.innerHeight);if(this.browserService.document.body&&this.browserService.document.body.clientWidth&&this.browserService.document.body.clientWidth)return new I(this.browserService.document.body.clientWidth,this.browserService.document.body.clientHeight);if(this.browserService.document.documentElement&&this.browserService.document.documentElement.clientWidth&&this.browserService.document.documentElement.clientHeight)return new I(this.browserService.document.documentElement.clientWidth,this.browserService.document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")},e}();t.Builder=k;var x=function(e){function t(n){if(o.ok(i.isArray(n)||n instanceof t,"Expected Array or MultiBuilder as parameter"),e.call(this),this.length=0,this.builders=[],i.isArray(n))for(var r=0;r<n.length;r++)n[r]instanceof HTMLElement?this.push(h(n[r])):this.push(n[r]);else for(var r=0;r<n.length;r++)this.push(n.item(r));var s=this,a=function(e){s[e]=function(){for(var n,r=Array.prototype.slice.call(arguments),o=!1,a=0;a<s.length;a++){var c=s.item(a)[e].apply(s.item(a),r);if(c instanceof t){n||(n=[]),o=!0;for(var u=0;u<c.length;u++)n.push(c.item(u))}else i.isUndefined(c)||c instanceof k||(n||(n=[]),n.push(c))}return n&&o?new t(n):n||s}};for(var c in k.prototype)"clone"!==c&&"and"!==c&&k.prototype.hasOwnProperty(c)&&i.isFunction(k.prototype[c])&&a(c)}return __extends(t,e),t.prototype.item=function(e){return this.builders[e]},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0;n<e.length;n++)this.builders.push(e[n]);this.length=this.builders.length},t.prototype.pop=function(){var e=this.builders.pop();return this.length=this.builders.length,e},t.prototype.concat=function(e){var t=this.builders.concat(e);return this.length=this.builders.length,t},t.prototype.shift=function(){var e=this.builders.shift();return this.length=this.builders.length,e},t.prototype.unshift=function(e){var t=this.builders.unshift(e);return this.length=this.builders.length,t},t.prototype.slice=function(e,t){var n=this.builders.slice(e,t);return this.length=this.builders.length,n},t.prototype.splice=function(e,t){var n=this.builders.splice(e,t);return this.length=this.builders.length,n},t.prototype.clone=function(){return new t(this)},t.prototype.and=function(e){e instanceof k||e instanceof t||(e=new k(e));var n=[];if(e instanceof t)for(var i=0;i<e.length;i++)n.push(e.item(i));else n.push(e);return this.push.apply(this,n),this},t}(k);t.MultiBuilder=x,t.setPropertyOnElement=f,t.getPropertyFromElement=m,t.removePropertyFromElement=v,t.bindElement=g,t.unbindElement=y,t.getBindingFromElement=_,t.Binding={setPropertyOnElement:f,getPropertyFromElement:m,removePropertyFromElement:v,bindElement:g,unbindElement:y,getBindingFromElement:_};var A=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.$=function(e){if(i.isUndefined(e))return p();if(!e)throw new Error("Bad use of $");if(s.isHTMLElement(e)||e===window)return h(e);if(i.isArray(e))return new x(e);if(e instanceof k)return d(e);if(i.isString(e)){if("<"===e[0]){var t,n=a.getService().document.createElement("div");if(n.innerHTML=r.format.apply(r,arguments),0===n.children.length)throw new Error("Bad use of $");if(1===n.children.length)return t=n.firstChild,n.removeChild(t),h(t);for(var o=[];n.firstChild;)t=n.firstChild,n.removeChild(t),o.push(h(t));return new x(o)}if(1===arguments.length){var c=A.exec(e);if(!c)throw new Error("Bad use of $");var u=c[1]||"div",l=c[3]||void 0,f=(c[4]||"").replace(/\./g," "),m={};return l&&(m.id=l),f&&(m["class"]=f),p().element(u,m)}var v=p();return v.element.apply(v,arguments),v}throw new Error("Bad use of $")},t.$.Box=T,t.$.Dimension=I,t.$.Position=C,t.$.Builder=k,t.$.MultiBuilder=x,t.$.Build=t.Build,t.$.Binding=t.Binding}),define("vs/base/browser/dnd",["require","exports","vs/base/browser/builder"],function(e,t,n){var i=n.$,r=function(){function e(e,t){var n=this;i(e).on("dragover",function(){n.timeout||(n.timeout=setTimeout(function(){t(),delete n.timeout},800))}),i(e).on(["dragleave","drop","dragend"],function(){return n.clearDragTimeout()})}return e.prototype.clearDragTimeout=function(){this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},e.prototype.dispose=function(){this.clearDragTimeout()},e}();t.DelayedDragHandler=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/button/button",["require","exports","vs/base/common/eventEmitter","vs/base/browser/dom","vs/base/browser/builder","vs/css!./button"],function(e,t,n,i,r){var o=r.$,s=function(e){function t(t){var n=this;e.call(this),this.$el=o("a.monaco-button").href("#").appendTo(t),this.$el.on("click",function(e){return n.enabled?void n.emit("click",e):void i.EventHelper.stop(e)})}return __extends(t,e),t.prototype.getElement=function(){return this.$el.getHTMLElement()},Object.defineProperty(t.prototype,"label",{set:function(e){this.$el.text(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return!this.$el.hasClass("disabled")},set:function(e){e?this.$el.removeClass("disabled"):this.$el.addClass("disabled")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.$el&&(this.$el.dispose(),this.$el=null),e.prototype.dispose.call(this)},t}(n.EventEmitter);t.Button=s}),define("vs/base/browser/ui/checkbox/checkbox",["require","exports","vs/base/browser/builder","vs/base/browser/mouseEvent","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/css!./checkbox"],function(e,t,n,i,r,o){var s=n.$,a=function(){function e(e,t,n,a){var c=this;this.actionClassName=e,this.title=t,this.isChecked=n,this.onChange=a,this.listenersToRemove=[],this.domNode=document.createElement("div"),this.domNode.title=t,this.render(),s(this.domNode).attr({"aria-checked":"false","aria-label":this.title,tabindex:0,role:"checkbox"}),s(this.domNode).on("click",function(e){var t=new i.StandardMouseEvent(e);c.isChecked=!c.isChecked,c.render(),c.onChange(),t.preventDefault()},this.listenersToRemove),s(this.domNode).on("keydown",function(e){var t=new r.StandardKeyboardEvent(e);(t.keyCode===o.KeyCode.Space||t.keyCode===o.KeyCode.Enter)&&(c.isChecked=!c.isChecked,c.render(),c.onChange(),t.preventDefault())},this.listenersToRemove)}return e.prototype.focus=function(){this.domNode.focus()},e.prototype.render=function(){this.domNode.className=this.className()},e.prototype.setChecked=function(e){this.isChecked=e,s(this.domNode).attr("aria-checked",this.isChecked),this.render()},e.prototype.className=function(){return"custom-checkbox "+this.actionClassName+" "+(this.isChecked?"checked":"unchecked")},e.prototype.width=function(){return 22},e.prototype.enable=function(){this.domNode.tabIndex=0},e.prototype.disable=function(){this.domNode.tabIndex=-1},e.prototype.destroy=function(){this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[]},e}();t.Checkbox=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/contextview/contextview",["require","exports","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/css!./contextview"],function(e,t,n,i,r,o){function s(e,t,n,i,r){var o,s;return i===u.BELOW?(o=t.top+t.height-n.top,n.top+o+e.height>n.height&&t.top-n.top>e.height&&(o=t.top-e.height-n.top)):(o=t.top-e.height-n.top,o+n.top<0&&t.top+t.height+e.height-n.top<n.height&&(o=t.top+t.height-n.top)),r===c.LEFT?(s=t.left-n.left,n.left+s+e.width>n.width&&(s-=e.width-t.width)):(s=t.left+t.width-e.width-n.left,s+n.left<0&&t.left+e.width<n.width&&(s=t.left-n.left)),{top:o,left:s}}var a=n.$;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.AnchorAlignment||(t.AnchorAlignment={}));var c=t.AnchorAlignment;!function(e){e[e.BELOW=0]="BELOW",e[e.ABOVE=1]="ABOVE"}(t.AnchorPosition||(t.AnchorPosition={}));var u=t.AnchorPosition;t.layout=s;var l=function(e){function t(t){var n=this;e.call(this),this.$view=a(".context-view").hide(),this.setContainer(t),this.toDispose=[{dispose:function(){n.setContainer(null)}}],this.toDisposeOnClean=null}return __extends(t,e),t.prototype.setContainer=function(e){var n=this;this.$container&&(this.$container.off(t.BUBBLE_UP_EVENTS),this.$container.off(t.BUBBLE_DOWN_EVENTS,!0),this.$container=null),e&&(this.$container=a(e),this.$view.appendTo(this.$container),this.$container.on(t.BUBBLE_UP_EVENTS,function(e){n.onDOMEvent(e,document.activeElement,!1)}),this.$container.on(t.BUBBLE_DOWN_EVENTS,function(e){n.onDOMEvent(e,document.activeElement,!0)},null,!0))},t.prototype.show=function(e){this.isVisible()&&this.hide(),this.$view.setClass("context-view").empty().style({top:"0px",left:"0px"}).show(),this.toDisposeOnClean=e.render(this.$view.getHTMLElement()),this.delegate=e,this.doLayout()},t.prototype.layout=function(){if(this.isVisible()){if(this.delegate.canRelayout===!1)return void this.hide();this.delegate.layout&&this.delegate.layout(),this.doLayout()}},t.prototype.doLayout=function(){var e,t=this.delegate.getAnchor();if(i.isHTMLElement(t)){var n=a(t),r=n.getPosition(),o=n.getTotalSize();e={top:r.top,left:r.left,width:o.width,height:o.height}}else{var l=t;e={top:l.y,left:l.x,width:l.width||0,height:l.height||0}}var d=this.$container.getPosition(),h={top:d.top,left:d.left,height:window.innerHeight,width:window.innerWidth},p=this.$view.getTotalSize(),f={width:p.width,height:p.height},m=this.delegate.anchorPosition||u.BELOW,v=this.delegate.anchorAlignment||c.LEFT,g=s(f,e,h,m,v);this.$view.removeClass("top","bottom","left","right"),this.$view.addClass(m===u.BELOW?"bottom":"top"),this.$view.addClass(v===c.LEFT?"left":"right"),this.$view.style({top:g.top+"px",left:g.left+"px",width:"initial"})},t.prototype.hide=function(e){this.delegate&&this.delegate.onHide&&this.delegate.onHide(e),this.delegate=null,this.toDisposeOnClean&&(this.toDisposeOnClean.dispose(),this.toDisposeOnClean=null),this.$view.hide()},t.prototype.isVisible=function(){return!!this.delegate},t.prototype.onDOMEvent=function(e,t,n){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):n&&!i.isAncestor(e.target,this.$container.getHTMLElement())&&this.hide())},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.hide(),this.toDispose=r.disposeAll(this.toDispose)},t.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],t.BUBBLE_DOWN_EVENTS=["click"],t}(o.EventEmitter);t.ContextView=l}),define("vs/base/browser/ui/countBadge/countBadge",["require","exports","vs/base/browser/builder","vs/base/common/strings","vs/css!./countBadge"],function(e,t,n,i){var r=n.$,o=function(){function e(e,t,n){this.$el=r(".monaco-count-badge").appendTo(e),this.titleFormat=n||"",this.setCount(t||0)}return e.prototype.setCount=function(e){this.count=e,this.render()},e.prototype.setTitleFormat=function(e){this.titleFormat=e,this.render()},e.prototype.render=function(){this.$el.text(""+this.count),this.$el.title(i.format(this.titleFormat,this.count))},e.prototype.dispose=function(){this.$el&&(this.$el.destroy(),this.$el=null)},e}();t.CountBadge=o}),define("vs/base/browser/ui/leftRightWidget/leftRightWidget",["require","exports","vs/base/browser/builder","vs/css!./leftRightWidget"],function(e,t,n){var i=n.$,r=function(){function e(e,t,n){this.$el=i(".monaco-left-right-widget").appendTo(e),this.toDispose=[n(i(".right").appendTo(this.$el).getHTMLElement()),t(i("span.left").appendTo(this.$el).getHTMLElement())].filter(function(e){return!!e})}return e.prototype.dispose=function(){this.$el&&(this.$el.destroy(),this.$el=null)},e}();t.LeftRightWidget=r}),define("vs/base/browser/ui/progressbar/progressbar",["require","exports","vs/base/common/winjs.base","vs/base/common/assert","vs/base/browser/browser","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/uuid","vs/css!./progressbar"],function(e,t,n,i,r,o,s,a){var c="done",u="active",l="infinite",d="discrete",h="progress-container",p="progress-bit",f=o.$,m=function(){function e(e){this.toUnbind=[],this.workedVal=0,this.create(e)}return e.prototype.create=function(e){var t=this;e.div({"class":h},function(e){t.element=e.clone(),e.div({"class":p}).on([s.EventType.ANIMATION_START,s.EventType.ANIMATION_END,s.EventType.ANIMATION_ITERATION],function(e){switch(e.type){case s.EventType.ANIMATION_START:case s.EventType.ANIMATION_END:t.animationRunning=e.type===s.EventType.ANIMATION_START;break;case s.EventType.ANIMATION_ITERATION:t.animationStopToken&&t.animationStopToken(null)}},t.toUnbind),t.bit=e.getHTMLElement()})},e.prototype.off=function(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.removeClass(u),this.element.removeClass(l),this.element.removeClass(d),this.workedVal=0,this.totalWork=void 0},e.prototype.done=function(){return this.doDone(!0)},e.prototype.stop=function(){return this.doDone(!1)},e.prototype.doDone=function(e){var t=this;return this.element.addClass(c),this.element.hasClass(l)?(this.bit.style.opacity="0",e?n.Promise.timeout(200).then(function(){return t.off()}):this.off()):(this.bit.style.width="inherit",e?n.Promise.timeout(200).then(function(){return t.off()}):this.off()),this},e.prototype.infinite=function(){if(this.bit.style.width="2%",this.bit.style.opacity="1",this.element.removeClass(d),this.element.removeClass(c),this.element.addClass(u),this.element.addClass(l),!r.hasCSSAnimationSupport()){var e=a.v4().asHex();this.currentProgressToken=e,this.manualInfinite(e)}return this},e.prototype.manualInfinite=function(e){var t=this;this.bit.style.width="5%",this.bit.style.display="inherit";var i=0,r=function(){n.Promise.timeout(50).then(function(){e===t.currentProgressToken&&(t.element.hasClass(c)?(t.bit.style.display="none",t.bit.style.left="0"):t.element.isHidden()?r():(i=(i+1)%95,t.bit.style.left=i+"%",r()))})};r()},e.prototype.total=function(e){return this.workedVal=0,this.totalWork=e,this},e.prototype.hasTotal=function(){return!isNaN(this.totalWork)},e.prototype.worked=function(e){return i.ok(!isNaN(this.totalWork),"Total work not set"),e=Number(e),i.ok(!isNaN(e),"Value is not a number"),e=Math.max(1,e),this.workedVal+=e,this.workedVal=Math.min(this.totalWork,this.workedVal),this.element.hasClass(l)&&this.element.removeClass(l),this.element.hasClass(c)&&this.element.removeClass(c),this.element.hasClass(u)||this.element.addClass(u),this.element.hasClass(d)||this.element.addClass(d),this.bit.style.width=100*(this.workedVal/this.totalWork)+"%",this},e.prototype.getContainer=function(){return f(this.element)},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e}();t.ProgressBar=m}),define("vs/base/browser/ui/resourceviewer/resourceViewer",["require","exports","vs/nls!vs/base/browser/ui/resourceviewer/resourceViewer","vs/base/common/mime","vs/base/common/paths","vs/base/browser/builder","vs/base/browser/dom","vs/css!./resourceviewer"],function(e,t,n,i,r,o,s){var a={".bmp":"image/bmp",".gif":"image/gif",".jpg":"image/jpg",".jpeg":"image/jpg",".jpe":"image/jpg",".png":"image/png",".tiff":"image/tiff",".tif":"image/tiff",".ico":"image/x-icon",".tga":"image/x-tga",".psd":"image/vnd.adobe.photoshop",".mid":"audio/midi",".midi":"audio/midi",".mp4a":"audio/mp4",".mpga":"audio/mpeg",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".m2a":"audio/mpeg",".m3a":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".spx":"audio/ogg",".aac":"audio/x-aac",".wav":"audio/x-wav",".wma":"audio/x-ms-wma",".mp4":"video/mp4",".mp4v":"video/mp4",".mpg4":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpe":"video/mpeg",".m1v":"video/mpeg",".m2v":"video/mpeg",".ogv":"video/ogg",".qt":"video/quicktime",".mov":"video/quicktime",".webm":"video/webm",".mkv":"video/x-matroska",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".wmv":"video/x-ms-wmv",".flv":"video/x-flv",".avi":"video/x-msvideo",".movie":"video/x-sgi-movie"},c=function(){function e(){}return e.show=function(e,t,c,u){o.$(c).addClass("monaco-resource-viewer");var l,d=r.extname(t.toString());if(d&&(l=a[d.toLowerCase()]),l||(l=i.MIME_BINARY),l.indexOf("image/")>=0)o.$(c).empty().style({paddingLeft:"20px"}).img({src:t.toString()+"?"+(new Date).getTime()}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()});else{if(l.indexOf("audio/")>=0)o.$(c).empty().style({paddingLeft:"20px"}).element("audio").attr({src:t.toString()+"?"+(new Date).getTime(),text:n.localize(0,null),controls:"controls"}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()});else if(l.indexOf("video/")>=0){o.$(c).empty().style({paddingLeft:"20px"}).element("video").attr({src:t.toString()+"?"+(new Date).getTime(),text:n.localize(1,null),controls:"controls"}).on(s.EventType.LOAD,function(){u&&u.onElementInternalDimensions()})}else o.$(c).empty().style({paddingLeft:"20px"}).span({text:n.localize(2,null)}),u&&u.onElementInternalDimensions()}},e}();t.ResourceViewer=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,
new n)};define("vs/base/browser/ui/sash/sash",["require","exports","vs/base/common/lifecycle","vs/base/browser/builder","vs/base/browser/browser","vs/base/common/types","vs/base/browser/dom","vs/base/browser/touch","vs/base/common/eventEmitter","vs/base/browser/mouseEvent","vs/css!./sash"],function(e,t,n,i,r,o,s,a,c,u){var l=i.$;!function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(t.Orientation||(t.Orientation={}));var d=t.Orientation,h=function(e){function t(t,n,i){var o=this;void 0===i&&(i={}),e.call(this),this.$e=l(".monaco-sash").appendTo(t),this.gesture=new a.Gesture(this.$e.getHTMLElement()),this.$e.on("mousedown",function(e){o.onMouseDown(e)}),this.$e.on(a.EventType.Start,function(e){o.onTouchStart(e)}),this.orientation=i.orientation||d.VERTICAL,this.$e.addClass(this.orientation===d.HORIZONTAL?"horizontal":"vertical"),this.size=i.baseSize||5,r.isIPad&&(this.size*=4,this.$e.addClass("touch")),this.orientation===d.HORIZONTAL?this.$e.size(null,this.size):this.$e.size(this.size),this.isDisabled=!1,this.hidden=!1,this.layoutProvider=n}return __extends(t,e),t.prototype.getHTMLElement=function(){return this.$e.getHTMLElement()},t.prototype.onMouseDown=function(e){var t=this;if(s.EventHelper.stop(e,!1),!this.isDisabled){var n=new u.StandardMouseEvent(e),i=n.posx,r=n.posy,o={startX:i,currentX:i,instantDiffX:0,startY:r,currentY:r,instantDiffY:0};this.$e.addClass("active"),this.emit("start",o);var a=l("div").style({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1e6,cursor:this.orientation===d.VERTICAL?"ew-resize":"ns-resize"}),c=l(window),h=i,p=r;c.on("mousemove",function(e){s.EventHelper.stop(e,!1);var n=new u.StandardMouseEvent(e),o={startX:i,currentX:n.posx,instantDiffX:n.posx-h,startY:r,currentY:n.posy,instantDiffY:n.posy-p};h=n.posx,p=n.posy,t.emit("change",o)}).once("mouseup",function(e){s.EventHelper.stop(e,!1),t.$e.removeClass("active"),t.emit("end"),c.off("mousemove"),a.destroy()}),a.appendTo(document.body)}},t.prototype.onTouchStart=function(e){var t=this;s.EventHelper.stop(e);var i=[],r=e.pageX,c=e.pageY;this.emit("start",{startX:r,currentX:r,instantDiffX:0,startY:c,currentY:c,instantDiffY:0});var u=r,l=c;i.push(s.addDisposableListener(this.$e.getHTMLElement(),a.EventType.Change,function(e){o.isNumber(e.pageX)&&o.isNumber(e.pageY)&&(t.emit("change",{startX:r,currentX:e.pageX,instantDiffX:e.pageX-u,startY:c,currentY:e.pageY,instantDiffY:e.pageY-l}),u=e.pageX,l=e.pageY)})),i.push(s.addDisposableListener(this.$e.getHTMLElement(),a.EventType.End,function(e){t.emit("end"),n.disposeAll(i)}))},t.prototype.layout=function(){var e;if(this.orientation===d.VERTICAL){var t=this.layoutProvider;e={left:t.getVerticalSashLeft(this)-this.size/2+"px"},t.getVerticalSashTop&&(e.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(e.height=t.getVerticalSashHeight(this)+"px")}else{var n=this.layoutProvider;e={top:n.getHorizontalSashTop(this)-this.size/2+"px"},n.getHorizontalSashLeft&&n.getHorizontalSashLeft(this)+"px",n.getHorizontalSashWidth&&(e.width=n.getHorizontalSashWidth(this)+"px")}this.$e.style(e)},t.prototype.show=function(){this.hidden=!1,this.$e.show()},t.prototype.hide=function(){this.hidden=!0,this.$e.hide()},t.prototype.isHidden=function(){return this.hidden},t.prototype.enable=function(){this.$e.removeClass("disabled"),this.isDisabled=!1},t.prototype.disable=function(){this.$e.addClass("disabled"),this.isDisabled=!0},t.prototype.dispose=function(){this.$e&&(this.$e.destroy(),this.$e=null),e.prototype.dispose.call(this)},t}(c.EventEmitter);t.Sash=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/splitview/splitview",["require","exports","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/objects","vs/base/browser/dom","vs/base/common/numbers","vs/base/browser/ui/sash/sash","vs/css!./splitview"],function(e,t,n,i,r,o,s,a,c){function u(e,t){return e+t}!function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(t.Orientation||(t.Orientation={}));var l=t.Orientation;!function(e){e[e.Flexible=0]="Flexible",e[e.Fixed=1]="Fixed"}(t.ViewSizing||(t.ViewSizing={}));var d=t.ViewSizing,h=function(e){function t(t){e.call(this),this.size=0,this._sizing=r.isUndefined(t.sizing)?d.Flexible:t.sizing,this._fixedSize=r.isUndefined(t.fixedSize)?24:t.fixedSize,this._minimumSize=r.isUndefined(t.minimumSize)?24:t.minimumSize}return __extends(t,e),Object.defineProperty(t.prototype,"sizing",{get:function(){return this._sizing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedSize",{get:function(){return this._fixedSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumSize",{get:function(){return this.sizing===d.Fixed?this.fixedSize:this._minimumSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumSize",{get:function(){return this.sizing===d.Fixed?this.fixedSize:Number.POSITIVE_INFINITY},enumerable:!0,configurable:!0}),t.prototype.setFlexible=function(e){this._sizing=d.Flexible,this.emit("change",r.isUndefined(e)?this._minimumSize:e)},t.prototype.setFixed=function(e){this._sizing=d.Fixed,this._fixedSize=r.isUndefined(e)?this._fixedSize:e,this.emit("change",this._fixedSize)},t.prototype.render=function(e,t){},t.prototype.layout=function(e,t){},t}(i.EventEmitter);t.View=h;var p=function(e){function t(t){e.call(this,t),this.headerSize=r.isUndefined(t.headerSize)?24:t.headerSize}return __extends(t,e),t.prototype.render=function(e,t){this.header=document.createElement("div"),this.header.className="header";var n=this.headerSize+"px";t===l.HORIZONTAL?this.header.style.width=n:this.header.style.height=n,this.renderHeader(this.header),e.appendChild(this.header),this.body=document.createElement("div"),this.body.className="body",this.layoutBodyContainer(t),this.renderBody(this.body),e.appendChild(this.body)},t.prototype.layout=function(e,t){this.layoutBodyContainer(t),this.layoutBody(e-this.headerSize)},t.prototype.renderHeader=function(e){throw new Error("not implemented")},t.prototype.renderBody=function(e){throw new Error("not implemented")},t.prototype.layoutBodyContainer=function(e){var t="calc(100% - "+this.headerSize+"px)";e===l.HORIZONTAL?this.body.style.width=t:this.body.style.height=t},t.prototype.layoutBody=function(e){},t.prototype.dispose=function(){this.header=null,this.body=null,e.prototype.dispose.call(this)},t}(h);t.HeaderView=p,function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED"}(t.CollapsibleState||(t.CollapsibleState={}));var f=t.CollapsibleState,m=function(e){function t(t){e.call(this,t),this.changeState(r.isUndefined(t.initialState)?f.EXPANDED:t.initialState)}return __extends(t,e),t.prototype.render=function(t,n){var i=this;e.prototype.render.call(this,t,n),s.addClass(this.header,"collapsible"),s.addClass(this.body,"collapsible"),this.headerClickListener=s.addListener(this.header,"click",function(){return i.toggleExpansion()})},t.prototype.layout=function(t,n){this.layoutHeader(),e.prototype.layout.call(this,t,n)},t.prototype.isExpanded=function(){return this.state===f.EXPANDED},t.prototype.expand=function(){this.isExpanded()||this.changeState(f.EXPANDED)},t.prototype.collapse=function(){this.isExpanded()&&this.changeState(f.COLLAPSED)},t.prototype.toggleExpansion=function(){this.isExpanded()?this.collapse():this.expand()},t.prototype.layoutHeader=function(){this.header&&(this.state===f.COLLAPSED?s.addClass(this.header,"collapsed"):s.removeClass(this.header,"collapsed"))},t.prototype.changeState=function(e){this.state=e,this.layoutHeader()},t.prototype.dispose=function(){this.headerClickListener&&(this.headerClickListener(),this.headerClickListener=null),e.prototype.dispose.call(this)},t}(p);t.AbstractCollapsibleView=m;var v=function(e){function t(t){e.call(this,t),this.previousSize=null}return __extends(t,e),t.prototype.changeState=function(t){e.prototype.changeState.call(this,t),t===f.EXPANDED?this.setFlexible(this.previousSize||this._minimumSize):(this.previousSize=this.size,this.setFixed())},t}(m);t.CollapsibleView=v;var g=function(e){function t(t){e.call(this,o.mixin({sizing:d.Fixed},t)),this._expandedBodySize=r.isUndefined(t.expandedBodySize)?24:t.expandedBodySize}return __extends(t,e),Object.defineProperty(t.prototype,"fixedSize",{get:function(){return this.state===f.EXPANDED?this.expandedSize:this.headerSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandedSize",{get:function(){return this.expandedBodySize+this.headerSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandedBodySize",{get:function(){return this._expandedBodySize},set:function(e){this._expandedBodySize=e,this.setFixed(this.fixedSize)},enumerable:!0,configurable:!0}),t.prototype.changeState=function(t){e.prototype.changeState.call(this,t),this.setFixed(this.fixedSize)},t}(m);t.FixedCollapsibleView=g;var y=function(e){function t(t){e.call(this,{sizing:d.Fixed,fixedSize:0}),this.size=t.size}return __extends(t,e),t}(h),_=function(){function e(e,t){t=t||{},this.orientation=r.isUndefined(t.orientation)?l.VERTICAL:t.orientation,this.el=document.createElement("div"),s.addClass(this.el,"monaco-split-view"),s.addClass(this.el,this.orientation===l.VERTICAL?"vertical":"horizontal"),e.appendChild(this.el),this.size=null,this.viewElements=[],this.views=[],this.viewChangeListeners=[],this.initialWeights=[],this.sashes=[],this.sashesListeners=[],this.animationTimeout=null,this.sashOrientation=this.orientation===l.VERTICAL?c.Orientation.HORIZONTAL:c.Orientation.VERTICAL,this.orientation===l.VERTICAL?(this.measureContainerSize=function(){return s.getContentHeight(e)},this.layoutViewElement=function(e,t){return e.style.height=t+"px"},this.eventWrapper=function(e){return{start:e.startY,current:e.currentY,instantDiff:e.instantDiffY}}):(this.measureContainerSize=function(){return s.getContentWidth(e)},this.layoutViewElement=function(e,t){return e.style.width=t+"px"},this.eventWrapper=function(e){return{start:e.startX,current:e.currentX,instantDiff:e.instantDiffX}}),this.addView(new h({sizing:d.Fixed,minimumSize:0,fixedSize:0}),1,0)}return e.prototype.addView=function(e,t,n){var i=this;if(void 0===t&&(t=1),void 0===n&&(n=this.views.length-1),0>=t)throw new Error("Initial weight must be a positive number.");var r=this.views.length,o=document.createElement("div");if(s.addClass(o,"split-view-view"),this.viewElements.splice(n,0,o),e.render(o,this.orientation),this.views.splice(n,0,e),this.initialWeights.splice(n,0,t),n===r?this.el.appendChild(o):this.el.insertBefore(o,this.el.children.item(n)),this.views.length>2){var a=new c.Sash(this.el,this,{orientation:this.sashOrientation});this.sashes.splice(n-1,0,a),this.sashesListeners.push(a.addListener2("start",function(e){return i.onSashStart(a,i.eventWrapper(e))})),this.sashesListeners.push(a.addListener2("change",function(e){return i.onSashChange(a,i.eventWrapper(e))}))}this.viewChangeListeners.splice(n,0,e.addListener2("change",function(t){return i.onViewChange(e,t)})),this.onViewChange(e,e.minimumSize)},e.prototype.removeView=function(e){var t=this.views.indexOf(e);if(!(0>t)){var n=new y(e);this.views[t]=n,this.onViewChange(n,0);var i=Math.max(t-1,0);this.sashes[i].dispose(),this.sashes.splice(i,1),this.viewChangeListeners[t].dispose(),this.viewChangeListeners.splice(t,1),this.views.splice(t,1),this.el.removeChild(this.viewElements[t]),this.viewElements.splice(t,1),n.dispose(),e.dispose()}},e.prototype.layout=function(e){if(e=e||this.measureContainerSize(),null===this.size)return this.size=e,void this.initialLayout();e=Math.max(e,this.views.reduce(function(e,t){return e+t.minimumSize},0));var t=Math.abs(this.size-e),n=a.countToArray(this.views.length-1,-1),i=this.views.map(function(e){return e.size-e.minimumSize}),r=this.views.map(function(e){return e.maximumSize-e.size});e<this.size?this.expandCollapse(Math.min(t,i.reduce(u,0)),i,r,n,[]):e>this.size&&this.expandCollapse(Math.min(t,r.reduce(u,0)),i,r,[],n),this.size=e,this.layoutViews()},e.prototype.onSashStart=function(e,t){var n=this.sashes.indexOf(e),i=this.views.map(function(e){return e.size-e.minimumSize}),r=this.views.map(function(e){return e.maximumSize-e.size}),o=a.countToArray(n,-1),s=a.countToArray(n+1,this.views.length),c=o.map(function(e){return i[e]}),l=s.map(function(e){return i[e]}),d=o.map(function(e){return r[e]}),h=s.map(function(e){return r[e]});this.state={start:t.start,sizes:this.views.map(function(e){return e.size}),up:o,down:s,maxUp:Math.min(c.reduce(u,0),h.reduce(u,0)),maxDown:Math.min(d.reduce(u,0),l.reduce(u,0)),collapses:i,expands:r}},e.prototype.onSashChange=function(e,t){for(var n=this.sashes.indexOf(e),i=t.current-this.state.start,n=0;n<this.views.length;n++)this.views[n].size=this.state.sizes[n];0>i?this.expandCollapse(Math.min(-i,this.state.maxUp),this.state.collapses,this.state.expands,this.state.up,this.state.down):this.expandCollapse(Math.min(i,this.state.maxDown),this.state.collapses,this.state.expands,this.state.down,this.state.up),this.layoutViews()},e.prototype.expandCollapse=function(e,t,n,i,r){var o=this,s=e,a=s;i.forEach(function(e){var n=Math.min(t[e],s);s-=n,o.views[e].size-=n}),r.forEach(function(e){var t=Math.min(n[e],a);a-=t,o.views[e].size+=t})},e.prototype.initialLayout=function(){var e=this,t=0,n=0;this.views.forEach(function(i,r){i.sizing===d.Flexible?t+=e.initialWeights[r]:n+=i.fixedSize});var i=this.size-n;this.views.forEach(function(n,r){n.sizing===d.Flexible?n.size=e.initialWeights[r]*i/t:n.size=n.fixedSize});var r=this.getLastFlexibleViewIndex();r>=0&&(this.views[r].size+=this.size-this.views.reduce(function(e,t){return e+t.size},0)),this.layoutViews()},e.prototype.getLastFlexibleViewIndex=function(e){void 0===e&&(e=null);for(var t=this.views.length-1;t>=0;t--)if(e!==t&&this.views[t].sizing===d.Flexible)return t;return-1},e.prototype.layoutViews=function(){for(var e=0;e<this.views.length;e++)this.layoutViewElement(this.viewElements[e],this.views[e].size),this.views[e].layout(this.views[e].size,this.orientation);this.sashes.forEach(function(e){return e.layout()});var t=!1,n=this.views.map(function(e){return t=e.size-e.minimumSize>0||t});t=!1;var i=this.views.map(function(e){return t=e.maximumSize-e.size>0||t}),r=this.views.slice().reverse();t=!1;var o=r.map(function(e){return t=e.size-e.minimumSize>0||t}).reverse();t=!1;var s=r.map(function(e){return t=e.maximumSize-e.size>0||t}).reverse();this.sashes.forEach(function(e,t){n[t]&&s[t+1]||i[t]&&o[t+1]?e.enable():e.disable()})},e.prototype.onViewChange=function(e,t){if(e!==this.voidView&&(this.areAllViewsFixed()?this.voidView.setFlexible():this.voidView.setFixed()),null!==this.size&&t!==e.size){this.setupAnimation();var n,i,r,o=this.views.indexOf(e),s=Math.abs(t-e.size),c=a.countToArray(o-1,-1),u=a.countToArray(o+1,this.views.length),l=u.concat(c),d=this.views.map(function(e){return Math.max(e.size-e.minimumSize,0)}),h=this.views.map(function(e){return Math.max(e.maximumSize-e.size,0)});t<e.size?(n=Math.min(l.reduce(function(e,t){return e+h[t]},0),s),i=[o],r=l):(n=Math.min(l.reduce(function(e,t){return e+d[t]},0),s),i=l,r=[o]),this.expandCollapse(n,d,h,i,r),this.layoutViews()}},e.prototype.setupAnimation=function(){var e=this;r.isNumber(this.animationTimeout)&&window.clearTimeout(this.animationTimeout),s.addClass(this.el,"animated"),this.animationTimeout=window.setTimeout(function(){return e.clearAnimation()},200)},e.prototype.clearAnimation=function(){this.animationTimeout=null,s.removeClass(this.el,"animated")},Object.defineProperty(e.prototype,"voidView",{get:function(){return this.views[this.views.length-1]},enumerable:!0,configurable:!0}),e.prototype.areAllViewsFixed=function(){var e=this;return this.views.every(function(t,n){return t.sizing===d.Fixed||n===e.views.length-1})},e.prototype.getVerticalSashLeft=function(e){return this.getSashPosition(e)},e.prototype.getHorizontalSashTop=function(e){return this.getSashPosition(e)},e.prototype.getSashPosition=function(e){for(var t=this.sashes.indexOf(e),n=0,i=0;t>=i;i++)n+=this.views[i].size;return n},e.prototype.dispose=function(){var e=this;r.isNumber(this.animationTimeout)&&window.clearTimeout(this.animationTimeout),this.orientation=null,this.size=null,this.viewElements.forEach(function(t){return e.el.removeChild(t)}),this.el=null,this.viewElements=[],this.views=n.disposeAll(this.views),this.sashes=n.disposeAll(this.sashes),this.sashesListeners=n.disposeAll(this.sashesListeners),this.measureContainerSize=null,this.layoutViewElement=null,this.eventWrapper=null,this.state=null},e}();t.SplitView=_});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/actions",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/events"],function(e,t,n,i,r){function o(e){return e?e instanceof a?!0:"string"!=typeof e.id?!1:"string"!=typeof e.label?!1:"string"!=typeof e["class"]?!1:"boolean"!=typeof e.enabled?!1:"boolean"!=typeof e.checked?!1:"function"!=typeof e.run?!1:!0:!1}function s(e){function t(t){return function(){e.forEach(function(e){e.checked=e===t})}}return e.map(function(e){return new c(e,t(e))})}t.isAction=o;var a=function(e){function t(t,n,i,r,o){void 0===n&&(n=""),void 0===i&&(i=""),void 0===r&&(r=!0),void 0===o&&(o=null),e.call(this),this._id=t,this._label=n,this._cssClass=i,this._enabled=r,this._actionCallback=o}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._setLabel(e)},enumerable:!0,configurable:!0}),t.prototype._setLabel=function(e){this._label!==e&&(this._label=e,this.emit(t.LABEL,{source:this}))},Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._setTooltip(e)},enumerable:!0,configurable:!0}),t.prototype._setTooltip=function(e){this._tooltip!==e&&(this._tooltip=e,this.emit(t.TOOLTIP,{source:this}))},Object.defineProperty(t.prototype,"class",{get:function(){return this._cssClass},set:function(e){this._setClass(e)},enumerable:!0,configurable:!0}),t.prototype._setClass=function(e){this._cssClass!==e&&(this._cssClass=e,this.emit(t.CLASS,{source:this}))},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._setEnabled(e)},enumerable:!0,configurable:!0}),t.prototype._setEnabled=function(e){this._enabled!==e&&(this._enabled=e,this.emit(t.ENABLED,{source:this}))},Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._setChecked(e)},enumerable:!0,configurable:!0}),t.prototype._setChecked=function(e){this._checked!==e&&(this._checked=e,this.emit(t.CHECKED,{source:this}))},Object.defineProperty(t.prototype,"order",{get:function(){return this._order},set:function(e){this._order=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionCallback",{get:function(){return this._actionCallback},set:function(e){this._actionCallback=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return null!==this._actionCallback?this._actionCallback(e):n.Promise.as(!0)},t.LABEL="label",t.TOOLTIP="tooltip",t.CLASS="class",t.ENABLED="enabled",t.CHECKED="checked",t}(i.EventEmitter);t.Action=a;var c=function(e){function t(t,n){e.call(this,t.id,t.label,t["class"],t.enabled,null),this.delegate=t,this.runHandler=n}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.delegate.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.delegate.label},set:function(e){this.delegate.label=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this.delegate["class"]},set:function(e){this.delegate["class"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.delegate.enabled},set:function(e){this.delegate.enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.delegate.checked},set:function(e){this.delegate.checked=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return this.runHandler(e),this.delegate.run(e)},t.prototype.addListener=function(e,t){return this.delegate.addListener(e,t)},t.prototype.addBulkListener=function(e){return this.delegate.addBulkListener(e)},t.prototype.addEmitter=function(e,t){return this.delegate.addEmitter(e,t)},t.prototype.addEmitterTypeListener=function(e,t,n){return this.delegate.addEmitterTypeListener(e,t,n)},t.prototype.emit=function(e,t){this.delegate.emit(e,t)},t}(a);t.radioGroup=s;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e,t){var i=this;return e.enabled?(this.emit(r.EventType.BEFORE_RUN,{action:e}),n.Promise.as(e.run(t)).then(function(t){i.emit(r.EventType.RUN,{action:e,result:t})},function(t){i.emit(r.EventType.RUN,{action:e,error:t})})):n.Promise.as(null)},t}(i.EventEmitter);t.ActionRunner=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/actionbar/actionbar",["require","exports","vs/nls!vs/base/browser/ui/actionbar/actionbar","vs/base/common/lifecycle","vs/base/browser/builder","vs/base/common/actions","vs/base/browser/dom","vs/base/common/events","vs/base/common/types","vs/base/common/eventEmitter","vs/base/browser/touch","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/css!./actionbar"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=r.$,f=function(e){function t(t,n){var i=this;if(e.call(this),this._callOnDispose=[],this._context=t||this,this._action=n,n instanceof o.Action){var r=n.addBulkListener(function(e){i.builder&&e.forEach(function(e){switch(e.getType()){case o.Action.ENABLED:i._updateEnabled();break;case o.Action.LABEL:i._updateLabel(),i._updateTooltip();break;case o.Action.TOOLTIP:i._updateTooltip();break;case o.Action.CLASS:i._updateClass();break;case o.Action.CHECKED:i._updateChecked();break;default:i._updateUnknown(e)}})});this._callOnDispose.push(r)}}return __extends(t,e),Object.defineProperty(t.prototype,"callOnDispose",{get:function(){return this._callOnDispose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(e){this._actionRunner=e},enumerable:!0,configurable:!0}),t.prototype.getAction=function(){return this._action},t.prototype.isEnabled=function(){return this._action.enabled},t.prototype.setActionContext=function(e){this._context=e},t.prototype.render=function(e){var t=this;this.builder=p(e),this.gesture=new l.Gesture(e),this.builder.on(s.EventType.CLICK,function(e){t.onClick(e)}),this.builder.on(l.EventType.Tap,function(e){t.onClick(e)}),this.builder.on("mousedown",function(e){0===e.button&&t._action.enabled&&t.builder.addClass("active")}),this.builder.on(["mouseup","mouseout"],function(e){0===e.button&&t._action.enabled&&t.builder.removeClass("active")})},t.prototype.onClick=function(e){s.EventHelper.stop(e,!0),this._actionRunner.run(this._action,this._context||e)},t.prototype.focus=function(){this.builder.domFocus(),this.builder.addClass("focused")},t.prototype.blur=function(){this.builder.removeClass("focused")},t.prototype._updateEnabled=function(){},t.prototype._updateLabel=function(){},t.prototype._updateTooltip=function(){},t.prototype._updateClass=function(){},t.prototype._updateChecked=function(){},t.prototype._updateUnknown=function(e){},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.builder&&(this.builder.destroy(),this.builder=null),this.gesture&&(this.gesture.dispose(),this.gesture=null),i.cAll(this._callOnDispose)},t}(u.EventEmitter);t.BaseActionItem=f;var m=function(e){function t(n,i){e.call(this,t.ID,n,n?"separator text":"separator"),this.checked=!1,this.enabled=!1,this.order=i}return __extends(t,e),t.ID="actions.monaco.separator",t}(o.Action);t.Separator=m;var v=function(e){function t(t,n,i){void 0===i&&(i={}),e.call(this,t,n),this.options=i,this.options.icon=void 0!==i.icon?i.icon:!1,this.options.label=void 0!==i.label?i.label:!0,this.cssClass=""}return __extends(t,e),t.prototype.render=function(t){e.prototype.render.call(this,t),this.$e=p("a.action-label").attr("tabIndex","-1").appendTo(this.builder),this.$e.attr({role:"menuitem"}),this.options.label&&this.options.keybinding&&p("span.keybinding").text(this.options.keybinding).appendTo(this.builder),this._updateClass(),this._updateLabel(),this._updateTooltip(),this._updateEnabled(),this._updateChecked()},t.prototype.focus=function(){e.prototype.focus.call(this),this.$e.domFocus()},t.prototype._updateLabel=function(){this.options.label&&this.$e.text(this.getAction().label)},t.prototype._updateTooltip=function(){var e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=n.localize(0,null,e,this.options.keybinding))),e&&this.$e.attr({title:e})},t.prototype._updateClass=function(){this.cssClass&&this.$e.removeClass(this.cssClass),this.options.icon?(this.cssClass=this.getAction()["class"],this.$e.addClass("icon"),this.cssClass&&this.$e.addClass(this.cssClass),this._updateEnabled()):this.$e.removeClass("icon")},t.prototype._updateEnabled=function(){this.getAction().enabled?(this.builder.removeClass("disabled"),this.$e.removeClass("disabled")):(this.builder.addClass("disabled"),this.$e.addClass("disabled"))},t.prototype._updateChecked=function(){this.getAction().checked?this.$e.addClass("checked"):this.$e.removeClass("checked")},t}(f);t.ActionItem=v;var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(t){var n=document.createElement("div");p(n).addClass("progress-item");var i=document.createElement("div");p(i).addClass("label"),i.textContent=this.getAction().label,i.title=this.getAction().label,e.prototype.render.call(this,i);var r=document.createElement("div");r.textContent="",p(r).addClass("tag","progress");var o=document.createElement("div");o.textContent="",p(o).addClass("tag","done");var s=document.createElement("div");s.textContent="!",p(s).addClass("tag","error"),this.callOnDispose.push(this.addListener(a.EventType.BEFORE_RUN,function(){p(r).addClass("active"),p(o).removeClass("active"),p(s).removeClass("active")})),this.callOnDispose.push(this.addListener(a.EventType.RUN,function(e){p(r).removeClass("active"),e.error?(p(o).removeClass("active"),p(s).addClass("active")):(p(s).removeClass("active"),p(o).addClass("active"))})),n.appendChild(i),n.appendChild(r),n.appendChild(o),n.appendChild(s),t.appendChild(n)},t.prototype.dispose=function(){i.cAll(this.callOnDispose),e.prototype.dispose.call(this)},t}(f);t.ProgressItem=g,function(e){e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL"}(t.ActionsOrientation||(t.ActionsOrientation={}));var y=t.ActionsOrientation,_={orientation:y.HORIZONTAL,context:null},b=function(e){function t(n,i){var a=this;void 0===i&&(i=_),e.call(this),this.options=i,this._context=i.context,this.toDispose=[],this._actionRunner=this.options.actionRunner,this._actionRunner||(this._actionRunner=new o.ActionRunner,this.toDispose.push(this._actionRunner)),this.toDispose.push(this.addEmitter2(this._actionRunner)),this.items=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",this.domNode.tabIndex=0;var c=this.options.orientation===y.VERTICAL;c&&(this.domNode.className+=" vertical"),p(this.domNode).on(s.EventType.KEY_DOWN,function(e){var t=new d.StandardKeyboardEvent(e),n=!0;t.equals(c?h.CommonKeybindings.UP_ARROW:h.CommonKeybindings.LEFT_ARROW)?a.focusPrevious():t.equals(c?h.CommonKeybindings.DOWN_ARROW:h.CommonKeybindings.RIGHT_ARROW)?a.focusNext():t.equals(h.CommonKeybindings.ESCAPE)?a.cancel():t.equals(h.CommonKeybindings.ENTER)||(n=!1),n&&(t.preventDefault(),t.stopPropagation())}),p(this.domNode).on(s.EventType.CONTEXT_MENU,function(e){e.preventDefault(),e.stopPropagation()}),p(this.domNode).on(s.EventType.KEY_UP,function(e){var t=new d.StandardKeyboardEvent(e);t.equals(h.CommonKeybindings.ENTER)&&(a.doTrigger(t),t.preventDefault(),t.stopPropagation())});var u=s.trackFocus(this.domNode);u.addBlurListener(function(e){document.activeElement!==a.domNode&&s.isAncestor(document.activeElement,a.domNode)||a.emit("blur",e)}),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","menu"),this.actionsList.setAttribute("aria-label",t.nlsActionBarAccessibleLabel),this.domNode.appendChild(this.actionsList),n=n instanceof r.Builder?n.getHTMLElement():n,n.appendChild(this.domNode)}return __extends(t,e),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e,this.items.forEach(function(t){return t.setActionContext(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(e){e&&(this._actionRunner=e,this.items.forEach(function(t){return t.actionRunner=e}))},enumerable:!0,configurable:!0}),t.prototype.getContainer=function(){return p(this.domNode)},t.prototype.push=function(e,t){var n=this;void 0===t&&(t={}),Array.isArray(e)||(e=[e]);var i=c.isNumber(t.index)?t.index:null;e.forEach(function(e){var r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");var o=null;n.options.actionItemProvider&&(o=n.options.actionItemProvider(e)),o||(o=new v(n.context,e,t)),o.actionRunner=n._actionRunner,o.setActionContext(n.context),n.addEmitter(o),o.render(r),null===i||0>i||i>=n.actionsList.children.length?n.actionsList.appendChild(r):n.actionsList.insertBefore(r,n.actionsList.children[i++]),n.items.push(o)})},t.prototype.clear=function(){for(var e;e=this.items.pop();)e.dispose();p(this.actionsList).empty()},t.prototype.length=function(){return this.items.length},t.prototype.isEmpty=function(){return 0===this.items.length},t.prototype.onContentsChange=function(){this.emit(a.EventType.CONTENTS_CHANGED)},t.prototype.focus=function(e){e&&"undefined"==typeof this.focusedItem&&(this.focusedItem=0),this.updateFocus()},t.prototype.focusNext=function(){"undefined"==typeof this.focusedItem&&(this.focusedItem=this.items.length-1);var e,t=this.focusedItem;do this.focusedItem=(this.focusedItem+1)%this.items.length,e=this.items[this.focusedItem];while(this.focusedItem!==t&&!e.isEnabled());this.focusedItem!==t||e.isEnabled()||(this.focusedItem=void 0),this.updateFocus()},t.prototype.focusPrevious=function(){"undefined"==typeof this.focusedItem&&(this.focusedItem=0);var e,t=this.focusedItem;do this.focusedItem=this.focusedItem-1,this.focusedItem<0&&(this.focusedItem=this.items.length-1),e=this.items[this.focusedItem];while(this.focusedItem!==t&&!e.isEnabled());this.focusedItem!==t||e.isEnabled()||(this.focusedItem=void 0),this.updateFocus()},t.prototype.updateFocus=function(){if("undefined"==typeof this.focusedItem)return void this.domNode.focus();for(var e=0;e<this.items.length;e++){var t=this.items[e],n=t;e===this.focusedItem?c.isFunction(n.focus)&&n.focus():c.isFunction(n.blur)&&n.blur()}},t.prototype.doTrigger=function(e){if("undefined"!=typeof this.focusedItem){var t=this.items[this.focusedItem];this.run(t._action,t._context||e).done()}},t.prototype.cancel=function(){this.emit(a.EventType.CANCEL)},t.prototype.run=function(e,t){return this._actionRunner.run(e,t)},t.prototype.dispose=function(){
null!==this.items&&this.clear(),this.items=null,this.toDispose=i.disposeAll(this.toDispose),this.getContainer().destroy(),e.prototype.dispose.call(this)},t.nlsActionBarAccessibleLabel=n.localize(1,null),t.DEFAULT_OPTIONS={orientation:y.HORIZONTAL},t}(u.EventEmitter);t.ActionBar=b;var E=function(e){function t(t,n,i,r){e.call(this,t,n),this.select=document.createElement("select"),this.select.className="action-bar-select",this.options=i,this.selected=r,this.toDispose=[],this.registerListeners()}return __extends(t,e),t.prototype.setOptions=function(e,t){this.options=e,this.selected=t,this.doSetOptions()},t.prototype.registerListeners=function(){var e=this;this.toDispose.push(s.addStandardDisposableListener(this.select,"change",function(t){e.actionRunner.run(e._action,t.target.value).done()}))},t.prototype.render=function(e){s.addClass(e,"select-container"),e.appendChild(this.select),this.doSetOptions()},t.prototype.doSetOptions=function(){var e=this;this.select.options.length=0,this.options.forEach(function(t){e.select.options.add(e.createOption(t))}),this.selected>=0&&(this.select.selectedIndex=this.selected)},t.prototype.createOption=function(e){var t=document.createElement("option");return t.value=e,t.text=e,t},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(f);t.SelectActionItem=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/dropdown/dropdown",["require","exports","vs/base/browser/builder","vs/base/common/winjs.base","vs/base/browser/touch","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/css!./dropdown"],function(e,t,n,i,r,o,s,a,c){var u=n.$,l=function(e){function t(t,n){var i=this;e.call(this),this.toDispose=[],this.$el=u(".dropdown").appendTo(t),this.$label=u(".dropdown-label"),(n.tick||n.action)&&this.$label.addClass("tick");var o=n.labelRenderer;if(!o&&n.action){this.$action=u(".dropdown-action").appendTo(this.$el);var a=new s.ActionItem(null,n.action,{icon:!0,label:!0});a.actionRunner=this,a.render(this.$action.getHTMLElement()),o=function(e){return e.innerText="",a}}o||(o=function(e){return u(e).text(n.label||""),null}),this.$label.on(["click",r.EventType.Tap],function(e){e.preventDefault(),e.stopPropagation(),i.toggleDropdown()}).appendTo(this.$el);var c=o(this.$label.getHTMLElement());c&&this.toDispose.push(c),this.toDispose.push(new r.Gesture(this.$label.getHTMLElement()))}return __extends(t,e),Object.defineProperty(t.prototype,"tooltip",{set:function(e){this.$label.title(e)},enumerable:!0,configurable:!0}),t.prototype.toggleDropdown=function(){this.$el.hasClass("active")?this.hide():this.show()},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.onEvent=function(e,t){this.hide()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.hide(),this.toDispose=c.disposeAll(this.toDispose),this.$boxContainer&&(this.$boxContainer.destroy(),this.$boxContainer=null),this.$contents&&(this.$contents.destroy(),this.$contents=null),this.$label&&(this.$label.destroy(),this.$label=null)},t}(o.ActionRunner);t.BaseDropdown=l;var d=function(e){function t(t,n){e.call(this,t,n),this.contextViewProvider=n.contextViewProvider}return __extends(t,e),Object.defineProperty(t.prototype,"contextViewProvider",{get:function(){return this._contextViewProvider},set:function(e){this._contextViewProvider=e},enumerable:!0,configurable:!0}),t.prototype.show=function(){var e=this;this.$el.addClass("active"),this._contextViewProvider.showContextView({getAnchor:function(){return e.$el.getHTMLElement()},render:function(t){return e.renderContents(t)},onDOMEvent:function(t,n){e.onEvent(t,n)},onHide:function(){e.$el.removeClass("active")}})},t.prototype.hide=function(){this._contextViewProvider&&this._contextViewProvider.hideContextView()},t.prototype.renderContents=function(e){return null},t}(l);t.Dropdown=d;var h=function(e){function t(t,n){e.call(this,t,n),this._contextMenuProvider=n.contextMenuProvider,this.currentContainer=null,this.actions=n.actions||[],this.actionProvider=n.actionProvider,this.menuClassName=n.menuClassName||""}return __extends(t,e),Object.defineProperty(t.prototype,"contextMenuProvider",{get:function(){return this._contextMenuProvider},set:function(e){this._contextMenuProvider=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuOptions",{get:function(){return this._menuOptions},set:function(e){this._menuOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){return this.actionProvider?this.actionProvider.getActions():this._actions},set:function(e){this._actions=e},enumerable:!0,configurable:!0}),t.prototype.show=function(){var e=this;this.$el.addClass("active"),this._contextMenuProvider.showContextMenu({getAnchor:function(){return e.$el.getHTMLElement()},getActions:function(){return i.Promise.as(e.actions)},getActionsContext:function(){return e.menuOptions?e.menuOptions.context:null},getActionItem:function(t){return e.menuOptions&&e.menuOptions.actionItemProvider?e.menuOptions.actionItemProvider(t):null},getMenuClassName:function(){return e.menuClassName},onHide:function(){e.$el.removeClass("active"),e.currentContainer=null}})},t.prototype.hide=function(){},t}(l);t.DropdownMenu=h;var p=function(e){function t(t){e.call(this),this.el=document.createElement("div"),this.el.className="dropdown-group",t.appendChild(this.el)}return __extends(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),t}(a.EventEmitter);t.DropdownGroup=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/inputbox/inputBox",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/base/browser/browserService","vs/base/browser/htmlContentRenderer","vs/base/common/eventEmitter","vs/base/browser/ui/actionbar/actionbar","vs/base/common/lifecycle","vs/base/browser/ui/contextview/contextview","vs/css!./inputBox"],function(e,t,n,i,r,o,s,a,c,u){var l=i.emmet;!function(e){e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(t.MessageType||(t.MessageType={}));var d=t.MessageType,h=function(e){function t(t,r,o){var s=this;e.call(this),this.state="idle",this.contextViewProvider=r,this.options=o||Object.create(null),this.toDispose=[],this.message=null,this.cachedHeight=null,this.placeholder=this.options.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation,this.showValidationMessage=this.options.validationOptions.showMessage||!1),this.element=i.append(t,l(".monaco-inputbox.idle"));var c=this.options.flexibleHeight?"textarea":"input",u=i.append(this.element,l(".wrapper"));this.input=i.append(u,l(c+".input")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.options.flexibleHeight?this.mirror=i.append(u,l("div.mirror")):(this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off")),this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&this.input.setAttribute("placeholder",this.placeholder),this.toDispose.push(i.addDisposableListener(this.input,i.EventType.INPUT,function(){return s.onValueChange()}),i.addDisposableListener(this.input,i.EventType.BLUR,function(){return s.onBlur()}),i.addDisposableListener(this.input,i.EventType.FOCUS,function(){return s.onFocus()})),this.placeholder&&n.isIE11orEarlier&&(this.toDispose.push(i.addDisposableListener(this.input,i.EventType.CLICK,function(e){i.EventHelper.stop(e,!0),s.input.focus()})),n.isIE9&&this.toDispose.push(i.addDisposableListener(this.input,"keyup",function(){return s.onValueChange()}))),setTimeout(function(){return s.layout()},0),this.options.actions&&(this.actionbar=new a.ActionBar(this.element),this.actionbar.push(this.options.actions,{icon:!0,label:!1}))}return __extends(t,e),t.prototype.onBlur=function(){this._hideMessage()},t.prototype.onFocus=function(){this._showMessage()},t.prototype.setPlaceHolder=function(e){this.input&&this.input.setAttribute("placeholder",e)},t.prototype.setContextViewProvider=function(e){this.contextViewProvider=e},Object.defineProperty(t.prototype,"inputElement",{get:function(){return this.input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.input.value},set:function(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return null===this.cachedHeight?i.getTotalHeight(this.element):this.cachedHeight},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input.focus()},t.prototype.blur=function(){this.input.blur()},t.prototype.hasFocus=function(){return r.getService().document.activeElement===this.input},t.prototype.select=function(e){void 0===e&&(e=null),this.input.select(),e&&this.input.setSelectionRange(e.start,e.end)},t.prototype.enable=function(){this.input.removeAttribute("disabled")},t.prototype.disable=function(){this.input.disabled=!0,this._hideMessage()},Object.defineProperty(t.prototype,"width",{get:function(){return i.getTotalWidth(this.input)},set:function(e){this.input.style.width=e+"px"},enumerable:!0,configurable:!0}),t.prototype.showMessage=function(e,t){this.message=e,i.removeClass(this.element,"idle"),i.removeClass(this.element,"info"),i.removeClass(this.element,"warning"),i.removeClass(this.element,"error"),i.addClass(this.element,this.classForType(e.type)),(this.hasFocus()||t)&&this._showMessage()},t.prototype.hideMessage=function(){this.message=null,i.removeClass(this.element,"info"),i.removeClass(this.element,"warning"),i.removeClass(this.element,"error"),i.addClass(this.element,"idle"),this._hideMessage()},t.prototype.isInputValid=function(){return!!this.validation&&!this.validation(this.value)},t.prototype.validate=function(){var e=null;return this.validation&&(e=this.validation(this.value),e?this.showMessage(e):this.hideMessage()),!e},t.prototype.classForType=function(e){switch(e){case d.INFO:return"info";case d.WARNING:return"warning";default:return"error"}},t.prototype._showMessage=function(){var e=this;if(this.contextViewProvider&&this.message){var t,n=function(){return t.style.width=i.getTotalWidth(e.element)+"px"};this.state="open",this.contextViewProvider.showContextView({getAnchor:function(){return e.element},anchorAlignment:u.AnchorAlignment.RIGHT,render:function(r){t=i.append(r,l(".monaco-inputbox-container")),n();var s={tagName:"span",className:"monaco-inputbox-message"};e.message.formatContent?s.formattedText=e.message.content:s.text=e.message.content;var a=o.renderHtml(s);return i.addClass(a,e.classForType(e.message.type)),i.append(t,a),null},layout:n})}},t.prototype._hideMessage=function(){this.contextViewProvider&&"open"===this.state&&(this.state="idle",this.contextViewProvider.hideContextView())},t.prototype.onValueChange=function(){if(this.emit("change",this.value),this.validate(),this.mirror){var e=this.value.charCodeAt(this.value.length-1),t=10===e?" ":"";this.mirror.textContent=this.value+t,this.layout()}},t.prototype.layout=function(){if(this.mirror){var e=this.cachedHeight;this.cachedHeight=i.getTotalHeight(this.mirror),e!==this.cachedHeight&&(this.input.style.height=this.cachedHeight+"px",this.emit("heightchange",this.cachedHeight))}},t.prototype.dispose=function(){this.toDispose=c.disposeAll(this.toDispose),this._hideMessage(),this.element=null,this.input=null,this.contextViewProvider=null,this.message=null,this.placeholder=null,this.ariaLabel=null,this.validation=null,this.showValidationMessage=null,this.state=null,this.actionbar&&(this.actionbar.dispose(),this.actionbar=null),e.prototype.dispose.call(this)},t}(s.EventEmitter);t.InputBox=h}),define("vs/base/browser/ui/findinput/findInput",["require","exports","vs/nls!vs/base/browser/ui/findinput/findInput","vs/base/browser/builder","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/checkbox/checkbox","vs/css!./findInput"],function(e,t,n,i,r,o){var s=i.$,a=n.localize(0,null),c=n.localize(1,null),u=n.localize(2,null),l=n.localize(3,null),d=function(){function e(e,t,n){this.contextViewProvider=t,this.onOptionChange=null,this.width=n.width||100,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||l,this.listenersToRemove=[],this.regex=null,this.wholeWords=null,this.caseSensitive=null,this.domNode=null,this.inputNode=null,this.inputBox=null,this.validationNode=null,this.buildDomNode(n.appendCaseSensitiveLabel||"",n.appendWholeWordsLabel||"",n.appendRegexLabel||""),Boolean(e)&&e.appendChild(this.domNode)}return e.prototype.destroy=function(){this.regex.destroy(),this.wholeWords.destroy(),this.caseSensitive.destroy(),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[]},e.prototype.on=function(t,n){switch(t){case"keydown":case"keyup":s(this.inputBox.inputElement).on(t,n);break;case e.OPTION_CHANGE:this.onOptionChange=n}return this},e.prototype.enable=function(){s(this.domNode).removeClass("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()},e.prototype.disable=function(){s(this.domNode).addClass("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()},e.prototype.clear=function(){this.clearValidation(),this.setValue(""),this.focus()},e.prototype.setWidth=function(e){this.width=e,this.domNode.style.width=this.width+"px",this.contextViewProvider.layout(),this.setInputWidth()},e.prototype.getValue=function(){return this.inputBox.value},e.prototype.setValue=function(e){this.inputBox.value!==e&&(this.inputBox.value=e)},e.prototype.select=function(){this.inputBox.select()},e.prototype.focus=function(){this.inputBox.focus()},e.prototype.getCaseSensitive=function(){return this.caseSensitive.isChecked},e.prototype.setCaseSensitive=function(e){this.caseSensitive.setChecked(e),this.setInputWidth()},e.prototype.getWholeWords=function(){return this.wholeWords.isChecked},e.prototype.setWholeWords=function(e){this.wholeWords.setChecked(e),this.setInputWidth()},e.prototype.getRegex=function(){return this.regex.isChecked},e.prototype.setRegex=function(e){this.regex.setChecked(e),this.setInputWidth()},e.prototype.focusOnCaseSensitive=function(){this.caseSensitive.focus()},e.prototype.setInputWidth=function(){var e=this.width-this.caseSensitive.width()-this.wholeWords.width()-this.regex.width();this.inputBox.width=e},e.prototype.buildDomNode=function(e,t,n){var i=this;this.domNode=document.createElement("div"),this.domNode.style.width=this.width+"px",s(this.domNode).addClass("monaco-findInput"),this.inputBox=new r.InputBox(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation||null,showMessage:!0}}),this.regex=new o.Checkbox("regex",a+n,!1,function(){i.onOptionChange(null),i.inputBox.focus(),i.setInputWidth(),i.validate()}),this.wholeWords=new o.Checkbox("whole-word",c+t,!1,function(){i.onOptionChange(null),i.inputBox.focus(),i.setInputWidth(),i.validate()}),this.caseSensitive=new o.Checkbox("case-sensitive",u+e,!1,function(){i.onOptionChange(null),i.inputBox.focus(),i.setInputWidth(),i.validate()}),this.setInputWidth();var l=document.createElement("div");l.className="controls",l.appendChild(this.caseSensitive.domNode),l.appendChild(this.wholeWords.domNode),l.appendChild(this.regex.domNode),this.domNode.appendChild(l)},e.prototype.validate=function(){this.inputBox.validate()},e.prototype.showMessage=function(e){this.inputBox.showMessage(e)},e.prototype.clearMessage=function(){this.inputBox.hideMessage()},e.prototype.clearValidation=function(){this.inputBox.hideMessage()},e.OPTION_CHANGE="optionChange",e}();t.FindInput=d}),define("vs/base/browser/ui/messagelist/messageList",["require","exports","vs/nls!vs/base/browser/ui/messagelist/messageList","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/errors","vs/base/common/types","vs/base/common/eventSource","vs/base/common/actions","vs/base/browser/htmlContentRenderer","vs/css!./messageList"],function(e,t,n,i,r,o,s,a,c,u,l){!function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(t.Severity||(t.Severity={}));var d=t.Severity,h=function(){function e(){}return e}();t.IMessageListOptions=h;var p=function(){function e(t,n,i){void 0===i&&(i={purgeInterval:e.DEFAULT_MESSAGE_PURGER_INTERVAL,maxMessages:e.DEFAULT_MAX_MESSAGES,maxMessageLength:e.DEFAULT_MAX_MESSAGE_LENGTH}),this.messages=[],this.messageListPurger=null,this.containerElementId=t,this.usageLogger=n,this.options=i,this._onMessagesShowing=new c.EventSource,this._onMessagesCleared=new c.EventSource}return Object.defineProperty(e.prototype,"onMessagesShowing",{get:function(){return this._onMessagesShowing.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMessagesCleared",{get:function(){return this._onMessagesCleared.value},enumerable:!0,configurable:!0}),e.prototype.showMessage=function(e,t){var n=this;if(Array.isArray(t)){var i=[];return t.forEach(function(t){return i.push(n.showMessage(e,t))}),function(){return i.forEach(function(e){return e()})}}var r=this.getMessageText(t);return r?this.doShowMessage(t,r,e):function(){}},e.prototype.getMessageText=function(e){return a.isString(e)?e:e instanceof Error?s.toErrorMessage(e,!1):e.message?e.message:null},e.prototype.doShowMessage=function(e,t,n){var i=this;return this.purgeMessages(),this.messages.unshift({id:e,text:t,severity:n,time:(new Date).getTime(),actions:e.actions}),this.renderMessages(!0,1),function(){i.hideMessage(e)}},e.prototype.renderMessages=function(e,t){var n=this;if(this.messageListContainer)r.$(this.messageListContainer).empty(),r.$(this.messageListContainer).removeClass("transition");else{var i=r.withElementById(this.containerElementId);if(!i)return;this.messageListContainer=r.$(".global-message-list").appendTo(i)}e&&r.$(this.messageListContainer).style("top","-35px"),r.$(this.messageListContainer).ul({"class":"message-list"},function(i){var o=n.prepareMessages();o.length>0?n._onMessagesShowing.fire():n._onMessagesCleared.fire(),o.forEach(function(e,s){n.renderMessage(e,r.$(i),o.length,t)}),e&&setTimeout(function(){r.$(n.messageListContainer).addClass("transition"),r.$(n.messageListContainer).style("top","0")},50)})},e.prototype.renderMessage=function(e,t,s,a){var c=this,u=this.getMessageActions(e);t.li({"class":"message-list-entry message-list-entry-with-action"},function(t){u.forEach(function(n){var r=s>1||0>a?"message-right-side multiple":"message-right-side";t.div({"class":r},function(t){t.a({"class":"action-button"}).text(n.label).on("click",function(t){o.EventHelper.stop(t,!0),c.usageLogger&&c.usageLogger.publicLog("workbenchActionExecuted",{id:n.id,from:"message"}),(n.run()||i.Promise.as(null)).then(null,function(e){return c.showMessage(d.Error,e)}).done(function(t){t!==!1&&c.hideMessage(e.text)})})})});var h=e.text.substr(0,c.options.maxMessageLength);t.div({"class":"message-left-side"},function(t){t.addClass("message-overflow-ellipsis");var i=e.severity,o=i===d.Error?n.localize(0,null):i===d.Warning?n.localize(1,null):n.localize(2,null);r.$().span({"class":"message-left-side severity "+(i===d.Error?"app-error":i===d.Warning?"app-warning":"app-info"),text:o}).appendTo(t);var s=l.renderHtml({tagName:"span",className:"message-left-side",role:"alert",formattedText:h});r.$(s).attr({role:"alert"}).title(s.textContent).appendTo(t)})})},e.prototype.getMessageActions=function(e){var t,r=this;return t=e.actions&&e.actions.length>0?e.actions:[new u.Action("close.message.action",n.localize(3,null),null,!0,function(){return r.hideMessage(e.text),i.Promise.as(!0)})]},e.prototype.prepareMessages=function(){for(var e=[],t={},n=0,i=0;i<this.messages.length;i++){var r=this.messages[i];a.isUndefinedOrNull(t[r.text])?(r.count=1,e.push(r),t[r.text]=n++):e[t[r.text]].count++}return e.length>this.options.maxMessages?e.splice(e.length-this.options.maxMessages,e.length):e},e.prototype.disposeMessages=function(e){e.forEach(function(e){e.actions&&e.actions.forEach(function(e){e.dispose()})})},e.prototype.hideMessages=function(){this.hideMessage()},e.prototype.show=function(){this.messageListContainer&&this.messageListContainer.isHidden()&&this.messageListContainer.show()},e.prototype.hide=function(){this.messageListContainer&&!this.messageListContainer.isHidden()&&this.messageListContainer.hide()},e.prototype.hideMessage=function(e){for(var t=!1,n=0;n<this.messages.length;n++){var i=this.messages[n],r=!1;r=e?a.isString(e)&&i.text===e||i.id===e:!0,r&&(this.disposeMessages(this.messages.splice(n,1)),n--,t=!0)}t&&this.renderMessages(!1,-1)},e.prototype.purgeMessages=function(){var e=this;this.messageListPurger&&this.messageListPurger.cancel(),this.messageListPurger=i.Promise.timeout(this.options.purgeInterval).then(function(){for(var t=!1,n=0,i=0;i<e.messages.length;i++){var r=e.messages[i];r.severity===d.Error||r.actions||(e.disposeMessages(e.messages.splice(i,1)),n--,i--,t=!0)}t&&e.renderMessages(!1,n)})},e.DEFAULT_MESSAGE_PURGER_INTERVAL=1e4,e.DEFAULT_MAX_MESSAGES=5,e.DEFAULT_MAX_MESSAGE_LENGTH=500,e}();t.MessageList=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/browser/ui/toolbar/toolbar",["require","exports","vs/nls!vs/base/browser/ui/toolbar/toolbar","vs/base/browser/builder","vs/base/common/types","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/dropdown/dropdown","vs/css!./toolbar"],function(e,t,n,i,r,o,s,a){var c=i.$;t.CONTEXT="context.toolbar";var u=function(){function e(e,t,n){var i=this;void 0===n&&(n={orientation:s.ActionsOrientation.HORIZONTAL}),this.options=n,this.toggleMenuAction=new l;var r=document.createElement("div");r.className="monaco-toolbar",e.appendChild(r),this.actionBar=new s.ActionBar(c(r),{orientation:n.orientation,actionItemProvider:function(e){return e.id===l.ID?(i.toggleMenuActionItem&&i.toggleMenuActionItem.dispose(),i.toggleMenuActionItem=new d(e,e.menuActions,t,i.options.actionItemProvider,i.options.orientation===s.ActionsOrientation.HORIZONTAL,i.actionRunner,"toolbar-toggle-more"),i.toggleMenuActionItem):n.actionItemProvider?n.actionItemProvider(e):null}})}return Object.defineProperty(e.prototype,"actionRunner",{get:function(){return this.actionBar.actionRunner},set:function(e){this.actionBar.actionRunner=e},enumerable:!0,configurable:!0}),e.prototype.getContainer=function(){return this.actionBar.getContainer()},e.prototype.setActions=function(e,t){var n=this;return function(){var i=e?e.slice(0):[];n.hasSecondaryActions=t&&t.length>0,n.hasSecondaryActions&&(n.toggleMenuAction.menuActions=t.slice(0),i.push(n.toggleMenuAction)),n.actionBar.clear(),n.actionBar.push(i,{icon:!0,label:!1})}},e.prototype.addPrimaryAction=function(e){var t=this;return function(){if(t.hasSecondaryActions){var n=t.actionBar.length();t.actionBar.push(e,{icon:!0,label:!1,index:n})}else t.actionBar.push(e,{icon:!0,label:!1})}},e.prototype.dispose=function(){this.actionBar.dispose(),this.toggleMenuAction.dispose(),this.toggleMenuActionItem&&this.toggleMenuActionItem.dispose()},e}();t.ToolBar=u;var l=function(e){function t(){e.call(this,t.ID,n.localize(0,null),null,!0)}return __extends(t,e),Object.defineProperty(t.prototype,"menuActions",{get:function(){return this._menuActions},set:function(e){this._menuActions=e},enumerable:!0,configurable:!0}),t.ID="toolbar.toggle.more",t}(o.Action),d=function(e){function t(t,n,i,r,o,s,a){e.call(this,null,t),this.menuActionsOrProvider=n,this.contextMenuProvider=i,this.actionItemProvider=r,this.animateClick=o,this.actionRunner=s,this.clazz=a}return __extends(t,e),t.prototype.render=function(t){var n=this;e.prototype.render.call(this,t);var o=function(e){var t=i.$("a.action-label").attr({tabIndex:"-1",role:"menuitem",title:n._action.label||"","class":n.clazz}).appendTo(e);return c("span.label").text(n.getAction().label).appendTo(t),n.animateClick&&(c(e).on("mousedown",function(t){0===t.button&&c(e).addClass("active")}),c(e).on(["mouseup","mouseout"],function(t){0===t.button&&c(e).removeClass("active")})),null},s={contextMenuProvider:this.contextMenuProvider,labelRenderer:o};r.isArray(this.menuActionsOrProvider)?s.actions=this.menuActionsOrProvider:s.actionProvider=this.menuActionsOrProvider,this.dropdownMenu=new a.DropdownMenu(t,s),this.dropdownMenu.menuOptions={actionItemProvider:this.actionItemProvider,actionRunner:this.actionRunner},this.toUnbind=this.addEmitter(this.dropdownMenu)},t.prototype.dispose=function(){this.toUnbind(),this.dropdownMenu.dispose(),e.prototype.dispose.call(this)},t}(s.BaseActionItem);t.DropdownMenuActionItem=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/common/async",["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/platform","vs/base/common/cancellation"],function(e,t,n,i,r,o){function s(e,t){if(e){var n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var s=new o.CancellationTokenSource;return new i.TPromise(function(i,r){n.push(s.token);var o=e.apply(t,n);o&&"function"==typeof o.then?o.then(i,r):i(o)},function(){s.cancel()})};return n}}function a(e,t){return new i.TPromise(function(i,r,o){e.done(function(e){try{t(e)}catch(r){n.onUnexpectedError(r)}i(e)},function(e){try{t(e)}catch(i){n.onUnexpectedError(i)}r(e)},function(e){o(e)})},function(){e.cancel()})}function c(e){function t(){return e.length?e.pop()():null}function n(e){e&&r.push(e);var o=t();return o?o.then(n):i.TPromise.as(r)}var r=[];return e=e.reverse(),i.Promise.as(null).then(n)}function u(e){var t,n=this,i=!1;return function(){return i?t:(i=!0,t=e.apply(n,arguments))}}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new i.Promise(function(n,i){return e.apply(void 0,t.concat([function(e,t){return e?i(e):n(t)}]))})}function d(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return new i.Promise(function(i,r){return t.call.apply(t,[e].concat(n,[function(e,t){return e?r(e):i(t)}]))})}t.wrapAsWinJSPromise=s;var h=function(){function e(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}return e.prototype.queue=function(e){var t=this;if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){var n=function(){t.queuedPromise=null;var e=t.queue(t.queuedPromiseFactory);return t.queuedPromiseFactory=null,e};this.queuedPromise=new i.Promise(function(e,i,r){t.activePromise.then(n,n,r).done(e)},function(){t.activePromise.cancel()})}return new i.Promise(function(e,n,i){t.queuedPromise.then(e,n,i)},function(){})}return this.activePromise=e(),new i.Promise(function(e,n,i){t.activePromise.done(function(n){t.activePromise=null,e(n)},function(e){t.activePromise=null,n(e)},i)},function(){t.activePromise.cancel()})},e}();t.Throttler=h;var p=function(){function e(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}return e.prototype.trigger=function(e,t){var n=this;return void 0===t&&(t=this.defaultDelay),this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new i.Promise(function(e){n.onSuccess=e},function(){}).then(function(){n.completionPromise=null,n.onSuccess=null;var e=n.task();return n.task=null,e})),this.timeout=setTimeout(function(){n.timeout=null,n.onSuccess(null)},t),this.completionPromise},e.prototype.isTriggered=function(){return null!==this.timeout},e.prototype.cancel=function(){this.cancelTimeout(),this.completionPromise&&(this.completionPromise.cancel(),this.completionPromise=null)},e.prototype.cancelTimeout=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}();t.Delayer=p;var f=function(e){function t(t){e.call(this,t),this.throttler=new h}return __extends(t,e),t.prototype.trigger=function(t,n){var i=this;return e.prototype.trigger.call(this,function(){return i.throttler.queue(t)},n)},t}(p);t.ThrottledDelayer=f;var m=function(e){function t(t,n){void 0===n&&(n=0),e.call(this,t),this.minimumPeriod=n,this.periodThrottler=new h}return __extends(t,e),t.prototype.trigger=function(t,n){var r=this;return e.prototype.trigger.call(this,function(){return r.periodThrottler.queue(function(){return i.Promise.join([i.Promise.timeout(r.minimumPeriod),t()]).then(function(e){return e[1]})})},n)},t}(f);t.PeriodThrottledDelayer=m;var v=function(){function e(){var e=this;this._value=new i.TPromise(function(t,n){e._completeCallback=t,e._errorCallback=n})}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.complete=function(e){this._completeCallback(e)},e.prototype.error=function(e){this._errorCallback(e)},e}();t.PromiseSource=v;var g=function(e){function t(t){var i,r,o;e.call(this,function(e,t,n){i=e,r=t,o=n},function(){r(n.canceled())}),t.then(i,r,o)}return __extends(t,e),t}(i.TPromise);t.ShallowCancelThenPromise=g,t.always=a,t.sequence=c,t.once=u;var y=function(){function e(e){this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0}return e.prototype.queue=function(e){var t=this;return new i.TPromise(function(n,i,r){t.outstandingPromises.push({factory:e,c:n,e:i,p:r}),t.consume()})},e.prototype.consume=function(){for(var e=this;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){var t=this.outstandingPromises.shift();this.runningPromises++;var n=t.factory();n.done(t.c,t.e,t.p),n.done(function(){return e.consumed()},function(){return e.consumed()})}},e.prototype.consumed=function(){this.runningPromises--,this.consume()},e}();t.Limiter=y;var _=function(){function e(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}return e.prototype.dispose=function(){this.cancel(),this.runner=null},e.prototype.cancel=function(){-1!==this.timeoutToken&&(r.clearTimeout(this.timeoutToken),this.timeoutToken=-1)},e.prototype.setRunner=function(e){this.runner=e},e.prototype.setTimeout=function(e){this.timeout=e},e.prototype.schedule=function(){this.cancel(),this.timeoutToken=r.setTimeout(this.timeoutHandler,this.timeout)},e.prototype.onTimeout=function(){this.timeoutToken=-1,this.runner&&this.runner()},e}();t.RunOnceScheduler=_,t.nfcall=l,t.ninvoke=d}),define("vs/base/common/service",["require","exports","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/lifecycle","vs/base/common/event"],function(e,t,n,i,r,o){function s(e,t){e[t]=(n={},n[d]=!0,n);var n}function a(e){return e[d]}var c;!function(e){e[e.Common=0]="Common",e[e.Cancel=1]="Cancel"}(c||(c={}));var u;!function(e){e[e.Initialize=0]="Initialize",e[e.Success=1]="Success",e[e.Progress=2]="Progress",e[e.Error=3]="Error",e[e.ErrorObj=4]="ErrorObj"}(u||(u={}));var l;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(l||(l={}));var d="$__SERVICE_EVENT";t.ServiceEvent=s,t.isServiceEvent=a;var h=function(){function e(e){var t=this;this.protocol=e,this.services=Object.create(null),this.activeRequests=Object.create(null),this.protocol.onMessage(function(e){return t.onMessage(e)}),this.protocol.send({type:u.Initialize})}return e.prototype.registerService=function(e,t){
this.services[e]=t},e.prototype.onMessage=function(e){switch(e.type){case c.Common:this.onCommonRequest(e);break;case c.Cancel:this.onCancelRequest(e)}},e.prototype.onCommonRequest=function(e){var t,i=this.services[e.serviceName],r=i.constructor.prototype,o=r&&r[e.name],s=o&&o[d],a=i[e.name];if(s){var c;t=new n.Promise(function(e,t,n){return c=a.call(i,n)},function(){return c.dispose()})}else{if(a)try{t=a.call.apply(a,[i].concat(e.args))}catch(u){t=n.Promise.wrapError(u)}else t=n.Promise.wrapError(new Error(e.name+" is not a valid method on "+e.serviceName));if(!n.Promise.is(t)){var l="'"+e.name+"' did not return a promise";console.warn(l),t=n.Promise.wrapError(new Error(l))}}this.onPromiseRequest(t,e)},e.prototype.onPromiseRequest=function(e,t){var n=this,i=t.id,o=e.then(function(e){n.protocol.send({id:i,data:e,type:u.Success}),delete n.activeRequests[t.id]},function(e){e instanceof Error?n.protocol.send({id:i,data:{message:e.message,name:e.name,stack:e.stack?e.stack.split("\n"):void 0},type:u.Error}):n.protocol.send({id:i,data:e,type:u.ErrorObj}),delete n.activeRequests[t.id]},function(e){n.protocol.send({id:i,data:e,type:u.Progress})});this.activeRequests[t.id]=r.fnToDisposable(function(){return o.cancel()})},e.prototype.onCancelRequest=function(e){var t=this.activeRequests[e.id];t&&(t.dispose(),delete this.activeRequests[e.id])},e.prototype.dispose=function(){var e=this;Object.keys(this.activeRequests).forEach(function(t){e.activeRequests[t].dispose()}),this.activeRequests=null},e}();t.Server=h;var p=function(){function e(e){var t=this;this.protocol=e,this.state=l.Uninitialized,this.bufferedRequests=[],this.handlers=Object.create(null),this.lastRequestId=0,this.protocol.onMessage(function(e){return t.onMessage(e)})}return e.prototype.getService=function(e,t){var n=this,r=Object.keys(t.prototype).filter(function(e){return"constructor"!==e});return r.reduce(function(r,s){if(t.prototype[s][d]){var a,c=new o.Emitter({onFirstListenerAdd:function(){a=n.request(e,s).then(null,null,function(e){return c.fire(e)})},onLastListenerRemove:function(){a.cancel(),a=null}});return i.assign(r,(u={},u[s]=c.event,u))}return i.assign(r,(l={},l[s]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];return n.request.apply(n,[e,s].concat(t))},l));var u,l},{})},e.prototype.request=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={raw:{id:this.lastRequestId++,type:c.Common,serviceName:e,name:t,args:n}};return this.state===l.Uninitialized?this.bufferRequest(r):this.doRequest(r)},e.prototype.doRequest=function(e){var t=this,i=e.raw.id;return new n.Promise(function(n,r,o){t.handlers[i]=function(e){switch(e.type){case u.Success:delete t.handlers[i],n(e.data);break;case u.Error:delete t.handlers[i];var s=new Error(e.data.message);s.stack=e.data.stack,s.name=e.data.name,r(s);break;case u.ErrorObj:delete t.handlers[i],r(e.data);break;case u.Progress:o(e.data)}},t.send(e.raw)},function(){return t.send({id:i,type:c.Cancel})})},e.prototype.bufferRequest=function(e){var t=this,i=null;return new n.Promise(function(n,r,o){t.bufferedRequests.push(e),e.flush=function(){e.flush=null,i=t.doRequest(e).then(n,r,o)}},function(){if(e.flush=null,t.state!==l.Uninitialized)return void(i&&(i.cancel(),i=null));var n=t.bufferedRequests.indexOf(e);-1!==n&&t.bufferedRequests.splice(n,1)})},e.prototype.onMessage=function(e){if(this.state===l.Uninitialized&&e.type===u.Initialize)return this.state=l.Idle,this.bufferedRequests.forEach(function(e){return e.flush&&e.flush()}),void(this.bufferedRequests=null);var t=this.handlers[e.id];t&&t(e)},e.prototype.send=function(e){try{this.protocol.send(e)}catch(t){}},e}();t.Client=p}),define("vs/base/common/worker/workerProtocol",["require","exports","vs/base/common/winjs.base"],function(e,t,n){t.MessageType={INITIALIZE:"$initialize",REPLY:"$reply",PRINT:"$print"},t.ReplyType={COMPLETE:"complete",ERROR:"error",PROGRESS:"progress"},t.PrintType={LOG:"log",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};var i=function(){function e(e){this._requester=e,this._bigHandler=null}return e.prototype.callOnRemote=function(e,t,n){return this._requester.request("_proxyObj",{proxyId:e,path:t,args:n})},e.prototype.registerBigHandler=function(e){this._bigHandler=e},e.prototype.handleMessage=function(e){if(!this._bigHandler)throw new Error("got message before big handler attached!");return this._invokeHandler(e.proxyId,e.path,e.args)},e.prototype._invokeHandler=function(e,t,i){try{return n.TPromise.as(this._bigHandler.handle(e,t,i))}catch(r){return n.TPromise.wrapError(r)}},e}();t.RemoteCom=i}),define("vs/base/common/worker/workerClient",["require","exports","vs/base/common/winjs.base","vs/base/common/timer","vs/base/common/errors","vs/base/common/worker/workerProtocol","vs/base/common/remote","vs/base/common/marshalling"],function(e,t,n,i,r,o,s,a){var c=function(){function e(t,n,i,r,a){var c=this;void 0===a&&(a=++e.LAST_WORKER_ID),this._decodeMessageName=i,this._lastMessageId=0,this._promises={},this._messageHandlers={},this._messagesQueue=[],this._processQueueTimeout=-1,this._waitingForWorkerReply=!1,this._lastTimerEvent=null,this._workerId=a,this._worker=t.create(a,function(e){return c._onSerializedMessage(e)},function(){r(c)});var u=null,l=window.require;"function"==typeof l.getConfig?u=l.getConfig():"undefined"!=typeof window.requirejs&&(u=window.requirejs.s.contexts._.config);var d=window.MonacoEnvironment||null;this.onModuleLoaded=this._sendMessage(o.MessageType.INITIALIZE,{id:this._worker.getId(),moduleId:n,loaderConfiguration:u,MonacoEnvironment:d}),this.onModuleLoaded.then(null,function(){return c._onError("Worker failed to load "+n)}),this._remoteCom=new o.RemoteCom(this),this._proxiesMarshalling=new s.ProxiesMarshallingContribution(this._remoteCom)}return e.prototype.getRemoteCom=function(){return this._remoteCom},Object.defineProperty(e.prototype,"workerId",{get:function(){return this._workerId},enumerable:!0,configurable:!0}),e.prototype.getQueueSize=function(){return this._messagesQueue.length+(this._waitingForWorkerReply?1:0)},e.prototype.request=function(e,t,i){var r=this;if("$"===e.charAt(0))throw new Error("Illegal requestName: "+e);var o,s=!1;return new n.TPromise(function(n,a,c){r.onModuleLoaded.then(function(){s||(o=r._sendMessage(e,t,i).then(n,a,c))},a,c)},function(){o?o.cancel():s=!0})},e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){var e=Object.keys(this._promises);if(e.length>0){console.warn("Terminating a worker with "+e.length+" pending promises:"),console.warn(this._promises);for(var t in this._promises)e.hasOwnProperty(t)&&this._promises[t].error("Worker forcefully terminated")}this._worker.terminate()},e.prototype.addMessageHandler=function(e,t){this._messageHandlers[e]=t},e.prototype.removeMessageHandler=function(e){delete this._messageHandlers[e]},e.prototype._sendMessage=function(e,t,i){var r=this;void 0===i&&(i=(new Date).getTime());var o,s,a,c={id:++this._lastMessageId,type:e,timestamp:i,payload:t},u=new n.TPromise(function(e,t,n){o=e,s=t,a=n},function(){r._removeMessage(c.id)});return this._promises[c.id]={complete:o,error:s,progress:a,type:e,payload:t},this._enqueueMessage(c),u},e.prototype._enqueueMessage=function(e){var t,n=-1;for(t=this._messagesQueue.length-1;t>=0;t--)if(this._messagesQueue[t].timestamp<=e.timestamp){n=t;break}this._messagesQueue.splice(n+1,0,e),this._processMessagesQueue()},e.prototype._removeMessage=function(e){for(var t=0,n=this._messagesQueue.length;n>t;t++)if(this._messagesQueue[t].id===e)return this._promises.hasOwnProperty(String(e))&&delete this._promises[String(e)],this._messagesQueue.splice(t,1),void this._processMessagesQueue()},e.prototype._processMessagesQueue=function(){var e=this;if(-1!==this._processQueueTimeout&&(clearTimeout(this._processQueueTimeout),this._processQueueTimeout=-1),0!==this._messagesQueue.length&&!this._waitingForWorkerReply){var t=this._messagesQueue[0].timestamp-(new Date).getTime();t=Math.max(0,t),this._processQueueTimeout=setTimeout(function(){if(e._processQueueTimeout=-1,0!==e._messagesQueue.length){e._waitingForWorkerReply=!0;var t=e._messagesQueue.shift();e._lastTimerEvent=i.start(i.Topic.WORKER,e._decodeMessageName(t)),e._postMessage(t)}},t)}},e.prototype._postMessage=function(e){this._worker.postMessage(a.marshallObject(e,this._proxiesMarshalling))},e.prototype._onSerializedMessage=function(e){var t=null;try{t=a.demarshallObject(e,this._proxiesMarshalling)}catch(n){}t&&this._onmessage(t)},e.prototype._onmessage=function(e){if(e.monacoWorker&&(!e.from||e.from===this._worker.getId())){switch(e.type){case o.MessageType.REPLY:var t=e;if(this._waitingForWorkerReply=!1,this._lastTimerEvent&&this._lastTimerEvent.stop(),!this._promises.hasOwnProperty(String(t.id)))return void this._onError("Received unexpected message from Worker:",e);switch(t.action){case o.ReplyType.COMPLETE:this._promises[t.id].complete(t.payload),delete this._promises[t.id];break;case o.ReplyType.ERROR:this._onError("Main Thread sent to worker the following message:",{type:this._promises[t.id].type,payload:this._promises[t.id].payload}),this._onError("And the worker replied with an error:",t.payload),r.onUnexpectedError(t.payload),this._promises[t.id].error(t.payload),delete this._promises[t.id];break;case o.ReplyType.PROGRESS:this._promises[t.id].progress(t.payload)}break;case o.MessageType.PRINT:var n=e;this._consoleLog(n.level,n.payload);break;default:this._dispatchRequestFromWorker(e)}this._processMessagesQueue()}},e.prototype._dispatchRequestFromWorker=function(e){var t=this;this._handleWorkerRequest(e).then(function(n){var i={id:0,type:o.MessageType.REPLY,timestamp:(new Date).getTime(),seq:e.req,payload:n instanceof Error?r.transformErrorForSerialization(n):n,err:null};t._postMessage(i)},function(n){var i={id:0,type:o.MessageType.REPLY,timestamp:(new Date).getTime(),seq:e.req,payload:null,err:n instanceof Error?r.transformErrorForSerialization(n):n};t._postMessage(i)})},e.prototype._handleWorkerRequest=function(e){return"_proxyObj"===e.type?this._remoteCom.handleMessage(e.payload):"function"==typeof this[e.type]?this._invokeHandler(this[e.type],this,e.payload):"function"==typeof this._messageHandlers[e.type]?this._invokeHandler(this._messageHandlers[e.type],null,e.payload):(this._onError("Received unexpected message from Worker:",e),n.TPromise.wrapError(new Error("No handler found")))},e.prototype._invokeHandler=function(e,t,i){try{return n.TPromise.as(e.call(t,i))}catch(r){return n.TPromise.wrapError(r)}},e.prototype._consoleLog=function(e,t){switch(e){case o.PrintType.LOG:console.log(t);break;case o.PrintType.DEBUG:console.info(t);break;case o.PrintType.INFO:console.info(t);break;case o.PrintType.WARN:console.warn(t);break;case o.PrintType.ERROR:console.error(t);break;default:this._onError("Received unexpected message from Worker:",t)}},e.prototype._onError=function(e,t){console.error(e),console.info(t)},e.LAST_WORKER_ID=0,e}();t.WorkerClient=c}),define("vs/base/node/extfs",["require","exports","vs/base/common/uuid","vs/base/common/strings","vs/base/common/platform","vs/base/node/flow","fs","path"],function(e,t,n,i,r,o,s,a){function c(e,t){return r.isMacintosh?u(e,function(e,n){return e?t(e,null):t(null,n.map(function(e){return i.normalizeNFC(e,y)}))}):u(e,t)}function u(e,t){s.readdir(e,function(e,n){return e?t(e,null):t(null,n.filter(function(e){return"."!==e&&".."!==e}))})}function l(e,t,n){s.exists(e,function(i){return i?d(e,function(t,i){return t?n(t):i?void n(null):n(new Error('"'+e+'" is not a directory.'))}):void l(a.dirname(e),t,function(i){return i?void n(i):void(t?s.mkdir(e,t,function(i){return i?n(i):void s.chmod(e,t,n)}):s.mkdir(e,null,n))})})}function d(e,t){s.stat(e,function(e,n){return e?t(e):void t(null,n.isDirectory())})}function h(e,t,n,i){i||(i=Object.create(null)),s.stat(e,function(r,o){return r?n(r):o.isDirectory()?i[e]?n(null):(i[e]=!0,void l(t,511&o.mode,function(r){c(e,function(r,o){g(o,function(n,r){h(a.join(e,n),a.join(t,n),r,i)},n)})})):p(e,t,511&o.mode,n)})}function p(e,t,n,i){var r=!1,o=s.createReadStream(e),a=s.createWriteStream(t,{mode:n}),c=function(e){r||(r=!0,i(e))};o.on("error",c),a.on("error",c),o.on("end",function(){a.end(function(){r||(r=!0,s.chmod(t,n,i))})}),o.pipe(a,{end:!1})}function f(e,t,r,o){s.exists(e,function(c){return c?void s.stat(e,function(c,u){if(c||!u)return r(c);if("."===e[e.length-1]||i.endsWith(e,"./")||i.endsWith(e,".\\"))return m(e,r);var l=a.join(t,n.generateUuid());s.rename(e,l,function(t){return t?m(e,r):(r(null),void m(l,function(e){e&&console.error(e),o&&o(e)}))})}):r(null)})}function m(e,t){return"\\"===e||"/"===e?t(new Error("Will not delete root!")):void s.exists(e,function(n){n?s.lstat(e,function(n,i){if(n||!i)t(n);else if(!i.isDirectory()||i.isSymbolicLink()){var r=i.mode;128&r?s.unlink(e,t):s.chmod(e,128|r,function(n){n?t(n):s.unlink(e,t)})}else c(e,function(n,i){if(n||!i)t(n);else if(0===i.length)s.rmdir(e,t);else{var r=null,o=i.length;i.forEach(function(n){m(a.join(e,n),function(n){o--,n&&(r=r||n),0===o&&(r?t(r):s.rmdir(e,t))})})}})}):t(null)})}function v(e,t,n){function r(e){return e?n(e):void s.stat(t,function(e,i){return e?n(e):i.isDirectory()?n(null):void s.open(t,"a",null,function(e,t){return e?n(e):void s.futimes(t,i.atime,new Date,function(e){return e?n(e):void s.close(t,n)})})})}return e===t?n(null):void s.rename(e,t,function(o){return o?o&&e.toLowerCase()!==t.toLowerCase()&&"EXDEV"===o.code||i.endsWith(e,".")?h(e,t,function(t){return t?n(t):void m(e,r)}):n(o):r(null)})}var g=o.loop,y=(o.sequence,Object.create(null));t.readdir=c,t.mkdirp=l,t.copy=h,t.del=f,t.mv=v}),define("vs/base/node/mime",["require","exports","vs/base/common/mime","vs/base/node/stream","vs/base/node/encoding"],function(e,t,n,i,r){function o(e,t){i.readExactlyByStream(e,512,function(e,n,i){a(e,n,i,t)})}function s(e,t){i.readExactlyByFile(e,512,function(e,n,i){a(e,n,i,t)})}function a(e,t,n,i){return e?i(e,null):i(null,c(t,n))}function c(e,t){var i=r.detectEncodingByBOMFromBuffer(e,t),o=u(i,e,t),s=!0;if(i!==r.UTF16be&&i!==r.UTF16le)for(var a=0;t>a;a++)if(0===e.readInt8(a)){s=!1;break}return o.push(s?n.MIME_TEXT:n.MIME_BINARY),{mimes:o,encoding:i}}function u(e,t,n){if(0===n||!t)return[];var i=0;if(null!==e){if(e!==r.UTF8)return[];i=3}return[]}function l(e,t){var i=e,r=t[0];r!==n.MIME_BINARY&&r!==n.MIME_UNKNOWN&&i.unshift(r);var o=i.filter(function(e,t){return e&&i.indexOf(e)===t}).sort(function(e,t){return e===n.MIME_BINARY?1:t===n.MIME_BINARY?-1:e===n.MIME_TEXT?1:t===n.MIME_TEXT?-1:0});return o}function d(e,t,n){o(e,function(e,i){p(t,e,i,n)})}function h(e,t){s(e,function(n,i){p(e,n,i,t)})}function p(e,t,i,r){if(t)return r(t,null);var o=l(i.mimes,n.guessMimeTypes(e));i.mimes=o,r(null,i)}t.detectMimesFromStream=d,t.detectMimesFromFile=h}),define("vs/base/node/pfs",["require","exports","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/paths","path","vs/base/common/async","fs"],function(e,t,n,i,r,o,s,a){function c(e){return e===o.dirname(e)}function u(e){return s.nfcall(i.readdir,e)}function l(e){return new n.Promise(function(t){return a.exists(e,t)})}function d(e,t){return s.nfcall(a.chmod,e,t)}function h(e,t){var i=function(){return s.nfcall(a.mkdir,e,t).then(null,function(t){return"EEXIST"===t.code?s.nfcall(a.stat,e).then(function(t){return t.isDirectory?null:n.Promise.wrapError(new Error("'"+e+"' exists and is not a directory."))}):n.TPromise.wrapError(t)})};return c(e)?n.TPromise.as(!0):i().then(null,function(r){return"ENOENT"===r.code?h(o.dirname(e),t).then(i):n.TPromise.wrapError(r)})}function p(e){return m(e).then(function(t){return t.isDirectory()?u(e).then(function(t){return n.TPromise.join(t.map(function(t){return p(o.join(e,t))}))}).then(function(){return y(e)}):_(e)},function(e){return"ENOENT"!==e.code?n.TPromise.wrapError(e):void 0})}function f(e){return s.nfcall(a.realpath,e,null)}function m(e){return s.nfcall(a.stat,e)}function v(e){return b(e.slice(0))}function g(e,t){return s.nfcall(a.rename,e,t)}function y(e){return s.nfcall(a.rmdir,e)}function _(e){return s.nfcall(a.unlink,e)}function b(e){var t=e.shift();return m(t).then(function(e){return{path:t,stats:e}},function(t){return 0===e.length?t:v(e)})}function E(e,t){return s.nfcall(a.readFile,e,t)}function S(e,t,n){return void 0===n&&(n="utf8"),s.nfcall(a.writeFile,e,t,n)}function w(e){return u(e).then(function(t){return n.TPromise.join(t.map(function(t){return C(r.join(e,t),t)})).then(function(e){return A(e)})})}function C(e,t){return T(e).then(function(e){return e?t:null})}function T(e){return m(e).then(function(e){return e.isDirectory()},function(){return!1})}function I(e){return m(e).then(function(e){return e.isFile()},function(){return!1})}function k(e,t){return u(e).then(function(i){i=i.filter(function(e){return t.test(e)});var o=i.map(function(t){return x(r.join(e,t),t)});return n.TPromise.join(o).then(function(e){return A(e)})})}function x(e,t){return I(e).then(function(e){return e?t:null},function(e){return n.TPromise.wrapError(e)})}function A(e){return e.filter(function(e){return null!==e})}t.isRoot=c,t.readdir=u,t.exists=l,t.chmod=d,t.mkdirp=h,t.rimraf=p,t.realpath=f,t.stat=m,t.mstat=v,t.rename=g,t.rmdir=y,t.unlink=_,t.readFile=E,t.writeFile=S,t.readDirsInDir=w,t.dirExists=T,t.fileExists=I,t.readFiles=k,t.fileExistsWithResult=x}),define("vs/base/node/request",["require","exports","vs/base/common/winjs.base","https","http","url","fs","vs/base/common/objects"],function(e,t,n,i,r,o,s,a){function c(e){var t;return new n.TPromise(function(n,s){var u=o.parse(e.url),l={hostname:u.hostname,port:u.port?parseInt(u.port):"https:"===u.protocol?443:80,path:u.path,method:e.type||"GET",headers:e.headers,agent:e.agent};e.user&&e.password&&(l.auth=e.user+":"+e.password);var d="https:"===u.protocol?i:r;t=d.request(l,function(i){n(i.statusCode>=300&&i.statusCode<400&&e.followRedirects&&e.followRedirects>0&&i.headers.location?c(a.assign({},e,{url:i.headers.location,followRedirects:e.followRedirects-1})):{req:t,res:i})}),t.on("error",s),e.timeout&&t.setTimeout(e.timeout),e.data&&t.write(e.data),t.end()},function(){return t&&t.abort()})}function u(e,t){return c(a.assign(t,{followRedirects:3})).then(function(t){return new n.Promise(function(n,i){var r=s.createWriteStream(e);r.once("finish",function(){return n(null)}),t.res.once("error",i),t.res.pipe(r)})})}function l(e){return c(e).then(function(e){return new n.Promise(function(t,n){if(!(e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode))return n("Server returned "+e.res.statusCode);if(204===e.res.statusCode)return t(null);if(!/application\/json/.test(e.res.headers["content-type"]))return n("Response doesn't appear to be JSON");var i=[];e.res.on("data",function(e){return i.push(e)}),e.res.on("end",function(){return t(JSON.parse(i.join("")))}),e.res.on("error",n)})})}t.request=c,t.download=u,t.json=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/node/service.cp",["require","exports","child_process","vs/base/common/winjs.base","vs/base/common/async","vs/base/common/objects","vs/base/common/service"],function(e,t,n,i,r,o,s){var a=function(e){function t(){var t=this;e.call(this,{send:function(e){try{process.send(e)}catch(t){}},onMessage:function(e){return process.on("message",e)}}),process.once("disconnect",function(){return t.dispose()})}return __extends(t,e),t}(s.Server);t.Server=a;var c=function(){function e(e,t){this.modulePath=e,this.options=t;var n=t&&t.timeout?t.timeout:Number.MAX_VALUE;this.disposeDelayer=new r.Delayer(n),this.activeRequests=[],this.child=null,this._client=null,this.services=Object.create(null)}return e.prototype.getService=function(e,t){var n=this;return Object.keys(t.prototype).filter(function(e){return"constructor"!==e}).reduce(function(i,r){return o.assign(i,(s={},s[r]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return n.request.apply(n,[e,t,r].concat(i))},s));var s},{})},e.prototype.request=function(e,t,n){for(var r=this,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.disposeDelayer.cancel();var a=this.services[e];a||(a=this.services[e]=this.client.getService(e,t));var c=a[n].apply(a,o),u=new i.Promise(function(e,t,n){c.then(e,t,n).done(function(){r.activeRequests.splice(r.activeRequests.indexOf(u),1),r.disposeDelayer.trigger(function(){return r.disposeClient()})})},function(){return c.cancel()});return this.activeRequests.push(u),u},Object.defineProperty(e.prototype,"client",{get:function(){var e=this;if(!this._client){var t=this.options&&this.options.args?this.options.args:[],i=void 0;this.options&&(i=Object.create(null),this.options.env&&(i.env=o.assign(o.clone(process.env),this.options.env)),"number"==typeof this.options.debug&&(i.execArgv=["--nolazy","--debug="+this.options.debug]),"number"==typeof this.options.debugBrk&&(i.execArgv=["--nolazy","--debug-brk="+this.options.debugBrk])),this.child=n.fork(this.modulePath,t,i),this._client=new s.Client({send:function(t){return e.child.connected&&e.child.send(t)},onMessage:function(t){e.child.on("message",function(n){if(n&&"__$console"===n.type){var i=["%c[Service Library: "+e.options.serverName+"]","color: darkgreen"];try{var r=JSON.parse(n.arguments);i=i.concat(Object.getOwnPropertyNames(r).map(function(e){return r[e]}))}catch(o){i.push(n.arguments)}console[n.severity].apply(console,i)}else t(n)})}});var r=function(){return e.disposeClient()};process.once("exit",r),this.child.on("error",function(t){return console.warn('Service "'+e.options.serverName+'" errored with '+t)}),this.child.on("exit",function(t,n){process.removeListener("exit",r),e.activeRequests&&(e.activeRequests.forEach(function(e){return e.cancel()}),e.activeRequests=[]),t&&"SIGTERM"!==n&&(console.warn('Service "'+e.options.serverName+'" crashed with exit code '+t),e.disposeDelayer.cancel(),e.disposeClient())})}return this._client},enumerable:!0,configurable:!0}),e.prototype.disposeClient=function(){this._client&&(this.child.kill(),this.child=null,this._client=null,this.services=Object.create(null))},e.prototype.dispose=function(){this.disposeDelayer.cancel(),this.disposeDelayer=null,this.disposeClient(),this.activeRequests=null},e}();t.Client=c}),define("vs/base/node/service.net",["require","exports","net","vs/base/common/service","vs/base/common/winjs.base"],function(e,t,n,i,r){function o(e,t,n){for(void 0===n&&(n=0);n<e.length&&e[n]!==t;)n++;return n}function s(e){return new r.TPromise(function(t,i){var r=n.createServer();r.on("error",i),r.listen(e,function(){r.removeListener("error",i),t(new u(r))})})}function a(e){return new r.TPromise(function(t,i){var r=n.createConnection(e,function(){r.removeListener("error",i),t(new l(r))});r.once("error",i)})}var c=function(){function e(e){this.socket=e,this.buffer=null}return e.prototype.send=function(t){this.socket.write(JSON.stringify(t)),this.socket.write(e.Boundary)},e.prototype.onMessage=function(e){var t=this;this.socket.on("data",function(n){for(var i=0,r=0;(r=o(n,0,i))<n.length;){var s=n.slice(i,r);t.buffer?(e(JSON.parse(Buffer.concat([t.buffer,s]).toString("utf8"))),t.buffer=null):e(JSON.parse(s.toString("utf8"))),i=r+1}if(r-i>0){var a=n.slice(i,r);t.buffer?t.buffer=Buffer.concat([t.buffer,a]):t.buffer=a}})},e.Boundary=new Buffer([0]),e}(),u=function(){function e(e){var t=this;this.server=e,this.services=Object.create(null),this.server.on("connection",function(e){var n=new i.Server(new c(e));Object.keys(t.services).forEach(function(e){return n.registerService(e,t.services[e])}),e.once("close",function(){return n.dispose()})})}return e.prototype.registerService=function(e,t){this.services[e]=t},e.prototype.dispose=function(){this.services=null,this.server.close(),this.server=null},e}();t.Server=u;var l=function(){function e(e){this.socket=e,this.ipcClient=new i.Client(new c(e))}return e.prototype.getService=function(e,t){return this.ipcClient.getService(e,t)},e.prototype.dispose=function(){this.socket.end(),this.socket=null,this.ipcClient=null},e}();t.Client=l,t.serve=s,t.connect=a}),define("vs/base/parts/quickopen/browser/quickOpenViewer",["require","exports","vs/base/common/winjs.base","vs/base/common/types"],function(e,t,n,i){var r=function(){function e(e){this.modelProvider=i.isFunction(e.getModel)?e:{getModel:function(){return e}}}return e.prototype.getId=function(e,t){if(!t)return null;var n=this.modelProvider.getModel();return n===t?"__root__":n.dataSource.getId(t)},e.prototype.hasChildren=function(e,t){var n=this.modelProvider.getModel();return n&&n===t&&n.entries.length>0},e.prototype.getChildren=function(e,t){var i=this.modelProvider.getModel();return n.Promise.as(i===t?i.entries:[])},e.prototype.getParent=function(e,t){return n.Promise.as(null)},e}();t.DataSource=r;var o=function(){function e(e){this.modelProvider=e}return e.prototype.isVisible=function(e,t){var n=this.modelProvider.getModel();return n.filter?n.filter.isVisible(t):!0},e}();t.Filter=o;var s=function(){function e(e){this.modelProvider=e}return e.prototype.getHeight=function(e,t){var n=this.modelProvider.getModel();return n.renderer.getHeight(t)},e.prototype.getTemplateId=function(e,t){var n=this.modelProvider.getModel();return n.renderer.getTemplateId(t)},e.prototype.renderTemplate=function(e,t,n){var i=this.modelProvider.getModel();return i.renderer.renderTemplate(t,n)},e.prototype.renderElement=function(e,t,n,i){var r=this.modelProvider.getModel();r.renderer.renderElement(t,n,i)},e.prototype.disposeTemplate=function(e,t,n){var i=this.modelProvider.getModel();i.renderer.disposeTemplate(t,n)},e}();t.Renderer=s}),define("vs/base/parts/tree/browser/treeDefaults",["require","exports","vs/base/common/platform","vs/base/common/errors","vs/base/browser/dom","vs/base/common/keyCodes"],function(e,t,n,i,r,o){var s=function(){function e(){}return e.prototype.getHeight=function(e,t){return 20},e.prototype.getTemplateId=function(e,t){return"legacy"},e.prototype.renderTemplate=function(e,t,n){return{root:n,previousCleanupFn:null}},e.prototype.renderElement=function(e,t,n,i){for(i.previousCleanupFn&&i.previousCleanupFn(e,t);i.root.firstChild;)i.root.removeChild(i.root.firstChild);i.previousCleanupFn=this.render(e,t,i.root)},e.prototype.disposeTemplate=function(e,t,n){},e.prototype.render=function(e,t,n,i){return n.textContent=""+t,null},e}();t.LegacyRenderer=s,function(e){e[e.ON_MOUSE_DOWN=0]="ON_MOUSE_DOWN",e[e.ON_MOUSE_UP=1]="ON_MOUSE_UP"}(t.ClickBehavior||(t.ClickBehavior={}));var a=t.ClickBehavior,c=function(){function e(){this._arr=[]}return e.prototype.set=function(e,t){this._arr.push({keybinding:e,callback:t})},e.prototype.dispatch=function(e){for(var t=this._arr.length-1;t>=0;t--){var n=this._arr[t];if(e===n.keybinding)return n.callback}return null},e}();t.KeybindingDispatcher=c;var u=function(){function e(e){var t=this;void 0===e&&(e={clickBehavior:a.ON_MOUSE_UP}),this.options=e,this.downKeyBindingDispatcher=new c,this.downKeyBindingDispatcher.set(o.CommonKeybindings.SPACE,function(e,n){return t.onSpace(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.UP_ARROW,function(e,n){return t.onUp(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.PAGE_UP,function(e,n){return t.onPageUp(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.DOWN_ARROW,function(e,n){return t.onDown(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.PAGE_DOWN,function(e,n){return t.onPageDown(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.LEFT_ARROW,function(e,n){return t.onLeft(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.RIGHT_ARROW,function(e,n){return t.onRight(e,n)}),this.downKeyBindingDispatcher.set(o.CommonKeybindings.ESCAPE,function(e,n){return t.onEscape(e,n)}),this.upKeyBindingDispatcher=new c,this.upKeyBindingDispatcher.set(o.CommonKeybindings.ENTER,this.onEnter.bind(this)),this.upKeyBindingDispatcher.set(o.CommonKeybindings.CTRLCMD_ENTER,this.onEnter.bind(this))}return e.prototype.onMouseDown=function(e,t,n,i){if(void 0===i&&(i="mouse"),this.options.clickBehavior===a.ON_MOUSE_DOWN&&n.leftButton){if(n.target){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(r.findParentWithClass(n.target,"monaco-action-bar","row"))return!1}return this.onLeftClick(e,t,n,i)}return!1},e.prototype.onClick=function(e,t,i){var r=n.isMacintosh;return r&&i.ctrlKey?(i.preventDefault(),i.stopPropagation(),!1):i.middleButton?!1:i.target&&i.target.tagName&&"input"===i.target.tagName.toLowerCase()?!1:this.options.clickBehavior===a.ON_MOUSE_DOWN&&i.leftButton?!1:this.onLeftClick(e,t,i)},e.prototype.onLeftClick=function(e,t,n,r){void 0===r&&(r="mouse");var o={origin:r,originalEvent:n};if(e.getInput()===t)e.clearFocus(o),e.clearSelection(o);else{var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),e.setSelection([t],o),e.setFocus(t,o),e.isExpanded(t)?e.collapse(t).done(null,i.onUnexpectedError):e.expand(t).done(null,i.onUnexpectedError)}return!0},e.prototype.onContextMenu=function(e,t,n){return n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase()?!1:(n&&(n.preventDefault(),n.stopPropagation()),!1)},e.prototype.onTap=function(e,t,n){var i=n.initialTarget;return i&&i.tagName&&"input"===i.tagName.toLowerCase()?!1:this.onLeftClick(e,t,n,"touch")},e.prototype.onKeyDown=function(e,t){return this.onKey(this.downKeyBindingDispatcher,e,t)},e.prototype.onKeyUp=function(e,t){return this.onKey(this.upKeyBindingDispatcher,e,t)},e.prototype.onKey=function(e,t,n){var i=e.dispatch(n.asKeybinding());return i&&i(t,n)?(n.preventDefault(),n.stopPropagation(),!0):!1},e.prototype.onUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPrevious(1,n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onPageUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPreviousPage(n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNext(1,n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onPageDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNextPage(n),e.reveal(e.getFocus()).done(null,i.onUnexpectedError)),!0},e.prototype.onLeft=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var i=e.getFocus();e.collapse(i).done(function(t){i&&!t&&e.focusParent(n)})}return!0},e.prototype.onRight=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var r=e.getFocus();e.expand(r).done(null,i.onUnexpectedError)}return!0},e.prototype.onEnter=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())return!1;var i=e.getFocus();return i&&e.setSelection([i],n),!0},e.prototype.onSpace=function(e,t){if(e.getHighlight())return!1;var n=e.getFocus();return n&&e.toggleExpansion(n),!0},e.prototype.onEscape=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?(e.clearHighlight(n),!0):e.getFocus()||e.getSelection().length?(e.clearFocus(n),e.clearSelection(n),!0):!1},e}();t.DefaultController=u;var l=function(){function e(){}return e.prototype.getDragURI=function(e,t){return null},e.prototype.onDragStart=function(e,t,n){},e.prototype.onDragOver=function(e,t,n,i){return null},e.prototype.drop=function(e,t,n,i){},e}();t.DefaultDragAndDrop=l;var d=function(){function e(){}return e.prototype.isVisible=function(e,t){return!0},e}();t.DefaultFilter=d;var h=function(){function e(){}return e.prototype.compare=function(e,t,n){return 0},e}();t.DefaultSorter=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);
e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/quickopen/browser/quickOpenModel",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/filters","vs/base/common/strings","vs/base/common/paths","vs/base/common/comparers","vs/base/browser/ui/actionbar/actionbar","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/browser/dom"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=0,p=function(){function e(e){void 0===e&&(e=[]),this.id=(h++).toString(),this.labelHighlights=e,this.descriptionHighlights=[]}return e.prototype.getId=function(){return this.id},e.prototype.getPrefix=function(){return this.labelPrefix},e.prototype.getLabel=function(){return null},e.prototype.getMeta=function(){return null},e.prototype.getIcon=function(){return null},e.prototype.getDescription=function(){return null},e.prototype.getResource=function(){return null},e.prototype.isHidden=function(){return this.hidden},e.prototype.setHidden=function(e){this.hidden=e},e.prototype.setPrefix=function(e){this.labelPrefix=e},e.prototype.setHighlights=function(e,t){this.labelHighlights=e,this.descriptionHighlights=t},e.prototype.getHighlights=function(){return[this.labelHighlights,this.descriptionHighlights]},e.prototype.run=function(e,t){return!1},e.compare=function(e,t,n){n&&(n=o.stripWildcards(n).toLowerCase());var i=e.getHighlights()[0]||[],r=t.getHighlights()[0]||[];if(i.length&&!r.length)return-1;if(!i.length&&r.length)return 1;var s=e.getLabel(),c=t.getLabel();if(s===c){var u=e.getResource(),l=t.getResource();u&&l&&(s=u.fsPath,c=l.fsPath)}return a.compareAnything(s,c,n)},e.highlight=function(e,t,n){void 0===n&&(n=!1);var i=[],o=[];if(e.getResource())if(n||t.indexOf(s.nativeSep)>=0){var a=r.matchesFuzzy(t,e.getLabel(),n);if(a)i=a;else{var c=e.getDescription()?e.getDescription()+s.nativeSep:"",u=c.length,l=r.matchesFuzzy(t,c+e.getLabel(),n);l&&l.forEach(function(e){e.start<u&&e.end>u?(i.push({start:0,end:e.end-u}),o.push({start:e.start,end:u})):e.start>=u?i.push({start:e.start-u,end:e.end-u}):o.push(e)})}}else i=r.matchesFuzzy(t,e.getLabel());else i=r.matchesFuzzy(t,e.getLabel());return{labelHighlights:i,descriptionHighlights:o}},e}();t.QuickOpenEntry=p;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getHeight=function(){return 0},t.prototype.render=function(e,t,n){return null},t}(p);t.QuickOpenEntryItem=f;var m=function(e){function t(t,n,i){e.call(this),this.entry=t,this.groupLabel=n,this.withBorder=i}return __extends(t,e),t.prototype.getGroupLabel=function(){return this.groupLabel},t.prototype.setGroupLabel=function(e){this.groupLabel=e},t.prototype.showBorder=function(){return this.withBorder},t.prototype.setShowBorder=function(e){this.withBorder=e},t.prototype.getPrefix=function(){return this.entry?this.entry.getPrefix():e.prototype.getPrefix.call(this)},t.prototype.getLabel=function(){return this.entry?this.entry.getLabel():e.prototype.getLabel.call(this)},t.prototype.getMeta=function(){return this.entry?this.entry.getMeta():e.prototype.getMeta.call(this)},t.prototype.getResource=function(){return this.entry?this.entry.getResource():e.prototype.getResource.call(this)},t.prototype.getIcon=function(){return this.entry?this.entry.getIcon():e.prototype.getIcon.call(this)},t.prototype.getDescription=function(){return this.entry?this.entry.getDescription():e.prototype.getDescription.call(this)},t.prototype.getEntry=function(){return this.entry},t.prototype.getHighlights=function(){return this.entry?this.entry.getHighlights():e.prototype.getHighlights.call(this)},t.prototype.isHidden=function(){return this.entry?this.entry.isHidden():e.prototype.isHidden.call(this)},t.prototype.setHighlights=function(t,n){this.entry?this.entry.setHighlights(t,n):e.prototype.setHighlights.call(this,t,n)},t.prototype.setHidden=function(t){this.entry?this.entry.setHidden(t):e.prototype.setHidden.call(this,t)},t.prototype.run=function(t,n){return this.entry?this.entry.run(t,n):e.prototype.run.call(this,t,n)},t}(p);t.QuickOpenEntryGroup=m;var v="quickOpenEntry",g="quickOpenEntryGroup",y="quickOpenEntryItem",_=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getTemplateId=function(e,t){return y},t.prototype.render=function(t,n,i,r){return n instanceof f?n.render(t,i,r):e.prototype.render.call(this,t,n,i,r)},t}(u.LegacyRenderer),b=function(){function e(){}return e.prototype.hasActions=function(e,t){return!1},e.prototype.getActions=function(e,t){return n.Promise.as(null)},e.prototype.hasSecondaryActions=function(e,t){return!1},e.prototype.getSecondaryActions=function(e,t){return n.Promise.as(null)},e.prototype.getActionItem=function(e,t,n){return null},e}(),E=function(){function e(e,t){void 0===e&&(e=new b),void 0===t&&(t=null),this.actionProvider=e,this.actionRunner=t,this.entryItemRenderer=new _}return e.prototype.getHeight=function(e){return e instanceof f?e.getHeight():24},e.prototype.getTemplateId=function(e){return e instanceof f?y:e instanceof m?g:v},e.prototype.renderTemplate=function(e,t){if(e===y)return this.entryItemRenderer.renderTemplate(null,e,t);var n;e===g&&(n=document.createElement("div"),d.addClass(n,"results-group"),t.appendChild(n)),d.addClass(t,"actions");var i=document.createElement("div");d.addClass(i,"sub-content"),t.appendChild(i);var r=document.createElement("div");d.addClass(r,"primary-action-bar"),t.appendChild(r);var o=new c.ActionBar(r,{actionRunner:this.actionRunner}),s=document.createElement("div");d.addClass(s,"quick-open-entry"),i.appendChild(s);var a=document.createElement("span");s.appendChild(a);var u=document.createElement("span");s.appendChild(u);var h=new l.HighlightedLabel(s),p=document.createElement("span");s.appendChild(p),d.addClass(p,"quick-open-entry-meta");var f=document.createElement("span");s.appendChild(f),d.addClass(f,"quick-open-entry-description");var m=new l.HighlightedLabel(f);return{container:t,icon:a,prefix:u,label:h,meta:p,description:m,group:n,actionBar:o}},e.prototype.renderElement=function(e,t,n){if(t===y)return void this.entryItemRenderer.renderElement(null,e,t,n);var i=n;if(this.actionProvider.hasActions(null,e)?d.addClass(i.container,"has-actions"):d.removeClass(i.container,"has-actions"),i.actionBar.context=e,this.actionProvider.getActions(null,e).then(function(e){i.actionBar.isEmpty()&&e&&e.length>0?i.actionBar.push(e,{icon:!0,label:!1}):i.actionBar.isEmpty()||e&&0!==e.length||i.actionBar.clear()}),e instanceof m){var r=e;r.showBorder()?d.addClass(i.container,"results-group-separator"):d.removeClass(i.container,"results-group-separator");var o=r.getGroupLabel()||"";n.group.textContent=o}if(e instanceof p){var s=e.getHighlights(),a=e.getIcon()?"quick-open-entry-icon "+e.getIcon():"";i.icon.className=a;var c=e.getPrefix()||"";i.prefix.textContent=c;var u=s[0];i.label.set(e.getLabel()||"",u||[]);var l=e.getMeta()||"";i.meta.textContent=l;var h=s[1];i.description.set(e.getDescription()||"",h||[])}},e.prototype.disposeTemplate=function(e,t){e===y&&this.entryItemRenderer.disposeTemplate(null,e,t)},e}(),S=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=new b),this._entries=e,this._dataSource=this,this._renderer=new E(t),this._filter=this,this._runner=this}return Object.defineProperty(e.prototype,"entries",{get:function(){return this._entries},set:function(e){this._entries=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runner",{get:function(){return this._runner},enumerable:!0,configurable:!0}),e.prototype.addEntries=function(e){i.isArray(e)&&(this._entries=this._entries.concat(e))},e.prototype.setEntries=function(e){i.isArray(e)&&(this._entries=e)},e.prototype.getEntries=function(e){return e?this._entries.filter(function(e){return!e.isHidden()}):this._entries},e.prototype.getId=function(e){return e.getId()},e.prototype.getLabel=function(e){return e.getLabel()},e.prototype.isVisible=function(e){return!e.isHidden()},e.prototype.run=function(e,t,n){return e.run(t,n)},e}();t.QuickOpenModel=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/actionsRenderer",["require","exports","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/events","vs/base/browser/ui/actionbar/actionbar","./treeDefaults","vs/css!./actionsRenderer"],function(e,t,n,i,r,o,s){var a=n.$,c=function(e){function t(t){e.call(this),this.actionProvider=t.actionProvider,this.actionRunner=t.actionRunner}return __extends(t,e),t.prototype.getHeight=function(e,t){return this.getContentHeight(e,t)},t.prototype.render=function(e,n,s,c){var u=this;try{i.clearNode(s)}catch(l){if(!/The node to be removed is no longer a child of this node/.test(l.message))throw l}c&&c(e,n);var d,h,p=a(s).addClass("actions"),f=a(".sub-content").appendTo(p);this.actionProvider.hasActions(e,n)?(p.addClass("has-actions"),d=new o.ActionBar(a(".primary-action-bar").appendTo(p),{context:this.getActionContext(e,n),actionItemProvider:function(t){return u.actionProvider.getActionItem(e,n,t)},actionRunner:this.actionRunner}),this.actionProvider.getActions(e,n).then(function(e){d.push(e,{icon:!0,label:!1})}),h=d.addListener2(r.EventType.RUN,function(e){e.error&&u.onError(e.error)})):p.removeClass("has-actions");var m=(c?c[t.CONTENTS_CLEANUP_FN_KEY]:t.NO_OP)||t.NO_OP;m(e,n);var v=this.renderContents(e,n,f.getHTMLElement(),null),g=function(){h&&h.dispose(),d&&d.dispose(),v&&v(e,n)};return g[t.CONTENTS_CLEANUP_FN_KEY]=v,g},t.prototype.getContentHeight=function(e,t){return 20},t.prototype.renderContents=function(e,t,n,i){return null},t.prototype.getActionContext=function(e,t){return null},t.prototype.onError=function(e){},t.prototype.dispose=function(){this.actionProvider=null},t.CONTENTS_CLEANUP_FN_KEY="__$ActionsRenderer.contentCleanupFn",t.NO_OP=function(){},t}(s.LegacyRenderer);t.ActionsRenderer=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/common/treeModel",["require","exports","vs/base/common/assert","vs/base/common/lifecycle","vs/base/common/arrays","vs/base/common/eventEmitter","vs/base/common/winjs.base"],function(e,t,n,i,r,o,s){function a(e,t){for(var n=e.getHierarchy(),i=t.getHierarchy(),o=r.commonPrefixLength(n,i),s=n[o-1],a=s.getNavigator(),c=null,u=null,l=0,d=[];s&&(null===c||null===u);)d.push(s),s===e&&(c=l),s===t&&(u=l),l++,s=a.next();if(null===c||null===u)return[];var h=Math.min(c,u),p=Math.max(c,u);return d.slice(h,p+1)}var c=function(e){function t(t){e.call(this),this._item=t}return __extends(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.emit("unlock"),e.prototype.dispose.call(this)},t}(o.EventEmitter);t.LockData=c;var u=function(){function e(){this.locks=Object.create({})}return e.prototype.isLocked=function(e){return!!this.locks[e.id]},e.prototype.run=function(e,t){var n=this,i=this.getLock(e);if(i){var r;return new s.Promise(function(o,s){r=i.addOneTimeListener("unlock",function(){return n.run(e,t).then(o,s)})},function(){return r()})}var o;return new s.Promise(function(i,r){if(e.isDisposed())return r(new Error("Item is disposed."));var s=n.locks[e.id]=new c(e);return o=t().then(function(t){return delete n.locks[e.id],s.dispose(),t}).then(i,r)},function(){return o.cancel()})},e.prototype.getLock=function(e){var t;for(t in this.locks){var n=this.locks[t];if(e.intersects(n.item))return n}return null},e}();t.Lock=u;var l=function(e){function t(){e.call(this),this.items={}}return __extends(t,e),t.prototype.register=function(e){n.ok(!this.isRegistered(e.id),"item already registered: "+e.id),this.items[e.id]={item:e,disposable:this.addEmitter2(e)}},t.prototype.deregister=function(e){n.ok(this.isRegistered(e.id),"item not registered: "+e.id),this.items[e.id].disposable.dispose(),delete this.items[e.id]},t.prototype.isRegistered=function(e){return this.items.hasOwnProperty(e)},t.prototype.getItem=function(e){var t=this.items[e];return t?t.item:null},t.prototype.dispose=function(){e.prototype.dispose.call(this),delete this.items},t}(o.EventEmitter);t.ItemRegistry=l;var d=function(e){function t(t,n,i,r,o){e.call(this),this.registry=n,this.context=i,this.lock=r,this.element=o,this.id=t,this.registry.register(this),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.needsChildrenRefresh=!0,this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this.userContent=null,this.traits={},this.depth=0,this.expanded=!1,this.emit("item:create",{item:this}),this.visible=this._isVisible(),this.height=this._getHeight(),this._isDisposed=!1}return __extends(t,e),t.prototype.getElement=function(){return this.element},t.prototype.hasChildren=function(){return this.doesHaveChildren},t.prototype.getDepth=function(){return this.depth},t.prototype.isVisible=function(){return this.visible},t.prototype.setVisible=function(e){this.visible=e},t.prototype.isExpanded=function(){return this.expanded},t.prototype._setExpanded=function(e){this.expanded=e},t.prototype.reveal=function(e){void 0===e&&(e=null);var t={item:this,relativeTop:e};this.emit("item:reveal",t)},t.prototype.expand=function(){var e=this;if(this.isExpanded()||!this.doesHaveChildren||this.lock.isLocked(this))return s.Promise.as(!1);var t=this.lock.run(this,function(){var t,n={item:e};return e.emit("item:expanding",n),t=e.needsChildrenRefresh?e.refreshChildren(!1,!0,!0):s.Promise.as(null),t.then(function(){return e._setExpanded(!0),e.emit("item:expanded",n),!0})});return t.then(function(t){return e.isDisposed()?!1:e.context.options.autoExpandSingleChildren&&t&&null!==e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.isVisible()?e.firstChild.expand().then(function(){return!0}):t})},t.prototype.collapse=function(e){var t=this;if(void 0===e&&(e=!1),e){var n=s.Promise.as(null);return this.forEachChild(function(e){n=n.then(function(){return e.collapse(!0)})}),n.then(function(){return t.collapse(!1)})}return!this.isExpanded()||this.lock.isLocked(this)?s.Promise.as(!1):this.lock.run(this,function(){var e={item:t};return t.emit("item:collapsing",e),t._setExpanded(!1),t.emit("item:collapsed",e),s.Promise.as(!0)})},t.prototype.addTrait=function(e){var t={item:this,trait:e};this.traits[e]=!0,this.emit("item:addTrait",t)},t.prototype.removeTrait=function(e){var t={item:this,trait:e};delete this.traits[e],this.emit("item:removeTrait",t)},t.prototype.hasTrait=function(e){return this.traits[e]||!1},t.prototype.getAllTraits=function(){var e,t=[];for(e in this.traits)this.traits.hasOwnProperty(e)&&this.traits[e]&&t.push(e);return t},t.prototype.getHeight=function(){return this.height},t.prototype.refreshChildren=function(e,n,i){var r=this;if(void 0===n&&(n=!1),void 0===i&&(i=!1),!i&&!this.isExpanded())return this.needsChildrenRefresh=!0,s.Promise.as(this);this.needsChildrenRefresh=!1;var o=function(){var i={item:r,isNested:n};r.emit("item:childrenRefreshing",i);var o;return o=r.doesHaveChildren?r.context.dataSource.getChildren(r.context.tree,r.element):s.Promise.as([]),o.then(function(n){n=n?n.slice(0):[],n=r.sort(n);for(var i={};null!==r.firstChild;)i[r.firstChild.id]=r.firstChild,r.removeChild(r.firstChild);for(var o=0,a=n.length;a>o;o++){var c=n[o],u=r.context.dataSource.getId(r.context.tree,c),l=i[u]||new t(u,r.registry,r.context,r.lock,c);l.element=c,e&&(l.needsChildrenRefresh=e),delete i[u],r.addChild(l)}for(var d in i)i.hasOwnProperty(d)&&i[d].dispose();return e?s.Promise.join(r.mapEachChild(function(t){return t.doRefresh(e,!0)})):s.Promise.as(null)}).then(function(){r.emit("item:childrenRefreshed",i)})};return n?o():this.lock.run(this,o)},t.prototype.doRefresh=function(e,t){void 0===t&&(t=!1);var n={item:this};return this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.height=this._getHeight(),this.setVisible(this._isVisible()),this.emit("item:refresh",n),this.refreshChildren(e,t)},t.prototype.refresh=function(e){return this.doRefresh(e)},t.prototype.getNavigator=function(){return new p(this)},t.prototype.intersects=function(e){return this.isAncestorOf(e)||e.isAncestorOf(this)},t.prototype.getHierarchy=function(){var e=[],t=this;do e.push(t),t=t.parent;while(t);return e.reverse(),e},t.prototype.isAncestorOf=function(e){for(;e;){if(e.id===this.id)return!0;e=e.parent}return!1},t.prototype.addChild=function(e,t){void 0===t&&(t=this.lastChild);var n=null===this.firstChild,i=null===t,r=t===this.lastChild;n?(this.firstChild=this.lastChild=e,e.next=e.previous=null):i?(this.firstChild.previous=e,e.next=this.firstChild,e.previous=null,this.firstChild=e):r?(this.lastChild.next=e,e.next=null,e.previous=this.lastChild,this.lastChild=e):(e.previous=t,e.next=t.next,t.next.previous=e,t.next=e),e.parent=this,e.depth=this.depth+1},t.prototype.removeChild=function(e){var t=this.firstChild===e,n=this.lastChild===e;t&&n?this.firstChild=this.lastChild=null:t?(e.next.previous=null,this.firstChild=e.next):n?(e.previous.next=null,this.lastChild=e.previous):(e.next.previous=e.previous,e.previous.next=e.next),e.parent=null,e.depth=null},t.prototype.forEachChild=function(e){for(var t,n=this.firstChild;n;)t=n.next,e(n),n=t},t.prototype.mapEachChild=function(e){var t=[];return this.forEachChild(function(n){t.push(e(n))}),t},t.prototype.sort=function(e){var t=this;return this.context.sorter?e.sort(function(e,n){return t.context.sorter.compare(t.context.tree,e,n)}):e},t.prototype._getHeight=function(){return this.context.renderer.getHeight(this.context.tree,this.element)},t.prototype._isVisible=function(){return this.context.filter.isVisible(this.context.tree,this.element)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.forEachChild(function(e){return e.dispose()}),delete this.parent,delete this.previous,delete this.next,delete this.firstChild,delete this.lastChild;var t={item:this};this.emit("item:dispose",t),this.registry.deregister(this),e.prototype.dispose.call(this),this._isDisposed=!0},t}(o.EventEmitter);t.Item=d;var h=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype.isVisible=function(){return!1},t.prototype.setVisible=function(e){},t.prototype.isExpanded=function(){return!0},t.prototype._setExpanded=function(e){},t.prototype.render=function(){},t.prototype._getHeight=function(){return 0},t.prototype._isVisible=function(){return!1},t}(d),p=function(){function e(e,t){void 0===t&&(t=!0),this.item=e,this.start=t?e:null}return e.lastDescendantOf=function(t){return t?t.isVisible()&&t.isExpanded()&&null!==t.lastChild?e.lastDescendantOf(t.lastChild):t:null},e.prototype.current=function(){return this.item||null},e.prototype.next=function(){if(this.item)do if((this.item instanceof h||this.item.isVisible()&&this.item.isExpanded())&&this.item.firstChild)this.item=this.item.firstChild;else if(this.item===this.start)this.item=null;else{for(;this.item&&this.item!==this.start&&!this.item.next;)this.item=this.item.parent;this.item===this.start&&(this.item=null),this.item=this.item?this.item.next:null}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.previous=function(){if(this.item)do{var t=e.lastDescendantOf(this.item.previous);t?this.item=t:this.item.parent&&this.item.parent!==this.start&&this.item.parent.isVisible()?this.item=this.item.parent:this.item=null}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.parent=function(){if(this.item){var e=this.item.parent;e&&e!==this.start&&e.isVisible()?this.item=e:this.item=null}return this.item||null},e.prototype.first=function(){return this.item=this.start,this.next(),this.item||null},e.prototype.last=function(){return this.start&&this.start.isExpanded()&&(this.item=this.start.lastChild,this.item&&!this.item.isVisible()&&this.previous()),this.item||null},e}();t.TreeNavigator=p;var f=function(e){function t(t){e.call(this),this.context=t,this.input=null,this.traitsToItems={}}return __extends(t,e),t.prototype.setInput=function(e){var t=this,n={item:this.input};this.emit("clearingInput",n),this.setSelection([]),this.setFocus(),this.setHighlight(),this.lock=new u,this.input&&this.input.dispose(),this.registry&&(this.registry.dispose(),this.registryDisposable.dispose()),this.registry=new l,this.registryDisposable=i.combinedDispose(this.addEmitter2(this.registry),this.registry.addListener2("item:dispose",function(e){e.item.getAllTraits().forEach(function(n){return delete t.traitsToItems[n][e.item.id]})}));var r=this.context.dataSource.getId(this.context.tree,e);return this.input=new h(r,this.registry,this.context,this.lock,e),n={item:this.input},this.emit("setInput",n),this.refresh(this.input)},t.prototype.getInput=function(){return this.input?this.input.getElement():null},t.prototype.refresh=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!0);var i=this.getItem(e);if(!i)return s.Promise.as(null);var r={item:i,recursive:t};return this.emit("refreshing",r),i.refresh(t).then(function(){n.emit("refreshed",r)})},t.prototype.refreshAll=function(e,t){var n=this;void 0===t&&(t=!0);var i=[];return this.deferredEmit(function(){for(var r=0,o=e.length;o>r;r++)i.push(n.refresh(e[r],t))}),s.Promise.join(i)},t.prototype.expand=function(e){var t=this.getItem(e);return t?t.expand():s.Promise.as(!1)},t.prototype.expandAll=function(e){if(!e){e=[];for(var t,n=this.getNavigator();t=n.next();)e.push(t)}for(var i=[],r=0,o=e.length;o>r;r++)i.push(this.expand(e[r]));return s.Promise.join(i)},t.prototype.collapse=function(e,t){void 0===t&&(t=!1);var n=this.getItem(e);return n?n.collapse(t):s.Promise.as(!1)},t.prototype.collapseAll=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),e||(e=[this.input],t=!0);for(var n=[],i=0,r=e.length;r>i;i++)n.push(this.collapse(e[i],t));return s.Promise.join(n)},t.prototype.toggleExpansion=function(e){return this.isExpanded(e)?this.collapse(e):this.expand(e)},t.prototype.toggleExpansionAll=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(this.toggleExpansion(e[n]));return s.Promise.join(t)},t.prototype.isExpanded=function(e){var t=this.getItem(e);return t?t.isExpanded():!1},t.prototype.getExpandedElements=function(){for(var e,t=[],n=this.getNavigator();e=n.next();)e.isExpanded()&&t.push(e.getElement());return t},t.prototype.reveal=function(e,t){var n=this;return void 0===t&&(t=null),this.resolveUnknownParentChain(e).then(function(e){var t=s.Promise.as(null);return e.forEach(function(e){t=t.then(function(){return n.expand(e)})}),t}).then(function(){var i=n.getItem(e);return i?i.reveal(t):void 0})},t.prototype.resolveUnknownParentChain=function(e){var t=this;return this.context.dataSource.getParent(this.context.tree,e).then(function(e){return e?t.resolveUnknownParentChain(e).then(function(t){return t.push(e),t}):s.Promise.as([])})},t.prototype.setHighlight=function(e,t){this.setTraits("highlighted",e?[e]:[]);var n={highlight:this.getHighlight(),payload:t};this.emit("highlight",n)},t.prototype.getHighlight=function(e){var t=this.getElementsWithTrait("highlighted",e);return 0===t.length?null:t[0]},t.prototype.isHighlighted=function(e){var t=this.getItem(e);return t?t.hasTrait("highlighted"):!1},t.prototype.select=function(e,t){this.selectAll([e],t)},t.prototype.selectRange=function(e,t,n){var i=this.getItem(e),r=this.getItem(t);i&&r&&this.selectAll(a(i,r),n)},t.prototype.deselectRange=function(e,t,n){var i=this.getItem(e),r=this.getItem(t);i&&r&&this.deselectAll(a(i,r),n)},t.prototype.selectAll=function(e,t){this.addTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.deselect=function(e,t){this.deselectAll([e],t)},t.prototype.deselectAll=function(e,t){this.removeTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.setSelection=function(e,t){this.setTraits("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.toggleSelection=function(e,t){this.toggleTrait("selected",e);var n={selection:this.getSelection(),payload:t};this.emit("selection",n)},t.prototype.isSelected=function(e){var t=this.getItem(e);return t?t.hasTrait("selected"):!1},t.prototype.getSelection=function(e){return this.getElementsWithTrait("selected",e)},t.prototype.selectNext=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=!0);for(var i,r=this.getSelection(),o=r.length>0?r[0]:this.input,s=this.getNavigator(o,!1),a=0;e>a&&(i=s.next(),i);a++)o=i;t?this.setSelection([o],n):this.select(o,n)},t.prototype.selectPrevious=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=!0);var i=this.getSelection(),r=null,o=null;if(0===i.length){for(var s=this.getNavigator(this.input);r=s.next();)o=r;r=o}else{r=i[0];for(var s=this.getNavigator(r,!1),a=0;e>a&&(o=s.previous(),o);a++)r=o}t?this.setSelection([r],n):this.select(r,n)},t.prototype.selectParent=function(e,t){void 0===t&&(t=!0);var n=this.getSelection(),i=n.length>0?n[0]:this.input,r=this.getNavigator(i,!1),o=r.parent();o&&(t?this.setSelection([o],e):this.select(o,e))},t.prototype.setFocus=function(e,t){this.setTraits("focused",e?[e]:[]);var n={focus:this.getFocus(),payload:t};this.emit("focus",n)},t.prototype.isFocused=function(e){var t=this.getItem(e);return t?t.hasTrait("focused"):!1},t.prototype.getFocus=function(e){var t=this.getElementsWithTrait("focused",e);return 0===t.length?null:t[0]},t.prototype.focusNext=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,r=this.getNavigator(i,!1),o=0;e>o&&(n=r.next(),n);o++)i=n;this.setFocus(i,t)},t.prototype.focusPrevious=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,r=this.getNavigator(i,!1),o=0;e>o&&(n=r.previous(),n);o++)i=n;this.setFocus(i,t)},t.prototype.focusParent=function(e){var t=this.getFocus()||this.input,n=this.getNavigator(t,!1),i=n.parent();i&&this.setFocus(i,e)},t.prototype.focusFirst=function(e){this.focusNth(0,e)},t.prototype.focusNth=function(e,t){for(var n=this.getNavigator(this.input),i=n.first(),r=0;e>r;r++)i=n.next();i&&this.setFocus(i,t)},t.prototype.focusLast=function(e){var t=this.getNavigator(this.input),n=t.last();n&&this.setFocus(n,e)},t.prototype.getNavigator=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),new p(this.getItem(e),t)},t.prototype.getItem=function(e){return void 0===e&&(e=null),null===e?this.input:e instanceof d?e:"string"==typeof e?this.registry.getItem(e):this.registry.getItem(this.context.dataSource.getId(this.context.tree,e))},t.prototype.addTraits=function(e,t){for(var n,i=this.traitsToItems[e]||{},r=0,o=t.length;o>r;r++)n=this.getItem(t[r]),n&&(n.addTrait(e),i[n.id]=n);this.traitsToItems[e]=i},t.prototype.removeTraits=function(e,t){var n,i,r=this.traitsToItems[e]||{};if(0===t.length){for(i in r)r.hasOwnProperty(i)&&(n=r[i],n.removeTrait(e));delete this.traitsToItems[e]}else for(var o=0,s=t.length;s>o;o++)n=this.getItem(t[o]),n&&(n.removeTrait(e),delete r[n.id])},t.prototype.hasTrait=function(e,t){var n=this.getItem(t);return n&&n.hasTrait(e)},t.prototype.toggleTrait=function(e,t){var n=this.getItem(t);n&&(n.hasTrait(e)?this.removeTraits(e,[t]):this.addTraits(e,[t]))},t.prototype.setTraits=function(e,t){if(0===t.length)this.removeTraits(e,t);else{for(var n,i={},r=0,o=t.length;o>r;r++)n=this.getItem(t[r]),n&&(i[n.id]=n);var s,a=this.traitsToItems[e]||{},c=[];for(s in a)a.hasOwnProperty(s)&&(i.hasOwnProperty(s)?delete i[s]:c.push(a[s]));for(var r=0,o=c.length;o>r;r++)n=c[r],n.removeTrait(e),delete a[n.id];for(s in i)i.hasOwnProperty(s)&&(n=i[s],n.addTrait(e),a[s]=n);this.traitsToItems[e]=a}},t.prototype.getElementsWithTrait=function(e,t){var n,i=[],r=this.traitsToItems[e]||{};for(n in r)r.hasOwnProperty(n)&&(r[n].isVisible()||t)&&i.push(r[n].getElement());return i},t.prototype.dispose=function(){this.registry&&(this.registry.dispose(),this.registry=null),e.prototype.dispose.call(this)},t}(o.EventEmitter);t.TreeModel=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/common/treeViewModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/iterator"],function(e,t,n,i){var r=function(e){function t(){e.call(this),this.heightMap=[],this.indexes={}}return __extends(t,e),t.prototype.getTotalHeight=function(){var e=this.heightMap[this.heightMap.length-1];return e?e.top+e.height:0},t.prototype.onInsertItems=function(e,t){void 0===t&&(t=null);var n,i,r,o,s,a=0;if(null===t)r=0,s=0;else{if(r=this.indexes[t]+1,i=this.heightMap[r-1],!i)throw new Error("Tree error, onInsertItems: viewItem doesn't exist.");s=i.top+i.height}for(var c=this.heightMap.splice.bind(this.heightMap,r,0),u=[];n=e.next();)i=this.createViewItem(n),i.top=s+a,this.emit("viewItem:create",{item:i.model}),this.indexes[n.id]=r++,u.push(i),a+=i.height;for(c.apply(this.heightMap,u),o=r;o<this.heightMap.length;o++)i=this.heightMap[o],i.top+=a,this.indexes[i.model.id]=o;for(o=u.length-1;o>=0;o--)this.onInsertItem(u[o]);for(o=this.heightMap.length-1;o>=r;o--)this.onRefreshItem(this.heightMap[o]);return a},t.prototype.onInsertItem=function(e){},t.prototype.onRemoveItems=function(e){for(var t,n,i,r=null,o=0;t=e.next();){if(i=this.indexes[t],n=this.heightMap[i],!n)throw new Error("Tree error, onRemoveItems: viewItem doesn't exist.");o-=n.height,delete this.indexes[t],this.onRemoveItem(n),null===r&&(r=i)}if(0!==o)for(this.heightMap.splice(r,i-r+1),i=r;i<this.heightMap.length;i++)n=this.heightMap[i],n.top+=o,this.indexes[n.model.id]=i,this.onRefreshItem(n)},t.prototype.onRemoveItem=function(e){},t.prototype.onRefreshItemSet=function(e){var t=this,n=e.sort(function(e,n){return t.indexes[e.id]-t.indexes[n.id]});this.onRefreshItems(new i.ArrayIterator(n))},t.prototype.onRefreshItems=function(e){for(var t,n,i,r,o=null,s=0;t=e.next();){for(r=this.indexes[t.id];0!==s&&null!==o&&r>o;o++)n=this.heightMap[o],n.top+=s,this.onRefreshItem(n);n=this.heightMap[r],i=t.getHeight(),n.top+=s,s+=i-n.height,n.height=i,this.onRefreshItem(n,!0),o=r+1}if(0!==s&&null!==o)for(;o<this.heightMap.length;o++)n=this.heightMap[o],n.top+=s,this.onRefreshItem(n)},t.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1)},t.prototype.itemsCount=function(){return this.heightMap.length},t.prototype.itemAt=function(e){return this.heightMap[this.indexAt(e)].model.id},t.prototype.withItemsInRange=function(e,t,n){e=this.indexAt(e),t=this.indexAt(t);for(var i=e;t>=i;i++)n(this.heightMap[i].model.id)},t.prototype.indexAt=function(e){for(var t,n,i=0,r=this.heightMap.length;r>i;)if(t=Math.floor((i+r)/2),n=this.heightMap[t],e<n.top)r=t;else{if(!(e>=n.top+n.height))return t;if(i===t)break;i=t}return this.heightMap.length},t.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.heightMap.length)},t.prototype.itemAtIndex=function(e){return this.heightMap[e]},t.prototype.itemAfter=function(e){return this.heightMap[this.indexes[e.model.id]+1]||null},t.prototype.createViewItem=function(e){throw new Error("not implemented")},t.prototype.dispose=function(){this.heightMap=null,this.indexes=null},t}(n.EventEmitter);t.HeightMap=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,
new n)};define("vs/base/parts/tree/browser/treeView",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/diff/diff","vs/base/browser/touch","vs/base/browser/mouseEvent","vs/base/browser/keyboardEvent","./treeDnd","vs/base/common/iterator","vs/base/browser/ui/scrollbar/impl/scrollableElement","vs/base/parts/tree/common/treeViewModel","vs/base/parts/tree/common/tree","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){function v(e){var t=e.getAttribute("last-scroll-time");return t?parseInt(t,10):0}function g(e){try{e.parentElement.removeChild(e)}catch(t){}}function y(e,t){return e||t?e&&t?e.accept!==t.accept?!1:e.bubble!==t.bubble?!1:e.effect!==t.effect?!1:!0:!1:!0}var _=function(){function e(e){this.context=e,this._cache={"":[]},this.scrollingRow=null}return e.prototype.alloc=function(e){var t=this.cache(e).pop();if(!t){var n=document.createElement("div");n.className="content";var i=document.createElement("div");i.appendChild(n),t={element:i,templateId:e,templateData:this.context.renderer.renderTemplate(this.context.tree,e,n)}}return t},e.prototype.release=function(e,t){var n=v(t.element);if(!n)return g(t.element),void this.cache(e).push(t);if(this.scrollingRow){var i=v(this.scrollingRow.element);if(i>n)return g(t.element),void this.cache(e).push(t);this.scrollingRow.element.parentElement&&(g(this.scrollingRow.element),o.removeClass(this.scrollingRow.element,"scrolling"),this.cache(this.scrollingRow.templateId).push(this.scrollingRow))}this.scrollingRow=t,o.addClass(this.scrollingRow.element,"scrolling")},e.prototype.cache=function(e){return this._cache[e]||(this._cache[e]=[])},e.prototype.garbageCollect=function(){var e=this;this._cache&&Object.keys(this._cache).forEach(function(t){e._cache[t].forEach(function(n){e.context.renderer.disposeTemplate(e.context.tree,t,n.templateData),n.element=null,n.templateData=null}),delete e._cache[t]}),this.scrollingRow&&(this.context.renderer.disposeTemplate(this.context.tree,this.scrollingRow.templateId,this.scrollingRow.templateData),this.scrollingRow=null)},e.prototype.dispose=function(){this.garbageCollect(),this._cache=null,this.context=null},e}();t.RowCache=_;var b=function(){function e(e,t){var n=this;this.context=e,this.model=t,this.id=this.model.id,this.row=null,this.top=0,this.height=t.getHeight(),this._styles={},t.getAllTraits().forEach(function(e){return n._styles[e]=!0}),t.isExpanded()&&this.addClass("expanded")}return Object.defineProperty(e.prototype,"expanded",{set:function(e){e?this.addClass("expanded"):this.removeClass("expanded")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{set:function(e){e?this.addClass("loading"):this.removeClass("loading")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable=e,this.render(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTarget",{set:function(e){e?this.addClass("drop-target"):this.removeClass("drop-target")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.row&&this.row.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateId",{get:function(){return this._templateId||(this._templateId=this.context.renderer.getTemplateId&&this.context.renderer.getTemplateId(this.context.tree,this.model.getElement()))},enumerable:!0,configurable:!0}),e.prototype.addClass=function(e){this._styles[e]=!0,this.render(!0)},e.prototype.removeClass=function(e){delete this._styles[e],this.render(!0)},e.prototype.render=function(e){var t=this;if(void 0===e&&(e=!1),this.model&&this.element){var n=["monaco-tree-row"];n.push.apply(n,Object.keys(this._styles)),this.model.hasChildren()&&n.push("has-children"),this.element.className=n.join(" "),this.element.draggable=this.draggable,this.element.style.height=this.height+"px",this.context.options.paddingOnRow?this.element.style.paddingLeft=this.context.options.twistiePixels+(this.model.getDepth()-1)*this.context.options.indentPixels+"px":(this.element.style.paddingLeft=(this.model.getDepth()-1)*this.context.options.indentPixels+"px",this.row.element.firstElementChild.style.paddingLeft=this.context.options.twistiePixels+"px");var i=this.context.dnd.getDragURI(this.context.tree,this.model.getElement());i!==this.uri&&(this.unbindDragStart&&(this.unbindDragStart(),delete this.unbindDragStart),i?(this.uri=i,this.draggable=!0,this.unbindDragStart=o.addListener(this.element,"dragstart",function(e){t.onDragStart(e)})):this.uri=null),e||this.context.renderer.renderElement(this.context.tree,this.model.getElement(),this.templateId,this.row.templateData)}},e.prototype.insertInDOM=function(e,t){this.row||(this.row=this.context.cache.alloc(this.templateId),this.element[S.BINDING]=this),this.element.parentElement||(null===t?e.appendChild(this.element):e.insertBefore(this.element,t),this.render())},e.prototype.removeFromDOM=function(){this.row&&(this.unbindDragStart&&(this.unbindDragStart(),this.unbindDragStart=null),this.uri=null,this.element[S.BINDING]=null,this.context.cache.release(this.templateId,this.row),this.row=null)},e.prototype.dispose=function(){this.row=null,this.model=null},e}();t.ViewItem=b;var E=function(e){function t(t,n,i){e.call(this,t,n),this.row={element:i,templateData:null,templateId:null}}return __extends(t,e),t.prototype.render=function(){if(this.model&&this.element){var e=["monaco-tree-wrapper"];e.push.apply(e,Object.keys(this._styles)),this.model.hasChildren()&&e.push("has-children"),this.element.className=e.join(" ")}},t.prototype.insertInDOM=function(e,t){},t.prototype.removeFromDOM=function(){},t}(b),S=function(e){function t(t,n){var r=this;e.call(this),this.lastClickTimeStamp=0,this.isRefreshing=!1,this.refreshingPreviousChildrenIds={},this.context={dataSource:t.dataSource,renderer:t.renderer,controller:t.controller,dnd:t.dnd,filter:t.filter,sorter:t.sorter,tree:t.tree,options:t.options,cache:new _(t)},this.modelListeners=[],this.viewListeners=[],this.dragAndDropListeners=[],this.model=null,this.items={},this.domNode=document.createElement("div"),this.domNode.className="monaco-tree",this.domNode.tabIndex=0,this.context.options.alwaysFocused&&o.addClass(this.domNode,"focused"),this.context.options.bare&&o.addClass(this.domNode,"bare"),this.context.options.paddingOnRow||o.addClass(this.domNode,"no-row-padding"),this.wrapper=document.createElement("div"),this.wrapper.className="monaco-tree-wrapper",this.scrollableElement=new h.ScrollableElement(this.wrapper,{forbidTranslate3dUse:!0,scrollable:this,horizontal:"hidden",vertical:t.options.verticalScrollMode||"auto",useShadows:t.options.useShadows,saveLastScrollTimeOnClassName:"monaco-tree-row"}),i.isIE11orEarlier?(this.wrapper.style.msTouchAction="none",this.wrapper.style.msContentZooming="none"):this.wrapperGesture=new a.Gesture(this.wrapper),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-tree-rows",this.fakeRow=document.createElement("div"),this.fakeRow.className="monaco-tree-row fake",this.fakeContent=document.createElement("div"),this.fakeContent.className="content",this.fakeRow.appendChild(this.fakeContent),this.rowsContainer.appendChild(this.fakeRow);var s=o.trackFocus(this.domNode);s.addFocusListener(function(e){return r.onFocus(e)}),s.addBlurListener(function(e){return r.onBlur(e)}),this.viewListeners.push(function(){s.dispose()}),this.viewListeners.push(o.addListener(this.domNode,"keydown",function(e){return r.onKeyDown(e)})),this.viewListeners.push(o.addListener(this.domNode,"keyup",function(e){return r.onKeyUp(e)})),this.viewListeners.push(o.addListener(this.domNode,"mousedown",function(e){return r.onMouseDown(e)})),this.viewListeners.push(o.addListener(this.domNode,"mouseup",function(e){return r.onMouseUp(e)})),this.viewListeners.push(o.addListener(this.wrapper,"click",function(e){return r.onClick(e)})),this.viewListeners.push(o.addListener(this.domNode,"contextmenu",function(e){return r.onContextMenu(e)})),this.viewListeners.push(o.addListener(this.wrapper,a.EventType.Tap,function(e){return r.onTap(e)})),this.viewListeners.push(o.addListener(this.wrapper,a.EventType.Change,function(e){return r.onTouchChange(e)})),i.isIE11orEarlier&&(this.viewListeners.push(o.addListener(this.wrapper,"MSPointerDown",function(e){return r.onMsPointerDown(e)})),this.viewListeners.push(o.addListener(this.wrapper,"MSGestureTap",function(e){return r.onMsGestureTap(e)})),this.viewListeners.push(o.addThrottledListener(this.wrapper,"MSGestureChange",function(e){return r.onThrottledMsGestureChange(e)},function(e,t){t.stopPropagation(),t.preventDefault();var n={translationY:t.translationY,translationX:t.translationX};return e&&(n.translationY+=e.translationY,n.translationX+=e.translationX),n}))),this.viewListeners.push(o.addListener(window,"dragover",function(e){return r.onDragOver(e)})),this.viewListeners.push(o.addListener(window,"drop",function(e){return r.onDrop(e)})),this.viewListeners.push(o.addListener(window,"dragend",function(e){return r.onDragEnd(e)})),this.viewListeners.push(o.addListener(window,"dragleave",function(e){return r.onDragOver(e)})),this.wrapper.appendChild(this.rowsContainer),this.domNode.appendChild(this.scrollableElement.getDomNode()),n.appendChild(this.domNode),this._scrollTop=0,this._viewHeight=0,this.renderTop=0,this.renderHeight=0,this.didJustPressContextMenuKey=!1,this.currentDropTarget=null,this.currentDropTargets=[],this.shouldInvalidateDropReaction=!1,this.dragAndDropScrollInterval=null,this.dragAndDropScrollTimeout=null,this.onHiddenScrollTop=null,this.onRowsChanged(),this.layout(),this.setupMSGesture()}return __extends(t,e),t.prototype.createViewItem=function(e){return new b(this.context,e)},t.prototype.getHTMLElement=function(){return this.domNode},t.prototype.focus=function(){this.domNode.focus()},t.prototype.isFocused=function(){return document.activeElement===this.domNode},t.prototype.blur=function(){this.domNode.blur()},t.prototype.onVisible=function(){this.scrollTop=this.onHiddenScrollTop,this.onHiddenScrollTop=null,this.scrollableElement.onElementDimensions(),this.scrollableElement.onElementInternalDimensions(),this.setupMSGesture()},t.prototype.setupMSGesture=function(){var e=this;window.MSGesture&&(this.msGesture=new MSGesture,setTimeout(function(){return e.msGesture.target=e.wrapper},100))},t.prototype.onHidden=function(){this.onHiddenScrollTop=this.scrollTop},t.prototype.isTreeVisible=function(){return null===this.onHiddenScrollTop},t.prototype.layout=function(e){this.isTreeVisible()&&(this.viewHeight=e||o.getContentHeight(this.wrapper),this.scrollTop=this.scrollTop,this.scrollableElement.onElementDimensions(),this.scrollableElement.onElementInternalDimensions())},t.prototype.render=function(e,t){var n,i,r=e+t,o=this.scrollTop+this.viewHeight,s=e;s=Math.max(s,0);var a=r,c=0===o?0:o;for(n=this.indexAfter(a)-1,i=this.indexAt(Math.max(c,s));n>=i;n--)this.insertItemInDOM(this.itemAtIndex(n));for(n=Math.min(this.indexAt(this.renderTop),this.indexAfter(a))-1,i=this.indexAt(s);n>=i;n--)this.insertItemInDOM(this.itemAtIndex(n));for(n=this.indexAt(this.renderTop),i=Math.min(this.indexAt(s),this.indexAfter(c));i>n;n++)this.removeItemFromDOM(this.itemAtIndex(n));for(n=Math.max(this.indexAfter(a),this.indexAt(this.renderTop)),i=this.indexAfter(c);i>n;n++)this.removeItemFromDOM(this.itemAtIndex(n));var u=this.itemAtIndex(this.indexAt(s));u&&(this.rowsContainer.style.top=u.top-s+"px"),this.renderTop=s,this.renderHeight=a-s},t.prototype.setModel=function(e){var t=this;this.releaseModel(),this.model=e,this.modelListeners.push(this.model.addBulkListener(function(e){return t.onModelEvents(e)}))},t.prototype.onModelEvents=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n],o=r.getData();switch(r.getType()){case"refreshing":this.onRefreshing();break;case"refreshed":this.onRefreshed();break;case"clearingInput":this.onClearingInput(o);break;case"setInput":this.onSetInput(o);break;case"item:childrenRefreshing":this.onItemChildrenRefreshing(o);break;case"item:childrenRefreshed":this.onItemChildrenRefreshed(o);break;case"item:refresh":t.push(o.item);break;case"item:expanding":this.onItemExpanding(o);break;case"item:expanded":this.onItemExpanded(o);break;case"item:collapsing":this.onItemCollapsing(o);break;case"item:reveal":this.onItemReveal(o);break;case"item:addTrait":this.onItemAddTrait(o);break;case"item:removeTrait":this.onItemRemoveTrait(o)}}t.length>0&&this.onItemsRefresh(t)},t.prototype.onRefreshing=function(){this.isRefreshing=!0},t.prototype.onRefreshed=function(){this.isRefreshing=!1,this.onRowsChanged()},t.prototype.onRowsChanged=function(e){void 0===e&&(e=this.scrollTop),this.isRefreshing||(this.scrollTop=e,this.scrollableElement.onElementInternalDimensions())},t.prototype.withFakeRow=function(e){return e(this.fakeContent)},t.prototype.focusNextPage=function(e){var t=this,n=this.indexAt(this.scrollTop+this.viewHeight);n=0===n?0:n-1;var i=this.itemAtIndex(n).model.getElement(),r=this.model.getFocus();if(r!==i)this.model.setFocus(i,e);else{var o=this.scrollTop;this.scrollTop+=this.viewHeight,this.scrollTop!==o&&setTimeout(function(){t.focusNextPage(e)},0)}},t.prototype.focusPreviousPage=function(e){var t,n=this;t=0===this.scrollTop?this.indexAt(this.scrollTop):this.indexAfter(this.scrollTop-1);var i=this.itemAtIndex(t).model.getElement(),r=this.model.getFocus();if(r!==i)this.model.setFocus(i,e);else{var o=this.scrollTop;this.scrollTop-=this.viewHeight,this.scrollTop!==o&&setTimeout(function(){n.focusPreviousPage(e)},0)}},Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(e){this.render(this.scrollTop,e),this._viewHeight=e},enumerable:!0,configurable:!0}),t.prototype.getScrollHeight=function(){return this.getTotalHeight()},t.prototype.getScrollWidth=function(){return 0},t.prototype.getScrollLeft=function(){return 0},t.prototype.setScrollLeft=function(e){},Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this._scrollTop},set:function(e){this.setScrollTop(e)},enumerable:!0,configurable:!0}),t.prototype.getScrollTop=function(){return this._scrollTop},t.prototype.setScrollTop=function(e){e=Math.min(e,this.getTotalHeight()-this.viewHeight),e=Math.max(e,0),this.render(e,this.viewHeight),this._scrollTop=e,this.emit("scroll",{vertical:!0,horizontal:!1})},t.prototype.addScrollListener=function(e){return this.addListener2("scroll",e)},t.prototype.getScrollPosition=function(){var e=this.getTotalHeight()-this.viewHeight;return 0>=e?0:this.scrollTop/e},t.prototype.setScrollPosition=function(e){var t=this.getTotalHeight()-this.viewHeight;this.scrollTop=t*e},t.prototype.onClearingInput=function(e){var t=e.item;t&&(this.onRemoveItems(new d.MappedIterator(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onSetInput=function(e){this.context.cache.garbageCollect(),this.inputItem=new E(this.context,e.item,this.wrapper),this.emit("viewItem:create",{item:this.inputItem.model})},t.prototype.onItemChildrenRefreshing=function(e){var n=e.item,i=this.items[n.id];if(i&&(i.loadingPromise=r.Promise.timeout(t.LOADING_DECORATION_DELAY).then(function(){i.loadingPromise=null,i.loading=!0})),!e.isNested){for(var o,s=[],a=n.getNavigator();o=a.next();)s.push(o.id);this.refreshingPreviousChildrenIds[n.id]=s}},t.prototype.onItemChildrenRefreshed=function(e){var t=this,n=e.item,i=this.items[n.id];if(i&&(i.loadingPromise&&(i.loadingPromise.cancel(),i.loadingPromise=null),i.loading=!1),!e.isNested){for(var r,o=this.refreshingPreviousChildrenIds[n.id],a=[],c=n.getNavigator();r=c.next();)a.push(r);var u=new s.LcsDiff({getLength:function(){return o.length},getElementHash:function(e){return o[e]}},{getLength:function(){return a.length},getElementHash:function(e){return a[e].id}},null),l=u.ComputeDiff(),h=l.some(function(e){if(e.modifiedLength>0)for(var n=e.modifiedStart,i=e.modifiedStart+e.modifiedLength;i>n;n++)if(t.items.hasOwnProperty(a[n].id))return!0;return!1});if(h)l.length&&(this.onRemoveItems(new d.ArrayIterator(o)),this.onInsertItems(new d.ArrayIterator(a)));else for(var p=0,f=l.length;f>p;p++){var m=l[p];if(m.originalLength>0&&this.onRemoveItems(new d.ArrayIterator(o,m.originalStart,m.originalStart+m.originalLength)),m.modifiedLength>0){var v=a[m.modifiedStart-1]||n;v=v.getDepth()>0?v:null,this.onInsertItems(new d.ArrayIterator(a,m.modifiedStart,m.modifiedStart+m.modifiedLength),v?v.id:null)}}l.length&&this.onRowsChanged()}},t.prototype.onItemsRefresh=function(e){var t=this;this.onRefreshItemSet(e.filter(function(e){return t.items.hasOwnProperty(e.id)})),this.onRowsChanged()},t.prototype.onItemExpanding=function(e){var t=this.items[e.item.id];t&&(t.expanded=!0)},t.prototype.onItemExpanded=function(e){var t=e.item,n=this.items[t.id];if(n){n.expanded=!0;var i=this.onInsertItems(t.getNavigator(),t.id),r=this.scrollTop;n.top+n.height<=this.scrollTop&&(r+=i),this.onRowsChanged(r)}},t.prototype.onItemCollapsing=function(e){var t=e.item,n=this.items[t.id];n&&(n.expanded=!1,this.onRemoveItems(new d.MappedIterator(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onItemReveal=function(e){var t=e.item,n=e.relativeTop,i=this.items[t.id];if(i)if(null!==n){n=0>n?0:n,n=n>1?1:n;var r=i.height-this.viewHeight;this.scrollTop=r*n+i.top}else{var o=i.top+i.height,s=this.scrollTop+this.viewHeight;i.top<this.scrollTop?this.scrollTop=i.top:o>=s&&(this.scrollTop=o-this.viewHeight)}},t.prototype.onItemAddTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.addClass(n),"highlighted"===n&&(o.addClass(this.domNode,n),i&&(this.highlightedItemWasDraggable=!!i.draggable,i.draggable&&(i.draggable=!1)))},t.prototype.onItemRemoveTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.removeClass(n),"highlighted"===n&&(o.removeClass(this.domNode,n),this.highlightedItemWasDraggable&&(i.draggable=!0),delete this.highlightedItemWasDraggable)},t.prototype.onInsertItem=function(e){var t=this;e.onDragStart=function(n){t.onDragStart(e,n)},e.needsRender=!0,this.refreshViewItem(e),this.items[e.id]=e},t.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1),e.needsRender=e.needsRender||t,this.refreshViewItem(e)},t.prototype.onRemoveItem=function(e){this.removeItemFromDOM(e),e.dispose(),this.emit("viewItem:dispose",{item:this.inputItem.model}),delete this.items[e.id]},t.prototype.refreshViewItem=function(e){e.render(),this.shouldBeRendered(e)?this.insertItemInDOM(e):this.removeItemFromDOM(e)},t.prototype.onClick=function(e){if(!this.lastPointerType||"mouse"===this.lastPointerType){var t=new c.StandardMouseEvent(e),n=this.getItemAround(t.target);n&&(i.isIE10orLater&&Date.now()-this.lastClickTimeStamp<300&&(t.detail=2),this.lastClickTimeStamp=Date.now(),this.context.controller.onClick(this.context.tree,n.model.getElement(),t))}},t.prototype.onMouseDown=function(e){if(this.didJustPressContextMenuKey=!1,this.context.controller.onMouseDown&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new c.StandardMouseEvent(e);if(!(t.ctrlKey&&n.isNative&&n.isMacintosh)){var i=this.getItemAround(t.target);i&&this.context.controller.onMouseDown(this.context.tree,i.model.getElement(),t)}}},t.prototype.onMouseUp=function(e){if(this.context.controller.onMouseUp&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new c.StandardMouseEvent(e);if(!(t.ctrlKey&&n.isNative&&n.isMacintosh)){var i=this.getItemAround(t.target);i&&this.context.controller.onMouseUp(this.context.tree,i.model.getElement(),t)}}},t.prototype.onTap=function(e){var t=this.getItemAround(e.initialTarget);t&&this.context.controller.onTap(this.context.tree,t.model.getElement(),e)},t.prototype.onTouchChange=function(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY},t.prototype.onContextMenu=function(e){var t,n;if(e instanceof KeyboardEvent||this.didJustPressContextMenuKey){this.didJustPressContextMenuKey=!1;var i=new u.StandardKeyboardEvent(e);if(n=this.model.getFocus(),!n)return;var r=this.context.dataSource.getId(this.context.tree,n),s=this.items[r],a=o.getDomNodePosition(s.element);t=new f.KeyboardContextMenuEvent(a.left+a.width,a.top,i)}else{var l=new c.StandardMouseEvent(e),d=this.getItemAround(l.target);if(!d)return;n=d.model.getElement(),t=new f.MouseContextMenuEvent(l)}this.context.controller.onContextMenu(this.context.tree,n,t)},t.prototype.onKeyDown=function(e){var t=new u.StandardKeyboardEvent(e);this.didJustPressContextMenuKey=t.keyCode===m.KeyCode.ContextMenu||t.shiftKey&&t.keyCode===m.KeyCode.F10,this.didJustPressContextMenuKey&&(t.preventDefault(),t.stopPropagation()),t.target&&t.target.tagName&&"input"===t.target.tagName.toLowerCase()||this.context.controller.onKeyDown(this.context.tree,t)},t.prototype.onKeyUp=function(e){this.didJustPressContextMenuKey&&this.onContextMenu(e),this.didJustPressContextMenuKey=!1,this.context.controller.onKeyUp(this.context.tree,new u.StandardKeyboardEvent(e))},t.prototype.onDragStart=function(e,n){if(!this.model.getHighlight()){var i,r=e.model.getElement(),o=this.model.getSelection();if(i=o.indexOf(r)>-1?o:[r],n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData("URL",e.uri),n.dataTransfer.setDragImage)if(1===i.length&&e.element)n.dataTransfer.setDragImage(e.element,n.offsetX||6,n.offsetY||6);else if(i.length>1){var s=document.createElement("div");s.className="monaco-tree-drag-image",s.textContent=""+i.length,document.body.appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(function(){return document.body.removeChild(s)},0)}this.currentDragAndDropData=new l.ElementsDragAndDropData(i),t.currentExternalDragAndDropData=new l.ExternalElementsDragAndDropData(i),this.context.dnd.onDragStart(this.context.tree,this.currentDragAndDropData,new c.DragMouseEvent(n))}},t.prototype.setupDragAndDropScrollInterval=function(){var e=this,t=o.getTopLeftOffset(this.wrapper).top;this.dragAndDropScrollInterval||(this.dragAndDropScrollInterval=window.setInterval(function(){if(void 0!==e.dragAndDropMouseY){var n=e.dragAndDropMouseY-t,i=0,r=e.viewHeight-35;35>n?i=Math.max(-14,.2*(n-35)):n>r&&(i=Math.min(14,.2*(n-r))),e.scrollTop+=i}},10),this.cancelDragAndDropScrollTimeout(),this.dragAndDropScrollTimeout=window.setTimeout(function(){e.cancelDragAndDropScrollInterval(),e.dragAndDropScrollTimeout=null},1e3))},t.prototype.cancelDragAndDropScrollInterval=function(){this.dragAndDropScrollInterval&&(window.clearInterval(this.dragAndDropScrollInterval),this.dragAndDropScrollInterval=null),this.cancelDragAndDropScrollTimeout()},t.prototype.cancelDragAndDropScrollTimeout=function(){this.dragAndDropScrollTimeout&&(window.clearTimeout(this.dragAndDropScrollTimeout),this.dragAndDropScrollTimeout=null)},t.prototype.onDragOver=function(e){var n=this,i=new c.DragMouseEvent(e),o=this.getItemAround(i.target);if(!o)return this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null)),this.cancelDragAndDropScrollInterval(),delete this.currentDropTarget,delete this.currentDropElement,delete this.dragAndDropMouseY,!1;if(this.setupDragAndDropScrollInterval(),this.dragAndDropMouseY=i.posy,!this.currentDragAndDropData)if(t.currentExternalDragAndDropData)this.currentDragAndDropData=t.currentExternalDragAndDropData;else{if(!i.dataTransfer.types)return!1;this.currentDragAndDropData=new l.DesktopDragAndDropData}this.currentDragAndDropData.update(i);var s,a,u=o.model;do{if(s=u?u.getElement():this.model.getInput(),a=this.context.dnd.onDragOver(this.context.tree,this.currentDragAndDropData,s,i),!a||a.bubble!==f.DragOverBubble.BUBBLE_UP)break;u=u&&u.parent}while(u);if(!u)return delete this.currentDropElement,!1;var d=a&&a.accept;d?(this.currentDropElement=u.getElement(),i.preventDefault(),i.dataTransfer.dropEffect=a.effect===f.DragOverEffect.COPY?"copy":"move"):delete this.currentDropElement;var h=u.id===this.inputItem.id?this.inputItem:this.items[u.id];if((this.shouldInvalidateDropReaction||this.currentDropTarget!==h||!y(this.currentDropElementReaction,a))&&(this.shouldInvalidateDropReaction=!1,this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null)),this.currentDropTarget=h,this.currentDropElementReaction=a,d)){if(this.currentDropTarget&&(this.currentDropTarget.dropTarget=!0,this.currentDropTargets.push(this.currentDropTarget)),a.bubble===f.DragOverBubble.BUBBLE_DOWN)for(var p,m=u.getNavigator();p=m.next();)o=this.items[p.id],o&&(o.dropTarget=!0,this.currentDropTargets.push(o));this.currentDropPromise=r.Promise.timeout(500).then(function(){return n.context.tree.expand(n.currentDropElement).then(function(){n.shouldInvalidateDropReaction=!0})})}return!0},t.prototype.onDrop=function(e){if(this.currentDropElement){var t=new c.DragMouseEvent(e);t.preventDefault(),this.currentDragAndDropData.update(t),this.context.dnd.drop(this.context.tree,this.currentDragAndDropData,this.currentDropElement,t),this.onDragEnd(e)}this.cancelDragAndDropScrollInterval()},t.prototype.onDragEnd=function(e){this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[]),this.currentDropPromise&&(this.currentDropPromise.cancel(),this.currentDropPromise=null),this.cancelDragAndDropScrollInterval(),delete this.currentDragAndDropData,t.currentExternalDragAndDropData=null,delete this.currentDropElement,delete this.currentDropTarget,delete this.dragAndDropMouseY},t.prototype.onFocus=function(e){this.context.options.alwaysFocused||o.addClass(this.domNode,"focused")},t.prototype.onBlur=function(e){this.context.options.alwaysFocused||o.removeClass(this.domNode,"focused")},t.prototype.onMsPointerDown=function(e){if(this.msGesture){var t=e.pointerType;return t===(e.MSPOINTER_TYPE_MOUSE||"mouse")?void(this.lastPointerType="mouse"):void(t===(e.MSPOINTER_TYPE_TOUCH||"touch")&&(this.lastPointerType="touch",e.stopPropagation(),e.preventDefault(),this.msGesture.addPointer(e.pointerId)))}},t.prototype.onThrottledMsGestureChange=function(e){this.scrollTop-=e.translationY},t.prototype.onMsGestureTap=function(e){e.initialTarget=document.elementFromPoint(e.clientX,e.clientY),this.onTap(e)},t.prototype.insertItemInDOM=function(e){var t=null,n=this.itemAfter(e);n&&n.element&&(t=n.element),e.insertInDOM(this.rowsContainer,t)},t.prototype.removeItemFromDOM=function(e){e.removeFromDOM()},t.prototype.shouldBeRendered=function(e){return e.top<this.renderTop+this.renderHeight&&e.top+e.height>this.renderTop},t.prototype.getItemAround=function(e){var n=this.inputItem;do{if(e[t.BINDING]&&(n=e[t.BINDING]),e===this.wrapper||e===this.domNode)return n;if(e===document.body)return null}while(e=e.parentElement)},t.prototype.releaseModel=function(){if(this.model){for(;this.modelListeners.length;)this.modelListeners.pop()();this.model=null}},t.prototype.dispose=function(){for(this.scrollableElement.dispose(),this.releaseModel(),this.modelListeners=null;this.viewListeners.length;)this.viewListeners.pop()();this.viewListeners=null,this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.domNode=null,this.wrapperGesture&&(this.wrapperGesture.dispose(),this.wrapperGesture=null),this.context.cache&&(this.context.cache.dispose(),this.context.cache=null),e.prototype.dispose.call(this)},t.BINDING="monaco-tree-row",t.LOADING_DECORATION_DELAY=800,t.currentExternalDragAndDropData=null,t}(p.HeightMap);t.TreeView=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/tree/browser/treeImpl",["require","exports","vs/base/parts/tree/browser/treeDefaults","vs/base/common/eventEmitter","vs/base/parts/tree/common/treeModel","./treeView","vs/base/common/iterator","vs/css!./tree"],function(e,t,n,i,r,o,s){var a=function(){function e(e,t,i){if(void 0===i&&(i={}),this.tree=e,this.configuration=t,this.options=i,!t.dataSource)throw new Error("You must provide a Data Source to the tree.");this.dataSource=t.dataSource,this.renderer=t.renderer||new n.LegacyRenderer,this.controller=t.controller||new n.DefaultController,this.dnd=t.dnd||new n.DefaultDragAndDrop,this.filter=t.filter||new n.DefaultFilter,this.sorter=t.sorter||null}return e}();t.TreeContext=a;var c=function(e){function t(t,n,i){void 0===i&&(i={}),e.call(this),this.container=t,this.configuration=n,this.options=i,this.options.twistiePixels="number"==typeof this.options.twistiePixels?this.options.twistiePixels:32,this.options.indentPixels="number"==typeof this.options.indentPixels?this.options.indentPixels:12,this.options.alwaysFocused=this.options.alwaysFocused===!0?!0:!1,this.options.bare=this.options.bare===!0?!0:!1,this.options.useShadows=this.options.useShadows===!1?!1:!0,this.options.paddingOnRow=this.options.paddingOnRow===!1?!1:!0,this.context=new a(this,n,i),this.model=new r.TreeModel(this.context),this.view=new o.TreeView(this.context,this.container),this.view.setModel(this.model),this.addEmitter(this.model),this.addEmitter(this.view)}return __extends(t,e),t.prototype.getHTMLElement=function(){return this.view.getHTMLElement()},t.prototype.layout=function(e){this.view.layout(e)},t.prototype.DOMFocus=function(){this.view.focus()},t.prototype.isDOMFocused=function(){return this.view.isFocused()},t.prototype.DOMBlur=function(){this.view.blur()},t.prototype.onVisible=function(){this.view.onVisible()},t.prototype.onHidden=function(){this.view.onHidden()},t.prototype.setInput=function(e){return this.model.setInput(e)},t.prototype.getInput=function(){return this.model.getInput()},t.prototype.refresh=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),this.model.refresh(e,t)},t.prototype.refreshAll=function(e,t){return void 0===t&&(t=!0),this.model.refreshAll(e,t)},t.prototype.expand=function(e){return this.model.expand(e)},t.prototype.expandAll=function(e){return this.model.expandAll(e)},t.prototype.collapse=function(e,t){return void 0===t&&(t=!1),this.model.collapse(e)},t.prototype.collapseAll=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.model.collapseAll(e,t)},t.prototype.toggleExpansion=function(e){return this.model.toggleExpansion(e)},t.prototype.toggleExpansionAll=function(e){return this.model.toggleExpansionAll(e)},t.prototype.isExpanded=function(e){return this.model.isExpanded(e)},t.prototype.getExpandedElements=function(){return this.model.getExpandedElements()},t.prototype.reveal=function(e,t){return void 0===t&&(t=null),this.model.reveal(e,t)},t.prototype.getScrollPosition=function(){return this.view.getScrollPosition()},t.prototype.setScrollPosition=function(e){this.view.setScrollPosition(e)},t.prototype.getContentHeight=function(){return this.view.getTotalHeight()},t.prototype.setHighlight=function(e,t){this.model.setHighlight(e,t)},t.prototype.getHighlight=function(){return this.model.getHighlight()},t.prototype.isHighlighted=function(e){return this.model.isFocused(e)},t.prototype.clearHighlight=function(e){this.model.setHighlight(null,e)},t.prototype.select=function(e,t){this.model.select(e,t)},t.prototype.selectRange=function(e,t,n){this.model.selectRange(e,t,n)},t.prototype.deselectRange=function(e,t,n){this.model.deselectRange(e,t,n)},t.prototype.selectAll=function(e,t){this.model.selectAll(e,t)},t.prototype.deselect=function(e,t){this.model.deselect(e,t)},t.prototype.deselectAll=function(e,t){this.model.deselectAll(e,t)},t.prototype.setSelection=function(e,t){this.model.setSelection(e,t)},t.prototype.toggleSelection=function(e,t){this.model.toggleSelection(e,t)},t.prototype.isSelected=function(e){return this.model.isSelected(e)},t.prototype.getSelection=function(){return this.model.getSelection();
},t.prototype.clearSelection=function(e){this.model.setSelection([],e)},t.prototype.selectNext=function(e,t,n){this.model.selectNext(e,t,n)},t.prototype.selectPrevious=function(e,t,n){this.model.selectPrevious(e,t,n)},t.prototype.selectParent=function(e,t){this.model.selectParent(e,t)},t.prototype.setFocus=function(e,t){this.model.setFocus(e,t)},t.prototype.isFocused=function(e){return this.model.isFocused(e)},t.prototype.getFocus=function(){return this.model.getFocus()},t.prototype.focusNext=function(e,t){this.model.focusNext(e,t)},t.prototype.focusPrevious=function(e,t){this.model.focusPrevious(e,t)},t.prototype.focusParent=function(e){this.model.focusParent(e)},t.prototype.focusFirst=function(e){this.model.focusFirst(e)},t.prototype.focusNth=function(e,t){this.model.focusNth(e,t)},t.prototype.focusLast=function(e){this.model.focusLast(e)},t.prototype.focusNextPage=function(e){this.view.focusNextPage(e)},t.prototype.focusPreviousPage=function(e){this.view.focusPreviousPage(e)},t.prototype.clearFocus=function(e){this.model.setFocus(null,e)},t.prototype.addTraits=function(e,t){this.model.addTraits(e,t)},t.prototype.removeTraits=function(e,t){this.model.removeTraits(e,t)},t.prototype.toggleTrait=function(e,t){this.model.hasTrait(e,t)?this.model.removeTraits(e,[t]):this.model.addTraits(e,[t])},t.prototype.hasTrait=function(e,t){return this.model.hasTrait(e,t)},t.prototype.withFakeRow=function(e){return this.view.withFakeRow(e)},t.prototype.getNavigator=function(){return new s.MappedNavigator(this.model.getNavigator(),function(e){return e&&e.getElement()})},t.prototype.dispose=function(){null!==this.model&&(this.model.dispose(),this.model=null),null!==this.view&&(this.view.dispose(),this.view=null),e.prototype.dispose.call(this)},t}(i.EventEmitter);t.Tree=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/parts/quickopen/browser/quickOpenWidget",["require","exports","vs/base/common/winjs.base","vs/base/common/platform","vs/base/browser/browser","vs/base/common/events","vs/base/common/types","vs/base/common/errors","vs/base/common/uuid","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenViewer","vs/base/browser/builder","vs/base/browser/ui/inputbox/inputBox","vs/base/parts/tree/browser/treeImpl","vs/base/browser/ui/progressbar/progressbar","vs/base/browser/keyboardEvent","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/dom","vs/base/common/keyCodes","vs/css!./quickopen"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){var _=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onContextMenu=function(t,n,r){return i.isMacintosh?this.onLeftClick(t,n,r):e.prototype.onContextMenu.call(this,t,n,r)},t}(v.DefaultController);t.QuickOpenController=_;var b=function(){function e(e,t,n,i){this.toUnbind=[],this.container=e,this.callbacks=t,this.options=n,this.usageLogger=i,this.model=null}return e.prototype.getModel=function(){return this.model},e.prototype.setCallbacks=function(e){this.callbacks=e},e.prototype.create=function(){var e=this;this.builder=d.$().div(function(t){t.on(g.EventType.KEY_DOWN,function(t){var n=new m.StandardKeyboardEvent(t);n.keyCode===y.KeyCode.Escape&&(g.EventHelper.stop(t,!0),e.hide(!0))}).on(g.EventType.CONTEXT_MENU,function(e){return g.EventHelper.stop(e,!0)}).on(g.EventType.FOCUS,function(t){return e.gainingFocus()},null,!0).on(g.EventType.BLUR,function(t){return e.loosingFocus(t)},null,!0),e.progressBar=new f.ProgressBar(t.clone()),e.progressBar.getContainer().hide(),t.div({"class":"quick-open-input"},function(t){e.inputContainer=t,e.inputBox=new h.InputBox(t.getHTMLElement(),null,{placeholder:e.options.inputPlaceHolder||"",ariaLabel:e.options.inputAriaLabel}),g.addDisposableListener(e.inputBox.inputElement,g.EventType.KEY_DOWN,function(t){var n=new m.StandardKeyboardEvent(t);if(n.keyCode===y.KeyCode.Tab||n.keyCode===y.KeyCode.DownArrow||n.keyCode===y.KeyCode.UpArrow||n.keyCode===y.KeyCode.PageDown||n.keyCode===y.KeyCode.PageUp)g.EventHelper.stop(t,!0),e.navigateInTree(n.keyCode,n.shiftKey);else if(n.keyCode===y.KeyCode.Enter){g.EventHelper.stop(t,!0);var i=e.tree.getFocus();i&&e.elementSelected(i,t)}else!r.isIE9||n.keyCode!==y.KeyCode.Backspace&&n.keyCode!==y.KeyCode.Delete||e.onType()}),g.addDisposableListener(e.inputBox.inputElement,g.EventType.INPUT,function(t){e.onType()})}),e.treeContainer=t.div({"class":"quick-open-tree"},function(t){e.tree=new p.Tree(t.getHTMLElement(),{dataSource:new l.DataSource(e),controller:new _({clickBehavior:v.ClickBehavior.ON_MOUSE_UP}),renderer:new l.Renderer(e),filter:new l.Filter(e)},{twistiePixels:11,indentPixels:0,alwaysFocused:!0,verticalScrollMode:"visible"}),e.toUnbind.push(e.tree.addListener(o.EventType.FOCUS,function(t){e.elementFocused(t.focus,t)})),e.toUnbind.push(e.tree.addListener(o.EventType.SELECTION,function(t){t.selection&&t.selection.length>0&&e.elementSelected(t.selection[0],t)}))}).on(g.EventType.KEY_DOWN,function(t){var n=new m.StandardKeyboardEvent(t);e.quickNavigateConfiguration&&(n.keyCode===y.KeyCode.DownArrow||n.keyCode===y.KeyCode.UpArrow||n.keyCode===y.KeyCode.PageDown||n.keyCode===y.KeyCode.PageUp)&&(g.EventHelper.stop(t,!0),e.navigateInTree(n.keyCode))}).on(g.EventType.KEY_UP,function(t){var n=new m.StandardKeyboardEvent(t),r=n.keyCode;if(e.quickNavigateConfiguration){var o=e.quickNavigateConfiguration.keybindings,s=r===y.KeyCode.Enter||o.some(function(e){if(e.hasShift()&&r===y.KeyCode.Shift)return n.ctrlKey||n.altKey||n.metaKey?!1:!0;if(e.hasAlt()&&r===y.KeyCode.Alt)return!0;if(i.isMacintosh){if(e.hasCtrlCmd()&&r===y.KeyCode.Meta)return!0;if(e.hasWinCtrl()&&r===y.KeyCode.Ctrl)return!0}else{if(e.hasCtrlCmd()&&r===y.KeyCode.Ctrl)return!0;if(e.hasWinCtrl()&&r===y.KeyCode.Meta)return!0}return!1});if(s){var a=e.tree.getFocus();a&&e.elementSelected(a,t)}}}).clone()}).addClass("quick-open-widget").addClass(r.isIE10orEarlier?" no-shadow":"").build(this.container),this.layoutDimensions&&this.layout(this.layoutDimensions)},e.prototype.onType=function(){var e=this.inputBox.value;this.helpText&&(e?this.helpText.hide():this.helpText.show()),this.callbacks.onType(e)},e.prototype.quickNavigate=function(e,t){this.isVisible&&(this.quickNavigateConfiguration||(this.quickNavigateConfiguration=e,this.tree.DOMFocus()),this.navigateInTree(t?y.KeyCode.DownArrow:y.KeyCode.UpArrow))},e.prototype.navigateInTree=function(e,t){var n=this.tree.getInput(),i=n?n.entries:[],r=this.tree.getFocus(),o=!1,s=!1;if(i.length>1&&(!(e===y.KeyCode.UpArrow||e===y.KeyCode.Tab&&t)||r!==i[0]&&r?e!==y.KeyCode.DownArrow&&(e!==y.KeyCode.Tab||t)||r!==i[i.length-1]||(this.tree.focusFirst(),o=!0):(this.tree.focusLast(),o=!0)),!o)switch(e){case y.KeyCode.DownArrow:this.tree.focusNext();break;case y.KeyCode.UpArrow:this.tree.focusPrevious();break;case y.KeyCode.PageDown:this.tree.focusNextPage();break;case y.KeyCode.PageUp:this.tree.focusPreviousPage();break;case y.KeyCode.Tab:t?this.tree.focusPrevious():this.tree.focusNext()}r=this.tree.getFocus(),r&&(s?this.tree.reveal(r,0).done(null,a.onUnexpectedError):this.tree.reveal(r).done(null,a.onUnexpectedError))},e.prototype.elementFocused=function(e,t){if(e&&this.isVisible()){var n={event:t,quickNavigateConfiguration:this.quickNavigateConfiguration};this.model.runner.run(e,u.Mode.PREVIEW,n)}},e.prototype.elementSelected=function(e,t){var n=!0;if(this.isVisible()){var i={event:t,quickNavigateConfiguration:this.quickNavigateConfiguration};n=this.model.runner.run(e,u.Mode.OPEN,i)}if(this.usageLogger){var r=this.model.entries.indexOf(e),o=this.model.entries.length;this.usageLogger.publicLog("quickOpenWidgetItemAccepted",{index:r,count:o,isQuickNavigate:this.quickNavigateConfiguration?!0:!1})}n&&this.hide()},e.prototype.show=function(e,t,n){s.isUndefined(t)&&(t={}),this.visible=!0,this.isLoosingFocus=!1,this.quickNavigateConfiguration=n,this.quickNavigateConfiguration?(this.inputContainer.hide(),this.options.enableAnimations&&this.treeContainer.removeClass("transition"),this.builder.show(),this.tree.DOMFocus()):(this.inputContainer.show(),this.options.enableAnimations&&this.treeContainer.addClass("transition"),this.builder.show(),this.inputBox.focus()),this.helpText&&(this.quickNavigateConfiguration||s.isString(e)?this.helpText.hide():this.helpText.show()),s.isString(e)?this.doShowWithPrefix(e):this.doShowWithInput(e,t),this.callbacks.onShow&&this.callbacks.onShow()},e.prototype.doShowWithPrefix=function(e){this.inputBox.value=e,this.callbacks.onType(e)},e.prototype.doShowWithInput=function(e,t){this.setInput(e,t)},e.prototype.setInputAndLayout=function(e,t){var n=this,i=c.generateUuid();this.currentInputToken=i,this.setTreeHeightForInput(e).then(function(){n.currentInputToken===i&&n.tree.setInput(null).then(function(){return n.model=e,n.tree.setInput(e)}).done(function(){n.tree.layout(),e&&e.entries.some(function(t){return n.isElementVisible(e,t)})&&n.autoFocus(e,t)},a.onUnexpectedError)})},e.prototype.isElementVisible=function(e,t){return e.filter?e.filter.isVisible(t):!0},e.prototype.autoFocus=function(e,t){var n=this;void 0===t&&(t={});var i=e.entries.filter(function(t){return n.isElementVisible(e,t)});if(t.autoFocusPrefixMatch){for(var r,o,s=t.autoFocusPrefixMatch,c=s.toLowerCase(),u=0;u<i.length;u++){var l=i[u],d=e.dataSource.getLabel(l);if(r||0!==d.indexOf(s)?o||0!==d.toLowerCase().indexOf(c)||(o=l):r=l,r&&o)break}var h=r||o;if(h)return this.tree.setFocus(h),void this.tree.reveal(h,0).done(null,a.onUnexpectedError)}t.autoFocusFirstEntry?(this.tree.focusFirst(),this.tree.reveal(this.tree.getFocus(),0).done(null,a.onUnexpectedError)):"number"==typeof t.autoFocusIndex?i.length>t.autoFocusIndex&&(this.tree.focusNth(t.autoFocusIndex),this.tree.reveal(this.tree.getFocus()).done(null,a.onUnexpectedError)):t.autoFocusSecondEntry&&i.length>1&&this.tree.focusNth(1)},e.prototype.refresh=function(e,t){var n=this;this.isVisible()&&this.setTreeHeightForInput(e).then(function(){n.tree.refresh().done(function(){n.tree.layout(),!n.tree.getFocus()&&e&&e.entries.some(function(t){return n.isElementVisible(e,t)})&&n.autoFocus(e,t)},a.onUnexpectedError)})},e.prototype.setTreeHeightForInput=function(e){var t=this,i=this.getHeight(e)+"px",r=this.treeContainer.style("height");return this.treeContainer.style({height:i}),this.treeContainer.hasClass("transition")&&r!==i?new n.Promise(function(e,n){var i=[],r=!1,o=function(){if(!r){for(r=!0;i.length;)i.pop()();e(null)}};t.treeContainer.once("webkitTransitionEnd",o,i),t.treeContainer.once("transitionend",o,i)}):n.Promise.as(null)},e.prototype.getHeight=function(t){var n=this,i=t.renderer;if(!t){var r=i.getHeight(null);return this.options.minItemsToShow?this.options.minItemsToShow*r:0}var o,s=0;this.layoutDimensions&&this.layoutDimensions.height&&(o=.4*(this.layoutDimensions.height-50)),(!o||o>e.MAX_ITEMS_HEIGHT)&&(o=e.MAX_ITEMS_HEIGHT);for(var a=t.entries.filter(function(e){return n.isElementVisible(t,e)}),c=this.options.maxItemsToShow||a.length,u=0;c>u&&u<a.length;u++){var l=i.getHeight(a[u]);if(!(o>=s+l))break;s+=l}return s},e.prototype.hide=function(e){var t=this;if(void 0===e&&(e=!1),this.isVisible()){if(this.visible=!1,this.builder.hide(),this.builder.domBlur(),e&&this.model){var n=this.model.entries.filter(function(e){return t.isElementVisible(t.model,e)}).length;this.usageLogger&&this.usageLogger.publicLog("quickOpenWidgetCancelled",{count:n,isQuickNavigate:this.quickNavigateConfiguration?!0:!1})}this.inputBox.value="",this.tree.setInput(null),this.treeContainer.style({height:(this.options.minItemsToShow?24*this.options.minItemsToShow:0)+"px"}),this.progressBar.stop().getContainer().hide(),this.tree.isDOMFocused()?this.tree.DOMBlur():this.inputBox.hasFocus()&&this.inputBox.blur(),e?this.callbacks.onCancel():this.callbacks.onOk(),this.callbacks.onHide&&this.callbacks.onHide()}},e.prototype.setPlaceHolder=function(e){this.inputBox&&this.inputBox.setPlaceHolder(e)},e.prototype.setValue=function(e){this.inputBox&&(this.inputBox.value=e,this.inputBox.select())},e.prototype.setPassword=function(e){this.inputBox&&(this.inputBox.inputElement.type=e?"password":"text")},e.prototype.setInput=function(e,t){this.isVisible()&&this.setInputAndLayout(e,t)},e.prototype.getInput=function(){return this.tree.getInput()},e.prototype.runFocus=function(){var e=this.tree.getFocus();return e?(this.elementSelected(e),!0):!1},e.prototype.getProgressBar=function(){return this.progressBar},e.prototype.setExtraClass=function(e){var t=this.builder.getProperty("extra-class");t&&this.builder.removeClass(t),e?(this.builder.addClass(e),this.builder.setProperty("extra-class",e)):t&&this.builder.removeProperty("extra-class")},e.prototype.isVisible=function(){return this.visible},e.prototype.layout=function(t){this.layoutDimensions=t;var n=Math.min(.62*this.layoutDimensions.width,e.MAX_WIDTH);this.builder&&(this.builder.style({width:n+"px",marginLeft:"-"+n/2+"px"}),this.inputContainer.style({width:n-12+"px"}))},e.prototype.gainingFocus=function(){this.isLoosingFocus=!1},e.prototype.loosingFocus=function(e){var t=this;if(this.isVisible()){var i=e.relatedTarget;if(!this.quickNavigateConfiguration&&g.isAncestor(i,this.builder.getHTMLElement()))return void this.inputBox.focus();this.isLoosingFocus=!0,n.Promise.timeout(0).then(function(){if(t.isLoosingFocus){var e=t.callbacks.onFocusLost&&t.callbacks.onFocusLost();e||t.hide(!1)}})}},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()();this.progressBar.dispose(),this.inputBox.dispose(),this.tree.dispose()},e.MAX_WIDTH=600,e.MAX_ITEMS_HEIGHT=480,e}();t.QuickOpenWidget=b}),define("vs/base/worker/defaultWorkerFactory",["require","exports","vs/base/browser/dom","vs/base/common/flags"],function(e,t,n,i){function r(t,n){return e.toUrl("./"+t+"?"+encodeURIComponent(n))}var o=i.getCrossOriginWorkerScriptUrl||r,s=function(){function e(e,t,n){this.id=e,this.worker=new Worker(o("workerMain.js",t)),this.worker.onmessage=function(e){n(e.data)}}return e.prototype.getId=function(){return this.id},e.prototype.postMessage=function(e){this.worker.postMessage(e)},e.prototype.terminate=function(){this.worker.terminate()},e}(),a=function(){function t(t,i){var r=this;this.id=t,this.loaded=!1,this.beforeLoadMessages=[],this.iframe=document.createElement("iframe"),this.iframe.id=this.iframeId(),this.iframe.src=e.toUrl("./workerMainCompatibility.html"),this.iframe.frameborder=this.iframe.height=this.iframe.width="0",this.iframe.style.display="none",n.addListener(this.iframe,"load",function(){return r.onLoaded()}),this.onMessage=function(e){i(e.data)},n.addListener(window,"message",this.onMessage),document.body.appendChild(this.iframe)}return t.prototype.iframeId=function(){return"worker_iframe_"+this.id},t.prototype.onLoaded=function(){for(this.loaded=!0;this.beforeLoadMessages.length>0;)this.postMessage(this.beforeLoadMessages.shift())},t.prototype.getId=function(){return this.id},t.prototype.postMessage=function(e){if(this.loaded===!0){var t=window.frames[this.iframeId()];t.postMessage?t.postMessage(e,"*"):t.contentWindow.postMessage(e,"*")}else this.beforeLoadMessages.push(e)},t.prototype.terminate=function(){window.removeEventListener("message",this.onMessage),window.frames[this.iframeId()].close()},t}(),c=function(){function e(){}return e.prototype.create=function(e,t,n){void 0===n&&(n=null);var i=null;try{i=new s(e,"service"+e,t)}catch(r){i=new a(e,t)}return i},e}();t.DefaultWorkerFactory=c}),define("vs/editor/browser/view/viewEventDispatcher",["require","exports","vs/base/common/eventEmitter"],function(e,t,n){var i=function(){function e(e){this.eventHandlerGateKeeper=e,this.eventHandlers=[],this.eventQueue=[],this.isConsumingQueue=!1}return e.prototype.addEventHandler=function(e){for(var t=0,n=this.eventHandlers.length;n>t;t++)this.eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this.eventHandlers.push(e)},e.prototype.removeEventHandler=function(e){for(var t=0;t<this.eventHandlers.length;t++)if(this.eventHandlers[t]===e){this.eventHandlers.splice(t,1);break}},e.prototype.emit=function(e,t){this.eventQueue.push(new n.EmitterEvent(e,t)),this.isConsumingQueue||this.consumeQueue()},e.prototype.emitMany=function(e){this.eventQueue=this.eventQueue.concat(e),this.isConsumingQueue||this.consumeQueue()},e.prototype.consumeQueue=function(){var e=this;this.eventHandlerGateKeeper(function(){try{e.isConsumingQueue=!0;for(var t,n,i,r;e.eventQueue.length>0;)for(r=e.eventQueue,e.eventQueue=[],i=e.eventHandlers.slice(0),t=0,n=i.length;n>t;t++)i[t].handleEvents(r)}finally{e.isConsumingQueue=!1}})},e}();t.ViewEventDispatcher=i}),define("vs/editor/browser/viewParts/viewCursors/viewCursor",["require","exports","vs/base/browser/dom"],function(e,t,n){var i=function(){function e(e,t){this._context=e,this._isInEditableRange=!0,this._domNode=this._createCursorDomNode(t),this._isVisible=!0,n.StyleMutator.setDisplay(this._domNode,"none"),this.updatePosition({lineNumber:1,column:1})}return e.prototype._createCursorDomNode=function(e){var t=document.createElement("div");return t.className="cursor",e&&(t.className+=" secondary"),n.StyleMutator.setHeight(t,this._context.configuration.editor.lineHeight),n.StyleMutator.setTop(t,0),n.StyleMutator.setLeft(t,0),t.setAttribute("role","presentation"),t.setAttribute("aria-hidden","true"),t},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getIsInEditableRange=function(){return this._isInEditableRange},e.prototype.getPositionTop=function(){return this._positionTop},e.prototype.getPosition=function(){return this._position},e.prototype.show=function(){this._isVisible||(n.StyleMutator.setVisibility(this._domNode,"inherit"),this._isVisible=!0)},e.prototype.hide=function(){this._isVisible&&(n.StyleMutator.setVisibility(this._domNode,"hidden"),this._isVisible=!1)},e.prototype.onModelFlushed=function(){return this.updatePosition({lineNumber:1,column:1}),this._isInEditableRange=!0,!0},e.prototype.onCursorPositionChanged=function(e,t){return this.updatePosition(e),this._isInEditableRange=t,!0},e.prototype.onConfigurationChanged=function(e){return e.lineHeight&&n.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight),!0},e.prototype.prepareRender=function(e){var t=e.visibleRangeForPosition(this._position);t?(this._positionTop=t.top,this._positionLeft=t.left,this._isInViewport=!0):this._isInViewport=!1},e.prototype.render=function(e){this._isInViewport?(n.StyleMutator.setDisplay(this._domNode,"block"),n.StyleMutator.setLeft(this._domNode,this._positionLeft),n.StyleMutator.setTop(this._domNode,this._positionTop+e.viewportTop-e.bigNumbersDelta)):n.StyleMutator.setDisplay(this._domNode,"none")},e.prototype.updatePosition=function(e){this._position=e,this._domNode.setAttribute("lineNumber",this._position.lineNumber.toString()),this._domNode.setAttribute("column",this._position.column.toString()),this._isInViewport=!1},e}();t.ViewCursor=i}),define("vs/editor/common/commands/trimTrailingWhitespaceCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/editOperation","vs/base/common/strings"],function(e,t,n,i,r){function o(e,t){t.sort(function(e,t){return e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber});for(var o=t.length-2;o>=0;o--)t[o].lineNumber===t[o+1].lineNumber&&t.splice(o,1);var s,a,c,u,l,d,h,p=[],f=0,m=t.length;for(s=1,a=e.getLineCount();a>=s;s++)if(c=e.getLineContent(s),l=c.length+1,u=0,!(m>f&&t[f].lineNumber===s&&(u=t[f].column,f++,u===l))&&0!==c.length){if(h=r.lastNonWhitespaceIndex(c),d=0,-1===h)d=1;else{if(h===c.length-1)continue;d=h+2}d=Math.max(u,d),p.push(i.EditOperation["delete"](new n.Range(s,d,s,l)))}return p}var s=function(){function e(e){this.selection=e}return e.prototype.getEditOperations=function(e,t){for(var n=o(e,[]),i=0,r=n.length;r>i;i++){var s=n[i];t.addEditOperation(s.range,s.text)}this.selectionId=t.trackSelection(this.selection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();t.TrimTrailingWhitespaceCommand=s,t.trimTrailingWhitespace=o}),define("vs/editor/common/model/editStack",["require","exports","vs/base/common/errors"],function(e,t,n){var i=function(){function e(e){this.model=e,this.currentOpenStackElement=null,this.past=[],this.future=[]}return e.prototype.pushStackElement=function(){null!==this.currentOpenStackElement&&(this.past.push(this.currentOpenStackElement),this.currentOpenStackElement=null)},e.prototype.clear=function(){this.currentOpenStackElement=null,this.past=[],this.future=[]},e.prototype.pushEditOperation=function(e,t,i){this.future=[],this.currentOpenStackElement||(this.currentOpenStackElement={beforeVersionId:this.model.getAlternativeVersionId(),beforeCursorState:e,editOperations:[],afterCursorState:null,afterVersionId:-1});var r={operations:this.model.applyEdits(t)};this.currentOpenStackElement.editOperations.push(r);try{this.currentOpenStackElement.afterCursorState=i?i(r.operations):null}catch(o){n.onUnexpectedError(o),this.currentOpenStackElement.afterCursorState=null}return this.currentOpenStackElement.afterVersionId=this.model.getVersionId(),this.currentOpenStackElement.afterCursorState},e.prototype.undo=function(){if(this.pushStackElement(),this.past.length>0){var e=this.past.pop();try{for(var t=e.editOperations.length-1;t>=0;t--)e.editOperations[t]={operations:this.model.applyEdits(e.editOperations[t].operations)}}catch(n){return this.clear(),null}return this.future.push(e),{selections:e.beforeCursorState,recordedVersionId:e.beforeVersionId}}return null},e.prototype.redo=function(){if(this.future.length>0){if(this.currentOpenStackElement)throw new Error("How is this possible?");var e=this.future.pop();try{for(var t=0;t<e.editOperations.length;t++)e.editOperations[t]={operations:this.model.applyEdits(e.editOperations[t].operations)}}catch(n){return this.clear(),null}return this.past.push(e),{selections:e.afterCursorState,recordedVersionId:e.afterVersionId}}return null},e}();t.EditStack=i}),define("vs/editor/common/model/tokensBinaryEncoding",["require","exports","vs/base/common/strings","vs/base/common/errors"],function(e,t,n,i){function r(e,n){if(0===n.length)return v;if(1===n.length&&0===n[0].startIndex&&!n[0].type&&!n[0].bracket)return y;var r,o,s,a,c,u,l=e._inflate,d=e._deflate,h=-1,p=new Array(n.length);for(r=0,o=n.length;o>r;r++)u=n[r],u.startIndex<=h&&(u.startIndex=h+1,i.onUnexpectedError({message:"Invalid tokens detected",tokens:n})),d.hasOwnProperty(u.type)?s=d[u.type]:(s=l.length,d[u.type]=s,l.push(u.type)),a=u.bracket,0>a&&(a=2),c=a*t.BRACKET_OFFSET+s*t.TYPE_OFFSET+u.startIndex*t.START_INDEX_OFFSET,p[r]=c,h=u.startIndex;return p}function o(e,n){if(0===n)return f;var i=n/t.START_INDEX_OFFSET&t.START_INDEX_MASK,r=n/t.TYPE_OFFSET&t.TYPE_MASK,o=n/t.BRACKET_OFFSET&t.BRACKET_MASK;return 2===o&&(o=-1),new p(i,e._inflate[r],o)}function s(e){return e/t.START_INDEX_OFFSET&t.START_INDEX_MASK}function a(e,i){var r=i/t.TYPE_OFFSET&t.TYPE_MASK;return 0===r?n.empty:e._inflate[r]}function c(e){var n=e/t.BRACKET_OFFSET&t.BRACKET_MASK;return 2===n&&(n=-1),n}function u(e,n){if(0===n.length)return m;if(1===n.length&&0===n[0])return g;var i,r,o,s,a,c,u=new Array(n.length),l=e._inflate;for(i=0,r=n.length;r>i;i++)o=n[i],s=o/t.START_INDEX_OFFSET&t.START_INDEX_MASK,c=o/t.TYPE_OFFSET&t.TYPE_MASK,a=o/t.BRACKET_OFFSET&t.BRACKET_MASK,2===a&&(a=-1),u[i]=new p(s,l[c],a);return u}function l(e,t){return h(e,t)}function d(e,n,i,r,o){if(0===n.length)return m;if(1===n.length&&0===n[0])return g;var s,a,c,u,l,d,f,v=h(n,i),y=[],_=e._inflate;for(c=n[v],d=c/t.TYPE_OFFSET&t.TYPE_MASK,f=c/t.BRACKET_OFFSET&t.BRACKET_MASK,l=0,y.push(new p(l,_[d],f)),s=v+1,a=n.length;a>s&&(c=n[s],u=c/t.START_INDEX_OFFSET&t.START_INDEX_MASK,!(u>=r));s++)d=c/t.TYPE_OFFSET&t.TYPE_MASK,f=c/t.BRACKET_OFFSET&t.BRACKET_MASK,l=u-i+o,y.push(new p(l,_[d],f));return y}function h(e,t){for(var n,i,r=0,o=e.length-1;o>r;)n=r+Math.ceil((o-r)/2),i=4294967295&e[n],i>t?o=n-1:r=n;return r}var p=function(){function e(e,t,n){this.startIndex=e,this.type=t,this.bracket=n}return e.prototype.toString=function(){return"{ "+this.startIndex+", '"+this.type+"', "+this.bracket+"}"},e}();t.START_INDEX_MASK=4294967295,t.TYPE_MASK=65535,t.BRACKET_MASK=255,t.START_INDEX_OFFSET=1,t.TYPE_OFFSET=Math.pow(2,32),t.BRACKET_OFFSET=Math.pow(2,48);var f={startIndex:0,type:"",bracket:0},m=[],v=[],g=[f],y=[0];t.deflateArr=r,t.inflate=o,t.getStartIndex=s,t.getType=a,t.getBracket=c,t.inflateArr=u,t.findIndexOfOffset=l,t.sliceAndInflate=d,t.findIndexInSegmentsArray=h}),define("vs/editor/common/editorCommon",["require","exports","vs/editor/common/model/tokensBinaryEncoding"],function(e,t,n){function i(e){return"indent"===e?r.Indent:"same"===e?r.Same:r.None}!function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(t.SelectionDirection||(t.SelectionDirection={}));t.SelectionDirection;!function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent"}(t.WrappingIndent||(t.WrappingIndent={}));var r=t.WrappingIndent;t.wrappingIndentFromString=i,function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(t.OverviewRulerLane||(t.OverviewRulerLane={}));t.OverviewRulerLane;!function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(t.EndOfLinePreference||(t.EndOfLinePreference={}));t.EndOfLinePreference;!function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(t.EndOfLineSequence||(t.EndOfLineSequence={}));t.EndOfLineSequence;t.LineTokensBinaryEncoding=n,function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(t.TrackedRangeStickiness||(t.TrackedRangeStickiness={}));t.TrackedRangeStickiness;!function(e){e[e.Simple=0]="Simple",e[e.Center=1]="Center",e[e.CenterIfOutsideViewport=2]="CenterIfOutsideViewport"}(t.VerticalRevealType||(t.VerticalRevealType={}));t.VerticalRevealType;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET"}(t.MouseTargetType||(t.MouseTargetType={}));t.MouseTargetType;t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS="editorTextFocus",t.KEYBINDING_CONTEXT_EDITOR_FOCUS="editorFocus",t.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS="editorTabMovesFocus",t.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS="editorHasMultipleSelections",t.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION="editorHasSelection",t.KEYBINDING_CONTEXT_EDITOR_LANGUAGE_ID="editorLangId",t.ViewEventNames={ModelFlushedEvent:"modelFlushedEvent",LinesDeletedEvent:"linesDeletedEvent",LinesInsertedEvent:"linesInsertedEvent",LineChangedEvent:"lineChangedEvent",TokensChangedEvent:"tokensChangedEvent",DecorationsChangedEvent:"decorationsChangedEvent",CursorPositionChangedEvent:"cursorPositionChangedEvent",CursorSelectionChangedEvent:"cursorSelectionChangedEvent",RevealRangeEvent:"revealRangeEvent",LineMappingChangedEvent:"lineMappingChangedEvent",ScrollRequestEvent:"scrollRequestEvent"},function(e){e[e.Value=0]="Value",e[e.Selection=1]="Selection",e[e.Position=2]="Position",e[e.Scroll=3]="Scroll"}(t.CodeEditorStateFlag||(t.CodeEditorStateFlag={}));t.CodeEditorStateFlag;t.EditorType={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},t.ClassName={EditorWarningDecoration:"greensquiggly",EditorErrorDecoration:"redsquiggly"},t.EventType={Disposed:"disposed",ConfigurationChanged:"configurationChanged",ModelDispose:"modelDispose",ModelChanged:"modelChanged",ModelTokensChanged:"modelTokensChanged",ModelModeChanged:"modelsModeChanged",ModelModeSupportChanged:"modelsModeSupportChanged",ModelContentChanged:"contentChanged",ModelContentChanged2:"contentChanged2",ModelContentChangedFlush:"flush",ModelContentChangedLinesDeleted:"linesDeleted",ModelContentChangedLinesInserted:"linesInserted",ModelContentChangedLineChanged:"lineChanged",EditorTextBlur:"blur",EditorTextFocus:"focus",EditorFocus:"widgetFocus",EditorBlur:"widgetBlur",ModelPropertiesChanged:"propertiesChanged",ModelDecorationsChanged:"decorationsChanged",CursorPositionChanged:"positionChanged",CursorSelectionChanged:"selectionChanged",CursorRevealRange:"revealRange",CursorScrollRequest:"scrollRequest",ViewFocusGained:"focusGained",ViewFocusLost:"focusLost",ViewFocusChanged:"focusChanged",ViewScrollWidthChanged:"scrollWidthChanged",ViewScrollHeightChanged:"scrollHeightChanged",ViewScrollChanged:"scrollChanged",ViewZonesChanged:"zonesChanged",ViewLayoutChanged:"viewLayoutChanged",ContextMenu:"contextMenu",MouseDown:"mousedown",MouseUp:"mouseup",MouseMove:"mousemove",MouseLeave:"mouseleave",KeyDown:"keydown",KeyUp:"keyup",EditorLayout:"editorLayout",DiffUpdated:"diffUpdated"},t.Handler={ExecuteCommand:"executeCommand",ExecuteCommands:"executeCommands",CursorLeft:"cursorLeft",CursorLeftSelect:"cursorLeftSelect",CursorWordLeft:"cursorWordLeft",CursorWordLeftSelect:"cursorWordLeftSelect",CursorRight:"cursorRight",CursorRightSelect:"cursorRightSelect",CursorWordRight:"cursorWordRight",CursorWordRightSelect:"cursorWordRightSelect",CursorUp:"cursorUp",CursorUpSelect:"cursorUpSelect",CursorDown:"cursorDown",CursorDownSelect:"cursorDownSelect",CursorPageUp:"cursorPageUp",CursorPageUpSelect:"cursorPageUpSelect",CursorPageDown:"cursorPageDown",CursorPageDownSelect:"cursorPageDownSelect",CursorHome:"cursorHome",CursorHomeSelect:"cursorHomeSelect",CursorEnd:"cursorEnd",CursorEndSelect:"cursorEndSelect",ExpandLineSelection:"expandLineSelection",CursorTop:"cursorTop",CursorTopSelect:"cursorTopSelect",CursorBottom:"cursorBottom",CursorBottomSelect:"cursorBottomSelect",AddCursorDown:"addCursorDown",AddCursorUp:"addCursorUp",CursorUndo:"cursorUndo",MoveTo:"moveTo",MoveToSelect:"moveToSelect",CreateCursor:"createCursor",LastCursorMoveToSelect:"lastCursorMoveToSelect",JumpToBracket:"jumpToBracket",Type:"type",ReplacePreviousChar:"replacePreviousChar",Paste:"paste",Tab:"tab",Indent:"indent",Outdent:"outdent",DeleteLeft:"deleteLeft",DeleteRight:"deleteRight",DeleteWordLeft:"deleteWordLeft",DeleteWordRight:"deleteWordRight",DeleteAllLeft:"deleteAllLeft",DeleteAllRight:"deleteAllRight",Enter:"enter",RemoveSecondaryCursors:"removeSecondaryCursors",CancelSelection:"cancelSelection",Cut:"cut",Undo:"undo",Redo:"redo",WordSelect:"wordSelect",WordSelectDrag:"wordSelectDrag",LastCursorWordSelect:"lastCursorWordSelect",LineSelect:"lineSelect",LineSelectDrag:"lineSelectDrag",LastCursorLineSelect:"lastCursorLineSelect",LastCursorLineSelectDrag:"lastCursorLineSelectDrag",LineInsertBefore:"lineInsertBefore",LineInsertAfter:"lineInsertAfter",LineBreakInsert:"lineBreakInsert",SelectAll:"selectAll",ScrollLineUp:"scrollLineUp",ScrollLineDown:"scrollLineDown",ScrollPageUp:"scrollPageUp",ScrollPageDown:"scrollPageDown"}}),define("vs/editor/browser/controller/mouseTarget",["require","exports","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/common/core/range","vs/editor/common/core/position"],function(e,t,n,i,r,o){var s=function(){function e(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.element=e,this.type=t,this.position=n,!i&&n&&(i=new r.Range(n.lineNumber,n.column,n.lineNumber,n.column)),this.range=i,this.detail=o}return e.prototype._typeToString=function(){return this.type===n.MouseTargetType.TEXTAREA?"TEXTAREA":this.type===n.MouseTargetType.GUTTER_GLYPH_MARGIN?"GUTTER_GLYPH_MARGIN":this.type===n.MouseTargetType.GUTTER_LINE_NUMBERS?"GUTTER_LINE_NUMBERS":this.type===n.MouseTargetType.GUTTER_LINE_DECORATIONS?"GUTTER_LINE_DECORATIONS":this.type===n.MouseTargetType.GUTTER_VIEW_ZONE?"GUTTER_VIEW_ZONE":this.type===n.MouseTargetType.CONTENT_TEXT?"CONTENT_TEXT":this.type===n.MouseTargetType.CONTENT_EMPTY?"CONTENT_EMPTY":this.type===n.MouseTargetType.CONTENT_VIEW_ZONE?"CONTENT_VIEW_ZONE":this.type===n.MouseTargetType.CONTENT_WIDGET?"CONTENT_WIDGET":this.type===n.MouseTargetType.OVERVIEW_RULER?"OVERVIEW_RULER":this.type===n.MouseTargetType.SCROLLBAR?"SCROLLBAR":this.type===n.MouseTargetType.OVERLAY_WIDGET?"OVERLAY_WIDGET":"UNKNOWN";
},e.prototype.toString=function(){return this._typeToString()+": "+this.position+" - "+this.range+" - "+this.detail},e}(),a=function(){function e(e){return"[^/]*"+e+"[^/]*"}function t(){return"[^/]+"}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=!1;return"$"===e[e.length-1]&&(n=!0,e.pop()),new RegExp(r+e.join("\\/")+(n?"$":""))}var r="^"+i.ClassNames.OVERFLOW_GUARD+"\\/";return{IS_TEXTAREA_COVER:n(e(i.ClassNames.TEXTAREA_COVER),"$"),IS_TEXTAREA:n(i.ClassNames.TEXTAREA,"$"),IS_VIEW_LINES:n(t(),t(),i.ClassNames.VIEW_LINES,"$"),IS_CURSORS_LAYER:n(t(),t(),e(i.ClassNames.VIEW_CURSORS_LAYER),"$"),IS_CHILD_OF_VIEW_LINES:n(t(),t(),i.ClassNames.VIEW_LINES),IS_CHILD_OF_SCROLLABLE_ELEMENT:n(e(i.ClassNames.SCROLLABLE_ELEMENT)),IS_CHILD_OF_CONTENT_WIDGETS:n(t(),t(),i.ClassNames.CONTENT_WIDGETS),IS_CHILD_OF_OVERLAY_WIDGETS:n(i.ClassNames.OVERLAY_WIDGETS),IS_CHILD_OF_VIEW_OVERLAYS:n(i.ClassNames.MARGIN_VIEW_OVERLAYS),IS_CHILD_OF_VIEW_ZONES:n(t(),t(),i.ClassNames.VIEW_ZONES)}}(),c=function(){function e(e,t){this.context=e,this.viewHelper=t}return e.prototype.getClassNamePathTo=function(e,t){for(var n,i=[];e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n=e.className,n&&i.unshift(n)),e=e.parentNode;return i.join("/")},e.prototype.mouseTargetIsWidget=function(e){var t=e.target,n=this.getClassNamePathTo(t,this.viewHelper.viewDomNode);return a.IS_CHILD_OF_CONTENT_WIDGETS.test(n)?!0:a.IS_CHILD_OF_OVERLAY_WIDGETS.test(n)?!0:!1},e.prototype.createMouseTarget=function(e,t,n,i){try{var r=this._unsafeCreateMouseTarget(e,t,n,i);return r}catch(n){return this.createMouseTargetFromUnknownTarget(n.target)}},e.prototype._unsafeCreateMouseTarget=function(e,t,i,r){var o=Math.max(0,this.viewHelper.getScrollTop()+(i.posy-t.top)),c=this.viewHelper.getScrollLeft()+(i.posx-t.left)-e.contentLeft,u=i.target,l=this.getClassNamePathTo(u,this.viewHelper.viewDomNode),d=u.hasAttribute&&u.hasAttribute("lineNumber")?u.getAttribute("lineNumber"):null,h=u.hasAttribute&&u.hasAttribute("column")?u.getAttribute("column"):null;if(d&&h)return this.createMouseTargetFromViewCursor(u,parseInt(d,10),parseInt(h,10));if(a.IS_CHILD_OF_CONTENT_WIDGETS.test(l))return this.createMouseTargetFromContentWidgetsChild(u);if(a.IS_CHILD_OF_OVERLAY_WIDGETS.test(l))return this.createMouseTargetFromOverlayWidgetsChild(u);if(a.IS_TEXTAREA_COVER.test(l))return this.context.configuration.editor.glyphMargin?this.createMouseTargetFromGlyphMargin(u,o):this.context.configuration.editor.lineNumbers?this.createMouseTargetFromLineNumbers(u,o):this.createMouseTargetFromLinesDecorationsChild(u,o);if(a.IS_TEXTAREA.test(l))return new s(u,n.MouseTargetType.TEXTAREA);if(a.IS_CHILD_OF_VIEW_ZONES.test(l)){var p=this._getZoneAtCoord(o);return p?new s(u,n.MouseTargetType.CONTENT_VIEW_ZONE,p.position,null,p):this.createMouseTargetFromUnknownTarget(u)}if(a.IS_VIEW_LINES.test(l)){if(this.viewHelper.isAfterLines(o))return this.createMouseTargetFromViewLines(u,o);var p=this._getZoneAtCoord(o);if(p)return new s(u,n.MouseTargetType.CONTENT_VIEW_ZONE,p.position,null,p);var f=this._doHitTest(t,i,o);return f.position?this.createMouseTargetFromHitTestPosition(u,f.position.lineNumber,f.position.column,c):this.createMouseTargetFromViewLines(u,o)}if(!r||a.IS_CHILD_OF_VIEW_LINES.test(l)){var f=this._doHitTest(t,i,o);if(f.position)return this.createMouseTargetFromHitTestPosition(u,f.position.lineNumber,f.position.column,c);f.hitTarget&&(u=f.hitTarget,l=this.getClassNamePathTo(u,this.viewHelper.viewDomNode))}if(a.IS_CURSORS_LAYER.test(l))return new s(u,n.MouseTargetType.UNKNOWN);if(a.IS_CHILD_OF_SCROLLABLE_ELEMENT.test(l))return this.createMouseTargetFromScrollbar(u,o);if(a.IS_CHILD_OF_VIEW_OVERLAYS.test(l)){var m=Math.abs(i.posx-t.left);return m<=e.glyphMarginWidth?this.createMouseTargetFromGlyphMargin(u,o):(m-=e.glyphMarginWidth,m<=e.lineNumbersWidth?this.createMouseTargetFromLineNumbers(u,o):(m-=e.lineNumbersWidth,this.createMouseTargetFromLinesDecorationsChild(u,o)))}return/OverviewRuler/i.test(l)?this.createMouseTargetFromScrollbar(u,o):this.createMouseTargetFromUnknownTarget(u)},e.prototype._isChild=function(e,t,n){for(;e&&e!==document.body;){if(e===t)return!0;if(e===n)return!1;e=e.parentNode}return!1},e.prototype._findAttribute=function(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null},e.prototype._doHitTestWithCaretRangeFromPoint=function(e,t,n){var i=this.viewHelper.getLineNumberAtVerticalOffset(n),r=this.viewHelper.getVerticalOffsetForLineNumber(i),o=r+Math.floor(this.context.configuration.editor.lineHeight/2),s=t.posy+(o-n);s<=e.top&&(s=e.top+1),s>=e.top+this.context.configuration.editor.observedOuterHeight&&(s=e.top+this.context.configuration.editor.observedOuterHeight-1);var a=t.posx-document.body.scrollLeft,c=this._actualDoHitTestWithCaretRangeFromPoint(a,s-document.body.scrollTop);return c.position?c:this._actualDoHitTestWithCaretRangeFromPoint(a,t.posy-document.body.scrollTop)},e.prototype._actualDoHitTestWithCaretRangeFromPoint=function(e,t){var n=null,r=null,o=document.caretRangeFromPoint(e,t),s=o?o.startContainer:null,a=s?s.parentNode:null,c=a?a.parentNode:null,u=c?c.parentNode:null,l=c&&c.nodeType===c.ELEMENT_NODE?c.className:"",d=u&&u.nodeType===u.ELEMENT_NODE?u.className:"";return d===i.ClassNames.VIEW_LINE?n=this.viewHelper.getPositionFromDOMInfo(o.startContainer.parentNode,o.startOffset):l===i.ClassNames.VIEW_LINE?n=this.viewHelper.getPositionFromDOMInfo(o.startContainer,o.startOffset):r=a,{position:n,hitTarget:r}},e.prototype._doHitTestWithCaretPositionFromPoint=function(e){var t=null,n=null,i=e.posx-document.body.scrollLeft-document.documentElement.scrollLeft,r=e.posy-document.body.scrollTop-document.documentElement.scrollTop,o=document.caretPositionFromPoint(i,r),s=document.createRange();return s.setStart(o.offsetNode,o.offset),s.collapse(!0),t=this.viewHelper.getPositionFromDOMInfo(s.startContainer.parentNode,s.startOffset),s.detach(),{position:t,hitTarget:n}},e.prototype._doHitTestWithMoveToPoint=function(e){var t=null,n=null,r=document.body.createTextRange();try{var o=e.posx-document.body.scrollLeft-document.documentElement.scrollLeft,s=e.posy-document.body.scrollTop-document.documentElement.scrollTop;r.moveToPoint(o,s)}catch(a){return{position:null,hitTarget:null}}r.collapse(!0);var c=r?r.parentElement():null,u=c?c.parentNode:null,l=u?u.parentNode:null,d=l&&l.nodeType===l.ELEMENT_NODE?l.className:"";if(d===i.ClassNames.VIEW_LINE){var h=r.duplicate();h.moveToElementText(c),h.setEndPoint("EndToStart",r),t=this.viewHelper.getPositionFromDOMInfo(c,h.text.length),h.moveToElementText(this.viewHelper.viewDomNode)}else n=c;return r.moveToElementText(this.viewHelper.viewDomNode),{position:t,hitTarget:n}},e.prototype._doHitTest=function(e,t,n){return document.caretRangeFromPoint?this._doHitTestWithCaretRangeFromPoint(e,t,n):document.caretPositionFromPoint?this._doHitTestWithCaretPositionFromPoint(t):document.body.createTextRange?this._doHitTestWithMoveToPoint(t):{position:null,hitTarget:null}},e.prototype._getZoneAtCoord=function(e){var t=this.viewHelper.getWhitespaceAtVerticalOffset(e);if(t){var n,i=t.verticalOffset+t.height/2,r=this.context.model.getLineCount(),s=null,a=null;return t.afterLineNumber!==r&&(a=new o.Position(t.afterLineNumber+1,1)),t.afterLineNumber>0&&(s=new o.Position(t.afterLineNumber,this.context.model.getLineMaxColumn(t.afterLineNumber))),n=null===a?s:null===s?a:i>e?s:a,{viewZoneId:t.id,afterLineNumber:t.afterLineNumber,positionBefore:s,positionAfter:a,position:n}}return null},e.prototype._getFullLineRangeAtCoord=function(e){if(this.viewHelper.isAfterLines(e)){var t=this.context.model.getLineCount(),n=this.context.model.getLineMaxColumn(t);return{range:new r.Range(t,n,t,n),isAfterLines:!0}}var t=this.viewHelper.getLineNumberAtVerticalOffset(e),n=this.context.model.getLineMaxColumn(t);return{range:new r.Range(t,1,t,n),isAfterLines:!1}},e.prototype.createMouseTargetFromViewCursor=function(e,t,i){return new s(e,n.MouseTargetType.CONTENT_TEXT,new o.Position(t,i))},e.prototype.createMouseTargetFromViewLines=function(e,t){var i=this.context.model.getLineCount(),r=this.context.model.getLineMaxColumn(i);return new s(e,n.MouseTargetType.CONTENT_EMPTY,new o.Position(i,r))},e.prototype.createMouseTargetFromHitTestPosition=function(e,t,i,a){var c=new o.Position(t,i),u=this.viewHelper.getLineWidth(t);if(a>u)return new s(e,n.MouseTargetType.CONTENT_EMPTY,c);var l=this.viewHelper.visibleRangeForPosition2(t,i);if(!l)return new s(e,n.MouseTargetType.UNKNOWN,c);var d=l.left;if(a===d)return new s(e,n.MouseTargetType.CONTENT_TEXT,c);var h;if(i>1){var p=l.left;if(h=!1,h=h||a>p&&d>a,h=h||a>d&&p>a){var f=new r.Range(t,i,t,i-1);return new s(e,n.MouseTargetType.CONTENT_TEXT,c,f)}}var m=this.context.model.getLineMaxColumn(t);if(m>i){var v=this.viewHelper.visibleRangeForPosition2(t,i+1);if(v){var g=v.left;if(h=!1,h=h||a>d&&g>a,h=h||a>g&&d>a){var f=new r.Range(t,i,t,i+1);return new s(e,n.MouseTargetType.CONTENT_TEXT,c,f)}}}return new s(e,n.MouseTargetType.CONTENT_TEXT,c)},e.prototype.createMouseTargetFromContentWidgetsChild=function(e){var t=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode);return t?new s(e,n.MouseTargetType.CONTENT_WIDGET,null,null,t):new s(e,n.MouseTargetType.UNKNOWN)},e.prototype.createMouseTargetFromOverlayWidgetsChild=function(e){var t=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode);return t?new s(e,n.MouseTargetType.OVERLAY_WIDGET,null,null,t):new s(e,n.MouseTargetType.UNKNOWN)},e.prototype.createMouseTargetFromLinesDecorationsChild=function(e,t){var i=this._getZoneAtCoord(t);if(i)return new s(e,n.MouseTargetType.GUTTER_VIEW_ZONE,i.position,null,i);var r=this._getFullLineRangeAtCoord(t);return new s(e,n.MouseTargetType.GUTTER_LINE_DECORATIONS,new o.Position(r.range.startLineNumber,r.range.startColumn),r.range,r.isAfterLines)},e.prototype.createMouseTargetFromLineNumbers=function(e,t){var i=this._getZoneAtCoord(t);if(i)return new s(e,n.MouseTargetType.GUTTER_VIEW_ZONE,i.position,null,i);var r=this._getFullLineRangeAtCoord(t);return new s(e,n.MouseTargetType.GUTTER_LINE_NUMBERS,new o.Position(r.range.startLineNumber,r.range.startColumn),r.range,r.isAfterLines)},e.prototype.createMouseTargetFromGlyphMargin=function(e,t){var i=this._getZoneAtCoord(t);if(i)return new s(e,n.MouseTargetType.GUTTER_VIEW_ZONE,i.position,null,i);var r=this._getFullLineRangeAtCoord(t);return new s(e,n.MouseTargetType.GUTTER_GLYPH_MARGIN,new o.Position(r.range.startLineNumber,r.range.startColumn),r.range,r.isAfterLines)},e.prototype.createMouseTargetFromScrollbar=function(e,t){var i=this.viewHelper.getLineNumberAtVerticalOffset(t),r=this.context.model.getLineMaxColumn(i);return new s(e,n.MouseTargetType.SCROLLBAR,new o.Position(i,r))},e.prototype.createMouseTargetFromUnknownTarget=function(e){var t=this._isChild(e,this.viewHelper.viewDomNode,this.viewHelper.viewDomNode),i=null;return t&&(i=this._findAttribute(e,"widgetId",this.viewHelper.viewDomNode)),i?new s(e,n.MouseTargetType.OVERLAY_WIDGET,null,null,i):new s(e,n.MouseTargetType.UNKNOWN)},e}();t.MouseTargetFactory=c}),define("vs/editor/browser/view/viewController",["require","exports","vs/editor/common/core/position","vs/editor/common/editorCommon"],function(e,t,n,i){var r=function(){function e(e,t,n){this.viewModel=e,this.configuration=t,this.outgoingEventBus=n}return e.prototype.paste=function(e,t,n){this.configuration.handlerDispatcher.trigger(e,i.Handler.Paste,{text:t,pasteOnNewLine:n})},e.prototype.type=function(e,t){this.configuration.handlerDispatcher.trigger(e,i.Handler.Type,{text:t})},e.prototype.replacePreviousChar=function(e,t){this.configuration.handlerDispatcher.trigger(e,i.Handler.ReplacePreviousChar,{text:t})},e.prototype.cut=function(e){this.configuration.handlerDispatcher.trigger(e,i.Handler.Cut,null)},e.prototype._validateViewColumn=function(e,t){var n=this.viewModel.getLineMinColumn(e);return n>t?n:t},e.prototype.moveTo=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.MoveTo,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.moveToSelect=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.MoveToSelect,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.createCursor=function(e,t,r,o){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.CreateCursor,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r),wholeLine:o})},e.prototype.lastCursorMoveToSelect=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorMoveToSelect,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.wordSelect=function(e,t,n,r){n=this._validateViewColumn(t,n),this.configuration.handlerDispatcher.trigger(e,i.Handler.WordSelect,{position:this.convertViewToModelPosition(t,n),preference:r})},e.prototype.wordSelectDrag=function(e,t,n,r){n=this._validateViewColumn(t,n),this.configuration.handlerDispatcher.trigger(e,i.Handler.WordSelectDrag,{position:this.convertViewToModelPosition(t,n),preference:r})},e.prototype.lastCursorWordSelect=function(e,t,n,r){n=this._validateViewColumn(t,n),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorWordSelect,{position:this.convertViewToModelPosition(t,n),preference:r})},e.prototype.lineSelect=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.LineSelect,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.lineSelectDrag=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.LineSelectDrag,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.lastCursorLineSelect=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorLineSelect,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.lastCursorLineSelectDrag=function(e,t,r){r=this._validateViewColumn(t,r),this.configuration.handlerDispatcher.trigger(e,i.Handler.LastCursorLineSelectDrag,{position:this.convertViewToModelPosition(t,r),viewPosition:new n.Position(t,r)})},e.prototype.selectAll=function(e){this.configuration.handlerDispatcher.trigger(e,i.Handler.SelectAll,null)},e.prototype.convertViewToModelPosition=function(e,t){return this.viewModel.convertViewPositionToModelPosition(e,t)},e.prototype.convertViewToModelRange=function(e){return this.viewModel.convertViewRangeToModelRange(e)},e.prototype.convertViewToModelMouseEvent=function(e){e.target&&(e.target.position&&(e.target.position=this.convertViewToModelPosition(e.target.position.lineNumber,e.target.position.column)),e.target.range&&(e.target.range=this.convertViewToModelRange(e.target.range)))},e.prototype.emitKeyDown=function(e){this.outgoingEventBus.emit(i.EventType.KeyDown,e)},e.prototype.emitKeyUp=function(e){this.outgoingEventBus.emit(i.EventType.KeyUp,e)},e.prototype.emitContextMenu=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.ContextMenu,e)},e.prototype.emitMouseMove=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseMove,e)},e.prototype.emitMouseLeave=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseLeave,e)},e.prototype.emitMouseUp=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseUp,e)},e.prototype.emitMouseDown=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseDown,e)},e}();t.ViewController=r}),define("vs/editor/browser/viewLayout/scrollManager",["require","exports","vs/base/browser/ui/scrollbar/impl/scrollableElement","vs/base/browser/dom","vs/base/common/lifecycle","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon"],function(e,t,n,i,r,o,s){function a(e,t,n){e.hasOwnProperty(n)&&(t[n]=e[n])}var c=function(){function e(e,t,r,c,u,l){var d=this;this.toDispose=[],this.scrollable=e,this.configuration=t,this.privateViewEventBus=r,this.linesContent=c,this.toDispose.push(this.scrollable.addScrollListener(function(e){d.privateViewEventBus.emit(s.EventType.ViewScrollChanged,e)}));var h=this.configuration.editor.scrollbar,p={scrollable:this.scrollable,listenOnDomNode:u,vertical:h.vertical,horizontal:h.horizontal,className:o.ClassNames.SCROLLABLE_ELEMENT+" "+this.configuration.editor.theme,useShadows:!1,saveLastScrollTimeOnClassName:o.ClassNames.VIEW_LINE};a(h,p,"verticalHasArrows"),a(h,p,"horizontalHasArrows"),a(h,p,"verticalScrollbarSize"),a(h,p,"verticalSliderSize"),a(h,p,"horizontalScrollbarSize"),a(h,p,"horizontalSliderSize"),a(h,p,"handleMouseWheel"),a(h,p,"arrowSize"),a(h,p,"mouseWheelScrollSensitivity"),this.scrollbar=new n.ScrollableElement(c,p,{width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight}),this.toDispose.push(this.scrollbar),this.toDispose.push(this.scrollable.addInternalSizeChangeListener(function(){d.scrollbar.onElementInternalDimensions()})),this.toDispose.push(this.configuration.addListener2(s.EventType.ConfigurationChanged,function(e){d.scrollbar.updateClassName(d.configuration.editor.theme),e.scrollbar&&d.scrollbar.updateOptions(d.configuration.editor.scrollbar)}));var f=function(e,t,n){if(t){var i=e.scrollTop;i&&(d.scrollable.setScrollTop(d.scrollable.getScrollTop()+i),e.scrollTop=0)}if(n){var r=e.scrollLeft;r&&(d.scrollable.setScrollLeft(d.scrollable.getScrollLeft()+r),e.scrollLeft=0)}};this.toDispose.push(i.addDisposableListener(u,"scroll",function(e){return f(u,!0,!0)})),this.toDispose.push(i.addDisposableListener(c,"scroll",function(e){return f(c,!0,!1)})),this.toDispose.push(i.addDisposableListener(l,"scroll",function(e){return f(l,!0,!1)}))}return e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose)},e.prototype.onSizeProviderLayoutChanged=function(){this.scrollbar&&this.scrollbar.onElementDimensions({width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight})},e.prototype.getOverviewRulerLayoutInfo=function(){return this.scrollbar?this.scrollbar.getOverviewRulerLayoutInfo():null},e.prototype.getScrollbarContainerDomNode=function(){return this.scrollbar?this.scrollbar.getDomNode():this.linesContent},e.prototype.delegateVerticalScrollbarMouseDown=function(e){this.scrollbar&&this.scrollbar.delegateVerticalScrollbarMouseDown(e)},e}();t.ScrollManager=c}),define("vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/editor/common/editorCommon"],function(e,t,n,i,r){function o(e,t){return e.startLineNumber===t.startLineNumber&&e.endLineNumber===t.endLineNumber&&e.forceHeight===t.forceHeight&&e.color===t.color&&e.position===t.position}function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;i>n;n++)if(!o(e[n],t[n]))return!1;return!0}var a=function(){function e(e,t,i,r,o,s,a){this._canvasLeftOffset=e,this._minimumHeight=o,this._maximumHeight=s,this._getVerticalOffsetForLine=a,this._zones=[],this._renderedZones=[],this._useDarkColor=!1,this._domNode=document.createElement("canvas"),this._domNode.className=t,this._domNode.style.position="absolute",n.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._width=0,this._height=0,this._outerHeight=i,this._lineHeight=r,this._lanesCount=3}return e.prototype.dispose=function(){this._zones=[]},e.prototype.setLayout=function(e,t){i.StyleMutator.setTop(this._domNode,e.top),i.StyleMutator.setRight(this._domNode,e.right),(this._width!==e.width||this._height!==e.height)&&(this._width=e.width,this._height=e.height,this._domNode.width=this._width,this._domNode.height=this._height,t&&this.render(!0))},e.prototype.getLanesCount=function(){return this._lanesCount},e.prototype.setLanesCount=function(e,t){this._lanesCount=e,t&&this.render(!0)},e.prototype.setUseDarkColor=function(e,t){this._useDarkColor=e,t&&this.render(!0)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.setScrollHeight=function(e,t){this._outerHeight=e,t&&this.render(!0)},e.prototype.setLineHeight=function(e,t){this._lineHeight=e,t&&this.render(!0)},e.prototype.setZones=function(e,t){this._zones=e,t&&this.render(!1)},e.prototype._insertZone=function(e,t,n,i,r,o){var s=Math.floor((t+n)/2),a=n-s;a>r/2&&(a=r/2),i/2>a&&(a=i/2),0>s-a&&(s=a),s+a>this._height&&(s=this._height-a),e[o]=e[o]||[],e[o].push({from:s-a,to:s+a})},e.prototype._getColorForZone=function(e){return this._useDarkColor?e.darkColor:e.color},e.prototype._renderVerticalPatch=function(e,t,n,i,r){var o,s,a,c,u,l,d,h={};for(o=0,s=this._zones.length;s>o;o++)if(a=this._zones[o],a.position&n)if(c=this._getVerticalOffsetForLine(a.startLineNumber),u=this._getVerticalOffsetForLine(a.endLineNumber)+this._lineHeight,c*=t,u*=t,a.forceHeight)u=c+a.forceHeight,this._insertZone(h,c,u,a.forceHeight,a.forceHeight,this._getColorForZone(a));else if(l=a.endLineNumber-a.startLineNumber+1,d=l*this._maximumHeight,u-c>d)for(var p=a.startLineNumber;p<=a.endLineNumber;p++)c=this._getVerticalOffsetForLine(p),u=c+this._lineHeight,c*=t,u*=t,this._insertZone(h,c,u,this._minimumHeight,this._maximumHeight,this._getColorForZone(a));else this._insertZone(h,c,u,this._minimumHeight,d,this._getColorForZone(a));var f,m,v,g,y=function(e,t){return e.from-t.from};for(f in h)if(h.hasOwnProperty(f)){for(m=h[f],m.sort(y),v=m[0].from,g=m[0].to,e.fillStyle=f,o=1,s=m.length;s>o;o++)g>=m[o].from?g=Math.max(g,m[o].to):(e.fillRect(i,v,r,g-v),v=m[o].from,g=m[o].to);e.fillRect(i,v,r,g-v)}},e.prototype.render=function(t){if(0===this._outerHeight)return!1;if(!e.hasCanvas)return!1;var n=t||!s(this._renderedZones,this._zones);if(n){var i=this._height/this._outerHeight,r=this._domNode.getContext("2d");r.clearRect(0,0,this._width,this._height);var o=this._width-this._canvasLeftOffset;this._lanesCount>=3?this._renderThreeLanes(r,i,o):2===this._lanesCount?this._renderTwoLanes(r,i,o):1===this._lanesCount&&this._renderOneLane(r,i,o)}return this._renderedZones=this._zones,n},e.prototype._renderOneLane=function(e,t,n){this._renderVerticalPatch(e,t,r.OverviewRulerLane.Left|r.OverviewRulerLane.Center|r.OverviewRulerLane.Right,this._canvasLeftOffset,n)},e.prototype._renderTwoLanes=function(e,t,n){var i=Math.floor(n/2),o=n-i,s=this._canvasLeftOffset,a=this._canvasLeftOffset+i;this._renderVerticalPatch(e,t,r.OverviewRulerLane.Left|r.OverviewRulerLane.Center,s,i),this._renderVerticalPatch(e,t,r.OverviewRulerLane.Right,a,o)},e.prototype._renderThreeLanes=function(e,t,n){var i=Math.floor(n/3),o=Math.floor(n/3),s=n-i-o,a=this._canvasLeftOffset,c=this._canvasLeftOffset+i,u=this._canvasLeftOffset+i+s;this._renderVerticalPatch(e,t,r.OverviewRulerLane.Left,a,i),this._renderVerticalPatch(e,t,r.OverviewRulerLane.Center,c,s),this._renderVerticalPatch(e,t,r.OverviewRulerLane.Right,u,o)},e.hasCanvas=-1===window.navigator.userAgent.indexOf("MSIE 8"),e}();t.OverviewRulerImpl=a}),define("vs/editor/common/core/editorState",["require","exports","vs/base/common/strings","vs/editor/common/editorCommon"],function(e,t,n,i){var r=function(){function e(e,t){var r=this;this.flags=t,t.forEach(function(t){switch(t){case i.CodeEditorStateFlag.Value:var o=e.getModel();r.modelVersionId=o?n.format("{0}#{1}",o.getAssociatedResource().toString(),o.getVersionId()):null;break;case i.CodeEditorStateFlag.Position:r.position=e.getPosition();break;case i.CodeEditorStateFlag.Selection:r.selection=e.getSelection();break;case i.CodeEditorStateFlag.Scroll:r.scrollLeft=e.getScrollLeft(),r.scrollTop=e.getScrollTop()}})}return e.prototype._equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.modelVersionId!==n.modelVersionId?!1:this.scrollLeft!==n.scrollLeft||this.scrollTop!==n.scrollTop?!1:!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position)?!1:!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection)?!1:!0},e.prototype.validate=function(t){return this._equals(new e(t,this.flags))},e}();t.EditorState=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/core/selection",["require","exports","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i){var r=function(e){function t(t,n,i,r){this.selectionStartLineNumber=t,this.selectionStartColumn=n,this.positionLineNumber=i,this.positionColumn=r,e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.clone=function(){return new t(this.selectionStartLineNumber,this.selectionStartColumn,this.positionLineNumber,this.positionColumn)},t.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"},t.prototype.equalsSelection=function(e){return t.selectionsEqual(this,e)},t.prototype.getDirection=function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?i.SelectionDirection.LTR:i.SelectionDirection.RTL},t.prototype.setEndPosition=function(e,n){return this.getDirection()===i.SelectionDirection.LTR?new t(this.startLineNumber,this.startColumn,e,n):new t(e,n,this.startLineNumber,this.startColumn)},t.prototype.setStartPosition=function(e,n){return this.getDirection()===i.SelectionDirection.LTR?new t(e,n,this.endLineNumber,this.endColumn):new t(this.endLineNumber,this.endColumn,e,n)},t.createSelection=function(e,n,i,r){return new t(e,n,i,r)},t.liftSelection=function(e){return new t(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)},t.selectionsEqual=function(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn},t.selectionsArrEqual=function(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;i>n;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0},t.isISelection=function(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn},t.createWithDirection=function(e,n,r,o,s){return s===i.SelectionDirection.LTR?new t(e,n,r,o):new t(r,o,e,n)},t}(n.Range);t.Selection=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/commands/replaceCommand",["require","exports","vs/editor/common/core/selection"],function(e,t,n){var i=function(){function e(e,t){this._range=e,this._text=t}return e.prototype.getText=function(){return this._text},e.prototype.getRange=function(){return this._range},e.prototype.setRange=function(e){this._range=e},e.prototype.getEditOperations=function(e,t){t.addEditOperation(this._range,this._text)},e.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),r=i[0].range;return new n.Selection(r.endLineNumber,r.endColumn,r.endLineNumber,r.endColumn)},e}();t.ReplaceCommand=i;var r=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),r=i[0].range;return new n.Selection(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn)},t}(i);t.ReplaceCommandWithoutChangingPosition=r;var o=function(e){function t(t,n,i,r){e.call(this,t,n),this._columnDeltaOffset=r,this._lineNumberDeltaOffset=i}return __extends(t,e),t.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),r=i[0].range;return new n.Selection(r.endLineNumber+this._lineNumberDeltaOffset,r.endColumn+this._columnDeltaOffset,r.endLineNumber+this._lineNumberDeltaOffset,r.endColumn+this._columnDeltaOffset)},t}(i);t.ReplaceCommandWithOffsetCursorState=o;var s=function(e){function t(t,n,i){e.call(this,t,n),this._initialSelection=i}return __extends(t,e),t.prototype.getEditOperations=function(t,n){e.prototype.getEditOperations.call(this,t,n),this._selectionId=n.trackSelection(this._initialSelection)},t.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},t}(i);t.ReplaceCommandThatPreservesSelection=s}),define("vs/editor/common/commands/surroundSelectionCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){var r=function(){function e(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}return e.prototype.getEditOperations=function(e,t){t.addEditOperation(new n.Range(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addEditOperation(new n.Range(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),r=n[0].range,o=n[1].range;return new i.Selection(r.endLineNumber,r.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)},e}();t.SurroundSelectionCommand=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/editorActionEnablement",["require","exports","vs/editor/common/editorCommon","vs/base/common/lifecycle"],function(e,t,n,i){function r(e,t,n){return new s([new c(t,e),new u(t,e,n)])}!function(e){e[e.TextFocus=1]="TextFocus",e[e.WidgetFocus=2]="WidgetFocus",e[e.Writeable=4]="Writeable",e[e.UpdateOnModelChange=8]="UpdateOnModelChange",e[e.UpdateOnConfigurationChange=16]="UpdateOnConfigurationChange",e[e.ShowInContextMenu=32]="ShowInContextMenu",e[e.UpdateOnCursorPositionChange=64]="UpdateOnCursorPositionChange"}(t.Behaviour||(t.Behaviour={}));var o=t.Behaviour;t.createActionEnablement=r;var s=function(){function e(e){this._delegates=e}return e.prototype.value=function(){return this._delegates.every(function(e){return e.value()})},e.prototype.reset=function(){this._delegates.forEach(function(e){e instanceof a&&e.reset()})},e.prototype.dispose=function(){this._delegates.forEach(function(e){return e.dispose()})},e}(),a=function(){function e(){this._value=null}return e.prototype.reset=function(){this._value=null},e.prototype.dispose=function(){},e.prototype.value=function(){return null===this._value&&(this._value=this._computeValue()),this._value},e.prototype._computeValue=function(){return!1},e}(),c=function(e){function t(t,i){var r=this;e.call(this),this._behaviour=t,this.editor=i,this.hasTextFocus=!1,this.hasWidgetFocus=!1,this.isReadOnly=!1,this._callOnDispose=[],this._behaviour&o.TextFocus&&(this._callOnDispose.push(this.editor.addListener2(n.EventType.EditorTextFocus,function(){return r._updateTextFocus(!0)})),this._callOnDispose.push(this.editor.addListener2(n.EventType.EditorTextBlur,function(){return r._updateTextFocus(!1)}))),this._behaviour&o.WidgetFocus&&(this._callOnDispose.push(this.editor.addListener2(n.EventType.EditorFocus,function(){return r._updateWidgetFocus(!0)})),this._callOnDispose.push(this.editor.addListener2(n.EventType.EditorBlur,function(){
return r._updateWidgetFocus(!1)}))),this._behaviour&o.Writeable&&this._callOnDispose.push(this.editor.addListener2(n.EventType.ConfigurationChanged,function(e){return r._update()}))}return __extends(t,e),t.prototype._updateTextFocus=function(e){this.hasTextFocus=e,this.reset()},t.prototype._updateWidgetFocus=function(e){this.hasWidgetFocus=e,this.reset()},t.prototype._update=function(){this.isReadOnly=this.editor.getConfiguration().readOnly,this.reset()},t.prototype.dispose=function(){e.prototype.dispose.call(this),i.disposeAll(this._callOnDispose)},t.prototype._computeValue=function(){return this._behaviour&o.TextFocus&&!this.hasTextFocus?!1:this._behaviour&o.WidgetFocus&&!this.hasWidgetFocus?!1:this._behaviour&o.Writeable&&this.isReadOnly?!1:!0},t}(a),u=function(e){function t(t,i,r){var s=this;e.call(this),this.editor=i,this._action=r,this._callOnDispose=[],t&o.UpdateOnModelChange&&(this._callOnDispose.push(this.editor.addListener(n.EventType.ModelChanged,function(){return s.reset()})),this._callOnDispose.push(this.editor.addListener(n.EventType.ModelModeChanged,function(){return s.reset()})),this._callOnDispose.push(this.editor.addListener(n.EventType.ModelModeSupportChanged,function(){return s.reset()}))),t&o.UpdateOnCursorPositionChange&&this._callOnDispose.push(this.editor.addListener(n.EventType.CursorPositionChanged,function(){return s.reset()}))}return __extends(t,e),t.prototype._computeValue=function(){return this.editor.getModel()&&this._action.isSupported()&&this._action.getEnablementState()?!0:!1},t}(a)}),define("vs/editor/common/model/modelLine",["require","exports","vs/base/common/strings","vs/editor/common/editorCommon"],function(e,t,n,i){function r(e){return"number"==typeof e[0]}function o(e,t,n){if(0===n)return null;if(!t||0===t.length)return null;if(1===t.length)if(r(t)){if(0===t[0])return null}else if(0===t[0].startIndex&&""===t[0].type&&!t[0].bracket)return null;return new f(e,t)}function s(e,t){return t&&0!==t.length?1===t.length&&0===t[0].startIndex?t[0].mode===e?null:new y(t[0].mode):new _(t):null}var a={adjust:function(){},finish:function(){}},c={adjust:function(){},finish:function(){}},u=function(){function e(e,t){this.lineNumber=e,this.text=t,this.isInvalid=!1}return e.prototype.setState=function(e){this._state=e},e.prototype.getState=function(){return this._state||null},e.prototype._setModeTransitions=function(e,t){var n=s(e,t);if(null===n){if("undefined"==typeof this._modeTransitions)return;return void(this._modeTransitions=null)}this._modeTransitions=n},e.prototype.getModeTransitions=function(){return this._modeTransitions?this._modeTransitions:g.INSTANCE},e.prototype.setTokens=function(e,t,n,i){this._setLineTokens(e,t),this._setModeTransitions(n,i)},e.prototype._setLineTokens=function(e,t){var n=o(e,t,this.text.length);if(null===n){if("undefined"==typeof this._lineTokens)return;return void(this._lineTokens=null)}this._lineTokens=n},e.prototype.getTokens=function(){return this._lineTokens?this._lineTokens:0===this.text.length?m.INSTANCE:v.INSTANCE},e.prototype._createTokensAdjuster=function(){if(!this._lineTokens)return a;var e=this._lineTokens,t=i.LineTokensBinaryEncoding,n=e.getBinaryEncodedTokens(),r=n.length,o=0,s=0,c=function(e,i,a){for(var c=a-1;e>s&&r>o;){if(s>0&&0!==i){var u=n[o]/t.TYPE_OFFSET&t.TYPE_MASK,l=n[o]/t.BRACKET_OFFSET&t.BRACKET_MASK,d=Math.max(c,s+i),h=l*t.BRACKET_OFFSET+u*t.TYPE_OFFSET+d*t.START_INDEX_OFFSET;if(0>i)for(;o>0;){var p=n[o-1]/t.START_INDEX_OFFSET&t.START_INDEX_MASK;if(!(p>=d))break;n.splice(o-1,1),r--,o--}n[o]=h}o++,r>o&&(s=n[o]/t.START_INDEX_OFFSET&t.START_INDEX_MASK)}},u=function(e,t){c(Number.MAX_VALUE,e,1)};return{adjust:c,finish:u}},e.prototype._setText=function(e){if(this.text=e,this._lineTokens){for(var t=i.LineTokensBinaryEncoding,n=this._lineTokens.getBinaryEncodedTokensMap(),r=this._lineTokens.getBinaryEncodedTokens(),o=this.text.length;r.length>0;){var s=r[r.length-1]/t.START_INDEX_OFFSET&t.START_INDEX_MASK;if(o>s)break;r.pop()}this._setLineTokens(n,r)}},e.prototype._createMarkersAdjuster=function(t){var n=this;if(!this._markers)return c;if(0===this._markers.length)return c;this._markers.sort(e._compareMarkers);var i=this._markers,r=i.length,o=0,s=i[o],a=function(e,a,c,u,l){for(;r>o&&(s.column<e||!l&&s.column===e&&(u||s.stickToPreviousCharacter));){if(0!==a){var d=Math.max(c,s.column+a);s.column!==d&&(t[s.id]=!0,s.oldLineNumber=s.oldLineNumber||n.lineNumber,s.oldColumn=s.oldColumn||s.column,s.column=Math.max(c,s.column+a))}o++,r>o&&(s=i[o])}},u=function(e,t){a(Number.MAX_VALUE,e,1,!1,!1)};return{adjust:a,finish:u}},e.prototype.applyEdits=function(e,t){for(var n=0,i=this.text,r=this._createTokensAdjuster(),o=this._createMarkersAdjuster(e),s=0,a=t.length;a>s;s++){var c=t[s],u=n+c.startColumn,l=n+c.endColumn,d=l-u,h=c.text.length;r.adjust(c.startColumn-1,n,1),o.adjust(c.startColumn,n,1,d>0,c.forceMoveMarkers);var p=Math.min(d,h);p>0&&(r.adjust(c.startColumn-1+p,n,u),o.adjust(c.startColumn+p,n,u,d>h,c.forceMoveMarkers)),i=i.substring(0,u-1)+c.text+i.substring(l-1),n+=h-d,r.adjust(c.endColumn,n,u),o.adjust(c.endColumn,n,u,!1,c.forceMoveMarkers)}return r.finish(n,i.length),o.finish(n,i.length),this._setText(i),n},e.prototype.split=function(t,n,i){var r=this.text.substring(0,n-1),o=this.text.substring(n-1),s=null;if(this._markers){this._markers.sort(e._compareMarkers);for(var a=0,c=this._markers.length;c>a;a++){var u=this._markers[a];if(u.column>n||u.column===n&&(i||!u.stickToPreviousCharacter)){var l=this._markers.slice(0,a);s=this._markers.slice(a),this._markers=l;break}}if(s)for(var a=0,c=s.length;c>a;a++){var u=s[a];t[u.id]=!0,u.oldLineNumber=u.oldLineNumber||this.lineNumber,u.oldColumn=u.oldColumn||u.column,u.column-=n-1}}this._setText(r);var d=new e(this.lineNumber+1,o);return s&&d.addMarkers(s),d},e.prototype.append=function(e,t){var n=this.text.length;this._setText(this.text+t.text);var r=t._lineTokens;if(r){var o=r.getBinaryEncodedTokens();if(n>0)for(var s=i.LineTokensBinaryEncoding,a=0,c=o.length;c>a;a++){var u=o[a],l=u/s.START_INDEX_OFFSET&s.START_INDEX_MASK,d=u/s.TYPE_OFFSET&s.TYPE_MASK,h=u/s.BRACKET_OFFSET&s.BRACKET_MASK,p=l+n,f=h*s.BRACKET_OFFSET+d*s.TYPE_OFFSET+p*s.START_INDEX_OFFSET;o[a]=f}var m=this._lineTokens;m?this._setLineTokens(m.getBinaryEncodedTokensMap(),m.getBinaryEncodedTokens().concat(o)):this._setLineTokens(r.getBinaryEncodedTokensMap(),o)}if(t._markers){for(var v=t._markers,a=0,c=v.length;c>a;a++){var g=v[a];e[g.id]=!0,g.oldLineNumber=g.oldLineNumber||t.lineNumber,g.oldColumn=g.oldColumn||g.column,g.column+=n}this.addMarkers(v)}},e.prototype.addMarker=function(e){e.line=this,this._markers?this._markers.push(e):this._markers=[e]},e.prototype.addMarkers=function(e){if(0!==e.length){var t,n;for(t=0,n=e.length;n>t;t++)e[t].line=this;this._markers?this._markers=this._markers.concat(e):this._markers=e.slice(0)}},e._compareMarkers=function(e,t){return e.column===t.column?(e.stickToPreviousCharacter?0:1)-(t.stickToPreviousCharacter?0:1):e.column-t.column},e.prototype.removeMarker=function(e){var t=this._indexOfMarkerId(e.id);t>=0&&this._markers.splice(t,1),e.line=null},e.prototype.removeMarkers=function(e){if(this._markers)for(var t=0,n=this._markers.length;n>t;t++){var i=this._markers[t];e[i.id]&&(i.line=null,this._markers.splice(t,1),n--,t--)}},e.prototype.getMarkers=function(){return this._markers?this._markers.slice(0):[]},e.prototype.updateLineNumber=function(e,t){if(this._markers){var n,i,r,o=this._markers;for(n=0,i=o.length;i>n;n++)r=o[n],e[r.id]=!0,r.oldLineNumber=r.oldLineNumber||this.lineNumber}this.lineNumber=t},e.prototype.deleteLine=function(e,t,n){if(this._markers){var i,r,o,s=this._markers;for(i=0,r=s.length;r>i;i++)o=s[i],e[o.id]=!0,o.oldColumn=o.oldColumn||o.column,o.oldLineNumber=o.oldLineNumber||n,o.column=t;return s}return[]},e.prototype._indexOfMarkerId=function(e){if(this._markers){var t,n,i=this._markers;for(t=0,n=i.length;n>t;t++)if(i[t].id===e)return t}return-1},e}();t.ModelLine=u;var l=i.LineTokensBinaryEncoding.getStartIndex,d=i.LineTokensBinaryEncoding.getType,h=i.LineTokensBinaryEncoding.getBracket,p=i.LineTokensBinaryEncoding.findIndexOfOffset,f=function(){function e(e,t){this.map=e,r(t)?this._tokens=t:this._tokens=i.LineTokensBinaryEncoding.deflateArr(e,t)}return e.prototype.toString=function(){return i.LineTokensBinaryEncoding.inflateArr(this.map,this._tokens).toString()},e.prototype.getBinaryEncodedTokensMap=function(){return this.map},e.prototype.getBinaryEncodedTokens=function(){return this._tokens},e.prototype.getTokenCount=function(){return this._tokens.length},e.prototype.getTokenStartIndex=function(e){return l(this._tokens[e])},e.prototype.getTokenType=function(e){return d(this.map,this._tokens[e])},e.prototype.getTokenBracket=function(e){return h(this._tokens[e])},e.prototype.getTokenEndIndex=function(e,t){return e+1<this._tokens.length?l(this._tokens[e+1]):t},e.prototype.equals=function(e){return this===e},e.prototype.findIndexOfOffset=function(e){return p(this._tokens,e)},e}();t.LineTokens=f;var m=function(){function e(){}return e.prototype.getBinaryEncodedTokens=function(){return e.TOKENS},e.prototype.getBinaryEncodedTokensMap=function(){return null},e.prototype.getTokenCount=function(){return 0},e.prototype.getTokenStartIndex=function(e){return 0},e.prototype.getTokenType=function(e){return n.empty},e.prototype.getTokenBracket=function(e){return 0},e.prototype.getTokenEndIndex=function(e,t){return 0},e.prototype.equals=function(e){return e===this},e.prototype.findIndexOfOffset=function(e){return 0},e.INSTANCE=new e,e.TOKENS=[],e}(),v=function(){function e(){}return e.prototype.getBinaryEncodedTokensMap=function(){return null},e.prototype.getBinaryEncodedTokens=function(){return e.TOKENS},e.prototype.getTokenCount=function(){return 1},e.prototype.getTokenStartIndex=function(e){return 0},e.prototype.getTokenType=function(e){return n.empty},e.prototype.getTokenBracket=function(e){return 0},e.prototype.getTokenEndIndex=function(e,t){return t},e.prototype.equals=function(e){return this===e},e.prototype.findIndexOfOffset=function(e){return 0},e.INSTANCE=new e,e.TOKENS=[0],e}();t.DefaultLineTokens=v;var g=function(){function e(){}return e.prototype.toArray=function(e){return[{startIndex:0,mode:e}]},e.INSTANCE=new e,e}(),y=function(){function e(e){this._mode=e}return e.prototype.toArray=function(e){return[{startIndex:0,mode:this._mode}]},e}(),_=function(){function e(e){this._modeTransitions=e}return e.prototype.toArray=function(e){return this._modeTransitions.slice(0)},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/strings","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/model/modelLine","vs/editor/common/editorCommon","vs/base/common/platform"],function(e,t,n,i,r,o,s,a,c){var u=" ".charCodeAt(0),l="	".charCodeAt(0),d=999,h=c.isLinux||c.isMacintosh?"\n":"\r\n",p=function(e){function t(t,n){t.push(a.EventType.ModelContentChanged),e.call(this,t),this._constructLines(n),this._setVersionId(1),this._isDisposed=!1,this._isDisposing=!1}return __extends(t,e),t.prototype.getVersionId=function(){if(this._isDisposed)throw new Error("TextModel.getVersionId: Model is disposed");return this._versionId},t.prototype.getAlternativeVersionId=function(){if(this._isDisposed)throw new Error("TextModel.getAlternativeVersionId: Model is disposed");return this._alternativeVersionId},t.prototype._increaseVersionId=function(){this._setVersionId(this._versionId+1)},t.prototype._setVersionId=function(e){this._versionId=e,this._alternativeVersionId=this._versionId},t.prototype._overwriteAlternativeVersionId=function(e){this._alternativeVersionId=e},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){if(this._isDisposed)throw new Error("TextModel.dispose: Model is disposed");this._isDisposed=!0,this._lines=null,this._EOL=null,this._BOM=null,e.prototype.dispose.call(this)},t.prototype._createContentChangedFlushEvent=function(){return{changeType:a.EventType.ModelContentChangedFlush,detail:null,versionId:-1,isUndoing:!1,isRedoing:!1}},t.prototype._emitContentChanged2=function(e,t,n,i,r,s,c,u){var l={range:new o.Range(e,t,n,i),rangeLength:r,text:s,versionId:this.getVersionId(),isUndoing:c,isRedoing:u};this._isDisposing||this.emit(a.EventType.ModelContentChanged2,l)},t.prototype._resetValue=function(e,n){this._constructLines(t.toRawText(n)),this._increaseVersionId(),e.detail=this.toRawText(),e.versionId=this._versionId},t.prototype.toRawText=function(){return{BOM:this._BOM,EOL:this._EOL,lines:this.getLinesContent(),length:this.getValueLength()}},t.prototype.setValue=function(e){if(this._isDisposed)throw new Error("TextModel.setValue: Model is disposed");if(null!==e){var t=this.getFullModelRange(),n=this.getValueLengthInRange(t),i=this.getLineCount(),r=this.getLineMaxColumn(i),o=this._createContentChangedFlushEvent();this._resetValue(o,e),this._emitModelContentChangedFlushEvent(o),this._emitContentChanged2(1,1,i,r,n,this.getValue(),!1,!1)}},t.prototype.getValue=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModel.getValue: Model is disposed");var n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._BOM+i:i},t.prototype.getValueLength=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModel.getValueLength: Model is disposed");var n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._BOM.length+i:i},t.prototype.getEmptiedValueInRange=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=a.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getEmptiedValueInRange: Model is disposed");var i=this.validateRange(e);if(i.isEmpty())return"";if(i.startLineNumber===i.endLineNumber)return this._repeatCharacter(t,i.endColumn-i.startColumn);var r=this._getEndOfLine(n),o=i.startLineNumber-1,s=i.endLineNumber-1,c=[];c.push(this._repeatCharacter(t,this._lines[o].text.length-i.startColumn+1));for(var u=o+1;s>u;u++)c.push(this._repeatCharacter(t,this._lines[u].text.length));return c.push(this._repeatCharacter(t,i.endColumn-1)),c.join(r)},t.prototype._repeatCharacter=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},t.prototype.getValueInRange=function(e,t){if(void 0===t&&(t=a.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getValueInRange: Model is disposed");var n=this.validateRange(e);if(n.isEmpty())return"";if(n.startLineNumber===n.endLineNumber)return this._lines[n.startLineNumber-1].text.substring(n.startColumn-1,n.endColumn-1);var i=this._getEndOfLine(t),r=n.startLineNumber-1,o=n.endLineNumber-1,s=[];s.push(this._lines[r].text.substring(n.startColumn-1));for(var c=r+1;o>c;c++)s.push(this._lines[c].text);return s.push(this._lines[o].text.substring(0,n.endColumn-1)),s.join(i)},t.prototype.getValueLengthInRange=function(e,t){if(void 0===t&&(t=a.EndOfLinePreference.TextDefined),this._isDisposed)throw new Error("TextModel.getValueInRange: Model is disposed");var n=this.validateRange(e);if(n.isEmpty())return 0;if(n.startLineNumber===n.endLineNumber)return n.endColumn-n.startColumn;var i=this._getEndOfLine(t).length,r=n.startLineNumber-1,o=n.endLineNumber-1,s=0;s+=this._lines[r].text.length-n.startColumn+1;for(var c=r+1;o>c;c++)s+=i+this._lines[c].text.length;return s+=i+(n.endColumn-1)},t.prototype.isDominatedByLongLines=function(e){if(this._isDisposed)throw new Error("TextModel.isDominatedByLongLines: Model is disposed");var t,n,i,r=0,o=0,s=this._lines;for(t=0,n=this._lines.length;n>t;t++)i=s[t].text.length,i>=e?o+=i:r+=i;return o>r},t.prototype._extractIndentationFactors=function(){var e,t,n,i,r,o,s,a,c,d,h,p=this._lines,f=0,m="",v=0,g=[],y=0,_=[];for(e=0,t=p.length;t>e;e++){for(s=p[e].text,a=!1,c=0,h=0,d=0,n=0,i=s.length;i>n;n++)if(r=s.charCodeAt(n),r===l)d++;else{if(r!==u){a=!0,c=n;break}h++}if(1===h&&(h=0),a&&(d>0||h>0)&&(f++,d>0&&y++,h>0&&(_[h]=(_[h]||0)+1)),a){h=0;var b=!0;for(n=0;v>n&&c>n;n++)o=m.charCodeAt(n),r=s.charCodeAt(n),b&&o!==r&&(b=!1),b||(o===u&&h++,r===u&&h++);for(;v>n;n++)o=m.charCodeAt(n),o===u&&h++;for(;c>n;n++)r=s.charCodeAt(n),r===u&&h++;1===h&&(h=0),h>0&&(g[h]=(g[h]||0)+1),v=c,m=s}}return{linesWithIndentationCount:f,linesIndentedWithTabs:y,relativeSpaceCounts:g,absoluteSpaceCounts:_}},t.prototype.guessIndentation=function(e){if(this._isDisposed)throw new Error("TextModel.guessIndentation: Model is disposed");var t,n,i=this._extractIndentationFactors(),r=(i.linesWithIndentationCount,i.linesIndentedWithTabs),o=i.absoluteSpaceCounts,s=i.relativeSpaceCounts,a=0;for(t=1,n=o.length;n>t;t++)a+=o[t]||0;var c,u,l,d,h=[];for(c=2,n=o.length;n>c;c++)if(o[c]){for(u=0,l=0,d=c;n>d;d+=c)o[d]?u+=o[d]:l+=c/d;h[c]=u/(1+l)}var p=e,f=0,m=[2,4,6,8];for(t=0;t<m.length;t++)c=m[t],u=(h[c]||0)+(s[c]||0),u>f&&(p=c,f=u);var v=!0;return r>a&&(v=!1),{insertSpaces:v,tabSize:p}},t.prototype.getLineCount=function(){if(this._isDisposed)throw new Error("TextModel.getLineCount: Model is disposed");return this._lines.length},t.prototype.getLineContent=function(e){if(this._isDisposed)throw new Error("TextModel.getLineContent: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].text},t.prototype.getLinesContent=function(){if(this._isDisposed)throw new Error("TextModel.getLineContent: Model is disposed");for(var e=[],t=0,n=this._lines.length;n>t;t++)e[t]=this._lines[t].text;return e},t.prototype.getEOL=function(){if(this._isDisposed)throw new Error("TextModel.getEOL: Model is disposed");return this._EOL},t.prototype.setEOL=function(e){var t=e===a.EndOfLineSequence.CRLF?"\r\n":"\n";if(this._EOL!==t){var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._EOL=t,this._increaseVersionId();var s=this._createContentChangedFlushEvent();s.detail=this.toRawText(),s.versionId=this._versionId,this._emitModelContentChangedFlushEvent(s),this._emitContentChanged2(1,1,r,o,i,this.getValue(),!1,!1)}},t.prototype.getLineMinColumn=function(e){return 1},t.prototype.getLineMaxColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineMaxColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].text.length+1},t.prototype.getLineFirstNonWhitespaceColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineFirstNonWhitespaceColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");var t=i.firstNonWhitespaceIndex(this._lines[e-1].text);return-1===t?0:t+1},t.prototype.getLineLastNonWhitespaceColumn=function(e){if(this._isDisposed)throw new Error("TextModel.getLineLastNonWhitespaceColumn: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");var t=i.lastNonWhitespaceIndex(this._lines[e-1].text);return-1===t?0:t+2},t.prototype.validateLineNumber=function(e){if(this._isDisposed)throw new Error("TextModel.validateLineNumber: Model is disposed");return 1>e&&(e=1),e>this._lines.length&&(e=this._lines.length),e},t.prototype.validatePosition=function(e){if(this._isDisposed)throw new Error("TextModel.validatePosition: Model is disposed");var t=e.lineNumber?e.lineNumber:1,n=e.column?e.column:1;1>t&&(t=1),t>this._lines.length&&(t=this._lines.length),1>n&&(n=1);var i=this.getLineMaxColumn(t);return n>i&&(n=i),new r.Position(t,n)},t.prototype.validateRange=function(e){if(this._isDisposed)throw new Error("TextModel.validateRange: Model is disposed");var t=this.validatePosition(new r.Position(e.startLineNumber,e.startColumn)),n=this.validatePosition(new r.Position(e.endLineNumber,e.endColumn));return new o.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.modifyPosition=function(e,t){if(this._isDisposed)throw new Error("TextModel.modifyPosition: Model is disposed");for(var n=this.validatePosition(e);t>0;){var i=this.getLineMaxColumn(n.lineNumber);if(n.column<i){var r=Math.min(t,i-n.column);t-=r,n.column+=r}if(0===t)break;if(t-=this._EOL.length,0>t)throw new Error("TextModel.modifyPosition: Breaking line terminators");if(++n.lineNumber,n.lineNumber>this._lines.length)throw new Error("TextModel.modifyPosition: Offset goes beyond the end of the model");n.column=1}for(;0>t;){if(n.column>1){var o=Math.min(-t,n.column-1);t+=o,n.column-=o}if(0===t)break;if(t+=this._EOL.length,t>0)throw new Error("TextModel.modifyPosition: Breaking line terminators");if(--n.lineNumber,n.lineNumber<1)throw new Error("TextModel.modifyPosition: Offset goes beyond the beginning of the model");n.column=this.getLineMaxColumn(n.lineNumber)}return n},t.prototype.getFullModelRange=function(){if(this._isDisposed)throw new Error("TextModel.getFullModelRange: Model is disposed");var e=this.getLineCount();return new o.Range(1,1,e,this.getLineMaxColumn(e))},t.prototype._emitModelContentChangedFlushEvent=function(e){this._isDisposing||this.emit(a.EventType.ModelContentChanged,e)},t.toRawText=function(e){for(var t=0,n=-1;-1!==(n=e.indexOf("\r",n+1));)t++;var r=e.split(/\r\n|\r|\n/),o="";i.startsWithUTF8BOM(r[0])&&(o=i.UTF8_BOM_CHARACTER,r[0]=r[0].substr(1));var s=r.length-1,a="";return a=0===s?h:t>s/2?"\r\n":"\n",{BOM:o,EOL:a,lines:r,length:e.length}},t.prototype._constructLines=function(e){var t,n,i=e.lines,r=[];for(t=0,n=i.length;n>t;t++)r.push(new s.ModelLine(t+1,i[t]));this._BOM=e.BOM,this._EOL=e.EOL,this._lines=r},t.prototype._getEndOfLine=function(e){switch(e){case a.EndOfLinePreference.LF:return"\n";case a.EndOfLinePreference.CRLF:return"\r\n";case a.EndOfLinePreference.TextDefined:return this.getEOL()}throw new Error("Unknown EOL preference")},t.prototype._toRegExp=function(e,t,n,r){if(""===e)return null;var o=null;try{o=i.createRegExp(e,t,n,r)}catch(s){return null}try{if(i.regExpLeadsToEndlessLoop(o))return null}catch(s){return null}return o},t.prototype.findMatches=function(e,t,n,i,r,s){if(void 0===s&&(s=d),this._isDisposed)throw new Error("Model.findMatches: Model is disposed");var a=this._toRegExp(e,n,i,r);if(!a)return[];var c;return c=o.Range.isIRange(t)?t:this.getFullModelRange(),this._doFindMatches(c,a,s)},t.prototype.findNextMatch=function(e,t,n,i,r){if(this._isDisposed)throw new Error("Model.findNextMatch: Model is disposed");var o=this._toRegExp(e,n,i,r);if(!o)return null;var s,a,c=this.validatePosition(t),u=this.getLineCount(),l=c.lineNumber;if(s=this._lines[l-1].text.substring(c.column-1),a=this._findMatchInLine(o,s,l,c.column-1))return a;for(var d=1;u>d;d++){var h=(l+d-1)%u;if(s=this._lines[h].text,a=this._findMatchInLine(o,s,h+1,0))return a}return null},t.prototype._doFindMatches=function(e,t,n){var i,r=[],o=0;if(e.startLineNumber===e.endLineNumber)return i=this._lines[e.startLineNumber-1].text.substring(e.startColumn-1,e.endColumn-1),o=this._findMatchesInLine(t,i,e.startLineNumber,e.startColumn-1,o,r,n),r;i=this._lines[e.startLineNumber-1].text.substring(e.startColumn-1),o=this._findMatchesInLine(t,i,e.startLineNumber,e.startColumn-1,o,r,n);for(var s=e.startLineNumber+1;s<e.endLineNumber&&n>o;s++)o=this._findMatchesInLine(t,this._lines[s-1].text,s,0,o,r,n);return n>o&&(i=this._lines[e.endLineNumber-1].text.substring(0,e.endColumn-1),o=this._findMatchesInLine(t,i,e.endLineNumber,0,o,r,n)),r},t.prototype._findMatchInLine=function(e,t,n,i){var r=e.exec(t);return r?new o.Range(n,r.index+1+i,n,r.index+1+r[0].length+i):null},t.prototype._findMatchesInLine=function(e,t,n,i,r,s,a){var c;e.lastIndex=0;do if(c=e.exec(t)){var u=new o.Range(n,c.index+1+i,n,c.index+1+c[0].length+i);if(u.equalsRange(s[s.length-1]))return r;if(s.push(u),r++,r>=a)return r}while(c);return r},t}(n.OrderGuaranteeEventEmitter);t.TextModel=p}),define("vs/editor/common/model/textModelWithTokensHelpers",["require","exports","vs/editor/common/modes/nullMode","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/core/arrays","vs/base/common/errors"],function(e,t,n,i,r,o,s){var a=r.LineTokensBinaryEncoding.getType,c=r.LineTokensBinaryEncoding.getBracket,u=r.LineTokensBinaryEncoding.getStartIndex,l=function(){function e(){}return e._safeGetWordDefinition=function(e){var t=null;if(e.tokenTypeClassificationSupport)try{t=e.tokenTypeClassificationSupport.getWordDefinition()}catch(n){s.onUnexpectedError(n)}return t},e.ensureValidWordDefinition=function(e){var t=n.NullMode.DEFAULT_WORD_REGEXP;if(e&&e instanceof RegExp)if(e.global)t=e;else{var i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),t=new RegExp(e.source,i)}return t.lastIndex=0,t},e.massageWordDefinitionOf=function(t){return e.ensureValidWordDefinition(e._safeGetWordDefinition(t))},e.getWords=function(t,n){if(!t._lineIsTokenized(n))return e._getWordsInText(t.getLineContent(n),e.massageWordDefinitionOf(t.getMode()));var i=[],r=t.getLineContent(n);if(r.length>0){var o,s,a,c,u,l,d,h,p,f,m,v,g=t._getLineModeTransitions(n);for(o=0,u=0,s=g.length;s>o;o++)if(d=e.massageWordDefinitionOf(g[o].mode),u=g[o].startIndex,l=s>o+1?g[o+1].startIndex:r.length,h=r.substring(u,l),p=h.match(d))for(m=0,a=0,c=p.length;c>a;a++)v=p[a],v.length>0&&(f=h.indexOf(v,m),m=f+v.length,i.push({start:u+f,end:u+m}))}return i},e._getWordsInText=function(e,t){var n,i,r,o,s,a,c=e.match(t)||[],u=[];for(n=0;n<c.length;n++)a=c[n].trim(),a.length>0&&(i=e.indexOf(a,r),r=i+a.length,o=i,s=r,u.push({start:o,end:s}));return u},e._getWordAtColumn=function(t,n,i,r){var o=r[i].startIndex,s=i+1<r.length?r[i+1].startIndex:t.length,a=r[i].mode;return e._getWordAtText(n,e.massageWordDefinitionOf(a),t.substring(o,s),o)},e.getWordAtPosition=function(t,n){if(!t._lineIsTokenized(n.lineNumber))return e._getWordAtText(n.column,e.massageWordDefinitionOf(t.getMode()),t.getLineContent(n.lineNumber),0);var i=null,r=t.getLineContent(n.lineNumber),s=t._getLineModeTransitions(n.lineNumber),a=n.column-1,c=o.Arrays.findIndexInSegmentsArray(s,a);return i=e._getWordAtColumn(r,n.column,c,s),!i&&c>0&&s[c].startIndex===a&&(i=e._getWordAtColumn(r,n.column,c-1,s)),i},e._getWordAtText=function(e,t,n,i){var r,o,s,a,c,u,l=n.match(t);if(l)for(r=0;r<l.length;r++)if(u=l[r].trim(),u.length>0&&(o=n.indexOf(u,s),s=o+u.length,a=i+o+1,c=i+s+1,e>=a&&c>=e))return{word:u,startColumn:a,endColumn:c};return null},e}();t.WordHelper=l;var d=function(){function e(){}return e._sign=function(e){return 0>e?-1:e>0?1:0},e._findMatchingBracketUp=function(t,n,r,o,s){var l,d,h,p=s;for(l=r;l>=1;l--){var f=t.getLineTokens(l,!1),m=f.getBinaryEncodedTokens(),v=f.getBinaryEncodedTokensMap(),g=t.getLineContent(l);for(h=(l===r?o:m.length)-1;h>=0;h--)if(a(v,m[h])===n&&(p+=e._sign(c(m[h])),0===p))return d=h===m.length-1?g.length:u(m[h+1]),new i.Range(l,u(m[h])+1,l,d+1)}return null},e._findMatchingBracketDown=function(t,n,r,o,s){var l,d,h,p,f,m=1;for(l=r,d=t.getLineCount();d>=l;l++){if(s&&!t._lineIsTokenized(l))return{range:null,isAccurate:!1};var v=t.getLineTokens(l,!1),g=v.getBinaryEncodedTokens(),y=v.getBinaryEncodedTokensMap(),_=t.getLineContent(l);for(p=l===r?o+1:0,f=g.length;f>p;p++)if(a(y,g[p])===n&&(m+=e._sign(c(g[p])),0===m))return h=p===g.length-1?_.length:u(g[p+1]),{range:new i.Range(l,u(g[p])+1,l,h+1),isAccurate:!0}}return{range:null,isAccurate:!0}},e.findMatchingBracketUp=function(t,n,i){var r,o,s,a=i.column-1,c=-1,l=t.getLineTokens(i.lineNumber,!1),d=l.getBinaryEncodedTokens(),h=t.getLineContent(i.lineNumber);for(r=0,o=d.length;-1===c&&o>r;r++)s=r===o-1?h.length:u(d[r+1]),u(d[r])<=a&&s>=a&&(c=r);return e._findMatchingBracketUp(t,n,i.lineNumber,c+1,0)},e.matchBracket=function(t,n,r){if(r&&!t._lineIsTokenized(n.lineNumber))return{brackets:null,isAccurate:!1};var o,s,l=t.getLineContent(n.lineNumber),d={brackets:null,isAccurate:!0};if(l.length>0){var h,p,f,m,v,g=n.column-1,y=t.getLineTokens(n.lineNumber,!1),_=y.getBinaryEncodedTokens(),b=y.getBinaryEncodedTokensMap();for(o=0,s=_.length;null===d.brackets&&s>o;o++)if(h=_[o],f=u(h),v=a(b,h),m=c(h),p=o===s-1?l.length:u(_[o+1]),g>=f&&p>=g){if(0>m){var E=e._findMatchingBracketUp(t,v,n.lineNumber,o,-1);E&&(d.brackets=[new i.Range(n.lineNumber,f+1,n.lineNumber,p+1),E])}if(null===d.brackets&&m>0){var S=e._findMatchingBracketDown(t,v,n.lineNumber,o,r);d.isAccurate=S.isAccurate,S.range&&(d.brackets=[new i.Range(n.lineNumber,f+1,n.lineNumber,p+1),S.range])}}}return d},e}();t.BracketsHelper=d}),define("vs/editor/common/model/tokenIterator",["require","exports","vs/editor/common/editorCommon"],function(e,t,n){var i=n.LineTokensBinaryEncoding.getStartIndex,r=n.LineTokensBinaryEncoding.inflate,o=function(){function e(e,t){this._model=e,this._currentLineNumber=t.lineNumber,this._currentTokenIndex=0,this._readLineTokens(this._currentLineNumber),this._next=null,this._prev=null;for(var n=t.column-1,r=Number.MAX_VALUE,o=this._currentTokens.length-1;o>=0;o--){if(i(this._currentTokens[o])<=n&&r>=n){this._currentTokenIndex=o,this._next=this._current(),this._prev=this._current();break}r=i(this._currentTokens[o])}}return e.prototype._readLineTokens=function(e){this._currentLineTokens=this._model.getLineTokens(e,!1),this._currentTokens=this._currentLineTokens.getBinaryEncodedTokens(),this._map=this._currentLineTokens.getBinaryEncodedTokensMap()},e.prototype._advanceNext=function(){if(this._prev=this._next,this._next=null,this._currentTokenIndex+1<this._currentTokens.length)this._currentTokenIndex++,this._next=this._current();else{for(;this._currentLineNumber+1<=this._model.getLineCount();)if(this._currentLineNumber++,this._readLineTokens(this._currentLineNumber),this._currentTokens.length>0){this._currentTokenIndex=0,this._next=this._current();break}null===this._next&&(this._readLineTokens(this._currentLineNumber),this._currentTokenIndex=this._currentTokens.length,this._advancePrev(),this._next=null)}},e.prototype._advancePrev=function(){if(this._next=this._prev,this._prev=null,this._currentTokenIndex>0)this._currentTokenIndex--,this._prev=this._current();else for(;this._currentLineNumber>1;)if(this._currentLineNumber--,this._readLineTokens(this._currentLineNumber),this._currentTokens.length>0){this._currentTokenIndex=this._currentTokens.length-1,this._prev=this._current();break}},e.prototype._current=function(){return{token:r(this._map,this._currentTokens[this._currentTokenIndex]),lineNumber:this._currentLineNumber,startColumn:i(this._currentTokens[this._currentTokenIndex])+1,endColumn:this._currentTokenIndex+1<this._currentTokens.length?i(this._currentTokens[this._currentTokenIndex+1])+1:this._model.getLineContent(this._currentLineNumber).length+1}},e.prototype.hasNext=function(){return null!==this._next},e.prototype.next=function(){var e=this._next;return this._advanceNext(),e},e.prototype.hasPrev=function(){return null!==this._prev},e.prototype.prev=function(){var e=this._prev;return this._advancePrev(),e},e.prototype._invalidate=function(){var e=function(){throw new Error("iteration isn't valid anymore")};this.hasNext=e,this.next=e,this.hasPrev=e,this.prev=e},e}();t.TokenIterator=o}),define("vs/editor/common/modes/autoIndentation",["require","exports","vs/base/common/strings","vs/editor/common/modes"],function(e,t,n,i){var r;!function(e){e[e.Unknown=0]="Unknown",e[e.Lowercase=1]="Lowercase",e[e.Uppercase=2]="Uppercase",e[e.Camelcase=3]="Camelcase"}(r||(r={}));var o=function(){function e(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=!1),this.brackets=e,this.regexBrackets=t?t:[],this.docComment=n?n:null,this.caseInsensitive=i?i:!1}return e.prototype.getElectricCharacters=function(){for(var e,t=[],n=this.brackets.length,i=0;n>i;i++)if(e=this.brackets[i],e.isElectric){var r=e.close.charAt(e.close.length-1);t.push(this.caseInsensitive?r.toLowerCase():r)}var o;n=this.regexBrackets.length;for(var i=0;n>i;i++)o=this.regexBrackets[i],o.openTrigger&&t.push(this.caseInsensitive?o.openTrigger.toLowerCase():o.openTrigger),o.closeTrigger&&t.push(this.caseInsensitive?o.closeTrigger.toLowerCase():o.closeTrigger);
if(this.docComment&&t.push(this.docComment.open.charAt(this.docComment.open.length-1)),this.caseInsensitive)for(var s=t.length,i=0;s>i;++i)t.push(t[i].toUpperCase());return t=t.filter(function(e,t,n){return n.indexOf(e)==t})},e.prototype.onEnter=function(e,t){return 0===e.getTokenCount()?null:this._onEnterRegexBrackets(e,t)},e.prototype.onElectricCharacter=function(e,t){return 0===e.getTokenCount()?null:this._onElectricCharacterDocComment(e,t)||this._onElectricCharacterRegexBrackets(e,t)||this._onElectricCharacterStandardBrackets(e,t)},e.prototype.stringIsBracket=function(e){var t=e;this.caseInsensitive&&(t=e.toLowerCase());for(var n,i=0;i<this.brackets.length;i++)if(n=this.brackets[i],t===n.open||t===n.close)return!0;return!1},e.prototype.containsTokenTypes=function(e,t){for(var n=t.split("."),i=0;i<n.length;++i)if(e.indexOf(n[i])<0)return!1;return!0},e.prototype._onEnterRegexBrackets=function(e,t){for(var n=0;n<this.regexBrackets.length;++n){var r=this.regexBrackets[n],o=e.getLineContent();this.caseInsensitive&&(o=o.toLowerCase());var s=o.substr(0,t),a=s.match(r.open);if(a){if(r.closeComplete){s=o.substring(t);var c=a[0].replace(r.open,r.closeComplete);if(0===s.indexOf(c))return{indentAction:i.IndentAction.IndentOutdent}}return{indentAction:i.IndentAction.Indent}}}return null},e.prototype._onElectricCharacterStandardBrackets=function(e,t){var i=e.findIndexOfOffset(t),r=e.getTokenText(i),o=e.getTokenType(i);if(!this.stringIsBracket(r))return null;if(i>=0&&e.getTokenEndIndex(i)-1>t)return null;var s=n.firstNonWhitespaceIndex(e.getLineContent());return-1!==s&&s<=t-r.length?null:{matchBracketType:o}},e.prototype._onElectricCharacterRegexBrackets=function(e,t){for(var n=e.getLineContent(),i=0;i<this.regexBrackets.length;++i){var r=this.regexBrackets[i];if(r.openTrigger&&r.closeComplete&&(n.charAt(t)===r.openTrigger||this.caseInsensitive&&n.charAt(t).toLowerCase()===r.openTrigger.toLowerCase())){var o=n.substr(0,t+1),s=o.match(r.open);if(s){var a=s[0].replace(r.open,r.closeComplete);return r.matchCase&&(a=this._changeLettercase(a,this._detectLetercase(s[0]))),{appendText:a}}}if(r.closeTrigger&&(n.charAt(t)===r.closeTrigger||this.caseInsensitive&&n.charAt(t).toLowerCase()===r.closeTrigger.toLowerCase())){var s=o.match(r.close);if(s){var c=s[0];return this.caseInsensitive&&(c=c.toLowerCase()),{matchBracketType:c.replace(r.close,r.tokenType)}}}}return null},e.prototype._onElectricCharacterDocComment=function(e,t){if(!this.docComment||!this.docComment.close)return null;var n=e.getLineContent(),i=n[t];if(i!==this.docComment.open.charAt(this.docComment.open.length-1))return null;if(n.indexOf(this.docComment.close,t)>=0)return null;var r=e.findIndexOfOffset(t);return this.containsTokenTypes(e.getTokenType(r),this.docComment.scope)?n.substring(e.getTokenStartIndex(r),t+1)!==this.docComment.open?null:{appendText:this.docComment.close}:null},e.prototype._detectLetercase=function(e){return e.toLowerCase()===e?r.Lowercase:e.toUpperCase()===e?r.Uppercase:e.length>1&&e.charAt(0).toUpperCase()===e.charAt(0)&&e.charAt(1).toLowerCase()===e.charAt(1)?r.Camelcase:r.Unknown},e.prototype._changeLettercase=function(e,t){switch(t){case r.Lowercase:return e.toLowerCase();case r.Uppercase:return e.toUpperCase();case r.Camelcase:for(var n=e.toLowerCase().split(" "),i=0;i<n.length;++i)n[i]=n[i].charAt(0).toUpperCase()+n[i].substr(1);return n.join(" ");default:return e}},e}();t.Brackets=o}),define("vs/editor/common/modes/languageSelector",["require","exports","vs/base/common/glob"],function(e,t,n){function i(e,t,n){return r(e,t,n)>0}function r(e,t,i){if(Array.isArray(e)){var o=e.map(function(e){return r(e,t,i)});return Math.max.apply(Math,o)}if("string"==typeof e)return e===i?10:"*"===e?5:0;if(e){var s=e,a=0;if(s.language)if(s.language===i)a+=10;else{if("*"!==s.language)return 0;a+=5}if(s.scheme){if(s.scheme!==t.scheme)return 0;a+=10}if(s.pattern)if(s.pattern===t.fsPath)a+=10;else{if(!n.match(s.pattern,t.fsPath))return 0;a+=5}return a}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,t.score=r}),define("vs/editor/common/modes/languageFeatureRegistry",["require","exports","vs/base/common/event","vs/base/common/arrays","vs/editor/common/modes/languageSelector"],function(e,t,n,i,r){var o=function(){function e(e){this._entries=[],this._onDidChange=new n.Emitter,this._supportName=e}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var n=this,i={selector:e,provider:t,_score:-1,_time:Date.now()};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),{dispose:function(){if(i){var e=n._entries.indexOf(i);e>=0&&(n._entries.splice(e,1),n._lastCandidate=void 0,n._onDidChange.fire(n._entries.length),i=void 0)}}}},e.prototype.has=function(e){return this.all(e).length>0},e.prototype.all=function(e){if(!e||e.isTooLargeForHavingAMode())return[];this._updateScores(e);for(var t=[],n=0,i=this._entries;n<i.length;n++){var r=i[n];r._score>0&&t.push(r.provider)}return e.getMode()&&e.getMode()[this._supportName]&&t.push(e.getMode()[this._supportName]),t},e.prototype.ordered=function(e){var t=[];return this._orderedForEach(e,function(e){return t.push(e.provider)}),t},e.prototype.orderedGroups=function(e){var t,n,i=[];return this._orderedForEach(e,function(e){t&&n===e._score?t.push(e.provider):(n=e._score,t=[e.provider],i.push(t))}),i},e.prototype._orderedForEach=function(t,n){if(t&&!t.isTooLargeForHavingAMode()){this._updateScores(t)&&this._sortByScore();var r,o=-1;t.getMode()&&t.getMode()[this._supportName]&&(r={selector:void 0,provider:t.getMode()[this._supportName],_score:.5,_time:0},o=~i.binarySearch(this._entries,r,e._compareByScoreAndTime));for(var s=Math.max(o+1,this._entries.length),a=0;s>a;a++)if(a===o)n(r);else{var c=this._entries[a];c._score>0&&n(c)}}},e.prototype._updateScores=function(e){var t={uri:e.getAssociatedResource().toString(),language:e.getModeId()};if(!this._lastCandidate||this._lastCandidate.language!==t.language||this._lastCandidate.uri!==t.uri){this._lastCandidate=t;for(var n=0,i=this._entries;n<i.length;n++){var o=i[n];o._score=r.score(o.selector,e.getAssociatedResource(),e.getModeId())}return!0}},e.prototype._sortByScore=function(){this._entries.sort(e._compareByScoreAndTime)},e._compareByScoreAndTime=function(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}),define("vs/editor/common/modes/modesFilters",["require","exports","vs/base/common/filters","vs/base/common/arrays"],function(e,t,n,i){function r(e){return function(t,n){var r=e(t,n.filterText||n.label);return i.isFalsyOrEmpty(r)?void 0:r}}function o(e,t){return function(n,i){return e(n,i)||t(n,i)}}function s(e,t){return function(n,i){return e(n,i)&&t(n,i)}}t.StrictPrefix=r(n.matchesStrictPrefix),t.Prefix=r(n.matchesPrefix),t.CamelCase=r(n.matchesCamelCase),t.ContiguousSubString=r(n.matchesContiguousSubString),t.or=o,t.and=s,t.DefaultFilter=o(o(t.Prefix,t.CamelCase),t.ContiguousSubString)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/supports",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/editor/common/modes/lineStream","vs/editor/common/modes/nullMode","vs/editor/common/modes/autoIndentation","vs/editor/common/modes/modesFilters","vs/editor/common/modes","vs/editor/common/core/arrays"],function(e,t,n,i,r,o,s,a,c,u){function l(e,t,n){var i=e.modeTransitions;if(1===i.length)return n(i[0].mode,e,t);var r=u.Arrays.findIndexInSegmentsArray(i,t),o=i[r].mode,s=i[r].startIndex,a=e.findIndexOfOffset(s),c=-1,l=-1;r+1<i.length?(l=e.findIndexOfOffset(i[r+1].startIndex),c=e.getTokenStartIndex(l)):(l=e.getTokenCount(),c=e.getLineContent().length);var d=e.getTokenStartIndex(a),h=new f(e,o,a,l,d,c);return n(o,h,t-d)}function d(e,t,n,r){if(void 0===r&&(r=!1),!Array.isArray(n)||0===n.length)return!1;if(e.getLineContent().length<=t)return!1;for(var o=e.findIndexOfOffset(t),s=e.getTokenType(o),a=0,c=n.length;c>a;a++)if(r){if(s.indexOf(n[a])>=0)return!0}else if(i.endsWith(s,n[a]))return!0;return!1}function h(e){return"function"==typeof e}var p=function(){function e(e,t,n){this.startIndex=e,this.type=t,this.bracket=n}return e.prototype.toString=function(){return"("+this.startIndex+", "+this.type+", "+this.bracket+")"},e}();t.Token=p,t.handleEvent=l,t.isLineToken=d;var f=function(){function e(e,t,n,i,r,o){this.modeTransitions=[{startIndex:0,mode:t}],this._actual=e,this._firstTokenInModeIndex=n,this._nextTokenAfterMode=i,this._firstTokenCharacterOffset=r,this._nextCharacterAfterModeIndex=o}return e.prototype.getLineContent=function(){var e=this._actual.getLineContent();return e.substring(this._firstTokenCharacterOffset,this._nextCharacterAfterModeIndex)},e.prototype.getTokenCount=function(){return this._nextTokenAfterMode-this._firstTokenInModeIndex},e.prototype.findIndexOfOffset=function(e){return this._actual.findIndexOfOffset(e+this._firstTokenCharacterOffset)-this._firstTokenInModeIndex},e.prototype.getTokenStartIndex=function(e){return this._actual.getTokenStartIndex(e+this._firstTokenInModeIndex)-this._firstTokenCharacterOffset},e.prototype.getTokenEndIndex=function(e){return this._actual.getTokenEndIndex(e+this._firstTokenInModeIndex)-this._firstTokenCharacterOffset},e.prototype.getTokenType=function(e){return this._actual.getTokenType(e+this._firstTokenInModeIndex)},e.prototype.getTokenBracket=function(e){return this._actual.getTokenBracket(e+this._firstTokenInModeIndex)},e.prototype.getTokenText=function(e){return this._actual.getTokenText(e+this._firstTokenInModeIndex)},e}();t.FilteredLineContext=f;var m=function(){function e(e){this._mode=e}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),e}();t.AbstractSupport=m;var v=function(e){function t(t,n,i,r){if(e.call(this,t),this.customization=n,this.supportsNestedModes=i,this._embeddedModesListeners={},this.supportsNestedModes&&!this.mode.registerSupport)throw new Error("Cannot be a mode with nested modes unless I can emit a tokenizationSupport changed event!");this.shouldGenerateEmbeddedModels=r,this.defaults={enterNestedMode:!h(n.enterNestedMode),getNestedMode:!h(n.getNestedMode),getNestedModeInitialState:!h(n.getNestedModeInitialState),getLeavingNestedModeData:!h(n.getLeavingNestedModeData),onReturningFromNestedMode:!h(n.onReturningFromNestedMode)}}return __extends(t,e),t.prototype.dispose=function(){for(var e in this._embeddedModesListeners)this._embeddedModesListeners[e].dispose(),delete this._embeddedModesListeners[e]},t.prototype.getInitialState=function(){return this.customization.getInitialState()},t.prototype.tokenize=function(e,t,n,i){return void 0===n&&(n=0),void 0===i&&(i=n+e.length),t.getMode()!==this.mode?this._nestedTokenize(e,t,n,i,[],[]):this._myTokenize(e,t,n,i,[],[])},t.prototype._nestedTokenize=function(e,t,n,i,r,s){for(var a=t.getStateData(),c=this.getLeavingNestedModeData(e,a),u=t;u.getStateData()&&u.getStateData().getMode()!==this.mode;)u=u.getStateData();var l=u.getMode();if(!c){var d;return d=l.tokenizationSupport?l.tokenizationSupport.tokenize(e,t,n,i):o.nullTokenize(l,e,t,n),d.tokens=r.concat(d.tokens),d.modeTransitions=s.concat(d.modeTransitions),d}var h=c.nestedModeBuffer;if(h.length>0){var p;p=l.tokenizationSupport?l.tokenizationSupport.tokenize(h,t,n,i):o.nullTokenize(l,h,t,n),t=p.endState,r=r.concat(p.tokens),s=s.concat(p.modeTransitions)}var f=c.bufferAfterNestedMode,m=c.stateAfterNestedMode;return m.setStateData(a.getStateData()),this.onReturningFromNestedMode(m,t),this._myTokenize(f,m,n+h.length,i,r,s)},t.prototype._myTokenize=function(e,n,i,o,s,a){var u,l,d=this,h=new r.LineStream(e),f=null,m=null;n=n.clone(),(a.length<=0||a[a.length-1].mode!==this.mode)&&a.push({startIndex:i,mode:this.mode});for(var v=Math.min(o-i,e.length),g=c.Bracket.None;h.pos()<v;){l=h.pos();do{if(u=n.tokenize(h),null===u||void 0===u||(void 0===u.type||null===u.type)&&(void 0===u.nextState||null===u.nextState))throw new Error("Tokenizer must return a valid state");if(u.nextState&&(u.nextState.setStateData(n.getStateData()),n=u.nextState),h.pos()<=l)throw new Error("Stream did not advance while tokenizing. Mode id is "+this.mode.getId()+' (stuck at token type: "'+u.type+'", prepend tokens: "'+s.map(function(e){return e.type}).join(",")+'").')}while(!u.type&&""!==u.type);if((f!==u.type||u.bracket||null===f)&&s.push(new p(l+i,u.type,u.bracket||g)),f=u.type,this.supportsNestedModes&&this.enterNestedMode(n)){var y=this._getEmbeddedLevel(n);if(y<t.MAX_EMBEDDED_LEVELS){var _=this.getNestedModeInitialState(n),b=_.state.getMode();if("function"==typeof b.addSupportChangedListener&&!this._embeddedModesListeners.hasOwnProperty(b.getId())){var E=!1;this._embeddedModesListeners[b.getId()]=b.addSupportChangedListener(function(e){E||e.tokenizationSupport&&(E=!0,d.mode.registerSupport("tokenizationSupport",function(e){return e.tokenizationSupport}),E=!1)})}if(!h.eos()){var S=e.substr(h.pos()),w=this._nestedTokenize(S,_.state,i+h.pos(),o,s,a);return w.retokenize=w.retokenize||_.missingModePromise,w}n=_.state,m=_.missingModePromise}}}return{tokens:s,actualStopOffset:h.pos()+i,modeTransitions:a,endState:n,retokenize:m}},t.prototype._getEmbeddedLevel=function(e){for(var t=-1;e;)t++,e=e.getStateData();return t},t.prototype.enterNestedMode=function(e){return this.defaults.enterNestedMode?!1:this.customization.enterNestedMode(e)},t.prototype.getNestedMode=function(e){return this.defaults.getNestedMode?null:this.customization.getNestedMode(e)},t._validatedNestedMode=function(e){var t=new o.NullMode,n=null;return e&&e.mode&&(t=e.mode),e&&e.missingModePromise&&(n=e.missingModePromise),{mode:t,missingModePromise:n}},t.prototype.getNestedModeInitialState=function(e){if(this.defaults.getNestedModeInitialState){var n,i=t._validatedNestedMode(this.getNestedMode(e)),r=i.missingModePromise;return n=i.mode.tokenizationSupport?i.mode.tokenizationSupport.getInitialState():new o.NullState(i.mode,null),n.setStateData(e),{state:n,missingModePromise:r}}return this.customization.getNestedModeInitialState(e)},t.prototype.getLeavingNestedModeData=function(e,t){return this.defaults.getLeavingNestedModeData?null:this.customization.getLeavingNestedModeData(e,t)},t.prototype.onReturningFromNestedMode=function(e,t){return this.defaults.onReturningFromNestedMode?null:this.customization.onReturningFromNestedMode(e,t)},t.MAX_EMBEDDED_LEVELS=5,t}(m);t.TokenizationSupport=v;var g=function(e){function t(t,n){e.call(this,t),this.contribution=n,this.brackets=new s.Brackets(n.brackets,n.regexBrackets,n.docComment,n.caseInsensitive)}return __extends(t,e),t.prototype.getElectricCharacters=function(){return Array.isArray(this.contribution.embeddedElectricCharacters)?this.contribution.embeddedElectricCharacters.concat(this.brackets.getElectricCharacters()):this.brackets.getElectricCharacters()},t.prototype.onElectricCharacter=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?n.brackets.onElectricCharacter(t,i):e.electricCharacterSupport?e.electricCharacterSupport.onElectricCharacter(t,i):null})},t.prototype.onEnter=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?n.brackets.onEnter(t,i):e.electricCharacterSupport?e.electricCharacterSupport.onEnter(t,i):null})},t}(m);t.BracketElectricCharacterSupport=g;var y=function(e){function t(t,n){e.call(this,t),this.contribution=n}return __extends(t,e),t.prototype.canFindDeclaration=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?!Array.isArray(n.contribution.tokens)||n.contribution.tokens.length<1||d(t,i,n.contribution.tokens):e.declarationSupport?e.declarationSupport.canFindDeclaration(t,i):!1})},t.prototype.findDeclaration=function(e,t){return this.contribution.findDeclaration(e,t)},t}(m);t.DeclarationSupport=y;var _=function(e){function t(t,n){e.call(this,t),this.contribution=n}return __extends(t,e),t.prototype.canFindTypeDeclaration=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?!Array.isArray(n.contribution.tokens)||n.contribution.tokens.length<1||d(t,i,n.contribution.tokens):e.typeDeclarationSupport?e.typeDeclarationSupport.canFindTypeDeclaration(t,i):!1})},t.prototype.findTypeDeclaration=function(e,t){return this.contribution.findTypeDeclaration(e,t)},t}(m);t.TypeDeclarationSupport=_;var b=function(e){function t(t,n){e.call(this,t),this.contribution=n}return __extends(t,e),t.prototype.canFindReferences=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?!Array.isArray(n.contribution.tokens)||n.contribution.tokens.length<1||d(t,i,n.contribution.tokens):e.referenceSupport?e.referenceSupport.canFindReferences(t,i):!1})},t.prototype.findReferences=function(e,t,n){return this.contribution.findReferences(e,t,n)},t}(m);t.ReferenceSupport=b;var E=function(e){function t(t,n){e.call(this,t),this.contribution=n}return __extends(t,e),t.prototype.getParameterHintsTriggerCharacters=function(){return this.contribution.triggerCharacters},t.prototype.shouldTriggerParameterHints=function(e,t){var n=this;return l(e,t,function(e,t,i){return n.mode===e?Array.isArray(n.contribution.excludeTokens)?1===n.contribution.excludeTokens.length&&"*"===n.contribution.excludeTokens[0]?!1:!d(t,i-1,n.contribution.excludeTokens):!0:e.parameterHintsSupport?e.parameterHintsSupport.shouldTriggerParameterHints(t,i):!1})},t.prototype.getParameterHints=function(e,t){return this.contribution.getParameterHints(e,t)},t}(m);t.ParameterHintsSupport=E;var S=function(e){function t(t,n){if(e.call(this,t),this.contribution=n,this.suggest=function(e,t){return n.suggest(e,t)},"function"==typeof n.getSuggestionDetails&&(this.getSuggestionDetails=function(e,t,i){return n.getSuggestionDetails(e,t,i)}),this.sortByType=[],this.separatorForType=[],Array.isArray(n.sortBy)&&n.sortBy.length>0)for(var i=0;i<n.sortBy.length;++i)this.sortByType.push(n.sortBy[i].type),this.separatorForType.push(n.sortBy[i].partSeparator)}return __extends(t,e),t.prototype.shouldAutotriggerSuggest=function(e,t,n){var i=this;return l(e,t,function(e,t,r){return i.mode===e?i.contribution.disableAutoTrigger?!1:Array.isArray(i.contribution.excludeTokens)?1===i.contribution.excludeTokens.length&&"*"===i.contribution.excludeTokens[0]?!1:!d(t,r-1,i.contribution.excludeTokens,!0):!0:e.suggestSupport?e.suggestSupport.shouldAutotriggerSuggest(t,r,n):!1})},t.prototype.getFilter=function(){return a.DefaultFilter},t.prototype.getSorter=function(){var e=this;return function(t,n){if(e.sortByType.length>0){var r=e.sortByType.indexOf(t.type),o=e.sortByType.indexOf(n.type);if(0>r&&(r=e.sortByType.length),0>o&&(o=e.sortByType.length),o>r)return-1;if(r>o)return 1;if(r<e.sortByType.length){var s=e.separatorForType[r],a="string"==typeof s&&s.length>0?t.label.split(s):[t.label],c="string"==typeof s&&s.length>0?n.label.split(s):[n.label];if(a.length<c.length)return-1;if(a.length>c.length)return 1;for(var u=0;u<a.length;u++){var l=i.localeCompare(a[u],c[u]);if(0!==l)return l}return 0}}var d=0;return t.sortText&&n.sortText&&(d=t.sortText.localeCompare(n.sortText)),d||(d=i.localeCompare(t.label.toLowerCase(),n.label.toLowerCase())),i.localeCompare(t.documentationLabel||"",n.documentationLabel||"")}},t.prototype.getTriggerCharacters=function(){return this.contribution.triggerCharacters},t.prototype.shouldShowEmptySuggestionList=function(){return!0},t}(m);t.SuggestSupport=S;var w=function(e){function t(t,n){e.call(this,t,n),this.suggest=function(e,t){return n.suggest(e,t).then(function(i){return n.composeSuggest(e,t,i)})}}return __extends(t,e),t}(S);t.ComposableSuggestSupport=w;var C=function(e){function t(t,n){e.call(this,t),this._autoClosingPairs=n.autoClosingPairs,this._surroundingPairs=Array.isArray(n.surroundingPairs)?n.surroundingPairs:n.autoClosingPairs}return __extends(t,e),t.prototype.getAutoClosingPairs=function(){return this._autoClosingPairs},t.prototype.shouldAutoClosePair=function(e,t,n){var i=this;return l(t,n,function(t,n,r){if(i.mode===t){if(0===n.getTokenCount())return!0;for(var o=n.findIndexOfOffset(r-1),s=n.getTokenType(o),a=0;a<i._autoClosingPairs.length;++a)if(i._autoClosingPairs[a].open===e){if(i._autoClosingPairs[a].notIn)for(var c=0;c<i._autoClosingPairs[a].notIn.length;++c)if(s.indexOf(i._autoClosingPairs[a].notIn[c])>-1)return!1;break}return!0}return t.characterPairSupport?t.characterPairSupport.shouldAutoClosePair(e,n,r):null})},t.prototype.getSurroundingPairs=function(){return this._surroundingPairs},t}(m);t.CharacterPairSupport=C;var T=function(){function e(){}return e.prototype.valueSetsReplace=function(e,t,n){for(var i=null,r=0,o=e.length;null===i&&o>r;r++)i=this.valueSetReplace(e[r],t,n);return i},e.prototype.valueSetReplace=function(e,t,n){var i=e.indexOf(t);return i>=0?(i+=n?1:-1,0>i?i=e.length-1:i%=e.length,e[i]):null},e}();t.ReplaceSupport=new T;var I=function(){function e(e){void 0===e&&(e=null),this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]],this.defaults={textReplace:!e||!h(e.textReplace),navigateValueSetFallback:!e||!h(e.navigateValueSetFallback)},this.customization=e}return e.prototype.navigateValueSet=function(e,t,i){var r=this.doNavigateValueSet(e,t,i,!0);return r&&r.value&&r.range?n.TPromise.as(r):this.defaults.navigateValueSetFallback?n.TPromise.as(null):this.customization.navigateValueSetFallback(e,t,i)},e.prototype.doNavigateValueSet=function(e,t,n,i){var r,o=this.getModel(e),s={range:null,value:null};if(i)t.startColumn===t.endColumn&&(t.endColumn+=1),r=o.getValueInRange(t),s.range=t;else{var a={lineNumber:t.startLineNumber,column:t.startColumn},c=o.getWordAtPosition(a);if(!c||-1===c.startColumn)return null;r=c.word,s.range={startLineNumber:t.startLineNumber,endLineNumber:t.endLineNumber,startColumn:c.startColumn,endColumn:c.endColumn}}var u=this.numberReplace(r,n);if(null!==u)s.value=u;else{var l=this.textReplace(r,n);if(null!==l)s.value=l;else if(i)return this.doNavigateValueSet(e,t,n,!1)}return s},e.prototype.numberReplace=function(e,t){var n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),r=parseFloat(e);return isNaN(i)||isNaN(r)||i!==r?null:0!==i||t?(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null},e.prototype.textReplace=function(e,n){return this.defaults.textReplace?t.ReplaceSupport.valueSetsReplace(this._defaultValueSet,e,n):this.customization.textReplace(e,n)||t.ReplaceSupport.valueSetsReplace(this._defaultValueSet,e,n)},e.prototype.getModel=function(e){throw new Error("Not implemented")},e}();t.AbstractInplaceReplaceSupport=I;var k=function(e){function t(t,n){void 0===n&&(n=null),e.call(this,n),this.resourceService=t}return __extends(t,e),t.prototype.getModel=function(e){return this.resourceService.get(e)},t}(I);t.WorkerInplaceReplaceSupport=k;var x=function(e){function t(t,n){void 0===n&&(n=null),e.call(this,n),this.modelService=t}return __extends(t,e),t.prototype.getModel=function(e){return this.modelService.getModel(e)},t}(I);t.MainInplaceReplaceSupport=x;var A=function(){function e(e){this._contribution=e}return e.prototype.getCommentsConfiguration=function(){return this._contribution.commentsConfiguration},e}();t.CommentsSupport=A;var R=function(){function e(e){this._contribution=e}return e.prototype.getWordDefinition=function(){return"undefined"==typeof this._contribution.wordDefinition?o.NullMode.DEFAULT_WORD_REGEXP:this._contribution.wordDefinition},e}();t.TokenTypeClassificationSupport=R}),define("vs/editor/common/modes/supports/onEnter",["require","exports","vs/editor/common/modes/supports","vs/editor/common/modes","vs/base/common/errors","vs/base/common/strings","vs/editor/common/core/position"],function(e,t,n,i,r,o,s){function a(e,t,n){var i;if(e.getMode().onEnterSupport)try{i=e.getMode().onEnterSupport.onEnter(e,new s.Position(t,n))}catch(o){r.onUnexpectedError(o)}if(!i&&e.getMode().electricCharacterSupport){var a=e.getLineContext(t);try{i=e.getMode().electricCharacterSupport.onEnter(a,n-1)}catch(o){r.onUnexpectedError(o)}}return i}function c(e,t,n){var r=e.getLineContent(t),s=o.getLeadingWhitespace(r);s.length>n-1&&(s=s.substring(0,n-1));var c=a(e,t,n);return c?c.appendText||(c.indentAction===i.IndentAction.Indent||c.indentAction===i.IndentAction.IndentOutdent?c.appendText="	":c.appendText=""):c={indentAction:i.IndentAction.None,appendText:""},c.removeText&&(s=s.substring(0,s.length-1)),{enterAction:c,indentation:s}}var u=function(){function e(t,n){n=n||{},n.brackets=n.brackets||[{open:"(",close:")"},{open:"{",close:"}"},{open:"[",close:"]"}],this._modeId=t,this._brackets=n.brackets.map(function(t){return{open:t.open,openRegExp:e._createOpenBracketRegExp(t.open),close:t.close,closeRegExp:e._createCloseBracketRegExp(t.close)}}),this._regExpRules=n.regExpRules||[],this._indentationRules=n.indentationRules}return e.prototype.onEnter=function(e,t){var i=this,r=e.getLineContext(t.lineNumber);return n.handleEvent(r,t.column-1,function(n,r,o){return i._modeId===n.getId()?i._onEnter(e,t):n.onEnterSupport?n.onEnterSupport.onEnter(e,t):null})},e.prototype._onEnter=function(e,t){var n=e.getLineContent(t.lineNumber),i=n.substr(0,t.column-1),r=n.substr(t.column-1),o=1===t.lineNumber?"":e.getLineContent(t.lineNumber-1);return this._actualOnEnter(o,i,r)},e.prototype._actualOnEnter=function(t,n,i){for(var r=0,o=this._regExpRules.length;o>r;r++){var s=this._regExpRules[r];if(s.beforeText.test(n)){if(!s.afterText)return s.action;if(s.afterText.test(i))return s.action}}if(n.length>0&&i.length>0)for(var r=0,o=this._brackets.length;o>r;r++){var a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return e._INDENT_OUTDENT}if(this._indentationRules){if(this._indentationRules.increaseIndentPattern&&this._indentationRules.increaseIndentPattern.test(n))return e._INDENT;if(this._indentationRules.indentNextLinePattern&&this._indentationRules.indentNextLinePattern.test(n))return e._INDENT;if(/^\s/.test(n)){if(this._indentationRules.decreaseIndentPattern&&this._indentationRules.decreaseIndentPattern.test(i))return e._OUTDENT;if(this._indentationRules.indentNextLinePattern&&this._indentationRules.indentNextLinePattern.test(t))return e._OUTDENT}}if(n.length>0)for(var r=0,o=this._brackets.length;o>r;r++){var a=this._brackets[r];if(a.openRegExp.test(n))return e._INDENT}return null},e._createOpenBracketRegExp=function(t){var n=o.escapeRegExpCharacters(t);return/\B/.test(n.charAt(0))||(n="\\b"+n),n+="\\s*$",e._safeRegExp(n)},e._createCloseBracketRegExp=function(t){var n=o.escapeRegExpCharacters(t);return/\B/.test(n.charAt(n.length-1))||(n+="\\b"),n="^\\s*"+n,e._safeRegExp(n)},e._safeRegExp=function(e){try{return new RegExp(e)}catch(t){return r.onUnexpectedError(t),null}},e._INDENT={indentAction:i.IndentAction.Indent},e._INDENT_OUTDENT={indentAction:i.IndentAction.IndentOutdent},e._OUTDENT={indentAction:i.IndentAction.Outdent},e}();t.OnEnterSupport=u,t.getRawEnterActionAtPosition=a,t.getEnterActionAtPosition=c}),define("vs/editor/common/commands/shiftCommand",["require","exports","vs/base/common/strings","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/modes/supports/onEnter"],function(e,t,n,i,r,o,s){var a=function(){function e(e,t){this._opts=t,this._selection=e,this._useLastEditRangeForCursorEndPosition=!1}return e.unshiftIndentCount=function(e,t,n){var i=o.CursorMoveHelper.visibleColumnFromColumn2(e,t,n),r=o.CursorMoveHelper.prevTabColumn(i,n);return r/n},e.shiftIndentCount=function(e,t,n){var i=o.CursorMoveHelper.visibleColumnFromColumn2(e,t,n),r=o.CursorMoveHelper.nextTabColumn(i,n);return r/n},e.prototype.getEditOperations=function(t,r){var a=this._selection.startLineNumber,c=this._selection.endLineNumber,u=" ".charCodeAt(0);1===this._selection.endColumn&&a!==c&&(c-=1);var l,d=this._opts.tabSize,h=this._opts.oneIndent,p=a===c,f=["",h];this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(a))&&(this._useLastEditRangeForCursorEndPosition=!0);var m=0,v=0;for(l=a;c>=l;l++,m=v){v=0;var g=t.getLineContent(l),y=n.firstNonWhitespaceIndex(g);if((!this._opts.isUnshift||0!==g.length&&0!==y)&&(p||this._opts.isUnshift||0!==g.length)){if(-1===y&&(y=g.length),l>1){var _=o.CursorMoveHelper.visibleColumnFromColumn2(g,y+1,d);if(_%d!==0){var b=s.getRawEnterActionAtPosition(t,l-1,t.getLineMaxColumn(l-1));if(b){if(v=m,b.appendText)for(var E=0,S=b.appendText.length;S>E&&d>v&&b.appendText.charCodeAt(E)===u;E++)v++;b.removeText&&(v=Math.max(0,v-b.removeText));for(var E=0;v>E&&(0!==y&&g.charCodeAt(y-1)===u);E++)y--}}}if(!this._opts.isUnshift||0!==y){var w=void 0;w=this._opts.isUnshift?e.unshiftIndentCount(g,y+1,d):e.shiftIndentCount(g,y+1,d);for(var E=f.length;w>=E;E++)f[E]=f[E-1]+h;r.addEditOperation(new i.Range(l,1,l,y+1),f[w])}}}this._selectionId=r.trackSelection(this._selection)},e.prototype.computeCursorState=function(e,t){if(this._useLastEditRangeForCursorEndPosition){var n=t.getInverseEditOperations()[0];return new r.Selection(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}return t.getTrackedSelection(this._selectionId)},e}();t.ShiftCommand=a}),define("vs/editor/common/controller/oneCursor",["require","exports","vs/base/common/strings","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/commands/shiftCommand","vs/editor/common/commands/replaceCommand","vs/editor/common/commands/surroundSelectionCommand","vs/editor/common/core/selection","vs/editor/common/modes","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/editorCommon","vs/base/common/errors","vs/editor/common/modes/supports/onEnter"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(){function e(e,t,n,o,s){this.editorId=e,this.model=t,this.configuration=n,this.modeConfiguration=o,this.viewModelHelper=s,this.helper=new v(this.model,this.configuration),this.bracketDecorations=[],this._set(new r.Range(1,1,1,1),0,new i.Position(1,1),0,new r.Range(1,1,1,1),new i.Position(1,1))}return e.prototype._set=function(t,n,i,r,o,s){this.selectionStart=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=r,this.viewSelectionStart=o,this.viewPosition=s,this._cachedSelection=e.computeSelection(this.selectionStart,this.position),this._cachedViewSelection=e.computeSelection(this.viewSelectionStart,this.viewPosition),this._selStartMarker=this._ensureMarker(this._selStartMarker,this._cachedSelection.startLineNumber,this._cachedSelection.startColumn,!0),this._selEndMarker=this._ensureMarker(this._selEndMarker,this._cachedSelection.endLineNumber,this._cachedSelection.endColumn,!1),this._selDirection=this._cachedSelection.getDirection()},e.prototype._ensureMarker=function(e,t,n,i){return e?(this.model._changeMarker(e,t,n),this.model._changeMarkerStickiness(e,i),e):this.model._addMarker(t,n,i)},e.prototype.saveState=function(){return{selectionStart:this.selectionStart,viewSelectionStart:this.viewSelectionStart,position:this.position,viewPosition:this.viewPosition,leftoverVisibleColumns:this.leftoverVisibleColumns,selectionStartLeftoverVisibleColumns:this.selectionStartLeftoverVisibleColumns}},e.prototype.restoreState=function(e){var t,n=this.model.validatePosition(e.position);t=e.selectionStart?this.model.validateRange(e.selectionStart):new r.Range(n.lineNumber,n.column,n.lineNumber,n.column);var i,o=this.viewModelHelper.validateViewPosition(e.viewPosition.lineNumber,e.viewPosition.column,n);i=e.viewSelectionStart?this.viewModelHelper.validateViewRange(e.viewSelectionStart.startLineNumber,e.viewSelectionStart.startColumn,e.viewSelectionStart.endLineNumber,e.viewSelectionStart.endColumn,t):this.viewModelHelper.convertModelRangeToViewRange(t),this._set(t,e.selectionStartLeftoverVisibleColumns,n,e.leftoverVisibleColumns,i,o);
},e.prototype.updateModeConfiguration=function(e){this.modeConfiguration=e},e.prototype.duplicate=function(){var t=new e(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper);return t._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,this.viewSelectionStart,this.viewPosition),t},e.prototype.dispose=function(){this.model._removeMarker(this._selStartMarker),this.model._removeMarker(this._selEndMarker),this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,[],this.editorId)},e.prototype.adjustBracketDecorations=function(){var e=null,t=this.getSelection();t.isEmpty()&&(e=this.model.matchBracket(this.position,!0));var n=[];if(e&&e.brackets){var i={stickiness:d.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"bracket-match"};n.push({range:e.brackets[0],options:i}),n.push({range:e.brackets[1],options:i})}this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,n,this.editorId)},e.computeSelection=function(e,t){var n,i,r,o;return e.isEmpty()?(n=e.startLineNumber,i=e.startColumn,r=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,i=e.endColumn,r=t.lineNumber,o=t.column):(n=e.startLineNumber,i=e.startColumn,r=t.lineNumber,o=t.column),new c.Selection(n,i,r,o)},e.prototype.setSelection=function(e){var t=this.model.validatePosition({lineNumber:e.positionLineNumber,column:e.positionColumn}),n=this.model.validatePosition({lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn}),i=new r.Range(n.lineNumber,n.column,n.lineNumber,n.column),o=this.viewModelHelper.convertModelPositionToViewPosition(t.lineNumber,t.column),s=this.viewModelHelper.convertModelRangeToViewRange(i);this._set(i,0,t,0,s,o)},e.prototype.setSelectionStart=function(e,t){this._set(e,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.collapseSelection=function(){var e=new r.Range(this.position.lineNumber,this.position.column,this.position.lineNumber,this.position.column),t=new r.Range(this.viewPosition.lineNumber,this.viewPosition.column,this.viewPosition.lineNumber,this.viewPosition.column);this._set(e,0,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.moveModelPosition=function(e,t,n,i,r){var o=this.viewModelHelper.convertModelPositionToViewPosition(t,n);this._move(e,t,n,o.lineNumber,o.column,i,r)},e.prototype.moveViewPosition=function(e,t,n,i,r){var o=this.viewModelHelper.convertViewToModelPosition(t,n);this._move(e,o.lineNumber,o.column,t,n,i,r)},e.prototype._move=function(e,t,n,r,o,s,a){if(a){var c=this.model.getEditableRange();if(t<c.startLineNumber||t===c.startLineNumber&&n<c.startColumn){t=c.startLineNumber,n=c.startColumn;var u=this.viewModelHelper.convertModelPositionToViewPosition(t,n);r=u.lineNumber,o=u.column}else if(t>c.endLineNumber||t===c.endLineNumber&&n>c.endColumn){t=c.endLineNumber,n=c.endColumn;var u=this.viewModelHelper.convertModelPositionToViewPosition(t,n);r=u.lineNumber,o=u.column}}this._actualMove(e,new i.Position(t,n),new i.Position(r,o),s)},e.prototype._actualMove=function(e,t,n,i){if(e)this._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,t,i,this.viewSelectionStart,n);else{var o=new r.Range(t.lineNumber,t.column,t.lineNumber,t.column),s=new r.Range(n.lineNumber,n.column,n.lineNumber,n.column);this._set(o,i,t,i,s,n)}},e.prototype._recoverSelectionFromMarkers=function(){var e=this.model._getMarker(this._selStartMarker),t=this.model._getMarker(this._selEndMarker);return this._selDirection===d.SelectionDirection.LTR?new c.Selection(e.lineNumber,e.column,t.lineNumber,t.column):new c.Selection(t.lineNumber,t.column,e.lineNumber,e.column)},e.prototype.recoverSelectionFromMarkers=function(e){e.cursorPositionChangeReason="recoverFromMarkers",e.shouldPushStackElementBefore=!0,e.shouldPushStackElementAfter=!0,e.shouldReveal=!1,e.shouldRevealHorizontal=!1;var t=this._recoverSelectionFromMarkers(),n=new r.Range(t.selectionStartLineNumber,t.selectionStartColumn,t.selectionStartLineNumber,t.selectionStartColumn),o=new i.Position(t.positionLineNumber,t.positionColumn),s=this.viewModelHelper.convertModelRangeToViewRange(n),a=this.viewModelHelper.convertViewToModelPosition(o.lineNumber,o.column);return this._set(n,0,o,0,s,a),!0},e.prototype.getSelectionStart=function(){return this.selectionStart},e.prototype.getPosition=function(){return this.position},e.prototype.getSelection=function(){return this._cachedSelection},e.prototype.getViewPosition=function(){return this.viewPosition},e.prototype.getViewSelection=function(){return this._cachedViewSelection},e.prototype.getValidViewPosition=function(){return this.viewModelHelper.validateViewPosition(this.viewPosition.lineNumber,this.viewPosition.column,this.position)},e.prototype.hasSelection=function(){return!this.getSelection().isEmpty()||!this.selectionStart.isEmpty()},e.prototype.getBracketsDecorations=function(){return this.bracketDecorations},e.prototype.getLeftoverVisibleColumns=function(){return this.leftoverVisibleColumns},e.prototype.getSelectionStartLeftoverVisibleColumns=function(){return this.selectionStartLeftoverVisibleColumns},e.prototype.setSelectionStartLeftoverVisibleColumns=function(e){this.selectionStartLeftoverVisibleColumns=e},e.prototype.validatePosition=function(e){return this.model.validatePosition(e)},e.prototype.validateViewPosition=function(e,t,n){return this.viewModelHelper.validateViewPosition(e,t,n)},e.prototype.convertViewToModelPosition=function(e,t){return this.viewModelHelper.convertViewToModelPosition(e,t)},e.prototype.convertModelPositionToViewPosition=function(e,t){return this.viewModelHelper.convertModelPositionToViewPosition(e,t)},e.prototype.findWord=function(e,t,n){return this.helper.findWord(e,t,n)},e.prototype.getLeftOfPosition=function(e,t){return this.helper.getLeftOfPosition(this.model,e,t)},e.prototype.getRightOfPosition=function(e,t){return this.helper.getRightOfPosition(this.model,e,t)},e.prototype.getPositionUp=function(e,t,n,i){return this.helper.getPositionUp(this.model,e,t,n,i)},e.prototype.getPositionDown=function(e,t,n,i){return this.helper.getPositionDown(this.model,e,t,n,i)},e.prototype.getColumnAtBeginningOfLine=function(e,t){return this.helper.getColumnAtBeginningOfLine(this.model,e,t)},e.prototype.getColumnAtEndOfLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.model,e,t)},e.prototype.getViewLineMaxColumn=function(e){return this.viewModelHelper.viewModel.getLineMaxColumn(e)},e.prototype.getLeftOfViewPosition=function(e,t){return this.helper.getLeftOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getRightOfViewPosition=function(e,t){return this.helper.getRightOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getViewPositionUp=function(e,t,n,i){return this.helper.getPositionUp(this.viewModelHelper.viewModel,e,t,n,i)},e.prototype.getViewPositionDown=function(e,t,n,i){return this.helper.getPositionDown(this.viewModelHelper.viewModel,e,t,n,i)},e.prototype.getColumnAtBeginningOfViewLine=function(e,t){return this.helper.getColumnAtBeginningOfLine(this.viewModelHelper.viewModel,e,t)},e.prototype.getColumnAtEndOfViewLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.viewModelHelper.viewModel,e,t)},e}();t.OneCursor=f;var m=function(){function e(){}return e.jumpToBracket=function(e,t){var n=e.getBracketsDecorations();if(2!==n.length)return!1;var i=e.model.getDecorationRange(n[0]),r=e.model.getDecorationRange(n[1]),o=e.getPosition();return g.isPositionAtRangeEdges(o,i)||g.isPositionInsideRange(o,i)?(e.moveModelPosition(!1,r.endLineNumber,r.endColumn,0,!1),!0):g.isPositionAtRangeEdges(o,r)||g.isPositionInsideRange(o,r)?(e.moveModelPosition(!1,i.endLineNumber,i.endColumn,0,!1),!0):!1},e.moveTo=function(e,t,n,i,r,o){var s,a=e.model.validatePosition(n);s=i?e.validateViewPosition(i.lineNumber,i.column,a):e.convertModelPositionToViewPosition(a.lineNumber,a.column);var c="mouse"===r?"explicit":null;return"api"===r&&(o.shouldRevealVerticalInCenter=!0),c&&(o.cursorPositionChangeReason=c),e.moveViewPosition(t,s.lineNumber,s.column,0,!1),!0},e.moveLeft=function(e,t,n){var i,r;if(e.hasSelection()&&!t){var o=e.getViewSelection(),s=e.validateViewPosition(o.startLineNumber,o.startColumn,e.getSelection().getStartPosition());i=s.lineNumber,r=s.column}else{var a=e.getValidViewPosition(),c=e.getLeftOfViewPosition(a.lineNumber,a.column);i=c.lineNumber,r=c.column}return n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,i,r,0,!0),!0},e.moveWordLeft=function(e,t,n){var r=e.getPosition(),o=r.lineNumber,s=r.column,a=!1;1===s&&o>1&&(a=!0,o-=1,s=e.model.getLineMaxColumn(o));var c=e.findWord(new i.Position(o,s),"left",!0);return s=c?c.start+1:1,n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,o,s,0,!0),!0},e.moveRight=function(e,t,n){var i,r;if(e.hasSelection()&&!t){var o=e.getViewSelection(),s=e.validateViewPosition(o.endLineNumber,o.endColumn,e.getSelection().getEndPosition());i=s.lineNumber,r=s.column}else{var a=e.getValidViewPosition(),c=e.getRightOfViewPosition(a.lineNumber,a.column);i=c.lineNumber,r=c.column}return n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,i,r,0,!0),!0},e.moveWordRight=function(e,t,n){var r=e.getPosition(),o=r.lineNumber,s=r.column,a=!1;s===e.model.getLineMaxColumn(o)&&o<e.model.getLineCount()&&(a=!0,o+=1,s=1);var c=e.findWord(new i.Position(o,s),"right",!0);return s=c?c.end+1:e.model.getLineMaxColumn(o),n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,o,s,0,!0),!0},e.moveDown=function(e,t,n,i){var r,o,s=n?e.configuration.editor.pageSize:1;if(e.hasSelection()&&!t){var a=e.getViewSelection(),c=e.validateViewPosition(a.endLineNumber,a.endColumn,e.getSelection().getEndPosition());r=c.lineNumber,o=c.column}else{var u=e.getValidViewPosition();r=u.lineNumber,o=u.column}var l=e.getViewPositionDown(r,o,e.getLeftoverVisibleColumns(),s);return i.cursorPositionChangeReason="explicit",e.moveViewPosition(t,l.lineNumber,l.column,l.leftoverVisibleColumns,!0),!0},e.translateDown=function(e,t){var n=e.getViewSelection(),i=e.getViewPositionDown(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1);t.cursorPositionChangeReason="explicit",e.moveViewPosition(!1,i.lineNumber,i.column,e.getLeftoverVisibleColumns(),!0);var r=e.getViewPositionDown(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1);return t.cursorPositionChangeReason="explicit",e.moveViewPosition(!0,r.lineNumber,r.column,r.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(i.leftoverVisibleColumns),!0},e.moveUp=function(e,t,n,i){var r,o,s=n?e.configuration.editor.pageSize:1;if(e.hasSelection()&&!t){var a=e.getViewSelection(),c=e.validateViewPosition(a.startLineNumber,a.startColumn,e.getSelection().getStartPosition());r=c.lineNumber,o=c.column}else{var u=e.getValidViewPosition();r=u.lineNumber,o=u.column}var l=e.getViewPositionUp(r,o,e.getLeftoverVisibleColumns(),s);return i.cursorPositionChangeReason="explicit",e.moveViewPosition(t,l.lineNumber,l.column,l.leftoverVisibleColumns,!0),!0},e.translateUp=function(e,t){var n=e.getViewSelection(),i=e.getViewPositionUp(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1);t.cursorPositionChangeReason="explicit",e.moveViewPosition(!1,i.lineNumber,i.column,e.getLeftoverVisibleColumns(),!0);var r=e.getViewPositionUp(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1);return t.cursorPositionChangeReason="explicit",e.moveViewPosition(!0,r.lineNumber,r.column,r.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(i.leftoverVisibleColumns),!0},e.moveToBeginningOfLine=function(e,t,n){var i=e.getValidViewPosition(),r=i.lineNumber,o=i.column;return o=e.getColumnAtBeginningOfViewLine(r,o),n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,r,o,0,!0),!0},e.moveToEndOfLine=function(e,t,n){var i=e.getValidViewPosition(),r=i.lineNumber,o=i.column;return o=e.getColumnAtEndOfViewLine(r,o),n.cursorPositionChangeReason="explicit",e.moveViewPosition(t,r,o,0,!0),!0},e.expandLineSelection=function(e,t){t.cursorPositionChangeReason="explicit";var n=e.getViewSelection(),i=n.startLineNumber,r=n.startColumn,o=n.endLineNumber,s=n.endColumn,a=e.getViewLineMaxColumn(o);if(1!==r||s!==a)r=1,s=a;else{var c=e.getViewPositionDown(o,s,0,1);o=c.lineNumber,s=e.getViewLineMaxColumn(o)}return e.moveViewPosition(!1,i,r,0,!0),e.moveViewPosition(!0,o,s,0,!0),!0},e.moveToBeginningOfBuffer=function(e,t,n){return n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,1,1,0,!0),!0},e.moveToEndOfBuffer=function(e,t,n){var i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return n.cursorPositionChangeReason="explicit",e.moveModelPosition(t,i,r,0,!0),!0},e.selectAll=function(e,t){var n,i,r,o,s=!0;if(e.model.hasEditableRange()){var a=e.model.getEditableRange(),c=e.getSelection();c.equalsRange(a)||(s=!1,n=a.startLineNumber,i=a.startColumn,r=a.endLineNumber,o=a.endColumn)}return s&&(n=1,i=1,r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r)),e.moveModelPosition(!1,n,i,0,!1),e.moveModelPosition(!0,r,o,0,!1),t.shouldReveal=!1,t.shouldRevealHorizontal=!1,!0},e.line=function(e,t,n,i,o){var s,a=e.validatePosition(n);s=i?e.validateViewPosition(i.lineNumber,i.column,a):e.convertModelPositionToViewPosition(a.lineNumber,a.column);var c,u;if(t&&e.hasSelection())c=s.lineNumber,u=a.isBeforeOrEqual(e.getSelectionStart().getStartPosition())?1:e.getViewLineMaxColumn(c);else{var l=new r.Range(s.lineNumber,1,s.lineNumber,e.getViewLineMaxColumn(s.lineNumber)),d=e.convertViewToModelPosition(l.startLineNumber,l.startColumn),h=e.convertViewToModelPosition(l.endLineNumber,l.endColumn);e.setSelectionStart(new r.Range(d.lineNumber,d.column,h.lineNumber,h.column),l),c=l.endLineNumber,u=l.endColumn}return o.cursorPositionChangeReason="explicit",o.shouldRevealHorizontal=!1,e.moveViewPosition(e.hasSelection(),c,u,0,!1),!0},e.word=function(e,t,n,i,o){var s,a,c,u,l=e.validatePosition(n),d=e.findWord(l,i);if(t&&e.hasSelection())s=d?d.start+1:l.column,a=d?d.end+1:l.column,c=l.lineNumber,u=l.isBeforeOrEqual(e.getSelectionStart().getStartPosition())?s:a;else{if(d)s=d.start+1,a=d.end+1;else{var h=e.model.getLineMaxColumn(l.lineNumber);l.column===h||"left"===i?(s=l.column-1,a=l.column):(s=l.column,a=l.column+1),1>=s&&(s=1),a>=h&&(a=h)}var p=new r.Range(l.lineNumber,s,l.lineNumber,a),f=e.convertModelPositionToViewPosition(l.lineNumber,s),m=e.convertModelPositionToViewPosition(l.lineNumber,a);e.setSelectionStart(p,new r.Range(f.lineNumber,f.column,m.lineNumber,m.column)),c=p.endLineNumber,u=p.endColumn}return o.cursorPositionChangeReason="explicit",e.moveModelPosition(e.hasSelection(),c,u,0,!1),!0},e.cancelSelection=function(e,t){return e.hasSelection()?(e.collapseSelection(),!0):!1},e._typeInterceptorEnter=function(e,t,n){return"\n"!==t?!1:this._enter(e,!1,n)},e.lineInsertBefore=function(e,t){var n=e.getPosition().lineNumber;if(1===n)return t.executeCommand=new s.ReplaceCommandWithoutChangingPosition(new r.Range(1,1,1,1),"\n"),!0;n--;var o=e.model.getLineMaxColumn(n);return this._enter(e,!1,t,new i.Position(n,o),new r.Range(n,o,n,o))},e.lineInsertAfter=function(e,t){var n=e.getPosition(),o=e.model.getLineMaxColumn(n.lineNumber);return this._enter(e,!1,t,new i.Position(n.lineNumber,o),new r.Range(n.lineNumber,o,n.lineNumber,o))},e.lineBreakInsert=function(e,t){return this._enter(e,!0,t)},e._enter=function(e,t,n,i,r){"undefined"==typeof i&&(i=e.getPosition()),"undefined"==typeof r&&(r=e.getSelection()),n.shouldPushStackElementBefore=!0;var a=p.getEnterActionAtPosition(e.model,i.lineNumber,i.column),c=a.enterAction,l=a.indentation;if(c.indentAction===u.IndentAction.None)this.actualType(e,"\n"+e.configuration.normalizeIndentation(l+c.appendText),t,n,r);else if(c.indentAction===u.IndentAction.Indent)this.actualType(e,"\n"+e.configuration.normalizeIndentation(l+c.appendText),t,n,r);else if(c.indentAction===u.IndentAction.IndentOutdent){var d=e.configuration.normalizeIndentation(l),h=e.configuration.normalizeIndentation(l+c.appendText),f="\n"+h+"\n"+d;t?n.executeCommand=new s.ReplaceCommandWithoutChangingPosition(r,f):n.executeCommand=new s.ReplaceCommandWithOffsetCursorState(r,f,-1,h.length-d.length)}else if(c.indentAction===u.IndentAction.Outdent){for(var m=o.ShiftCommand.unshiftIndentCount(l,l.length+1,e.configuration.getIndentationOptions().tabSize),v="",g=0;m>g;g++)v+="	";this.actualType(e,"\n"+e.configuration.normalizeIndentation(v+c.appendText),t,n,r)}return!0},e._typeInterceptorAutoClosingCloseChar=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var i=e.getSelection();if(!i.isEmpty()||!e.modeConfiguration.autoClosingPairsClose.hasOwnProperty(t))return!1;var o=e.getPosition(),a=e.model.getLineContent(o.lineNumber),c=a[o.column-1];if(c!==t)return!1;var u=new r.Range(o.lineNumber,o.column,o.lineNumber,o.column+1);return n.executeCommand=new s.ReplaceCommand(u,t),!0},e._typeInterceptorAutoClosingOpenChar=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var i=e.getSelection();if(!i.isEmpty()||!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(t))return!1;if(!e.model.getMode().characterPairSupport)return!1;var r=e.getPosition(),o=e.model.getLineContent(r.lineNumber),a=o[r.column-1];if(a){var c=!1;for(var u in e.modeConfiguration.autoClosingPairsClose)if(a===u){c=!0;break}if(!c&&!/\s/.test(a))return!1}var l=e.model.getLineContext(r.lineNumber),d=!1;try{d=e.model.getMode().characterPairSupport.shouldAutoClosePair(t,l,r.column-1)}catch(p){h.onUnexpectedError(p)}if(!d)return!1;n.shouldPushStackElementBefore=!0;var f=e.modeConfiguration.autoClosingPairsOpen[t];return n.executeCommand=new s.ReplaceCommandWithOffsetCursorState(i,t+f,0,-f.length),!0},e._typeInterceptorSurroundSelection=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var i=e.getSelection();if(i.isEmpty()||!e.modeConfiguration.surroundingPairs.hasOwnProperty(t))return!1;var r,o,s,c,u,l,d=!0,h="	".charCodeAt(0),p=" ".charCodeAt(0);for(r=i.startLineNumber;r<=i.endLineNumber;r++)for(l=e.model.getLineContent(r),o=r===i.startLineNumber?i.startColumn-1:0,s=r===i.endLineNumber?i.endColumn-1:l.length,c=o;s>c;c++)u=l.charCodeAt(c),u!==h&&u!==p&&(d=!1,r=i.endLineNumber+1,c=s);if(d)return!1;var f=e.modeConfiguration.surroundingPairs[t];return n.shouldPushStackElementBefore=!0,n.shouldPushStackElementAfter=!0,n.executeCommand=new a.SurroundSelectionCommand(i,t,f),!0},e._typeInterceptorElectricChar=function(e,t,n){var i=this;return e.modeConfiguration.electricChars.hasOwnProperty(t)?(n.postOperationRunnable=function(t){return i._typeInterceptorElectricCharRunnable(e,t)},this.actualType(e,t,!1,n)):!1},e._typeInterceptorElectricCharRunnable=function(e,t){var i,o=e.getPosition(),a=e.model.getLineContent(o.lineNumber),c=e.model.getLineContext(o.lineNumber);if(e.model.getMode().electricCharacterSupport)try{i=e.model.getMode().electricCharacterSupport.onElectricCharacter(c,o.column-2)}catch(u){h.onUnexpectedError(u)}if(i){var l=i.matchBracketType,d=i.appendText;if(l){var p=null;if(l&&(p=e.model.findMatchingBracketUp(l,o)),p){var f=p.startLineNumber,m=e.model.getLineContent(f),v=n.getLeadingWhitespace(m),g=e.configuration.normalizeIndentation(v),y=e.model.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,_=a.substring(0,y-1);if(_!==g){var b=a.substring(y-1,o.column-1),E=g+b,S=new r.Range(o.lineNumber,1,o.lineNumber,o.column);t.shouldPushStackElementAfter=!0,t.executeCommand=new s.ReplaceCommand(S,E)}}}else if(d){var w=-d.length;i.advanceCount&&(w+=i.advanceCount),t.shouldPushStackElementAfter=!0,t.executeCommand=new s.ReplaceCommandWithOffsetCursorState(e.getSelection(),d,0,w)}}},e.actualType=function(e,t,n,i,r){return"undefined"==typeof r&&(r=e.getSelection()),n?i.executeCommand=new s.ReplaceCommandWithoutChangingPosition(r,t):i.executeCommand=new s.ReplaceCommand(r,t),!0},e.type=function(e,t,n){return this._typeInterceptorEnter(e,t,n)?!0:this._typeInterceptorAutoClosingCloseChar(e,t,n)?!0:this._typeInterceptorAutoClosingOpenChar(e,t,n)?!0:this._typeInterceptorSurroundSelection(e,t,n)?!0:this._typeInterceptorElectricChar(e,t,n)?!0:this.actualType(e,t,!1,n)},e.replacePreviousChar=function(e,t,n){var i,o=e.getPosition();return i=o.column>1?new r.Range(o.lineNumber,o.column-1,o.lineNumber,o.column):new r.Range(o.lineNumber,o.column,o.lineNumber,o.column),n.executeCommand=new s.ReplaceCommand(i,t),!0},e._goodIndentForLine=function(e,t){var i=t-1;for(i=t-1;i>=1;i--){var r=e.model.getLineContent(i),s=n.lastNonWhitespaceIndex(r);if(s>=0)break}if(1>i)return"	";var a,c=p.getEnterActionAtPosition(e.model,i,e.model.getLineMaxColumn(i));if(c.enterAction.indentAction===u.IndentAction.Outdent){var l=o.ShiftCommand.unshiftIndentCount(c.indentation,c.indentation.length,e.configuration.getIndentationOptions().tabSize);a="";for(var d=0;l>d;d++)a+="	";a=e.configuration.normalizeIndentation(a)}else a=c.indentation;var h=a+c.enterAction.appendText;return 0===h.length?"	":h},e.tab=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i="";if(1===e.model.getLineMaxColumn(n.startLineNumber))i=e.configuration.normalizeIndentation(this._goodIndentForLine(e,n.startLineNumber));else{var r=e.getPosition();if(e.configuration.getIndentationOptions().insertSpaces)for(var o=l.CursorMoveHelper.nextTabColumn(r.column-1,e.configuration.getIndentationOptions().tabSize),a=r.column;o>=a;a++)i+=" ";else i="	"}return t.executeCommand=new s.ReplaceCommand(n,i),!0}return this.indent(e,t)},e.indent=function(e,t){var n=e.getSelection();return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new o.ShiftCommand(n,{isUnshift:!1,tabSize:e.configuration.getIndentationOptions().tabSize,oneIndent:e.configuration.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.outdent=function(e,t){var n=e.getSelection();return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new o.ShiftCommand(n,{isUnshift:!0,tabSize:e.configuration.getIndentationOptions().tabSize,oneIndent:e.configuration.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.paste=function(e,t,n,i){var o=e.getPosition();if(i.cursorPositionChangeReason="paste",n&&"\n"===t.charAt(t.length-1)&&t.indexOf("\n")===t.length-1){var a=new r.Range(o.lineNumber,1,o.lineNumber,1);return i.executeCommand=new s.ReplaceCommand(a,t),!0}return i.executeCommand=new s.ReplaceCommand(e.getSelection(),t),!0},e._autoClosingPairDelete=function(e,t){if(!e.configuration.editor.autoClosingBrackets)return!1;var n=e.getPosition(),i=e.model.getLineContent(n.lineNumber),o=i[n.column-2];if(!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(o))return!1;var a=i[n.column-1],c=e.modeConfiguration.autoClosingPairsOpen[o];if(a!==c)return!1;var u=new r.Range(n.lineNumber,n.column-1,n.lineNumber,n.column+1);return t.executeCommand=new s.ReplaceCommand(u,""),!0},e.deleteLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),o=e.getLeftOfPosition(i.lineNumber,i.column);n=new r.Range(o.lineNumber,o.column,i.lineNumber,i.column)}return n.isEmpty()?!0:(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new s.ReplaceCommand(n,""),!0)},e.deleteWordLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),o=i.lineNumber,a=i.column;if(1===o&&1===a)return!0;var c=e.findWord(i,"left",!0);a=c?c.end+1<a?c.end+1:c.start+1:1;var u=new r.Range(o,a,o,i.column);if(!u.isEmpty())return t.executeCommand=new s.ReplaceCommand(u,""),!0}return this.deleteLeft(e,t)},e.deleteRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),o=e.getRightOfPosition(i.lineNumber,i.column);n=new r.Range(o.lineNumber,o.column,i.lineNumber,i.column)}return n.isEmpty()?!0:(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new s.ReplaceCommand(n,""),!0)},e.deleteWordRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var o=e.getPosition(),a=o.lineNumber,c=o.column,u=e.model.getLineCount(),l=e.model.getLineMaxColumn(a);if(a===u&&c===l)return!0;var d=e.findWord(new i.Position(a,c),"right",!0);c=d?d.start+1>c?d.start+1:d.end+1:l;var h=new r.Range(a,c,a,o.column);if(!h.isEmpty())return t.executeCommand=new s.ReplaceCommand(h,""),!0}return this.deleteRight(e,t)},e.deleteAllLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),o=i.lineNumber,a=i.column;if(1===a)return!0;var c=new r.Range(o,1,o,a);if(!c.isEmpty())return t.executeCommand=new s.ReplaceCommand(c,""),!0}return this.deleteLeft(e,t)},e.deleteAllRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var i=e.getPosition(),o=i.lineNumber,a=i.column,c=e.model.getLineMaxColumn(o);if(a===c)return!0;var u=new r.Range(o,a,o,c);if(!u.isEmpty())return t.executeCommand=new s.ReplaceCommand(u,""),!0}return this.deleteRight(e,t)},e.cut=function(e,t,n){var i=e.getSelection();if(i.isEmpty()){if(!t)return!1;var o,a,c,u,l=e.getPosition();l.lineNumber<e.model.getLineCount()?(o=l.lineNumber,a=1,c=l.lineNumber+1,u=1):l.lineNumber>1?(o=l.lineNumber-1,a=e.model.getLineMaxColumn(l.lineNumber-1),c=l.lineNumber,u=e.model.getLineMaxColumn(l.lineNumber)):(o=l.lineNumber,a=1,c=l.lineNumber,u=e.model.getLineMaxColumn(l.lineNumber));var d=new r.Range(o,a,c,u);d.isEmpty()||(n.executeCommand=new s.ReplaceCommand(d,""))}else this.deleteRight(e,n);return!0},e}();t.OneCursorOp=m;var v=function(){function e(e,t){this.model=e,this.configuration=t,this.moveHelper=new l.CursorMoveHelper(this.configuration)}return e.prototype.getLeftOfPosition=function(e,t,n){return this.moveHelper.getLeftOfPosition(e,t,n)},e.prototype.getRightOfPosition=function(e,t,n){return this.moveHelper.getRightOfPosition(e,t,n)},e.prototype.getPositionUp=function(e,t,n,i,r){return this.moveHelper.getPositionUp(e,t,n,i,r)},e.prototype.getPositionDown=function(e,t,n,i,r){return this.moveHelper.getPositionDown(e,t,n,i,r)},e.prototype.getColumnAtBeginningOfLine=function(e,t,n){return this.moveHelper.getColumnAtBeginningOfLine(e,t,n)},e.prototype.getColumnAtEndOfLine=function(e,t,n){return this.moveHelper.getColumnAtEndOfLine(e,t,n)},e.prototype.nextTabColumn=function(e){return l.CursorMoveHelper.nextTabColumn(e,this.configuration.getIndentationOptions().tabSize)},e.prototype.prevTabColumn=function(e){return l.CursorMoveHelper.prevTabColumn(e,this.configuration.getIndentationOptions().tabSize)},e.prototype.findWord=function(e,t,n){void 0===n&&(n=!1);var i,r,o,s=this.model.getWords(e.lineNumber);if(n){if(i=e.column-1,"left"===t){for(r=s.length-1;r>=0;r--)if(!(s[r].start>=i))return s[r]}else for(r=0,o=s.length;o>r;r++)if(!(s[r].end<=i))return s[r]}else for(i=e.column,"left"===t?1!==i&&(i-=.1):i!==this.model.getLineMaxColumn(e.lineNumber)&&(i+=.1),i-=1,r=0,o=s.length;o>r;r++)if(s[r].start<=i&&i<=s[r].end)return s[r];return null},e}(),g=function(){function e(){}return e.rangeContainsPosition=function(e,t){return t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber?!1:t.lineNumber===e.startLineNumber&&t.column<e.startColumn?!1:t.lineNumber===e.endLineNumber&&t.column>e.endColumn?!1:!0},e.isPositionInsideRange=function(e,t){return e.lineNumber<t.startLineNumber?!1:e.lineNumber>t.endLineNumber?!1:e.lineNumber===t.startLineNumber&&e.column<t.startColumn?!1:e.lineNumber===t.endLineNumber&&e.column>t.endColumn?!1:!0},e.isPositionAtRangeEdges=function(e,t){return e.lineNumber===t.startLineNumber&&e.column===t.startColumn?!0:e.lineNumber===t.endLineNumber&&e.column===t.endColumn?!0:!1},e}()}),define("vs/editor/common/controller/cursorCollection",["require","exports","vs/editor/common/core/selection","vs/editor/common/controller/oneCursor","vs/base/common/errors"],function(e,t,n,i,r){var o=function(){function e(e,t,n,r){this.editorId=e,this.model=t,this.configuration=n,this.viewModelHelper=r,this.modeConfiguration=this.getModeConfiguration(),this.primaryCursor=new i.OneCursor(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper),this.secondaryCursors=[],this.lastAddedCursorIndex=0}return e.prototype.dispose=function(){this.primaryCursor.dispose(),this.killSecondaryCursors()},e.prototype.saveState=function(){return{primary:this.primaryCursor.saveState(),secondary:this.secondaryCursors.map(function(e){return e.saveState()})}},e.prototype.restoreState=function(e){this.primaryCursor.restoreState(e.primary),this.killSecondaryCursors();for(var t=0;t<e.secondary.length;t++)this.addSecondaryCursor(null),this.secondaryCursors[t].restoreState(e.secondary[t])},e.prototype.updateMode=function(){var e=this;this.modeConfiguration=this.getModeConfiguration(),this.getAll().forEach(function(t){t.updateModeConfiguration(e.modeConfiguration)})},e.prototype.getAll=function(){var e=[];return e.push(this.primaryCursor),e=e.concat(this.secondaryCursors)},e.prototype.getPosition=function(e){return 0===e?this.primaryCursor.getPosition():this.secondaryCursors[e-1].getPosition()},e.prototype.getViewPosition=function(e){return 0===e?this.primaryCursor.getViewPosition():this.secondaryCursors[e-1].getViewPosition()},e.prototype.getPositions=function(){var e=[];e.push(this.primaryCursor.getPosition());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getPosition());return e},e.prototype.getViewPositions=function(){var e=[];e.push(this.primaryCursor.getViewPosition());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getViewPosition());return e},e.prototype.getSelection=function(e){return 0===e?this.primaryCursor.getSelection():this.secondaryCursors[e-1].getSelection()},e.prototype.getSelections=function(){var e=[];e.push(this.primaryCursor.getSelection());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getSelection());return e},e.prototype.getViewSelections=function(){var e=[];e.push(this.primaryCursor.getViewSelection());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].getViewSelection());return e},e.prototype.setSelections=function(e){this.primaryCursor.setSelection(e[0]),this._setSecondarySelections(e.slice(1))},e.prototype.killSecondaryCursors=function(){return this._setSecondarySelections([])>0},e.prototype.normalize=function(){this._mergeCursorsIfNecessary(),this.primaryCursor.adjustBracketDecorations();for(var e=0,t=this.secondaryCursors.length;t>e;e++)this.secondaryCursors[e].adjustBracketDecorations()},e.prototype.addSecondaryCursor=function(e){var t=new i.OneCursor(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper);e&&t.setSelection(e),this.secondaryCursors.push(t),this.lastAddedCursorIndex=this.secondaryCursors.length},e.prototype.duplicateCursors=function(){var e=[];e.push(this.primaryCursor.duplicate());for(var t=0,n=this.secondaryCursors.length;n>t;t++)e.push(this.secondaryCursors[t].duplicate());this.secondaryCursors=this.secondaryCursors.concat(e),this.lastAddedCursorIndex=this.secondaryCursors.length},e.prototype.getLastAddedCursor=function(){return 0===this.secondaryCursors.length||0===this.lastAddedCursorIndex?this.primaryCursor:this.secondaryCursors[this.lastAddedCursorIndex-1]},e.prototype._setSecondarySelections=function(e){var t=this.secondaryCursors.length,n=e.length,i=n-t;if(n>t)for(var r=n-t,o=0;r>o;o++)this.addSecondaryCursor(null);else if(t>n)for(var s=t-n,o=0;s>o;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1);for(var o=0;n>o;o++)e[o]&&this.secondaryCursors[o].setSelection(e[o]);return i},e.prototype._removeSecondaryCursor=function(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(),this.secondaryCursors.splice(e,1)},e.prototype._mergeCursorsIfNecessary=function(){if(0!==this.secondaryCursors.length){
for(var e=this.getAll(),t=[],i=0;i<e.length;i++)t.push({index:i,selection:e[i].getSelection()});t.sort(function(e,t){return e.selection.startLineNumber===t.selection.startLineNumber?e.selection.startColumn-t.selection.startColumn:e.selection.startLineNumber-t.selection.startLineNumber});for(var r=0;r<t.length-1;r++){var o=t[r],s=t[r+1],a=o.selection,c=s.selection;if(c.getStartPosition().isBeforeOrEqual(a.getEndPosition())){var u=o.index<s.index?r:r+1,l=o.index<s.index?r+1:r,d=t[l].index,h=t[u].index,p=t[l].selection,f=t[u].selection;if(!p.equalsSelection(f)){var m,v=p.plusRange(f),g=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,y=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn;d===this.lastAddedCursorIndex?(m=g,this.lastAddedCursorIndex=h):m=y;var _;_=m?new n.Selection(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new n.Selection(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn),t[u].selection=_,e[h].setSelection(_)}for(var b=0;b<t.length;b++)t[b].index>d&&t[b].index--;e.splice(d,1),t.splice(l,1),this._removeSecondaryCursor(d-1),r--}}}},e.prototype.getModeConfiguration=function(){var e,t,n={electricChars:{},autoClosingPairsOpen:{},autoClosingPairsClose:{},surroundingPairs:{}};if(this.model.getMode().electricCharacterSupport)try{t=this.model.getMode().electricCharacterSupport.getElectricCharacters()}catch(i){r.onUnexpectedError(i),t=null}if(t)for(e=0;e<t.length;e++)n.electricChars[t[e]]=!0;var o;if(this.model.getMode().characterPairSupport)try{o=this.model.getMode().characterPairSupport.getAutoClosingPairs()}catch(i){r.onUnexpectedError(i),o=null}if(o)for(e=0;e<o.length;e++)n.autoClosingPairsOpen[o[e].open]=o[e].close,n.autoClosingPairsClose[o[e].close]=o[e].open;var s;if(this.model.getMode().characterPairSupport)try{s=this.model.getMode().characterPairSupport.getSurroundingPairs()}catch(i){r.onUnexpectedError(i),s=null}if(s)for(e=0;e<s.length;e++)n.surroundingPairs[s[e].open]=s[e].close;return n},e}();t.CursorCollection=o}),define("vs/editor/common/modes/textToHtmlTokenizer",["require","exports","vs/base/common/strings","vs/editor/common/modes/nullMode"],function(e,t,n,i){function r(e,t){return a(e,s(t))}function o(e,t,n){return c(e,s(t),n)}function s(e){return e&&e.tokenizationSupport?e.tokenizationSupport:{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new i.NullState(null,null)},tokenize:function(e,t,n,r){return void 0===n&&(n=0),i.nullTokenize(null,e,t,n,r)}}}function a(e,t){var n={tagName:"div",style:"white-space: pre-wrap",children:[]},i=function(e,t){n.children.push({tagName:"span",className:e,text:t})},r=function(){n.children.push({tagName:"br"})};return u(e,t,i,r),n}function c(e,t,i){void 0===i&&(i=""),i&&i.length>0&&(i=" "+i);var r="",o=function(e,t){r+='<span class="'+e+i+'">'+n.escape(t)+"</span>"},s=function(){r+="<br/>"};return r='<div style="white-space: pre;">',u(e,t,o,s),r+="</div>"}function u(e,t,n,i){for(var r=e.split(/\r\n|\r|\n/),o=t.getInitialState(),s=0;s<r.length;s++)o=l(r[s],t,n,o),s<r.length-1&&i()}function l(e,t,n,i){for(var r,o=t.tokenize(e,i),s=o.endState,a=o.tokens,c=0,u=0;u<a.length;u++){var l=a[u];u<a.length-1?(r=e.substring(c,a[u+1].startIndex),c=a[u+1].startIndex):r=e.substr(c);var d="token",h=l.type.replace(/[^a-z0-9\-]/gi," ");h.length>0&&(d+=" "+h),n(d,r)}return s}t.tokenizeToHtmlContent=r,t.tokenizeToString=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/viewLayout/editorScrollable",["require","exports","vs/base/common/eventEmitter"],function(e,t,n){var i=function(e){function t(){e.call(this,[t._SCROLL_EVENT,t._INTERNAL_SIZE_CHANGED_EVENT]),this.scrollTop=0,this.scrollLeft=0,this.scrollWidth=0,this.scrollHeight=0,this.width=0,this.height=0}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(e){e=Math.floor(e),0>e&&(e=0),this.width!==e&&(this.width=e,this.setScrollWidth(this.scrollWidth),this.setScrollLeft(this.scrollLeft))},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.setScrollWidth=function(e){e=Math.floor(e),e<this.width&&(e=this.width),this.scrollWidth!==e&&(this.scrollWidth=e,this.setScrollLeft(this.scrollLeft),this._emitInternalSizeEvent())},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollLeft=function(e){e=Math.floor(e),0>e&&(e=0),e+this.width>this.scrollWidth&&(e=this.scrollWidth-this.width),this.scrollLeft!==e&&(this.scrollLeft=e,this._emitScrollEvent(!1,!0))},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){e=Math.floor(e),0>e&&(e=0),this.height!==e&&(this.height=e,this.setScrollHeight(this.scrollHeight),this.setScrollTop(this.scrollTop))},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.setScrollHeight=function(e){e=Math.floor(e),e<this.height&&(e=this.height),this.scrollHeight!==e&&(this.scrollHeight=e,this.setScrollTop(this.scrollTop),this._emitInternalSizeEvent())},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.setScrollTop=function(e){e=Math.floor(e),0>e&&(e=0),e+this.height>this.scrollHeight&&(e=this.scrollHeight-this.height),this.scrollTop!==e&&(this.scrollTop=e,this._emitScrollEvent(!0,!1))},t.prototype._emitScrollEvent=function(e,n){var i={vertical:e,horizontal:n,scrollTop:this.scrollTop,scrollLeft:this.scrollLeft};this.emit(t._SCROLL_EVENT,i)},t.prototype.addScrollListener=function(e){return this.addListener2(t._SCROLL_EVENT,e)},t.prototype._emitInternalSizeEvent=function(){this.emit(t._INTERNAL_SIZE_CHANGED_EVENT)},t.prototype.addInternalSizeChangeListener=function(e){return this.addListener2(t._INTERNAL_SIZE_CHANGED_EVENT,e)},t._SCROLL_EVENT="scroll",t._INTERNAL_SIZE_CHANGED_EVENT="internalSizeChanged",t}(n.EventEmitter);t.EditorScrollable=i}),define("vs/editor/common/viewLayout/viewLineParts",["require","exports","vs/base/common/strings","vs/editor/common/core/arrays"],function(e,t,n,i){function r(e,t,n,i,r){return r&&(i=s(e,t,n.getFauxIndentLength(),i)),i.length>0?new c(e,n,t,i):new a(n,t)}function o(e,t){if(e.length<=1)return e;var n=e[e.length-1].startIndex;return n<t.length?e:e.slice(0,e.length-1)}function s(e,t,i,r){if(0===t.length)return r;var o=null,s=null,a=!0,c=n.firstNonWhitespaceIndex(t);if(0!==c&&(-1===c?(a=!1,o={startLineNumber:e,endLineNumber:e,startColumn:1,endColumn:t.length+1}):o={startLineNumber:e,endLineNumber:e,startColumn:1,endColumn:c+1}),o&&(i+1>=o.endColumn?o=null:o.startColumn=i+1),a){var u=n.lastNonWhitespaceIndex(t);u!==t.length-1&&(s={startLineNumber:e,endLineNumber:e,startColumn:u+2,endColumn:t.length+1})}if(o||s){var l=r.slice(0);return o&&l.unshift({options:{inlineClassName:"leading whitespace"},range:o}),s&&l.push({options:{inlineClassName:"trailing whitespace"},range:s}),l}return r}t.createLineParts=r;var a=function(){function e(e,t){this.lineTokens=e,this.parts=e.getTokens(),this.parts=o(this.parts,t)}return e.prototype.getParts=function(){return this.parts},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.lineTokens.equals(n.lineTokens)}return!1},e.prototype.findIndexOfOffset=function(e){return i.Arrays.findIndexInSegmentsArray(this.parts,e)},e}();t.FastViewLineParts=a;var c=function(){function e(e,t,n,i){for(var r,o,s,a=h.normalize(e,i),c=0,l=a.length,d=t.getTokens(),p=[],f=0,m=d.length;m>f;f++){for(r=d[f].startIndex,o=m>f+1?d[f+1].startIndex:t.getTextLength(),s=d[f].type;l>c&&a[c].startOffset<o;){if(a[c].startOffset>r&&(p.push(new u(r,s)),r=a[c].startOffset),p.push(new u(r,s+" "+a[c].className)),a[c].endOffset>=o){r=o;break}r=a[c].endOffset+1,c++}o>r&&p.push(new u(r,s))}this.parts=p,this.lastPartIndex=p.length-1,this.lastEndOffset=o}return e.prototype.getParts=function(){return this.parts},e.prototype.equals=function(t){if(t instanceof e){var n=t;if(this.lastPartIndex!==n.lastPartIndex)return!1;if(this.lastEndOffset!==n.lastEndOffset)return!1;for(var i=0,r=this.parts.length;r>i;i++){if(this.parts[i].startIndex!==n.parts[i].startIndex)return!1;if(this.parts[i].type!==n.parts[i].type)return!1}return!0}return!1},e.prototype.findIndexOfOffset=function(e){return i.Arrays.findIndexInSegmentsArray(this.parts,e)},e}();t.ViewLineParts=c;var u=function(){function e(e,t){this.startIndex=e,this.type=t}return e}(),l=function(){function e(e,t,n){this.startOffset=e,this.endOffset=t,this.className=n}return e}();t.DecorationSegment=l;var d=function(){function e(){this.stopOffsets=[],this.classNames=[],this.count=0}return e.prototype.consumeLowerThan=function(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){for(var i=0;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new l(t,this.stopOffsets[i],this.classNames.join(" "))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.count-=i+1}return this.count>0&&e>t&&(n.push(new l(t,e-1,this.classNames.join(" "))),t=e),t},e.prototype.insert=function(e,t){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t);else for(var n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t);break}this.count++},e}(),h=function(){function e(){}return e.normalize=function(t,n){var i=[];if(0===n.length)return i;var r,o,s,a,c,u=new d,l=0;for(a=0,c=n.length;c>a;a++)r=n[a],r.range.endLineNumber<t||r.range.startLineNumber>t||(r.range.startLineNumber!==r.range.endLineNumber||r.range.startColumn!==r.range.endColumn)&&(o=r.range.startLineNumber===t?r.range.startColumn-1:0,s=r.range.endLineNumber===t?r.range.endColumn-2:e.MAX_LINE_LENGTH-1,0>s||(l=u.consumeLowerThan(o,l,i),0===u.count&&(l=o),u.insert(s,r.options.inlineClassName)));return u.consumeLowerThan(e.MAX_LINE_LENGTH,l,i),i},e.MAX_LINE_LENGTH=1e7,e}();t.LineDecorationsNormalizer=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lines/viewLine",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/editor/common/viewLayout/viewLineParts","vs/editor/browser/editorBrowser"],function(e,t,n,i,r,o){function s(e,t){return e.left-t.left}function a(e,t,n){var i=e.findIndexOfOffset(t);return n>=i?i:n}function c(e){return new f(e)}function u(e){return new m(e)}function l(e){return new p(e)}function d(e){var t=e.lineContent,n={charOffsetInPart:[],hasOverflowed:!1,lastRenderedPartIndex:0,partsCount:0,output:[]},i=0;if(n.output.push("<span>"),t.length>0){var r,o,s,a,c=t.length,u=-1,l=0,d=0,h=0,p="",f=e.tabSize,m=e.stopRenderingLineAfter,v=!1,I=e.parts;if(0===I.length)throw new Error("Cannot render non empty line without line parts!");for(-1!==m&&c>m-1&&(p=t.substr(m-1,1),c=m-1,n.hasOverflowed=!0),o=0;c>o;o++){switch(o===l&&(u++,l=u+1<I.length?I[u+1].startIndex:Number.MAX_VALUE,o>0&&n.output.push("</span>"),i++,n.output.push('<span class="'),s="token "+I[u].type.replace(/[^a-z0-9\-]/gi," "),e.renderWhitespace&&(v=s.indexOf("whitespace")>=0),n.output.push(s),n.output.push('">'),h=0),n.charOffsetInPart[o]=h,r=t.charCodeAt(o)){case y:for(a=f-(o+d)%f,d+=a-1,h+=a-1,a>0&&(n.output.push(v?"&rarr;":"&nbsp;"),a--);a>0;)n.output.push("&nbsp;"),a--;break;case g:n.output.push(v?"&middot;":"&nbsp;");break;case _:n.output.push("&lt;");break;case b:n.output.push("&gt;");break;case E:n.output.push("&amp;");break;case 0:n.output.push("&#00;");break;case C:case w:n.output.push(T);break;case S:n.output.push("&#8203");break;default:n.output.push(t.charAt(o))}h++}n.output.push("</span>"),n.charOffsetInPart[c]=h,n.lastRenderedPartIndex=u,p.length>0&&(n.output.push('<span class="'),n.output.push(s),n.output.push('" style="color:grey">'),n.output.push(p),n.output.push("&hellip;</span>"))}else n.output.push("<span>&nbsp;</span>");return n.output.push("</span>"),n.partsCount=i,n}var h=function(){function e(e,t,n,i){this.top=e,this.left=t,this.width=n,this.height=i}return e}(),p=function(){function e(e){this._context=e,this._domNode=null,this._isInvalid=!0,this._isMaybeInvalid=!1,this._lineParts=null,this._charOffsetInPart=[],this._hasOverflowed=!1,this._lastRenderedPartIndex=0}return e.prototype.getDomNode=function(){return this._domNode},e.prototype.setDomNode=function(e){this._domNode=e},e.prototype.onContentChanged=function(){this._isInvalid=!0},e.prototype.onLinesInsertedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onLinesDeletedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onLineChangedAbove=function(){this._isMaybeInvalid=!0},e.prototype.onTokensChanged=function(){this._isMaybeInvalid=!0},e.prototype.onModelDecorationsChanged=function(){this._isMaybeInvalid=!0},e.prototype.onConfigurationChanged=function(e){this._isInvalid=!0},e.prototype.shouldUpdateHTML=function(e,t){var n=null;return(this._isMaybeInvalid||this._isInvalid)&&(n=this._computeLineParts(e,t)),this._isMaybeInvalid&&(this._isInvalid||this._lineParts&&this._lineParts.equals(n)||(this._isInvalid=!0),this._isMaybeInvalid=!1),this._isInvalid&&(this._lineParts=n),this._isInvalid},e.prototype.getLineOuterHTML=function(e,t,n){e.push('<div lineNumber="'),e.push(t.toString()),e.push('" style="top:'),e.push(n.toString()),e.push("px;height:"),e.push(this._context.configuration.editor.lineHeight.toString()),e.push('px;" class="'),e.push(o.ClassNames.VIEW_LINE),e.push('">'),e.push(this.getLineInnerHTML(t)),e.push("</div>")},e.prototype.getLineInnerHTML=function(e){return this._isInvalid=!1,this._renderMyLine(e,this._lineParts).join("")},e.prototype.layoutLine=function(e,t){var n=this._domNode.getAttribute("lineNumber");n!==e.toString()&&this._domNode.setAttribute("lineNumber",e.toString()),i.StyleMutator.setTop(this._domNode,t),i.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight)},e.prototype._computeLineParts=function(e,t){return r.createLineParts(e,this._context.model.getLineContent(e),this._context.model.getLineTokens(e),t,this._context.configuration.editor.renderWhitespace)},e.prototype._renderMyLine=function(e,t){this._bustReadingCache();var n=d({lineContent:this._context.model.getLineContent(e),tabSize:this._context.configuration.getIndentationOptions().tabSize,stopRenderingLineAfter:this._context.configuration.editor.stopRenderingLineAfter,renderWhitespace:this._context.configuration.editor.renderWhitespace,parts:t.getParts()});return this._charOffsetInPart=n.charOffsetInPart,this._hasOverflowed=n.hasOverflowed,this._lastRenderedPartIndex=n.lastRenderedPartIndex,n.output},e.prototype._getReadingTarget=function(){return this._domNode.firstChild},e.prototype._bustReadingCache=function(){this._cachedWidth=-1},e.prototype.getHeight=function(){return this._domNode.offsetHeight},e.prototype.getWidth=function(){return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget().offsetWidth),this._cachedWidth},e.prototype.getVisibleRangesForRange=function(e,t,n,i,r,o,s){var a=this._context.configuration.editor.stopRenderingLineAfter;return-1!==a&&t>a&&n>a?null:(-1!==a&&t>a&&(t=a),-1!==a&&n>a&&(n=a),this._readVisibleRangesForRange(e,t,n,i,r,o,s))},e.prototype._readVisibleRangesForRange=function(e,t,n,i,r,o,a){var c;if(c=t===n?this._readRawVisibleRangesForPosition(e,t,i,r,o,a):this._readRawVisibleRangesForRange(e,t,n,i,r,o,a),!c||c.length<=1)return c;c.sort(s);for(var u,l=[],d=c[0],h=1,p=c.length;p>h;h++)u=c[h],d.left+d.width+.3>=u.left?d.width=Math.max(d.width,u.left+u.width-d.left):(l.push(d),d=u);return l.push(d),l},e.prototype._readRawVisibleRangesForPosition=function(e,t,n,i,r,o){if(0===this._charOffsetInPart.length){var s=this._readRawVisibleRangesForEntireLine(n,i,r);return s[0].width=0,s}var c=a(this._lineParts,t-1,this._lastRenderedPartIndex),u=this._charOffsetInPart[t-1];return this._readRawVisibleRangesFrom(this._getReadingTarget(),c,u,c,u,n,i,r,o)},e.prototype._readRawVisibleRangesForRange=function(e,t,n,i,r,o,s){if(1===t&&n===this._charOffsetInPart.length)return this._readRawVisibleRangesForEntireLine(i,r,o);var c=a(this._lineParts,t-1,this._lastRenderedPartIndex),u=this._charOffsetInPart[t-1],l=a(this._lineParts,n-1,this._lastRenderedPartIndex),d=this._charOffsetInPart[n-1];return this._readRawVisibleRangesFrom(this._getReadingTarget(),c,u,l,d,i,r,o,s)},e.prototype._readRawVisibleRangesForEntireLine=function(e,t,n){var i=this._domNode.getBoundingClientRect();return[new h(i.top-e,0,this._getReadingTarget().offsetWidth,i.height)]},e.prototype._readRawVisibleRangesFrom=function(e,t,n,i,r,o,s,a,c){var u=v.createRange();try{var l=0,d=e.children.length-1;if(l>d)return null;t=Math.min(d,Math.max(l,t)),i=Math.min(d,Math.max(l,i)),t!==i&&i>0&&0===r&&(i--,r=Number.MAX_VALUE);var h=e.children[t].firstChild,p=e.children[i].firstChild;if(!h||!p)return null;n=Math.min(h.textContent.length,Math.max(0,n)),r=Math.min(p.textContent.length,Math.max(0,r)),u.setStart(h,n),u.setEnd(p,r);var f=u.getClientRects(),m=null;return f.length>0&&(m=this._createRawVisibleRangesFromClientRects(f,o,s,a)),m}catch(g){return null}finally{v.detachRange(u,c)}},e.prototype._createRawVisibleRangesFromClientRects=function(e,t,n,i){var r,o,s=e.length,a=[];for(o=0;s>o;o++)r=e[o],a.push(new h(r.top-t-n,Math.max(0,r.left-i),r.width,r.height));return a},e.prototype.getColumnOfNodeOffset=function(e,t,n){for(var i=-1;t;)t=t.previousSibling,i++;var r=this._lineParts.getParts();if(i>=r.length)return this._context.configuration.editor.stopRenderingLineAfter;if(0===n)return r[i].startIndex+1;var o,s,a=r[i].startIndex;i+1<r.length?(o=r[i+1].startIndex,s=this._charOffsetInPart[o-1]+this._charOffsetInPart[o]):(o=this._context.model.getLineMaxColumn(e)-1,s=this._charOffsetInPart[o]);var c,u=a,l=o;-1!==this._context.configuration.editor.stopRenderingLineAfter&&(l=Math.min(this._context.configuration.editor.stopRenderingLineAfter-1,o));for(var d,h,p,f,m;l>u;){if(c=Math.floor((u+l)/2),d=this._charOffsetInPart[c],h=c===o?Number.MAX_VALUE:c+1===o?s:this._charOffsetInPart[c+1],p=c===a?Number.MIN_VALUE:this._charOffsetInPart[c-1],f=(p+d)/2,m=(d+h)/2,n>f&&m>=n)return c+1;f>=n?l=c-1:u=c+1}return u+1},e}(),f=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype._createRawVisibleRangesFromClientRects=function(e,t,n,i){var r,o,s=e.length,a=[],c=screen.logicalYDPI/screen.deviceYDPI,u=screen.logicalXDPI/screen.deviceXDPI;for(a=new Array(s),o=0;s>o;o++)r=e[o],a[o]=new h(r.top*c-t-n,Math.max(0,r.left*u-i),r.width*u,r.height*c);return a},t}(p),m=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype._readVisibleRangesForRange=function(t,n,i,r,o,s,a){var c=e.prototype._readVisibleRangesForRange.call(this,t,n,i,r,o,s,a);if(!c||0===c.length||n===i||1===n&&i===this._charOffsetInPart.length)return c;var u=this._readRawVisibleRangesForPosition(t,i-1,r,o,s,a),l=this._readRawVisibleRangesForPosition(t,i,r,o,s,a);if(u&&u.length>0&&l&&l.length>0){var d=u[0],h=l[0],p=d.left<=h.left,f=c[c.length-1];p&&f.left<h.left&&(f.width=h.left-f.left)}return c},t}(p),v=function(){function e(){}return e.createRange=function(){return e._handyReadyRange||(e._handyReadyRange=document.createRange()),e._handyReadyRange},e.detachRange=function(e,t){e.selectNodeContents(t)},e}();t.createLine=function(){return window.screen&&window.screen.deviceXDPI&&(navigator.userAgent.indexOf("Trident/6.0")>=0||navigator.userAgent.indexOf("Trident/5.0")>=0)?c:n.isWebKit?u:l}();var g=" ".charCodeAt(0),y="	".charCodeAt(0),_="<".charCodeAt(0),b=">".charCodeAt(0),E="&".charCodeAt(0),S="\r".charCodeAt(0),w="\u2028".charCodeAt(0),C=65279,T="";t.renderLine=d}),define("vs/editor/browser/standalone/colorizer",["require","exports","vs/base/common/winjs.base","vs/base/common/async","vs/editor/browser/viewParts/lines/viewLine","vs/editor/common/editorCommon"],function(e,t,n,i,r,o){function s(e,t,n){n=n||{};var i=n.theme||"vs",r=n.mimeType||t.getAttribute("lang")||t.getAttribute("data-lang");if(!r)return void console.error("Mode not detected");var o=t.firstChild.nodeValue;t.className+="monaco-editor "+i;var s=function(e){t.innerHTML=e};return a(e,o,r,n).then(s,function(e){return console.error(e)},s)}function a(e,t,r,o){o=o||{},"undefined"==typeof o.tabSize&&(o.tabSize=4);var s,a,c,u,d=t.split("\n"),h=!1,p=new n.TPromise(function(e,t,n){s=e,a=t,c=n},function(){h=!0}),f=new i.RunOnceScheduler(function(){if(!h){var e=l(d,u,o.tabSize);e.retokenize.length>0?(e.retokenize.forEach(function(e){return e.then(m)}),c(e.result)):s(e.result)}},0),m=function(){return f.schedule()};return e.getOrCreateMode(r).then(function(e){return e?e.tokenizationSupport?(u=e,void m()):void a('Mode found ("'+e.getId()+'"), but does not support tokenization.'):void a('Mode not found: "'+r+'".')}),p}function c(e,t,n){void 0===n&&(n=4);var i=r.renderLine({lineContent:e,parts:t,stopRenderingLineAfter:-1,renderWhitespace:!1,tabSize:n});return i.output.join("")}function u(e,t,n){void 0===n&&(n=4);var i=e.getLineContent(t),r=e.getLineTokens(t,!1),s=o.LineTokensBinaryEncoding.inflateArr(r.getBinaryEncodedTokensMap(),r.getBinaryEncodedTokens());return c(i,s,n)}function l(e,t,n){var i,o,s,a,c,u=t.tokenizationSupport,l=[],d=u.getInitialState(),h=[];for(i=0,o=e.length;o>i;i++)s=e[i],a=u.tokenize(s,d),a.retokenize&&h.push(a.retokenize),c=r.renderLine({lineContent:s,parts:a.tokens,stopRenderingLineAfter:-1,renderWhitespace:!1,tabSize:n}),l=l.concat(c.output),l.push("<br/>"),d=a.endState;return{result:l.join(""),retokenize:h}}t.colorizeElement=s,t.colorize=a,t.colorizeLine=c,t.colorizeModelLine=u}),define("vs/editor/common/viewModel/characterHardWrappingLineMapper",["require","exports","vs/base/common/strings","vs/editor/common/viewModel/prefixSumComputer","vs/editor/common/editorCommon"],function(e,t,n,i,r){function o(e,t,n){var i,r=[],o=0,s=e+t+n;for(i=0;i<s.length;i++)o=Math.max(o,s.charCodeAt(i));for(i=0;o>=i;i++)r[i]=0;for(i=0;i<e.length;i++)r[e.charCodeAt(i)]=a;for(i=0;i<t.length;i++)r[t.charCodeAt(i)]=c;for(i=0;i<n.length;i++)r[n.charCodeAt(i)]=u;return r}var s={index:-1,remainder:-1},a=1,c=2,u=3,l=function(){function e(e,t,n){this.characterClasses=o(e,t,n)}return e.nextVisibleColumn=function(e,t,n,i){return n?e+(t-e%t):e+i},e.prototype.createLineMapping=function(t,o,s,l,h){if(-1===s)return null;var p=0,f="",m="	".charCodeAt(0);if(h!==r.WrappingIndent.None){var v=n.firstNonWhitespaceIndex(t);if(-1!==v){f=t.substring(0,v);for(var g=0;v>g;g++)p=e.nextVisibleColumn(p,o,t.charCodeAt(g)===m,1);h===r.WrappingIndent.Indent&&(f+="	",p=e.nextVisibleColumn(p,o,!0,1)),p>.5*s&&(f="",p=0)}}var g,y,_,b,E,S,w,C,T=this.characterClasses,I=0,k=[],x=0,A=-1,R=0,D=-1,L=0;for(_=0,g=0,y=t.length;y>g;g++){b=t.charCodeAt(g),E=b===m,S=b<T.length?T[b]:0,S===a&&(A=g,R=0);var M=1;(b>=11904&&55215>=b||b>=63744&&64255>=b||b>=65281&&65374>=b)&&(M=l),_=e.nextVisibleColumn(_,o,E,M),_>s&&0!==g&&(-1!==A?(w=A,C=R+p):-1!==D?(w=D,C=L+p):(w=g,C=0+p),k[x++]=w-I,I=w,_=e.nextVisibleColumn(C,o,E,M),A=-1,R=0,D=-1,L=0),-1!==A&&(R=e.nextVisibleColumn(R,o,E,M)),-1!==D&&(L=e.nextVisibleColumn(L,o,E,M)),S===c&&(A=g+1,R=0),S===u&&(D=g+1,L=0)}return 0===x?null:(k[x++]=y-I,new d(new i.PrefixSumComputer(k),f))},e}();t.CharacterHardWrappingLineMapperFactory=l;var d=function(){function e(e,t){this._prefixSums=e,this._wrappedLinesIndent=t}return e.prototype.getOutputLineCount=function(){return this._prefixSums.getCount()},e.prototype.getWrappedLinesIndent=function(){return this._wrappedLinesIndent},e.prototype.getInputOffsetOfOutputPosition=function(e,t){return 0===e?t:this._prefixSums.getAccumulatedValue(e-1)+t},e.prototype.getOutputPositionOfInputOffset=function(e,t){this._prefixSums.getIndexOf(e,s),t.outputLineIndex=s.index,t.outputOffset=s.remainder},e}();t.CharacterHardWrappingLineMapping=d}),define("vs/editor/common/viewModel/filteredLineTokens",["require","exports","vs/editor/common/editorCommon","vs/editor/common/core/arrays"],function(e,t,n,i){var r=function(){function e(e,t,i,r){this._original=e,this._startOffset=t,this._endOffset=i,this._deltaStartIndex=r,this.inflatedTokens=n.LineTokensBinaryEncoding.sliceAndInflate(e.getBinaryEncodedTokensMap(),e.getBinaryEncodedTokens(),t,i,r)}return e.prototype.getTokens=function(){return this.inflatedTokens},e.prototype.getFauxIndentLength=function(){return this._deltaStartIndex},e.prototype.getTextLength=function(){return this._endOffset-this._startOffset+this._deltaStartIndex},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this._startOffset!==n._startOffset?!1:this._endOffset!==n._endOffset?!1:this._deltaStartIndex!==n._deltaStartIndex?!1:this._original.equals(n._original)}return!1},e.prototype.findIndexOfOffset=function(e){return i.Arrays.findIndexInSegmentsArray(this.inflatedTokens,e)},e}();t.FilteredLineTokens=r;var o=function(){function e(e,t){this._original=e,this._textLength=t}return e.prototype.getTokens=function(){return n.LineTokensBinaryEncoding.inflateArr(this._original.getBinaryEncodedTokensMap(),this._original.getBinaryEncodedTokens())},e.prototype.getFauxIndentLength=function(){return 0},e.prototype.getTextLength=function(){return this._textLength},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this._original.equals(n._original)}return!1},e.prototype.findIndexOfOffset=function(e){return this._original.findIndexOfOffset(e)},e}();t.IdentityFilteredLineTokens=o}),define("vs/editor/common/viewModel/splitLinesCollection",["require","exports","vs/editor/common/core/position","vs/editor/common/viewModel/prefixSumComputer","vs/editor/common/viewModel/filteredLineTokens","vs/editor/common/editorCommon"],function(e,t,n,i,r,o){function s(e,t,n,i,r,o){var s=e.createLineMapping(t,n,i,r,o);return null===s?c.INSTANCE:new u(s)}var a={outputLineIndex:0,outputOffset:0},c=function(){function e(){}return e.prototype.getOutputLineCount=function(){return 1},e.prototype.getOutputLineContent=function(e,t,n){return e.getLineContent(t)},e.prototype.getOutputLineMinColumn=function(e,t,n){return e.getLineMinColumn(t)},e.prototype.getOutputLineMaxColumn=function(e,t,n){return e.getLineMaxColumn(t)},e.prototype.getOutputLineTokens=function(e,t,n,i){return new r.IdentityFilteredLineTokens(e.getLineTokens(t,i),e.getLineMaxColumn(t)-1)},e.prototype.getInputColumnOfOutputPosition=function(e,t){return t},e.prototype.getOutputPositionOfInputPosition=function(e,t){return new n.Position(e,t)},e.INSTANCE=new e,e}(),u=function(){function e(e){this.positionMapper=e,this.wrappedIndent=this.positionMapper.getWrappedLinesIndent(),this.wrappedIndentLength=this.wrappedIndent.length,this.outputLineCount=this.positionMapper.getOutputLineCount()}return e.prototype.getOutputLineCount=function(){return this.outputLineCount},e.prototype.getInputStartOffsetOfOutputLineIndex=function(e){return this.positionMapper.getInputOffsetOfOutputPosition(e,0)},e.prototype.getInputEndOffsetOfOutputLineIndex=function(e,t,n){return n+1===this.outputLineCount?e.getLineMaxColumn(t)-1:this.positionMapper.getInputOffsetOfOutputPosition(n+1,0)},e.prototype.getOutputLineContent=function(e,t,n){var i=this.getInputStartOffsetOfOutputLineIndex(n),r=this.getInputEndOffsetOfOutputLineIndex(e,t,n),o=e.getLineContent(t).substring(i,r);return n>0&&(o=this.wrappedIndent+o),o},e.prototype.getOutputLineMinColumn=function(e,t,n){return n>0?this.wrappedIndentLength+1:1},e.prototype.getOutputLineMaxColumn=function(e,t,n){return this.getOutputLineContent(e,t,n).length+1},e.prototype.getOutputLineTokens=function(e,t,n,i){var o=this.getInputStartOffsetOfOutputLineIndex(n),s=this.getInputEndOffsetOfOutputLineIndex(e,t,n),a=0;return n>0&&(a=this.wrappedIndentLength),new r.FilteredLineTokens(e.getLineTokens(t,i),o,s,a)},e.prototype.getInputColumnOfOutputPosition=function(e,t){var n=t-1;return e>0&&(n<this.wrappedIndentLength?n=0:n-=this.wrappedIndentLength),this.positionMapper.getInputOffsetOfOutputPosition(e,n)+1},e.prototype.getOutputPositionOfInputPosition=function(e,t){this.positionMapper.getOutputPositionOfInputOffset(t-1,a);var i=a.outputLineIndex,r=a.outputOffset+1;return i>0&&(r+=this.wrappedIndentLength),new n.Position(e+i,r)},e}();t.SplitLine=u;var l=function(){function e(e,t,n,i,r,o){this.model=e,this._validModelVersionId=-1,this.tabSize=n,this.wrappingColumn=i,this.columnsForFullWidthChar=r,this.wrappingIndent=o,this.linePositionMapperFactory=t,this.constructLines(),this.tmpIndexOfResult={index:0,remainder:0}}return e.prototype._ensureValidState=function(){var e=this.model.getVersionId();if(e!==this._validModelVersionId)throw new Error("SplitLinesCollection: attempt to access a 'newer' model")},e.prototype.constructLines=function(){this.lines=[];for(var e,t=[],n=this.model.getLinesContent(),r=0,o=n.length;o>r;r++)e=s(this.linePositionMapperFactory,n[r],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent),t[r]=e.getOutputLineCount(),this.lines[r]=e;this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new i.PrefixSumComputer(t)},e.prototype.setTabSize=function(e,t){return this.tabSize===e?!1:(this.tabSize=e,this.constructLines(),t(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.setWrappingIndent=function(e,t){return this.wrappingIndent===e?!1:(this.wrappingIndent=e,this.constructLines(),t(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.setWrappingColumn=function(e,t,n){return this.wrappingColumn===e&&this.columnsForFullWidthChar===t?!1:(this.wrappingColumn=e,this.columnsForFullWidthChar=t,this.constructLines(),n(o.ViewEventNames.ModelFlushedEvent,null),!0)},e.prototype.onModelFlushed=function(e,t){this.constructLines(),t(o.ViewEventNames.ModelFlushedEvent,null)},e.prototype.onModelLinesDeleted=function(e,t,n,i){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;var r=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,s=this.prefixSumComputer.getAccumulatedValue(n-1);this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1);var a={fromLineNumber:r,toLineNumber:s};i(o.ViewEventNames.LinesDeletedEvent,a)}},e.prototype.onModelLinesInserted=function(e,t,n,i,r){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;for(var a,c,u=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,l=0,d=[],h=[],p=0,f=i.length;f>p;p++){var a=s(this.linePositionMapperFactory,i[p],this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent);d.push(a),c=a.getOutputLineCount(),l+=c,h.push(c)}this.lines=this.lines.slice(0,t-1).concat(d).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,h);var m={fromLineNumber:u,toLineNumber:u+l-1};r(o.ViewEventNames.LinesInsertedEvent,m)}},e.prototype.onModelLineChanged=function(e,t,n,i){if(!(e<=this._validModelVersionId)){this._validModelVersionId=e;var r=t-1,a=this.lines[r].getOutputLineCount(),c=s(this.linePositionMapperFactory,n,this.tabSize,this.wrappingColumn,this.columnsForFullWidthChar,this.wrappingIndent);this.lines[r]=c;var u=this.lines[r].getOutputLineCount(),l=!1,d=0,h=-1,p=0,f=-1,m=0,v=-1;a>u?(d=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+u-1,m=h+1,v=m+(a-u)-1,l=!0):u>a?(d=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+a-1,p=h+1,f=p+(u-a)-1,l=!0):(d=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+u-1),this.prefixSumComputer.changeValue(r,u);var g,y,_,b;if(h>=d)for(var g=d;h>=g;g++)y={lineNumber:g},i(o.ViewEventNames.LineChangedEvent,y);return f>=p&&(_={fromLineNumber:p,toLineNumber:f},i(o.ViewEventNames.LinesInsertedEvent,_)),v>=m&&(b={fromLineNumber:m,toLineNumber:v},i(o.ViewEventNames.LinesDeletedEvent,b)),l}},e.prototype.getOutputLineCount=function(){return this._ensureValidState(),this.prefixSumComputer.getTotalValue()},e.prototype.getOutputLineContent=function(e){this._ensureValidState(),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);
var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineContent(this.model,t+1,n)},e.prototype.getOutputLineMinColumn=function(e){this._ensureValidState(),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineMinColumn(this.model,t+1,n)},e.prototype.getOutputLineMaxColumn=function(e){this._ensureValidState(),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var t=this.tmpIndexOfResult.index,n=this.tmpIndexOfResult.remainder;return this.lines[t].getOutputLineMaxColumn(this.model,t+1,n)},e.prototype.getOutputLineTokens=function(e,t){this._ensureValidState(),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var n=this.tmpIndexOfResult.index,i=this.tmpIndexOfResult.remainder;return this.lines[n].getOutputLineTokens(this.model,n+1,i,t)},e.prototype.convertOutputPositionToInputPosition=function(e,t){this._ensureValidState(),this.prefixSumComputer.getIndexOf(e-1,this.tmpIndexOfResult);var i=this.tmpIndexOfResult.index,r=this.tmpIndexOfResult.remainder,o=this.lines[i].getInputColumnOfOutputPosition(r,t);return new n.Position(i+1,o)},e.prototype.convertInputPositionToOutputPosition=function(e,t){this._ensureValidState(),e>this.lines.length&&(e=this.lines.length);var n=1+(1===e?0:this.prefixSumComputer.getAccumulatedValue(e-2)),i=this.lines[e-1].getOutputPositionOfInputPosition(n,t);return i},e}();t.SplitLinesCollection=l}),define("vs/editor/common/viewModel/viewEventHandler",["require","exports","vs/editor/common/editorCommon"],function(e,t,n){var i=function(){function e(){this.shouldRender=!0}return e.prototype.onLineMappingChanged=function(){return!1},e.prototype.onModelFlushed=function(){return!1},e.prototype.onModelDecorationsChanged=function(e){return!1},e.prototype.onModelLinesDeleted=function(e){return!1},e.prototype.onModelLineChanged=function(e){return!1},e.prototype.onModelLinesInserted=function(e){return!1},e.prototype.onModelTokensChanged=function(e){return!1},e.prototype.onCursorPositionChanged=function(e){return!1},e.prototype.onCursorSelectionChanged=function(e){return!1},e.prototype.onCursorRevealRange=function(e){return!1},e.prototype.onCursorScrollRequest=function(e){return!1},e.prototype.onConfigurationChanged=function(e){return!1},e.prototype.onLayoutChanged=function(e){return!1},e.prototype.onScrollChanged=function(e){return!1},e.prototype.onZonesChanged=function(){return!1},e.prototype.onScrollWidthChanged=function(e){return!1},e.prototype.onScrollHeightChanged=function(e){return!1},e.prototype.onViewFocusChanged=function(e){return!1},e.prototype.handleEvents=function(e){var t,i,r,o;for(t=0,i=e.length;i>t;t++)switch(r=e[t],o=r.getData(),r.getType()){case n.ViewEventNames.LineMappingChangedEvent:this.shouldRender=this.onLineMappingChanged()||this.shouldRender;break;case n.ViewEventNames.ModelFlushedEvent:this.shouldRender=this.onModelFlushed()||this.shouldRender;break;case n.ViewEventNames.LinesDeletedEvent:this.shouldRender=this.onModelLinesDeleted(o)||this.shouldRender;break;case n.ViewEventNames.LinesInsertedEvent:this.shouldRender=this.onModelLinesInserted(o)||this.shouldRender;break;case n.ViewEventNames.LineChangedEvent:this.shouldRender=this.onModelLineChanged(o)||this.shouldRender;break;case n.ViewEventNames.TokensChangedEvent:this.shouldRender=this.onModelTokensChanged(o)||this.shouldRender;break;case n.ViewEventNames.DecorationsChangedEvent:this.shouldRender=this.onModelDecorationsChanged(o)||this.shouldRender;break;case n.ViewEventNames.CursorPositionChangedEvent:this.shouldRender=this.onCursorPositionChanged(o)||this.shouldRender;break;case n.ViewEventNames.CursorSelectionChangedEvent:this.shouldRender=this.onCursorSelectionChanged(o)||this.shouldRender;break;case n.ViewEventNames.RevealRangeEvent:this.shouldRender=this.onCursorRevealRange(o)||this.shouldRender;break;case n.ViewEventNames.ScrollRequestEvent:this.shouldRender=this.onCursorScrollRequest(o)||this.shouldRender;break;case n.EventType.ConfigurationChanged:this.shouldRender=this.onConfigurationChanged(o)||this.shouldRender;break;case n.EventType.ViewLayoutChanged:this.shouldRender=this.onLayoutChanged(o)||this.shouldRender;break;case n.EventType.ViewScrollChanged:this.shouldRender=this.onScrollChanged(o)||this.shouldRender;break;case n.EventType.ViewZonesChanged:this.shouldRender=this.onZonesChanged()||this.shouldRender;break;case n.EventType.ViewScrollWidthChanged:this.shouldRender=this.onScrollWidthChanged(o)||this.shouldRender;break;case n.EventType.ViewScrollHeightChanged:this.shouldRender=this.onScrollHeightChanged(o)||this.shouldRender;break;case n.EventType.ViewFocusChanged:this.shouldRender=this.onViewFocusChanged(o)||this.shouldRender;break;default:console.info("View received unknown event: "),console.info(r)}},e}();t.ViewEventHandler=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/keyboardHandler",["require","exports","vs/editor/common/editorCommon","vs/base/browser/keyboardController","vs/base/browser/dom","vs/base/common/platform","vs/base/browser/browser","vs/editor/common/viewModel/viewEventHandler","vs/base/common/async","vs/base/common/strings","vs/editor/common/core/range","vs/editor/common/core/position","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p;!function(e){e[e.Type=0]="Type",e[e.Paste=1]="Paste"}(p||(p={}));var f=function(){function e(e,t,n,i){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionToken=i}return e.prototype.toString=function(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"},e.fromTextArea=function(t,n){return new e(t.value,t.selectionStart,t.selectionEnd,n)},e.fromEditorSelectionAndPreviousState=function(t,i,r){if(s.isIPad)return new e("",0,0,c);var o=100,a=0,c=i.startLineNumber,u=i.startColumn,d=i.endLineNumber,h=i.endColumn,p=t.getLineMaxColumn(d);i.isEmpty()&&r!==c&&(u=1,h=p);var f="",m=Math.max(1,c-a);c>m&&(f=t.getValueInRange(new l.Range(m,1,c,1),n.EndOfLinePreference.LF)),f+=t.getValueInRange(new l.Range(c,1,c,u),n.EndOfLinePreference.LF),f.length>o&&(f=f.substring(f.length-o,f.length));var v="",g=Math.min(d+a,t.getLineCount());v+=t.getValueInRange(new l.Range(d,h,d,p),n.EndOfLinePreference.LF),g>d&&(v="\n"+t.getValueInRange(new l.Range(d+1,1,g,t.getLineMaxColumn(g)),n.EndOfLinePreference.LF)),v.length>o&&(v=v.substring(0,o));var y=t.getValueInRange(new l.Range(c,u,d,h),n.EndOfLinePreference.LF);return y.length>2*o&&(y=y.substring(0,o)+String.fromCharCode(8230)+y.substring(y.length-o,y.length)),new e(f+y+v,f.length,f.length+y.length,c)},e.prototype.getSelectionStart=function(){return this.selectionStart},e.prototype.resetSelection=function(){this.selectionStart=this.value.length,this.selectionEnd=this.value.length},e.prototype.getValue=function(){return this.value},e.prototype.getSelectionToken=function(){return this.selectionToken},e.prototype.applyToTextArea=function(e,t){if(e.value!==this.value&&(e.value=this.value),t)try{var n=r.saveParentsScrollTop(e);e.focus(),e.setSelectionRange(this.selectionStart,this.selectionEnd),r.restoreParentsScrollTop(e,n)}catch(i){}},e.prototype.extractNewText=function(e){if(this.selectionStart!==this.selectionEnd)return"";if(!e)return this.value;var t=e.value.substring(0,e.selectionStart),n=e.value.substring(e.selectionEnd,e.value.length);s.isIE11orEarlier&&document.queryCommandValue("OverWrite")&&(n=n.substr(1));var i=this.value;return i.substring(0,t.length)===t&&(i=i.substring(t.length)),i.substring(i.length-n.length,i.length)===n&&(i=i.substring(0,i.length-n.length)),i},e}(),m=function(e){function t(t,n,a){var h=this;e.call(this),this.context=t,this.viewController=n,this.textArea=a.textArea,this.viewHelper=a,this.selection=new l.Range(1,1,1,1),this.cursorPosition=new d.Position(1,1),this.contentLeft=0,this.contentWidth=0,this.scrollLeft=0,this.asyncReadFromTextArea=new c.RunOnceScheduler(null,0),this.asyncSetSelectionToTextArea=new c.RunOnceScheduler(function(){return h._writePlaceholderAndSelectTextArea()},0),this.asyncTriggerCut=new c.RunOnceScheduler(function(){return h._triggerCut()},0),this.lastCopiedValue=null,this.lastCopiedValueIsFromEmptySelection=!1,this.previousSetTextAreaState=null,this.hasFocus=!1,this.justHadAPaste=!1,this.justHadACut=!1,this.lastKeyPressTime=0,this.lastCompositionEndTime=0,this.lastValueWrittenToTheTextArea="",this.kbController=new i.KeyboardController(this.textArea),this.listenersToRemove=[],this.listenersToRemove.push(this.kbController.addListener("keydown",function(e){return h._onKeyDown(e)})),this.listenersToRemove.push(this.kbController.addListener("keyup",function(e){return h._onKeyUp(e)})),this.listenersToRemove.push(this.kbController.addListener("keypress",function(e){return h._onKeyPress(e)})),this.textareaIsShownAtCursor=!1,this.listenersToRemove.push(r.addListener(this.textArea,"compositionstart",function(e){var t=(new Date).getTime()-h.lastCompositionEndTime;h.textareaIsShownAtCursor||(h.textareaIsShownAtCursor=!0,h.showTextAreaAtCursor(t>=100)),h.asyncReadFromTextArea.cancel()})),this.listenersToRemove.push(r.addListener(this.textArea,"compositionend",function(e){h.textareaIsShownAtCursor&&(h.textareaIsShownAtCursor=!1,h.hideTextArea()),h.lastCompositionEndTime=(new Date).getTime(),h._scheduleReadFromTextArea(p.Type)})),s.isIPad&&this.listenersToRemove.push(r.addListener(this.textArea,"input",function(e){var t=(new Date).getTime(),n=t-h.lastKeyPressTime;500>=n&&(h._scheduleReadFromTextArea(p.Type),h.lastKeyPressTime=0)})),this.listenersToRemove.push(this.kbController.addListener("input",function(e){h.textareaIsShownAtCursor||h._scheduleReadFromTextArea(p.Type)})),o.isMacintosh&&this.listenersToRemove.push(r.addListener(this.textArea,"input",function(e){if(h.justHadAPaste)return void(h.justHadAPaste=!1);if(h.justHadACut)return void(h.justHadACut=!1);var t=(new Date).getTime(),n=t-h.lastKeyPressTime;if(!(500>=n)){var i=t-h.lastCompositionEndTime;if(!(500>=i||h.textareaIsShownAtCursor||h.textArea.selectionStart!==h.textArea.selectionEnd)){var r,o=h.textArea.value;if(s.isChrome&&h.lastValueWrittenToTheTextArea.length===o.length){var a=u.commonPrefixLength(h.lastValueWrittenToTheTextArea,o),c=u.commonSuffixLength(h.lastValueWrittenToTheTextArea,o);a+c+1===o.length&&(r=o.charAt(a),h.executeReplacePreviousChar(r),h.previousSetTextAreaState=f.fromTextArea(h.textArea,0),h.asyncSetSelectionToTextArea.schedule())}}}})),this.listenersToRemove.push(r.addListener(this.textArea,"cut",function(e){return h._onCut(e)})),this.listenersToRemove.push(r.addListener(this.textArea,"copy",function(e){return h._onCopy(e)})),this.listenersToRemove.push(r.addListener(this.textArea,"paste",function(e){return h._onPaste(e)})),this._writePlaceholderAndSelectTextArea(),this.context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.context.removeEventHandler(this),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.kbController.dispose(),this.asyncReadFromTextArea.dispose(),this.asyncSetSelectionToTextArea.dispose(),this.asyncTriggerCut.dispose()},t.prototype.showTextAreaAtCursor=function(e){var t,i,o;s.isIE11orEarlier?(t=this.selection.startLineNumber,i=this.selection.startColumn,o=this.previousSetTextAreaState.getSelectionStart()+1):(t=this.cursorPosition.lineNumber,i=this.cursorPosition.column,o=i);var a={range:new l.Range(t,i,t,i),verticalType:n.VerticalRevealType.Simple,revealHorizontal:!0};this.context.privateViewEventBus.emit(n.ViewEventNames.RevealRangeEvent,a);var c=this.viewHelper.visibleRangeForPositionRelativeToEditor(t,i),u=this.viewHelper.visibleRangeForPositionRelativeToEditor(t,o);s.isIE11orEarlier?c&&u&&(this.textArea.style.top=c.top+"px",this.textArea.style.left=this.contentLeft+c.left-u.left-this.scrollLeft+"px",this.textArea.style.width=this.contentWidth+"px"):(c&&(this.textArea.style.left=this.contentLeft+c.left-this.scrollLeft+"px",this.textArea.style.top=c.top+"px"),e&&this.setTextAreaState(new f("",0,0,0),!1)),this.textArea.style.height=this.context.configuration.editor.lineHeight+"px",r.addClass(this.viewHelper.viewDomNode,"ime-input")},t.prototype.hideTextArea=function(){this.textArea.style.height="",this.textArea.style.width="",this.textArea.style.left="0px",this.textArea.style.top="0px",r.removeClass(this.viewHelper.viewDomNode,"ime-input")},t.prototype.onScrollChanged=function(e){return this.scrollLeft=e.scrollLeft,!1},t.prototype.onViewFocusChanged=function(e){return this.hasFocus=e,this.hasFocus&&this.asyncSetSelectionToTextArea.schedule(),!1},t.prototype.onCursorSelectionChanged=function(e){return this.selection=e.selection,this.asyncSetSelectionToTextArea.schedule(),!1},t.prototype.onCursorPositionChanged=function(e){return this.cursorPosition=e.position,!1},t.prototype.onLayoutChanged=function(e){return this.contentLeft=e.contentLeft,this.contentWidth=e.contentWidth,!1},t.prototype.setTextAreaState=function(e,t){var n=t&&this.hasFocus;n||e.resetSelection(),this.lastValueWrittenToTheTextArea=e.getValue(),e.applyToTextArea(this.textArea,n),this.previousSetTextAreaState=e},t.prototype._onKeyDown=function(e){var t=this;e.equals(h.CommonKeybindings.ESCAPE)&&e.preventDefault(),this.viewController.emitKeyDown(e),setTimeout(function(){e.browserEvent&&e.browserEvent.defaultPrevented&&(t.asyncReadFromTextArea.cancel(),t.asyncSetSelectionToTextArea.schedule())},0)},t.prototype._onKeyUp=function(e){this.viewController.emitKeyUp(e)},t.prototype._onKeyPress=function(e){this.hasFocus&&(this.lastKeyPressTime=(new Date).getTime(),s.isIPad||this._scheduleReadFromTextArea(p.Type))},t.prototype._scheduleReadFromTextArea=function(e){var t=this;this.asyncSetSelectionToTextArea.cancel(),this.asyncReadFromTextArea.setRunner(function(){return t._readFromTextArea(e)}),this.asyncReadFromTextArea.schedule()},t.prototype._readFromTextArea=function(e){var t=this.previousSetTextAreaState?this.previousSetTextAreaState.getSelectionToken():0,n=f.fromTextArea(this.textArea,t),i=n.extractNewText(this.previousSetTextAreaState);""!==i&&(e===p.Type?this.executeType(i):this.executePaste(i)),this.previousSetTextAreaState=n,this.asyncSetSelectionToTextArea.schedule()},t.prototype.executePaste=function(e){if(""!==e){var t=!1;s.enableEmptySelectionClipboard&&(t=e===this.lastCopiedValue&&this.lastCopiedValueIsFromEmptySelection),this.viewController.paste("keyboard",e,t)}},t.prototype.executeType=function(e){""!==e&&this.viewController.type("keyboard",e)},t.prototype.executeReplacePreviousChar=function(e){this.viewController.replacePreviousChar("keyboard",e)},t.prototype._writePlaceholderAndSelectTextArea=function(){if(!this.textareaIsShownAtCursor){var e=this.previousSetTextAreaState?this.previousSetTextAreaState.getSelectionToken():0,t=f.fromEditorSelectionAndPreviousState(this.context.model,this.selection,e);this.setTextAreaState(t,!0)}},t.prototype._onPaste=function(e){e&&e.clipboardData?(e.preventDefault(),this.executePaste(e.clipboardData.getData("text/plain"))):e&&window.clipboardData?(e.preventDefault(),this.executePaste(window.clipboardData.getData("Text"))):(this.textArea.selectionStart!==this.textArea.selectionEnd&&this.setTextAreaState(new f("",0,0,0),!1),this._scheduleReadFromTextArea(p.Paste)),this.justHadAPaste=!0},t.prototype._onCopy=function(e){this._ensureClipboardGetsEditorSelection(e)},t.prototype._triggerCut=function(){this.viewController.cut("keyboard")},t.prototype._onCut=function(e){this._ensureClipboardGetsEditorSelection(e),this.asyncTriggerCut.schedule(),this.justHadACut=!0},t.prototype._ensureClipboardGetsEditorSelection=function(e){var t=this._getPlainTextToCopy();if(e&&e.clipboardData?(e.clipboardData.setData("text/plain",t),e.preventDefault()):e&&window.clipboardData?(window.clipboardData.setData("Text",t),e.preventDefault()):this.setTextAreaState(new f(t,0,t.length,0),!0),s.enableEmptySelectionClipboard){s.isFirefox?this.lastCopiedValue=t.replace(/\r\n/g,"\n"):this.lastCopiedValue=t;var n=this.context.model.getSelections();this.lastCopiedValueIsFromEmptySelection=1===n.length&&n[0].isEmpty()}},t.prototype._getPlainTextToCopy=function(){var e=o.isWindows?"\r\n":"\n",t=o.isWindows?n.EndOfLinePreference.CRLF:n.EndOfLinePreference.LF,i=this.context.model.getSelections();if(1===i.length){var r=i[0];if(r.isEmpty()){if(s.enableEmptySelectionClipboard){var a=this.context.model.convertViewPositionToModelPosition(r.startLineNumber,1).lineNumber;return this.context.model.getModelLineContent(a)+e}return""}return this.context.model.getValueInRange(r,t)}i=i.slice(0).sort(l.Range.compareRangesUsingStarts);for(var c=[],u=0;u<i.length;u++)c.push(this.context.model.getValueInRange(i[u],t));return c.join(e)},t}(a.ViewEventHandler);t.KeyboardHandler=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/mouseHandler",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/editor/common/editorCommon","vs/base/browser/mouseEvent","vs/base/browser/dom","vs/editor/browser/controller/mouseTarget","vs/editor/common/viewModel/viewEventHandler","vs/base/common/lifecycle","vs/base/browser/globalMouseMoveMonitor","vs/editor/common/core/position","vs/editor/common/core/selection"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){function p(e){return function(t,n){var i=new o.StandardMouseEvent(n),r=!1;return e&&(r=e.mouseTargetIsWidget(i)),r||i.preventDefault(),i}}var f=function(){function e(e,t){var n=this;this._destination=e,this._condition=t,this._retryTimer=-1,this.handler=function(e){return n._handle(e)}}return e.prototype.dispose=function(){-1!==this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=-1,this._retryValue=null)},e.prototype._handle=function(e){var t=this;this._condition()?(-1!==this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=-1,this._retryValue=null),this._destination(e)):(this._retryValue=e,-1===this._retryTimer&&(this._retryTimer=setTimeout(function(){t._retryTimer=-1;var e=t._retryValue;t._retryValue=null,t._handle(e)},10)))},e}(),m=function(e){function t(n,i,r){var o=this;e.call(this),this.context=n,this.viewController=i,this.viewHelper=r,this.mouseTargetFactory=new a.MouseTargetFactory(this.context,r),this.listenersToRemove=[],this.hideTextAreaTimeout=-1,this.toDispose=[],this.mouseMoveMonitor=new l.GlobalMouseMoveMonitor,this.toDispose.push(this.mouseMoveMonitor),this.lastMouseEvent=null,this.lastMouseDownPosition=null,this.currentSelection=h.Selection.createSelection(1,1,1,1),this.lastMouseDownPositionEqualCount=0,this.lastMouseDownCount=0,this.lastSetMouseDownCountTime=0,this.onScrollTimeout=-1,this.layoutWidth=0,this.layoutHeight=0,this.lastMouseLeaveTime=-1,this.listenersToRemove.push(s.addListener(this.viewHelper.viewDomNode,"contextmenu",function(e){return o._onContextMenu(e)})),this._mouseMoveEventHandler=new f(function(e){return o._onMouseMove(e)},function(){return!o.viewHelper.isDirty()}),this.toDispose.push(this._mouseMoveEventHandler),this.listenersToRemove.push(s.addThrottledListener(this.viewHelper.viewDomNode,"mousemove",this._mouseMoveEventHandler.handler,p(this.mouseTargetFactory),t.MOUSE_MOVE_MINIMUM_TIME)),this._mouseDownThenMoveEventHandler=new f(function(e){return o._onMouseDownThenMove(e)},function(){return!o.viewHelper.isDirty()}),this.toDispose.push(this._mouseDownThenMoveEventHandler),this.listenersToRemove.push(s.addListener(this.viewHelper.viewDomNode,"mouseup",function(e){return o._onMouseUp(e)})),this.listenersToRemove.push(s.addNonBubblingMouseOutListener(this.viewHelper.viewDomNode,function(e){return o._onMouseLeave(e)})),this.listenersToRemove.push(s.addListener(this.viewHelper.viewDomNode,"mousedown",function(e){return o._onMouseDown(e)})),this.context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.context.removeEventHandler(this),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.toDispose=u.disposeAll(this.toDispose),this._unhook(),-1!==this.hideTextAreaTimeout&&(window.clearTimeout(this.hideTextAreaTimeout),this.hideTextAreaTimeout=-1)},t.prototype.onLayoutChanged=function(e){return this._layoutInfo=e,!1},t.prototype.onScrollChanged=function(e){return this.mouseMoveMonitor.isMonitoring()&&this._hookedOnScroll(e),!1},t.prototype.onCursorSelectionChanged=function(e){return this.currentSelection=e.selection,!1},t.prototype._createMouseTarget=function(e,t){var n=s.getDomNodePosition(this.viewHelper.viewDomNode);return this.mouseTargetFactory.createMouseTarget(this._layoutInfo,n,e,t)},t.prototype._onContextMenu=function(e){var t=new o.StandardMouseEvent(e),n=this._createMouseTarget(t,!0),i={event:t,target:n};this.viewController.emitContextMenu(i)},t.prototype._onMouseMove=function(e){if(!this.mouseMoveMonitor.isMonitoring()){var t=e.timestamp;if(!(t<this.lastMouseLeaveTime)){var n=this._createMouseTarget(e,!0),i={event:e,target:n};this.viewController.emitMouseMove(i)}}},t.prototype._onMouseLeave=function(e){this.lastMouseLeaveTime=(new Date).getTime();var t={event:new o.StandardMouseEvent(e),target:null};this.viewController.emitMouseLeave(t)},t.prototype._onMouseUp=function(e){var t=new o.StandardMouseEvent(e),n=this._createMouseTarget(t,!0),i={event:t,target:n};this.viewController.emitMouseUp(i)},t.prototype._onMouseDown=function(e){var t=this,s=new o.StandardMouseEvent(e),a=this._createMouseTarget(s,!0),c=a.type===r.MouseTargetType.CONTENT_TEXT||a.type===r.MouseTargetType.CONTENT_EMPTY,u=a.type===r.MouseTargetType.GUTTER_GLYPH_MARGIN||a.type===r.MouseTargetType.GUTTER_LINE_NUMBERS||a.type===r.MouseTargetType.GUTTER_LINE_DECORATIONS,l=a.type===r.MouseTargetType.GUTTER_LINE_NUMBERS,d=this.context.configuration.editor.selectOnLineNumbers,h=a.type===r.MouseTargetType.CONTENT_VIEW_ZONE||a.type===r.MouseTargetType.GUTTER_VIEW_ZONE,p=s.leftButton;if(n.isMacintosh&&s.ctrlKey&&(p=!1),p&&(c||l&&d))i.isIE11orEarlier?s.browserEvent.fromElement?(s.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()}):(s.preventDefault(),this.viewHelper.focusTextArea()),this._updateMouse(a.type,s,s.shiftKey,s.detail),this._hook(a.type);else if(u)s.preventDefault();else if(h){var f=a.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&s.preventDefault()}var m={event:s,target:a};this.viewController.emitMouseDown(m)},t.prototype._hookedOnScroll=function(e){var t=this;-1===this.onScrollTimeout&&(this.onScrollTimeout=window.setTimeout(function(){t.onScrollTimeout=-1,t._updateMouse(t.monitoringStartTargetType,null,!0)},10))},t.prototype._hook=function(e){var t=this;this.mouseMoveMonitor.isMonitoring()||(this.monitoringStartTargetType=e,this.mouseMoveMonitor.startMonitoring(p(null),this._mouseDownThenMoveEventHandler.handler,function(){t._unhook()}))},t.prototype._onMouseDownThenMove=function(e){this._updateMouse(this.monitoringStartTargetType,e,!0)},t.prototype._unhook=function(){-1!==this.onScrollTimeout&&(window.clearTimeout(this.onScrollTimeout),this.onScrollTimeout=-1)},t.prototype._getPositionOutsideEditor=function(e,t){var n;return t.posy<e.top?(n=this.viewHelper.getLineNumberAtVerticalOffset(Math.max(this.viewHelper.getScrollTop()-(e.top-t.posy),0)),{lineNumber:n,column:1}):t.posy>e.top+e.height?(n=this.viewHelper.getLineNumberAtVerticalOffset(this.viewHelper.getScrollTop()+(t.posy-e.top)),{lineNumber:n,column:this.context.model.getLineMaxColumn(n)}):(n=this.viewHelper.getLineNumberAtVerticalOffset(this.viewHelper.getScrollTop()+(t.posy-e.top)),t.posx<e.left?{lineNumber:n,column:1}:t.posx>e.left+e.width?{lineNumber:n,column:this.context.model.getLineMaxColumn(n)}:null)},t.prototype._updateMouse=function(e,n,i,o){void 0===o&&(o=0),n=n||this.lastMouseEvent,this.lastMouseEvent=n;var a,c,u=s.getDomNodePosition(this.viewHelper.viewDomNode),l=this._getPositionOutsideEditor(u,n);if(l)a=l.lineNumber,c=l.column;else{var h=this._createMouseTarget(n,!0),p=h.position;if(!p)return;if((h.type===r.MouseTargetType.CONTENT_VIEW_ZONE||h.type===r.MouseTargetType.GUTTER_VIEW_ZONE)&&this.lastMouseDownCount>0){var f=new d.Position(this.currentSelection.selectionStartLineNumber,this.currentSelection.selectionStartColumn),m=h.detail,v=m.positionBefore,g=m.positionAfter;v&&g&&(p=v.isBefore(f)?v:g)}a=p.lineNumber,c=p.column}if(o){var y=(new Date).getTime();y-this.lastSetMouseDownCountTime>t.CLEAR_MOUSE_DOWN_COUNT_TIME&&(o=1),this.lastSetMouseDownCountTime=y,o>this.lastMouseDownCount+1&&(o=this.lastMouseDownCount+1);var _=new d.Position(a,c);this.lastMouseDownPosition&&this.lastMouseDownPosition.equals(_)?this.lastMouseDownPositionEqualCount++:this.lastMouseDownPositionEqualCount=1,this.lastMouseDownPosition=_,this.lastMouseDownCount=Math.min(o,this.lastMouseDownPositionEqualCount),n.detail=this.lastMouseDownCount}if(e===r.MouseTargetType.GUTTER_LINE_NUMBERS)n.altKey?i?this.viewController.lastCursorLineSelect("mouse",a,c):this.viewController.createCursor("mouse",a,c,!0):i?this.viewController.lineSelectDrag("mouse",a,c):this.viewController.lineSelect("mouse",a,c);else if(this.lastMouseDownCount>=4)this.viewController.selectAll("mouse");else if(3===this.lastMouseDownCount)n.altKey?i?this.viewController.lastCursorLineSelectDrag("mouse",a,c):this.viewController.lastCursorLineSelect("mouse",a,c):i?this.viewController.lineSelectDrag("mouse",a,c):this.viewController.lineSelect("mouse",a,c);else if(2===this.lastMouseDownCount){var b="none",E=this.viewHelper.visibleRangeForPosition2(a,c);if(E){var S=u.left+E.left;n.posx>S?b="right":n.posx<S&&(b="left")}n.altKey?this.viewController.lastCursorWordSelect("mouse",a,c,b):i?this.viewController.wordSelectDrag("mouse",a,c,b):this.viewController.wordSelect("mouse",a,c,b)}else n.altKey?n.ctrlKey||n.metaKey||(i?this.viewController.lastCursorMoveToSelect("mouse",a,c):this.viewController.createCursor("mouse",a,c,!1)):i?this.viewController.moveToSelect("mouse",a,c):this.viewController.moveTo("mouse",a,c)},t.CLEAR_MOUSE_DOWN_COUNT_TIME=400,t.MOUSE_MOVE_MINIMUM_TIME=100,t}(c.ViewEventHandler);t.MouseHandler=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/controller/pointerHandler",["require","exports","vs/base/browser/mouseEvent","vs/base/browser/dom","vs/base/browser/touch","vs/editor/browser/controller/mouseHandler"],function(e,t,n,i,r,o){var s=function(e,t){var n={translationY:t.translationY,translationX:t.translationX};return e&&(n.translationY+=e.translationY,n.translationX+=e.translationX),n},a=function(e){function t(t,n,r){var o=this;e.call(this,t,n,r),this.viewHelper.linesContentDomNode.style.msTouchAction="none",this.viewHelper.linesContentDomNode.style.msContentZooming="none",this._installGestureHandlerTimeout=window.setTimeout(function(){if(o._installGestureHandlerTimeout=-1,window.MSGesture){var e=new MSGesture,t=new MSGesture;e.target=o.viewHelper.linesContentDomNode,t.target=o.viewHelper.linesContentDomNode,o.viewHelper.linesContentDomNode.addEventListener("MSPointerDown",function(n){var i=n.pointerType;return i===(n.MSPOINTER_TYPE_MOUSE||"mouse")?void(o._lastPointerType="mouse"):void(i===(n.MSPOINTER_TYPE_TOUCH||"touch")?(o._lastPointerType="touch",e.addPointer(n.pointerId)):(o._lastPointerType="pen",t.addPointer(n.pointerId)))}),o.listenersToRemove.push(i.addThrottledListener(o.viewHelper.linesContentDomNode,"MSGestureChange",function(e){return o._onGestureChange(e)},s)),o.listenersToRemove.push(i.addListener(o.viewHelper.linesContentDomNode,"MSGestureTap",function(e){return o._onCaptureGestureTap(e)},!0))}},100),this._lastPointerType="mouse"}return __extends(t,e),t.prototype._onMouseDown=function(t){"mouse"===this._lastPointerType&&e.prototype._onMouseDown.call(this,t)},t.prototype._onCaptureGestureTap=function(e){var t=this,i=new n.StandardMouseEvent(e),r=this._createMouseTarget(i,!1);r.position&&this.viewController.moveTo("mouse",r.position.lineNumber,r.position.column),i.browserEvent.fromElement?(i.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()})},t.prototype._onGestureChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),e.prototype.dispose.call(this)},t}(o.MouseHandler),c=function(e){function t(t,n,r){var o=this;e.call(this,t,n,r),this.viewHelper.linesContentDomNode.style.touchAction="none",this._installGestureHandlerTimeout=window.setTimeout(function(){if(o._installGestureHandlerTimeout=-1,window.MSGesture){var e=new MSGesture,t=new MSGesture;e.target=o.viewHelper.linesContentDomNode,t.target=o.viewHelper.linesContentDomNode,o.viewHelper.linesContentDomNode.addEventListener("pointerdown",function(n){var i=n.pointerType;return"mouse"===i?void(o._lastPointerType="mouse"):void("touch"===i?(o._lastPointerType="touch",e.addPointer(n.pointerId)):(o._lastPointerType="pen",t.addPointer(n.pointerId)))}),o.listenersToRemove.push(i.addThrottledListener(o.viewHelper.linesContentDomNode,"MSGestureChange",function(e){return o._onGestureChange(e)},s)),o.listenersToRemove.push(i.addListener(o.viewHelper.linesContentDomNode,"MSGestureTap",function(e){return o._onCaptureGestureTap(e)},!0))}},100),this._lastPointerType="mouse"}return __extends(t,e),t.prototype._onMouseDown=function(t){"mouse"===this._lastPointerType&&e.prototype._onMouseDown.call(this,t)},t.prototype._onCaptureGestureTap=function(e){var t=this,i=new n.StandardMouseEvent(e),r=this._createMouseTarget(i,!1);r.position&&this.viewController.moveTo("mouse",r.position.lineNumber,r.position.column),i.browserEvent.fromElement?(i.preventDefault(),this.viewHelper.focusTextArea()):setTimeout(function(){t.viewHelper.focusTextArea()})},t.prototype._onGestureChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t.prototype.dispose=function(){window.clearTimeout(this._installGestureHandlerTimeout),e.prototype.dispose.call(this)},t}(o.MouseHandler),u=function(e){function t(t,n,o){var s=this;e.call(this,t,n,o),this.gesture=new r.Gesture(this.viewHelper.linesContentDomNode),this.listenersToRemove.push(i.addListener(this.viewHelper.linesContentDomNode,r.EventType.Tap,function(e){return s.onTap(e)})),this.listenersToRemove.push(i.addListener(this.viewHelper.linesContentDomNode,r.EventType.Change,function(e){return s.onChange(e)}))}return __extends(t,e),t.prototype.dispose=function(){this.gesture.dispose(),e.prototype.dispose.call(this)},t.prototype.onTap=function(e){e.preventDefault(),this.viewHelper.focusTextArea();var t=new n.StandardMouseEvent(e),i=this._createMouseTarget(t,!1);i.position&&this.viewController.moveTo("mouse",i.position.lineNumber,i.position.column)},t.prototype.onChange=function(e){this.viewHelper.setScrollTop(this.viewHelper.getScrollTop()-e.translationY),this.viewHelper.setScrollLeft(this.viewHelper.getScrollLeft()-e.translationX)},t}(o.MouseHandler),l=function(){function e(e,t,n){window.navigator.msPointerEnabled?this.handler=new a(e,t,n):window.TouchEvent?this.handler=new u(e,t,n):window.navigator.pointerEnabled?this.handler=new c(e,t,n):this.handler=new o.MouseHandler(e,t,n)}return e.prototype.onScrollChanged=function(e){this.handler.onScrollChanged(e)},e.prototype.dispose=function(){this.handler.dispose()},e}();t.PointerHandler=l});var __extends=this&&this.__extends||function(e,t){function n(){
this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewPart",["require","exports","vs/editor/common/viewModel/viewEventHandler"],function(e,t,n){var i=function(e){function t(t){e.call(this),this._context=t,this._context.addEventHandler(this),this._modificationBeforeRenderingRunners=[],this._modificationRunners=[]}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._modificationBeforeRenderingRunners=[],this._modificationRunners=[]},t.prototype._requestModificationFrameBeforeRendering=function(e){this._modificationBeforeRenderingRunners.push(e)},t.prototype._requestModificationFrame=function(e){this._modificationRunners.push(e)},t.prototype.onBeforeForcedLayout=function(){if(this._modificationBeforeRenderingRunners.length>0){for(var e=0;e<this._modificationBeforeRenderingRunners.length;e++)this._modificationBeforeRenderingRunners[e]();this._modificationBeforeRenderingRunners=[]}},t.prototype.onReadAfterForcedLayout=function(e){this.shouldRender&&this._render(e)},t.prototype.onWriteAfterForcedLayout=function(){this.shouldRender&&(this.shouldRender=!1,this._executeModificationRunners())},t.prototype._executeModificationRunners=function(){if(this._modificationRunners.length>0){for(var e=0;e<this._modificationRunners.length;e++)this._modificationRunners[e]();this._modificationRunners=[]}},t.prototype._render=function(e){throw new Error("Implement me!")},t}(n.ViewEventHandler);t.ViewPart=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewLayer",["require","exports","vs/base/browser/dom","vs/editor/browser/view/viewPart"],function(e,t,n,i){var r=function(e){function t(t){var n=this;e.call(this,t),this._scrollDomNode=null,this._scrollDomNodeIsAbove=!1,this.domNode=this._createDomNode(),this._lines=[],this._rendLineNumberStart=1,this._renderer=new o(function(){return n._createLine()},function(){return n._extraDomNodeHTML()})}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._lines=null},t.prototype._extraDomNodeHTML=function(){return""},t.prototype.onConfigurationChanged=function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].onConfigurationChanged(e);return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return this._lines=[],this._rendLineNumberStart=1,n.clearNode(this.domNode),!0},t.prototype.onModelLinesDeleted=function(e){var t,n=Math.max(e.fromLineNumber-this._rendLineNumberStart,0),i=Math.min(e.toLineNumber-this._rendLineNumberStart,this._lines.length-1);if(e.fromLineNumber<this._rendLineNumberStart&&(e.toLineNumber<this._rendLineNumberStart?this._rendLineNumberStart-=e.toLineNumber-e.fromLineNumber+1:this._rendLineNumberStart=e.fromLineNumber),i>=n){for(t=n;i>=t;t++){var r=this._lines[t].getDomNode();r&&this.domNode.removeChild(r)}this._lines.splice(n,i-n+1)}for(t=n;t<this._lines.length;t++)this._lines[t].onLinesDeletedAbove();return!0},t.prototype.onModelLineChanged=function(e){var t=e.lineNumber-this._rendLineNumberStart,n=!1;t>=0&&t<this._lines.length&&(this._lines[t].onContentChanged(),n=!0);for(var i=Math.max(t,0);i<this._lines.length;i++)this._lines[i].onLineChangedAbove(),n=!0;return n},t.prototype.onModelLinesInserted=function(e){var t;if(e.fromLineNumber<=this._rendLineNumberStart){for(this._rendLineNumberStart+=e.toLineNumber-e.fromLineNumber+1,t=0;t<this._lines.length;t++)this._lines[t].onLinesInsertedAbove();return!0}if(e.fromLineNumber>=this._rendLineNumberStart+this._lines.length)return!1;var n=Math.min(e.fromLineNumber-this._rendLineNumberStart,this._lines.length-1),i=Math.min(e.toLineNumber-this._rendLineNumberStart,this._lines.length-1);if(i>=n){for(t=n;i>=t;t++){var r=this._createLine();this._lines.splice(t,0,r)}var o=i-n+1;for(t=0;o>t;t++){var s=this._lines.pop(),a=s.getDomNode();a&&this.domNode.removeChild(a)}}for(t=i;t<this._lines.length;t++)this._lines[t].onLinesInsertedAbove();return!0},t.prototype.onModelTokensChanged=function(e){var t=e.fromLineNumber-this._rendLineNumberStart,n=e.toLineNumber-this._rendLineNumberStart;if(0>n||t>=this._lines.length)return!1;for(var i=Math.min(Math.max(t,0),this._lines.length-1),r=Math.min(Math.max(n,0),this._lines.length-1),o=!1,s=i;r>=s;s++)o=!0,this._lines[s].onTokensChanged();return o},t.prototype._renderLines=function(e){var t={domNode:this.domNode,rendLineNumberStart:this._rendLineNumberStart,lines:this._lines,linesLength:this._lines.length,getInlineDecorationsForLineInViewport:function(t){return e.getInlineDecorationsForLineInViewport(t)},viewportTop:e.viewportTop,viewportHeight:e.viewportHeight,scrollDomNode:this._scrollDomNode,scrollDomNodeIsAbove:this._scrollDomNodeIsAbove},n=this._renderer.renderWithManyUpdates(t,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._rendLineNumberStart=n.rendLineNumberStart,this._lines=n.lines,this._scrollDomNode=n.scrollDomNode,this._scrollDomNodeIsAbove=n.scrollDomNodeIsAbove},t.prototype._createDomNode=function(){var e=document.createElement("div");return e.className="view-layer",e.style.position="absolute",e.setAttribute("role","presentation"),e.setAttribute("aria-hidden","true"),e},t.prototype._createLine=function(){throw new Error("Implement me!")},t}(i.ViewPart);t.ViewLayer=r;var o=function(){function e(e,t){this._createLine=e,this._extraDomNodeHTML=t}return e.prototype.renderWithManyUpdates=function(e,t,n,i){return this._render(e,t,n,i)},e.prototype._render=function(e,t,n,i){var r={domNode:e.domNode,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength,getInlineDecorationsForLineInViewport:e.getInlineDecorationsForLineInViewport,viewportTop:e.viewportTop,viewportHeight:e.viewportHeight,scrollDomNode:e.scrollDomNode,scrollDomNodeIsAbove:e.scrollDomNodeIsAbove},o=!0;if(r.scrollDomNode){var s=this._getScrollDomNodeTime(r.scrollDomNode);(new Date).getTime()-s<1e3&&(o=!1)}if(o&&(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart)){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(var a=t;n>=a;a++)r.lines[a-t]=this._createLine();return this._finishRendering(r,!0,i),r.scrollDomNode=null,r}this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),i,t);var c,u,l;return r.rendLineNumberStart>t?(c=t,u=Math.min(n,r.rendLineNumberStart-1),u>=c&&(this._insertLinesBefore(r,c,u,i,t),r.linesLength+=u-c+1,r.scrollDomNode&&r.scrollDomNodeIsAbove&&(r.scrollDomNode.parentNode&&r.scrollDomNode.parentNode.removeChild(r.scrollDomNode),r.scrollDomNode=null))):r.rendLineNumberStart<t&&(l=Math.min(r.linesLength,t-r.rendLineNumberStart),l>0&&(this._removeLinesBefore(r,l),r.linesLength-=l)),r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n?(c=r.rendLineNumberStart+r.linesLength,u=n,u>=c&&(this._insertLinesAfter(r,c,u,i,t),r.linesLength+=u-c+1,r.scrollDomNode&&!r.scrollDomNodeIsAbove&&(r.scrollDomNode.parentNode&&r.scrollDomNode.parentNode.removeChild(r.scrollDomNode),r.scrollDomNode=null))):r.rendLineNumberStart+r.linesLength-1>n&&(c=Math.max(0,n-r.rendLineNumberStart+1),u=r.linesLength-1,l=u-c+1,l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)),this._finishRendering(r,!1,i),r},e.prototype._renderUntouchedLines=function(e,t,n,i,r){var o,s;for(o=t;n>=o;o++){s=e.rendLineNumberStart+o;var a=e.lines[o].getDomNode();a&&e.lines[o].layoutLine(s,i[s-r])}},e.prototype._insertLinesBefore=function(e,t,n,i,r){var o,s,a=[];for(s=t;n>=s;s++)o=this._createLine(),a.push(o);e.lines=a.concat(e.lines)},e.prototype._getScrollDomNodeTime=function(e){var t=e.getAttribute("last-scroll-time");return t?parseInt(t,10):0},e.prototype._removeIfNotScrollDomNode=function(e,t,n){var i=this._getScrollDomNodeTime(t);if(!i)return void e.domNode.removeChild(t);if(e.scrollDomNode){var r=this._getScrollDomNodeTime(e.scrollDomNode);if(r>i)return void e.domNode.removeChild(t);e.scrollDomNode.parentNode&&e.scrollDomNode.parentNode.removeChild(e.scrollDomNode),e.scrollDomNode=null}e.scrollDomNode=t,e.scrollDomNodeIsAbove=n},e.prototype._removeLinesBefore=function(e,t){var n;for(n=0;t>n;n++){var i=e.lines[n].getDomNode();i&&this._removeIfNotScrollDomNode(e,i,!0)}e.lines.splice(0,t)},e.prototype._insertLinesAfter=function(e,t,n,i,r){var o,s,a=[];for(s=t;n>=s;s++)o=this._createLine(),a.push(o);e.lines=e.lines.concat(a)},e.prototype._removeLinesAfter=function(e,t){var n,i=e.linesLength-t;for(n=0;t>n;n++){var r=e.lines[i+n].getDomNode();r&&this._removeIfNotScrollDomNode(e,r,!1)}e.lines.splice(i,t)},e.prototype._finishRendering=function(e,t,n){var i,r,o,s,a=!1,c=[],u=[],l=!1,d=[],h=[];for(i=0,r=e.linesLength;r>i;i++)if(o=e.lines[i],s=i+e.rendLineNumberStart,o.shouldUpdateHTML(s,e.getInlineDecorationsForLineInViewport(s))){var p=o.getDomNode();p?(o.getLineOuterHTML(h,s,n[i]),d[i]=!0,l=!0):(o.getLineOuterHTML(u,s,n[i]),c[i]=!0,a=!0)}if(a){var f=e.domNode.lastChild;t||!f?e.domNode.innerHTML=this._extraDomNodeHTML()+u.join(""):f.insertAdjacentHTML("afterend",u.join(""));var m=e.domNode.lastChild;for(i=e.linesLength-1;i>=0;i--)o=e.lines[i],c[i]&&(o.setDomNode(m),m=m.previousSibling)}if(l){var v=document.createElement("div");v.innerHTML=h.join("");var p,g;for(i=0;i<e.linesLength;i++)o=e.lines[i],d[i]&&(g=v.firstChild,p=o.getDomNode(),p.parentNode.replaceChild(g,p),o.setDomNode(g))}},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewOverlays",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/editor/browser/view/viewLayer","vs/editor/browser/editorBrowser"],function(e,t,n,i,r,o){var s=function(e){function t(t,n){e.call(this,t),this._layoutProvider=n,this._dynamicOverlays=[],this.domNode.className="view-overlays"}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._layoutProvider=null;for(var t=0;t<this._dynamicOverlays.length;t++)this._dynamicOverlays[t].dispose();this._dynamicOverlays=null},t.prototype.getDomNode=function(){return this.domNode},t.prototype.addDynamicOverlay=function(e){this._dynamicOverlays.push(e)},t.prototype.onViewFocusChanged=function(e){var t=this;return this._requestModificationFrame(function(){i.toggleClass(t.domNode,"focused",e)}),!1},t.prototype._createLine=function(){var e=new a(this._context,this._dynamicOverlays);return e},t.prototype.onReadAfterForcedLayout=function(e){for(var t=this,n=0;n<this._dynamicOverlays.length;n++)this._dynamicOverlays[n].shouldCallRender2(e);return this._requestModificationFrame(function(){t._viewOverlaysRender(e)}),null},t.prototype._viewOverlaysRender=function(t){e.prototype._renderLines.call(this,t.linesViewportData)},t.prototype.onWriteAfterForcedLayout=function(){this._executeModificationRunners()},t}(r.ViewLayer);t.ViewOverlays=s;var a=function(){function e(e,t){this._context=e,this._dynamicOverlays=t,this._domNode=null,this._renderPieces=null}return e.prototype.getDomNode=function(){return this._domNode},e.prototype.setDomNode=function(e){this._domNode=e},e.prototype.onContentChanged=function(){},e.prototype.onLinesInsertedAbove=function(){},e.prototype.onLinesDeletedAbove=function(){},e.prototype.onLineChangedAbove=function(){},e.prototype.onTokensChanged=function(){},e.prototype.onConfigurationChanged=function(e){},e.prototype._piecesEqual=function(e){if(!this._renderPieces||this._renderPieces.length!==e.length)return!1;for(var t=0,n=e.length;n>t;t++)if(this._renderPieces[t]!==e[t])return!1;return!0},e.prototype.shouldUpdateHTML=function(e,t){for(var n=[],i=0;i<this._dynamicOverlays.length;i++){var r=this._dynamicOverlays[i].render2(e);r&&r.length>0&&(n=n.concat(r))}var o=this._piecesEqual(n);return o||(this._renderPieces=n),!o},e.prototype.getLineOuterHTML=function(e,t,n){e.push('<div lineNumber="'),e.push(t.toString()),e.push('" style="top:'),e.push(n.toString()),e.push("px;height:"),e.push(this._context.configuration.editor.lineHeight.toString()),e.push('px;" class="'),e.push(o.ClassNames.VIEW_LINE),e.push('">'),e.push(this.getLineInnerHTML(t)),e.push("</div>")},e.prototype.getLineInnerHTML=function(e){return this._renderPieces.join("")},e.prototype.layoutLine=function(e,t){var n=this._domNode.getAttribute("lineNumber");n!==e.toString()&&this._domNode.setAttribute("lineNumber",e.toString()),i.StyleMutator.setTop(this._domNode,t),i.StyleMutator.setHeight(this._domNode,this._context.configuration.editor.lineHeight)},e}(),c=function(e){function t(t,n){e.call(this,t,n),i.StyleMutator.setWidth(this.domNode,0),i.StyleMutator.setHeight(this.domNode,0)}return __extends(t,e),t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype._viewOverlaysRender=function(t){e.prototype._viewOverlaysRender.call(this,t),i.StyleMutator.setWidth(this.domNode,this._layoutProvider.getScrollWidth())},t}(s);t.ContentViewOverlays=c;var u=function(e){function t(t,n){e.call(this,t,n),this._hasVerticalScroll=!1,this._glyphMarginLeft=0,this._glyphMarginWidth=0,this._scrollHeight=n.getScrollHeight(),this.domNode.className=o.ClassNames.MARGIN_VIEW_OVERLAYS+" monaco-editor-background",i.StyleMutator.setWidth(this.domNode,1),this._hasVerticalScroll=!0}return __extends(t,e),t.prototype._extraDomNodeHTML=function(){return['<div class="',o.ClassNames.GLYPH_MARGIN,'" style="left:',String(this._glyphMarginLeft),"px;width:",String(this._glyphMarginWidth),"px;height:",String(this._scrollHeight),'px;"></div>'].join("")},t.prototype._getGlyphMarginDomNode=function(){return this.domNode.children[0]},t.prototype.onScrollHeightChanged=function(t){var n=this;return this._scrollHeight=t,this._requestModificationFrame(function(){var e=n._getGlyphMarginDomNode();e&&i.StyleMutator.setHeight(e,n._scrollHeight)}),e.prototype.onScrollHeightChanged.call(this,t)||!0},t.prototype.onLayoutChanged=function(t){var n=this;return this._glyphMarginLeft=t.glyphMarginLeft,this._glyphMarginWidth=t.glyphMarginWidth,this._scrollHeight=this._layoutProvider.getScrollHeight(),this._requestModificationFrame(function(){i.StyleMutator.setWidth(n.domNode,t.contentLeft);var e=n._getGlyphMarginDomNode();e&&(i.StyleMutator.setLeft(e,t.glyphMarginLeft),i.StyleMutator.setWidth(e,t.glyphMarginWidth))}),e.prototype.onLayoutChanged.call(this,t)||!0},t.prototype.onScrollChanged=function(t){return this._hasVerticalScroll=this._hasVerticalScroll||t.vertical,e.prototype.onScrollChanged.call(this,t)},t.prototype._viewOverlaysRender=function(t){if(e.prototype._viewOverlaysRender.call(this,t),this._hasVerticalScroll){if(n.canUseTranslate3d){var r="translate3d(0px, "+t.linesViewportData.visibleRangesDeltaTop+"px, 0px)";i.StyleMutator.setTransform(this.domNode,r)}else this._hasVerticalScroll&&i.StyleMutator.setTop(this.domNode,t.linesViewportData.visibleRangesDeltaTop);this._hasVerticalScroll=!1}var o=Math.min(this._layoutProvider.getTotalHeight(),1e6);i.StyleMutator.setHeight(this.domNode,o)},t}(s);t.MarginViewOverlays=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewLayout/layoutProvider",["require","exports","vs/editor/common/viewLayout/linesLayout","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/viewLayout/scrollManager","vs/editor/common/viewLayout/editorScrollable","vs/editor/common/editorCommon"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,i,s,a,c,u){e.call(this),this.configuration=t,this.privateViewEventBus=s,this.model=i,this.scrollable=new o.EditorScrollable,this.scrollable.setWidth(this.configuration.editor.layoutInfo.contentWidth),this.scrollable.setHeight(this.configuration.editor.layoutInfo.contentHeight),this.scrollManager=new r.ScrollManager(this.scrollable,t,s,a,c,u),this.configuration.setLineCount(this.model.getLineCount()),this.linesLayout=new n.LinesLayout(t,i),this._updateHeight()}return __extends(t,e),t.prototype.dispose=function(){this.scrollManager.dispose(),this.scrollable.dispose()},t.prototype.updateLineCount=function(){this.configuration.setLineCount(this.model.getLineCount())},t.prototype.onZonesChanged=function(){return this._updateHeight(),!1},t.prototype.onModelFlushed=function(){return this.linesLayout.onModelFlushed(),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onModelLinesDeleted=function(e){return this.linesLayout.onModelLinesDeleted(e),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onModelLinesInserted=function(e){return this.linesLayout.onModelLinesInserted(e),this.updateLineCount(),this._updateHeight(),!1},t.prototype.onConfigurationChanged=function(e){if(e.layoutInfo){this.configuration.editor.layoutInfo;this.scrollable.setWidth(this.configuration.editor.layoutInfo.contentWidth),this.scrollable.setHeight(this.configuration.editor.layoutInfo.contentHeight),this.scrollManager.onSizeProviderLayoutChanged(),this._emitLayoutChangedEvent()}return this._updateHeight(),!1},t.prototype._updateHeight=function(){var e=this.scrollable.getScrollHeight();this.scrollable.setScrollHeight(this.getTotalHeight());var t=this.scrollable.getScrollHeight();e!==t&&this.privateViewEventBus.emit(s.EventType.ViewScrollHeightChanged,t)},t.prototype.getCurrentViewport=function(){return{top:this.scrollable.getScrollTop(),left:this.scrollable.getScrollLeft(),width:this.configuration.editor.layoutInfo.contentWidth,height:this.configuration.editor.layoutInfo.contentHeight}},t.prototype.getCenteredViewLineNumberInViewport=function(){return this.linesLayout.getCenteredLineInViewport(this.getCurrentViewport())},t.prototype._emitLayoutChangedEvent=function(){this.privateViewEventBus.emit(s.EventType.ViewLayoutChanged,this.configuration.editor.layoutInfo)},t.prototype.emitLayoutChangedEvent=function(){this._emitLayoutChangedEvent()},t.prototype._computeScrollWidth=function(e,n){var i=this.configuration.editor.wrappingInfo.isViewportWrapping;return i?Math.max(e,n):Math.max(e+t.LINES_HORIZONTAL_EXTRA_PX,n)},t.prototype.onMaxLineWidthChanged=function(e){var t=this._computeScrollWidth(e,this.getCurrentViewport().width),n=this.scrollable.getScrollWidth();this.scrollable.setScrollWidth(t);var t=this.scrollable.getScrollWidth();t!==n&&(this.privateViewEventBus.emit(s.EventType.ViewScrollWidthChanged,t),this._updateHeight())},t.prototype.saveState=function(){var e=this.scrollable.getScrollTop(),t=this.linesLayout.getLineNumberAtOrAfterVerticalOffset(e),n=this.linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(t);return{scrollTop:e,scrollTopWithoutViewZones:e-n,scrollLeft:this.scrollable.getScrollLeft()}},t.prototype.restoreState=function(e){var t=e.scrollTop;"number"!=typeof e.scrollTopWithoutViewZones||this.linesLayout.hasWhitespace()||(t=e.scrollTopWithoutViewZones),this.scrollable.setScrollTop(t),this.scrollable.setScrollLeft(e.scrollLeft)},t.prototype.addWhitespace=function(e,t,n){return this.linesLayout.insertWhitespace(e,t,n)},t.prototype.changeWhitespace=function(e,t){return this.linesLayout.changeWhitespace(e,t)},t.prototype.changeAfterLineNumberForWhitespace=function(e,t){return this.linesLayout.changeAfterLineNumberForWhitespace(e,t)},t.prototype.removeWhitespace=function(e){return this.linesLayout.removeWhitespace(e)},t.prototype.getVerticalOffsetForLineNumber=function(e){return this.linesLayout.getVerticalOffsetForLineNumber(e)},t.prototype.heightInPxForLine=function(e){return this.linesLayout.getHeightForLineNumber(e)},t.prototype.isAfterLines=function(e){return this.linesLayout.isAfterLines(e)},t.prototype.getLineNumberAtVerticalOffset=function(e){return this.linesLayout.getLineNumberAtOrAfterVerticalOffset(e)},t.prototype.getTotalHeight=function(){var e=0;return this.scrollable.getScrollWidth()>this.scrollable.getWidth()&&(e=this.configuration.editor.scrollbar.horizontalScrollbarSize),this.linesLayout.getTotalHeight(this.getCurrentViewport(),e)},t.prototype.getWhitespaceAtVerticalOffset=function(e){return this.linesLayout.getWhitespaceAtVerticalOffset(e)},t.prototype.getLinesViewportData=function(){return this.linesLayout.getLinesViewportData(this.getCurrentViewport())},t.prototype.getWhitespaceViewportData=function(){return this.linesLayout.getWhitespaceViewportData(this.getCurrentViewport())},t.prototype.getWhitespaces=function(){return this.linesLayout.getWhitespaces()},t.prototype.getOverviewRulerInsertData=function(){var e=this.scrollManager.getOverviewRulerLayoutInfo();return{parent:e.parent,insertBefore:e.insertBefore}},t.prototype.getScrollbarContainerDomNode=function(){return this.scrollManager.getScrollbarContainerDomNode()},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this.scrollManager.delegateVerticalScrollbarMouseDown(e)},t.prototype.getScrollHeight=function(){return this.scrollable.getScrollHeight()},t.prototype.getScrollWidth=function(){return this.scrollable.getScrollWidth()},t.prototype.getScrollLeft=function(){return this.scrollable.getScrollLeft()},t.prototype.setScrollLeft=function(e){this.scrollable.setScrollLeft(e)},t.prototype.getScrollTop=function(){return this.scrollable.getScrollTop()},t.prototype.setScrollTop=function(e){this.scrollable.setScrollTop(e)},t.prototype.getScrolledTopFromAbsoluteTop=function(e){return e-this.scrollable.getScrollTop()},t.LINES_HORIZONTAL_EXTRA_PX=30,t}(i.ViewEventHandler);t.LayoutProvider=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/contentWidgets/contentWidgets",["require","exports","vs/base/browser/dom","vs/editor/browser/view/viewPart","vs/editor/browser/editorBrowser","vs/css!./contentWidgets"],function(e,t,n,i,r){var o=function(e){function t(t,n){e.call(this,t),this._viewDomNode=n,this._widgets={},this._contentWidth=0,this._contentLeft=0,this.domNode=document.createElement("div"),this.domNode.className=r.ClassNames.CONTENT_WIDGETS}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._widgets=null,this.domNode=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){var t=this;return this._contentWidth=e.contentWidth,this._contentLeft=e.contentLeft,this._requestModificationFrameBeforeRendering(function(){var e;for(e in t._widgets)t._widgets.hasOwnProperty(e)&&n.StyleMutator.setMaxWidth(t._widgets[e].widget.getDomNode(),t._contentWidth)}),!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.addWidget=function(e){var t={allowEditorOverflow:e.allowEditorOverflow||!1,widget:e,position:null,preference:null,isVisible:!1};this._widgets[e.getId()]=t;var i=e.getDomNode();i.style.position="absolute",n.StyleMutator.setMaxWidth(i,this._contentWidth),n.StyleMutator.setVisibility(i,"hidden"),i.setAttribute("widgetId",e.getId()),t.allowEditorOverflow?this._viewDomNode.appendChild(i):this.domNode.appendChild(i),this.shouldRender=!0},t.prototype.setWidgetPosition=function(e,t,n){var i=this._widgets[e.getId()];i.position=t,i.preference=n,this.shouldRender=!0},t.prototype.removeWidget=function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t];delete this._widgets[t];var i=n.widget.getDomNode();i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.shouldRender=!0}},t.prototype._layoutBoxInViewport=function(e,t,n){var i=n.visibleRangeForPosition(e);if(!i)return null;var r=t.clientWidth,o=t.clientHeight,s=i.top,a=s,c=i.top+i.height,u=n.viewportHeight-c,l=s-o,d=a>=o,h=c,p=u>=o,f=i.left;return f+r>n.viewportLeft+n.viewportWidth&&(f=n.viewportLeft+n.viewportWidth-r),f<n.viewportLeft&&(f=n.viewportLeft),{aboveTop:l,fitsAbove:d,belowTop:h,fitsBelow:p,left:f}},t.prototype._layoutBoxInPage=function(e,t,i){var r=i.visibleRangeForPosition(e);if(!r)return null;var o=r.left-i.viewportLeft;if(0>o||o>this._contentWidth)return null;var s=t.clientWidth,a=t.clientHeight,c=r.top-a,u=r.top+r.height,o=o+this._contentLeft,l=n.getDomNodePosition(this._viewDomNode),d=l.top+c-document.body.scrollTop-document.documentElement.scrollTop,h=l.top+u-document.body.scrollTop-document.documentElement.scrollTop,p=l.left+o-document.body.scrollLeft-document.documentElement.scrollLeft,f=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,v=22,g=d>=0,y=m-v>=h+a;if(p+s+20>f){var _=p-(f-s-20);p-=_,o-=_}if(0>p){var _=p;p-=_,o-=_}return{aboveTop:c,fitsAbove:g,belowTop:u,fitsBelow:y,left:o}},t.prototype._prepareRenderWidgetAtExactPosition=function(e,t){var n=t.visibleRangeForPosition(e);return n?{top:n.top,left:n.left}:null},t.prototype._prepareRenderWidget=function(e,t){var n=this;if(!e.position||!e.preference)return null;var i,o,s,a=this._context.model.validateModelPosition(e.position),c=this._context.model.convertModelPositionToViewPosition(a.lineNumber,a.column),u=null,l=function(){if(!u){var i=e.widget.getDomNode();u=e.allowEditorOverflow?n._layoutBoxInPage(c,i,t):n._layoutBoxInViewport(c,i,t)}};for(o=1;2>=o;o++)for(s=0;s<e.preference.length;s++)if(i=e.preference[s],i===r.ContentWidgetPositionPreference.ABOVE){if(l(),!u)return null;if(2===o||u.fitsAbove)return{top:u.aboveTop,left:u.left}}else{if(i!==r.ContentWidgetPositionPreference.BELOW)return this._prepareRenderWidgetAtExactPosition(c,t);if(l(),!u)return null;if(2===o||u.fitsBelow)return{top:u.belowTop,left:u.left}}},t.prototype._render=function(e){var t,i,r=this,o={};for(i in this._widgets)this._widgets.hasOwnProperty(i)&&(t=this._prepareRenderWidget(this._widgets[i],e),t&&(o[i]=t));this._requestModificationFrame(function(){var t,i,s;for(t in r._widgets)r._widgets.hasOwnProperty(t)&&(i=r._widgets[t],s=r._widgets[t].widget.getDomNode(),o.hasOwnProperty(t)?(i.allowEditorOverflow?(n.StyleMutator.setTop(s,o[t].top),n.StyleMutator.setLeft(s,o[t].left)):(n.StyleMutator.setTop(s,o[t].top+e.viewportTop-e.bigNumbersDelta),n.StyleMutator.setLeft(s,o[t].left)),i.isVisible||(n.StyleMutator.setVisibility(s,"inherit"),s.setAttribute("monaco-visible-content-widget","true"),i.isVisible=!0)):i.isVisible&&(s.removeAttribute("monaco-visible-content-widget"),i.isVisible=!1,n.StyleMutator.setVisibility(s,"hidden")))})},t}(i.ViewPart);t.ViewContentWidgets=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./currentLineHighlight"],function(e,t,n){var i=function(e){function t(t,n){e.call(this),this._context=t,this._layoutProvider=n,this._selectionIsEmpty=!0,this._primaryCursorIsInEditableRange=!0,this._primaryCursorLineNumber=1,this._scrollWidth=this._layoutProvider.getScrollWidth(),this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null},t.prototype.onModelFlushed=function(){return this._primaryCursorIsInEditableRange=!0,this._selectionIsEmpty=!0,this._primaryCursorLineNumber=1,this._scrollWidth=this._layoutProvider.getScrollWidth(),!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){var t=!1;return this._primaryCursorIsInEditableRange!==e.isInEditableRange&&(this._primaryCursorIsInEditableRange=e.isInEditableRange,t=!0),this._primaryCursorLineNumber!==e.position.lineNumber&&(this._primaryCursorLineNumber=e.position.lineNumber,t=!0),t},t.prototype.onCursorSelectionChanged=function(e){var t=e.selection.isEmpty();return this._selectionIsEmpty!==t?(this._selectionIsEmpty=t,!0):!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return this._scrollWidth!==e?(this._scrollWidth=e,!0):!1},t.prototype.shouldCallRender2=function(e){return this.shouldRender?(this.shouldRender=!1,this._scrollWidth=e.scrollWidth,!0):!1},t.prototype.render2=function(e){return e===this._primaryCursorLineNumber&&this._shouldShowCurrentLine()?['<div class="current-line" style="width:',String(this._scrollWidth),"px; height:",String(this._context.configuration.editor.lineHeight),'px;"></div>']:null},t.prototype._shouldShowCurrentLine=function(){return this._selectionIsEmpty&&this._primaryCursorIsInEditableRange&&!this._context.configuration.editor.readOnly},t}(n.ViewEventHandler);t.CurrentLineHighlightOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/decorations/decorations",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./decorations"],function(e,t,n){var i=function(e){function t(t){e.call(this),this._context=t,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t,n,i,r,o,s,a,c,u,l,d,h,p={},f=e.getDecorationsInViewport(),m=this._context.configuration.editor.lineHeight.toString(),v=0;for(a=0,c=f.length;c>a;a++)if(n=f[a],i=n.range,n.options.className)if(n.options.isWholeLine)for(u=i.startLineNumber;u<=i.endLineNumber;u++)e.lineIsVisible(u)&&(p.hasOwnProperty(u.toString())?t=p[u.toString()]:(t=[],p[u.toString()]=t),v++,t.push('<div class="cdr '),t.push(n.options.className),t.push('" style="left:0;width:100%;height:'),t.push(m.toString()),t.push('px;"></div>'));else if(r=e.linesVisibleRangesForRange(i,!1))for(u=0,l=r.length;l>u;u++)for(o=r[u],p.hasOwnProperty(o.lineNumber.toString())?t=p[o.lineNumber.toString()]:(t=[],
p[o.lineNumber.toString()]=t),d=0,h=o.ranges.length;h>d;d++)s=o.ranges[d],v++,t.push('<div class="cdr '),t.push(n.options.className),t.push('" style="left:'),t.push(s.left.toString()),t.push("px;width:"),t.push(s.width.toString()),t.push("px;height:"),t.push(m.toString()),t.push('px;"></div>');return this._renderResult=p,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.DecorationsOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/glyphMargin/glyphMargin",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./glyphMargin"],function(e,t,n){var i=function(e){function t(t){e.call(this),this._context=t,this._glyphMarginLeft=0,this._glyphMarginWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;if(this.shouldRender=!1,!this._context.configuration.editor.glyphMargin)return this._renderResult=null,!1;var t,n,i,r,o,s,a,c,u,l={},d=0,h=e.getDecorationsInViewport(),p=this._context.configuration.editor.lineHeight.toString(),f={};for(i=0,r=h.length;r>i;i++)if(t=h[i],t.options.glyphMarginClassName)for(n=t.range,c=n.startLineNumber;c<=n.endLineNumber;c++)e.lineIsVisible(c)&&(u=c.toString(),f.hasOwnProperty(u)||(f[u]={}),f[u][t.options.glyphMarginClassName]=!0);var m=this._glyphMarginLeft.toString(),v=this._glyphMarginWidth.toString(),g='" style="left:'+m+"px;width:"+v+"px;height:"+p+'px;"></div>';for(u in f){o=f[u],a=[],a.push('<div class="cgmr');for(s in o)d++,a.push(" "),a.push(s);a.push(g),l[u]=a}return this._renderResult=l,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.GlyphMarginOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lineNumbers/lineNumbers",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/editorBrowser","vs/css!./lineNumbers"],function(e,t,n,i){var r=function(e){function t(t){e.call(this),this._context=t,this._lineNumbersLeft=0,this._lineNumbersWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!1},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._lineNumbersLeft=e.lineNumbersLeft,this._lineNumbersWidth=e.lineNumbersWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;if(this.shouldRender=!1,!this._context.configuration.editor.lineNumbers)return this._renderResult=null,!1;var t,n,r={},o=this._context.configuration.editor.lineHeight.toString(),s='<div class="'+i.ClassNames.LINE_NUMBERS+'" style="left:'+this._lineNumbersLeft.toString()+"px;width:"+this._lineNumbersWidth.toString()+"px;height:"+o+'px;">';for(t=e.visibleRange.startLineNumber;t<=e.visibleRange.endLineNumber;t++)if(n=this._context.model.getLineRenderLineNumber(t)){var a=[s,this._context.model.getLineRenderLineNumber(t),"</div>"];r[t.toString()]=a}return this._renderResult=r,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.LineNumbersOverlay=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/lines/viewLines",["require","exports","vs/base/browser/browser","vs/base/browser/dom","vs/base/common/async","vs/editor/browser/viewParts/lines/viewLine","vs/editor/browser/view/viewLayer","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/editor/common/core/range"],function(e,t,n,i,r,o,s,a,c,u){var l=function(e){function t(t,n){var i=this;e.call(this,t),this._hasVerticalScroll=!1,this._hasHorizontalScroll=!1,this._layoutProvider=n,this.domNode.className=a.ClassNames.VIEW_LINES,this._maxLineWidth=0,this._asyncUpdateLineWidths=new r.RunOnceScheduler(function(){i._updateLineWidths()},200),this._currentVisibleRange=new u.Range(1,1,1,1),this._bigNumbersDelta=0,this._lastCursorRevealRangeHorizontallyEvent=null,this.textRangeRestingSpot=document.createElement("div"),this.textRangeRestingSpot.className="textRangeRestingSpot",this._hasVerticalScroll=!0,this._hasHorizontalScroll=!0}return __extends(t,e),t.prototype.dispose=function(){this._asyncUpdateLineWidths.dispose(),this._layoutProvider=null,e.prototype.dispose.call(this)},t.prototype.onConfigurationChanged=function(t){var n=e.prototype.onConfigurationChanged.call(this,t);return t.wrappingInfo&&(this._maxLineWidth=0),n},t.prototype.onLayoutChanged=function(t){var n=e.prototype.onLayoutChanged.call(this,t);return this._maxLineWidth=0,n},t.prototype.onModelFlushed=function(){var t=e.prototype.onModelFlushed.call(this);return this._maxLineWidth=0,t},t.prototype.onScrollWidthChanged=function(e){return i.StyleMutator.setWidth(this.domNode,e),!1},t.prototype.onModelDecorationsChanged=function(t){for(var n=e.prototype.onModelDecorationsChanged.call(this,t),i=0;i<this._lines.length;i++)this._lines[i].onModelDecorationsChanged();return n||!0},t.prototype.onCursorRevealRange=function(e){var t=this._computeScrollTopToRevealRange(this._layoutProvider.getCurrentViewport(),e.range,e.verticalType);return e.revealHorizontal&&(this._lastCursorRevealRangeHorizontallyEvent=e),this._layoutProvider.setScrollTop(t),!0},t.prototype.onCursorScrollRequest=function(e){var t=this._layoutProvider.getScrollTop(),n=t+e.deltaLines*this._context.configuration.editor.lineHeight;return this._layoutProvider.setScrollTop(n),!0},t.prototype.onScrollChanged=function(t){return this._hasVerticalScroll=this._hasVerticalScroll||t.vertical,this._hasHorizontalScroll=this._hasHorizontalScroll||t.horizontal,e.prototype.onScrollChanged.call(this,t)},t.prototype.getPositionFromDOMInfo=function(e,t){var n=this._getLineNumberFromDOMInfo(e);if(-1===n)return null;if(1>n||n>this._context.model.getLineCount())return null;if(1===this._context.model.getLineMaxColumn(n))return{lineNumber:n,column:1};var i=n-this._rendLineNumberStart;if(0>i||i>=this._lines.length)return null;var r=this._lines[i].getColumnOfNodeOffset(n,e,t),o=this._context.model.getLineMinColumn(n);return o>r&&(r=o),{lineNumber:n,column:r}},t.prototype._getLineNumberFromDOMInfo=function(e){for(;e&&1===e.nodeType;){if(e.className===a.ClassNames.VIEW_LINE)return parseInt(e.getAttribute("lineNumber"),10);e=e.parentElement}return-1},t.prototype.getLineWidth=function(e){var t=e-this._rendLineNumberStart;return 0>t||t>=this._lines.length?-1:this._lines[t].getWidth()},t.prototype.linesVisibleRangesForRange=function(e,n){if(this.shouldRender)return null;var i=e.endLineNumber;if(e=u.Range.intersectRanges(e,this._currentVisibleRange),!e)return null;var r,o,s,a,c,l,d,h=[],p=this.domNode.getBoundingClientRect(),f=p.top,m=p.left;for(n&&(d=this._context.model.convertViewPositionToModelPosition(e.startLineNumber,1).lineNumber),o=e.startLineNumber;o<=e.endLineNumber;o++)s=o-this._rendLineNumberStart,0>s||s>=this._lines.length||(a=o===e.startLineNumber?e.startColumn:1,c=o===e.endLineNumber?e.endColumn:this._context.model.getLineMaxColumn(o),r=this._lines[s].getVisibleRangesForRange(o,a,c,f,0,m,this.textRangeRestingSpot),r&&r.length>0&&(n&&i>o&&(l=d,d=this._context.model.convertViewPositionToModelPosition(o+1,1).lineNumber,l!==d&&(r[r.length-1].width+=t.LINE_FEED_WIDTH)),h.push({lineNumber:o,ranges:r})));return 0===h.length?null:h},t.prototype.visibleRangesForRange2=function(e,n,i,r){if(this.shouldRender)return null;var o=e.endLineNumber;if(e=u.Range.intersectRanges(e,this._currentVisibleRange),!e)return null;var s,a,c,l,d,h,p,f,m=[],v=this._context.configuration.editor.lineHeight,g=this.domNode.getBoundingClientRect(),y=g.top,_=g.left;for(r&&(f=this._context.model.convertViewPositionToModelPosition(e.startLineNumber,1).lineNumber),a=e.startLineNumber;a<=e.endLineNumber;a++)if(l=a-this._rendLineNumberStart,!(0>l||l>=this._lines.length)&&(d=a===e.startLineNumber?e.startColumn:1,h=a===e.endLineNumber?e.endColumn:this._context.model.getLineMaxColumn(a),s=this._lines[l].getVisibleRangesForRange(a,d,h,y,i,_,this.textRangeRestingSpot),s&&s.length>0)){c=this._layoutProvider.getVerticalOffsetForLineNumber(a)-this._bigNumbersDelta+n;for(var b=0,E=s.length;E>b;b++)s[b].top=c,s[b].height=v;r&&o>a&&(p=f,f=this._context.model.convertViewPositionToModelPosition(a+1,1).lineNumber,p!==f&&(s[s.length-1].width+=t.LINE_FEED_WIDTH)),m=m.concat(s)}return 0===m.length?null:m},t.prototype._createLine=function(){return o.createLine(this._context)},t.prototype._renderAndUpdateLineHeights=function(t){if(e.prototype._renderLines.call(this,t),this._currentVisibleRange=new u.Range(0+this._rendLineNumberStart,1,this._lines.length-1+this._rendLineNumberStart,this._context.model.getLineMaxColumn(this._lines.length-1+this._rendLineNumberStart)),this._lastCursorRevealRangeHorizontallyEvent){var n=this._computeScrollLeftToRevealRange(this._lastCursorRevealRangeHorizontallyEvent.range);this._lastCursorRevealRangeHorizontallyEvent=null;var i=this._context.configuration.editor.wrappingInfo.isViewportWrapping;i||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._layoutProvider.setScrollLeft(n.scrollLeft)}},t.prototype._updateLineWidths=function(){var e,t,n=1;for(e=0;e<this._lines.length;e++)t=this._lines[e].getWidth(),n=Math.max(n,t);this._ensureMaxLineWidth(n)},t.prototype.render=function(){var e=this._layoutProvider.getLinesViewportData();if(this._bigNumbersDelta=e.bigNumbersDelta,this.shouldRender&&(this.shouldRender=!1,this._renderAndUpdateLineHeights(e),this._asyncUpdateLineWidths.schedule()),this._hasVerticalScroll||this._hasHorizontalScroll){if(n.canUseTranslate3d){var t="translate3d("+-this._layoutProvider.getScrollLeft()+"px, "+e.visibleRangesDeltaTop+"px, 0px)";i.StyleMutator.setTransform(this.domNode.parentNode,t)}else this._hasVerticalScroll&&i.StyleMutator.setTop(this.domNode.parentNode,e.visibleRangesDeltaTop),this._hasHorizontalScroll&&i.StyleMutator.setLeft(this.domNode.parentNode,-this._layoutProvider.getScrollLeft());this._hasVerticalScroll=!1,this._hasHorizontalScroll=!1}return i.StyleMutator.setWidth(this.domNode,this._layoutProvider.getScrollWidth()),i.StyleMutator.setHeight(this.domNode,Math.min(this._layoutProvider.getTotalHeight(),1e6)),e.visibleRange=this._currentVisibleRange,e},t.prototype._ensureMaxLineWidth=function(e){this._maxLineWidth<e&&(this._maxLineWidth=e,this._layoutProvider.onMaxLineWidthChanged(this._maxLineWidth))},t.prototype._computeScrollTopToRevealRange=function(e,t,n){var i,r,o=e.top,s=e.height,a=o+s;i=this._layoutProvider.getVerticalOffsetForLineNumber(t.startLineNumber),r=this._layoutProvider.getVerticalOffsetForLineNumber(t.endLineNumber)+this._layoutProvider.heightInPxForLine(t.endLineNumber),n===c.VerticalRevealType.Simple&&(r+=this._context.configuration.editor.lineHeight);var u;if(n===c.VerticalRevealType.Center||n===c.VerticalRevealType.CenterIfOutsideViewport)if(n===c.VerticalRevealType.CenterIfOutsideViewport&&i>=o&&a>=r)u=o;else{var l=(i+r)/2;u=Math.max(0,l-s/2)}else u=this._computeMinimumScrolling(o,a,i,r);return u},t.prototype._computeScrollLeftToRevealRange=function(e){var n=0;if(e.startLineNumber!==e.endLineNumber)return{scrollLeft:0,maxHorizontalOffset:n};var i=this._layoutProvider.getCurrentViewport(),r=i.left,o=r+i.width,s=this.visibleRangesForRange2(e,0,0,!1),a=Number.MAX_VALUE,c=0;if(!s)return{scrollLeft:r,maxHorizontalOffset:n};var u,l;for(u=0;u<s.length;u++)l=s[u],l.left<a&&(a=l.left),l.left+l.width>c&&(c=l.left+l.width);n=c,a=Math.max(0,a-t.HORIZONTAL_EXTRA_PX),c+=this._context.configuration.editor.revealHorizontalRightPadding;var d=this._computeMinimumScrolling(r,o,a,c);return{scrollLeft:d,maxHorizontalOffset:n}},t.prototype._computeMinimumScrolling=function(e,t,n,i){var r=t-e,o=i-n;return r>o?e>n?n:i>t?Math.max(0,i-r):e:n},t.LINE_FEED_WIDTH=10,t.HORIZONTAL_EXTRA_PX=30,t}(s.ViewLayer);t.ViewLines=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/linesDecorations/linesDecorations",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./linesDecorations"],function(e,t,n){var i=function(e){function t(t){e.call(this),this._context=t,this._decorationsLeft=0,this._decorationsWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return this._decorationsLeft=e.decorationsLeft,this._decorationsWidth=e.decorationsWidth,!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t,n,i,r,o,s,a,c,u,l={},d=0,h=e.getDecorationsInViewport(),p=this._context.configuration.editor.lineHeight.toString(),f={};for(i=0,r=h.length;r>i;i++)if(t=h[i],t.options.linesDecorationsClassName)for(n=t.range,c=n.startLineNumber;c<=n.endLineNumber;c++)e.lineIsVisible(c)&&(u=c.toString(),f.hasOwnProperty(u)||(f[u]={}),f[u][t.options.linesDecorationsClassName]=!0);var m=this._decorationsLeft.toString(),v=this._decorationsWidth.toString(),g='" style="left:'+m+"px;width:"+v+"px;height:"+p+'px;"></div>';for(u in f){o=f[u],a=[],a.push('<div class="cldr');for(s in o)d++,a.push(" "),a.push(s);a.push(g),l[u]=a}return this._renderResult=l,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t}(n.ViewEventHandler);t.LinesDecorationsOverlay=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overlayWidgets/overlayWidgets",["require","exports","vs/base/browser/dom","vs/editor/browser/view/viewPart","vs/editor/browser/editorBrowser","vs/css!./overlayWidgets"],function(e,t,n,i,r){var o=function(e){function t(t){e.call(this,t),this._widgets={},this._verticalScrollbarWidth=0,this._horizontalScrollbarHeight=0,this._editorHeight=0,this.domNode=document.createElement("div"),this.domNode.className=r.ClassNames.OVERLAY_WIDGETS}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._widgets=null},t.prototype.onLayoutChanged=function(e){var t=this;return this._verticalScrollbarWidth=e.verticalScrollbarWidth,this._horizontalScrollbarHeight=e.horizontalScrollbarHeight,this._editorHeight=e.height,this._requestModificationFrame(function(){n.StyleMutator.setWidth(t.domNode,e.width)}),!0},t.prototype.addWidget=function(e){this._widgets[e.getId()]={widget:e,preference:null};var t=e.getDomNode();t.style.position="absolute",t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t)},t.prototype.setWidgetPosition=function(e,t){var n=this,i=this._widgets[e.getId()];i.preference=t,this._requestModificationFrame(function(){n._widgets.hasOwnProperty(e.getId())&&n._renderWidget(i)})},t.prototype.removeWidget=function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t],i=n.widget.getDomNode();delete this._widgets[t],i.parentNode.removeChild(i)}},t.prototype._renderWidget=function(e){var t="data-editor-restoreStyleTop",i=e.widget.getDomNode();if(null!==e.preference)if(e.preference===r.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER)i.hasAttribute(t)||i.setAttribute(t,i.style.top),n.StyleMutator.setTop(i,0),n.StyleMutator.setRight(i,2*this._verticalScrollbarWidth);else if(e.preference===r.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER){i.hasAttribute(t)||i.setAttribute(t,i.style.top);var o=i.clientHeight;n.StyleMutator.setTop(i,this._editorHeight-o-2*this._horizontalScrollbarHeight),n.StyleMutator.setRight(i,2*this._verticalScrollbarWidth)}else e.preference===r.OverlayWidgetPositionPreference.TOP_CENTER&&(i.hasAttribute(t)||i.setAttribute(t,i.style.top),n.StyleMutator.setTop(i,0),i.style.right="50%");else if(i.hasAttribute(t)){var s=i.getAttribute(t);i.removeAttribute(t),i.style.top=s}},t.prototype._render=function(e){var t,n=this;this._requestModificationFrame(function(){for(t in n._widgets)n._widgets.hasOwnProperty(t)&&n._renderWidget(n._widgets[t])})},t.prototype.onReadAfterForcedLayout=function(e){return this._render(e),null},t.prototype.onWriteAfterForcedLayout=function(){this._executeModificationRunners()},t}(i.ViewPart);t.ViewOverlayWidgets=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overviewRuler/overviewRuler",["require","exports","vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl","vs/editor/common/viewModel/viewEventHandler"],function(e,t,n,i){var r=function(e){function t(t,i,r,o,s,a){e.call(this),this._context=t,this._overviewRuler=new n.OverviewRulerImpl(0,i,r,this._context.configuration.editor.lineHeight,o,s,a),this._context.addEventHandler(this)}return __extends(t,e),t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._context.removeEventHandler(this),this._overviewRuler.dispose()},t.prototype.onConfigurationChanged=function(e){return e.lineHeight?(this._overviewRuler.setLineHeight(this._context.configuration.editor.lineHeight,!0),!0):!1},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return!0},t.prototype.onScrollHeightChanged=function(e){return this._overviewRuler.setScrollHeight(e,!0),!0},t.prototype.getDomNode=function(){return this._overviewRuler.getDomNode()},t.prototype.setLayout=function(e){this._overviewRuler.setLayout(e,!0)},t.prototype.setZones=function(e){this._overviewRuler.setZones(e,!0)},t}(i.ViewEventHandler);t.OverviewRuler=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/scrollDecoration/scrollDecoration",["require","exports","vs/base/browser/dom","vs/editor/browser/view/viewPart","vs/editor/browser/editorBrowser","vs/css!./scrollDecoration"],function(e,t,n,i,r){var o=function(e){function t(t){e.call(this,t),this._scrollTop=0,this._width=0,this._shouldShow=!1,this._domNode=document.createElement("div")}return __extends(t,e),t.prototype._updateShouldShow=function(){var e=this._context.configuration.editor.scrollbar.useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1},t.prototype.getDomNode=function(){return this._domNode},t.prototype.onConfigurationChanged=function(e){return this._updateShouldShow()},t.prototype.onLayoutChanged=function(e){return this._width!==e.width?(this._width=e.width,!0):!1},t.prototype.onScrollChanged=function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()},t.prototype._render=function(e){var t=this;this._requestModificationFrame(function(){n.StyleMutator.setWidth(t._domNode,t._width),n.toggleClass(t._domNode,r.ClassNames.SCROLL_DECORATION,t._shouldShow)})},t}(i.ViewPart);t.ScrollDecorationViewPart=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/selections/selections",["require","exports","vs/editor/common/viewModel/viewEventHandler","vs/css!./selections"],function(e,t,n){var i;!function(e){e[e.EXTERN=0]="EXTERN",e[e.INTERN=1]="INTERN",e[e.FLAT=2]="FLAT"}(i||(i={}));var r=navigator.userAgent.indexOf("Trident/7.0")>=0||navigator.userAgent.indexOf("Edge/12")>=0,o=function(e){function t(t){e.call(this),this._previousFrameVisibleRangesWithStyle=[],this._context=t,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._selections=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return this._selections=[e.selection],this._selections=this._selections.concat(e.secondarySelections),!0},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!1},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype._visibleRangesHaveGaps=function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)if(i=e[t],i.ranges.length>1)return!0;return!1},t.prototype._enrichVisibleRangesWithStyle=function(e,t){var n,r,o,s,a,c,u,l,d,h,p,f=null,m=null;if(t&&t.length>0&&e.length>0){for(var v=e[0].lineNumber,h=0;!f&&h<t.length;h++)t[h].lineNumber===v&&(f=t[h].ranges[0]);for(var g=e[e.length-1].lineNumber,h=t.length-1;!m&&h>=0;h--)t[h].lineNumber===g&&(m=t[h].ranges[0]);f&&!f.startStyle&&(f=null),m&&!m.startStyle&&(m=null)}for(h=0,p=e.length;p>h;h++)n=e[h].ranges[0],r=n.left,o=n.left+n.width,l={top:i.EXTERN,bottom:i.EXTERN},d={top:i.EXTERN,bottom:i.EXTERN},h>0?(s=e[h-1].ranges[0].left,a=e[h-1].ranges[0].left+e[h-1].ranges[0].width,r===s?l.top=i.FLAT:r>s&&(l.top=i.INTERN),o===a?d.top=i.FLAT:o>s&&a>o&&(d.top=i.INTERN)):f&&(l.top=f.startStyle.top,d.top=f.endStyle.top),p>h+1?(c=e[h+1].ranges[0].left,u=e[h+1].ranges[0].left+e[h+1].ranges[0].width,r===c?l.bottom=i.FLAT:r>c&&u>r&&(l.bottom=i.INTERN),o===u?d.bottom=i.FLAT:u>o&&(d.bottom=i.INTERN)):m&&(l.bottom=m.startStyle.bottom,d.bottom=m.endStyle.bottom),n.startStyle=l,n.endStyle=d},t.prototype._getVisibleRangesWithStyle=function(e,t,n){var i=t.linesVisibleRangesForRange(e,!0)||[],o=this._visibleRangesHaveGaps(i);return r||o||!this._context.configuration.editor.roundedSelection||this._enrichVisibleRangesWithStyle(i,n),i},t.prototype._createSelectionPiece=function(e,t,n,i,r){e.push('<div class="cslr '),e.push(n),e.push('" style="left:'),e.push(i.toString()),e.push("px;width:"),e.push(r.toString()),e.push("px;height:"),e.push(t),e.push('px;"></div>')},t.prototype._actualRenderOneSelection=function(e,n){var r,o,s,a,c,u,l,d,h=n.length>0&&n[0].ranges[0].startStyle,p=this._context.configuration.editor.lineHeight.toString(),f=0;for(a=0,c=n.length;c>a;a++)for(r=n[a],e.hasOwnProperty(r.lineNumber.toString())?o=e[r.lineNumber.toString()]:(o=[],e[r.lineNumber.toString()]=o),u=0,l=r.ranges.length;l>u;u++)d=r.ranges[u],h&&((d.startStyle.top===i.INTERN||d.startStyle.bottom===i.INTERN)&&(f++,this._createSelectionPiece(o,p,t.SELECTION_CLASS_NAME,d.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH),s=t.EDITOR_BACKGROUND_CLASS_NAME,d.startStyle.top===i.INTERN&&(s+=" "+t.SELECTION_TOP_RIGHT),d.startStyle.bottom===i.INTERN&&(s+=" "+t.SELECTION_BOTTOM_RIGHT),f++,this._createSelectionPiece(o,p,s,d.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH)),(d.endStyle.top===i.INTERN||d.endStyle.bottom===i.INTERN)&&(f++,this._createSelectionPiece(o,p,t.SELECTION_CLASS_NAME,d.left+d.width,t.ROUNDED_PIECE_WIDTH),s=t.EDITOR_BACKGROUND_CLASS_NAME,d.endStyle.top===i.INTERN&&(s+=" "+t.SELECTION_TOP_LEFT),d.endStyle.bottom===i.INTERN&&(s+=" "+t.SELECTION_BOTTOM_LEFT),f++,this._createSelectionPiece(o,p,s,d.left+d.width,t.ROUNDED_PIECE_WIDTH))),s=t.SELECTION_CLASS_NAME,h&&(d.startStyle.top===i.EXTERN&&(s+=" "+t.SELECTION_TOP_LEFT),d.startStyle.bottom===i.EXTERN&&(s+=" "+t.SELECTION_BOTTOM_LEFT),d.endStyle.top===i.EXTERN&&(s+=" "+t.SELECTION_TOP_RIGHT),d.endStyle.bottom===i.EXTERN&&(s+=" "+t.SELECTION_BOTTOM_RIGHT)),f++,this._createSelectionPiece(o,p,s,d.left,d.width);return f},t.prototype.shouldCallRender2=function(e){if(!this.shouldRender)return!1;this.shouldRender=!1;var t,n,i,r={},o=0,s=[];for(i=0;i<this._selections.length;i++)t=this._selections[i],t.isEmpty()?s.push(null):(n=this._getVisibleRangesWithStyle(t,e,this._previousFrameVisibleRangesWithStyle[i]),s.push(n),o+=this._actualRenderOneSelection(r,n));return this._previousFrameVisibleRangesWithStyle=s,this._renderResult=r,!0},t.prototype.render2=function(e){return this._renderResult&&this._renderResult.hasOwnProperty(e.toString())?this._renderResult[e.toString()]:null},t.SELECTION_CLASS_NAME="selected-text",t.SELECTION_TOP_LEFT="top-left-radius",t.SELECTION_BOTTOM_LEFT="bottom-left-radius",t.SELECTION_TOP_RIGHT="top-right-radius",t.SELECTION_BOTTOM_RIGHT="bottom-right-radius",t.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",t.ROUNDED_PIECE_WIDTH=10,t}(n.ViewEventHandler);t.SelectionsOverlay=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/viewCursors/viewCursors",["require","exports","vs/base/browser/browser","vs/editor/browser/viewParts/viewCursors/viewCursor","vs/editor/browser/view/viewPart","vs/editor/browser/editorBrowser","vs/css!./viewCursors"],function(e,t,n,i,r,o){var s;!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Blink=2]="Blink"}(s||(s={}));var a=function(e){function t(t){e.call(this,t),this._primaryCursor=new i.ViewCursor(this._context,!1),this._secondaryCursors=[],this._domNode=document.createElement("div"),this._domNode.className=o.ClassNames.VIEW_CURSORS_LAYER,n.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._blinkTimer=-1,this._editorHasFocus=!1,this._updateBlinking()}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),-1!==this._blinkTimer&&(window.clearInterval(this._blinkTimer),this._blinkTimer=-1)},t.prototype.getDomNode=function(){return this._domNode},t.prototype.onModelFlushed=function(){this._primaryCursor.onModelFlushed();for(var e=0,t=this._secondaryCursors.length;t>e;e++){var n=this._secondaryCursors[e].getDomNode();n.parentNode.removeChild(n)}return this._secondaryCursors=[],!0},t.prototype.onModelDecorationsChanged=function(e){return e.inlineDecorationsChanged},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onModelTokensChanged=function(e){var t=function(t){return e.fromLineNumber<=t.lineNumber&&t.lineNumber<=e.toLineNumber};if(t(this._primaryCursor.getPosition()))return!0;for(var n=0;n<this._secondaryCursors.length;n++)if(t(this._secondaryCursors[n].getPosition()))return!0;return!1},t.prototype.onCursorPositionChanged=function(e){if(this._primaryCursor.onCursorPositionChanged(e.position,e.isInEditableRange),this._updateBlinking(),this._secondaryCursors.length<e.secondaryPositions.length)for(var t=e.secondaryPositions.length-this._secondaryCursors.length,n=0;t>n;n++){var r=new i.ViewCursor(this._context,!0);this._primaryCursor.getDomNode().parentNode.insertBefore(r.getDomNode(),this._primaryCursor.getDomNode().nextSibling),this._secondaryCursors.push(r)}else if(this._secondaryCursors.length>e.secondaryPositions.length)for(var o=this._secondaryCursors.length-e.secondaryPositions.length,n=0;o>n;n++)this._secondaryCursors[0].getDomNode().parentNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var n=0;n<e.secondaryPositions.length;n++)this._secondaryCursors[n].onCursorPositionChanged(e.secondaryPositions[n],e.isInEditableRange);return!0},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onConfigurationChanged=function(e){this._primaryCursor.onConfigurationChanged(e),this._updateBlinking();for(var t=0,n=this._secondaryCursors.length;n>t;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onScrollHeightChanged=function(e){return!1},t.prototype.onViewFocusChanged=function(e){return this._editorHasFocus=e,this._updateBlinking(),!1},t.prototype.getPosition=function(){return this._primaryCursor.getPosition()},t.prototype._getRenderType=function(){if(this._editorHasFocus){if(this._primaryCursor.getIsInEditableRange()&&!this._context.configuration.editor.readOnly)switch(this._context.configuration.editor.cursorBlinking){
case"blink":return s.Blink;case"visible":return s.Visible;case"hidden":return s.Hidden;default:return s.Blink}return s.Visible}return s.Hidden},t.prototype._updateBlinking=function(){var e=this;-1!==this._blinkTimer&&(window.clearInterval(this._blinkTimer),this._blinkTimer=-1);var n=this._getRenderType();n===s.Visible||n===s.Blink?this._show():this._hide(),n===s.Blink&&(this._blinkTimer=window.setInterval(function(){return e._blink()},t.BLINK_INTERVAL))},t.prototype._blink=function(){this._isVisible?this._hide():this._show()},t.prototype._show=function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;t>e;e++)this._secondaryCursors[e].show();this._isVisible=!0},t.prototype._hide=function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;t>e;e++)this._secondaryCursors[e].hide();this._isVisible=!1},t.prototype._render=function(e){var t=this;this._primaryCursor.prepareRender(e);for(var n=0,i=this._secondaryCursors.length;i>n;n++)this._secondaryCursors[n].prepareRender(e);this._requestModificationFrame(function(){t._primaryCursor.render(e);for(var n=0,i=t._secondaryCursors.length;i>n;n++)t._secondaryCursors[n].render(e)})},t.BLINK_INTERVAL=500,t}(r.ViewPart);t.ViewCursors=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/viewZones/viewZones",["require","exports","vs/base/common/errors","vs/base/browser/dom","vs/editor/browser/view/viewPart","vs/editor/browser/editorBrowser"],function(e,t,n,i,r,o){var s=function(e){function t(t,n){e.call(this,t),this._whitespaceManager=n,this.domNode=document.createElement("div"),this.domNode.className=o.ClassNames.VIEW_ZONES,this.domNode.style.position="absolute",this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._zones={}}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._whitespaceManager=null,this._zones={}},t.prototype.onConfigurationChanged=function(e){var t=this;if(e.lineHeight){var n,r,o,s={};for(n in this._zones)this._zones.hasOwnProperty(n)&&(r=this._zones[n],o=this._heightInPixels(r.delegate),this._safeCallOnComputedHeight(r.delegate,o),s[n]=o,this._whitespaceManager.changeWhitespace(parseInt(n,10),o));return this._requestModificationFrame(function(){for(n in t._zones)t._zones.hasOwnProperty(n)&&s.hasOwnProperty(n)&&i.StyleMutator.setHeight(t._zones[n].delegate.domNode,s[n])}),!0}return!1},t.prototype.onLineMappingChanged=function(){var e,t,n=!1;for(t in this._zones)if(this._zones.hasOwnProperty(t)){e=this._zones[t];var i=this._computeWhitespaceAfterLineNumber(e.delegate);n=this._whitespaceManager.changeAfterLineNumberForWhitespace(parseInt(t,10),i)||n}return n},t.prototype.onLayoutChanged=function(e){return!0},t.prototype.onScrollChanged=function(e){return e.vertical},t.prototype.onScrollWidthChanged=function(e){return!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype._getZoneOrdinal=function(e){return"undefined"!=typeof e.afterColumn?e.afterColumn:1e4},t.prototype._computeWhitespaceAfterLineNumber=function(e){if(0===e.afterLineNumber)return 0;var t;if("undefined"!=typeof e.afterColumn)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var n=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t={lineNumber:n,column:this._context.model.getModelLineMaxColumn(n)}}var i=this._context.model.convertModelPositionToViewPosition(t.lineNumber,t.column);return i.lineNumber},t.prototype.addZone=function(e){var t=this._heightInPixels(e),n=this._whitespaceManager.addWhitespace(this._computeWhitespaceAfterLineNumber(e),this._getZoneOrdinal(e),t),r={whitespaceId:n,delegate:e,isVisible:!1};return this._safeCallOnComputedHeight(r.delegate,t),this._requestModificationFrame(function(){r.delegate.domNode.hasAttribute("monaco-view-zone")&&(r.delegate.domNode.style.position="absolute",i.StyleMutator.setHeight(r.delegate.domNode,t),r.delegate.domNode.style.width="100%",i.StyleMutator.setDisplay(r.delegate.domNode,"none"))}),this._zones[r.whitespaceId.toString()]=r,r.delegate.domNode.setAttribute("monaco-view-zone",r.whitespaceId.toString()),this.domNode.appendChild(r.delegate.domNode),r.whitespaceId},t.prototype.removeZone=function(e){if(this._zones.hasOwnProperty(e.toString())){var t=this._zones[e.toString()];return delete this._zones[e.toString()],this._whitespaceManager.removeWhitespace(t.whitespaceId),t.delegate.domNode.removeAttribute("monaco-visible-view-zone"),t.delegate.domNode.removeAttribute("monaco-view-zone"),this._requestModificationFrame(function(){t.delegate.domNode.hasAttribute("monaco-view-zone")||t.delegate.domNode.parentNode&&t.delegate.domNode.parentNode.removeChild(t.delegate.domNode)}),!0}return!1},t.prototype.layoutZone=function(e){var t=!1;if(this._zones.hasOwnProperty(e.toString())){var n=this._zones[e.toString()],i=this._heightInPixels(n.delegate),r=this._computeWhitespaceAfterLineNumber(n.delegate);this._getZoneOrdinal(n.delegate);t=this._whitespaceManager.changeWhitespace(n.whitespaceId,i)||t,t=this._whitespaceManager.changeAfterLineNumberForWhitespace(n.whitespaceId,r)||t}return t},t.prototype.shouldSuppressMouseDownOnViewZone=function(e){if(this._zones.hasOwnProperty(e.toString())){var t=this._zones[e.toString()];return t.delegate.suppressMouseDown}return!1},t.prototype._heightInPixels=function(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._context.configuration.editor.lineHeight*e.heightInLines:this._context.configuration.editor.lineHeight},t.prototype._safeCallOnComputedHeight=function(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(i){n.onUnexpectedError(i)}},t.prototype._safeCallOnDomNodeTop=function(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(i){n.onUnexpectedError(i)}},t.prototype._render=function(e){var t=this,n=this._whitespaceManager.getWhitespaceViewportData();this._requestModificationFrame(function(){var r,o,s={},a=!1;for(r=0,o=n.length;o>r;r++)s[n[r].id.toString()]=n[r],a=!0;var c,u;for(c in t._zones)t._zones.hasOwnProperty(c)&&(u=t._zones[c],s.hasOwnProperty(c)?(i.StyleMutator.setTop(u.delegate.domNode,s[c].verticalOffset-e.bigNumbersDelta),i.StyleMutator.setHeight(u.delegate.domNode,s[c].height),u.isVisible||(i.StyleMutator.setDisplay(u.delegate.domNode,"block"),u.delegate.domNode.setAttribute("monaco-visible-view-zone","true"),u.isVisible=!0),t._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(s[c].verticalOffset))):(u.isVisible&&(i.StyleMutator.setDisplay(u.delegate.domNode,"none"),u.delegate.domNode.removeAttribute("monaco-visible-view-zone"),u.isVisible=!1),t._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))));a&&i.StyleMutator.setWidth(t.domNode,e.scrollWidth)})},t}(r.ViewPart);t.ViewZones=s}),define("vs/editor/common/viewModel/viewModelCursors",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon"],function(e,t,n,i,r){var o=function(){function e(e,t){this.configuration=e,this.converter=t,this.lastCursorPositionChangedEvent=null,this.lastCursorSelectionChangedEvent=null}return e.prototype.getSelections=function(){if(this.lastCursorSelectionChangedEvent){var e=[];e.push(this.converter.convertModelSelectionToViewSelection(this.lastCursorSelectionChangedEvent.selection));for(var t=0,n=this.lastCursorSelectionChangedEvent.secondarySelections.length;n>t;t++)e.push(this.converter.convertModelSelectionToViewSelection(this.lastCursorSelectionChangedEvent.secondarySelections[t]));return e}return[new i.Selection(1,1,1,1)]},e.prototype.onCursorPositionChanged=function(e,t){this.lastCursorPositionChangedEvent=e;var n=this.converter.validateViewPosition(e.viewPosition.lineNumber,e.viewPosition.column,e.position),i=this.configuration.editor.stopRenderingLineAfter;-1!==i&&n.column>i&&(n=n.clone(),n.column=i);for(var o=[],s=0,a=e.secondaryPositions.length;a>s;s++)o[s]=this.converter.validateViewPosition(e.secondaryViewPositions[s].lineNumber,e.secondaryViewPositions[s].column,e.secondaryPositions[s]),-1!==i&&o[s].column>i&&(o[s]=o[s].clone(),o[s].column=i);var c={position:n,secondaryPositions:o,isInEditableRange:e.isInEditableRange};t(r.ViewEventNames.CursorPositionChangedEvent,c)},e.prototype.onCursorSelectionChanged=function(e,t){this.lastCursorSelectionChangedEvent=e;for(var n=this.converter.validateViewSelection(e.viewSelection,e.selection),i=[],o=0,s=e.secondarySelections.length;s>o;o++)i[o]=this.converter.validateViewSelection(e.secondaryViewSelections[o],e.secondarySelections[o]);var a={selection:n,secondarySelections:i};t(r.ViewEventNames.CursorSelectionChangedEvent,a)},e.prototype.onCursorRevealRange=function(e,t){var i=null;if(e.viewRange){var o=this.converter.validateViewPosition(e.viewRange.startLineNumber,e.viewRange.startColumn,e.range.getStartPosition()),s=this.converter.validateViewPosition(e.viewRange.endLineNumber,e.viewRange.endColumn,e.range.getEndPosition());i=new n.Range(o.lineNumber,o.column,s.lineNumber,s.column)}else i=this.converter.convertModelRangeToViewRange(e.range);var a={range:i,verticalType:e.verticalType,revealHorizontal:e.revealHorizontal};t(r.ViewEventNames.RevealRangeEvent,a)},e.prototype.onCursorScrollRequest=function(e,t){var n={deltaLines:e.deltaLines};t(r.ViewEventNames.ScrollRequestEvent,n)},e.prototype.onLineMappingChanged=function(e){this.lastCursorPositionChangedEvent&&this.onCursorPositionChanged(this.lastCursorPositionChangedEvent,e),this.lastCursorSelectionChangedEvent&&this.onCursorSelectionChanged(this.lastCursorSelectionChangedEvent,e)},e}();t.ViewModelCursors=o}),define("vs/editor/common/viewModel/viewModelDecorations",["require","exports","vs/editor/common/core/range","vs/editor/common/editorCommon"],function(e,t,n,i){var r=function(){function e(e,t){this.id=e.id,this.options=e.options,this.ownerId=e.ownerId,this.modelRange=e.range,this.range=t}return e}(),o=function(){function e(e,t,n){this.editorId=e,this.configuration=t,this.converter=n,this.decorations=[],this._clearCachedModelDecorationsResolver()}return e.prototype._clearCachedModelDecorationsResolver=function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverStartLineNumber=0,this._cachedModelDecorationsResolverEndLineNumber=0},e.prototype.dispose=function(){this.converter=null,this.decorations=null,this._clearCachedModelDecorationsResolver()},e.compareDecorations=function(e,t){return n.Range.compareRangesUsingStarts(e.range,t.range)},e.prototype.reset=function(t){var n,i,o,s,a=t.getAllDecorations(this.editorId,this.configuration.editor.readOnly);for(this.decorations=[],n=0,i=a.length;i>n;n++)o=a[n],s=new r(o,this.converter.convertModelRangeToViewRange(o.range,o.options.isWholeLine)),this.decorations[n]=s;this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations)},e.prototype.onModelDecorationsChanged=function(t,n){var o,s,a,c=!1,u=!1,l={},d={},h=this.configuration.editor.readOnly;for(s=0,a=t.addedOrChangedDecorations.length;a>s;s++)o=t.addedOrChangedDecorations[s],h&&o.isForValidation||o.ownerId&&o.ownerId!==this.editorId||(d[o.id]=o);for(s=0,a=t.removedDecorations.length;a>s;s++)l[t.removedDecorations[s]]=!0;var p,f={};for(s=0,a=this.decorations.length;a>s;s++)p=this.decorations[s],d.hasOwnProperty(p.id)&&(f[p.id]=!0,o=d[p.id],p.options=o.options,p.modelRange=o.range,p.range=this.converter.convertModelRangeToViewRange(o.range,o.options.isWholeLine),p.options.inlineClassName&&(u=!0),c=!0),l.hasOwnProperty(p.id)&&(this.decorations[s].options.inlineClassName&&(u=!0),this.decorations.splice(s,1),a--,s--,c=!0);var m;for(m in d)!f.hasOwnProperty(m)&&d.hasOwnProperty(m)&&(o=d[m],p=new r(o,this.converter.convertModelRangeToViewRange(o.range,o.options.isWholeLine)),this.decorations.push(p),p.options.inlineClassName&&(u=!0),c=!0);if(c){this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations);var v={inlineDecorationsChanged:u};n(i.ViewEventNames.DecorationsChangedEvent,v)}},e.prototype.onLineMappingChanged=function(t){var r,o,s,a,c=this.decorations,u=!1,l=!1;for(o=0,a=c.length;a>o;o++)r=c[o],s=this.converter.convertModelRangeToViewRange(r.modelRange,r.options.isWholeLine),l||!r.options.inlineClassName||n.Range.equalsRange(s,r.range)||(l=!0),u||n.Range.equalsRange(s,r.range)||(u=!0),r.range=s;if(u){this._clearCachedModelDecorationsResolver(),this.decorations.sort(e.compareDecorations);var d={inlineDecorationsChanged:l};t(i.ViewEventNames.DecorationsChangedEvent,d)}},e.prototype.getAllDecorations=function(){return this.decorations},e.prototype.getDecorationsResolver=function(e,t){var n=!0;return n=n&&null!==this._cachedModelDecorationsResolver,n=n&&this._cachedModelDecorationsResolverStartLineNumber===e,n=n&&this._cachedModelDecorationsResolverEndLineNumber===t,n||(this._cachedModelDecorationsResolver=this._createDecorationsResolver(e,t),this._cachedModelDecorationsResolverStartLineNumber=e,this._cachedModelDecorationsResolverEndLineNumber=t),this._cachedModelDecorationsResolver},e.prototype._createDecorationsResolver=function(e,t){var n,i,r,o,s,a,c,u=[],l=[],d=this.decorations;for(n=e;t>=n;n++)l[n-e]=[];for(a=0,c=d.length;c>a&&(o=d[a],s=o.range,!(s.startLineNumber>t));a++)if(!(s.endLineNumber<e)&&(u.push(o),o.options.inlineClassName))for(i=Math.max(e,s.startLineNumber),r=Math.min(t,s.endLineNumber),n=i;r>=n;n++)l[n-e].push(o);return{getDecorations:function(){return u},getInlineDecorations:function(n){if(e>n||n>t)throw new Error("Unexpected line outside the ViewModelDecorationsResolver preconfigured range");return l[n-e]}}},e}();t.ViewModelDecorations=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/viewModel/viewModel",["require","exports","vs/base/common/eventEmitter","vs/base/common/strings","vs/editor/common/core/selection","vs/editor/common/core/range","vs/editor/common/viewModel/viewModelDecorations","vs/editor/common/viewModel/viewModelCursors","vs/editor/common/core/position","vs/editor/common/editorCommon"],function(e,t,n,i,r,o,s,a,c,u){var l=function(e){function t(t,n,i,r,o){var c=this;e.call(this),this.lines=t,this.editorId=n,this.configuration=i,this.model=r,this.getCurrentCenteredModelRange=o,this.decorations=new s.ViewModelDecorations(this.editorId,this.configuration,{convertModelRangeToViewRange:function(e,t){return t?c.convertWholeLineModelRangeToViewRange(e):c.convertModelRangeToViewRange(e)}}),this.decorations.reset(this.model),this.cursors=new a.ViewModelCursors(this.configuration,this),this._updateShouldForceTokenization(),this.listenersToRemove=[],this.listenersToRemove.push(this.model.addBulkListener(function(e){return c.onEvents(e)})),this.listenersToRemove.push(this.configuration.addBulkListener(function(e){return c.onEvents(e)}))}return __extends(t,e),t.prototype.dispose=function(){this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.decorations.dispose(),this.decorations=null,this.lines=null,this.configuration=null,this.model=null},t.prototype._updateShouldForceTokenization=function(){this.shouldForceTokenization=this.lines.getOutputLineCount()<=this.configuration.editor.forcedTokenizationBoundary},t.prototype._onTabSizeChange=function(e){var t=this,n=this.lines.setTabSize(e,function(e,n){return t.emit(e,n)});return n&&(this.emit(u.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this._updateShouldForceTokenization()),n},t.prototype._onWrappingIndentChange=function(e){var t=this,n=this.lines.setWrappingIndent(u.wrappingIndentFromString(e),function(e,n){return t.emit(e,n)});return n&&(this.emit(u.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),this._updateShouldForceTokenization()),n},t.prototype._restoreCenteredModelRange=function(e){var t=this.convertModelRangeToViewRange(e),n={range:t,verticalType:u.VerticalRevealType.Center,revealHorizontal:!1};this.emit(u.ViewEventNames.RevealRangeEvent,n)},t.prototype._onWrappingColumnChange=function(e,t){var n=this,i=this.lines.setWrappingColumn(e,t,function(e,t){return n.emit(e,t)});return i&&(this.emit(u.ViewEventNames.LineMappingChangedEvent),this.decorations.onLineMappingChanged(function(e,t){return n.emit(e,t)}),this.cursors.onLineMappingChanged(function(e,t){return n.emit(e,t)}),this._updateShouldForceTokenization()),i},t.prototype.addEventSource=function(e){var t=this;this.listenersToRemove.push(e.addBulkListener(function(e){return t.onEvents(e)}))},t.prototype.onEvents=function(e){var t=this;this.deferredEmit(function(){var n,i=e.some(function(e){return e.getType()===u.EventType.ModelContentChanged});i||(n=t.getCurrentCenteredModelRange());var r,o,s,a,c,l=!1,d=!1,h=!1,p=!1;for(r=0,o=e.length;o>r;r++)switch(s=e[r],a=s.getData(),s.getType()){case u.EventType.ModelContentChanged:switch(c=a,c.changeType){case u.EventType.ModelContentChangedFlush:t.onModelFlushed(c),d=!0;break;case u.EventType.ModelContentChangedLinesDeleted:t.onModelLinesDeleted(c),d=!0;break;case u.EventType.ModelContentChangedLinesInserted:t.onModelLinesInserted(c),d=!0;break;case u.EventType.ModelContentChangedLineChanged:h=t.onModelLineChanged(c);break;default:console.info("ViewModel received unknown event: "),console.info(s)}l=!0;break;case u.EventType.ModelTokensChanged:t.onModelTokensChanged(a);break;case u.EventType.ModelModeChanged:break;case u.EventType.ModelModeSupportChanged:break;case u.EventType.ModelPropertiesChanged:break;case u.EventType.ModelContentChanged2:break;case u.EventType.ModelDecorationsChanged:t.onModelDecorationsChanged(a);break;case u.EventType.ModelDispose:break;case u.EventType.CursorPositionChanged:t.onCursorPositionChanged(a);break;case u.EventType.CursorSelectionChanged:t.onCursorSelectionChanged(a);break;case u.EventType.CursorRevealRange:t.onCursorRevealRange(a);break;case u.EventType.CursorScrollRequest:t.onCursorScrollRequest(a);break;case u.EventType.ConfigurationChanged:if(p=t._onTabSizeChange(t.configuration.getIndentationOptions().tabSize)||p,p=t._onWrappingIndentChange(t.configuration.editor.wrappingIndent)||p,p=t._onWrappingColumnChange(t.configuration.editor.wrappingInfo.wrappingColumn,t.configuration.editor.typicalFullwidthCharacterWidth/t.configuration.editor.typicalHalfwidthCharacterWidth)||p,a.readOnly){t.decorations.reset(t.model);var f={inlineDecorationsChanged:!1};t.emit(u.ViewEventNames.DecorationsChangedEvent,f)}t.emit(s.getType(),a);break;default:console.info("View received unknown event: "),console.info(s)}l&&t._updateShouldForceTokenization(),!d&&h&&(t.emit(u.ViewEventNames.LineMappingChangedEvent),t.decorations.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t.cursors.onLineMappingChanged(function(e,n){return t.emit(e,n)}),t._updateShouldForceTokenization()),p&&n&&t._restoreCenteredModelRange(n)})},t.prototype.onModelFlushed=function(e){var t=this;this.lines.onModelFlushed(e.versionId,function(e,n){return t.emit(e,n)}),this.decorations.reset(this.model)},t.prototype.onModelDecorationsChanged=function(e){var t=this;this.decorations.onModelDecorationsChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onModelLinesDeleted=function(e){var t=this;this.lines.onModelLinesDeleted(e.versionId,e.fromLineNumber,e.toLineNumber,function(e,n){return t.emit(e,n)})},t.prototype.onModelTokensChanged=function(e){var t=this.convertModelPositionToViewPosition(e.fromLineNumber,1).lineNumber,n=this.convertModelPositionToViewPosition(e.toLineNumber,this.model.getLineMaxColumn(e.toLineNumber)).lineNumber,e={fromLineNumber:t,toLineNumber:n};this.emit(u.ViewEventNames.TokensChangedEvent,e)},t.prototype.onModelLineChanged=function(e){var t=this,n=this.lines.onModelLineChanged(e.versionId,e.lineNumber,e.detail,function(e,n){return t.emit(e,n)});return n},t.prototype.onModelLinesInserted=function(e){var t=this;this.lines.onModelLinesInserted(e.versionId,e.fromLineNumber,e.toLineNumber,e.detail.split("\n"),function(e,n){return t.emit(e,n)})},t.prototype.validateViewRange=function(e,t,n,i,r){var s=this.validateViewPosition(t,t,r.getStartPosition()),a=this.validateViewPosition(n,i,r.getEndPosition());return new o.Range(s.lineNumber,s.column,a.lineNumber,a.column)},t.prototype.validateViewPosition=function(e,t,n){1>e&&(e=1);var i=this.getLineCount();e>i&&(e=i);var r=this.getLineMinColumn(e),o=this.getLineMaxColumn(e);r>t&&(t=r),t>o&&(t=o);var s=this.convertViewPositionToModelPosition(e,t);return s.equals(n)?new c.Position(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)},t.prototype.validateViewSelection=function(e,t){var n=new c.Position(t.selectionStartLineNumber,t.selectionStartColumn),i=new c.Position(t.positionLineNumber,t.positionColumn),o=this.validateViewPosition(e.selectionStartLineNumber,e.selectionStartColumn,n),s=this.validateViewPosition(e.positionLineNumber,e.positionColumn,i);return new r.Selection(o.lineNumber,o.column,s.lineNumber,s.column)},t.prototype.onCursorPositionChanged=function(e){var t=this;this.cursors.onCursorPositionChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorSelectionChanged=function(e){var t=this;this.cursors.onCursorSelectionChanged(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorRevealRange=function(e){var t=this;this.cursors.onCursorRevealRange(e,function(e,n){return t.emit(e,n)})},t.prototype.onCursorScrollRequest=function(e){var t=this;this.cursors.onCursorScrollRequest(e,function(e,n){return t.emit(e,n)})},t.prototype.getLineCount=function(){return this.lines.getOutputLineCount()},t.prototype.getLineContent=function(e){return this.lines.getOutputLineContent(e)},t.prototype.getLineMinColumn=function(e){return this.lines.getOutputLineMinColumn(e)},t.prototype.getLineMaxColumn=function(e){return this.lines.getOutputLineMaxColumn(e)},t.prototype.getLineFirstNonWhitespaceColumn=function(e){var t=i.firstNonWhitespaceIndex(this.getLineContent(e));return-1===t?0:t+1},t.prototype.getLineLastNonWhitespaceColumn=function(e){var t=i.lastNonWhitespaceIndex(this.getLineContent(e));return-1===t?0:t+2},t.prototype.getLineTokens=function(e){return this.lines.getOutputLineTokens(e,!this.shouldForceTokenization)},t.prototype.getLineRenderLineNumber=function(e){var t=this.convertViewPositionToModelPosition(e,1);if(1!==t.column)return"";var n=t.lineNumber;return"function"==typeof this.configuration.editor.lineNumbers?this.configuration.editor.lineNumbers(n):n.toString()},t.prototype.getDecorationsResolver=function(e,t){return this.decorations.getDecorationsResolver(e,t)},t.prototype.getAllDecorations=function(){return this.decorations.getAllDecorations()},t.prototype.getValueInRange=function(e,t){var n=this.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)},t.prototype.getModelLineContent=function(e){return this.model.getLineContent(e)},t.prototype.getSelections=function(){return this.cursors.getSelections()},t.prototype.getModelLineMaxColumn=function(e){return this.model.getLineMaxColumn(e)},t.prototype.validateModelPosition=function(e){return this.model.validatePosition(e)},t.prototype.convertViewPositionToModelPosition=function(e,t){return this.lines.convertOutputPositionToInputPosition(e,t)},t.prototype.convertViewRangeToModelRange=function(e){var t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new o.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertModelPositionToViewPosition=function(e,t){return this.lines.convertInputPositionToOutputPosition(e,t)},t.prototype.convertModelSelectionToViewSelection=function(e){var t=this.convertModelPositionToViewPosition(e.selectionStartLineNumber,e.selectionStartColumn),n=this.convertModelPositionToViewPosition(e.positionLineNumber,e.positionColumn);return new r.Selection(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertModelRangeToViewRange=function(e){var t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn);return new o.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t.prototype.convertWholeLineModelRangeToViewRange=function(e){var t=this.convertModelPositionToViewPosition(e.startLineNumber,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,this.model.getLineMaxColumn(e.endLineNumber));return new o.Range(t.lineNumber,t.column,n.lineNumber,n.column)},t}(n.EventEmitter);t.ViewModel=l}),define("vs/editor/contrib/comment/common/blockCommentCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/position","vs/editor/common/core/selection","vs/editor/common/core/editOperation"],function(e,t,n,i,r,o){var s=function(){function e(e){this._selection=e,this._usedEndToken=null}return e._haystackHasNeedleAtOffset=function(e,t,n){if(0>n)return!1;var i=t.length,r=e.length;if(n+i>r)return!1;for(var o=0;i>o;o++)if(e.charCodeAt(n+o)!==t.charCodeAt(o))return!1;return!0},e.prototype._createOperationsForBlockComment=function(t,i,r,o){var s,a=t.startLineNumber,c=t.startColumn,u=t.endLineNumber,l=t.endColumn,d=(n.Range.isEmpty(t),i.blockCommentStartToken),h=i.blockCommentEndToken,p=r.getLineContent(a).lastIndexOf(d,c-1+d.length),f=r.getLineContent(u).indexOf(h,l-1-h.length);-1!==p&&-1!==f?s=e._createRemoveBlockCommentOperations({startLineNumber:a,startColumn:p+1+d.length,endLineNumber:u,endColumn:f+1},d,h):(s=e._createAddBlockCommentOperations(t,d,h),this._usedEndToken=1===s.length?h:null);for(var m=0;m<s.length;m++)o.addEditOperation(s[m].range,s[m].text)},e._createRemoveBlockCommentOperations=function(e,t,i){var r=[];return n.Range.isEmpty(e)?r.push(o.EditOperation["delete"](new n.Range(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(r.push(o.EditOperation["delete"](new n.Range(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(o.EditOperation["delete"](new n.Range(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),r},e._createAddBlockCommentOperations=function(e,t,r){var s=[];return n.Range.isEmpty(e)?s.push(o.EditOperation.replace(new n.Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+r)):(s.push(o.EditOperation.insert(new i.Position(e.startLineNumber,e.startColumn),t)),s.push(o.EditOperation.insert(new i.Position(e.endLineNumber,e.endColumn),r))),s},e.prototype.getEditOperations=function(e,t){var n=this._selection.startLineNumber,i=this._selection.startColumn,r=this._selection.endLineNumber,o=this._selection.endColumn,s=e.getModeAtPosition(n,i).commentsSupport;if(s){var a=s.getCommentsConfiguration();a&&a.blockCommentStartToken&&a.blockCommentEndToken&&this._createOperationsForBlockComment({startLineNumber:n,startColumn:i,endLineNumber:r,endColumn:o},a,e,t)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var i=n[0],o=n[1];return r.Selection.createSelection(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}var s=n[0].range,a=this._usedEndToken?-this._usedEndToken.length:0;return r.Selection.createSelection(s.endLineNumber,s.endColumn+a,s.endLineNumber,s.endColumn+a)},e}();t.BlockCommentCommand=s}),define("vs/editor/contrib/comment/common/lineCommentCommand",["require","exports","./blockCommentCommand","vs/base/common/strings","vs/editor/common/core/range","vs/editor/common/core/position","vs/editor/common/core/selection","vs/editor/common/core/editOperation"],function(e,t,n,i,r,o,s,a){!function(e){e[e.Toggle=0]="Toggle",e[e.ForceAdd=1]="ForceAdd",e[e.ForceRemove=2]="ForceRemove"}(t.Type||(t.Type={}));var c=t.Type,u=function(){function e(e,t,n){this._selection=e,this._tabSize=t,this._type=n,this._deltaColumn=0}return e._gatherPreflightCommentStrings=function(e,t,n){var i,r,o,s,a,c,u,l=[],d=Object.create(null);for(o=0,s=n-t+1;s>o;o++){if(a=t+o,c=e.getModeAtPosition(a,1),u=c.getId(),d[u])r=d[u];else{if(i=c.commentsSupport?c.commentsSupport.getCommentsConfiguration():null,r=i&&i.lineCommentTokens&&i.lineCommentTokens.length>0?i.lineCommentTokens[0]:null,null===r||0===r.length)return null;d[u]=r}l.push({ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length})}return l},e._analyzeLines=function(e,t,r,o){var s,a,u,l,d,h,p,f,m=(Object.create(null)," ".charCodeAt(0)),v=("	".charCodeAt(0),!0);for(p=e===c.Toggle?!0:e===c.ForceAdd?!1:!0,l=0,d=r.length;d>l;l++)s=r[l],h=o+l,f=t.getLineContent(h),a=i.firstNonWhitespaceIndex(f),-1!==a?(v=!1,s.ignore=!1,s.commentStrOffset=a,p&&!n.BlockCommentCommand._haystackHasNeedleAtOffset(f,s.commentStr,a)&&(e===c.Toggle?p=!1:e===c.ForceAdd||(s.ignore=!0)),p&&(u=a+s.commentStrLength,u<f.length&&f.charCodeAt(u)===m&&(s.commentStrLength+=1))):(e===c.Toggle?s.ignore=!0:e===c.ForceAdd?s.ignore=!1:s.ignore=!0,s.commentStrOffset=f.length);if(e===c.Toggle&&v)for(p=!1,l=0,d=r.length;d>l;l++)r[l].ignore=!1;return{supported:!0,shouldRemoveComments:p,lines:r}},e._gatherPreflightData=function(t,n,i,r){var o=e._gatherPreflightCommentStrings(n,i,r);return null===o?{supported:!1,shouldRemoveComments:!1,lines:null}:e._analyzeLines(t,n,o,i)},e.prototype._executeLineComments=function(t,n,i,r){var s;i.shouldRemoveComments?s=e._createRemoveLineCommentsOperations(i.lines,r.startLineNumber):(e._normalizeInsertionPoint(t,i.lines,r.startLineNumber,this._tabSize),s=e._createAddLineCommentsOperations(i.lines,r.startLineNumber));for(var a=new o.Position(r.positionLineNumber,r.positionColumn),c=0,u=s.length;u>c;c++)n.addEditOperation(s[c].range,s[c].text),s[c].range.isEmpty()&&s[c].range.getStartPosition().equals(a)&&(this._deltaColumn=s[c].text.length);this._selectionId=n.trackSelection(r)},e.prototype._attemptRemoveBlockComment=function(e,t,i,r){var o=t.startLineNumber,s=t.endLineNumber,a=e.getLineContent(o).lastIndexOf(i,t.startColumn-1+r.length),c=e.getLineContent(s).indexOf(r,t.endColumn-1-i.length);return-1!==a&&-1===c&&(c=e.getLineContent(o).indexOf(r,a+i.length),s=o),-1===a&&-1!==c&&(a=e.getLineContent(s).lastIndexOf(i,c),o=s),!t.isEmpty()||-1!==a&&-1!==c||(a=e.getLineContent(o).indexOf(i),-1!==a&&(c=e.getLineContent(o).indexOf(r,a+i.length))),-1!==a&&-1!==c?n.BlockCommentCommand._createRemoveBlockCommentOperations({startLineNumber:o,startColumn:a+i.length+1,endLineNumber:s,endColumn:c+1},i,r):null},e.prototype._executeBlockComment=function(e,t,r){var o=e.getModeAtPosition(r.startLineNumber,r.startColumn).commentsSupport;if(o){var s=o.getCommentsConfiguration();if(s&&s.blockCommentStartToken&&s.blockCommentEndToken){var a=s.blockCommentStartToken,c=(a.length,s.blockCommentEndToken),u=(c.length,this._attemptRemoveBlockComment(e,r,a,c));if(!u){if(r.isEmpty()){var l=e.getLineContent(r.startLineNumber),d=i.firstNonWhitespaceIndex(l);-1===d&&(d=l.length),u=n.BlockCommentCommand._createAddBlockCommentOperations({startLineNumber:r.startLineNumber,startColumn:d+1,endLineNumber:r.startLineNumber,endColumn:l.length+1},a,c)}else u=n.BlockCommentCommand._createAddBlockCommentOperations({startLineNumber:r.startLineNumber,startColumn:e.getLineFirstNonWhitespaceColumn(r.startLineNumber),endLineNumber:r.endLineNumber,endColumn:e.getLineMaxColumn(r.endLineNumber)},a,c);1===u.length&&(this._deltaColumn=a.length)}this._selectionId=t.trackSelection(r);for(var h=0;h<u.length;h++)t.addEditOperation(u[h].range,u[h].text);
}}},e.prototype.getEditOperations=function(t,n){var i=this._selection;this._moveEndPositionDown=!1,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var r=e._gatherPreflightData(this._type,t,i.startLineNumber,i.endLineNumber);return r.supported?this._executeLineComments(t,n,r,i):this._executeBlockComment(t,n,i)},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),s.Selection.createSelection(n.startLineNumber,n.startColumn+this._deltaColumn,n.endLineNumber,n.endColumn+this._deltaColumn)},e._createRemoveLineCommentsOperations=function(e,t){var n,i,o,s=[];for(n=0,i=e.length;i>n;n++)o=e[n],o.ignore||s.push(a.EditOperation["delete"](new r.Range(t+n,o.commentStrOffset+1,t+n,o.commentStrOffset+o.commentStrLength+1)));return s},e._createAddLineCommentsOperations=function(e,t){var n,i,r,s=[];for(n=0,i=e.length;i>n;n++)r=e[n],r.ignore||s.push(a.EditOperation.insert(new o.Position(t+n,r.commentStrOffset+1),r.commentStr+" "));return s},e.nextVisibleColumn=function(e,t,n,i){return n?e+(t-e%t):e+i},e._normalizeInsertionPoint=function(t,n,i,r){var o,s,a,c,u,l,d=Number.MAX_VALUE,h="	".charCodeAt(0);for(o=0,s=n.length;s>o;o++)if(!n[o].ignore){for(a=t.getLineContent(i+o),l=0,c=0,u=n[o].commentStrOffset;d>l&&u>c;c++)l=e.nextVisibleColumn(l,r,a.charCodeAt(c)===h,1);d>l&&(d=l)}for(d=Math.floor(d/r)*r,o=0,s=n.length;s>o;o++)if(!n[o].ignore){for(a=t.getLineContent(i+o),l=0,c=0,u=n[o].commentStrOffset;d>l&&u>c;c++)l=e.nextVisibleColumn(l,r,a.charCodeAt(c)===h,1);l>d?n[o].commentStrOffset=c-1:n[o].commentStrOffset=c}},e}();t.LineCommentCommand=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/diffNavigator/common/diffNavigator",["require","exports","vs/base/common/eventEmitter","vs/base/common/assert","vs/editor/common/editorCommon","vs/base/common/objects","vs/editor/common/core/range"],function(e,t,n,i,r,o,s){var a={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},c=function(e){function t(n,i){var s=this;void 0===i&&(i={}),e.call(this,[t.Events.UPDATED]),this.editor=n,this.options=o.mixin(i,a,!1),this.disposed=!1,this.toUnbind=[],this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=this.options.alwaysRevealFirst,this.toUnbind.push(this.editor.addListener(r.EventType.Disposed,function(){return s.dispose()})),this.toUnbind.push(this.editor.addListener(r.EventType.DiffUpdated,function(){return s.onDiffUpdated()})),this.options.followsCaret&&this.toUnbind.push(this.editor.getModifiedEditor().addListener(r.EventType.CursorPositionChanged,function(e){s.ignoreSelectionChange||(s.nextIdx=-1)})),this.options.alwaysRevealFirst&&this.toUnbind.push(this.editor.getModifiedEditor().addListener(r.EventType.ModelChanged,function(e){s.revealFirst=!0})),this.init()}return __extends(t,e),t.prototype.init=function(){var e=this.editor.getLineChanges()},t.prototype.onDiffUpdated=function(){this.init(),this.compute(this.editor.getLineChanges()),this.revealFirst&&null!==this.editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next())},t.prototype.compute=function(e){var n=this;this.ranges=[],e&&e.forEach(function(e){!n.options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach(function(e){n.ranges.push({rhs:!0,range:new s.Range(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})}):n.ranges.push({rhs:!0,range:new s.Range(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber,1)})}),this.ranges.sort(function(e,t){return e.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?-1:t.range.getStartPosition().isBeforeOrEqual(e.range.getStartPosition())?1:0}),this.emit(t.Events.UPDATED,{})},t.prototype.initIdx=function(e){for(var t=!1,n=this.editor.getPosition(),i=0,r=this.ranges.length;r>i&&!t;i++){var o=this.ranges[i].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)},t.prototype.move=function(e){if(i.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),this.canNavigate()){-1===this.nextIdx?this.initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var n=t.range.getStartPosition();this.editor.setPosition(n),this.editor.revealPositionInCenter(n)}finally{this.ignoreSelectionChange=!1}}},t.prototype.canNavigate=function(){return this.ranges&&this.ranges.length>0},t.prototype.next=function(){this.move(!0)},t.prototype.previous=function(){this.move(!1)},t.prototype.dispose=function(){for(;this.toUnbind.length>0;)this.toUnbind.pop()();this.ranges=null,this.disposed=!0,e.prototype.dispose.call(this)},t.Events={UPDATED:"navigation.updated"},t}(n.EventEmitter);t.DiffNavigator=c}),define("vs/editor/contrib/find/common/replaceAllCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){var r=function(){function e(e,t){this._ranges=e,this._replaceStrings=t}return e.prototype.getEditOperations=function(e,t){if(this._ranges.length>0){for(var i=[],r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort(function(e,t){return n.Range.compareRangesUsingStarts(e.range,t.range)});for(var o=[],s=i[0],r=1;r<i.length;r++)s.range.endLineNumber===i[r].range.startLineNumber&&s.range.endColumn===i[r].range.startColumn?(s.range=s.range.plusRange(i[r].range),s.text=s.text+i[r].text):(o.push(s),s=i[r]);o.push(s);for(var r=0;r<o.length;r++)t.addEditOperation(o[r].range,o[r].text)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),r=n[n.length-1].range;return i.Selection.createSelection(r.endLineNumber,r.endColumn,r.endLineNumber,r.endColumn)},e}();t.ReplaceAllCommand=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/find/common/findModel",["require","exports","vs/editor/common/editorCommon","vs/base/common/strings","vs/base/common/eventEmitter","./replaceAllCommand","vs/base/common/async","vs/editor/common/core/range","vs/editor/common/core/position","vs/editor/common/commands/replaceCommand"],function(e,t,n,i,r,o,s,a,c,u){function l(e){if(!e||0===e.length)return e;for(var t=0,n="",i=0,r=e.length;r>i;i++){var o=e.charCodeAt(i);if(o===h){if(i++,i>=r)break;var s=e.charCodeAt(i),a=null;switch(s){case h:a="\\";break;case p:a="\n";break;case f:a="	"}a&&(n+=e.substring(t,i-1)+a,t=i+1)}}return 0===t?e:n+e.substring(t)}t.START_FIND_ACTION_ID="actions.find",t.NEXT_MATCH_FIND_ACTION_ID="editor.action.nextMatchFindAction",t.PREVIOUS_MATCH_FIND_ACTION_ID="editor.action.previousMatchFindAction",t.START_FIND_REPLACE_ACTION_ID="editor.action.startFindReplaceAction",t.CLOSE_FIND_WIDGET_COMMAND_ID="closeFindWidget",t.TOGGLE_CASE_SENSITIVE_COMMAND_ID="toggleFindCaseSensitive",t.TOGGLE_WHOLE_WORD_COMMAND_ID="toggleFindWholeWord",t.TOGGLE_REGEX_COMMAND_ID="toggleFindRegex";var d=function(e){function t(i){var r=this;e.call(this,[t._MATCHES_UPDATED_EVENT,t._START_EVENT]),this.editor=i,this.startPosition=null,this.searchString="",this.replaceString="",this.searchOnlyEditableRange=!1,this.decorations=[],this.decorationIndex=0,this.findScopeDecorationId=null,this.highlightedDecorationId=null,this.listenersToRemove=[],this.didReplace=!1,this.isRegex=!1,this.matchCase=!1,this.wholeWord=!1,this.updateDecorationsScheduler=new s.RunOnceScheduler(function(){r.updateDecorations(!1,!1,null)},100),this.listenersToRemove.push(this.editor.addListener(n.EventType.CursorPositionChanged,function(e){("explicit"===e.reason||"undo"===e.reason||"redo"===e.reason)&&(null!==r.highlightedDecorationId&&r.editor.changeDecorations(function(e){e.changeDecorationOptions(r.highlightedDecorationId,r.createFindMatchDecorationOptions(!1)),r.highlightedDecorationId=null}),r.startPosition=r.editor.getPosition(),r.decorationIndex=-1)})),this.listenersToRemove.push(this.editor.addListener(n.EventType.ModelContentChanged,function(e){e.changeType===n.EventType.ModelContentChangedFlush&&(r.decorations=[],r.decorationIndex=-1,r.findScopeDecorationId=null,r.highlightedDecorationId=null),r.startPosition=r.editor.getPosition(),r.updateDecorationsScheduler.schedule()}))}return __extends(t,e),t.prototype.removeOldDecorations=function(e,t){var n,i,r=[];for(n=0,i=this.decorations.length;i>n;n++)r.push(this.decorations[n]);this.decorations=[],t&&this.hasFindScope()&&(r.push(this.findScopeDecorationId),this.findScopeDecorationId=null),e.deltaDecorations(r,[])},t.prototype.createFindMatchDecorationOptions=function(e){return{stickiness:n.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:e?"currentFindMatch":"findMatch",overviewRuler:{color:"rgba(246, 185, 77, 0.7)",darkColor:"rgba(246, 185, 77, 0.7)",position:n.OverviewRulerLane.Center}}},t.prototype.createFindScopeDecorationOptions=function(){return{className:"findScope",isWholeLine:!0}},t.prototype.addMatchesDecorations=function(e,t){var n,i,r=[];for(n=0,i=t.length;i>n;n++)r[n]={range:t[n],options:this.createFindMatchDecorationOptions(!1)};this.decorations=e.deltaDecorations([],r)},t.prototype._getSearchRange=function(){var e;return e=this.searchOnlyEditableRange?this.editor.getModel().getEditableRange():this.editor.getModel().getFullModelRange(),this.hasFindScope()&&(e=e.intersectRanges(this.editor.getModel().getDecorationRange(this.findScopeDecorationId))),e},t.prototype.updateDecorations=function(e,t,n){var i=this;this.didReplace&&this.next(),this.editor.changeDecorations(function(e){if(i.removeOldDecorations(e,t),t&&n){var r=e.deltaDecorations([],[{range:n,options:i.createFindScopeDecorationOptions()}]);i.findScopeDecorationId=r[0]}i.addMatchesDecorations(e,i._findMatches())}),this.highlightedDecorationId=null,this.decorationIndex=this.indexAfterPosition(this.startPosition),this.didReplace||e?this.decorations.length>0&&this.setSelectionToDecoration(this.decorations[this.decorationIndex]):this.decorationIndex=this.previousIndex(this.decorationIndex);var r={position:this.decorations.length>0?this.decorationIndex+1:0,count:this.decorations.length};this._emitMatchesUpdatedEvent(r),this.didReplace=!1},t.prototype.setFindScope=function(e){null===e?this.updateDecorations(!1,!0,e):this.updateDecorations(!1,!0,new a.Range(e.startLineNumber,1,e.endLineNumber,this.editor.getModel().getLineMaxColumn(e.endLineNumber)))},t.prototype.recomputeMatches=function(e,t){var n=!1;this.isRegex!==e.properties.isRegex&&(this.isRegex=e.properties.isRegex,n=!0),this.matchCase!==e.properties.matchCase&&(this.matchCase=e.properties.matchCase,n=!0),this.wholeWord!==e.properties.wholeWord&&(this.wholeWord=e.properties.wholeWord,n=!0),e.searchString!==this.searchString&&(this.searchString=e.searchString,n=!0),this.replaceString=e.replaceString,e.isReplaceRevealed!==this.searchOnlyEditableRange&&(this.searchOnlyEditableRange=e.isReplaceRevealed,n=!0),n&&this.updateDecorations(t,!1,null)},t.prototype.start=function(e,t,n){this.startPosition=this.editor.getPosition(),this.isRegex=e.properties.isRegex,this.matchCase=e.properties.matchCase,this.wholeWord=e.properties.wholeWord,this.searchString=e.searchString,this.replaceString=e.replaceString,this.searchOnlyEditableRange=e.isReplaceRevealed,this.setFindScope(t),this.decorationIndex=this.previousIndex(this.indexAfterPosition(this.startPosition));var i={state:e,selectionFindEnabled:this.hasFindScope(),shouldAnimate:n};this._emitStartEvent(i)},t.prototype.prev=function(){this.decorations.length>0?(-1===this.decorationIndex&&(this.decorationIndex=this.indexAfterPosition(this.startPosition)),this.decorationIndex=this.previousIndex(this.decorationIndex),this.setSelectionToDecoration(this.decorations[this.decorationIndex])):this.hasFindScope()&&this.editor.revealRangeInCenterIfOutsideViewport(this.editor.getModel().getDecorationRange(this.findScopeDecorationId))},t.prototype.next=function(){this.decorations.length>0?(-1===this.decorationIndex?this.decorationIndex=this.indexAfterPosition(this.startPosition):this.decorationIndex=this.nextIndex(this.decorationIndex),this.setSelectionToDecoration(this.decorations[this.decorationIndex])):this.hasFindScope()&&this.editor.revealRangeInCenterIfOutsideViewport(this.editor.getModel().getDecorationRange(this.findScopeDecorationId))},t.prototype.setSelectionToDecoration=function(e){var t=this;this.editor.changeDecorations(function(n){null!==t.highlightedDecorationId&&n.changeDecorationOptions(t.highlightedDecorationId,t.createFindMatchDecorationOptions(!1)),n.changeDecorationOptions(e,t.createFindMatchDecorationOptions(!0)),t.highlightedDecorationId=e});var n=this.editor.getModel().getDecorationRange(e);a.Range.isIRange(n)&&(this.editor.setSelection(n),this.editor.revealRangeInCenterIfOutsideViewport(n))},t.prototype.getReplaceString=function(e){if(!this.isRegex)return this.replaceString;var t=i.createRegExp(this.searchString,this.isRegex,this.matchCase,this.wholeWord),n=l(this.replaceString);return e.replace(t,n)},t.prototype.replace=function(){if(0!==this.decorations.length){var e=this.editor.getModel(),t=e.getDecorationRange(this.decorations[this.decorationIndex]),n=this.editor.getSelection();if(null!==t&&n.startColumn===t.startColumn&&n.endColumn===t.endColumn&&n.startLineNumber===t.startLineNumber&&n.endLineNumber===t.endLineNumber){var i=e.getValueInRange(n),r=this.getReplaceString(i),o=new u.ReplaceCommand(n,r);this.editor.executeCommand("replace",o),this.startPosition=new c.Position(n.startLineNumber,n.startColumn+r.length),this.decorationIndex=-1,this.didReplace=!0}else this.next()}},t.prototype._findMatches=function(e){return this.editor.getModel().findMatches(this.searchString,this._getSearchRange(),this.isRegex,this.matchCase,this.wholeWord,e)},t.prototype.replaceAll=function(){var e=this;if(0!==this.decorations.length){var t=this.editor.getModel(),n=this._findMatches(Number.MAX_VALUE);this.editor.changeDecorations(function(t){e.removeOldDecorations(t,!1)});for(var i=[],r=0,s=n.length;s>r;r++)i.push(this.getReplaceString(t.getValueInRange(n[r])));var a=new o.ReplaceAllCommand(n,i);this.editor.executeCommand("replaceAll",a)}},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.updateDecorationsScheduler.dispose(),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.editor.getModel()&&this.editor.changeDecorations(function(e){t.removeOldDecorations(e,!0)})},t.prototype.hasFindScope=function(){return!!this.findScopeDecorationId},t.prototype.previousIndex=function(e){return this.decorations.length>0?(e-1+this.decorations.length)%this.decorations.length:0},t.prototype.nextIndex=function(e){return this.decorations.length>0?(e+1)%this.decorations.length:0},t.prototype.indexAfterPosition=function(e){if(0===this.decorations.length)return 0;for(var t=0,n=this.decorations.length;n>t;t++){var i=this.decorations[t],r=this.editor.getModel().getDecorationRange(i);if(r&&!(r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return t;if(!(r.startColumn<e.column))return t}}return 0},t.prototype.addStartEventListener=function(e){return this.addListener2(t._START_EVENT,e)},t.prototype._emitStartEvent=function(e){this.emit(t._START_EVENT,e)},t.prototype.addMatchesUpdatedEventListener=function(e){return this.addListener2(t._MATCHES_UPDATED_EVENT,e)},t.prototype._emitMatchesUpdatedEvent=function(e){this.emit(t._MATCHES_UPDATED_EVENT,e)},t._START_EVENT="start",t._MATCHES_UPDATED_EVENT="matches",t}(r.EventEmitter);t.FindModelBoundToEditorModel=d;var h="\\".charCodeAt(0),p="n".charCodeAt(0),f="t".charCodeAt(0);t.parseReplaceString=l}),define("vs/editor/contrib/format/common/formatCommand",["require","exports","vs/base/common/strings","vs/editor/common/core/range"],function(e,t,n,i){var r=function(){function e(e,t){this._edits=e,this._initialSelection=t}return e.prototype.getEditOperations=function(t,n){this._edits.map(function(n){return e.trimEdit(n,t)}).filter(function(e){return null!==e}).forEach(function(e){return n.addEditOperation(i.Range.lift(e.range),e.text)});var r=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(r=!0,this._selectionId=n.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(r=!0,this._selectionId=n.trackSelection(this._initialSelection,!1))),r||(this._selectionId=n.trackSelection(this._initialSelection))},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._selectionId)},e.fixLineTerminators=function(e,t){e.text=e.text.replace(/\r\n|\r|\n/g,t.getEOL())},e.trimEdit=function(e,t){return this.fixLineTerminators(e,t),this._trimEdit(t.validateRange(e.range),e.text,e.forceMoveMarkers,t)},e._trimEdit=function(e,t,r,o){var s=o.getValueInRange(e),a=n.commonPrefixLength(t,s);if(a===s.length&&a===t.length)return null;if(a>0){var c=o.modifyPosition(e.getStartPosition(),a);e=new i.Range(c.lineNumber,c.column,e.endLineNumber,e.endColumn),t=t.substring(a),s=s.substr(a)}var u=n.commonSuffixLength(t,s);if(u>0){var l=o.modifyPosition(e.getEndPosition(),-u);e=new i.Range(e.startLineNumber,e.startColumn,l.lineNumber,l.column),t=t.substring(0,t.length-u),s=s.substring(0,s.length-u)}return{text:t,range:e,forceMoveMarkers:r}},e}();t.EditOperationsCommand=r}),define("vs/editor/contrib/hover/browser/hoverOperation",["require","exports","vs/base/common/async","vs/base/common/errors"],function(e,t,n,i){var r;!function(e){e[e.IDLE=0]="IDLE",e[e.FIRST_WAIT=1]="FIRST_WAIT",e[e.SECOND_WAIT=2]="SECOND_WAIT",e[e.WAITING_FOR_ASYNC_COMPUTATION=3]="WAITING_FOR_ASYNC_COMPUTATION"}(r||(r={}));var o=function(){function e(e,t,i,o){var s=this;this._computer=e,this._state=r.IDLE,this._firstWaitScheduler=new n.RunOnceScheduler(function(){return s._triggerAsyncComputation()},this._getHoverTimeMillis()/2),this._secondWaitScheduler=new n.RunOnceScheduler(function(){return s._triggerSyncComputation()},this._getHoverTimeMillis()/2),this._loadingMessageScheduler=new n.RunOnceScheduler(function(){return s._showLoadingMessage()},3*this._getHoverTimeMillis()),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=o}return e.prototype.getComputer=function(){return this._computer},e.prototype._getHoverTimeMillis=function(){return this._computer.getHoverTimeMillis?this._computer.getHoverTimeMillis():e.HOVER_TIME},e.prototype._triggerAsyncComputation=function(){var e=this;this._state=r.SECOND_WAIT,this._secondWaitScheduler.schedule(),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=this._computer.computeAsync(),this._asyncComputationPromise.then(function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)}).done(null,function(){return e._onError})):this._asyncComputationPromiseDone=!0},e.prototype._triggerSyncComputation=function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=r.IDLE,this._onComplete(this._computer.getResult())):(this._state=r.WAITING_FOR_ASYNC_COMPUTATION,this._onProgress(this._computer.getResult()))},e.prototype._showLoadingMessage=function(){this._state===r.WAITING_FOR_ASYNC_COMPUTATION&&this._onProgress(this._computer.getResultWithLoadingMessage())},e.prototype._withAsyncResult=function(e){e&&this._computer.onResult(e,!1),this._state===r.WAITING_FOR_ASYNC_COMPUTATION&&(this._state=r.IDLE,this._onComplete(this._computer.getResult()))},e.prototype._onComplete=function(e){this._completeCallback&&this._completeCallback(e)},e.prototype._onError=function(e){this._errorCallback?this._errorCallback(e):i.onUnexpectedError(e)},e.prototype._onProgress=function(e){this._progressCallback&&this._progressCallback(e)},e.prototype.start=function(){this._state===r.IDLE&&(this._state=r.FIRST_WAIT,this._firstWaitScheduler.schedule(),this._loadingMessageScheduler.schedule())},e.prototype.cancel=function(){this._loadingMessageScheduler.cancel(),this._state===r.FIRST_WAIT&&this._firstWaitScheduler.cancel(),this._state===r.SECOND_WAIT&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&this._asyncComputationPromise.cancel()),this._state===r.WAITING_FOR_ASYNC_COMPUTATION&&this._asyncComputationPromise&&this._asyncComputationPromise.cancel(),this._state=r.IDLE},e.HOVER_TIME=300,e}();t.HoverOperation=o}),define("vs/editor/contrib/hover/browser/hoverWidgets",["require","exports","vs/editor/browser/editorBrowser","vs/base/browser/dom","vs/editor/common/core/position"],function(e,t,n,i,r){var o=function(){function e(e,t){this.allowEditorOverflow=!0,this._id=e,this._editor=t,this._isVisible=!1,this._containerDomNode=document.createElement("div"),this._containerDomNode.className="monaco-editor-hover monaco-editor-background",this._domNode=document.createElement("div"),this._domNode.style.display="inline-block",this._containerDomNode.appendChild(this._domNode),this._editor.addContentWidget(this),this._showAtPosition=null}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._containerDomNode},e.prototype.showAt=function(e){this._showAtPosition=new r.Position(e.lineNumber,e.column),this._isVisible=!0;var t=Math.min(800,parseInt(this._containerDomNode.style.maxWidth,10));i.StyleMutator.setWidth(this._containerDomNode,t),i.StyleMutator.setHeight(this._containerDomNode,0),i.StyleMutator.setLeft(this._containerDomNode,0);var n=Math.min(t,this._domNode.clientWidth+5),o=this._domNode.clientHeight+1;i.StyleMutator.setWidth(this._containerDomNode,n),i.StyleMutator.setHeight(this._containerDomNode,o),this._editor.layoutContentWidget(this),this._editor.getOffsetForColumn(this._showAtPosition.lineNumber,this._showAtPosition.column)},e.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this._isVisible?{position:this._showAtPosition,preference:[n.ContentWidgetPositionPreference.ABOVE,n.ContentWidgetPositionPreference.BELOW]}:null},e.prototype.dispose=function(){this.hide()},e}();t.ContentHoverWidget=o;var s=function(){function e(e,t){this._id=e,this._editor=t,this._isVisible=!1,this._domNode=document.createElement("div"),this._domNode.className="monaco-editor-hover monaco-editor-background",this._domNode.style.display="none",this._domNode.setAttribute("aria-hidden","true"),this._domNode.setAttribute("role","presentation"),this._showAtLineNumber=-1,this._editor.addOverlayWidget(this)}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.showAt=function(e){this._showAtLineNumber=e,this._isVisible||(this._isVisible=!0,this._domNode.style.display="block");var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(this._showAtLineNumber),i=this._editor.getScrollTop();this._domNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._domNode.style.top=n-i+"px"},e.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},e.prototype.getPosition=function(){return null},e.prototype.dispose=function(){this.hide()},e}();t.GlyphHoverWidget=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/hover/browser/modesGlyphHover",["require","exports","./hoverOperation","./hoverWidgets"],function(e,t,n,i){var r=function(){function e(e){this._editor=e,this._lineNumber=-1}return e.prototype.setLineNumber=function(e){this._lineNumber=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeSync=function(){var e,t,n,i=[],r=this._editor.getLineDecorations(this._lineNumber);for(e=0,t=r.length;t>e;e++)n=r[e],n.options.glyphMarginClassName&&n.options.hoverMessage&&i.push({value:n.options.hoverMessage});return i},e.prototype.onResult=function(e,t){this._result=this._result.concat(e)},e.prototype.getResult=function(){return this._result},e.prototype.getResultWithLoadingMessage=function(){return this.getResult()},e}(),o=function(e){function t(i){var o=this;e.call(this,t.ID,i),-1===this._lastLineNumber,this._computer=new r(this._editor),this._hoverOperation=new n.HoverOperation(this._computer,function(e){return o._withResult(e)},null,function(e){return o._withResult(e)})}return __extends(t,e),t.prototype.onModelDecorationsChanged=function(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start())},t.prototype.startShowingAt=function(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start())},t.prototype.hide=function(){this._lastLineNumber=-1,this._hoverOperation.cancel(),e.prototype.hide.call(this)},t.prototype._withResult=function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()},t.prototype._renderMessages=function(e,t){var n=document.createDocumentFragment();t.forEach(function(e){var t=document.createElement("div"),i=null;e.className?(i=document.createElement("span"),i.textContent=e.value,i.className=e.className,t.appendChild(i)):t.textContent=e.value,n.appendChild(t)}),this._domNode.textContent="",this._domNode.appendChild(n),this.showAt(e)},t.ID="editor.contrib.modesGlyphHoverWidget",t}(i.GlyphHoverWidget);t.ModesGlyphHoverWidget=o}),define("vs/editor/contrib/inPlaceReplace/common/inPlaceReplaceCommand",["require","exports","vs/editor/common/core/selection"],function(e,t,n){var i=function(){function e(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}return e.prototype.getEditOperations=function(e,t){t.addEditOperation(this._editRange,this._text)},e.prototype.computeCursorState=function(e,t){var i=t.getInverseEditOperations(),r=i[0].range;return this._originalSelection.isEmpty()?n.Selection.createSelection(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):n.Selection.createSelection(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)},e}();t.InPlaceReplaceCommand=i}),define("vs/editor/contrib/linesOperations/common/copyLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){var r=function(){function e(e,t){this._selection=e,this._isCopyingDown=t}return e.prototype.getEditOperations=function(e,t){var i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));for(var r=[],o=i.startLineNumber;o<=i.endLineNumber;o++)r.push(e.getLineContent(o));var s=r.join("\n");""===s&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._isCopyingDown?t.addEditOperation(new n.Range(i.startLineNumber,1,i.startLineNumber,1),s+"\n"):t.addEditOperation(new n.Range(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+s),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var r=n.startLineNumber,o=n.startColumn,s=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(r+=this._startLineNumberDelta,o=1),0!==this._endLineNumberDelta&&(s+=this._endLineNumberDelta,a=1),n=i.Selection.createWithDirection(r,o,s,a,this._selectionDirection)}return n},e}();t.CopyLinesCommand=r}),define("vs/editor/contrib/linesOperations/common/deleteLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){var r=function(){function e(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.restoreCursorToColumn=n}return e.createFromSelection=function(t){var n=t.endLineNumber;return t.startLineNumber<t.endLineNumber&&1===t.endColumn&&(n-=1),new e(t.startLineNumber,n,t.positionColumn)},e.prototype.getEditOperations=function(e,t){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){var i=this.startLineNumber,r=this.endLineNumber,o=1,s=e.getLineMaxColumn(r);r<e.getLineCount()?(r+=1,s=1):i>1&&(i-=1,o=e.getLineMaxColumn(i)),t.addEditOperation(new n.Range(i,o,r,s),null)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),r=n[0].range;return i.Selection.createSelection(r.endLineNumber,this.restoreCursorToColumn,r.endLineNumber,this.restoreCursorToColumn)},e}();t.DeleteLinesCommand=r}),define("vs/editor/contrib/linesOperations/common/moveLinesCommand",["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i){var r=function(){function e(e,t){this._selection=e,this._isMovingDown=t}return e.prototype.getEditOperations=function(e,t){var r=e.getLineCount();if((!this._isMovingDown||this._selection.endLineNumber!==r)&&(this._isMovingDown||1!==this._selection.startLineNumber)){this._moveEndPositionDown=!1;var o=this._selection;if(o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1))),o.startLineNumber===o.endLineNumber&&1===e.getLineMaxColumn(o.startLineNumber)){var s=o.startLineNumber,a=this._isMovingDown?s+1:s-1;1===e.getLineMaxColumn(a)?t.addEditOperation(new n.Range(1,1,1,1),null):(t.addEditOperation(new n.Range(s,1,s,1),e.getLineContent(a)),t.addEditOperation(new n.Range(a,1,a,e.getLineMaxColumn(a)),null)),o=i.Selection.createSelection(a,1,a,1)}else{var c,u;this._isMovingDown?(c=o.endLineNumber+1,u=e.getLineContent(c),t.addEditOperation(new n.Range(c-1,e.getLineMaxColumn(c-1),c,e.getLineMaxColumn(c)),null),t.addEditOperation(new n.Range(o.startLineNumber,1,o.startLineNumber,1),u+"\n")):(c=o.startLineNumber-1,u=e.getLineContent(c),t.addEditOperation(new n.Range(c,1,c+1,1),null),t.addEditOperation(new n.Range(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),"\n"+u))}this._selectionId=t.trackSelection(o)}},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),n},e}();t.MoveLinesCommand=r}),define("vs/editor/contrib/parameterHints/browser/parameterHintsWidget",["require","exports","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/browser/builder","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/css!./parameterHints"],function(e,t,n,i,r,o,s){var a=r.$,c=function(){function e(e,t,n,i){var r=this;this.allowEditorOverflow=!0,this._onShown=n,this._onHidden=i,this.editor=t,this.modelListenersToRemove=[],this.model=null,this.isVisible=!1,this.isDisposed=!1,this.setModel(e),this.$el=a(".editor-widget.parameter-hints-widget").on("click",function(){r.selectNext(),r.editor.focus();
}),this.$wrapper=a(".wrapper.monaco-editor-background").appendTo(this.$el);var o=a(".buttons").appendTo(this.$wrapper);a(".button.previous").on("click",function(e){e.preventDefault(),e.stopPropagation(),r.selectPrevious()}).appendTo(o),a(".button.next").on("click",function(e){e.preventDefault(),e.stopPropagation(),r.selectNext()}).appendTo(o),this.$overloads=a(".overloads").appendTo(this.$wrapper),this.$signatures=a(".signatures").appendTo(this.$wrapper),this.signatureViews=[],this.currentSignature=0,this.editor.addContentWidget(this),this.hide(),this.toDispose=[],this.toDispose.push(this.editor.addListener2(s.EventType.CursorSelectionChanged,function(e){r.editor.layoutContentWidget(r)}))}return e.prototype.setModel=function(e){var t=this;this.releaseModel(),this.model=e,this.modelListenersToRemove.push(this.model.addListener("hint",function(e){t.show(),t.render(e.hints),t.currentSignature=e.hints.currentSignature,t.select(t.currentSignature)})),this.modelListenersToRemove.push(this.model.addListener("cancel",function(e){t.hide()}))},e.prototype.show=function(){var e=this;this.isDisposed||(this._onShown(),this.isVisible=!0,n.TPromise.timeout(100).done(function(){e.$el.addClass("visible")}),this.editor.layoutContentWidget(this))},e.prototype.hide=function(){this.isDisposed||(this._onHidden(),this.isVisible=!1,this.$el.removeClass("visible"),this.editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this.isVisible?{position:this.editor.getPosition(),preference:[o.ContentWidgetPositionPreference.ABOVE,o.ContentWidgetPositionPreference.BELOW]}:null},e.prototype.render=function(e){e.signatures.length>1?this.$el.addClass("multiple"):this.$el.removeClass("multiple"),this.$signatures.empty(),this.signatureViews=[];for(var t=0,n=0,i=e.signatures.length;i>n;n++){var r=e.signatures[n],o=this.renderSignature(this.$signatures,r,e.currentParameter);this.renderDocumentation(o,r,e.currentParameter);var s=o.getClientArea().height;this.signatureViews.push({top:t,height:s}),t+=s}},e.prototype.renderSignature=function(e,t,n){var i=a(".signature").appendTo(e),r=t.parameters.length>0;if(r){for(var o=a("span.parameters"),s=0,c=0,u=t.parameters.length;u>c;c++){var l=t.parameters[c];(0===c?i:o).append(a("span").text(t.label.substring(s,l.signatureLabelOffset))),o.append(a("span.parameter").addClass(c===n?"active":"").text(t.label.substring(l.signatureLabelOffset,l.signatureLabelEnd))),s=l.signatureLabelEnd}i.append(o),i.append(a("span").text(t.label.substring(s)))}else i.append(a("span").text(t.label));return i},e.prototype.renderDocumentation=function(e,t,n){t.documentation&&e.append(a(".documentation").text(t.documentation));var i=t.parameters[n];if(i&&i.documentation){var r=a(".documentation");r.append(a("span.parameter").text(i.label)),r.append(a("span").text(i.documentation)),e.append(r)}},e.prototype.select=function(e){var t=this.signatureViews[e];if(t){this.$signatures.style({height:t.height+"px"}),this.$signatures.getHTMLElement().scrollTop=t.top;var n=""+(e+1);this.signatureViews.length<10&&(n+="/"+this.signatureViews.length),this.$overloads.text(n),this.editor.layoutContentWidget(this)}},e.prototype.selectNext=function(){return this.signatureViews.length<2?(this.cancel(),!1):(this.currentSignature=(this.currentSignature+1)%this.signatureViews.length,this.select(this.currentSignature),!0)},e.prototype.selectPrevious=function(){return this.signatureViews.length<2?(this.cancel(),!1):(this.currentSignature--,this.currentSignature<0&&(this.currentSignature=this.signatureViews.length-1),this.select(this.currentSignature),!0)},e.prototype.cancel=function(){this.model.cancel()},e.prototype.getDomNode=function(){return this.$el.getHTMLElement()},e.prototype.getId=function(){return e.ID},e.prototype.releaseModel=function(){for(var e;e=this.modelListenersToRemove.pop();)e();this.model&&(this.model.dispose(),this.model=null)},e.prototype.destroy=function(){this.toDispose=i.disposeAll(this.toDispose),this.releaseModel(),this.$overloads&&(this.$overloads.destroy(),delete this.$overloads),this.$signatures&&(this.$signatures.destroy(),delete this.$signatures),this.$wrapper&&(this.$wrapper.destroy(),delete this.$wrapper),this.$el&&(this.$el.destroy(),delete this.$el),this.isDisposed=!0},e.ID="editor.widget.parameterHintsWidget",e}();t.ParameterHintsWidget=c}),define("vs/editor/contrib/quickFix/browser/lightBulpWidget",["require","exports","vs/editor/browser/editorBrowser","vs/base/browser/dom"],function(e,t,n,i){var r=function(){function e(e,t){this.allowEditorOverflow=!0,this.editor=e,this.onclick=t,this.listenersToRemove=[],this.editor.addContentWidget(this)}return e.prototype.dispose=function(){this.editor.removeContentWidget(this),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[]},e.prototype.getId=function(){return"__lightBulpWidget"},e.prototype.getDomNode=function(){var e=this;return this.domNode||(this.domNode=document.createElement("div"),this.domNode.style.width="20px",this.domNode.style.height="20px",this.domNode.className="lightbulp-glyph",this.listenersToRemove.push(i.addListener(this.domNode,"click",function(t){e.editor.focus(),e.onclick(e.position)}))),this.domNode},e.prototype.getPosition=function(){return this.visible?{position:this.position,preference:[n.ContentWidgetPositionPreference.BELOW,n.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.show=function(e){this.position=e,this.visible=!0,this.editor.layoutContentWidget(this)},e.prototype.hide=function(){this.visible=!1,this.editor.layoutContentWidget(this)},e}();return r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/referenceSearch/browser/referenceSearchModel",["require","exports","vs/base/common/collections","vs/base/common/strings","vs/base/common/uuid","vs/base/common/eventEmitter","vs/base/common/winjs.base","vs/base/common/paths","vs/editor/common/core/range"],function(e,t,n,i,r,o,s,a,c){var u;!function(e){e.OnReferenceRangeChanged="refrence.rangeChanged",e.CurrentReferenceChanged="reference.currentChanged"}(u=t.EventType||(t.EventType={}));var l=function(){function e(e,t){this._parent=e,this._id=r.generateUuid(),this._range=t.range}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._parent.resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directory",{get:function(){return this._parent.directory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this.parent.parent.emit(u.OnReferenceRangeChanged,this)},enumerable:!0,configurable:!0}),e}();t.OneReference=l;var d=function(){function e(e){this._value=e,this._lineStarts=i.computeLineStarts(e)}return e.prototype._getOffsetFromPosition=function(e,t){return this._lineStarts[e-1]+t-1},e.prototype.preview=function(e,t){void 0===t&&(t=8);var n=this._lineStarts[e.startLineNumber-1],r=n+e.startColumn-1,o=this._lineStarts[e.endLineNumber-1]+e.endColumn-1,s=e.endLineNumber>=this._lineStarts.length?this._value.length:this._lineStarts[e.endLineNumber],a={before:this._value.substring(n,r).replace(/^\s+/,i.empty),inside:this._value.substring(r,o),after:this._value.substring(o,s).replace(/\s+$/,i.empty)};return a.before=i.lcut(a.before,t),a},e}();t.FilePreview=d;var h=function(){function e(e,t,n){this._parent=e,this._resource=t,this._editorService=n,this._children=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this._resource.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return a.basename(this.resource.fsPath)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directory",{get:function(){return a.dirname(this.resource.fsPath)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preview",{get:function(){return this._preview},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){var e=this;return this._resolved?s.TPromise.as(this):this._editorService.resolveEditorModel({resource:this._resource}).then(function(t){return e._preview=new d(t.textEditorModel.getValue()),e._resolved=!0,e})},e}();t.FileReferences=h;var p=function(e){function t(i,r){var o=this;e.call(this,[u.CurrentReferenceChanged,u.OnReferenceRangeChanged]);var s=Object.create(null),a=Object.create(null);i.forEach(function(e){var i=t._hash(e);if(!a[i]){a[i]=!0;var c=e.resource,u=new h(o,c,r);u=n.lookupOrInsert(s,u.id,u),u.children.push(new l(u,e))}}),this._references=n.values(s),this._references.sort(t._compare)}return __extends(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this._references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentReference",{get:function(){return this._currentReference},set:function(e){this._currentReference=e,this.emit(u.CurrentReferenceChanged,this)},enumerable:!0,configurable:!0}),t.prototype.nextReference=function(e){var t=e.parent.children.indexOf(e),n=e.parent.children.length,i=e.parent.parent.children.length;return n>t+1||1===i?e.parent.children[(t+1)%n]:(t=e.parent.parent.children.indexOf(e.parent),t=(t+1)%i,e.parent.parent.children[t].children[0])},t.prototype.findReference=function(e,t){for(var n=0,i=this._references.length;i>n;n++){var r=this._references[n];if(r.resource.toString()===e.toString()){var o;if(r.children.some(function(e){return c.Range.containsPosition(e.range,t)?(o=e,!0):!1}),o)return o}}return this._references.length>0?this._references[0].children[0]:null},t._hash=function(e){var t=e.range,n=t.startLineNumber,i=t.startColumn,r=t.endLineNumber,o=t.endColumn;return[e.resource.toString(),n,i,r,o].join(",")},t._compare=function(e,t){return i.localeCompare(e.directory,t.directory)||i.localeCompare(e.name,t.name)},t}(o.EventEmitter);t.Model=p}),define("vs/editor/contrib/rename/browser/renameInputField",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/common/core/range","vs/css!./rename"],function(e,t,n,i,r,o,s,a){var c=function(){function e(e){this.allowEditorOverflow=!0,this._currentAcceptInput=null,this._currentCancelInput=null,this._editor=e,this._editor.addContentWidget(this)}return e.prototype.dispose=function(){this._editor.removeContentWidget(this)},e.prototype.getId=function(){return"__renameInputWidget"},e.prototype.getDomNode=function(){return this._domNode||(this._inputField=document.createElement("input"),this._inputField.className="rename-input",this._domNode=document.createElement("div"),this._domNode.style.height=this._editor.getConfiguration().lineHeight+"px",this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputField)),this._domNode},e.prototype.getPosition=function(){return this._visible?{position:this._position,preference:[s.ContentWidgetPositionPreference.BELOW,s.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.acceptInput=function(){this._currentAcceptInput&&this._currentAcceptInput()},e.prototype.cancelInput=function(){this._currentCancelInput&&this._currentCancelInput()},e.prototype.getInput=function(e,t,s,c){var u=this;this._position={lineNumber:e.startLineNumber,column:e.startColumn},this._inputField.value=t,this._inputField.setAttribute("selectionStart",s.toString()),this._inputField.setAttribute("selectionEnd",c.toString()),this._inputField.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var l,d=[];return l=function(){r.disposeAll(d),u._hide()},new n.TPromise(function(n,r){u._currentCancelInput=function(){return u._currentAcceptInput=null,u._currentCancelInput=null,r(i.canceled()),!0},u._currentAcceptInput=function(){return 0===u._inputField.value.trim().length||u._inputField.value===t?void u._currentCancelInput():(u._currentAcceptInput=null,u._currentCancelInput=null,void n(u._inputField.value))};var s=function(){a.Range.containsPosition(e,u._editor.getPosition())||u._currentCancelInput()};d.push(u._editor.addListener2(o.EventType.CursorSelectionChanged,s)),d.push(u._editor.addListener2(o.EventType.EditorBlur,u._currentCancelInput)),u._show()},this._currentCancelInput).then(function(e){return l(),e},function(e){return l(),n.TPromise.wrapError(e)})},e.prototype._show=function(){var e=this;this._visible=!0,this._editor.layoutContentWidget(this),setTimeout(function(){e._inputField.focus(),e._inputField.setSelectionRange(parseInt(e._inputField.getAttribute("selectionStart")),parseInt(e._inputField.getAttribute("selectionEnd")))},25)},e.prototype._hide=function(){this._visible=!1,this._editor.layoutContentWidget(this)},e}();return c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/zoneWidget/browser/zoneWidget",["require","exports","vs/base/browser/dom","vs/base/common/objects","vs/base/common/eventEmitter","vs/editor/common/editorCommon","vs/css!./zoneWidget"],function(e,t,n,i,r,o){var s={showArrow:!0,showFrame:!0,frameColor:"",className:""},a="vs.editor.contrib.zoneWidget",c=function(){function e(e,t,n,i,r,o){this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=r,this._onComputedHeight=o}return e.prototype.onDomNodeTop=function(e){this._onDomNodeTop(e)},e.prototype.onComputedHeight=function(e){this._onComputedHeight(e)},e}(),u=function(){function e(e,t){this._id=e,this._domNode=t}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return null},e}(),l=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.editor=t,this.options=i.mixin(i.clone(s),n),this.zoneId=-1,this.overlayWidget=null,this.lastView=null,this.domNode=document.createElement("div"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation"),this.container=null,this.listenersToRemove=[],this.listenersToRemove.push(this.editor.addListener(o.EventType.EditorLayout,function(e){var t=r.getWidth(e);r.domNode.style.width=t+"px",r.onWidth(t)}))}return __extends(t,e),t.prototype.create=function(){n.addClass(this.domNode,"zone-widget"),n.addClass(this.domNode,this.options.className),this.container=document.createElement("div"),n.addClass(this.container,"zone-widget-container"),this.domNode.appendChild(this.container),this.fillContainer(this.container)},t.prototype.getWidth=function(e){return void 0===e&&(e=this.editor.getLayoutInfo()),e.width-e.verticalScrollbarWidth},t.prototype.onViewZoneTop=function(e){this.domNode.style.top=e+"px"},t.prototype.onViewZoneHeight=function(e){this.domNode.style.height=e+"px"},t.prototype.show=function(e,t){"number"==typeof e.startLineNumber?this.showImpl(e,t):this.showImpl({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},t)},t.prototype.showImpl=function(e,t){var n=this,i={lineNumber:e.startLineNumber,column:e.startColumn};this.domNode.style.width=this.getWidth()+"px",this.editor.revealPosition(i);var r=document.createElement("div"),o=document.createElement("div"),s=this.editor.getConfiguration().lineHeight,l=t*s,d=0,h=0;this.options.showArrow&&(d=Math.round(s/3),l-=2*d,o=document.createElement("div"),o.className="zone-widget-arrow below",o.style.top=-d+"px",o.style.borderWidth=d+"px",o.style.left=this.editor.getOffsetForColumn(i.lineNumber,i.column)+"px",o.style.borderBottomColor=this.options.frameColor,r.appendChild(o)),this.options.showFrame&&(h=Math.round(s/9),l-=2*h),this.editor.changeViewZones(function(e){-1!==n.zoneId&&e.removeZone(n.zoneId),n.overlayWidget&&(n.editor.removeOverlayWidget(n.overlayWidget),n.overlayWidget=null),n.domNode.style.top="-1000px";var o=new c(r,i.lineNumber,i.column,t,function(e){return n.onViewZoneTop(e)},function(e){return n.onViewZoneHeight(e)});n.zoneId=e.addZone(o),n.overlayWidget=new u(a+n.zoneId,n.domNode),n.editor.addOverlayWidget(n.overlayWidget)}),this.options.showFrame&&(this.container.style.borderTopColor=this.options.frameColor,this.container.style.borderBottomColor=this.options.frameColor,this.container.style.borderTopWidth=h+"px",this.container.style.borderBottomWidth=h+"px"),this.container.style.top=d+"px",this.container.style.height=l+"px",this.container.style.overflow="hidden",this.doLayout(l),this.editor.setSelection(e);var p=Math.min(this.editor.getModel().getLineCount(),Math.max(1,e.endLineNumber+1));this.editor.revealLine(p),this.position=i},t.prototype.dispose=function(){var e=this;this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.overlayWidget&&(this.editor.removeOverlayWidget(this.overlayWidget),this.overlayWidget=null),-1!==this.zoneId&&this.editor.changeViewZones(function(t){t.removeZone(e.zoneId),e.zoneId=-1})},t.prototype.fillContainer=function(e){},t.prototype.onWidth=function(e){},t.prototype.doLayout=function(e){},t}(r.EventEmitter);t.ZoneWidget=l}),define("vs/nls!vs/base/node/processes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/node/processes",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/base/node/processes",["require","exports","path","child_process","stream","./stdFork","vs/nls!vs/base/node/processes","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/uri","vs/base/common/objects","vs/base/common/paths","vs/base/common/platform","vs/base/node/decoder","vs/base/common/processes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){function m(t,n){if(h.isWindows)try{var r={stdio:["pipe","pipe","ignore"]};n&&(r.cwd=n),i.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],r)}catch(o){return{success:!1,error:o}}else if(h.isLinux||h.isMacintosh)try{var s=u["default"].parse(e.toUrl("vs/base/node/terminateProcess.sh")).fsPath,a=i.spawnSync(s,[t.pid.toString()]);if(a.error)return{success:!1,error:a.error}}catch(o){return{success:!1,error:o}}else t.kill("SIGKILL");return{success:!0}}var v=i.exec,g=i.spawn;t.Source=f.Source,t.terminateProcess=m;var y=function(){function e(e,t,n,i){var r=this;if(i)this.cmd=e,this.args=t,this.shell=n,this.options=i;else if(n&&t)this.module=e,this.args=t,this.shell=!1,this.options=n;else{var o=e;this.cmd=o.command,this.shell=o.isShellCommand,this.args=o.args.slice(0),this.options=o.options||{}}if(this.childProcess=null,this.terminateRequested=!1,this.options.env){var s=Object.create(null);Object.keys(process.env).forEach(function(e){s[e]=process.env[e]}),Object.keys(this.options.env).forEach(function(e){s[e]=r.options.env[e]}),this.options.env=s}}return e.prototype.getSanitizedCommand=function(){var t=this.cmd.toLowerCase(),i=t.lastIndexOf(n.sep);return-1!==i&&(t=t.substring(i+1)),e.WellKnowCommands[t]?t:"other"},e.prototype.start=function(){var e=this;return h.isWindows&&(this.options&&this.options.cwd&&d.isUNC(this.options.cwd)||!this.options&&!this.options.cwd&&d.isUNC(process.cwd()))?a.Promise.wrapError(s.localize(0,null)):this.useExec().then(function(t){var n,i,r,s=new a.PPromise(function(e,t,o){n=e,i=t,r=o});if(t){var u=e.cmd;e.args&&(u=u+" "+e.args.join(" ")),e.childProcess=v(u,e.options,function(t,o,s){e.childProcess=null;var a=t;a&&a.killed?i({killed:e.terminateRequested,stdout:o.toString(),stderr:s.toString()}):e.handleExec(n,r,t,o,s)})}else{var d=null,p=function(t){e.childProcess=null,e.childProcessPromise=null,e.handleClose(t,n,r,i);var o={terminated:e.terminateRequested};e.shell&&h.isWindows&&c.isNumber(t)&&(o.cmdCode=t),n(o)},f=function(t){e.childProcess=null,e.childProcessPromise=null,e.handleExit(t,n,r,i);var o={terminated:e.terminateRequested};e.shell&&h.isWindows&&c.isNumber(t)&&(o.cmdCode=t),n(o)};if(e.shell&&h.isWindows){var m=l.clone(e.options);m.windowsVerbatimArguments=!0,m.detached=!1;var y=!1,_=!1,b=[],E=e.ensureQuotes(e.cmd);b.push(E.value),y=E.quoted,e.args&&e.args.forEach(function(t){E=e.ensureQuotes(t),b.push(E.value),_=_&&E.quoted});var S=["/s","/c"];y?_?S.push('"'+b.join(" ")+'"'):b.length>1?S.push('"'+b[0]+'" '+b.slice(1).join(" ")):S.push('"'+b[0]+'"'):S.push(b.join(" ")),d=g("cmd.exe",S,m)}else e.cmd?d=g(e.cmd,e.args,e.options):e.module&&(e.childProcessPromise=new a.TPromise(function(t,s,a){o.fork(e.module,e.args,e.options,function(o,a){return o?(s(o),void i({terminated:e.terminateRequested,error:o})):(e.childProcess=a,e.childProcess.on("close",p),e.childProcess.on("exit",f),e.handleSpawn(a,n,r,i,!1),void t(a))})}));d&&(e.childProcess=d,e.childProcessPromise=a.TPromise.as(d),d.on("error",function(t){e.childProcess=null,i({terminated:e.terminateRequested,error:t})}),d.pid&&(e.childProcess.on("close",p),e.childProcess.on("exit",f),e.handleSpawn(d,n,r,i,!0)))}return s})},e.prototype.handleClose=function(e,t,n,i){},e.prototype.handleExit=function(e,t,n,i){},e.prototype.ensureQuotes=function(t){return e.regexp.test(t)?{value:'"'+t+'"',quoted:!0}:{value:t,quoted:t.length>0&&'"'===t[0]&&'"'===t[t.length-1]}},e.prototype.isRunning=function(){return null!==this.childProcessPromise},Object.defineProperty(e.prototype,"pid",{get:function(){return this.childProcessPromise.then(function(e){return e.pid},function(e){return-1})},enumerable:!0,configurable:!0}),e.prototype.terminate=function(){var e=this;return this.childProcessPromise?this.childProcessPromise.then(function(t){e.terminateRequested=!0;var n=m(t,e.options.cwd);return n.success&&(e.childProcess=null),n},function(e){return{success:!0}}):a.TPromise.as({success:!0})},e.prototype.useExec=function(){var e=this;return new a.TPromise(function(t,n,i){e.shell&&h.isWindows||t(!1);var r=g("cmd.exe",["/s","/c"]);r.on("error",function(e){t(!0)}),r.on("exit",function(e){t(!1)})})},e.WellKnowCommands={ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},e.regexp=/^[^"].* .*[^"]/,e}();t.AbstractProcess=y;var _=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,r){[i,r].forEach(function(e,n){var i=new p.LineDecoder,r=i.write(e);r.forEach(function(e){t({line:e,source:0===n?f.Source.stdout:f.Source.stderr})});var o=i.end();o&&t({line:o,source:0===n?f.Source.stdout:f.Source.stderr})}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,r){var o=this;this.stdoutLineDecoder=new p.LineDecoder,this.stderrLineDecoder=new p.LineDecoder,e.stdout.on("data",function(e){var t=o.stdoutLineDecoder.write(e);t.forEach(function(e){return n({line:e,source:f.Source.stdout})})}),e.stderr.on("data",function(e){var t=o.stderrLineDecoder.write(e);t.forEach(function(e){return n({line:e,source:f.Source.stderr})})})},t.prototype.handleClose=function(e,t,n,i){[this.stdoutLineDecoder.end(),this.stderrLineDecoder.end()].forEach(function(e,t){e&&n({line:e,source:0===t?f.Source.stdout:f.Source.stderr})})},t.prototype.handleExit=function(e,t,n,i){this.terminateRequested&&[this.stdoutLineDecoder.end(),this.stderrLineDecoder.end()].forEach(function(e,t){e&&n({line:e,source:0===t?f.Source.stdout:f.Source.stderr})})},t}(y);t.LineProcess=_;var b=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,r){t({data:i,source:f.Source.stdout}),t({data:r,source:f.Source.stderr}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,r){e.stdout.on("data",function(e){n({data:e,source:f.Source.stdout})}),e.stderr.on("data",function(e){n({data:e,source:f.Source.stderr})})},t}(y);t.BufferProcess=b;var E=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.handleExec=function(e,t,n,i,o){var s=new r.PassThrough;s.end(i);var a=new r.PassThrough;a.end(o),t({stdin:null,stdout:s,stderr:a}),e({terminated:this.terminateRequested,error:n})},t.prototype.handleSpawn=function(e,t,n,i,r){r?process.nextTick(function(){n({stdin:e.stdin,stdout:e.stdout,stderr:e.stderr})}):n({stdin:e.stdin,stdout:e.stdout,stderr:e.stderr})},t}(y);t.StreamProcess=E}),define("vs/nls!vs/base/node/zip",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/base/node/zip",t)}),define("vs/nls!vs/editor/browser/view/viewImpl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/browser/view/viewImpl",t)}),define("vs/nls!vs/editor/common/config/commonEditorConfig",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/config/commonEditorConfig",t)}),define("vs/nls!vs/editor/common/controller/cursor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/controller/cursor",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/controller/cursor",["require","exports","vs/nls!vs/editor/common/controller/cursor","vs/base/common/eventEmitter","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/core/position","vs/editor/common/commands/replaceCommand","vs/editor/common/controller/oneCursor","vs/editor/common/controller/handlerDispatcher","vs/editor/common/controller/cursorCollection","vs/editor/common/editorCommon","vs/base/common/errors","vs/base/common/lifecycle"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f;!function(e){e[e.Primary=0]="Primary",e[e.TopMost=1]="TopMost",e[e.BottomMost=2]="BottomMost"}(f||(f={}));var m=function(e){function t(t,n,i,r,o){var a=this;e.call(this,[d.EventType.CursorPositionChanged,d.EventType.CursorSelectionChanged,d.EventType.CursorRevealRange,d.EventType.CursorScrollRequest]),this.editorId=t,this.configuration=n,this.model=i,this.viewModelHelper=r,this.enableEmptySelectionClipboard=o,this.viewModelHelper||(this.viewModelHelper={viewModel:this.model,convertModelPositionToViewPosition:function(e,t){return new s.Position(e,t)},convertModelRangeToViewRange:function(e){return e},convertViewToModelPosition:function(e,t){return new s.Position(e,t)},validateViewPosition:function(e,t,n){return n},validateViewRange:function(e,t,n,i,r){return r}}),this.cursors=new l.CursorCollection(this.editorId,this.model,this.configuration,this.viewModelHelper),this.cursorUndoStack=[],this.typingListeners={},this._isHandling=!1,this.modelUnbinds=[],this.modelUnbinds.push(this.model.addListener2(d.EventType.ModelContentChanged,function(e){a._onModelContentChanged(e)})),this.modelUnbinds.push(this.model.addListener2(d.EventType.ModelModeChanged,function(e){a._onModelModeChanged()})),this.modelUnbinds.push(this.model.addListener2(d.EventType.ModelModeSupportChanged,function(e){a._onModelModeChanged()})),this._registerHandlers()}return __extends(t,e),t.prototype.dispose=function(){this.modelUnbinds=p.disposeAll(this.modelUnbinds),this.model=null,this.cursors.dispose(),this.cursors=null,this.configuration.handlerDispatcher.clearHandlers(),this.configuration=null,this.viewModelHelper=null,e.prototype.dispose.call(this)},t.prototype.saveState=function(){for(var e,t=this.cursors.getSelections(),n=[],i=0;i<t.length;i++)e=t[i],n.push({inSelectionMode:!e.isEmpty(),selectionStart:{lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn},position:{lineNumber:e.positionLineNumber,column:e.positionColumn}});return n},t.prototype.restoreState=function(e){for(var t,n=this,i=[],r=0;r<e.length;r++){t=e[r];var o=1,s=1;t.position&&t.position.lineNumber&&(o=t.position.lineNumber),t.position&&t.position.column&&(s=t.position.column);var a=o,c=s;t.selectionStart&&t.selectionStart.lineNumber&&(a=t.selectionStart.lineNumber),t.selectionStart&&t.selectionStart.column&&(c=t.selectionStart.column),i.push({selectionStartLineNumber:a,selectionStartColumn:c,positionLineNumber:o,positionColumn:s})}this._onHandler("restoreState",function(e){return n.cursors.setSelections(i),!1},new u.DispatcherEvent("restoreState",null))},t.prototype.setEditableRange=function(e){this.model.setEditableRange(e)},t.prototype.getEditableRange=function(){return this.model.getEditableRange()},t.prototype.addTypingListener=function(e,t){this.typingListeners.hasOwnProperty(e)||(this.typingListeners[e]=[]),this.typingListeners[e].push(t)},t.prototype.removeTypingListener=function(e,t){if(this.typingListeners.hasOwnProperty(e))for(var n=this.typingListeners[e],i=0;i<n.length;i++)if(n[i]===t)return void n.splice(i,1)},t.prototype._onModelModeChanged=function(){this.cursors.updateMode()},t.prototype._onModelContentChanged=function(e){var t=this;e.changeType===d.EventType.ModelContentChangedFlush?(this.cursors.dispose(),this.cursors=new l.CursorCollection(this.editorId,this.model,this.configuration,this.viewModelHelper),this.emitCursorPositionChanged("model","contentFlush"),this.emitCursorSelectionChanged("model","contentFlush")):this._isHandling||this._onHandler("recoverSelectionFromMarkers",function(e){var n=t._invokeForAll(e,function(e,t,n){return t.recoverSelectionFromMarkers(n)});return e.shouldPushStackElementBefore=!1,e.shouldPushStackElementAfter=!1,n},new u.DispatcherEvent("modelChange",null))},t.prototype.getSelection=function(){return this.cursors.getSelection(0)},t.prototype.getSelections=function(){return this.cursors.getSelections()},t.prototype.getPosition=function(){return this.cursors.getPosition(0)},t.prototype.setSelections=function(e,t){var n=this;this._onHandler("setSelections",function(e){return e.shouldReveal=!1,n.cursors.setSelections(t),!1},new u.DispatcherEvent(e,null))},t.prototype._createAndInterpretHandlerCtx=function(e,t,n){var i={cursorPositionChangeReason:"",shouldReveal:!0,shouldRevealVerticalInCenter:!1,shouldRevealHorizontal:!0,shouldRevealTarget:f.Primary,eventSource:e,eventData:t,executeCommands:[],hasExecutedCommands:!1,isCursorUndo:!1,postOperationRunnables:[],shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1,requestScrollDeltaLines:0};return n(i),this._interpretHandlerContext(i),this.cursors.normalize(),i.hasExecutedCommands},t.prototype._onHandler=function(e,t,n){this._isHandling=!0,this.charactersTyped="";var i=!1;try{var r,o,s,a,c,u,l,p=this.cursors.getSelections(),f=this.cursors.getViewSelections(),m=this.cursors.saveState(),v=n.getSource(),g=this._createAndInterpretHandlerCtx(v,n.getData(),function(e){i=t(e),r=e.cursorPositionChangeReason,o=e.shouldReveal,c=e.shouldRevealTarget,s=e.shouldRevealVerticalInCenter,a=e.shouldRevealHorizontal,u=e.isCursorUndo,l=e.requestScrollDeltaLines});g&&(this.cursorUndoStack=[]);for(var y=0;y<this.charactersTyped.length;y++){var _=this.charactersTyped.charAt(y);if(this.typingListeners.hasOwnProperty(_))for(var b=this.typingListeners[_].slice(0),E=0,S=b.length;S>E;E++)try{b[E]()}catch(n){h.onUnexpectedError(n)}}var w=this.cursors.getSelections(),C=this.cursors.getViewSelections(),T=!1;
if(p.length!==w.length)T=!0;else{for(var y=0,I=p.length;!T&&I>y;y++)p[y].equalsSelection(w[y])||(T=!0);for(var y=0,I=f.length;!T&&I>y;y++)f[y].equalsSelection(C[y])||(T=!0)}T&&(g||u||this.cursorUndoStack.push(m),this.cursorUndoStack.length>50&&(this.cursorUndoStack=this.cursorUndoStack.splice(0,this.cursorUndoStack.length-50)),this.emitCursorPositionChanged(v,r),o&&this.emitCursorRevealRange(c,s?d.VerticalRevealType.Center:d.VerticalRevealType.Simple,a),this.emitCursorSelectionChanged(v,r)),l&&this.emitCursorScrollRequest(l)}catch(k){h.onUnexpectedError(k)}return this._isHandling=!1,i},t.prototype._interpretHandlerContext=function(e){e.shouldPushStackElementBefore&&(this.model.pushStackElement(),e.shouldPushStackElementBefore=!1),e.hasExecutedCommands=this._internalExecuteCommands(e.executeCommands,e.postOperationRunnables)||e.hasExecutedCommands,e.executeCommands=[],e.shouldPushStackElementAfter&&(this.model.pushStackElement(),e.shouldPushStackElementAfter=!1);for(var t=!1,n=0,i=e.postOperationRunnables.length;i>n;n++)if(e.postOperationRunnables[n]){t=!0;break}if(t){var r=e.postOperationRunnables.slice(0);e.postOperationRunnables=[],this._invokeForAll(e,function(e,t,n){return r[e]&&r[e](n),!1}),this._interpretHandlerContext(e)}},t.prototype._interpretCommandResult=function(e){return e?(this.cursors.setSelections(e),!0):!1},t.prototype._getEditOperationsFromCommand=function(e,t,i){var r=this,o=[],s=0,a=function(e,n){e.isEmpty()&&""===n||o.push({identifier:{major:t,minor:s++},range:e,text:n,forceMoveMarkers:!1})},c=!1,u=function(t,n){var i,o;if(t.isEmpty())if("boolean"==typeof n)i=n,o=n;else{var s=r.model.getLineMaxColumn(t.startLineNumber);t.startColumn===s?(i=!0,o=!0):(i=!1,o=!1)}else t.getDirection()===d.SelectionDirection.LTR?(i=!1,o=!0):(i=!0,o=!1);var a=e.selectionStartMarkers.length;return e.selectionStartMarkers[a]=r.model._addMarker(t.selectionStartLineNumber,t.selectionStartColumn,i),e.positionMarkers[a]=r.model._addMarker(t.positionLineNumber,t.positionColumn,o),a.toString()},l={addEditOperation:a,trackSelection:u};try{i.getEditOperations(this.model,l)}catch(p){return p.friendlyMessage=n.localize(0,null),h.onUnexpectedError(p),{operations:[],hadTrackedRange:!1}}return{operations:o,hadTrackedRange:c}},t.prototype._getEditOperations=function(e,t){for(var n,i,r=[],o=[],s=0;s<t.length;s++)t[s]?(n=this._getEditOperationsFromCommand(e,s,t[s]),r=r.concat(n.operations),o[s]=n.hadTrackedRange,i=i||o[s]):o[s]=!1;return{operations:r,hadTrackedRanges:o,anyoneHadTrackedRange:i}},t.prototype._getLoserCursorMap=function(e){e=e.slice(0),e.sort(function(e,t){return-r.Range.compareRangesUsingEnds(e.range,t.range)});for(var t,n,i,o={},s=1;s<e.length;s++)if(t=e[s-1],n=e[s],t.range.getStartPosition().isBeforeOrEqual(n.range.getEndPosition())){i=t.identifier.major>n.identifier.major?t.identifier.major:n.identifier.major,o[i.toString()]=!0;for(var a=0;a<e.length;a++)e[a].identifier.major===i&&(e.splice(a,1),s>a&&s--,a--);s>0&&s--}return o},t.prototype._collapseDeleteCommands=function(e,t){if(1!==e.length){var n=e.every(function(e){if(!(e instanceof a.ReplaceCommand))return!1;var t=e;return t.getText().length>0?!1:!0});if(n){var i=e,o=i.map(function(e,n){return{range:i[n].getRange(),postOperationRunnable:t[n],order:n}});o.sort(function(e,t){return r.Range.compareRangesUsingStarts(e.range,t.range)});for(var s=o[0],c=1;c<o.length;c++)if(s.range.endLineNumber===o[c].range.startLineNumber&&s.range.endColumn===o[c].range.startColumn){var u=new r.Range(s.range.startLineNumber,s.range.startColumn,o[c].range.endLineNumber,o[c].range.endColumn);s.range=u,i[o[c].order].setRange(u),i[s.order].setRange(u)}else s=o[c]}}},t.prototype._internalExecuteCommands=function(e,t){var n={selectionStartMarkers:[],positionMarkers:[]};this._collapseDeleteCommands(e,t);for(var i=this._innerExecuteCommands(n,e,t),r=0;r<n.selectionStartMarkers.length;r++)this.model._removeMarker(n.selectionStartMarkers[r]),this.model._removeMarker(n.positionMarkers[r]);return i},t.prototype._arrayIsEmpty=function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(e[t])return!1;return!0},t.prototype._innerExecuteCommands=function(e,t,n){var i=this;if(this.configuration.editor.readOnly)return!1;if(this._arrayIsEmpty(t))return!1;var r=this.cursors.getSelections(),s=this._getEditOperations(e,t);if(0===s.operations.length&&!s.anyoneHadTrackedRange)return!1;for(var a=s.operations,c=this.model.getEditableRange(),u=c.getStartPosition(),l=c.getEndPosition(),d=0;d<a.length;d++){var h=a[d].range;if(!u.isBeforeOrEqual(h.getStartPosition())||!h.getEndPosition().isBeforeOrEqual(l))return!1}var p=this._getLoserCursorMap(a);if(p.hasOwnProperty("0"))return console.warn("Ignoring commands"),!1;for(var f=[],d=0;d<a.length;d++)p.hasOwnProperty(a[d].identifier.major.toString())||f.push(a[d]);var m,v=this.model.pushEditOperations(r,f,function(n){for(var a=[],c=0;c<r.length;c++)a[c]=[];for(var c=0;c<n.length;c++){var u=n[c];a[u.identifier.major].push(u)}for(var l=function(e,t){return e.identifier.minor-t.identifier.minor},d=[],c=0;c<r.length;c++)a[c].length>0||s.hadTrackedRanges[c]?(a[c].sort(l),d[c]=t[c].computeCursorState(i.model,{getInverseEditOperations:function(){return a[c]},getTrackedSelection:function(t){var n=parseInt(t,10),r=i.model._getMarker(e.selectionStartMarkers[n]),s=i.model._getMarker(e.positionMarkers[n]);return new o.Selection(r.lineNumber,r.column,s.lineNumber,s.column)}})):d[c]=r[c];return d}),g=[];for(m in p)p.hasOwnProperty(m)&&g.push(parseInt(m,10));g.sort(function(e,t){return t-e});for(var d=0;d<g.length;d++)v.splice(g[d],1),n.splice(g[d],1);return this._interpretCommandResult(v)},t.prototype.emitCursorPositionChanged=function(e,t){var n=this.cursors.getPositions(),i=n[0],r=n.slice(1),o=this.cursors.getViewPositions(),s=o[0],a=o.slice(1),c=!0;if(this.model.hasEditableRange()){var u=this.model.getEditableRange();u.containsPosition(i)||(c=!1)}var l={position:i,viewPosition:s,secondaryPositions:r,secondaryViewPositions:a,reason:t,source:e,isInEditableRange:c};this.emit(d.EventType.CursorPositionChanged,l)},t.prototype.emitCursorSelectionChanged=function(e,t){var n=this.cursors.getSelections(),i=n[0],r=n.slice(1),o=this.cursors.getViewSelections(),s=o[0],a=o.slice(1),c={selection:i,viewSelection:s,secondarySelections:r,secondaryViewSelections:a,source:e,reason:t};this.emit(d.EventType.CursorSelectionChanged,c)},t.prototype.emitCursorScrollRequest=function(e){var t={deltaLines:e};this.emit(d.EventType.CursorScrollRequest,t)},t.prototype.emitCursorRevealRange=function(e,t,n){var i=this.cursors.getPositions(),o=this.cursors.getViewPositions(),s=i[0],a=o[0];if(e===f.TopMost)for(var c=1;c<i.length;c++)i[c].isBefore(s)&&(s=i[c],a=o[c]);else if(e===f.BottomMost)for(var c=1;c<i.length;c++)s.isBeforeOrEqual(i[c])&&(s=i[c],a=o[c]);else if(i.length>1)return;var u=new r.Range(s.lineNumber,s.column,s.lineNumber,s.column),l=new r.Range(a.lineNumber,a.column,a.lineNumber,a.column),h={range:u,viewRange:l,verticalType:t,revealHorizontal:n};this.emit(d.EventType.CursorRevealRange,h)},t.prototype._registerHandlers=function(){var e=this,t=d.Handler,n={};n[t.JumpToBracket]=function(t){return e._jumpToBracket(t)},n[t.MoveTo]=function(t){return e._moveTo(!1,t)},n[t.MoveToSelect]=function(t){return e._moveTo(!0,t)},n[t.AddCursorUp]=function(t){return e._addCursorUp(t)},n[t.AddCursorDown]=function(t){return e._addCursorDown(t)},n[t.CreateCursor]=function(t){return e._createCursor(t)},n[t.LastCursorMoveToSelect]=function(t){return e._lastCursorMoveTo(t)},n[t.CursorLeft]=function(t){return e._moveLeft(!1,t)},n[t.CursorLeftSelect]=function(t){return e._moveLeft(!0,t)},n[t.CursorWordLeft]=function(t){return e._moveWordLeft(!1,t)},n[t.CursorWordLeftSelect]=function(t){return e._moveWordLeft(!0,t)},n[t.CursorRight]=function(t){return e._moveRight(!1,t)},n[t.CursorRightSelect]=function(t){return e._moveRight(!0,t)},n[t.CursorWordRight]=function(t){return e._moveWordRight(!1,t)},n[t.CursorWordRightSelect]=function(t){return e._moveWordRight(!0,t)},n[t.CursorUp]=function(t){return e._moveUp(!1,!1,t)},n[t.CursorUpSelect]=function(t){return e._moveUp(!0,!1,t)},n[t.CursorDown]=function(t){return e._moveDown(!1,!1,t)},n[t.CursorDownSelect]=function(t){return e._moveDown(!0,!1,t)},n[t.CursorPageUp]=function(t){return e._moveUp(!1,!0,t)},n[t.CursorPageUpSelect]=function(t){return e._moveUp(!0,!0,t)},n[t.CursorPageDown]=function(t){return e._moveDown(!1,!0,t)},n[t.CursorPageDownSelect]=function(t){return e._moveDown(!0,!0,t)},n[t.CursorHome]=function(t){return e._moveToBeginningOfLine(!1,t)},n[t.CursorHomeSelect]=function(t){return e._moveToBeginningOfLine(!0,t)},n[t.CursorEnd]=function(t){return e._moveToEndOfLine(!1,t)},n[t.CursorEndSelect]=function(t){return e._moveToEndOfLine(!0,t)},n[t.CursorTop]=function(t){return e._moveToBeginningOfBuffer(!1,t)},n[t.CursorTopSelect]=function(t){return e._moveToBeginningOfBuffer(!0,t)},n[t.CursorBottom]=function(t){return e._moveToEndOfBuffer(!1,t)},n[t.CursorBottomSelect]=function(t){return e._moveToEndOfBuffer(!0,t)},n[t.SelectAll]=function(t){return e._selectAll(t)},n[t.LineSelect]=function(t){return e._line(!1,t)},n[t.LineSelectDrag]=function(t){return e._line(!0,t)},n[t.LastCursorLineSelect]=function(t){return e._lastCursorLine(!1,t)},n[t.LastCursorLineSelectDrag]=function(t){return e._lastCursorLine(!0,t)},n[t.LineInsertBefore]=function(t){return e._lineInsertBefore(t)},n[t.LineInsertAfter]=function(t){return e._lineInsertAfter(t)},n[t.LineBreakInsert]=function(t){return e._lineBreakInsert(t)},n[t.WordSelect]=function(t){return e._word(!1,t)},n[t.WordSelectDrag]=function(t){return e._word(!0,t)},n[t.LastCursorWordSelect]=function(t){return e._lastCursorWord(t)},n[t.CancelSelection]=function(t){return e._cancelSelection(t)},n[t.RemoveSecondaryCursors]=function(t){return e._removeSecondaryCursors(t)},n[t.Type]=function(t){return e._type(t)},n[t.ReplacePreviousChar]=function(t){return e._replacePreviousChar(t)},n[t.Tab]=function(t){return e._tab(t)},n[t.Indent]=function(t){return e._indent(t)},n[t.Outdent]=function(t){return e._outdent(t)},n[t.Paste]=function(t){return e._paste(t)},n[t.ScrollLineUp]=function(t){return e._scrollUp(!1,t)},n[t.ScrollLineDown]=function(t){return e._scrollDown(!1,t)},n[t.ScrollPageUp]=function(t){return e._scrollUp(!0,t)},n[t.ScrollPageDown]=function(t){return e._scrollDown(!0,t)},n[t.DeleteLeft]=function(t){return e._deleteLeft(t)},n[t.DeleteWordLeft]=function(t){return e._deleteWordLeft(t)},n[t.DeleteRight]=function(t){return e._deleteRight(t)},n[t.DeleteWordRight]=function(t){return e._deleteWordRight(t)},n[t.DeleteAllLeft]=function(t){return e._deleteAllLeft(t)},n[t.DeleteAllRight]=function(t){return e._deleteAllRight(t)},n[t.Cut]=function(t){return e._cut(t)},n[t.ExpandLineSelection]=function(t){return e._expandLineSelection(t)},n[t.Undo]=function(t){return e._undo(t)},n[t.CursorUndo]=function(t){return e._cursorUndo(t)},n[t.Redo]=function(t){return e._redo(t)},n[t.ExecuteCommand]=function(t){return e._externalExecuteCommand(t)},n[t.ExecuteCommands]=function(t){return e._externalExecuteCommands(t)};var i,r=function(t,n){return function(i){return e._onHandler(t,n,i)}};for(i in n)n.hasOwnProperty(i)&&this.configuration.handlerDispatcher.setHandler(i,r(i,n[i]))},t.prototype._invokeForAll=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r,o=!1,s=this.cursors.getAll();e.shouldPushStackElementBefore=n,e.shouldPushStackElementAfter=i;for(var a=0;a<s.length;a++)r={cursorPositionChangeReason:"",shouldReveal:!0,shouldRevealVerticalInCenter:!1,shouldRevealHorizontal:!0,executeCommand:null,postOperationRunnable:null,shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1,requestScrollDeltaLines:0},o=t(a,s[a],r)||o,0===a&&(e.cursorPositionChangeReason=r.cursorPositionChangeReason,e.shouldRevealHorizontal=r.shouldRevealHorizontal,e.shouldReveal=r.shouldReveal,e.shouldRevealVerticalInCenter=r.shouldRevealVerticalInCenter,e.requestScrollDeltaLines=r.requestScrollDeltaLines),e.shouldPushStackElementBefore=e.shouldPushStackElementBefore||r.shouldPushStackElementBefore,e.shouldPushStackElementAfter=e.shouldPushStackElementAfter||r.shouldPushStackElementAfter,e.executeCommands[a]=r.executeCommand,e.postOperationRunnables[a]=r.postOperationRunnable;return o},t.prototype._jumpToBracket=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.jumpToBracket(t,n)})},t.prototype._moveTo=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,r){return c.OneCursorOp.moveTo(i,e,t.eventData.position,t.eventData.viewPosition,t.eventSource,r)})},t.prototype._createCursor=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;this.cursors.addSecondaryCursor({selectionStartLineNumber:1,selectionStartColumn:1,positionLineNumber:1,positionColumn:1});var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,r){return i===t?e.eventData.wholeLine?c.OneCursorOp.line(i,!1,e.eventData.position,e.eventData.viewPosition,r):c.OneCursorOp.moveTo(i,!1,e.eventData.position,e.eventData.viewPosition,e.eventSource,r):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._lastCursorMoveTo=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,r){return i===t?c.OneCursorOp.moveTo(i,!0,e.eventData.position,e.eventData.viewPosition,e.eventSource,r):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._addCursorUp=function(e){if(this.configuration.editor.readOnly)return!1;var t=this.cursors.getSelections().length;return this.cursors.duplicateCursors(),e.shouldRevealTarget=f.TopMost,this._invokeForAll(e,function(e,n,i){return e>=t?c.OneCursorOp.translateUp(n,i):!1})},t.prototype._addCursorDown=function(e){if(this.configuration.editor.readOnly)return!1;var t=this.cursors.getSelections().length;return this.cursors.duplicateCursors(),e.shouldRevealTarget=f.BottomMost,this._invokeForAll(e,function(e,n,i){return e>=t?c.OneCursorOp.translateDown(n,i):!1})},t.prototype._moveLeft=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveLeft(n,e,i)})},t.prototype._moveWordLeft=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveWordLeft(n,e,i)})},t.prototype._moveRight=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveRight(n,e,i)})},t.prototype._moveWordRight=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveWordRight(n,e,i)})},t.prototype._moveDown=function(e,t,n){return this._invokeForAll(n,function(n,i,r){return c.OneCursorOp.moveDown(i,e,t,r)})},t.prototype._moveUp=function(e,t,n){return this._invokeForAll(n,function(n,i,r){return c.OneCursorOp.moveUp(i,e,t,r)})},t.prototype._moveToBeginningOfLine=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveToBeginningOfLine(n,e,i)})},t.prototype._moveToEndOfLine=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveToEndOfLine(n,e,i)})},t.prototype._moveToBeginningOfBuffer=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveToBeginningOfBuffer(n,e,i)})},t.prototype._moveToEndOfBuffer=function(e,t){return this._invokeForAll(t,function(t,n,i){return c.OneCursorOp.moveToEndOfBuffer(n,e,i)})},t.prototype._selectAll=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.selectAll(t,n)})},t.prototype._line=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,r){return c.OneCursorOp.line(i,e,t.eventData.position,t.eventData.viewPosition,r)})},t.prototype._lastCursorLine=function(e,t){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var n=this.cursors.getLastAddedCursor();return this._invokeForAll(t,function(i,r,o){return r===n?c.OneCursorOp.line(r,e,t.eventData.position,t.eventData.viewPosition,o):!1}),t.shouldReveal=!1,t.shouldRevealHorizontal=!1,!0},t.prototype._expandLineSelection=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.expandLineSelection(t,n)})},t.prototype._lineInsertBefore=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.lineInsertBefore(t,n)})},t.prototype._lineInsertAfter=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.lineInsertAfter(t,n)})},t.prototype._lineBreakInsert=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.lineBreakInsert(t,n)})},t.prototype._word=function(e,t){return this.cursors.killSecondaryCursors(),this._invokeForAll(t,function(n,i,r){return c.OneCursorOp.word(i,e,t.eventData.position,t.eventData.preference||"none",r)})},t.prototype._lastCursorWord=function(e){if(this.configuration.editor.readOnly||this.model.hasEditableRange())return!1;var t=this.cursors.getLastAddedCursor();return this._invokeForAll(e,function(n,i,r){return i===t?c.OneCursorOp.word(i,!0,e.eventData.position,e.eventData.preference||"none",r):!1}),e.shouldReveal=!1,e.shouldRevealHorizontal=!1,!0},t.prototype._removeSecondaryCursors=function(e){return this.cursors.killSecondaryCursors(),!0},t.prototype._cancelSelection=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.cancelSelection(t,n)})},t.prototype._type=function(e){var t=this,n=e.eventData.text;if("keyboard"===e.eventSource){var i,r,o;for(i=0,r=n.length;r>i;i++)o=n.charAt(i),this.charactersTyped+=o,e.hasExecutedCommands=this._createAndInterpretHandlerCtx(e.eventSource,e.eventData,function(n){t._invokeForAll(n,function(e,t,n){return c.OneCursorOp.type(t,o,n)},!1,!1),e.cursorPositionChangeReason=n.cursorPositionChangeReason,e.shouldReveal=n.shouldReveal,e.shouldRevealVerticalInCenter=n.shouldRevealVerticalInCenter,e.shouldRevealHorizontal=n.shouldRevealHorizontal})||e.hasExecutedCommands}else this._invokeForAll(e,function(e,t,i){return c.OneCursorOp.actualType(t,n,!1,i)});return!0},t.prototype._replacePreviousChar=function(e){var t=e.eventData.text;return this._invokeForAll(e,function(e,n,i){return c.OneCursorOp.replacePreviousChar(n,t,i)})},t.prototype._tab=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.tab(t,n)},!1,!1)},t.prototype._indent=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.indent(t,n)})},t.prototype._outdent=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.outdent(t,n)})},t.prototype._paste=function(e){var t=this._distributePasteToCursors(e);return t?this._invokeForAll(e,function(e,n,i){return c.OneCursorOp.paste(n,t[e],!1,i)}):this._invokeForAll(e,function(t,n,i){return c.OneCursorOp.paste(n,e.eventData.text,e.eventData.pasteOnNewLine,i)})},t.prototype._scrollUp=function(e,t){return t.requestScrollDeltaLines=e?-this.configuration.editor.pageSize:-1,!0},t.prototype._scrollDown=function(e,t){return t.requestScrollDeltaLines=e?this.configuration.editor.pageSize:1,!0},t.prototype._distributePasteToCursors=function(e){if(e.eventData.pasteOnNewLine)return null;var t=this.cursors.getSelections();if(1===t.length)return null;for(var n=0;n<t.length;n++)if(t[n].startLineNumber!==t[n].endLineNumber)return null;var i=e.eventData.text.split(/\r\n|\r|\n/);return i.length!==t.length?null:i},t.prototype._deleteLeft=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteLeft(t,n)},!1,!1)},t.prototype._deleteWordLeft=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteWordLeft(t,n)},!1,!1)},t.prototype._deleteRight=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteRight(t,n)},!1,!1)},t.prototype._deleteWordRight=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteWordRight(t,n)},!1,!1)},t.prototype._deleteAllLeft=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteAllLeft(t,n)},!1,!1)},t.prototype._deleteAllRight=function(e){return this._invokeForAll(e,function(e,t,n){return c.OneCursorOp.deleteAllRight(t,n)},!1,!1)},t.prototype._cut=function(e){var t=this;return this._invokeForAll(e,function(e,n,i){return c.OneCursorOp.cut(n,t.enableEmptySelectionClipboard,i)})},t.prototype._undo=function(e){return e.cursorPositionChangeReason="undo",e.hasExecutedCommands=!0,this._interpretCommandResult(this.model.undo()),!0},t.prototype._cursorUndo=function(e){return 0===this.cursorUndoStack.length?!1:(e.cursorPositionChangeReason="undo",e.isCursorUndo=!0,this.cursors.restoreState(this.cursorUndoStack.pop()),!0)},t.prototype._redo=function(e){return e.cursorPositionChangeReason="redo",e.hasExecutedCommands=!0,this._interpretCommandResult(this.model.redo()),!0},t.prototype._externalExecuteCommand=function(e){return this.cursors.killSecondaryCursors(),this._invokeForAll(e,function(t,n,i){return i.shouldPushStackElementBefore=!0,i.shouldPushStackElementAfter=!0,i.executeCommand=e.eventData,!1})},t.prototype._externalExecuteCommands=function(e){return this._invokeForAll(e,function(t,n,i){return i.shouldPushStackElementBefore=!0,i.shouldPushStackElementAfter=!0,i.executeCommand=e.eventData[t],!1})},t}(i.EventEmitter);t.Cursor=m}),define("vs/nls!vs/editor/common/model/textModelWithTokens",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/model/textModelWithTokens",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithTokens",["require","exports","vs/nls!vs/editor/common/model/textModelWithTokens","vs/base/common/timer","vs/editor/common/modes/nullMode","vs/editor/common/model/textModelWithTokensHelpers","vs/editor/common/model/tokenIterator","vs/editor/common/model/textModel","vs/editor/common/config/defaultConfig","vs/editor/common/editorCommon","vs/base/common/async","vs/editor/common/core/arrays","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/stopwatch","vs/base/common/winjs.base"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){var v=function(){function e(){this._inflate=[""],this._deflate={"":0}}return e}();t.TokensInflatorMap=v;var g=function(){function e(e,t){var n=this;this._modePromise=e,this._externalModePromise=new m.TPromise(function(e,t,i){n._externalModePromise_c=e,n._externalModePromise_e=t},function(){}),this._model=t,this._isDisposed=!1,m.TPromise.timeout(0).then(function(){return n._modePromise}).then(function(e){if(n._isDisposed)return void n._externalModePromise_c(!1);var t=n._model;n.dispose(),t.setMode(e),t._warmUpTokens(),n._externalModePromise_c(!0)}).done(null,function(e){n._externalModePromise_e(e),h.onUnexpectedError(e)})}return e.prototype.getModePromise=function(){return this._externalModePromise},e.prototype.dispose=function(){this._modePromise=null,this._model=null,this._isDisposed=!0},e}(),y=function(){function e(e,t){var n=this;this._retokenizePromise=e,this._model=t,this._isDisposed=!1,this.isFulfilled=!1,m.TPromise.timeout(0).then(function(){return n._retokenizePromise}).then(function(){n._isDisposed||(n.isFulfilled=!0,n._model.onRetokenizerFulfilled())}).done(null,h.onUnexpectedError)}return e.prototype.getRange=function(){return null},e.prototype.dispose=function(){this._retokenizePromise=null,this._model=null,this._isDisposed=!0},e}();t.FullModelRetokenizer=y;var _=function(){function e(e,t){this.modeTransitions=t.getModeTransitions().toArray(e),this._text=t.text,this._lineTokens=t.getTokens()}return e.prototype.getLineContent=function(){return this._text},e.prototype.getTokenCount=function(){return this._lineTokens.getTokenCount()},e.prototype.getTokenStartIndex=function(e){return this._lineTokens.getTokenStartIndex(e)},e.prototype.getTokenEndIndex=function(e){return this._lineTokens.getTokenEndIndex(e,this._text.length)},e.prototype.getTokenType=function(e){return this._lineTokens.getTokenType(e)},e.prototype.getTokenBracket=function(e){return this._lineTokens.getTokenBracket(e)},e.prototype.getTokenText=function(e){var t=this._lineTokens.getTokenStartIndex(e),n=this._lineTokens.getTokenEndIndex(e,this._text.length);return this._text.substring(t,n)},e.prototype.findIndexOfOffset=function(e){return this._lineTokens.findIndexOfOffset(e)},e}(),b=function(e){function t(n,i,o,s){var a=this;if(n.push(u.EventType.ModelTokensChanged),n.push(u.EventType.ModelModeChanged),n.push(u.EventType.ModelModeSupportChanged),e.call(this,n,i),this._shouldAutoTokenize=o,this._shouldSimplifyMode=i.length>t.MODEL_SYNC_LIMIT,this._shouldDenyMode=i.length>t.MODEL_TOKENIZATION_LIMIT,this._stopLineTokenizationAfter=c.DefaultConfig.editor.stopLineTokenizationAfter,s)if(m.TPromise.is(s)){var d=s._value;if(d&&"function"==typeof d.getId)this._mode=this._massageMode(d),this._resetModeListener(this._mode);else{var h=s;this._modeToModelBinder=new g(h,this),this._mode=new r.NullMode}}else this._mode=this._massageMode(s),this._resetModeListener(this._mode);else this._mode=new r.NullMode;this._revalidateTokensTimeout=-1,this._scheduleRetokenizeNow=new l.RunOnceScheduler(function(){return a._retokenizeNow()},200),this._retokenizers=[],this._resetTokenizationState()}return __extends(t,e),t.prototype.dispose=function(){this._modeToModelBinder&&(this._modeToModelBinder.dispose(),this._modeToModelBinder=null),this._resetModeListener(null),this._clearTimers(),this._mode=null,this._lastState=null,this._tokensInflatorMap=null,this._retokenizers=p.disposeAll(this._retokenizers),this._scheduleRetokenizeNow.dispose(),e.prototype.dispose.call(this)},t.prototype.isTooLargeForHavingAMode=function(){return this._shouldDenyMode},t.prototype.isTooLargeForHavingARichMode=function(){return this._shouldSimplifyMode},t.prototype._massageMode=function(e){return this.isTooLargeForHavingAMode()?new r.NullMode:this.isTooLargeForHavingARichMode()?e.toSimplifiedMode():e},t.prototype.whenModeIsReady=function(){var e=this;return this._modeToModelBinder?this._modeToModelBinder.getModePromise().then(function(){return e._mode}):m.TPromise.as(this._mode)},t.prototype.onRetokenizerFulfilled=function(){this._scheduleRetokenizeNow.schedule()},t.prototype._retokenizeNow=function(){var e=this._retokenizers.filter(function(e){return e.isFulfilled});this._retokenizers=this._retokenizers.filter(function(e){return!e.isFulfilled});for(var t=!1,n=0;n<e.length;n++)e[n].getRange()||(t=!0);if(t){for(var n=0,i=this._lines.length;i>n;n++)this._lines[n].isInvalid=!0;this._invalidLineStartIndex=0}else{for(var r=Number.MAX_VALUE,n=0;n<e.length;n++){var o=e[n].getRange();r=Math.min(r,o.startLineNumber);for(var s=o.startLineNumber;s<=o.endLineNumber;s++)this._lines[s-1].isInvalid=!0}r-1<this._invalidLineStartIndex&&(this._invalidLineStartIndex<this._lines.length&&(this._lines[this._invalidLineStartIndex].isInvalid=!0),this._invalidLineStartIndex=r-1)}this._beginBackgroundTokenization();for(var n=0;n<e.length;n++)e[n].dispose()},t.prototype._createRetokenizer=function(e,t){return new y(e,this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._resetTokenizationState()},t.prototype._resetMode=function(e,t){this._mode=t,this._resetModeListener(t),this._resetTokenizationState(),this.emitModelTokensChangedEvent(1,this.getLineCount())},t.prototype._resetModeListener=function(e){var t=this;this._modeListener&&(this._modeListener.dispose(),this._modeListener=null),e&&"function"==typeof e.addSupportChangedListener&&(this._modeListener=e.addSupportChangedListener(function(e){return t._onModeSupportChanged(e)}))},t.prototype._onModeSupportChanged=function(e){this._emitModelModeSupportChangedEvent(e),e.tokenizationSupport&&(this._resetTokenizationState(),this.emitModelTokensChangedEvent(1,this.getLineCount()))},t.prototype._resetTokenizationState=function(){this._retokenizers=p.disposeAll(this._retokenizers),this._scheduleRetokenizeNow.cancel(),this._clearTimers();for(var e=0;e<this._lines.length;e++)this._lines[e].setState(null);this._initializeTokenizationState(),this._tokenizationElapsedTime=0,this._tokenizationTotalCharacters=1},t.prototype._clearTimers=function(){-1!==this._revalidateTokensTimeout&&(clearTimeout(this._revalidateTokensTimeout),this._revalidateTokensTimeout=-1)},t.prototype._initializeTokenizationState=function(){var e=null;if(this._mode.tokenizationSupport)try{e=this._mode.tokenizationSupport.getInitialState()}catch(n){n.friendlyMessage=t.MODE_TOKENIZATION_FAILED_MSG,h.onUnexpectedError(n),this._mode=new r.NullMode}e||(e=new r.NullState(this._mode,null)),this._lines[0].setState(e),this._lastState=null,this._tokensInflatorMap=new v,this._invalidLineStartIndex=0,this._beginBackgroundTokenization()},t.prototype.setStopLineTokenizationAfter=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.setStopLineTokenizationAfter: Model is disposed");this._stopLineTokenizationAfter=e},t.prototype.getLineTokens=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithTokens.getLineTokens: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return t||this._updateTokensUntilLine(e,!0),this._lines[e-1].getTokens()},t.prototype.getLineContext=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getLineContext: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._updateTokensUntilLine(e,!0),new _(this._mode,this._lines[e-1])},t.prototype._getInternalTokens=function(e){return this._updateTokensUntilLine(e,!0),this._lines[e-1].getTokens()},t.prototype.setValue=function(t,n){if(void 0===n&&(n=null),this._isDisposed)throw new Error("TextModelWithTokens.setValue: Model is disposed");if(null!==t&&e.prototype.setValue.call(this,t),n)if(this._modeToModelBinder&&(this._modeToModelBinder.dispose(),this._modeToModelBinder=null),m.TPromise.is(n))this._modeToModelBinder=new g(n,this);else{var i=this._massageMode(n);if(this._mode!==i){var r={oldMode:this._mode,newMode:i};this._resetMode(r,i),this._emitModelModeChangedEvent(r)}}},t.prototype.getMode=function(){if(this._isDisposed)throw new Error("TextModelWithTokens.getMode: Model is disposed");return this._mode},t.prototype.setMode=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.setMode: Model is disposed");e&&this.setValue(null,e)},t.prototype.getModeAtPosition=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.getModeAtPosition: Model is disposed");var n=this.validatePosition({lineNumber:e,column:t}),i=n.lineNumber,r=n.column;if(1===r)return this.getStateBeforeLine(i).getMode();if(r===this.getLineMaxColumn(i))return this.getStateAfterLine(i).getMode();var o=this._getLineModeTransitions(i),s=d.Arrays.findIndexInSegmentsArray(o,r-1);return o[s].mode},t.prototype._invalidateLine=function(e){this._lines[e].isInvalid=!0,e<this._invalidLineStartIndex&&(this._invalidLineStartIndex<this._lines.length&&(this._lines[this._invalidLineStartIndex].isInvalid=!0),this._invalidLineStartIndex=e,this._beginBackgroundTokenization())},t.prototype._updateLineTokens=function(e,t,n,i){this._lines[e].setTokens(t,i.tokens,n,i.modeTransitions)},t.prototype._beginBackgroundTokenization=function(){var e=this;this._shouldAutoTokenize&&-1===this._revalidateTokensTimeout&&(this._revalidateTokensTimeout=setTimeout(function(){e._revalidateTokensTimeout=-1,e._revalidateTokensNow()},0))},t.prototype._warmUpTokens=function(){if(this._isDisposed)throw new Error("TextModelWithTokens._warmUpTokens: Model is disposed");for(var e=Math.min(100,this.getLineCount()),t=e,n=1;e>=n;n++){var i=this._lines[n-1].text;if(i.length>=200){t=n-1;break}}this._revalidateTokensNow(t)},t.prototype._revalidateTokensNow=function(e){void 0===e&&(e=this._invalidLineStartIndex+1e6);
var t=i.start(i.Topic.EDITOR,"backgroundTokenization");e=Math.min(this._lines.length,e);for(var n,r=20,o=this._invalidLineStartIndex+1,s=0,a=0,c=0,u=this._stopLineTokenizationAfter,l=f.StopWatch.create(),d=o;e>=d;d++){if(n=l.elapsed(),n>r){e=d-1;break}if(a=this._lines[d-1].text.length,-1!==u&&a>u&&(a=u),s>0&&(c=n/s*a,n+c>r)){e=d-1;break}this._updateTokensUntilLine(d,!1),s+=a}n=l.elapsed();var h=i.start(i.Topic.EDITOR,"**speed: "+this._tokenizationTotalCharacters/this._tokenizationElapsedTime);h.stop(),e>=o&&this.emitModelTokensChangedEvent(o,e),this._invalidLineStartIndex<this._lines.length&&this._beginBackgroundTokenization(),t.stop()},t.prototype.getStateBeforeLine=function(e){return this._updateTokensUntilLine(e-1,!0),this._lines[e-1].getState()},t.prototype.getStateAfterLine=function(e){return this._updateTokensUntilLine(e,!0),e<this._lines.length?this._lines[e].getState():this._lastState},t.prototype._getLineModeTransitions=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens._getLineModeTransitions: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._updateTokensUntilLine(e,!0),this._lines[e-1].getModeTransitions().toArray(this._mode)},t.prototype._updateTokensUntilLine=function(e,n){var i=this._lines.length,o=e-1,s=this._stopLineTokenizationAfter;-1===s&&(s=1e9);for(var a=f.StopWatch.create(),c=0,u=this._invalidLineStartIndex+1,l=e,d=this._invalidLineStartIndex;o>=d;d++){var p=d+1,m=null,v=this._lines[d].text;if(this._mode.tokenizationSupport){try{m=this._mode.tokenizationSupport.tokenize(this._lines[d].text,this._lines[d].getState(),0,s),c=m?m.actualStopOffset:this._lines[d].text.length}catch(g){g.friendlyMessage=t.MODE_TOKENIZATION_FAILED_MSG,h.onUnexpectedError(g)}m&&m.retokenize&&this._retokenizers.push(this._createRetokenizer(m.retokenize,d+1)),m&&m.tokens&&m.tokens.length>0&&(m.actualStopOffset=Math.max(m.actualStopOffset,m.tokens[m.tokens.length-1].startIndex+1)),m&&m.actualStopOffset<v.length&&(m.tokens.push({startIndex:m.actualStopOffset,type:"",bracket:0}),m.endState=this._lines[d].getState())}if(m||(m=r.nullTokenize(this._mode,v,this._lines[d].getState())),m.modeTransitions||(m.modeTransitions=[]),0===m.modeTransitions.length&&m.modeTransitions.push({startIndex:0,mode:this._mode}),this._updateLineTokens(d,this._tokensInflatorMap,this._mode,m),this._lines[d].isInvalid&&(this._lines[d].isInvalid=!1),i>p)if(null!==this._lines[p].getState()&&m.endState.equals(this._lines[p].getState())){for(var y=d+1;i>y&&!this._lines[y].isInvalid;){if(i>y+1){if(null===this._lines[y+1].getState())break}else if(null===this._lastState)break;y++}this._invalidLineStartIndex=Math.max(this._invalidLineStartIndex,y),d=y-1}else this._lines[p].setState(m.endState);else this._lastState=m.endState}this._invalidLineStartIndex=Math.max(this._invalidLineStartIndex,o+1),this._tokenizationElapsedTime+=a.elapsed(),this._tokenizationTotalCharacters+=c,n&&l>=u&&this.emitModelTokensChangedEvent(u,l)},t.prototype.emitModelTokensChangedEvent=function(e,t){var n={fromLineNumber:e,toLineNumber:t};this._isDisposing||this.emit(u.EventType.ModelTokensChanged,n)},t.prototype._emitModelModeChangedEvent=function(e){this._isDisposing||this.emit(u.EventType.ModelModeChanged,e)},t.prototype._emitModelModeSupportChangedEvent=function(e){this._isDisposing||this.emit(u.EventType.ModelModeSupportChanged,e)},t.prototype._lineIsTokenized=function(e){return this._invalidLineStartIndex>e-1},t.prototype._getWordDefinition=function(){return o.WordHelper.massageWordDefinitionOf(this._mode)},t.prototype.getWordAtPosition=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWordAtPosition: Model is disposed");return o.WordHelper.getWordAtPosition(this,this.validatePosition(e))},t.prototype.getWordUntilPosition=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWordUntilPosition: Model is disposed");var t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}},t.prototype.getWords=function(e){if(this._isDisposed)throw new Error("TextModelWithTokens.getWords: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return o.WordHelper.getWords(this,this.validateLineNumber(e))},t.prototype.tokenIterator=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.tokenIterator: Model is disposed");var n=new s.TokenIterator(this,this.validatePosition(e)),i=t(n);return n._invalidate(),i},t.prototype.findMatchingBracketUp=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTokens.findMatchingBracketUp: Model is disposed");return o.BracketsHelper.findMatchingBracketUp(this,e,this.validatePosition(t))},t.prototype.matchBracket=function(e,t){if(void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithTokens.matchBracket: Model is disposed");return o.BracketsHelper.matchBracket(this,this.validatePosition(e),t)},t.MODE_TOKENIZATION_FAILED_MSG=n.localize(0,null),t.MODEL_SYNC_LIMIT=5242880,t.MODEL_TOKENIZATION_LIMIT=20971520,t}(a.TextModel);t.TextModelWithTokens=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/mirrorModel",["require","exports","vs/editor/common/viewModel/prefixSumComputer","vs/editor/common/model/textModel","vs/editor/common/model/textModelWithTokens","vs/editor/common/model/modelLine","vs/editor/common/editorCommon","vs/base/common/lifecycle"],function(e,t,n,i,r,o,s,a){function c(e,t,n,r,o,s){return new h(e,t,i.TextModel.toRawText(n),r,o,s)}var u=function(e){function t(t,n,i,r,o,a){e.call(this,t.concat([s.EventType.ModelDispose]),i,!1,r),a||(a={}),this._setVersionId(n),this._associatedResource=o,this._extraProperties=a}return __extends(t,e),t.prototype.getModeId=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getModeId: Model is disposed");return this.getMode().getId()},t.prototype.getEmbeddedAtPosition=function(e){return null},t.prototype.getAllEmbedded=function(){return[]},t.prototype._constructLines=function(t){e.prototype._constructLines.call(this,t),this._EOL="\n"},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this.emit(s.EventType.ModelDispose),e.prototype.dispose.call(this)},t.prototype.getAssociatedResource=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAssociatedResource: Model is disposed");return this._associatedResource},t.prototype.getProperty=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getProperty: Model is disposed");return this._extraProperties.hasOwnProperty(e)?this._extraProperties[e]:null},t.prototype._ensurePrefixSum=function(){if(!this._lineStarts){for(var e=[],t=this.getEOL().length,i=0,r=this._lines.length;r>i;i++)e.push(this._lines[i].text.length+t);this._lineStarts=new n.PrefixSumComputer(e)}},t.prototype.getRangeFromOffsetAndLength=function(e,t){if(this._isDisposed)throw new Error("AbstractMirrorModel.getRangeFromOffsetAndLength: Model is disposed");var n=this.getPositionFromOffset(e),i=this.getPositionFromOffset(e+t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:i.lineNumber,endColumn:i.column}},t.prototype.getOffsetAndLengthFromRange=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getOffsetAndLengthFromRange: Model is disposed");var t=this.getOffsetFromPosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this.getOffsetFromPosition({lineNumber:e.endLineNumber,column:e.endColumn});return{offset:t,length:n-t}},t.prototype.getPositionFromOffset=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getPositionFromOffset: Model is disposed");this._ensurePrefixSum();var t={index:0,remainder:0};return this._lineStarts.getIndexOf(e,t),{lineNumber:t.index+1,column:this.getEOL().length+t.remainder}},t.prototype.getOffsetFromPosition=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getOffsetFromPosition: Model is disposed");return this.getLineStart(e.lineNumber)+e.column-1},t.prototype.getLineStart=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getLineStart: Model is disposed");this._ensurePrefixSum();var t=Math.min(e,this._lines.length)-1;return this._lineStarts.getAccumulatedValue(t-1)},t.prototype.getAllWordsWithRange=function(){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllWordsWithRange: Model is disposed");if(this._lines.length>1e4)return[];var e,t=[],n=function(n){var r=i.text.substring(n.start,n.end),o={startLineNumber:e+1,startColumn:n.start+1,endLineNumber:e+1,endColumn:n.end+1};t.push({text:r,range:o})};for(e=0;e<this._lines.length;e++){var i=this._lines[e];this.wordenize(i.text).forEach(n)}return t},t.prototype.getAllWords=function(){var e=this;if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllWords: Model is disposed");var t=[];return this._lines.forEach(function(n){e.wordenize(n.text).forEach(function(e){t.push(n.text.substring(e.start,e.end))})}),t},t.prototype.getAllUniqueWords=function(e){if(this._isDisposed)throw new Error("AbstractMirrorModel.getAllUniqueWords: Model is disposed");var t=!1,n={};return this.getAllWords().filter(function(i){return e&&!t&&e===i?(t=!0,!1):n[i]?!1:(n[i]=!0,!0)})},t.prototype.wordenize=function(e){for(var t,n=[],i=this._getWordDefinition();t=i.exec(e);)n.push({start:t.index,end:t.index+t[0].length});return n},t.prototype.getWord=function(e,t,n){for(var i=this.wordenize(e),r=0;r<i.length&&t>=i[r].start;r++){var o=i[r];if(t<=o.end)return n(e,o.start,o.end)}return n(e,-1,-1)},t}(r.TextModelWithTokens);t.AbstractMirrorModel=u;var l=function(e){function t(n,i,r,o){e.call(this,["changed"],n.getVersionId(),t._getMirrorValueWithinRanges(n,i),r,o),this._actualModel=n}return __extends(t,e),t._getMirrorValueWithinRanges=function(e,t){var n,r="",o=1,s=1;for(n=0;n<t.length;n++){var a=t[n];r+=e.getEmptiedValueInRange({startLineNumber:o,startColumn:s,endLineNumber:a.startLineNumber,endColumn:a.startColumn}," "),r+=e.getValueInRange(a),o=a.endLineNumber,s=a.endColumn}var c=e.getLineCount(),u=e.getLineMaxColumn(c);return r+=e.getEmptiedValueInRange({startLineNumber:o,startColumn:s,endLineNumber:c,endColumn:u}," "),i.TextModel.toRawText(r)},t.prototype.setIncludedRanges=function(e){var n=this.getVersionId();this._lineStarts=null,this._constructLines(t._getMirrorValueWithinRanges(this._actualModel,e)),this._resetTokenizationState(),this._setVersionId(n+1),this.emit("changed",{})},t}(u);t.MirrorModelEmbedded=l;var d=function(){function e(e){this.mode=e,this.ranges=[]}return e}();t.createMirrorModelFromString=c;var h=function(e){function t(t,n,i,r,o,s){e.call(this,["changed"],n,i,r,o,s),this._resourceService=t,this._embeddedModels={},this._updateEmbeddedModels()}return __extends(t,e),t.prototype.getEmbeddedAtPosition=function(e){if(this._isDisposed)throw new Error("MirrorModel.getEmbeddedAtPosition: Model is disposed");var t=this.getModeAtPosition(e.lineNumber,e.column);return this._embeddedModels.hasOwnProperty(t.getId())?this._embeddedModels[t.getId()]:null},t.prototype.getAllEmbedded=function(){var e=this;if(this._isDisposed)throw new Error("MirrorModel.getAllEmbedded: Model is disposed");return Object.keys(this._embeddedModels).map(function(t){return e._embeddedModels[t]})},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this);var n=Object.keys(this._embeddedModels).map(function(e){return t._embeddedModels[e]});n.forEach(function(e){return t._resourceService.remove(e.getAssociatedResource())}),a.disposeAll(n),this._embeddedModels={}},t.prototype.setMode=function(t){e.prototype.setMode.call(this,t),this._updateEmbeddedModels()},t._getModesRanges=function(e){for(var t={},n=function(e,n){return t.hasOwnProperty(e)||(t[e]=new d(n)),t[e]},i=e.getLineCount(),r=e.getMode().getId(),o=e.getMode(),s=1,a=1,c=1;i>=c;c++)for(var u=e._getLineModeTransitions(c),l=0;l<u.length;l++){var h=u[l];if(h.mode.getId()!==r){var p=n(r,o);p.ranges.push({startLineNumber:s,startColumn:a,endLineNumber:c,endColumn:h.startIndex+1}),r=h.mode.getId(),o=h.mode,s=c,a=h.startIndex+1}}var f=i,m=e.getLineMaxColumn(f);if(s!==f||a!==m){var p=n(r,o);p.ranges.push({startLineNumber:s,startColumn:a,endLineNumber:f,endColumn:m})}return t},t.prototype._updateEmbeddedModels=function(){if(!this._resourceService||!this.getMode().tokenizationSupport||!this.getMode().tokenizationSupport.shouldGenerateEmbeddedModels)return!1;for(var e=t._getModesRanges(this),n=Object.keys(this._embeddedModels),i=0;i<n.length;i++){var r=n[i];e.hasOwnProperty(r)||this._embeddedModels[r].setIncludedRanges([{startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}])}for(var o=Object.keys(e),i=0;i<o.length;i++){var s=o[i];if(this._embeddedModels.hasOwnProperty(s))this._embeddedModels[s].setIncludedRanges(e[s].ranges);else{var a=this.getAssociatedResource().withFragment(this.getAssociatedResource().fragment+"URL_MARSHAL_REMOVE"+s);this._embeddedModels[s]=new l(this,e[s].ranges,e[s].mode,a),this._resourceService.insert(this._embeddedModels[s].getAssociatedResource(),this._embeddedModels[s])}}return!1},t.prototype.onEvents=function(e){if(this._isDisposed)throw new Error("MirrorModel.onEvents: Model is disposed");e.propertiesChanged&&(this._extraProperties=e.propertiesChanged.properties);for(var t=!1,n=0,i=e.contentChanged.length;i>n;n++){var r=e.contentChanged[n];switch(this._lineStarts=null,this._setVersionId(r.versionId),r.changeType){case s.EventType.ModelContentChangedFlush:this._onLinesFlushed(r),t=!0;break;case s.EventType.ModelContentChangedLinesDeleted:this._onLinesDeleted(r),t=!0;break;case s.EventType.ModelContentChangedLinesInserted:this._onLinesInserted(r),t=!0;break;case s.EventType.ModelContentChangedLineChanged:this._onLineChanged(r),t=!0}}var o=!1;return t&&(this.emit("changed",{}),o=this._updateEmbeddedModels()),o},t.prototype._onLinesFlushed=function(e){this._constructLines(e.detail),this._resetTokenizationState()},t.prototype._onLineChanged=function(e){this._lines[e.lineNumber-1].applyEdits({},[{startColumn:1,endColumn:Number.MAX_VALUE,text:e.detail,forceMoveMarkers:!1}]),this._invalidateLine(e.lineNumber-1)},t.prototype._onLinesDeleted=function(e){var t=e.fromLineNumber-1,n=e.toLineNumber-1,i=this._lines[t].getState();this._lines.splice(t,n-t+1),t<this._lines.length&&(this._lines[t].setState(i),this._invalidateLine(t))},t.prototype._onLinesInserted=function(e){var t,n,i=(this.getEOL().length,e.detail.split("\n"));for(t=e.fromLineNumber-1,n=0;t<e.toLineNumber;t++,n++)this._lines.splice(t,0,new o.ModelLine(0,i[n]));e.fromLineNumber>=2&&this._invalidateLine(e.fromLineNumber-2)},t}(u);t.MirrorModel=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithMarkers",["require","exports","vs/editor/common/core/position","vs/editor/common/model/textModelWithTokens","vs/editor/common/core/idGenerator"],function(e,t,n,i,r){var o=function(){function e(e,t,n){this.id=e,this.column=t,this.stickToPreviousCharacter=n,this.oldLineNumber=0,this.oldColumn=0,this.line=null}return e.prototype.toString=function(){return"{'"+this.id+"';"+this.column+","+this.stickToPreviousCharacter+",["+this.oldLineNumber+","+this.oldColumn+"]}"},e}();t.LineMarker=o;var s=0,a=function(e){function t(t,n,i){e.call(this,t,n,!0,i),this._markerIdGenerator=new r.IdGenerator(++s+";"),this._markerIdToMarker={}}return __extends(t,e),t.prototype.dispose=function(){this._markerIdToMarker=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._markerIdToMarker={}},t.prototype._addMarker=function(e,t,i){if(this._isDisposed)throw new Error("TextModelWithMarkers._addMarker: Model is disposed");var r=this.validatePosition(new n.Position(e,t)),s=new o(this._markerIdGenerator.generate(),r.column,i);return this._markerIdToMarker[s.id]=s,this._lines[r.lineNumber-1].addMarker(s),s.id},t.prototype._addMarkers=function(e){for(var t=Object.create(null),n=[],i=0,r=e.length;r>i;i++){var s=e[i],a=new o(this._markerIdGenerator.generate(),s.column,s.stickToPreviousCharacter);this._markerIdToMarker[a.id]=a,t[s.lineNumber]||(t[s.lineNumber]=[]),t[s.lineNumber].push(a),n.push(a.id)}for(var c=Object.keys(t),i=0,r=c.length;r>i;i++){var u=parseInt(c[i],10);this._lines[u-1].addMarkers(t[c[i]])}return n},t.prototype._changeMarker=function(e,t,i){if(this._isDisposed)throw new Error("TextModelWithMarkers._changeMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var r=this._markerIdToMarker[e],o=this.validatePosition(new n.Position(t,i));o.lineNumber!==r.line.lineNumber&&(r.line.removeMarker(r),this._lines[o.lineNumber-1].addMarker(r)),r.column=o.column}},t.prototype._changeMarkerStickiness=function(e,t){if(this._isDisposed)throw new Error("TextModelWithMarkers._changeMarkerStickiness: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var n=this._markerIdToMarker[e];n.stickToPreviousCharacter!==t&&(n.stickToPreviousCharacter=t)}},t.prototype._getMarker=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var t=this._markerIdToMarker[e];return new n.Position(t.line.lineNumber,t.column)}return null},t.prototype._getMarkersCount=function(){return Object.keys(this._markerIdToMarker).length},t.prototype._getLineMarkers=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getLineMarkers: Model is disposed");if(1>e||e>this.getLineCount())throw new Error("Illegal value "+e+" for `lineNumber`");return this._lines[e-1].getMarkers()},t.prototype._removeMarker=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._removeMarker: Model is disposed");if(this._markerIdToMarker.hasOwnProperty(e)){var t=this._markerIdToMarker[e];t.line.removeMarker(t),delete this._markerIdToMarker[e]}},t.prototype._removeMarkers=function(e){for(var t=Object.create(null),n=0,i=e.length;i>n;n++){var r=e[n];if(this._markerIdToMarker.hasOwnProperty(r)){var o=this._markerIdToMarker[r],s=o.line.lineNumber;t[s]||(t[s]=Object.create(null)),t[s][r]=!0,delete this._markerIdToMarker[r]}}for(var a=Object.keys(t),n=0,i=a.length;i>n;n++){var s=parseInt(a[n],10);this._lines[s-1].removeMarkers(t[a[n]])}},t.prototype._getMarkersInMap=function(e){if(this._isDisposed)throw new Error("TextModelWithMarkers._getMarkersInMap: Model is disposed");var t,n=[];for(t in e)e.hasOwnProperty(t)&&this._markerIdToMarker.hasOwnProperty(t)&&n.push(this._markerIdToMarker[t]);return n},t}(i.TextModelWithTokens);t.TextModelWithMarkers=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithTrackedRanges",["require","exports","vs/editor/common/core/range","vs/editor/common/model/textModelWithMarkers","vs/editor/common/model/textModelWithTokens","vs/editor/common/editorCommon","vs/editor/common/core/idGenerator"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,i){e.call(this,t,i),this.trackedRangeId=i.addTrackedRange({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:i.getLineMaxColumn(n)},o.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges)}return __extends(t,e),t.prototype.getRange=function(){return this._model.getTrackedRange(this.trackedRangeId)},t.prototype.dispose=function(){var t=this._model;t.isValidTrackedRange(this.trackedRangeId)&&t.removeTrackedRange(this.trackedRangeId),e.prototype.dispose.call(this)},t}(r.FullModelRetokenizer),c=function(){function e(e,t,n){this.id=e,this.startMarkerId=t,this.endMarkerId=n}return e}(),u=0,l=function(e){function t(t,n,i){e.call(this,t,n,i),this._rangeIdGenerator=new s.IdGenerator(++u+";"),this._ranges={},this._markerIdToRangeId={},this._multiLineTrackedRanges={}}return __extends(t,e),t.prototype._createRetokenizer=function(e,t){return new a(e,t,this)},t.prototype.dispose=function(){this._ranges=null,this._markerIdToRangeId=null,this._multiLineTrackedRanges=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._ranges={},this._markerIdToRangeId={},this._multiLineTrackedRanges={}},t.prototype._setRangeIsMultiLine=function(e,t){var n=this._multiLineTrackedRanges.hasOwnProperty(e);!n&&t?this._multiLineTrackedRanges[e]=!0:n&&!t&&delete this._multiLineTrackedRanges[e]},t.prototype._shouldStartMarkerSticksToPreviousCharacter=function(e){return e===o.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges||e===o.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore?!0:!1},t.prototype._shouldEndMarkerSticksToPreviousCharacter=function(e){return e===o.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges||e===o.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore?!0:!1},t.prototype._getTrackedRangesCount=function(){return Object.keys(this._ranges).length},t.prototype.addTrackedRange=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.addTrackedRange: Model is disposed");e=this.validateRange(e);var n=this._shouldStartMarkerSticksToPreviousCharacter(t),i=this._shouldEndMarkerSticksToPreviousCharacter(t),r=this._addMarker(e.startLineNumber,e.startColumn,n),o=this._addMarker(e.endLineNumber,e.endColumn,i),s=new c(this._rangeIdGenerator.generate(),r,o);return this._ranges[s.id]=s,this._markerIdToRangeId[r]=s.id,this._markerIdToRangeId[o]=s.id,this._setRangeIsMultiLine(s.id,e.startLineNumber!==e.endLineNumber),s.id},t.prototype._addTrackedRanges=function(e,t){for(var n=[],i=0,r=e.length;r>i;i++){var o=e[i],s=t[i];n.push({lineNumber:o.startLineNumber,column:o.startColumn,stickToPreviousCharacter:this._shouldStartMarkerSticksToPreviousCharacter(s)}),n.push({lineNumber:o.endLineNumber,column:o.endColumn,stickToPreviousCharacter:this._shouldEndMarkerSticksToPreviousCharacter(s)})}for(var a=this._addMarkers(n),u=[],i=0,r=e.length;r>i;i++){var o=e[i],l=a[2*i],d=a[2*i+1],h=new c(this._rangeIdGenerator.generate(),l,d);this._ranges[h.id]=h,this._markerIdToRangeId[l]=h.id,this._markerIdToRangeId[d]=h.id,this._setRangeIsMultiLine(h.id,o.startLineNumber!==o.endLineNumber),u.push(h.id)}return u},t.prototype.changeTrackedRange=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.changeTrackedRange: Model is disposed");if(this._ranges.hasOwnProperty(e)){t=this.validateRange(t);var n=this._ranges[e];this._changeMarker(n.startMarkerId,t.startLineNumber,t.startColumn),this._changeMarker(n.endMarkerId,t.endLineNumber,t.endColumn),this._setRangeIsMultiLine(n.id,t.startLineNumber!==t.endLineNumber)}},t.prototype.changeTrackedRangeStickiness=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.changeTrackedRangeStickiness: Model is disposed");if(this._ranges.hasOwnProperty(e)){var n=this._ranges[e];this._changeMarkerStickiness(n.startMarkerId,this._shouldStartMarkerSticksToPreviousCharacter(t)),this._changeMarkerStickiness(n.endMarkerId,this._shouldEndMarkerSticksToPreviousCharacter(t))}},t.prototype.isValidTrackedRange=function(e){return this._isDisposed||!this._ranges?!1:this._ranges.hasOwnProperty(e)},t.prototype.removeTrackedRange=function(e){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.removeTrackedRange: Model is disposed");if(this._ranges.hasOwnProperty(e)){var t=this._ranges[e];this._removeMarker(t.startMarkerId),this._removeMarker(t.endMarkerId),this._setRangeIsMultiLine(t.id,!1),delete this._ranges[t.id],delete this._markerIdToRangeId[t.startMarkerId],delete this._markerIdToRangeId[t.endMarkerId]}},t.prototype.removeTrackedRanges=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n];if(this._ranges.hasOwnProperty(r)){var o=this._ranges[r];t.push(o.startMarkerId),t.push(o.endMarkerId),this._setRangeIsMultiLine(o.id,!1),delete this._ranges[o.id],delete this._markerIdToRangeId[o.startMarkerId],delete this._markerIdToRangeId[o.endMarkerId]}}t.length>0&&this._removeMarkers(t)},t.prototype._newEditorRange=function(e,t){return t.isBefore(e)?new n.Range(e.lineNumber,e.column,e.lineNumber,e.column):new n.Range(e.lineNumber,e.column,t.lineNumber,t.column)},t.prototype.getTrackedRange=function(e){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.getTrackedRange: Model is disposed");var t=this._ranges[e],n=this._getMarker(t.startMarkerId),i=this._getMarker(t.endMarkerId);return this._newEditorRange(n,i)},t.prototype._getMultiLineTrackedRanges=function(e,t){var n,i,r,o,s=[];for(n in this._multiLineTrackedRanges)if(this._multiLineTrackedRanges.hasOwnProperty(n)){if(i=this._ranges[n],r=this._getMarker(i.startMarkerId),r.lineNumber>t)continue;if(o=this._getMarker(i.endMarkerId),o.lineNumber<e)continue;s.push({id:i.id,range:this._newEditorRange(r,o)})}return s},t.prototype.getLinesTrackedRanges=function(e,t){if(this._isDisposed)throw new Error("TextModelWithTrackedRanges.getLinesTrackedRanges: Model is disposed");var n,i,r,o,s,a,c,u,l=this._getMultiLineTrackedRanges(e,t),d={};for(o=0,s=l.length;s>o;o++)d[l[o].id]=!0;for(a=e;t>=a;a++)for(n=this._getLineMarkers(a),o=0,s=n.length;s>o;o++)i=n[o],this._markerIdToRangeId.hasOwnProperty(i.id)&&(r=this._markerIdToRangeId[i.id],d.hasOwnProperty(r)||(c=this._getMarker(this._ranges[r].startMarkerId),u=this._getMarker(this._ranges[r].endMarkerId),l.push({id:r,range:this._newEditorRange(c,u)}),d[r]=!0));return l},t.prototype._onChangedMarkers=function(e){var t,n,i,r,o,s,a={};for(o=0,s=e.length;s>o;o++)r=e[o],this._markerIdToRangeId.hasOwnProperty(r.id)&&(i=this._markerIdToRangeId[r.id],n=this._ranges[i],a.hasOwnProperty(n.id)?t=a[n.id]:(t={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0},a[n.id]=t),r.id===n.startMarkerId?(t.startLineNumber=r.oldLineNumber,t.startColumn=r.oldColumn):(t.endLineNumber=r.oldLineNumber,t.endColumn=r.oldColumn),this._setRangeIsMultiLine(n.id,this._getMarker(n.startMarkerId).lineNumber!==this._getMarker(n.endMarkerId).lineNumber));return a},t}(i.TextModelWithMarkers);t.TextModelWithTrackedRanges=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/textModelWithDecorations",["require","exports","vs/base/common/strings","vs/editor/common/model/textModelWithTrackedRanges","vs/editor/common/editorCommon","vs/base/common/errors","vs/editor/common/core/idGenerator","vs/editor/common/core/range"],function(e,t,n,i,r,o,s,a){function c(e){return e.replace(/[^a-z0-9\-]/gi," ")}function u(e){return new m(e)}function l(e,t){return void 0===t&&(t=null),new g(e,t)}var d=function(){function e(){this.changedMarkers={},this.oldDecorationRange={},this.oldDecorationOptions={},this.newOrChangedDecorations={},this.removedDecorations={}}return e.prototype.addNewDecoration=function(e){this.newOrChangedDecorations[e]=!0},e.prototype.addRemovedDecoration=function(e,t,n,i){this.newOrChangedDecorations.hasOwnProperty(e)&&delete this.newOrChangedDecorations[e],this.oldDecorationRange.hasOwnProperty(e)||(this.oldDecorationRange[e]=n),this.oldDecorationOptions.hasOwnProperty(e)||(this.oldDecorationOptions[e]=i),this.removedDecorations[e]=!0},e.prototype.addMovedDecoration=function(e,t){this.oldDecorationRange.hasOwnProperty(e)||(this.oldDecorationRange[e]=t),this.newOrChangedDecorations[e]=!0},e.prototype.addUpdatedDecoration=function(e,t){this.oldDecorationOptions.hasOwnProperty(e)||(this.oldDecorationOptions[e]=t),this.newOrChangedDecorations[e]=!0},e}();t.DeferredEventsBuilder=d;var h=0,p=function(e){function t(t,n,i){t.push(r.EventType.ModelDecorationsChanged),e.call(this,t,n,i),this._decorationIdGenerator=new s.IdGenerator(++h+";"),this.decorations={},this.rangeIdToDecorationId={},this._currentDeferredEvents=null}return __extends(t,e),t.prototype.dispose=function(){this.decorations=null,this.rangeIdToDecorationId=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this.decorations={},this.rangeIdToDecorationId={}},t.prototype.changeDecorations=function(e,t){var n=this;if(void 0===t&&(t=0),this._isDisposed)throw new Error("TextModelWithDecorations.changeDecorations: Model is disposed");return this._withDeferredEvents(function(i){var r={addDecoration:function(e,r){return n._addDecorationImpl(i,t,n.validateRange(e),u(r))},changeDecoration:function(e,t){n._changeDecorationImpl(i,e,n.validateRange(t))},changeDecorationOptions:function(e,t){n._changeDecorationOptionsImpl(i,e,u(t))},removeDecoration:function(e){n._removeDecorationImpl(i,e)},deltaDecorations:function(e,r){return n._deltaDecorationsImpl(i,t,e,n._normalizeDeltaDecorations(r))}},s=null;try{s=e(r)}catch(a){o.onUnexpectedError(a)}return r.addDecoration=null,r.changeDecoration=null,r.removeDecoration=null,r.deltaDecorations=null,s})},t.prototype.deltaDecorations=function(e,t,n){if(void 0===n&&(n=0),this._isDisposed)throw new Error("TextModelWithDecorations.deltaDecorations: Model is disposed");return e||(e=[]),this.changeDecorations(function(n){return n.deltaDecorations(e,t)},n)},t.prototype.removeAllDecorationsWithOwnerId=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.removeAllDecorationsWithOwnerId: Model is disposed");var t,n,i=[];for(t in this.decorations)this.decorations.hasOwnProperty(t)&&(n=this.decorations[t],n.ownerId===e&&i.push(n.id));this._removeDecorationsImpl(null,i)},t.prototype.getDecorationOptions=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationOptions: Model is disposed");return this.decorations.hasOwnProperty(e)?this.decorations[e].options:null},t.prototype.getDecorationRange=function(e){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationRange: Model is disposed");if(this.decorations.hasOwnProperty(e)){var t=this.decorations[e];return this.getTrackedRange(t.rangeId)}return null},t.prototype.getLineDecorations=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getLineDecorations: Model is disposed");return 1>e||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)},t.prototype._getDecorationsInRange=function(e,t,n,i,o,s){var a,c,u,l,d=[],h=this.getLinesTrackedRanges(e,n);for(c=0,l=h.length;l>c;c++)if(u=h[c],this.rangeIdToDecorationId.hasOwnProperty(u.id)){if(a=this.decorations[this.rangeIdToDecorationId[u.id]],o&&a.ownerId&&a.ownerId!==o)continue;if(s&&(a.options.className===r.ClassName.EditorErrorDecoration||a.options.className===r.ClassName.EditorWarningDecoration))continue;if(u.range.startLineNumber===e&&u.range.endColumn<t)continue;if(u.range.endLineNumber===n&&u.range.startColumn>i)continue;d.push({id:a.id,ownerId:a.ownerId,range:u.range,options:a.options})}return d},t.prototype.getLinesDecorations=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getLinesDecorations: Model is disposed");var r=this.getLineCount();return e=Math.min(r,Math.max(1,e)),t=Math.min(r,Math.max(1,t)),this._getDecorationsInRange(e,1,t,Number.MAX_VALUE,n,i)},t.prototype.getDecorationsInRange=function(e,t,n){if(this._isDisposed)throw new Error("TextModelWithDecorations.getDecorationsInRange: Model is disposed");var i=this.validateRange(e);return this._getDecorationsInRange(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn,t,n)},t.prototype.getAllDecorations=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!1),this._isDisposed)throw new Error("TextModelWithDecorations.getAllDecorations: Model is disposed");
var n,i,o=[];for(n in this.decorations)if(this.decorations.hasOwnProperty(n)){if(i=this.decorations[n],e&&i.ownerId&&i.ownerId!==e)continue;if(t&&(i.options.className===r.ClassName.EditorErrorDecoration||i.options.className===r.ClassName.EditorWarningDecoration))continue;o.push({id:i.id,ownerId:i.ownerId,range:this.getTrackedRange(i.rangeId),options:i.options})}return o},t.prototype._withDeferredEvents=function(e){var t=this;return this.deferredEmit(function(){var n=t._currentDeferredEvents?!1:!0;n&&(t._currentDeferredEvents=new d);try{var i=e(t._currentDeferredEvents);n&&t._handleCollectedEvents(t._currentDeferredEvents)}finally{n&&(t._currentDeferredEvents=null)}return i})},t.prototype._handleCollectedEvents=function(e){var t=this._getMarkersInMap(e.changedMarkers),n=this._onChangedMarkers(t);this._onChangedRanges(e,n),this._handleCollectedDecorationsEvents(e);for(var i=0,r=t.length;r>i;i++)t[i].oldLineNumber=0,t[i].oldColumn=0},t.prototype._onChangedRanges=function(e,t){var n,i;for(n in t)t.hasOwnProperty(n)&&this.rangeIdToDecorationId.hasOwnProperty(n)&&(i=this.rangeIdToDecorationId[n],e.addMovedDecoration(i,t[n]))},t.prototype._handleCollectedDecorationsEvents=function(e){var t,n,i,o=[],s=[],a=[];for(t in e.newOrChangedDecorations)e.newOrChangedDecorations.hasOwnProperty(t)&&(a.push(t),n=this._getDecorationData(t),n.isForValidation=n.options.className===r.ClassName.EditorErrorDecoration||n.options.className===r.ClassName.EditorWarningDecoration,o.push(n),e.oldDecorationRange.hasOwnProperty(t)&&(i=e.oldDecorationRange[t],i.startLineNumber=i.startLineNumber||n.range.startLineNumber,i.startColumn=i.startColumn||n.range.startColumn,i.endLineNumber=i.endLineNumber||n.range.endLineNumber,i.endColumn=i.endColumn||n.range.endColumn));for(t in e.removedDecorations)e.removedDecorations.hasOwnProperty(t)&&(a.push(t),s.push(t));if(a.length>0){var c={ids:a,addedOrChangedDecorations:o,removedDecorations:s,oldOptions:e.oldDecorationOptions,oldRanges:e.oldDecorationRange};this.emitModelDecorationsChangedEvent(c)}},t.prototype._getDecorationData=function(e){var t=this.decorations[e];return{id:t.id,ownerId:t.ownerId,range:this.getTrackedRange(t.rangeId),isForValidation:!1,options:t.options}},t.prototype.emitModelDecorationsChangedEvent=function(e){this._isDisposing||this.emit(r.EventType.ModelDecorationsChanged,e)},t.prototype._normalizeDeltaDecorations=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n];t.push(new v(n,this.validateRange(r.range),u(r.options)))}return t},t.prototype._addDecorationImpl=function(e,t,n,i){var r=this.addTrackedRange(n,i.stickiness),o=new f(this._decorationIdGenerator.generate(),t,r,i);return this.decorations[o.id]=o,this.rangeIdToDecorationId[r]=o.id,e.addNewDecoration(o.id),o.id},t.prototype._addDecorationsImpl=function(e,t,n){for(var i=this._addTrackedRanges(n.map(function(e){return e.range}),n.map(function(e){return e.options.stickiness})),r=[],o=0,s=n.length;s>o;o++){var a=i[o],c=new f(this._decorationIdGenerator.generate(),t,a,n[o].options);this.decorations[c.id]=c,this.rangeIdToDecorationId[a]=c.id,e.addNewDecoration(c.id),r.push(c.id)}return r},t.prototype._changeDecorationImpl=function(e,t,n){if(this.decorations.hasOwnProperty(t)){var i=this.decorations[t],r=this.getTrackedRange(i.rangeId);this.changeTrackedRange(i.rangeId,n),e.addMovedDecoration(t,r)}},t.prototype._changeDecorationOptionsImpl=function(e,t,n){if(this.decorations.hasOwnProperty(t)){var i=this.decorations[t],r=i.options;r.stickiness!==n.stickiness&&this.changeTrackedRangeStickiness(i.rangeId,n.stickiness),i.options=n,e.addUpdatedDecoration(t,r)}},t.prototype._removeDecorationImpl=function(e,t){if(this.decorations.hasOwnProperty(t)){var n=this.decorations[t],i=null;e&&(i=this.getTrackedRange(n.rangeId)),this.removeTrackedRange(n.rangeId),delete this.rangeIdToDecorationId[n.rangeId],delete this.decorations[t],e&&e.addRemovedDecoration(t,n.ownerId,i,n.options)}},t.prototype._removeDecorationsImpl=function(e,t){for(var n=[],i=0,r=t.length;r>i;i++){var o=t[i];if(this.decorations.hasOwnProperty(o)){var s=this.decorations[o];if(e){var a=this.getTrackedRange(s.rangeId);e.addRemovedDecoration(o,s.ownerId,a,s.options)}n.push(s.rangeId),delete this.rangeIdToDecorationId[s.rangeId],delete this.decorations[o]}}n.length>0&&this.removeTrackedRanges(n)},t.prototype._resolveOldDecorations=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n];if(this.decorations.hasOwnProperty(r)){var o=this.decorations[r];t.push({id:r,range:this.getTrackedRange(o.rangeId),options:o.options})}}return t},t.prototype._deltaDecorationsImpl=function(e,t,n,i){if(0===n.length)return this._addDecorationsImpl(e,t,i);if(0===i.length)return this._removeDecorationsImpl(e,n),[];var r=this._resolveOldDecorations(n);r.sort(function(e,t){return a.Range.compareRangesUsingStarts(e.range,t.range)}),i.sort(function(e,t){return a.Range.compareRangesUsingStarts(e.range,t.range)});for(var o=[],s=0,c=r.length,u=0,l=i.length,d=[],h=[];c>s&&l>u;){var p=r[s],f=i[u],m=a.Range.compareRangesUsingStarts(p.range,f.range);0>m?(h.push(p.id),s++):m>0?(d.push(f),u++):p.options.equals(f.options)?(o[f.index]=p.id,s++,u++):(h.push(p.id),s++)}for(;c>s;)h.push(r[s].id),s++;for(;l>u;)d.push(i[u]),u++;if(h.length>0&&this._removeDecorationsImpl(e,h),d.length>0)for(var v=this._addDecorationsImpl(e,t,d),g=0,y=d.length;y>g;g++)o[d[g].index]=v[g];return o},t}(i.TextModelWithTrackedRanges);t.TextModelWithDecorations=p;var f=function(){function e(e,t,n,i){this.id=e,this.ownerId=t,this.rangeId=n,this.options=i}return e}(),m=function(){function e(e){this.stickiness=e.stickiness||r.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,this.className=c(e.className||n.empty),this.hoverMessage=e.hoverMessage||n.empty,this.htmlMessage=e.htmlMessage||[],this.isWholeLine=e.isWholeLine||!1,this.overviewRuler=l(e.overviewRuler,e.showInOverviewRuler),this.glyphMarginClassName=c(e.glyphMarginClassName||n.empty),this.linesDecorationsClassName=c(e.linesDecorationsClassName||n.empty),this.inlineClassName=c(e.inlineClassName||n.empty)}return e._htmlContentEquals=function(t,n){return t.formattedText===n.formattedText&&t.text===n.text&&t.className===n.className&&t.style===n.style&&t.customStyle===n.customStyle&&t.tagName===n.tagName&&t.isText===n.isText&&e._htmlContentArrEquals(t.children,n.children)},e._htmlContentArrEquals=function(t,n){if(!t)return!n;if(!n)return!1;var i=t.length,r=n.length;if(i!==r)return!1;for(var o=0;i>o;o++)if(!e._htmlContentEquals(t[o],n[o]))return!1;return!0},e._overviewRulerEquals=function(e,t){return e.color===t.color&&e.position===t.position&&e.darkColor===t.darkColor},e.prototype.equals=function(t){return this.stickiness===t.stickiness&&this.className===t.className&&this.hoverMessage===t.hoverMessage&&this.isWholeLine===t.isWholeLine&&this.showInOverviewRuler===t.showInOverviewRuler&&this.glyphMarginClassName===t.glyphMarginClassName&&this.linesDecorationsClassName===t.linesDecorationsClassName&&this.inlineClassName===t.inlineClassName&&e._htmlContentArrEquals(this.htmlMessage,t.htmlMessage)&&e._overviewRulerEquals(this.overviewRuler,t.overviewRuler)},e}(),v=function(){function e(e,t,n){this.index=e,this.range=t,this.options=n}return e}(),g=function(){function e(e,t){this.color=n.empty,this.darkColor=n.empty,this.position=r.OverviewRulerLane.Center,t&&(this.color=t),e&&e.color&&(this.color=e.color),e&&e.darkColor&&(this.darkColor=e.darkColor),e&&e.hasOwnProperty("position")&&(this.position=e.position)}return e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/editableTextModel",["require","exports","vs/editor/common/core/range","vs/editor/common/model/editStack","vs/editor/common/model/modelLine","vs/editor/common/model/textModelWithDecorations","vs/editor/common/editorCommon"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,r){t.push(s.EventType.ModelContentChanged),t.push(s.EventType.ModelContentChanged2),e.call(this,t,n,r),this._commandManager=new i.EditStack(this),this._isUndoing=!1,this._isRedoing=!1,this._hasEditableRange=!1,this._editableRangeId=null}return __extends(t,e),t.prototype.dispose=function(){this._commandManager=null,e.prototype.dispose.call(this)},t.prototype._resetValue=function(t,n){e.prototype._resetValue.call(this,t,n),this._commandManager=new i.EditStack(this),this._hasEditableRange=!1,this._editableRangeId=null},t.prototype.pushStackElement=function(){if(this._isDisposed)throw new Error("EditableTextModel.pushStackElement: Model is disposed");this._commandManager.pushStackElement()},t.prototype.pushEditOperations=function(e,t,n){if(this._isDisposed)throw new Error("EditableTextModel.pushEditOperations: Model is disposed");return this._commandManager.pushEditOperation(e,t,n)},t.prototype._reduceOperations=function(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]},t.prototype._toSingleEditOperation=function(e){for(var t=!1,i=e[0].range,r=e[e.length-1].range,o=new n.Range(i.startLineNumber,i.startColumn,r.endLineNumber,r.endColumn),s=i.startLineNumber,a=i.startColumn,c=[],u=0,l=e.length;l>u;u++){var d=e[u],h=d.range;t=t||d.forceMoveMarkers;for(var p=s;p<h.startLineNumber;p++)p===s?c.push(this._lines[p-1].text.substring(a-1)):(c.push("\n"),c.push(this._lines[p-1].text));if(h.startLineNumber===s?c.push(this._lines[h.startLineNumber-1].text.substring(a-1,h.startColumn-1)):(c.push("\n"),c.push(this._lines[h.startLineNumber-1].text.substring(0,h.startColumn-1))),d.lines)for(var f=0,m=d.lines.length;m>f;f++)0!==f&&c.push("\n"),c.push(d.lines[f]);s=d.range.endLineNumber,a=d.range.endColumn}return{identifier:e[0].identifier,range:o,lines:c.join("").split("\n"),forceMoveMarkers:t}},t.prototype.applyEdits=function(e){for(var i=[],r=0;r<e.length;r++){var o=e[r];i[r]={identifier:o.identifier,range:this.validateRange(o.range),lines:o.text?o.text.split(/\r\n|\r|\n/):null,forceMoveMarkers:o.forceMoveMarkers}}i.sort(function(e,t){return n.Range.compareRangesUsingEnds(e.range,t.range)});for(var r=i.length-2;r>=0;r--)if(i[r+1].range.getStartPosition().isBeforeOrEqual(i[r].range.getEndPosition()))throw new Error("Overlapping ranges are not allowed!");i=this._reduceOperations(i);var s=this.getEditableRange(),a=s.getStartPosition(),c=s.getEndPosition();for(r=0;r<i.length;r++){var u=i[r].range;if(!a.isBeforeOrEqual(u.getStartPosition())||!u.getEndPosition().isBeforeOrEqual(c))throw new Error("Editing outside of editable range not allowed!")}for(var l=t._toDeltaOperations(i),d=t._getInverseEditRanges(l),h=[],r=0;r<i.length;r++)h[r]={identifier:i[r].identifier,range:d[r],text:this.getValueInRange(i[r].range),forceMoveMarkers:i[r].forceMoveMarkers};return this._applyEdits(l),h},t._toDeltaOperation=function(e,t){var n=t.range.startLineNumber-(e?e.range.endLineNumber:0),i=t.range.startColumn-(0===n?e.range.endColumn:0),r=t.range.endLineNumber-(e?e.range.endLineNumber:0),o=t.range.endColumn-(0===r?e.range.endColumn:0);return{original:t,isNoOp:t.range.startLineNumber===t.range.endLineNumber&&t.range.startColumn===t.range.endColumn&&(!t.lines||0===t.lines.length),deltaStartLineNumber:n,deltaStartColumn:i,deltaEndLineNumber:r,deltaEndColumn:o}},t._getInverseEditRanges=function(e){for(var t=0,i=0,r=[],o=0,s=e.length;s>o;o++){var a,c=e[o],u=c.deltaStartLineNumber+t,l=c.deltaStartColumn+(0===c.deltaStartLineNumber?i:0);a=c.original.lines&&c.original.lines.length>0?1===c.original.lines.length?new n.Range(u,l,u,l+c.original.lines[0].length):new n.Range(u,l,u+c.original.lines.length-1,c.original.lines[c.original.lines.length-1].length+1):new n.Range(u,l,u,l),t=a.endLineNumber,i=a.endColumn,r.push(a)}return r},t.prototype._generateSequentialEdits=function(e){for(var t=[],i=0,r=0,o=0,s=e.length;s>o;o++){var a=e[o],c=a.deltaStartLineNumber+i,u=a.deltaStartColumn+(0===a.deltaStartLineNumber?r:0),l=a.deltaEndLineNumber+i,d=a.deltaEndColumn+(0===a.deltaEndLineNumber?r:0),h=new n.Range(c,u,l,d),p=this.getValueLengthInRange(h);t.push({range:h,rangeLength:p,text:a.original.lines?a.original.lines.join(this.getEOL()):""}),a.original.lines&&a.original.lines.length>0?1===a.original.lines.length?(i=c,r=u+a.original.lines[0].length):(i=c+a.original.lines.length-1,r=a.original.lines[a.original.lines.length-1].length+1):(i=c,r=u)}return t},t.prototype._applyEdits=function(e){var t=this,n=this._generateSequentialEdits(e);this._withDeferredEvents(function(i){for(var o=0,s=0,a=0,c=0,u=[],l=0,d=function(e,n){if(0!==n)for(var r=c+1;e>=r;r++)t._lines[r-1].updateLineNumber(i.changedMarkers,r);c=e},h=function(e,n,r,o,s){e!==l&&(u.length>0&&(t._applyLineEdits(i,l,u),u=[]),l=e),(n!==r||0!==o.length)&&u.push({startColumn:n,endColumn:r,text:o,forceMoveMarkers:s})},p=function(){var e=0;return u.length>0&&(e=t._applyLineEdits(i,l,u),u=[]),l=0,e},f=t.getVersionId(),m=0,v=e.length-1;v>=0;v--)if(!e[v].isNoOp){m=v;break}for(var v=0,g=e.length;g>v;v++){var y=e[v],_=y.deltaStartLineNumber+o,b=y.deltaStartColumn+(0===y.deltaStartLineNumber?s:0),E=y.deltaEndLineNumber+o,S=y.deltaEndColumn+(0===y.deltaEndLineNumber?s:0);if(o=_+(y.original.lines?y.original.lines.length-1:0),s=S,!y.isNoOp){for(var w=E-_,C=y.original.lines?y.original.lines.length-1:0,T=Math.min(w,C),I=0,k=0,x=0;T>=x;x++){var A=_+x,R=A===_?b:1,D=A===E?S:t.getLineMaxColumn(A),L=y.original.lines?y.original.lines[x]:"";h(A,R,D,L,y.original.forceMoveMarkers),x===T&&(I=D)}if(w>T){k=p();var M=I+k;s=M;var O=t._lines[E-1].split(i.changedMarkers,S,!1);t._invalidateLine(_+T-1);var P=_+T,N=w-T;d(_+T,a),a-=N;for(var F=[],x=0;N>x;x++){var W=P+x;F=F.concat(t._lines[W].deleteLine(i.changedMarkers,M,W+1))}t._lines.splice(P,N),t._lines[P-1].append(i.changedMarkers,O),t._lines[P-1].addMarkers(F),t.emitModelContentChangedLineChangedEvent(P),t.emitModelContentChangedLinesDeletedEvent(P+1,P+N)}if(C>T){k=p();var M=I+k,H=t._lines[_+T-1].split(i.changedMarkers,M,y.original.forceMoveMarkers);t.emitModelContentChangedLineChangedEvent(_+T),t._invalidateLine(_+T-1),s=y.original.lines[y.original.lines.length-1].length+1,d(_+T,a),a+=C-T;for(var V=[],x=T+1;C>=x;x++){var A=_+x;t._lines.splice(A-1,0,new r.ModelLine(A,y.original.lines[x])),V.push(y.original.lines[x])}V[V.length-1]+=H.text,t._lines[_+C-1].append(i.changedMarkers,H),t.emitModelContentChangedLinesInsertedEvent(_+T+1,_+C,V.join("\n"))}v===m&&p();var B=n[v];t.getVersionId()===f&&t._increaseVersionId(),f=t.getVersionId(),t._emitContentChanged2(B.range.startLineNumber,B.range.startColumn,B.range.endLineNumber,B.range.endColumn,B.rangeLength,B.text,t._isUndoing,t._isRedoing)}}d(t._lines.length,a)})},t.prototype._assertLineNumbersOK=function(){for(var e=0,t=0,n=this._lines.length;n>t;t++){var i=this._lines[t],r=t+1;if(i.lineNumber!==r)throw new Error("Invalid lineNumber at line: "+r+"; text is: "+this.getValue());for(var o=i.getMarkers(),s=0,a=o.length;a>s;s++){e++;var c=o[s].id,u=this._markerIdToMarker[c];if(u.line!==i)throw new Error("Misplaced marker with id "+c)}}var l=Object.keys(this._markerIdToMarker).length;if(l!==e)throw new Error("There are misplaced markers!")},t.prototype._applyLineEdits=function(e,t,n){this._invalidateLine(t-1);var i=this._lines[t-1].applyEdits(e.changedMarkers,n);return this.emitModelContentChangedLineChangedEvent(t),i},t._toDeltaOperations=function(e){for(var n=[],i=0;i<e.length;i++)n[i]=t._toDeltaOperation(i>0?e[i-1]:null,e[i]);return n},t.prototype.undo=function(){var e=this;if(this._isDisposed)throw new Error("EditableTextModel.undo: Model is disposed");return this._withDeferredEvents(function(){e._isUndoing=!0;var t=e._commandManager.undo();return e._isUndoing=!1,t?(e._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null})},t.prototype.redo=function(){var e=this;if(this._isDisposed)throw new Error("EditableTextModel.redo: Model is disposed");return this._withDeferredEvents(function(){e._isRedoing=!0;var t=e._commandManager.redo();return e._isRedoing=!1,t?(e._overwriteAlternativeVersionId(t.recordedVersionId),t.selections):null})},t.prototype.setEditableRange=function(e){if(this._isDisposed)throw new Error("EditableTextModel.setEditableRange: Model is disposed");this._commandManager.clear(),this._hasEditableRange&&(this.removeTrackedRange(this._editableRangeId),this._editableRangeId=null,this._hasEditableRange=!1),e&&(this._hasEditableRange=!0,this._editableRangeId=this.addTrackedRange(e,s.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges))},t.prototype.hasEditableRange=function(){if(this._isDisposed)throw new Error("EditableTextModel.hasEditableRange: Model is disposed");return this._hasEditableRange},t.prototype.getEditableRange=function(){if(this._isDisposed)throw new Error("EditableTextModel.getEditableRange: Model is disposed");return this._hasEditableRange?this.getTrackedRange(this._editableRangeId):this.getFullModelRange()},t.prototype._updateLineNumbers=function(e,t){var n,i,r=this._lines;for(n=t-1,i=r.length;i>n;n++)r[n].updateLineNumber(e,n+1)},t.prototype.emitModelContentChangedLineChangedEvent=function(e){this._increaseVersionId();var t={changeType:s.EventType.ModelContentChangedLineChanged,lineNumber:e,detail:this._lines[e-1].text,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing};this._isDisposing||this.emit(s.EventType.ModelContentChanged,t)},t.prototype.emitModelContentChangedLinesDeletedEvent=function(e,t){this._increaseVersionId();var n={changeType:s.EventType.ModelContentChangedLinesDeleted,fromLineNumber:e,toLineNumber:t,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing};this._isDisposing||this.emit(s.EventType.ModelContentChanged,n)},t.prototype.emitModelContentChangedLinesInsertedEvent=function(e,t,n){this._increaseVersionId();var i={changeType:s.EventType.ModelContentChangedLinesInserted,fromLineNumber:e,toLineNumber:t,detail:n,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing};this._isDisposing||this.emit(s.EventType.ModelContentChanged,i)},t}(o.TextModelWithDecorations);t.EditableTextModel=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/model/model",["require","exports","vs/editor/common/model/textModel","vs/editor/common/model/editableTextModel","vs/editor/common/editorCommon","vs/base/common/uri","vs/base/common/objects"],function(e,t,n,i,r,o,s){var a=0,c={},u=function(e){function t(t,i,s){if(void 0===s&&(s=null),e.call(this,[r.EventType.ModelPropertiesChanged,r.EventType.ModelDispose],n.TextModel.toRawText(t),i),a++,this.id="$model"+a,"undefined"==typeof s||null===s?this._associatedResource=o["default"].parse("inmemory://model/"+a):this._associatedResource=s,c[String(this._associatedResource)])throw new Error("Cannot instantiate a second Model with the same URI!");this._extraProperties={},this._attachedEditorCount=0,c[String(this._associatedResource)]=!0}return __extends(t,e),t.prototype.getModeId=function(){return this.getMode().getId()},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._isDisposing=!0,delete c[String(this._associatedResource)],this.emit(r.EventType.ModelDispose),e.prototype.dispose.call(this),this._isDisposing=!1},t.prototype.onBeforeAttached=function(){if(this._isDisposed)throw new Error("Model.onBeforeAttached: Model is disposed");this._attachedEditorCount++,this._warmUpTokens()},t.prototype.onBeforeDetached=function(){if(this._isDisposed)throw new Error("Model.onBeforeDetached: Model is disposed");this._attachedEditorCount--},t.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},t.prototype.getAssociatedResource=function(){if(this._isDisposed)throw new Error("Model.getAssociatedResource: Model is disposed");return this._associatedResource},t.prototype.setProperty=function(e,t){if(this._isDisposed)throw new Error("Model.setProperty: Model is disposed");this._extraProperties[e]=t,this.emitModelPropertiesChangedEvent()},t.prototype.getProperty=function(e){if(this._isDisposed)throw new Error("Model.getProperty: Model is disposed");return this._extraProperties.hasOwnProperty(e)?this._extraProperties[e]:null},t.prototype.getProperties=function(){if(this._isDisposed)throw new Error("Model.getProperties: Model is disposed");return s.clone(this._extraProperties)},t.prototype.emitModelPropertiesChangedEvent=function(){var e={properties:this._extraProperties};this._isDisposing||this.emit(r.EventType.ModelPropertiesChanged,e)},t}(i.EditableTextModel);t.Model=u}),define("vs/nls!vs/editor/common/modes/languageExtensionPoint",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/modes/languageExtensionPoint",t)}),define("vs/nls!vs/editor/common/services/bulkEdit",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/common/services/bulkEdit",t)}),define("vs/nls!vs/editor/contrib/clipboard/browser/clipboard",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/clipboard/browser/clipboard",t)}),define("vs/nls!vs/editor/contrib/comment/common/comment",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/comment/common/comment",t)}),define("vs/nls!vs/editor/contrib/contextmenu/browser/contextmenu",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/contextmenu/browser/contextmenu",t)}),define("vs/nls!vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/defineKeybinding/browser/defineKeybinding",t)}),define("vs/nls!vs/editor/contrib/find/browser/find",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/find/browser/find",t)}),define("vs/nls!vs/editor/contrib/find/browser/findWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/find/browser/findWidget",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/find/browser/findWidget",["require","exports","vs/nls!vs/editor/contrib/find/browser/findWidget","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/browser/dom","vs/base/browser/keyboardEvent","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/findinput/findInput","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/editor/contrib/find/common/findModel","vs/base/common/lifecycle","vs/base/common/keyCodes","vs/css!./findWidget"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=n.localize(0,null),m=n.localize(1,null),v=n.localize(2,null),g=n.localize(3,null),y=n.localize(4,null),_=n.localize(5,null),b=n.localize(6,null),E=n.localize(7,null),S=n.localize(8,null),w=n.localize(9,null),C=n.localize(10,null),T=function(e){function t(n,i,r,s){var a=this;e.call(this,[t._USER_INPUT_EVENT,t._USER_CLOSED_EVENT]),this._codeEditor=n,this._controller=i,this._contextViewProvider=r,this._keybindingService=s,this._isVisible=!1,this._isReplaceVisible=!1,this._isReplaceEnabled=!1,this._toDispose=[],this._model=null,this._modelListenersToDispose=[],this._buildDomNode(),this.focusTracker=o.trackFocus(this._domNode),this._codeEditor.addOverlayWidget(this),this.focusTracker.addFocusListener(function(){var e=a._codeEditor.getSelection();e.startLineNumber!==e.endLineNumber&&a._controller.enableSelectionFind()})}return __extends(t,e),t.prototype.dispose=function(){this.focusTracker.dispose(),this._removeModel(),this._findInput.destroy(),this._replaceInputBox.dispose(),this._toDispose=h.disposeAll(this._toDispose)},t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return this._isVisible?{preference:u.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER}:null},t.prototype.setSearchString=function(e){this._findInput.setValue(e),this._emitUserInputEvent(!1)},t.prototype._setState=function(e,t){this._findInput.setValue(e.searchString),this._findInput.setCaseSensitive(e.properties.matchCase),this._findInput.setWholeWords(e.properties.wholeWord),this._findInput.setRegex(e.properties.isRegex),this._toggleSelectionFind.checkbox.disabled=!t,this._toggleSelectionFind.checkbox.checked=t,this._replaceInputBox.value=e.replaceString,e.isReplaceRevealed?this._enableReplace(!1):this._disableReplace(!1),this._onFindValueChange()},t.prototype.getState=function(){var e={searchString:this._findInput.getValue(),replaceString:this._replaceInputBox.value,properties:{isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},isReplaceRevealed:this._isReplaceEnabled};return e},t.prototype.setModel=function(e){var t=this;this._removeModel(),e?(this._model=e,this._modelListenersToDispose.push(this._model.addStartEventListener(function(e){t._reveal(e.shouldAnimate),t._setState(e.state,e.selectionFindEnabled)})),this._modelListenersToDispose.push(this._model.addMatchesUpdatedEventListener(function(e){o.toggleClass(t._domNode,"no-results",""!==t._findInput.getValue()&&0===e.count)}))):this._hide(!1)},t.prototype.focusFindInput=function(){this._findInput.select(),this._findInput.focus()},t.prototype.focusReplaceInput=function(){this._replaceInputBox.select(),this._replaceInputBox.focus()},t.prototype._removeModel=function(){null!==this._model&&(this._modelListenersToDispose=h.disposeAll(this._modelListenersToDispose),this._model=null)},t.prototype._enableReplace=function(e){this._isReplaceEnabled=!0,this._codeEditor.getConfiguration().readOnly||this._isReplaceVisible||(this._replaceInputBox.enable(),this._isReplaceVisible=!0,o.addClass(this._domNode,"replaceToggled"),this._toggleReplaceBtn.toggleClass("collapse",!1),this._toggleReplaceBtn.toggleClass("expand",!0),this._toggleReplaceBtn.setExpanded(!0)),e&&this._emitUserInputEvent(!1)},t.prototype._disableReplace=function(e){this._isReplaceEnabled=!1,this._isReplaceVisible&&(this._replaceInputBox.disable(),o.removeClass(this._domNode,"replaceToggled"),this._toggleReplaceBtn.toggleClass("expand",!1),this._toggleReplaceBtn.toggleClass("collapse",!0),this._toggleReplaceBtn.setExpanded(!1),this._isReplaceVisible=!1),e&&this._emitUserInputEvent(!1)},t.prototype._onFindInputKeyDown=function(e){var t=this,n=!1;e.equals(p.CommonKeybindings.ENTER)?(this._codeEditor.getAction(d.NEXT_MATCH_FIND_ACTION_ID).run().done(null,i.onUnexpectedError),n=!0):e.equals(p.CommonKeybindings.SHIFT_ENTER)?(this._codeEditor.getAction(d.PREVIOUS_MATCH_FIND_ACTION_ID).run().done(null,i.onUnexpectedError),n=!0):e.equals(p.CommonKeybindings.TAB)?(this._isReplaceVisible?this._replaceInputBox.focus():this._findInput.focusOnCaseSensitive(),n=!0):e.equals(p.CommonKeybindings.CTRLCMD_DOWN_ARROW)&&(this._codeEditor.focus(),n=!0),n?e.preventDefault():setTimeout(function(){t._onFindValueChange(),t._emitUserInputEvent(!0)},10)},t.prototype._onReplaceInputKeyDown=function(e){var t=this,n=!1;e.equals(p.CommonKeybindings.ENTER)?(this._controller.replace(),n=!0):e.equals(p.CommonKeybindings.CTRLCMD_ENTER)?(this._controller.replaceAll(),n=!0):e.equals(p.CommonKeybindings.TAB)?(this._findInput.focusOnCaseSensitive(),n=!0):e.equals(p.CommonKeybindings.CTRLCMD_DOWN_ARROW)&&(this._codeEditor.focus(),n=!0),n?e.preventDefault():setTimeout(function(){t._emitUserInputEvent(!0)},10)},t.prototype._onFindValueChange=function(){var e=this._findInput.getValue().length>0;this._prevBtn.setEnabled(e),this._nextBtn.setEnabled(e),this._replaceBtn.setEnabled(e),this._replaceAllBtn.setEnabled(e)},t.prototype._keybindingLabelFor=function(e){var t=this._keybindingService.lookupKeybindings(e);return 0===t.length?"":" ("+this._keybindingService.getLabelFor(t[0])+")"},t.prototype._buildFindPart=function(){var e=this;this._findInput=new c.FindInput(null,this._contextViewProvider,{width:t.FIND_INPUT_AREA_WIDTH,label:f,placeholder:m,appendCaseSensitiveLabel:this._keybindingLabelFor(d.TOGGLE_CASE_SENSITIVE_COMMAND_ID),appendWholeWordsLabel:this._keybindingLabelFor(d.TOGGLE_WHOLE_WORD_COMMAND_ID),appendRegexLabel:this._keybindingLabelFor(d.TOGGLE_REGEX_COMMAND_ID),validation:function(t){if(0===t.length)return null;if(!e._findInput.getRegex())return null;try{return new RegExp(t),null}catch(n){return{content:n.message}}}}).on("keydown",function(t){e._onFindInputKeyDown(new s.StandardKeyboardEvent(t))}).on(c.FindInput.OPTION_CHANGE,function(){e._emitUserInputEvent(!0)}),this._findInput.disable(),this._prevBtn=new k(v+this._keybindingLabelFor(d.PREVIOUS_MATCH_FIND_ACTION_ID),"previous").onTrigger(function(){e._codeEditor.getAction(d.PREVIOUS_MATCH_FIND_ACTION_ID).run().done(null,i.onUnexpectedError)}),this._toDispose.push(this._prevBtn),this._nextBtn=new k(g+this._keybindingLabelFor(d.NEXT_MATCH_FIND_ACTION_ID),"next").onTrigger(function(){e._codeEditor.getAction(d.NEXT_MATCH_FIND_ACTION_ID).run().done(null,i.onUnexpectedError)}),this._toDispose.push(this._nextBtn);var n=document.createElement("div");return n.className="find-part",n.appendChild(this._findInput.domNode),n.appendChild(this._prevBtn.domNode),n.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=new I(n,y),this._toggleSelectionFind.disable(),this._toDispose.push(o.addStandardDisposableListener(this._toggleSelectionFind.checkbox,"change",function(t){e._toggleSelectionFind.checkbox.checked?e._controller.enableSelectionFind():(e._controller.disableSelectionFind(),e._updateToggleSelectionFindButton())})),this._toDispose.push(this._toggleSelectionFind),this._codeEditor.addListener(l.EventType.CursorSelectionChanged,function(){e._updateToggleSelectionFindButton()}),this._closeBtn=new k(_+this._keybindingLabelFor(d.CLOSE_FIND_WIDGET_COMMAND_ID),"close-fw").onTrigger(function(){e._hide(!0),e._emitClosedEvent()}).onKeyDown(function(t){e._isReplaceVisible&&(e._replaceBtn.focus(),t.preventDefault())}),this._toDispose.push(this._closeBtn),n.appendChild(this._closeBtn.domNode),n},t.prototype._updateToggleSelectionFindButton=function(){if(this._isVisible&&!this._toggleSelectionFind.checkbox.checked){var e=this._codeEditor.getSelection();e.startLineNumber===e.endLineNumber?this._toggleSelectionFind.disable():this._toggleSelectionFind.enable()}},t.prototype._buildReplacePart=function(){var e=this,n=document.createElement("div");n.className="replace-input",n.style.width=t.REPLACE_INPUT_AREA_WIDTH+"px",this._replaceInputBox=new a.InputBox(n,null,{ariaLabel:b,placeholder:E}),this._toDispose.push(o.addStandardDisposableListener(this._replaceInputBox.inputElement,"keydown",function(t){return e._onReplaceInputKeyDown(t)})),this._replaceInputBox.disable(),this._replaceBtn=new k(S,"replace").onTrigger(function(){e._controller.replace()}),this._toDispose.push(this._replaceBtn),this._replaceAllBtn=new k(w,"replace-all").onTrigger(function(){e._controller.replaceAll()}),this._toDispose.push(this._replaceAllBtn);var i=document.createElement("div");return i.className="replace-part",i.appendChild(n),i.appendChild(this._replaceBtn.domNode),i.appendChild(this._replaceAllBtn.domNode),i},t.prototype._buildDomNode=function(){var e=this,t=this._buildFindPart(),n=this._buildReplacePart();this._toggleReplaceBtn=new k(C,"toggle left").onTrigger(function(){e._isReplaceVisible?e._disableReplace(!0):e._enableReplace(!0)}),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._toDispose.push(this._toggleReplaceBtn),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","false"),this._codeEditor.getConfiguration().readOnly||o.addClass(this._domNode,"can-replace"),
this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n)},t.prototype._reveal=function(e){var t=this;this._isVisible||(this._findInput.enable(),this._isReplaceVisible&&this._replaceInputBox.enable(),this._toggleSelectionFind.enable(),this._closeBtn.setEnabled(!0),this._onFindValueChange(),this._isVisible=!0,window.setTimeout(function(){o.addClass(t._domNode,"visible"),e||(o.addClass(t._domNode,"noanimation"),window.setTimeout(function(){o.removeClass(t._domNode,"noanimation")},200))},0),this._codeEditor.layoutOverlayWidget(this))},t.prototype._hide=function(e){this._isVisible&&(this._findInput.disable(),this._replaceInputBox.disable(),this._toggleSelectionFind.disable(),this._closeBtn.setEnabled(!1),this._prevBtn.setEnabled(!1),this._nextBtn.setEnabled(!1),this._replaceBtn.setEnabled(!1),this._replaceAllBtn.setEnabled(!1),o.removeClass(this._domNode,"visible"),this._isVisible=!1,e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this))},t.prototype.addUserInputEventListener=function(e){return this.addListener2(t._USER_INPUT_EVENT,e)},t.prototype._emitUserInputEvent=function(e){var n={jumpToNextMatch:e};this.emit(t._USER_INPUT_EVENT,n)},t.prototype.addClosedEventListener=function(e){return this.addListener2(t._USER_CLOSED_EVENT,e)},t.prototype._emitClosedEvent=function(){this.emit(t._USER_CLOSED_EVENT)},t.prototype.toggleCaseSensitive=function(){this._findInput.setCaseSensitive(!this._findInput.getCaseSensitive()),this._emitUserInputEvent(!1)},t.prototype.toggleWholeWords=function(){this._findInput.setWholeWords(!this._findInput.getWholeWords()),this._emitUserInputEvent(!1)},t.prototype.toggleRegex=function(){this._findInput.setRegex(!this._findInput.getRegex()),this._emitUserInputEvent(!1)},t._USER_CLOSED_EVENT="close",t._USER_INPUT_EVENT="userInputEvent",t.ID="editor.contrib.findWidget",t.PART_WIDTH=275,t.FIND_INPUT_AREA_WIDTH=t.PART_WIDTH-54,t.REPLACE_INPUT_AREA_WIDTH=t.FIND_INPUT_AREA_WIDTH,t}(r.EventEmitter);t.FindWidget=T;var I=function(){function e(t,n){this._domNode=document.createElement("div"),this._domNode.className="monaco-checkbox",this._domNode.title=n,this._checkbox=document.createElement("input"),this._checkbox.type="checkbox",this._checkbox.className="checkbox",this._checkbox.id="checkbox-"+e.COUNTER++,this.label=document.createElement("label"),this.label.className="label",this.label.htmlFor=this._checkbox.id,this._domNode.appendChild(this._checkbox),this._domNode.appendChild(this.label),t.appendChild(this._domNode)}return Object.defineProperty(e.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkbox",{get:function(){return this._checkbox},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._checkbox.focus()},e.prototype.enable=function(){this._checkbox.removeAttribute("disabled")},e.prototype.disable=function(){this._checkbox.disabled=!0},e.prototype.dispose=function(){this._domNode=null,this._checkbox=null,this.label=null},e.COUNTER=0,e}();t.Checkbox=I;var k=function(){function e(e,t){var n=this;this._onTrigger=null,this._onKeyDown=null,this._domNode=document.createElement("div"),this._domNode.title=e,this._domNode.tabIndex=-1,this._domNode.className="button "+t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",e),this._toDispose=[],this._toDispose.push(o.addStandardDisposableListener(this._domNode,"click",function(e){n._invokeOnTrigger(),e.preventDefault()})),this._toDispose.push(o.addStandardDisposableListener(this._domNode,"keydown",function(e){return e.equals(p.CommonKeybindings.SPACE)||e.equals(p.CommonKeybindings.ENTER)?(n._invokeOnTrigger(),void e.preventDefault()):void n._invokeOnKeyDown(e)}))}return e.prototype.dispose=function(){this._toDispose=h.disposeAll(this._toDispose)},Object.defineProperty(e.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._domNode.focus()},e.prototype.setEnabled=function(e){o.toggleClass(this._domNode,"disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1},e.prototype.setExpanded=function(e){this._domNode.setAttribute("aria-expanded",String(e))},e.prototype.toggleClass=function(e,t){o.toggleClass(this._domNode,e,t)},e.prototype.onTrigger=function(e){return this._onTrigger=e,this},e.prototype.onKeyDown=function(e){return this._onKeyDown=e,this},e.prototype._invokeOnTrigger=function(){this._onTrigger&&this._onTrigger()},e.prototype._invokeOnKeyDown=function(e){this._onKeyDown&&this._onKeyDown(e)},e}()}),define("vs/nls!vs/editor/contrib/format/common/formatActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/format/common/formatActions",t)}),define("vs/nls!vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/goToDeclaration/browser/goToDeclaration",t)}),define("vs/nls!vs/editor/contrib/gotoError/browser/gotoError",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/gotoError/browser/gotoError",t)}),define("vs/nls!vs/editor/contrib/hover/browser/modesContentHover",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/hover/browser/modesContentHover",t)}),define("vs/nls!vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",t)}),define("vs/nls!vs/editor/contrib/linesOperations/common/linesOperations",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/linesOperations/common/linesOperations",t)}),define("vs/nls!vs/editor/contrib/links/browser/links",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/links/browser/links",t)}),define("vs/nls!vs/editor/contrib/multicursor/common/multicursor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/multicursor/common/multicursor",t)}),define("vs/nls!vs/editor/contrib/parameterHints/browser/parameterHints",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/parameterHints/browser/parameterHints",t)}),define("vs/nls!vs/editor/contrib/quickFix/browser/quickFix",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/quickFix/browser/quickFix",t)}),define("vs/nls!vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/quickFix/browser/quickFixSelectionWidget",["require","exports","vs/nls!vs/editor/contrib/quickFix/browser/quickFixSelectionWidget","vs/base/common/winjs.base","vs/base/common/errors","vs/base/browser/dom","vs/base/parts/tree/browser/treeImpl","vs/base/parts/tree/browser/treeDefaults","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/css!./quickFix"],function(e,t,n,i,r,o,s,a,c,u){function l(e){return e&&"object"==typeof e.command&&"string"==typeof e.command.title}function d(e,t){return 19}var h=o.emmet,p=function(){function e(e,t){this.parent=e,this.message=t}return e}();t.Message=p;var f=function(){function e(e){this.child=new p(this,e)}return e}();t.MessageRoot=f;var m=function(){function e(){this.root=null}return e.prototype.isRoot=function(e){return e instanceof f?!0:e instanceof p?!1:Array.isArray(e)?(this.root=e,!0):!1},e.prototype.getId=function(e,t){if(t instanceof f)return"messageroot";if(t instanceof p)return"message"+t.message;if(Array.isArray(t))return"root";if(l(t))return t.id;throw r.illegalArgument("element")},e.prototype.getParent=function(e,t){return t instanceof f?i.TPromise.as(null):t instanceof p?i.TPromise.as(t.parent):i.TPromise.as(this.isRoot(t)?null:this.root)},e.prototype.getChildren=function(e,t){return t instanceof f?i.TPromise.as([t.child]):t instanceof p?i.TPromise.as([]):i.TPromise.as(this.isRoot(t)?t:[])},e.prototype.hasChildren=function(e,t){return this.isRoot(t)},e}(),v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onLeftClick=function(e,t,n){return n.preventDefault(),n.stopPropagation(),t instanceof p||e.setSelection([t],{origin:"mouse"}),!0},t}(a.DefaultController),g=function(){function e(){}return e.prototype.getHeight=function(e,t){return d(e,t)},e.prototype.getTemplateId=function(e,t){return t instanceof p?"message":"default"},e.prototype.renderTemplate=function(e,t,n){if("message"===t){var i=o.append(n,h("span"));return i.style.opacity="0.7",i.style.paddingLeft="12px",{element:i}}var r={},s=o.append(n,h(".text"));r.main=o.append(s,h(".main"));var a=o.append(s,h(".docs"));return r.documentationLabel=o.append(a,h("span.docs-label")),r},e.prototype.renderElement=function(e,t,n,i){if("message"===n)return void(i.element.textContent=t.message);var r=t;i.main.textContent=r.command.title,i.documentationLabel.textContent=""},e.prototype.disposeTemplate=function(e,t,n){},e}(),y=function(){function e(t,n,i,o){var a=this;this.allowEditorOverflow=!0,this.editor=t,this._onShown=i,this._onHidden=o,this.shouldShowEmptyList=!0,this.isActive=!1,this.isLoading=!1,this.isAuto=!1,this.modelListenersToRemove=[],this.model=null,this.telemetryData=Object.create(null),this.telemetryService=n,this.listenersToRemove=[],this.domnode=h(".editor-widget.quickfix-widget.monaco-editor-background.no-icons"),this.domnode.style.width=e.WIDTH+"px",this.tree=new s.Tree(this.domnode,{dataSource:new m,renderer:new g,controller:new v},{twistiePixels:0,alwaysFocused:!0,verticalScrollMode:"visible",useShadows:!1}),this.listenersToRemove.push(this.tree.addListener("selection",function(e){if(e.selection&&e.selection.length>0){var t=e.selection[0];!l(t)||t instanceof f||t instanceof p||(a.telemetryData.selectedIndex=a.tree.getInput().indexOf(t),a.telemetryData.wasCancelled=!1,a.submitTelemetryData(),a.model.accept(t,a.range),a.editor.focus())}}));var c=null;this.listenersToRemove.push(this.tree.addListener("focus",function(e){var t=e.focus,n=e.payload;if(t!==c){var i=[];c&&i.push(c),t&&i.push(t),c=t,a.tree.refreshAll(i).done(function(){return a.updateWidgetHeight(),t?a.tree.reveal(t,n&&n.firstSuggestion?0:null):void 0},r.onUnexpectedError)}})),this.editor.addContentWidget(this),this.listenersToRemove.push(this.editor.addListener(u.EventType.CursorSelectionChanged,function(e){a.isActive&&a.editor.layoutContentWidget(a)})),this.hide()}return e.prototype.setModel=function(t){var n=this;this.releaseModel(),this.model=t;var i,s=null;this.modelListenersToRemove.push(this.model.addListener("loading",function(t){n.isActive||(s=n.telemetryService.start("QuickFixSelectionWidgetLoadingTime"),n.isLoading=!0,n.isAuto=!!t.auto,n.isAuto||(i=setTimeout(function(){o.removeClass(n.domnode,"empty"),n.tree.setInput(e.LOADING_MESSAGE).done(null,r.onUnexpectedError),n.updateWidgetHeight(),n.show()},50)),t.retrigger||(n.telemetryData={wasAutomaticallyTriggered:t.characterTriggered}))})),this.modelListenersToRemove.push(this.model.addListener("suggest",function(e){n.isLoading=!1,"undefined"!=typeof i&&(clearTimeout(i),i=void 0);for(var t=e.fixes,a=-1,c=t[0],u=-1,l=0,d=t.length;d>l;l++){var h=t[l],p=h.score;p>u&&(u=p,c=h,a=l)}o.removeClass(n.domnode,"empty"),n.tree.setInput(t).done(null,r.onUnexpectedError),n.tree.setFocus(c,{firstSuggestion:!0}),n.updateWidgetHeight(),n.range=e.range,n.show(),n.telemetryData=n.telemetryData||{},n.telemetryData.suggestionCount=t.length,n.telemetryData.suggestedIndex=a,s&&(s.data={reason:"results"},s.stop(),s=null)})),this.modelListenersToRemove.push(this.model.addListener("empty",function(t){var a=n.isLoading;n.isLoading=!1,"undefined"!=typeof i&&(clearTimeout(i),i=void 0),t.auto?n.hide():a?n.shouldShowEmptyList?(o.removeClass(n.domnode,"empty"),n.tree.setInput(e.NO_SUGGESTIONS_MESSAGE).done(null,r.onUnexpectedError),n.updateWidgetHeight(),n.show()):n.hide():o.addClass(n.domnode,"empty"),s&&(s.data={reason:"empty"},s.stop(),s=null)})),this.modelListenersToRemove.push(this.model.addListener("cancel",function(e){n.isLoading=!1,"undefined"!=typeof i&&(clearTimeout(i),i=void 0),e.retrigger||(n.hide(),n.telemetryData&&(n.telemetryData.selectedIndex=-1,n.telemetryData.wasCancelled=!0,n.submitTelemetryData())),s&&(s.data={reason:"cancel"},s.stop(),s=null)}))},e.prototype.selectNextPage=function(){return this.isLoading?!this.isAuto:this.isActive?(this.tree.focusNextPage(),!0):!1},e.prototype.selectNext=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return this.tree.focusNext(1),e===this.tree.getFocus()&&this.tree.focusFirst(),!0}return!1},e.prototype.selectPreviousPage=function(){return this.isLoading?!this.isAuto:this.isActive?(this.tree.focusPreviousPage(),!0):!1},e.prototype.selectPrevious=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return this.tree.focusPrevious(1),e===this.tree.getFocus()&&this.tree.focusLast(),!0}return!1},e.prototype.acceptSelectedSuggestion=function(){if(this.isLoading)return!this.isAuto;if(this.isActive){var e=this.tree.getFocus();return e?this.tree.setSelection([e]):this.model.cancelDialog(),!0}return!1},e.prototype.releaseModel=function(){for(var e;e=this.modelListenersToRemove.pop();)e();this.model=null},e.prototype.show=function(){this.isActive=!0,this.tree.layout(),this.editor.layoutContentWidget(this),this._onShown()},e.prototype.hide=function(){this._onHidden(),this.isActive=!1,this.editor.layoutContentWidget(this)},e.prototype.getPosition=function(){return this.isActive?{position:this.editor.getPosition(),preference:[c.ContentWidgetPositionPreference.BELOW,c.ContentWidgetPositionPreference.ABOVE]}:null},e.prototype.getDomNode=function(){return this.domnode},e.prototype.getId=function(){return e.ID},e.prototype.submitTelemetryData=function(){this.telemetryService.publicLog("QuickFixSelectionWidget",this.telemetryData),this.telemetryData=Object.create(null)},e.prototype.updateWidgetHeight=function(){var t,n=this.tree.getInput();if(n===e.LOADING_MESSAGE||n===e.NO_SUGGESTIONS_MESSAGE)t=19;else{var i=n;t=19*Math.min(i.length-1,11);var r=this.tree.getFocus();t+=r?d(this.tree,r):19}this.domnode.style.height=t+"px",this.tree.layout(t),this.editor.layoutContentWidget(this)},e.prototype.destroy=function(){this.releaseModel(),this.domnode=null,this.tree.dispose(),this.tree=null,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=null},e.ID="editor.widget.QuickFixSelectionWidget",e.WIDTH=360,e.LOADING_MESSAGE=new f(n.localize(0,null)),e.NO_SUGGESTIONS_MESSAGE=new f(n.localize(1,null)),e}();t.QuickFixSelectionWidget=y}),define("vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearch",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/referenceSearch/browser/referenceSearch",t)}),define("vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",t)}),define("vs/nls!vs/editor/contrib/rename/browser/rename",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/browser/rename",t)}),define("vs/nls!vs/editor/contrib/rename/browser/rename2",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/browser/rename2",t)}),define("vs/nls!vs/editor/contrib/rename/common/rename",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/rename/common/rename",t)}),define("vs/nls!vs/editor/contrib/smartSelect/common/jumpToBracket",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/smartSelect/common/jumpToBracket",t)}),define("vs/nls!vs/editor/contrib/smartSelect/common/smartSelect",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/smartSelect/common/smartSelect",t)}),define("vs/nls!vs/editor/contrib/suggest/browser/suggest",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/suggest/browser/suggest",t)}),define("vs/nls!vs/editor/contrib/suggest/browser/suggestWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/suggest/browser/suggestWidget",t)}),define("vs/nls!vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",t)}),define("vs/nls!vs/editor/contrib/zoneWidget/browser/peekViewWidget",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/contrib/zoneWidget/browser/peekViewWidget",t)}),define("vs/nls!vs/editor/node/textMate/TMSnippets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/node/textMate/TMSnippets",t)}),define("vs/nls!vs/editor/node/textMate/TMSyntax",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/editor/node/textMate/TMSyntax",t)}),define("vs/nls!vs/languages/css/common/css.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/css/common/css.contribution",t)}),define("vs/nls!vs/languages/css/common/services/lintRules",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/css/common/services/lintRules",t)}),define("vs/languages/css/common/services/lintRules",["require","exports","vs/nls!vs/languages/css/common/services/lintRules","vs/languages/css/common/level"],function(e,t,n,i){function r(e){var i={};i[e+".validate"]={type:"boolean","default":!0,description:n.localize(18,null)};for(var r in t.Rules){var o=t.Rules[r];i[e+".lint."+o.id]=o.getConfiguration()}return i}function o(e){var n={};for(var r in t.Rules){var o=t.Rules[r],s=i.toLevel(e[o.id]);s&&(n[o.id]=s)}return n}var s="warning",a="error",c="ignore",u=function(){function e(e,t,n){this.id=e,this.message=t,this.defaultValue=n}return e.prototype.getConfiguration=function(){return{type:"string","enum":[c,s,a],"default":this.defaultValue,description:this.message}},e}();t.Rule=u,t.Rules={AllVendorPrefixes:new u("compatibleVendorPrefixes",n.localize(0,null),c),IncludeStandardPropertyWhenUsingVendorPrefix:new u("vendorPrefix",n.localize(1,null),s),DuplicateDeclarations:new u("duplicateProperties",n.localize(2,null),c),EmptyRuleSet:new u("emptyRules",n.localize(3,null),s),ImportStatemement:new u("importStatement",n.localize(4,null),c),NoWidthOrHeightWhenPaddingOrBorder:new u("boxModel",n.localize(5,null),c),UniversalSelector:new u("universalSelector",n.localize(6,null),c),ZeroWithUnit:new u("zeroUnits",n.localize(7,null),c),RequiredPropertiesForFontFace:new u("fontFaceProperties",n.localize(8,null),s),HexColorLength:new u("hexColorLength",n.localize(9,null),a),ArgsInColorFunction:new u("argumentsInColorFunction",n.localize(10,null),a),UnknownProperty:new u("unknownProperties",n.localize(11,null),s),IEStarHack:new u("ieHack",n.localize(12,null),c),UnknownVendorSpecificProperty:new u("unknownVendorSpecificProperties",n.localize(13,null),c),PropertyIgnoredDueToDisplay:new u("propertyIgnoredDueToDisplay",n.localize(14,null),s),AvoidImportant:new u("important",n.localize(15,null),c),AvoidFloat:new u("float",n.localize(16,null),c),AvoidIdSelector:new u("idSelector",n.localize(17,null),c)},t.getConfigurationProperties=r,t.sanitize=o}),define("vs/nls!vs/languages/javascript/common/javascript.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/javascript/common/javascript.contribution",t)}),define("vs/nls!vs/languages/json/common/json.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/json/common/json.contribution",t)}),define("vs/nls!vs/languages/less/common/less.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/less/common/less.contribution",t)}),define("vs/nls!vs/languages/markdown/common/markdown.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/markdown/common/markdown.contribution",t)}),define("vs/nls!vs/languages/sass/common/sass.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/sass/common/sass.contribution",t)}),define("vs/nls!vs/languages/typescript/common/typescript.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/languages/typescript/common/typescript.contribution",t)}),define("vs/nls!vs/platform/actions/common/actionsService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/actions/common/actionsService",t)}),define("vs/nls!vs/platform/configuration/common/configurationRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)}),define("vs/nls!vs/platform/jsonschemas/common/jsonContributionRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/jsonschemas/common/jsonContributionRegistry",t)}),define("vs/nls!vs/platform/jsonschemas/common/jsonValidationExtensionPoint",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/jsonschemas/common/jsonValidationExtensionPoint",t)}),define("vs/nls!vs/platform/keybinding/browser/keybindingServiceImpl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/keybinding/browser/keybindingServiceImpl",t)}),define("vs/nls!vs/platform/markers/common/problemMatcher",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/markers/common/problemMatcher",t)}),define("vs/nls!vs/platform/message/common/message",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/message/common/message",t)}),define("vs/nls!vs/platform/plugins/common/abstractPluginService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/plugins/common/abstractPluginService",t)}),define("vs/nls!vs/platform/plugins/common/pluginsRegistry",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/plugins/common/pluginsRegistry",t)}),define("vs/nls!vs/platform/theme/common/themes",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/platform/theme/common/themes",t)}),define("vs/nls!vs/workbench/api/common/pluginHostMessageService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/api/common/pluginHostMessageService",t)}),define("vs/nls!vs/workbench/browser/actions/openSettings",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/openSettings",t)}),define("vs/nls!vs/workbench/browser/actions/toggleSidebarPosition",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/toggleSidebarPosition",t)}),define("vs/nls!vs/workbench/browser/actions/toggleSidebarVisibility",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/toggleSidebarVisibility",t)}),define("vs/nls!vs/workbench/browser/actions/triggerEditorActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerEditorActions",t)}),define("vs/nls!vs/workbench/browser/actions/triggerNavigation",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerNavigation",t)}),define("vs/nls!vs/workbench/browser/actions/triggerQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/actions/triggerQuickOpen",t)}),define("vs/nls!vs/workbench/browser/parts/activitybar/activityAction",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/activitybar/activityAction",t)}),define("vs/nls!vs/workbench/browser/parts/editor/binaryDiffEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/binaryDiffEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/binaryEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/binaryEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editor.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editor.contribution",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editorPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editorPart",t)}),define("vs/nls!vs/workbench/browser/parts/editor/editorStatus",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/editorStatus",t)}),define("vs/nls!vs/workbench/browser/parts/editor/iframeEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/iframeEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/sideBySideEditorControl",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/sideBySideEditorControl",t)}),define("vs/nls!vs/workbench/browser/parts/editor/stringEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/stringEditor",t)}),define("vs/nls!vs/workbench/browser/parts/editor/textDiffEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/editor/textDiffEditor",t)}),define("vs/nls!vs/workbench/browser/parts/quickopen/quickOpenController",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/quickopen/quickOpenController",t)}),define("vs/nls!vs/workbench/browser/parts/sidebar/sidebarPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/sidebar/sidebarPart",t)}),define("vs/nls!vs/workbench/browser/parts/statusbar/statusbarPart",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/parts/statusbar/statusbarPart",t)}),define("vs/nls!vs/workbench/browser/quickopen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/quickopen",t)}),define("vs/nls!vs/workbench/browser/viewlet",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/browser/viewlet",t)}),define("vs/nls!vs/workbench/electron-browser/actions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/actions",t)}),define("vs/nls!vs/workbench/electron-browser/crashReporter",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/crashReporter",t)}),define("vs/nls!vs/workbench/electron-browser/main.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/main.contribution",t)}),define("vs/nls!vs/workbench/electron-browser/update",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/electron-browser/update",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugEditorContribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugEditorContribution",t)}),define("vs/nls!vs/workbench/parts/debug/browser/debugViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/debugViewer",t)}),define("vs/nls!vs/workbench/parts/debug/browser/replViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/browser/replViewer",t)}),define("vs/nls!vs/workbench/parts/debug/common/debugModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/common/debugModel",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debug.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debug.contribution",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debugActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debugActions",t)}),define("vs/nls!vs/workbench/parts/debug/electron-browser/debugService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/electron-browser/debugService",t)}),define("vs/nls!vs/workbench/parts/debug/node/debugConfigurationManager",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/node/debugConfigurationManager",t)}),define("vs/nls!vs/workbench/parts/debug/node/rawDebugSession",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/debug/node/rawDebugSession",t)}),define("vs/nls!vs/workbench/parts/emmet/node/emmet.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/emmet/node/emmet.contribution",t)}),define("vs/nls!vs/workbench/parts/execution/electron-browser/executionService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/execution/electron-browser/executionService",t)}),define("vs/nls!vs/workbench/parts/execution/electron-browser/terminal.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/execution/electron-browser/terminal.contribution",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsActions",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWidgets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsWidgets",t)}),define("vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",t)}),define("vs/nls!vs/workbench/parts/extensions/node/extensionsService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/extensions/node/extensionsService",t)}),define("vs/nls!vs/workbench/parts/feedback/browser/feedback",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){
return e.create("vs/workbench/parts/feedback/browser/feedback",t)}),define("vs/nls!vs/workbench/parts/feedback/electron-browser/feedback",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/feedback/electron-browser/feedback",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/binaryFileEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/binaryFileEditor",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/fileEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/fileEditorInput",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/htmlFrameEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/htmlFrameEditorInput",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/textFileEditor",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/textFileEditor",t)}),define("vs/nls!vs/workbench/parts/files/browser/editors/textFileEditorModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/editors/textFileEditorModel",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileActions",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileActions.contribution",t)}),define("vs/nls!vs/workbench/parts/files/browser/fileTracker",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/fileTracker",t)}),define("vs/nls!vs/workbench/parts/files/browser/files.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/files.contribution",t)}),define("vs/nls!vs/workbench/parts/files/browser/saveErrorHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/saveErrorHandler",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/emptyView",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/emptyView",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/explorerViewer",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/explorerViewer",t)}),define("vs/nls!vs/workbench/parts/files/browser/views/workingFilesView",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/browser/views/workingFilesView",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/electronFileActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/electronFileActions",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/files.electron.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/files.electron.contribution",t)}),define("vs/nls!vs/workbench/parts/files/electron-browser/textFileServices",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/files/electron-browser/textFileServices",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitActions",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitActions.contribution",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitQuickOpen",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitServices",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitServices",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitWidgets",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitWidgets",t)}),define("vs/nls!vs/workbench/parts/git/browser/gitWorkbenchContributions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/browser/gitWorkbenchContributions",t)}),define("vs/nls!vs/workbench/parts/git/node/git.lib",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/git/node/git.lib",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownActions",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownActions.contribution",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownEditorInput",t)}),define("vs/nls!vs/workbench/parts/markdown/browser/markdownEditorModel",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/markdown/browser/markdownEditorModel",t)}),define("vs/nls!vs/workbench/parts/output/browser/outputActions",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/browser/outputActions",t)}),define("vs/nls!vs/workbench/parts/output/browser/outputActions.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/browser/outputActions.contribution",t)}),define("vs/nls!vs/workbench/parts/output/browser/outputEditorInput",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/output/browser/outputEditorInput",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/commandsHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/commandsHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/gotoLineHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/gotoLineHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/gotoSymbolHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/gotoSymbolHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/helpHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/helpHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/markersHandler",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/markersHandler",t)}),define("vs/nls!vs/workbench/parts/quickopen/browser/quickopen.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/quickopen/browser/quickopen.contribution",t)}),define("vs/nls!vs/workbench/parts/search/browser/search.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/search/browser/search.contribution",t)}),define("vs/nls!vs/workbench/parts/snippets/electron-browser/snippets.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/snippets/electron-browser/snippets.contribution",t)}),define("vs/nls!vs/workbench/parts/tasks/browser/taskQuickOpen",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/browser/taskQuickOpen",t)}),define("vs/nls!vs/workbench/parts/tasks/electron-browser/task.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/electron-browser/task.contribution",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerConfiguration",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerConfiguration",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerDetector",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerDetector",t)}),define("vs/nls!vs/workbench/parts/tasks/node/processRunnerSystem",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/tasks/node/processRunnerSystem",t)}),define("vs/nls!vs/workbench/parts/themes/electron-browser/themes.contribution",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/parts/themes/electron-browser/themes.contribution",t)}),define("vs/nls!vs/workbench/services/files/electron-browser/fileService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/files/electron-browser/fileService",t)}),define("vs/nls!vs/workbench/services/files/node/fileService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/files/node/fileService",t)}),define("vs/nls!vs/workbench/services/history/browser/history",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/history/browser/history",t)}),define("vs/nls!vs/workbench/services/keybinding/browser/keybindingService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/keybinding/browser/keybindingService",t)}),define("vs/nls!vs/workbench/services/keybinding/electron-browser/pluginKeybindingService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/keybinding/electron-browser/pluginKeybindingService",t)}),define("vs/nls!vs/workbench/services/message/electron-browser/messageService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/message/electron-browser/messageService",t)}),define("vs/nls!vs/workbench/services/request/node/requestService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/request/node/requestService",t)}),define("vs/nls!vs/workbench/services/themes/node/themeService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/themes/node/themeService",t)}),define("vs/nls!vs/workbench/services/thread/electron-browser/threadService",["vs/nls","vs/nls!vs/workbench/workbench.main"],function(e,t){return e.create("vs/workbench/services/thread/electron-browser/threadService",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/instantiation/common/descriptors",["require","exports","vs/base/common/errors","vs/base/common/marshalling","vs/base/common/hash"],function(e,t,n,i,r){var o=function(){function e(e){this._staticArguments=e}return e.prototype.appendStaticArguments=function(e){this._staticArguments.push.apply(this._staticArguments,e)},e.prototype.staticArguments=function(e){return isNaN(e)?this._staticArguments.slice(0):this._staticArguments[e]},e.prototype._validate=function(e){if(!e)throw n.illegalArgument("can not be falsy")},e}();t.AbstractDescriptor=o;var s=function(e){function t(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.call(this,n),this._ctor=t}return __extends(t,e),Object.defineProperty(t.prototype,"ctor",{get:function(){return this._ctor},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e===this?!0:e instanceof t?e.ctor===this.ctor:!1},t.prototype.hashCode=function(){return 61*(1+this.ctor.length)},t.prototype.bind=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=[];return i=i.concat(this.staticArguments()),i=i.concat(e),new(t.bind.apply(t,[void 0].concat([this._ctor],i)))},t}(o);t.SyncDescriptor=s,t.createSyncDescriptor=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new(s.bind.apply(s,[void 0].concat([e],t)))},i.registerMarshallingContribution({canSerialize:function(e){return e instanceof a},serialize:function(e,t){return{$isAsyncDescriptor:!0,$moduleName:e.moduleName,$ctorName:e.ctorName,$staticArguments:t(e.staticArguments())}},canDeserialize:function(e){return e.$isAsyncDescriptor},deserialize:function(e,t){var n=new a(e.$moduleName,e.$ctorName);return n.appendStaticArguments(t(e.$staticArguments)),n}});var a=function(e){function t(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];e.call(this,i),this._moduleName=t,this._ctorName=n}return __extends(t,e),t.create=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"moduleName",{get:function(){return this._moduleName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctorName",{get:function(){return this._ctorName},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e===this?!0:e instanceof t?e.moduleName===this.moduleName&&e.ctorName===this.ctorName:!1},t.prototype.hashCode=function(){return r.computeMurmur2StringHashCode(this.moduleName)*r.computeMurmur2StringHashCode(this.ctorName)},t.prototype.bind=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=[];return i=i.concat(this.staticArguments()),i=i.concat(e),new(t.bind.apply(t,[void 0].concat([this.moduleName,this.ctorName],i)))},t}(o);t.AsyncDescriptor=a;var c=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return new(a.bind.apply(a,[void 0].concat([e,t],n)))};t.createAsyncDescriptor0=c,t.createAsyncDescriptor1=c,t.createAsyncDescriptor2=c,t.createAsyncDescriptor3=c,t.createAsyncDescriptor4=c,t.createAsyncDescriptor5=c,t.createAsyncDescriptor6=c,t.createAsyncDescriptor7=c}),define("vs/platform/instantiation/common/extensions",["require","exports","./descriptors"],function(e,t,n){function i(e,t){o.push({id:e,descriptor:new n.SyncDescriptor(t)})}function r(){return o}t.Services="di.services";var o=[];t.registerSingleton=i,t.getServices=r}),define("vs/platform/instantiation/common/instantiation",["require","exports"],function(e,t){function n(e){var t=function(t,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");t[r.DI_TARGET]===t?t[r.DI_DEPENDENCIES].push({serviceId:e,index:i}):(t[r.DI_DEPENDENCIES]=[{serviceId:e,index:i}],t[r.DI_TARGET]=t)};return t[r.DI_PROVIDES]=e,t}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=[],i=0;i<e.length;i++){var o=e[i];n.push({serviceId:r.getServiceId(o)})}return function(e){var t=e[r.DI_DEPENDENCIES_USES];return t?t.push.apply(t,n):e[r.DI_DEPENDENCIES_USES]=n,e}}var r;!function(e){function t(t){return t[e.DI_PROVIDES]}function n(t){var n=t[e.DI_DEPENDENCIES],i=t[e.DI_DEPENDENCIES_USES];return n?i?n.slice(0).concat(i):n:i}e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.DI_DEPENDENCIES_USES="$di$dependencies_uses",e.DI_PROVIDES="$di$provides_service",e.getServiceId=t,e.getServiceDependencies=n}(r=t._util||(t._util={})),t.IInstantiationService=n("instantiationService"),t.createDecorator=n,t.Uses=i,t.INullService=n("nullService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/editorAction",["require","exports","vs/base/common/actions","vs/base/common/winjs.base","vs/base/common/strings","vs/editor/common/editorActionEnablement","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){function a(e,t,n){if(e.getLineContent().length<=t)return!1;for(var i=e.findIndexOfOffset(t),o=e.getTokenType(i),s=0,a=n.length;a>s;s++)if(""===n[s]){if(""===o)return!0}else if(r.startsWith(o,n[s]))return!0;return!1}t.Behaviour=o.Behaviour;var c=t.Behaviour.TextFocus|t.Behaviour.Writeable|t.Behaviour.UpdateOnModelChange,u=function(e){function n(n,i,r){void 0===r&&(r=c),e.call(this,n.id),this.editor=i,this._descriptor=n,this.label=n.label||"",this._enablementState=o.createActionEnablement(i,r,this),this._shouldShowInContextMenu=!!(r&t.Behaviour.ShowInContextMenu),this._supportsReadonly=!(r&t.Behaviour.Writeable)}return __extends(n,e),n.prototype.getId=function(){return this.id},n.prototype.dispose=function(){this._enablementState.dispose(),e.prototype.dispose.call(this)},n.prototype.getGroupId=function(){return this.id},n.prototype.shouldShowInContextMenu=function(){return this._shouldShowInContextMenu},n.prototype.getDescriptor=function(){return this._descriptor},Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enablementState.value()},set:function(e){var t=new Error;console.log("setting EditorAction.enabled is UNCOOL. Use resetEnablementState and getEnablementState"),console.log(t.stack)},enumerable:!0,configurable:!0}),n.prototype.resetEnablementState=function(){this._enablementState.reset()},n.prototype.isSupported=function(){if(!this._supportsReadonly){if(this.editor.getConfiguration().readOnly)return!1;var e=this.editor.getModel();if(e&&e.hasEditableRange())return!1}return!0},n.prototype.getEnablementState=function(){return!0},n}(n.Action);t.EditorAction=u;var l=function(e){function t(t,n,i){e.call(this,t,n),this._handlerId=i}return __extends(t,e),t.prototype.run=function(){return this.editor.trigger(this.getId(),this._handlerId,null),i.TPromise.as(!0)},t}(u);t.HandlerEditorAction=l;var d=function(e){function n(t,i,r){var o=t.enablement||{};e.call(this,{id:t.id,label:t.label},i,n._transformBehaviour(o,t.contextMenuGroupId)),this._contextMenuGroupId=t.contextMenuGroupId,this._run=t.run,this._tokensAtPosition=o.tokensAtPosition,this._wordAtPosition=o.wordAtPosition}return __extends(n,e),n._transformBehaviour=function(e,n){var i=0;return n?i|=t.Behaviour.ShowInContextMenu:e.textFocus&&(i|=t.Behaviour.TextFocus),e.widgetFocus&&(i|=t.Behaviour.WidgetFocus),e.writeableEditor&&(i|=t.Behaviour.Writeable),"undefined"!=typeof e.tokensAtPosition&&(i|=t.Behaviour.UpdateOnCursorPositionChange),"undefined"!=typeof e.wordAtPosition&&(i|=t.Behaviour.UpdateOnCursorPositionChange),i},n.prototype.getGroupId=function(){return this._contextMenuGroupId},n.prototype.run=function(){return i.TPromise.as(this._run(this.editor))},n.prototype.getEnablementState=function(){return this._getEnablementOnTokens()&&this._getEnablementOnWord()},n.prototype._getEnablementOnTokens=function(){if(!this._tokensAtPosition)return!0;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber),i=t.column-1;return a(n,i,this._tokensAtPosition)},n.prototype._getEnablementOnWord=function(){if(!this._wordAtPosition)return!0;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getWordAtPosition(t);return!!n},n=__decorate([__param(2,s.INullService)],n)}(u);t.DynamicEditorAction=d}),define("vs/editor/common/services/codeEditorService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.ID_CODE_EDITOR_SERVICE="codeEditorService",t.ICodeEditorService=n.createDecorator(t.ID_CODE_EDITOR_SERVICE)}),define("vs/editor/common/services/abstractCodeEditorService",["require","exports","vs/base/common/event","vs/editor/common/services/codeEditorService"],function(e,t,n,i){var r=function(){function e(){this.serviceId=i.ICodeEditorService,this._codeEditors=Object.create(null),this._onCodeEditorAdd=new n.Emitter,this._onCodeEditorRemove=new n.Emitter}return e.prototype.addCodeEditor=function(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)},Object.defineProperty(e.prototype,"onCodeEditorAdd",{get:function(){return this._onCodeEditorAdd.event},enumerable:!0,configurable:!0}),e.prototype.removeCodeEditor=function(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)},Object.defineProperty(e.prototype,"onCodeEditorRemove",{get:function(){return this._onCodeEditorRemove.event},enumerable:!0,configurable:!0}),e.prototype.getCodeEditor=function(e){return this._codeEditors[e]||null},e.prototype.listCodeEditors=function(){var e=this;return Object.keys(this._codeEditors).map(function(t){return e._codeEditors[t]})},e}();t.AbstractCodeEditorService=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/services/codeEditorServiceImpl",["require","exports","vs/editor/common/editorCommon","vs/editor/common/services/abstractCodeEditorService","vs/base/browser/dom","vs/base/common/objects","vs/base/common/strings","vs/base/common/uri"],function(e,t,n,i,r,o,s,a){function c(e){var t=o.deepClone(e);o.mixin(t,e.light);var n=o.deepClone(e);return o.mixin(n,e.dark),{light:t,dark:n}}var u=function(e){function t(){e.call(this),this._styleSheet=r.createStyleSheet(),this._decorationRenderOptions=Object.create(null)}return __extends(t,e),t.prototype.registerDecorationType=function(e,t){this._decorationRenderOptions[e]&&(this._decorationRenderOptions[e].dispose(),delete this._decorationRenderOptions[e]);var n=new d(this._styleSheet,e,t);this._decorationRenderOptions[e]=n},t.prototype.removeDecorationType=function(e){this._decorationRenderOptions[e]&&(this._decorationRenderOptions[e].dispose(),delete this._decorationRenderOptions[e],this.listCodeEditors().forEach(function(t){return t.removeDecorations(e)}))},t.prototype.resolveDecorationType=function(e){if(this._decorationRenderOptions[e])return this._decorationRenderOptions[e];throw new Error("Unknown decoration type key: "+e)},t}(i.AbstractCodeEditorService);t.CodeEditorServiceImpl=u;var l,d=function(){function e(t,i,r){var o=c(r);this._styleSheet=t,this._key=i,this.className=e._handle(this._styleSheet,this._key,h.ClassName,e._getCSSTextForModelDecorationClassName(o.light),e._getCSSTextForModelDecorationClassName(o.dark)),this.inlineClassName=e._handle(this._styleSheet,this._key,h.InlineClassName,e._getCSSTextForModelDecorationInlineClassName(o.light),e._getCSSTextForModelDecorationInlineClassName(o.dark)),this.glyphMarginClassName=e._handle(this._styleSheet,this._key,h.GlyphMarginClassName,e._getCSSTextForModelDecorationGlyphMarginClassName(o.light),e._getCSSTextForModelDecorationGlyphMarginClassName(o.dark)),this.isWholeLine=Boolean(r.isWholeLine),("undefined"!=typeof o.light.overviewRulerColor||"undefined"!=typeof o.dark.overviewRulerColor)&&(this.overviewRuler={color:o.light.overviewRulerColor||o.dark.overviewRulerColor,darkColor:o.dark.overviewRulerColor||o.light.overviewRulerColor,position:r.overviewRulerLane||n.OverviewRulerLane.Center})}return e.prototype.dispose=function(){r.removeCSSRulesWithPrefix(p.getDeletionPrefixFor(l.Light,this._key),this._styleSheet),r.removeCSSRulesWithPrefix(p.getDeletionPrefixFor(l.Dark,this._key),this._styleSheet)},e._getCSSTextForModelDecorationClassName=function(e){var t=[];return"undefined"!=typeof e.backgroundColor&&t.push(s.format(this._CSS_MAP.backgroundColor,e.backgroundColor)),"undefined"!=typeof e.outlineColor&&t.push(s.format(this._CSS_MAP.outlineColor,e.outlineColor)),"undefined"!=typeof e.outlineStyle&&t.push(s.format(this._CSS_MAP.outlineStyle,e.outlineStyle)),"undefined"!=typeof e.outlineWidth&&t.push(s.format(this._CSS_MAP.outlineWidth,e.outlineWidth)),("undefined"!=typeof e.borderColor||"undefined"!=typeof e.borderRadius||"undefined"!=typeof e.borderSpacing||"undefined"!=typeof e.borderStyle||"undefined"!=typeof e.borderWidth)&&t.push(s.format("box-sizing: border-box;")),"undefined"!=typeof e.borderColor&&t.push(s.format(this._CSS_MAP.borderColor,e.borderColor)),"undefined"!=typeof e.borderRadius&&t.push(s.format(this._CSS_MAP.borderRadius,e.borderRadius)),"undefined"!=typeof e.borderSpacing&&t.push(s.format(this._CSS_MAP.borderSpacing,e.borderSpacing)),"undefined"!=typeof e.borderStyle&&t.push(s.format(this._CSS_MAP.borderStyle,e.borderStyle)),"undefined"!=typeof e.borderWidth&&t.push(s.format(this._CSS_MAP.borderWidth,e.borderWidth)),t.join("")},e._getCSSTextForModelDecorationInlineClassName=function(e){var t=[];return"undefined"!=typeof e.textDecoration&&t.push(s.format(this._CSS_MAP.textDecoration,e.textDecoration)),"undefined"!=typeof e.cursor&&t.push(s.format(this._CSS_MAP.cursor,e.cursor)),"undefined"!=typeof e.color&&t.push(s.format(this._CSS_MAP.color,e.color)),t.join("")},e._getCSSTextForModelDecorationGlyphMarginClassName=function(e){var t=[];return"undefined"!=typeof e.gutterIconPath&&t.push(s.format(this._CSS_MAP.gutterIconPath,a["default"].file(e.gutterIconPath).toString())),t.join("")},e._handle=function(e,t,n,i,r){return i.length>0||r.length>0?(i.length>0&&this._createCSSSelector(e,l.Light,t,n,i),r.length>0&&this._createCSSSelector(e,l.Dark,t,n,r),p.getClassName(t,n)):void 0},e._createCSSSelector=function(e,t,n,i,o){r.createCSSRule(p.getSelector(t,n,i),o,e)},e._CSS_MAP={color:"color:{0} !important;",backgroundColor:"background-color:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",gutterIconPath:"background:url('{0}') center center no-repeat;"},e}();!function(e){e[e.Light=0]="Light",e[e.Dark=1]="Dark"}(l||(l={}));var h;!function(e){e[e.ClassName=0]="ClassName",e[e.InlineClassName=1]="InlineClassName",e[e.GlyphMarginClassName=2]="GlyphMarginClassName"}(h||(h={}));var p=function(){function e(){}return e._getSelectorPrefixOf=function(e){return e===l.Light?".monaco-editor.vs":".monaco-editor.vs-dark"},e.getClassName=function(e,t){return"ced-"+e+"-"+t},e.getSelector=function(e,t,n){return this._getSelectorPrefixOf(e)+" ."+this.getClassName(t,n)},e.getDeletionPrefixFor=function(e,t){return this._getSelectorPrefixOf(e)+" .ced-"+t},e}()}),define("vs/editor/common/services/modeService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IModeService=n.createDecorator("modeService")}),define("vs/editor/common/services/modelService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IModelService=n.createDecorator("modelService")}),define("vs/editor/common/services/resourceService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.ResourceEvents={ADDED:"resource.added",REMOVED:"resource.removed",CHANGED:"resource.changed"},t.IResourceService=n.createDecorator("resourceService")});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/smartSelect/common/tokenSelectionSupport",["require","exports","vs/base/common/winjs.base","./tokenTree","vs/editor/common/services/modelService","vs/editor/common/core/range"],function(e,t,n,i,r,o){var s=function(){function e(e){this._modelService=e}return e.prototype.getRangesToPosition=function(e,t){var i=this._modelService.getModel(e),r=[];return i&&this._doGetRangesToPosition(i,t).forEach(function(e){r.push({type:void 0,range:e})}),n.TPromise.as(r)},e.prototype._doGetRangesToPosition=function(e,t){var n,r,s=i.build(e);n=i.find(s,t);for(var a=[];n;)r&&o.Range.equalsRange(r,n.range)||a.push(n.range),r=n.range,n=n.parent;return a=a.reverse()},e=__decorate([__param(0,r.IModelService)],e)}();return s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/zoneWidget/browser/peekViewWidget",["require","exports","vs/nls!vs/editor/contrib/zoneWidget/browser/peekViewWidget","vs/base/browser/ui/actionbar/actionbar","vs/base/common/actions","vs/base/common/strings","vs/base/browser/builder","vs/base/browser/dom","./zoneWidget","vs/editor/common/services/codeEditorService","vs/platform/instantiation/common/instantiation","vs/css!./peekViewWidget"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e,t){var n=t.context[p];return n?e.get(u.ICodeEditorService).getCodeEditor(n):null}t.IPeekViewService=l.createDecorator("peekViewService");var h;!function(e){e.Closed="closed"}(h=t.Events||(t.Events={}));var p="outerEditorId";t.getOuterEditor=d;var f=function(e){function c(n,i,r,o){void 0===o&&(o={}),e.call(this,n,o),this.serviceId=t.IPeekViewService,this.contextKey=r,i.createKey(p,n.getId())}return __extends(c,e),c.prototype.dispose=function(){this._isActive=!1,e.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),c.prototype.getActiveWidget=function(){return this},c.prototype.show=function(t,n){this._isActive=!0,e.prototype.show.call(this,t,n)},c.prototype.fillContainer=function(e){s.$(e).addClass("peekview-widget"),this._headElement=s.$(".head").getHTMLElement(),this._bodyElement=s.$(".body").getHTMLElement(),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)},c.prototype._fillHead=function(e){var t=this,o=s.$(".peekview-title").on(a.EventType.CLICK,function(e){return t._onTitleClick(e)}).appendTo(this._headElement).getHTMLElement();this._primaryHeading=s.$("span.filename").appendTo(o).getHTMLElement(),this._secondaryHeading=s.$("span.dirname").appendTo(o).getHTMLElement(),this._actionbarWidget=new i.ActionBar(s.$(".peekview-actions").appendTo(this._headElement)),this._actionbarWidget.push(new r.Action("peekview.close",n.localize(0,null),"close-peekview-action",!0,function(){return t.dispose(),t.emit(h.Closed,t),null}),{label:!1,icon:!0})},c.prototype._onTitleClick=function(e){},c.prototype.setTitle=function(e,t){s.$(this._primaryHeading).safeInnerHtml(e),t?s.$(this._secondaryHeading).safeInnerHtml(t):a.clearNode(this._secondaryHeading)},c.prototype._fillBody=function(e){},c.prototype.doLayout=function(e){var t=Math.ceil(1.2*this.editor.getConfiguration().lineHeight),n=e-(t+2);this._doLayoutHead(t),this._doLayoutBody(n)},c.prototype._doLayoutHead=function(e){this._headElement.style.height=o.format("{0}px",e),
this._headElement.style.lineHeight=this._headElement.style.height},c.prototype._doLayoutBody=function(e){this._bodyElement.style.height=o.format("{0}px",e)},c}(c.ZoneWidget);t.PeekViewWidget=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/actions/common/actions",["require","exports","vs/base/common/actions","vs/base/common/winjs.base","vs/base/common/assert","vs/platform/instantiation/common/descriptors","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){t.IActionsService=s.createDecorator("actionsService");var a=function(){function e(e,t,n,i,r,s){this._id=t,this._label=n,this._keybindings=i,this._keybindingContext=r,this._keybindingWeight=s,this._descriptor=o.createSyncDescriptor(e,this._id,this._label)}return Object.defineProperty(e.prototype,"syncDescriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindings",{get:function(){return this._keybindings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindingContext",{get:function(){return this._keybindingContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keybindingWeight",{get:function(){return this._keybindingWeight},enumerable:!0,configurable:!0}),e}();t.SyncActionDescriptor=a;var c=function(e){function t(t,n,i,r,o,s){void 0===r&&(r=""),void 0===o&&(o=""),void 0===s&&(s=!0),e.call(this,i,r,o,s),this._instantiationService=t,this._descriptor=n}return __extends(t,e),Object.defineProperty(t.prototype,"cachedAction",{get:function(){return this._cachedAction},set:function(e){this._cachedAction=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.id:this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.label:this._label},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.label=e:this._setLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction["class"]:this._cssClass},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction["class"]=e:this._setClass(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.enabled:this._enabled},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.enabled=e:this._setEnabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._cachedAction instanceof n.Action?this._cachedAction.order:this._order},set:function(e){this._cachedAction instanceof n.Action?this._cachedAction.order=e:this._order=e},enumerable:!0,configurable:!0}),t.prototype.run=function(e){return this._cachedAction?this._cachedAction.run(e):this._createAction().then(function(t){return t.run(e)})},t.prototype._createAction=function(){var e=this,t=i.TPromise.as(void 0);return t.then(function(){return e._instantiationService.createInstance(e._descriptor)}).then(function(t){return r.ok(t instanceof n.Action,"Action must be an instanceof Base Action"),e._cachedAction=t,e._emitterUnbind=e.addEmitter(e._cachedAction),t})},t.prototype.dispose=function(){this._emitterUnbind&&this._emitterUnbind(),this._cachedAction&&this._cachedAction.dispose(),e.prototype.dispose.call(this)},t}(n.Action);t.DeferredAction=c}),define("vs/platform/configuration/common/configuration",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){function i(e,t){function n(e,t){for(var n=e,i=0;i<t.length;i++)if(n=n[t[i]],!n)return;return n}var i=t.split(".");return n(e,i)}t.IConfigurationService=n.createDecorator("configurationService");var r=function(){function e(){}return e.UPDATED="update",e}();t.ConfigurationServiceEventTypes=r,t.extractSetting=i}),define("vs/platform/contextview/browser/contextView",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IContextViewService=n.createDecorator("contextViewService"),t.IContextMenuService=n.createDecorator("contextMenuService")}),define("vs/platform/contextview/browser/contextViewService",["require","exports","./contextView","vs/base/browser/ui/contextview/contextview"],function(e,t,n,i){var r=function(){function e(e,t,r){this.serviceId=n.IContextViewService,this.contextView=new i.ContextView(e)}return e.prototype.dispose=function(){this.contextView.dispose()},e.prototype.setContainer=function(e){this.contextView.setContainer(e)},e.prototype.showContextView=function(e){this.contextView.show(e)},e.prototype.layout=function(){this.contextView.layout()},e.prototype.hideContextView=function(e){this.contextView.hide(e)},e}();t.ContextViewService=r}),define("vs/platform/editor/common/editor",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IEditorService=n.createDecorator("editorService"),function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(t.Position||(t.Position={}));var i=t.Position;t.POSITIONS=[i.LEFT,i.CENTER,i.RIGHT]}),define("vs/platform/event/common/event",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IEventService=n.createDecorator("eventService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/event/common/eventService",["require","exports","vs/base/common/eventEmitter","./event"],function(e,t,n,i){var r=function(e){function t(){e.call(this),this.serviceId=i.IEventService}return __extends(t,e),t}(n.EventEmitter);t.EventService=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/files/common/files",["require","exports","vs/base/common/paths","vs/base/common/events","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r){t.IFileService=r.createDecorator("fileService"),function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(t.FileChangeType||(t.FileChangeType={}));var o=t.FileChangeType;t.EventType={FILE_CHANGES:"files:fileChanges"};var s=function(e){function t(t){e.call(this),this._changes=t}return __extends(t,e),Object.defineProperty(t.prototype,"changes",{get:function(){return this._changes},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return e?this.containsAny([e],t):!1},t.prototype.containsAny=function(e,t){return e&&e.length?this._changes.some(function(i){return i.type!==t?!1:t===o.DELETED?e.some(function(e){return e?n.isEqualOrParent(e.fsPath,i.resource.fsPath):!1}):e.some(function(e){return e?e.fsPath===i.resource.fsPath:!1})}):!1},t.prototype.getAdded=function(){return this.getOfType(o.ADDED)},t.prototype.gotAdded=function(){return this.hasType(o.ADDED)},t.prototype.getDeleted=function(){return this.getOfType(o.DELETED)},t.prototype.gotDeleted=function(){return this.hasType(o.DELETED)},t.prototype.getUpdated=function(){return this.getOfType(o.UPDATED)},t.prototype.gotUpdated=function(){return this.hasType(o.UPDATED)},t.prototype.getOfType=function(e){return this._changes.filter(function(t){return t.type===e})},t.prototype.hasType=function(e){return this._changes.some(function(t){return t.type===e})},t}(i.Event);t.FileChangesEvent=s,function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY",e[e.FILE_IS_DIRECTORY=1]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=2]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=3]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=4]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=5]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=6]="FILE_READ_ONLY",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE"}(t.FileOperationResult||(t.FileOperationResult={}));t.FileOperationResult});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/services/bulkEdit",["require","exports","vs/nls!vs/editor/common/services/bulkEdit","vs/base/common/uri","vs/base/common/arrays","vs/base/common/collections","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/core/selection","vs/platform/files/common/files","vs/editor/common/core/editOperation"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e,t,n,i){var r=h(e,t,n);return r.add(i),r.finish()}function h(e,t,i){function r(e){c.push.apply(c,e)}function o(){for(var e,t=0;t<c.length;t++){var i=c[t];u.hasChanged(i.resource)&&(e||(e=[]),e.push(i.resource.fsPath))}return e?n.localize(0,null,e.join(", ")):void 0}function a(){if(0!==c.length){var e=o();if(e)return s.TPromise.wrapError(e);var n,r;i&&(n=i.getModel().getAssociatedResource(),r=i.getSelections());var a=new v(t,n,r,c);return a.prepare().then(function(e){var t=o();if(t)throw new Error(t);return u.stop(),a.apply()})}}var c=[],u=new p(e).start();return{add:r,finish:a}}var p=function(){function e(e){this._eventService=e}return e.prototype.start=function(){var e=Object.create(null),t=this._eventService.addListener(u.EventType.FILE_CHANGES,function(t){t.changes.forEach(function(t){var n=String(t.resource),i=e[n];i||(e[n]=i=[]),i.push(t)})});return{stop:t,hasChanged:function(t){return!!e[t.toString()]},allChanges:function(){return r.merge(o.values(e))}}},e}(),f=function(){function e(e){this._endCursorSelection=null,this._model=e,this._edits=[]}return e.prototype.addEdit=function(e){var t;t=e.range?e.range:this._model.getFullModelRange(),this._edits.push(l.EditOperation.replace(a.Range.lift(t),e.newText))},e.prototype.apply=function(){var t=this;0!==this._edits.length&&(this._edits.sort(e._editCompare),this._initialSelections=this._getInitialSelections(),this._model.pushEditOperations(this._initialSelections,this._edits,function(e){return t._getEndCursorSelections(e)}))},e.prototype._getInitialSelections=function(){var e=this._edits[0].range,t=c.Selection.createSelection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);return[t]},e.prototype._getEndCursorSelections=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=e[n].range,r=0;r<this._initialSelections.length;r++){var o=this._initialSelections[r];if(a.Range.areIntersectingOrTouching(i,o)){t=n;break}}var s=e[t].range;return this._endCursorSelection=c.Selection.createSelection(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn),[this._endCursorSelection]},e.prototype.getEndCursorSelection=function(){return this._endCursorSelection},e._editCompare=function(e,t){return a.Range.compareRangesUsingStarts(e.range,t.range)},e}(),m=function(e){function t(t,n){e.call(this,t),this._knownInitialSelections=n}return __extends(t,e),t.prototype._getInitialSelections=function(){return this._knownInitialSelections},t}(f),v=function(){function e(e,t,n,i){this._numberOfResourcesToModify=0,this._numberOfChanges=0,this._edits=Object.create(null),this._editorService=e,this._sourceModel=t,this._sourceSelections=n,this._sourceModelTask=null;for(var r=0;r<i.length;r++){var o=i[r];this._addEdit(o)}}return e.prototype.resourcesCount=function(){return this._numberOfResourcesToModify},e.prototype.changeCount=function(){return this._numberOfChanges},e.prototype._addEdit=function(e){var t=this._edits[e.resource.toString()];t||(this._edits[e.resource.toString()]=t=[],this._numberOfResourcesToModify+=1),this._numberOfChanges+=1,t.push(e)},e.prototype.prepare=function(){var e=this;if(this._tasks)throw new Error("illegal state - already prepared");this._tasks=[];var t=[];return o.forEach(this._edits,function(n){var r=e._editorService.resolveEditorModel({resource:i["default"].parse(n.key)}).then(function(t){if(!t||!t.textEditorModel)throw new Error("Cannot load file "+n.key);var i,r=t.textEditorModel;r.getAssociatedResource().toString()===e._sourceModel.toString()?(e._sourceModelTask=new m(r,e._sourceSelections),i=e._sourceModelTask):i=new f(r),n.value.forEach(function(e){return i.addEdit(e)}),e._tasks.push(i)});t.push(r)}),s.TPromise.join(t).then(function(t){return e})},e.prototype.apply=function(){this._tasks.forEach(function(e){return e.apply()});var e=null;return this._sourceModelTask&&(e=this._sourceModelTask.getEndCursorSelection()),e},e}();t.bulkEdit=d,t.createBulkEdit=h}),define("vs/platform/instantiation/common/instantiationService",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/strings","vs/base/common/types","vs/base/common/collections","./descriptors","vs/base/common/graph","./instantiation"],function(e,t,n,i,r,o,s,a,c,u){function l(e){void 0===e&&(e=Object.create(null));var t=new m(e,new p);return t}function d(){function e(e,t){"string"==typeof t?n[t]=e:n[u._util.getServiceId(t)]=e}function t(e){var t=e[u._util.DI_PROVIDES];if(!t)throw new Error("@ServiceName decoration expected");var i=n[t];if(!i)throw new Error("service '"+t+"' not found. @Uses-decorator incomplete?");return i}var n=Object.create(null);return{get:t,add:e}}var h=u.IInstantiationService;t.create=l,t.createContext=d;var p=function(){function e(){this._value=0}return Object.defineProperty(e.prototype,"locked",{get:function(){return 0===this._value},enumerable:!0,configurable:!0}),e.prototype.runUnlocked=function(e){this._value++;try{return e()}finally{this._value--}},e}(),f=function(){function e(e,t){var n=this;this._services=e,this._lock=t,s.forEach(this._services,function(e){n.registerService(e.key,e.value)})}return e.prototype.registerService=function(e,t){var n=this;Object.defineProperty(this,e,{get:function(){if(n._lock.locked)throw i.illegalState("the services map can only be used during construction");if(!t)throw i.illegalArgument(r.format("service with '{0}' not found",e));if(t instanceof a.SyncDescriptor){var o=n._services[e];o instanceof a.SyncDescriptor?(n._ensureInstances(e,t),t=n._services[e]):t=o}return t},set:function(e){throw i.illegalState("services cannot be changed")},configurable:!1,enumerable:!1}),this._services[e]=t},Object.defineProperty(e.prototype,"lock",{get:function(){return this._lock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"services",{get:function(){return this._services},enumerable:!0,configurable:!0}),e.prototype._ensureInstances=function(e,t){for(var n=Object.create(null),i=new c.Graph(function(e){return e.serviceId}),r=[{serviceId:e,desc:t}];r.length;){var o=r.pop();if(i.lookupOrInsertNode(o),n[o.serviceId])throw new Error("[createInstance] cyclic dependency: "+Object.keys(n).join(">>"));n[o.serviceId]=!0;var s=u._util.getServiceDependencies(o.desc.ctor);if(Array.isArray(s))for(var l=0;l<s.length;l++){var d=s[l],h=this.services[d.serviceId];if(!h)throw new Error("[createInstance] "+e+" depends on "+d.serviceId+" which is NOT registered.");if(h instanceof a.SyncDescriptor){var p={serviceId:d.serviceId,desc:h};r.push(p),i.insertEdge(o,p)}}}for(;;){var f=i.roots();if(0===f.length){if(0!==i.length)throw new Error("[createInstance] cyclinc dependency!");break}for(var m=0;m<f.length;m++){var v=f[m],g=this.createInstance(v.data.desc,[]);this._services[v.data.serviceId]=g,i.removeNode(v.data)}}},e.prototype.invokeFunction=function(e,t){var n=this;return this._lock.runUnlocked(function(){var i={get:function(e){var t=u._util.getServiceId(e);return n[t]}};return e.apply(void 0,[i].concat(t))})},e.prototype.createInstance=function(e,t){var n=this,i=[],r=u._util.getServiceDependencies(e.ctor);if(Array.isArray(r)){var s,a=e.staticArguments().concat(t),c=a.length,l=Number.MAX_VALUE;r.forEach(function(e){var t=e.serviceId,r=e.index,o=n._lock.runUnlocked(function(){return n[t]});void 0===r?(s||(s=d(),i[0]=s,c+=1),s.add(o,t)):(i[r]=o,l=Math.min(l,e.index))});for(var h=s?1:0,p=0;p<a.length;p++){var f=a[p],m=void 0!==i[h];m||(i[h]=f),h+=1}if(i.unshift(e.ctor),l!==Number.MAX_VALUE&&l!==c){var v="[createInstance] constructor '"+e.ctor.name+"' has first"+(" service dependency at position "+(l+1)+" but is called with")+(" "+(c-1)+" static arguments that are expected to come first");console.warn(v)}}else i=[e.ctor,this],i.push.apply(i,e.staticArguments()),i.push.apply(i,t);return this._lock.runUnlocked(function(){var t=o.create.apply(null,i);return e._validate(t),t})},e}(),m=function(){function t(e,t){this.serviceId=h,e.instantiationService=this,this._servicesMap=new f(e,t)}return t.prototype.createChild=function(e){var n={};return s.forEach(this._servicesMap.services,function(e){n[e.key]=e.value}),s.forEach(e,function(e){n[e.key]=e.value}),new t(n,this._servicesMap.lock)},t.prototype.registerService=function(e,t){this._servicesMap.registerService(e,t)},t.prototype.addSingleton=function(e,t){var n=u._util.getServiceId(e);this._servicesMap.registerService(n,t)},t.prototype.getInstance=function(e){var t=this,n=u._util.getServiceId(e),i=this._servicesMap.lock.runUnlocked(function(){return t._servicesMap[n]});return i},t.prototype.createInstance=function(e){for(var t=new Array(arguments.length-1),n=1,i=arguments.length;i>n;n++)t[n-1]=arguments[n];return e instanceof a.SyncDescriptor?this._servicesMap.createInstance(e,t):e instanceof a.AsyncDescriptor?this._createInstanceAsync(e,t):this._servicesMap.createInstance(new a.SyncDescriptor(e),t)},t.prototype._createInstanceAsync=function(t,r){var o,s=this;return new n.TPromise(function(n,c,u){e([t.moduleName],function(e){if(o&&c(o),!e)return c(i.illegalArgument("module not found: "+t.moduleName));var u;if(u=t.ctorName?e[t.ctorName]:e,"function"!=typeof u)return c(i.illegalArgument("not a function: "+t.ctorName||t.moduleName));try{r.unshift.apply(r,t.staticArguments()),n(s._servicesMap.createInstance(new a.SyncDescriptor(u),r))}catch(l){return c(l)}},c)},function(){o=i.canceled()})},t.prototype.invokeFunction=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._servicesMap.invokeFunction(e,t)},t}()}),define("vs/platform/keybinding/common/keybindingService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IKeybindingService=n.createDecorator("keybindingService")}),define("vs/platform/keybinding/common/keybindingsUtils",["require","exports","vs/base/common/platform"],function(e,t,n){var i=function(){function e(){}return e.bindToCurrentPlatform=function(e){if(n.isWindows){if(e&&e.win)return e.win}else if(n.isMacintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e},e}();t.KeybindingsUtils=i}),define("vs/platform/lifecycle/common/lifecycle",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.ILifecycleService=n.createDecorator("lifecycleService")}),define("vs/platform/lifecycle/common/baseLifecycleService",["require","exports","vs/base/common/eventSource","./lifecycle"],function(e,t,n,i){var r=function(){function e(){this.serviceId=i.ILifecycleService,this._beforeShutdownParticipants=[],this._onShutdown=new n.EventSource}return e.prototype.fireShutdown=function(){this._onShutdown.fire()},e.prototype.addBeforeShutdownParticipant=function(e){this._beforeShutdownParticipants.push(e)},Object.defineProperty(e.prototype,"beforeShutdownParticipants",{get:function(){return this._beforeShutdownParticipants},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onShutdown",{get:function(){return this._onShutdown.value},enumerable:!0,configurable:!0}),e}();t.BaseLifecycleService=r}),define("vs/platform/markers/common/markers",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IMarkerService=n.createDecorator("markerService"),function(e){e[e["transient"]=1]="transient",e[e.permanent=2]="permanent"}(t.MarkerType||(t.MarkerType={}));t.MarkerType});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/markers/common/problemMatcher",["require","exports","vs/nls!vs/platform/markers/common/problemMatcher","vs/base/common/objects","vs/base/common/strings","vs/base/common/assert","vs/base/common/paths","vs/base/common/types","vs/base/common/severity","vs/base/common/uri","vs/base/common/parsers"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e){return a.isString(e.name)}function h(e,t){var n,i=t.fileLocation;return i===m.Absolute?n=e:i===m.Relative&&(n=s.join(t.filePrefix,e)),n=n.replace(/\\/g,"/"),"/"!==n[0]&&(n="/"+n),u["default"].parse("file://"+n)}function p(e){var t=e.pattern;return a.isArray(t)?new b(e):new _(e)}function f(e){return E[e]}!function(e){e[e.Auto=0]="Auto",e[e.Relative=1]="Relative",e[e.Absolute=2]="Absolute"}(t.FileLocationKind||(t.FileLocationKind={}));var m,m=t.FileLocationKind;!function(e){function t(t){return t=t.toLowerCase(),"absolute"===t?e.Absolute:"relative"===t?e.Relative:void 0}e.fromString=t}(m=t.FileLocationKind||(t.FileLocationKind={})),t.problemPatternProperties=["file","message","location","line","column","endLine","endColumn","code","severity","loop","mostSignifikant"],function(e){e[e.allDocuments=0]="allDocuments",e[e.openDocuments=1]="openDocuments",e[e.closedDocuments=2]="closedDocuments"}(t.ApplyToKind||(t.ApplyToKind={}));var v,v=t.ApplyToKind;!function(e){function t(t){return t=t.toLowerCase(),"alldocuments"===t?e.allDocuments:"opendocuments"===t?e.openDocuments:"closeddocuments"===t?e.closedDocuments:void 0}e.fromString=t}(v=t.ApplyToKind||(t.ApplyToKind={})),t.isNamedProblemMatcher=d;var g={E:"error",W:"warning",I:"info"};t.getResource=h,t.createLineMatcher=p;var y=function(){function e(e){this.matcher=e}return e.prototype.handle=function(e,t){return void 0===t&&(t=0),{match:null,"continue":!1}},e.prototype.next=function(e){return null},Object.defineProperty(e.prototype,"matchLength",{get:function(){throw new Error("Subclass reponsibility")},enumerable:!0,configurable:!0}),e.prototype.fillProblemData=function(e,t,n){this.fillProperty(e,"file",t,n,!0),this.fillProperty(e,"message",t,n,!0),this.fillProperty(e,"code",t,n,!0),this.fillProperty(e,"severity",t,n,!0),this.fillProperty(e,"location",t,n,!0),this.fillProperty(e,"line",t,n),this.fillProperty(e,"column",t,n),this.fillProperty(e,"endLine",t,n),this.fillProperty(e,"endColumn",t,n)},e.prototype.fillProperty=function(e,t,n,i,o){if(void 0===o&&(o=!1),a.isUndefined(e[t])&&!a.isUndefined(n[t])&&n[t]<i.length){var s=i[n[t]];o&&(s=r.trim(s)),e[t]=s}},e.prototype.getMarkerMatch=function(e){var t=this.getLocation(e);if(e.file&&t&&e.message){var n={severity:this.getSeverity(e),startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.startLineNumber,endColumn:t.endColumn,message:e.message};return a.isUndefined(e.code)||(n.code=e.code),{description:this.matcher,resource:this.getResource(e.file),marker:n}}},e.prototype.getResource=function(e){return h(e,this.matcher)},e.prototype.getLocation=function(e){if(e.location)return this.parseLocationInfo(e.location);if(!e.line)return null;var t=parseInt(e.line),n=e.column?parseInt(e.column):void 0,i=e.endLine?parseInt(e.endLine):void 0,r=e.endColumn?parseInt(e.endColumn):void 0;return this.createLocation(t,n,i,r)},e.prototype.parseLocationInfo=function(e){if(!e||!e.match(/(\d+|\d+,\d+|\d+,\d+,\d+,\d+)/))return null;var t=e.split(","),n=parseInt(t[0]),i=t.length>1?parseInt(t[1]):void 0;return t.length>3?this.createLocation(n,i,parseInt(t[2]),parseInt(t[3])):this.createLocation(n,i,void 0,void 0)},e.prototype.createLocation=function(e,t,n,i){return e&&t&&n&&i?{startLineNumber:e,startColumn:t,endLineNumber:n,endColumn:i}:e&&t?{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:Number.MAX_VALUE}},e.prototype.getSeverity=function(e){var t=null;if(e.severity){var n=e.severity;n&&n.length>0&&(1===n.length&&g[n[0]]&&(n=g[n[0]]),t=c["default"].fromValue(n))}return(null===t||t===c["default"].Ignore)&&(t=this.matcher.severity||c["default"].Error),t},e}(),_=function(e){function t(t){e.call(this,t),this.pattern=t.pattern}return __extends(t,e),Object.defineProperty(t.prototype,"matchLength",{get:function(){return 1},enumerable:!0,configurable:!0}),t.prototype.handle=function(e,t){void 0===t&&(t=0),o.ok(e.length-t===1);var n=Object.create(null),i=this.pattern.regexp.exec(e[t]);if(i){this.fillProblemData(n,this.pattern,i);var r=this.getMarkerMatch(n);if(r)return{match:r,"continue":!1}}return{match:null,"continue":!1}},t.prototype.next=function(e){return null},t}(y),b=function(e){function t(t){e.call(this,t),this.patterns=t.pattern}return __extends(t,e),Object.defineProperty(t.prototype,"matchLength",{get:function(){return this.patterns.length},enumerable:!0,configurable:!0}),t.prototype.handle=function(e,t){void 0===t&&(t=0),o.ok(e.length-t===this.patterns.length),this.data=Object.create(null);for(var n=this.data,r=0;r<this.patterns.length;r++){var s=this.patterns[r],a=s.regexp.exec(e[r+t]);if(!a)return{match:null,"continue":!1};s.loop&&r===this.patterns.length-1&&(n=i.clone(n)),this.fillProblemData(n,s,a)}var c=this.patterns[this.patterns.length-1].loop;return c||(this.data=null),{match:this.getMarkerMatch(n),"continue":c}},t.prototype.next=function(e){var t=this.patterns[this.patterns.length-1];o.ok(t.loop===!0&&null!==this.data);var n=t.regexp.exec(e);if(!n)return this.data=null,null;var r=i.clone(this.data);return this.fillProblemData(r,t,n),this.getMarkerMatch(r)},t}(y),E=Object.create(null);E.msCompile={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(\w{1,2}\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},E["gulp-tsc"]={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(\d+)\s+(.*)$/,file:1,location:2,code:3,message:4},E.tsc={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(TS\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},E.cpp={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(C\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},E.csc={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(CS\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},E.vb={regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(BC\d+)\s*:\s*(.*)$/,file:1,location:2,severity:3,code:4,message:5},E.lessCompile={regexp:/^\s*(.*) in file (.*) line no. (\d+)$/,message:1,file:2,line:3},E.jshint={regexp:/^(.*):\s+line\s+(\d+),\s+col\s+(\d+),\s(.+?)(?:\s+\((\w)(\d+)\))?$/,file:1,line:2,column:3,message:4,severity:5,code:6},E["jshint-stylish"]=[{regexp:/^(.+)$/,file:1},{regexp:/^\s+line\s+(\d+)\s+col\s+(\d+)\s+(.+?)(?:\s+\((\w)(\d+)\))?$/,line:1,column:2,message:3,severity:4,code:5,loop:!0}],E["eslint-compact"]={regexp:/^(.+):\sline\s(\d+),\scol\s(\d+),\s(Error|Warning|Info)\s-\s(.+)\s\((.+)\)$/,file:1,line:2,column:3,severity:4,message:5,code:6},E["eslint-stylish"]=[{regexp:/^([^\s].*)$/,file:1},{regexp:/^\s+(\d+):(\d+)\s+(error|warning|info)\s+(.+?)\s\s+(.*)$/,line:1,column:2,severity:3,message:4,code:5,loop:!0}],t.defaultPattern=f;var S;!function(e){function t(e){return a.isString(e.name)}var n;!function(e){e.Error="error",e.Warning="warning",e.Info="info"}(n=e.ProblemSeverity||(e.ProblemSeverity={})),e.isNamedProblemMatcher=t}(S=t.Config||(t.Config={}));var w=function(e){function r(t,n,i){void 0===i&&(i=new l.ValidationStatus),e.call(this,n,i),this.resolver=t}return __extends(r,e),r.prototype.parse=function(e){var t=this.createProblemMatcher(e);return this.checkProblemMatcherValid(e,t)?(this.addWatchingMatcher(e,t),t):null},r.prototype.checkProblemMatcherValid=function(e,t){return t&&t.pattern&&t.owner&&!a.isUndefined(t.fileLocation)?!0:(this.status.state=l.ValidationState.Fatal,this.log(n.localize(0,null,JSON.stringify(e,null,4))),!1)},r.prototype.createProblemMatcher=function(e){var t=null,r=e.owner?e.owner:"external",o=a.isString(e.applyTo)?v.fromString(e.applyTo):v.allDocuments;o||(o=v.allDocuments);var s,u=void 0,d=void 0;if(a.isUndefined(e.fileLocation))u=m.Relative,d="${cwd}";else if(a.isString(e.fileLocation))s=m.fromString(e.fileLocation),s&&(u=s,s===m.Relative&&(d="${cwd}"));else if(a.isStringArray(e.fileLocation)){var h=e.fileLocation;h.length>0&&(s=m.fromString(h[0]),1===h.length&&s===m.Absolute?u=s:2===h.length&&s===m.Relative&&h[1]&&(u=s,d=h[1]))}var p=e.pattern?this.createProblemPattern(e.pattern):void 0,f=e.severity?c["default"].fromValue(e.severity):void 0;if(f===c["default"].Ignore&&(this.status.state=l.ValidationState.Info,this.log(n.localize(1,null,e.severity)),f=c["default"].Error),a.isString(e.base)){var g=e.base;if(g.length>1&&"$"===g[0]){var y=this.resolver.get(g.substring(1));y&&(t=i.clone(y),e.owner&&(t.owner=r),u&&(t.fileLocation=u),d&&(t.filePrefix=d),e.pattern&&(t.pattern=p),e.severity&&(t.severity=f))}}else u&&(t={owner:r,applyTo:o,fileLocation:u,pattern:p},d&&(t.filePrefix=d),f&&(t.severity=f));return S.isNamedProblemMatcher(e)&&(t.name=e.name),t},r.prototype.createProblemPattern=function(e){var t;if(!a.isString(e)){if(a.isArray(e)){for(var i=e,r=[],o=0;o<i.length;o++)t=this.createSingleProblemPattern(i[o],!1),o<i.length-1&&!a.isUndefined(t.loop)&&t.loop&&(t.loop=!1,this.status.state=l.ValidationState.Error,this.log(n.localize(2,null))),r.push(t);return this.validateProblemPattern(r),r}return t=this.createSingleProblemPattern(e,!0),!a.isUndefined(t.loop)&&t.loop&&(t.loop=!1,this.status.state=l.ValidationState.Error,this.log(n.localize(3,null))),this.validateProblemPattern([t]),t}var s=e;return s.length>1&&"$"===s[0]?f(s.substring(1)):null},r.prototype.createSingleProblemPattern=function(e,n){var r={regexp:this.createRegularExpression(e.regexp)};return t.problemPatternProperties.forEach(function(t){a.isUndefined(e[t])||(r[t]=e[t])}),n&&(r=r.location?i.mixin(r,{file:1,message:4},!1):i.mixin(r,{file:1,line:2,column:3,message:4},!1)),r},r.prototype.validateProblemPattern=function(e){var t,i,r,o,s=0;e.forEach(function(e){t=t||!!e.file,i=i||!!e.message,r=r||!!e.location,o=o||!!e.line,e.regexp&&s++}),s!==e.length&&(this.status.state=l.ValidationState.Error,this.log(n.localize(4,null))),t&&i&&(r||o)||(this.status.state=l.ValidationState.Error,this.log(n.localize(5,null)))},r.prototype.addWatchingMatcher=function(e,t){var i=this.createRegularExpression(e.watchedTaskBeginsRegExp),r=this.createRegularExpression(e.watchedTaskEndsRegExp);if(i&&r)return void(t.watching={activeOnStart:!1,beginsPattern:{regexp:i},endsPattern:{regexp:r}});if(!a.isUndefinedOrNull(e.watching)){var o=e.watching,s=this.createWatchingPattern(o.beginsPattern),c=this.createWatchingPattern(o.endsPattern);return s&&c?void(t.watching={activeOnStart:a.isBoolean(o.activeOnStart)?o.activeOnStart:!1,beginsPattern:s,endsPattern:c}):void((s||c)&&(this.status.state=l.ValidationState.Error,this.log(n.localize(6,null))))}},r.prototype.createWatchingPattern=function(e){if(a.isUndefinedOrNull(e))return null;var t,n;return a.isString(e)?t=this.createRegularExpression(e):(t=this.createRegularExpression(e.regexp),a.isNumber(e.file)&&(n=e.file)),t?n?{regexp:t,file:n}:{regexp:t}:null},r.prototype.createRegularExpression=function(e){var t=null;if(!e)return t;try{t=new RegExp(e)}catch(i){this.status.state=l.ValidationState.Fatal,this.log(n.localize(7,null,e))}return t},r}(l.Parser);t.ProblemMatcherParser=w;var C=function(){function e(){this.matchers=Object.create(null);
}return e.prototype.onProblemMatcher=function(e){var t={log:function(e){console.warn(e)}},n=new w(this,t),i=n.parse(e);d(i)&&n.status.isOK()&&this.add(i.name,i)},e.prototype.add=function(e,t){this.matchers[e]=t},e.prototype.get=function(e){return this.matchers[e]},e.prototype.exists=function(e){return!!this.matchers[e]},e.prototype.remove=function(e){delete this.matchers[e]},e}();t.ProblemMatcherRegistry=C,t.registry=new C,t.registry.add("msCompile",{owner:"msCompile",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("msCompile")}),t.registry.add("lessCompile",{owner:"lessCompile",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("lessCompile"),severity:c["default"].Error}),t.registry.add("tsc",{owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("tsc")});var T={owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("tsc"),watching:{activeOnStart:!0,beginsPattern:{regexp:/^\s*(?:message TS6032:|\d{1,2}:\d{1,2}:\d{1,2}(?: AM| PM)? -) File change detected\. Starting incremental compilation\.\.\./},endsPattern:{regexp:/^\s*(?:message TS6042:|\d{1,2}:\d{1,2}:\d{1,2}(?: AM| PM)? -) Compilation complete\. Watching for file changes\./}}};T.tscWatch=!0,t.registry.add("tsc-watch",T),t.registry.add("gulp-tsc",{owner:"typescript",applyTo:v.closedDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("gulp-tsc")}),t.registry.add("jshint",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("jshint")}),t.registry.add("jshint-stylish",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Absolute,pattern:f("jshint-stylish")}),t.registry.add("eslint-compact",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("eslint-compact")}),t.registry.add("eslint-stylish",{owner:"javascript",applyTo:v.allDocuments,fileLocation:m.Relative,filePrefix:"${cwd}",pattern:f("eslint-stylish")})}),define("vs/platform/message/common/message",["require","exports","vs/nls!vs/platform/message/common/message","vs/base/common/winjs.base","vs/base/common/severity","vs/platform/instantiation/common/instantiation","vs/base/common/actions"],function(e,t,n,i,r,o,s){t.CloseAction=new s.Action("close.message",n.localize(0,null),null,!0,function(){return i.Promise.as(!0)}),t.CancelAction=new s.Action("close.message",n.localize(1,null),null,!0,function(){return i.Promise.as(!0)}),t.IMessageService=o.createDecorator("messageService"),t.Severity=r["default"]}),define("vs/platform/platform",["require","exports","vs/base/common/types","vs/base/common/assert"],function(e,t,n,i){var r=function(){function e(){this.data={}}return e.prototype.add=function(e,t){i.ok(n.isString(e)),i.ok(n.isObject(t)),i.ok(!this.data.hasOwnProperty(e),"There is already an extension with this id"),this.data[e]=t},e.prototype.knows=function(e){return this.data.hasOwnProperty(e)},e.prototype.as=function(e){return this.data[e]||null},e}();t.Registry=new r;var o=function(){function e(){this.toBeInstantiated=[],this.instances=[]}return e.prototype.setInstantiationService=function(e){for(this.instantiationService=e;this.toBeInstantiated.length>0;){var t=this.toBeInstantiated.shift();this.instantiate(t)}},e.prototype.instantiate=function(e){var t=this.instantiationService.createInstance(e);this.instances.push(t)},e.prototype._register=function(e){this.instantiationService?this.instantiate(e):this.toBeInstantiated.push(e)},e.prototype._getInstances=function(){return this.instances.slice(0)},e.prototype._setInstances=function(e){this.instances=e},e}();t.BaseRegistry=o}),define("vs/editor/browser/editorBrowserExtensions",["require","exports","vs/platform/platform"],function(e,t,n){var i;!function(e){function t(e){n.Registry.as(o.EditorContributions).registerEditorBrowserContribution(e)}function i(){return n.Registry.as(o.EditorContributions).getEditorBrowserContributions()}e.registerEditorContribution=t,e.getEditorContributions=i}(i=t.EditorBrowserRegistry||(t.EditorBrowserRegistry={}));var r=function(){function e(e){this._ctor=e}return e.prototype.createInstance=function(e,t){return e.createInstance(this._ctor,t)},e}(),o={EditorContributions:"editor.contributions"},s=function(){function e(){this.editorContributions=[]}return e.prototype.registerEditorBrowserContribution=function(e){this.editorContributions.push(new r(e))},e.prototype.getEditorBrowserContributions=function(){return this.editorContributions.slice(0)},e}();n.Registry.add(o.EditorContributions,new s)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard",["require","exports","vs/base/browser/browser","vs/editor/browser/editorBrowserExtensions","vs/base/browser/dom","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/base/common/lifecycle","vs/platform/instantiation/common/instantiation","vs/css!./iPadShowKeyboard"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e,t){var i=this;this.editor=e,this.toDispose=[],n.isIPad&&(this.toDispose.push(e.addListener2(s.EventType.ConfigurationChanged,function(){return i.update()})),this.update())}return e.prototype.update=function(){var e=!!this.widget,t=!this.editor.getConfiguration().readOnly;!e&&t?this.widget=new l(this.editor):e&&!t&&(this.widget.dispose(),this.widget=null)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=a.disposeAll(this.toDispose),this.widget&&(this.widget.dispose(),this.widget=null)},e.ID="editor.contrib.iPadShowKeyboard",e=__decorate([__param(1,c.INullService)],e)}();t.iPadShowKeyboard=u;var l=function(){function e(e){var t=this;this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._toDispose=[],this._toDispose.push(r.addDisposableListener(this._domNode,"touchstart",function(e){t.editor.focus()})),this._toDispose.push(r.addDisposableListener(this._domNode,"focus",function(e){t.editor.focus()})),this.editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this.editor.removeOverlayWidget(this),this._toDispose=a.disposeAll(this._toDispose)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:o.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER}},e.ID="editor.contrib.ShowKeyboardWidget",e}();i.EditorBrowserRegistry.registerEditorContribution(u)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/outlineMarker/browser/outlineMarker",["require","exports","vs/base/common/lifecycle","vs/base/common/async","vs/base/common/errors","vs/editor/common/editorCommon","vs/editor/browser/editorBrowserExtensions","vs/editor/common/core/range","vs/platform/instantiation/common/instantiation","vs/css!./outlineMarker"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e,t){this.afterLineNumber=e.startLineNumber-1,this.heightInPx=4,this.suppressMouseDown=!0,this.domNode=document.createElement("div");var n=document.createElement("hr");n.className="outlineRule "+t,this.domNode.appendChild(n)}return e}(),l=function(){function e(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return e.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},e.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},e.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;i>n;n++)this._addDecorationsCallbacks[n](t[n])},e}(),d=function(){function e(e,t,n,i,r){var o=this;this._editor=n,this._viewZone=new u(e,t),this._viewZoneId=r.addZone(this._viewZone),i.addDecoration({range:e,options:{}},function(e){o._decorationId=e})}return e.prototype.dispose=function(e,t){e.removeDecoration(this._decorationId),t.removeZone(this._viewZoneId)},e.prototype.getLine=function(){return this._viewZone.afterLineNumber},e.prototype.update=function(e){var t=this._editor.getModel().getDecorationRange(this._decorationId);this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId)},e}(),h=function(){function e(e,t){var n=this;this._editor=e,this._globalToDispose=[],this._localToDispose=[],this._markers=[],this._currentOutlinePromise=null,this._globalToDispose.push(this._editor.addListener2(o.EventType.ModelChanged,function(){return n.onChange(!0)})),this._globalToDispose.push(this._editor.addListener2(o.EventType.ModelModeChanged,function(){return n.onChange(!1)})),this._globalToDispose.push(this._editor.addListener2(o.EventType.ModelModeSupportChanged,function(e){e.outlineSupport&&n.onChange(!1)})),this._globalToDispose.push(this._editor.addListener2(o.EventType.ConfigurationChanged,function(e){e.outlineMarkers&&n.onChange(!1)})),this.onChange(!1)}return e.prototype.dispose=function(){this.localDispose(),this._globalToDispose=n.disposeAll(this._globalToDispose)},e.prototype.localDispose=function(){this._currentOutlinePromise&&this._currentOutlinePromise.cancel(),this._localToDispose=n.disposeAll(this._localToDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onChange=function(e){var t=this;if(e&&(this._markers=[]),this.localDispose(),this._editor.getConfiguration().outlineMarkers){var n=this._editor.getModel();if(n){var o=n.getMode();if(o.outlineSupport){var s=new i.RunOnceScheduler(function(){t._currentOutlinePromise&&t._currentOutlinePromise.cancel(),t._currentOutlinePromise=o.outlineSupport.getOutline(n.getAssociatedResource()),t._currentOutlinePromise.then(function(e){t.renderOutlines(e)},function(e){r.onUnexpectedError(e)})},250);this._localToDispose.push(s),this._localToDispose.push(this._editor.addListener2("change",function(){t._editor.changeViewZones(function(e){t._markers.forEach(function(t){t.update(e)})}),s.schedule()})),this._localToDispose.push({dispose:function(){if(t._markers.length>0){var e=new l;t._editor.changeViewZones(function(n){t._markers.forEach(function(t){return t.dispose(e,n)}),t._markers=[]}),t._editor.changeDecorations(function(t){e.commit(t)})}}}),s.schedule()}}}},e.prototype.renderOutlines=function(e){var t=this,n=this._editor.getCenteredRangeInViewport(),i=this._markers.length;this._editor.changeDecorations(function(n){var i=new l;t._editor.changeViewZones(function(n){t._markers.forEach(function(e){return e.dispose(i,n)}),t._markers=[],t.renderOutlinesRecursive(e,i,n)}),i.commit(n)});var r=this._markers.length;Math.abs(i-r)>1&&this._editor.revealRangeInCenter(n)},e.prototype.renderOutlinesRecursive=function(e,t,n){var i=this;e&&e.forEach(function(e){if("class"===e.type||"method"===e.type||"function"===e.type){var r=a.Range.lift(e.range);if(!i.alreadyHasMarkerAtRange(r)){var o=new d(r,e.type,i._editor,t,n);i._markers.push(o)}}i.renderOutlinesRecursive(e.children,t,n)})},e.prototype.alreadyHasMarkerAtRange=function(e){for(var t=0;t<this._markers.length;++t)if(this._markers[t].getLine()===e.startLineNumber-1)return!0;return!1},e.ID="editor.outlineMarker",e=__decorate([__param(1,c.INullService)],e)}();t.OutlineMarkerContribution=h,s.EditorBrowserRegistry.registerEditorContribution(h)}),define("vs/languages/typescript/common/typescript",["require","exports","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/uri"],function(e,t,n,i,r){function o(e){return"string"==typeof e?0===e.indexOf("ts://defaultlib"):"ts"===e.scheme&&"defaultlib"===e.authority}!function(e){e[e.Changed=0]="Changed",e[e.Added=1]="Added",e[e.Removed=2]="Removed"}(t.ChangeKind||(t.ChangeKind={}));var s=t.ChangeKind;t.defaultLib=r["default"].create("ts","defaultlib","/vs/text!vs/languages/typescript/common/lib/lib.d.ts"),t.defaultLibES6=r["default"].create("ts","defaultlib","/vs/text!vs/languages/typescript/common/lib/lib.es6.d.ts"),t.isDefaultLib=o,t.virtualProjectResource=r["default"].create("ts","projects","/virtual/1");var a=function(){function e(){this._needsProjectUpdate=!1,this._fileChanges=[],this._projectChange={kind:s.Changed,resource:t.virtualProjectResource,files:[],options:void 0}}return e.prototype.setConsumer=function(e){this._consumer=e},e.prototype.resolveProjects=function(){var e=[];return this._fileChanges.length&&(e.push(this._consumer.acceptFileChanges(this._fileChanges.slice(0))),this._fileChanges.length=0),this._needsProjectUpdate&&(e.push(this._consumer.acceptProjectChanges([this._projectChange])),this._needsProjectUpdate=!1),n.Promise.join(e)},e.prototype.resolveFiles=function(){},e.prototype.addExtraLib=function(e,t){var n=t?r["default"].file(t):r["default"].create("extralib",void 0,Date.now().toString());this._needsProjectUpdate=!0,this._projectChange.files.push(n),this._fileChanges.push({kind:s.Added,resource:n,content:e})},e.prototype.setCompilerOptions=function(e){this._needsProjectUpdate=!0,this._projectChange.options=e},e}();t.DefaultProjectResolver=a;var c;!function(e){function t(t,n){e.ProjectResolver.addExtraLib(t,n)}function n(t){e.ProjectResolver.setCompilerOptions(t)}e.ProjectResolver=new a,e.addExtraLib=t,e.setCompilerOptions=n}(c=t.Defaults||(t.Defaults={}));var u;!function(e){function t(e){r=e}function n(){return r}e.Identifier="typescript",i.Registry.add(e.Identifier,e);var r;e.setProjectResolver=t,e.getProjectResolver=n}(u=t.Extensions||(t.Extensions={}))}),define("vs/languages/javascript/common/javascript.extensions",["require","exports","vs/platform/platform","vs/languages/typescript/common/typescript"],function(e,t,n,i){var r;!function(e){function t(t,n){e.ProjectResolver.addExtraLib(t,n)}function n(t){e.ProjectResolver.setCompilerOptions(t)}e.ProjectResolver=new i.DefaultProjectResolver,e.addExtraLib=t,e.setCompilerOptions=n}(r=t.Defaults||(t.Defaults={}));var o;!function(e){function t(e){r=e}function i(){return r}e.Identifier="javascript",n.Registry.add(e.Identifier,e);var r;e.setProjectResolver=t,e.getProjectResolver=i}(o=t.Extensions||(t.Extensions={}))}),define("vs/platform/jsonschemas/common/jsonContributionRegistry",["require","exports","vs/nls!vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/platform","vs/base/common/eventEmitter"],function(e,t,n,i,r){function o(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}t.Extensions={JSONContribution:"base.contributions.json"};var s=function(){function e(){this.schemasById={},this.schemaAssociations={},this.eventEmitter=new r.EventEmitter}return e.prototype.addRegistryChangedListener=function(e){return this.eventEmitter.addListener2("registryChanged",e)},e.prototype.registerSchema=function(e,t){this.schemasById[o(e)]=t,this.eventEmitter.emit("registryChanged",{})},e.prototype.addSchemaFileAssociation=function(e,t){var n=this.schemaAssociations[e];n||(n=[],this.schemaAssociations[e]=n),n.push(t),this.eventEmitter.emit("registryChanged",{})},e.prototype.getSchemaContributions=function(){return{schemas:this.schemasById,schemaAssociations:this.schemaAssociations}},e}(),a=new s;i.Registry.add(t.Extensions.JSONContribution,a),a.registerSchema("http://json-schema.org/draft-04/schema#",{id:"http://json-schema.org/draft-04/schema#",title:n.localize(0,null),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{type:"string","enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri",description:n.localize(1,null)},$schema:{type:"string",format:"uri",description:n.localize(2,null)},title:{type:"string",description:n.localize(3,null)},description:{type:"string",description:n.localize(4,null)},"default":{description:n.localize(5,null)},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0,description:n.localize(6,null)},maximum:{type:"number",description:n.localize(7,null)},exclusiveMaximum:{type:"boolean","default":!1,description:n.localize(8,null)},minimum:{type:"number",description:n.localize(9,null)},exclusiveMinimum:{type:"boolean","default":!1,description:n.localize(10,null)},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(11,null)},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(12,null)},pattern:{type:"string",format:"regex",description:n.localize(13,null)},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(14,null)},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{},description:n.localize(15,null)},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(16,null)},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(17,null)},uniqueItems:{type:"boolean","default":!1,description:n.localize(18,null)},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(19,null)},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(20,null)},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:n.localize(21,null)},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(22,null)},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(23,null)},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(24,null)},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(25,null)},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:n.localize(26,null)},"enum":{type:"array",minItems:1,uniqueItems:!0,description:n.localize(27,null)},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}],description:n.localize(28,null)},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(29,null)},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(30,null)},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(31,null)},not:{allOf:[{$ref:"#"}],description:n.localize(32,null)}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}})}),define("vs/platform/keybinding/common/keybindingsRegistry",["require","exports","vs/platform/platform","vs/base/common/types","vs/platform/keybinding/common/keybindingsUtils","vs/base/common/keyCodes","vs/base/common/platform"],function(e,t,n,i,r,o,s){var a=function(){function e(){this.KEYBINDING_CONTEXT_OPERATOR_EQUAL="equal",this.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL="not_equal",this.WEIGHT={editorCore:function(e){return void 0===e&&(e=0),0+e},editorContrib:function(e){return void 0===e&&(e=0),100+e},workbenchContrib:function(e){return void 0===e&&(e=0),200+e},builtinExtension:function(e){return void 0===e&&(e=0),300+e},externalExtension:function(e){return void 0===e&&(e=0),400+e}},this._keybindings=[],this._commands=Object.create(null)}return e.prototype.registerCommandRule=function(e){var t=this,n=r.KeybindingsUtils.bindToCurrentPlatform(e);n&&n.primary&&this.registerDefaultKeybinding(n.primary,e.id,e.weight,0,e.context),n&&Array.isArray(n.secondary)&&n.secondary.forEach(function(n,i){return t.registerDefaultKeybinding(n,e.id,e.weight,-i-1,e.context)})},e.prototype.registerCommandDesc=function(e){this.registerCommandRule(e);var t=e.handler,n=e.description||t.description;if("object"==typeof n){for(var r=n,o=[],s=0,a=r.args;s<a.length;s++){var c=a[s];o.push(c.constraint)}t=function(t,n){return i.validateConstraints(n,o),e.handler(t,n)}}t.description=n,this._commands[e.id]=t},e.prototype.getCommands=function(){return this._commands},e.prototype.registerDefaultKeybinding=function(e,t,n,i,r){s.isWindows&&o.BinaryKeybindings.hasCtrlCmd(e)&&!o.BinaryKeybindings.hasShift(e)&&o.BinaryKeybindings.hasAlt(e)&&!o.BinaryKeybindings.hasWinCtrl(e)&&/^[A-Z0-9\[\]\|\;\'\,\.\/\`]$/.test(o.KeyCode.toString(o.BinaryKeybindings.extractKeyCode(e)))&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t),this._keybindings.push({keybinding:e,command:t,context:r,weight1:n,weight2:i})},e.prototype.getDefaultKeybindings=function(){return this._keybindings},e}();t.KeybindingsRegistry=new a,t.Extensions={EditorModes:"platform.keybindingsRegistry"},n.Registry.add(t.Extensions.EditorModes,t.KeybindingsRegistry)}),define("vs/editor/common/config/config",["require","exports","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/editor/common/editor","vs/editor/common/services/codeEditorService","vs/editor/common/editorCommon","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s){function a(e,t,n,i){var o=t.get(r.ICodeEditorService),s=n.context.editorId;if(!s)return i&&console.warn("Cannot execute "+e+" because no editor is focused."),null;var a=o.getCodeEditor(s);return a?a:(i&&console.warn("Cannot execute "+e+" because editor `"+s+"` could not be found."),null)}function c(e,t,n,i){var r=a(e,t,n,!0);r&&i(r)}function u(e){var t=e.get(i.IEditorService),n=t.getActiveEditor&&t.getActiveEditor();if(n){var r=n.getControl();if(r&&"function"==typeof r.getEditorType){var o=r;return o}}return null}function l(e,t,n){c(e,t,n,function(t){t.trigger("keyboard",e,n)})}function d(e,t,i,r){void 0===i&&(i=n.KeybindingsRegistry.WEIGHT.editorCore());var s={id:e,handler:l.bind(null,e),weight:i,context:r?r:[{key:o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS}],primary:t.primary,secondary:t.secondary,win:t.win,mac:t.mac,linux:t.linux};n.KeybindingsRegistry.registerCommandDesc(s)}function h(e,t){return e?s.KeyMod.Shift|s.KeyMod.Alt|t:s.KeyMod.Alt|t}function p(e,t){return e?s.KeyMod.CtrlCmd|s.KeyMod.Shift|t:s.KeyMod.CtrlCmd|t}function f(e,t,n){d(e,{primary:p(t,n),mac:{primary:h(t,n)}})}function m(e,t){var n=o.Handler.SelectAll;if(t.context[o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS]){var i=a(n,e,t,!1);if(i)return void i.trigger("keyboard",n,t)}var r=document.activeElement;if(r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0)return void r.select();var s=u(e);return s?void s.trigger("keyboard",n,t):void 0}t.findFocusedEditor=a,t.withCodeEditorFromCommandHandler=c,t.getActiveEditor=u;var v=o.Handler;d(v.CursorLeft,{primary:s.KeyCode.LeftArrow,mac:{primary:s.KeyCode.LeftArrow,secondary:[s.KeyMod.WinCtrl|s.KeyCode.KEY_B]}}),d(v.CursorLeftSelect,{primary:s.KeyMod.Shift|s.KeyCode.LeftArrow}),d(v.CursorRight,{primary:s.KeyCode.RightArrow,mac:{primary:s.KeyCode.RightArrow,secondary:[s.KeyMod.WinCtrl|s.KeyCode.KEY_F]}}),d(v.CursorRightSelect,{primary:s.KeyMod.Shift|s.KeyCode.RightArrow}),d(v.CursorUp,{primary:s.KeyCode.UpArrow,mac:{primary:s.KeyCode.UpArrow,secondary:[s.KeyMod.WinCtrl|s.KeyCode.KEY_P]}}),d(v.CursorUpSelect,{primary:s.KeyMod.Shift|s.KeyCode.UpArrow,secondary:[p(!0,s.KeyCode.UpArrow)],mac:{primary:s.KeyMod.Shift|s.KeyCode.UpArrow},linux:{primary:s.KeyMod.Shift|s.KeyCode.UpArrow}}),d(v.CursorDown,{primary:s.KeyCode.DownArrow,mac:{primary:s.KeyCode.DownArrow,secondary:[s.KeyMod.WinCtrl|s.KeyCode.KEY_N]}}),d(v.CursorDownSelect,{primary:s.KeyMod.Shift|s.KeyCode.DownArrow,secondary:[p(!0,s.KeyCode.DownArrow)],mac:{primary:s.KeyMod.Shift|s.KeyCode.DownArrow},linux:{primary:s.KeyMod.Shift|s.KeyCode.DownArrow}}),d(v.CursorPageUp,{primary:s.KeyCode.PageUp}),d(v.CursorPageUpSelect,{primary:s.KeyMod.Shift|s.KeyCode.PageUp}),d(v.CursorPageDown,{primary:s.KeyCode.PageDown}),d(v.CursorPageDownSelect,{primary:s.KeyMod.Shift|s.KeyCode.PageDown}),d(v.CursorHome,{primary:s.KeyCode.Home,mac:{primary:s.KeyCode.Home,secondary:[s.KeyMod.CtrlCmd|s.KeyCode.LeftArrow,s.KeyMod.WinCtrl|s.KeyCode.KEY_A]}}),d(v.CursorHomeSelect,{primary:s.KeyMod.Shift|s.KeyCode.Home,mac:{primary:s.KeyMod.Shift|s.KeyCode.Home,secondary:[s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.LeftArrow]}}),d(v.CursorEnd,{primary:s.KeyCode.End,mac:{primary:s.KeyCode.End,secondary:[s.KeyMod.CtrlCmd|s.KeyCode.RightArrow,s.KeyMod.WinCtrl|s.KeyCode.KEY_E]}}),d(v.CursorEndSelect,{primary:s.KeyMod.Shift|s.KeyCode.End,mac:{primary:s.KeyMod.Shift|s.KeyCode.End,secondary:[s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.RightArrow]}}),d(v.ExpandLineSelection,{primary:s.KeyMod.CtrlCmd|s.KeyCode.KEY_I}),d(v.ScrollLineUp,{primary:s.KeyMod.CtrlCmd|s.KeyCode.UpArrow,mac:{primary:s.KeyMod.WinCtrl|s.KeyCode.PageUp}}),d(v.ScrollLineDown,{primary:s.KeyMod.CtrlCmd|s.KeyCode.DownArrow,mac:{primary:s.KeyMod.WinCtrl|s.KeyCode.PageDown}}),d(v.ScrollPageUp,{primary:s.KeyMod.CtrlCmd|s.KeyCode.PageUp}),d(v.ScrollPageDown,{primary:s.KeyMod.CtrlCmd|s.KeyCode.PageDown}),d(v.Tab,{primary:s.KeyCode.Tab},n.KeybindingsRegistry.WEIGHT.editorCore(),[{key:o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS},{key:o.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS,operator:n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0}]),d(v.Outdent,{primary:s.KeyMod.Shift|s.KeyCode.Tab},n.KeybindingsRegistry.WEIGHT.editorCore(),[{key:o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS},{key:o.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS,operator:n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0}]),d(v.DeleteLeft,{primary:s.KeyCode.Backspace,secondary:[s.KeyMod.Shift|s.KeyCode.Backspace],mac:{primary:s.KeyCode.Backspace,secondary:[s.KeyMod.Shift|s.KeyCode.Backspace,s.KeyMod.WinCtrl|s.KeyCode.KEY_H,s.KeyMod.WinCtrl|s.KeyCode.Backspace]}}),d(v.DeleteRight,{primary:s.KeyCode.Delete,mac:{primary:s.KeyCode.Delete,secondary:[s.KeyMod.WinCtrl|s.KeyCode.KEY_D,s.KeyMod.WinCtrl|s.KeyCode.Delete]}}),d(v.DeleteAllLeft,{primary:null,mac:{primary:s.KeyMod.CtrlCmd|s.KeyCode.Backspace}}),d(v.DeleteAllRight,{primary:null,mac:{primary:s.KeyMod.WinCtrl|s.KeyCode.KEY_K,secondary:[s.KeyMod.CtrlCmd|s.KeyCode.Delete]}}),f(v.CursorWordLeft,!1,s.KeyCode.LeftArrow),f(v.CursorWordLeftSelect,!0,s.KeyCode.LeftArrow),f(v.CursorWordRight,!1,s.KeyCode.RightArrow),f(v.CursorWordRightSelect,!0,s.KeyCode.RightArrow),f(v.DeleteWordLeft,!1,s.KeyCode.Backspace),f(v.DeleteWordRight,!1,s.KeyCode.Delete),d(v.CancelSelection,{primary:s.KeyCode.Escape},n.KeybindingsRegistry.WEIGHT.editorCore(),[{key:o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS},{key:o.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION}]),d(v.RemoveSecondaryCursors,{primary:s.KeyCode.Escape},n.KeybindingsRegistry.WEIGHT.editorCore(1),[{key:o.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS},{key:o.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS}]),d(v.CursorTop,{primary:s.KeyMod.CtrlCmd|s.KeyCode.Home,mac:{primary:s.KeyMod.CtrlCmd|s.KeyCode.UpArrow}}),d(v.CursorTopSelect,{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.Home,mac:{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.UpArrow}}),d(v.CursorBottom,{primary:s.KeyMod.CtrlCmd|s.KeyCode.End,mac:{primary:s.KeyMod.CtrlCmd|s.KeyCode.DownArrow}}),d(v.CursorBottomSelect,{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.End,mac:{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.DownArrow}}),d(v.LineBreakInsert,{primary:null,mac:{primary:s.KeyMod.WinCtrl|s.KeyCode.KEY_O}}),d(v.Undo,{primary:s.KeyMod.CtrlCmd|s.KeyCode.KEY_Z}),d(v.CursorUndo,{primary:s.KeyMod.CtrlCmd|s.KeyCode.KEY_U}),d(v.Redo,{primary:s.KeyMod.CtrlCmd|s.KeyCode.KEY_Y,secondary:[s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.KEY_Z],mac:{primary:s.KeyMod.CtrlCmd|s.KeyMod.Shift|s.KeyCode.KEY_Z}}),n.KeybindingsRegistry.registerCommandDesc({id:"editor.action.selectAll",handler:m,weight:n.KeybindingsRegistry.WEIGHT.editorCore(),context:null,primary:s.KeyMod.CtrlCmd|s.KeyCode.KEY_A})}),define("vs/platform/keybinding/common/commonKeybindingResolver",["require","exports","vs/platform/keybinding/common/keybindingsRegistry","vs/base/common/platform","vs/base/common/keyCodes"],function(e,t,n,i,r){function o(e,t){return e.length<t?e+new Array(t-e.length).join(" "):e}function s(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}var a=function(){function e(t,n,i){void 0===i&&(i=!0),t=t.slice(0).sort(s),this._defaultKeybindings=t,this._shouldWarnOnConflict=i,this._defaultBoundCommands=Object.create(null);for(var o=0,a=t.length;a>o;o++)this._defaultBoundCommands[t[o].command]=!0;this._map=Object.create(null),this._lookupMap=Object.create(null),this._lookupMapUnreachable=Object.create(null),this._chords=Object.create(null);for(var c=t.length,u=t.concat(n),o=0,a=u.length;a>o;o++){var l=u[o];if(0!==l.keybinding){l.context&&(l.context=l.context.map(e.normalizeRule));var d={context:l.context,keybinding:l.keybinding,commandId:l.command};if(r.BinaryKeybindings.hasChord(l.keybinding)){var h=r.BinaryKeybindings.extractFirstPart(l.keybinding),p=r.BinaryKeybindings.extractChordPart(l.keybinding);this._chords[h]=this._chords[h]||Object.create(null),this._chords[h][p]=this._chords[h][p]||[],this._chords[h][p].push(d),this._addKeyPress(h,d,l,c>o)}else this._addKeyPress(l.keybinding,d,l,c>o)}}}return e.prototype._addKeyPress=function(t,n,i,o){if(!this._map[t])return this._map[t]=[n],void this._addToLookupMap(i);for(var s=this._map[t],a=s.length-1;a>=0;a--){var c=s[a];c.commandId!==i.command&&(r.BinaryKeybindings.hasChord(c.keybinding)&&r.BinaryKeybindings.hasChord(n.keybinding)&&c.keybinding!==n.keybinding||e.contextIsEntirelyIncluded(!0,c.context,i.context)&&(this._shouldWarnOnConflict&&o&&console.warn("Conflict detected, command `"+c.commandId+"` cannot be triggered by "+r.Keybinding.toUserSettingsLabel(t)),this._lookupMapUnreachable[c.commandId]=this._lookupMapUnreachable[c.commandId]||[],this._lookupMapUnreachable[c.commandId].push(c.keybinding)))}s.push(n),this._addToLookupMap(i)},e.contextIsEntirelyIncluded=function(t,n,i){if(!i||0===i.length)return!0;if(!n||0===n.length)return!1;t||(n=n.map(e.normalizeRule),i=i.map(e.normalizeRule));for(var r=Object.create(null),o=0,s=n.length;s>o;o++)r[e._ruleToString(n[o])]=!0;for(var o=0,s=i.length;s>o;o++)if(!r[e._ruleToString(i[o])])return!1;return!0},e._ruleToString=function(e){var t=e.key;return t+="undefined"==typeof e.operator?";"+n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL:";"+e.operator,t+="undefined"==typeof e.operand?";"+!0:";"+e.operand},e.normalizeRule=function(e){return e.operator===n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL&&"boolean"==typeof e.operand?{key:e.key,operator:n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL,operand:!e.operand}:e},e.prototype._addToLookupMap=function(e){e.command&&(this._lookupMap[e.command]=this._lookupMap[e.command]||[],this._lookupMap[e.command].push(e))},e.prototype.getDefaultBoundCommands=function(){return this._defaultBoundCommands},e.prototype.getDefaultKeybindings=function(){var e=new c;return e.writeLine("["),this._defaultKeybindings.forEach(function(t){u.writeKeybindingItem(e,t),e.writeLine(",")}),e.writeLine("]"),e.toString()},e.prototype.lookupKeybinding=function(e){var t=this._lookupMap[e];if(!t)return[];var n=t.map(function(e){return e.keybinding}),i=this._lookupMapUnreachable[e];i&&(n=n.filter(function(e){return-1===i.indexOf(e)}));var o=[],s=n.filter(function(e){return o.indexOf(e)>=0?!1:(o.push(e),
!0)});return s.map(function(e){return new r.Keybinding(e)}).reverse()},e.prototype.resolve=function(e,t,n){var i=null;if(0!==t){var o=this._chords[t];if(!o)return null;i=o[n]}else i=this._map[n];var s=this._findCommand(e,i);return s?0===t&&r.BinaryKeybindings.hasChord(s.keybinding)?{enterChord:n,commandId:null}:{enterChord:0,commandId:s.commandId}:null},e.prototype._findCommand=function(t,n){if(!n)return null;for(var i=n.length-1;i>=0;i--){var r=n[i];if(e.contextMatchesRules(t,r.context))return r}return null},e.contextMatchesRules=function(t,n){if(!n||0===n.length)return!0;for(var i=0,r=n.length;r>i;i++)if(!e.contextMatchesRule(t,n[i]))return!1;return!0},e.contextMatchesRule=function(e,t){var i="undefined"==typeof t.operator?n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL:t.operator,r="undefined"==typeof t.operand?!0:t.operand;switch(i){case n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL:return r===!1?!e[t.key]:e[t.key]===r;case n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL:return e[t.key]!==r;default:console.warn("Unknown operator "+i)}return!0},e}();t.CommonKeybindingResolver=a;var c=function(){function e(){this._lines=[],this._currentLine=""}return e.prototype.write=function(e){this._currentLine+=e},e.prototype.writeLine=function(e){void 0===e&&(e=""),this._lines.push(this._currentLine+e),this._currentLine=""},e.prototype.toString=function(){return this.writeLine(),this._lines.join("\n")},e}();t.OutputBuilder=c;var u=function(){function e(){}return e.writeKeybindingItem=function(t,n){t.write('{ "key": '+o('"'+e.writeKeybinding(n.keybinding).replace(/\\/g,"\\\\")+'",',25)+' "command": '),n.context?(t.write('"'+n.command+'",'),t.writeLine(),n.context.length>0?(t.write('                                     "when": "'),e.writeKeybindingContexts(t,n.context),t.write('" ')):t.write('"when": "" ')):t.write('"'+n.command+'" '),t.write("}")},e.readKeybindingItem=function(t,n){var i=e.readKeybinding(t.key),r=e.readKeybindingContexts(t.when);return{keybinding:i,command:t.command,context:r,weight1:1e3,weight2:n}},e.writeKeybinding=function(e){return r.Keybinding.toUserSettingsLabel(e)},e.readKeybinding=function(t){if(!t)return null;t=t.toLowerCase().trim();for(var n=!1,o=!1,s=!1,a=!1,c="";/^(ctrl|shift|alt|meta|win|cmd)(\+|\-)/.test(t);)/^ctrl(\+|\-)/.test(t)&&(i.isMacintosh?a=!0:n=!0,t=t.substr("ctrl-".length)),/^shift(\+|\-)/.test(t)&&(o=!0,t=t.substr("shift-".length)),/^alt(\+|\-)/.test(t)&&(s=!0,t=t.substr("alt-".length)),/^meta(\+|\-)/.test(t)&&(i.isMacintosh?n=!0:a=!0,t=t.substr("meta-".length)),/^win(\+|\-)/.test(t)&&(i.isMacintosh?n=!0:a=!0,t=t.substr("win-".length)),/^cmd(\+|\-)/.test(t)&&(i.isMacintosh?n=!0:a=!0,t=t.substr("cmd-".length));/^(up|down|left|right)/.test(t)&&(t=t.replace(/^(up|down|left|right)/,function(e){return e+"arrow"}));var u=0,l=t.indexOf(" ");l>0?(c=t.substring(0,l),u=e.readKeybinding(t.substring(l))):c=t;var d=r.KeyCode.fromString(c),h=0;return n&&(h|=r.KeyMod.CtrlCmd),o&&(h|=r.KeyMod.Shift),s&&(h|=r.KeyMod.Alt),a&&(h|=r.KeyMod.WinCtrl),h|=d,r.KeyMod.chord(h,u)},e.writeKeybindingContexts=function(t,n){var i=n.length-1;n.forEach(function(n,r){e.writeKeybindingContent(t,n),r!==i&&t.write(" && ")})},e.readKeybindingContexts=function(t){if(t){for(var n=[],i=t.split("&&"),r=0;r<i.length;r++)n.push(e.readKeybindingContext(i[r]));return n}},e.writeKeybindingContent=function(e,t){return t.operator&&(t.operator===n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL&&t.operand===!0||t.operator===n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL&&t.operand===!1)?void e.write("!"+t.key):(e.write(t.key),void(t.operator&&(t.operator===n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL?e.write(" == "):e.write(" != "),"boolean"==typeof t.operand?e.write(t.operand):e.write("'"+t.operand+"'"))))},e.readKeybindingContext=function(e){e=e.trim();var t,i=null;if(e.indexOf("!=")>=0)t=e.split("!="),i=n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL;else{if(!(e.indexOf("==")>=0))return/^\!\s*/.test(e)?{key:e.substr(1).trim(),operator:n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0}:{key:e};t=e.split("=="),i=n.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_EQUAL}var r=t[1].trim();if("true"===r)r=!0;else if("false"===r)r=!1;else{var o=/^'([^']*)'$/.exec(r);o&&(r=o[1])}return{key:t[0].trim(),operator:i,operand:r}},e}();t.IOSupport=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/keybinding/browser/keybindingServiceImpl",["require","exports","vs/base/common/severity","vs/base/common/winjs.base","vs/nls!vs/platform/keybinding/browser/keybindingServiceImpl","vs/base/browser/dom","vs/base/browser/keyboardEvent","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/commonKeybindingResolver","vs/base/common/keyCodes","vs/css!./keybindings"],function(e,t,n,i,r,o,s,a,c,u,l){var d="data-keybinding-context",h=function(){function e(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}return e.prototype.setValue=function(e,t){this._value[e]=t},e.prototype.removeValue=function(e){delete this._value[e]},e.prototype.getValue=function(){var e=this._parent?this._parent.getValue():Object.create(null);for(var t in this._value)e[t]=this._value[t];return e},e}();t.KeybindingContext=h;var p=function(){function e(e,t,n){this._parent=e,this._key=t,this._defaultValue=n,"undefined"!=typeof this._defaultValue&&this._parent.setContext(this._key,this._defaultValue)}return e.prototype.set=function(e){this._parent.setContext(this._key,e)},e.prototype.reset=function(){"undefined"==typeof this._defaultValue?this._parent.removeContext(this._key):this._parent.setContext(this._key,this._defaultValue)},e}(),f=function(){function e(e){this.serviceId=c.IKeybindingService,this._myContextId=e,this._instantiationService=null,this._messageService=null}return e.prototype.setMessageService=function(e){this._messageService=e},e.prototype.createKey=function(e,t){return new p(this,e,t)},e.prototype.setInstantiationService=function(e){this._instantiationService=e},e.prototype.createScoped=function(e){return new v(this,e)},e.prototype.setContext=function(e,t){this.getContext(this._myContextId).setValue(e,t)},e.prototype.removeContext=function(e){this.getContext(this._myContextId).removeValue(e)},e}();t.AbstractKeybindingService=f;var m=function(e){function t(t){var n=this;this._lastContextId=-1,e.call(this,++this._lastContextId),this._domNode=t,this._contexts=Object.create(null),this._contexts[String(this._myContextId)]=new h(this._myContextId,null),this._toDispose=o.addDisposableListener(this._domNode,o.EventType.KEY_DOWN,function(e){var t=new s.StandardKeyboardEvent(e);n._dispatch(t)}),this._createOrUpdateResolver(!0),this._currentChord=0,this._currentChordStatusMessage=null}return __extends(t,e),t.prototype.dispose=function(){this._toDispose.dispose(),this._toDispose=null},t.prototype.getLabelFor=function(e){return e._toUSLabel()},t.prototype.getHTMLLabelFor=function(e){return e._toUSHTMLLabel()},t.prototype.getElectronAcceleratorFor=function(e){return e._toElectronAccelerator()},t.prototype.updateResolver=function(){this._createOrUpdateResolver(!1)},t.prototype._createOrUpdateResolver=function(e){this._resolver=new g(a.KeybindingsRegistry.getDefaultKeybindings(),this._getExtraKeybindings(e))},t.prototype._getExtraKeybindings=function(e){return[]},t.prototype.getDefaultKeybindings=function(){return this._resolver.getDefaultKeybindings()+"\n\n"+this._getAllCommandsAsComment()},t.prototype.customKeybindingsCount=function(){return 0},t.prototype.lookupKeybindings=function(e){return this._resolver.lookupKeybinding(e)},t.prototype._getAllCommandsAsComment=function(){var e=this._resolver.getDefaultBoundCommands(),t=Object.keys(a.KeybindingsRegistry.getCommands()).filter(function(t){return"_"!==t[0]&&!e[t]}),n=t.join("\n// - ");return"// "+r.localize(0,null)+"\n// - "+n},t.prototype._getCommandHandler=function(e){return a.KeybindingsRegistry.getCommands()[e]},t.prototype._dispatch=function(e){var t=this,i=e.keyCode===l.KeyCode.Ctrl||e.keyCode===l.KeyCode.Shift||e.keyCode===l.KeyCode.Alt||e.keyCode===l.KeyCode.Meta;if(!i){var o=this._findContextAttr(e.target),s=this.getContext(o),a=s.getValue(),c=this._resolver.resolveKeyboardEvent(a,this._currentChord,e);if(c&&c.enterChord){if(e.preventDefault(),this._currentChord=c.enterChord,this._messageService){var u=this.getLabelFor(new l.Keybinding(this._currentChord));this._currentChordStatusMessage=this._messageService.setStatusMessage(r.localize(1,null,u))}}else{if(this._messageService&&this._currentChord&&(!c||!c.commandId)){var u=this.getLabelFor(new l.Keybinding(this._currentChord)),d=this.getLabelFor(new l.Keybinding(e.asKeybinding()));this._messageService.setStatusMessage(r.localize(2,null,u,d),1e4),e.preventDefault()}if(this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChord=0,c&&c.commandId){/^\^/.test(c.commandId)||e.preventDefault();var h=c.commandId.replace(/^\^/,"");this._invokeHandler(h,{context:a}).done(void 0,function(e){t._messageService.show(n["default"].Warning,e)})}}}},t.prototype._invokeHandler=function(e,t){var n=this._getCommandHandler(e);if(!n)return i.TPromise.wrapError(new Error("No handler found for the command: '"+e+"'. Ensure there is an activation event defined, if you are an extension."));try{var r=this._instantiationService.invokeFunction(n,t);return i.TPromise.as(r)}catch(o){return i.TPromise.wrapError(o)}},t.prototype._findContextAttr=function(e){for(;e;){if(e.hasAttribute(d))return parseInt(e.getAttribute(d),10);e=e.parentElement}return this._myContextId},t.prototype.getContext=function(e){return this._contexts[String(e)]},t.prototype.createChildContext=function(e){void 0===e&&(e=this._myContextId);var t=++this._lastContextId;return this._contexts[String(t)]=new h(t,this.getContext(e)),t},t.prototype.disposeContext=function(e){delete this._contexts[String(e)]},t.prototype.executeCommand=function(e,t){if(void 0===t&&(t={}),!t.context){var n=this._findContextAttr(document.activeElement),i=this.getContext(n),r=i.getValue();t.context=r}return this._invokeHandler(e,t)},t}(f);t.KeybindingService=m;var v=function(e){function t(t,n){this._parent=t,this._domNode=n,e.call(this,this._parent.createChildContext()),this._domNode.setAttribute(d,String(this._myContextId))}return __extends(t,e),t.prototype.dispose=function(){this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(d)},t.prototype.getLabelFor=function(e){return this._parent.getLabelFor(e)},t.prototype.getHTMLLabelFor=function(e){return this._parent.getHTMLLabelFor(e)},t.prototype.getElectronAcceleratorFor=function(e){return this._parent.getElectronAcceleratorFor(e)},t.prototype.getDefaultKeybindings=function(){return this._parent.getDefaultKeybindings()},t.prototype.customKeybindingsCount=function(){return this._parent.customKeybindingsCount()},t.prototype.lookupKeybindings=function(e){return this._parent.lookupKeybindings(e)},t.prototype.getContext=function(e){return this._parent.getContext(e)},t.prototype.createChildContext=function(e){return void 0===e&&(e=this._myContextId),this._parent.createChildContext(e)},t.prototype.disposeContext=function(e){this._parent.disposeContext(e)},t.prototype.executeCommand=function(e,t){return this._parent.executeCommand(e,t)},t}(f),g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.resolveKeyboardEvent=function(e,t,n){return this.resolve(e,t,n.asKeybinding())},t}(u.CommonKeybindingResolver);t.KeybindingResolver=g}),define("vs/platform/plugins/common/ipcRemoteCom",["require","exports","vs/base/common/winjs.base","vs/base/common/marshalling","vs/base/common/remote","vs/base/common/errors"],function(e,t,n,i,r,o){function s(e){var t=0;return function(i,r,o){var s=String(++t),a={c:null,e:null,p:null},u=new n.TPromise(function(e,t,n){a.c=e,a.e=t,a.p=n},function(){e({cancel:s})});return c[s]=a,e({req:s,rpcId:i,method:r,args:o}),u}}function a(e){function t(t){e(i.marshallObject(t,p))}function a(e,t,i){try{return n.TPromise.as(l.handle(e,t,i))}catch(r){return n.TPromise.wrapError(r)}}var u=s(t),l=null,d=Object.create(null),h={callOnRemote:u,registerBigHandler:function(e){l=e},handle:function(e){var n=i.demarshallObject(e,p);if(n.seq){if(!c.hasOwnProperty(n.seq))return void console.warn("Got reply to unknown seq");var r=c[n.seq];return delete c[n.seq],n.err?void r.e(n.err):void r.c(n.res)}if(n.cancel)return void(d[n.cancel]&&d[n.cancel].cancel());if(n.err)return void console.error(n.err);var s=n.rpcId;if(!l)throw new Error("got message before big handler attached!");var u=n.req;d[u]=a(s,n.method,n.args),d[u].then(function(e){delete d[u],t({seq:u,res:e})},function(e){delete d[u],t({seq:u,err:o.transformErrorForSerialization(e)})})}},p=new r.ProxiesMarshallingContribution(h);return h}var c={};t.create=a}),define("vs/platform/plugins/common/plugins",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IPluginService=n.createDecorator("pluginService"),t.INSTANCE=null}),define("vs/platform/plugins/common/pluginsRegistry",["require","exports","vs/platform/platform","vs/base/common/errors","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/nls!vs/platform/plugins/common/pluginsRegistry","vs/base/common/paths","vs/base/common/severity"],function(e,t,n,i,r,o,s,a){function c(e,t,n){if(!t)return n.push(o.localize(0,null)),!1;if("string"!=typeof t.publisher)return n.push(o.localize(1,null,"publisher")),!1;if("string"!=typeof t.name)return n.push(o.localize(2,null,"name")),!1;if("string"!=typeof t.version)return n.push(o.localize(3,null,"version")),!1;if(!t.engines)return n.push(o.localize(4,null,"engines")),!1;if("string"!=typeof t.engines.vscode)return n.push(o.localize(5,null,"engines.vscode")),!1;if("undefined"!=typeof t.extensionDependencies&&!u(t.extensionDependencies))return n.push(o.localize(6,null,"extensionDependencies")),!1;if("undefined"!=typeof t.activationEvents){if(!u(t.activationEvents))return n.push(o.localize(7,null,"activationEvents")),!1;if("undefined"==typeof t.main)return n.push(o.localize(8,null,"activationEvents","main")),!1}if("undefined"!=typeof t.main){if("string"!=typeof t.main)return n.push(o.localize(9,null,"main")),!1;var i=s.normalize(s.join(e,t.main));if(i.indexOf(e)&&n.push(o.localize(10,null,i,e)),"undefined"==typeof t.activationEvents)return n.push(o.localize(11,null,"activationEvents","main")),!1}return!0}function u(e){if(!Array.isArray(e))return!1;for(var t=0,n=e.length;n>t;t++)if("string"!=typeof e[t])return!1;return!0}var l=function(){function e(e,t){this._scope=e,this._actual=t}return e.prototype.error=function(e){this._actual.error(this._scope,e)},e.prototype.warn=function(e){this._actual.warn(this._scope,e)},e.prototype.info=function(e){this._actual.info(this._scope,e)},e}(),d=function(){function e(e){this._handler=e}return e.prototype._pushMessage=function(e,t,n){this._handler(e,t,this._ensureString(n))},e.prototype._ensureString=function(e){return e&&e.message&&e.stack?e.message+"\n\n"+e.stack:String(e)},e.prototype.error=function(e,t){this._pushMessage(a["default"].Error,e,t)},e.prototype.warn=function(e,t){this._pushMessage(a["default"].Warning,e,t)},e.prototype.info=function(e,t){this._pushMessage(a["default"].Info,e,t)},e.prototype.scopeTo=function(e){return new l(e,this)},e}(),h=function(){function e(){this._messages=[]}return e.prototype.getMessages=function(){return this._messages},e.prototype._pushMessage=function(e,t,n){this._messages.push({type:e,message:this._ensureString(n),source:t})},e.prototype._ensureString=function(e){return e&&e.message&&e.stack?e.message+"\n\n"+e.stack:String(e)},e.prototype.error=function(e,t){this._pushMessage(a["default"].Error,e,t)},e.prototype.warn=function(e,t){this._pushMessage(a["default"].Warning,e,t)},e.prototype.info=function(e,t){this._pushMessage(a["default"].Info,e,t)},e.prototype.scopeTo=function(e){return new l(e,this)},e}();t.PluginsMessageCollector=h,t.isValidPluginDescription=c;var p=Object.hasOwnProperty,f=n.Registry.as(r.Extensions.JSONContribution),m=function(){function e(e,t){this.name=e,this._registry=t,this._handler=null,this._collector=null}return e.prototype.setHandler=function(e){if(this._handler)throw new Error("Handler already set!");this._handler=e,this._handle()},e.prototype.handle=function(e){this._collector=e,this._handle()},e.prototype._handle=function(){var e=this;this._handler&&this._collector&&this._registry.registerPointListener(this.name,function(t){var n=t.map(function(t){return{description:t,value:t.contributes[e.name],collector:e._collector.scopeTo(t.extensionFolderPath)}});e._handler(n)})},e}(),v=function(){function e(){this._pluginsMap={},this._pluginsArr=[],this._activationMap={},this._pointListeners=[],this._extensionPoints={},this._oneTimeActivationEventListeners={}}return e.prototype.registerPointListener=function(t,n){var i={extensionPoint:t,listener:n};this._pointListeners.push(i),this._triggerPointListener(i,e._filterWithExtPoint(this.getAllPluginDescriptions(),t))},e.prototype.registerExtensionPoint=function(e,t){if(p.call(this._extensionPoints,e))throw new Error("Duplicate extension point: "+e);var n=new m(e,this);return this._extensionPoints[e]=n,_.properties.contributes.properties[e]=t,f.registerSchema(y,_),n},e.prototype.handleExtensionPoints=function(e){var t=this,n=new d(e);Object.keys(this._extensionPoints).forEach(function(e){t._extensionPoints[e].handle(n)})},e.prototype._triggerPointListener=function(e,t){if(t&&0!==t.length)try{e.listener(t)}catch(n){i.onUnexpectedError(n)}},e.prototype.registerPlugins=function(t){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(p.call(this._pluginsMap,r.id))console.error("Plugin `"+r.id+"` is already registered");else if(this._pluginsMap[r.id]=r,this._pluginsArr.push(r),Array.isArray(r.activationEvents))for(var o=0,s=r.activationEvents.length;s>o;o++){var a=r.activationEvents[o];this._activationMap[a]=this._activationMap[a]||[],this._activationMap[a].push(r)}}for(var n=0,i=this._pointListeners.length;i>n;n++){var c=this._pointListeners[n],u=e._filterWithExtPoint(t,c.extensionPoint);this._triggerPointListener(c,u)}},e._filterWithExtPoint=function(e,t){return e.filter(function(e){return e.contributes&&p.call(e.contributes,t)})},e.prototype.getPluginDescriptionsForActivationEvent=function(e){return p.call(this._activationMap,e)?this._activationMap[e].slice(0):[]},e.prototype.getAllPluginDescriptions=function(){return this._pluginsArr.slice(0)},e.prototype.getPluginDescription=function(e){return p.call(this._pluginsMap,e)?this._pluginsMap[e]:null},e.prototype.registerOneTimeActivationEventListener=function(e,t){p.call(this._oneTimeActivationEventListeners,e)||(this._oneTimeActivationEventListeners[e]=[]),this._oneTimeActivationEventListeners[e].push(t)},e.prototype.triggerActivationEventListeners=function(e){if(p.call(this._oneTimeActivationEventListeners,e)){var t=this._oneTimeActivationEventListeners[e];delete this._oneTimeActivationEventListeners[e];for(var n=0,r=t.length;r>n;n++){var o=t[n];try{o()}catch(s){i.onUnexpectedError(s)}}}},e}(),g={PluginsRegistry:"PluginsRegistry"};n.Registry.add(g.PluginsRegistry,new v),t.PluginsRegistry=n.Registry.as(g.PluginsRegistry);var y="local://schemas/vscode-extension",_={"default":{name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}},properties:{displayName:{description:o.localize(12,null),type:"string"},categories:{description:o.localize(13,null),type:"array",items:{type:"string","enum":["Languages","Snippets","Linters","Themes","Debuggers","Other"]}},galleryBanner:{type:"object",description:o.localize(14,null),properties:{color:{description:o.localize(15,null),type:"string"},theme:{description:o.localize(16,null),type:"string","enum":["dark","light"]}}},publisher:{description:o.localize(17,null),type:"string"},activationEvents:{description:o.localize(18,null),type:"array",items:{type:"string"}},extensionDependencies:{description:o.localize(19,null),type:"array",items:{type:"string"}},scripts:{type:"object",properties:{"vscode:prepublish":{description:o.localize(20,null),type:"string"}}},contributes:{description:o.localize(21,null),type:"object",properties:{},"default":{}},isAMD:{description:o.localize(22,null),type:"boolean"}}};f.registerSchema(y,_),f.addSchemaFileAssociation("/package.json",y)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/actions/common/actionsService",["require","exports","vs/platform/plugins/common/plugins","vs/platform/plugins/common/pluginsRegistry","vs/platform/keybinding/common/keybindingService","vs/base/common/actions","vs/nls!vs/platform/actions/common/actionsService"],function(e,t,n,i,r,o,s){function a(e){return Array.isArray(e)}function c(e,t){return e?"string"!=typeof e.command?(t.push(s.localize(1,null,"command")),!1):"string"!=typeof e.title?(t.push(s.localize(2,null,"title")),!1):e.category&&"string"!=typeof e.category?(t.push(s.localize(3,null,"category")),!1):!0:(t.push(s.localize(0,null)),!1)}var u={type:"object",properties:{command:{description:s.localize(4,null),type:"string"},title:{description:s.localize(5,null),type:"string"},category:{description:s.localize(6,null),type:"string"}}},l=i.PluginsRegistry.registerExtensionPoint("commands",{description:s.localize(7,null),oneOf:[u,{type:"array",items:u}]}),d=function(){function e(e,t){var n=this;this._extensionsActions=[],this._pluginService=e,this._keybindingsService=t,l.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t];n._onDescription(i.value,i.collector)}})}return e.prototype._onDescription=function(e,t){if(a(e))for(var n=0;n<e.length;n++){var i=e[n];this._handleCommand(i,t)}else this._handleCommand(e,t)},e.prototype._handleCommand=function(e,t){var n=this,i=[];if(c(e,i)){var r="onCommand:"+e.command,a=e.category?s.localize(8,null,e.category,e.title):e.title,u=new o.Action(e.command,a,void 0,!0,function(){return n._pluginService.activateByEvent(r).then(function(){return n._keybindingsService.executeCommand(e.command)})});this._extensionsActions.push(u)}i.length>0&&t.error(s.localize(9,null,l.name,i.join("\n")))},e.prototype.getActions=function(){return this._extensionsActions.slice(0)},e=__decorate([__param(0,n.IPluginService),__param(1,r.IKeybindingService)],e)}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=d}),define("vs/platform/configuration/common/configurationRegistry",["require","exports","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/base/common/event","vs/platform/platform","vs/base/common/objects","vs/base/common/strings","vs/platform/plugins/common/pluginsRegistry","vs/platform/jsonschemas/common/jsonContributionRegistry"],function(e,t,n,i,r,o,s,a,c){t.Extensions={Configuration:"base.contributions.configuration"};var u=function(){function e(){this.configurationContributors=[],this.hasJSONContributions=!1,this._onDidRegisterConfiguration=new i.Emitter}return Object.defineProperty(e.prototype,"onDidRegisterConfiguration",{get:function(){return this._onDidRegisterConfiguration.event},enumerable:!0,configurable:!0}),e.prototype.registerConfiguration=function(e){this.configurationContributors.push(e),this.registerJSONConfiguration(e),this._onDidRegisterConfiguration.fire(this)},e.prototype.getConfigurations=function(){return this.configurationContributors.slice(0)},e.prototype.registerJSONConfiguration=function(e){var t=s.format("local://schemas/settings/{0}",e.id),n=o.clone(e);n.id=t;var i=r.Registry.as(c.Extensions.JSONContribution);i.registerSchema(t,n),i.addSchemaFileAssociation("inmemory://defaults/settings.json",t),i.addSchemaFileAssociation("%APP_SETTINGS_HOME%/settings.json",t),i.addSchemaFileAssociation("/.vscode/settings.json",t)},e}(),l=new u;r.Registry.add(t.Extensions.Configuration,l);var d=a.PluginsRegistry.registerExtensionPoint("configuration",{description:n.localize(0,null),type:"object","default":{title:"",properties:{}},properties:{title:{description:n.localize(1,null),type:"string"},properties:{description:n.localize(2,null),type:"object",additionalProperties:{$ref:"http://json-schema.org/draft-04/schema#"}}}});d.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t].value,r=e[t].collector;if(i.type&&"object"!==i.type?r.warn(n.localize(3,null)):i.type="object",i.title&&"string"!=typeof i.title&&r.error(n.localize(4,null)),i.properties&&"object"!=typeof i.properties)return void r.error(n.localize(5,null));var s=o.clone(i);s.id=e[t].description.id,l.registerConfiguration(s)}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/config/commonEditorConfig",["require","exports","vs/nls!vs/editor/common/config/commonEditorConfig","vs/base/common/objects","vs/base/common/eventEmitter","vs/base/common/strings","vs/platform/platform","vs/platform/configuration/common/configurationRegistry","vs/editor/common/editorCommon","vs/editor/common/config/defaultConfig","vs/editor/common/controller/handlerDispatcher","vs/editor/common/viewLayout/editorLayoutProvider"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e){return"false"===e?!1:Boolean(e)}function p(e,t){return"undefined"==typeof e?t:h(e)}function f(e,t){var n=parseFloat(e);return isNaN(n)&&(n=t),n}function m(e,t,n){var i=parseInt(e,10);return isNaN(i)&&(i=0),"number"==typeof t&&(i=Math.max(t,i)),"number"==typeof n&&(i=Math.min(n,i)),i}function v(e,t){return"undefined"==typeof e?t:m(e)}function g(e,t,n){return"string"!=typeof e?n:-1===t.indexOf(e)?n:e}var y=function(){function e(e){this._editor=i.clone(u.DefaultConfig.editor),this._mergeOptionsIn(e)}return e.prototype.getEditorOptions=function(){return this._editor},e.prototype._mergeOptionsIn=function(e){this._editor=i.mixin(this._editor,e||{})},e.prototype.updateOptions=function(e){this._mergeOptionsIn(e)},e}();t.ConfigurationWithDefaults=y;var _=function(){function e(){}return e.createInternalEditorOptions=function(e,t,n,i,r,o,s,a,c,u,l,p){var v,g=m(n.wrappingColumn,-1);v="undefined"!=typeof n.stopLineTokenizationAfter?m(n.stopLineTokenizationAfter,-1):g>=0?-1:1e4;var y;y="undefined"!=typeof n.stopRenderingLineAfter?m(n.stopRenderingLineAfter,-1):g>=0?-1:1e4;var _=f(n.mouseWheelScrollSensitivity,1),b=this._sanitizeScrollbarOpts(n.scrollbar,_),E=h(n.glyphMargin),S=n.lineNumbers,w=m(n.lineNumbersMinChars,1),C=m(n.lineDecorationsWidth,0),T=d.EditorLayoutProvider.compute({outerWidth:e,outerHeight:t,showGlyphMargin:E,lineHeight:c.lineHeight,showLineNumbers:!!S,lineNumbersMinChars:w,lineDecorationsWidth:C,maxDigitWidth:c.maxDigitWidth,lineCount:l,verticalScrollbarWidth:b.verticalScrollbarSize,horizontalScrollbarHeight:b.horizontalScrollbarSize,scrollbarArrowSize:b.arrowSize,verticalScrollbarHasArrows:b.verticalHasArrows}),I=Math.floor(T.height/c.lineHeight)-2;u&&g>0&&(g=0);var k;return k=0===g?{isViewportWrapping:!0,wrappingColumn:Math.max(1,Math.floor((T.contentWidth-T.verticalScrollbarWidth)/c.typicalHalfwidthCharacterWidth))}:g>0?{isViewportWrapping:!1,wrappingColumn:g}:{isViewportWrapping:!1,wrappingColumn:-1},{lineNumbers:S,selectOnLineNumbers:h(n.selectOnLineNumbers),glyphMargin:E,revealHorizontalRightPadding:m(n.revealHorizontalRightPadding,0),roundedSelection:h(n.roundedSelection),theme:n.theme,readOnly:h(n.readOnly),scrollbar:b,overviewRulerLanes:m(n.overviewRulerLanes,0,3),cursorBlinking:n.cursorBlinking,hideCursorInOverviewRuler:h(n.hideCursorInOverviewRuler),scrollBeyondLastLine:h(n.scrollBeyondLastLine),wrappingIndent:n.wrappingIndent,wordWrapBreakBeforeCharacters:n.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:n.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:n.wordWrapBreakObtrusiveCharacters,tabFocusMode:h(n.tabFocusMode),stopLineTokenizationAfter:v,stopRenderingLineAfter:y,longLineBoundary:m(n.longLineBoundary),forcedTokenizationBoundary:m(n.forcedTokenizationBoundary),hover:h(n.hover),contextmenu:h(n.contextmenu),quickSuggestions:h(n.quickSuggestions),quickSuggestionsDelay:m(n.quickSuggestionsDelay),iconsInSuggestions:h(n.iconsInSuggestions),autoClosingBrackets:h(n.autoClosingBrackets),formatOnType:h(n.formatOnType),suggestOnTriggerCharacters:h(n.suggestOnTriggerCharacters),selectionHighlight:h(n.selectionHighlight),outlineMarkers:h(n.outlineMarkers),referenceInfos:h(n.referenceInfos),renderWhitespace:h(n.renderWhitespace),layoutInfo:T,stylingInfo:{editorClassName:i,fontFamily:r,fontSize:o,lineHeight:a},wrappingInfo:k,indentInfo:p,observedOuterWidth:e,observedOuterHeight:t,lineHeight:c.lineHeight,pageSize:I,typicalHalfwidthCharacterWidth:c.typicalHalfwidthCharacterWidth,typicalFullwidthCharacterWidth:c.typicalFullwidthCharacterWidth,fontSize:c.fontSize}},e._sanitizeScrollbarOpts=function(e,t){var n=v(e.horizontalScrollbarSize,10),i=v(e.verticalScrollbarSize,14);return{vertical:g(e.vertical,["auto","visible","hidden"],"auto"),horizontal:g(e.horizontal,["auto","visible","hidden"],"auto"),arrowSize:v(e.arrowSize,11),useShadows:p(e.useShadows,!0),verticalHasArrows:p(e.verticalHasArrows,!1),horizontalHasArrows:p(e.horizontalHasArrows,!1),horizontalScrollbarSize:n,horizontalSliderSize:v(e.horizontalSliderSize,n),verticalScrollbarSize:i,verticalSliderSize:v(e.verticalSliderSize,i),handleMouseWheel:p(e.handleMouseWheel,!0),mouseWheelScrollSensitivity:t}},e.createConfigurationChangedEvent=function(e,t){return{layoutInfo:!d.EditorLayoutProvider.layoutEqual(e.layoutInfo,t.layoutInfo),stylingInfo:!this._stylingInfoEqual(e.stylingInfo,t.stylingInfo),wrappingInfo:!this._wrappingInfoEqual(e.wrappingInfo,t.wrappingInfo),indentInfo:!this._indentInfoEqual(e.indentInfo,t.indentInfo),observedOuterWidth:e.observedOuterWidth!==t.observedOuterWidth,observedOuterHeight:e.observedOuterHeight!==t.observedOuterHeight,lineHeight:e.lineHeight!==t.lineHeight,pageSize:e.pageSize!==t.pageSize,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth!==t.typicalHalfwidthCharacterWidth,typicalFullwidthCharacterWidth:e.typicalFullwidthCharacterWidth!==t.typicalFullwidthCharacterWidth,fontSize:e.fontSize!==t.fontSize,lineNumbers:e.lineNumbers!==t.lineNumbers,selectOnLineNumbers:e.selectOnLineNumbers!==t.selectOnLineNumbers,glyphMargin:e.glyphMargin!==t.glyphMargin,revealHorizontalRightPadding:e.revealHorizontalRightPadding!==t.revealHorizontalRightPadding,roundedSelection:e.roundedSelection!==t.roundedSelection,theme:e.theme!==t.theme,readOnly:e.readOnly!==t.readOnly,scrollbar:!this._scrollbarOptsEqual(e.scrollbar,t.scrollbar),overviewRulerLanes:e.overviewRulerLanes!==t.overviewRulerLanes,cursorBlinking:e.cursorBlinking!==t.cursorBlinking,hideCursorInOverviewRuler:e.hideCursorInOverviewRuler!==t.hideCursorInOverviewRuler,scrollBeyondLastLine:e.scrollBeyondLastLine!==t.scrollBeyondLastLine,wrappingIndent:e.wrappingIndent!==t.wrappingIndent,wordWrapBreakBeforeCharacters:e.wordWrapBreakBeforeCharacters!==t.wordWrapBreakBeforeCharacters,wordWrapBreakAfterCharacters:e.wordWrapBreakAfterCharacters!==t.wordWrapBreakAfterCharacters,wordWrapBreakObtrusiveCharacters:e.wordWrapBreakObtrusiveCharacters!==t.wordWrapBreakObtrusiveCharacters,tabFocusMode:e.tabFocusMode!==t.tabFocusMode,stopLineTokenizationAfter:e.stopLineTokenizationAfter!==t.stopLineTokenizationAfter,
stopRenderingLineAfter:e.stopRenderingLineAfter!==t.stopRenderingLineAfter,longLineBoundary:e.longLineBoundary!==t.longLineBoundary,forcedTokenizationBoundary:e.forcedTokenizationBoundary!==t.forcedTokenizationBoundary,hover:e.hover!==t.hover,contextmenu:e.contextmenu!==t.contextmenu,quickSuggestions:e.quickSuggestions!==t.quickSuggestions,quickSuggestionsDelay:e.quickSuggestionsDelay!==t.quickSuggestionsDelay,iconsInSuggestions:e.iconsInSuggestions!==t.iconsInSuggestions,autoClosingBrackets:e.autoClosingBrackets!==t.autoClosingBrackets,formatOnType:e.formatOnType!==t.formatOnType,suggestOnTriggerCharacters:e.suggestOnTriggerCharacters!==t.suggestOnTriggerCharacters,selectionHighlight:e.selectionHighlight!==t.selectionHighlight,outlineMarkers:e.outlineMarkers!==t.outlineMarkers,referenceInfos:e.referenceInfos!==t.referenceInfos}},e._scrollbarOptsEqual=function(e,t){return e.arrowSize===t.arrowSize&&e.vertical===t.vertical&&e.horizontal===t.horizontal&&e.useShadows===t.useShadows&&e.verticalHasArrows===t.verticalHasArrows&&e.horizontalHasArrows===t.horizontalHasArrows&&e.handleMouseWheel===t.handleMouseWheel&&e.horizontalScrollbarSize===t.horizontalScrollbarSize&&e.horizontalSliderSize===t.horizontalSliderSize&&e.verticalScrollbarSize===t.verticalScrollbarSize&&e.verticalSliderSize===t.verticalSliderSize&&e.mouseWheelScrollSensitivity===t.mouseWheelScrollSensitivity},e._stylingInfoEqual=function(e,t){return e.editorClassName===t.editorClassName&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.lineHeight===t.lineHeight},e._wrappingInfoEqual=function(e,t){return e.isViewportWrapping===t.isViewportWrapping&&e.wrappingColumn===t.wrappingColumn},e._indentInfoEqual=function(e,t){return e.insertSpaces===t.insertSpaces&&e.tabSize===t.tabSize},e}(),b=function(e){function t(t,n){void 0===n&&(n=null),e.call(this,[c.EventType.ConfigurationChanged]),this._configWithDefaults=new y(t),this._indentationGuesser=n,this._cachedGuessedIndentationTabSize=-1,this._cachedGuessedIndentation=null,this._isDominatedByLongLines=!1,this._lineCount=1,this.handlerDispatcher=new l.HandlerDispatcher,this.editor=this._computeInternalOptions()}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype._recomputeOptions=function(){var e=this.editor;this.editor=this._computeInternalOptions();var t=_.createConfigurationChangedEvent(e,this.editor),n=!1;for(var i in t)if(t.hasOwnProperty(i)&&t[i]){n=!0;break}n&&this.emit(c.EventType.ConfigurationChanged,t)},t.prototype.getRawOptions=function(){return this._configWithDefaults.getEditorOptions()},t.prototype._computeInternalOptions=function(){var e=this,n=this._configWithDefaults.getEditorOptions(),i=this._getEditorClassName(n.theme),r=n.fontFamily||"",o=m(n.fontSize,0,100),s=m(n.lineHeight,0,150),a=s;o>0&&0===s&&(a=Math.round(1.3*o));var c=t._computeIndentationOptions(n,function(t){return e._guessIndentationOptionsCached(t)});return _.createInternalEditorOptions(this.getOuterWidth(),this.getOuterHeight(),n,i,r,o,s,a,this.readConfiguration(i,r,o,a),this._isDominatedByLongLines,this._lineCount,c)},t.prototype.updateOptions=function(e){this._configWithDefaults.updateOptions(e),this._recomputeOptions()},t.prototype._getEditorClassName=function(e){return"monaco-editor"},t.prototype.setIsDominatedByLongLines=function(e){this._isDominatedByLongLines=e,this._recomputeOptions()},t.prototype.setLineCount=function(e){this._lineCount=e,this._recomputeOptions()},t.prototype.resetIndentationOptions=function(){this._cachedGuessedIndentationTabSize=-1,this._cachedGuessedIndentation=null,this._recomputeOptions()},t.prototype._guessIndentationOptionsCached=function(e){return this._cachedGuessedIndentation&&this._cachedGuessedIndentationTabSize===e||(this._cachedGuessedIndentationTabSize=e,this._indentationGuesser?this._cachedGuessedIndentation=this._indentationGuesser(e):this._cachedGuessedIndentation=null),this._cachedGuessedIndentation},t._getValidatedIndentationOptions=function(e){var t={tabSizeIsAuto:!1,tabSize:4,insertSpacesIsAuto:!1,insertSpaces:!0};return"auto"===e.tabSize?t.tabSizeIsAuto=!0:t.tabSize=m(e.tabSize,1,20),"auto"===e.insertSpaces?t.insertSpacesIsAuto=!0:t.insertSpaces=h(e.insertSpaces),t},t._computeIndentationOptions=function(e,t){var n=this._getValidatedIndentationOptions(e),i=null;(n.tabSizeIsAuto||n.insertSpacesIsAuto)&&(i=t(n.tabSize));var r={insertSpaces:n.insertSpaces,tabSize:n.tabSize};return i&&n.tabSizeIsAuto&&(r.tabSize=i.tabSize),i&&n.insertSpacesIsAuto&&(r.insertSpaces=i.insertSpaces),r},t.prototype.getIndentationOptions=function(){return this.editor.indentInfo},t.prototype._normalizeIndentationFromWhitespace=function(e){var t,n=this.getIndentationOptions(),i=0;for(t=0;t<e.length;t++)"	"===e.charAt(t)?i+=n.tabSize:i++;var r="";if(!n.insertSpaces){var o=Math.floor(i/n.tabSize);for(i%=n.tabSize,t=0;o>t;t++)r+="	"}for(t=0;i>t;t++)r+=" ";return r},t.prototype.normalizeIndentation=function(e){var t=o.firstNonWhitespaceIndex(e);return-1===t&&(t=e.length),this._normalizeIndentationFromWhitespace(e.substring(0,t))+e.substring(t)},t.prototype.getOneIndent=function(){var e=this.getIndentationOptions();if(e.insertSpaces){for(var t="",n=0;n<e.tabSize;n++)t+=" ";return t}return"	"},t.prototype.getOuterWidth=function(){throw new Error("Not implemented")},t.prototype.getOuterHeight=function(){throw new Error("Not implemented")},t.prototype.readConfiguration=function(e,t,n,i){throw new Error("Not implemented")},t}(r.EventEmitter);t.CommonEditorConfiguration=b;var E=function(){function e(){}return e.apply=function(t,n){if(t){var r=n;Array.isArray(n)||(r=[n]);for(var o=0;o<r.length;o++){var s=r[o];if(s&&"function"==typeof s.updateOptions){var a=s.getEditorType();if(a!==c.EditorType.ICodeEditor&&a!==c.EditorType.IDiffEditor)continue;var u=t[e.EDITOR_SECTION];if(a===c.EditorType.IDiffEditor){var l=t[e.DIFF_EDITOR_SECTION];l&&(u=u?i.mixin(u,l):l)}u&&(delete u.readOnly,s.updateOptions(u))}}}},e.EDITOR_SECTION="editor",e.DIFF_EDITOR_SECTION="diffEditor",e}();t.EditorConfiguration=E;var S=s.Registry.as(a.Extensions.Configuration);S.registerConfiguration({id:"editor",order:5,type:"object",title:n.localize(0,null),properties:{"editor.fontFamily":{type:"string","default":u.DefaultConfig.editor.fontFamily,description:n.localize(1,null)},"editor.fontSize":{type:"number","default":u.DefaultConfig.editor.fontSize,description:n.localize(2,null)},"editor.lineHeight":{type:"number","default":u.DefaultConfig.editor.lineHeight,description:n.localize(3,null)},"editor.lineNumbers":{type:"boolean","default":u.DefaultConfig.editor.lineNumbers,description:n.localize(4,null)},"editor.glyphMargin":{type:"boolean","default":u.DefaultConfig.editor.glyphMargin,description:n.localize(5,null)},"editor.tabSize":{oneOf:[{type:"number"},{type:"string","enum":["auto"]}],"default":u.DefaultConfig.editor.tabSize,minimum:1,description:n.localize(6,null)},"editor.insertSpaces":{oneOf:[{type:"boolean"},{type:"string","enum":["auto"]}],"default":u.DefaultConfig.editor.insertSpaces,description:n.localize(7,null)},"editor.roundedSelection":{type:"boolean","default":u.DefaultConfig.editor.roundedSelection,description:n.localize(8,null)},"editor.scrollBeyondLastLine":{type:"boolean","default":u.DefaultConfig.editor.scrollBeyondLastLine,description:n.localize(9,null)},"editor.wrappingColumn":{type:"integer","default":u.DefaultConfig.editor.wrappingColumn,minimum:-1,description:n.localize(10,null)},"editor.wrappingIndent":{type:"string","enum":["none","same","indent"],"default":u.DefaultConfig.editor.wrappingIndent,description:n.localize(11,null)},"editor.mouseWheelScrollSensitivity":{type:"number","default":u.DefaultConfig.editor.mouseWheelScrollSensitivity,description:n.localize(12,null)},"editor.quickSuggestions":{type:"boolean","default":u.DefaultConfig.editor.quickSuggestions,description:n.localize(13,null)},"editor.quickSuggestionsDelay":{type:"integer","default":u.DefaultConfig.editor.quickSuggestionsDelay,minimum:0,description:n.localize(14,null)},"editor.autoClosingBrackets":{type:"boolean","default":u.DefaultConfig.editor.autoClosingBrackets,description:n.localize(15,null)},"editor.formatOnType":{type:"boolean","default":u.DefaultConfig.editor.formatOnType,description:n.localize(16,null)},"editor.suggestOnTriggerCharacters":{type:"boolean","default":u.DefaultConfig.editor.suggestOnTriggerCharacters,description:n.localize(17,null)},"editor.selectionHighlight":{type:"boolean","default":u.DefaultConfig.editor.selectionHighlight,description:n.localize(18,null)},"editor.overviewRulerLanes":{type:"integer","default":3,description:n.localize(19,null)},"editor.cursorBlinking":{type:"string","enum":["blink","visible","hidden"],"default":u.DefaultConfig.editor.cursorBlinking,description:n.localize(20,null)},"editor.hideCursorInOverviewRuler":{type:"boolean","default":u.DefaultConfig.editor.hideCursorInOverviewRuler,description:n.localize(21,null)},"editor.renderWhitespace":{type:"boolean","default":u.DefaultConfig.editor.renderWhitespace,description:n.localize(22,null)},"editor.referenceInfos":{type:"boolean","default":u.DefaultConfig.editor.referenceInfos,description:n.localize(23,null)},"diffEditor.renderSideBySide":{type:"boolean","default":!0,description:n.localize(24,null)},"diffEditor.ignoreTrimWhitespace":{type:"boolean","default":!0,description:n.localize(25,null)}}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/config/configuration",["require","exports","vs/base/common/platform","vs/base/browser/browser","vs/base/browser/dom","vs/editor/browser/config/elementSizeObserver","vs/editor/common/config/commonEditorConfig"],function(e,t,n,i,r,o,s){var a=function(){function e(){this._keys={},this._values={}}return e.prototype.has=function(t){return this._values.hasOwnProperty(e.key(t))},e.prototype.get=function(t){return this._values[e.key(t)]},e.prototype.put=function(t,n){this._values[e.key(t)]=n},e.prototype.getKeys=function(){var e=[];for(var t in this._keys)e.push(this._keys[t]);return e},e.key=function(e){return e.editorClassName+"-"+e.fontFamily+"-"+e.fontSize+"-"+e.lineHeight},e}(),c=function(){function e(){}return e.readConfiguration=function(t,n,i,r){var o={editorClassName:t,fontFamily:n,fontSize:i,lineHeight:r};if(!e._CACHE.has(o)){var s=e._actualReadConfiguration(o);(s.lineHeight<=2||s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.maxDigitWidth<=2)&&(s.lineHeight=Math.max(s.lineHeight,s.fontSize,5),s.typicalHalfwidthCharacterWidth=Math.max(s.typicalHalfwidthCharacterWidth,s.fontSize,5),s.typicalFullwidthCharacterWidth=Math.max(s.typicalFullwidthCharacterWidth,s.fontSize,5),s.maxDigitWidth=Math.max(s.maxDigitWidth,s.fontSize,5),e._installChangeMonitor()),e._CACHE.put(o,s)}return e._CACHE.get(o)},e._installChangeMonitor=function(){-1===e._CHANGE_MONITOR_TIMEOUT&&(e._CHANGE_MONITOR_TIMEOUT=setTimeout(function(){e._CHANGE_MONITOR_TIMEOUT=-1,e._monitorForChanges()},500))},e._monitorForChanges=function(){for(var t=!1,n=e._CACHE.getKeys(),i=0;i<n.length;i++){var r=n[i],o=e._actualReadConfiguration(r);o.lineHeight<=2||o.typicalHalfwidthCharacterWidth<=2||o.typicalFullwidthCharacterWidth<=2||o.maxDigitWidth<=2?t=!0:(e._CACHE.put(r,o),e._invokeChangeListeners())}t&&e._installChangeMonitor()},e._invokeChangeListeners=function(){for(var t=e._CHANGE_LISTENERS.slice(0),n=0;n<t.length;n++)t[n]()},e.addChangeListener=function(t){e._CHANGE_LISTENERS.push(t)},e.removeChangeListener=function(t){for(var n=0;n<e._CHANGE_LISTENERS.length;n++)if(e._CHANGE_LISTENERS[n]===t){e._CHANGE_LISTENERS.splice(n,1);break}},e._testElementId=function(e){return"editorSizeProvider"+e},e._createTestElement=function(t,n){var i=document.createElement("span");i.id=e._testElementId(t);for(var r=" "===n?"&nbsp;":n,o=0;8>o;o++)r+=r;return i.textContent=r,i},e._createTestElements=function(t){var n=document.createElement("div");u.applyEditorStyling(n,t),n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";for(var i=0,r=e._USUAL_CHARS.length;r>i;i++)n.appendChild(document.createElement("br")),n.appendChild(e._createTestElement(i,e._USUAL_CHARS[i]));var o=e._testElementId(e._USUAL_CHARS.length),s=document.createElement("div");return s.id=o,s.appendChild(document.createTextNode("heightTestContent")),n.appendChild(document.createElement("br")),n.appendChild(s),n},e._readTestElementWidth=function(t){return document.getElementById(e._testElementId(t)).offsetWidth/256},e._readFromTestElements=function(){for(var t=[],n=0,i=e._USUAL_CHARS.length;i>n;n++)t.push(e._readTestElementWidth(n));return t},e._actualReadConfiguration=function(t){var n=e._createTestElements(t);document.body.appendChild(n);var i=e._readFromTestElements(),o=document.getElementById(e._testElementId(0)),s=r.getComputedStyle(o),a=e._getFontFromComputedStyle(s),c=s?parseInt(s.fontSize,10):0,u=document.getElementById(e._testElementId(e._USUAL_CHARS.length)),l=u.clientHeight;document.body.removeChild(n);for(var d=0,h=0,p=0,f=0,m=e._USUAL_CHARS.length;m>f;f++){var v=e._USUAL_CHARS.charAt(f);v>="0"&&"9">=v?d=Math.max(d,i[f]):v===e._HALF_WIDTH_TYPICAL?h=i[f]:v===e._FULL_WIDTH_TYPICAL&&(p=i[f])}return{typicalHalfwidthCharacterWidth:h,typicalFullwidthCharacterWidth:p,maxDigitWidth:d,lineHeight:l,font:a,fontSize:c}},e._getFontFromComputedStyle=function(e){return e?e.font?e.font:e.fontFamily+" "+e.fontSize+" "+e.fontSizeAdjust+" "+e.fontStretch+" "+e.fontStyle+" "+e.fontVariant+" "+e.fontWeight+" ":"unknown"},e._HALF_WIDTH_TYPICAL="n",e._FULL_WIDTH_TYPICAL="",e._USUAL_CHARS="0123456789"+e._HALF_WIDTH_TYPICAL+e._FULL_WIDTH_TYPICAL,e._CACHE=new a,e._CHANGE_LISTENERS=[],e._CHANGE_MONITOR_TIMEOUT=-1,e}(),u=function(e){function t(t,n,i){var r=this;void 0===n&&(n=null),void 0===i&&(i=null),this._elementSizeObserver=new o.ElementSizeObserver(n,function(){return r._onReferenceDomElementSizeChanged()}),e.call(this,t,i),this._cssBasedConfigurationChangeListener=function(){return r._onCSSBasedConfigurationChanged()},c.addChangeListener(this._cssBasedConfigurationChangeListener),this._configWithDefaults.getEditorOptions().automaticLayout&&this._elementSizeObserver.startObserving()}return __extends(t,e),t.applyEditorStyling=function(e,t){e.className=t.editorClassName,t.fontFamily&&t.fontFamily.length>0?e.style.fontFamily=t.fontFamily:e.style.fontFamily="",t.fontSize>0?e.style.fontSize=t.fontSize+"px":e.style.fontSize="",t.lineHeight>0?e.style.lineHeight=t.lineHeight+"px":e.style.lineHeight=""},t.prototype._onReferenceDomElementSizeChanged=function(){this._recomputeOptions()},t.prototype._onCSSBasedConfigurationChanged=function(){this._recomputeOptions()},t.prototype.observeReferenceElement=function(e){this._elementSizeObserver.observe(e)},t.prototype.dispose=function(){c.removeChangeListener(this._cssBasedConfigurationChangeListener),this._elementSizeObserver.dispose(),e.prototype.dispose.call(this)},t.prototype._getEditorClassName=function(e){var t="";return i.isIE11orEarlier?t+="ie ":i.isFirefox&&(t+="ff "),i.isIE9&&(t+="ie9 "),n.isMacintosh&&(t+="mac "),"monaco-editor "+t+e},t.prototype.getOuterWidth=function(){return this._elementSizeObserver.getWidth()},t.prototype.getOuterHeight=function(){return this._elementSizeObserver.getHeight()},t.prototype.readConfiguration=function(e,t,n,i){return c.readConfiguration(e,t,n,i)},t}(s.CommonEditorConfiguration);t.Configuration=u}),define("vs/platform/configuration/common/model",["require","exports","vs/base/common/objects","vs/platform/platform","vs/base/common/types","vs/base/common/json","./configurationRegistry"],function(e,t,n,i,r,o,s){function a(e,t,n){var i=t.split("."),r=i.pop(),o=e;i.forEach(function(e){var n=o[e];switch(typeof n){case"undefined":n=o[e]=Object.create(null);break;case"object":break;default:console.log("Conflicting configuration setting: "+t+" at "+e+" with "+JSON.stringify(n))}o=n}),o[r]=n}function c(e){try{var t=Object.create(null),n=o.parse(e)||{};for(var i in n)a(t,i,n[i]);return{contents:t}}catch(r){return{contents:{},parseError:r}}}function u(e,t,n){Object.keys(t).forEach(function(i){i in e?r.isObject(e[i])&&r.isObject(t[i])?u(e[i],t[i],n):n&&(e[i]=t[i]):e[i]=t[i]})}function l(e){var i=Object.create(null),r=[],o=/\/(team\.)?([^\.]*)*\.json/;return Object.keys(e).forEach(function(s){var a=n.clone(e[s]),c=o.exec(s);if(c){var l=!!c[1],d=i;if(c&&c[2]&&c[2]!==t.CONFIG_DEFAULT_NAME){var h=c[2],p=d[h];p||(p=Object.create(null),d[h]=p),d=p}u(d,a.contents,!l),a.parseError&&r.push(s)}}),{contents:i,parseErrors:r}}function d(e){var t=i.Registry.as(s.Extensions.Configuration).getConfigurations(),n=function(t,i){e(t,i),Array.isArray(t.allOf)&&t.allOf.forEach(function(e){n(e,!1)})};t.sort(function(e,t){return"number"!=typeof e.order?1:"number"!=typeof t.order?-1:e.order-t.order}).forEach(function(e){n(e,!0)})}function h(){var e=Object.create(null),t=function(t,n){t.properties&&Object.keys(t.properties).forEach(function(n){var i=t.properties[n],o=i["default"];r.isUndefined(i["default"])&&(o=m(i.type)),a(e,n,o)})};return d(t),e}function p(){var e=-1,t=[];t.push("{");var n=function(n,i){n.title&&(i?(t.push(""),t.push("	//-------- "+n.title+" --------")):t.push("	// "+n.title),t.push("")),n.properties&&Object.keys(n.properties).forEach(function(i){var o=n.properties[i],s=o["default"];r.isUndefined(s)&&(s=m(o.type)),o.description&&t.push("	// "+o.description);var a=JSON.stringify(s,null,"	");a&&"object"==typeof s&&(a=f(a)),-1!==e&&(t[e]+=","),e=t.length,t.push("	"+JSON.stringify(i)+": "+a),t.push("")})};return d(n),t.push("}"),t.join("\n")}function f(e){return e.split("\n").join("\n	")}function m(e){switch(e){case"boolean":return!1;case"integer":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}t.CONFIG_DEFAULT_NAME="settings",t.newConfigFile=c,t.merge=u,t.consolidate=l,t.getDefaultValues=h,t.getDefaultValuesContent=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/configuration/common/configurationService",["require","exports","vs/base/common/paths","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/objects","vs/base/common/errors","./model","vs/base/common/lifecycle","vs/base/common/collections","./configuration","vs/platform/files/common/files","./configurationRegistry","vs/platform/platform"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(e){function t(t,n,i){var r=this;void 0===i&&(i=".vscode"),e.call(this),this.serviceId=l.IConfigurationService,this.contextService=t,this.eventService=n,this.workspaceSettingsRootFolder=i,this.workspaceFilePathToConfiguration=Object.create(null);var o=this.eventService.addListener(d.EventType.FILE_CHANGES,function(e){return r.handleFileEvents(e)}),s=p.Registry.as(h.Extensions.Configuration).onDidRegisterConfiguration(function(){return r.reloadAndEmit()});this.callOnDispose=function(){o(),s.dispose()}}return __extends(t,e),t.prototype.dispose=function(){this.callOnDispose=c.cAll(this.callOnDispose),e.prototype.dispose.call(this)},t.prototype.loadConfiguration=function(e){return this.loadConfigurationPromise||(this.loadConfigurationPromise=this.doLoadConfiguration()),this.loadConfigurationPromise.then(function(t){var n=e?t.merged[e]:t.merged,i=t.consolidated.parseErrors;return t.globals.parseErrors&&i.push.apply(i,t.globals.parseErrors),i.length>0&&(n||(n={}),n.$parseErrors=i),n})},t.prototype.doLoadConfiguration=function(){var e=this;return this.loadGlobalConfiguration().then(function(t){return e.loadWorkspaceConfiguration().then(function(e){var n=a.consolidate(e),i=o.mixin(o.clone(t.contents),n.contents,!0);return{merged:i,consolidated:n,globals:t}})})},t.prototype.loadGlobalConfiguration=function(){return i.TPromise.as({contents:a.getDefaultValues()})},t.prototype.hasWorkspaceConfiguration=function(){return!!this.workspaceFilePathToConfiguration[".vscode/"+a.CONFIG_DEFAULT_NAME+".json"]},t.prototype.loadWorkspaceConfiguration=function(e){var t=this;return this.bulkFetchFromWorkspacePromise||(this.bulkFetchFromWorkspacePromise=this.resolveStat(this.contextService.toResource(this.workspaceSettingsRootFolder)).then(function(e){return e.isDirectory?t.resolveContents(e.children.filter(function(e){return".json"===n.extname(e.resource.fsPath)}).map(function(e){return e.resource})):i.TPromise.as([])},function(e){return e?[]:void 0}).then(function(e){e.forEach(function(e){return t.workspaceFilePathToConfiguration[t.contextService.toWorkspaceRelativePath(e.resource)]=i.TPromise.as(a.newConfigFile(e.value))})},s.onUnexpectedError)),this.bulkFetchFromWorkspacePromise.then(function(){return i.TPromise.join(t.workspaceFilePathToConfiguration)})},t.prototype.reloadAndEmit=function(){var e=this;return this.reloadConfiguration().then(function(t){return e.emit(l.ConfigurationServiceEventTypes.UPDATED,{config:t})})},t.prototype.reloadConfiguration=function(e){return this.loadConfigurationPromise=null,this.loadConfiguration(e)},t.prototype.handleFileEvents=function(e){for(var t=e.changes,i=!1,r=0,o=t.length;o>r;r++){var c=this.contextService.toWorkspaceRelativePath(t[r].resource);if(c&&(c===this.workspaceSettingsRootFolder&&t[r].type===d.FileChangeType.DELETED&&(this.workspaceFilePathToConfiguration=Object.create(null),i=!0),".json"===n.extname(c)&&n.isEqualOrParent(c,this.workspaceSettingsRootFolder)))switch(t[r].type){case d.FileChangeType.DELETED:i=u.remove(this.workspaceFilePathToConfiguration,c);break;case d.FileChangeType.UPDATED:case d.FileChangeType.ADDED:this.workspaceFilePathToConfiguration[c]=this.resolveContent(t[r].resource).then(function(e){return a.newConfigFile(e.value)},s.onUnexpectedError),i=!0}}i&&this.reloadAndEmit()},t}(r.EventEmitter);t.ConfigurationService=f;var m=function(e){function t(){e.apply(this,arguments),this.serviceId=l.IConfigurationService}return __extends(t,e),t.prototype.loadConfiguration=function(e){return i.TPromise.as({})},t.prototype.hasWorkspaceConfiguration=function(){return!1},t}(r.EventEmitter);t.NullConfigurationService=m,t.nullService=new m});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/jsonschemas/common/jsonValidationExtensionPoint",["require","exports","vs/nls!vs/platform/jsonschemas/common/jsonValidationExtensionPoint","vs/platform/plugins/common/pluginsRegistry","vs/platform/platform","vs/base/common/uri","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/base/common/strings","vs/base/common/paths","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u){var l=r.Registry.as(s.Extensions.JSONContribution),d=i.PluginsRegistry.registerExtensionPoint("jsonValidation",{description:n.localize(0,null),type:"array","default":[{fileMatch:"{{file.json}}",url:"{{url}}"}],items:{type:"object","default":{fileMatch:"{{file.json}}",url:"{{url}}"},properties:{fileMatch:{type:"string",description:n.localize(1,null)},url:{description:n.localize(2,null),type:"string"}}}}),h=function(){function e(e){d.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t].value,r=e[t].collector,s=e[t].description.extensionFolderPath;if(!i||!Array.isArray(i))return void r.error(n.localize(3,null));i.forEach(function(e){if("string"!=typeof e.fileMatch)return void r.error(n.localize(4,null));var t=e.url;if("string"!=typeof e.url)return void r.error(n.localize(5,null));if(a.startsWith(t,"./"))try{t=o["default"].file(c.normalize(c.join(s,t))).toString()}catch(i){r.error(n.localize(6,null,i.message))}else if(!a.startsWith(t,"https:/")&&a.startsWith(t,"https:/"))return void r.error(n.localize(7,null));var u=e.fileMatch;a.startsWith(e.fileMatch,"/")||(u="/"+u),l.addSchemaFileAssociation(u,t)})}})}return e=__decorate([__param(0,u.INullService)],e)}();t.JSONValidationExtensionPoint=h}),define("vs/platform/plugins/common/abstractPluginService",["require","exports","vs/nls!vs/platform/plugins/common/abstractPluginService","vs/platform/plugins/common/plugins","vs/base/common/winjs.base","vs/platform/plugins/common/pluginsRegistry","vs/base/common/severity"],function(e,t,n,i,r,o,s){function a(t){return new r.TPromise(function(n,i,r){e([t],function(e){n(e)},i)})}var c=Object.hasOwnProperty,u=this,l=function(){function e(e,t,n,i){this.activationFailed=e,this.module=t,this.exports=n,this.subscriptions=i}return e}();t.ActivatedPlugin=l;var d=function(){function e(e){var t=this;this.serviceId=i.IPluginService,e?(this._onReady=r.TPromise.as(!0),this._onReadyC=function(e){}):this._onReady=new r.TPromise(function(e,n,i){t._onReadyC=e},function(){console.warn("You should really not try to cancel this ready promise!")}),this.activatingPlugins={},this.activatedPlugins={}}return e.prototype.showMessage=function(e,t,n){this._showMessage(e,(t?"["+t+"]: ":"")+n)},e.prototype.registrationDone=function(e){var t=this;e.forEach(function(e){t.showMessage(e.type,e.source,e.message)}),this._onReadyC(!0)},e.prototype.registerOneTimeActivationEventListener=function(e,t){o.PluginsRegistry.registerOneTimeActivationEventListener(e,t)},e.prototype.onReady=function(){return this._onReady},e.prototype.get=function(e){if(!c.call(this.activatedPlugins,e))throw new Error("Plugin `"+e+"` is not known or not activated");return this.activatedPlugins[e].exports},e.prototype.getPluginsStatus=function(){return null},e.prototype.isActivated=function(e){return c.call(this.activatedPlugins,e)},e.prototype.activateByEvent=function(e){var t=this;return this._onReady.then(function(){o.PluginsRegistry.triggerActivationEventListeners(e);var n=o.PluginsRegistry.getPluginDescriptionsForActivationEvent(e);return t._activatePlugins(n,0)})},e.prototype.activateAndGet=function(e){var t=this;return this._onReady.then(function(){var n=o.PluginsRegistry.getPluginDescription(e);if(!n)throw new Error("Plugin `"+e+"` is not known");return t._activatePlugins([n],0).then(function(){return t.get(e)})})},e.prototype._handleActivateRequest=function(e,t,i){for(var r="undefined"==typeof e.extensionDependencies?[]:e.extensionDependencies,a=!0,u=0,d=r.length;d>u;u++){var h=r[u],p=o.PluginsRegistry.getPluginDescription(h);if(!p)return this._showMessage(s["default"].Error,n.localize(0,null,h,e.id)),void(this.activatedPlugins[e.id]=new l(!0,{activate:void 0,deactivate:void 0},{},[]));if(c.call(this.activatedPlugins,h)){var f=this.activatedPlugins[h];if(f.activationFailed)return this._showMessage(s["default"].Error,n.localize(1,null,h,e.id)),void(this.activatedPlugins[e.id]=new l(!0,{activate:void 0,deactivate:void 0},{},[]))}else a=!1,t[h]=p}a?t[e.id]=e:i.push(e)},e.prototype._activatePlugins=function(e,t){var i=this;if(0===e.length)return r.TPromise.as(void 0);if(e=e.filter(function(e){return!c.call(i.activatedPlugins,e.id)}),0===e.length)return r.TPromise.as(void 0);if(t>10){for(var o=0,a=e.length;a>o;o++)this._showMessage(s["default"].Error,n.localize(2,null,e[o].id)),this.activatedPlugins[e[o].id]=new l(!0,{activate:void 0,deactivate:void 0},{},[]);return r.TPromise.as(void 0)}for(var u=Object.create(null),d=[],o=0,a=e.length;a>o;o++)this._handleActivateRequest(e[o],u,d);for(var o=0,a=d.length;a>o;o++)u[d[o].id]&&delete u[d[o].id];var h=Object.keys(u).map(function(e){return u[e]});return 0===d.length?r.TPromise.join(h.map(function(e){return i._activatePlugin(e)})).then(function(e){}):this._activatePlugins(h,t+1).then(function(e){return i._activatePlugins(d,t+1)})},e.prototype._activatePlugin=function(e){var t=this;return c.call(this.activatedPlugins,e.id)?r.TPromise.as(this.activatedPlugins[e.id].exports):c.call(this.activatingPlugins,e.id)?this.activatingPlugins[e.id]:(this.activatingPlugins[e.id]=this._actualActivatePlugin(e).then(null,function(i){return t._showMessage(s["default"].Error,n.localize(3,null,e.id,i.message)),console.error("Activating extension `"+e.id+"` failed: ",i.message),console.log("Here is the error stack: ",i.stack),new l(!0,{activate:void 0,deactivate:void 0},{},[])}).then(function(n){return t.activatedPlugins[e.id]=n,delete t.activatingPlugins[e.id],n.exports}),this.activatingPlugins[e.id])},e.prototype._actualActivatePlugin=function(t){var n=this;return t.main?this._loadPluginModule(t).then(function(i){return n._loadPluginContext(t).then(function(t){return e._callActivate(i,t)})}):r.TPromise.as(new l(!1,{activate:void 0,deactivate:void 0},{},[]))},e.prototype._loadPluginModule=function(e){return a(e.main)},e.prototype._loadPluginContext=function(e){return r.TPromise.as(void 0)},e._callActivate=function(e,t){return e=e||{activate:void 0,deactivate:void 0},this._callActivateOptional(e,t).then(function(n){return new l(!1,e,n,t.subscriptions)})},e._callActivateOptional=function(e,t){if("function"!=typeof e.activate)return r.TPromise.as(e);try{return r.TPromise.as(e.activate.apply(u,[t]))}catch(n){return r.TPromise.wrapError(n)}},e}();t.AbstractPluginService=d,t.loadAMDModule=a}),define("vs/platform/progress/common/progress",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IProgressService=n.createDecorator("progressService")}),define("vs/platform/request/common/request",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IRequestService=n.createDecorator("requestService")}),define("vs/platform/request/common/baseRequestService",["require","exports","vs/base/common/uri","vs/base/common/strings","vs/base/common/timer","vs/base/common/async","vs/base/common/http","vs/base/common/winjs.base","vs/base/common/objects","vs/platform/request/common/request"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e,t){this.serviceId=u.IRequestService;var n=null,e=e,r=e.getWorkspace();this._serviceMap=r||Object.create(null),this._telemetryService=t,r&&(n=i.rtrim(r.resource.toString(),"/")+"/"),this.computeOrigin(n)}return e.prototype.computeOrigin=function(e){if(e){this._origin=e;var t=n["default"].parse(this._origin).path;t&&t.length>0&&(this._origin=this._origin.substring(0,this._origin.length-t.length+1)),i.endsWith(this._origin,"/")||(this._origin+="/")}else this._origin="/"},e.prototype.makeCrossOriginRequest=function(e){return null},e.prototype.makeRequest=function(e){var t=r.nullEvent,n=!1,s=e.url;if(!s)throw new Error("IRequestService.makeRequest: Url is required");if((i.startsWith(s,"http://")||i.startsWith(s,"https://"))&&this._origin&&!i.startsWith(s,this._origin)){var u=this.makeCrossOriginRequest(e);if(u)return u;n=!0}var l=e;if(!n){var d={};this._telemetryService&&(d["X-TelemetrySession"]=this._telemetryService.getSessionId()),d["X-Requested-With"]="XMLHttpRequest",l.headers=c.mixin(l.headers,d)}return e.timeout&&(l.customRequestInitializer=function(t){t.timeout=e.timeout}),o.always(a.xhr(l),function(e){t.data&&(t.data.status=e.status),t.stop()})},e.prototype.makeChunkedRequest=function(e){var t,n,i,r=this,o=0,c=!1;return new a.TPromise(function(a,c,u){t=a,n=c,i=u,r.makeRequest(e).done(function(e){var n={request:e,chunks:[]};o=s.parseChunkedData(e,n.chunks,o),t(n)},function(e){n(e)},function(e){})},function(){c=!0})},e}();t.BaseRequestService=l}),define("vs/platform/search/common/search",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.ID="searchService",t.ISearchService=n.createDecorator(t.ID),function(e){e[e.File=1]="File",e[e.Text=2]="Text"}(t.QueryType||(t.QueryType={}));var i=(t.QueryType,function(){function e(e){this.resource=e,this.lineMatches=[]}return e}());t.FileMatch=i;
var r=function(){function e(e,t,n){this.preview=e,this.lineNumber=t,this.offsetAndLengths=n}return e}();t.LineMatch=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/selection/common/selection",["require","exports"],function(e,t){var n=function(){function e(e){this._selection=e||[]}return Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._selection.length},e.EMPTY=new e([]),e}();t.Selection=n;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.toArray=function(){return this.selection},t}(n);t.StructuredSelection=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/storage/common/storage",["require","exports","vs/base/common/events","vs/platform/instantiation/common/instantiation"],function(e,t,n,i){t.ID="storageService",t.IStorageService=i.createDecorator(t.ID);var r;!function(e){e.STORAGE="storage"}(r=t.StorageEventType||(t.StorageEventType={}));var o=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.isLocal=function(){return!this.originalEvent},t}(n.PropertyChangeEvent);t.StorageEvent=o,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.StorageScope||(t.StorageScope={}));t.StorageScope}),define("vs/platform/telemetry/common/telemetry",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){function i(e){if(!e)return e;for(var t="",n=0;n<e.length;n++){var i=e[n];t+=i>="0"&&"9">=i?"0":i>="a"&&"z">=i?"a":i>="A"&&"Z">=i?"A":i}return t}t.ID="telemetryService",t.ITelemetryService=n.createDecorator(t.ID),t.anonymize=i}),define("vs/editor/common/editorCommonExtensions",["require","exports","vs/editor/common/editorCommon","vs/base/common/errors","vs/base/common/uri","vs/editor/common/core/position","vs/platform/telemetry/common/telemetry","vs/editor/common/services/modelService","vs/platform/platform","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/config/config","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e,t,n){l.withCodeEditorFromCommandHandler(e,t,n,function(t){t.trigger("keyboard",e,n)})}function p(e,t,n){var r=l.findFocusedEditor(e,t,n,!1);if(r)return void r.trigger("keyboard",e,n);var o=l.getActiveEditor(t);if(o){var a=o.getAction(e);return void(a&&(t.get(s.ITelemetryService).publicLog("editorActionInvoked",{name:a.label}),a.run().done(null,i.onUnexpectedError)))}}function f(e,t){var i=[];return e?i.push({key:n.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS}):i.push({key:n.KEYBINDING_CONTEXT_EDITOR_FOCUS}),t&&i.push({key:t}),i}function m(e,t){return function(n,i){l.withCodeEditorFromCommandHandler(e,n,i,function(e){t(n,e,i)})}}!function(e){e[e.None=0]="None",e[e.EditorTextFocus=1]="EditorTextFocus",e[e.EditorFocus=2]="EditorFocus"}(t.ContextKey||(t.ContextKey={}));var v=t.ContextKey,g=function(){function e(e,t,n,i){void 0===i&&(i=w),this.ctor=e,this.id=t,this.label=n,this.kbOpts=i}return e}();t.EditorActionDescriptor=g;var y;!function(e){function t(e){c.Registry.as(E.EditorCommonContributions).registerEditorAction(e)}function n(e){c.Registry.as(E.EditorCommonContributions).registerEditorContribution2(e)}function s(){return c.Registry.as(E.EditorCommonContributions).getEditorContributions2()}function l(e){return void 0===e&&(e=0),u.KeybindingsRegistry.WEIGHT.editorContrib(e)}function d(e,t,n,i,r,o){var s={id:e,handler:m(e,o),weight:t,context:f(i,r),primary:n.primary,secondary:n.secondary,win:n.win,linux:n.linux,mac:n.mac};u.KeybindingsRegistry.registerCommandDesc(s)}function h(e,t){u.KeybindingsRegistry.registerCommandDesc({id:e,handler:function(e,n){if(n&&n.length>1||"object"!=typeof n[0])throw i.illegalArgument();return t(e,n&&n[0])},weight:u.KeybindingsRegistry.WEIGHT.editorContrib(),primary:void 0,context:void 0})}function p(e,t){h(e,function(e,n){var s=n.resource,c=n.position;if(!r["default"].isURI(s)||!o.Position.isIPosition(c))throw i.illegalArgument();var u=e.get(a.IModelService).getModel(s);if(!u)throw i.illegalArgument();return t(u,c,n)})}e.registerEditorAction=t,e.registerEditorContribution=n,e.getEditorContributions=s,e.commandWeight=l,e.registerEditorCommand=d,e.registerLanguageCommand=h,e.registerDefaultLanguageCommand=p}(y=t.CommonEditorRegistry||(t.CommonEditorRegistry={}));var _=function(){function e(e){this._ctor=e}return e.prototype.createInstance=function(e,t){return e.createInstance(this._ctor,t)},e}(),b=function(){function e(e,t,n){this._descriptor=d.createSyncDescriptor(e,{id:t,label:n})}return e.prototype.createInstance=function(e,t){return e.createInstance(this._descriptor,t)},e}(),E={EditorCommonContributions:"editor.commonContributions"},S=function(){function e(){this.editorContributions=[]}return e.prototype.registerEditorContribution2=function(e){this.editorContributions.push(new _(e))},e.prototype.registerEditorAction=function(e){var t=e.kbOpts.handler;t||(t=e.kbOpts.context===v.EditorTextFocus||e.kbOpts.context===v.EditorFocus?h.bind(null,e.id):p.bind(null,e.id));var i=null;e.kbOpts.context===v.EditorTextFocus?i=[{key:n.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS}]:e.kbOpts.context===v.EditorFocus&&(i=[{key:n.KEYBINDING_CONTEXT_EDITOR_FOCUS}]);var r={id:e.id,handler:t,weight:u.KeybindingsRegistry.WEIGHT.editorContrib(),context:i,primary:e.kbOpts.primary,secondary:e.kbOpts.secondary,win:e.kbOpts.win,linux:e.kbOpts.linux,mac:e.kbOpts.mac};u.KeybindingsRegistry.registerCommandDesc(r),this.editorContributions.push(new b(e.ctor,e.id,e.label))},e.prototype.getEditorContributions2=function(){return this.editorContributions.slice(0)},e}();c.Registry.add(E.EditorCommonContributions,new S);var w={primary:null,context:v.EditorTextFocus}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/clipboard/browser/clipboard",["require","exports","vs/nls!vs/editor/contrib/clipboard/browser/clipboard","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/base/browser/browser","vs/editor/common/editorCommon","vs/editor/common/config/config","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","vs/css!./clipboard"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e){var t=e.getModel();if(!t)return!1;var n=t.hasEditableRange();if(!n)return!0;var i=t.getEditableRange(),r=e.getPosition();return i.containsPosition(r)}function p(e){a.supportsExecCommand(e.execCommand)&&o.CommonEditorRegistry.registerEditorAction(new o.EditorActionDescriptor(e.ctor,e.id,e.label,{handler:f.bind(null,e.id,e.execCommand),context:o.ContextKey.None,primary:e.primary,secondary:e.secondary,win:e.win,linux:e.linux,mac:e.mac}))}function f(e,t,n,i){if(i.context[c.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS]){var r=u.findFocusedEditor(e,n,i,!1);if(r)return void r.trigger("keyboard",e,i)}document.execCommand(t)}var m=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,i),this.toUnhook=[],this.toUnhook.push(this.editor.addListener(c.EventType.CursorSelectionChanged,function(e){o.resetEnablementState()}))}return __extends(t,e),t.prototype.dispose=function(){this.toUnhook=i.cAll(this.toUnhook),e.prototype.dispose.call(this)},t.prototype.getEnablementState=function(){return a.enableEmptySelectionClipboard?!0:!this.editor.getSelection().isEmpty()},t=__decorate([__param(3,l.INullService)],t)}(s.EditorAction),v=function(e){function t(t,n,i){e.call(this,t,n,s.Behaviour.Writeable|s.Behaviour.WidgetFocus|s.Behaviour.ShowInContextMenu|s.Behaviour.UpdateOnCursorPositionChange,i)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/2_cut"},t.prototype.getEnablementState=function(){return e.prototype.getEnablementState.call(this)&&h(this.editor)},t.prototype.run=function(){return this.editor.focus(),document.execCommand("cut"),r.TPromise.as(!0)},t=__decorate([__param(2,l.INullService)],t)}(m),g=function(e){function t(t,n,i){e.call(this,t,n,s.Behaviour.WidgetFocus|s.Behaviour.ShowInContextMenu,i)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/1_copy"},t.prototype.run=function(){return this.editor.focus(),document.execCommand("copy"),r.TPromise.as(!0)},t=__decorate([__param(2,l.INullService)],t)}(m),y=function(e){function t(t,n,i){e.call(this,t,n,s.Behaviour.Writeable|s.Behaviour.WidgetFocus|s.Behaviour.ShowInContextMenu|s.Behaviour.UpdateOnCursorPositionChange)}return __extends(t,e),t.prototype.getGroupId=function(){return"3_edit/3_paste"},t.prototype.getEnablementState=function(){return h(this.editor)},t.prototype.run=function(){return this.editor.focus(),document.execCommand("paste"),null},t=__decorate([__param(2,l.INullService)],t)}(s.EditorAction);p({ctor:v,id:"editor.action.clipboardCutAction",label:n.localize(0,null),execCommand:"cut",primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_X,win:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_X,secondary:[d.KeyMod.Shift|d.KeyCode.Delete]}}),p({ctor:g,id:"editor.action.clipboardCopyAction",label:n.localize(1,null),execCommand:"copy",primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_C,win:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_C,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.Insert]}}),p({ctor:y,id:"editor.action.clipboardPasteAction",label:n.localize(2,null),execCommand:"paste",primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_V,win:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_V,secondary:[d.KeyMod.Shift|d.KeyCode.Insert]}})}),define("vs/editor/contrib/codelens/common/codelens",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/editor/common/services/modelService","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,r,o,s,a){function c(e){var i=[],r=t.CodeLensRegistry.all(e).map(function(t){return t.findCodeLensSymbols(e.getAssociatedResource()).then(function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];i.push({symbol:r,support:t})}},function(e){n.onUnexpectedError(e)})});return o.TPromise.join(r).then(function(){return i})}t.CodeLensRegistry=new a["default"]("codeLensSupport"),t.getCodeLensData=c,s.CommonEditorRegistry.registerLanguageCommand("_executeCodeLensProvider",function(e,t){var o=t.resource;if(!i["default"].isURI(o))throw n.illegalArgument();var s=e.get(r.IModelService).getModel(o);if(!s)throw n.illegalArgument();return c(s)})});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/codelens/browser/codelens",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/lifecycle","vs/base/common/async","vs/base/common/severity","vs/base/browser/dom","vs/base/common/errors","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/editor/browser/editorBrowserExtensions","vs/editor/common/services/modelService","vs/platform/configuration/common/configuration","vs/platform/keybinding/common/keybindingService","vs/platform/message/common/message","vs/editor/common/core/range","../common/codelens","vs/css!./codelens"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){function y(e,t){for(var n=1,i=e.getModels().filter(function(e){return e.getMode().getId()===t}).map(function(e){return{url:e.getAssociatedResource().toString(),versionId:e.getVersionId()}}).sort(function(e,t){return e.url<t.url?-1:e.url>t.url?1:0}),r=0;r<i.length;r++)n=(31*n|0)+i[r].versionId|0;return n}var _=function(){function e(e){this.afterLineNumber=e,this.heightInLines=1,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return e.prototype.setAfterLineNumber=function(e){this.afterLineNumber=e},e}(),b=function(){function e(t,n,i,r){var o=this;this._commands=Object.create(null),this._id="codeLensWidget"+ ++e.ID,this._editor=t,this.setSymbolRange(n),this._domNode=document.createElement("span"),this._domNode.style.height=t.getConfiguration().lineHeight+"px",this._domNode.innerHTML="&nbsp;",a.addClass(this._domNode,"codelens-decoration"),a.addClass(this._domNode,"invisible-cl"),this._subscription=a.addListener(this._domNode,"click",function(e){var n=e.target;if("A"===n.tagName&&n.id){var a=o._commands[n.id];a&&(t.focus(),i.executeCommand(a.id,a.arguments).done(void 0,function(e){r.show(s["default"].Error,e)}))}}),this.updateVisibility()}return e.prototype.dispose=function(){this._subscription(),this._symbolRange=null},e.prototype.updateVisibility=function(){this.isVisible()&&(a.removeClass(this._domNode,"invisible-cl"),a.addClass(this._domNode,"fadein"))},e.prototype.withCommands=function(e){if(this._commands=Object.create(null),!e||!e.length)return void(this._domNode.innerHTML="no commands");for(var t=[],n=0;n<e.length;n++){var r=e[n].command,o=void 0;r.id?(o=i.format("<a id={0}>{1}</a>",n,r.title),this._commands[n]=r):o=i.format("<span>{0}</span>",r.title),t.push(o)}this._domNode.innerHTML=t.join("<span>&nbsp;|&nbsp;</span>"),this._editor.layoutContentWidget(this)},e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.setSymbolRange=function(e){this._symbolRange=e;var t=e.startLineNumber,n=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:n},preference:[u.ContentWidgetPositionPreference.ABOVE]}},e.prototype.getPosition=function(){return this._widgetPosition},e.prototype.isVisible=function(){return this._domNode.hasAttribute("monaco-visible-content-widget")},e.ID=0,e}(),E=function(){function e(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return e.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},e.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},e.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;i>n;n++)this._addDecorationsCallbacks[n](t[n])},e}(),S=function(){function e(e,t,n,i,r,o){var s=this;this._editor=t,this._data=e,this._decorationIds=new Array(this._data.length);var a;this._data.forEach(function(e,t){n.addDecoration({range:e.symbol.range,options:{}},function(e){return s._decorationIds[t]=e});for(var i=0,r=s._data;i<r.length;i++){var o=r[i];a=a?v.Range.plusRange(a,o.symbol.range):o.symbol.range}}),this._viewZone=new _(a.startLineNumber-1),this._contentWidget=new b(t,v.Range.lift(a),r,o),this._viewZoneId=i.addZone(this._viewZone),this._editor.addContentWidget(this._contentWidget),this._lastUpdateModelsVersionId=-1}return e.prototype.dispose=function(e,t){for(;this._decorationIds.length;)e.removeDecoration(this._decorationIds.pop());t&&t.removeZone(this._viewZoneId),this._editor.removeContentWidget(this._contentWidget),this._contentWidget.dispose()},e.prototype.isValid=function(){var e=this;return this._decorationIds.some(function(t){var n=e._editor.getModel().getDecorationRange(t);return n&&!n.isEmpty()})},e.prototype.updateCodeLensSymbols=function(e){this._data=e},e.prototype.computeIfNecessary=function(e,t){if(this._contentWidget.updateVisibility(),!this._contentWidget.isVisible())return null;if(this._lastUpdateModelsVersionId===e)return null;for(var n=0;n<this._decorationIds.length;n++)this._data[n].symbol.range=t.getDecorationRange(this._decorationIds[n]);return this._data},e.prototype.updateCommands=function(e,t){this._contentWidget.withCommands(e),this._lastUpdateModelsVersionId=t},e.prototype.getLineNumber=function(){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1},e.prototype.update=function(e){if(this.isValid()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);this._viewZone.setAfterLineNumber(t.startLineNumber-1),e.layoutZone(this._viewZoneId),this._contentWidget.setSymbolRange(t),this._editor.layoutContentWidget(this._contentWidget)}},e}(),w=function(){function e(t,n,i,r,o){var s=this;this._instanceCount=++e.INSTANCE_COUNT,this._editor=t,this._modelService=n,this._configurationService=i,this._keybindingService=r,this._messageService=o,this._globalToDispose=[],this._localToDispose=[],this._lenses=[],this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter=0,this._codeLenseDisabledByMode=!0,this._globalToDispose.push(this._editor.addListener2(l.EventType.ModelChanged,function(){return s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(l.EventType.ModelModeChanged,function(){return s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(l.EventType.ModelModeSupportChanged,function(e){e.codeLensSupport&&s.onModelChange()})),this._globalToDispose.push(this._editor.addListener2(l.EventType.ConfigurationChanged,function(e){e.referenceInfos&&s.onModelChange()})),this._globalToDispose.push(g.CodeLensRegistry.onDidChange(this.onModelChange,this)),this.onModelChange()}return e.prototype.dispose=function(){this.localDispose(),this._globalToDispose=r.disposeAll(this._globalToDispose)},e.prototype.localDispose=function(){this._currentFindCodeLensSymbolsPromise&&(this._currentFindCodeLensSymbolsPromise.cancel(),this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter++),this._currentFindOccPromise&&(this._currentFindOccPromise.cancel(),this._currentFindOccPromise=null),this._localToDispose=r.disposeAll(this._localToDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onModelChange=function(){var e=this;this.localDispose();var t=this._editor.getModel();if(t&&this._editor.getConfiguration().referenceInfos&&g.CodeLensRegistry.has(t)){var n=new o.RunOnceScheduler(function(){e._currentFindCodeLensSymbolsPromise&&e._currentFindCodeLensSymbolsPromise.cancel(),e._currentFindCodeLensSymbolsPromise=g.getCodeLensData(t);var n=++e._modelChangeCounter;e._currentFindCodeLensSymbolsPromise.then(function(t){n===e._modelChangeCounter&&(e.renderCodeLensSymbols(t),i.schedule())},function(e){c.onUnexpectedError(e)})},250),i=new o.RunOnceScheduler(function(){e._onViewportChanged(t.getMode().getId())},500);this._localToDispose.push(n),this._localToDispose.push(i),this._localToDispose.push(t.addBulkListener2(function(t){for(var r=!1,o=0;o<t.length;o++){var s=t[o].getType();if(s===l.EventType.ModelContentChanged){r=!0;break}}r&&(e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){var i=[];e._lenses.forEach(function(e){e.isValid()?e.update(n):i.push(e)});var r=new E;i.forEach(function(t){t.dispose(r,n),e._lenses.splice(e._lenses.indexOf(t),1)}),r.commit(t)})}),i.schedule(),n.schedule())})),this._localToDispose.push(this._editor.addListener2("scroll",function(e){i.schedule()})),this._localToDispose.push({dispose:function(){e._editor.getModel()?e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){e._disposeAllLenses(t,n)})}):e._disposeAllLenses(null,null)}}),n.schedule()}},e.prototype._disposeAllLenses=function(e,t){var n=new E;this._lenses.forEach(function(e){return e.dispose(n,t)}),e&&n.commit(e),this._lenses=[]},e.prototype.renderCodeLensSymbols=function(e){var t=this;e=e?e.sort(function(e,t){return v.Range.compareRangesUsingStarts(e.symbol.range,t.symbol.range)}):[];for(var n,i=this._editor.getModel().getLineCount(),r=[],o=0;o<e.length;o++){var s=e[o],a=s.symbol.range.startLineNumber;1>a||a>=i||(n&&n[n.length-1].symbol.range.startLineNumber===a?n.push(s):(n=[s],r.push(n)))}var c=this._editor.getCenteredRangeInViewport(),u=r.length!==this._lenses.length;this._editor.changeDecorations(function(e){t._editor.changeViewZones(function(n){for(var i=0,o=0,s=new E;o<r.length&&i<t._lenses.length;){var a=r[o][0].symbol.range.startLineNumber,c=t._lenses[i].getLineNumber();a>c?(t._lenses[i].dispose(s,n),t._lenses.splice(i,1)):c===a?(t._lenses[i].updateCodeLensSymbols(r[o]),o++,i++):(t._lenses.splice(i,0,new S(r[o],t._editor,s,n,t._keybindingService,t._messageService)),i++,o++)}for(;i<t._lenses.length;)t._lenses[i].dispose(s,n),t._lenses.splice(i,1);for(;o<r.length;)t._lenses.push(new S(r[o],t._editor,s,n,t._keybindingService,t._messageService)),o++;s.commit(e)})}),u&&this._editor.revealRangeInCenter(c)},e.prototype._onViewportChanged=function(e){var t=this;this._currentFindOccPromise&&(this._currentFindOccPromise.cancel(),this._currentFindOccPromise=null);var i=this._editor.getModel();if(i){var r=y(this._modelService,e),o=[],s=[];if(this._lenses.forEach(function(e){var t=e.computeIfNecessary(r,i);t&&(o.push(t),s.push(e))}),0!==o.length){var a=i.getAssociatedResource(),c=o.map(function(e,t){var i=new Array(e.length),o=e.map(function(e,t){return e.support.resolveCodeLensSymbol(a,e.symbol).then(function(e){i[t]=e})});return n.TPromise.join(o).then(function(){s[t].updateCommands(i,r)})});this._currentFindOccPromise=n.TPromise.join(c).then(function(){t._currentFindOccPromise=null})}}},e.ID="css.editor.codeLens",e.INSTANCE_COUNT=0,e=__decorate([__param(1,h.IModelService),__param(2,p.IConfigurationService),__param(3,f.IKeybindingService),__param(4,m.IMessageService)],e)}();t.CodeLensContribution=w,d.EditorBrowserRegistry.registerEditorContribution(w)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/color/browser/color",["require","exports","vs/base/common/lifecycle","vs/base/common/async","vs/base/browser/dom","vs/base/common/errors","vs/base/common/strings","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/platform/instantiation/common/instantiation","vs/css!./color"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e,t){this.renderingDecorationId=e,this.trackingDecorationId=t}return e.createRenderingDecoration=function(e,t){return{range:{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.startLineNumber,endColumn:e.startColumn+1},options:{inlineClassName:"inline-color-decoration "+t,stickiness:a.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}},e.createTrackingDecoration=function(e){return{range:e,options:{stickiness:a.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}},e.prototype.getColorValue=function(e){var t=e.getDecorationRange(this.trackingDecorationId);return t?e.getValueInRange(t):""},e}(),d=function(){function e(t,n){var o=this;this._instanceCount=++e.INSTANCE_COUNT,this._editor=t,this._callOnDispose=[],this._callOnModelChange=[],this._currentDecorations=[],this._currentDynamicColors=[],this._contentChangedScheduler=new i.RunOnceScheduler(null,250),this._decorationsChangedScheduler=new i.RunOnceScheduler(function(){return o.onDecorationsChanged()},250),this._currentFindColorDeclarationsPromise=null,this._callOnDispose.push(this._contentChangedScheduler),this._callOnDispose.push(this._decorationsChangedScheduler),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelChanged,function(){return o.onModelChange()})),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelModeChanged,function(){return o.onModelChange()})),this._callOnDispose.push(this._editor.addListener2(a.EventType.ModelModeSupportChanged,function(e){o.onModelChange()})),this._style=r.createStyleSheet(),this.onModelChange()}return e.prototype.dispose=function(){var e=this;this._currentDecorations.length>0&&this._editor.changeDecorations(function(t){for(var n=[],i=0,r=e._currentDecorations.length;r>i;i++)n.push(e._currentDecorations[i].renderingDecorationId),n.push(e._currentDecorations[i].trackingDecorationId);t.deltaDecorations(n,[]),e._currentDecorations=null}),this._style.parentNode.removeChild(this._style),this._style=null,this._callOnDispose=n.disposeAll(this._callOnDispose)},e.prototype.getId=function(){return e.ID},e.prototype.onModelChange=function(){var e=this;n.cAll(this._callOnModelChange);var t=this._editor.getModel();if(t){var i=t.getMode();"function"==typeof i.findColorDeclarations&&(this._contentChangedScheduler.setRunner(function(){e._currentFindColorDeclarationsPromise&&e._currentFindColorDeclarationsPromise.cancel(),e._currentFindColorDeclarationsPromise=i.findColorDeclarations(t.getAssociatedResource());var n=e._editor.getModel().getVersionId();e._currentFindColorDeclarationsPromise.then(function(t){n===e._editor.getModel().getVersionId()&&e.renderAndTrackColors(t)},function(e){o.onUnexpectedError(e)})}),this._contentChangedScheduler.schedule(),this._callOnModelChange.push(function(){e._contentChangedScheduler.cancel(),e._decorationsChangedScheduler.cancel()}),this._callOnModelChange.push(function(){e._currentFindColorDeclarationsPromise&&e._currentFindColorDeclarationsPromise.cancel(),e._currentFindColorDeclarationsPromise=null}),this._callOnModelChange.push(this._editor.addListener(a.EventType.ModelContentChanged,function(t){return e._contentChangedScheduler.schedule()})),this._callOnModelChange.push(t.addListener(a.EventType.ModelDecorationsChanged,function(t){return e._decorationsChangedScheduler.schedule()})))}},e.prototype.renderAndTrackColors=function(e){var t=this;e=e.slice(0,500),this._editor.changeDecorations(function(n){for(var i=[],r=0,o=t._currentDecorations.length;o>r;r++)i.push(t._currentDecorations[r].renderingDecorationId),i.push(t._currentDecorations[r].trackingDecorationId);for(var s=[],r=0,o=e.length;o>r;r++)s.push(l.createRenderingDecoration(e[r].range,t.getCSSRuleName(r))),s.push(l.createTrackingDecoration(e[r].range));var a=n.deltaDecorations(i,s);t._currentDecorations=[];for(var r=0,o=e.length;o>r;r++)t._currentDecorations.push(new l(a[2*r],a[2*r+1]))}),this.onDecorationsChanged()},e.prototype.onDecorationsChanged=function(){var e,t,n,i,r,o,s=this,a=this._editor.getModel(),c=[];this._editor.changeDecorations(function(u){for(e=0,t=s._currentDecorations.length;t>e;e++)o=s._currentDecorations[e],n=a.getDecorationRange(o.trackingDecorationId),n&&!n.isEmpty()?(c[e]=a.getValueInRange(n).replace(/[^%#a-z0-9.,()]/gi,""),i=a.getDecorationRange(o.renderingDecorationId),r=a.validateRange({startLineNumber:n.startLineNumber,startColumn:n.startColumn,endLineNumber:n.startLineNumber,endColumn:n.startColumn+1}),i&&i.equalsRange(r)||u.changeDecoration(o.renderingDecorationId,r)):c[e]="";s.ensureColors(c)})},e.prototype.getCSSRuleName=function(e){return 0>e?".monaco-css-dynamic-"+this._instanceCount+"-":".monaco-css-dynamic-"+this._instanceCount+"-"+e+":before"},e.prototype._changeCost=function(e){if(this._currentDynamicColors.length!==e.length)return Number.MAX_VALUE;for(var t=0,n=0;n<e.length;n++)e[n]!==this._currentDynamicColors[n]&&t++;return t},e.prototype.ensureColors=function(e){var t,n=this._changeCost(e);if(0!==n){if(10>n){for(t=0;t<e.length;t++)if(e[t]!==this._currentDynamicColors[t]){var i=r.getCSSRule(this.getCSSRuleName(t),this._style);i&&(i.style.backgroundColor=e[t])}}else{var o=[];for(t=0;t<e.length;t++)o.push(this.getCSSRuleName(t)),o.push("{"),o.push(this.getCSSText(e[t])),o.push("}");this._style.innerHTML=o.join("")}this._currentDynamicColors=e}},e.prototype.getCSSText=function(e){return s.format("background-color:{0};",e)},e.ID="css.editor.colorContribution",e.INSTANCE_COUNT=0,e=__decorate([__param(1,u.INullService)],e)}();t.ColorContribution=d,c.CommonEditorRegistry.registerEditorContribution(d)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/comment/common/comment",["require","exports","vs/nls!vs/editor/contrib/comment/common/comment","vs/base/common/winjs.base","./lineCommentCommand","./blockCommentCommand","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u){var l=function(e){function t(t,n,i,r){e.call(this,t,n),this._type=i}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=this.editor.getIndentationOptions(),o=0;o<t.length;o++)e.push(new r.LineCommentCommand(t[o],n.tabSize,this._type));return this.editor.executeCommands(this.id,e),i.TPromise.as(null)},t.ID="editor.action.commentLine",t=__decorate([__param(3,c.INullService)],t)}(a.EditorAction),d=function(e){function t(t,n,i){e.call(this,t,n,r.Type.Toggle,i)}return __extends(t,e),t.ID="editor.action.commentLine",t=__decorate([__param(2,c.INullService)],t)}(l),h=function(e){function t(t,n,i){e.call(this,t,n,r.Type.ForceAdd,i)}return __extends(t,e),t.ID="editor.action.addCommentLine",t=__decorate([__param(2,c.INullService)],t)}(l),p=function(e){function t(t,n,i){e.call(this,t,n,r.Type.ForceRemove,i)}return __extends(t,e),t.ID="editor.action.removeCommentLine",t=__decorate([__param(2,c.INullService)],t)}(l),f=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new o.BlockCommentCommand(t[n]));return this.editor.executeCommands(this.id,e),i.TPromise.as(null)},t.ID="editor.action.blockComment",t=__decorate([__param(2,c.INullService)],t)}(a.EditorAction);s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(d,d.ID,n.localize(0,null),{context:s.ContextKey.EditorTextFocus,primary:u.KeyMod.CtrlCmd|u.KeyCode.US_SLASH})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(h,h.ID,n.localize(1,null),{context:s.ContextKey.EditorTextFocus,primary:u.KeyMod.chord(u.KeyMod.CtrlCmd|u.KeyCode.KEY_K,u.KeyMod.CtrlCmd|u.KeyCode.KEY_C)})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(p,p.ID,n.localize(2,null),{context:s.ContextKey.EditorTextFocus,primary:u.KeyMod.chord(u.KeyMod.CtrlCmd|u.KeyCode.KEY_K,u.KeyMod.CtrlCmd|u.KeyCode.KEY_U)})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(f,f.ID,n.localize(3,null),{context:s.ContextKey.EditorTextFocus,primary:u.KeyMod.Shift|u.KeyMod.Alt|u.KeyCode.KEY_A,linux:{primary:u.KeyMod.CtrlCmd|u.KeyMod.Shift|u.KeyCode.KEY_A
}}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/contextmenu/browser/contextmenu",["require","exports","vs/nls!vs/editor/contrib/contextmenu/browser/contextmenu","vs/base/browser/dom","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/base/browser/ui/actionbar/actionbar","vs/base/common/lifecycle","vs/base/common/sortedList","vs/platform/contextview/browser/contextView","vs/platform/keybinding/common/keybindingService","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){var v=function(){function e(e,t,n,i){var r=this;this.contextMenuService=t,this.contextViewService=n,this.keybindingService=i,this._editor=e,this._toDispose=[],this._contextMenuIsBeingShownCount=0,this._toDispose.push(this._editor.addListener2(c.EventType.ContextMenu,function(e){return r._onContextMenu(e)})),this._toDispose.push(this._editor.addListener2(c.EventType.KeyDown,function(e){e.keyCode===m.KeyCode.ContextMenu&&(e.preventDefault(),e.stopPropagation(),r.showContextMenu())}))}return e.prototype._onContextMenu=function(e){if(!this._editor.getConfiguration().contextmenu)return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(e.target.type!==c.MouseTargetType.OVERLAY_WIDGET&&(e.event.preventDefault(),e.target.type===c.MouseTargetType.CONTENT_TEXT||e.target.type===c.MouseTargetType.CONTENT_EMPTY||e.target.type===c.MouseTargetType.TEXTAREA)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);var t;e.target.type!==c.MouseTargetType.TEXTAREA&&(t={x:e.event.posx,y:e.event.posy+1}),this.showContextMenu(t)}},e.prototype.showContextMenu=function(e){if(this._editor.getConfiguration().contextmenu){if(!this.contextMenuService)return void this._editor.focus();var t=this._editor.getPosition(),n=this._editor.getModel();if(t&&n){this._editor.revealPosition(t);var i=this._getMenuActions();i.length>0&&this._doShowContextMenu(i,e)}}},e.prototype._getMenuActions=function(){var e=this._editor.getModel();if(!e)return[];var t=this._editor.getActions(),n=t.filter(function(e){return"function"==typeof e.shouldShowInContextMenu&&e.shouldShowInContextMenu()&&e.isSupported()});return this._prepareActions(n)},e.prototype._prepareActions=function(e){var t=new d.SortedList;e.forEach(function(e){var n=e.getGroupId().split("/"),i=t.getValue(n[0]);i||(i=new d.SortedList,t.add(n[0],i)),i.add(n[1]||n[0],e)});for(var n=[],i=t.getIterator();i.moveNext();){for(var r=i.current.value,o=r.getIterator();o.moveNext();){var s=o.current.value;n.push(s)}i.hasNext()&&n.push(new u.Separator)}return n},e.prototype._doShowContextMenu=function(e,t){var n=this;void 0===t&&(t=null),this._editor.beginForcedWidgetFocus();var o=this._editor.getConfiguration().hover;this._editor.updateOptions({hover:!1});var s=t;if(!s){var a=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),c=i.getDomNodePosition(this._editor.getDomNode()),l=c.left+a.left,d=c.top+a.top+a.height;s={x:l,y:d}}this.contextMenuService.showContextMenu({getAnchor:function(){return s},getActions:function(){return r.TPromise.as(e)},getActionItem:function(e){var t=n._keybindingFor(e);if(t)return new u.ActionItem(e,e,{label:!0,keybinding:n.keybindingService.getLabelFor(t)});var i=e;return"function"==typeof i.getActionItem?i.getActionItem():null},getKeyBinding:function(e){return n._keybindingFor(e)},onHide:function(e){n._contextMenuIsBeingShownCount--,n._editor.focus(),n._editor.endForcedWidgetFocus(),n._editor.updateOptions({hover:o})}})},e.prototype._keybindingFor=function(e){var t=this.keybindingService.lookupKeybindings(e.id);return t.length>0?t[0]:null},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._contextMenuIsBeingShownCount>0&&this.contextViewService.hideContextView(),this._toDispose=l.disposeAll(this._toDispose)},e.ID="editor.contrib.contextmenu",e=__decorate([__param(1,h.IContextMenuService),__param(2,h.IContextViewService),__param(3,p.IKeybindingService)],e)}(),g=function(e){function t(t,n,i){e.call(this,t,n,a.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){var e=this.editor.getContribution(v.ID);return e?(e.showContextMenu(),r.TPromise.as(null)):r.TPromise.as(null)},t.ID="editor.action.showContextMenu",t=__decorate([__param(2,f.INullService)],t)}(a.EditorAction);o.EditorBrowserRegistry.registerEditorContribution(v),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(g,g.ID,n.localize(0,null),{context:s.ContextKey.EditorTextFocus,primary:m.KeyMod.Shift|m.KeyCode.F10}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/find/browser/find",["require","exports","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","./findWidget","vs/editor/contrib/find/common/findModel","vs/nls!vs/editor/contrib/find/browser/find","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/editor/common/core/selection","vs/platform/keybinding/common/keybindingService","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","vs/editor/common/core/range"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){function y(e,t){var n,i,r=b.getFindController(e),o=r.getFindState(),s=!1,a=!1,c=!1;if(o&&(s=o.properties.isRegex,a=o.properties.wholeWord,c=o.properties.matchCase),!e.isFocused()&&o&&o.searchString.length>0)n=o.searchString;else{var u=e.getSelection();if(u.startLineNumber!==u.endLineNumber)return null;if(u.isEmpty()){var l=e.getModel().getWordAtPosition(u.getStartPosition());if(!l)return null;n=l.word,i=h.Selection.createSelection(u.startLineNumber,l.startColumn,u.startLineNumber,l.endColumn)}else n=e.getModel().getValueInRange(u);t&&r.setSearchString(n)}return{searchText:n,isRegex:s,matchCase:c,wholeWord:a,nextMatch:i}}function _(e,t,n,i){void 0===i&&(i=null),r.CommonEditorRegistry.registerEditorCommand(e,r.CommonEditorRegistry.commandWeight(5),n,!1,i,function(e,n,i){t(b.getFindController(n))})}var b=function(){function e(t,n,i){var r=this;this._findWidgetVisible=i.createKey(D,!1),this.editor=t,this.model=null,this.widgetIsVisible=!1,this.lastState=null,this.widget=new s.FindWidget(this.editor,this,n,i),this.widgetListeners=[],this.widgetListeners.push(this.widget.addUserInputEventListener(function(e){return r.onWidgetUserInput(e)})),this.widgetListeners.push(this.widget.addClosedEventListener(function(){return r.onWidgetClosed()})),this.editorListeners=[],this.editorListeners.push(this.editor.addListener(d.EventType.ModelChanged,function(){r.disposeBindingAndModel(),r.editor.getModel()&&r.lastState&&r.widgetIsVisible&&r._start(!1,!1,!1,!1)})),this.editorListeners.push(this.editor.addListener(d.EventType.Disposed,function(){r.editorListeners.forEach(function(e){e()}),r.editorListeners=[]})),this._eventEmitter=new u.EventEmitter([e._STATE_CHANGED_EVENT])}return e.getFindController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.widgetListeners=l.disposeAll(this.widgetListeners),this.widget.dispose(),this.disposeBindingAndModel(),this._eventEmitter.dispose()},e.prototype.onStateChanged=function(t){return this._eventEmitter.addListener2(e._STATE_CHANGED_EVENT,t)},e.prototype.disposeBindingAndModel=function(){this._findWidgetVisible.reset(),this.widget.setModel(null),this.model&&(this.model.dispose(),this.model=null)},e.prototype.closeFindWidget=function(){this.widgetIsVisible=!1,this.disposeBindingAndModel(),this.editor.focus()},e.prototype.toggleCaseSensitive=function(){this.widget.toggleCaseSensitive()},e.prototype.toggleWholeWords=function(){this.widget.toggleWholeWords()},e.prototype.toggleRegex=function(){this.widget.toggleRegex()},e.prototype.onWidgetClosed=function(){this.widgetIsVisible=!1,this.disposeBindingAndModel()},e.prototype.getFindState=function(){return this.lastState},e.prototype.setSearchString=function(e){this.widget.setSearchString(e)},e.prototype.onWidgetUserInput=function(t){this.lastState=this.widget.getState(),this.model&&this.model.recomputeMatches(this.lastState,t.jumpToNextMatch),this._eventEmitter.emit(e._STATE_CHANGED_EVENT)},e.prototype._start=function(e,t,n,i){this.model||(this.model=new a.FindModelBoundToEditorModel(this.editor),this.widget.setModel(this.model)),this._findWidgetVisible.set(!0),this.lastState=this.lastState||this.widget.getState();var r=this.editor.getSelection();if(r){if(t&&r.startLineNumber===r.endLineNumber)if(r.isEmpty()){var o=this.editor.getModel().getWordAtPosition(r.getStartPosition());o&&(this.lastState.searchString=o.word)}else this.lastState.searchString=this.editor.getModel().getValueInRange(r);var s=null;n&&r.startLineNumber<r.endLineNumber&&(s=r),e&&(this.lastState.isReplaceRevealed=e),this.model.start(this.lastState,s,i),this.widgetIsVisible=!0,i&&(e?this.widget.focusReplaceInput():this.widget.focusFindInput())}},e.prototype.startFromAction=function(e){this._start(e,!0,!0,!0)},e.prototype.next=function(){return this.model?(this.model.next(),!0):!1},e.prototype.prev=function(){return this.model?(this.model.prev(),!0):!1},e.prototype.enableSelectionFind=function(){this.model&&this.model.setFindScope(this.editor.getSelection())},e.prototype.disableSelectionFind=function(){this.model&&this.model.setFindScope(null)},e.prototype.replace=function(){return this.model?(this.model.replace(),!0):!1},e.prototype.replaceAll=function(){return this.model?(this.model.replaceAll(),!0):!1},e.ID="editor.contrib.findController",e._STATE_CHANGED_EVENT="stateChanged",e=__decorate([__param(1,f.IContextViewService),__param(2,p.IKeybindingService)],e)}();t.FindController=b;var E=function(e){function t(t,n,i){e.call(this,t,n,i||o.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype._startController=function(e){e.startFromAction(!1)},t.prototype.run=function(){var e=b.getFindController(this.editor);return this._startController(e),n.TPromise.as(!0)},t}(o.EditorAction);t.BaseStartFindAction=E;var S=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus)}return __extends(t,e),t=__decorate([__param(2,m.INullService)],t)}(E);t.StartFindAction=S;var w=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor);return e.next()||(e.startFromAction(!1),e.next()),n.TPromise.as(!0)},t=__decorate([__param(2,m.INullService)],t)}(o.EditorAction);t.NextMatchFindAction=w;var C=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=b.getFindController(this.editor);return e.prev()||(e.startFromAction(!1),e.prev()),n.TPromise.as(!0)},t=__decorate([__param(2,m.INullService)],t)}(o.EditorAction);t.PreviousMatchFindAction=C;var T=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus|o.Behaviour.Writeable)}return __extends(t,e),t.prototype.getId=function(){return a.START_FIND_REPLACE_ACTION_ID},t.prototype._startController=function(e){e.startFromAction(!0)},t=__decorate([__param(2,m.INullService)],t)}(E);t.StartFindReplaceAction=T,t.multiCursorFind=y;var I=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype._getNextMatch=function(){var e=y(this.editor,!0);if(!e)return null;if(e.nextMatch)return e.nextMatch;var t=this.editor.getSelections(),n=t[t.length-1],i=this.editor.getModel().findNextMatch(e.searchText,n.getEndPosition(),e.isRegex,e.matchCase,e.wholeWord);return i?h.Selection.createSelection(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):null},t=__decorate([__param(2,m.INullService)],t)}(o.EditorAction),k=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){var e=this._getNextMatch();if(!e)return n.TPromise.as(!1);var t=this.editor.getSelections();return this.editor.setSelections(t.concat(e)),this.editor.revealRangeInCenterIfOutsideViewport(e),n.TPromise.as(!0)},t.ID="editor.action.addSelectionToNextFindMatch",t=__decorate([__param(2,m.INullService)],t)}(I),x=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){var e=this._getNextMatch();if(!e)return n.TPromise.as(!1);var t=this.editor.getSelections();t[t.length-1];return this.editor.setSelections(t.slice(0,t.length-1).concat(e)),this.editor.revealRangeInCenterIfOutsideViewport(e),n.TPromise.as(!0)},t.ID="editor.action.moveSelectionToNextFindMatch",t=__decorate([__param(2,m.INullService)],t)}(I),A=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.WidgetFocus)}return __extends(t,e),t.prototype.run=function(){var e=y(this.editor,!0);if(!e)return n.TPromise.as(!1);var t=this.editor.getModel().findMatches(e.searchText,!0,e.isRegex,e.matchCase,e.wholeWord);return t.length>0&&this.editor.setSelections(t.map(function(e){return h.Selection.createSelection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)})),n.TPromise.as(!0)},t.ID="editor.action.selectHighlights",t=__decorate([__param(2,m.INullService)],t)}(o.EditorAction),R=function(){function e(e,t){var n=this;this.editor=e,this.model=this.editor.getModel(),this.decorations=[],this.toDispose=[],this.toDispose.push(e.addListener2(d.EventType.CursorPositionChanged,function(e){return n._update()})),this.toDispose.push(e.addListener2(d.EventType.ModelChanged,function(e){n.removeDecorations(),n.model=n.editor.getModel()})),this.toDispose.push(b.getFindController(e).onStateChanged(function(){return n._update()}))}return e.prototype.getId=function(){return e.ID},e.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},e.prototype._update=function(){if(this.editor.getConfiguration().selectionHighlight){var e=y(this.editor,!1);if(!e)return void this.removeDecorations();if(e.nextMatch)return void this.removeDecorations();if(/^[ \t]+$/.test(e.searchText))return void this.removeDecorations();if(e.searchText.length>200)return void this.removeDecorations();var t=this.editor.getModel().findMatches(e.searchText,!0,e.isRegex,e.matchCase,e.wholeWord);t.sort(g.Range.compareRangesUsingStarts);var n=this.editor.getSelections();n.sort(g.Range.compareRangesUsingStarts);for(var i=[],r=0,o=0,s=t.length,a=n.length;s>r;){var c=t[r];if(o>=a)i.push(c),r++;else{var u=g.Range.compareRangesUsingStarts(c,n[o]);0>u?(i.push(c),r++):u>0?o++:(r++,o++)}}var l=i.map(function(e){return{range:e,options:{stickiness:d.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"selectionHighlight"}}});this.decorations=this.editor.deltaDecorations(this.decorations,l)}},e.prototype.dispose=function(){this.removeDecorations(),this.toDispose=l.disposeAll(this.toDispose)},e.ID="editor.contrib.selectionHighlighter",e=__decorate([__param(1,m.INullService)],e)}();t.SelectionHighlighter=R,r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(A,A.ID,c.localize(0,null),{context:r.ContextKey.EditorFocus,primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_L}));var D="findWidgetVisible";r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(S,a.START_FIND_ACTION_ID,c.localize(1,null),{context:r.ContextKey.None,primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_F,secondary:[v.KeyMod.CtrlCmd|v.KeyCode.F3]})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(w,a.NEXT_MATCH_FIND_ACTION_ID,c.localize(2,null),{context:r.ContextKey.EditorFocus,primary:v.KeyCode.F3,mac:{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_G,secondary:[v.KeyCode.F3]}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(C,a.PREVIOUS_MATCH_FIND_ACTION_ID,c.localize(3,null),{context:r.ContextKey.EditorFocus,primary:v.KeyMod.Shift|v.KeyCode.F3,mac:{primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_G,secondary:[v.KeyMod.Shift|v.KeyCode.F3]}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(T,a.START_FIND_REPLACE_ACTION_ID,c.localize(4,null),{context:r.ContextKey.None,primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_H,mac:{primary:v.KeyMod.CtrlCmd|v.KeyMod.Alt|v.KeyCode.KEY_F}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(x,x.ID,c.localize(5,null),{context:r.ContextKey.EditorFocus,primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyMod.CtrlCmd|v.KeyCode.KEY_D)})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(k,k.ID,c.localize(6,null),{context:r.ContextKey.EditorFocus,primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_D})),i.EditorBrowserRegistry.registerEditorContribution(b),i.EditorBrowserRegistry.registerEditorContribution(R),_(a.CLOSE_FIND_WIDGET_COMMAND_ID,function(e){return e.closeFindWidget()},{primary:v.KeyCode.Escape},D),_(a.TOGGLE_CASE_SENSITIVE_COMMAND_ID,function(e){return e.toggleCaseSensitive()},{primary:v.KeyMod.Alt|v.KeyCode.KEY_C,mac:{primary:v.KeyMod.CtrlCmd|v.KeyMod.Alt|v.KeyCode.KEY_C}}),_(a.TOGGLE_WHOLE_WORD_COMMAND_ID,function(e){return e.toggleWholeWords()},{primary:v.KeyMod.Alt|v.KeyCode.KEY_W,mac:{primary:v.KeyMod.CtrlCmd|v.KeyMod.Alt|v.KeyCode.KEY_W}}),_(a.TOGGLE_REGEX_COMMAND_ID,function(e){return e.toggleRegex()},{primary:v.KeyMod.Alt|v.KeyCode.KEY_R,mac:{primary:v.KeyMod.CtrlCmd|v.KeyMod.Alt|v.KeyCode.KEY_R}})}),define("vs/editor/contrib/format/common/format",["require","exports","vs/editor/common/modes/languageFeatureRegistry","vs/base/common/errors","vs/base/common/uri","vs/editor/common/services/modelService","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o,s,a,c){function u(e,n,i){var r=t.FormatRegistry.ordered(e).filter(function(e){return"function"==typeof e.formatRange})[0];return r?r.formatRange(e.getAssociatedResource(),n,i):s.TPromise.as(void 0)}function l(e,n){var i=t.FormatRegistry.ordered(e)[0];return i?"function"!=typeof i.formatDocument?"function"==typeof i.formatRange?u(e,e.getFullModelRange(),n):s.TPromise.as(void 0):i.formatDocument(e.getAssociatedResource(),n):s.TPromise.as(void 0)}function d(e,n,i,r){var o=t.FormatOnTypeRegistry.ordered(e)[0];return o?o.autoFormatTriggerCharacters.indexOf(i)<0?s.TPromise.as(void 0):o.formatAfterKeystroke(e.getAssociatedResource(),n,i,r):s.TPromise.as(void 0)}t.FormatRegistry=new n["default"]("formattingSupport"),t.FormatOnTypeRegistry=new n["default"]("formattingSupport"),t.formatRange=u,t.formatDocument=l,t.formatAfterKeystroke=d,c.CommonEditorRegistry.registerLanguageCommand("_executeFormatRangeProvider",function(e,t){var n=t.resource,s=t.range,c=t.options;if(!r["default"].isURI(n)||!a.Range.isIRange(s))throw i.illegalArgument();var l=e.get(o.IModelService).getModel(n);if(!l)throw i.illegalArgument("resource");return u(l,s,c)}),c.CommonEditorRegistry.registerLanguageCommand("_executeFormatDocumentProvider",function(e,t){var n=t.resource,s=t.options;if(!r["default"].isURI(n))throw i.illegalArgument("resource");var a=e.get(o.IModelService).getModel(n);if(!a)throw i.illegalArgument("resource");return l(a,s)}),c.CommonEditorRegistry.registerDefaultLanguageCommand("_executeFormatOnTypeProvider",function(e,t,n){var r=n.ch,o=n.options;if("string"!=typeof r)throw i.illegalArgument("ch");return d(e,t,r,o)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/format/common/formatActions",["require","exports","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/base/common/lifecycle","vs/base/common/arrays","vs/nls!vs/editor/contrib/format/common/formatActions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","./formatCommand","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","../common/format"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(){function e(e,t){var n=this;this.editor=e,this.callOnDispose=[],this.callOnModel=[],this.callOnDispose.push(e.addListener2(i.EventType.ConfigurationChanged,function(){return n.update()})),this.callOnDispose.push(e.addListener2(i.EventType.ModelChanged,function(){return n.update()})),this.callOnDispose.push(e.addListener2(i.EventType.ModelModeChanged,function(){return n.update()})),this.callOnDispose.push(e.addListener2(i.EventType.ModelModeSupportChanged,function(e){e.formattingSupport&&n.update()})),this.callOnDispose.push(h.FormatOnTypeRegistry.onDidChange(this.update,this))}return e.prototype.update=function(){var e=this;if(this.callOnModel=r.cAll(this.callOnModel),this.editor.getConfiguration().formatOnType&&this.editor.getModel()){var t=this.editor.getModel(),n=h.FormatOnTypeRegistry.ordered(t)[0];n&&n.autoFormatTriggerCharacters&&(this.formattingOptions=this.editor.getIndentationOptions(),n.autoFormatTriggerCharacters.forEach(function(t){e.callOnModel.push(e.editor.addTypingListener(t,e.trigger.bind(e,t)))}))}},e.prototype.trigger=function(e){var t=this;if(!(this.editor.getSelections().length>1)){var n=this.editor.getModel(),r=this.editor.getPosition(),s=!1,a=this.editor.addListener(i.EventType.ModelContentChanged,function(e){if(e.changeType===i.EventType.ModelContentChangedFlush)s=!0;else if(e.changeType===i.EventType.ModelContentChangedLineChanged){var t=e.lineNumber;s=t<=r.lineNumber}else if(e.changeType===i.EventType.ModelContentChangedLinesInserted){var n=e.fromLineNumber;s=n<=r.lineNumber}else if(e.changeType===i.EventType.ModelContentChangedLinesDeleted){var o=e.toLineNumber;s=o<=r.lineNumber}s&&a()});h.formatAfterKeystroke(n,r,e,this.formattingOptions).then(function(e){a(),s||o.isFalsyOrEmpty(e)||t.editor.executeCommand(t.getId(),new u.EditOperationsCommand(e,t.editor.getSelection()))},function(e){throw a(),e})}},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(this.callOnDispose=r.disposeAll(this.callOnDispose);this.callOnModel.length>0;)this.callOnModel.pop()()},e.ID="editor.contrib.autoFormat",e=__decorate([__param(1,l.INullService)],e)}(),f=function(e){function t(t,n,i){var r=this;e.call(this,t,n,c.Behaviour.WidgetFocus|c.Behaviour.Writeable|c.Behaviour.UpdateOnModelChange|c.Behaviour.ShowInContextMenu),this._disposable=h.FormatRegistry.onDidChange(function(){return r.resetEnablementState()})}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._disposable.dispose()},t.prototype.getGroupId=function(){return"2_change/2_format"},t.prototype.isSupported=function(){return h.FormatRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.run=function(){var e,t=this,r=this.editor.getModel(),o=this.editor.getSelection(),s=this.editor.getIndentationOptions();if(e=o.isEmpty()?h.formatDocument(r,s):h.formatRange(r,o,s),!e)return n.TPromise.as(!1);var a=this.editor.captureState(i.CodeEditorStateFlag.Value,i.CodeEditorStateFlag.Position);return e.then(function(e){return a.validate(t.editor)&&e&&0!==e.length?(t.apply(t.editor,o,e),t.editor.focus(),!0):!1})},t.prototype.apply=function(e,t,n){var i=null;t.isEmpty()&&(i=e.saveViewState());var r=new u.EditOperationsCommand(n,t);e.executeCommand(this.id,r),i&&e.restoreViewState(i)},t.ID="editor.action.format",t=__decorate([__param(2,l.INullService)],t)}(c.EditorAction);t.FormatAction=f,a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(f,f.ID,s.localize(0,null),{context:a.ContextKey.EditorTextFocus,primary:d.KeyMod.Shift|d.KeyMod.Alt|d.KeyCode.KEY_F,linux:{primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_I}})),a.CommonEditorRegistry.registerEditorContribution(p)}),define("vs/editor/contrib/goToDeclaration/common/goToDeclaration",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o){function s(e,r){var o=e.getAssociatedResource(),s=t.DeclarationRegistry.ordered(e),a=s.map(function(e,t){return e.findDeclaration(o,r).then(function(e){return e},function(e){i.onUnexpectedError(e)})});return n.TPromise.join(a).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?t.push.apply(t,i):i&&t.push(i)}return t})}t.DeclarationRegistry=new r["default"]("declarationSupport"),t.getDeclarationsAtPosition=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDefinitionProvider",s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/gotoError/browser/gotoError",["require","exports","vs/nls!vs/editor/contrib/gotoError/browser/gotoError","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/errors","vs/base/common/severity","vs/base/browser/dom","vs/base/common/winjs.base","vs/editor/contrib/zoneWidget/browser/zoneWidget","vs/base/browser/builder","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/base/browser/htmlContentRenderer","vs/base/common/event","vs/editor/common/core/position","vs/platform/markers/common/markers","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybindingService","vs/platform/event/common/event","vs/platform/editor/common/editor","vs/editor/common/services/bulkEdit","vs/base/common/keyCodes","vs/css!./gotoError"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){var T=l.$,I=function(){function e(e,t){var n=this;this._editor=e,this._markers=null,this._nextIdx=-1,this._toUnbind=[],this._ignoreSelectionChange=!1,this._onCurrentMarkerChanged=new v.Emitter,this._onMarkerSetChanged=new v.Emitter,this.setMarkers(t),this._toUnbind.push(this._editor.addListener(f.EventType.Disposed,function(){return n.dispose()})),this._toUnbind.push(this._editor.addListener(f.EventType.CursorPositionChanged,function(){n._ignoreSelectionChange||(n._nextIdx=-1)}))}return Object.defineProperty(e.prototype,"onCurrentMarkerChanged",{get:function(){return this._onCurrentMarkerChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMarkerSetChanged",{get:function(){return this._onMarkerSetChanged.event},enumerable:!0,configurable:!0}),e.prototype.setMarkers=function(e){this._markers=e||[],this._markers.sort(function(e,t){return e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber}),this._nextIdx=-1,this._onMarkerSetChanged.fire(this)},e.prototype.withoutWatchingEditorPosition=function(e){this._ignoreSelectionChange=!0;try{e()}finally{this._ignoreSelectionChange=!1}},e.prototype.initIdx=function(e){for(var t=!1,n=this._editor.getPosition(),i=0,r=this._markers.length;r>i&&!t;i++){var o={lineNumber:this._markers[i].startLineNumber,column:this._markers[i].startColumn};n.isBeforeOrEqual(o)&&(this._nextIdx=i+(e?0:-1),t=!0)}t||(this._nextIdx=e?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)},e.prototype.move=function(e){if(!this.canNavigate())return void this._onCurrentMarkerChanged.fire(void 0);-1===this._nextIdx?this.initIdx(e):e?(this._nextIdx+=1,this._nextIdx>=this._markers.length&&(this._nextIdx=0)):(this._nextIdx-=1,this._nextIdx<0&&(this._nextIdx=this._markers.length-1));var t=this._markers[this._nextIdx];this._onCurrentMarkerChanged.fire(t)},e.prototype.canNavigate=function(){return this._markers.length>0},e.prototype.next=function(){this.move(!0)},e.prototype.previous=function(){this.move(!1)},e.prototype.goTo=function(e){for(var t=0;t<this._markers.length;t++){var n=this._markers[t];if(n.startLineNumber<=e.lineNumber&&n.endLineNumber>=e.lineNumber&&n.startColumn<=e.column&&n.endColumn>=e.column)return void this._onCurrentMarkerChanged.fire(n)}return null},e.prototype.indexOf=function(e){return this._markers.indexOf(e)},e.prototype.length=function(){return this._markers.length},e.prototype.reveal=function(){var e=this;-1!==this._nextIdx&&this.withoutWatchingEditorPosition(function(){var t=new g.Position(e._markers[e._nextIdx].startLineNumber,e._markers[e._nextIdx].startColumn);e._editor.setPosition(t),e._editor.revealPositionInCenter(t)})},e.prototype.dispose=function(){this._toUnbind=i.cAll(this._toUnbind)},e}(),k={showFrame:!0,showArrow:!0},x=function(e){function t(t,n,i,r){e.call(this,i,k),this._model=r,this._callOnDispose=[],this._eventService=t,this._editorService=n,this.create(),this._wireModelAndView()}return __extends(t,e),t.prototype.fillContainer=function(e){var t=this,n=T(e).addClass("marker-widget");n.div({"class":"descriptioncontainer"},function(e){t._element=e}),n.div(function(e){t._quickFixSection=e}),n.on(a.EventType.CLICK,function(){t.editor.focus()})},t.prototype._wireModelAndView=function(){this._model.onCurrentMarkerChanged(this.showAtMarker,this,this._callOnDispose)},t.prototype.showAtMarker=function(e){var t=this;if(e){switch(e.severity){case s["default"].Error:this.options.frameColor="#ff5a5a";break;case s["default"].Warning:case s["default"].Info:this.options.frameColor="#5aac5a"}var i=r.format("({0}/{1}) ",this._model.indexOf(e)+1,this._model.length());e.source&&(i=i+"["+e.source+"] "),this._element.text(i);var c=this._element.getHTMLElement();m.renderHtml2(e.message).forEach(function(e){c.appendChild(e)});var u=this.editor.getModel().getMode();if(this._quickFixSection.hide(),u.quickFixSupport){var l=u.quickFixSupport.getQuickFixes(this.editor.getModel().getAssociatedResource(),e);
l.then(function(i){if(t._quickFixSection.clearChildren(),i.length>0){var r=T(t._quickFixSection);r.span({"class":"quickfixhead",text:i.length>1?n.localize(0,null):n.localize(1,null)}).span({"class":"quickfixcontainer"},function(n){i.forEach(function(i,r,o){var s=T(n);r>0&&(s=s.span({text:", "})),s.span({"class":"quickfixentry",text:i.command.title}).on(a.EventType.CLICK,function(){return u.quickFixSupport.runQuickFixAction(t.editor.getModel().getAssociatedResource(),e,i).then(function(e){return w.bulkEdit(t._eventService,t._editorService,t.editor,e.edits)}),!0})})}),t._quickFixSection.show(),t.show(new g.Position(e.startLineNumber,e.startColumn),4)}},function(e){o.onUnexpectedError(e)})}this._model.withoutWatchingEditorPosition(function(){t.show(new g.Position(e.startLineNumber,e.startColumn),3)})}},t.prototype.dispose=function(){this._callOnDispose=i.disposeAll(this._callOnDispose),e.prototype.dispose.call(this)},t}(u.ZoneWidget),A=function(e){function t(t,n,i,r){e.call(this,t,n,p.Behaviour.WidgetFocus|p.Behaviour.Writeable|p.Behaviour.UpdateOnModelChange),this.telemetryService=r,this._isNext=i}return __extends(t,e),t.prototype.run=function(){var e=R.getMarkerController(this.editor).getOrCreateModel();return this.telemetryService.publicLog("zoneWidgetShown",{mode:"go to error"}),e&&(this._isNext?e.next():e.previous(),e.reveal()),c.TPromise.as(!0)},t=__decorate([__param(3,_.ITelemetryService)],t)}(p.EditorAction),R=function(){function e(e,t,n,i,r){this._callOnClose=[],this.markerService=t,this.eventService=i,this.editorService=r,this.editor=e,this._markersNavigationVisible=n.createKey(M,!1)}return e.getMarkerController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._cleanUp()},e.prototype._cleanUp=function(){this._markersNavigationVisible.reset(),this._callOnClose=i.disposeAll(this._callOnClose),this._zone=null,this._model=null},e.prototype.getOrCreateModel=function(){var e=this;if(this._model)return this._model;var t=this._getMarkers();return this._model=new I(this.editor,t),this._zone=new x(this.eventService,this.editorService,this.editor,this._model),this._markersNavigationVisible.set(!0),this._callOnClose.push(this._model),this._callOnClose.push(this._zone),this._callOnClose.push(this.editor.addListener2(f.EventType.ModelChanged,function(){e._cleanUp()})),this._model.onCurrentMarkerChanged(function(t){return!t&&e._cleanUp()},void 0,this._callOnClose),this.markerService.onMarkerChanged(this._onMarkerChanged,this,this._callOnClose),this._model},e.prototype.closeMarkersNavigation=function(){this._cleanUp()},e.prototype._onMarkerChanged=function(e){var t=this;e.some(function(e){return t.editor.getModel().getAssociatedResource().toString()===e.toString()})&&this._model.setMarkers(this._getMarkers())},e.prototype._getMarkers=function(){var e=this.editor.getModel().getAssociatedResource(),t=this.markerService.read({resource:e});return t},e.ID="editor.contrib.markerController",e=__decorate([__param(1,y.IMarkerService),__param(2,b.IKeybindingService),__param(3,E.IEventService),__param(4,S.IEditorService)],e)}(),D=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.marker.next",t=__decorate([__param(2,_.ITelemetryService)],t)}(A),L=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.marker.prev",t=__decorate([__param(2,_.ITelemetryService)],t)}(A),M="markersNavigationVisible";h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(D,D.ID,n.localize(2,null),{context:h.ContextKey.EditorFocus,primary:C.KeyCode.F8})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(L,L.ID,n.localize(3,null),{context:h.ContextKey.EditorFocus,primary:C.KeyMod.Shift|C.KeyCode.F8})),h.CommonEditorRegistry.registerEditorCommand("closeMarkersNavigation",h.CommonEditorRegistry.commandWeight(50),{primary:C.KeyCode.Escape},!1,M,function(e,t,n){var i=R.getMarkerController(t);i.closeMarkersNavigation()}),d.EditorBrowserRegistry.registerEditorContribution(R)}),define("vs/editor/contrib/hover/common/hover",["require","exports","vs/editor/common/modes/languageFeatureRegistry","vs/base/common/winjs.base","vs/base/common/arrays","vs/base/common/errors","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o,s){function a(e,n){var s=e.getAssociatedResource(),a=t.ExtraInfoRegistry.ordered(e),c=[],u=a.map(function(e,t){return e.computeInfo(s,n).then(function(e){if(e){var n="undefined"!=typeof e.range,i="undefined"!=typeof e.value,r="undefined"!=typeof e.htmlContent&&e.htmlContent&&e.htmlContent.length>0;n&&(i||r)&&(c[t]=e)}},function(e){o.onUnexpectedError(e)})});return i.TPromise.join(u).then(function(){return r.coalesce(c)})}t.ExtraInfoRegistry=new n["default"]("extraInfoSupport"),t.getExtraInfoAtPosition=a,s.CommonEditorRegistry.registerDefaultLanguageCommand("_executeHoverProvider",a)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/hover/browser/modesContentHover",["require","exports","vs/nls!vs/editor/contrib/hover/browser/modesContentHover","vs/base/common/winjs.base","./hoverOperation","./hoverWidgets","vs/base/browser/htmlContentRenderer","vs/editor/common/modes/textToHtmlTokenizer","vs/editor/common/core/range","../common/hover","vs/css!vs/base/browser/ui/progressbar/progressbar"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e){this._editor=e,this._range=null}return e.prototype.setRange=function(e){this._range=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeAsync=function(){var e=this._editor.getModel();return u.ExtraInfoRegistry.has(e)?u.getExtraInfoAtPosition(e,{lineNumber:this._range.startLineNumber,column:this._range.startColumn}):i.TPromise.as(null)},e.prototype.computeSync=function(){var e=this,t=[],n=this._range.startLineNumber;if(n>this._editor.getModel().getLineCount())return t;var i=this._editor.getLineDecorations(n),r=this._editor.getModel().getLineMaxColumn(n);return i.forEach(function(i){var o=i.range.startLineNumber===n?i.range.startColumn:1,s=i.range.endLineNumber===n?i.range.endColumn:r;if(o<=e._range.startColumn&&e._range.endColumn<=s&&(i.options.hoverMessage||i.options.htmlMessage&&i.options.htmlMessage.length>0)){var a={value:i.options.hoverMessage,range:new c.Range(e._range.startLineNumber,o,e._range.startLineNumber,s)};i.options.htmlMessage&&(a.htmlContent=i.options.htmlMessage),t.push(a)}}),t},e.prototype.onResult=function(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)},e.prototype.getResult=function(){return this._result.slice(0)},e.prototype.getResultWithLoadingMessage=function(){return this._result.slice(0).concat([this._getLoadingMessage()])},e.prototype._getLoadingMessage=function(){return{range:this._range,htmlContent:[{tagName:"div",className:"",children:[{text:n.localize(0,null)}]}]}},e}(),d=function(e){function t(n){var i=this;e.call(this,t.ID,n),this._computer=new l(this._editor),this._highlightDecorations=[],this._isChangingDecorations=!1,this._hoverOperation=new r.HoverOperation(this._computer,function(e){return i._withResult(e,!0)},null,function(e){return i._withResult(e,!1)})}return __extends(t,e),t.prototype.onModelDecorationsChanged=function(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start())},t.prototype.startShowingAt=function(e){if(!this._lastRange||!this._lastRange.equalsRange(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition.lineNumber!==e.startLineNumber)this.hide();else{for(var t=[],n=0,i=this._messages.length;i>n;n++){var r=this._messages[n],o=r.range;o.startColumn<=e.startColumn&&o.endColumn>=e.endColumn&&t.push(r)}t.length>0?this._renderMessages(e,t):this.hide()}this._lastRange=e,this._computer.setRange(e),this._hoverOperation.start()}},t.prototype.hide=function(){this._lastRange=null,this._hoverOperation.cancel(),e.prototype.hide.call(this),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1},t.prototype._withResult=function(e,t){this._messages=e,this._messages.length>0?this._renderMessages(this._lastRange,this._messages):t&&this.hide()},t.prototype._renderMessages=function(e,t){var n=this,i=Number.MAX_VALUE,r=t[0].range,o=document.createDocumentFragment();t.forEach(function(e){if(e.range){i=Math.min(i,e.range.startColumn),r=c.Range.plusRange(r,e.range);var t=document.createElement("div"),u=null,l=t;e.className&&(u=document.createElement("span"),u.className=e.className,l=u,t.appendChild(u)),e.htmlContent&&e.htmlContent.length>0?e.htmlContent.forEach(function(e){l.appendChild(s.renderHtml(e,void 0,function(e,t){var i,r=n._editor.getModel();return r.isDisposed()||(i=r.getMode()),a.tokenizeToHtmlContent(t,r.getMode())}))}):l.textContent=e.value,o.appendChild(t)}}),this._domNode.textContent="",this._domNode.appendChild(o),this.showAt({lineNumber:e.startLineNumber,column:i}),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[{range:r,options:{className:"hoverHighlight"}}]),this._isChangingDecorations=!1},t.ID="editor.contrib.modesContentHoverWidget",t}(o.ContentHoverWidget);t.ModesContentHoverWidget=d});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/hover/browser/hover",["require","exports","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommon","vs/base/common/platform","./modesContentHover","./modesGlyphHover","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","vs/css!./hover"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e,t){var n=this;this._editor=e,this._toUnhook=[],e.getConfiguration().hover&&(this._toUnhook.push(this._editor.addListener(i.EventType.MouseDown,function(e){return n._onEditorMouseDown(e)})),this._toUnhook.push(this._editor.addListener(i.EventType.MouseMove,function(e){return n._onEditorMouseMove(e)})),this._toUnhook.push(this._editor.addListener(i.EventType.MouseLeave,function(e){return n._hideWidgets()})),this._toUnhook.push(this._editor.addListener(i.EventType.KeyDown,function(e){return n._onKeyDown(e)})),this._toUnhook.push(this._editor.addListener(i.EventType.ModelChanged,function(){return n._hideWidgets()})),this._toUnhook.push(this._editor.addListener(i.EventType.ModelDecorationsChanged,function(){return n._onModelDecorationsChanged()})),this._toUnhook.push(this._editor.addListener("scroll",function(){return n._hideWidgets()})),this._contentWidget=new o.ModesContentHoverWidget(e),this._glyphWidget=new s.ModesGlyphHoverWidget(e))}return e.prototype._onModelDecorationsChanged=function(){this._contentWidget.onModelDecorationsChanged(),this._glyphWidget.onModelDecorationsChanged()},e.prototype._onEditorMouseDown=function(e){var t=e.target.type;(t!==i.MouseTargetType.CONTENT_WIDGET||e.target.detail!==o.ModesContentHoverWidget.ID)&&(t!==i.MouseTargetType.OVERLAY_WIDGET||e.target.detail!==s.ModesGlyphHoverWidget.ID)&&this._hideWidgets()},e.prototype._onEditorMouseMove=function(e){var t=e.target.type,n=r.isMacintosh?"metaKey":"ctrlKey";(t!==i.MouseTargetType.CONTENT_WIDGET||e.target.detail!==o.ModesContentHoverWidget.ID||e.event[n])&&(t!==i.MouseTargetType.OVERLAY_WIDGET||e.target.detail!==s.ModesGlyphHoverWidget.ID||e.event[n])&&(this._editor.getConfiguration().hover&&t===i.MouseTargetType.CONTENT_TEXT?(this._glyphWidget.hide(),this._contentWidget.startShowingAt(e.target.range)):this._editor.getConfiguration().hover&&t===i.MouseTargetType.GUTTER_GLYPH_MARGIN?(this._contentWidget.hide(),this._glyphWidget.startShowingAt(e.target.position.lineNumber)):this._hideWidgets())},e.prototype._onKeyDown=function(e){var t=r.isMacintosh?c.KeyCode.Meta:c.KeyCode.Ctrl;e.keyCode!==t&&this._hideWidgets()},e.prototype._hideWidgets=function(){this._glyphWidget.hide(),this._contentWidget.hide()},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(;this._toUnhook.length>0;)this._toUnhook.pop()();this._glyphWidget&&(this._glyphWidget.dispose(),this._glyphWidget=null),this._contentWidget&&(this._contentWidget.dispose(),this._contentWidget=null)},e.ID="editor.contrib.hover",e=__decorate([__param(1,a.INullService)],e)}();n.EditorBrowserRegistry.registerEditorContribution(u)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/inPlaceReplace/common/inPlaceReplace",["require","exports","vs/nls!vs/editor/contrib/inPlaceReplace/common/inPlaceReplace","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","./inPlaceReplaceCommand","vs/editor/common/core/range","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l){var d=function(e){function t(t,n,r,o){e.call(this,t,n),this.up=r,this.requestIdPool=0,this.currentRequest=i.TPromise.as(null),this.decorationRemover=i.TPromise.as(null),this.decorationIds=[]}return __extends(t,e),t.prototype.isSupported=function(){return!!this.editor.getModel().getMode().inplaceReplaceSupport&&e.prototype.isSupported.call(this)},t.prototype.run=function(){var e=this;this.currentRequest.cancel();var n=this.editor.getSelection(),r=this.editor.getModel(),o=r.getMode().inplaceReplaceSupport;if(n.startLineNumber!==n.endLineNumber)return null;var u=this.editor.captureState(s.CodeEditorStateFlag.Value,s.CodeEditorStateFlag.Position);return this.currentRequest=o.navigateValueSet(r.getAssociatedResource(),n,this.up),this.currentRequest.then(function(r){if(r&&r.range&&r.value&&u.validate(e.editor)){var o=c.Range.lift(r.range),s=r.range,l=r.value.length-(n.endColumn-n.startColumn);s.endColumn=s.startColumn+r.value.length,n.endColumn+=l>1?l-1:0;var d=new a.InPlaceReplaceCommand(o,n,r.value);return e.editor.executeCommand(e.id,d),e.decorationIds=e.editor.deltaDecorations(e.decorationIds,[{range:s,options:t.DECORATION}]),e.decorationRemover.cancel(),e.decorationRemover=i.TPromise.timeout(350),e.decorationRemover.then(function(){e.editor.changeDecorations(function(t){e.decorationIds=t.deltaDecorations(e.decorationIds,[])})}),!0}})},t.DECORATION={className:"valueSetReplacement"},t=__decorate([__param(3,u.INullService)],t)}(o.EditorAction),h=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.inPlaceReplace.up",t=__decorate([__param(2,u.INullService)],t)}(d),p=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.inPlaceReplace.down",t=__decorate([__param(2,u.INullService)],t)}(d);r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(h,h.ID,n.localize(0,null),{context:r.ContextKey.EditorTextFocus,primary:l.KeyMod.CtrlCmd|l.KeyMod.Shift|l.KeyCode.US_COMMA})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(p,p.ID,n.localize(1,null),{context:r.ContextKey.EditorTextFocus,primary:l.KeyMod.CtrlCmd|l.KeyMod.Shift|l.KeyCode.US_DOT}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/linesOperations/common/linesOperations",["require","exports","vs/nls!vs/editor/contrib/linesOperations/common/linesOperations","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","./copyLinesCommand","./deleteLinesCommand","./moveLinesCommand","vs/editor/common/editorCommon","vs/editor/common/commands/trimTrailingWhitespaceCommand","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t,n,i){e.call(this,t,n),this.down=i}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new s.CopyLinesCommand(t[n],this.down));return this.editor.executeCommands(this.id,e),i.TPromise.as(!0)},t}(o.EditorAction),f=function(e){function t(t,n,i){e.call(this,t,n,!1)}return __extends(t,e),t.ID="editor.action.copyLinesUpAction",t=__decorate([__param(2,d.INullService)],t)}(p),m=function(e){function t(t,n,i){e.call(this,t,n,!0)}return __extends(t,e),t.ID="editor.action.copyLinesDownAction",t=__decorate([__param(2,d.INullService)],t)}(p),v=function(e){function t(t,n,i){e.call(this,t,n),this.down=i}return __extends(t,e),t.prototype.run=function(){for(var e=[],t=this.editor.getSelections(),n=0;n<t.length;n++)e.push(new c.MoveLinesCommand(t[n],this.down));return this.editor.executeCommands(this.id,e),i.TPromise.as(!0)},t}(o.EditorAction),g=function(e){function t(t,n,i){e.call(this,t,n,!1)}return __extends(t,e),t.ID="editor.action.moveLinesUpAction",t=__decorate([__param(2,d.INullService)],t)}(v),y=function(e){function t(t,n,i){e.call(this,t,n,!0)}return __extends(t,e),t.ID="editor.action.moveLinesDownAction",t=__decorate([__param(2,d.INullService)],t)}(v),_=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=new l.TrimTrailingWhitespaceCommand(this.editor.getSelection());return this.editor.executeCommands(this.id,[e]),i.TPromise.as(!0)},t.ID="editor.action.trimTrailingWhitespace",t=__decorate([__param(2,d.INullService)],t)}(o.EditorAction),b=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype._getLinesToRemove=function(){var e=this.editor.getSelections().map(function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,endLineNumber:t,positionColumn:e.positionColumn}});e.sort(function(e,t){return e.startLineNumber-t.startLineNumber});for(var t=[],n=e[0],i=1;i<e.length;i++)n.endLineNumber+1===e[i].startLineNumber?n.endLineNumber=e[i].endLineNumber:(t.push(n),n=e[i]);return t.push(n),t},t}(o.EditorAction),E=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){var e=this._getLinesToRemove(),t=e.map(function(e){return new a.DeleteLinesCommand(e.startLineNumber,e.endLineNumber,e.positionColumn)});return this.editor.executeCommands(this.id,t),i.TPromise.as(!0)},t.ID="editor.action.deleteLines",t=__decorate([__param(2,d.INullService)],t)}(b),S=function(e){function t(t,n,i){e.call(this,t,n,u.Handler.Indent)}return __extends(t,e),t.ID="editor.action.indentLines",t=__decorate([__param(2,d.INullService)],t)}(o.HandlerEditorAction),w=function(e){function t(t,n,i){e.call(this,t,n,u.Handler.Outdent)}return __extends(t,e),t.ID="editor.action.outdentLines",t=__decorate([__param(2,d.INullService)],t)}(o.HandlerEditorAction),C=function(e){function t(t,n,i){e.call(this,t,n,u.Handler.LineInsertBefore)}return __extends(t,e),t.ID="editor.action.insertLineBefore",t=__decorate([__param(2,d.INullService)],t)}(o.HandlerEditorAction),T=function(e){function t(t,n,i){e.call(this,t,n,u.Handler.LineInsertAfter)}return __extends(t,e),t.ID="editor.action.insertLineAfter",t=__decorate([__param(2,d.INullService)],t)}(o.HandlerEditorAction);r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(E,E.ID,n.localize(0,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyMod.Shift|h.KeyCode.KEY_K})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(_,_.ID,n.localize(1,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyMod.Shift|h.KeyCode.KEY_X})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(y,y.ID,n.localize(2,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.Alt|h.KeyCode.DownArrow,linux:{primary:h.KeyMod.Alt|h.KeyCode.DownArrow}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(g,g.ID,n.localize(3,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.Alt|h.KeyCode.UpArrow,linux:{primary:h.KeyMod.Alt|h.KeyCode.UpArrow}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(m,m.ID,n.localize(4,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.Alt|h.KeyMod.Shift|h.KeyCode.DownArrow,linux:{primary:h.KeyMod.CtrlCmd|h.KeyMod.Alt|h.KeyMod.Shift|h.KeyCode.DownArrow}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(f,f.ID,n.localize(5,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.Alt|h.KeyMod.Shift|h.KeyCode.UpArrow,linux:{primary:h.KeyMod.CtrlCmd|h.KeyMod.Alt|h.KeyMod.Shift|h.KeyCode.UpArrow}})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(S,S.ID,n.localize(6,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyCode.US_CLOSE_SQUARE_BRACKET})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(w,w.ID,n.localize(7,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyCode.US_OPEN_SQUARE_BRACKET})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(C,C.ID,n.localize(8,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyMod.Shift|h.KeyCode.Enter})),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(T,T.ID,n.localize(9,null),{context:r.ContextKey.EditorTextFocus,primary:h.KeyMod.CtrlCmd|h.KeyCode.Enter}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/links/browser/links",["require","exports","vs/nls!vs/editor/contrib/links/browser/links","vs/base/common/winjs.base","vs/base/common/platform","vs/base/common/errors","vs/base/common/uri","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/base/common/severity","vs/base/common/keyCodes","vs/css!./links"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(){function e(e,t){this.link=e,this.decorationId=t}return e.decoration=function(t){return{range:{startLineNumber:t.range.startLineNumber,startColumn:t.range.startColumn,endLineNumber:t.range.startLineNumber,endColumn:t.range.endColumn},options:e._getOptions(t,!1)}},e._getOptions=function(e,t){var n="";return e.extraInlineClassName&&(n=e.extraInlineClassName+" "),n+=t?m.CLASS_NAME_ACTIVE:m.CLASS_NAME,{stickiness:u.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,inlineClassName:n,hoverMessage:m.HOVER_MESSAGE_GENERAL}},e.prototype.activate=function(t){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,!0))},e.prototype.deactivate=function(t){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,!1))},e}(),m=function(){function e(e,t,n){var i=this;this.editor=e,this.editorService=t,this.messageService=n,this.listenersToRemove=[],this.listenersToRemove.push(e.addListener("change",function(e){return i.onChange()})),this.listenersToRemove.push(e.addListener(u.EventType.ModelChanged,function(e){return i.onModelChanged()})),this.listenersToRemove.push(e.addListener(u.EventType.ModelModeChanged,function(e){return i.onModelModeChanged()})),this.listenersToRemove.push(e.addListener(u.EventType.ModelModeSupportChanged,function(e){e.linkSupport&&i.onModelModeChanged()})),this.listenersToRemove.push(this.editor.addListener(u.EventType.MouseUp,function(e){return i.onEditorMouseUp(e)})),this.listenersToRemove.push(this.editor.addListener(u.EventType.MouseMove,function(e){return i.onEditorMouseMove(e)})),this.listenersToRemove.push(this.editor.addListener(u.EventType.KeyDown,function(e){return i.onEditorKeyDown(e)})),this.listenersToRemove.push(this.editor.addListener(u.EventType.KeyUp,function(e){return i.onEditorKeyUp(e)})),this.timeoutPromise=null,this.computePromise=null,this.currentOccurences={},this.activeLinkDecorationId=null,this.beginCompute()}return e.prototype.isComputing=function(){return i.TPromise.is(this.computePromise)},e.prototype.onModelChanged=function(){this.lastMouseEvent=null,this.currentOccurences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()},e.prototype.onModelModeChanged=function(){this.stop(),this.beginCompute()},e.prototype.onChange=function(){var t=this;this.timeoutPromise||(this.timeoutPromise=i.TPromise.timeout(e.RECOMPUTE_TIME),this.timeoutPromise.then(function(){t.timeoutPromise=null,t.beginCompute()}))},e.prototype.beginCompute=function(){var e=this;if(this.editor.getModel()){var t=this.editor.getModel().getMode();t.linkSupport&&(this.computePromise=t.linkSupport.computeLinks(this.editor.getModel().getAssociatedResource()),this.computePromise.then(function(t){e.updateDecorations(t),e.computePromise=null}))}},e.prototype.updateDecorations=function(e){var t=this;this.editor.changeDecorations(function(n){var i=[];for(var r in t.currentOccurences)if(t.currentOccurences.hasOwnProperty(r)){var o=t.currentOccurences[r];i.push(o.decorationId)}var s=[];if(e)for(var a=0;a<e.length;a++)s.push(f.decoration(e[a]));var c=n.deltaDecorations(i,s);t.currentOccurences={},t.activeLinkDecorationId=null;for(var u=0,l=c.length;l>u;u++){var o=new f(e[u],c[u]);t.currentOccurences[o.decorationId]=o}})},e.prototype.onEditorKeyDown=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&this.lastMouseEvent&&this.onEditorMouseMove(this.lastMouseEvent,t)},e.prototype.onEditorKeyUp=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&this.cleanUpActiveLinkDecoration()},e.prototype.onEditorMouseMove=function(e,t){var n=this;if(this.lastMouseEvent=e,this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var i=this.getLinkOccurence(e.target.position);i&&this.editor.changeDecorations(function(e){i.activate(e),n.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()},e.prototype.cleanUpActiveLinkDecoration=function(){if(this.activeLinkDecorationId){var e=this.currentOccurences[this.activeLinkDecorationId];e&&this.editor.changeDecorations(function(t){e.deactivate(t)}),this.activeLinkDecorationId=null}},e.prototype.onEditorMouseUp=function(e){if(this.isEnabled(e)){var t=this.getLinkOccurence(e.target.position);t&&this.openLinkOccurence(t,e.event.altKey)}},e.prototype.openLinkOccurence=function(e,t){if(this.editorService){var i=e.link,r=i.url,a=r.indexOf("#"),c=-1,u=-1;if(a>=0){var l=r.substr(a+1),d=l.split(",");d.length>0&&(c=Number(d[0])),d.length>1&&(u=Number(d[1])),(c>=0||u>=0)&&(r=r.substr(0,a))}var p;try{p=s["default"].parse(r)}catch(f){return void this.messageService.show(h["default"].Warning,n.localize(2,null,r))}var m={resource:p};c>=0&&(m.options={selection:{startLineNumber:c,startColumn:u}}),this.editorService.openEditor(m,t).done(null,o.onUnexpectedError)}},e.prototype.getLinkOccurence=function(e){for(var t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},null,!0),n=0;n<t.length;n++){var i=t[n],r=this.currentOccurences[i.id];if(r)return r}return null},e.prototype.isEnabled=function(t,n){return t.target.type===u.MouseTargetType.CONTENT_TEXT&&(t.event[e.TRIGGER_MODIFIER]||n&&n.keyCode===e.TRIGGER_KEY_VALUE)&&!!this.editor.getModel().getMode().linkSupport},e.prototype.stop=function(){this.timeoutPromise&&(this.timeoutPromise.cancel(),this.timeoutPromise=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)},e.prototype.dispose=function(){this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.stop()},e.RECOMPUTE_TIME=1e3,e.TRIGGER_KEY_VALUE=r.isMacintosh?p.KeyCode.Meta:p.KeyCode.Ctrl,e.TRIGGER_MODIFIER=r.isMacintosh?"metaKey":"ctrlKey",e.HOVER_MESSAGE_GENERAL=r.isMacintosh?n.localize(0,null):n.localize(1,null),e.CLASS_NAME="detected-link",e.CLASS_NAME_ACTIVE="detected-link-active",e}(),v=function(e){function t(t,n,i,r){e.call(this,t,n,c.Behaviour.WidgetFocus|c.Behaviour.UpdateOnCursorPositionChange),this._linkDetector=new m(n,i,r)}return __extends(t,e),t.prototype.dispose=function(){this._linkDetector.dispose(),e.prototype.dispose.call(this)},t.prototype.getEnablementState=function(){return this._linkDetector.isComputing()?!0:!!this._linkDetector.getLinkOccurence(this.editor.getPosition())},t.prototype.run=function(){var e=this._linkDetector.getLinkOccurence(this.editor.getPosition());return e&&this._linkDetector.openLinkOccurence(e,!1),i.TPromise.as(null)},t.ID="editor.action.openLink",t=__decorate([__param(2,l.IEditorService),__param(3,d.IMessageService)],t)}(c.EditorAction);a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(v,v.ID,n.localize(3,null)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/multicursor/common/multicursor",["require","exports","vs/nls!vs/editor/contrib/multicursor/common/multicursor","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a){var c=function(e){function t(t,n,i){e.call(this,t,n,o.Handler.AddCursorUp)}return __extends(t,e),t.ID="editor.action.insertCursorAbove",t=__decorate([__param(2,s.INullService)],t)}(r.HandlerEditorAction),u=function(e){function t(t,n,i){e.call(this,t,n,o.Handler.AddCursorDown);
}return __extends(t,e),t.ID="editor.action.insertCursorBelow",t=__decorate([__param(2,s.INullService)],t)}(r.HandlerEditorAction);i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(c,c.ID,n.localize(0,null),{context:i.ContextKey.EditorTextFocus,primary:a.KeyMod.CtrlCmd|a.KeyMod.Alt|a.KeyCode.UpArrow,linux:{primary:a.KeyMod.Shift|a.KeyMod.Alt|a.KeyCode.UpArrow,secondary:[a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.UpArrow]}})),i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(u,u.ID,n.localize(1,null),{context:i.ContextKey.EditorTextFocus,primary:a.KeyMod.CtrlCmd|a.KeyMod.Alt|a.KeyCode.DownArrow,linux:{primary:a.KeyMod.Shift|a.KeyMod.Alt|a.KeyCode.DownArrow,secondary:[a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.DownArrow]}}))}),define("vs/editor/contrib/parameterHints/common/parameterHints",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o){function s(e,i,r){var o=t.ParameterHintsRegistry.ordered(e)[0];return o?o.getParameterHints(e.getAssociatedResource(),i,r):n.TPromise.as(void 0)}t.ParameterHintsRegistry=new r["default"]("parameterHintsSupport"),t.getParameterHints=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeSignatureHelpProvider",function(e,t,n){var r=n.triggerCharacter;if(r&&"string"!=typeof r)throw i.illegalArgument("triggerCharacter");return s(e,t,r)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/parameterHints/browser/parameterHintsModel",["require","exports","vs/base/common/lifecycle","vs/base/common/bits/hash","vs/base/common/async","vs/base/common/eventEmitter","vs/editor/common/editorCommon","../common/parameterHints"],function(e,t,n,i,r,o,s,a){function c(e){if(!e)return null;var t=new i.SHA1;return e.signatures.forEach(function(e){t.update(e.documentation||""),t.update(e.label||""),e.parameters.forEach(function(e){t.update(e.documentation||""),t.update(e.label||""),t.update(e.signatureLabelEnd.toString()),t.update(e.signatureLabelOffset.toString())})}),t.digest()}var u=function(e){function t(n){var i=this;e.call(this,["cancel","hint","destroy"]),this.editor=n,this.toDispose=[],this.triggerCharactersListeners=[],this.throttledDelayer=new r.ThrottledDelayer(t.DELAY),this.active=!1,this.hash=null,this.event(this.editor,s.EventType.ModelChanged,function(e){return i.onModelChanged()}),this.event(this.editor,s.EventType.ModelModeChanged,function(e){return i.onModelChanged()}),this.event(this.editor,s.EventType.ModelModeSupportChanged,function(e){return i.onModeChanged(e)}),this.event(this.editor,s.EventType.CursorSelectionChanged,function(e){return i.onCursorChange(e)}),this.toDispose.push(a.ParameterHintsRegistry.onDidChange(this.onModelChanged,this)),this.onModelChanged()}return __extends(t,e),t.prototype.cancel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.active=!1,t||(this.hash=null),this.throttledDelayer.cancel(),e||this.emit("cancel")},t.prototype.trigger=function(e,n){var i=this;return void 0===n&&(n=t.DELAY),a.ParameterHintsRegistry.has(this.editor.getModel())?(this.cancel(!0,!0),this.throttledDelayer.trigger(function(){return i.doTrigger(e)},n)):void 0},t.prototype.doTrigger=function(e){var t=this;return a.getParameterHints(this.editor.getModel(),this.editor.getPosition(),e).then(function(e){var n=c(e);if(!e||0===e.signatures.length||t.hash&&n!==t.hash)return t.cancel(),t.emit("cancel"),!1;t.active=!0,t.hash=n;var i={hints:e};return t.emit("hint",i),!0})},t.prototype.isTriggered=function(){return this.active||this.throttledDelayer.isTriggered()},t.prototype.onModelChanged=function(){var e=this;this.triggerCharactersListeners=n.disposeAll(this.triggerCharactersListeners);var t=this.editor.getModel();if(t){var i=a.ParameterHintsRegistry.ordered(t)[0];i&&(this.triggerCharactersListeners=i.getParameterHintsTriggerCharacters().map(function(n){var r=e.editor.addTypingListener(n,function(){var r=e.editor.getPosition(),o=t.getLineContext(r.lineNumber);i.shouldTriggerParameterHints(o,r.column-1)&&e.trigger(n)});return{dispose:r}}))}},t.prototype.onModeChanged=function(e){e.parameterHintsSupport&&this.onModelChanged()},t.prototype.onCursorChange=function(e){"mouse"===e.source?this.cancel():this.isTriggered()&&this.trigger()},t.prototype.event=function(e,t,n){this.toDispose.push(e.addListener2(t,n))},t.prototype.dispose=function(){this.cancel(!0),this.triggerCharactersListeners=n.disposeAll(this.triggerCharactersListeners),this.toDispose=n.disposeAll(this.toDispose),this.emit("destroy",null),e.prototype.dispose.call(this)},t.DELAY=120,t}(o.EventEmitter);t.ParameterHintsModel=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/parameterHints/browser/parameterHints",["require","exports","vs/nls!vs/editor/contrib/parameterHints/browser/parameterHints","./parameterHintsModel","./parameterHintsWidget","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/platform/keybinding/common/keybindingService","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","../common/parameterHints"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(){function e(e,t){var n=this;this.editor=e,this.model=new i.ParameterHintsModel(this.editor),this.parameterHintsVisible=t.createKey(m,!1),this.widget=new r.ParameterHintsWidget(this.model,this.editor,function(){n.parameterHintsVisible.set(!0)},function(){n.parameterHintsVisible.reset()})}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.dispose=function(){this.model.dispose(),this.model=null,this.widget.destroy(),this.widget=null},e.prototype.getId=function(){return e.ID},e.prototype.closeWidget=function(){this.widget.cancel()},e.prototype.showPrevHint=function(){this.widget.selectPrevious()},e.prototype.showNextHint=function(){this.widget.selectNext()},e.prototype.trigger=function(){this.model.trigger(void 0,0)},e.ID="editor.controller.parameterHints",e=__decorate([__param(1,u.IKeybindingService)],e)}(),f=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){return h.ParameterHintsRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.run=function(){return p.get(this.editor).trigger(),o.TPromise.as(!0)},t.ID="editor.action.triggerParameterHints",t=__decorate([__param(2,l.INullService)],t)}(c.EditorAction);t.TriggerParameterHintsAction=f;var m="parameterHintsVisible",v=a.CommonEditorRegistry.commandWeight(75);s.EditorBrowserRegistry.registerEditorContribution(p),a.CommonEditorRegistry.registerEditorAction(new a.EditorActionDescriptor(f,f.ID,n.localize(0,null),{context:a.ContextKey.EditorTextFocus,primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.Space})),a.CommonEditorRegistry.registerEditorCommand("closeParameterHints",v,{primary:d.KeyCode.Escape},!0,m,function(e,t,n){p.get(t).closeWidget()}),a.CommonEditorRegistry.registerEditorCommand("showPrevParameterHint",v,{primary:d.KeyCode.UpArrow},!0,m,function(e,t,n){p.get(t).showPrevHint()}),a.CommonEditorRegistry.registerEditorCommand("showNextParameterHint",v,{primary:d.KeyCode.DownArrow},!0,m,function(e,t,n){p.get(t).showNextHint()})}),define("vs/editor/contrib/quickFix/common/quickFix",["require","exports","vs/base/common/uri","vs/editor/common/core/range","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/services/modelService","vs/editor/common/editorCommonExtensions","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,r,o,s,a,c){function u(e,n){var i=[],s=t.QuickFixRegistry.all(e).map(function(t){return t.getQuickFixes(e.getAssociatedResource(),n).then(function(e){if(Array.isArray(e))for(var n=0,r=0;r<e.length;r++){var o=e[r];i.push({command:o.command,score:o.score,id:"quickfix_#"+n++,support:t})}},function(e){o.onUnexpectedError(e)})});return r.TPromise.join(s).then(function(){return i})}t.QuickFixRegistry=new c["default"]("quickFixSupport"),t.getQuickFixes=u,a.CommonEditorRegistry.registerLanguageCommand("_executeCodeActionProvider",function(e,t){var r=t.resource,a=t.range;if(!n["default"].isURI(r)||!i.Range.isIRange(a))throw o.illegalArgument();var c=e.get(s.IModelService).getModel(r);if(!c)throw o.illegalArgument();return u(c,a)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/contrib/quickFix/browser/quickFixModel",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/timer","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/base/common/arrays","vs/base/common/async","vs/base/common/errors","vs/editor/common/core/range","../common/quickFix","./lightBulpWidget"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p;!function(e){e[e.NOT_ACTIVE=0]="NOT_ACTIVE",e[e.MANUAL_TRIGGER=1]="MANUAL_TRIGGER",e[e.AUTO_TRIGGER=2]="AUTO_TRIGGER"}(p||(p={}));var f=function(e){function t(t,n,i){var r=this;e.call(this),this.editor=t,this.markerService=n,this.onAccept=i,this.quickFixRequestPromise=null,this.lightBulpDecoration=[],this.toDispose=[],this.toLocalDispose=[],this.lightBulp=new h(t,function(e){r.onLightBulpClicked(e)}),this.enableAutoQuckFix=!1,this.autoSuggestDelay=this.editor.getConfiguration().quickSuggestionsDelay,(isNaN(this.autoSuggestDelay)||!this.autoSuggestDelay&&0!==this.autoSuggestDelay||this.autoSuggestDelay>2e3||this.autoSuggestDelay<0)&&(this.autoSuggestDelay=300),this.toDispose.push(this.editor.addListener2(s.EventType.ModelChanged,function(){return r.onModelChanged()})),this.toDispose.push(this.editor.addListener2(s.EventType.ModelModeChanged,function(){return r.onModelChanged()})),this.toDispose.push(this.editor.addListener2(s.EventType.ModelModeSupportChanged,function(e){e.quickFixSupport&&r.onModelChanged()})),this.toDispose.push(d.QuickFixRegistry.onDidChange(this.onModelChanged,this))}return __extends(t,e),t.prototype.onModelChanged=function(){var e=this;return this.cancelDialog(),this.localDispose(),this.lastMarker=null,this.lightBulpPosition=null,this.markers=null,this.updateScheduler=null,!d.QuickFixRegistry.has(this.editor.getModel())||this.editor.getConfiguration().readOnly?void this.setDecoration(null):(this.markerService.onMarkerChanged(this.onMarkerChanged,this,this.toLocalDispose),void this.toLocalDispose.push(this.editor.addListener2(s.EventType.CursorPositionChanged,function(t){e.onCursorPositionChanged()})))},t.prototype.onLightBulpClicked=function(e){this.triggerDialog(!0,e)},t.prototype.isSimilarMarker=function(e,t){return e?t&&e.owner===t.owner&&e.code===t.code:!t},t.prototype.onMarkerChanged=function(e){var t=this.editor.getModel();if(t){var n=t.getAssociatedResource();if(e.some(function(e){return n.toString()===e.toString()})){var i=this.lastMarker;this.markers=null,this.lastMarker=null;var r=this.findMarker(this.editor.getPosition(),!1);this.isSimilarMarker(r,i)?this.lastMarker=r:this.onCursorPositionChanged()}}},t.prototype.setDecoration=function(e){this.lightBulpPosition=e,this.updateDecoration()},t.prototype.updateDecoration=function(){this.lightBulpPosition&&this.state===p.NOT_ACTIVE?this.lightBulp.show(this.lightBulpPosition):this.lightBulp.hide()},t.prototype.onCursorPositionChanged=function(){var e=this;this.triggerAutoSuggestPromise&&(this.triggerAutoSuggestPromise.cancel(),this.triggerAutoSuggestPromise=null),this.cancelDialog(),this.updateScheduler||(this.updateScheduler=new c.RunOnceScheduler(function(){var t=e.lastMarker,n=e.editor.getPosition();if(t&&l.Range.containsPosition(t,n))return void(e.lightBulpPosition&&e.setDecoration(n));if(e.lastMarker=t=e.findMarker(n,!1),!t)return void e.setDecoration(null);var i=r.start(r.Topic.EDITOR,"quickfix/lighbulp"),o=e.computeFixes(t);o.done(function(r){e.setDecoration(a.isFalsyOrEmpty(r)?null:n),e.triggerAutoSuggest(t),i.stop()},function(t){u.onUnexpectedError(t),e.setDecoration(null),i.stop()})},250),this.toLocalDispose.push(this.updateScheduler)),this.updateScheduler.schedule()},t.prototype.computeFixes=function(e){var t=this.editor.getModel();return d.QuickFixRegistry.has(t)?this.quickFixRequestPromise&&e===this.quickFixRequestPromiseRange?this.quickFixRequestPromise:(this.quickFixRequestPromise&&(this.quickFixRequestPromise.cancel(),this.quickFixRequestPromise=null),this.quickFixRequestPromiseRange=e,this.quickFixRequestPromise=d.getQuickFixes(t,e),this.quickFixRequestPromise):n.TPromise.as(null)},t.prototype.getMarkers=function(){if(null!==this.markers)return this.markers;var e=this.editor.getModel();if(e)return this.markers=this.markerService.read({resource:e.getAssociatedResource()}).sort(function(e,t){return e.startLineNumber-t.startLineNumber}),this.markers},t.prototype.findMarker=function(e,t){if(this.lastMarker&&l.Range.containsPosition(this.lastMarker,e))return this.lastMarker;for(var n=this.getMarkers(),i=null,r=0,o=e.lineNumber,s=a.findFirst(n,function(e){return e.startLineNumber>=o});s<n.length&&n[s].startLineNumber===o;){var c=n[s];if(c.startColumn<=e.column&&c.endColumn>=e.column)return c;if(t){var u=e.column<c.startColumn?c.startColumn-e.column:e.column-c.endColumn;(!i||r>u)&&(i=c,r=u)}s++}return i},t.prototype.cancelDialog=function(e){return void 0===e&&(e=!1),this.state!==p.NOT_ACTIVE?(this.state=p.NOT_ACTIVE,e||this.emit("cancel"),this.updateDecoration(),!0):!1},t.prototype.isAutoSuggest=function(){return this.state===p.AUTO_TRIGGER},t.prototype.triggerAutoSuggest=function(e){var t=this;this.enableAutoQuckFix&&this.state===p.NOT_ACTIVE&&(this.triggerAutoSuggestPromise=n.TPromise.timeout(this.autoSuggestDelay),this.triggerAutoSuggestPromise.then(function(){t.triggerAutoSuggestPromise=null,e===t.lastMarker&&t.triggerDialog(!0,t.editor.getPosition())}))},t.prototype.triggerDialog=function(e,t){var n=this;this.cancelDialog(!1);var i;if(e){if(i=this.findMarker(t,!0),!i)return}else i=this.findMarker(t,!0),i||(i=this.editor.getSelection()),l.Range.containsPosition(i,t)||this.editor.setPosition({lineNumber:i.startLineNumber,column:i.startColumn});var o=r.start(r.Topic.EDITOR,"quickfix/triggerdialog");this.state=e?p.AUTO_TRIGGER:p.MANUAL_TRIGGER,this.updateDecoration(),this.emit("loading",{auto:this.isAutoSuggest()}),this.computeFixes(i).done(function(e){e&&e.length>0?(e.sort(function(e,t){return t.score-e.score}),n.emit("suggest",{fixes:e,range:i,auto:n.isAutoSuggest()})):n.emit("empty",{auto:n.isAutoSuggest()}),o.stop()},function(e){u.onUnexpectedError(e),n.emit("empty",{auto:n.isAutoSuggest()}),o.stop()})},t.prototype.accept=function(e,t){return this.cancelDialog(),e?(this.onAccept(e,t),!0):!1},t.prototype.localDispose=function(){this.toLocalDispose=o.disposeAll(this.toLocalDispose),this.quickFixRequestPromise&&(this.quickFixRequestPromise.cancel(),this.quickFixRequestPromise=null)},t.prototype.dispose=function(){this.localDispose(),this.toDispose=o.disposeAll(this.toDispose),this.emit("destroy",null)},t}(i.EventEmitter);t.QuickFixModel=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/quickFix/browser/quickFix",["require","exports","vs/nls!vs/editor/contrib/quickFix/browser/quickFix","vs/base/common/errors","./quickFixSelectionWidget","./quickFixModel","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/base/common/severity","vs/platform/keybinding/common/keybindingService","vs/platform/markers/common/markers","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/platform/event/common/event","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/editor/common/services/bulkEdit","../common/quickFix","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){var E=function(){function e(e,t,n,i,s,a,c){var u=this;this.editor=e,this.model=new o.QuickFixModel(this.editor,t,this.onAccept.bind(this)),this.eventService=s,this.editorService=a,this.messageService=c,this.quickFixWidgetVisible=n.createKey(w,!1),this.suggestWidget=new r.QuickFixSelectionWidget(this.editor,i,function(){u.quickFixWidgetVisible.set(!0)},function(){u.quickFixWidgetVisible.reset()}),this.suggestWidget.setModel(this.model)}return e.getQuickFixController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.onAccept=function(e,t){var n=this,r=this.editor.getModel();r&&e.support.runQuickFixAction(this.editor.getModel().getAssociatedResource(),t,{command:e.command,score:e.score}).then(function(e){return e&&(e.message&&n.messageService.show(l["default"].Info,e.message),e.edits)?y.bulkEdit(n.eventService,n.editorService,n.editor,e.edits):s.TPromise.as(0)}).done(void 0,function(e){i.onUnexpectedError(e)})},e.prototype.run=function(){return this.model.triggerDialog(!1,this.editor.getPosition()),this.editor.focus(),s.TPromise.as(!1)},e.prototype.dispose=function(){this.suggestWidget&&(this.suggestWidget.destroy(),this.suggestWidget=null),this.model&&(this.model.dispose(),this.model=null)},e.prototype.acceptSelectedSuggestion=function(){this.suggestWidget&&this.suggestWidget.acceptSelectedSuggestion()},e.prototype.closeWidget=function(){this.model&&this.model.cancelDialog()},e.prototype.selectNextSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectNext()},e.prototype.selectNextPageSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectNextPage()},e.prototype.selectPrevSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectPrevious()},e.prototype.selectPrevPageSuggestion=function(){this.suggestWidget&&this.suggestWidget.selectPreviousPage()},e.ID="editor.contrib.quickFixController",e=__decorate([__param(1,h.IMarkerService),__param(2,d.IKeybindingService),__param(3,p.ITelemetryService),__param(4,m.IEventService),__param(5,v.IEditorService),__param(6,g.IMessageService)],e)}();t.QuickFixController=E;var S=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){var e=this.editor.getModel();return _.QuickFixRegistry.has(e)&&!this.editor.getConfiguration().readOnly},t.prototype.run=function(){return E.getQuickFixController(this.editor).run()},t.ID="editor.action.quickFix",t=__decorate([__param(2,f.INullService)],t)}(u.EditorAction);t.QuickFixAction=S;var w="quickFixWidgetVisible",C=c.CommonEditorRegistry.commandWeight(80);c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(S,S.ID,n.localize(0,null),{context:c.ContextKey.EditorTextFocus,primary:b.KeyMod.CtrlCmd|b.KeyCode.US_DOT})),c.CommonEditorRegistry.registerEditorCommand("acceptQuickFixSuggestion",C,{primary:b.KeyCode.Enter,secondary:[b.KeyCode.Tab]},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.acceptSelectedSuggestion()}),c.CommonEditorRegistry.registerEditorCommand("closeQuickFixWidget",C,{primary:b.KeyCode.Escape},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.closeWidget()}),c.CommonEditorRegistry.registerEditorCommand("selectNextQuickFix",C,{primary:b.KeyCode.DownArrow},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.selectNextSuggestion()}),c.CommonEditorRegistry.registerEditorCommand("selectNextPageQuickFix",C,{primary:b.KeyCode.PageDown},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.selectNextPageSuggestion()}),c.CommonEditorRegistry.registerEditorCommand("selectPrevQuickFix",C,{primary:b.KeyCode.UpArrow},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.selectPrevSuggestion()}),c.CommonEditorRegistry.registerEditorCommand("selectPrevPageQuickFix",C,{primary:b.KeyCode.PageUp},!1,w,function(e,t,n){var i=E.getQuickFixController(t);i.selectPrevPageSuggestion()}),a.EditorBrowserRegistry.registerEditorContribution(E)}),define("vs/editor/contrib/quickOpen/common/quickOpen",["require","exports","vs/base/common/uri","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/core/range","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/services/modelService","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o,s,a,c){function u(e){var t=Object.create(null),n=[],o=h.all(e).map(function(r){if(r.outlineGroupLabel)for(var o in r.outlineGroupLabel)Object.prototype.hasOwnProperty.call(r.outlineGroupLabel,o)&&(t[o]=r.outlineGroupLabel[o]);return r.getOutline(e.getAssociatedResource()).then(function(e){Array.isArray(e)&&n.push.apply(n,e)},function(e){i.onUnexpectedError(e)})});return r.TPromise.join(o).then(function(){var e=[];return d(e,n,""),e.sort(l),{entries:e,outlineGroupLabel:t}})}function l(e,t){return o.Range.compareRangesUsingStarts(e.range,t.range)}function d(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];e.push({type:r.type,range:r.range,label:r.label,icon:r.icon,containerLabel:r.containerLabel||n}),r.children&&d(e,r.children,r.label)}}var h=new s["default"]("outlineSupport");t.OutlineRegistry=h,t.getOutlineEntries=u,c.CommonEditorRegistry.registerLanguageCommand("_executeDocumentSymbolProvider",function(e,t){var r=t.resource;if(!n["default"].isURI(r))throw i.illegalArgument("resource");var o=e.get(a.IModelService).getModel(r);if(!o)throw i.illegalArgument("resource");return u(o)})}),define("vs/editor/contrib/referenceSearch/common/referenceSearch",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o){function s(e,r){var o=t.ReferenceRegistry.ordered(e).map(function(t){return t.findReferences(e.getAssociatedResource(),r,!0).then(function(e){return Array.isArray(e)?e:void 0},function(e){i.onUnexpectedError(e)})});return n.TPromise.join(o).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i&&t.push.apply(t,i)}return t})}t.ReferenceRegistry=new r["default"]("referenceSupport"),t.findReferences=s,o.CommonEditorRegistry.registerDefaultLanguageCommand("_executeReferenceProvider",s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/rename/browser/rename",["require","exports","vs/nls!vs/editor/contrib/rename/browser/rename","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/base/common/severity","vs/editor/common/core/range","vs/platform/message/common/message","vs/platform/progress/common/progress","vs/platform/keybinding/common/keybindingService","vs/base/common/keyCodes","vs/css!./rename"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(){function e(e,t,n,i){var r=this;this._onDispose=i,this.editor=e,this.isDisposed=!1,this.editor.changeDecorations(function(e){for(var i=[],o=0,s=t.length;s>o;o++){var a="linked-editing-placeholder";i.push({range:n[o],options:{className:a}})}r.decorations=e.deltaDecorations([],i)}),this.editor.setSelections(t),this.listenersToRemove=[],this.listenersToRemove.push(this.editor.addListener(o.EventType.CursorPositionChanged,function(e){if(!r.isDisposed){var t=1+e.secondaryPositions.length;t!==r.decorations.length&&r.dispose()}}))}return e.prototype.onEnterOrEscape=function(){return this.isDisposed?void 0:(this.editor.setSelection(this.editor.getSelection()),this.dispose(),!0)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._onDispose(),this.decorations=this.editor.deltaDecorations(this.decorations,[]),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[])},e}(),p=function(){function e(e){this._editor=e,this.serviceId=u.IProgressService}return e.prototype.showWhile=function(e,t){var n,i,r=this;return i=setTimeout(function(){n=r._addDecoration()},t||0),e.then(function(e){return clearTimeout(i),r._removeDecoration(n),e},function(e){throw clearTimeout(i),r._removeDecoration(n),e})},e.prototype._addDecoration=function(){var e=this._editor.getPosition(),t=this._editor.getModel().getWordAtPosition(e),n=this._editor.deltaDecorations([],[{range:{startLineNumber:e.lineNumber,startColumn:t.startColumn,endLineNumber:e.lineNumber,endColumn:t.endColumn},options:{inlineClassName:"word-level-progress"}}]);return n[0]},e.prototype._removeDecoration=function(e){e&&this._editor.changeDecorations(function(t){t.deltaDecorations([e],[])})},e.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];throw new Error("not implemented")},e}(),f=function(e){function t(t,n,i,o){e.call(this,t,n,r.Behaviour.WidgetFocus|r.Behaviour.Writeable|r.Behaviour.ShowInContextMenu|r.Behaviour.UpdateOnCursorPositionChange),this._idPool=0,this._messageService=i,this._progressService=new p(this.editor),this._currentController=null,this._changeAllMode=o.createKey(m,!1)}return __extends(t,e),t.prototype.getGroupId=function(){return"2_change/1_changeAll"},t.prototype.isSupported=function(){var t=this.editor.getModel().getMode();return!!t&&!!t.occurrencesSupport&&e.prototype.isSupported.call(this)},t.prototype.computeInfos=function(e){var t=e.getSelection(),n=t.getStartPosition(),i=e.getModel();return this.editor.getModel().getMode().occurrencesSupport.findOccurrences(i.getAssociatedResource(),n)},t.prototype.run=function(){var e=this,t=++this._idPool,n=this.editor.captureState(o.CodeEditorStateFlag.Position,o.CodeEditorStateFlag.Value),i=this.editor.getSelection(),r=this.computeInfos(this.editor);return this._progressService&&this._progressService.showWhile(r,500),r.then(function(r){if(t===e._idPool&&n.validate(e.editor)&&0!==r.length){var o=r.map(function(e){return e.range});return e._beginLinkedEditing(o,i),!0}},function(t){e._messageService.show(s["default"].Info,t)})},t.prototype._indexOf=function(e,t,n){for(var i={lineNumber:t,column:n},r=0;r<e.length;r++)if(e[r].startLineNumber===t&&a.Range.containsPosition(e[r],i))return r;return-1},t.prototype._beginLinkedEditing=function(e,t){var n=this;this._currentController&&(this._currentController.dispose(),this._currentController=null);var i=this.editor.getSelection(),r=this._indexOf(e,i.positionLineNumber,i.positionColumn);if(-1!==r||(i=t,r=this._indexOf(e,i.positionLineNumber,i.positionColumn),-1!==r)){var o=!1;i.isEmpty()||a.Range.containsPosition(e[r],{lineNumber:i.selectionStartLineNumber,column:i.selectionStartColumn})&&(o=!0);var s,c;o?(s=i.positionColumn-e[r].startColumn,c=i.selectionStartColumn-e[r].startColumn):(s=e[r].endColumn-e[r].startColumn,c=0);var u=[];u.push({selectionStartLineNumber:e[r].startLineNumber,selectionStartColumn:e[r].startColumn+c,positionLineNumber:e[r].startLineNumber,positionColumn:e[r].startColumn+s});for(var l=0;l<e.length;l++)l!==r&&u.push({selectionStartLineNumber:e[l].startLineNumber,selectionStartColumn:e[l].startColumn+c,positionLineNumber:e[l].startLineNumber,positionColumn:e[l].startColumn+s});this._changeAllMode.set(!0),this._currentController=new h(this.editor,u,e,function(){n._changeAllMode.reset()})}},t.prototype.leaveChangeAllMode=function(){this._currentController&&(this._currentController.onEnterOrEscape(),this._currentController=null)},t.ID="editor.action.changeAll",t=__decorate([__param(2,c.IMessageService),__param(3,l.IKeybindingService)],t)}(r.EditorAction);t.ChangeAllAction=f;var m="inChangeAllMode",v=i.CommonEditorRegistry.commandWeight(30);i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(f,f.ID,n.localize(0,null),{context:i.ContextKey.EditorTextFocus,primary:d.KeyMod.CtrlCmd|d.KeyCode.F2})),i.CommonEditorRegistry.registerEditorCommand("leaveChangeAllMode",v,{primary:d.KeyCode.Enter,secondary:[d.KeyCode.Escape]},!0,m,function(e,t,n){var i=t.getAction(f.ID);i.leaveChangeAllMode()})}),define("vs/editor/contrib/rename/common/rename",["require","exports","vs/nls!vs/editor/contrib/rename/common/rename","vs/base/common/async","vs/base/common/errors","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o,s){function a(e,r,o){var s=t.RenameRegistry.ordered(e),a=e.getAssociatedResource(),c=[],u=!1,l=s.map(function(e){return function(){return u?void 0:e.rename(a,r,o).then(function(e){if(e){if(!e.rejectReason)return u=!0,e;c.push(e.rejectReason)}else;})}});return i.sequence(l).then(function(e){var t=e[0];return c.length>0?{currentName:void 0,edits:void 0,rejectReason:c.join("\n")}:t?t:{currentName:void 0,edits:void 0,rejectReason:n.localize(0,null)}})}t.RenameRegistry=new o["default"]("renameSupport"),t.rename=a,s.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDocumentRenameProvider",function(e,t,n){var i=n.newName;if("string"!=typeof i)throw r.illegalArgument("newName");return a(e,t,i)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/rename/browser/rename2",["require","exports","vs/base/common/winjs.base","vs/nls!vs/editor/contrib/rename/browser/rename2","vs/base/common/errors","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/services/bulkEdit","vs/editor/common/modes/supports","./renameInputField","vs/base/common/severity","vs/platform/message/common/message","vs/platform/keybinding/common/keybindingService","vs/platform/event/common/event","vs/platform/editor/common/editor","vs/base/common/keyCodes","../common/rename","vs/css!./rename"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(e){function t(t,n,i,r,o,a){e.call(this,t,n,s.Behaviour.WidgetFocus|s.Behaviour.Writeable|s.Behaviour.ShowInContextMenu|s.Behaviour.UpdateOnCursorPositionChange),
this._messageService=i,this._eventService=o,this._editorService=a,this._renameInputField=new u(n),this._renameInputVisible=r.createKey(y,!1)}return __extends(t,e),t.prototype.getGroupId=function(){return"2_change/1_rename2"},t.prototype.isSupported=function(){return v.RenameRegistry.has(this.editor.getModel())&&!this.editor.getModel().hasEditableRange()&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber);return v.RenameRegistry.ordered(e).some(function(e){return e.filter?c.isLineToken(n,t.column-1,e.filter)?!0:t.column>1&&c.isLineToken(n,t.column-2,e.filter)?!0:void 0:!0})},t.prototype.run=function(e){var t=this,i=this.editor.getSelection(),o=this.editor.getModel().getWordAtPosition(i.getStartPosition());if(o){var s,a=i.startLineNumber,c=0,u=o.word.length;return s={startLineNumber:a,startColumn:o.startColumn,endLineNumber:a,endColumn:o.endColumn},i.isEmpty()||i.startLineNumber!==i.endLineNumber||(c=Math.max(0,i.startColumn-o.startColumn),u=Math.min(o.endColumn,i.endColumn)-o.startColumn),this._renameInputVisible.set(!0),this._renameInputField.getInput(s,o.word,c,u).then(function(e){return t._renameInputVisible.reset(),t._prepareRename(e).then(function(e){return e.finish().then(function(e){t.editor.focus(),e&&t.editor.setSelection(e)})},function(e){return"string"!=typeof e?n.TPromise.wrapError(e):void t._messageService.show(l["default"].Info,e)})},function(e){return t._renameInputVisible.reset(),t.editor.focus(),r.isPromiseCanceledError(e)?void 0:n.TPromise.wrapError(e)})}},t.prototype.acceptRenameInput=function(){this._renameInputField.acceptInput()},t.prototype.cancelRenameInput=function(){this._renameInputField.cancelInput()},t.prototype._prepareRename=function(e){var t=a.createBulkEdit(this._eventService,this._editorService,this.editor);return v.rename(this.editor.getModel(),this.editor.getPosition(),e).then(function(e){return e.rejectReason?n.TPromise.wrapError(e.rejectReason):(t.add(e.edits),t)})},t.ID="editor.action.rename",t=__decorate([__param(2,d.IMessageService),__param(3,h.IKeybindingService),__param(4,p.IEventService),__param(5,f.IEditorService)],t)}(s.EditorAction);t.RenameAction=g;var y="renameInputVisible",_=o.CommonEditorRegistry.commandWeight(99);o.CommonEditorRegistry.registerEditorAction(new o.EditorActionDescriptor(g,g.ID,i.localize(0,null),{context:o.ContextKey.EditorTextFocus,primary:m.KeyCode.F2})),o.CommonEditorRegistry.registerEditorCommand("acceptRenameInput",_,{primary:m.KeyCode.Enter},!1,y,function(e,t,n){var i=t.getAction(g.ID);i.acceptRenameInput()}),o.CommonEditorRegistry.registerEditorCommand("cancelRenameInput",_,{primary:m.KeyCode.Escape},!1,y,function(e,t,n){var i=t.getAction(g.ID);i.cancelRenameInput()})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/smartSelect/common/jumpToBracket",["require","exports","vs/nls!vs/editor/contrib/smartSelect/common/jumpToBracket","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){return this.editor.trigger(this.id,s.Handler.JumpToBracket,{}),i.TPromise.as(!0)},t.ID="editor.action.jumpToBracket",t=__decorate([__param(2,a.INullService)],t)}(o.EditorAction);r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(u,u.ID,n.localize(0,null),{context:r.ContextKey.EditorTextFocus,primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.US_CLOSE_SQUARE_BRACKET}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/smartSelect/common/smartSelect",["require","exports","vs/nls!vs/editor/contrib/smartSelect/common/smartSelect","vs/base/common/arrays","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","./tokenSelectionSupport","vs/editor/common/core/range","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(){function e(e){this.editor=e,this.next=null,this.previous=null,this.selection=e.getSelection()}return e}(),p=null,f=!1,m=function(e){function t(t,n,i,r){e.call(this,t,n,a.Behaviour.TextFocus|a.Behaviour.UpdateOnModelChange),this._tokenSelectionSupport=r.createInstance(c),this._forward=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getSelection(),n=this.editor.getModel(),s=n.getMode().logicalSelectionSupport||this._tokenSelectionSupport;p&&p.editor!==this.editor&&(p=null);var a=r.TPromise.as(null);return p||(a=s.getRangesToPosition(n.getAssociatedResource(),t.getStartPosition()).then(function(t){if(!i.isFalsyOrEmpty(t)){var n;t.filter(function(t){var n=e.editor.getSelection(),i=new u.Range(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn);return i.containsPosition(n.getStartPosition())&&i.containsPosition(n.getEndPosition())}).forEach(function(t){var i=t.range,r=new h(e.editor);r.selection=new u.Range(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn),n&&(r.next=n,n.previous=r),n=r});var r=new h(e.editor);r.next=n,n&&(n.previous=r),p=r;var s=e.editor.addListener(o.EventType.CursorPositionChanged,function(e){f||(p=null,s())})}})),a.then(function(){if(p&&(p=e._forward?p.next:p.previous)){f=!0;try{e.editor.setSelection(p.selection)}finally{f=!1}return!0}})},t}(a.EditorAction),v=function(e){function t(t,n,i){e.call(this,t,n,!0,i)}return __extends(t,e),t.ID="editor.action.smartSelect.grow",t=__decorate([__param(2,l.IInstantiationService)],t)}(m),g=function(e){function t(t,n,i){e.call(this,t,n,!1,i)}return __extends(t,e),t.ID="editor.action.smartSelect.shrink",t=__decorate([__param(2,l.IInstantiationService)],t)}(m);s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(v,v.ID,n.localize(0,null),{context:s.ContextKey.EditorTextFocus,primary:d.KeyMod.Shift|d.KeyMod.Alt|d.KeyCode.RightArrow,mac:{primary:d.KeyMod.CtrlCmd|d.KeyMod.WinCtrl|d.KeyMod.Shift|d.KeyCode.RightArrow}})),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(g,g.ID,n.localize(1,null),{context:s.ContextKey.EditorTextFocus,primary:d.KeyMod.Shift|d.KeyMod.Alt|d.KeyCode.LeftArrow,mac:{primary:d.KeyMod.CtrlCmd|d.KeyMod.WinCtrl|d.KeyMod.Shift|d.KeyCode.LeftArrow}}))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/snippet/common/snippet",["require","exports","vs/base/common/collections","vs/base/common/strings","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/core/range","vs/editor/common/core/selection","vs/platform/keybinding/common/keybindingService","vs/base/common/keyCodes","vs/editor/common/core/editOperation"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e){return e.getContribution(m.ID)}!function(e){e[e.TextMateSnippet=0]="TextMateSnippet",e[e.EmmetSnippet=1]="EmmetSnippet"}(t.ExternalSnippetType||(t.ExternalSnippetType={}));var h=t.ExternalSnippetType,p=function(){function e(e){this.lines=[],this.placeHolders=[],this._lastGeneratedId=0,this.startPlaceHolderIndex=0,this.finishPlaceHolderIndex=-1,this.parseTemplate(e)}return e.prototype.parseTemplate=function(e){var t,i,r,o,a={},c=e.split("\n");for(t=0,i=c.length;i>t;t++){var u=this.parseLine(c[t],function(e){return n.contains(a,e)?a[e].value:""});for(r=0,o=u.placeHolders.length;o>r;r++){var l,d=u.placeHolders[r],h=new s.Range(t+1,d.startColumn,t+1,d.endColumn);n.contains(a,d.id)?l=a[d.id]:(l={id:d.id,value:d.value,occurences:[]},this.placeHolders.push(l),""===d.value&&(this.finishPlaceHolderIndex=this.placeHolders.length-1),a[d.id]=l),l.occurences.push(h)}this.lines.push(u.line)}if(this.placeHolders.length>this.startPlaceHolderIndex){var p=this.placeHolders[this.startPlaceHolderIndex];""===p.value&&""===p.id&&this.placeHolders.length>1&&this.startPlaceHolderIndex++}},e.prototype.parseLine=function(e,t){for(var n=[{placeHolderId:"",placeHolderText:""}],i=[],r=0,o=e.length,s=0;o>r;){var a=e.substr(r);if(/^{{/.test(a)){r+=2,n.push({placeHolderId:"",placeHolderText:""});var c=a.match(/^{{(\w+):/);Array.isArray(c)&&2===c.length&&(n[n.length-1].placeHolderId=c[1],r+=c[1].length+1)}else if(n.length>1&&/^}}/.test(a)){if(r+=2,0===n[n.length-1].placeHolderId.length&&(n[n.length-1].placeHolderId=n[n.length-1].placeHolderText,"_"===n[n.length-1].placeHolderId&&(n[n.length-1].placeHolderId="TAB_STOP_"+String(++this._lastGeneratedId),n[n.length-1].placeHolderText="",--s)),0===n[n.length-1].placeHolderText.length){var u=t(n[n.length-1].placeHolderId);n[n.length-1].placeHolderText=u,s+=u.length}i.push({id:n[n.length-1].placeHolderId,value:n[n.length-1].placeHolderText,startColumn:s+1-n[n.length-1].placeHolderText.length,endColumn:s+1}),n[n.length-2].placeHolderText+=n[n.length-1].placeHolderText,n.pop()}else/^\\./.test(a)&&("{"===a.charAt(1)||"}"===a.charAt(1)||"\\"===a.charAt(1)?++r:(n[n.length-1].placeHolderText+=e.charAt(r),++s,++r)),n[n.length-1].placeHolderText+=e.charAt(r),++s,++r}return i.sort(function(e,t){return e.startColumn<t.startColumn?-1:e.startColumn>t.startColumn?1:e.endColumn<t.endColumn?-1:e.endColumn>t.endColumn?1:0}),{line:n[0].placeHolderText,placeHolders:i}},e.convertExternalSnippet=function(e,t){for(var n=0,i="",r=0,o=e.length;o>r;){var s=e.substr(r);if(/^\$0/.test(s))r+=2,i+=t===h.EmmetSnippet?"{{_}}":"{{}}";else if(/^\$\{0\}/.test(s))r+=4,i+=t===h.EmmetSnippet?"{{_}}":"{{}}";else if(t===h.EmmetSnippet&&/^\|/.test(s))++r,i+="{{}}";else{var a=s.match(/^\$(\d+)/);Array.isArray(a)&&2===a.length?(r+=1+a[1].length,i+="{{"+a[1]+":}}"):(a=s.match(/^\$\{(\d+)\}/),Array.isArray(a)&&2===a.length?(r+=3+a[1].length,i+="{{"+a[1]+":}}"):/^\${/.test(s)?(r+=2,++n,i+="{{"):n>0&&/^}/.test(s)?(r+=1,--n,i+="}}"):/^\\./.test(s)?(r+=2,i+=s.substr(0,2)):(a=s.match(/^({|})/),Array.isArray(a)&&2===a.length?(r+=1,i+="\\"+a[1]):(r+=1,i+=s.charAt(0))))}}return i},e.prototype.extractLineIndentation=function(e,t){void 0===t&&(t=Number.MAX_VALUE);var n=i.getLeadingWhitespace(e);return n.length>t-1?n.substring(0,t-1):n},e.prototype.bind=function(e,t,n,i){var r,o,s,a,c,u,l,d,h=[],p=[],f=this.extractLineIndentation(e,n+1),m=[];for(c=0,u=this.lines.length;u>c;c++)r=this.lines[c],0===c?(m[c+1]=n,h[c]=r):(o=this.extractLineIndentation(r),s=r.substr(o.length),a=i.normalizeIndentation(f+o),m[c+1]=a.length-o.length,h[c]=a+s);var v,g,y;for(c=0,u=this.placeHolders.length;u>c;c++){for(v=this.placeHolders[c],y=[],l=0,d=v.occurences.length;d>l;l++)g=v.occurences[l],y.push({startLineNumber:g.startLineNumber+t,startColumn:g.startColumn+m[g.startLineNumber],endLineNumber:g.endLineNumber+t,endColumn:g.endColumn+m[g.endLineNumber]});p.push({id:v.id,value:v.value,occurences:y})}return{lines:h,placeHolders:p,startPlaceHolderIndex:this.startPlaceHolderIndex,finishPlaceHolderIndex:this.finishPlaceHolderIndex}},e}();t.CodeSnippet=p;var f=function(){function e(e,t,n,i,r){this.editor=e,this._onStop=r,this.model=e.getModel(),this.finishPlaceHolderIndex=t.finishPlaceHolderIndex,this.trackedPlaceHolders=[],this.placeHolderDecorations=[],this.currentPlaceHolderIndex=t.startPlaceHolderIndex,this.highlightDecorationId=null,this.isFinished=!1,this._initialAlternativeVersionId=i,this.initialize(t,n)}return e.prototype.dispose=function(){this.stopAll()},e.prototype.initialize=function(e,t){var n,i,o=this;for(n=0,i=e.placeHolders.length;i>n;n++){for(var a=e.placeHolders[n],c=[],u=0,l=a.occurences.length;l>u;u++)c.push(this.model.addTrackedRange(a.occurences[u],r.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges));this.trackedPlaceHolders.push({ranges:c})}this.editor.changeDecorations(function(n){var i=[],r=t+e.lines.length-1,a=o.model.getLineMaxColumn(r);i.push({range:new s.Range(t,1,r,a),options:{className:"new-snippet",isWholeLine:!0}});for(var c=0,u=o.trackedPlaceHolders.length;u>c;c++){var l=c===o.finishPlaceHolderIndex?"finish-snippet-placeholder":"snippet-placeholder";i.push({range:o.model.getTrackedRange(o.trackedPlaceHolders[c].ranges[0]),options:{className:l}})}var d=n.deltaDecorations([],i);o.highlightDecorationId=d[0],o.placeHolderDecorations=d.slice(1)}),this.listenersToRemove=[],this.listenersToRemove.push(this.editor.addListener(r.EventType.ModelContentChanged,function(e){if(!o.isFinished){if(e.changeType===r.EventType.ModelContentChangedFlush)o.stopAll();else if(e.changeType===r.EventType.ModelContentChangedLineChanged){var t=e.lineNumber,n=o.model.getDecorationRange(o.highlightDecorationId);(t<n.startLineNumber||t>n.endLineNumber)&&o.stopAll()}else if(e.changeType===r.EventType.ModelContentChangedLinesInserted){var i=e.fromLineNumber,n=o.model.getDecorationRange(o.highlightDecorationId);(i<n.startLineNumber||i>n.endLineNumber)&&o.stopAll()}else if(e.changeType===r.EventType.ModelContentChangedLinesDeleted){var s=e.fromLineNumber,a=e.toLineNumber,n=o.model.getDecorationRange(o.highlightDecorationId),c=a<n.startLineNumber,u=s>n.endLineNumber;(c||u)&&o.stopAll()}var l=o.editor.getModel().getAlternativeVersionId();o._initialAlternativeVersionId===l&&o.stopAll()}})),this.listenersToRemove.push(this.editor.addListener(r.EventType.CursorPositionChanged,function(e){if(!o.isFinished){var t=o.model.getDecorationRange(o.highlightDecorationId),n=e.position.lineNumber;(n<t.startLineNumber||n>t.endLineNumber)&&o.stopAll()}})),this.listenersToRemove.push(this.editor.addListener(r.EventType.ModelChanged,function(){o.stopAll()}));var d=-1;this.listenersToRemove.push(this.editor.addListener(r.EventType.EditorBlur,function(){d=setTimeout(function(){o.stopAll()},100)})),this.listenersToRemove.push(this.editor.addListener(r.EventType.EditorFocus,function(){-1!==d&&(clearTimeout(d),d=-1)})),this.listenersToRemove.push(this.model.addListener(r.EventType.ModelDecorationsChanged,function(e){if(!o.isFinished){for(var t=o.model.getEditableRange(),n=null,i=!0,r=!0,s=0;(i||r)&&s<o.trackedPlaceHolders.length;s++)for(var a=o.trackedPlaceHolders[s].ranges,c=0;(i||r)&&c<a.length;c++){var u=o.model.getTrackedRange(a[c]);i&&(u.isEmpty()?null===n?n=u:n.equalsRange(u)||(i=!1):i=!1),r&&!t.equalsRange(u)&&(r=!1)}if(i||r)o.stopAll();else if(-1!==o.finishPlaceHolderIndex){var l=o.placeHolderDecorations[o.finishPlaceHolderIndex],d=o.model.getDecorationRange(l),h=o.model.getDecorationOptions(l),p=d.isEmpty(),f="finish-snippet-placeholder"===h.className,m=Number(p)^Number(f);m&&o.editor.changeDecorations(function(e){var t=p?"finish-snippet-placeholder":"snippet-placeholder";e.changeDecorationOptions(l,{className:t})})}}})),this.doLinkEditing()},e.prototype.onNextPlaceHolder=function(){return this.changePlaceHolder(!0)},e.prototype.onPrevPlaceHolder=function(){return this.changePlaceHolder(!1)},e.prototype.changePlaceHolder=function(e){if(this.isFinished)return!1;var t=this.currentPlaceHolderIndex,n=this.model.getTrackedRange(this.trackedPlaceHolders[t].ranges[0]),i=!0;do{e?this.currentPlaceHolderIndex=(this.currentPlaceHolderIndex+1)%this.trackedPlaceHolders.length:this.currentPlaceHolderIndex=(this.trackedPlaceHolders.length+this.currentPlaceHolderIndex-1)%this.trackedPlaceHolders.length;var r=this.model.getTrackedRange(this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges[0]);i=n.equalsRange(r)}while(this.currentPlaceHolderIndex!==t&&i);return this.doLinkEditing(),!0},e.prototype.onAccept=function(){if(this.isFinished)return!1;if(-1!==this.finishPlaceHolderIndex){var e=this.model.getTrackedRange(this.trackedPlaceHolders[this.finishPlaceHolderIndex].ranges[0]);this.editor.setPosition({lineNumber:e.endLineNumber,column:e.endColumn})}return this.stopAll(),!0},e.prototype.onEscape=function(){return this.isFinished?!1:(this.stopAll(),this.editor.setSelections([this.editor.getSelections()[0]]),!0)},e.prototype.doLinkEditing=function(){for(var e=[],t=0,n=this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges.length;n>t;t++){var i=this.model.getTrackedRange(this.trackedPlaceHolders[this.currentPlaceHolderIndex].ranges[t]);e.push({selectionStartLineNumber:i.startLineNumber,selectionStartColumn:i.startColumn,positionLineNumber:i.endLineNumber,positionColumn:i.endColumn})}this.editor.setSelections(e)},e.prototype.stopAll=function(){var e=this;if(!this.isFinished){this._onStop(),this.isFinished=!0,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[];for(var t=0;t<this.trackedPlaceHolders.length;t++)for(var n=this.trackedPlaceHolders[t].ranges,i=0;i<n.length;i++)this.model.removeTrackedRange(n[i]);this.trackedPlaceHolders=[],this.editor.changeDecorations(function(t){var n=[];n.push(e.highlightDecorationId);for(var i=0;i<e.placeHolderDecorations.length;i++)n.push(e.placeHolderDecorations[i]);t.deltaDecorations(n,[]),e.placeHolderDecorations=[],e.highlightDecorationId=null})}},e}();t.get=d;var m=function(){function e(e,n){this._editor=e,this._currentController=null,this._inSnippetMode=n.createKey(t.CONTEXT_SNIPPET_MODE,!1)}return e.prototype.dispose=function(){this._currentController&&(this._currentController.dispose(),this._currentController=null)},e.prototype.getId=function(){return e.ID},e.prototype.run=function(e,t,n){var i=this._currentController;this._currentController=null,0===e.placeHolders.length?this._runForAllSelections(e,t,n):this._runForPrimarySelection(e,t,n),this._currentController?i&&i.dispose():this._currentController=i},e._getTypeRangeForSelection=function(e,t,n,i){var r;return r=n||i?e.validateRange(s.Range.plusRange(t,{startLineNumber:t.positionLineNumber,startColumn:t.positionColumn-n,endLineNumber:t.positionLineNumber,endColumn:t.positionColumn+i})):t},e._getAdaptedSnippet=function(e,t,n,i){return n.bind(t.getLineContent(i.startLineNumber),i.startLineNumber-1,i.startColumn-1,e)},e._getCommandForSnippet=function(e,t){var n=e.lines.join("\n");return l.EditOperation.replaceMove(t,n)},e.prototype._runForPrimarySelection=function(t,n,i){var r=this,o=this._editor.getModel().getAlternativeVersionId(),s=e._prepareSnippet(this._editor,this._editor.getSelection(),t,n,i);this._editor.executeEdits("editor.contrib.insertSnippetHelper",[e._getCommandForSnippet(s.adaptedSnippet,s.typeRange)]);var c=e._getSnippetCursorOnly(s.adaptedSnippet);c?this._editor.setSelection(a.Selection.createSelection(c.lineNumber,c.column,c.lineNumber,c.column)):s.adaptedSnippet.placeHolders.length>0&&(this._inSnippetMode.set(!0),this._currentController=new f(this._editor,s.adaptedSnippet,s.typeRange.startLineNumber,o,function(){r._inSnippetMode.reset()}))},e.prototype._runForAllSelections=function(t,n,i){for(var r=this._editor.getSelections(),o=[],s=0;s<r.length;s++){var a=e._prepareSnippet(this._editor,r[s],t,n,i);o.push(e._getCommandForSnippet(a.adaptedSnippet,a.typeRange))}this._editor.executeEdits("editor.contrib.insertSnippetHelper",o)},e._prepareSnippet=function(t,n,r,o,s){var a=t.getModel(),c=e._getTypeRangeForSelection(a,n,o,s);if(1===r.lines.length){var u=a.getLineContent(c.endLineNumber).substr(c.endColumn-1),l=r.lines[0].substr(o),d=i.commonPrefixLength(u,l);d>0&&(c=c.setEndPosition(c.endLineNumber,c.endColumn+d))}var h=e._getAdaptedSnippet(t,a,r,c);return{typeRange:c,adaptedSnippet:h}},e._getSnippetCursorOnly=function(e){if(1!==e.placeHolders.length)return null;var t=e.placeHolders[0];if(""!==t.value||1!==t.occurences.length)return null;var n=t.occurences[0];return s.Range.isEmpty(n)?{lineNumber:n.startLineNumber,column:n.startColumn}:null},e.prototype.jumpToNextPlaceholder=function(){this._currentController&&this._currentController.onNextPlaceHolder()},e.prototype.jumpToPrevPlaceholder=function(){this._currentController&&this._currentController.onPrevPlaceHolder()},e.prototype.acceptSnippet=function(){this._currentController&&this._currentController.onAccept()},e.prototype.leaveSnippet=function(){this._currentController&&this._currentController.onEscape()},e.ID="editor.contrib.snippetController",e=__decorate([__param(1,c.IKeybindingService)],e)}();t.CONTEXT_SNIPPET_MODE="inSnippetMode";var v=o.CommonEditorRegistry.commandWeight(30);o.CommonEditorRegistry.registerEditorContribution(m),o.CommonEditorRegistry.registerEditorCommand("jumpToNextSnippetPlaceholder",v,{primary:u.KeyCode.Tab},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).jumpToNextPlaceholder()}),o.CommonEditorRegistry.registerEditorCommand("jumpToPrevSnippetPlaceholder",v,{primary:u.KeyMod.Shift|u.KeyCode.Tab},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).jumpToPrevPlaceholder()}),o.CommonEditorRegistry.registerEditorCommand("acceptSnippet",v,{primary:u.KeyCode.Enter},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).acceptSnippet()}),o.CommonEditorRegistry.registerEditorCommand("leaveSnippet",v,{primary:u.KeyCode.Escape},!0,t.CONTEXT_SNIPPET_MODE,function(e,t,n){d(t).leaveSnippet()})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/defineKeybinding/browser/defineKeybinding",["require","exports","vs/nls!vs/editor/contrib/defineKeybinding/browser/defineKeybinding","vs/editor/browser/editorBrowserExtensions","vs/base/browser/dom","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/base/common/lifecycle","vs/platform/instantiation/common/instantiation","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/editor/contrib/snippet/common/snippet","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","vs/base/common/winjs.base","vs/platform/keybinding/common/keybindingService","vs/base/common/async","vs/platform/keybinding/common/commonKeybindingResolver","vs/base/browser/htmlContentRenderer","vs/editor/common/core/range","vs/css!./defineKeybinding"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_){function b(e){if(e.getConfiguration().readOnly)return!1;var t=e.getModel();if(!t)return!1;var n=t.getAssociatedResource().toString();return I.test(n)}var E=n.localize(0,null),S=n.localize(1,null),w=n.localize(2,null),C=n.localize(3,null),T=n.localize(4,null),I=/keybindings\.json$/,k=function(){function e(e,t){var n=this;this._dec=[],this._editor=e,this._keybindingService=t,this._toDispose=[],this._launchWidget=new x(this._editor,t,function(){return n.launch()}),this._defineWidget=new A(this._editor,t,function(e){return n._onAccepted(e)}),this._toDispose.push(this._editor.addListener2(s.EventType.ConfigurationChanged,function(e){b(n._editor)?n._launchWidget.show():n._launchWidget.hide()})),this._toDispose.push(this._editor.addListener2(s.EventType.ModelChanged,function(e){b(n._editor)?n._launchWidget.show():n._launchWidget.hide(),n._onModel()})),this._updateDecorations=new v.RunOnceScheduler(function(){return n._updateDecorationsNow()},500),this._toDispose.push(this._updateDecorations),this._modelToDispose=[],this._onModel()}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._modelToDispose=a.disposeAll(this._modelToDispose),this._toDispose=a.disposeAll(this._toDispose),this._launchWidget.dispose(),this._launchWidget=null,this._defineWidget.dispose(),this._defineWidget=null},e.prototype.launch=function(){b(this._editor)&&this._defineWidget.start()},e.prototype._onAccepted=function(e){var t=["{",'	"key": "'+e+'",','	"command": "{{commandId}}",','	"when": "{{editorTextFocus}}"',"}{{}}"].join("\n");d.get(this._editor).run(new d.CodeSnippet(t),0,0)},e.prototype._onModel=function(){var e=this;this._modelToDispose=a.disposeAll(this._modelToDispose);var t=this._editor.getModel();if(t){var n=t.getAssociatedResource().toString();I.test(n)&&(this._modelToDispose.push(t.addListener2(s.EventType.ModelContentChanged2,function(t){return e._updateDecorations.schedule()})),this._modelToDispose.push({dispose:function(){e._dec=e._editor.deltaDecorations(e._dec,[]),e._updateDecorations.cancel()}}),this._updateDecorations.schedule())}},e._getKeybindingRegex=function(){if(!this._cachedKeybindingRegex){var e="numpad(0|1|2|3|4|5|6|7|8|9|_multiply|_add|_subtract|_decimal|_divide)",t="`|\\-|=|\\[|\\]|\\\\\\\\|;|'|,|\\.|\\/",n="left|up|right|down|pageup|pagedown|end|home|tab|enter|escape|space|backspace|delete|pausebreak|capslock|insert",i="[a-z]|[0-9]|f(1|2|3|4|5|6|7|8|9|10|11|12|13|14|15)",r="(("+[e,t,n,i].join(")|(")+"))",o="((ctrl|shift|alt|cmd|win|meta)\\+)*",s="("+o+r+")";this._cachedKeybindingRegex='"\\s*('+s+"(\\s+"+s+')?)\\s*"'}return this._cachedKeybindingRegex},e.prototype._updateDecorationsNow=function(){var t=this,n=this._editor.getModel(),i=e._getKeybindingRegex(),r=n.findMatches(i,!1,!0,!1,!1),o=r.map(function(e){var i=n.getValueInRange(e),r=i.substring(1,i.length-1);r=r.replace(/\\\\/g,"\\");var o=g.IOSupport.readKeybinding(r),s=new l.Keybinding(o);return{strKeybinding:r,keybinding:s,usLabel:s._toUSLabel(),label:t._keybindingService.getLabelFor(s),range:e}});o=o.filter(function(e){return e.usLabel!==e.label});var a=[];o.forEach(function(e){var n,i,r,o;e.label?(n=[{tagName:"span",text:C}],n=n.concat(t._keybindingService.getHTMLLabelFor(e.keybinding)),i="keybindingInfo",r="inlineKeybindingInfo",o="rgba(100, 100, 250, 0.6)"):(n=[{tagName:"span",text:T}],i="keybindingError",r="inlineKeybindingError",o="rgba(250, 100, 100, 0.6)"),a.push({range:new _.Range(e.range.startLineNumber,e.range.startColumn,e.range.startLineNumber,e.range.startColumn+1),options:{stickiness:s.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,inlineClassName:r}}),a.push({range:e.range,options:{stickiness:s.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:i,htmlMessage:n,overviewRuler:{color:o,darkColor:o,position:s.OverviewRulerLane.Right}}})}),this._dec=this._editor.deltaDecorations(this._dec,a)},e.ID="editor.contrib.defineKeybinding",e._cachedKeybindingRegex=null,e=__decorate([__param(1,m.IKeybindingService)],e)}();t.DefineKeybindingController=k;var x=function(){function e(e,t,n){this._editor=e,this._domNode=document.createElement("div"),this._domNode.className="defineKeybindingLauncher",this._domNode.style.display="none";var i=t.lookupKeybindings(R.ID),o="";i.length>0&&(o+=" ("+t.getLabelFor(i[0])+")"),this._domNode.appendChild(document.createTextNode(E+o)),this._toDispose=[],this._toDispose.push(r.addDisposableListener(this._domNode,"click",function(e){n()})),this._editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),this._toDispose=a.disposeAll(this._toDispose)},e.prototype.show=function(){this._domNode.style.display="block"},e.prototype.hide=function(){this._domNode.style.display="none"},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:o.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER}},e.ID="editor.contrib.defineKeybindingLauncherWidget",e}(),A=function(){function e(t,n,i){var o=this;this._editor=t,this._keybindingService=n,this._onAccepted=i,this._toDispose=[],this._lastKeybinding=null,this._domNode=document.createElement("div"),this._domNode.className="defineKeybindingWidget",r.StyleMutator.setWidth(this._domNode,e.WIDTH),r.StyleMutator.setHeight(this._domNode,e.HEIGHT),this._domNode.style.display="none",this._isVisible=!1,this._messageNode=document.createElement("div"),this._messageNode.className="message",this._messageNode.innerText=S,this._domNode.appendChild(this._messageNode),this._inputNode=document.createElement("input"),this._inputNode.className="input",this._domNode.appendChild(this._inputNode),this._outputNode=document.createElement("div"),this._outputNode.className="output",this._domNode.appendChild(this._outputNode),this._toDispose.push(r.addDisposableListener(this._inputNode,"keydown",function(e){var t=new u.StandardKeyboardEvent(e);t.preventDefault(),t.stopPropagation();var n=new l.Keybinding(t.asKeybinding());switch(n.value){case l.CommonKeybindings.ENTER:return o._lastKeybinding&&o._onAccepted(o._lastKeybinding.toUserSettingsLabel()),void o._stop();case l.CommonKeybindings.ESCAPE:return void o._stop()}o._lastKeybinding=n,o._inputNode.value=o._lastKeybinding.toUserSettingsLabel().toLowerCase(),o._inputNode.title="keyCode: "+t.browserEvent.keyCode,r.clearNode(o._outputNode);var i=o._keybindingService.getHTMLLabelFor(o._lastKeybinding);i.forEach(function(e){return o._outputNode.appendChild(y.renderHtml(e))})})),this._toDispose.push(this._editor.addListener2(s.EventType.ConfigurationChanged,function(e){o._isVisible&&o._layout()})),this._toDispose.push(r.addDisposableListener(this._inputNode,"blur",function(e){return o._stop()})),this._editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this._editor.removeOverlayWidget(this),this._toDispose=a.disposeAll(this._toDispose)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:null}},e.prototype._show=function(){this._isVisible||(this._isVisible=!0,this._layout(),this._domNode.style.display="block")},e.prototype._hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},e.prototype._layout=function(){var t=this._editor.getLayoutInfo(),n=Math.round((t.height-e.HEIGHT)/2);r.StyleMutator.setTop(this._domNode,n);var i=Math.round((t.width-e.WIDTH)/2);r.StyleMutator.setLeft(this._domNode,i)},e.prototype.start=function(){this._editor.revealPositionInCenterIfOutsideViewport(this._editor.getPosition()),this._show(),this._lastKeybinding=null,this._inputNode.value="",r.clearNode(this._outputNode),this._inputNode.focus()},e.prototype._stop=function(){this._editor.focus(),this._hide()},e.ID="editor.contrib.defineKeybindingWidget",e.WIDTH=340,e.HEIGHT=90,e}(),R=function(e){function t(t,n,i){e.call(this,t,n,h.Behaviour.WidgetFocus|h.Behaviour.UpdateOnModelChange|h.Behaviour.Writeable);
}return __extends(t,e),t.prototype.isSupported=function(){return e.prototype.isSupported.call(this)?b(this.editor):!1},t.prototype.run=function(){var e=k.get(this.editor);return e.launch(),f.TPromise.as(!0)},t.ID="editor.action.defineKeybinding",t=__decorate([__param(2,c.INullService)],t)}(h.EditorAction);t.DefineKeybindingAction=R,i.EditorBrowserRegistry.registerEditorContribution(k),p.CommonEditorRegistry.registerEditorAction(new p.EditorActionDescriptor(R,R.ID,w,{context:p.ContextKey.EditorFocus,primary:l.KeyMod.chord(l.KeyMod.CtrlCmd|l.KeyCode.KEY_K,l.KeyMod.CtrlCmd|l.KeyCode.KEY_K)}))}),define("vs/editor/contrib/suggest/common/suggest",["require","exports","vs/base/common/async","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/modes/languageFeatureRegistry","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r,o,s){function a(e,o,s,a){a||(a=t.SuggestRegistry.orderedGroups(e));var c=e.getAssociatedResource(),u=[],l=a.map(function(e,t){return function(){if(!(u.length>0)){var t=e.map(function(e){return e.suggest(c,o,s).then(function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i];if(r&&Array.isArray(r.suggestions)&&0!==r.suggestions.length){var o={support:e,currentWord:r.currentWord,incomplete:r.incomplete,suggestions:r.suggestions};n.push(o)}}return n},r.onUnexpectedError)});return i.TPromise.join(t).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)&&n.length>0&&u.push(n)}})}}});return n.sequence(l).then(function(){return u})}t.CONTEXT_SUGGEST_WIDGET_VISIBLE="suggestWidgetVisible",t.CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY="suggestionSupportsAcceptOnKey",t.ACCEPT_SELECTED_SUGGESTION_CMD="acceptSelectedSuggestion",t.SuggestRegistry=new o["default"]("suggestSupport"),t.suggest=a,s.CommonEditorRegistry.registerDefaultLanguageCommand("_executeCompletionItemProvider",function(e,t,n){var i=n.triggerCharacter;if("undefined"!=typeof i&&"string"!=typeof i)throw r.illegalArgument("triggerCharacter");return a(e,t,i)})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/suggest/browser/suggestWidget",["require","exports","vs/nls!vs/editor/contrib/suggest/browser/suggestWidget","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/event","vs/base/browser/dom","vs/base/parts/tree/browser/treeImpl","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/editor/browser/editorBrowser","vs/editor/common/editorCommon","vs/platform/telemetry/common/telemetry","../common/suggest","vs/platform/keybinding/common/keybindingService","vs/editor/common/modes/modesFilters","vs/base/common/arrays","vs/base/common/errors","vs/css!./suggest"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){function _(e){return e instanceof I||e instanceof C}function b(e,t,n){for(var i=e.toLowerCase(),r=0,o=0;o<t.length&&o<e.length;o++)if(t[o]===e[o])r+=2;else{if(n[o]!==i[o])break;r+=1}return r}var E=function(e,t){return e.label.localeCompare(t.label)},S=function(){function e(t,n,i){this.group=t,this.id="_completion_item_#"+e._idPool++,this.support=i.support,this.suggestion=n,this.container=i}return e.prototype.resolveDetails=function(e,t){var n=this;return this._resolveDetails?this._resolveDetails:this.support&&"function"==typeof this.support.getSuggestionDetails?this._resolveDetails=this.support.getSuggestionDetails(e,t,this.suggestion).then(function(e){return n.suggestion=o.assign(n.suggestion,e)},function(e){return y.isPromiseCanceledError(e)?n._resolveDetails=null:y.onUnexpectedError(e)}).then(function(){return n}):this._resolveDetails=i.TPromise.as(this)},e._idPool=0,e}(),w=function(){function e(e,t,n){var i=this;if(this.model=e,this.index=t,this.incomplete=!1,this.size=0,this.items=n.reduce(function(e,t){return i.incomplete=t.incomplete||i.incomplete,i.size+=t.suggestions.length,e.concat(t.suggestions.map(function(e){return new S(i,e,t)}))},[]),this.compare=E,this.filter=v.DefaultFilter,this.items.length>0){var r=this.items[0];r.support&&(this.compare=r.support.getSorter&&r.support.getSorter()||this.compare,this.filter=r.support.getFilter&&r.support.getFilter()||this.filter)}}return Object.defineProperty(e.prototype,"visibleCount",{get:function(){var e=this;return this.items.reduce(function(t,n){return t+(g.isFalsyOrEmpty(e.filter(e.model.currentWord,n.suggestion))?0:1)},0)},enumerable:!0,configurable:!0}),e}(),C=function(){function e(e,t){var n=this;this.raw=e,this.currentWord=t,this.incomplete=!1,this.size=0,this.groups=e.filter(function(e){return!!e}).map(function(e,t){var i=new w(n,t,e);return n.incomplete=i.incomplete||n.incomplete,n.size+=i.size,i})}return Object.defineProperty(e.prototype,"items",{get:function(){return this.groups.reduce(function(e,t){return e.concat(t.items)},[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this.groups.reduce(function(e,t){return e+t.visibleCount},0)},enumerable:!0,configurable:!0}),e}(),T=function(){function e(e,t){this.parent=e,this.message=t}return e}();t.Message=T;var I=function(){function e(e){this.child=new T(this,e)}return e}();t.MessageRoot=I;var k,x=function(){function e(){}return e.prototype.getId=function(e,t){if(t instanceof I)return"messageroot";if(t instanceof T)return"message"+t.message;if(t instanceof C)return"root";if(t instanceof S)return t.id;throw y.illegalArgument("element")},e.prototype.getParent=function(e,t){return _(t)?i.TPromise.as(null):t instanceof T?i.TPromise.as(t.parent):i.TPromise.as(t.group.model)},e.prototype.getChildren=function(e,t){return t instanceof I?i.TPromise.as([t.child]):t instanceof C?i.TPromise.as(t.items):i.TPromise.as([])},e.prototype.hasChildren=function(e,t){return _(t)},e}(),A=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onLeftClick=function(e,t,n){return n.preventDefault(),n.stopPropagation(),t instanceof T||e.setSelection([t],{origin:"mouse"}),!0},t}(u.DefaultController),R=function(){function e(e){this.getState=e}return e.prototype.isVisible=function(e,t){if(_(t))return!1;if(t instanceof T)return!0;var n=t,i=n.group.filter,r=n.group.model.currentWord;return n.highlights=i(r,n.suggestion),!g.isFalsyOrEmpty(n.highlights)},e}(),D=function(){function e(){}return e.prototype.compare=function(e,t,n){var i=t.group,r=n.group,o=i.index-r.index;return 0!==o?o:i.compare(t.suggestion,n.suggestion)},e}(),L=function(){function e(){}return e.prototype.getHeight=function(e,t){return t instanceof S&&t.suggestion.documentationLabel&&e.isFocused(t)?35:19},e.prototype.getTemplateId=function(e,t){return t instanceof T?"message":"suggestion"},e.prototype.renderTemplate=function(e,t,n){if("message"===t){var i=a.emmet("span");return i.style.opacity="0.7",n.appendChild(i),{element:i}}var r=Object.create(null);r.root=n,r.icon=a.append(n,a.emmet(".icon")),r.colorspan=a.append(r.icon,a.emmet("span.colorspan"));var o=a.append(n,a.emmet(".text")),s=a.append(o,a.emmet(".main"));return r.highlightedLabel=new l.HighlightedLabel(s),r.typeLabel=a.append(s,a.emmet("span.type-label")),r.documentation=a.append(o,a.emmet(".docs")),r},e.prototype.renderElement=function(e,t,n,i){if("message"===n)return void(i.element.textContent=t.message);var r=i,o=t.suggestion;o.type&&"#"===o.type.charAt(0)?(r.root.setAttribute("aria-label","color"),r.icon.className="icon customcolor",r.colorspan.style.backgroundColor=o.type.substring(1)):(r.root.setAttribute("aria-label",o.type),r.icon.className="icon "+o.type,r.colorspan.style.backgroundColor=""),r.highlightedLabel.set(o.label,t.highlights),r.typeLabel.textContent=o.typeLabel||"",r.documentation.textContent=o.documentationLabel||""},e.prototype.disposeTemplate=function(e,t,n){if("message"!==t){var i=n;i.highlightedLabel.dispose()}},e}();!function(e){e[e.Hidden=0]="Hidden",e[e.Triggered=1]="Triggered",e[e.Loading=2]="Loading",e[e.Empty=3]="Empty",e[e.Open=4]="Open",e[e.Frozen=5]="Frozen"}(k||(k={}));var M=function(){function e(t,n,i,r){var o=this;this.editor=t,this.model=n,this.allowEditorOverflow=!0,this._onDidVisibilityChange=new s.Emitter,this.isAuto=!1,this.oldFocus=null,this.suggestionSupportsAutoAccept=i.createKey(f.CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY,!0),this.telemetryData=null,this.telemetryService=r,this.element=a.emmet(".editor-widget.suggest-widget.monaco-editor-background"),this.element.style.width=e.WIDTH+"px",this.element.style.top="0",this.element.style.left="0",this.editor.getConfiguration().iconsInSuggestions||a.addClass(this.element,"no-icons"),this.messageElement=a.append(this.element,a.emmet(".message")),this.messageElement.style.display="none",this.treeElement=a.append(this.element,a.emmet(".tree"));var u={renderer:this.renderer=new L,dataSource:new x,controller:new A,filter:new R(function(){return o.state}),sorter:new D},l={twistiePixels:0,alwaysFocused:!0,verticalScrollMode:"visible",useShadows:!1};this.tree=new c.Tree(this.treeElement,u,l),this.toDispose=[t.addListener2(h.EventType.ModelChanged,function(){return o.onModelModeChanged()}),t.addListener2(h.EventType.ModelModeChanged,function(){return o.onModelModeChanged()}),t.addListener2(h.EventType.ModelModeSupportChanged,function(e){return e.suggestSupport&&o.onModelModeChanged()}),f.SuggestRegistry.onDidChange(function(){return o.onModelModeChanged()}),t.addListener2(h.EventType.EditorTextBlur,function(){return o.onEditorBlur()}),this.tree.addListener2("selection",function(e){return o.onTreeSelection(e)}),this.tree.addListener2("focus",function(e){return o.onTreeFocus(e)}),this.editor.addListener2(h.EventType.CursorSelectionChanged,function(){return o.onCursorSelectionChanged()}),this.model.onDidTrigger(function(e){return o.onDidTrigger(e)}),this.model.onDidSuggest(function(e){return o.onDidSuggest(e)}),this.model.onDidCancel(function(e){return o.onDidCancel(e)})],this.onModelModeChanged(),this.editor.addContentWidget(this),this.setState(k.Hidden)}return Object.defineProperty(e.prototype,"onDidVisibilityChange",{get:function(){return this._onDidVisibilityChange.event},enumerable:!0,configurable:!0}),e.prototype.onCursorSelectionChanged=function(){this.state!==k.Hidden&&this.editor.layoutContentWidget(this)},e.prototype.onEditorBlur=function(){var e=this;i.TPromise.timeout(150).done(function(){e.tree&&!e.tree.isDOMFocused()&&e.setState(k.Hidden)})},e.prototype.onTreeSelection=function(e){if(e.selection&&0!==e.selection.length){var t=e.selection[0];if(!(t.hasOwnProperty("suggestions")||t instanceof I||t instanceof T)){var n=t,i=this.tree.getNavigator();for(this.telemetryData.selectedIndex=0,this.telemetryData.wasCancelled=!1;i.next()!==n;)this.telemetryData.selectedIndex++;this.submitTelemetryData();var r=n.container,o="undefined"==typeof n.suggestion.overwriteBefore?r.currentWord.length:n.suggestion.overwriteBefore,s="undefined"==typeof n.suggestion.overwriteAfter?0:Math.max(0,n.suggestion.overwriteAfter);this.model.accept(n.suggestion,o,s),this.editor.focus()}}},e.prototype.onTreeFocus=function(e){var t=this,n=e.focus,i=e.payload;if(n instanceof S&&(this.resolveDetails(n),this.suggestionSupportsAutoAccept.set(!n.suggestion.noAutoAccept)),n!==this.oldFocus){var r=[];this.oldFocus&&r.push(this.oldFocus),n&&r.push(n),this.oldFocus=n,this.tree.refreshAll(r).done(function(){return t.updateWidgetHeight(),n?t.tree.reveal(n,i&&i.firstSuggestion?0:null):void 0},y.onUnexpectedError)}},e.prototype.onModelModeChanged=function(){var e=this.editor.getModel(),t=f.SuggestRegistry.all(e);this.shouldShowEmptySuggestionList=t.some(function(e){return e.shouldShowEmptySuggestionList()})},e.prototype.setState=function(t){switch(this.state=t,t){case k.Hidden:return this.messageElement.style.display="none",this.treeElement.style.display="block",void this.hide();case k.Triggered:return this.messageElement.style.display="none",this.treeElement.style.display="block",void this.hide();case k.Loading:this.messageElement.innerText=e.LOADING_MESSAGE,this.messageElement.style.display="block",this.treeElement.style.display="none",a.removeClass(this.element,"frozen");break;case k.Empty:this.messageElement.innerText=e.NO_SUGGESTIONS_MESSAGE,this.messageElement.style.display="block",this.treeElement.style.display="none",a.removeClass(this.element,"frozen");break;case k.Open:this.messageElement.style.display="none",this.treeElement.style.display="block",a.removeClass(this.element,"frozen");break;case k.Frozen:this.messageElement.style.display="none",this.treeElement.style.display="block",a.addClass(this.element,"frozen")}this.updateWidgetHeight(),this.show()},e.prototype.onDidTrigger=function(e){var t=this;this.state===k.Hidden&&(this.telemetryTimer=this.telemetryService.start("suggestWidgetLoadingTime"),this.isAuto=!!e.auto,this.isAuto||(this.loadingTimeout=setTimeout(function(){t.loadingTimeout=null,t.setState(k.Loading)},50)),e.retrigger||(this.telemetryData={wasAutomaticallyTriggered:e.characterTriggered}))},e.prototype.onDidSuggest=function(e){var t=this;clearTimeout(this.loadingTimeout);var n,r=this.tree.getInput(),o=i.TPromise.as(null);if(r&&r.raw===e.suggestions){var s=r.currentWord;if(r.currentWord=e.currentWord,n=r.visibleCount,!e.auto&&0===n)return r.currentWord=s,void(r.visibleCount>0?this.setState(k.Frozen):this.setState(k.Empty));o=this.tree.refresh()}else r=new C(e.suggestions,e.currentWord),n=r.visibleCount,o=this.tree.setInput(r);return 0===n?(e.auto?this.setState(k.Hidden):this.shouldShowEmptySuggestionList?this.setState(k.Empty):this.setState(k.Hidden),void(this.telemetryTimer&&(this.telemetryTimer.data={reason:"empty"},this.telemetryTimer.stop(),this.telemetryTimer=null))):void o.done(function(){for(var n,i=t.tree.getNavigator(),o=e.currentWord,s=o.toLowerCase(),a=r.items,c=0,u=-1,l=a[0],d=-1;n=i.next();){var h=b(n.suggestion.label,o,s);h>d&&(d=h,l=n,u=c)}t.tree.setFocus(l,{firstSuggestion:!0}),t.telemetryData=t.telemetryData||{},t.telemetryData.suggestionCount=a.length,t.telemetryData.suggestedIndex=u,t.telemetryData.hintLength=o.length,t.setState(k.Open),t.telemetryTimer&&(t.telemetryTimer.data={reason:"results"},t.telemetryTimer.stop(),t.telemetryTimer=null)},y.onUnexpectedError)},e.prototype.onDidCancel=function(e){clearTimeout(this.loadingTimeout),e.retrigger||(this.setState(k.Hidden),this.telemetryData&&(this.telemetryData.selectedIndex=-1,this.telemetryData.wasCancelled=!0,this.submitTelemetryData())),this.telemetryTimer&&(this.telemetryTimer.data={reason:"cancel"},this.telemetryTimer.stop(),this.telemetryTimer=null)},e.prototype.resolveDetails=function(e){var t=this;e&&(this.currentSuggestionDetails&&this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=e.resolveDetails(this.editor.getModel().getAssociatedResource(),this.model.getRequestPosition()||this.editor.getPosition()),this.currentSuggestionDetails.then(function(){return t.currentSuggestionDetails=void 0,t.tree.refresh(e).then(function(){return t.updateWidgetHeight()})}).done(null,function(e){return!y.isPromiseCanceledError(e)&&y.onUnexpectedError(e)}))},e.prototype.selectNextPage=function(){switch(this.state){case k.Hidden:return!1;case k.Triggered:case k.Loading:return!this.isAuto;default:return this.tree.focusNextPage(),!0}},e.prototype.selectNext=function(){switch(this.state){case k.Hidden:return!1;case k.Triggered:case k.Loading:return!this.isAuto;default:var e=this.tree.getFocus();return this.tree.focusNext(1),e===this.tree.getFocus()&&this.tree.focusFirst(),!0}},e.prototype.selectPreviousPage=function(){switch(this.state){case k.Hidden:return!1;case k.Triggered:case k.Loading:return!this.isAuto;default:return this.tree.focusPreviousPage(),!0}},e.prototype.selectPrevious=function(){switch(this.state){case k.Hidden:return!1;case k.Triggered:case k.Loading:return!this.isAuto;default:var e=this.tree.getFocus();return this.tree.focusPrevious(1),e===this.tree.getFocus()&&this.tree.focusLast(),!0}},e.prototype.acceptSelectedSuggestion=function(){switch(this.state){case k.Hidden:return!1;case k.Triggered:case k.Loading:return!this.isAuto;default:var e=this.tree.getFocus();return e?this.tree.setSelection([e]):this.model.cancel(),!0}},e.prototype.show=function(){var e=this;this._onDidVisibilityChange.fire(!0),this.tree.layout(),this.editor.layoutContentWidget(this),i.TPromise.timeout(100).done(function(){a.addClass(e.element,"visible")})},e.prototype.hide=function(){this._onDidVisibilityChange.fire(!1),a.removeClass(this.element,"visible"),this.editor.layoutContentWidget(this)},e.prototype.cancel=function(){this.model.cancel()},e.prototype.getPosition=function(){return this.state===k.Hidden?null:{position:this.editor.getPosition(),preference:[d.ContentWidgetPositionPreference.BELOW,d.ContentWidgetPositionPreference.ABOVE]}},e.prototype.getDomNode=function(){return this.element},e.prototype.getId=function(){return e.ID},e.prototype.submitTelemetryData=function(){this.telemetryService.publicLog("suggestWidget",this.telemetryData),this.telemetryData=null},e.prototype.updateWidgetHeight=function(){var e=(this.tree.getInput(),1e3),t=0;if(this.state===k.Empty||this.state===k.Loading)t=19;else{var n=this.tree.getFocus(),i=n?this.renderer.getHeight(this.tree,n):19;t+=i;var r=(this.tree.getContentHeight()-i)/19,o=Math.floor((e-i)/19);t+=19*Math.min(r,11,o)}this.element.style.height=t+"px",this.tree.layout(t),this.editor.layoutContentWidget(this)},e.prototype.dispose=function(){this.state=null,this.suggestionSupportsAutoAccept=null,this.currentSuggestionDetails=null,this.oldFocus=null,this.telemetryData=null,this.telemetryService=null,this.telemetryTimer=null,this.element=null,this.messageElement=null,this.treeElement=null,this.tree.dispose(),this.tree=null,this.renderer=null,this.toDispose=r.disposeAll(this.toDispose),this._onDidVisibilityChange.dispose(),this._onDidVisibilityChange=null},e.ID="editor.widget.suggestWidget",e.WIDTH=438,e.LOADING_MESSAGE=n.localize(0,null),e.NO_SUGGESTIONS_MESSAGE=n.localize(1,null),e=__decorate([__param(2,m.IKeybindingService),__param(3,p.ITelemetryService)],e)}();t.SuggestWidget=M});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode",["require","exports","vs/nls!vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a){var c=function(e){function t(t,n,i){e.call(this,t,n,o.Behaviour.TextFocus)}return __extends(t,e),t.prototype.run=function(){return this.editor.getConfiguration().tabFocusMode?this.editor.updateOptions({tabFocusMode:!1}):this.editor.updateOptions({tabFocusMode:!0}),i.TPromise.as(!0)},t.ID="editor.action.toggleTabFocusMode",t=__decorate([__param(2,s.INullService)],t)}(o.EditorAction);r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(c,c.ID,n.localize(0,null),{context:r.ContextKey.EditorTextFocus,primary:a.KeyMod.CtrlCmd|a.KeyCode.KEY_M,mac:{primary:a.KeyMod.WinCtrl|a.KeyMod.Shift|a.KeyCode.KEY_M}}))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/wordHighlighter/common/wordHighlighter",["require","exports","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/common/core/range","vs/base/common/errors","vs/platform/instantiation/common/instantiation","vs/base/common/async","vs/editor/common/modes/languageFeatureRegistry"],function(e,t,n,i,r,o,s,a,c){function u(e,n){var i=e.getAssociatedResource(),r=t.OccurrencesRegistry.ordered(e),s=!1;return a.sequence(r.map(function(e){return function(){return s?void 0:e.findOccurrences(i,n).then(function(e){return Array.isArray(e)&&e.length>0?(s=!0,e):void 0},function(e){o.onUnexpectedError(e)})}})).then(function(e){return e[0]})}t.OccurrencesRegistry=new c["default"]("occurrencesSupport"),t.getOccurrencesAtPosition=u,i.CommonEditorRegistry.registerDefaultLanguageCommand("_executeDocumentHighlights",u);var l=function(){function e(e){var t=this;this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.model=this.editor.getModel(),this.toUnhook=[],this.toUnhook.push(e.addListener(n.EventType.CursorPositionChanged,function(e){t._onPositionChanged(e)})),this.toUnhook.push(e.addListener(n.EventType.ModelChanged,function(e){t._stopAll(),t.model=t.editor.getModel()})),this.toUnhook.push(e.addListener("change",function(e){t._stopAll()})),this._lastWordRange=null,this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}return e.prototype._removeDecorations=function(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]))},e.prototype._stopAll=function(){this._lastWordRange=null,this._removeDecorations(),-1!==this.renderDecorationsTimer&&(window.clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)},e.prototype._onPositionChanged=function(e){var n=this;if("explicit"!==e.reason)return void this._stopAll();if(!t.OccurrencesRegistry.has(this.model))return void this._stopAll();var i=this.editor.getSelection();if(i.startLineNumber!==i.endLineNumber)return void this._stopAll();var o=i.startLineNumber,s=i.startColumn,a=i.endColumn,c=this.model.getWordAtPosition({lineNumber:o,column:s});if(!c||c.startColumn>s||c.endColumn<a)return void this._stopAll();for(var l=new r.Range(o,c.startColumn,o,c.endColumn),d=this._lastWordRange&&this._lastWordRange.equalsRange(l),h=0,p=this._decorationIds.length;!d&&p>h;h++){var f=this.model.getDecorationRange(this._decorationIds[h]);f&&f.startLineNumber===o&&f.startColumn<=s&&f.endColumn>=a&&(d=!0)}if(this.lastCursorPositionChangeTime=(new Date).getTime(),d)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(window.clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var m=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=u(this.model,this.editor.getPosition()),this.workerRequest.then(function(e){m===n.workerRequestTokenId&&(n.workerRequestCompleted=!0,n.workerRequestValue=e||[],n._beginRenderDecorations())}).done()}this._lastWordRange=l},e.prototype._beginRenderDecorations=function(){var e=this,t=(new Date).getTime(),n=this.lastCursorPositionChangeTime+250;t>=n?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=window.setTimeout(function(){e.renderDecorations()},n-t)},e.prototype.renderDecorations=function(){this.renderDecorationsTimer=-1;for(var e=[],t=0,i=this.workerRequestValue.length;i>t;t++){var r=this.workerRequestValue[t],o="wordHighlight",s="#A0A0A0";"write"===r.kind?o+="Strong":"text"===r.kind&&(o="selectionHighlight"),e.push({range:r.range,options:{stickiness:n.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:o,overviewRuler:{color:s,darkColor:s,position:n.OverviewRulerLane.Center}}})}this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e)},e.prototype.destroy=function(){for(this._stopAll();this.toUnhook.length>0;)this.toUnhook.pop()()},e}(),d=function(){function e(e,t){this.wordHighligher=new l(e)}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.wordHighligher.destroy()},e.ID="editor.contrib.wordHighlighter",e=__decorate([__param(1,s.INullService)],e)}();i.CommonEditorRegistry.registerEditorContribution(d)}),define("vs/platform/telemetry/common/abstractTelemetryService",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/common/platform","vs/base/common/timer","vs/base/common/objects","vs/platform/platform","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(){var e=this;this.serviceId=c.ITelemetryService,this.sessionId="SESSION_ID_NOT_SET",this.timeKeeper=new o.TimeKeeper,this.toUnbind=[],this.appenders=[],this.timeKeeperListener=function(t){return e.onTelemetryTimerEventStop(t)},this.timeKeeper.addListener(this.timeKeeperListener),this.toUnbind.push(n.errorHandler.addListener(this.onErrorEvent.bind(this))),this.errorBuffer=Object.create(null),this.enableGlobalErrorHandler(),this.errorFlushTimeout=-1}return e.prototype._safeStringify=function(e){return s.safeStringify(e)},e.prototype.onTelemetryTimerEventStop=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.data||{};i.duration=n.timeTaken(),this.publicLog(n.name,i)}},e.prototype.onErrorEvent=function(e){var t=Object.create(null);e.detail&&e.detail.stack&&(e=e.detail);var n=Array.isArray(e.stack)?e.stack.join("\n"):e.stack,i=e.message?e.message:this._safeStringify(e);n&&(t.message=this.cleanupInfo(i),t.stack=this.cleanupInfo(n),this.addErrortoBuffer(t))},e.prototype.addErrortoBuffer=function(e){this.errorBuffer[e.stack]?this.errorBuffer[e.stack].count++:(e.count=1,this.errorBuffer[e.stack]=e),this.tryScheduleErrorFlush()},e.prototype.tryScheduleErrorFlush=function(){var t=this;-1===this.errorFlushTimeout&&(this.errorFlushTimeout=setTimeout(function(){return t.flushErrorBuffer()},e.ERROR_FLUSH_TIMEOUT))},e.prototype.flushErrorBuffer=function(){if(this.errorBuffer)for(var e in this.errorBuffer)this.publicLog("UnhandledError",this.errorBuffer[e]);this.errorBuffer=Object.create(null),this.errorFlushTimeout=-1},e.prototype.cleanupInfo=function(e){var t=/file:\/\/\/.*?\/resources\/app\//gi;return e=e.replace(t,""),t=/file:\/\/\/.*/gi,e=e.replace(t,""),t=/ENOENT: no such file or directory.*?\'([^\']+)\'/gi,e=e.replace(t,"ENOENT: no such file or directory")},e.prototype.enableGlobalErrorHandler=function(){i.isFunction(r.globals.onerror)&&(this.oldOnError=r.globals.onerror);var e=this,t=function(t,n,i,r,o){e.onUncaughtError(t,n,i,r,o),e.oldOnError&&e.oldOnError.apply(this,arguments)};r.globals.onerror=t},e.prototype.onUncaughtError=function(e,t,n,i,r){t=this.cleanupInfo(t),e=this.cleanupInfo(e);var o={message:e,filename:t,line:n,column:i};r&&(o.error={name:r.name,message:r.message},r.stack&&(Array.isArray(r.stack)&&(r.stack=r.stack.join("\n")),o.stack=this.cleanupInfo(r.stack))),o.stack||(o.stack=o.message),this.addErrortoBuffer(o)},e.prototype.loadTelemetryAppendersFromRegistery=function(){for(var e=a.Registry.as(t.Extenstions.TelemetryAppenders).getTelemetryAppenderDescriptors(),n=0;n<e.length;n++){var i=e[n],r=this.instantiationService.createInstance(i);this.addTelemetryAppender(r)}},e.prototype.getSessionId=function(){return this.sessionId},e.prototype.getMachineId=function(){return this.machineId},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getTelemetryInfo=function(){return Promise.resolve({instanceId:this.instanceId,sessionId:this.sessionId,machineId:this.machineId})},e.prototype.dispose=function(){for(-1!==this.errorFlushTimeout&&(clearTimeout(this.errorFlushTimeout),this.flushErrorBuffer());this.toUnbind.length;)this.toUnbind.pop()();this.timeKeeper.removeListener(this.timeKeeperListener),this.timeKeeper.dispose();for(var e=0;e<this.appenders.length;e++)this.appenders[e].dispose()},e.prototype.start=function(e,t){var n="public",i=this.timeKeeper.start(n,e);return t&&(i.data=t),i},e.prototype.publicLog=function(e,t){this.handleEvent(e,t)},e.prototype.getAppendersCount=function(){return this.appenders.length},e.prototype.getAppenders=function(){return this.appenders},e.prototype.addTelemetryAppender=function(e){this.appenders.push(e)},e.prototype.removeTelemetryAppender=function(e){var t=this.appenders.indexOf(e);t>-1&&this.appenders.splice(t,1)},e.prototype.setInstantiationService=function(e){this.instantiationService=e,this.instantiationService&&this.loadTelemetryAppendersFromRegistery()},e.prototype.handleEvent=function(e,t){throw new Error("Not implemented!")},e.ERROR_FLUSH_TIMEOUT=5e3,e}();t.AbstractTelemetryService=u,t.Extenstions={TelemetryAppenders:"telemetry.appenders"};var l=function(){function e(){this.telemetryAppenderDescriptors=[]}return e.prototype.registerTelemetryAppenderDescriptor=function(e){this.telemetryAppenderDescriptors.push(e)},e.prototype.getTelemetryAppenderDescriptors=function(){return this.telemetryAppenderDescriptors},e}();a.Registry.add(t.Extenstions.TelemetryAppenders,new l)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/telemetry/browser/mainTelemetryService",["require","exports","vs/base/common/platform","vs/base/common/objects","vs/base/common/uuid","vs/platform/telemetry/common/abstractTelemetryService","vs/base/browser/idleMonitor"],function(e,t,n,i,r,o,s){var a={enableTelemetry:!0,enableHardIdle:!0,enableSoftIdle:!0},c=function(e){function t(n){var o=this;this.config=i.withDefaults(n,a),e.call(this),this.sessionId=this.config.sessionID||r.generateUuid()+Date.now(),this.config.enableHardIdle&&(this.hardIdleMonitor=new s.IdleMonitor),this.config.enableSoftIdle&&(this.softIdleMonitor=new s.IdleMonitor(t.SOFT_IDLE_TIME),this.softIdleMonitor.addOneTimeActiveListener(function(){return o.onUserActive()}),this.softIdleMonitor.addOneTimeIdleListener(function(){return o.onUserIdle()})),this.eventCount=0,this.startTime=new Date}return __extends(t,e),t.prototype.onUserIdle=function(){var e=this;this.publicLog(t.IDLE_START_EVENT_NAME),this.softIdleMonitor.addOneTimeIdleListener(function(){return e.onUserIdle()})},t.prototype.onUserActive=function(){var e=this;this.publicLog(t.IDLE_STOP_EVENT_NAME),this.softIdleMonitor.addOneTimeActiveListener(function(){return e.onUserActive()})},t.prototype.dispose=function(){this.hardIdleMonitor&&this.hardIdleMonitor.dispose(),this.softIdleMonitor&&this.softIdleMonitor.dispose(),e.prototype.dispose.call(this)},t.prototype.handleEvent=function(e,t){if((!this.hardIdleMonitor||this.hardIdleMonitor.getStatus()!==s.UserStatus.Idle)&&this.config.enableTelemetry){this.eventCount++,t=this.addCommonProperties(t);for(var n=this.getAppenders(),i=0;i<n.length;i++)n[i].log(e,t)}},t.prototype.addCommonProperties=function(e){
e=e||{};var t=new Date;return e.sessionID=this.sessionId,e.timestamp=t,e.version=this.config.version,e.userId=this.userIdHash,e.commitHash=this.config.commitHash,e["common.platform"]=n.Platform[n.platform],e["common.timesincesessionstart"]=t.getTime()-this.startTime.getTime(),e["common.sequence"]=this.eventCount,e["common.instanceId"]=this.instanceId,e["common.machineId"]=this.machineId,e},t.SOFT_IDLE_TIME=12e4,t.IDLE_START_EVENT_NAME="UserIdleStart",t.IDLE_STOP_EVENT_NAME="UserIdleStop",t}(o.AbstractTelemetryService);t.MainTelemetryService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/electron-browser/electronTelemetryService",["require","exports","getmac","crypto","vs/platform/telemetry/browser/mainTelemetryService","vs/platform/storage/common/storage","vs/base/common/errors","vs/base/common/uuid"],function(e,t,n,i,r,o,s,a){var c=function(){function e(){}return e.MachineId="telemetry.machineId",e.InstanceId="telemetry.instanceId",e}(),u=function(e){function t(t,n){e.call(this,n),this.storageService=t,this.setupInstanceId(),this.setupMachineId()}return __extends(t,e),t.prototype.setupInstanceId=function(){var e=this.storageService.get(c.InstanceId);e||(e=a.generateUuid(),this.storageService.store(c.InstanceId,e)),this.instanceId=e},t.prototype.setupMachineId=function(){var e=this,t=this.storageService.get(c.MachineId);if(t)this.machineId=t;else try{n.getMac(function(n,r){t=n?a.generateUuid():i.createHash("sha256").update(r,"utf8").digest("hex"),e.machineId=t,e.storageService.store(c.MachineId,t)})}catch(r){s.onUnexpectedError(r),t=a.generateUuid(),this.machineId=t,this.storageService.store(c.MachineId,t)}},t=__decorate([__param(0,o.IStorageService)],t)}(r.MainTelemetryService);t.ElectronTelemetryService=u}),define("vs/platform/theme/common/themes",["require","exports","vs/nls!vs/platform/theme/common/themes"],function(e,t,n){function i(e){return e?[u.VS,u.VS_DARK,u.HIGH_CONTRAST]:[u.VS,u.VS_DARK]}function r(e){switch(e){case u.VS:return"vs";case u.VS_DARK:return"vs-dark"}return"hc-black"}function o(e){switch(e){case u.VS:return n.localize(0,null);case u.VS_DARK:return n.localize(1,null)}return n.localize(2,null)}function s(e){return/vs($| )/.test(e)}function a(e){return e.split(" ")[1]}function c(e){return e.split(" ")[0]}!function(e){e[e.VS=0]="VS",e[e.VS_DARK=1]="VS_DARK",e[e.HIGH_CONTRAST=2]="HIGH_CONTRAST"}(t.BaseTheme||(t.BaseTheme={}));var u=t.BaseTheme;t.DEFAULT_THEME_ID=r(u.VS),t.getBaseThemes=i,t.toId=r,t.toLabel=o,t.isLightTheme=s,t.getSyntaxThemeId=a,t.getBaseThemeId=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler",["require","exports","vs/editor/browser/viewParts/overviewRuler/overviewRulerImpl","vs/editor/browser/view/viewPart","vs/editor/common/editorCommon","vs/platform/theme/common/themes"],function(e,t,n,i,r,o){var s=function(e){function t(i,r,s){e.call(this,i),this._overviewRuler=new n.OverviewRulerImpl(1,"decorationsOverviewRuler",r,this._context.configuration.editor.lineHeight,t.DECORATION_HEIGHT,t.DECORATION_HEIGHT,s),this._overviewRuler.setLanesCount(this._context.configuration.editor.overviewRulerLanes,!1);var a=this._context.configuration.editor.theme;this._overviewRuler.setUseDarkColor(!o.isLightTheme(a),!1),this._shouldUpdateDecorations=!0,this._zonesFromDecorations=[],this._shouldUpdateCursorPosition=!0,this._hideCursor=this._context.configuration.editor.hideCursorInOverviewRuler,this._shouldForceRender=!1,this._zonesFromCursors=[],this._cursorPositions=[]}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._overviewRuler.dispose()},t.prototype.onCursorPositionChanged=function(e){return this._shouldUpdateCursorPosition=!0,this._cursorPositions=[e.position],this._cursorPositions=this._cursorPositions.concat(e.secondaryPositions),!0},t.prototype.onConfigurationChanged=function(e){var t=this._overviewRuler.getLanesCount(),n=this._context.configuration.editor.overviewRulerLanes,i=!1;if(e.lineHeight&&(this._overviewRuler.setLineHeight(this._context.configuration.editor.lineHeight,!1),this._shouldForceRender=!0,i=!0),t!==n&&(this._overviewRuler.setLanesCount(n,!1),this._shouldForceRender=!0,i=!0),e.hideCursorInOverviewRuler&&(this._hideCursor=this._context.configuration.editor.hideCursorInOverviewRuler,this._shouldUpdateCursorPosition=!0,i=!0),e.theme){var r=this._context.configuration.editor.theme;this._overviewRuler.setUseDarkColor(!o.isLightTheme(r),!1),this._shouldForceRender=!0,i=!0}return i},t.prototype.onLayoutChanged=function(e){var t=this;return this._shouldForceRender=!0,this._requestModificationFrame(function(){t._overviewRuler.setLayout(e.overviewRuler,!1)}),!0},t.prototype.onZonesChanged=function(){return!0},t.prototype.onModelFlushed=function(){return this._shouldUpdateCursorPosition=!0,this._shouldUpdateDecorations=!0,!0},t.prototype.onModelDecorationsChanged=function(e){return this._shouldUpdateDecorations=!0,!0},t.prototype.onScrollHeightChanged=function(e){return this._overviewRuler.setScrollHeight(e,!1),this._shouldForceRender=!0,!0},t.prototype.getDomNode=function(){return this._overviewRuler.getDomNode()},t.prototype._createZonesFromDecorations=function(){var e,t,n,i=this._context.model.getAllDecorations(),r=[];for(e=0,t=i.length;t>e;e++)n=i[e],n.options.overviewRuler.color&&r.push({startLineNumber:n.range.startLineNumber,endLineNumber:n.range.endLineNumber,color:n.options.overviewRuler.color,darkColor:n.options.overviewRuler.darkColor,position:n.options.overviewRuler.position});return r},t.prototype._createZonesFromCursors=function(){var e,n,i,o=[];for(e=0,n=this._cursorPositions.length;n>e;e++)i=this._cursorPositions[e],o.push({forceHeight:2,startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,color:t._CURSOR_COLOR,darkColor:t._CURSOR_COLOR_DARK,position:r.OverviewRulerLane.Full});return o},t.prototype._render=function(e){var t=this,i=this._shouldForceRender;this._shouldForceRender=!1;var r=!1;if(this._shouldUpdateDecorations||this._shouldUpdateCursorPosition){this._shouldUpdateDecorations&&(this._shouldUpdateDecorations=!1,this._zonesFromDecorations=this._createZonesFromDecorations()),this._shouldUpdateCursorPosition&&(this._shouldUpdateCursorPosition=!1,this._hideCursor?this._zonesFromCursors=[]:this._zonesFromCursors=this._createZonesFromCursors());var o=[];o=o.concat(this._zonesFromCursors),o=o.concat(this._zonesFromDecorations),this._overviewRuler.setZones(o,!1),r=!0}(r||i)&&this._requestModificationFrame(function(){var e=t._overviewRuler.render(i);if(e&&n.OverviewRulerImpl.hasCanvas&&t._overviewRuler.getLanesCount()>0&&(t._zonesFromDecorations.length>0||t._zonesFromCursors.length>0)){var r=t._overviewRuler.getDomNode().getContext("2d");r.beginPath(),r.lineWidth=1,r.strokeStyle="rgba(197,197,197,0.8)",r.rect(0,0,t._overviewRuler.getWidth(),t._overviewRuler.getHeight()),r.stroke()}})},t.DECORATION_HEIGHT=6,t._CURSOR_COLOR="rgba(0, 0, 102, 0.8)",t._CURSOR_COLOR_DARK="rgba(152, 152, 152, 0.8)",t}(i.ViewPart);t.DecorationsOverviewRuler=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/browser/view/viewImpl",["require","exports","vs/nls!vs/editor/browser/view/viewImpl","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/common/eventEmitter","vs/base/common/errors","vs/base/common/timer","vs/editor/common/viewModel/viewEventHandler","vs/editor/browser/controller/keyboardHandler","vs/editor/browser/controller/pointerHandler","vs/editor/browser/viewLayout/layoutProvider","vs/editor/browser/config/configuration","vs/editor/browser/view/viewEventDispatcher","vs/editor/browser/view/viewController","vs/editor/browser/view/viewOverlays","vs/editor/browser/viewParts/viewZones/viewZones","vs/editor/browser/viewParts/lines/viewLines","vs/editor/browser/viewParts/overviewRuler/overviewRuler","vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler","vs/editor/browser/viewParts/viewCursors/viewCursors","vs/editor/browser/viewParts/contentWidgets/contentWidgets","vs/editor/browser/viewParts/overlayWidgets/overlayWidgets","vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight","vs/editor/browser/viewParts/selections/selections","vs/editor/browser/viewParts/decorations/decorations","vs/editor/browser/viewParts/glyphMargin/glyphMargin","vs/editor/browser/viewParts/linesDecorations/linesDecorations","vs/editor/browser/viewParts/lineNumbers/lineNumbers","vs/editor/browser/viewParts/scrollDecoration/scrollDecoration","vs/base/browser/browser","vs/editor/common/editorCommon","vs/editor/browser/editorBrowser","vs/editor/common/core/range"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M){var O=function(e){function t(t,n,i,r){var s=this;e.call(this),this._isDisposed=!1,this._editorId=t,this._renderAnimationFrame=null,this.outgoingEventBus=new o.EventEmitter;var a=new f.ViewController(i,n,this.outgoingEventBus);this.listenersToRemove=[],this.listenersToDispose=[],this.eventDispatcher=new p.ViewEventDispatcher(function(e){return s._renderOnce(e)}),this.linesContent=document.createElement("div"),this.linesContent.className=L.ClassNames.LINES_CONTENT+" monaco-editor-background",this.domNode=document.createElement("div"),h.Configuration.applyEditorStyling(this.domNode,n.editor.stylingInfo),this.overflowGuardContainer=document.createElement("div"),this.overflowGuardContainer.className=L.ClassNames.OVERFLOW_GUARD,this.layoutProvider=new d.LayoutProvider(n,i,this.eventDispatcher,this.linesContent,this.domNode,this.overflowGuardContainer),this.eventDispatcher.addEventHandler(this.layoutProvider),this.context=new P(t,n,i,this.eventDispatcher,function(e){return s.eventDispatcher.addEventHandler(e)},function(e){return s.eventDispatcher.removeEventHandler(e)}),this.createTextArea(r),this.createViewParts(),this.keyboardHandler=new u.KeyboardHandler(this.context,a,this.createKeyboardHandlerHelper()),this.pointerHandler=new l.PointerHandler(this.context,a,this.createPointerHandlerHelper()),this.hasFocus=!1,this.codeEditorHelper=null,this.eventDispatcher.addEventHandler(this),this.handleAccumulatedModelEventsTimeout=-1,this.accumulatedModelEvents=[],this.listenersToRemove.push(i.addBulkListener(function(e){s.accumulatedModelEvents=s.accumulatedModelEvents.concat(e),-1===s.handleAccumulatedModelEventsTimeout&&(s.handleAccumulatedModelEventsTimeout=setTimeout(function(){s.handleAccumulatedModelEventsTimeout=-1,s._flushAnyAccumulatedEvents()}))}))}return __extends(t,e),t.prototype._flushAnyAccumulatedEvents=function(){var e=this.accumulatedModelEvents;this.accumulatedModelEvents=[],e.length>0&&this.eventDispatcher.emitMany(e)},t.prototype.createTextArea=function(e){var t=this;this.textArea=document.createElement("textarea"),this._keybindingService=e.createScoped(this.textArea),this._editorTextFocusContextKey=this._keybindingService.createKey(D.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS,void 0),this.textArea.className=L.ClassNames.TEXTAREA,this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",n.localize(0,null)),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-multiline","true"),r.StyleMutator.setTop(this.textArea,0),r.StyleMutator.setLeft(this.textArea,0),r.StyleMutator.setFontSize(this.textArea,this.context.configuration.editor.fontSize),r.StyleMutator.setLineHeight(this.textArea,this.context.configuration.editor.lineHeight),this.listenersToDispose.push(r.addDisposableListener(this.textArea,"focus",function(){return t._setHasFocus(!0)})),this.listenersToDispose.push(r.addDisposableListener(this.textArea,"blur",function(){return t._setHasFocus(!1)})),this.textAreaCover=document.createElement("div"),this.context.configuration.editor.glyphMargin?this.textAreaCover.className="monaco-editor-background "+L.ClassNames.GLYPH_MARGIN+" "+L.ClassNames.TEXTAREA_COVER:this.context.configuration.editor.lineNumbers?this.textAreaCover.className="monaco-editor-background "+L.ClassNames.LINE_NUMBERS+" "+L.ClassNames.TEXTAREA_COVER:this.textAreaCover.className="monaco-editor-background "+L.ClassNames.TEXTAREA_COVER,this.textAreaCover.style.position="absolute",r.StyleMutator.setWidth(this.textAreaCover,1),r.StyleMutator.setHeight(this.textAreaCover,1),r.StyleMutator.setTop(this.textAreaCover,0),r.StyleMutator.setLeft(this.textAreaCover,0)},t.prototype.createViewParts=function(){var e=this;this.viewParts=[],this.viewLines=new g.ViewLines(this.context,this.layoutProvider),this.viewZones=new v.ViewZones(this.context,this.layoutProvider),this.viewParts.push(this.viewZones);var t=new _.DecorationsOverviewRuler(this.context,this.layoutProvider.getScrollHeight(),function(t){return e.layoutProvider.getVerticalOffsetForLineNumber(t)});this.viewParts.push(t);var n=new A.ScrollDecorationViewPart(this.context);this.viewParts.push(n);var i=new m.ContentViewOverlays(this.context,this.layoutProvider);this.viewParts.push(i),i.addDynamicOverlay(new w.CurrentLineHighlightOverlay(this.context,this.layoutProvider)),i.addDynamicOverlay(new C.SelectionsOverlay(this.context)),i.addDynamicOverlay(new T.DecorationsOverlay(this.context));var r=new m.MarginViewOverlays(this.context,this.layoutProvider);this.viewParts.push(r),r.addDynamicOverlay(new I.GlyphMarginOverlay(this.context)),r.addDynamicOverlay(new k.LinesDecorationsOverlay(this.context)),r.addDynamicOverlay(new x.LineNumbersOverlay(this.context)),this.contentWidgets=new E.ViewContentWidgets(this.context,this.domNode),this.viewParts.push(this.contentWidgets);var o=new b.ViewCursors(this.context);if(this.viewParts.push(o),this.overlayWidgets=new S.ViewOverlayWidgets(this.context),this.viewParts.push(this.overlayWidgets),this.linesContentContainer=this.layoutProvider.getScrollbarContainerDomNode(),this.linesContentContainer.style.position="absolute",t){var s=this.layoutProvider.getOverviewRulerInsertData();s.parent.insertBefore(t.getDomNode(),s.insertBefore)}this.linesContent.appendChild(i.getDomNode()),this.linesContent.appendChild(this.viewZones.domNode),this.linesContent.appendChild(this.viewLines.domNode),this.linesContent.appendChild(this.contentWidgets.domNode),this.linesContent.appendChild(o.getDomNode()),this.overflowGuardContainer.appendChild(r.getDomNode()),this.overflowGuardContainer.appendChild(this.linesContentContainer),this.overflowGuardContainer.appendChild(n.getDomNode()),this.overflowGuardContainer.appendChild(this.overlayWidgets.domNode),this.overflowGuardContainer.appendChild(this.textArea),this.overflowGuardContainer.appendChild(this.textAreaCover),this.domNode.appendChild(this.overflowGuardContainer)},t.prototype._flushAccumulatedAndRenderNow=function(){this._flushAnyAccumulatedEvents(),this._renderNow()},t.prototype.createPointerHandlerHelper=function(){var e=this;return{viewDomNode:this.domNode,linesContentDomNode:this.linesContent,focusTextArea:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.focusTextArea: View is disposed");e.focus()},isDirty:function(){return e.accumulatedModelEvents.length>0},getScrollTop:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getScrollTop: View is disposed");return e.layoutProvider.getScrollTop()},setScrollTop:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.setScrollTop: View is disposed");e.layoutProvider.setScrollTop(t)},getScrollLeft:function(){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getScrollLeft: View is disposed");return e.layoutProvider.getScrollLeft()},setScrollLeft:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.setScrollLeft: View is disposed");e.layoutProvider.setScrollLeft(t)},isAfterLines:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.isAfterLines: View is disposed");return e.layoutProvider.isAfterLines(t)},getLineNumberAtVerticalOffset:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getLineNumberAtVerticalOffset: View is disposed");return e.layoutProvider.getLineNumberAtVerticalOffset(t)},getVerticalOffsetForLineNumber:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getVerticalOffsetForLineNumber: View is disposed");return e.layoutProvider.getVerticalOffsetForLineNumber(t)},getWhitespaceAtVerticalOffset:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getWhitespaceAtVerticalOffset: View is disposed");return e.layoutProvider.getWhitespaceAtVerticalOffset(t)},shouldSuppressMouseDownOnViewZone:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.shouldSuppressMouseDownOnViewZone: View is disposed");return e.viewZones.shouldSuppressMouseDownOnViewZone(t)},getPositionFromDOMInfo:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getPositionFromDOMInfo: View is disposed");return e._flushAccumulatedAndRenderNow(),e.viewLines.getPositionFromDOMInfo(t,n)},visibleRangeForPosition2:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.visibleRangeForPosition2: View is disposed");e._flushAccumulatedAndRenderNow();var i=0,r=e.viewLines.visibleRangesForRange2(new M.Range(t,n,t,n),0,i,!1);return r?r[0]:null},getLineWidth:function(t){if(e._isDisposed)throw new Error("ViewImpl.pointerHandler.getLineWidth: View is disposed");return e._flushAccumulatedAndRenderNow(),e.viewLines.getLineWidth(t)}}},t.prototype.createKeyboardHandlerHelper=function(){var e=this;return{viewDomNode:this.domNode,textArea:this.textArea,visibleRangeForPositionRelativeToEditor:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.keyboardHandler.visibleRangeForPositionRelativeToEditor: View is disposed");e._flushAccumulatedAndRenderNow();var i=e.layoutProvider.getLinesViewportData(),r=0,o=e.viewLines.visibleRangesForRange2(new M.Range(t,n,t,n),i.visibleRangesDeltaTop,r,!1);return o?o[0]:null}}},t.prototype.onLayoutChanged=function(e){if(R.isChrome){this.overflowGuardContainer.clientWidth+"px"}return r.StyleMutator.setWidth(this.domNode,e.width),r.StyleMutator.setHeight(this.domNode,e.height),r.StyleMutator.setWidth(this.overflowGuardContainer,e.width),r.StyleMutator.setHeight(this.overflowGuardContainer,e.height),r.StyleMutator.setWidth(this.linesContent,1e6),r.StyleMutator.setHeight(this.linesContent,1e6),r.StyleMutator.setLeft(this.linesContentContainer,e.contentLeft),r.StyleMutator.setWidth(this.linesContentContainer,e.contentWidth),r.StyleMutator.setHeight(this.linesContentContainer,e.contentHeight),this.outgoingEventBus.emit(D.EventType.ViewLayoutChanged,e),!1},t.prototype.onConfigurationChanged=function(e){return e.stylingInfo&&h.Configuration.applyEditorStyling(this.domNode,this.context.configuration.editor.stylingInfo),r.StyleMutator.setFontSize(this.textArea,this.context.configuration.editor.fontSize),r.StyleMutator.setLineHeight(this.textArea,this.context.configuration.editor.lineHeight),!1},t.prototype.onScrollChanged=function(e){return this.outgoingEventBus.emit("scroll",{scrollTop:this.layoutProvider.getScrollTop(),scrollLeft:this.layoutProvider.getScrollLeft()}),!1},t.prototype.onScrollHeightChanged=function(t){return this.outgoingEventBus.emit("scrollSize",{scrollWidth:this.layoutProvider.getScrollWidth(),scrollHeight:this.layoutProvider.getScrollHeight()}),e.prototype.onScrollHeightChanged.call(this,t)},t.prototype.onViewFocusChanged=function(e){return r.toggleClass(this.domNode,"focused",e),e?(this._editorTextFocusContextKey.set(!0),this.outgoingEventBus.emit(D.EventType.ViewFocusGained,{})):(this._editorTextFocusContextKey.reset(),this.outgoingEventBus.emit(D.EventType.ViewFocusLost,{})),!1},t.prototype.dispose=function(){this._isDisposed=!0,-1!==this.handleAccumulatedModelEventsTimeout&&(clearTimeout(this.handleAccumulatedModelEventsTimeout),this.handleAccumulatedModelEventsTimeout=-1),null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this.accumulatedModelEvents=[],this.eventDispatcher.removeEventHandler(this),this.outgoingEventBus.dispose(),this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.listenersToDispose=i.disposeAll(this.listenersToDispose),this.keyboardHandler.dispose(),this.pointerHandler.dispose(),this.viewLines.dispose();for(var e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].dispose();this.viewParts=[],this.layoutProvider.dispose(),this._keybindingService.dispose()},t.prototype.getCodeEditorHelper=function(){var e=this;return this.codeEditorHelper||(this.codeEditorHelper={getScrollTop:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollTop: View is disposed");return e.layoutProvider.getScrollTop()},setScrollTop:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.setScrollTop: View is disposed");e.layoutProvider.setScrollTop(t)},getScrollLeft:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollLeft: View is disposed");return e.layoutProvider.getScrollLeft()},setScrollLeft:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.setScrollLeft: View is disposed");e.layoutProvider.setScrollLeft(t)},getScrollHeight:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollHeight: View is disposed");return e.layoutProvider.getScrollHeight()},getScrollWidth:function(){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getScrollWidth: View is disposed");return e.layoutProvider.getScrollWidth()},getVerticalOffsetForPosition:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getVerticalOffsetForPosition: View is disposed");var i=e.context.model.validateModelPosition({lineNumber:t,column:n}),r=e.context.model.convertModelPositionToViewPosition(i.lineNumber,i.column);return e.layoutProvider.getVerticalOffsetForLineNumber(r.lineNumber)},delegateVerticalScrollbarMouseDown:function(t){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.delegateVerticalScrollbarMouseDown: View is disposed");e.layoutProvider.delegateVerticalScrollbarMouseDown(t)},getOffsetForColumn:function(t,n){if(e._isDisposed)throw new Error("ViewImpl.codeEditorHelper.getOffsetForColumn: View is disposed");var i=e.context.model.validateModelPosition({lineNumber:t,column:n}),r=e.context.model.convertModelPositionToViewPosition(i.lineNumber,i.column);e._flushAccumulatedAndRenderNow();var o=e.viewLines.visibleRangesForRange2(new M.Range(r.lineNumber,r.column,r.lineNumber,r.column),0,0,!1);return o?o[0].left:-1}}),this.codeEditorHelper},t.prototype.getCenteredRangeInViewport=function(){if(this._isDisposed)throw new Error("ViewImpl.getCenteredRangeInViewport: View is disposed");var e=this.layoutProvider.getCenteredViewLineNumberInViewport(),t=this.context.model,n=new M.Range(e,1,e,t.getLineMaxColumn(e));return t.convertViewRangeToModelRange(n)},t.prototype.getInternalEventBus=function(){if(this._isDisposed)throw new Error("ViewImpl.getInternalEventBus: View is disposed");return this.outgoingEventBus},t.prototype.saveState=function(){if(this._isDisposed)throw new Error("ViewImpl.saveState: View is disposed");return this.layoutProvider.saveState()},t.prototype.restoreState=function(e){if(this._isDisposed)throw new Error("ViewImpl.restoreState: View is disposed");return this._flushAnyAccumulatedEvents(),this.layoutProvider.restoreState(e)},t.prototype.focus=function(){if(this._isDisposed)throw new Error("ViewImpl.focus: View is disposed");var e=r.saveParentsScrollTop(this.textArea);this.textArea.focus(),r.selectTextInInputElement(this.textArea),r.restoreParentsScrollTop(this.textArea,e),this._setHasFocus(!0)},t.prototype.isFocused=function(){if(this._isDisposed)throw new Error("ViewImpl.isFocused: View is disposed");return this.hasFocus},t.prototype.createOverviewRuler=function(e,t,n){var i=this;if(this._isDisposed)throw new Error("ViewImpl.createOverviewRuler: View is disposed");return new y.OverviewRuler(this.context,e,this.layoutProvider.getScrollHeight(),t,n,function(e){return i.layoutProvider.getVerticalOffsetForLineNumber(e)})},t.prototype.change=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.change: View is disposed");var n=!1;return this._renderOnce(function(){t._flushAnyAccumulatedEvents();var i={addZone:function(e){return n=!0,t.viewZones.addZone(e)},removeZone:function(e){n=t.viewZones.removeZone(e)||n},layoutZone:function(e){n=t.viewZones.layoutZone(e)||n}},r=null;try{r=e(i)}catch(o){s.onUnexpectedError(o)}return i.addZone=null,i.removeZone=null,n&&t.context.privateViewEventBus.emit(D.EventType.ViewZonesChanged,null),r}),n},t.prototype.getWhitespaces=function(){if(this._isDisposed)throw new Error("ViewImpl.getWhitespaces: View is disposed");return this.layoutProvider.getWhitespaces()},t.prototype.addContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.addContentWidget: View is disposed");this._renderOnce(function(){t.contentWidgets.addWidget(e.widget),t.layoutContentWidget(e)})},t.prototype.layoutContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.layoutContentWidget: View is disposed");this._renderOnce(function(){var n=e.position?e.position.position:null,i=e.position?e.position.preference:null;t.contentWidgets.setWidgetPosition(e.widget,n,i)})},t.prototype.removeContentWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.removeContentWidget: View is disposed");this._renderOnce(function(){t.contentWidgets.removeWidget(e.widget)})},t.prototype.addOverlayWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.addOverlayWidget: View is disposed");this._renderOnce(function(){t.overlayWidgets.addWidget(e.widget),t.layoutOverlayWidget(e)})},t.prototype.layoutOverlayWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.layoutOverlayWidget: View is disposed");this._renderOnce(function(){var n=e.position?e.position.preference:null;t.overlayWidgets.setWidgetPosition(e.widget,n)})},t.prototype.removeOverlayWidget=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl.removeOverlayWidget: View is disposed");this._renderOnce(function(){t.overlayWidgets.removeWidget(e.widget)})},t.prototype.render=function(){if(this._isDisposed)throw new Error("ViewImpl.render: View is disposed");this.layoutProvider.emitLayoutChangedEvent()},t.prototype.renderOnce=function(e){if(this._isDisposed)throw new Error("ViewImpl.renderOnce: View is disposed");return this._renderOnce(e)},t.prototype._renderOnce=function(e){var t=this;if(this._isDisposed)throw new Error("ViewImpl._renderOnce: View is disposed");return this.outgoingEventBus.deferredEmit(function(){try{var n=e?e():null}finally{t._scheduleRender()}return n})},t.prototype._scheduleRender=function(){if(this._isDisposed)throw new Error("ViewImpl._scheduleRender: View is disposed");null===this._renderAnimationFrame&&(this._renderAnimationFrame=r.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))},t.prototype._onRenderScheduled=function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()},t.prototype._renderNow=function(){if(this._isDisposed)throw new Error("ViewImpl._renderNow: View is disposed");this.actualRender()},t.prototype.createRenderingContext=function(e){var t=this,n=this.layoutProvider.getCurrentViewport(),i=e.visibleRangesDeltaTop,r=0,o={linesViewportData:e,scrollWidth:this.layoutProvider.getScrollWidth(),scrollHeight:this.layoutProvider.getScrollHeight(),visibleRange:e.visibleRange,bigNumbersDelta:e.bigNumbersDelta,viewportWidth:n.width,viewportHeight:n.height,viewportLeft:n.left,viewportTop:n.top,getScrolledTopFromAbsoluteTop:function(e){return t.layoutProvider.getScrolledTopFromAbsoluteTop(e)},getViewportVerticalOffsetForLineNumber:function(e){var n=t.layoutProvider.getVerticalOffsetForLineNumber(e),i=t.layoutProvider.getScrolledTopFromAbsoluteTop(n);return i},heightInPxForLine:function(e){return t.layoutProvider.heightInPxForLine(e)},getDecorationsInViewport:function(){return e.getDecorationsInViewport()},visibleRangesForRange:function(e,n){return t.viewLines.visibleRangesForRange2(e,i,r,n)},linesVisibleRangesForRange:function(e,n){return t.viewLines.linesVisibleRangesForRange(e,n)},visibleRangeForPosition:function(e){var n=t.viewLines.visibleRangesForRange2(new M.Range(e.lineNumber,e.column,e.lineNumber,e.column),i,r,!1);return n?n[0]:null},visibleRangeForPosition2:function(e,n){var o=t.viewLines.visibleRangesForRange2(new M.Range(e,n,e,n),i,r,!1);return o?o[0]:null},lineIsVisible:function(t){return e.visibleRange.startLineNumber<=t&&t<=e.visibleRange.endLineNumber}};return o},t.prototype.actualRender=function(){if(this._isDisposed)throw new Error("ViewImpl.actualRender: View is disposed");if(r.isInDOM(this.domNode)){var e,t,n=a.start(a.Topic.EDITOR,"View.render");try{for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onBeforeForcedLayout();var i=this.viewLines.render(),o=this.createRenderingContext(i);for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onReadAfterForcedLayout(o);for(e=0,t=this.viewParts.length;t>e;e++)this.viewParts[e].onWriteAfterForcedLayout()}catch(c){s.onUnexpectedError(c)}n.stop()}},t.prototype._setHasFocus=function(e){this.hasFocus!==e&&(this.hasFocus=e,this.context.privateViewEventBus.emit(D.EventType.ViewFocusChanged,this.hasFocus))},t}(c.ViewEventHandler);t.View=O;var P=function(){function e(e,t,n,i,r,o){this.editorId=e,this.configuration=t,this.model=n,this.privateViewEventBus=i,this.addEventHandler=r,this.removeEventHandler=o}return e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/codeEditorWidget",["require","exports","vs/editor/common/editorCommon","vs/base/browser/browser","vs/editor/browser/standalone/colorizer","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/errors","vs/base/browser/dom","vs/base/common/eventEmitter","vs/editor/browser/config/configuration","vs/editor/common/controller/cursor","vs/editor/browser/view/viewImpl","vs/editor/common/viewModel/characterHardWrappingLineMapper","vs/editor/common/viewModel/splitLinesCollection","vs/editor/common/viewModel/viewModel","vs/base/common/timer","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/base/common/actions","vs/editor/common/controller/cursorMoveHelper","vs/base/common/lifecycle","vs/editor/common/editorAction","vs/editor/common/services/codeEditorService","vs/editor/common/core/range","vs/editor/common/core/position","vs/editor/common/core/selection","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/editor/common/core/editorState","vs/platform/keybinding/common/keybindingService","vs/css!./media/editor","vs/css!./media/tokens","vs/css!./media/default-theme"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R){
var D=0,L=function(e){function t(t,i,r,o,s,u){var d=this;e.call(this),this.id=++D,this._codeEditorService=o;var h=v.start(v.Topic.EDITOR,"CodeEditor.ctor");this.domElement=t,this._lifetimeDispose=[],this._keybindingService=s.createScoped(t),this._editorIdContextKey=this._keybindingService.createKey("editorId",this.getId()),this._editorFocusContextKey=this._keybindingService.createKey(n.KEYBINDING_CONTEXT_EDITOR_FOCUS,void 0),this._editorTabMovesFocusKey=this._keybindingService.createKey(n.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS,!1),this._hasMultipleSelectionsKey=this._keybindingService.createKey(n.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS,!1),this._hasNonEmptySelectionKey=this._keybindingService.createKey(n.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION,!1),this._langIdKey=this._keybindingService.createKey(n.KEYBINDING_CONTEXT_EDITOR_LANGUAGE_ID,void 0),this._lifetimeListeners=[],this._decorationTypeKeysToIds={},i=i||{};var p=null;i.model&&(p=i.model,delete i.model),this._configuration=new l.Configuration(i,t,function(e){return d.model?d.model.guessIndentation(e):null}),this._configuration.editor.tabFocusMode&&this._editorTabMovesFocusKey.set(!0),this._lifetimeListeners.push(this._configuration.addListener(n.EventType.ConfigurationChanged,function(e){return d.emit(n.EventType.ConfigurationChanged,e)})),this.forcedWidgetFocusCount=0,this.focusTracker=c.trackFocus(this.domElement),this.focusTracker.addFocusListener(function(){0===d.forcedWidgetFocusCount&&(d._editorFocusContextKey.set(!0),d.emit(n.EventType.EditorFocus,{}))}),this.focusTracker.addBlurListener(function(){0===d.forcedWidgetFocusCount&&(d._editorFocusContextKey.reset(),d.emit(n.EventType.EditorBlur,{}))}),this._telemetryService=u,this._instantiationService=r.createChild({keybindingService:this._keybindingService}),this._attachModel(p),this.contentWidgets={},this.overlayWidgets={},this.contributions={};for(var f=[].concat(g.EditorBrowserRegistry.getEditorContributions()).concat(y.CommonEditorRegistry.getEditorContributions()),m=0,_=f.length;_>m;m++)try{var b=f[m].createInstance(this._instantiationService,this);this.contributions[b.getId()]=b}catch(E){console.error("Could not instantiate contribution "+b.getId()),a.onUnexpectedError(E)}h.stop(),this._codeEditorService.addCodeEditor(this)}return __extends(t,e),t.prototype.getId=function(){return this.getEditorType()+":"+this.id},t.prototype.getEditorType=function(){return n.EditorType.ICodeEditor},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){for(this._codeEditorService.removeCodeEditor(this),this._lifetimeDispose=E.disposeAll(this._lifetimeDispose);this._lifetimeListeners.length>0;)this._lifetimeListeners.pop()();var t;for(t in this.contributions)this.contributions.hasOwnProperty(t)&&this.contributions[t].dispose();this.contributions={},this.contentWidgets={},this.overlayWidgets={},this.focusTracker.dispose(),this._postDetachModelCleanup(this._detachModel()),this._configuration.dispose(),this._keybindingService.dispose(),this.emit(n.EventType.Disposed,{}),e.prototype.dispose.call(this)},t.prototype.captureState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return new A.EditorState(this,e)},t.prototype.colorizeModelLine=function(e,t){if(void 0===t&&(t=this.model),!t)return"";var i=t.getLineContent(e),o=t.getLineTokens(e,!1),s=n.LineTokensBinaryEncoding.inflateArr(o.getBinaryEncodedTokensMap(),o.getBinaryEncodedTokens()),a=this._configuration.getIndentationOptions();return r.colorizeLine(i,s,a.tabSize)},t.prototype.updateOptions=function(e){this._configuration.updateOptions(e),this._configuration.editor.tabFocusMode?this._editorTabMovesFocusKey.set(!0):this._editorTabMovesFocusKey.reset()},t.prototype.getConfiguration=function(){return s.clone(this._configuration.editor)},t.prototype.getRawConfiguration=function(){return this._configuration.getRawOptions()},t.prototype.getIndentationOptions=function(){return s.clone(this._configuration.getIndentationOptions())},t.prototype.normalizeIndentation=function(e){return this._configuration.normalizeIndentation(e)},t.prototype.getValue=function(e){if(void 0===e&&(e=null),this.model){var t=e&&e.preserveBOM?!0:!1,i=n.EndOfLinePreference.TextDefined;return e&&e.lineEnding&&"\n"===e.lineEnding?i=n.EndOfLinePreference.LF:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=n.EndOfLinePreference.CRLF),this.model.getValue(i,t)}return""},t.prototype.setValue=function(e){this.model&&this.model.setValue(e)},t.prototype.getView=function(){return this._view},t.prototype.getModel=function(){return this.model},t.prototype.setModel=function(e){if(void 0===e&&(e=null),this.model!==e){var t=v.start(v.Topic.EDITOR,"CodeEditor.setModel"),i=this._detachModel();this._attachModel(e);var r=null,o=null;i&&(r=i.getAssociatedResource().toString()),e&&(o=e.getAssociatedResource().toString());var s={oldModelUrl:r,newModelUrl:o};t.stop(),this.emit(n.EventType.ModelChanged,s),this._postDetachModelCleanup(i)}},t.prototype.getDomNode=function(){return this.hasView?this._view.domNode:null},t.prototype.getCenteredRangeInViewport=function(){return this.hasView?this._view.getCenteredRangeInViewport():null},t.prototype.getVisibleColumnFromPosition=function(e){if(!this.model)return e.column;var t=this.model.validatePosition(e);return b.CursorMoveHelper.visibleColumnFromColumn(this.model,t.lineNumber,t.column,this._configuration.getIndentationOptions().tabSize)+1},t.prototype.getPosition=function(){return this.cursor?this.cursor.getPosition().clone():null},t.prototype.setPosition=function(e,t,n,i){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.cursor){if(!T.Position.isIPosition(e))throw new Error("Invalid arguments");this.cursor.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}]),t&&this.revealPosition(e,n,i)}},t.prototype._sendRevealRange=function(e,t,i){if(this.model&&this.cursor){if(!C.Range.isIRange(e))throw new Error("Invalid arguments");var r=this.model.validateRange(e),o={range:r,viewRange:null,verticalType:t,revealHorizontal:i};this.cursor.emit(n.EventType.CursorRevealRange,o)}},t.prototype.revealLine=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},n.VerticalRevealType.Simple,!1)},t.prototype.revealLineInCenter=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},n.VerticalRevealType.Center,!1)},t.prototype.revealLineInCenterIfOutsideViewport=function(e){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},n.VerticalRevealType.CenterIfOutsideViewport,!1)},t.prototype.revealPosition=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!T.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},t?n.VerticalRevealType.Center:n.VerticalRevealType.Simple,i)},t.prototype.revealPositionInCenter=function(e){if(!T.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},n.VerticalRevealType.Center,!0)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e){if(!T.Position.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},n.VerticalRevealType.CenterIfOutsideViewport,!0)},t.prototype.getSelection=function(){return this.cursor?this.cursor.getSelection().clone():null},t.prototype.getSelections=function(){if(!this.cursor)return null;for(var e=this.cursor.getSelections(),t=[],n=0,i=e.length;i>n;n++)t[n]=e[n].clone();return t},t.prototype.setSelection=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);var r=I.Selection.isISelection(e),o=C.Range.isIRange(e);if(!r&&!o)throw new Error("Invalid arguments");if(r)this._setSelectionImpl(e,t,n,i);else if(o){var s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t,n,i)}},t.prototype._setSelectionImpl=function(e,t,n,i){if(this.cursor){var r=I.Selection.createSelection(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this.cursor.setSelections("api",[r]),t&&this.revealRange(r,n,i)}},t.prototype.revealLines=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},n.VerticalRevealType.Simple,!1)},t.prototype.revealLinesInCenter=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},n.VerticalRevealType.Center,!1)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t){this._sendRevealRange({startLineNumber:e,startColumn:1,endLineNumber:t,endColumn:1},n.VerticalRevealType.CenterIfOutsideViewport,!1)},t.prototype.revealRange=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this._sendRevealRange(e,t?n.VerticalRevealType.Center:n.VerticalRevealType.Simple,i)},t.prototype.revealRangeInCenter=function(e){this._sendRevealRange(e,n.VerticalRevealType.Center,!0)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e){this._sendRevealRange(e,n.VerticalRevealType.CenterIfOutsideViewport,!0)},t.prototype.setSelections=function(e){if(this.cursor){if(!e||0===e.length)throw new Error("Invalid arguments");for(var t=0,n=e.length;n>t;t++)if(!I.Selection.isISelection(e[t]))throw new Error("Invalid arguments");this.cursor.setSelections("api",e)}},t.prototype.setScrollTop=function(e){if(this.hasView){if("number"!=typeof e)throw new Error("Invalid arguments");this._view.getCodeEditorHelper().setScrollTop(e)}},t.prototype.getScrollTop=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollTop():-1},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this.hasView&&this._view.getCodeEditorHelper().delegateVerticalScrollbarMouseDown(e)},t.prototype.setScrollLeft=function(e){if(this.hasView){if("number"!=typeof e)throw new Error("Invalid arguments");this._view.getCodeEditorHelper().setScrollLeft(e)}},t.prototype.getScrollLeft=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollLeft():-1},t.prototype.getScrollWidth=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollWidth():-1},t.prototype.getScrollHeight=function(){return this.hasView?this._view.getCodeEditorHelper().getScrollHeight():-1},t.prototype.saveViewState=function(){if(!this.cursor||!this.hasView)return null;var e=this.cursor.saveState(),t=this._view.saveState();return{cursorState:e,viewState:t}},t.prototype.restoreViewState=function(e){if(this.cursor&&this.hasView){var t=e;if(t&&t.cursorState&&t.viewState){var n=t,i=n.cursorState;Array.isArray(i)?this.cursor.restoreState(i):this.cursor.restoreState([i]),this._view.restoreState(n.viewState)}}},t.prototype.layout=function(e){this._configuration.observeReferenceElement(e)},t.prototype.onVisible=function(){},t.prototype.onHide=function(){},t.prototype.focus=function(){this.hasView&&this._view.focus()},t.prototype.beginForcedWidgetFocus=function(){this.forcedWidgetFocusCount++},t.prototype.endForcedWidgetFocus=function(){this.forcedWidgetFocusCount--},t.prototype.isFocused=function(){return this.hasView&&this._view.isFocused()},t.prototype.getContribution=function(e){return this.contributions[e]||null},t.prototype.addAction=function(e){var t=this._instantiationService.createInstance(S.DynamicEditorAction,e,this);this.contributions[t.getId()]=t},t.prototype.getActions=function(){var e,t=[];for(e in this.contributions)if(this.contributions.hasOwnProperty(e)){var n=this.contributions[e];_.isAction(n)&&t.push(n)}return t},t.prototype.getAction=function(e){var t=this.contributions[e];return t&&_.isAction(t)?t:null},t.prototype.trigger=function(e,t,n){var i=this.getAction(t);if(null!==i)i.enabled&&(this._telemetryService.publicLog("editorActionInvoked",{name:i.label}),o.TPromise.as(i.run()).done(null,a.onUnexpectedError));else{this._configuration.handlerDispatcher.trigger(e,t,n)}},t.prototype.executeCommand=function(e,t){return this._configuration.handlerDispatcher.trigger(e,n.Handler.ExecuteCommand,t)},t.prototype.executeEdits=function(e,t){var n=this;return this.cursor?this._configuration.editor.readOnly?!1:(this.model.pushEditOperations(this.cursor.getSelections(),t,function(){return n.cursor.getSelections()}),!0):!1},t.prototype.executeCommands=function(e,t){return this._configuration.handlerDispatcher.trigger(e,n.Handler.ExecuteCommands,t)},t.prototype.addContentWidget=function(e){var t={widget:e,position:e.getPosition()};this.contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this.contentWidgets[e.getId()]=t,this.hasView&&this._view.addContentWidget(t)},t.prototype.layoutContentWidget=function(e){var t=e.getId();if(this.contentWidgets.hasOwnProperty(t)){var n=this.contentWidgets[t];n.position=e.getPosition(),this.hasView&&this._view.layoutContentWidget(n)}},t.prototype.removeContentWidget=function(e){var t=e.getId();if(this.contentWidgets.hasOwnProperty(t)){var n=this.contentWidgets[t];delete this.contentWidgets[t],this.hasView&&this._view.removeContentWidget(n)}},t.prototype.addOverlayWidget=function(e){var t={widget:e,position:e.getPosition()};this.overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this.overlayWidgets[e.getId()]=t,this.hasView&&this._view.addOverlayWidget(t)},t.prototype.layoutOverlayWidget=function(e){var t=e.getId();if(this.overlayWidgets.hasOwnProperty(t)){var n=this.overlayWidgets[t];n.position=e.getPosition(),this.hasView&&this._view.layoutOverlayWidget(n)}},t.prototype.removeOverlayWidget=function(e){var t=e.getId();if(this.overlayWidgets.hasOwnProperty(t)){var n=this.overlayWidgets[t];delete this.overlayWidgets[t],this.hasView&&this._view.removeOverlayWidget(n)}},t.prototype.changeDecorations=function(e){return this.model?this.model.changeDecorations(e,this.id):null},t.prototype.getLineDecorations=function(e){return this.model?this.model.getLineDecorations(e,this.id,this._configuration.editor.readOnly):null},t.prototype.deltaDecorations=function(e,t){return this.model?0===e.length&&0===t.length?e:this.model.deltaDecorations(e,t,this.id):[]},t.prototype.setDecorations=function(e,t){var n=this._codeEditorService.resolveDecorationType(e),i=this._decorationTypeKeysToIds[e]||[];this._decorationTypeKeysToIds[e]=this.deltaDecorations(i,t.map(function(e){var t;return e.hoverMessage?(t=s.clone(n),t.htmlMessage=e.hoverMessage):t=n,{range:e.range,options:t}}))},t.prototype.removeDecorations=function(e){this._decorationTypeKeysToIds.hasOwnProperty(e)&&(this.deltaDecorations(this._decorationTypeKeysToIds[e],[]),delete this._decorationTypeKeysToIds[e])},t.prototype.changeViewZones=function(e){if(this.hasView){var t=this._view.change(e);t&&this.emit(n.EventType.ViewZonesChanged)}},t.prototype.getWhitespaces=function(){return this.hasView?this._view.getWhitespaces():[]},t.prototype.addTypingListener=function(e,t){var n=this;return this.cursor?(this.cursor.addTypingListener(e,t),function(){n.cursor&&n.cursor.removeTypingListener(e,t)}):function(){}},t.prototype.getTopForLineNumber=function(e){return this.hasView?this._view.getCodeEditorHelper().getVerticalOffsetForPosition(e,1):-1},t.prototype.getTopForPosition=function(e,t){return this.hasView?this._view.getCodeEditorHelper().getVerticalOffsetForPosition(e,t):-1},t.prototype.getScrolledVisiblePosition=function(e){if(!this.hasView)return null;var t=this.model.validatePosition(e),n=this._view.getCodeEditorHelper(),i=this._configuration.editor.layoutInfo,r=n.getVerticalOffsetForPosition(t.lineNumber,t.column)-n.getScrollTop(),o=n.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-n.getScrollLeft();return{top:r,left:o,height:this._configuration.editor.lineHeight}},t.prototype.getOffsetForColumn=function(e,t){return this.hasView?this._view.getCodeEditorHelper().getOffsetForColumn(e,t):-1},t.prototype.getLayoutInfo=function(){return this._configuration.editor.layoutInfo},t.prototype._attachModel=function(e){var t=this;if(this.model=e?e:null,this.listenersToRemove=[],this._view=null,this.viewModel=null,this.cursor=null,this.model){this._configuration.resetIndentationOptions(),this.domElement.setAttribute("data-mode-id",this.model.getMode().getId()),this._langIdKey.set(this.model.getMode().getId()),this.model.setStopLineTokenizationAfter(this._configuration.editor.stopLineTokenizationAfter),this._configuration.setIsDominatedByLongLines(this.model.isDominatedByLongLines(this._configuration.editor.longLineBoundary)),this.model.onBeforeAttached();var r=new p.CharacterHardWrappingLineMapperFactory(this._configuration.editor.wordWrapBreakBeforeCharacters,this._configuration.editor.wordWrapBreakAfterCharacters,this._configuration.editor.wordWrapBreakObtrusiveCharacters),o=new f.SplitLinesCollection(this.model,r,this._configuration.getIndentationOptions().tabSize,this._configuration.editor.wrappingInfo.wrappingColumn,this._configuration.editor.typicalFullwidthCharacterWidth/this._configuration.editor.typicalHalfwidthCharacterWidth,n.wrappingIndentFromString(this._configuration.editor.wrappingIndent));this.viewModel=new m.ViewModel(o,this.id,this._configuration,this.model,function(){return t._view?t._view.getCenteredRangeInViewport():null});var s={viewModel:this.viewModel,convertModelPositionToViewPosition:function(e,n){return t.viewModel.convertModelPositionToViewPosition(e,n)},convertModelRangeToViewRange:function(e){return t.viewModel.convertModelRangeToViewRange(e)},convertViewToModelPosition:function(e,n){return t.viewModel.convertViewPositionToModelPosition(e,n)},validateViewPosition:function(e,n,i){return t.viewModel.validateViewPosition(e,n,i)},validateViewRange:function(e,n,i,r,o){return t.viewModel.validateViewRange(e,n,i,r,o)}};this.cursor=new d.Cursor(this.id,this._configuration,this.model,s,i.enableEmptySelectionClipboard),this.viewModel.addEventSource(this.cursor),this._view=new h.View(this.id,this._configuration,this.viewModel,this._keybindingService),this.listenersToRemove.push(this._view.getInternalEventBus().addBulkListener(function(e){for(var i=0,r=e.length;r>i;i++){var o=e[i].getType(),s=e[i].getData();switch(o){case n.EventType.ViewFocusGained:t.emit(n.EventType.EditorTextFocus),t.emit(n.EventType.EditorFocus,{});break;case"scroll":t.emit("scroll",s);break;case"scrollSize":t.emit("scrollSize",s);break;case n.EventType.ViewFocusLost:t.emit(n.EventType.EditorTextBlur);break;case n.EventType.ContextMenu:t.emit(n.EventType.ContextMenu,s);break;case n.EventType.MouseDown:t.emit(n.EventType.MouseDown,s);break;case n.EventType.MouseUp:t.emit(n.EventType.MouseUp,s);break;case n.EventType.KeyUp:t.emit(n.EventType.KeyUp,s);break;case n.EventType.MouseMove:t.emit(n.EventType.MouseMove,s);break;case n.EventType.MouseLeave:t.emit(n.EventType.MouseLeave,s);break;case n.EventType.KeyDown:t.emit(n.EventType.KeyDown,s);break;case n.EventType.ViewLayoutChanged:t.emit(n.EventType.EditorLayout,s)}}})),this.listenersToRemove.push(this.model.addBulkListener(function(e){for(var i=0,r=e.length;r>i;i++){var o=e[i].getType(),s=e[i].getData();switch(o){case n.EventType.ModelDecorationsChanged:t.emit(n.EventType.ModelDecorationsChanged,s);break;case n.EventType.ModelModeChanged:t.domElement.setAttribute("data-mode-id",t.model.getMode().getId()),t._langIdKey.set(t.model.getMode().getId()),t.emit(n.EventType.ModelModeChanged,s);break;case n.EventType.ModelModeSupportChanged:t.emit(n.EventType.ModelModeSupportChanged,s);break;case n.EventType.ModelContentChanged:t.emit(n.EventType.ModelContentChanged,s),t.emit("change",{});break;case n.EventType.ModelDispose:t.setModel(null)}}}));var a=function(e){var t=[e.selection].concat(e.secondarySelections);return t.some(function(e){return!e.isEmpty()})};this.listenersToRemove.push(this.cursor.addBulkListener(function(e){for(var i=!1,r=!1,o=!1,s=!1,c=0,u=e.length;u>c;c++){var l=e[c].getType(),d=e[c].getData();switch(l){case n.EventType.CursorPositionChanged:var h=d;i=!0,r=h.secondaryPositions.length>0,t.emit(n.EventType.CursorPositionChanged,d);break;case n.EventType.CursorSelectionChanged:var p=d;i=!0,r=p.secondarySelections.length>0,o=!0,s=a(p),t.emit(n.EventType.CursorSelectionChanged,d)}}i&&(r?t._hasMultipleSelectionsKey.set(!0):t._hasMultipleSelectionsKey.reset()),o&&(s?t._hasNonEmptySelectionKey.set(!0):t._hasNonEmptySelectionKey.reset())})),this.domElement.appendChild(this._view.domNode),this._view.renderOnce(function(){var e;for(e in t.contentWidgets)t.contentWidgets.hasOwnProperty(e)&&t._view.addContentWidget(t.contentWidgets[e]);for(e in t.overlayWidgets)t.overlayWidgets.hasOwnProperty(e)&&t._view.addOverlayWidget(t.overlayWidgets[e]);t._view.render(),t.hasView=!0})}else this.hasView=!1},t.prototype._postDetachModelCleanup=function(e){e&&(this._decorationTypeKeysToIds={},e.removeAllDecorationsWithOwnerId(this.id))},t.prototype._detachModel=function(){this.model&&this.model.onBeforeDetached(),this.hasView=!1,this.listenersToRemove.forEach(function(e){e()}),this.listenersToRemove=[],this.cursor&&(this.cursor.dispose(),this.cursor=null);var e=null;this._view&&(this._view.dispose(),e=this._view.domNode,this._view=null),this.viewModel&&(this.viewModel.dispose(),this.viewModel=null);var t=this.model;return this.model=null,e&&this.domElement.removeChild(e),this.domElement.removeAttribute("data-mode-id"),t},t=__decorate([__param(2,k.IInstantiationService),__param(3,w.ICodeEditorService),__param(4,R.IKeybindingService),__param(5,x.ITelemetryService)],t)}(u.EventEmitter);t.CodeEditorWidget=L;(function(){function e(e,t){this._id=e,this._position=t,this._domNode=document.createElement("div"),this._domNode.className=this._id.replace(/\./g,"-").replace(/[^a-z0-9\-]/,"")}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return this._position},e})();!function(e){e[e.EndOfLastEditOperation=0]="EndOfLastEditOperation"}(t.EditCursorState||(t.EditCursorState={}));var M=(t.EditCursorState,function(){function e(e,t){this._ops=e,this._editCursorState=t}return e.prototype.getEditOperations=function(e,t){if(0!==this._ops.length){this._ops.sort(function(e,t){return C.Range.compareRangesUsingStarts(e.range,t.range)});for(var n=[],i=this._ops[0],r=1;r<this._ops.length;r++)i.range.endLineNumber===this._ops[r].range.startLineNumber&&i.range.endColumn===this._ops[r].range.startColumn?(i.range=C.Range.plusRange(i.range,this._ops[r].range),i.text=i.text+this._ops[r].text):(n.push(i),i=this._ops[r]);n.push(i);for(var r=0;r<n.length;r++)t.addEditOperation(C.Range.lift(n[r].range),n[r].text)}},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations(),i=n[n.length-1].range;return I.Selection.createSelection(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)},e}());t.CommandRunner=M});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/diffEditorWidget",["require","exports","vs/editor/common/config/defaultConfig","vs/base/common/lifecycle","vs/base/common/objects","vs/editor/browser/widget/codeEditorWidget","vs/base/browser/dom","vs/base/common/eventEmitter","vs/editor/common/editorCommon","vs/base/browser/ui/sash/sash","vs/editor/browser/viewParts/lines/viewLine","vs/editor/common/viewLayout/viewLineParts","vs/base/common/async","vs/editor/common/core/range","vs/platform/instantiation/common/instantiation","vs/css!./media/diffEditor"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){function m(e){return e.modifiedEndLineNumber>0}function v(e){return e.originalEndLineNumber>0}function g(e,t,n,i,r,o){return{range:new p.Range(e,t,n,i),options:{className:r,isWholeLine:o}}}function y(){var e=document.createElement("div");return e.className="diagonal-fill",e}var _=function(){function e(){this._zones=[],this._zonesMap={},this._decorations=[]}return e.prototype.getForeignViewZones=function(e){var t=this;return e.filter(function(e){return!t._zonesMap[String(e.id)]})},e.prototype.clean=function(e){var t=this;this._zones.length>0&&e.changeViewZones(function(e){for(var n=0,i=t._zones.length;i>n;n++)e.removeZone(t._zones[n])}),this._zones=[],this._zonesMap={},this._decorations.length>0&&e.changeDecorations(function(e){e.deltaDecorations(t._decorations,[])}),this._decorations=[]},e.prototype.apply=function(e,t,n){var i,r,o=this;e.changeViewZones(function(e){for(i=0,r=o._zones.length;r>i;i++)e.removeZone(o._zones[i]);for(o._zones=[],o._zonesMap={},i=0,r=n.zones.length;r>i;i++){n.zones[i].suppressMouseDown=!0;var t=e.addZone(n.zones[i]);o._zones.push(t),o._zonesMap[String(t)]=!0}}),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t.setZones(n.overviewZones)},e}(),b=0,E=function(e){function t(i,r,o){var a=this;e.call(this),this.id=++b,this._domElement=i,r=r||{},this._theme=r.theme||n.DefaultConfig.editor.theme,this._renderSideBySide=!0,"undefined"!=typeof r.renderSideBySide&&(this._renderSideBySide=r.renderSideBySide),this._ignoreTrimWhitespace=!0,"undefined"!=typeof r.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=r.ignoreTrimWhitespace),this._updateDecorationsRunner=new h.RunOnceScheduler(function(){return a._updateDecorations()},0),this._toDispose=[],this._toDispose.push(this._updateDecorationsRunner),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=t._getClassName(this._theme,this._renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=document.createElement("div"),this._overviewViewportDomElement.className="diffViewport",this._overviewViewportDomElement.style.position="absolute",this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.style.height="100%",this._overviewDomElement.appendChild(this._overviewViewportDomElement),this._toDispose.push(s.addDisposableListener(this._overviewDomElement,"mousedown",function(e){a.modifiedEditor.delegateVerticalScrollbarMouseDown(e)})),this._containerDomElement.appendChild(this._overviewDomElement),this._createLeftHandSide(),this._createRightHandSide(),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new _,this._modifiedEditorState=new _,this._isVisible=!0,this._isHandlingScrollEvent=!1,this._width=0,this._height=0,this._lineChanges=null,this._createLeftHandSideEditor(r,o),this._createRightHandSideEditor(r,o),r.automaticLayout&&(this._measureDomElementToken=window.setInterval(function(){return a._measureDomElement(!1)},100)),this._enableSplitViewResizing=!0,"undefined"!=typeof r.enableSplitViewResizing&&(this._enableSplitViewResizing=r.enableSplitViewResizing),this._renderSideBySide?this._setStrategy(new T(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new k(this._createDataSource(),this._enableSplitViewResizing))}return __extends(t,e),Object.defineProperty(t.prototype,"ignoreTrimWhitespace",{get:function(){return this._ignoreTrimWhitespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderSideBySide",{get:function(){return this._renderSideBySide},enumerable:!0,configurable:!0}),t._getClassName=function(e,t){var n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=e},t.prototype._recreateOverviewRulers=function(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalOverviewRuler=this.originalEditor.getView().createOverviewRuler("original diffOverviewRuler",4,Number.MAX_VALUE),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedOverviewRuler=this.modifiedEditor.getView().createOverviewRuler("modified diffOverviewRuler",4,Number.MAX_VALUE),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode()),this._layoutOverviewRulers()},t.prototype._createLeftHandSide=function(){this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode)},t.prototype._createRightHandSide=function(){this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode)},t.prototype._createLeftHandSideEditor=function(e,t){var n=this;this.originalEditor=t.createInstance(o.CodeEditorWidget,this._originalDomNode,this._adjustOptionsForLeftHandSide(e)),this._toDispose.push(this.originalEditor.addBulkListener2(function(e){return n._onOriginalEditorEvents(e)})),this._toDispose.push(this.addEmitter2(this.originalEditor,"leftHandSide"))},t.prototype._createRightHandSideEditor=function(e,t){var n=this;this.modifiedEditor=t.createInstance(o.CodeEditorWidget,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e)),this._toDispose.push(this.modifiedEditor.addBulkListener2(function(e){return n._onModifiedEditorEvents(e)})),this._toDispose.push(this.addEmitter2(this.modifiedEditor,"rightHandSide"))},t.prototype.destroy=function(){this.dispose()},t.prototype.dispose=function(){this._toDispose=i.disposeAll(this._toDispose),window.clearInterval(this._measureDomElementToken),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler.dispose(),this._modifiedOverviewRuler.dispose(),this.originalEditor.destroy(),this.modifiedEditor.destroy(),this._strategy.dispose(),e.prototype.dispose.call(this)},t.prototype.getId=function(){return this.getEditorType()+":"+this.id},t.prototype.getEditorType=function(){return c.EditorType.IDiffEditor},t.prototype.getLineChanges=function(){return this._lineChanges},t.prototype.getOriginalEditor=function(){return this.originalEditor},t.prototype.getModifiedEditor=function(){return this.modifiedEditor},t.prototype.updateOptions=function(e){this._theme=e&&e.theme?e.theme:this._theme;var n=!1;"undefined"!=typeof e.renderSideBySide&&this._renderSideBySide!==e.renderSideBySide&&(this._renderSideBySide=e.renderSideBySide,n=!0),"undefined"!=typeof e.ignoreTrimWhitespace&&this._ignoreTrimWhitespace!==e.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=e.ignoreTrimWhitespace,this._beginUpdateDecorations()),this._containerDomElement.className=t._getClassName(this._theme,this._renderSideBySide),this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),"undefined"!=typeof e.enableSplitViewResizing&&(this._enableSplitViewResizing=e.enableSplitViewResizing),
this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),n&&(this._renderSideBySide?this._setStrategy(new T(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new k(this._createDataSource(),this._enableSplitViewResizing)))},t.prototype.getValue=function(e){return void 0===e&&(e=null),this.modifiedEditor.getValue(e)},t.prototype.getModel=function(){return{original:this.originalEditor.getModel(),modified:this.modifiedEditor.getModel()}},t.prototype.setModel=function(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this.originalEditor.setModel(e?e.original:null),this.modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this.originalEditor.setScrollTop(0),this.modifiedEditor.setScrollTop(0)),this._lineChanges=null,this._diffComputationToken++,e?(this._recreateOverviewRulers(),this._beginUpdateDecorations()):this._lineChanges=null,this._layoutOverviewViewport()},t.prototype.getDomNode=function(){return this._domElement},t.prototype.getVisibleColumnFromPosition=function(e){return this.modifiedEditor.getVisibleColumnFromPosition(e)},t.prototype.getPosition=function(){return this.modifiedEditor.getPosition()},t.prototype.setPosition=function(e,t,n,i){this.modifiedEditor.setPosition(e,t,n,i)},t.prototype.revealLine=function(e){this.modifiedEditor.revealLine(e)},t.prototype.revealLineInCenter=function(e){this.modifiedEditor.revealLineInCenter(e)},t.prototype.revealLineInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealLineInCenterIfOutsideViewport(e)},t.prototype.revealPosition=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.modifiedEditor.revealPosition(e,t,n)},t.prototype.revealPositionInCenter=function(e){this.modifiedEditor.revealPositionInCenter(e)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealPositionInCenterIfOutsideViewport(e)},t.prototype.getSelection=function(){return this.modifiedEditor.getSelection()},t.prototype.getSelections=function(){return this.modifiedEditor.getSelections()},t.prototype.setSelection=function(e,t,n,i){this.modifiedEditor.setSelection(e,t,n,i)},t.prototype.setSelections=function(e){this.modifiedEditor.setSelections(e)},t.prototype.revealLines=function(e,t){this.modifiedEditor.revealLines(e,t)},t.prototype.revealLinesInCenter=function(e,t){this.modifiedEditor.revealLinesInCenter(e,t)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t){this.modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t)},t.prototype.revealRange=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.modifiedEditor.revealRange(e,t,n)},t.prototype.revealRangeInCenter=function(e){this.modifiedEditor.revealRangeInCenter(e)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e){this.modifiedEditor.revealRangeInCenterIfOutsideViewport(e)},t.prototype.addAction=function(e){this.modifiedEditor.addAction(e)},t.prototype.getActions=function(){return this.modifiedEditor.getActions()},t.prototype.getAction=function(e){return this.modifiedEditor.getAction(e)},t.prototype.saveViewState=function(){var e=this.originalEditor.saveViewState(),t=this.modifiedEditor.saveViewState();return{original:e,modified:t}},t.prototype.restoreViewState=function(e){var t=e;if(t.original&&t.original){var n=t;this.originalEditor.restoreViewState(n.original),this.modifiedEditor.restoreViewState(n.modified)}},t.prototype.layout=function(e){this._measureDomElement(!1,e)},t.prototype.focus=function(){this.modifiedEditor.focus()},t.prototype.isFocused=function(){return this.originalEditor.isFocused()||this.modifiedEditor.isFocused()},t.prototype.onVisible=function(){this._isVisible=!0,this.originalEditor.onVisible(),this.modifiedEditor.onVisible(),this._beginUpdateDecorations()},t.prototype.onHide=function(){this._isVisible=!1,this.originalEditor.onHide(),this.modifiedEditor.onHide(),this._cleanViewZonesAndDecorations()},t.prototype.trigger=function(e,t,n){this.modifiedEditor.trigger(e,t,n)},t.prototype.changeDecorations=function(e){return this.modifiedEditor.changeDecorations(e)},t.prototype._measureDomElement=function(e,t){t=t||s.getDomNodePosition(this._containerDomElement),t.width<=0||(e||t.width!==this._width||t.height!==this._height)&&(this._width=t.width,this._height=t.height,this._doLayout())},t.prototype._layoutOverviewRulers=function(){var e=t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*t.ONE_OVERVIEW_WIDTH,n=this.modifiedEditor.getLayoutInfo();n&&(this._originalOverviewRuler.setLayout({top:0,width:t.ONE_OVERVIEW_WIDTH,right:e+t.ONE_OVERVIEW_WIDTH,height:this._height-n.horizontalScrollbarHeight}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:t.ONE_OVERVIEW_WIDTH,height:this._height-n.horizontalScrollbarHeight}))},t.prototype._recomputeIfNecessary=function(e){for(var n=this,i=!1,r=0;!i&&r<e.length;r++){var o=e[r].getType();i=i||"change"===o||o===c.EventType.ModelModeChanged}i&&this._isVisible&&(-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(function(){return n._beginUpdateDecorations()},t.UPDATE_DIFF_DECORATIONS_DELAY))},t.prototype._onOriginalEditorEvents=function(e){for(var t=0;t<e.length;t++)"scroll"===e[t].getType()&&this._onOriginalEditorScroll(e[t].getData()),e[t].getType()===c.EventType.ViewZonesChanged&&this._onViewZonesChanged();this._recomputeIfNecessary(e)},t.prototype._onModifiedEditorEvents=function(e){for(var t=0;t<e.length;t++)"scroll"===e[t].getType()&&(this._onModifiedEditorScroll(e[t].getData()),this._layoutOverviewViewport()),"scrollSize"===e[t].getType()&&this._layoutOverviewViewport(),"viewLayoutChanged"===e[t].getType()&&this._layoutOverviewViewport(),e[t].getType()===c.EventType.ViewZonesChanged&&this._onViewZonesChanged();this._recomputeIfNecessary(e)},t.prototype._onViewZonesChanged=function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()},t.prototype._beginUpdateDecorations=function(){var e=this;if(this._beginUpdateDecorationsTimeout=-1,this.modifiedEditor.getModel()){this._diffComputationToken++;var t=this._diffComputationToken,n=this.originalEditor.getModel(),i=this.modifiedEditor.getModel(),r=this.modifiedEditor.getModel().getMode().diffSupport;if(r)try{r.computeDiff(n.getAssociatedResource(),i.getAssociatedResource(),this._ignoreTrimWhitespace).then(function(r){t===e._diffComputationToken&&n===e.originalEditor.getModel()&&i===e.modifiedEditor.getModel()&&(e._lineChanges=r,e._updateDecorationsRunner.schedule(),e.emit(c.EventType.DiffUpdated,{editor:e,lineChanges:r}))},function(r){t===e._diffComputationToken&&n===e.originalEditor.getModel()&&i===e.modifiedEditor.getModel()&&(e._lineChanges=null,e._updateDecorationsRunner.schedule())})}catch(o){console.error(o),this._lineChanges=null,this._updateDecorationsRunner.schedule()}else this._lineChanges=null,this._updateDecorationsRunner.schedule()}},t.prototype._cleanViewZonesAndDecorations=function(){this._originalEditorState.clean(this.originalEditor),this._modifiedEditorState.clean(this.modifiedEditor)},t.prototype._updateDecorations=function(){var e=this._lineChanges||[],t=this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,t,n,this.originalEditor,this.modifiedEditor);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this.originalEditor,this._originalOverviewRuler,i.original),this._modifiedEditorState.apply(this.modifiedEditor,this._modifiedOverviewRuler,i.modified)}finally{this._currentlyChangingViewZones=!1}},t.prototype._adjustOptionsForLeftHandSide=function(e){var t=r.clone(e||{});return t.wrappingColumn=-1,t.readOnly=!0,t.automaticLayout=!1,t.scrollbar=t.scrollbar||{},t.scrollbar.vertical="visible",t.overviewRulerLanes=1,t.theme=this._theme+" original-in-monaco-diff-editor",t},t.prototype._adjustOptionsForRightHandSide=function(e){var i=r.clone(e||{});return i.wrappingColumn=-1,i.automaticLayout=!1,i.revealHorizontalRightPadding=n.DefaultConfig.editor.revealHorizontalRightPadding+t.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar=i.scrollbar||{},i.scrollbar.vertical="visible",i.scrollbar.verticalHasArrows=!1,i.theme=this._theme+" modified-in-monaco-diff-editor",i},t.prototype._onOriginalEditorScroll=function(e){this._isHandlingScrollEvent||(this._isHandlingScrollEvent=!0,this.modifiedEditor.setScrollLeft(e.scrollLeft),this.modifiedEditor.setScrollTop(e.scrollTop),this._isHandlingScrollEvent=!1)},t.prototype._onModifiedEditorScroll=function(e){this._isHandlingScrollEvent||(this._isHandlingScrollEvent=!0,this.originalEditor.setScrollLeft(e.scrollLeft),this.originalEditor.setScrollTop(e.scrollTop),this._isHandlingScrollEvent=!1)},t.prototype._doLayout=function(){var e=this._strategy.layout();this._originalDomNode.style.width=e+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=this._width-e+"px",this._modifiedDomNode.style.left=e+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=this._width-t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.style.height="30px",this.originalEditor.layout({width:e,height:this._height}),this.modifiedEditor.layout({width:this._width-e-t.ENTIRE_DIFF_OVERVIEW_WIDTH,height:this._height}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._layoutOverviewViewport()},t.prototype._layoutOverviewViewport=function(){var e=this._computeOverviewViewport();e?(s.StyleMutator.setTop(this._overviewViewportDomElement,e.top),s.StyleMutator.setHeight(this._overviewViewportDomElement,e.height)):(s.StyleMutator.setTop(this._overviewViewportDomElement,0),s.StyleMutator.setHeight(this._overviewViewportDomElement,0))},t.prototype._computeOverviewViewport=function(){var e=this.modifiedEditor.getLayoutInfo();if(!e)return null;var t=this.modifiedEditor.getScrollTop(),n=this.modifiedEditor.getScrollHeight(),i=Math.max(0,e.contentHeight-e.horizontalScrollbarHeight),r=Math.max(0,i-0),o=n>0?r/n:0,s=Math.max(1,Math.floor(e.contentHeight*o)),a=Math.floor(t*o);return{height:s,top:a}},t.prototype._createDataSource=function(){var e=this;return{getWidth:function(){return e._width},getHeight:function(){return e._height},getContainerDomNode:function(){return e._containerDomElement},relayoutEditors:function(){e._doLayout()},getOriginalEditor:function(){return e.originalEditor},getModifiedEditor:function(){return e.modifiedEditor}}},t.prototype._setStrategy=function(e){this._strategy&&this._strategy.dispose(),this._strategy=e,this._lineChanges&&this._updateDecorations(),this._measureDomElement(!0)},t.prototype._getLineChangeAtOrBeforeLineNumber=function(e,t){if(0===this._lineChanges.length||e<t(this._lineChanges[0]))return null;for(var n=0,i=this._lineChanges.length-1;i>n;){var r=Math.floor((n+i)/2),o=t(this._lineChanges[r]),s=i>=r+1?t(this._lineChanges[r+1]):Number.MAX_VALUE;o>e?i=r-1:e>=s?n=r+1:(n=r,i=r)}return this._lineChanges[n]},t.prototype._getEquivalentLineForOriginalLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,function(e){return e.originalStartLineNumber});if(!t)return e;var n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,s=e-n;return r>=s?i+Math.min(s,o):i+o-r+s},t.prototype._getEquivalentLineForModifiedLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,function(e){return e.modifiedStartLineNumber});if(!t)return e;var n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,s=e-i;return o>=s?n+Math.min(s,r):n+r-o+s},t.prototype.getDiffLineInformationForOriginal=function(e){return this._lineChanges?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null},t.prototype.getDiffLineInformationForModified=function(e){return this._lineChanges?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null},t.ONE_OVERVIEW_WIDTH=15,t.ENTIRE_DIFF_OVERVIEW_WIDTH=30,t.UPDATE_DIFF_DECORATIONS_DELAY=200,t=__decorate([__param(2,f.IInstantiationService)],t)}(a.EventEmitter);t.DiffEditorWidget=E;var S=function(){function e(e){this._dataSource=e}return e.prototype.getEditorsDiffDecorations=function(e,t,n,i,r,o){i=i.sort(function(e,t){return e.afterLineNumber-t.afterLineNumber}),n=n.sort(function(e,t){return e.afterLineNumber-t.afterLineNumber});var s=this._getViewZones(e,n,i,r,o),a=this._getOriginalEditorDecorations(e,t,r,o),c=this._getModifiedEditorDecorations(e,t,r,o);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:s.modified}}},e.prototype._getViewZones=function(e,t,n,i,r){return null},e.prototype._getOriginalEditorDecorations=function(e,t,n,i){return null},e.prototype._getModifiedEditorDecorations=function(e,t,n,i){return null},e}(),w=function(){function e(e){this._source=e,this._index=-1,this.advance()}return e.prototype.advance=function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null},e}(),C=function(){function e(e,t,n){this.lineChanges=e,this.originalForeignVZ=t,this.modifiedForeignVZ=n}return e.prototype.getViewZones=function(){var e,t,n,i,r,o,s,a={original:[],modified:[]},c=0,u=0,l=0,d=0,h=0,p=0,f=0,g=function(e,t){return e.afterLineNumber-t.afterLineNumber},_=function(e,t){if(null===t.domNode&&e.length>0){var n=e[e.length-1];if(n.afterLineNumber===t.afterLineNumber&&null===n.domNode)return void(n.heightInLines+=t.heightInLines)}e.push(t)},b=new w(this.modifiedForeignVZ),E=new w(this.originalForeignVZ);for(e=0,t=this.lineChanges.length;t>=e;e++){for(n=t>e?this.lineChanges[e]:null,null!==n?(l=n.originalStartLineNumber+(n.originalEndLineNumber>0?-1:0),d=n.modifiedStartLineNumber+(n.modifiedEndLineNumber>0?-1:0),u=n.originalEndLineNumber>0?n.originalEndLineNumber-n.originalStartLineNumber+1:0,c=n.modifiedEndLineNumber>0?n.modifiedEndLineNumber-n.modifiedStartLineNumber+1:0,h=Math.max(n.originalStartLineNumber,n.originalEndLineNumber),p=Math.max(n.modifiedStartLineNumber,n.modifiedEndLineNumber)):(l+=1e7+u,d+=1e7+c,h=l,p=d),i=[],r=[];b.current&&b.current.afterLineNumber<=p;)f=b.current.afterLineNumber<=d?l-d+b.current.afterLineNumber:h,i.push({afterLineNumber:f,heightInLines:b.current.heightInLines,domNode:null}),b.advance();for(;E.current&&E.current.afterLineNumber<=h;)f=E.current.afterLineNumber<=l?d-l+E.current.afterLineNumber:p,r.push({afterLineNumber:f,heightInLines:E.current.heightInLines,domNode:null}),E.advance();if(null!==n&&m(n)){var S=this._produceOriginalFromDiff(n,u,c);S&&i.push(S)}if(null!==n&&v(n)){var S=this._produceModifiedFromDiff(n,u,c);S&&r.push(S)}for(o=0,s=0,i=i.sort(g),r=r.sort(g);o<i.length&&s<r.length;){var C=i[o],T=r[s],I=C.afterLineNumber-l,k=T.afterLineNumber-d;k>I?(_(a.original,C),o++):I>k?(_(a.modified,T),s++):C.shouldNotShrink?(_(a.original,C),o++):T.shouldNotShrink?(_(a.modified,T),s++):C.heightInLines>=T.heightInLines?(C.heightInLines-=T.heightInLines,s++):(T.heightInLines-=C.heightInLines,o++)}for(;o<i.length;)_(a.original,i[o]),o++;for(;s<r.length;)_(a.modified,r[s]),s++}var x=function(e){e.domNode||(e.domNode=y())};return a.original.forEach(x),a.modified.forEach(x),a},e.prototype._produceOriginalFromDiff=function(e,t,n){throw new Error("NotImplemented")},e.prototype._produceModifiedFromDiff=function(e,t,n){throw new Error("NotImplemented")},e}(),T=function(e){function t(t,n){var i=this;e.call(this,t),this._disableSash=n===!1,this._sashRatio=null,this._sashPosition=null,this._sash=new u.Sash(this._dataSource.getContainerDomNode(),this),this._disableSash&&this._sash.disable(),this._sash.on("start",function(){return i._onSashDragStart()}),this._sash.on("change",function(e){return i._onSashDrag(e)}),this._sash.on("end",function(){return i._onSashDragEnd()})}return __extends(t,e),t.prototype.dispose=function(){this._sash.dispose()},t.prototype.setEnableSplitViewResizing=function(e){var t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._disableSash?this._sash.disable():this._sash.enable())},t.prototype.layout=function(e){void 0===e&&(e=this._sashRatio);var n=this._dataSource.getWidth(),i=n-E.ENTIRE_DIFF_OVERVIEW_WIDTH,r=Math.floor((e||.5)*i),o=Math.floor(.5*i),r=this._disableSash?o:r||o;return i>2*t.MINIMUM_EDITOR_WIDTH?(r<t.MINIMUM_EDITOR_WIDTH&&(r=t.MINIMUM_EDITOR_WIDTH),r>i-t.MINIMUM_EDITOR_WIDTH&&(r=i-t.MINIMUM_EDITOR_WIDTH)):r=o,this._sashPosition!==r&&(this._sashPosition=r,this._sash.layout()),this._sashPosition},t.prototype._onSashDragStart=function(){this._startSashPosition=this._sashPosition},t.prototype._onSashDrag=function(e){var t=this._dataSource.getWidth(),n=t-E.ENTIRE_DIFF_OVERVIEW_WIDTH,i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()},t.prototype._onSashDragEnd=function(){this._sash.layout()},t.prototype.getVerticalSashTop=function(e){return 0},t.prototype.getVerticalSashLeft=function(e){return this._sashPosition},t.prototype.getVerticalSashHeight=function(e){return this._dataSource.getHeight()},t.prototype._getViewZones=function(e,t,n,i,r){var o=new I(e,t,n);return o.getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,n,i){var r,o,s,a,u,l,d,h,p,f={decorations:[],overviewZones:[]},y=n.getModel();for(r=0,o=e.length;o>r;r++)if(u=e[r],v(u)&&(f.decorations.push(g(u.originalStartLineNumber,1,u.originalEndLineNumber,Number.MAX_VALUE,"line-delete",!0)),m(u)&&u.charChanges||f.decorations.push(g(u.originalStartLineNumber,1,u.originalEndLineNumber,Number.MAX_VALUE,"char-delete",!0)),f.overviewZones.push({startLineNumber:u.originalStartLineNumber,endLineNumber:u.originalEndLineNumber,color:"rgba(255, 0, 0, 0.4)",darkColor:"rgba(255, 0, 0, 0.4)",position:c.OverviewRulerLane.Full}),u.charChanges))for(s=0,a=u.charChanges.length;a>s;s++)if(l=u.charChanges[s],v(l))if(t)for(d=l.originalStartLineNumber;d<=l.originalEndLineNumber;d++)h=d===l.originalStartLineNumber?l.originalStartColumn:y.getLineFirstNonWhitespaceColumn(d),p=d===l.originalEndLineNumber?l.originalEndColumn:y.getLineLastNonWhitespaceColumn(d),f.decorations.push(g(d,h,d,p,"char-delete",!1));else f.decorations.push(g(l.originalStartLineNumber,l.originalStartColumn,l.originalEndLineNumber,l.originalEndColumn,"char-delete",!1));return f},t.prototype._getModifiedEditorDecorations=function(e,t,n,i){var r,o,s,a,u,l,d,h,p,f={decorations:[],overviewZones:[]},y=i.getModel();for(r=0,o=e.length;o>r;r++)if(u=e[r],m(u)&&(f.decorations.push(g(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,Number.MAX_VALUE,"line-insert",!0)),v(u)&&u.charChanges||f.decorations.push(g(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,Number.MAX_VALUE,"char-insert",!0)),f.overviewZones.push({startLineNumber:u.modifiedStartLineNumber,endLineNumber:u.modifiedEndLineNumber,color:"rgba(155, 185, 85, 0.4)",darkColor:"rgba(155, 185, 85, 0.4)",position:c.OverviewRulerLane.Full}),u.charChanges))for(s=0,a=u.charChanges.length;a>s;s++)if(l=u.charChanges[s],m(l))if(t)for(d=l.modifiedStartLineNumber;d<=l.modifiedEndLineNumber;d++)h=d===l.modifiedStartLineNumber?l.modifiedStartColumn:y.getLineFirstNonWhitespaceColumn(d),p=d===l.modifiedEndLineNumber?l.modifiedEndColumn:y.getLineLastNonWhitespaceColumn(d),f.decorations.push(g(d,h,d,p,"char-insert",!1));else f.decorations.push(g(l.modifiedStartLineNumber,l.modifiedStartColumn,l.modifiedEndLineNumber,l.modifiedEndColumn,"char-insert",!1));return f},t.MINIMUM_EDITOR_WIDTH=100,t}(S),I=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype._produceOriginalFromDiff=function(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null},t.prototype._produceModifiedFromDiff=function(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null},t}(C),k=function(e){function t(t,n){var i=this;e.call(this,t),this.decorationsLeft=40,this.toDispose=[],this.toDispose.push(t.getOriginalEditor().addListener2(c.EventType.EditorLayout,function(e){i.decorationsLeft!==e.decorationsLeft&&(i.decorationsLeft=e.decorationsLeft,t.relayoutEditors())}))}return __extends(t,e),t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose)},t.prototype.setEnableSplitViewResizing=function(e){},t.prototype._getViewZones=function(e,t,n,i,r){var o=new x(e,t,n,i,r);return o.getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,n,i){var r,o,s,a={decorations:[],overviewZones:[]};for(r=0,o=e.length;o>r;r++)s=e[r],v(s)&&a.overviewZones.push({startLineNumber:s.originalStartLineNumber,endLineNumber:s.originalEndLineNumber,color:"rgba(255, 0, 0, 0.4)",darkColor:"rgba(255, 0, 0, 0.4)",position:c.OverviewRulerLane.Full});return a},t.prototype._getModifiedEditorDecorations=function(e,t,n,i){var r,o,s,a,u,l,d,h,p,f={decorations:[],overviewZones:[]},v=i.getModel();for(r=0,o=e.length;o>r;r++)if(s=e[r],m(s))if(f.decorations.push(g(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,Number.MAX_VALUE,"line-insert",!0)),f.overviewZones.push({startLineNumber:s.modifiedStartLineNumber,endLineNumber:s.modifiedEndLineNumber,color:"rgba(155, 185, 85, 0.4)",darkColor:"rgba(155, 185, 85, 0.4)",position:c.OverviewRulerLane.Full}),s.charChanges){for(a=0,u=s.charChanges.length;u>a;a++)if(l=s.charChanges[a],m(l))if(t)for(d=l.modifiedStartLineNumber;d<=l.modifiedEndLineNumber;d++)h=d===l.modifiedStartLineNumber?l.modifiedStartColumn:v.getLineFirstNonWhitespaceColumn(d),p=d===l.modifiedEndLineNumber?l.modifiedEndColumn:v.getLineLastNonWhitespaceColumn(d),f.decorations.push(g(d,h,d,p,"char-insert",!1));else f.decorations.push(g(l.modifiedStartLineNumber,l.modifiedStartColumn,l.modifiedEndLineNumber,l.modifiedEndColumn,"char-insert",!1))}else f.decorations.push(g(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,Number.MAX_VALUE,"char-insert",!0));return f},t.prototype.layout=function(){return Math.max(5,this.decorationsLeft)},t}(S),x=function(e){function t(t,n,i,r,o){e.call(this,t,n,i),this.originalModel=r.getModel(),this.modifiedEditorConfiguration=o.getConfiguration(),this.modifiedEditorIndentation=o.getIndentationOptions()}return __extends(t,e),t.prototype._produceOriginalFromDiff=function(e,t,n){return{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div")}},t.prototype._produceModifiedFromDiff=function(e,t,n){var i,r,o,s,a=[];if(e.charChanges)for(i=0,r=e.charChanges.length;r>i;i++)o=e.charChanges[i],v(o)&&(s=g(o.originalStartLineNumber,o.originalStartColumn,o.originalEndLineNumber,o.originalEndColumn,"char-delete",!1),s.options.inlineClassName=s.options.className,a.push(s));var c,u=[];for(c=e.originalStartLineNumber;c<=e.originalEndLineNumber;c++)u=u.concat(this.renderOriginalLine(c-e.originalStartLineNumber,this.originalModel,this.modifiedEditorConfiguration,this.modifiedEditorIndentation,c,a));var l=document.createElement("div");return l.className="view-lines line-delete",l.innerHTML=u.join(""),{shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,domNode:l}},t.prototype.renderOriginalLine=function(e,t,n,i,r,o){var s,a,c=t.getLineContent(r);s={getTokens:function(){return[{startIndex:0,type:""}]},getFauxIndentLength:function(){return 0},getTextLength:function(){return c.length},equals:function(e){return!1},findIndexOfOffset:function(e){return 0}},a=d.createLineParts(r,c,s,o,n.renderWhitespace);var u=l.renderLine({lineContent:c,tabSize:i.tabSize,stopRenderingLineAfter:n.stopRenderingLineAfter,renderWhitespace:n.renderWhitespace,parts:a.getParts()}),h=[];return h.push('<div class="view-line'),0===o.length&&h.push(" char-delete"),h.push('" style="top:'),h.push(String(e*n.lineHeight)),h.push('px;width:1000000px;">'),h=h.concat(u.output),h.push("</div>"),h},t}(C)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/browser/widget/embeddedCodeEditorWidget",["require","exports","vs/editor/browser/widget/codeEditorWidget","vs/editor/common/editorCommon","vs/base/common/objects","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybindingService","vs/editor/common/services/codeEditorService"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,n,r,o,s,a,c){var u=this;e.call(this,t,r.getRawConfiguration(),o,s,a,c),this._parentEditor=r,this._overwriteOptions=n,e.prototype.updateOptions.call(this,this._overwriteOptions),this._lifetimeListeners.push(r.addListener(i.EventType.ConfigurationChanged,function(e){return u._onParentConfigurationChanged(e)}))}return __extends(t,e),t.prototype._onParentConfigurationChanged=function(t){e.prototype.updateOptions.call(this,this._parentEditor.getRawConfiguration()),e.prototype.updateOptions.call(this,this._overwriteOptions)},t.prototype.updateOptions=function(t){r.mixin(this._overwriteOptions,t,!0),e.prototype.updateOptions.call(this,this._overwriteOptions)},t=__decorate([__param(3,o.IInstantiationService),__param(4,c.ICodeEditorService),__param(5,a.IKeybindingService),__param(6,s.ITelemetryService)],t)}(n.CodeEditorWidget);t.EmbeddedCodeEditorWidget=u}),define("vs/platform/thread/common/thread",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IThreadService=n.createDecorator("threadService");var i=function(){function e(){}return e}();t.IRemotableCtorMap=i;var r=function(){function e(){}return e}();t.IRemotableCtorAffinityMap=r;var o=function(){function e(){}return e.getId=function(t){return t[e.PROP_NAME]||null},e.MainContext=function(t){return function(n){e._ensureUnique(t),e.Registry.MainContext[t]=n,n[e.PROP_NAME]=t}},e.PluginHostContext=function(t){return function(n){e._ensureUnique(t),e.Registry.PluginHostContext[t]=n,n[e.PROP_NAME]=t}},e.WorkerContext=function(t,n){return function(i){e._ensureUnique(t),e.Registry.WorkerContext[t]={ctor:i,affinity:n},i[e.PROP_NAME]=t}},e._ensureUnique=function(t){if(e.Registry.MainContext[t]||e.Registry.PluginHostContext[t]||e.Registry.WorkerContext[t])throw new Error("Duplicate Remotable identifier found")},e.PROP_NAME="$__REMOTABLE_ID",e.Registry={MainContext:Object.create(null),PluginHostContext:Object.create(null),WorkerContext:Object.create(null)},e}();t.Remotable=o,function(e){e[e.None=0]="None",e[e.Group1=1]="Group1",e[e.Group2=2]="Group2",e[e.Group3=3]="Group3",e[e.Group4=4]="Group4",e[e.Group5=5]="Group5",e[e.Group6=6]="Group6",e[e.Group7=7]="Group7",e[e.Group8=8]="Group8",e[e.Group9=9]="Group9",e[e.All=10]="All"}(t.ThreadAffinity||(t.ThreadAffinity={}));t.ThreadAffinity});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/services/modelServiceImpl",["require","exports","vs/editor/common/services/modeService","vs/editor/common/model/mirrorModel","vs/editor/common/core/range","vs/editor/common/editorCommon","vs/editor/common/services/resourceService","vs/editor/common/services/modelService","vs/platform/thread/common/thread","vs/base/common/eventSource","vs/base/common/uri","vs/base/common/severity","vs/base/common/errors","vs/platform/telemetry/common/telemetry","vs/editor/common/model/model"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){function m(e){return e.toString()}var v=function(){function e(e,t){var n=this;this.model=e,this.isSyncedToWorkers=!1,this._markerDecorations=[],this._modelEventsListener=e.addBulkListener2(function(e){return t(n,e)})}return e.prototype.dispose=function(){this._markerDecorations=this.model.deltaDecorations(this._markerDecorations,[]),this._modelEventsListener.dispose(),this._modelEventsListener=null,this.model=null},e.prototype.getModelId=function(){return m(this.model.getAssociatedResource())},e.prototype.acceptMarkerDecorations=function(e){this._markerDecorations=this.model.deltaDecorations(this._markerDecorations,e)},e}(),g=function(){function e(){}return e.setMarkers=function(e,t){var n=this;t=t.slice(0,500);var i=t.map(function(t){return{range:n._createDecorationRange(e.model,t),options:n._createDecorationOption(t)}});e.acceptMarkerDecorations(i)},e._createDecorationRange=function(e,t){var n=e.validateRange(new r.Range(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)),i=new r.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(i.isEmpty()){var o=e.getWordAtPosition(i.getStartPosition());if(o)i.startColumn=o.startColumn,i.endColumn=o.endColumn;else{var s=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);1===s||(i.endColumn>=s?(i.endColumn=s,i.startColumn=s-1):i.endColumn+=1)}}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){var a=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);a<i.endColumn&&(i.startColumn=a,t.startColumn=a)}return i},e._createDecorationOption=function(e){var t,n,i,r=null;switch(e.severity){case d["default"].Ignore:break;case d["default"].Warning:case d["default"].Info:t=o.ClassName.EditorWarningDecoration,n="rgba(18,136,18,0.7)",i="rgba(18,136,18,0.7)";break;case d["default"].Error:default:t=o.ClassName.EditorErrorDecoration,n="rgba(255,18,18,0.7)",i="rgba(255,18,18,0.7)"}return"string"==typeof e.message?r=[{isText:!0,text:e.message}]:Array.isArray(e.message)?r=e.message:e.message&&(r=[e.message]),e.source&&r.unshift({isText:!0,text:"["+e.source+"] "}),{stickiness:o.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:t,htmlMessage:r,overviewRuler:{color:n,darkColor:i,position:o.OverviewRulerLane.Right}}},e}(),y=function(){function e(e,t){this.serviceId=a.IModelService,this._threadService=e,this._markerService=t,this._workerHelper=this._threadService.getRemotable(_),this._models={},this._onModelAdded=new u.EventSource,this._onModelRemoved=new u.EventSource,this._onModelModeChanged=new u.EventSource,this._markerService&&(this._markerServiceSubscription=this._markerService.onMarkerChanged(this._handleMarkerChange,this))}return e.prototype.dispose=function(){this._markerServiceSubscription&&this._markerServiceSubscription.dispose();
},e.prototype._handleMarkerChange=function(e){var t=this;e.forEach(function(e){var n=m(e),i=t._models[n];i&&g.setMarkers(i,t._markerService.read({resource:e,take:500}))})},e.prototype._createModelData=function(e,t,n){var i=this,r=new f.Model(e,t,n),o=m(r.getAssociatedResource());if(this._models[o])throw new Error("ModelService: Cannot add model "+p.anonymize(o)+" because it already exists!");var s=new v(r,function(e,t){return i._onModelEvents(e,t)});return this._models[o]=s,s},e.prototype.createModel=function(t,n,i){var r=this._createModelData(t,n,i);r.getModelId();return this._markerService&&g.setMarkers(r,this._markerService.read({resource:r.model.getAssociatedResource()})),r.model.isTooLargeForHavingARichMode()||(r.isSyncedToWorkers=!0,this._workerHelper.$_acceptNewModel(e._getBoundModelData(r.model))),this._onModelAdded.fire(r.model),r.model},e.prototype.destroyModel=function(e){var t=this._models[m(e)];t&&t.model.dispose()},e.prototype.getModels=function(){var e=[];for(var t in this._models)this._models.hasOwnProperty(t)&&e.push(this._models[t].model);return e},e.prototype.getModel=function(e){var t=m(e),n=this._models[t];return n?n.model:null},Object.defineProperty(e.prototype,"onModelAdded",{get:function(){return this._onModelAdded?this._onModelAdded.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onModelRemoved",{get:function(){return this._onModelRemoved?this._onModelRemoved.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onModelModeChanged",{get:function(){return this._onModelModeChanged?this._onModelModeChanged.value:null},enumerable:!0,configurable:!0}),e.prototype._onModelDisposing=function(e){var t=this,n=m(e.getAssociatedResource()),i=this._models[n];if(this._markerService){var r=this._markerService.read({resource:e.getAssociatedResource()}),o=Object.create(null);r.forEach(function(e){return o[e.owner]=t}),Object.keys(o).forEach(function(n){return t._markerService.changeOne(n,e.getAssociatedResource(),[])})}i.isSyncedToWorkers&&this._workerHelper.$_acceptDidDisposeModel(e.getAssociatedResource()),delete this._models[n],i.dispose(),this._onModelRemoved.fire(e)},e._getBoundModelData=function(e){return{url:e.getAssociatedResource(),versionId:e.getVersionId(),properties:e.getProperties(),value:e.toRawText(),modeId:e.getMode().getId()}},e.prototype._onModelEvents=function(e,t){for(var n={contentChanged:[],propertiesChanged:null},i=0,r=t.length;r>i;i++){var s=t[i],a=s.getData();switch(s.getType()){case o.EventType.ModelDispose:return void this._onModelDisposing(e.model);case o.EventType.ModelContentChanged:e.isSyncedToWorkers&&n.contentChanged.push(a);break;case o.EventType.ModelPropertiesChanged:e.isSyncedToWorkers&&(n.propertiesChanged=a);break;case o.EventType.ModelModeChanged:var c=a;e.isSyncedToWorkers&&this._workerHelper.$_acceptDidChangeModelMode(e.getModelId(),c.oldMode.getId(),c.newMode.getId()),this._onModelModeChanged.fire(e.model,c.oldMode.getId())}}(n.contentChanged.length>0||n.propertiesChanged)&&this._workerHelper.$_acceptModelEvents(e.getModelId(),n)},e}();t.ModelServiceImpl=y;var _=function(){function e(e,t){this._resourceService=e,this._modeService=t}return e.prototype.$_acceptNewModel=function(e){var t=this,n=new i.MirrorModel(this._resourceService,e.versionId,e.value,null,e.url,e.properties);return this._resourceService.insert(n.getAssociatedResource(),n),this._modeService.getOrCreateMode(e.modeId).then(function(e){t._resourceService.remove(n.getAssociatedResource()),n.setMode(e),t._resourceService.insert(n.getAssociatedResource(),n)})},e.prototype.$_acceptDidChangeModelMode=function(e,t,n){var i=this,r=this._resourceService.get(l["default"].parse(e));return this._modeService.getOrCreateMode(n).then(function(e){i._resourceService.remove(r.getAssociatedResource()),r.setMode(e),i._resourceService.insert(r.getAssociatedResource(),r)})},e.prototype.$_acceptDidDisposeModel=function(e){var t=this._resourceService.get(e);this._resourceService.remove(e),t&&t.dispose()},e.prototype.$_acceptModelEvents=function(e,t){var n=this._resourceService.get(l["default"].parse(e));if(!n)throw new Error("Received model events for missing model "+p.anonymize(e));try{n.onEvents(t)}catch(i){h.onUnexpectedError(i)}},e=__decorate([c.Remotable.WorkerContext("ModelServiceWorkerHelper",c.ThreadAffinity.All),__param(0,s.IResourceService),__param(1,n.IModeService)],e)}();t.ModelServiceWorkerHelper=_});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter",["require","exports","vs/editor/browser/editorBrowser","vs/base/browser/browser","vs/base/common/lifecycle","vs/editor/browser/editorBrowserExtensions","vs/platform/thread/common/thread","vs/css!./workerStatusReporter"],function(e,t,n,i,r,o,s){function a(e,t,n){e.setAttribute(t,n)}(function(){function e(e,t){this._threadService=t,this._threadService.addStatusListener(this),this._editor=e,this._toDispose=[],this._domNodes=[],this._domNode=document.createElement("div"),this._domNode.className="monaco-worker-status",i.canUseTranslate3d&&(this._domNode.style.transform="translate3d(0px, 0px, 0px)"),this._editor.addOverlayWidget(this)}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._threadService.removeStatusListener(this),this._toDispose=r.disposeAll(this._toDispose)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:n.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER}},e.prototype._ensureDomNodes=function(e){for(var t=this._domNodes.length-1;t>=e;t++)this._domNode.removeChild(this._domNodes[t]),this._domNodes.splice(t,1);for(var t=this._domNodes.length;e>t;t++)this._domNodes[t]=document.createElement("div"),this._domNodes[t].className="worker",this._domNode.appendChild(this._domNodes[t])},e.prototype.onThreadServiceStatus=function(e){this._ensureDomNodes(e.workers.length);for(var t=0;t<e.workers.length;t++){var n=e.workers[t].queueSize,i="idle";n>5?i="flooded":n>0&&(i="busy"),a(this._domNodes[t],"status",i)}},e.ID="editor.contrib.workerStatusReporter",e=__decorate([__param(1,s.IThreadService)],e)})()});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/storage/common/remotable.storage",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/platform/storage/common/storage"],function(e,t,n,i,r){var o=function(){function e(e){this._storageService=e}return e.prototype.getValue=function(e,t){var i=this._storageService.get(t,e?r.StorageScope.GLOBAL:r.StorageScope.WORKSPACE);if(!i)return n.TPromise.as(void 0);var o;try{return o=JSON.parse(i),n.TPromise.as(o)}catch(s){return n.TPromise.wrapError(s)}},e.prototype.setValue=function(e,t,i){var o;try{o=JSON.stringify(i),this._storageService.store(t,o,e?r.StorageScope.GLOBAL:r.StorageScope.WORKSPACE)}catch(s){return n.TPromise.wrapError(s)}},e=__decorate([i.Remotable.MainContext("MainThreadStorage"),__param(0,r.IStorageService)],e)}();t.MainThreadStorage=o;var s=function(){function e(e){this._proxy=e.getRemotable(o)}return e.prototype.getValue=function(e,t,n){return this._proxy.getValue(e,t).then(function(e){return e||n})},e.prototype.setValue=function(e,t,n){return this._proxy.setValue(e,t,n)},e}();t.PluginHostStorage=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}};define("vs/platform/plugins/common/nativePluginService",["require","exports","vs/platform/plugins/common/pluginsRegistry","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/platform/plugins/common/abstractPluginService","vs/base/common/severity","vs/platform/storage/common/remotable.storage","vs/base/common/paths","vs/base/common/lifecycle"],function(e,t,n,i,r,o,s,a,c,u){function l(t){var n=null;try{n=e.__$__nodeRequire(t)}catch(r){return i.TPromise.wrapError(r)}return i.TPromise.as(n)}function d(e){var t=e.replace(/\\/g,"/");return t.length>0&&"/"!==t.charAt(0)&&(t="/"+t),encodeURI("file://"+t)}var h=function(){function e(e,t,n){var i=this;this._id=e,this._shared=t,this._storage=n,this._init=this._storage.getValue(this._shared,this._id,Object.create(null)).then(function(e){return i._value=e,i})}return Object.defineProperty(e.prototype,"whenReady",{get:function(){return this._init},enumerable:!0,configurable:!0}),e.prototype.get=function(e,t){var n=this._value[e];return"undefined"==typeof n&&(n=t),n},e.prototype.update=function(e,t){return this._value[e]=t,this._storage.setValue(this._shared,this._id,this._value).then(function(){return!0})},e}(),p=function(e){function t(i,r,o,s){var a=this,c=i.getConfiguration();this._isDev=!c.env.isBuilt||!!c.env.pluginDevelopmentPath,this._messageService=o,r.registerRemotableInstance(t,this),e.call(this,!1),this._threadService=r,this._telemetryService=s,this._proxy=this._threadService.getRemotable(f),this._pluginsStatus={},n.PluginsRegistry.handleExtensionPoints(function(e,t,n){a.showMessage(e,t,n)})}return __extends(t,e),t.prototype.getTelemetryActivationEvent=function(e){var t={id:e.id,name:e.name,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null};for(var n in e.contributes){var i=e.contributes[n];if(i)switch(n){case"debuggers":var r=i.reduce(function(e,t){return e?e+","+t.type:t.type},"");t["contribution.debuggers"]=r;break;case"grammars":var o=i.reduce(function(e,t){return e?e+","+t.language:t.language},"");t["contribution.grammars"]=o;break;case"languages":var s=i.reduce(function(e,t){return e?e+","+t.id:t.id},"");t["contribution.languages"]=s;break;case"tmSnippets":var a=i.reduce(function(e,t){return e?e+","+t.languageId:t.languageId},"");t["contribution.tmSnippets"]=a;break;default:t["contribution."+n]=!0}}return t},t.prototype._showMessage=function(e,t){this._proxy.$doShowMessage(e,t),this.$doShowMessage(e,t)},t.prototype.showMessage=function(t,n,i){e.prototype.showMessage.call(this,t,n,i),this._pluginsStatus[n]||(this._pluginsStatus[n]={messages:[]}),this._pluginsStatus[n].messages.push({type:t,source:n,message:i})},t.prototype.$doShowMessage=function(e,t){var n=!1;if((e===s["default"].Error||e===s["default"].Warning)&&this._isDev&&(this._messageService.show(e,t),n=!0),!n)switch(e){case s["default"].Error:console.error(t);break;case s["default"].Warning:console.warn(t);break;default:console.log(t)}},t.prototype.getPluginsStatus=function(){return this._pluginsStatus},t.prototype.deactivate=function(e){this._proxy.deactivate(e)},t.prototype._actualActivatePlugin=function(e){var t=this,n=this.getTelemetryActivationEvent(e);return this._telemetryService.publicLog("activatePlugin",n),this._proxy.$activatePluginInPluginHost(e).then(function(n){return t.activatedPlugins[e.id]})},t.prototype.$onPluginHostReady=function(e,t){n.PluginsRegistry.registerPlugins(e),this.registrationDone(t)},t.prototype.$onPluginActivatedInPluginHost=function(e,t){this.activatedPlugins[e]=new o.ActivatedPlugin(!1,{activate:void 0,deactivate:void 0},t,[])},t.prototype.$onPluginActivationFailedInPluginHost=function(e,t){this.activatedPlugins[e]=new o.ActivatedPlugin(!0,{activate:void 0,deactivate:void 0},{},[])},t=__decorate([r.Remotable.MainContext("MainProcessPluginService")],t)}(o.AbstractPluginService);t.MainProcessPluginService=p;var f=function(e){function t(n){n.registerRemotableInstance(t,this),e.call(this,!0),this._threadService=n,this._storage=new a.PluginHostStorage(n),this._proxy=this._threadService.getRemotable(p)}return __extends(t,e),t.prototype._showMessage=function(e,t){this._proxy.$doShowMessage(e,t),this.$doShowMessage(e,t)},t.prototype.$doShowMessage=function(e,t){switch(e){case s["default"].Error:console.error(t);break;case s["default"].Warning:console.warn(t);break;default:console.log(t)}},t.prototype.deactivate=function(e){var t=this.activatedPlugins[e];if(t){try{"function"==typeof t.module.deactivate&&t.module.deactivate()}catch(n){}try{u.disposeAll(t.subscriptions)}catch(n){}}},t.prototype.registrationDone=function(t){e.prototype.registrationDone.call(this,[]),this._proxy.$onPluginHostReady(n.PluginsRegistry.getAllPluginDescriptions(),t)},t.prototype._loadPluginModule=function(e){return e.isAMD?o.loadAMDModule(d(e.main)):l(e.main)},t.prototype._loadPluginContext=function(e){var t=new h(e.id,!0,this._storage),n=new h(e.id,!1,this._storage);return i.TPromise.join([t.whenReady,n.whenReady]).then(function(){return Object.freeze({globalState:t,workspaceState:n,subscriptions:[],get extensionPath(){return e.extensionFolderPath},asAbsolutePath:function(t){return c.normalize(c.join(e.extensionFolderPath,t),!0)}})})},t.prototype._actualActivatePlugin=function(t){var n=this;return e.prototype._actualActivatePlugin.call(this,t).then(function(e){var i=n._threadService.createDynamicProxyFromMethods(e.exports);return e.subscriptions.push(i),n._proxy.$onPluginActivatedInPluginHost(t.id,i.getProxyDefinition()),e},function(e){throw n._proxy.$onPluginActivationFailedInPluginHost(t.id,e),e})},t.prototype.$activatePluginInPluginHost=function(e){return this._activatePlugin(e).then(function(){return null})},t=__decorate([r.Remotable.PluginHostContext("PluginHostPluginService")],t)}(o.AbstractPluginService);t.PluginHostPluginService=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/common/abstractRemoteTelemetryService",["require","exports","vs/platform/telemetry/common/abstractTelemetryService","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread"],function(e,t,n,i,r){var o=function(){function e(e){this._telemetryService=e}return e.prototype._handleRemoteTelemetryEvent=function(e,t){this._telemetryService.publicLog(e,t)},e.prototype.getTelemetryInfo=function(){return this._telemetryService.getTelemetryInfo()},e=__decorate([r.Remotable.MainContext("RemoteTelemetryServiceHelper"),__param(0,i.ITelemetryService)],e)}();t.RemoteTelemetryServiceHelper=o;var s=function(e){function t(t){e.call(this),this._proxy=t.getRemotable(o)}return __extends(t,e),t.prototype.getTelemetryInfo=function(){return this._proxy.getTelemetryInfo()},t.prototype.addTelemetryAppender=function(e){throw new Error("Telemetry appenders are not supported in this execution envirnoment")},t.prototype.handleEvent=function(e,t){this._proxy._handleRemoteTelemetryEvent(e,t)},t}(n.AbstractTelemetryService);t.AbstractRemoteTelemetryService=s}),define("vs/platform/thread/common/threadService",["require","exports","vs/platform/platform","vs/base/common/winjs.base","./thread"],function(e,t,n,i,r){function o(e,t){for(var n in e)if(e[n]===t)return n;throw new Error("Member not found in prototype")}function s(e){var n=e[t.THREAD_SERVICE_PROPERTY_NAME];if(!n)throw new Error("Objects that use thread attributes must be instantiated with the thread service");return n}function a(e,t){var n=o(e.prototype,t);e.prototype[n]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];return s(this).MainThread(this,n,t,e)}}function c(e,t,n,a){void 0===a&&(a=r.ThreadAffinity.None);var c,u=o(e.prototype,t);"function"==typeof n?c=n:"undefined"!=typeof n&&(a=n),e.prototype[u]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(c){var r=this,o=c.call(r);return i.TPromise.is(o)||(o=i.TPromise.as(o)),o.then(function(){return s(r).OneWorker(r,u,t,e,a)})}return s(this).OneWorker(this,u,t,e,a)}}function u(e,t){var n=o(e.prototype,t);e.prototype[n]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];return s(this).AllWorkers(this,n,t,e)}}function l(e,t){var n=o(e.prototype,t);e.prototype[n]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];return s(this).Everywhere(this,n,t,e)}}function d(e){var i=n.Registry.as(t.Extensions.SynchronizableObjects);i.register(e)}function h(){var e=n.Registry.as(t.Extensions.SynchronizableObjects);return e.read()}t.THREAD_SERVICE_PROPERTY_NAME="__$$__threadService",t.MainThreadAttr=a,t.OneWorkerAttr=c,t.AllWorkersAttr=u,t.EverywhereAttr=l;var p=function(){function e(){this._list=[],this._list=[]}return e.prototype.register=function(e){this._list.push(e)},e.prototype.read=function(){return this._list},e}();t.Extensions={SynchronizableObjects:"SynchronizableObjects"},n.Registry.add(t.Extensions.SynchronizableObjects,new p),t.registerThreadSynchronizableObject=d,t.readThreadSynchronizableObjects=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/modes/abstractMode",["require","exports","vs/base/common/eventEmitter","vs/editor/common/modes/modesFilters","vs/editor/common/modes/nullMode","vs/editor/common/modes/supports","vs/base/common/winjs.base","vs/platform/instantiation/common/instantiation","vs/platform/thread/common/thread","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e){return void 0===e&&(e=""),r.NullMode.createWordRegExp(e)}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n={codeLensSupport:!1,tokenizationSupport:!1,occurrencesSupport:!1,declarationSupport:!1,typeDeclarationSupport:!1,navigateTypesSupport:!1,referenceSupport:!1,suggestSupport:!1,parameterHintsSupport:!1,extraInfoSupport:!1,outlineSupport:!1,logicalSelectionSupport:!1,formattingSupport:!1,inplaceReplaceSupport:!1,diffSupport:!1,dirtyDiffSupport:!1,emitOutputSupport:!1,linkSupport:!1,configSupport:!1,electricCharacterSupport:!1,commentsSupport:!1,characterPairSupport:!1,tokenTypeClassificationSupport:!1,quickFixSupport:!1,onEnterSupport:!1};return e.forEach(function(e){return n[e]=!0}),n}t.createWordRegExp=d;var p=function(){function t(e,t,i){this._eventEmitter=new n.EventEmitter,this._instantiationService=t,this._threadService=i,this._descriptor=e,this._options=null,this.autoValidateDelay=500,this.occurrencesSupport=this,this.suggestSupport=this,this.inplaceReplaceSupport=this,this.diffSupport=this,this.dirtyDiffSupport=this,this.linkSupport=this,this.configSupport=this,this.commentsSupport=this,this.tokenTypeClassificationSupport=this,this._workerPiecePromise=null,this._simplifiedMode=null}return t.prototype.getId=function(){return this._descriptor.id},t.prototype.creationDone=function(){this._threadService.isInMainThread&&this._pickAWorkerToValidate()},t.prototype.toSimplifiedMode=function(){return this._simplifiedMode||(this._simplifiedMode=new f(this)),this._simplifiedMode},t.prototype._getOrCreateWorker=function(){var e=this;if(!this._workerPiecePromise){var n=this._getWorkerDescriptor();this._workerPiecePromise=t._loadModule(n.moduleName).then(function(){var t=e._descriptor.workerParticipants;return s.TPromise.join(t.map(function(t){return e._instantiationService.createInstance(t)}))}).then(function(t){return e._instantiationService.createInstance(n,e,t)})}return this._workerPiecePromise},t._loadModule=function(t){return new s.TPromise(function(n,i,r){e([t],n,i)},function(){})},t.prototype._getWorkerDescriptor=function(){return l.createAsyncDescriptor2("vs/editor/common/modes/nullWorker","NullWorker")},t.prototype._worker=function(e){return this._getOrCreateWorker().then(e)},t.prototype._pickAWorkerToValidate=function(){return this._worker(function(e){return e.enableValidator()})},t.prototype.getFilter=function(){return i.StrictPrefix},t.prototype.addSupportChangedListener=function(e){return this._eventEmitter.addListener2("modeSupportChanged",e)},t.prototype.registerSupport=function(e,t){var n=this,i=t(this);return this[e]=i,this._eventEmitter.emit("modeSupportChanged",h(e)),{dispose:function(){n[e]===i&&(delete n[e],n._eventEmitter.emit("modeSupportChanged",h(e)))}}},t.prototype.suggest=function(e,t){return this._worker(function(n){return n.suggest(e,t)})},t.prototype.getTriggerCharacters=function(){return[]},t.prototype.shouldAutotriggerSuggest=function(e,n,i){return o.handleEvent(e,n,function(e,n,r){return e.suggestSupport?e instanceof t?e.shouldAutotriggerSuggestImpl(n,r,i):e.suggestSupport.shouldAutotriggerSuggest(n,r,i):!1})},t.prototype.shouldAutotriggerSuggestImpl=function(e,t,n){return!0},t.prototype.shouldShowEmptySuggestionList=function(){return!0},t.prototype.findOccurrences=function(e,t,n){return void 0===n&&(n=!1),this._worker(function(i){return i.findOccurrences(e,t,n)})},t.prototype.navigateValueSet=function(e,t,n){return this._worker(function(i){return i.inplaceReplaceSupport.navigateValueSet(e,t,n)})},t.prototype.computeDiff=function(e,t,n){return this._worker(function(i){return i.computeDiff(e,t,n)})},t.prototype.computeDirtyDiff=function(e,t){return this._worker(function(n){return n.computeDirtyDiff(e,t)})},t.prototype.computeLinks=function(e){return this._worker(function(t){return t.computeLinks(e)})},t.prototype.configure=function(e){return this._options=e,this._threadService.isInMainThread?this._configureWorkers(e):this._worker(function(t){return t.configure(e)})},t.prototype._configureWorkers=function(e){return this._worker(function(t){return t.configure(e)})},t.prototype.getWordDefinition=function(){return r.NullMode.DEFAULT_WORD_REGEXP},t.prototype.getCommentsConfiguration=function(){return null},t.$_pickAWorkerToValidate=u.OneWorkerAttr(t,t.prototype._pickAWorkerToValidate,c.ThreadAffinity.Group1),t.$suggest=u.OneWorkerAttr(t,t.prototype.suggest),t.$findOccurrences=u.OneWorkerAttr(t,t.prototype.findOccurrences),t.$navigateValueSet=u.OneWorkerAttr(t,t.prototype.navigateValueSet),t.$computeDiff=u.OneWorkerAttr(t,t.prototype.computeDiff),t.$computeDirtyDiff=u.OneWorkerAttr(t,t.prototype.computeDirtyDiff),t.$computeLinks=u.OneWorkerAttr(t,t.prototype.computeLinks),t.$_configureWorkers=u.AllWorkersAttr(t,t.prototype._configureWorkers),t}();t.AbstractMode=p;var f=function(){function e(t){var i=this;this._sourceMode=t,this._eventEmitter=new n.EventEmitter,this._id="vs.editor.modes.simplifiedMode:"+t.getId(),this._assignSupports(),this._sourceMode.addSupportChangedListener&&this._sourceMode.addSupportChangedListener(function(t){if(t.tokenizationSupport||t.electricCharacterSupport||t.commentsSupport||t.characterPairSupport||t.tokenTypeClassificationSupport||t.onEnterSupport){i._assignSupports();var n=e._createModeSupportChangedEvent(t);i._eventEmitter.emit("modeSupportChanged",n)}})}return e.prototype.getId=function(){return this._id},e.prototype.toSimplifiedMode=function(){return this},e.prototype._assignSupports=function(){this.tokenizationSupport=this._sourceMode.tokenizationSupport,this.electricCharacterSupport=this._sourceMode.electricCharacterSupport,this.commentsSupport=this._sourceMode.commentsSupport,this.characterPairSupport=this._sourceMode.characterPairSupport,this.tokenTypeClassificationSupport=this._sourceMode.tokenTypeClassificationSupport,this.onEnterSupport=this._sourceMode.onEnterSupport},e._createModeSupportChangedEvent=function(e){var t={codeLensSupport:!1,tokenizationSupport:e.tokenizationSupport,occurrencesSupport:!1,declarationSupport:!1,typeDeclarationSupport:!1,navigateTypesSupport:!1,referenceSupport:!1,suggestSupport:!1,parameterHintsSupport:!1,extraInfoSupport:!1,outlineSupport:!1,logicalSelectionSupport:!1,formattingSupport:!1,inplaceReplaceSupport:!1,diffSupport:!1,dirtyDiffSupport:!1,emitOutputSupport:!1,linkSupport:!1,configSupport:!1,electricCharacterSupport:e.electricCharacterSupport,commentsSupport:e.commentsSupport,characterPairSupport:e.characterPairSupport,tokenTypeClassificationSupport:e.tokenTypeClassificationSupport,quickFixSupport:!1,onEnterSupport:e.onEnterSupport};return t},e}();t.isDigit=function(){var e="0".charCodeAt(0),t="1".charCodeAt(0),n="2".charCodeAt(0),i="3".charCodeAt(0),r="4".charCodeAt(0),o="5".charCodeAt(0),s="6".charCodeAt(0),a="7".charCodeAt(0),c="8".charCodeAt(0),u="9".charCodeAt(0),l="a".charCodeAt(0),d="b".charCodeAt(0),h="c".charCodeAt(0),p="d".charCodeAt(0),f="e".charCodeAt(0),m="f".charCodeAt(0),v="A".charCodeAt(0),g="B".charCodeAt(0),y="C".charCodeAt(0),_="D".charCodeAt(0),b="E".charCodeAt(0),E="F".charCodeAt(0);return function(S,w){var C=S.charCodeAt(0);switch(w){case 1:return C===e;case 2:return C>=e&&t>=C;case 3:return C>=e&&n>=C;case 4:return C>=e&&i>=C;case 5:return C>=e&&r>=C;case 6:return C>=e&&o>=C;case 7:return C>=e&&s>=C;case 8:return C>=e&&a>=C;case 9:return C>=e&&c>=C;case 10:return C>=e&&u>=C;case 11:return C>=e&&u>=C||C===l||C===v;case 12:return C>=e&&u>=C||C>=l&&d>=C||C>=v&&g>=C;case 13:return C>=e&&u>=C||C>=l&&h>=C||C>=v&&y>=C;case 14:return C>=e&&u>=C||C>=l&&p>=C||C>=v&&_>=C;case 15:return C>=e&&u>=C||C>=l&&f>=C||C>=v&&b>=C;default:return C>=e&&u>=C||C>=l&&m>=C||C>=v&&E>=C}}}();var m=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t=__decorate([__param(1,a.IInstantiationService),__param(2,c.IThreadService)],t)}(p);t.FrankensteinMode=m}),define("vs/editor/common/modes/languageExtensionPoint",["require","exports","vs/nls!vs/editor/common/modes/languageExtensionPoint","vs/base/common/paths","vs/base/common/strings","vs/platform/thread/common/threadService","vs/platform/plugins/common/pluginsRegistry","vs/base/common/mime","vs/base/common/errors","vs/platform/instantiation/common/descriptors","vs/base/common/event"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e){return"undefined"==typeof e?!0:Array.isArray(e)?e.every(function(e){return"string"==typeof e}):!1}function h(e,t){return e?"string"!=typeof e.id?(t.error(n.localize(9,null,"id")),!1):d(e.extensions)?d(e.filenames)?"undefined"!=typeof e.firstLine&&"string"!=typeof e.firstLine?(t.error(n.localize(12,null,"firstLine")),!1):"undefined"!=typeof e.configuration&&"string"!=typeof e.configuration?(t.error(n.localize(13,null,"configuration")),!1):d(e.aliases)?d(e.mimetypes)?!0:(t.error(n.localize(15,null,"mimetypes")),!1):(t.error(n.localize(14,null,"aliases")),!1):(t.error(n.localize(11,null,"filenames")),!1):(t.error(n.localize(10,null,"extensions")),!1):(t.error(n.localize(8,null,p.name)),!1)}var p=s.PluginsRegistry.registerExtensionPoint("languages",{description:n.localize(0,null),type:"array","default":[{id:"",aliases:[],extensions:[]}],items:{type:"object","default":{id:"",extensions:[]},properties:{id:{description:n.localize(1,null),type:"string"},aliases:{description:n.localize(2,null),type:"array",items:{type:"string"}},extensions:{description:n.localize(3,null),"default":[".foo"],type:"array",items:{type:"string"}},filenames:{description:n.localize(4,null),type:"array",items:{type:"string"}},mimetypes:{description:n.localize(5,null),type:"array",items:{type:"string"}},firstLine:{description:n.localize(6,null),type:"string"},configuration:{description:n.localize(7,null),type:"string"}}}}),f=Object.prototype.hasOwnProperty,m=function(){function e(){this._onDidAddMode=new l.Emitter,this.onDidAddMode=this._onDidAddMode.event,this.knownModeIds={},this.mime2LanguageId={},this.name2LanguageId={},this.id2Name={},this.name2Extensions={},this.compatModes={},this.lowerName2Id={},this.id2ConfigurationFiles={},this._isRegisteredWithThreadService=!1}return e.prototype.creationDone=function(){this._isRegisteredWithThreadService=!0},e.prototype.getId=function(){return"LanguageExtensionPointHandler"},e.prototype.getSerializableState=function(){return{knownModeIds:this.knownModeIds,mime2LanguageId:this.mime2LanguageId,name2LanguageId:this.name2LanguageId,name2Extensions:this.name2Extensions,id2Name:this.id2Name,compatModes:this.compatModes,lowerName2Id:this.lowerName2Id}},e.prototype.setData=function(e){this.knownModeIds=e.knownModeIds,this.mime2LanguageId=e.mime2LanguageId,this.name2LanguageId=e.name2LanguageId,this.name2Extensions=e.name2Extensions,this.id2Name=e.id2Name,this.compatModes=e.compatModes,this.lowerName2Id=e.lowerName2Id},e.prototype.registerCompatMode=function(e){this._onLanguage({id:e.id,extensions:e.extensions,filenames:e.filenames,firstLine:e.firstLine,aliases:e.aliases,mimetypes:e.mimetypes}),this.compatModes[e.id]=u.createAsyncDescriptor1(e.moduleId,e.ctorName)},e.prototype._handleLanguagesExtensionPointUsers=function(e){for(var t=[],r=0,o=e.length;o>r;r++){var s=e[r];if(Array.isArray(s.value))for(var a=0,c=s.value.length;c>a;a++)h(s.value[a],s.collector)&&t.push({id:s.value[a].id,extensions:s.value[a].extensions,filenames:s.value[a].filenames,firstLine:s.value[a].firstLine,aliases:s.value[a].aliases,mimetypes:s.value[a].mimetypes,configuration:s.value[a].configuration?i.join(s.description.extensionFolderPath,s.value[a].configuration):s.value[a].configuration});else s.collector.error(n.localize(16,null,p.name))}this._isRegisteredWithThreadService?this._onLanguagesEverywhere(t):this._onLanguagesImpl(t)},e.prototype._onLanguagesEverywhere=function(e){this._onLanguagesImpl(e)},e.prototype._onLanguagesImpl=function(e){for(var t=0;t<e.length;t++)this._onLanguage(e[t])},e.prototype._setMime2LanguageId=function(e,t){this.mime2LanguageId[e]&&this.mime2LanguageId[e]!==t&&console.warn("Overwriting mime <<"+e+">> to now point to modeId <<"+t+">>"),this.mime2LanguageId[e]=t},e.prototype.registerLanguage=function(e){this._onLanguage(e)},e.prototype._onLanguage=function(e){this.knownModeIds[e.id]=!0;var t=null;if("undefined"!=typeof e.mimetypes&&Array.isArray(e.mimetypes))for(var n=0;n<e.mimetypes.length;n++)t||(t=e.mimetypes[n]),this.mime2LanguageId[e.mimetypes[n]]=e.id;if(t||(t="text/x-"+e.id,this.mime2LanguageId[t]=e.id),"undefined"!=typeof e.extensions&&Array.isArray(e.extensions))for(var n=0;n<e.extensions.length;n++)a.registerTextMimeByFilename(e.extensions[n],t);if("undefined"!=typeof e.filenames&&Array.isArray(e.filenames))for(var n=0;n<e.filenames.length;n++)a.registerTextMimeByFilename(e.filenames[n],t);
if("string"==typeof e.firstLine&&e.firstLine.length>0){var i=e.firstLine;"^"!==i.charAt(0)&&(i="^"+i);try{var o=new RegExp(i);r.regExpLeadsToEndlessLoop(o)||a.registerTextMimeByFirstLine(o,t)}catch(s){c.onUnexpectedError(s)}}var u=null;if("undefined"!=typeof e.aliases&&Array.isArray(e.aliases))for(var n=0;n<e.aliases.length;n++)e.aliases[n]&&0!==e.aliases[n].length&&(u||(u=e.aliases[n],this.name2LanguageId[e.aliases[n]]=e.id,this.name2Extensions[e.aliases[n]]=e.extensions),this.lowerName2Id[e.aliases[n].toLowerCase()]=e.id);this.id2Name[e.id]=u||"","string"==typeof e.configuration&&(this.id2ConfigurationFiles[e.id]=this.id2ConfigurationFiles[e.id]||[],this.id2ConfigurationFiles[e.id].push(e.configuration)),this._onDidAddMode.fire(e.id)},e.prototype.isRegisteredMode=function(e){return f.call(this.mime2LanguageId,e)?!0:f.call(this.knownModeIds,e)},e.prototype.getRegisteredModes=function(){return Object.keys(this.knownModeIds)},e.prototype.getRegisteredMimetypes=function(){return Object.keys(this.mime2LanguageId)},e.prototype.getRegisteredLanguageNames=function(){return Object.keys(this.name2LanguageId)},e.prototype.getLanguageName=function(e){return this.id2Name[e]||null},e.prototype.getModeIdForLanguageNameLowercase=function(e){return this.lowerName2Id[e]||null},e.prototype.getConfigurationFiles=function(e){return this.id2ConfigurationFiles[e]||[]},e.prototype.getMimeForMode=function(e){for(var t in this.mime2LanguageId)if(this.mime2LanguageId.hasOwnProperty(t)){var n=this.mime2LanguageId[t];if(n===e)return t}return null},e.prototype.extractModeIds=function(e){var t=this;return e?e.split(",").map(function(e){return e.trim()}).map(function(e){return t.mime2LanguageId[e]||e}).filter(function(e){return t.knownModeIds[e]}):[]},e.prototype.getModeIdsFromLanguageName=function(e){return e&&f.call(this.name2LanguageId,e)?[this.name2LanguageId[e]]:[]},e.prototype.getModeIdsFromFilenameOrFirstLine=function(e,t){if(!e&&!t)return[];var n=a.guessMimeTypes(e,t);return this.extractModeIds(n.join(","))},e.prototype.getCompatMode=function(e){return this.compatModes[e]||null},e.prototype.getExtensions=function(e){return this.name2Extensions[e]},e.$_onLanguagesEverywhere=o.EverywhereAttr(e,e.prototype._onLanguagesEverywhere),e}(),v=new m;o.registerThreadSynchronizableObject(v),p.setHandler(function(e){v._handleLanguagesExtensionPointUsers(e)}),t.LanguageExtensions=v}),define("vs/editor/common/modes/modesRegistry",["require","exports","vs/editor/common/modes/languageExtensionPoint","vs/base/common/strings","vs/platform/platform","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o){function s(e){h.registerMode(e)}function a(e,t,n){h.registerWorkerParticipant(e,o.createAsyncDescriptor0(t,n))}function c(e,t){p[e]=(p[e]||[]).concat(t)}function u(e,t,n){var i=f[e];i||(f[e]=i={}),i[t]=n}function l(e,t){var n=e.getWordAtPosition(t),r=n?n.word.substring(0,t.column-n.startColumn):"",o={currentWord:r,suggestions:[]},s=null;if(0===r.length){if(t.column>1){var a=e.getValueInRange({startLineNumber:t.lineNumber,startColumn:t.column-1,endLineNumber:t.lineNumber,endColumn:t.column});if(0!==a.trim().length)return o}}else{var c=r.toLowerCase();s=function(e){return i.startsWith(e.label.toLowerCase(),c)}}var u=e.getMode().getId(),l=[],d=f[u];if(d)for(var h in d)l=l.concat(d[h]);var m=p[u];return m&&(l=l.concat(m)),o.suggestions=s?l.filter(s):l,o}t.Extensions={EditorModes:"editor.modes"};var d=function(){function e(){this.workerParticipants=[]}return e.prototype.registerWorkerParticipant=function(e,t){this.workerParticipants.push({modeId:e,descriptor:t})},e.prototype._getAllWorkerParticipants=function(){return this.workerParticipants},e.prototype._setWorkerParticipants=function(e){this.workerParticipants=e},e.prototype.getWorkerParticipants=function(e){return this.workerParticipants.filter(function(t){return t.modeId===e}).map(function(e){return e.descriptor})},e.prototype.isRegisteredMode=function(e){return n.LanguageExtensions.isRegisteredMode(e)},e.prototype.getRegisteredModes=function(){return n.LanguageExtensions.getRegisteredModes()},e.prototype.getRegisteredMimetypes=function(){return n.LanguageExtensions.getRegisteredMimetypes()},e.prototype.getRegisteredLanguageNames=function(){return n.LanguageExtensions.getRegisteredLanguageNames()},e.prototype.getExtensions=function(e){return n.LanguageExtensions.getExtensions(e)},e.prototype.getMimeForMode=function(e){return n.LanguageExtensions.getMimeForMode(e)},e.prototype.getLanguageName=function(e){return n.LanguageExtensions.getLanguageName(e)},e.prototype.getModeIdForLanguageName=function(e){return n.LanguageExtensions.getModeIdForLanguageNameLowercase(e)},e.prototype.registerMode=function(e){n.LanguageExtensions.registerCompatMode(e)},e.prototype.getModeId=function(e){var t=n.LanguageExtensions.extractModeIds(e);return t.length>0?t[0]:null},e}(),h=new d;r.Registry.add(t.Extensions.EditorModes,h),t.registerMode=s,t.registerWorkerParticipant=a;var p=Object.create(null),f=Object.create(null);t.registerDefaultSnippets=c,t.registerSnippets=u,t.getSnippets=l}),define("vs/editor/common/modes/monarch/monarchDefinition",["require","exports","vs/base/common/winjs.base","vs/editor/common/modes/abstractMode"],function(e,t,n,i){function r(e){return{commentsConfiguration:{lineCommentTokens:[e.lineComment],blockCommentStartToken:e.blockCommentStart,blockCommentEndToken:e.blockCommentEnd}}}function o(e){return{brackets:e.standardBrackets,regexBrackets:e.enhancedBrackets,caseInsensitive:e.ignoreCase,embeddedElectricCharacters:e.outdentTriggers.split("")}}function s(e){return{wordDefinition:e.wordDefinition}}function a(e){return{autoClosingPairs:e.autoClosingPairs}}function c(e,t,n,i){var r=n.suggestSupport.snippets;return r&&0!==r.length?(i||(i=[]),i.push({currentWord:e.getWordUntilPosition(t).word,suggestions:r.slice(0)}),i):i}function u(e){return{brackets:e.standardBrackets}}function l(e,t,r){return r.suggestSupport.textualCompletions&&t instanceof i.AbstractMode?{triggerCharacters:r.suggestSupport.triggerCharacters,disableAutoTrigger:r.suggestSupport.disableAutoTrigger,excludeTokens:[],suggest:function(e,n){return t.suggest(e,n)},composeSuggest:function(t,i,o){return n.TPromise.as(c(e.getModel(t),i,r,o))}}:{triggerCharacters:r.suggestSupport.triggerCharacters,disableAutoTrigger:r.suggestSupport.disableAutoTrigger,excludeTokens:[],suggest:function(t,i){return n.TPromise.as(c(e.getModel(t),i,r,null))},composeSuggest:function(e,t,i){return n.TPromise.as(i)}}}t.createCommentsSupport=r,t.createBracketElectricCharacterContribution=o,t.createTokenTypeClassificationSupportContribution=s,t.createCharacterPairContribution=a,t.createOnEnterSupportOptions=u,t.createSuggestSupport=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/monarch/monarchLexer",["require","exports","vs/editor/common/modes/abstractState","vs/editor/common/modes/lineStream","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/supports","vs/editor/common/modes/monarch/monarchCommon","vs/editor/common/modes","vs/platform/platform"],function(e,t,n,i,r,o,s,a,c){function u(e,t){if(!t)return null;t=s.fixCase(e,t);for(var n=e.brackets,i=0;i<n.length;i++){var r=n[i];if(r.open===t)return{token:r.token,bracketType:a.Bracket.Open};if(r.close===t)return{token:r.token,bracketType:a.Bracket.Close}}return null}function l(e,t,n){return new o.TokenizationSupport(t,{getInitialState:function(){return new h(t,n)},enterNestedMode:function(e){return e instanceof h?e.embeddedEntered:!1},getNestedMode:function(t){var n=t.embeddedMode;if(!d.isRegisteredMode(n))return{mode:e.getMode("text/plain"),missingModePromise:null};var i=e.getMode(n);return i?{mode:i,missingModePromise:null}:{mode:e.getMode("text/plain"),missingModePromise:e.getOrCreateMode(n).then(function(){return null})}},getLeavingNestedModeData:function(e,t){for(var n=t.clone(),r=new i.LineStream(e);!r.eos()&&n.embeddedMode;)n.tokenize(r,!0);if(n.embeddedMode)return null;var o=r.pos();return{nestedModeBuffer:e.substring(0,o),bufferAfterNestedMode:e.substring(o),stateAfterNestedMode:n}}},n.usesEmbedded,!1)}var d=c.Registry.as(r.Extensions.EditorModes),h=function(e){function t(n,i,r,o){e.call(this,n),this.id=t.ID++,this.lexer=i,this.stack=r?r:[i.start],this.embeddedMode=o?o:null,this.embeddedEntered=!1,this.groupActions=null,this.groupMatches=null,this.groupMatched=null,this.groupRule=null}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.lexer,this.stack.slice(0),this.embeddedMode)},t.prototype.equals=function(n){if(!e.prototype.equals.call(this,n))return!1;if(!(n instanceof t))return!1;var i=n;if(this.stack.length!==i.stack.length||this.lexer.name!==i.lexer.name||this.embeddedMode!==i.embeddedMode)return!1;var r;for(r in this.stack)if(this.stack.hasOwnProperty(r)&&this.stack[r]!==i.stack[r])return!1;return!0},t.prototype.tokenize=function(e,t){var n=this.stack.length,i=0,r=this.stack[0];this.embeddedEntered=!1;var o=null,c=null,l=null,h=null,p=null;if(this.groupActions)i=this.groupActions.length,o=this.groupMatches,c=this.groupMatched.shift(),l=this.groupActions.shift(),p=this.groupRule,0===this.groupActions.length&&(this.groupActions=null,this.groupMatches=null,this.groupMatched=null,this.groupRule=null);else{if(e.eos())return{type:""};var f=e.advanceToEOS();e.goBack(f.length);var m=this.lexer.tokenizer[r];if(m||(m=s.findRules(this.lexer,r)),m){p=null;var v,g=e.pos();for(v in m)if(m.hasOwnProperty(v)&&(p=m[v],(0===g||!p.matchOnlyAtLineStart)&&(o=f.match(p.regex)))){c=o[0],l=p.action;break}}else s.throwError(this.lexer,"tokenizer state is not defined: "+r)}for(o||(o=[""],c=""),l||(e.eos()||(o=[e.peek()],c=o[0]),l=this.lexer.defaultToken),e.advance(c.length);l.test;){var y=l.test(c,o,r,e.eos());l=y}var _=null;if("string"==typeof l||Array.isArray(l))_=l;else if(l.group)_=l.group;else if(null!==l.token&&void 0!==l.token){if(_=l.token,l.tokenSubst&&(_=s.substituteMatches(this.lexer,_,c,o,r)),l.nextEmbedded)if("@pop"===l.nextEmbedded)this.embeddedMode||s.throwError(this.lexer,"cannot pop embedded mode if not inside one"),this.embeddedMode=null;else if(this.embeddedMode)s.throwError(this.lexer,"cannot enter embedded mode from within an embedded mode");else{this.embeddedMode=s.substituteMatches(this.lexer,l.nextEmbedded,c,o,r);var b=d.getModeIdForLanguageName(this.embeddedMode);this.embeddedMode&&b&&(this.embeddedMode=b),this.embeddedEntered=!0}if(l.goBack&&e.goBack(l.goBack),l.switchTo&&"string"==typeof l.switchTo){var E=s.substituteMatches(this.lexer,l.switchTo,c,o,r);"@"===E[0]&&(E=E.substr(1)),s.findRules(this.lexer,E)?this.stack[0]=E:s.throwError(this.lexer,"trying to switch to a state '"+E+"' that is undefined in rule: "+p.name),h=null}else if(l.transform&&"function"==typeof l.transform)this.stack=l.transform(this.stack),h=null;else if(l.next)if("@push"===l.next)this.stack.length>=this.lexer.maxStack?s.throwError(this.lexer,"maximum tokenizer stack size reached: ["+this.stack[0]+","+this.stack[1]+",...,"+this.stack[this.stack.length-2]+","+this.stack[this.stack.length-1]+"]"):this.stack.unshift(r);else if("@pop"===l.next)this.stack.length<=1?s.throwError(this.lexer,"trying to pop an empty stack in rule: "+p.name):this.stack.shift();else if("@popall"===l.next)this.stack.length>1&&(this.stack=[this.stack[this.stack.length-1]]);else{var E=s.substituteMatches(this.lexer,l.next,c,o,r);"@"===E[0]&&(E=E.substr(1)),s.findRules(this.lexer,E)?this.stack.unshift(E):s.throwError(this.lexer,"trying to set a next state '"+E+"' that is undefined in rule: "+p.name)}l.log&&"string"==typeof l.log&&s.log(this.lexer,this.lexer.displayName+": "+s.substituteMatches(this.lexer,l.log,c,o,r))}if(null===_&&(s.throwError(this.lexer,"lexer rule has no well-defined action in rule: "+p.name),_=this.lexer.defaultToken),Array.isArray(_)){this.groupActions&&this.groupActions.length>0&&s.throwError(this.lexer,"groups cannot be nested: "+p.name),o.length!==_.length+1&&s.throwError(this.lexer,"matched number of groups does not match the number of actions in rule: "+p.name);for(var S=0,w=1;w<o.length;w++)S+=o[w].length;return S!==c.length&&s.throwError(this.lexer,"with groups, all characters should be matched in consecutive groups in rule: "+p.name),this.groupMatches=o,this.groupMatched=o.slice(1),this.groupActions=_.slice(0),this.groupRule=p,e.goBack(c.length),this.tokenize(e)}if("@rematch"===_&&(e.goBack(c.length),c="",o=null,_=""),0===c.length)if(n!==this.stack.length||r!==this.stack[0]||(this.groupActions?this.groupActions.length:0)!==i){if(!t)return this.tokenize(e)}else s.throwError(this.lexer,"no progress in tokenizer in rule: "+p.name),e.advanceToEOS();if(0===_.indexOf("@brackets")){var C=_.substr("@brackets".length),T=u(this.lexer,c);return T||(s.throwError(this.lexer,"@brackets token returned but no bracket defined as: "+c),T={token:"",bracketType:a.Bracket.None}),{type:s.sanitize(T.token+C),bracket:T.bracketType}}var I=""===_?"":_+this.lexer.tokenPostfix;return{type:s.sanitize(I),bracket:l.bracket}},t.ID=0,t}(n.AbstractState);t.MonarchLexer=h,t.createTokenizationSupport=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/editor/common/modes/monarch/monarch",["require","exports","vs/editor/common/modes/abstractMode","vs/editor/common/modes/supports","vs/editor/common/modes/monarch/monarchDefinition","vs/editor/common/modes/monarch/monarchLexer","vs/editor/common/modes/supports/onEnter"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,a,c,u,l){e.call(this,t,a,c),this.tokenizationSupport=o.createTokenizationSupport(u,this,n),this.electricCharacterSupport=new i.BracketElectricCharacterSupport(this,r.createBracketElectricCharacterContribution(n)),this.commentsSupport=new i.CommentsSupport(r.createCommentsSupport(n)),this.tokenTypeClassificationSupport=new i.TokenTypeClassificationSupport(r.createTokenTypeClassificationSupportContribution(n)),this.characterPairSupport=new i.CharacterPairSupport(this,r.createCharacterPairContribution(n)),this.suggestSupport=new i.ComposableSuggestSupport(this,r.createSuggestSupport(l,this,n)),this.onEnterSupport=new s.OnEnterSupport(this.getId(),r.createOnEnterSupportOptions(n))}return __extends(t,e),t}(n.AbstractMode);t.MonarchMode=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/common/services/modeServiceImpl",["require","exports","vs/base/common/winjs.base","vs/editor/common/services/modeService","vs/editor/common/modes/supports","vs/editor/common/modes/abstractMode","vs/editor/common/modes/languageExtensionPoint","vs/base/common/errors","vs/platform/thread/common/thread","vs/base/common/objects","vs/editor/common/modes/monarch/monarchDefinition","vs/editor/common/modes/monarch/monarchLexer","vs/editor/common/modes/monarch/monarchCompile","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/supports/onEnter","vs/base/common/lifecycle"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(){function e(e,t){this.serviceId=i.IModeService,this._threadService=e,this._pluginService=t,this._activationPromises={},this._instantiatedModes={},this._frankensteinModes={},this._config={}}return e.prototype.getConfigurationForMode=function(e){return this._config[e]||{}},e.prototype.configureMode=function(e,t){var n=this.getModeId(e);n&&this.configureModeById(n,t)},e.prototype.configureModeById=function(e,t){var n=this._config[e]||{},i=u.mixin(u.clone(n),t);if(!u.equals(n,i)){this._config[e]=i;var r=this.getMode(e);r&&r.configSupport&&r.configSupport.configure(this.getConfigurationForMode(e))}},e.prototype.configureAllModes=function(e){var t=this;if(e){var n=p.Registry.as(f.Extensions.EditorModes),i=n.getRegisteredModes();i.forEach(function(n){var i=e[n];t.configureModeById(n,i)})}},e.prototype.lookup=function(e){for(var t=[],n=s.LanguageExtensions.extractModeIds(e),i=0;i<n.length;i++){var r=n[i];t.push({modeId:r,isInstantiated:this._instantiatedModes.hasOwnProperty(r)})}return t},e.prototype.getMode=function(e){for(var t=s.LanguageExtensions.extractModeIds(e),n=!1,i=0;i<t.length;i++){if(this._instantiatedModes.hasOwnProperty(t[i]))return this._instantiatedModes[t[i]];n=n||"plaintext"===t[i]}if(n){var r=null;return this.getOrCreateMode(e).then(function(e){r=e}).done(null,a.onUnexpectedError),r}},e.prototype.getModeId=function(e){var t=s.LanguageExtensions.extractModeIds(e);return t.length>0?t[0]:null},e.prototype.getModeIdByLanguageName=function(e){var t=s.LanguageExtensions.getModeIdsFromLanguageName(e);return t.length>0?t[0]:null},e.prototype.getModeIdByFilenameOrFirstLine=function(e,t){var n=s.LanguageExtensions.getModeIdsFromFilenameOrFirstLine(e,t);return n.length>0?n[0]:null},e.prototype.getOrCreateMode=function(e){var t=this;return this._pluginService.onReady().then(function(){var n=t.getModeId(e);return t._getOrCreateMode(n||"plaintext")})},e.prototype.getOrCreateModeByLanguageName=function(e){var t=this;return this._pluginService.onReady().then(function(){var n=t.getModeIdByLanguageName(e);return t._getOrCreateMode(n||"plaintext")})},e.prototype.getOrCreateModeByFilenameOrFirstLine=function(e,t){var n=this;return this._pluginService.onReady().then(function(){var i=n.getModeIdByFilenameOrFirstLine(e,t);return n._getOrCreateMode(i||"plaintext")})},e.prototype._getOrCreateMode=function(e){var t=this;if(this._instantiatedModes.hasOwnProperty(e))return n.TPromise.as(this._instantiatedModes[e]);if(this._activationPromises.hasOwnProperty(e))return this._activationPromises[e];var i,r,o=new n.TPromise(function(e,t,n){i=e,r=t});return this._activationPromises[e]=o,this._createMode(e).then(function(n){return t._instantiatedModes[e]=n,delete t._activationPromises[e],t._instantiatedModes[e]}).then(i,r),o},e.prototype._createMode=function(e){var t=this,i="onLanguage:"+e,r=s.LanguageExtensions.getCompatMode(e);if(r)return this._pluginService.activateByEvent(i).then(function(n){var i=t._createModeDescriptor(e);return t._threadService.createInstance(r,i)}).then(function(n){return n.configSupport&&n.configSupport.configure(t.getConfigurationForMode(e)),n});var o=this._getOrCreateFrankensteinMode(e);return this._pluginService.activateByEvent(i).done(null,a.onUnexpectedError),n.TPromise.as(o)},e.prototype._getOrCreateFrankensteinMode=function(e){if(!this._frankensteinModes.hasOwnProperty(e)){var t=this._createModeDescriptor(e);this._frankensteinModes[e]=this._threadService.createInstance(o.FrankensteinMode,t)}return this._frankensteinModes[e]},e.prototype._createModeDescriptor=function(e){var t=p.Registry.as(f.Extensions.EditorModes),n=t.getWorkerParticipants(e);return{id:e,workerParticipants:n}},e.prototype.registerModeSupport=function(e,t,n){var i=this._getOrCreateMode(e).then(function(i){return i.registerSupport?i.registerSupport(t,n):(console.warn("Cannot register support "+t+" on mode "+e+" because it is not a Frankenstein mode"),v.empty)});return{dispose:function(){i.done(function(e){return e.dispose()},null)}}},e.prototype.doRegisterMonarchDefinition=function(e,t){var n=this;return v.combinedDispose(this.registerTokenizationSupport(e,function(e){return d.createTokenizationSupport(n,e,t)}),this.registerDeclarativeCommentsSupport(e,l.createCommentsSupport(t)),this.registerDeclarativeElectricCharacterSupport(e,l.createBracketElectricCharacterContribution(t)),this.registerDeclarativeTokenTypeClassificationSupport(e,l.createTokenTypeClassificationSupportContribution(t)),this.registerDeclarativeCharacterPairSupport(e,l.createCharacterPairContribution(t)),this.registerDeclarativeOnEnterSupport(e,l.createOnEnterSupportOptions(t)))},e.prototype.registerMonarchDefinition=function(e,t){var n=h.compile(u.clone(t));return this.doRegisterMonarchDefinition(e,n)},e.prototype.registerDeclarativeCharacterPairSupport=function(e,t){return this.registerModeSupport(e,"characterPairSupport",function(e){return new r.CharacterPairSupport(e,t)})},e.prototype.registerCodeLensSupport=function(e,t){return this.registerModeSupport(e,"codeLensSupport",function(e){return t})},e.prototype.registerDeclarativeCommentsSupport=function(e,t){return this.registerModeSupport(e,"commentsSupport",function(e){return new r.CommentsSupport(t)})},e.prototype.registerDeclarativeDeclarationSupport=function(e,t){return this.registerModeSupport(e,"declarationSupport",function(e){return new r.DeclarationSupport(e,t)})},e.prototype.registerDeclarativeElectricCharacterSupport=function(e,t){return this.registerModeSupport(e,"electricCharacterSupport",function(e){return new r.BracketElectricCharacterSupport(e,t)})},e.prototype.registerExtraInfoSupport=function(e,t){return this.registerModeSupport(e,"extraInfoSupport",function(e){return t})},e.prototype.registerFormattingSupport=function(e,t){return this.registerModeSupport(e,"formattingSupport",function(e){return t})},e.prototype.registerInplaceReplaceSupport=function(e,t){return this.registerModeSupport(e,"inplaceReplaceSupport",function(e){return t})},e.prototype.registerOccurrencesSupport=function(e,t){return this.registerModeSupport(e,"occurrencesSupport",function(e){return t})},e.prototype.registerOutlineSupport=function(e,t){return this.registerModeSupport(e,"outlineSupport",function(e){return t})},e.prototype.registerDeclarativeParameterHintsSupport=function(e,t){return this.registerModeSupport(e,"parameterHintsSupport",function(e){return new r.ParameterHintsSupport(e,t)})},e.prototype.registerQuickFixSupport=function(e,t){return this.registerModeSupport(e,"quickFixSupport",function(e){return t})},e.prototype.registerDeclarativeReferenceSupport=function(e,t){return this.registerModeSupport(e,"referenceSupport",function(e){return new r.ReferenceSupport(e,t)})},e.prototype.registerRenameSupport=function(e,t){return this.registerModeSupport(e,"renameSupport",function(e){return t})},e.prototype.registerDeclarativeSuggestSupport=function(e,t){return this.registerModeSupport(e,"suggestSupport",function(e){return new r.SuggestSupport(e,t)})},e.prototype.registerTokenizationSupport=function(e,t){return this.registerModeSupport(e,"tokenizationSupport",t)},e.prototype.registerDeclarativeTokenTypeClassificationSupport=function(e,t){return this.registerModeSupport(e,"tokenTypeClassificationSupport",function(e){return new r.TokenTypeClassificationSupport(t)})},e.prototype.registerDeclarativeOnEnterSupport=function(e,t){return this.registerModeSupport(e,"onEnterSupport",function(n){return new m.OnEnterSupport(e,t)})},e}();t.ModeServiceImpl=g;var y=function(e){function t(t,n,i){e.call(this,t,n),this._modelService=i,this._hasInitialized=!1}return __extends(t,e),t.prototype._getModeServiceWorkerHelper=function(){var e=this._threadService.getRemotable(_);if(!this._hasInitialized){this._hasInitialized=!0;var t=p.Registry.as(f.Extensions.EditorModes);e.initialize(t._getAllWorkerParticipants())}return e},t.prototype.configureModeById=function(t,n){this._getModeServiceWorkerHelper().configureModeById(t,n),e.prototype.configureModeById.call(this,t,n)},t.prototype._createMode=function(t){return this._getModeServiceWorkerHelper().instantiateMode(t),e.prototype._createMode.call(this,t)},t.prototype.registerModeSupport=function(t,n,i){return this._getModeServiceWorkerHelper().instantiateMode(t),e.prototype.registerModeSupport.call(this,t,n,i)},t.prototype.registerMonarchDefinition=function(t,n){var i=this;this._getModeServiceWorkerHelper().registerMonarchDefinition(t,n);var o=h.compile(u.clone(n));return v.combinedDispose(e.prototype.doRegisterMonarchDefinition.call(this,t,o),this.registerModeSupport(t,"suggestSupport",function(e){return new r.ComposableSuggestSupport(e,l.createSuggestSupport(i._modelService,e,o))}))},t}(g);t.MainThreadModeServiceImpl=y;var _=function(){function e(e){this._modeService=e}return e.prototype.initialize=function(e){var t=p.Registry.as(f.Extensions.EditorModes);t._setWorkerParticipants(e)},e.prototype.instantiateMode=function(e){this._modeService.getOrCreateMode(e).done(null,a.onUnexpectedError)},e.prototype.configureModeById=function(e,t){this._modeService.configureMode(e,t)},e.prototype.registerMonarchDefinition=function(e,t){this._modeService.registerMonarchDefinition(e,t)},e=__decorate([c.Remotable.WorkerContext("ModeServiceWorkerHelper",c.ThreadAffinity.All),__param(0,i.IModeService)],e)}();t.ModeServiceWorkerHelper=_}),define("vs/editor/contrib/suggest/browser/suggestModel",["require","exports","vs/base/common/winjs.base","vs/base/common/event","vs/base/common/errors","vs/base/common/strings","vs/editor/common/modes/modesRegistry","vs/editor/common/editorCommon","vs/editor/contrib/snippet/common/snippet","vs/base/common/lifecycle","../common/suggest"],function(e,t,n,i,r,o,s,a,c,u,l){var d,h=function(){function e(e,t){this.auto=t;var n=e.getModel(),i=e.getPosition(),r=n.getLineContent(i.lineNumber),o=n.getWordAtPosition(i);if(o?(this.wordBefore=r.substring(o.startColumn-1,i.column-1),this.wordAfter=r.substring(i.column-1,o.endColumn-1)):(this.wordBefore="",this.wordAfter=""),this.lineNumber=i.lineNumber,this.column=i.column,this.lineContentBefore=r.substr(0,i.column-1),this.lineContentAfter=r.substr(i.column-1),this.isInEditableRange=!0,n.hasEditableRange()){var s=n.getEditableRange();s.containsPosition(i)||(this.isInEditableRange=!1)}var a=n.getLineContext(i.lineNumber),c=n.getLineContent(i.lineNumber).charAt(i.column-1),u=l.SuggestRegistry.all(n);this.isAutoTriggerEnabled=u.some(function(e){return e.shouldAutotriggerSuggest(a,i.column-1,c)})}return e.prototype.shouldAutoTrigger=function(){return this.isAutoTriggerEnabled?0===this.wordBefore.length?!1:isNaN(Number(this.wordBefore))?this.wordAfter.length>0?!1:!0:!1:!1},e.prototype.isDifferentContext=function(e){return this.lineNumber!==e.lineNumber?!0:e.column<this.column-this.wordBefore.length?!0:o.startsWith(e.lineContentBefore,this.lineContentBefore)&&this.lineContentAfter===e.lineContentAfter?""===e.wordBefore&&e.lineContentBefore!==this.lineContentBefore?!0:!1:!0},e.prototype.shouldRetrigger=function(e){return o.startsWith(this.lineContentBefore,e.lineContentBefore)&&this.lineContentAfter===e.lineContentAfter?this.lineContentBefore.length>e.lineContentBefore.length&&0===this.wordBefore.length?!1:this.auto&&0===e.wordBefore.length?!1:!0:!1},e}();!function(e){e[e.Idle=0]="Idle",e[e.Manual=1]="Manual",e[e.Auto=2]="Auto"}(d||(d={}));var p=function(){function e(e){var t=this;this.editor=e,this._onDidCancel=new i.Emitter,this._onDidTrigger=new i.Emitter,this._onDidSuggest=new i.Emitter,this._onDidAccept=new i.Emitter,this.state=d.Idle,this.triggerAutoSuggestPromise=null,this.requestPromise=null,this.raw=null,this.incomplete=!1,this.context=null,this.toDispose=[],this.toDispose.push(this.editor.addListener2(a.EventType.ConfigurationChanged,function(){return t.onEditorConfigurationChange()})),this.toDispose.push(this.editor.addListener2(a.EventType.CursorSelectionChanged,function(e){return t.onCursorChange(e)})),this.toDispose.push(this.editor.addListener2(a.EventType.ModelChanged,function(){return t.cancel()})),this.onEditorConfigurationChange()}return Object.defineProperty(e.prototype,"onDidCancel",{get:function(){return this._onDidCancel.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidTrigger",{get:function(){return this._onDidTrigger.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidSuggest",{get:function(){return this._onDidSuggest.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidAccept",{get:function(){return this._onDidAccept.event},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.state!==d.Idle;return this.triggerAutoSuggestPromise&&(this.triggerAutoSuggestPromise.cancel(),this.triggerAutoSuggestPromise=null),this.requestPromise&&(this.requestPromise.cancel(),this.requestPromise=null),this.state=d.Idle,this.raw=null,this.incomplete=!1,this.context=null,e||this._onDidCancel.fire({retrigger:t}),n},e.prototype.getRequestPosition=function(){return this.context?{lineNumber:this.context.lineNumber,column:this.context.column}:null},e.prototype.isAutoSuggest=function(){return this.state===d.Auto},e.prototype.onCursorChange=function(e){var t=this;if(!e.selection.isEmpty())return void this.cancel();if("keyboard"!==e.source||""!==e.reason)return void this.cancel();if(l.SuggestRegistry.has(this.editor.getModel())){var i=this.state===d.Idle;if(!i||this.editor.getConfiguration().quickSuggestions){var r=new h(this.editor,!1);i?(this.cancel(),r.shouldAutoTrigger()&&(this.triggerAutoSuggestPromise=n.TPromise.timeout(this.autoSuggestDelay),this.triggerAutoSuggestPromise.then(function(){t.triggerAutoSuggestPromise=null,t.trigger(!0)}))):this.raw&&this.incomplete?this.trigger(this.state===d.Auto,void 0,!0):this.onNewContext(r)}}},e.prototype.trigger=function(e,t,n,i){var o=this;void 0===n&&(n=!1);var a=this.editor.getModel(),c=!!t;if(i=i||l.SuggestRegistry.orderedGroups(a),0!==i.length){var u=new h(this.editor,e);if(u.isInEditableRange){this.cancel(!1,n),this.state=e||c?d.Auto:d.Manual,this._onDidTrigger.fire({auto:this.isAutoSuggest(),characterTriggered:c,retrigger:n}),this.context=u;var p=this.editor.getPosition();this.requestPromise=l.suggest(a,p,t,i).then(function(t){o.requestPromise=null,o.state!==d.Idle&&(o.raw=t.concat([[s.getSnippets(a,p)]]),o.incomplete=t.reduce(function(e,t){return e||t.reduce(function(e,t){return e||t.incomplete},!1)},!1),o.onNewContext(new h(o.editor,e)))}).then(null,r.onUnexpectedError)}}},e.prototype.onNewContext=function(e){return this.context&&this.context.isDifferentContext(e)?void(this.context.shouldRetrigger(e)?this.trigger(this.state===d.Auto,void 0,!0):this.cancel()):void(this.raw&&this._onDidSuggest.fire({suggestions:this.raw,currentWord:e.wordBefore,auto:this.isAutoSuggest()}))},e.prototype.accept=function(e,t,n){return null===this.raw?!1:(this._onDidAccept.fire({snippet:new c.CodeSnippet(e.codeSnippet),overwriteBefore:t+(this.editor.getPosition().column-this.context.column),overwriteAfter:n}),this.cancel(),!0)},e.prototype.onEditorConfigurationChange=function(){this.autoSuggestDelay=this.editor.getConfiguration().quickSuggestionsDelay,(isNaN(this.autoSuggestDelay)||!this.autoSuggestDelay&&0!==this.autoSuggestDelay||this.autoSuggestDelay<0)&&(this.autoSuggestDelay=10)},e.prototype.dispose=function(){this.cancel(!0),this.toDispose=u.disposeAll(this.toDispose)},e}();t.SuggestModel=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/suggest/browser/suggest",["require","exports","vs/nls!vs/editor/contrib/suggest/browser/suggest","vs/base/common/lifecycle","vs/editor/contrib/snippet/common/snippet","./suggestWidget","./suggestModel","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/platform/keybinding/common/keybindingService","vs/editor/contrib/suggest/common/suggest","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){
var g=function(){function e(e,t,n){var i=this;this.editor=e,this.suggestWidgetVisible=t.createKey(f.CONTEXT_SUGGEST_WIDGET_VISIBLE,!1),this.model=new s.SuggestModel(this.editor),this.widget=n.createInstance(o.SuggestWidget,this.editor,this.model),this.triggerCharacterListeners=[],this.toDispose=[],this.toDispose.push(this.widget.onDidVisibilityChange(function(e){return e?i.suggestWidgetVisible.set(!0):i.suggestWidgetVisible.reset()})),this.toDispose.push(e.addListener2(h.EventType.ConfigurationChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(h.EventType.ModelChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(h.EventType.ModelModeChanged,function(){return i.update()})),this.toDispose.push(e.addListener2(h.EventType.ModelModeSupportChanged,function(e){e.suggestSupport&&i.update()})),this.toDispose.push(f.SuggestRegistry.onDidChange(this.update,this)),this.toDispose.push(this.model.onDidAccept(function(e){return r.get(i.editor).run(e.snippet,e.overwriteBefore,e.overwriteAfter)})),this.update()}return e.getSuggestController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose),this.triggerCharacterListeners=i.cAll(this.triggerCharacterListeners),this.widget&&(this.widget.dispose(),this.widget=null),this.model&&(this.model.dispose(),this.model=null)},e.prototype.update=function(){var e=this;if(this.triggerCharacterListeners=i.cAll(this.triggerCharacterListeners),!this.editor.getConfiguration().readOnly&&this.editor.getModel()&&this.editor.getConfiguration().suggestOnTriggerCharacters){var t=f.SuggestRegistry.orderedGroups(this.editor.getModel());if(0!==t.length){var n=Object.create(null);t.forEach(function(e){var t=Object.create(null);e.forEach(function(e){var i=e.getTriggerCharacters();if(i)for(var r=0;r<i.length;r++){var o=i[r],s=t[o];s?s.push(e):(s=[e],t[o]=s,n[o]?n[o].push(s):n[o]=[s])}})}),Object.keys(n).forEach(function(t){e.triggerCharacterListeners.push(e.editor.addTypingListener(t,function(){e.triggerCharacterHandler(t,n[t])}))})}}},e.prototype.triggerCharacterHandler=function(e,t){var n=this.editor.getPosition(),i=this.editor.getModel().getLineContext(n.lineNumber);this.editor.getModel().getMode();t=t.map(function(t){return t.filter(function(t){return t.shouldAutotriggerSuggest(i,n.column-1,e)})}),t.length>0&&this.triggerSuggest(e,t).done(null,a.onUnexpectedError)},e.prototype.triggerSuggest=function(e,t){return this.model.trigger(!1,e,!1,t),this.editor.focus(),c.TPromise.as(!1)},e.prototype.acceptSelectedSuggestion=function(){this.widget&&this.widget.acceptSelectedSuggestion()},e.prototype.hideSuggestWidget=function(){this.widget&&this.widget.cancel()},e.prototype.selectNextSuggestion=function(){this.widget&&this.widget.selectNext()},e.prototype.selectNextPageSuggestion=function(){this.widget&&this.widget.selectNextPage()},e.prototype.selectPrevSuggestion=function(){this.widget&&this.widget.selectPrevious()},e.prototype.selectPrevPageSuggestion=function(){this.widget&&this.widget.selectPreviousPage()},e.ID="editor.contrib.suggestController",e=__decorate([__param(1,p.IKeybindingService),__param(2,m.IInstantiationService)],e)}();t.SuggestController=g;var y=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.isSupported=function(){return f.SuggestRegistry.has(this.editor.getModel())&&!this.editor.getConfiguration().readOnly},t.prototype.run=function(){return g.getSuggestController(this.editor).triggerSuggest()},t.ID="editor.action.triggerSuggest",t=__decorate([__param(2,m.INullService)],t)}(d.EditorAction);t.TriggerSuggestAction=y;var _=l.CommonEditorRegistry.commandWeight(90);l.CommonEditorRegistry.registerEditorAction(new l.EditorActionDescriptor(y,y.ID,n.localize(0,null),{context:l.ContextKey.EditorTextFocus,primary:v.KeyMod.CtrlCmd|v.KeyCode.Space,mac:{primary:v.KeyMod.WinCtrl|v.KeyCode.Space}})),l.CommonEditorRegistry.registerEditorCommand(f.ACCEPT_SELECTED_SUGGESTION_CMD,_,{primary:v.KeyCode.Enter,secondary:[v.KeyCode.Tab]},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.acceptSelectedSuggestion()}),l.CommonEditorRegistry.registerEditorCommand("hideSuggestWidget",_,{primary:v.KeyCode.Escape},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.hideSuggestWidget()}),l.CommonEditorRegistry.registerEditorCommand("selectNextSuggestion",_,{primary:v.KeyCode.DownArrow},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.selectNextSuggestion()}),l.CommonEditorRegistry.registerEditorCommand("selectNextPageSuggestion",_,{primary:v.KeyCode.PageDown},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.selectNextPageSuggestion()}),l.CommonEditorRegistry.registerEditorCommand("selectPrevSuggestion",_,{primary:v.KeyCode.UpArrow},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.selectPrevSuggestion()}),l.CommonEditorRegistry.registerEditorCommand("selectPrevPageSuggestion",_,{primary:v.KeyCode.PageUp},!0,f.CONTEXT_SUGGEST_WIDGET_VISIBLE,function(e,t,n){var i=g.getSuggestController(t);i.selectPrevPageSuggestion()}),u.EditorBrowserRegistry.registerEditorContribution(g)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/languageConfiguration",["require","exports","vs/editor/common/services/modeService","vs/editor/common/modes/languageExtensionPoint","vs/platform/plugins/common/pluginsRegistry","vs/base/node/pfs","vs/base/common/json"],function(e,t,n,i,r,o,s){var a=function(){function e(e){var t=this;this._modeService=e,i.LanguageExtensions.getRegisteredModes().forEach(function(e){return t._handleMode(e)}),i.LanguageExtensions.onDidAddMode(function(e){return t._handleMode(e)})}return e.prototype._handleMode=function(e){var t=this,n="onLanguage:"+e;r.PluginsRegistry.registerOneTimeActivationEventListener(n,function(){var n=i.LanguageExtensions.getConfigurationFiles(e);n.forEach(function(n){return t._handleConfigFile(e,n)})})},e.prototype._handleConfigFile=function(e,t){var n=this;o.readFile(t).then(function(i){var r=[],o=s.parse(i.toString(),r);r.length&&console.error("Errors parsing "+t+": "+r.join("\n")),n._handleConfig(e,o)},function(e){console.error(e)})},e.prototype._handleConfig=function(e,t){if(t.comments){var n=t.comments,i={commentsConfiguration:{}};n.lineComment&&(i.commentsConfiguration.lineCommentTokens=[n.lineComment]),n.blockComment&&(i.commentsConfiguration.blockCommentStartToken=n.blockComment[0],i.commentsConfiguration.blockCommentEndToken=n.blockComment[1]),this._modeService.registerDeclarativeCommentsSupport(e,i)}if(t.brackets){var r=t.brackets,o={};o.brackets=r.map(function(e){var t=e[0],n=e[1];return{open:t,close:n}}),this._modeService.registerDeclarativeOnEnterSupport(e,o);var s={autoClosingPairs:r.map(function(e){var t=e[0],n=e[1];return{open:t,close:n}})};this._modeService.registerDeclarativeCharacterPairSupport(e,s)}this._modeService.registerDeclarativeElectricCharacterSupport(e,{brackets:[{tokenType:"delimiter.curly."+e,open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.square."+e,open:"[",close:"]",isElectric:!0},{tokenType:"delimiter.paren."+e,open:"(",close:")",isElectric:!0}]})},e=__decorate([__param(0,n.IModeService)],e)}();t.LanguageConfigurationFileHandler=a});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/textMate/TMSnippets",["require","exports","vs/nls!vs/editor/node/textMate/TMSnippets","vs/editor/contrib/snippet/common/snippet","vs/base/common/json","vs/editor/common/modes/modesRegistry","vs/base/common/paths","vs/editor/common/services/modelService","vs/platform/plugins/common/pluginsRegistry","vs/editor/common/modes/languageExtensionPoint","vs/base/node/pfs"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e,t){return l.readFile(t).then(function(n){var i=[],s=r.parse(n.toString(),i),a=f.adapt(s);o.registerSnippets(e,t,a)})}t.snippetUpdated=d;var h=c.PluginsRegistry.registerExtensionPoint("snippets",{description:n.localize(0,null),type:"array","default":[{language:"",path:""}],items:{type:"object","default":{language:"{{id}}",path:"./snippets/{{id}}.json."},properties:{language:{description:n.localize(1,null),type:"string"},path:{description:n.localize(2,null),type:"string"}}}}),p=function(){function e(e){var t=this;this._modelService=e,h.setHandler(function(e){for(var n=0;n<e.length;n++)for(var i=e[n].value,r=0;r<i.length;r++)t._withTMSnippetContribution(e[n].description.extensionFolderPath,i[r],e[n].collector)})}return e.prototype._withTMSnippetContribution=function(e,t,i){var r=this;if(!t.language||"string"!=typeof t.language||!u.LanguageExtensions.isRegisteredMode(t.language))return void i.error(n.localize(3,null,h.name,String(t.language)));if(!t.path||"string"!=typeof t.path)return void i.error(n.localize(4,null,h.name,String(t.path)));var o=s.normalize(s.join(e,t.path));0!==o.indexOf(e)&&i.warn(n.localize(5,null,h.name,o,e));var a=t.language;c.PluginsRegistry.registerOneTimeActivationEventListener("onLanguage:"+a,function(){r.registerDefinition(a,o)})},e.prototype.registerDefinition=function(e,t){l.readFile(t).then(function(t){var n=[],i=r.parse(t.toString(),n),s=f.adapt(i);o.registerDefaultSnippets(e,s)})},e=__decorate([__param(0,a.IModelService)],e)}();t.MainProcessTextMateSnippet=p;var f=function(){function e(){}return e.adapt=function(t){var n=Object.keys(t),i=[],r=function(t,n){var r=t.prefix,o=t.body;if(Array.isArray(o)&&(o=o.join("\n")),"string"==typeof r&&"string"==typeof o){var s=e.convertSnippet(o);null!==s&&i.push({type:"snippet",label:r,documentationLabel:t.description||n,codeSnippet:s})}};return n.forEach(function(e){var n=t[e];if(n.body&&n.prefix)r(n,e);else{var i=Object.keys(n);i.forEach(function(e){r(n[e],e)})}}),i},e.convertSnippet=function(e){return i.CodeSnippet.convertExternalSnippet(e,i.ExternalSnippetType.TextMateSnippet)},e}()}),define("vs/languages/css/common/css.contribution",["require","exports","vs/nls!vs/languages/css/common/css.contribution","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/languages/css/common/services/lintRules","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,r,o,s){r.registerMode({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],moduleId:"vs/languages/css/common/css",ctorName:"CSSMode"});var a=i.Registry.as(o.Extensions.Configuration);a.registerConfiguration({id:"css",order:20,title:n.localize(0,null),allOf:[{title:n.localize(1,null),properties:s.getConfigurationProperties("css")}]})}),define("vs/languages/handlebars/common/handlebars.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){n.registerMode({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars"],mimetypes:["text/x-handlebars-template"],moduleId:"vs/languages/handlebars/common/handlebars",ctorName:"HandlebarsMode"})}),define("vs/languages/html/common/html.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){n.registerMode({id:"html",extensions:[".html",".htm",".shtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],moduleId:"vs/languages/html/common/html",ctorName:"HTMLMode"})}),define("vs/languages/javascript/common/javascript.contribution",["require","exports","vs/nls!vs/languages/javascript/common/javascript.contribution","vs/base/common/flags","vs/platform/platform","vs/platform/configuration/common/configurationRegistry","vs/editor/common/modes/modesRegistry","vs/languages/typescript/common/options","vs/base/common/mime"],function(e,t,n,i,r,o,s,a,c){var u=a.javaScriptOptions;if(i.enableTypeScriptServiceModeForJS)c.registerTextMimeByFilename(".js","text/typescript");else{s.registerMode({id:"javascript",extensions:[".js",".es6"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],moduleId:"vs/languages/javascript/common/javascript",ctorName:"JSMode"}),s.registerWorkerParticipant("javascript","vs/languages/typescript/common/participants/filenameSuggestions","FilenameSuggestions");var l=r.Registry.as(o.Extensions.Configuration);l.registerConfiguration({id:"javascript",order:20,type:"object",title:n.localize(0,null),allOf:[{type:"object",title:n.localize(1,null),properties:{"javascript.suggest.alwaysAllWords":{type:"boolean","default":u.suggest.alwaysAllWords,description:n.localize(2,null)},"javascript.suggest.useCodeSnippetsOnMethodSuggest":{type:"boolean","default":u.suggest.useCodeSnippetsOnMethodSuggest,description:n.localize(3,null)}}},{title:n.localize(4,null),type:"object",properties:{"javascript.validate.enable":{type:"boolean","default":!0,description:n.localize(5,null)},"javascript.validate.semanticValidation":{type:"boolean","default":u.validate.semanticValidation,description:n.localize(6,null)},"javascript.validate.syntaxValidation":{type:"boolean","default":u.validate.syntaxValidation,description:n.localize(7,null)}}},{type:"object",title:n.localize(8,null),properties:{"javascript.validate.lint.curlyBracketsMustNotBeOmitted":{"enum":["ignore","warning","error"],"default":u.validate.lint.curlyBracketsMustNotBeOmitted,description:n.localize(9,null)},"javascript.validate.lint.emptyBlocksWithoutComment":{"enum":["ignore","warning","error"],"default":u.validate.lint.emptyBlocksWithoutComment,description:n.localize(10,null)},"javascript.validate.lint.comparisonOperatorsNotStrict":{"enum":["ignore","warning","error"],"default":u.validate.lint.comparisonOperatorsNotStrict,description:n.localize(11,null)},"javascript.validate.lint.missingSemicolon":{"enum":["ignore","warning","error"],"default":u.validate.lint.missingSemicolon,description:n.localize(12,null)},"javascript.validate.lint.unknownTypeOfResults":{"enum":["ignore","warning","error"],"default":u.validate.lint.unknownTypeOfResults,description:n.localize(13,null)},"javascript.validate.lint.semicolonsInsteadOfBlocks":{"enum":["ignore","warning","error"],"default":u.validate.lint.semicolonsInsteadOfBlocks,description:n.localize(14,null)},"javascript.validate.lint.functionsInsideLoops":{"enum":["ignore","warning","error"],"default":u.validate.lint.functionsInsideLoops,description:n.localize(15,null)},"javascript.validate.lint.newOnLowercaseFunctions":{"enum":["ignore","warning","error"],"default":u.validate.lint.newOnLowercaseFunctions,description:n.localize(16,null)},"javascript.validate.lint.tripleSlashReferenceAlike":{"enum":["ignore","warning","error"],"default":u.validate.lint.tripleSlashReferenceAlike,description:n.localize(17,null)},"javascript.validate.lint.unusedVariables":{"enum":["ignore","warning","error"],"default":u.validate.lint.unusedVariables,description:n.localize(18,null)},"javascript.validate.lint.unusedFunctions":{"enum":["ignore","warning","error"],"default":u.validate.lint.unusedFunctions,description:n.localize(19,null)},"javascript.validate.lint.parametersDontMatchSignature":{"enum":["ignore","warning","error"],"default":u.validate.lint.parametersDontMatchSignature,description:n.localize(20,null)},"javascript.validate.lint.redeclaredVariables":{"enum":["ignore","warning","error"],"default":u.validate.lint.redeclaredVariables,description:n.localize(21,null)},"javascript.validate.lint.undeclaredVariables":{"enum":["ignore","warning","error"],"default":u.validate.lint.undeclaredVariables,description:n.localize(22,null)},"javascript.validate.lint.unknownProperty":{"enum":["ignore","warning","error"],"default":u.validate.lint.unknownProperty,description:n.localize(23,null)},"javascript.validate.lint.unknownModule":{"enum":["ignore","warning","error"],"default":u.validate.lint.unknownModule,description:n.localize(24,null)},"javascript.validate.lint.forcedTypeConversion":{"enum":["ignore","warning","error"],"default":u.validate.lint.forcedTypeConversion,description:n.localize(25,null)},"javascript.validate.lint.mixedTypesArithmetics":{"enum":["ignore","warning","error"],"default":u.validate.lint.mixedTypesArithmetics,description:n.localize(26,null)},"javascript.validate.lint.primitivesInInstanceOf":{"enum":["ignore","warning","error"],"default":u.validate.lint.primitivesInInstanceOf,description:n.localize(27,null)},"javascript.validate.lint.newOnReturningFunctions":{"enum":["ignore","warning","error"],"default":u.validate.lint.newOnReturningFunctions,description:n.localize(28,null)}}}]})}}),define("vs/languages/json/common/json.contribution",["require","exports","vs/nls!vs/languages/json/common/json.contribution","vs/platform/configuration/common/configurationRegistry","vs/platform/platform","vs/editor/common/modes/modesRegistry"],function(e,t,n,i,r,o){o.registerMode({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc"],aliases:["JSON","json"],mimetypes:["application/json"],moduleId:"vs/languages/json/common/json",ctorName:"JSONMode"});var s=r.Registry.as(i.Extensions.Configuration);s.registerConfiguration({id:"json",order:20,type:"object",title:n.localize(0,null),properties:{"json.schemas":{type:"array",description:n.localize(1,null),items:{type:"object","default":{fileMatch:["{{/myfile}}"],url:"{{schemaURL}}"},properties:{url:{type:"string","default":"/user.schema.json",description:n.localize(2,null)},fileMatch:{type:"array",items:{type:"string","default":"MyFile.json",description:n.localize(3,null)},minItems:1,description:n.localize(4,null)},schema:{type:"object",description:n.localize(5,null)}}}}}})}),define("vs/languages/less/common/less.contribution",["require","exports","vs/platform/platform","vs/nls!vs/languages/less/common/less.contribution","vs/languages/css/common/services/lintRules","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,r,o,s){o.registerMode({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],moduleId:"vs/languages/less/common/less",ctorName:"LESSMode"});var a=n.Registry.as(s.Extensions.Configuration);a.registerConfiguration({id:"less",order:22,type:"object",title:i.localize(0,null),allOf:[{title:i.localize(1,null),properties:r.getConfigurationProperties("less")}]})}),define("vs/languages/markdown/common/markdown.contribution",["require","exports","vs/nls!vs/languages/markdown/common/markdown.contribution","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/platform/platform"],function(e,t,n,i,r,o){i.registerMode({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],mimetypes:["text/x-web-markdown"],moduleId:"vs/languages/markdown/common/markdown",ctorName:"MarkdownMode"});var s=o.Registry.as(r.Extensions.Configuration);s.registerConfiguration({id:"markdown",order:20,type:"object",title:n.localize(0,null),properties:{"markdown.styles":{type:"array",description:n.localize(1,null),items:{type:"string"}}}})}),define("vs/languages/php/common/php.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){n.registerMode({id:"php",extensions:[".php",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],moduleId:"vs/languages/php/common/php",ctorName:"PHPMode"})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/languages/plaintext/common/plaintext",["require","exports","vs/editor/common/modes/supports","vs/editor/common/modes/abstractMode","vs/editor/common/modes/abstractState","vs/platform/instantiation/common/instantiation","vs/platform/thread/common/thread"],function(e,t,n,i,r,o,s){var a=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.makeClone=function(){return this},t.prototype.equals=function(n){return n instanceof t?e.prototype.equals.call(this,n):!1},t.prototype.tokenize=function(e){return e.advanceToEOS(),{type:""}},t}(r.AbstractState),c=function(e){function t(t,i,r){var o=this;e.call(this,t,i,r),this.tokenizationSupport=new n.TokenizationSupport(this,{getInitialState:function(){return new a(o)}},!1,!1)}return __extends(t,e),t=__decorate([__param(1,o.IInstantiationService),__param(2,s.IThreadService)],t)}(i.AbstractMode);t.Mode=c}),define("vs/languages/plaintext/common/plaintext.contribution",["require","exports","vs/editor/common/modes/modesRegistry","vs/languages/plaintext/common/plaintext"],function(e,t,n){n.registerMode({id:"plaintext",extensions:[".txt",".gitignore"],aliases:["Plain Text","text"],mimetypes:["text/plain"],moduleId:"vs/languages/plaintext/common/plaintext",ctorName:"Mode"})}),define("vs/languages/razor/common/razor.contribution",["require","exports","vs/editor/common/modes/modesRegistry"],function(e,t,n){n.registerMode({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],moduleId:"vs/languages/razor/common/razor",ctorName:"RAZORMode"})}),define("vs/languages/sass/common/sass.contribution",["require","exports","vs/editor/common/modes/modesRegistry","vs/platform/platform","vs/nls!vs/languages/sass/common/sass.contribution","vs/languages/css/common/services/lintRules","vs/platform/configuration/common/configurationRegistry","vs/css!vs/languages/css/common/css-hover"],function(e,t,n,i,r,o,s){n.registerMode({id:"sass",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],moduleId:"vs/languages/sass/common/sass",ctorName:"SASSMode"});var a=i.Registry.as(s.Extensions.Configuration);a.registerConfiguration({id:"sass",order:24,title:r.localize(0,null),allOf:[{title:r.localize(1,null),properties:o.getConfigurationProperties("sass")}]})}),define("vs/languages/typescript.workbench/common/contribution",["require","exports","vs/base/common/flags","vs/editor/common/modes/modesRegistry","vs/languages/javascript/common/javascript.extensions","vs/languages/typescript/common/typescript","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s){n.enableJavaScriptRewriting&&(i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/globalVariableRewriter","GlobalVariableCollector"),i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/angularServiceRewriter","AngularServiceRewriter"),i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/requireRewriter"),i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/defineRewriter"),i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/es6PropertyDeclarator"),i.registerWorkerParticipant("javascript","vs/languages/typescript/common/js/importAndExportRewriter","ImportsAndExportsCollector")),o.Extensions.setProjectResolver(new s.AsyncDescriptor("vs/languages/typescript.workbench/common/projectResolver",void 0,{files:"**/*.ts",projects:"**/tsconfig.json",maxFilesPerProject:1500})),r.Extensions.setProjectResolver(new s.AsyncDescriptor("vs/languages/typescript.workbench/common/projectResolver",void 0,{files:"{**/*.js,**/*.d.ts}",projects:"**/jsconfig.json",maxFilesPerProject:750}))}),define("vs/languages/typescript/common/typescript.contribution",["require","exports","vs/nls!vs/languages/typescript/common/typescript.contribution","vs/base/common/flags","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/platform/configuration/common/configurationRegistry","vs/languages/typescript/common/options","vs/css!./typescript"],function(e,t,n,i,r,o,s,a){var c=a.typeScriptOptions;if(!i.enableTypeScriptServiceMode){o.registerMode({id:"typescript",extensions:[".ts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],moduleId:"vs/languages/typescript/common/typescriptMode",ctorName:"TypeScriptMode"}),o.registerWorkerParticipant("typescript","vs/languages/typescript/common/participants/filenameSuggestions","FilenameSuggestions");var u=r.Registry.as(s.Extensions.Configuration);u.registerConfiguration({id:"typescript",order:20,title:n.localize(0,null),allOf:[{type:"object",title:n.localize(1,null),properties:{"typescript.suggest.alwaysAllWords":{type:"boolean","default":c.suggest.alwaysAllWords,description:n.localize(2,null)},"typescript.suggest.useCodeSnippetsOnMethodSuggest":{type:"boolean","default":c.suggest.useCodeSnippetsOnMethodSuggest,description:n.localize(3,null)}}},{type:"object",title:n.localize(4,null),properties:{"typescript.validate.lint.curlyBracketsMustNotBeOmitted":{"enum":["ignore","warning","error"],"default":c.validate.lint.curlyBracketsMustNotBeOmitted,description:n.localize(5,null)},"typescript.validate.lint.emptyBlocksWithoutComment":{"enum":["ignore","warning","error"],"default":c.validate.lint.emptyBlocksWithoutComment,description:n.localize(6,null)},"typescript.validate.lint.comparisonOperatorsNotStrict":{"enum":["ignore","warning","error"],"default":c.validate.lint.comparisonOperatorsNotStrict,description:n.localize(7,null)},"typescript.validate.lint.missingSemicolon":{"enum":["ignore","warning","error"],"default":c.validate.lint.missingSemicolon,description:n.localize(8,null)},"typescript.validate.lint.unknownTypeOfResults":{"enum":["ignore","warning","error"],"default":c.validate.lint.unknownTypeOfResults,description:n.localize(9,null)},"typescript.validate.lint.semicolonsInsteadOfBlocks":{"enum":["ignore","warning","error"],"default":c.validate.lint.semicolonsInsteadOfBlocks,description:n.localize(10,null)},"typescript.validate.lint.functionsInsideLoops":{"enum":["ignore","warning","error"],"default":c.validate.lint.functionsInsideLoops,description:n.localize(11,null)},"typescript.validate.lint.newOnLowercaseFunctions":{"enum":["ignore","warning","error"],"default":c.validate.lint.newOnLowercaseFunctions,description:n.localize(12,null)},"typescript.validate.lint.tripleSlashReferenceAlike":{"enum":["ignore","warning","error"],"default":c.validate.lint.tripleSlashReferenceAlike,description:n.localize(13,null)},"typescript.validate.lint.unusedVariables":{"enum":["ignore","warning","error"],"default":c.validate.lint.unusedVariables,description:n.localize(14,null)},"typescript.validate.lint.unusedFunctions":{"enum":["ignore","warning","error"],"default":c.validate.lint.unusedFunctions,description:n.localize(15,null)},"typescript.validate.lint.unusedMembers":{"enum":["ignore","warning","error"],"default":c.validate.lint.unusedMembers,description:n.localize(16,null)},"typescript.validate.lint.functionsWithoutReturnType":{"enum":["ignore","warning","error"],"default":c.validate.lint.functionsWithoutReturnType,description:n.localize(17,null)}}}]})}}),define("vs/languages/languages.main",["vs/languages/css/common/css.contribution","vs/languages/handlebars/common/handlebars.contribution","vs/languages/html/common/html.contribution","vs/languages/javascript/common/javascript.contribution","vs/languages/json/common/json.contribution","vs/languages/markdown/common/markdown.contribution","vs/languages/php/common/php.contribution","vs/languages/plaintext/common/plaintext.contribution","vs/languages/razor/common/razor.contribution","vs/languages/typescript/common/typescript.contribution","vs/languages/less/common/less.contribution","vs/languages/sass/common/sass.contribution"],function(){}),define("vs/platform/markers/common/markerService",["require","exports","vs/base/common/arrays","vs/base/common/network","vs/base/common/strings","vs/base/common/collections","vs/base/common/uri","vs/base/common/event","vs/base/common/severity","vs/platform/thread/common/threadService","./markers"],function(e,t,n,i,r,o,s,a,c,u,l){var d;!function(e){function t(e){var t=/^(.*)(.*)$/.exec(e);return{owner:t[1],resource:s["default"].parse(t[2])}}function n(e){return e.owner+""+e.resource}function i(e,t){return new RegExp(r.format(a,e?r.escapeRegExpCharacters(e):".*",t?r.escapeRegExpCharacters(t.toString()):".*"))}function o(e,t){return e+""+t}e.fromValue=t,e.valueOf=n;var a="^({0})({1})$";e.selector=i,e.raw=o}(d||(d={}));var h=function(){function e(e){this.serviceId=l.IMarkerService,this._data=Object.create(null),this._stats=this._emptyStats(),this._onMarkerChanged=new a.Emitter,e.registerInstance(this)}return e.prototype.getId=function(){return"__markerService"},e.prototype.getSerializableState=function(){return this._data},e.prototype.setData=function(e){this._data=e},e.prototype.getStatistics=function(){return this._stats},Object.defineProperty(e.prototype,"onMarkerChanged",{get:function(){return this._onMarkerChanged?this._onMarkerChanged.event:null},enumerable:!0,configurable:!0}),e.prototype.changeOne=function(e,t,n){this._doChangeOne(e,t,n)&&this._onMarkerChanged.fire([t])},e.prototype.remove=function(e,t){if(!n.isFalsyOrEmpty(t)){for(var i,r=0;r<t.length;r++){var o=t[r];this._doChangeOne(e,o,void 0)&&(i||(i=[]),i.push(o))}i&&this._onMarkerChanged.fire(i)}},e.prototype._doChangeOne=function(e,t,i){var r=d.raw(e,t),o=this._data[r],s=!n.isFalsyOrEmpty(o),a=!n.isFalsyOrEmpty(i),c=this._computeStats(o),u=this._computeStats(i);if(s||a)return a?this._data[r]=i:s&&delete this._data[r],this._isStatRelevant(t)&&(this._updateStatsMinus(c),this._updateStatsPlus(u)),!0},e.prototype.changeAll=function(e,t){var i=this,r=Object.create(null),s=this._emptyStats();if(this._forEach(e,void 0,void 0,-1,function(e,t){var n=d.fromValue(e.key).resource;i._isStatRelevant(n)&&i._updateStatsPlus(s,i._computeStats(e.value)),r[n.toString()]=n,t()}),this._updateStatsMinus(s),!n.isFalsyOrEmpty(t)){var a=this._emptyStats();t.forEach(function(t){r[t.resource.toString()]=t.resource,o.lookupOrInsert(i._data,d.raw(e,t.resource),[]).push(t.marker),i._isStatRelevant(t.resource)&&i._updateStatsMarker(a,t.marker)}),this._updateStatsPlus(a)}this._onMarkerChanged.fire(o.values(r))},e.prototype.read=function(e){var t=this;void 0===e&&(e=Object.create(null));var n=[];return this._forEach(e.owner,e.resource,e.selector,e.take,function(e){return t._fromEntry(e,n)}),n},e.prototype._isStatRelevant=function(e){return e.scheme!==i.schemas.inMemory},e.prototype._forEach=function(e,t,n,i,r){var s=n||d.selector(e,t),a=0;o.forEach(this._data,function(e,t){return s.test(e.key)&&(r(e,t),i>0&&a++>=i)?!1:void 0})},e.prototype._fromEntry=function(t,n){var i=d.fromValue(t.key);t.value.forEach(function(t){e._sanitize(t),n.push({owner:i.owner,resource:i.resource,code:t.code,message:t.message,source:t.source,severity:t.severity,startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,
endColumn:t.endColumn})})},e.prototype._computeStats=function(e){var t=0,n=0,i=0,r=0;if(e)for(var o=0;o<e.length;o++){var s=e[o];if(s.severity)switch(s.severity){case c["default"].Error:t++;break;case c["default"].Warning:n++;break;case c["default"].Info:i++;break;default:r++}else r++}return{errors:t,warnings:n,infos:i,unknwons:r}},e.prototype._emptyStats=function(){return{errors:0,warnings:0,infos:0,unknwons:0}},e.prototype._updateStatsPlus=function(e,t){t||(t=e,e=this._stats),e.errors+=t.errors,e.warnings+=t.warnings,e.infos+=t.infos,e.unknwons+=t.unknwons},e.prototype._updateStatsMinus=function(e,t){t||(t=e,e=this._stats),e.errors-=t.errors,e.warnings-=t.warnings,e.infos-=t.infos,e.unknwons-=t.unknwons},e.prototype._updateStatsMarker=function(e,t){switch(t.severity){case c["default"].Error:e.errors++;break;case c["default"].Warning:e.warnings++;break;case c["default"].Info:e.infos++;break;default:e.unknwons++}},e._sanitize=function(e){e.code=e.code||null,e.startLineNumber=e.startLineNumber>0?e.startLineNumber:1,e.startColumn=e.startColumn>0?e.startColumn:1,e.endLineNumber=e.endLineNumber>=e.startLineNumber?e.endLineNumber:e.startLineNumber,e.endColumn=e.endColumn>0?e.endColumn:e.startColumn},e.$changeOne=u.MainThreadAttr(e,e.prototype.changeOne),e.$changeAll=u.MainThreadAttr(e,e.prototype.changeAll),e}();t.MarkerService=h}),define("vs/platform/thread/common/abstractThreadService",["require","exports","vs/base/common/winjs.base","vs/base/common/remote","vs/base/common/types","vs/platform/thread/common/thread","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s,a){var c=function(){function e(e,t){this._proxyDefinition=e,this._disposeDelegate=t}return e.prototype.dispose=function(){return this._disposeDelegate()},e.prototype.getProxyDefinition=function(){return this._proxyDefinition},e}(),u=function(){function e(e){this.isInMainThread=e,this._boundObjects={},this._pendingObjects=[],this._localObjMap=Object.create(null),this._proxyObjMap=Object.create(null)}return e.generateDynamicProxyId=function(){return String(++this._LAST_DYNAMIC_PROXY_ID)},e.prototype.setInstantiationService=function(e){this._instantiationService=e},e.prototype.createInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this._doCreateInstance(e)},e.prototype._doCreateInstance=function(e){var t=this,i=this._instantiationService.createInstance.apply(this._instantiationService,e);if(n.TPromise.is(i)){var r;return r=i.then(function(e){if(e.asyncCtor){var t=e.asyncCtor();if(n.TPromise.is(t))return t.then(function(){return e})}return e}),this._pendingObjects.push(r),r.then(function(e){for(var n=t._finishInstance(e),i=0;i<t._pendingObjects.length;i++)if(t._pendingObjects[i]===r){t._pendingObjects.splice(i,1);break}return n})}return this._finishInstance(i)},e.prototype._finishInstance=function(e){return e[s.THREAD_SERVICE_PROPERTY_NAME]=this,this._boundObjects[e.getId()]=e,e.creationDone&&e.creationDone(),e},e.prototype.registerInstance=function(e){this._finishInstance(e)},e.prototype.handle=function(e,t,n){if(!this._localObjMap[e])throw new Error("Unknown actor "+e);var i=this._localObjMap[e];return i[t].apply(i,n)},e.prototype._getOrCreateProxyInstance=function(e,t,n){if(this._proxyObjMap[t])return this._proxyObjMap[t];var r=i.createProxyFromCtor(e,t,n.ctor);return this._proxyObjMap[t]=r,r},e.prototype._registerLocalInstance=function(e,t){this._localObjMap[e]=t},e.prototype._getOrCreateLocalInstance=function(e,t){if(this._localObjMap[e])return this._localObjMap[e];var n=this._instantiationService.createInstance(t);return this._registerLocalInstance(e,n),n},e.prototype.createDynamicProxyFromMethods=function(t){var n=this,i=e.generateDynamicProxyId(),r=this._proxifyMethods(i,t);return new c(r,function(){delete n._localObjMap[i]})},e.prototype.createDynamicProxyFromMembers=function(t,n){var i=this,r=e.generateDynamicProxyId(),o=this._proxifyMembers(r,t,n);return new c(o,function(){delete i._localObjMap[r]})},e.prototype._proxifyMethods=function(e,t){if(!r.isObject(t))return null;this._localObjMap[e]=t;var n={$__CREATE__PROXY__REQUEST:e};for(var i in t)"function"==typeof t[i]&&(n[i]=t[i].bind(t));return n},e.prototype._proxifyMembers=function(e,t,n){if(!r.isObject(t))return null;this._localObjMap[e]=t;var i={$__CREATE__PROXY__REQUEST:e};for(var o in t)-1!==n.indexOf(o)&&("function"==typeof t[o]?i[o]=t[o].bind(t):i[o]=t[o]);return i},e.prototype.isProxyObject=function(e){return e&&!!e.$__IS_REMOTE_OBJ},e.prototype.getRemotable=function(e){var t=o.Remotable.getId(e);if(!t)throw new Error("Unknown Remotable: <<"+t+">>");var n=a.createSyncDescriptor(e);if(o.Remotable.Registry.MainContext[t])return this._registerAndInstantiateMainProcessActor(t,n);if(o.Remotable.Registry.PluginHostContext[t])return this._registerAndInstantiatePluginHostActor(t,n);if(o.Remotable.Registry.WorkerContext[t])return this._registerAndInstantiateWorkerActor(t,n,o.Remotable.Registry.WorkerContext[t].affinity);throw new Error("Unknown Remotable: <<"+t+">>")},e.prototype.registerRemotableInstance=function(e,t){var n=o.Remotable.getId(e);if(!n)throw new Error("Unknown Remotable: <<"+n+">>");if(o.Remotable.Registry.MainContext[n])return this._registerMainProcessActor(n,t);if(o.Remotable.Registry.PluginHostContext[n])return this._registerPluginHostActor(n,t);if(o.Remotable.Registry.WorkerContext[n])return this._registerWorkerActor(n,t);throw new Error("Unknown Remotable: <<"+n+">>")},e._LAST_DYNAMIC_PROXY_ID=0,e}();t.AbstractThreadService=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/platform/thread/common/mainThreadService",["require","exports","vs/base/common/winjs.base","vs/base/common/worker/workerClient","vs/platform/thread/common/abstractThreadService","vs/base/common/flags","vs/base/common/platform","vs/base/common/errors","vs/base/common/timer","vs/platform/thread/common/threadService","vs/platform/thread/common/thread","vs/base/worker/defaultWorkerFactory"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(e){function t(i,r){var o=this;if(e.call(this,!0),this.serviceId=l.IThreadService,this._contextService=i,this._workerModuleId=r,this._workerFactory=new d.DefaultWorkerFactory,!this.isInMainThread)throw new Error("Incorrect Service usage: this service must be used only in the main thread");this._workerPool=[],this._affinityScrambler={},this._listeners=[],this._workersCreatedPromise=new n.TPromise(function(e,t,n){o._triggerWorkersCreatedPromise=e},function(){}),u.readThreadSynchronizableObjects().forEach(function(e){return o.registerInstance(e)}),n.TPromise.timeout(t.MAXIMUM_WORKER_CREATION_DELAY).then(function(){return o.ensureWorkers()})}return __extends(t,e),t.prototype.ensureWorkers=function(){if(this._triggerWorkersCreatedPromise){var e=o.workersCount;s.hasWebWorkerSupport()||(e=Math.min(e,1));for(var t=0;e>t;t++)this._createWorker();var n=this._triggerWorkersCreatedPromise;this._triggerWorkersCreatedPromise=null,n(null)}},t.prototype.addStatusListener=function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return;this._listeners.push(e)},t.prototype.removeStatusListener=function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)},t.prototype._afterWorkers=function(){var e=this,t=!1;return new n.TPromise(function(n,i,r){e._workersCreatedPromise.then(function(){t||n(null)},i,r)},function(){t=!0})},t.prototype._createWorker=function(){this._workerPool.push(this._doCreateWorker())},t.prototype._shortName=function(e,t){return e.substring(e.length-14)+"."+t.substr(0,14)},t.prototype._doCreateWorker=function(e){var t=this,r=new i.WorkerClient(this._workerFactory,this._workerModuleId,function(e){return"threadService"===e.type?t._shortName(e.payload[0],e.payload[1]):e.type},function(e){for(var n=0;n<t._workerPool.length&&e!==t._workerPool[n];n++);var i=t._doCreateWorker(e.workerId);e===t._workerPool[n]?t._workerPool[n]=i:t._workerPool.push(i)},e);return r.getRemoteCom().registerBigHandler(this),r.onModuleLoaded=r.request("initialize",{threadService:this._getRegisteredObjectsData(),contextService:{workspace:this._contextService.getWorkspace(),configuration:this._contextService.getConfiguration(),options:this._contextService.getOptions()}}),r.addMessageHandler("threadService",function(e){var i=e.identifier,r=e.memberName,o=e.args;if(!t._boundObjects.hasOwnProperty(i))throw new Error("Object "+i+" was not found on the main thread.");var s=t._boundObjects[i];return n.TPromise.as(s[r].apply(s,o))}),r},t.prototype._getRegisteredObjectsData=function(){var e=this,t={};return Object.keys(this._boundObjects).forEach(function(n){var i=e._boundObjects[n];i.getSerializableState&&(t[n]=i.getSerializableState())}),t},t.prototype.MainThread=function(e,t,n,i){return n.apply(e,i)},t.prototype._getWorkerIndex=function(e,t){if(t===l.ThreadAffinity.None){for(var n=[0],i=this._workerPool[0].getQueueSize(),r=1;r<this._workerPool.length;r++){var o=this._workerPool[r].getQueueSize();i>o?(i=o,n=[r]):o===i&&n.push(r)}return n[Math.floor(Math.random()*n.length)]}var s=0;return this._affinityScrambler.hasOwnProperty(e.getId())?s=this._affinityScrambler[e.getId()]:(s=Math.floor(Math.random()*this._workerPool.length),this._affinityScrambler[e.getId()]=s),(s+t)%this._workerPool.length},t.prototype.OneWorker=function(e,t,n,i,r){var o=this;return this._afterWorkers().then(function(){if(0===o._workerPool.length)throw new Error("Cannot fulfill request...");var n=o._getWorkerIndex(e,r);return o._remoteCall(o._workerPool[n],e,t,i)})},t.prototype.AllWorkers=function(e,t,i,r){var o=this;return this._afterWorkers().then(function(){return n.TPromise.join(o._workerPool.map(function(n){return o._remoteCall(n,e,t,r)}))})},t.prototype.Everywhere=function(e,t,n,i){var r=this;return this._afterWorkers().then(function(){r._workerPool.forEach(function(n){r._remoteCall(n,e,t,i).done(null,a.onUnexpectedError)})}),n.apply(e,i)},t.prototype._remoteCall=function(e,t,i,r){var o=this,s=t.getId();if(!s)throw new Error("Synchronizable Objects must have an identifier");var a=c.start(c.Topic.LANGUAGES,this._shortName(s,i)),u=function(){a.stop(),o._pingListenersIfNecessary()},l=n.decoratePromise(e.request("threadService",[s,i,r]),u,u);return this._pingListenersIfNecessary(),l},t.prototype._pingListenersIfNecessary=function(){if(this._listeners.length>0){var e=this._buildStatus(),t=this._listeners.slice(0);try{for(var n=0;n<t.length;n++)t[n].onThreadServiceStatus(e)}catch(i){a.onUnexpectedError(i)}}},t.prototype._buildStatus=function(){var e=this._workerPool.map(function(e){return{queueSize:e.getQueueSize()}});return{workers:e}},t.prototype._registerAndInstantiateMainProcessActor=function(e,t){return this._getOrCreateLocalInstance(e,t)},t.prototype._registerMainProcessActor=function(e,t){this._registerLocalInstance(e,t)},t.prototype._registerAndInstantiatePluginHostActor=function(e,t){throw new Error("Not supported in this runtime context: Cannot communicate to non-existant Plugin Host!")},t.prototype._registerPluginHostActor=function(e,t){throw new Error("Not supported in this runtime context!")},t.prototype._registerAndInstantiateWorkerActor=function(e,t,n){var i=this._createWorkerProxyHelper(n);return this._getOrCreateProxyInstance(i,e,t)},t.prototype._registerWorkerActor=function(e,t){throw new Error("Not supported in this runtime context!")},t.prototype._createWorkerProxyHelper=function(e){var t=this;return{callOnRemote:function(n,i,r){return t._callOnWorker(e,n,i,r)}}},t.prototype._callOnWorker=function(e,t,i,r){var o=this;return e===l.ThreadAffinity.None?n.TPromise.as(null):this._afterWorkers().then(function(){if(e===l.ThreadAffinity.All){var s=o._workerPool.map(function(e){return e.getRemoteCom()}).map(function(e){return e.callOnRemote(t,i,r)});return n.TPromise.join(s)}var a=e%o._workerPool.length,c=o._workerPool[a];return c.getRemoteCom().callOnRemote(t,i,r)})},t.MAXIMUM_WORKER_CREATION_DELAY=500,t}(r.AbstractThreadService);t.MainThreadService=h}),define("vs/platform/workspace/common/workspace",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IWorkspaceContextService=n.createDecorator("contextService")}),require.config({ignoreDuplicateModules:["vs/languages/typescript/common/features/tokenization","vs/languages/typescript/common/features/quickFixMainActions","vs/nls!vs/languages/typescript/common/features/quickFixMainActions","vs/languages/typescript/common/typescript","vs/languages/typescript/common/typescriptMode","vs/nls!vs/languages/typescript/common/typescriptMode","vs/languages/javascript/common/javascript.extensions","vs/languages/html/common/htmlTokenTypes"]}),define("vs/editor/common/languages.common",["vs/base/common/json","vs/base/common/uri","vs/base/common/network","vs/base/common/arrays","vs/base/common/collections","vs/base/common/lifecycle","vs/base/common/async","vs/base/common/glob","vs/base/common/events","vs/platform/configuration/common/configurationRegistry","vs/platform/files/common/files","vs/platform/search/common/search","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/editor/common/editorCommon","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/monarch/monarch","vs/editor/common/modes/monarch/monarchCompile","vs/editor/common/modes/textToHtmlTokenizer","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/languages/plaintext/common/plaintext"],function(){});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/referenceSearch/browser/referenceSearchWidget",["require","exports","vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearchWidget","vs/base/common/collections","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/network","vs/base/browser/ui/filelabel/fileLabel","vs/base/common/errors","vs/base/browser/builder","vs/base/common/labels","vs/base/parts/tree/browser/treeImpl","vs/base/parts/tree/browser/treeDefaults","vs/base/browser/ui/leftRightWidget/leftRightWidget","vs/base/browser/ui/countBadge/countBadge","vs/editor/common/editorCommon","vs/editor/common/config/defaultConfig","vs/editor/browser/widget/embeddedCodeEditorWidget","vs/editor/common/model/model","vs/editor/contrib/zoneWidget/browser/peekViewWidget","./referenceSearchModel","vs/editor/common/core/range","vs/platform/workspace/common/workspace","vs/css!./referenceSearchWidget"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){var T=function(){function e(e,t){var n=this;this.editor=e,this.model=t,this._decorationSet=i.createStringDictionary(),this._decorationIgnoreSet=i.createStringDictionary(),this.callOnDispose=[],this.callOnModelChange=[],this.callOnDispose.push(this.editor.addListener(g.EventType.ModelChanged,function(){return n.onModelChanged()})),this.onModelChanged()}return e.prototype.dispose=function(){this.callOnModelChange=r.cAll(this.callOnModelChange),this.callOnDispose=r.cAll(this.callOnDispose),this.removeDecorations()},e.prototype.onModelChanged=function(){this.removeDecorations(),this.callOnModelChange=r.cAll(this.callOnModelChange);var e=this.editor.getModel();if(e)for(var t=0,n=this.model.children.length;n>t;t++)if(this.model.children[t].resource.toString()===e.getAssociatedResource().toString())return void this.addDecorations(this.model.children[t])},e.prototype.addDecorations=function(t){var n=this;this.callOnModelChange.push(this.editor.getModel().addListener(g.EventType.ModelDecorationsChanged,function(e){return n.onDecorationChanged(e)})),this.editor.getModel().changeDecorations(function(i){for(var r=[],o=[],s=0,a=t.children.length;a>s;s++){var c=t.children[s];n._decorationIgnoreSet[c.id]||(r.push({range:c.range,options:e.DecorationOptions}),o.push(s))}for(var u=i.deltaDecorations([],r),l=0;l<u.length;l++)n._decorationSet[u[l]]=t.children[o[l]]})},e.prototype.onDecorationChanged=function(e){for(var t=this,n=e.addedOrChangedDecorations,r=[],o=0,s=n.length;s>o;o++){var a=i.lookup(this._decorationSet,n[o].id);if(a){var c=n[o].range,u=!1;if(!w.Range.equalsRange(c,a.range)){if(w.Range.spansMultipleLines(c))u=!0;else{var l=a.range.endColumn-a.range.startColumn,d=c.endColumn-c.startColumn;l!==d&&(u=!0)}u?(this._decorationIgnoreSet[a.id]=a,r.push(n[o].id)):a.range=c}}}this.editor.changeDecorations(function(e){for(var n=0,i=r.length;i>n;n++)delete t._decorationSet[r[n]];e.deltaDecorations(r,[])})},e.prototype.removeDecorations=function(){var e=Object.keys(this._decorationSet);e.length>0&&this.editor.changeDecorations(function(t){t.deltaDecorations(e,[])}),this._decorationSet={}},e.DecorationOptions={stickiness:g.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"reference-decoration"},e}(),I=function(){function e(){}return e.prototype.getId=function(e,t){return t instanceof S.Model?"root":t instanceof S.FileReferences?t.id:t instanceof S.OneReference?t.id:void 0},e.prototype.hasChildren=function(e,t){return t instanceof S.FileReferences||t instanceof S.Model},e.prototype.getChildren=function(e,t){return t instanceof S.Model?s.TPromise.as(t.children):t instanceof S.FileReferences?t.resolve().then(function(e){return e.children}):s.TPromise.as([])},e.prototype.getParent=function(e,t){var n=null;return t instanceof S.FileReferences?n=t.parent:t instanceof S.OneReference&&(n=t.parent),s.TPromise.as(n)},e}(),k=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onMouseDown=function(n,i,r){if(r.leftButton){if(i instanceof S.FileReferences)return r.preventDefault(),r.stopPropagation(),this.expandCollapse(n,i);var o=e.prototype.onClick.call(this,n,i,r);return r.ctrlKey||r.metaKey?n.emit(t.Events.OPEN_TO_SIDE,i):2===r.detail?n.emit(t.Events.SELECTED,i):n.emit(t.Events.FOCUSED,i),o}return!1},t.prototype.onClick=function(t,n,i){return i.leftButton?!1:e.prototype.onClick.call(this,t,n,i)},t.prototype.expandCollapse=function(e,t){return e.isExpanded(t)?e.collapse(t).done(null,l.onUnexpectedError):e.expand(t).done(null,l.onUnexpectedError),!0},t.prototype.onEscape=function(e,t){return!1},t.prototype.onEnter=function(n,i){var r=n.getFocus();if(r instanceof S.FileReferences)return this.expandCollapse(n,r);var o=e.prototype.onEnter.call(this,n,i);return i.ctrlKey||i.metaKey?n.emit(t.Events.OPEN_TO_SIDE,r):n.emit(t.Events.SELECTED,r),o},t.prototype.onUp=function(t,n){return e.prototype.onUp.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onPageUp=function(t,n){return e.prototype.onPageUp.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onLeft=function(t,n){return e.prototype.onLeft.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onDown=function(t,n){return e.prototype.onDown.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onPageDown=function(t,n){return e.prototype.onPageDown.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.onRight=function(t,n){return e.prototype.onRight.call(this,t,n),this.fakeFocus(t,n),!0},t.prototype.fakeFocus=function(e,n){var i=e.getFocus();e.setSelection([i]),e.emit(t.Events.FOCUSED,i)},t.Events={FOCUSED:"events/custom/focused",SELECTED:"events/custom/selected",OPEN_TO_SIDE:"events/custom/opentoside"},t}(f.DefaultController),x=function(e){function t(t,n){e.call(this),this.editor=t,this._contextService=n}return __extends(t,e),t.prototype.getHeight=function(e,t){return 1.2*this.editor.getConfiguration().lineHeight},t.prototype.render=function(e,t,i){var r=this;if(o.clearNode(i),t instanceof S.FileReferences){var s=t,c=d.$(".reference-file");new m.LeftRightWidget(c,function(e){var t=s.resource;return new u.FileLabel(e,t,r._contextService),null},function(e){var t=s.children.length;return new v.CountBadge(e,t,t>1?n.localize(0,null,t):n.localize(1,null,t))}),c.appendTo(i)}else if(t instanceof S.OneReference){var l=t,h=d.$(".reference"),p=l.parent.preview.preview(l.range);h.innerHtml(a.format('<span>{0}</span><span class="referenceMatch">{1}</span><span>{2}</span>',p.before,p.inside,p.after)).appendTo(i)}return null},t=__decorate([__param(1,C.IWorkspaceContextService)],t)}(f.LegacyRenderer),A=function(e){function t(n,i,r,o,s){e.call(this,s,i,t.INNER_EDITOR_CONTEXT_KEY,{frameColor:"#007ACC",showFrame:!1,showArrow:!0}),this.editorService=n,this.contextService=r,this.instantiationService=o.createChild({peekViewService:this}),this.callOnModel=[],this.tree=null,this.treeContainer=null,this.preview=null,this.previewContainer=null,this.previewDecorations=[],this.lastHeight=null,this.create()}return __extends(t,e),t.prototype._onTitleClick=function(e){if(this.preview&&this.preview.getModel()){var n=this.preview.getModel(),i=this.preview.getPosition().lineNumber,r=new w.Range(i,1,i,n.getLineMaxColumn(i));this.emit(t.Events.EditorDoubleClick,{reference:this.getFocusedReference(),range:r,originalEvent:e})}},t.prototype._fillBody=function(e){var t=this,i=d.$(e);i.addClass("reference-zone-widget"),i.div({"class":"messages"},function(e){t.messageContainer=e.hide()}),i.div({"class":"preview inline"},function(e){var i={scrollBeyondLastLine:!1,scrollbar:y.DefaultConfig.editor.scrollbar,overviewRulerLanes:2};t.preview=t.instantiationService.createInstance(_.EmbeddedCodeEditorWidget,e.getHTMLElement(),i,t.editor),t.previewContainer=e.hide(),t.previewNotAvailableMessage=new b.Model(n.localize(2,null),null)}),i.div({"class":"tree inline"},function(e){var n={dataSource:t.instantiationService.createInstance(I),renderer:t.instantiationService.createInstance(x,t.editor),controller:new k},i={allowHorizontalScroll:!1,twistiePixels:20};t.tree=new p.Tree(e.getHTMLElement(),n,i),t.treeContainer=e.hide()})},t.prototype._doLayoutBody=function(t){e.prototype._doLayoutBody.call(this,t);var n=t+"px";n!==this.lastHeight&&(this.treeContainer.style({height:n}),this.previewContainer.style({height:n}),this.tree.layout(t),this.preview.layout(),this.lastHeight=n)},t.prototype.onWidth=function(e){this.preview.layout()},t.prototype.setModel=function(e){this.callOnModel=r.disposeAll(this.callOnModel),this.model=e,this.model&&this._onNewModel()},t.prototype.showMessage=function(e){this.setTitle(""),this.messageContainer.innerHtml(e).show()},t.prototype._onNewModel=function(){var e=this;this.messageContainer.hide(),this.decorationsManager=new T(this.preview,this.model),this.callOnModel.push(this.decorationsManager),this.callOnModel.push(this.model.addListener2(S.EventType.OnReferenceRangeChanged,function(t){e.tree.refresh(t)})),this.callOnModel.push(this.tree.addListener2(k.Events.FOCUSED,function(t){t instanceof S.OneReference&&e.showReferencePreview(t)})),this.callOnModel.push(this.tree.addListener2(k.Events.SELECTED,function(t){t instanceof S.OneReference&&(e.showReferencePreview(t),e.model.currentReference=t)})),this.callOnModel.push(this.tree.addListener2(k.Events.OPEN_TO_SIDE,function(t){t instanceof S.OneReference&&e.editorService.openEditor({resource:t.resource,options:{selection:t.range}},!0)}));var n=1===this.model.children.length?this.model.children[0]:this.model;this.tree.setInput(n).then(function(){e.tree.setSelection([e.model.currentReference])}).done(null,l.onUnexpectedError),this.callOnModel.push(this.preview.addListener2(g.EventType.MouseDown,function(n){2===n.event.detail&&e.emit(t.Events.EditorDoubleClick,{reference:e.getFocusedReference(),range:n.target.range,originalEvent:n.event})})),o.addClass(this.container,"results-loaded"),this.treeContainer.show(),this.previewContainer.show(),this.preview.layout(),this.tree.layout(),this.focus(),this.showReferencePreview(this.model.nextReference(this.model.currentReference))},t.prototype.getFocusedReference=function(){var e=this.tree.getFocus();if(e instanceof S.OneReference)return e.resource;if(e instanceof S.FileReferences){var t=e;if(t.children.length>0)return t.children[0].resource}return null},t.prototype.focus=function(){this.tree.DOMFocus()},t.prototype.showReferencePreview=function(e){var t=this;this.editorService.resolveEditorModel({resource:e.resource}).done(function(i){if(i){t.preview.setModel(i.textEditorModel);var r=w.Range.lift(e.range).collapseToStart();t.preview.setSelection(r),t.preview.revealRangeInCenter(r)}else t.preview.setModel(t.previewNotAvailableMessage);e.resource.scheme!==c.schemas.inMemory?t.setTitle(e.name,h.getPathLabel(e.directory,t.contextService)):t.setTitle(n.localize(3,null))},l.onUnexpectedError),this.tree.reveal(e).then(function(){t.tree.setSelection([e]),t.tree.setFocus(e)}).done(null,l.onUnexpectedError)},t.prototype.dispose=function(){this.setModel(null),r.disposeAll([this.preview,this.previewNotAvailableMessage,this.tree]),e.prototype.dispose.call(this)},t.INNER_EDITOR_CONTEXT_KEY="inReferenceSearchEditor",t.Events={EditorDoubleClick:"editorDoubleClick"},t}(E.PeekViewWidget);t.ReferenceWidget=A});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/referenceSearch/browser/referenceSearch",["require","exports","vs/nls!vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/base/common/arrays","vs/base/common/uri","vs/base/common/winjs.base","vs/base/common/severity","vs/base/common/lifecycle","vs/base/common/errors","vs/editor/common/editorCommon","vs/editor/common/core/range","vs/editor/common/core/position","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","./referenceSearchWidget","./referenceSearchModel","vs/editor/contrib/zoneWidget/browser/peekViewWidget","vs/platform/editor/common/editor","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace","vs/platform/keybinding/common/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/base/common/keyCodes","../common/referenceSearch"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I){var k=g.IPeekViewService,x=function(){function e(e,t,n,i,r,o,s,a){this._startTime=-1,this.requestIdPool=0,this.callOnClear=[],this.editorService=t,this.telemetryService=n,this.messageService=i,this.instantiationService=r,this.peekViewService=o,this.contextService=s,this.keybindingService=a,this.modelRevealing=!1,this.editor=e,this._referenceSearchVisible=a.createKey(L,!1)}return e.getController=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.widget&&(this.widget.dispose(),this.widget=null),this.editor=null},e.prototype.isInPeekView=function(){return this.peekViewService&&this.peekViewService.isActive},e.prototype.closeReferenceSearch=function(){this.clear()},e.prototype.processRequest=function(e,t){var r=this,o=this.widget?this.widget.position:null,a=this.clear();if(a&&o&&e.containsPosition(o))return null;this._referenceSearchVisible.set(!0),this.callOnClear.push(this.editor.addListener(u.EventType.ModelModeChanged,function(){r.clear()})),this.callOnClear.push(this.editor.addListener(u.EventType.ModelChanged,function(){r.modelRevealing||r.clear()})),this.widget=new m.ReferenceWidget(this.editorService,this.keybindingService,this.contextService,this.instantiationService,this.editor),this.widget.setTitle(n.localize(0,null)),this.widget.show(e,18),this.callOnClear.push(this.widget.addListener(g.Events.Closed,function(){r.widget=null,r.clear()})),this.callOnClear.push(this.widget.addListener(m.ReferenceWidget.Events.EditorDoubleClick,function(e){e.reference&&(r.editorService.openEditor({resource:e.reference,options:{selection:e.range}},e.originalEvent.ctrlKey||e.originalEvent.metaKey).done(null,c.onUnexpectedError),e.originalEvent.ctrlKey||e.originalEvent.metaKey||r.clear())}));var l=++this.requestIdPool,d=this.editor.getModel(),h=this.telemetryService.start("findReferences",{mode:d.getMode().getId()});return t.then(function(t){if(l!==r.requestIdPool)return void h.stop();if(i.isFalsyOrEmpty(t))return r.widget.showMessage(n.localize(1,null)),void h.stop();r.model=new v.Model(t,r.editorService),r.model.currentReference=r.model.findReference(d.getAssociatedResource(),e.getStartPosition());var o=r.model.addListener(v.EventType.CurrentReferenceChanged,function(){r.modelRevealing=!0,r.editorService.openEditor({resource:r.model.currentReference.resource,options:{selection:r.model.currentReference.range}}).done(function(e){return e&&e.getControl()===r.editor?(r.modelRevealing=!1,r.widget.show(r.model.currentReference.range,18),void r.widget.focus()):void r.clear()},function(e){r.modelRevealing=!1,c.onUnexpectedError(e)})});r.callOnClear.push(o),r._startTime=Date.now(),r.widget&&r.widget.setModel(r.model),h.stop()},function(e){r.messageService.show(s["default"].Error,e),h.stop()}),this.widget},e.prototype.clear=function(){-1!==this._startTime&&(this.telemetryService.publicLog("zoneWidgetShown",{mode:"reference search",elapsedTime:Date.now()-this._startTime}),this._startTime=-1),this._referenceSearchVisible.reset(),a.cAll(this.callOnClear),this.model=null;var e=!1;return this.widget&&(this.widget.dispose(),this.widget=null,e=!0),this.editor.focus(),this.requestIdPool+=1,e},e.ID="editor.contrib.findReferencesController",e=__decorate([__param(1,y.IEditorService),__param(2,E.ITelemetryService),__param(3,b.IMessageService),__param(4,_.IInstantiationService),__param(5,k),__param(6,S.IWorkspaceContextService),__param(7,w.IKeybindingService)],e)}();t.FindReferencesController=x;var A=function(e){function t(t,i,r,o){e.call(this,t,i,f.Behaviour.WidgetFocus|f.Behaviour.ShowInContextMenu|f.Behaviour.UpdateOnCursorPositionChange),this.label=n.localize(2,null),this.peekViewService=r,this.peekViewService&&o.createKey(this.peekViewService.contextKey,!0)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/4_references"},t.prototype.isSupported=function(){return I.ReferenceRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(this.peekViewService&&this.peekViewService.isActive)return!1;var e=this.editor.getModel(),t=this.editor.getSelection().getStartPosition(),n=e.getLineContext(t.lineNumber),i=t.column-1;return I.ReferenceRegistry.all(e).some(function(e){return e.canFindReferences(n,i)})},t.prototype.run=function(){var e=this.editor.getSelection(),t=this.editor.getModel(),n=I.findReferences(t,e.getStartPosition()),i=x.getController(this.editor);return o.TPromise.as(i.processRequest(e,n)).then(function(){return!0})},t.ID="editor.action.referenceSearch.trigger",t=__decorate([__param(2,k),__param(3,w.IKeybindingService)],t)}(f.EditorAction);t.ReferenceAction=A;var R=function(e,t){var n=t[0],i=t[1];if(!(n instanceof r["default"]))throw new Error("illegal argument, uri");
if(!i)throw new Error("illega argument, position");return e.get(y.IEditorService).openEditor({resource:n}).then(function(e){var t=e.getControl();if(t&&"function"==typeof t.getEditorType){var n=I.findReferences(t.getModel(),i),r=x.getController(t),s=new l.Range(i.lineNumber,i.column,i.lineNumber,i.column);return o.TPromise.as(r.processRequest(s,n))}})},D=function(e,t){if(!(t[0]instanceof r["default"]))throw new Error("illegal argument, uri expected");return e.get(y.IEditorService).openEditor({resource:t[0]}).then(function(e){var n=e.getControl();if(n&&"function"==typeof n.getEditorType){var i=x.getController(n),r=d.Position.asEmptyRange(t[1]);return o.TPromise.as(i.processRequest(l.Range.lift(r),o.TPromise.as(t[2])))}})},L="referenceSearchVisible";h.EditorBrowserRegistry.registerEditorContribution(x),p.CommonEditorRegistry.registerEditorAction(new p.EditorActionDescriptor(A,A.ID,n.localize(3,null),{context:p.ContextKey.EditorTextFocus,primary:T.KeyMod.Shift|T.KeyCode.F12})),C.KeybindingsRegistry.registerCommandDesc({id:"editor.action.findReferences",handler:R,weight:p.CommonEditorRegistry.commandWeight(50),context:[],primary:void 0}),C.KeybindingsRegistry.registerCommandDesc({id:"editor.action.showReferences",handler:D,weight:p.CommonEditorRegistry.commandWeight(50),context:[],primary:void 0,description:{description:"Show references at a position in a file",args:[{name:"uri",description:"The text document in which to show references",constraint:r["default"]},{name:"position",description:"The position at which to show",constraint:d.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array}]}}),p.CommonEditorRegistry.registerEditorCommand("closeReferenceSearch",p.CommonEditorRegistry.commandWeight(50),{primary:T.KeyCode.Escape},!1,L,function(e,t,n){var i=g.getOuterEditor(e,n);if(i){var r=x.getController(i);r.closeReferenceSearch()}}),p.CommonEditorRegistry.registerEditorCommand("closeReferenceSearchEditor",p.CommonEditorRegistry.commandWeight(-101),{primary:T.KeyCode.Escape},!1,m.ReferenceWidget.INNER_EDITOR_CONTEXT_KEY,function(e,t,n){var i=g.getOuterEditor(e,n);if(i){var r=x.getController(i);r.closeReferenceSearch()}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/contrib/goToDeclaration/browser/goToDeclaration",["require","exports","vs/nls!vs/editor/contrib/goToDeclaration/browser/goToDeclaration","vs/base/common/severity","vs/base/common/platform","vs/base/browser/browser","vs/base/common/async","vs/base/common/strings","vs/base/common/errors","vs/base/common/arrays","vs/base/common/winjs.base","vs/editor/browser/editorBrowserExtensions","vs/editor/common/editorCommonExtensions","vs/editor/common/editorAction","vs/editor/common/editorCommon","vs/editor/common/modes/textToHtmlTokenizer","vs/editor/common/core/range","vs/base/common/keyCodes","vs/platform/request/common/request","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/editor/common/editor","vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/editor/contrib/goToDeclaration/common/goToDeclaration","vs/css!./goToDeclaration"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w){var C=function(e){function t(t,n,i,r,o){e.call(this,t,n,p.Behaviour.WidgetFocus|p.Behaviour.ShowInContextMenu|p.Behaviour.UpdateOnCursorPositionChange),this._messageService=i,this._editorService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel(),n=this.editor.getPosition(),r=this._resolve(t.getAssociatedResource(),{lineNumber:n.lineNumber,column:n.column});return r.then(function(t){if(t=u.coalesce(t),t&&0!==t.length){if(t=t.map(function(e){return{resource:e.resource,range:v.Range.collapseToStart(e.range)}}),1!==t.length||e._showSingleReferenceInPeek()){var n=S.FindReferencesController.getController(e.editor);return n.processRequest(e.editor.getSelection(),l.TPromise.as(t))}return e._editorService.openEditor({resource:t[0].resource,options:{selection:t[0].range}})}},function(t){return e._messageService.show(i["default"].Error,t),!1})},t.prototype._showSingleReferenceInPeek=function(){return!1},t}(p.EditorAction);t.GoToTypeAction=C;var T=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/3_visitTypeDefinition"},t.prototype.isSupported=function(){return!!this.editor.getModel().getMode().typeDeclarationSupport&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(!e.prototype.getEnablementState.call(this))return!1;var t=this.editor.getModel(),n=this.editor.getSelection().getStartPosition();return t.getMode().typeDeclarationSupport.canFindTypeDeclaration(t.getLineContext(n.lineNumber),n.column-1)},t.prototype._resolve=function(e,t){var n=this.editor.getModel().getMode().typeDeclarationSupport;return n?n.findTypeDeclaration(e,t).then(function(e){return[e]}):void 0},t.ID="editor.action.goToTypeDeclaration",t=__decorate([__param(2,_.IMessageService),__param(3,b.ITelemetryService),__param(4,E.IEditorService)],t)}(C);t.GoToTypeDeclarationActions=T;var I=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype.getGroupId=function(){return"1_goto/2_visitDefinition"},t.prototype.isSupported=function(){return w.DeclarationRegistry.has(this.editor.getModel())&&e.prototype.isSupported.call(this)},t.prototype.getEnablementState=function(){if(!e.prototype.getEnablementState.call(this))return!1;var t=this.editor.getModel(),n=this.editor.getSelection().getStartPosition();return w.DeclarationRegistry.all(t).some(function(e){return e.canFindDeclaration(t.getLineContext(n.lineNumber),n.column-1)})},t.prototype._resolve=function(e,t){return w.getDeclarationsAtPosition(this.editor.getModel(),this.editor.getPosition())},t.ID="editor.action.goToDeclaration",t=__decorate([__param(2,_.IMessageService),__param(3,b.ITelemetryService),__param(4,E.IEditorService)],t)}(C);t.GoToDeclarationAction=I;var k=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype._showSingleReferenceInPeek=function(){return!0},t.ID="editor.action.previewDeclaration",t=__decorate([__param(2,_.IMessageService),__param(3,b.ITelemetryService),__param(4,E.IEditorService)],t)}(I);t.PreviewDeclarationAction=k;var x=function(){function e(e,t,n,i){var r=this;this.editorService=i,this.requestService=t,this.messageService=n,this.hasRequiredServices=!!this.messageService&&!!this.requestService&&!!this.editorService,this.toUnhook=[],this.decorations=[],this.editor=e,this.throttler=new s.Throttler,this.toUnhook.push(this.editor.addListener(f.EventType.MouseDown,function(e){return r.onEditorMouseDown(e)})),this.toUnhook.push(this.editor.addListener(f.EventType.MouseUp,function(e){return r.onEditorMouseUp(e)})),this.toUnhook.push(this.editor.addListener(f.EventType.MouseMove,function(e){return r.onEditorMouseMove(e)})),this.toUnhook.push(this.editor.addListener(f.EventType.KeyDown,function(e){return r.onEditorKeyDown(e)})),this.toUnhook.push(this.editor.addListener(f.EventType.KeyUp,function(e){return r.onEditorKeyUp(e)})),this.toUnhook.push(this.editor.addListener(f.EventType.ModelChanged,function(e){return r.resetHandler()})),this.toUnhook.push(this.editor.addListener("change",function(e){return r.resetHandler()})),this.toUnhook.push(this.editor.addListener("scroll",function(){return r.resetHandler()}))}return e.prototype.onEditorMouseMove=function(e,t){this.lastMouseMoveEvent=e,this.startFindDefinition(e,t)},e.prototype.startFindDefinition=function(t,i){var r=this;if(!this.isEnabled(t,i))return this.currentWordUnderMouse=null,void this.removeDecorations();var o=t.target.position,s=o?this.editor.getModel().getWordAtPosition(o):null;if(!s)return this.currentWordUnderMouse=null,void this.removeDecorations();if(!this.currentWordUnderMouse||this.currentWordUnderMouse.startColumn!==s.startColumn||this.currentWordUnderMouse.endColumn!==s.endColumn||this.currentWordUnderMouse.word!==s.word){this.currentWordUnderMouse=s;var u=this.editor.captureState(f.CodeEditorStateFlag.Position,f.CodeEditorStateFlag.Value,f.CodeEditorStateFlag.Selection,f.CodeEditorStateFlag.Scroll);this.throttler.queue(function(){return u.validate(r.editor)?r.findDefinition(t.target):l.TPromise.as(null)}).then(function(t){if(!t||!t.length||!u.validate(r.editor))return void r.removeDecorations();if(t.length>1)r.addDecoration({startLineNumber:o.lineNumber,startColumn:s.startColumn,endLineNumber:o.lineNumber,endColumn:s.endColumn},n.localize(0,null,t.length),!1);else{var i=t[0];r.editorService.resolveEditorModel({resource:i.resource}).then(function(t){var n;if(t&&t.textEditorModel){var c,u,l=Math.max(1,i.range.startLineNumber);u=t.textEditorModel,c=i.range.startLineNumber!==i.range.endLineNumber||i.range.startColumn!==i.range.endColumn?Math.min(i.range.endLineNumber,i.range.startLineNumber+e.MAX_SOURCE_PREVIEW_LINES,u.getLineCount()):Math.min(l+e.MAX_SOURCE_PREVIEW_LINES,u.getLineCount()),n=u.getValueInRange({startLineNumber:l,startColumn:1,endLineNumber:c,endColumn:u.getLineMaxColumn(c)}).trim();for(var d,h,p=Number.MAX_VALUE,f=/^[ \t]*/;c>=l&&p>0;)h=u.getLineContent(l++),0!==h.trim().length&&(d=f.exec(h),p=Math.min(p,d[0].length));n=n.replace(new RegExp("^([ \\t]{"+p+"})","gm"),a.empty),i.range.endLineNumber-i.range.startLineNumber>e.MAX_SOURCE_PREVIEW_LINES&&(n+="\n")}r.addDecoration({startLineNumber:o.lineNumber,startColumn:s.startColumn,endLineNumber:o.lineNumber,endColumn:s.endColumn},n,!0)})}}).done(void 0,c.onUnexpectedError)}},e.prototype.addDecoration=function(e,t,n){var i=this.editor.getModel();if(i){var r={tagName:"div",className:"goto-definition-link-hover",style:"tab-size: "+this.editor.getIndentationOptions().tabSize};t&&t.trim().length>0&&(r.children=[n?m.tokenizeToHtmlContent(t,i.getMode()):{tagName:"span",text:t}]);var o={range:e,options:{inlineClassName:"goto-definition-link",htmlMessage:[r]}};this.decorations=this.editor.deltaDecorations(this.decorations,[o])}},e.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},e.prototype.onEditorKeyDown=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&this.lastMouseMoveEvent?this.startFindDefinition(this.lastMouseMoveEvent,t):t[e.TRIGGER_MODIFIER]&&this.removeDecorations()},e.prototype.resetHandler=function(){this.lastMouseMoveEvent=null,this.removeDecorations()},e.prototype.onEditorMouseDown=function(t){this.hasTriggerKeyOnMouseDown=!!t.event[e.TRIGGER_MODIFIER]},e.prototype.onEditorMouseUp=function(e){var t=this;this.isEnabled(e)&&this.hasTriggerKeyOnMouseDown&&this.gotoDefinition(e.target,e.event.altKey).done(function(){t.removeDecorations()},function(e){t.removeDecorations(),c.onUnexpectedError(e)})},e.prototype.onEditorKeyUp=function(t){t.keyCode===e.TRIGGER_KEY_VALUE&&(this.removeDecorations(),this.currentWordUnderMouse=null)},e.prototype.isEnabled=function(t,n){return this.hasRequiredServices&&this.editor.getModel()&&(o.isIE11orEarlier||t.event.detail<=1)&&t.target.type===f.MouseTargetType.CONTENT_TEXT&&(t.event[e.TRIGGER_MODIFIER]||n&&n.keyCode===e.TRIGGER_KEY_VALUE)&&w.DeclarationRegistry.has(this.editor.getModel())},e.prototype.findDefinition=function(e){var t=this.editor.getModel();return t?w.getDeclarationsAtPosition(this.editor.getModel(),e.position):l.TPromise.as(null)},e.prototype.gotoDefinition=function(e,t){var n=this,i=this.editor.captureState(f.CodeEditorStateFlag.Position,f.CodeEditorStateFlag.Value,f.CodeEditorStateFlag.Selection,f.CodeEditorStateFlag.Scroll);return this.findDefinition(e).then(function(r){if(r&&r.length&&i.validate(n.editor)){var o=e.position,s=n.editor.getModel().getWordAtPosition(o),a=r.filter(function(t){return t.range&&!(s&&t.range.startColumn===s.startColumn&&t.range.startLineNumber===e.position.lineNumber)}).map(function(e){return{resource:e.resource,range:v.Range.collapseToStart(e.range)}});if(a.length){if(a.length>1){var c=S.FindReferencesController.getController(n.editor);return c.processRequest(n.editor.getSelection(),l.TPromise.as(a))}return n.editorService.openEditor({resource:a[0].resource,options:{selection:a[0].range}},t)}}})},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){for(;this.toUnhook.length>0;)this.toUnhook.pop()()},e.ID="editor.contrib.gotodefinitionwithmouse",e.TRIGGER_MODIFIER=r.isMacintosh?"metaKey":"ctrlKey",e.TRIGGER_KEY_VALUE=r.isMacintosh?g.KeyCode.Meta:g.KeyCode.Ctrl,e.MAX_SOURCE_PREVIEW_LINES=7,e=__decorate([__param(1,y.IRequestService),__param(2,_.IMessageService),__param(3,E.IEditorService)],e)}();h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(k,k.ID,n.localize(1,null),{context:h.ContextKey.EditorTextFocus,primary:g.KeyMod.Alt|g.KeyCode.F12,linux:{primary:g.KeyMod.CtrlCmd|g.KeyMod.Shift|g.KeyCode.F10}}));var A;A=r.isWeb?g.KeyMod.CtrlCmd|g.KeyCode.F12:g.KeyCode.F12,h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(I,I.ID,n.localize(2,null),{context:h.ContextKey.EditorTextFocus,primary:A})),h.CommonEditorRegistry.registerEditorAction(new h.EditorActionDescriptor(T,T.ID,n.localize(3,null))),d.EditorBrowserRegistry.registerEditorContribution(x)}),define("vs/editor/browser/editor.all",["vs/editor/browser/widget/codeEditorWidget","vs/editor/browser/widget/diffEditorWidget","vs/editor/contrib/clipboard/browser/clipboard","vs/editor/contrib/codelens/browser/codelens","vs/editor/contrib/color/browser/color","vs/editor/contrib/comment/common/comment","vs/editor/contrib/contextmenu/browser/contextmenu","vs/editor/contrib/diffNavigator/common/diffNavigator","vs/editor/contrib/find/browser/find","vs/editor/contrib/format/common/formatActions","vs/editor/contrib/goToDeclaration/browser/goToDeclaration","vs/editor/contrib/gotoError/browser/gotoError","vs/editor/contrib/hover/browser/hover","vs/editor/contrib/inPlaceReplace/common/inPlaceReplace","vs/editor/contrib/iPadShowKeyboard/browser/iPadShowKeyboard","vs/editor/contrib/linesOperations/common/linesOperations","vs/editor/contrib/links/browser/links","vs/editor/contrib/multicursor/common/multicursor","vs/editor/contrib/outlineMarker/browser/outlineMarker","vs/editor/contrib/parameterHints/browser/parameterHints","vs/editor/contrib/quickFix/browser/quickFix","vs/editor/contrib/referenceSearch/browser/referenceSearch","vs/editor/contrib/rename/browser/rename","vs/editor/contrib/rename/browser/rename2","vs/editor/contrib/smartSelect/common/smartSelect","vs/editor/contrib/smartSelect/common/jumpToBracket","vs/editor/contrib/snippet/common/snippet","vs/editor/contrib/snippet/browser/snippet","vs/editor/contrib/suggest/browser/suggest","vs/editor/contrib/toggleTabFocusMode/common/toggleTabFocusMode","vs/editor/contrib/wordHighlighter/common/wordHighlighter","vs/editor/contrib/workerStatusReporter/browser/workerStatusReporter","vs/editor/contrib/defineKeybinding/browser/defineKeybinding","vs/editor/common/languages.common"],function(){});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/platform/telemetry/common/workspaceStats",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s){var a=function(){function e(e,t,n){this.fileService=e,this.contextService=t,this.telemetryService=n}return e.prototype.searchArray=function(e,t){return e.some(function(e){return e.search(t)>-1})},e.prototype.getWorkspaceTags=function(){var e=this,t=Object.create(null),r=this.contextService.getWorkspace();return r&&this.fileService?this.fileService.resolveFile(r.resource).then(function(n){var i=n.children.map(function(e){return e.name});t["workspace.empty"]=!1,t["workspace.language.cs"]=e.searchArray(i,/^.+\.cs$/i),t["workspace.language.js"]=e.searchArray(i,/^.+\.js$/i),t["workspace.language.ts"]=e.searchArray(i,/^.+\.ts$/i),t["workspace.language.php"]=e.searchArray(i,/^.+\.php$/i),t["workspace.language.python"]=e.searchArray(i,/^.+\.py$/i),t["workspace.language.vb"]=e.searchArray(i,/^.+\.vb$/i),t["workspace.language.aspx"]=e.searchArray(i,/^.+\.aspx$/i),t["workspace.grunt"]=e.searchArray(i,/^gruntfile\.js$/i),t["workspace.gulp"]=e.searchArray(i,/^gulpfile\.js$/i),t["workspace.jake"]=e.searchArray(i,/^jakefile\.js$/i),t["workspace.tsconfig"]=e.searchArray(i,/^tsconfig\.json$/i),t["workspace.jsconfig"]=e.searchArray(i,/^jsconfig\.json$/i),t["workspace.config.xml"]=e.searchArray(i,/^config\.xml/i),t["workspace.vsc.extension"]=e.searchArray(i,/^vsc-extension-quickstart\.md/i),t["workspace.ASP5"]=e.searchArray(i,/^project\.json$/i)&&t["workspace.language.cs"],t["workspace.sln"]=e.searchArray(i,/^.+\.sln$|^.+\.csproj$/i),t["workspace.unity"]=e.searchArray(i,/^Assets$/i)&&e.searchArray(i,/^Library$/i)&&e.searchArray(i,/^ProjectSettings/i),t["workspace.npm"]=e.searchArray(i,/^package\.json$|^node_modules$/i),t["workspace.bower"]=e.searchArray(i,/^bower\.json$|^bower_components$/i),t["workspace.yeoman.code"]=e.searchArray(i,/^vscodequickstart\.md$/i),t["workspace.yeoman.code.ext"]=e.searchArray(i,/^vsc-extension-quickstart\.md$/i);var r=e.searchArray(i,/^MainActivity\.cs$/i)||e.searchArray(i,/^MainActivity\.fs$/i),o=e.searchArray(i,/^AppDelegate\.cs$/i)||e.searchArray(i,/^AppDelegate\.fs$/i),s=e.searchArray(i,/^AndroidManifest\.xml$/i),a=e.searchArray(i,/^platforms$/i),c=e.searchArray(i,/^plugins$/i),u=e.searchArray(i,/^www$/i),l=e.searchArray(i,/^Properties/i),d=e.searchArray(i,/^Resources/i),h=e.searchArray(i,/^JNI/i);return!t["workspace.config.xml"]||t["workspace.language.cs"]||t["workspace.language.vb"]||t["workspace.language.aspx"]||(a&&c&&u?t["workspace.cordova.high"]=!0:t["workspace.cordova.low"]=!0),r&&l&&d&&(t["workspace.xamarin.android"]=!0),o&&d&&(t["workspace.xamarin.ios"]=!0),s&&h&&(t["workspace.android.cpp"]=!0),t},function(e){return i.onUnexpectedError(e),null}):(t["workspace.empty"]=!0,n.TPromise.as(t))},e.prototype.reportWorkspaceTags=function(){var e=this;this.getWorkspaceTags().then(function(t){e.telemetryService.publicLog("workspce.tags",t)},function(e){return i.onUnexpectedError(e)})},e=__decorate([__param(0,r.IFileService),__param(1,s.IWorkspaceContextService),__param(2,o.ITelemetryService)],e)}();t.WorkspaceStats=a}),define("vs/platform/workspace/common/baseWorkspaceContextService",["require","exports","vs/base/common/uri","vs/base/common/paths","./workspace"],function(e,t,n,i,r){var o=function(){function e(e,t,n){void 0===n&&(n={}),this.serviceId=r.IWorkspaceContextService,this.workspace=e,this.configuration=t,this.options=n}return e.prototype.getWorkspace=function(){return this.workspace},e.prototype.getConfiguration=function(){return this.configuration},e.prototype.getOptions=function(){return this.options},e.prototype.isInsideWorkspace=function(e){return e&&this.workspace?i.isEqualOrParent(e.fsPath,this.workspace.resource.fsPath):!1},e.prototype.toWorkspaceRelativePath=function(e){return this.isInsideWorkspace(e)?i.normalize(i.relative(this.workspace.resource.fsPath,e.fsPath)):null},e.prototype.toResource=function(e){return"string"==typeof e&&this.workspace?n["default"].file(i.join(this.workspace.resource.fsPath,e)):null},e}();t.BaseWorkspaceContextService=o});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/extHostLanguages",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/editor/common/modes/modesRegistry","vs/platform/platform","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){var a=function(){function e(e){this._proxy=e.getRemotable(c)}return e.prototype.getLanguages=function(){return this._proxy._getLanguages()},e=__decorate([__param(0,i.IThreadService)],e)}();t.ExtHostLanguages=a;var c=function(){function e(e){this._registry=o.Registry.as(r.Extensions.EditorModes)}return e.prototype._getLanguages=function(){return n.TPromise.as(this._registry.getRegisteredModes())},e=__decorate([i.Remotable.MainContext("MainThreadLanguages"),__param(0,s.INullService)],e)}();t.MainThreadLanguages=c}),define("vs/workbench/api/common/mainThreadEditors",["require","exports","vs/editor/common/editorCommon","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/async","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,t,n,i,r,o,s,a){function c(e,t){return e&&!t||!e&&t?!1:e||t?e.tabSize===t.tabSize&&e.insertSpaces===t.insertSpaces:!0}function u(e,t){return t>e?-1:e>t?1:0}!function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport"}(t.TextEditorRevealType||(t.TextEditorRevealType={}));var l=t.TextEditorRevealType,d=function(){function e(e,t,n,r){this._id=e,this._model=t,this._codeEditor=null,this._focusTracker=r,this._codeEditorListeners=[],this._onSelectionChanged=new i.Emitter,this._onConfigurationChanged=new i.Emitter,this._lastSelection=[new a.Selection(1,1,1,1)],this._lastConfiguration={insertSpaces:!1,tabSize:4},this.setCodeEditor(n)}return e.prototype.dispose=function(){this._model=null,this._codeEditor=null,this._codeEditorListeners=r.disposeAll(this._codeEditorListeners)},e.prototype.getId=function(){return this._id},e.prototype.getModel=function(){return this._model},e.prototype.hasCodeEditor=function(e){return this._codeEditor===e},e.prototype.setCodeEditor=function(t){var i=this;if(!this.hasCodeEditor(t)&&(this._codeEditorListeners=r.disposeAll(this._codeEditorListeners),this._codeEditor=t,this._codeEditor)){var o=function(){i._lastSelection=i._codeEditor.getSelections(),i._onSelectionChanged.fire(i._lastSelection)};this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.CursorSelectionChanged,o)),a.Selection.selectionsArrEqual(this._lastSelection,this._codeEditor.getSelections())||o();var s=function(){i._lastConfiguration=e._readConfiguration(i._codeEditor),i._onConfigurationChanged.fire(i._lastConfiguration)};this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.ConfigurationChanged,s)),c(this._lastConfiguration,e._readConfiguration(this._codeEditor))||s(),this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.EditorFocus,function(){i._focusTracker.onGainedFocus()})),this._codeEditorListeners.push(this._codeEditor.addListener2(n.EventType.EditorBlur,function(){i._focusTracker.onLostFocus()}))}},e.prototype.isVisible=function(){return!!this._codeEditor},Object.defineProperty(e.prototype,"onSelectionChanged",{get:function(){return this._onSelectionChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onConfigurationChanged",{get:function(){return this._onConfigurationChanged.event},enumerable:!0,configurable:!0}),e.prototype.getSelections=function(){return this._codeEditor?this._codeEditor.getSelections():this._lastSelection},e.prototype.setSelections=function(e){return this._codeEditor?void this._codeEditor.setSelections(e):(this._lastSelection=e.map(a.Selection.liftSelection),void console.warn("setSelections on invisble editor"))},e.prototype.getConfiguration=function(){return this._codeEditor?e._readConfiguration(this._codeEditor):this._lastConfiguration},e.prototype.setConfiguration=function(e){return this._codeEditor?void this._codeEditor.updateOptions(e):(this._lastConfiguration.tabSize="undefined"!=typeof e.tabSize?e.tabSize:this._lastConfiguration.tabSize,this._lastConfiguration.insertSpaces="undefined"!=typeof e.insertSpaces?e.insertSpaces:this._lastConfiguration.insertSpaces,void console.warn("setConfiguration on invisible editor"))},e.prototype.setDecorations=function(e,t){return this._codeEditor?void this._codeEditor.setDecorations(e,t):void console.warn("setDecorations on invisible editor")},e.prototype.revealRange=function(e,t){return this._codeEditor?void(t===l.Default?this._codeEditor.revealRange(e):t===l.InCenter?this._codeEditor.revealRangeInCenter(e):t===l.InCenterIfOutsideViewport?this._codeEditor.revealRangeInCenterIfOutsideViewport(e):console.warn("Unknown revealType")):void console.warn("revealRange on invisible editor")},e._readConfiguration=function(e){var t=e.getIndentationOptions();return{insertSpaces:t.insertSpaces,tabSize:t.tabSize}},e.prototype.isFocused=function(){return this._codeEditor?this._codeEditor.isFocused():!1},e.prototype.matches=function(e){return e.getControl()===this._codeEditor},e.prototype.applyEdits=function(e,t){if(this._model.getVersionId()!==e)return console.warn("Model has changed in the meantime!"),!1;if(this._codeEditor){var n=t.map(function(e){return{identifier:null,range:s.Range.lift(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers}});return this._codeEditor.executeEdits("MainThreadTextEditor",n)||!0}return console.warn("applyEdits on invisible editor"),!1},e}();t.MainThreadTextEditor=d;var h=function(){function e(e,t){var n=this;this._codeEditorService=e,this._modelService=t,this._toDispose=[],this._focusedTextEditorId=null,this._visibleTextEditorIds=[],this._editorModelChangeListeners=Object.create(null),this._model2TextEditors=Object.create(null),this._onTextEditorAdd=new i.Emitter,this._onTextEditorRemove=new i.Emitter,this._onDidUpdateTextEditors=new i.Emitter,this._onDidChangeFocusedTextEditor=new i.Emitter,this._focusTracker={onGainedFocus:function(){return n._updateFocusedTextEditor()},onLostFocus:function(){return n._updateFocusedTextEditor()}},this._modelService.onModelAdded.add(this._onModelAdded,this,this._toDispose),this._modelService.onModelRemoved.add(this._onModelRemoved,this,this._toDispose),this._codeEditorService.onCodeEditorAdd(this._onCodeEditorAdd,this,this._toDispose),this._codeEditorService.onCodeEditorRemove(this._onCodeEditorRemove,this,this._toDispose),this._updateMapping=new o.RunOnceScheduler(function(){return n._doUpdateMapping()},0),this._toDispose.push(this._updateMapping)}return e.prototype._nextId=function(){return String(++e._LAST_TEXT_EDITOR_ID)},e.prototype.dispose=function(){this._toDispose=r.disposeAll(this._toDispose)},e.prototype._onModelAdded=function(e){this._updateMapping.schedule()},e.prototype._onModelRemoved=function(e){this._updateMapping.schedule()},e.prototype._onCodeEditorAdd=function(e){var t=this;this._editorModelChangeListeners[e.getId()]=e.addListener2(n.EventType.ModelChanged,function(e){return t._updateMapping.schedule()}),this._updateMapping.schedule()},e.prototype._onCodeEditorRemove=function(e){this._editorModelChangeListeners[e.getId()].dispose(),delete this._editorModelChangeListeners[e.getId()],this._updateMapping.schedule()},e.prototype._doUpdateMapping=function(){var e=this,t=this._modelService.getModels();t.filter(function(e){return!e.isTooLargeForHavingARichMode()});var n=Object.create(null);t.forEach(function(e){n[e.getAssociatedResource().toString()]=e}),Object.keys(this._model2TextEditors).forEach(function(t){if(!n[t]){var i=e._model2TextEditors[t];delete e._model2TextEditors[t];for(var r=0;r<i.length;r++)e._onTextEditorRemove.fire(i[r]),i[r].dispose()}});var i=this._getVisibleModels();Object.keys(i).forEach(function(t){var n=i[t].model,r=i[t].codeEditors;e._model2TextEditors[t]||(e._model2TextEditors[t]=[]);for(var o=e._model2TextEditors[t];o.length>r.length;){var s=o.pop();e._onTextEditorRemove.fire(s),s.dispose()}for(var a=0;a<o.length;a++)o[a].setCodeEditor(r[a]);for(var a=o.length;a<r.length;a++){var c=new d(e._nextId(),n,r[a],e._focusTracker);o.push(c),e._onTextEditorAdd.fire(c)}}),t.forEach(function(t){var n=t.getAssociatedResource().toString();if(!i[n]){e._model2TextEditors[n]||(e._model2TextEditors[n]=[]);for(var r=e._model2TextEditors[n];r.length>1;){var o=r.pop();e._onTextEditorRemove.fire(o),o.dispose()}if(0===r.length){var s=new d(e._nextId(),t,null,e._focusTracker);r.push(s),e._onTextEditorAdd.fire(s)}else r[0].setCodeEditor(null)}}),this._printState(),this._visibleTextEditorIds=this._findVisibleTextEditorIds(),this._updateFocusedTextEditor(),this._onDidUpdateTextEditors.fire(void 0)},e.prototype._updateFocusedTextEditor=function(){this._setFocusedTextEditorId(this._findFocusedTextEditorId())},e.prototype._findFocusedTextEditorId=function(){for(var e=Object.keys(this._model2TextEditors),t=0,n=e.length;n>t;t++)for(var i=this._model2TextEditors[e[t]],r=0,o=i.length;o>r;r++)if(i[r].isFocused())return i[r].getId();return null},e.prototype._findVisibleTextEditorIds=function(){for(var e=[],t=Object.keys(this._model2TextEditors),n=0,i=t.length;i>n;n++)for(var r=this._model2TextEditors[t[n]],o=0,s=r.length;s>o;o++)r[o].isVisible()&&e.push(r[o].getId());return e.sort(),e},e.prototype._setFocusedTextEditorId=function(e){this._focusedTextEditorId!==e&&(this._focusedTextEditorId=e,this._printState(),this._onDidChangeFocusedTextEditor.fire(this._focusedTextEditorId))},e.prototype._printState=function(){},e.prototype._getVisibleModels=function(){var e={},t=this._codeEditorService.listCodeEditors();return t.sort(function(e,t){return u(e.getId(),t.getId())}),t.forEach(function(t){var n=t.getModel();if(n){var i=n.getAssociatedResource().toString();e[i]=e[i]||{model:n,codeEditors:[]},e[i].codeEditors.push(t)}}),e},e.prototype.getFocusedTextEditorId=function(){return this._focusedTextEditorId},e.prototype.getVisibleTextEditorIds=function(){return this._visibleTextEditorIds},Object.defineProperty(e.prototype,"onTextEditorAdd",{get:function(){return this._onTextEditorAdd.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextEditorRemove",{get:function(){return this._onTextEditorRemove.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidUpdateTextEditors",{get:function(){return this._onDidUpdateTextEditors.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onChangedFocusedTextEditor",{get:function(){return this._onDidChangeFocusedTextEditor.event},enumerable:!0,configurable:!0}),e.prototype.findTextEditorIdFor=function(e){for(var t=Object.keys(this._model2TextEditors),n=0,i=t.length;i>n;n++)for(var r=this._model2TextEditors[t[n]],o=0,s=r.length;s>o;o++)if(r[o].hasCodeEditor(e))return r[o].getId();return null},e.prototype.registerTextEditorDecorationType=function(e,t){this._codeEditorService.registerDecorationType(e,t)},e.prototype.removeTextEditorDecorationType=function(e){this._codeEditorService.removeDecorationType(e)},e._LAST_TEXT_EDITOR_ID=0,e}();t.MainThreadEditorsTracker=h});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){
return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostConfiguration",["require","exports","vs/base/common/objects","vs/base/common/lifecycle","vs/platform/thread/common/thread","vs/platform/configuration/common/configuration","vs/base/common/event","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a){var c=function(){function e(e){this._onDidChangeConfiguration=new s.Emitter}return Object.defineProperty(e.prototype,"onDidChangeConfiguration",{get:function(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event},enumerable:!0,configurable:!0}),e.prototype._acceptConfigurationChanged=function(e){this._config=e,this._hasConfig=!0,this._onDidChangeConfiguration.fire(void 0)},e.prototype.getConfiguration=function(t){if(this._hasConfig){var i=t?e._lookUp(t,this._config):this._config,r=i?n.clone(i):{};return r.has=function(t){return"undefined"!=typeof e._lookUp(t,i)},r.get=function(t,n){var r=e._lookUp(t,i);return"undefined"==typeof r&&(r=n),r},r}},e._lookUp=function(e,t){if(e){for(var n=e.split("."),i=t;i&&n.length;)i=i[n.shift()];return i}},e=__decorate([r.Remotable.PluginHostContext("PluginHostConfiguration"),__param(0,a.INullService)],e)}();t.PluginHostConfiguration=c;var u=function(){function e(e,t){var n=this;this._configurationService=e,this._proxy=t.getRemotable(c),this._toDispose=[],this._toDispose.push(this._configurationService.addListener2(o.ConfigurationServiceEventTypes.UPDATED,function(e){n._proxy._acceptConfigurationChanged(e.config)})),this._configurationService.loadConfiguration().then(function(e){n._proxy._acceptConfigurationChanged(e)})}return e.prototype.dispose=function(){this._toDispose=i.disposeAll(this._toDispose)},e=__decorate([r.Remotable.MainContext("MainProcessConfigurationServiceHelper"),__param(0,o.IConfigurationService),__param(1,r.IThreadService)],e)}();t.MainThreadConfiguration=u});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostDiagnostics",["require","exports","vs/platform/thread/common/thread","vs/platform/markers/common/markers","vs/base/common/uri","vs/base/common/severity"],function(e,t,n,i,r,o){var s=function(){function e(e,t){this._name=e,this._proxy=t}return e.prototype.dispose=function(){var e=this;this._isDisposed||this._proxy._changeAll(this.name,void 0).then(function(){e._proxy=void 0,e._isDisposed=!0})},Object.defineProperty(e.prototype,"name",{get:function(){return this._checkDisposed(),this._name},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this._checkDisposed(),t instanceof r["default"]){var i;if(n){i=[];var o=n.length;o>e._maxDiagnosticsPerFile&&(console.warn("diagnostics for %s will be capped to %d (actually is %d)",t.toString(),e._maxDiagnosticsPerFile,o),o=e._maxDiagnosticsPerFile);for(var s=0;o>s;s++)i.push(e._toMarkerData(n[s]))}return this._proxy._changeOne(this.name,t,i)}var i,a=t;if(a){var c=0;i=[];for(var u=0;u<a.length;u++){var l=a[u],d=l[0],h=l[1];if(h){var o=h.length;o>e._maxDiagnosticsPerFile&&(console.warn("diagnostics for %s will be capped to %d (actually is %d)",d.toString(),e._maxDiagnosticsPerFile,o),o=e._maxDiagnosticsPerFile);for(var s=0;o>s;s++)i.push({resource:d,marker:e._toMarkerData(h[s])});if(c+=o,c>10*e._maxDiagnosticsPerFile){console.warn("too many diagnostics will cap to %d",10*e._maxDiagnosticsPerFile);break}}}}this._proxy._changeAll(this.name,i)},e.prototype["delete"]=function(e){return this.set(e,void 0)},e.prototype.clear=function(){return this.set(void 0)},e.prototype._checkDisposed=function(){if(this._isDisposed)throw new Error("illegal state - object is disposed")},e._toMarkerData=function(t){var n=t.range;return{startLineNumber:n.start.line+1,startColumn:n.start.character+1,endLineNumber:n.end.line+1,endColumn:n.end.character+1,message:t.message,source:t.source,severity:e._convertDiagnosticsSeverity(t.severity),code:String(t.code)}},e._convertDiagnosticsSeverity=function(e){switch(e){case 0:return o["default"].Error;case 1:return o["default"].Warning;case 2:return o["default"].Info;case 3:return o["default"].Ignore;default:return o["default"].Error}},e._maxDiagnosticsPerFile=250,e}(),a=function(){function e(e){this._proxy=e.getRemotable(c)}return e.prototype.createDiagnosticCollection=function(t){return t||(t="_generated_diagnostic_collection_name_#"+e._idPool++),new s(t,this._proxy)},e._idPool=0,e}();t.PluginHostDiagnostics=a;var c=function(){function e(e){this._markerService=e}return e.prototype._changeOne=function(e,t,n){this._markerService.changeOne(e,t,n)},e.prototype._changeAll=function(e,t){this._markerService.changeAll(e,t)},e=__decorate([n.Remotable.MainContext("MainThreadDiagnostics"),__param(0,i.IMarkerService)],e)}();t.MainThreadDiagnostics=c});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostMessageService",["require","exports","vs/nls!vs/workbench/api/common/pluginHostMessageService","vs/platform/thread/common/thread","vs/platform/message/common/message","vs/base/common/actions","vs/base/common/winjs.base"],function(e,t,n,i,r,o,s){var a=function(){function e(e,t){this._proxy=e.getRemotable(c),this._commands=t}return e.prototype.showMessage=function(e,t,n){for(var i=[],r=0;r<n.length;r++){var o=n[r];"string"==typeof o?i.push({title:o,handle:r}):i.push({title:o.title,handle:r})}return this._proxy.showMessage(e,t,i).then(function(e){return"number"==typeof e?n[e]:void 0})},e=__decorate([__param(0,i.IThreadService)],e)}();t.PluginHostMessageService=a;var c=function(){function e(e){this._messageService=e}return e.prototype.showMessage=function(e,t,i){var r,a=this,c=[];return c.push(new o.Action("__close",n.localize(0,null),void 0,!0,function(){return r(),s.TPromise.as(void 0)})),i.forEach(function(e){c.push(new o.Action("_extension_message_handle_"+e.handle,e.title,void 0,!0,function(){return r(e.handle),s.TPromise.as(void 0)}))}),new s.TPromise(function(n){var i;r=function(e){i(),n(e)},i=a._messageService.show(e,{message:t,actions:c})})},e=__decorate([i.Remotable.MainContext("MainThreadMessageService"),__param(0,r.IMessageService)],e)}();t.MainThreadMessageService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/api/common/pluginHostTelemetry",["require","exports","vs/platform/telemetry/common/abstractRemoteTelemetryService"],function(e,t,n){var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.handleEvent=function(t,n){var n=n||{};n.pluginHostTelemetry=!0,e.prototype.handleEvent.call(this,t,n)},t}(n.AbstractRemoteTelemetryService);t.PluginHostTelemetryService=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/api/common/pluginHostTypes",["require","exports","vs/base/common/uri","vs/base/common/errors"],function(e,t,n,i){var r=function(){function e(e){this._callOnDispose=e}return e.from=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return new e(function(){if(t){for(var e=0;e<t.length;e++){var n=t[e];n&&"function"==typeof n.dispose&&n.dispose()}t=void 0}})},e.prototype.dispose=function(){"function"==typeof this._callOnDispose&&(this._callOnDispose(),this._callOnDispose=void 0)},e}();t.Disposable=r;var o=function(){function e(e,t){if(0>e)throw i.illegalArgument("line must be positive");if(0>t)throw i.illegalArgument("character must be positive");this._line=e,this._character=t}return e.Min=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=e.pop(),i=0;i<e.length;i++){var r=e[i];r.isBefore(n)&&(n=r)}return n},e.Max=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=e.pop(),i=0;i<e.length;i++){var r=e[i];r.isAfter(n)&&(n=r)}return n},Object.defineProperty(e.prototype,"line",{get:function(){return this._line},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"character",{get:function(){return this._character},enumerable:!0,configurable:!0}),e.prototype.isBefore=function(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character},e.prototype.isBeforeOrEqual=function(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character},e.prototype.isAfter=function(e){return!this.isBeforeOrEqual(e)},e.prototype.isAfterOrEqual=function(e){return!this.isBefore(e)},e.prototype.isEqual=function(e){return this._line===e._line&&this._character===e._character},e.prototype.compareTo=function(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0},e.prototype.translate=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),0===t&&0===n?this:new e(this.line+t,this.character+n)},e.prototype["with"]=function(t,n){return void 0===t&&(t=this.line),void 0===n&&(n=this.character),t===this.line&&n===this.character?this:new e(t,n)},e}();t.Position=o;var s=function(){function e(e,t,n,i){var r,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?(r=new o(e,t),s=new o(n,i)):e instanceof o&&t instanceof o&&(r=e,s=t),!r||!s)throw new Error("Invalid arguments");r.isBefore(s)?(this._start=r,this._end=s):(this._start=s,this._end=r)}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return t instanceof e?this.contains(t._start)&&this.contains(t._end):t instanceof o?t.isBefore(this._start)?!1:this._end.isBefore(t)?!1:!0:!1},e.prototype.isEqual=function(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)},e.prototype.intersection=function(t){var n=o.Max(t.start,this._start),i=o.Min(t.end,this._end);return n.isAfter(i)?void 0:new e(n,i)},e.prototype.union=function(t){if(this.contains(t))return this;if(t.contains(this))return t;var n=o.Min(t.start,this._start),i=o.Max(t.end,this.end);return new e(n,i)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._start.isEqual(this._end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleLine",{get:function(){return this._start.line===this._end.line},enumerable:!0,configurable:!0}),e.prototype["with"]=function(t,n){return void 0===t&&(t=this.start),void 0===n&&(n=this.end),t.isEqual(this._start)&&n.isEqual(this.end)?this:new e(t,n)},e}();t.Range=s;var a=function(e){function t(t,n,i,r){var s,a;if("number"==typeof t&&"number"==typeof n&&"number"==typeof i&&"number"==typeof r?(s=new o(t,n),a=new o(i,r)):t instanceof o&&n instanceof o&&(s=t,a=n),!s||!a)throw new Error("Invalid arguments");this._anchor=s,this._active=a,e.call(this,s,a)}return __extends(t,e),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReversed",{get:function(){return this._anchor===this._end},enumerable:!0,configurable:!0}),t}(s);t.Selection=a;var c=function(){function e(e,t){this.range=e,this.newText=t}return e.replace=function(t,n){return new e(t,n)},e.insert=function(t,n){return e.replace(new s(t,t),n)},e["delete"]=function(t){return e.replace(t,"")},Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){if(!e)throw i.illegalArgument("range");this._range=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newText",{get:function(){return this._newText||""},set:function(e){this._newText=e},enumerable:!0,configurable:!0}),e}();t.TextEdit=c;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n["default"]);t.Uri=u;var l=function(){function e(){this._values=[],this._index=Object.create(null)}return e.prototype.replace=function(e,t,n){var i=new c(t,n),r=this.get(e);r?r.push(i):this.set(e,[i])},e.prototype.insert=function(e,t,n){this.replace(e,new s(t,t),n)},e.prototype["delete"]=function(e,t){this.replace(e,t,"")},e.prototype.has=function(e){return"undefined"!=typeof this._index[e.toString()]},e.prototype.set=function(e,t){var n=this._index[e.toString()];if("undefined"==typeof n){var i=this._values.push([e,t]);this._index[e.toString()]=i-1}else this._values[n][1]=t},e.prototype.get=function(e){var t=this._index[e.toString()];return"undefined"!=typeof t&&this._values[t][1]},e.prototype.entries=function(){return this._values},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e}();t.WorkspaceEdit=l,function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"}(t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var d=t.DiagnosticSeverity,h=function(){function e(e,t){if(this.uri=e,t instanceof s)this.range=t;else{if(!(t instanceof o))throw new Error("Illegal argument");this.range=new s(t,t)}}return e}();t.Location=h;var p=function(){function e(e,t,n){void 0===n&&(n=d.Error),this.range=e,this.message=t,this.severity=n}return e}();t.Diagnostic=p;var f=function(){function e(e,t){if(!e)throw new Error("Illegal argument");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}return e}();t.Hover=f,function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var m=t.DocumentHighlightKind,v=function(){function e(e,t){void 0===t&&(t=m.Text),this.range=e,this.kind=t}return e}();t.DocumentHighlight=v,function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array"}(t.SymbolKind||(t.SymbolKind={}));var g=(t.SymbolKind,function(){function e(e,t,n,i,r){this.name=e,this.kind=t,this.location=new h(i,n),this.containerName=r}return e}());t.SymbolInformation=g;var y=function(){function e(e,t){this.range=e,this.command=t}return Object.defineProperty(e.prototype,"isResolved",{get:function(){return!!this.command},enumerable:!0,configurable:!0}),e}();t.CodeLens=y;var _=function(){function e(e,t){this.label=e,this.documentation=t}return e}();t.ParameterInformation=_;var b=function(){function e(e,t){this.label=e,this.documentation=t,this.parameters=[]}return e}();t.SignatureInformation=b;var E=function(){function e(){this.signatures=[]}return e}();t.SignatureHelp=E,function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference"}(t.CompletionItemKind||(t.CompletionItemKind={}));var S=(t.CompletionItemKind,function(){function e(e){this.label=e}return e}());t.CompletionItem=S,function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(t.ViewColumn||(t.ViewColumn={}));t.ViewColumn;!function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(t.StatusBarAlignment||(t.StatusBarAlignment={}));t.StatusBarAlignment});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostFileSystemEventService",["require","exports","vs/platform/files/common/files","vs/platform/thread/common/thread","vs/base/common/event","./pluginHostTypes","vs/platform/event/common/event","vs/base/common/async","vs/base/common/glob","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e,t,n,i,s){var a=this;this._onDidCreate=new r.Emitter,this._onDidChange=new r.Emitter,this._onDidDelete=new r.Emitter,this._config=0,n||(this._config+=1),i||(this._config+=2),s||(this._config+=4);var u=e(function(e){if(!n)for(var r=0,o=e.created;r<o.length;r++){var u=o[r];c.match(t,u.fsPath)&&a._onDidCreate.fire(u)}if(!i)for(var l=0,d=e.changed;l<d.length;l++){var h=d[l];c.match(t,h.fsPath)&&a._onDidChange.fire(h)}if(!s)for(var p=0,f=e.deleted;p<f.length;p++){var m=f[p];c.match(t,m.fsPath)&&a._onDidDelete.fire(m)}});this._disposable=o.Disposable.from(this._onDidCreate,this._onDidChange,this._onDidDelete,u)}return Object.defineProperty(e.prototype,"ignoreCreateEvents",{get:function(){return Boolean(1&this._config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreChangeEvents",{get:function(){return Boolean(2&this._config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreDeleteEvents",{get:function(){return Boolean(4&this._config)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._disposable.dispose()},Object.defineProperty(e.prototype,"onDidCreate",{get:function(){return this._onDidCreate.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidDelete",{get:function(){return this._onDidDelete.event},enumerable:!0,configurable:!0}),e}();t.FileSystemWatcher=l;var d=function(){function e(e){this._emitter=new r.Emitter,this._watchers=[]}return e.prototype.createFileSystemWatcher=function(e,t,n,i){return new l(this._emitter.event,e,t,n,i)},e.prototype._onFileEvent=function(e){this._emitter.fire(e)},e=__decorate([i.Remotable.PluginHostContext("PluginHostFileSystemEventService"),__param(0,u.INullService)],e)}();t.PluginHostFileSystemEventService=d;var h=function(){function e(e,t){var i=t.getRemotable(d),r={created:[],changed:[],deleted:[]},o=new a.RunOnceScheduler(function(){i._onFileEvent(r),r.created.length=0,r.changed.length=0,r.deleted.length=0},100);e.addListener("files:fileChanges",function(e){for(var t=0,i=e.changes;t<i.length;t++){var s=i[t];switch(s.type){case n.FileChangeType.ADDED:r.created.push(s.resource);break;case n.FileChangeType.UPDATED:r.changed.push(s.resource);break;case n.FileChangeType.DELETED:r.deleted.push(s.resource)}}o.schedule()})}return e=__decorate([__param(0,s.IEventService),__param(1,i.IThreadService)],e)}();t.MainThreadFileSystemEventService=h}),define("vs/workbench/api/common/pluginHostTypeConverters",["require","exports","vs/base/common/severity","./pluginHostTypes","vs/platform/editor/common/editor"],function(e,t,n,i,r){function o(e){var t=e.selectionStartLineNumber,n=e.selectionStartColumn,r=e.positionLineNumber,o=e.positionColumn,s=new i.Position(t-1,n-1),a=new i.Position(r-1,o-1);return new i.Selection(s,a)}function s(e){var t=e.anchor,n=e.active;return{selectionStartLineNumber:t.line+1,selectionStartColumn:t.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}function a(e){var t=e.start,n=e.end;return{startLineNumber:t.line+1,startColumn:t.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}function c(e){var t=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;return new i.Range(t-1,n-1,r-1,o-1)}function u(e){return new i.Position(e.lineNumber-1,e.column-1)}function l(e){return{lineNumber:e.line+1,column:e.character+1}}function d(e){switch(e){case i.DiagnosticSeverity.Error:return n["default"].Error;case i.DiagnosticSeverity.Warning:return n["default"].Warning;case i.DiagnosticSeverity.Information:return n["default"].Info;case i.DiagnosticSeverity.Hint:return n["default"].Ignore}return n["default"].Error}function h(e){switch(e){case n["default"].Info:return i.DiagnosticSeverity.Information;case n["default"].Warning:return i.DiagnosticSeverity.Warning;case n["default"].Error:return i.DiagnosticSeverity.Error;case n["default"].Ignore:return i.DiagnosticSeverity.Hint}return i.DiagnosticSeverity.Error}function p(e){var t=r.Position.LEFT;return"number"!=typeof e||(e===i.ViewColumn.Two?t=r.Position.CENTER:e===i.ViewColumn.Three&&(t=r.Position.RIGHT)),t}function f(e){return"string"==typeof e?{formattedText:e}:"object"==typeof e?{code:e}:void 0}function m(e){if("string"==typeof e.code)return e.code;var t=e.formattedText,n=e.text;return t||n||"<???>"}function v(e){return Array.isArray(e)}function g(e){return v(e)?e.map(function(e){return f(e)}):e?[f(e)]:[]}function y(e){return"undefined"!=typeof e.range}function _(e){return 0===e.length?!0:y(e[0])}function b(e){return _(e)?e.map(function(e){return{range:a(e.range),hoverMessage:g(e.hoverMessage)}}):e.map(function(e){return{range:a(e)}})}function E(e){return{name:e.name,type:i.SymbolKind[e.kind||i.SymbolKind.Property].toLowerCase(),range:a(e.location.range),resourceUri:e.location.uri,containerName:e.containerName,parameters:""}}function S(e){return new i.SymbolInformation(e.name,i.SymbolKind[e.type.charAt(0).toUpperCase()+e.type.substr(1)],c(e.range),e.resourceUri,e.containerName)}function w(e){return new i.Location(e.resource,c(e.range))}function C(e){return{range:a(e.range),htmlContent:e.contents.map(f)}}function T(e){return new i.Hover(e.htmlContent.map(m),c(e.range))}function I(e){return new i.DocumentHighlight(c(e.range),i.DocumentHighlightKind[e.kind.charAt(0).toUpperCase()+e.kind.substr(1)])}t.toSelection=o,t.fromSelection=s,t.fromRange=a,t.toRange=c,t.toPosition=u,t.fromPosition=l,t.fromDiagnosticSeverity=d,t.toDiagnosticSeverty=h,t.fromViewColumn=p,t.fromFormattedString=f,t.toFormattedString=m,t.fromRangeOrRangeWithMessage=b,t.TextEdit={from:function(e){return{text:e.newText,range:a(e.range)}},to:function(e){return new i.TextEdit(c(e.range),e.text)}};var k;!function(e){function t(e){switch(e){case i.SymbolKind.Method:return"method";case i.SymbolKind.Function:return"function";case i.SymbolKind.Constructor:return"constructor";case i.SymbolKind.Variable:return"variable";case i.SymbolKind.Class:return"class";case i.SymbolKind.Interface:return"interface";case i.SymbolKind.Module:case i.SymbolKind.Namespace:case i.SymbolKind.Package:return"module";case i.SymbolKind.Property:return"property";case i.SymbolKind.Enum:return"enum";case i.SymbolKind.String:return"string";case i.SymbolKind.File:return"file";case i.SymbolKind.Array:return"array";case i.SymbolKind.Number:return"number";case i.SymbolKind.Boolean:return"boolean"}return"property"}function n(e){switch(e){case"method":return i.SymbolKind.Method;case"function":return i.SymbolKind.Function;case"constructor":return i.SymbolKind.Constructor;case"variable":return i.SymbolKind.Variable;case"class":return i.SymbolKind.Class;case"interface":return i.SymbolKind.Interface;case"module":return i.SymbolKind.Module;case"property":return i.SymbolKind.Property;case"enum":return i.SymbolKind.Enum;case"string":return i.SymbolKind.String;case"file":return i.SymbolKind.File;case"array":return i.SymbolKind.Array;case"number":return i.SymbolKind.Number;case"boolean":return i.SymbolKind.Boolean}return i.SymbolKind.Property}e.from=t,e.to=n}(k=t.SymbolKind||(t.SymbolKind={}));var x;!function(e){function t(e){return new i.SymbolInformation(e.label,k.to(e.type),c(e.range),void 0,e.containerLabel)}function n(e){return{type:k.from(e.kind),range:a(e.location.range),containerLabel:e.containerName,label:e.name,icon:void 0}}e.fromOutlineEntry=t,e.toOutlineEntry=n}(x=t.SymbolInformation||(t.SymbolInformation={})),t.fromSymbolInformation=E,t.toSymbolInformation=S,t.toLocation=w,t.fromHover=C,t.toHover=T,t.toDocumentHighlight=I,t.Suggest={from:function(e){var t={label:e.label,codeSnippet:e.insertText||e.label,type:i.CompletionItemKind[e.kind||i.CompletionItemKind.Text].toString().toLowerCase(),typeLabel:e.detail,documentationLabel:e.documentation,sortText:e.sortText,filterText:e.filterText};return t},to:function(e,t,n){var r=new i.CompletionItem(n.label);r.insertText=n.codeSnippet,r.kind=i.CompletionItemKind[n.type.charAt(0).toUpperCase()+n.type.substr(1)],r.detail=n.typeLabel,r.documentation=n.documentationLabel,r.sortText=n.sortText,r.filterText=n.filterText;var o="number"==typeof n.overwriteBefore?n.overwriteBefore:e.currentWord.length,s=new i.Position(t.line,Math.max(0,t.character-o)),a=t;return"number"==typeof n.overwriteAfter&&(a=new i.Position(t.line,t.character+n.overwriteAfter)),r.textEdit=i.TextEdit.replace(new i.Range(s,a),n.codeSnippet),r}};var A;!function(e){function t(e){for(var t={currentSignature:e.activeSignature,currentParameter:e.activeParameter,signatures:[]},n=0,i=e.signatures;n<i.length;n++){for(var r=i[n],o={label:r.label,documentation:r.documentation,parameters:[]},s=0,a=0,c=r.parameters;a<c.length;a++){var u=c[a],l={label:u.label,documentation:u.documentation};o.parameters.push(l),s=r.label.indexOf(u.label,s),s>=0?(l.signatureLabelOffset=s,s+=u.label.length,l.signatureLabelEnd=s):(l.signatureLabelOffset=0,l.signatureLabelEnd=0)}t.signatures.push(o)}return t}function n(e){var t=new i.SignatureHelp;t.activeSignature=e.currentSignature,t.activeParameter=e.currentParameter;for(var n=0,r=e.signatures;n<r.length;n++){var o=r[n],s=new i.SignatureInformation(o.label,o.documentation);t.signatures.push(s);for(var a=0,c=o.parameters;a<c.length;a++){var u=c[a],l=new i.ParameterInformation(u.label,u.documentation);s.parameters.push(l)}}return t}e.from=t,e.to=n}(A=t.SignatureHelp||(t.SignatureHelp={})),t.Command={from:function(e){return e?{id:e.command,title:e.title,arguments:e.arguments}:void 0},to:function(e){return e?{command:e.id,title:e.title,arguments:e.arguments}:void 0}}}),define("vs/workbench/api/common/extHostApiCommands",["require","exports","vs/base/common/uri","vs/base/common/winjs.base","vs/workbench/api/common/pluginHostTypeConverters","vs/workbench/api/common/pluginHostTypes"],function(e,t,n,i,r,o){var s=function(){function e(e){this._disposables=[],this._commands=e,this._register("vscode.executeWorkspaceSymbolProvider",this._executeWorkspaceSymbolProvider,{description:"Execute all workspace symbol provider.",args:[{name:"query",constraint:String}],returns:"A promise that resolves to an array of SymbolInformation-instances."}),this._register("vscode.executeDefinitionProvider",this._executeDefinitionProvider,{description:"Execute all definition provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position of a symbol",constraint:o.Position}],returns:"A promise that resolves to an array of Location-instances."}),this._register("vscode.executeHoverProvider",this._executeHoverProvider,{description:"Execute all definition provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position of a symbol",constraint:o.Position}],returns:"A promise that resolves to an array of Hover-instances."}),this._register("vscode.executeDocumentHighlights",this._executeDocumentHighlights,{description:"Execute document highlight provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position}],returns:"A promise that resolves to an array of DocumentHighlight-instances."}),this._register("vscode.executeReferenceProvider",this._executeReferenceProvider,{description:"Execute reference provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position}],returns:"A promise that resolves to an array of Location-instances."}),this._register("vscode.executeDocumentRenameProvider",this._executeDocumentRenameProvider,{description:"Execute rename provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position},{name:"newName",description:"The new symbol name",constraint:String}],returns:"A promise that resolves to a WorkspaceEdit."}),this._register("vscode.executeSignatureHelpProvider",this._executeSignatureHelpProvider,{description:"Execute signature help provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position}],returns:"A promise that resolves to SignatureHelp."}),this._register("vscode.executeDocumentSymbolProvider",this._executeDocumentSymbolProvider,{description:"Execute document symbol provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]}],returns:"A promise that resolves to an array of SymbolInformation-instances."}),this._register("vscode.executeCompletionItemProvider",this._executeCompletionItemProvider,{description:"Execute completion item provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position}],returns:"A promise that resolves to an array of CompletionItem-instances."}),this._register("vscode.executeCodeActionProvider",this._executeCodeActionProvider,{description:"Execute code action provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"range",description:"Range in a text document",constraint:o.Range}],returns:"A promise that resolves to an array of CompletionItem-instances."}),this._register("vscode.executeCodeLensProvider",this._executeCodeLensProvider,{description:"Execute completion item provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]}],returns:"A promise that resolves to an array of Commands."}),this._register("vscode.executeFormatDocumentProvider",this._executeFormatDocumentProvider,{description:"Execute document format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."}),this._register("vscode.executeFormatRangeProvider",this._executeFormatRangeProvider,{description:"Execute range format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"range",description:"Range in a text document",constraint:o.Range
},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."}),this._register("vscode.executeFormatOnTypeProvider",this._executeFormatOnTypeProvider,{description:"Execute document format provider.",args:[{name:"uri",description:"Uri of a text document",constraint:n["default"]},{name:"position",description:"Position in a text document",constraint:o.Position},{name:"ch",description:"Character that got typed",constraint:String},{name:"options",description:"Formatting options"}],returns:"A promise that resolves to an array of TextEdits."})}return e.prototype._register=function(e,t,n){var i=this._commands.registerCommand(e,t,this,n);this._disposables.push(i)},e.prototype._executeWorkspaceSymbolProvider=function(e){return this._commands.executeCommand("_executeWorkspaceSymbolProvider",{query:e}).then(function(e){return Array.isArray(e)?e.map(r.toSymbolInformation):void 0})},e.prototype._executeDefinitionProvider=function(e,t){var n={resource:e,position:t&&r.fromPosition(t)};return this._commands.executeCommand("_executeDefinitionProvider",n).then(function(e){return Array.isArray(e)?e.map(r.toLocation):void 0})},e.prototype._executeHoverProvider=function(e,t){var n={resource:e,position:t&&r.fromPosition(t)};return this._commands.executeCommand("_executeHoverProvider",n).then(function(e){return Array.isArray(e)?e.map(r.toHover):void 0})},e.prototype._executeDocumentHighlights=function(e,t){var n={resource:e,position:t&&r.fromPosition(t)};return this._commands.executeCommand("_executeDocumentHighlights",n).then(function(e){return Array.isArray(e)?e.map(r.toDocumentHighlight):void 0})},e.prototype._executeReferenceProvider=function(e,t){var n={resource:e,position:t&&r.fromPosition(t)};return this._commands.executeCommand("_executeDocumentHighlights",n).then(function(e){return Array.isArray(e)?e.map(r.toLocation):void 0})},e.prototype._executeDocumentRenameProvider=function(e,t,n){var s={resource:e,position:t&&r.fromPosition(t),newName:n};return this._commands.executeCommand("_executeDocumentRenameProvider",s).then(function(e){if(e){if(e.rejectReason)return i.TPromise.wrapError(e.rejectReason);for(var t=new o.WorkspaceEdit,n=0,s=e.edits;n<s.length;n++){var a=s[n];t.replace(a.resource,r.toRange(a.range),a.newText)}return t}})},e.prototype._executeSignatureHelpProvider=function(e,t,n){var i={resource:e,position:t&&r.fromPosition(t),triggerCharacter:n};return this._commands.executeCommand("_executeSignatureHelpProvider",i).then(function(e){return e?r.SignatureHelp.to(e):void 0})},e.prototype._executeCompletionItemProvider=function(e,t,n){var i={resource:e,position:t&&r.fromPosition(t),triggerCharacter:n};return this._commands.executeCommand("_executeCompletionItemProvider",i).then(function(e){if(e){for(var n=[],i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++)for(var a=o[s],c=0,u=a.suggestions;c<u.length;c++){var l=u[c],d=r.Suggest.to(a,t,l);n.push(d)}return n}})},e.prototype._executeDocumentSymbolProvider=function(e){var t={resource:e};return this._commands.executeCommand("_executeDocumentSymbolProvider",t).then(function(e){return e&&Array.isArray(e.entries)?e.entries.map(r.SymbolInformation.fromOutlineEntry):void 0})},e.prototype._executeCodeActionProvider=function(e,t){var n={resource:e,range:r.fromRange(t)};return this._commands.executeCommand("_executeCodeActionProvider",n).then(function(e){return Array.isArray(e)?e.map(function(e){return r.Command.to(e.command)}):void 0})},e.prototype._executeCodeLensProvider=function(e){var t={resource:e};return this._commands.executeCommand("_executeCodeLensProvider",t).then(function(e){return Array.isArray(e)?e.map(function(e){return new o.CodeLens(r.toRange(e.symbol.range),r.Command.to(e.symbol.command))}):void 0})},e.prototype._executeFormatDocumentProvider=function(e,t){var n={resource:e,options:t};return this._commands.executeCommand("_executeFormatDocumentProvider",n).then(function(e){return Array.isArray(e)?e.map(function(e){return new o.TextEdit(r.toRange(e.range),e.text)}):void 0})},e.prototype._executeFormatRangeProvider=function(e,t,n){var i={resource:e,range:r.fromRange(t),options:n};return this._commands.executeCommand("_executeFormatRangeProvider",i).then(function(e){return Array.isArray(e)?e.map(function(e){return new o.TextEdit(r.toRange(e.range),e.text)}):void 0})},e.prototype._executeFormatOnTypeProvider=function(e,t,n,i){var s={resource:e,position:r.fromPosition(t),ch:n,options:i};return this._commands.executeCommand("_executeFormatOnTypeProvider",s).then(function(e){return Array.isArray(e)?e.map(function(e){return new o.TextEdit(r.toRange(e.range),e.text)}):void 0})},e}();t.ExtHostApiCommands=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/api/common/pluginHostTypes.marshalling",["require","exports","vs/base/common/marshalling","./pluginHostTypes"],function(e,t,n,i){var r=function(){function e(){}return e.prototype.canDeserialize=function(){return!1},e.prototype.deserialize=function(){throw Error()},e}(),o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.canSerialize=function(e){return e instanceof i.Range},t.prototype.serialize=function(e,t){return{startLineNumber:1+e.start.line,startColumn:1+e.start.character,endLineNumber:1+e.end.line,endColumn:1+e.end.character}},t}(r),s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.canSerialize=function(e){return e instanceof i.Position},t.prototype.serialize=function(e,t){return{lineNumber:1+e.line,column:1+e.character}},t}(r),a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.canSerialize=function(e){return e instanceof i.Location},t.prototype.serialize=function(e,t){return{resource:t(e.uri),range:t(e.range)}},t}(r);n.registerMarshallingContribution(new o),n.registerMarshallingContribution(new s),n.registerMarshallingContribution(new a)}),define("vs/workbench/browser/actionBarRegistry",["require","exports","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/types","vs/base/common/collections","vs/base/browser/ui/actionbar/actionbar"],function(e,t,n,i,r,o,s){function a(e){for(var t=0;t<e.length;t++){var n=e[t];r.isUndefinedOrNull(n.order)&&(n.order=t)}e=e.sort(function(e,t){var n=e.order,i=t.order;return i>n?-1:1});for(var i=-1,o=0;o<e.length;o++)if(e[o].id!==s.Separator.ID){i=o;break}if(-1===i)return[];e=e.slice(i);for(var a=e.length-1;a>=0;a--){var c=e[a].id===s.Separator.ID;if(!c)break;e.splice(a,1)}for(var u=!1,l=e.length-1;l>=0;l--){var c=e[l].id===s.Separator.ID;c&&!u?e.splice(l,1):c?c&&(u=!1):u=!0}return e}var c=function(){function e(){}return e.prototype.hasActions=function(e){return!1},e.prototype.getActions=function(e){return[]},e.prototype.hasSecondaryActions=function(e){return!1},e.prototype.getSecondaryActions=function(e){return[]},e.prototype.getActionItem=function(e,t){return null},e}();t.ActionBarContributor=c,t.Scope={GLOBAL:"global",VIEW:"view",EDITOR:"editor",VIEWER:"viewer"};var u=function(){function e(){this.registry=i.Registry.as(t.Extensions.Actionbar)}return e.prototype.toContext=function(e,t){return{viewer:e,element:t}},e.prototype.hasActions=function(e,n){for(var i=this.toContext(e,n),r=this.registry.getActionBarContributors(t.Scope.VIEWER),o=0;o<r.length;o++){var s=r[o];if(s.hasActions(i))return!0}return!1},e.prototype.getActions=function(e,i){for(var r=[],o=this.toContext(e,i),s=this.registry.getActionBarContributors(t.Scope.VIEWER),c=0;c<s.length;c++){var u=s[c];u.hasActions(o)&&r.push.apply(r,u.getActions(o))}return n.TPromise.as(a(r))},e.prototype.hasSecondaryActions=function(e,n){for(var i=this.toContext(e,n),r=this.registry.getActionBarContributors(t.Scope.VIEWER),o=0;o<r.length;o++){var s=r[o];if(s.hasSecondaryActions(i))return!0}return!1},e.prototype.getSecondaryActions=function(e,i){for(var r=[],o=this.toContext(e,i),s=this.registry.getActionBarContributors(t.Scope.VIEWER),c=0;c<s.length;c++){var u=s[c];u.hasSecondaryActions(o)&&r.push.apply(r,u.getSecondaryActions(o))}return n.TPromise.as(a(r))},e.prototype.getActionItem=function(e,n,i){for(var r=this.registry.getActionBarContributors(t.Scope.VIEWER),o=this.toContext(e,n),s=r.length-1;s>=0;s--){var a=r[s],c=a.getActionItem(o,i);if(c)return c}return null},e}();t.ContributableActionProvider=u,t.prepareActions=a,t.Extensions={Actionbar:"workbench.contributions.actionbar"};var l=function(){function e(){this.actionBarContributorConstructors=[],this.actionBarContributorInstances={}}return e.prototype.setInstantiationService=function(e){for(this.instantiationService=e;this.actionBarContributorConstructors.length>0;){var t=this.actionBarContributorConstructors.shift();this.createActionBarContributor(t.scope,t.ctor)}},e.prototype.createActionBarContributor=function(e,t){var n=this.instantiationService.createInstance(t),i=o.lookupOrInsert(this.actionBarContributorInstances,e,[]);i.push(n)},e.prototype.getContributors=function(e){return o.lookup(this.actionBarContributorInstances,e,[])},e.prototype.getActionBarActionsForContext=function(e,t){var n=[];return this.getContributors(e).forEach(function(e){e.hasActions(t)&&n.push.apply(n,e.getActions(t))}),n},e.prototype.getSecondaryActionBarActionsForContext=function(e,t){var n=[];return this.getContributors(e).forEach(function(e){e.hasSecondaryActions(t)&&n.push.apply(n,e.getSecondaryActions(t))}),n},e.prototype.getActionItemForContext=function(e,t,n){for(var i=this.getContributors(e),r=0;r<i.length;r++){var o=i[r],s=o.getActionItem(t,n);if(s)return s}return null},e.prototype.registerActionBarContributor=function(e,t){this.instantiationService?this.createActionBarContributor(e,t):this.actionBarContributorConstructors.push({scope:e,ctor:t})},e.prototype.getActionBarContributors=function(e){return this.getContributors(e).slice(0)},e}();i.Registry.add(t.Extensions.Actionbar,new l)}),define("vs/workbench/browser/parts/statusbar/statusbar",["require","exports","vs/platform/platform","vs/platform/instantiation/common/descriptors"],function(e,t,n,i){!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.StatusbarAlignment||(t.StatusbarAlignment={}));var r=t.StatusbarAlignment,o=function(){function e(e,t,n){this.syncDescriptor=i.createSyncDescriptor(e),this.alignment=t||r.LEFT,this.priority=n||0}return e}();t.StatusbarItemDescriptor=o;var s=function(){function e(){this._items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),e.prototype.registerStatusbarItem=function(e){this._items.push(e)},e}();t.Extensions={Statusbar:"workbench.contributions.statusbar"},n.Registry.add(t.Extensions.Statusbar,new s)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/storage",["require","exports","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/errors","vs/base/common/strings","vs/platform/storage/common/storage"],function(e,t,n,i,r,o,s){var a=function(e){function n(n,r){e.call(this),this.serviceId=s.IStorageService;var o=n.getWorkspace();if(r)this.globalStorage=r,this.workspaceStorage=r;else{this.globalStorage=window.localStorage;var a=n.getConfiguration().env;a.pluginTestsPath||!o&&!a.pluginDevelopmentPath?this.workspaceStorage=t.inMemoryLocalStorageInstance:this.workspaceStorage=window.localStorage}this.toUnbind=[],this.workspaceKey=this.getWorkspaceKey(o);var c=o?o.uid:null;i.isNumber(c)&&this.cleanupWorkspaceScope(c,o.name)}return __extends(n,e),n.prototype.getWorkspaceKey=function(e){var t=null;return e&&e.resource&&(t=e.resource.toString()),t?n.calculateWorkspaceKey(t):n.NO_WORKSPACE_IDENTIFIER},n.prototype.cleanupWorkspaceScope=function(e,t){var r=this,o=this.getInteger(n.WORKSPACE_IDENTIFIER,s.StorageScope.WORKSPACE);if(i.isNumber(o)&&e!==o){for(var a=this.toStorageKey("",s.StorageScope.WORKSPACE),c=[],u=this.workspaceStorage.length,l=0;u>l;l++){var d=this.workspaceStorage.key(l);d.indexOf(n.WORKSPACE_PREFIX)<0||0===d.indexOf(a)&&c.push(d)}c.length>0&&console.warn("Clearing previous version of local storage for workspace ",t),c.forEach(function(e){r.workspaceStorage.removeItem(e)})}e!==o&&this.store(n.WORKSPACE_IDENTIFIER,e,s.StorageScope.WORKSPACE)},n.prototype.clear=function(){this.globalStorage.clear(),this.workspaceStorage.clear()},n.prototype.store=function(e,t,n){void 0===n&&(n=s.StorageScope.GLOBAL);var o=n===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage;if(i.isUndefinedOrNull(t))return void this.remove(e,n);var a=this.toStorageKey(e,n),c=o.getItem(a),u=t.toString();try{o.setItem(a,t)}catch(l){r.onUnexpectedError(l)}c!==u&&this.emit(s.StorageEventType.STORAGE,new s.StorageEvent(e,c,u))},n.prototype.get=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var r=t===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage,o=r.getItem(this.toStorageKey(e,t));return i.isUndefinedOrNull(o)?n:o},n.prototype.remove=function(e,t){void 0===t&&(t=s.StorageScope.GLOBAL);var n=t===s.StorageScope.GLOBAL?this.globalStorage:this.workspaceStorage,i=this.toStorageKey(e,t),r=n.getItem(i),o=null;n.removeItem(i),r!==o&&this.emit(s.StorageEventType.STORAGE,new s.StorageEvent(e,r,o))},n.prototype.swap=function(e,t,n,r,o){void 0===r&&(r=s.StorageScope.GLOBAL);var a=this.get(e,r);i.isUndefinedOrNull(a)&&o?this.store(e,o,r):a===t.toString()?this.store(e,n,r):this.store(e,t,r)},n.prototype.getInteger=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var r=this.get(e,t,n);return i.isUndefinedOrNull(r)?n:parseInt(r,10)},n.prototype.getBoolean=function(e,t,n){void 0===t&&(t=s.StorageScope.GLOBAL);var r=this.get(e,t,n);return i.isUndefinedOrNull(r)?n:i.isString(r)?"true"===r.toLowerCase()?!0:!1:r?!0:!1},n.prototype.dispose=function(){for(e.prototype.dispose.call(this);this.toUnbind.length;)this.toUnbind.pop()()},n.prototype.toStorageKey=function(e,t){return t===s.StorageScope.GLOBAL?n.GLOBAL_PREFIX+e.toLowerCase():n.WORKSPACE_PREFIX+this.workspaceKey+e.toLowerCase()},n.calculateWorkspaceKey=function(e){var t=window.location.protocol+"//"+window.location.host+"/",n=e.indexOf(t);return 0===n?o.rtrim(e.substr(t.length),"/")+"/":e},n.COMMON_PREFIX="storage://",n.GLOBAL_PREFIX=n.COMMON_PREFIX+"global/",n.WORKSPACE_PREFIX=n.COMMON_PREFIX+"workspace/",n.WORKSPACE_IDENTIFIER="workspaceIdentifier",n.NO_WORKSPACE_IDENTIFIER="__$noWorkspace__",n}(n.EventEmitter);t.Storage=a;var c=function(){function e(){this.store={}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.store).length},enumerable:!0,configurable:!0}),e.prototype.key=function(e){var t=Object.keys(this.store);return t.length>e?t[e]:null},e.prototype.clear=function(){this.store={}},e.prototype.setItem=function(e,t){this.store[e]=t.toString()},e.prototype.getItem=function(e){var t=this.store[e];return i.isUndefinedOrNull(t)?null:t},e.prototype.removeItem=function(e){delete this.store[e]},e}();t.InMemoryLocalStorage=c,t.inMemoryLocalStorageInstance=new c}),define("vs/workbench/common/constants",["require","exports"],function(e,t){t.Preferences={THEME:"workbench.theme"},t.Identifiers={WORKBENCH_CONTAINER:"workbench.main.container",ACTIVITYBAR_PART:"workbench.parts.activitybar",SIDEBAR_PART:"workbench.parts.sidebar",EDITOR_PART:"workbench.parts.editor",STATUSBAR_PART:"workbench.parts.statusbar"}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/contributions",["require","exports","vs/platform/platform"],function(e,t,n){var i;!function(e){e.Workbench="workbench.contributions.kind"}(i=t.Extensions||(t.Extensions={}));var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.registerWorkbenchContribution=function(t){e.prototype._register.call(this,t)},t.prototype.getWorkbenchContributions=function(){return e.prototype._getInstances.call(this)},t.prototype.setWorkbenchContributions=function(t){e.prototype._setInstances.call(this,t)},t}(n.BaseRegistry);n.Registry.add(i.Workbench,new r)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/editor",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/base/common/types","vs/base/common/objects"],function(e,t,n,i,r,o){function s(e,t){if(!e)return null;var n=e;if(r.isFunction(n.getResource))return n.getResource();var i=a(e,t);return i&&i.getResource()}function a(e,t){if(!e)return null;t&&r.isFunction(e.getModifiedInput)&&(e=e.getModifiedInput());var n=e;return n instanceof c&&r.areFunctions(n.setResource,n.setMime,n.getResource,n.getMime)?n:null}var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getName=function(){return null},t.prototype.getDescription=function(e){return null},t.prototype.getStatus=function(){return null},t.prototype.getPreferredEditorId=function(e){return e&&e.length>0?e[0]:null},t.prototype.matches=function(e){return this===e},t.prototype.dispose=function(){this.disposed=!0,this.emit("dispose"),e.prototype.dispose.call(this)},t.prototype.isDisposed=function(){return this.disposed},t}(i.EventEmitter);t.EditorInput=c;var u=function(e){function t(t,n){e.call(this),this._originalInput=t,this._modifiedInput=n}return __extends(t,e),Object.defineProperty(t.prototype,"originalInput",{get:function(){return this._originalInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifiedInput",{get:function(){return this._modifiedInput},enumerable:!0,configurable:!0}),t.prototype.getOriginalInput=function(){return this.originalInput},t.prototype.getModifiedInput=function(){return this.modifiedInput},t}(c);t.BaseDiffEditorInput=u;var l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.load=function(){return n.TPromise.as(this)},t.prototype.isResolved=function(){return!0},t.prototype.dispose=function(){this.emit("dispose"),e.prototype.dispose.call(this)},t}(i.EventEmitter);t.EditorModel=l;var d=function(){function e(){}return e.create=function(t){var n=new e;return n.preserveFocus=t.preserveFocus,n.forceOpen=t.forceOpen,n},e.prototype.matches=function(e){return this===e},e}();t.EditorOptions=d;var h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.from=function(e){var n=null;if(e&&e.options){if((e.options.selection||e.options.forceOpen||e.options.preserveFocus)&&(n=new t),e.options.selection){var i=e.options.selection;n.selection(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)}e.options.forceOpen&&(n.forceOpen=!0),e.options.preserveFocus&&(n.preserveFocus=!0)}return n},t.create=function(e){var n=new t;return n.preserveFocus=e.preserveFocus,n.forceActive=e.forceActive,n.forceOpen=e.forceOpen,e.selection&&(n.startLineNumber=e.selection.startLineNumber,n.startColumn=e.selection.startColumn,n.endLineNumber=e.selection.endLineNumber||e.selection.startLineNumber,n.endColumn=e.selection.endColumn||e.selection.startColumn),n},t.prototype.hasOptionsDefined=function(){return!!this.editorViewState||!r.isUndefinedOrNull(this.startLineNumber)&&!r.isUndefinedOrNull(this.startColumn)},t.prototype.selection=function(e,t,n,i){return void 0===n&&(n=e),void 0===i&&(i=t),this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i,this},t.prototype.viewState=function(e){this.editorViewState=e},t.prototype.apply=function(e){var t=!1;if(this.editorViewState)e.restoreViewState(this.editorViewState),t=!0;else if(!r.isUndefinedOrNull(this.startLineNumber)&&!r.isUndefinedOrNull(this.startColumn)){if(r.isUndefinedOrNull(this.endLineNumber)||r.isUndefinedOrNull(this.endColumn)){var n={lineNumber:this.startLineNumber,column:this.startColumn};e.setPosition(n),e.revealPositionInCenter(n)}else{var i={startLineNumber:this.startLineNumber,startColumn:this.startColumn,endLineNumber:this.endLineNumber,endColumn:this.endColumn};e.setSelection(i),e.revealRangeInCenter(i)}t=!0}return t},t.prototype.matches=function(n){return e.prototype.matches.call(this,n)===!0?!0:n?n instanceof t&&n.startLineNumber===this.startLineNumber&&n.startColumn===this.startColumn&&n.endLineNumber===this.endLineNumber&&n.endColumn===this.endColumn&&n.preserveFocus===this.preserveFocus&&n.forceOpen===this.forceOpen&&o.equals(n.editorViewState,this.editorViewState):!1},t}(d);t.TextEditorOptions=h;var p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.create=function(e){var n=new t;return n.autoRevealFirstChange=e.autoRevealFirstChange,n.preserveFocus=e.preserveFocus,n.forceOpen=e.forceOpen,n},t}(h);t.TextDiffEditorOptions=p,function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"}(t.EncodingMode||(t.EncodingMode={}));t.EncodingMode;t.getUntitledOrFileResource=s,t.asFileEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/binaryEditorModel",["require","exports","vs/workbench/common/editor"],function(e,t,n){var i=function(e){function t(t,n){e.call(this),this.name=n,this.resource=t}return __extends(t,e),t.prototype.getName=function(){return this.name},t.prototype.getResource=function(){return this.resource},t}(n.EditorModel);t.BinaryEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/diffEditorModel",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor"],function(e,t,n,i){var r=function(e){function t(t,n){e.call(this),this._originalModel=t,this._modifiedModel=n}return __extends(t,e),Object.defineProperty(t.prototype,"originalModel",{get:function(){return this._originalModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifiedModel",{get:function(){return this._modifiedModel},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return n.TPromise.join([this._originalModel.load(),this._modifiedModel.load()]).then(function(){return e})},t.prototype.isResolved=function(){return this._originalModel.isResolved()&&this._modifiedModel.isResolved()},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(i.EditorModel);t.DiffEditorModel=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/iframeEditorModel",["require","exports","vs/workbench/common/editor"],function(e,t,n){var i=function(e){function t(t){e.call(this),this._resource=t}return __extends(t,e),Object.defineProperty(t.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),t.prototype.setUrl=function(e){this.url=e},t.prototype.getUrl=function(){return this.url},t.prototype.hasUrl=function(){return!!this.url},t.prototype.setContents=function(e,t,n){this.head=e,this.body=t,this.tail=n},t.prototype.getContents=function(){return{head:this.head,body:this.body,tail:this.tail}},t.prototype.hasContents=function(){return!!this.head||!!this.body||!!this.tail},t}(n.EditorModel);t.IFrameEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/textDiffEditorModel",["require","exports","vs/workbench/browser/parts/editor/diffEditorModel"],function(e,t,n){var i=function(e){function t(t,n){e.call(this,t,n),this.updateTextDiffEditorModel()}return __extends(t,e),t.prototype.load=function(){var t=this;return e.prototype.load.call(this).then(function(){return t.updateTextDiffEditorModel(),t})},t.prototype.updateTextDiffEditorModel=function(){this.originalModel.isResolved()&&this.modifiedModel.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})},Object.defineProperty(t.prototype,"textDiffEditorModel",{get:function(){return this._textDiffEditorModel},enumerable:!0,configurable:!0}),t.prototype.isResolved=function(){return!!this._textDiffEditorModel},t.prototype.dispose=function(){this._textDiffEditorModel=null,e.prototype.dispose.call(this)},t}(n.DiffEditorModel);t.TextDiffEditorModel=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/textEditorModel",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/editor/common/editorCommon","vs/workbench/common/editor","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/nullMode","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,r,o,s,a,c,u,l){var d=function(e){function t(t,n,i){e.call(this),this.modelService=t,this.modeService=n,this.textEditorModelHandle=i}return __extends(t,e),Object.defineProperty(t.prototype,"textEditorModel",{get:function(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null},enumerable:!0,configurable:!0}),t.prototype.createTextEditorModel=function(e,t,i){var r=this,o=this.getFirstLineText(e);return n.Promise.any([n.Promise.timeout(50),this.getOrCreateMode(this.modeService,i,o)]).then(function(){var n=r.modelService.createModel(e,r.getOrCreateMode(r.modeService,i,o),t);return r.textEditorModelHandle=n.getAssociatedResource(),r})},t.prototype.getFirstLineText=function(e){var t=e.substr(0,100),n=t.indexOf("\r");0>n&&(n=t.length);var i=t.indexOf("\n");return 0>i&&(i=t.length),t=t.substr(0,Math.min(n,i))},t.prototype.getOrCreateMode=function(e,t,n){return e.getOrCreateMode(t)},t.prototype.updateTextEditorModel=function(e,t){var n=s.Registry.as(a.Extensions.EditorModes),r=this.getValue(),o=!i.isUndefinedOrNull(e)&&r!==e,u=!1;if(!i.isUndefinedOrNull(t)){var l=n.getModeId(t),d=this.textEditorModel.getMode();if(d&&d.getId()!==c.NullMode.ID&&l){var h=d.getId();u=h!==l}}o?this.textEditorModel.setValue(e,u?this.getOrCreateMode(this.modeService,t):void 0):u&&this.textEditorModel.setMode(this.getOrCreateMode(this.modeService,t))},t.prototype.getValue=function(){var e=this.textEditorModel;return e?e.getValue(r.EndOfLinePreference.TextDefined,!0):null},t.prototype.dispose=function(){this.textEditorModelHandle&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=null,e.prototype.dispose.call(this)},t.prototype.isResolved=function(){return!!this.textEditorModelHandle},t=__decorate([__param(0,l.IModelService),__param(1,u.IModeService)],t)}(o.EditorModel);t.BaseTextEditorModel=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/diffEditorInput",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/mime","vs/base/common/events","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditorModel","vs/workbench/browser/parts/editor/diffEditorModel","vs/workbench/browser/parts/editor/textDiffEditorModel"],function(e,t,n,i,r,o,s,a,c,u){var l=function(e){function t(t,n,i,r,o){e.call(this,i,r),this.name=t,this.description=n,this.forceOpenAsBinary=o,this._toUnbind=[],this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this._toUnbind.push(this.originalInput.addListener(o.EventType.DISPOSE,function(){e.isDisposed()||e.dispose()})),this._toUnbind.push(this.modifiedInput.addListener(o.EventType.DISPOSE,function(){e.isDisposed()||e.dispose()}))},Object.defineProperty(t.prototype,"toUnbind",{get:function(){return this._toUnbind},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.getStatus=function(){if(this.modifiedInput){var t=this.modifiedInput.getStatus();if(t)return t}if(this.originalInput){var n=this.originalInput.getStatus();if(n)return n}return e.prototype.getStatus.call(this)},t.prototype.setOriginalInput=function(e){this.originalInput=e},t.prototype.setModifiedInput=function(e){this.modifiedInput=e},t.prototype.resolve=function(e){var t,i=this;return t=this.cachedModel&&!e?n.TPromise.as(this.cachedModel):this.createModel(e),t.then(function(e){return i.cachedModel&&i.cachedModel.dispose(),i.cachedModel=e,i.cachedModel})},t.prototype.getPreferredEditorId=function(e){var t=this.forceOpenAsBinary||this.isBinary(this.originalInput)||this.isBinary(this.modifiedInput);return t?"workbench.editors.binaryResourceDiffEditor":"workbench.editors.textDiffEditor"},t.prototype.isBinary=function(e){var t,n=e;return i.isFunction(n.getMime)&&(t=n.getMime()),t&&r.isBinaryMime(t)},t.prototype.createModel=function(e){return n.TPromise.join([this.originalInput.resolve(e),this.modifiedInput.resolve(e)]).then(function(e){var t=e[0],n=e[1];return n instanceof a.BaseTextEditorModel&&t instanceof a.BaseTextEditorModel?new u.TextDiffEditorModel(t,n):new c.DiffEditorModel(t,n)})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n){if(!(n instanceof t))return!1;var i=n;return this.originalInput.matches(i.originalInput)&&this.modifiedInput.matches(i.modifiedInput)}return!1},t.prototype.dispose=function(){for(;this._toUnbind.length;)this._toUnbind.pop()();this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),this.originalInput.dispose(),this.modifiedInput.dispose(),e.prototype.dispose.call(this)},t.ID="workbench.editors.diffEditorInput",t}(s.BaseDiffEditorInput);t.DiffEditorInput=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/resourceEditorModel",["require","exports","vs/workbench/browser/parts/editor/textEditorModel","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,r){
var o=function(e){function t(t,n,i){e.call(this,i,n,t)}return __extends(t,e),t=__decorate([__param(1,i.IModeService),__param(2,r.IModelService)],t)}(n.BaseTextEditorModel);t.ResourceEditorModel=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/resourceEditorInput",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor","vs/workbench/browser/parts/editor/resourceEditorModel","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modelService"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,i,r,o){e.call(this),this.modelService=r,this.instantiationService=o,this.name=t,this.description=n,this.resource=i}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.resolve=function(e){var t=this;if(!this.modelService.getModel(this.resource))return n.TPromise.wrapError(new Error("Document with resource "+this.resource.toString()+" does not exist"));if(this.cachedModel)return n.TPromise.as(this.cachedModel);var i=this.instantiationService.createInstance(r.ResourceEditorModel,this.resource);return i.load().then(function(e){return t.cachedModel=e,t.cachedModel})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.ID="workbench.editors.resourceEditorInput",t=__decorate([__param(3,s.IModelService),__param(4,o.IInstantiationService)],t)}(i.EditorInput);t.ResourceEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/stringEditorModel",["require","exports","vs/base/common/winjs.base","vs/workbench/browser/parts/editor/textEditorModel","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/editor/common/core/editOperation"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,n,i,r,o){e.call(this,o,r),this.value=t,this.mime=n,this.resource=i}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.value=e,this.textEditorModel&&this.textEditorModel.setValue(e)},t.prototype.append=function(e){if(this.value+=e,this.textEditorModel){var t=this.textEditorModel,n=t.getLineCount(),i=t.getLineMaxColumn(n);t.applyEdits([c.EditOperation.insert(new r.Position(n,i),e)])}},t.prototype.clearValue=function(){if(this.value="",this.textEditorModel){var e=this.textEditorModel,t=e.getLineCount();e.applyEdits([c.EditOperation["delete"](new o.Range(1,1,t,e.getLineMaxColumn(t)))])}},t.prototype.trim=function(e){if(this.textEditorModel){var t=this.textEditorModel,n=t.getLineCount();if(n>e){t.applyEdits([c.EditOperation["delete"](new o.Range(1,1,n-e+1,1))]);var i=t.getValue();return this.value=i,this.value}}return null},t.prototype.getMime=function(){return this.mime},t.prototype.load=function(){return this.textEditorModel?(this.updateTextEditorModel(this.value),n.TPromise.as(this)):this.createTextEditorModel(this.value,this.resource,this.mime)},t=__decorate([__param(3,s.IModeService),__param(4,a.IModelService)],t)}(i.BaseTextEditorModel);t.StringEditorModel=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/stringEditorInput",["require","exports","vs/base/common/winjs.base","vs/base/common/mime","vs/workbench/common/editor","vs/workbench/browser/parts/editor/stringEditorModel","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,r,o,s,a){e.call(this),this.instantiationService=a,this.name=t,this.description=n,this.value=r,this.mime=o||i.MIME_TEXT,this.singleton=s}return __extends(t,e),t.prototype.getResource=function(){return null},t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.getValue=function(){return this.value},t.prototype.getMime=function(){return this.mime},t.prototype.setValue=function(e){this.value=e,this.cachedModel&&this.cachedModel.setValue(e)},t.prototype.clearValue=function(){this.value="",this.cachedModel&&this.cachedModel.clearValue()},t.prototype.append=function(e){this.value+=e,this.cachedModel&&this.cachedModel.append(e)},t.prototype.trim=function(e){if(this.cachedModel){var t=this.cachedModel.trim(e);if(null!==t)return this.value=t,this.value}return null},t.prototype.resolve=function(e){var t=this;if(this.cachedModel)return n.TPromise.as(this.cachedModel);var i=this.instantiationService.createInstance(o.StringEditorModel,this.value,this.mime,this.getResource());return i.load().then(function(e){return t.cachedModel=e,t.cachedModel})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.singleton&&this.singleton&&i.mime===this.mime?!0:i.value===this.value&&i.mime===this.mime&&i.description===this.description&&i.name===this.name}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.ID="workbench.editors.stringEditorInput",t=__decorate([__param(5,s.IInstantiationService)],t)}(r.EditorInput);t.StringEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/common/events",["require","exports","vs/base/common/events"],function(e,t,n){var i=function(){function e(){}return e.WORKBENCH_OPTIONS_CHANGED="workbenchOptionsChanged",e}();t.EventType=i;var r=function(e){function t(t,n,i,r){e.call(this,r),this.key=t,this.before=n,this.after=i}return __extends(t,e),t}(n.Event);t.OptionsChangeEvent=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/events",["require","exports","vs/base/common/events","vs/workbench/common/events"],function(e,t,n,i){var r=function(){function e(){}return e.EDITOR_OPENED="editorOpened",e.EDITOR_CLOSED="editorClosed",e.EDITOR_INPUT_OPENING="editorInputOpening",e.EDITOR_INPUT_CHANGING="editorInputChanging",e.EDITOR_OPTIONS_CHANGING="editorOptionsChanging",e.EDITOR_INPUT_CHANGED="editorInputChanged",e.EDITOR_INPUT_STATE_CHANGED="editorInputStateChanged",e.EDITOR_SET_INPUT_ERROR="editorSetInputError",e.TEXT_EDITOR_SELECTION_CHANGED="textEditorSelectionChanged",e.TEXT_EDITOR_MODE_CHANGED="textEditorModeChanged",e.TEXT_EDITOR_CONTENT_CHANGED="textEditorContentChanged",e.TEXT_EDITOR_CONFIGURATION_CHANGED="textEditorOptionsChanged",e.VIEWLET_OPENING="viewletOpening",e.VIEWLET_OPENED="viewletOpened",e.VIEWLET_CLOSED="viewletClosed",e.WORKBENCH_CREATED="workbenchCreated",e.WORKBENCH_DISPOSING="workbenchDisposing",e.WORKBENCH_DISPOSED="workbenchDisposed",e.WORKBENCH_OPTIONS_CHANGED=i.EventType.WORKBENCH_OPTIONS_CHANGED,e.UNTITLED_FILE_DIRTY="untitledFileDirty",e.UNTITLED_FILE_DELETED="untitledFileDeleted",e.RESOURCE_ENCODING_CHANGED="resourceEncodingChanged",e}();t.EventType=r;var o=function(e){function t(t,n,i,r,o,s){e.call(this,s),this.editor=t,this.editorId=n,this.editorInput=i,this.editorOptions=r,this.position=o}return __extends(t,e),t.prototype.prevent=function(){this.prevented=!0},t.prototype.isPrevented=function(){return this.prevented},t}(n.Event);t.EditorEvent=o;var s=function(e){function t(t,n){e.call(this,n),this.editorInput=t}return __extends(t,e),t}(n.Event);t.EditorInputEvent=s;var a=function(e){function t(t,n,i,r,o,s,a){e.call(this,n,i,r,o,s,a),this.selection=t}return __extends(t,e),t}(o);t.TextEditorSelectionEvent=a;var c=function(e){function t(t,n){e.call(this,n),this.actionId=t}return __extends(t,e),t}(n.Event);t.CommandEvent=c;var u=function(e){function t(t,n){e.call(this,n),this.viewletId=t}return __extends(t,e),t}(n.Event);t.ViewletEvent=u,t.OptionsChangeEvent=i.OptionsChangeEvent;var l=function(e){function t(t,n){e.call(this,n),this.resource=t}return __extends(t,e),t}(n.Event);t.ResourceEvent=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(l);t.UntitledEditorEvent=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/untitledEditorModel",["require","exports","vs/workbench/browser/parts/editor/stringEditorModel","vs/editor/common/editorCommon","vs/workbench/browser/events","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,n,i,r,o,s,a,c){e.call(this,t,n,i,o,s),this.eventService=a,this.configurationService=c,this.dirty=r,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.configurationChangeListenerUnbind=this.configurationService.addListener(o.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)})},t.prototype.onConfigurationChange=function(e){this.configuredEncoding=e&&e.files&&e.files.encoding},t.prototype.getValue=function(){return this.textEditorModel?this.textEditorModel.getValue(i.EndOfLinePreference.TextDefined,!0):null},t.prototype.getModeId=function(){return this.textEditorModel?this.textEditorModel.getModeId():null},t.prototype.getEncoding=function(){return this.preferredEncoding||this.configuredEncoding},t.prototype.setEncoding=function(e){var t=this.getEncoding();this.preferredEncoding=e,t!==this.preferredEncoding&&this.eventService.emit(r.EventType.RESOURCE_ENCODING_CHANGED,new r.ResourceEvent(this.resource))},t.prototype.isDirty=function(){return this.dirty},t.prototype.load=function(){var t=this;return e.prototype.load.call(this).then(function(e){return t.configurationService.loadConfiguration().then(function(n){return t.configuredEncoding=n&&n.files&&n.files.encoding,t.textModelChangeListener=t.textEditorModel.addListener(i.EventType.ModelContentChanged,function(e){return t.onModelContentChanged(e)}),t.dirty&&setTimeout(function(){t.eventService.emit(r.EventType.UNTITLED_FILE_DIRTY,new r.UntitledEditorEvent(t.resource))},0),e})})},t.prototype.onModelContentChanged=function(e){this.dirty||(this.dirty=!0,this.eventService.emit(r.EventType.UNTITLED_FILE_DIRTY,new r.UntitledEditorEvent(this.resource)))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.textModelChangeListener&&(this.textModelChangeListener(),this.textModelChangeListener=null),this.configurationChangeListenerUnbind&&(this.configurationChangeListenerUnbind(),this.configurationChangeListenerUnbind=null),this.eventService.emit(r.EventType.UNTITLED_FILE_DELETED,new r.UntitledEditorEvent(this.resource))},t=__decorate([__param(4,a.IModeService),__param(5,c.IModelService),__param(6,s.IEventService),__param(7,o.IConfigurationService)],t)}(n.StringEditorModel);t.UntitledEditorModel=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/untitledEditorInput",["require","exports","vs/base/common/winjs.base","vs/editor/common/modes/modesRegistry","vs/base/common/mime","vs/base/common/labels","vs/base/common/paths","vs/workbench/common/editor","vs/platform/platform","vs/workbench/browser/parts/editor/untitledEditorModel","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t,n,i,r,o,s){e.call(this),this.instantiationService=r,this.lifecycleService=o,this.contextService=s,this.resource=t,this.hasAssociatedFilePath=n,this.modeId=i}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getResource=function(){return this.resource},t.prototype.getName=function(){return this.hasAssociatedFilePath?s.basename(this.resource.fsPath):this.resource.fsPath},t.prototype.getDescription=function(){return this.hasAssociatedFilePath?o.getPathLabel(s.dirname(this.resource.fsPath),this.contextService):null},t.prototype.isDirty=function(){return this.cachedModel&&this.cachedModel.isDirty()},t.prototype.getStatus=function(){var e=this.isDirty();return e?{state:"dirty",decoration:""}:null},t.prototype.suggestFileName=function(){if(!this.hasAssociatedFilePath){var e=this.getMime();if(e&&e!==r.MIME_TEXT)return r.suggestFilename(e,this.getName())}return this.getName()},t.prototype.getMime=function(){if(this.cachedModel){var e=c.Registry.as(i.Extensions.EditorModes);return e.getMimeForMode(this.cachedModel.getModeId())}return null},t.prototype.getEncoding=function(){return this.cachedModel?this.cachedModel.getEncoding():null},t.prototype.setEncoding=function(e,t){this.cachedModel&&this.cachedModel.setEncoding(e)},t.prototype.resolve=function(e){var t=this;if(this.cachedModel)return n.TPromise.as(this.cachedModel);var i=this.createModel();return i.load().then(function(e){return t.cachedModel=e,t.cachedModel})},t.prototype.createModel=function(){var e="",t=this.modeId;if(!t&&this.hasAssociatedFilePath){var n=r.guessMimeTypes(this.resource.fsPath)[0];r.isUnspecific(n)||(t=n)}return this.instantiationService.createInstance(u.UntitledEditorModel,e,t||r.MIME_TEXT,this.resource,this.hasAssociatedFilePath)},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null)},t.ID="workbench.editors.untitledEditorInput",t.SCHEMA="untitled",t=__decorate([__param(3,l.IInstantiationService),__param(4,d.ILifecycleService),__param(5,h.IWorkspaceContextService)],t)}(a.EditorInput);t.UntitledEditorInput=p}),define("vs/workbench/browser/services",["require","exports","vs/workbench/browser/events"],function(e,t,n){var i=function(){function e(e,t){this._eventService=e,this.scopeId=t,this.registerListeners()}return Object.defineProperty(e.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),e.prototype.registerListeners=function(){var e=this;this.eventService.addListener(n.EventType.EDITOR_CLOSED,function(t){t.editorId===e.scopeId&&e.onScopeDeactivated()}),this.eventService.addListener(n.EventType.EDITOR_OPENED,function(t){t.editorId===e.scopeId&&e.onScopeActivated()}),this.eventService.addListener(n.EventType.VIEWLET_CLOSED,function(t){t.viewletId===e.scopeId&&e.onScopeDeactivated()}),this.eventService.addListener(n.EventType.VIEWLET_OPENED,function(t){t.viewletId===e.scopeId&&e.onScopeActivated()})},e}();t.ScopedService=i}),define("vs/workbench/common/memento",["require","exports","vs/base/common/types","vs/platform/storage/common/storage"],function(e,t,n,i){!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.Scope||(t.Scope={}));var r=t.Scope,o=function(){function e(t){this.id=e.COMMON_PREFIX+t.toLowerCase()}return e.prototype.getMemento=function(t,n){if(void 0===n&&(n=r.GLOBAL),n===r.WORKSPACE){var i=e.workspaceMementos[this.id];return i||(i=new s(this.id,n,t),e.workspaceMementos[this.id]=i),i.getMemento()}var o=e.globalMementos[this.id];return o||(o=new s(this.id,n,t),e.globalMementos[this.id]=o),o.getMemento()},e.prototype.saveMemento=function(){e.globalMementos[this.id]&&e.globalMementos[this.id].save(),e.workspaceMementos[this.id]&&e.workspaceMementos[this.id].save()},e.globalMementos={},e.workspaceMementos={},e.COMMON_PREFIX="memento/",e}();t.Memento=o;var s=function(){function e(e,t,n){this.storageService=n,this.id=e,this.scope=t,this.mementoObj=this.loadMemento()}return e.prototype.getMemento=function(){return this.mementoObj},e.prototype.loadMemento=function(){var e=this.scope===r.GLOBAL?i.StorageScope.GLOBAL:i.StorageScope.WORKSPACE,t=this.storageService.get(this.id,e);return t?JSON.parse(t):{}},e.prototype.save=function(){var e=this.scope===r.GLOBAL?i.StorageScope.GLOBAL:i.StorageScope.WORKSPACE;n.isEmptyObject(this.mementoObj)?this.storageService.remove(this.id,e):this.storageService.store(this.id,JSON.stringify(this.mementoObj),e)},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/component",["require","exports","vs/base/common/eventEmitter","vs/workbench/common/memento"],function(e,t,n,i){var r=function(e){function t(t){e.call(this),this._toUnbind=[],this.id=t,this.componentMemento=new i.Memento(this.id)}return __extends(t,e),Object.defineProperty(t.prototype,"toUnbind",{get:function(){return this._toUnbind},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return this.id},t.prototype.getMemento=function(e,t){return void 0===t&&(t=i.Scope.GLOBAL),this.componentMemento.getMemento(e,t)},t.prototype.saveMemento=function(){this.componentMemento.saveMemento()},t.prototype.shutdown=function(){this.saveMemento()},t.prototype.dispose=function(){for(;this._toUnbind.length;)this._toUnbind.pop()();e.prototype.dispose.call(this)},t}(n.EventEmitter);t.WorkbenchComponent=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/part",["require","exports","vs/base/browser/builder","vs/workbench/browser/component","vs/css!./media/part"],function(e,t,n,i){var r=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.create=function(e){this.parent=e,this.titleArea=this.createTitleArea(e),this.contentArea=this.createContentArea(e),this.statusArea=this.createStatusArea(e),this.partLayout=new s(this.parent,this.titleArea,this.contentArea,this.statusArea)},t.prototype.getContainer=function(){return this.parent},t.prototype.createTitleArea=function(e){return null},t.prototype.getTitleArea=function(){return this.titleArea},t.prototype.createContentArea=function(e){return null},t.prototype.getContentArea=function(){return this.contentArea},t.prototype.createStatusArea=function(e){return null},t.prototype.getStatusArea=function(){return this.statusArea},t.prototype.layout=function(e){return this.partLayout.layout(e)},t.prototype.getLayout=function(){return this.partLayout},t}(i.WorkbenchComponent);t.Part=r;var o=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(r);t.EmptyPart=o;var s=function(){function e(e,t,n,i){this.container=e,this.titleArea=t,this.contentArea=n,this.statusArea=i}return e.prototype.computeStyle=function(){var e=this.container.getComputedStyle();if(this.containerStyle={borderLeftWidth:parseInt(e.getPropertyValue("border-left-width"),10),borderRightWidth:parseInt(e.getPropertyValue("border-right-width"),10),borderTopWidth:parseInt(e.getPropertyValue("border-top-width"),10),borderBottomWidth:parseInt(e.getPropertyValue("border-bottom-width"),10)},this.titleArea){var t=this.titleArea.getComputedStyle();this.titleStyle={display:t.getPropertyValue("display"),height:this.titleArea.getTotalSize().height}}if(this.statusArea){var n=this.statusArea.getComputedStyle();this.statusStyle={display:n.getPropertyValue("display"),height:this.statusArea.getTotalSize().height}}},e.prototype.layout=function(e){this.containerStyle||this.computeStyle();var t,i=e.width-(this.containerStyle.borderLeftWidth+this.containerStyle.borderRightWidth),r=e.height-(this.containerStyle.borderTopWidth+this.containerStyle.borderBottomWidth),o=[];t=this.titleArea&&"none"!==this.titleStyle.display?new n.Dimension(i,Math.min(r,this.titleStyle.height)):new n.Dimension(0,0);var s;this.statusArea&&"none"!==this.statusStyle.display?(this.statusArea.getHTMLElement().style.height=this.statusArea.getHTMLElement().style.width="",s=new n.Dimension(i,Math.min(r-t.height,this.statusStyle.height))):s=new n.Dimension(0,0);var a=new n.Dimension(i,r-t.height-s.height);return o.push(t),o.push(a),o.push(s),this.contentArea&&this.contentArea.size(a.width,a.height),o},e}();t.PartLayout=s});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/crashReporter",["require","exports","vs/nls!vs/workbench/electron-browser/crashReporter","vs/platform/configuration/common/configurationRegistry","vs/platform/configuration/common/configuration","vs/platform/telemetry/common/telemetry","vs/platform/platform","crash-reporter","ipc"],function(e,t,n,i,r,o,s,a,c){var u="telemetry",l=s.Registry.as(i.Extensions.Configuration);l.registerConfiguration({id:u,order:20,type:"object",title:n.localize(0,null),properties:{"telemetry.enableCrashReporter":{type:"boolean",description:n.localize(1,null),"default":!0}}});var d=function(){function e(e,t,n,i){this.telemetryService=n,this.configurationService=i,this.configurationService=i,this.telemetryService=n,this.sessionId=this.telemetryService?this.telemetryService.getSessionId():null,this.version=e,this.commit=t,this.isStarted=!1,this.config=null}return e.prototype.start=function(e){var t=this;this.isStarted||(this.config?this.config.enableCrashReporter&&this.doStart(e):this.configurationService.loadConfiguration(u).done(function(n){t.config=n,t.config&&t.config.enableCrashReporter&&t.doStart(e)}))},e.prototype.doStart=function(e){var t=this.toConfiguration(e);a.start(t),c.send("vscode:startCrashReporter",t)},e.prototype.toConfiguration=function(e){var t=this;return JSON.parse(JSON.stringify(e,function(e,n){return"$(sessionId)"===n?t.sessionId:"$(version)"===n?t.version:"$(commit)"===n?t.commit:n}))},e=__decorate([__param(2,o.ITelemetryService),__param(3,r.IConfigurationService)],e)}();t.CrashReporter=d}),define("vs/workbench/node/proxy",["require","exports","url","http-proxy-agent","https-proxy-agent"],function(e,t,n,i,r){function o(e,t,o){void 0===o&&(o=!0);var s=n.parse(e),a=n.parse(t);return/^https?:$/.test(a.protocol)?"http:"===s.protocol?new i(t):new r({host:a.host,port:Number(a.port),rejectUnauthorized:o}):null}function s(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}function a(e){var t=n.parse(e),i=s(t);return i?o(e,i):null}function c(e,t){return void 0===t&&(t={}),t.proxyUrl?o(e,t.proxyUrl,t.strictSSL):a(e)}t.getProxyAgent=c}),define("vs/workbench/node/userSettings",["require","exports","fs","path","vs/base/common/json","vs/base/common/objects","vs/base/common/winjs.base","vs/base/common/eventSource"],function(e,t,n,i,r,o,s,a){var c=function(){function e(e,t){this.appSettingsPath=e,this.appKeybindingsPath=t,this._onChange=new a.EventSource,this.registerWatchers()}return e.getValue=function(t,i,o){return new s.TPromise(function(s,a){var c=t.getConfiguration().env.appSettingsPath;n.readFile(c,function(t,n){var a=Object.create(null),c=n?n.toString():"{}",u=Object.create(null);try{u=r.parse(c)}catch(t){}for(var l in u)e.setNode(a,l,u[l]);return s(e.doGetValue(a,i,o))})})},Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.value},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t,n){return e.doGetValue(this.globalSettings.settings,t,n)},e.doGetValue=function(e,t,n){if(!t)return n;for(var i=e,r=t.split(".");r.length&&i;){var o=r.shift();i=i[o]}return"undefined"!=typeof i?i:n},e.prototype.registerWatchers=function(){var e=this;this.watcher=n.watch(i.dirname(this.appSettingsPath)),this.watcher.on("change",function(t,n){return e.onSettingsFileChange(t,n)})},e.prototype.onSettingsFileChange=function(t,n){var i=this;this.timeoutHandle&&(global.clearTimeout(this.timeoutHandle),delete this.timeoutHandle),this.timeoutHandle=global.setTimeout(function(){var e=i.loadSync();e&&i._onChange.fire(i.globalSettings)},e.CHANGE_BUFFER_DELAY)},e.prototype.loadSync=function(){var e=this.doLoadSync();return o.equals(e,this.globalSettings)?!1:(this.globalSettings=e,!0)},e.prototype.doLoadSync=function(){var e=this.doLoadSettingsSync();return{settings:e.contents,settingsParseErrors:e.parseErrors,keybindings:this.doLoadKeybindingsSync()}},e.prototype.doLoadSettingsSync=function(){var t=Object.create(null),i="{}";try{i=n.readFileSync(this.appSettingsPath).toString()}catch(o){}var s=Object.create(null);try{s=r.parse(i)}catch(o){return{contents:Object.create(null),parseErrors:[this.appSettingsPath]}}for(var a in s)e.setNode(t,a,s[a]);return{contents:t}},e.setNode=function(e,t,n){var i=t.split("."),r=i.pop(),o=e;i.forEach(function(e){var n=o[e];switch(typeof n){case"undefined":n=o[e]={};break;case"object":break;default:console.log("Conflicting user settings: "+t+" at "+e+" with "+JSON.stringify(n))}o=n}),o[r]=n},e.prototype.doLoadKeybindingsSync=function(){try{return r.parse(n.readFileSync(this.appKeybindingsPath).toString())}catch(e){}return[]},e.prototype.dispose=function(){this.watcher&&(this.watcher.close(),this.watcher=null)},e.CHANGE_BUFFER_DELAY=300,e}();t.UserSettings=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorInputs",["require","exports","vs/base/common/winjs.base","vs/base/common/mime","vs/workbench/common/editor","vs/workbench/browser/parts/editor/stringEditorInput","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n,r,o,s,a,c){e.call(this,t,r,o,s||i.MIME_TEXT,a,c),this.resourceUrl=n}return __extends(t,e),t.prototype.getResource=function(){return this.resourceUrl},t=__decorate([__param(6,s.IInstantiationService)],t)}(o.StringEditorInput);t.DebugStringEditorInput=a;var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return t.NAME},t.prototype.resolve=function(e){return n.TPromise.as(null)},t.ID="workbench.editors.replEditorInput",t.NAME="Debug Console",t}(r.EditorInput);t.ReplEditorInput=c}),define("vs/workbench/parts/debug/browser/debugHoverWidget",["require","exports","vs/base/browser/htmlContentRenderer","vs/base/common/errors","vs/base/browser/dom","vs/editor/browser/editorBrowser","vs/editor/common/modes/textToHtmlTokenizer"],function(e,t,n,i,r,o,s){var a=r.emmet,c=function(){function e(e,t){this.editor=e,this.debugService=t,this.allowEditorOverflow=!0,this.domNode=a(".debug-hover-widget monaco-editor-background"),this.isVisible=!1,this.showAtPosition=null,this.lastHoveringOver=null,this.highlightDecorations=[],this.editor.addContentWidget(this)}return e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this.domNode},e.prototype.showAt=function(e){var t=this,n=e.getStartPosition(),r=this.editor.getModel().getWordAtPosition(n),o=r?r.word:null,s=this.debugService.getViewModel().getFocusedStackFrame();if(o&&s&&(!this.isVisible||o!==this.lastHoveringOver)){var a=this.editor.getModel().getLineContent(n.lineNumber),c=a.substring(0,a.indexOf("."+o)).split(".").map(function(e){return e.trim()}).filter(function(e){return!!e});c.push(o),c[0]=c[0].substring(c[0].lastIndexOf(" ")+1);var u=[];if(s.getScopes(this.debugService).done(function(e){return e.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!e.expensive}).map(function(e){return e.getChildren(t.debugService).done(function(e){for(var n=0;n<c.length&&e;n++){var i=e.filter(function(e){return"string"==typeof e.name&&(c[n]===e.name||c[n]===e.name.substr(e.name.lastIndexOf(" ")+1));
});if(1!==i.length)break;n===c.length-1?u.push(i[0]):i[0].getChildren(t.debugService).done(function(t){return e=t},e=null)}},i.onUnexpectedError)})},i.onUnexpectedError),1!==u.length)return void this.hide();var l=u[0];if(this.highlightDecorations=this.editor.deltaDecorations(this.highlightDecorations,[{range:{startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn},options:{className:"hoverHighlight"}}]),this.lastHoveringOver=o,l.reference>0&&-1===l.value.indexOf("function")){var d="{\n";l.getChildren(this.debugService).then(function(e){if(!e)return void t.hide();for(var n=0;n<e.length;n++)d+=("   "+e[n].name+": "+e[n].value).substr(0,80),n<e.length-1&&(d+=",\n");return d+="\n}"}).done(function(e){return t.doShow(n,e)},function(){return t.hide()})}else this.doShow(n,l.value)}},e.prototype.doShow=function(e,t){var i=this.editor.getModel();if(t&&i){for(var r=0,o=0;o<t.length;o++)if("\n"===t[o]&&r++,r>12){t=t.substr(0,o+1)+"   ...\n}";break}this.domNode.innerHTML="",this.domNode.appendChild(n.renderHtml(s.tokenizeToHtmlContent(t,i.getMode()))),this.showAtPosition=e,this.isVisible=!0,this.editor.layoutContentWidget(this)}},e.prototype.hide=function(){this.isVisible&&(this.isVisible=!1,this.editor.deltaDecorations(this.highlightDecorations,[]),this.highlightDecorations=[],this.editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this.isVisible?{position:this.showAtPosition,preference:[o.ContentWidgetPositionPreference.ABOVE,o.ContentWidgetPositionPreference.BELOW]}:null},e.ID="debug.hoverWidget",e}();t.DebugHoverWidget=c}),define("vs/workbench/parts/debug/common/debug",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){function i(e,t,n){return e.replace(r,function(e,i){return t&&i.length>0&&"_"!==i[0]?e:n.hasOwnProperty(i)?n[i]:e})}t.VIEWLET_ID="workbench.view.debug",t.DEBUG_SERVICE_ID="debugService",t.CONTEXT_IN_DEBUG_MODE="inDebugMode",t.ModelEvents={BREAKPOINTS_UPDATED:"BreakpointsUpdated",CALLSTACK_UPDATED:"CallStackUpdated",WATCH_EXPRESSIONS_UPDATED:"WatchExpressionsUpdated",REPL_ELEMENTS_UPDATED:"ReplElementsUpdated"},t.ViewModelEvents={FOCUSED_STACK_FRAME_UPDATED:"FocusedStackFrameUpdated",SELECTED_EXPRESSION_UPDATED:"SelectedExpressionUpdated"},t.ServiceEvents={STATE_CHANGED:"StateChanged"},t.SessionEvents={INITIALIZED:"initialized",STOPPED:"stopped",DEBUGEE_TERMINATED:"terminated",SERVER_EXIT:"exit",CONTINUED:"continued",THREAD:"thread",OUTPUT:"output"},function(e){e[e.Disabled=0]="Disabled",e[e.Inactive=1]="Inactive",e[e.Initializing=2]="Initializing",e[e.Stopped=3]="Stopped",e[e.Running=4]="Running"}(t.State||(t.State={}));t.State;t.IDebugService=n.createDecorator(t.DEBUG_SERVICE_ID);var r=/{([^}]+)}/g;t.formatPII=i}),define("vs/workbench/parts/debug/common/debugSource",["require","exports","vs/base/common/uri","vs/base/common/paths"],function(e,t,n,i){var r=function(){function e(t,i,r){void 0===r&&(r=0),this.name=t,this.reference=r,this.uri=n["default"].parse(i),this.inMemory=0===i.indexOf(e.INTERNAL_URI_PREFIX),this.available=!0}return e.prototype.toRawSource=function(){return this.inMemory?{name:this.name}:{path:i.normalize(this.uri.fsPath,!0)}},e.fromRawSource=function(t){var i=t.path?n["default"].file(t.path).toString():e.INTERNAL_URI_PREFIX+t.name;return new e(t.name,i,t.sourceReference)},e.fromUri=function(t){var n=t.toString();return new e(n.substr(n.lastIndexOf("/")+1),n)},e.INTERNAL_URI_PREFIX="debug://internal/",e}();t.Source=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/common/debugModel",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/debug/common/debugModel","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/common/uri","vs/base/common/uuid","vs/base/common/types","vs/base/common/arrays","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugSource"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e,t){var i=e.getActiveSession();return!i||t.reference<=0?n.TPromise.as([]):i.variables({variablesReference:t.reference}).then(function(e){return u.distinct(e.body.variables,function(e){return e.name}).map(function(e){return new b(t,e.variablesReference,e.name,e.value)})},function(e){return[new b(t,0,null,e.message)]})}function p(e){return e?e.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):e}function f(e,t){var n=[e.name];if(e instanceof b)for(var i=e.parent;i instanceof b||i instanceof _;)n.push(i.name),i=i.parent;n=n.reverse();var r=null,o=/^[a-zA-Z_][a-zA-Z0-9_]*$/;return n.forEach(function(e){r=r?"node"!==t||o.test(e)?r+"."+e:e&&0===e.indexOf("[")?""+r+e:r+"['"+e+"']":e}),r}t.getFullExpressionName=f;var m=function(){function e(e,t,n){this.name=e,this.threadId=t,this.callStack=n,this.exception=!1}return e.prototype.getId=function(){return"thread:"+this.name+":"+this.threadId},e}();t.Thread=m;var v=function(){function e(e){void 0===e&&(e=!1),this.grouped=e,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.OutputElement=v;var g=function(e){function t(t,n,i,r,o){void 0===i&&(i=!1),void 0===o&&(o=1),e.call(this,i),this.value=t,this.severity=n,this.category=r,this.counter=o}return __extends(t,e),t}(v);t.ValueOutputElement=g;var y=function(e){function t(t,n,i,r){e.call(this,r),this.key=t,this.valueObj=n,this.annotation=i,this._valueName=null}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return null===this._valueName&&(null===this.valueObj?this._valueName="null":Array.isArray(this.valueObj)?this._valueName="Array["+this.valueObj.length+"]":c.isObject(this.valueObj)?this._valueName="Object":c.isString(this.valueObj)?this._valueName='"'+p(this.valueObj)+'"':this._valueName=String(this.valueObj),this._valueName||(this._valueName="")),this._valueName},enumerable:!0,configurable:!0}),t.prototype.getChildren=function(){var e=this;return this.children||(Array.isArray(this.valueObj)?this.children=this.valueObj.slice(0,t.MAX_CHILDREN).map(function(e,n){return new t(String(n),e,null,!0)}):c.isObject(this.valueObj)?this.children=Object.getOwnPropertyNames(this.valueObj).slice(0,t.MAX_CHILDREN).map(function(n){return new t(n,e.valueObj[n],null,!0)}):this.children=[]),this.children},t.MAX_CHILDREN=1e3,t}(v);t.KeyValueOutputElement=y;var _=function(){function e(t,n,i){void 0===i&&(i=a.generateUuid()),this.name=t,this.cacheChildren=n,this.id=i,this.reference=0,this.value=e.DEFAULT_VALUE,this.available=!1,this.children=null}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=p(e)},enumerable:!0,configurable:!0}),e.prototype.getId=function(){return this.id},e.prototype.getChildren=function(e){return this.cacheChildren?(this.children||(this.children=h(e,this)),this.children):h(e,this)},e.DEFAULT_VALUE="not available",e}();t.Expression=_;var b=function(){function e(e,t,n,i){this.parent=e,this.reference=t,this.name=n,this.children=null,this.value=p(i)}return e.prototype.getId=function(){return"variable:"+this.parent.getId()+":"+this.name},e.prototype.getChildren=function(e){return this.children||(this.children=h(e,this)),this.children},e}();t.Variable=b;var E=function(){function e(e,t,n,i){this.threadId=e,this.name=t,this.reference=n,this.expensive=i,this.children=null}return e.prototype.getId=function(){return"scope:"+this.threadId+":"+this.name+":"+this.reference},e.prototype.getChildren=function(e){return this.children||(this.children=h(e,this)),this.children},e}();t.Scope=E;var S=function(){function e(e,t,n,i,r,o){this.threadId=e,this.frameId=t,this.source=n,this.name=i,this.lineNumber=r,this.column=o,this.internalId=a.generateUuid(),this.scopes=null}return e.prototype.getId=function(){return this.internalId},e.prototype.getScopes=function(e){var t=this;return this.scopes||(this.scopes=e.getActiveSession().scopes({frameId:this.frameId}).then(function(e){return e.body.scopes.map(function(e){return new E(t.threadId,e.name,e.variablesReference,e.expensive)})},function(e){return[]})),this.scopes},e}();t.StackFrame=S;var w=function(){function e(e,t,n,i){this.source=e,this.desiredLineNumber=t,this.enabled=n,this.condition=i,void 0===n&&(this.enabled=!0),this.lineNumber=this.desiredLineNumber,this.verified=!1,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.Breakpoint=w;var C=function(){function e(e,t){this.name=e,this.enabled=t,this.error=!1,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.FunctionBreakpoint=C;var T=function(){function e(e,t){this.name=e,this.enabled=t,this.id=a.generateUuid()}return e.prototype.getId=function(){return this.id},e}();t.ExceptionBreakpoint=T;var I=function(e){function t(t,n,i,r,o){e.call(this),this.breakpoints=t,this.breakpointsActivated=n,this.functionBreakpoints=i,this.exceptionBreakpoints=r,this.watchExpressions=o,this.threads={},this.replElements=[],this.toDispose=[]}return __extends(t,e),t.prototype.getId=function(){return"root"},t.prototype.getThreads=function(){return this.threads},t.prototype.clearThreads=function(e,t){if(void 0===t&&(t=void 0),t)e?delete this.threads[t]:(this.threads[t].callStack=[],this.threads[t].exception=!1);else if(e)this.threads={};else for(var n in this.threads)this.threads.hasOwnProperty(n)&&(this.threads[n].callStack=[],this.threads[n].exception=!1);this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.getBreakpoints=function(){return this.breakpoints},t.prototype.getFunctionBreakpoints=function(){return this.functionBreakpoints},t.prototype.getExceptionBreakpoints=function(){return this.exceptionBreakpoints},t.prototype.areBreakpointsActivated=function(){return this.breakpointsActivated},t.prototype.toggleBreakpointsActivated=function(){this.breakpointsActivated=!this.breakpointsActivated,this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.addBreakpoints=function(e){this.breakpoints=this.breakpoints.concat(e.map(function(e){return new w(d.Source.fromUri(e.uri),e.lineNumber,e.enabled,e.condition)})),this.breakpointsActivated=!0,this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.removeBreakpoints=function(e){this.breakpoints=this.breakpoints.filter(function(t){return!e.some(function(e){return e.getId()===t.getId()})}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.updateBreakpoints=function(e){this.breakpoints.forEach(function(t){var n=e[t.getId()];n&&(t.lineNumber=n.line,t.verified=n.verified)}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.toggleEnablement=function(e){if(e.enabled=!e.enabled,e instanceof w&&!e.enabled){var t=e;t.lineNumber=t.desiredLineNumber,t.verified=!1}this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.enableOrDisableAllBreakpoints=function(e){this.breakpoints.forEach(function(t){t.enabled=e,e||(t.lineNumber=t.desiredLineNumber,t.verified=!1)}),this.exceptionBreakpoints.forEach(function(t){return t.enabled=e}),this.functionBreakpoints.forEach(function(t){return t.enabled=e}),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.addFunctionBreakpoint=function(e){this.functionBreakpoints.push(new C(e,!0)),this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.renameFunctionBreakpoint=function(e,t){var n=this.functionBreakpoints.filter(function(t){return t.getId()===e}).pop();n&&(n.name=t,this.emit(l.ModelEvents.BREAKPOINTS_UPDATED))},t.prototype.removeFunctionBreakpoints=function(e){this.functionBreakpoints=e?this.functionBreakpoints.filter(function(t){return t.getId()!=e}):[],this.emit(l.ModelEvents.BREAKPOINTS_UPDATED)},t.prototype.getReplElements=function(){return this.replElements},t.prototype.addReplExpression=function(e,t,n){var i=this,r=new _(n,!0);return this.replElements.push(r),this.evaluateExpression(e,t,r,!0).then(function(){return i.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,r)})},t.prototype.logToRepl=function(e,t){var n=[],r=this.replElements.length&&this.replElements[this.replElements.length-1],o=!!r&&t===r.severity;if("string"==typeof e)if(e&&e.trim()&&r&&r.value===e&&r.severity===t)r.counter++;else{var s=e.split("\n");s.forEach(function(e,i){n.push(new g(e,t,o||i>0))})}else n.push(new y(e.prototype,e,i.localize(0,null),o));n.length&&((a=this.replElements).push.apply(a,n),this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,n));var a},t.prototype.appendReplOutput=function(e,t){var n=[],i=this.replElements.length&&this.replElements[this.replElements.length-1],r=e.split("\n"),o=!!i&&"output"===i.category&&t===i.severity;o&&(i.value+=r.shift()),r.forEach(function(e,i){n.push(new g(e,t,o||i>0,"output"))}),(s=this.replElements).push.apply(s,n),this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED,n);var s},t.prototype.clearReplExpressions=function(){this.replElements=[],this.emit(l.ModelEvents.REPL_ELEMENTS_UPDATED)},t.prototype.getWatchExpressions=function(){return this.watchExpressions},t.prototype.addWatchExpression=function(e,t,i){var r=new _(i,!1);return this.watchExpressions.push(r),i?this.evaluateWatchExpressions(e,t,r.getId()):(this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,r),n.Promise.as(null))},t.prototype.renameWatchExpression=function(e,t,i,r){var o=this,s=this.watchExpressions.filter(function(e){return e.getId()===i});return 1===s.length?(s[0].name=r,this.evaluateExpression(e,t,s[0],!1).then(function(){o.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,s[0])})):n.Promise.as(null)},t.prototype.evaluateWatchExpressions=function(e,t,i){var r=this;if(void 0===i&&(i=null),i){var o=this.watchExpressions.filter(function(e){return e.getId()===i});return 1!==o.length?n.Promise.as(null):this.evaluateExpression(e,t,o[0],!1).then(function(){r.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,o[0])})}return n.Promise.join(this.watchExpressions.map(function(n){return r.evaluateExpression(e,t,n,!1)})).then(function(){r.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)})},t.prototype.evaluateExpression=function(e,t,r,o){return e?e.evaluate({expression:r.name,frameId:t?t.frameId:void 0,context:o?"repl":"watch"}).then(function(e){r.value=e.body.result,r.available=!0,r.reference=e.body.variablesReference},function(e){r.value=e.message,r.available=!1,r.reference=0}):(r.value=o?i.localize(1,null):_.DEFAULT_VALUE,r.available=!1,r.reference=0,n.Promise.as(null))},t.prototype.clearWatchExpressionValues=function(){this.watchExpressions.forEach(function(e){e.value=_.DEFAULT_VALUE,e.available=!1,e.reference=0}),this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)},t.prototype.clearWatchExpressions=function(e){void 0===e&&(e=null),this.watchExpressions=e?this.watchExpressions.filter(function(t){return t.getId()!==e}):[],this.emit(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED)},t.prototype.sourceIsUnavailable=function(e){var t=this;Object.keys(this.threads).forEach(function(n){t.threads[n].callStack.forEach(function(t){t.source.uri.toString()===e.uri.toString()&&(t.source.available=!1)})}),this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.rawUpdate=function(e){e.thread&&(this.threads[e.threadId]=new m(e.thread.name,e.thread.id,[])),e.callStack&&(this.threads[e.threadId].callStack=e.callStack.map(function(t,n){return t?new S(e.threadId,t.id,t.source?d.Source.fromRawSource(t.source):d.Source.fromUri(s["default"].parse("unknown")),t.name,t.line,t.column):new S(e.threadId,0,d.Source.fromUri(s["default"].parse("unknown")),i.localize(2,null),void 0,void 0)}),this.threads[e.threadId].exception=e.exception),this.emit(l.ModelEvents.CALLSTACK_UPDATED)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.threads=null,this.breakpoints=null,this.exceptionBreakpoints=null,this.functionBreakpoints=null,this.watchExpressions=null,this.replElements=null,this.toDispose=r.disposeAll(this.toDispose)},t}(o.EventEmitter);t.Model=I});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/common/debugViewModel",["require","exports","vs/base/common/eventEmitter","vs/workbench/parts/debug/common/debug"],function(e,t,n,i){var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getId=function(){return"root"},t.prototype.getFocusedStackFrame=function(){return this.focusedStackFrame},t.prototype.setFocusedStackFrame=function(e){this.focusedStackFrame=e,this.emit(i.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED)},t.prototype.getFocusedThreadId=function(){return this.focusedStackFrame?this.focusedStackFrame.threadId:0},t.prototype.getSelectedExpression=function(){return this.selectedExpression},t.prototype.setSelectedExpression=function(e){this.selectedExpression=e,this.emit(i.ViewModelEvents.SELECTED_EXPRESSION_UPDATED,e)},t}(n.EventEmitter);t.ViewModel=r}),define("vs/workbench/parts/debug/common/replHistory",["require","exports"],function(e,t){var n=50,i=function(){function e(e){this.history=e,this.historyPointer=this.history.length,this.currentExpressionStoredMarkers=!1,this.historyOverwrites={}}return e.prototype.next=function(){return this.navigate(!1)},e.prototype.previous=function(){return this.navigate(!0)},e.prototype.navigate=function(e){var t=-1;return e&&this.historyPointer>0&&this.history.length>this.historyPointer-1?t=this.historyPointer-1:!e&&this.history.length>this.historyPointer+1&&(t=this.historyPointer+1),t>=0?(this.historyPointer=t,this.historyOverwrites&&this.historyOverwrites[t.toString()]?this.historyOverwrites[t.toString()]:this.history[t]):null},e.prototype.remember=function(e,t){var n;n=t?this.historyPointer+1:this.historyPointer-1,n!==this.history.length||this.currentExpressionStoredMarkers?(this.historyOverwrites||(this.historyOverwrites={}),this.historyOverwrites[n.toString()]=e):(this.history.push(e),this.currentExpressionStoredMarkers=!0)},e.prototype.evaluated=function(e){this.currentExpressionStoredMarkers&&this.history.pop(),!e||0!==this.history.length&&this.history[this.history.length-1]===e||this.history.push(e),this.historyPointer=this.history.length,this.currentExpressionStoredMarkers=!1,delete this.historyOverwrites},e.prototype.save=function(){return this.currentExpressionStoredMarkers&&this.history.pop(),this.history.length>n&&(this.history=this.history.splice(this.history.length-n,n)),this.history},e}();t.ReplHistory=i}),define("vs/workbench/parts/debug/node/debugAdapter",["require","exports","vs/base/common/paths","vs/base/common/platform"],function(e,t,n,i){var r=function(){function e(e,t,r){e.windows&&(e.win=e.windows),i.isWindows&&e.win&&(this.runtime=e.win.runtime,this.runtimeArgs=e.win.runtimeArgs,this.program=e.win.program,this.args=e.win.args),i.isMacintosh&&e.osx&&(this.runtime=e.osx.runtime,this.runtimeArgs=e.osx.runtimeArgs,this.program=e.osx.program,this.args=e.osx.args),i.isLinux&&e.linux&&(this.runtime=e.linux.runtime,this.runtimeArgs=e.linux.runtimeArgs,this.program=e.linux.program,this.args=e.linux.args),this.runtime=this.runtime||e.runtime,this.runtimeArgs=this.runtimeArgs||e.runtimeArgs,this.program=this.program||e.program,this.args=this.args||e.args,this.program&&(this.program=t?t.resolve(this.program):this.program,this.program=n.join(r,this.program)),this.runtime&&0===this.runtime.indexOf("./")&&(this.runtime=t?t.resolve(this.runtime):this.runtime,this.runtime=n.join(r,this.runtime)),this.type=e.type,this.configurationAttributes=e.configurationAttributes,this.initialConfigurations=e.initialConfigurations,this._label=e.label,this.enableBreakpointsFor=e.enableBreakpointsFor}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label||this.type},enumerable:!0,configurable:!0}),e.prototype.getSchemaAttributes=function(){var e=this;return this.configurationAttributes?Object.keys(this.configurationAttributes).map(function(t){var n=e.configurationAttributes[t],i=["name","type","request"];return n.required=n.required&&n.required.length?i.concat(n.required):i,n.additionalProperties=!1,n.type="object",n.properties||(n.properties={}),n.properties.type={"enum":[e.type],description:"Type of configuration."},n.properties.name={type:"string",description:"Name of configuration; appears in the launch configuration drop down menu.","default":"Launch"},n.properties.request={"enum":[t],description:'Request type of configuration. Can be "launch" or "attach".'},n.properties.preLaunchTask={type:"string",description:"Task to run before debug session starts."},n}):null},e}();t.Adapter=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/node/v8Protocol",["require","exports","vs/base/common/uuid","vs/base/common/eventEmitter","vs/base/common/winjs.base","vs/workbench/parts/debug/common/debug"],function(e,t,n,i,r,o){var s=function(e){function t(){e.call(this),this.flowEventsCount=0,this.emittedStopped=!1,this.sequence=1,this.contentLength=-1,this.pendingRequests={},this.rawData=new Buffer(0),this.id=n.generateUuid()}return __extends(t,e),t.prototype.emit=function(t,n){t===o.SessionEvents.STOPPED&&(this.emittedStopped=!0),(t===o.SessionEvents.CONTINUED||t===o.SessionEvents.STOPPED||t===o.SessionEvents.DEBUGEE_TERMINATED||t===o.SessionEvents.SERVER_EXIT)&&this.flowEventsCount++,n?n.sessionId=this.getId():n={sessionId:this.getId()},e.prototype.emit.call(this,t,n)},t.prototype.getId=function(){return this.id},t.prototype.connect=function(e,t){var n=this;this.outputStream=t,e.on("data",function(e){n.rawData=Buffer.concat([n.rawData,e]),n.handleData()})},t.prototype.send=function(e,t){var n=this;return new r.Promise(function(i,r){n.doSend(e,t,function(e){e.success?i(e):r(e)})})},t.prototype.doSend=function(e,n,i){var r={type:"request",seq:this.sequence++,command:e};n&&Object.keys(n).length>0&&(r.arguments=n),this.pendingRequests[r.seq]=i;var o=JSON.stringify(r),s=Buffer.byteLength(o,"utf8");this.outputStream.write("Content-Length: "+s.toString()+t.TWO_CRLF,"utf8"),this.outputStream.write(o,"utf8")},t.prototype.handleData=function(){for(;;){if(this.contentLength>=0){if(this.rawData.length>=this.contentLength){var e=this.rawData.toString("utf8",0,this.contentLength);this.rawData=this.rawData.slice(this.contentLength),this.contentLength=-1,e.length>0&&this.dispatch(e);continue}}else{var n=this.rawData.toString("utf8",0,this.rawData.length),i=n.indexOf(t.TWO_CRLF);if(-1!==i){var r=/Content-Length: (\d+)/.exec(n);if(r&&r[1]){this.contentLength=Number(r[1]),this.rawData=this.rawData.slice(i+t.TWO_CRLF.length);continue}}}break}},t.prototype.dispatch=function(e){var t=JSON.parse(e);if("undefined"!=typeof t.event){var n=t;this.emit(n.event,n)}else{var i=t,r=this.pendingRequests[i.request_seq];r&&(delete this.pendingRequests[i.request_seq],r(i))}},t.TWO_CRLF="\r\n\r\n",t}(i.EventEmitter);t.V8Protocol=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/debug/node/rawDebugSession",["require","exports","vs/nls!vs/workbench/parts/debug/node/rawDebugSession","child_process","fs","net","vs/base/common/platform","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/severity","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/node/v8Protocol","vs/base/node/stdFork"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t,n,i,r){e.call(this),this.messageService=t,this.telemetryService=n,this.debugServerPort=i,this.adapter=r,this.socket=null}return __extends(t,e),t.prototype.initServer=function(){var e=this;if(this.cachedInitServer)return this.cachedInitServer;var t=this.debugServerPort?this.connectServer(this.debugServerPort):this.startServer();return this.cachedInitServer=t.then(function(){e.startTime=(new Date).getTime()},function(t){return e.cachedInitServer=null,c.Promise.wrapError(t)}),this.cachedInitServer},t.prototype.send=function(t,n){var i=this;return this.initServer().then(function(){return e.prototype.send.call(i,t,n).then(function(e){return e},function(e){var t=e.body?e.body.error:null,n=t?l.formatPII(t.format,!1,t.variables):e.message;return t&&t.sendTelemetry&&i.telemetryService.publicLog("debugProtocolErrorResponse",{error:n}),c.Promise.wrapError(new Error(n))})})},t.prototype.initialize=function(e){return this.send("initialize",e)},t.prototype.launch=function(e){return this.isAttach=!1,this.sendAndLazyEmit("launch",e)},t.prototype.attach=function(e){return this.isAttach=!0,this.sendAndLazyEmit("attach",e)},t.prototype.next=function(e){return this.sendAndLazyEmit("next",e)},t.prototype.stepIn=function(e){return this.sendAndLazyEmit("stepIn",e)},t.prototype.stepOut=function(e){return this.sendAndLazyEmit("stepOut",e)},t.prototype["continue"]=function(e){return this.sendAndLazyEmit("continue",e)},t.prototype.sendAndLazyEmit=function(e,t,n){var i=this;void 0===n&&(n=l.SessionEvents.CONTINUED);var r=this.flowEventsCount;return this.send(e,t).then(function(e){return setTimeout(function(){i.flowEventsCount===r&&i.emit(n)},500),e})},t.prototype.pause=function(e){return this.send("pause",e)},t.prototype.disconnect=function(e){var t=this;return void 0===e&&(e=!1),!this.serverProcess&&!this.socket||this.stopServerPending?c.Promise.as(null):(this.stopServerPending=!0,this.send("disconnect",{restart:e}).then(function(){return t.stopServer()},function(){return t.stopServer()}))},t.prototype.setBreakpoints=function(e){return this.send("setBreakpoints",e)},t.prototype.setExceptionBreakpoints=function(e){return this.send("setExceptionBreakpoints",e)},t.prototype.stackTrace=function(e){return this.send("stackTrace",e)},t.prototype.scopes=function(e){return this.send("scopes",e)},t.prototype.variables=function(e){return this.send("variables",e)},t.prototype.source=function(e){return this.send("source",e)},t.prototype.threads=function(){return this.send("threads",null)},t.prototype.evaluate=function(e){return this.send("evaluate",e)},t.prototype.getLengthInSeconds=function(){return((new Date).getTime()-this.startTime)/1e3},t.prototype.getType=function(){return this.adapter.type},t.prototype.connectServer=function(e){var t=this;return new c.Promise(function(n,i){t.socket=o.createConnection(e,null,function(){t.connect(t.socket,t.socket),n(null)}),t.socket.on("error",function(e){i(e)})})},t.prototype.startServer=function(){var e=this;return this.adapter.program?this.getLaunchDetails().then(function(t){return e.launchServer(t).then(function(){e.serverProcess.on("error",function(t){return e.onServerError(t)}),e.serverProcess.on("exit",function(t,n){return e.onServerExit()});var t=function(e){return e.toString().replace(/\r?\n$/gm,"")};e.serverProcess.stderr.on("data",function(e){console.log(t(e))}),e.connect(e.serverProcess.stdout,e.serverProcess.stdin)})}):c.Promise.wrapError(new Error("No extension installed for '"+this.adapter.type+"' debugging."))},t.prototype.launchServer=function(e){var t=this;return new c.Promise(function(n,r){"node"===e.command?h.fork(e.argv[0],[],{},function(i,o){i&&r(new Error("Unable to launch debug adapter from "+e.argv[0]+".")),t.serverProcess=o,n(!0)}):(t.serverProcess=i.spawn(e.command,e.argv,{stdio:["pipe","pipe","pipe"]}),n(!0))})},t.prototype.stopServer=function(){var e=this;if(null!==this.socket&&(this.socket.end(),this.cachedInitServer=null,this.emit(l.SessionEvents.SERVER_EXIT)),!this.serverProcess)return c.TPromise.as(void 0);this.stopServerPending=!0;var t;return s.isWindows?t=new c.Promise(function(t,n){var r=i.exec("taskkill /F /T /PID "+e.serverProcess.pid,function(e,t,i){return e?n(e):void 0});r.on("exit",t),r.on("error",n)}):(this.serverProcess.kill("SIGTERM"),t=c.TPromise.as(void 0)),t},t.prototype.getLaunchDetails=function(){var e=this;return new c.TPromise(function(t,n){r.exists(e.adapter.program,function(i){i?t(e.adapter.program):n(new Error("DebugAdapter bin folder not found on path "+e.adapter.program+"."))})}).then(function(t){return e.adapter.runtime?{command:e.adapter.runtime,argv:[t].concat(e.adapter.runtimeArgs)}:{command:t}})},t.prototype.onServerError=function(e){this.stopServer().done(null,a.onUnexpectedError),this.messageService.show(u["default"].Error,e.message)},t.prototype.onServerExit=function(){this.serverProcess=null,this.cachedInitServer=null,this.stopServerPending||this.messageService.show(u["default"].Error,n.localize(0,null)),this.emit(l.SessionEvents.SERVER_EXIT)},t}(d.V8Protocol);t.RawDebugSession=p}),define("vs/workbench/parts/emmet/node/editorAccessor",["require","exports","vs/editor/common/editorCommon","vs/base/common/strings","vs/editor/contrib/snippet/common/snippet","vs/editor/common/core/range","vs/editor/common/commands/replaceCommand"],function(e,t,n,i,r,o,s){var a=function(){function e(e){this.lineStarts=null,this.emmetSupportedModes=["html","razor","css","less","scss","xml","xsl","jade","handlebars","hbs","jsx","tsx"],this.editor=e}return e.prototype.noExpansionOccurred=function(){this.editor.trigger("emmet",n.Handler.Tab,{})},e.prototype.isEmmetEnabledMode=function(){var e=this.getSyntax();return-1!==this.emmetSupportedModes.indexOf(e)},e.prototype.getSelectionRange=function(){var e=this.editor.getSelection();return{start:this.getOffsetFromPosition(e.getStartPosition()),end:this.getOffsetFromPosition(e.getEndPosition())}},e.prototype.getCurrentLineRange=function(){var e=this.editor.getSelection().startLineNumber,t=this.getLineStarts(),n=t[e-1],i=t[e];return{start:n,end:i}},e.prototype.getCaretPos=function(){var e=this.editor.getSelection().getStartPosition();return this.getOffsetFromPosition(e)},e.prototype.setCaretPos=function(e){},e.prototype.getCurrentLine=function(){var e=this.editor.getSelection().getStartPosition();return this.editor.getModel().getLineContent(e.lineNumber)},e.prototype.replaceContent=function(e,t,n,a){var c=this.getPositionFromOffset(t),u=this.getPositionFromOffset(n),l=this.editor.getModel().getLineContent(c.lineNumber).substr(0,c.column),d=l.match(/<[/]?$/);if(d){if(!i.startsWith(e,d[0]))return;c={lineNumber:c.lineNumber,column:c.column-d[0].length}}var h=new o.Range(c.lineNumber,c.column+1,u.lineNumber,u.column+1),p=0;if(h.startLineNumber===h.endLineNumber)p=h.endColumn-h.startColumn;else{var f=new s.ReplaceCommand(h,"");this.editor.executeCommand("emmet",f),p=0}var m=r.CodeSnippet.convertExternalSnippet(e,r.ExternalSnippetType.EmmetSnippet),v=new r.CodeSnippet(m);r.get(this.editor).run(v,p,0)},e.prototype.getContent=function(){return this.editor.getModel().getValue()},e.prototype.createSelection=function(e,t){},e.prototype.getSyntax=function(){var e=this.editor.getSelection().getStartPosition(),t=this.editor.getModel().getModeAtPosition(e.lineNumber,e.column),n=t.getId().split(".").pop();return"razor"===n||"handlebars"===n?"html":"typescriptreact"===n||"javascriptreact"==n?"jsx":"sass"===n?"scss":n},e.prototype.getProfileName=function(){return null},e.prototype.prompt=function(e){},e.prototype.getSelection=function(){return""},e.prototype.getFilePath=function(){return""},e.prototype.flushCache=function(){this.lineStarts=null},e.prototype.getPositionFromOffsetSlow=function(e){for(var t=this.getLineStarts(),n=0;n<t.length&&!(t[n]>e);n++);return{lineNumber:n,column:e-t[n-1]}},e.prototype.getPositionFromOffset=function(e){for(var t,n=this.getLineStarts(),i=0,r=n.length-1;r>=i;)t=i+(r-i)/2|0,n[t]>e?r=t-1:i=t+1;return{lineNumber:i,column:e-n[i-1]}},e.prototype.getOffsetFromPosition=function(e){var t=this.getLineStarts();return t[e.lineNumber-1]+e.column-1},e.prototype.getLineStarts=function(){return null===this.lineStarts&&(this.lineStarts=this.computeLineStarts()),this.lineStarts},e.prototype.computeLineStarts=function(){var e=this.editor.getModel().getValue();return i.computeLineStarts(e)},e}();t.EditorAccessor=a;
});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/emmet/node/emmetActions",["require","exports","vs/base/common/winjs.base","vs/editor/common/editorAction","./editorAccessor","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o){var s=function(t){function s(e,n,o){t.call(this,e,n,i.Behaviour.TextFocus),this.editorAccessor=new r.EditorAccessor(n)}return __extends(s,t),s.prototype.run=function(){var t=this;return new n.TPromise(function(n,i){e(["emmet"],function(e){try{if(!t.editorAccessor.isEmmetEnabledMode())return void t.editorAccessor.noExpansionOccurred();e.run("expand_abbreviation",t.editorAccessor)||t.editorAccessor.noExpansionOccurred()}catch(n){}finally{t.editorAccessor.flushCache()}},i)})},s.ID="editor.emmet.action.expandAbbreviation",s=__decorate([__param(2,o.INullService)],s)}(i.EditorAction);t.ExpandAbbreviationAction=s}),define("vs/workbench/parts/emmet/node/emmet.contribution",["require","exports","vs/nls!vs/workbench/parts/emmet/node/emmet.contribution","vs/editor/common/editorCommonExtensions","vs/editor/common/editorCommon","./emmetActions","vs/platform/keybinding/common/keybindingsRegistry","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a){i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(o.ExpandAbbreviationAction,o.ExpandAbbreviationAction.ID,n.localize(0,null))),s.KeybindingsRegistry.registerCommandRule({id:o.ExpandAbbreviationAction.ID,weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),context:[{key:r.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS},{key:r.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION,operator:s.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0},{key:r.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS,operator:s.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0},{key:r.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS,operator:s.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0}],primary:a.KeyCode.Tab})}),define("vs/workbench/parts/execution/common/execution",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IExecutionService=n.createDecorator("executionService"),t.ITerminalService=n.createDecorator("nativeTerminalService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/execution/electron-browser/executionService",["require","exports","vs/nls!vs/workbench/parts/execution/electron-browser/executionService","vs/base/common/errors","vs/base/common/hash","vs/base/common/winjs.base","vs/base/common/objects","vs/base/common/strings","vs/workbench/parts/execution/common/execution","vs/base/common/uri","child_process"],function(e,t,n,i,r,o,s,a,c,u,l){var d=function(){function e(){this.serviceId=c.IExecutionService,this._executions=Object.create(null)}return e.prototype.exec=function(e,t,n){var o,a=s.clone(process.env);"string"==typeof n?o={cwd:n,env:a}:(s.mixin(a,n.env),n.env=a,o=n);var c=t.concat([e,o.cwd]).reduce(function(e,t){return r.combine(r.computeMurmur2StringHashCode(t),e)},17);this._executions[c]&&(this._executions[c].cancel(),delete this._executions[c]);var u=this.doExec(e,t,o);return this._executions[c]=u,u.then(function(e){return e},function(e){if(!i.isPromiseCanceledError(e))throw e})},e.prototype.doExec=function(e,t,n){throw i.notImplemented()},e}();t.AbstractExecutionService=d;var h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.doExec=function(e,t,n){var i;return new o.TPromise(function(r,o,s){t=["/c","start","/wait","cmd.exe","/c",a.format('"{0} {1} & pause"',e,t.join(" "))],n=n||{},n.windowsVerbatimArguments=!0,i=l.spawn("cmd.exe",t,n),i.on("exit",r),i.on("error",o),s(i)},function(){i&&l.exec("taskkill /F /T /PID "+i.pid,function(e,t,n){e&&console.error(e)})})},t}(d);t.WinExecutionService=h;var p=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.doExec=function(t,n,i){var r;return new o.TPromise(function(o,s,a){n=[u["default"].parse(e.toUrl("vs/workbench/parts/execution/electron-browser/macHelper.scpt")).fsPath,"cd","'"+i.cwd+"'",";",t].concat(n),r=l.spawn("/usr/bin/osascript",n,i),r.on("exit",o),r.on("error",s),a(r)},function(){r&&r.kill("SIGTERM")})},n}(d);t.MacExecutionService=p;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.doExec=function(e,n,i){var r;return new o.TPromise(function(o,s,c){var u="";n.length>0&&(u='"'+n.join('" "')+'"');var d="";i.cwd&&(d=a.format('cd "{0}"',i.cwd));var h=a.format('{0}; "{1}" {2} ; echo; read -p "{3}" -n1;',d,e,u,t.WAIT_MESSAGE);n=["-x","bash","-c",a.format("''{0}''",h)],r=l.spawn(t.LINUX_TERM,n,i),r.on("exit",o),r.on("error",s),c(r)},function(){console.log("SENDING KILL"),r&&r.kill("SIGTERM")})},t.LINUX_TERM="/usr/bin/gnome-terminal",t.WAIT_MESSAGE=n.localize(0,null),t}(d);t.LinuxExecutionService=f});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/execution/electron-browser/terminalService",["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/workbench/parts/execution/common/execution","vs/platform/configuration/common/configuration","vs/platform/message/common/message","child_process"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e,t){this._configurationService=e,this._messageService=t,this.serviceId=o.ITerminalService}return e.prototype.openTerminal=function(e){c.spawn("cmd.exe",["/c","start","/wait"],{cwd:e})},e=__decorate([__param(0,s.IConfigurationService),__param(1,a.IMessageService)],e)}();t.WinTerminalService=u;var l=function(){function t(){this.serviceId=o.ITerminalService}return t.prototype.openTerminal=function(e){this.getTerminalHelperScriptPath().done(function(t){c.spawn("/usr/bin/osascript",[t,e])},n.onUnexpectedError)},t.prototype.getTerminalHelperScriptPath=function(){return this._terminalApplicationScriptPath?this._terminalApplicationScriptPath:this._terminalApplicationScriptPath=new r.TPromise(function(e,t){var n=c.spawn("/usr/bin/osascript",["-e",'exists application "iTerm"']);n.on("error",t),n.on("exit",function(t){e(0===t?"iterm.scpt":"terminal.scpt")})}).then(function(t){return i["default"].parse(e.toUrl("vs/workbench/parts/execution/electron-browser/"+t)).fsPath})},t}();t.MacTerminalService=l;var d=function(){function e(){this.serviceId=o.ITerminalService}return e.prototype.openTerminal=function(e){c.spawn("x-terminal-emulator",[],{cwd:e})},e}();t.LinuxTerminalService=d}),define("vs/workbench/parts/execution/electron-browser/execution.contribution",["require","exports","vs/base/common/platform","vs/workbench/parts/execution/electron-browser/executionService","vs/workbench/parts/execution/electron-browser/terminalService","vs/platform/instantiation/common/extensions","vs/workbench/parts/execution/common/execution"],function(e,t,n,i,r,o,s){n.isWindows?(o.registerSingleton(s.IExecutionService,i.WinExecutionService),o.registerSingleton(s.ITerminalService,r.WinTerminalService)):n.isMacintosh?(o.registerSingleton(s.IExecutionService,i.MacExecutionService),o.registerSingleton(s.ITerminalService,r.MacTerminalService)):n.isLinux&&(o.registerSingleton(s.IExecutionService,i.LinuxExecutionService),o.registerSingleton(s.ITerminalService,r.LinuxTerminalService))}),define("vs/workbench/parts/extensions/common/extensions",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IExtensionsService=n.createDecorator("extensionsService"),t.IGalleryService=n.createDecorator("galleryService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/feedback/browser/feedback",["require","exports","vs/nls!vs/workbench/parts/feedback/browser/feedback","vs/base/browser/builder","vs/base/common/errors","vs/base/common/winjs.base","vs/base/browser/ui/dropdown/dropdown","vs/platform/telemetry/common/telemetry","vs/css!./media/feedback"],function(e,t,n,i,r,o,s,a){var c,u=500;!function(e){e[e.SENDING=0]="SENDING",e[e.SENT=1]="SENT",e[e.SEND_ERROR=2]="SEND_ERROR"}(c||(c={}));var l=function(e){function t(t,r,o){e.call(this,t,{contextViewProvider:r.contextViewProvider,labelRenderer:function(e){return i.$(e).addClass("send-feedback"),null}}),this.telemetryService=o,this.$el.addClass("send-feedback"),this.$el.title(n.localize(0,null)),this.feedbackService=r.feedbackService,this.feedback="",this.alias="",this.aliasEnabled=!1,this.sentiment=1,this.feedbackForm=null,this.feedbackDescriptionInput=null,this.feedbackAliasInput=null,this.smileyInput=null,this.frownyInput=null,this.sendButton=null}return __extends(t,e),t.prototype.renderContents=function(e){var t=this,r=i.$("form.feedback-form").attr({action:"javascript:void(0);",tabIndex:"-1"}).appendTo(e);i.$(e).addClass("monaco-menu-container"),this.feedbackForm=r.getHTMLElement(),i.$("h2.title").text(n.localize(1,null)).appendTo(r),this.invoke(i.$("div.cancel"),function(){t.hide()}).appendTo(r),i.$("h3").text(n.localize(2,null)).appendTo(r);var o=i.$("div.feedback-sentiment").appendTo(r);this.smileyInput=i.$("div").addClass("sentiment smile").attr({"aria-checked":"false","aria-label":n.localize(3,null),tabindex:0,role:"checkbox"}),this.invoke(this.smileyInput,function(){t.setSentiment(!0)}).appendTo(o),this.frownyInput=i.$("div").addClass("sentiment frown").attr({"aria-checked":"false","aria-label":n.localize(4,null),tabindex:0,role:"checkbox"}),this.invoke(this.frownyInput,function(){t.setSentiment(!1)}).appendTo(o),1===this.sentiment?this.smileyInput.addClass("checked").attr("aria-checked","true"):this.frownyInput.addClass("checked").attr("aria-checked","true"),i.$("h3").text(n.localize(5,null)).appendTo(r),this.feedbackDescriptionInput=i.$("textarea.feedback-description").attr({rows:8,"aria-label":n.localize(6,null)}).text(this.feedback).attr("required","required").on("keyup",function(){t.feedbackDescriptionInput.value?t.sendButton.removeAttribute("disabled"):t.sendButton.attr("disabled","")}).appendTo(r).domFocus().getHTMLElement();var s=n.localize(7,null);this.feedbackAliasInput=i.$("input.feedback-alias").type("text").text(s).attr("type","email").attr("placeholder",n.localize(8,null)).value(this.alias).attr("aria-label",s).appendTo(r).getHTMLElement();var a=i.$("div.form-buttons").appendTo(r);return this.sendButton=this.invoke(i.$("input.send").type("submit").attr("disabled","").value(n.localize(9,null)).appendTo(a),function(){t.isSendingFeedback||t.onSubmit().then(null,function(){})}),{dispose:function(){t.feedbackForm=null,t.feedbackDescriptionInput=null,t.feedbackAliasInput=null,t.smileyInput=null,t.frownyInput=null}}},t.prototype.setSentiment=function(e){e?(this.smileyInput.addClass("checked"),this.smileyInput.attr("aria-checked","true"),this.frownyInput.removeClass("checked"),this.frownyInput.attr("aria-checked","false")):(this.frownyInput.addClass("checked"),this.frownyInput.attr("aria-checked","true"),this.smileyInput.removeClass("checked"),this.smileyInput.attr("aria-checked","false")),this.sentiment=e?1:0},t.prototype.invoke=function(e,t){return e.on("click",t),e.on("keypress",function(e){if(e instanceof KeyboardEvent){var n=e;(13===n.keyCode||32===n.keyCode)&&t()}}),e},t.prototype.hide=function(){this.feedbackDescriptionInput&&(this.feedback=this.feedbackDescriptionInput.value),this.feedbackAliasInput&&(this.alias=this.feedbackAliasInput.value),this.autoHideTimeout&&(clearTimeout(this.autoHideTimeout),this.autoHideTimeout=null),e.prototype.hide.call(this)},t.prototype.onEvent=function(e,t){if(e instanceof KeyboardEvent){var n=e;27===n.keyCode&&this.hide()}},t.prototype.onSubmit=function(){var e=this;return this.feedbackForm.checkValidity&&!this.feedbackForm.checkValidity()?o.Promise.as(null):(this.changeFormStatus(c.SENDING),this.feedbackService.submitFeedback({feedback:this.feedbackDescriptionInput.value,alias:this.feedbackAliasInput.value,sentiment:this.sentiment}).then(function(t){return setTimeout(function(){e.changeFormStatus(c.SENT)},u),""},function(t){return setTimeout(function(){e.changeFormStatus(c.SEND_ERROR)},u),o.Promise.wrapError(new r.ConnectionError(t))}))},t.prototype.changeFormStatus=function(e){var t=this;switch(e){case c.SENDING:this.isSendingFeedback=!0,this.sendButton.setClass("send in-progress"),this.sendButton.value(n.localize(10,null));break;case c.SENT:this.isSendingFeedback=!1,this.sendButton.setClass("send success").value(n.localize(11,null)),this.resetForm(),this.autoHideTimeout=setTimeout(function(){t.hide()},1e3),this.sendButton.off(["click","keypress"]),this.invoke(this.sendButton,function(){t.hide(),t.sendButton.off(["click","keypress"])});break;case c.SEND_ERROR:this.isSendingFeedback=!1,this.sendButton.setClass("send error").value(n.localize(12,null))}},t.prototype.resetForm=function(){this.feedbackDescriptionInput?this.feedbackDescriptionInput.value="":null,this.feedbackAliasInput?this.feedbackAliasInput.value="":null,this.sentiment=1,this.aliasEnabled=!1},t=__decorate([__param(2,a.ITelemetryService)],t)}(s.Dropdown);t.FeedbackDropdown=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/browser/views/explorerViewModel",["require","exports","vs/base/common/assert","vs/base/common/types","vs/base/common/uri","vs/base/common/platform","vs/base/common/paths","vs/base/common/mime"],function(e,t,n,i,r,o,s,a){!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ANY=2]="ANY"}(t.StatType||(t.StatType={}));var c=t.StatType,u=function(){function e(e,t,n,i,r,o){void 0===i&&(i=s.basename(e.fsPath)),this.resource=e,this.name=i,this.isDirectory=!!t,this.hasChildren=t&&n,this.mime=t?void 0:a.guessMimeTypes(this.resource.fsPath).join(", "),this.etag=o,this.mtime=r,this.isDirectory&&(this.children=[]),this.isDirectoryResolved=!1}return e.prototype.getId=function(){return this.resource.toString()},e.create=function(t,n){var i=new e(t.resource,t.isDirectory,t.hasChildren,t.name,t.mtime,t.etag);if(i.isDirectory&&(i.isDirectoryResolved=!!t.children||!!n&&n.some(function(e){return s.isEqualOrParent(e.fsPath,i.resource.fsPath)}),t.children))for(var r=0,o=t.children.length;o>r;r++){var a=e.create(t.children[r],n);a.parent=i,i.children.push(a),i.hasChildren=i.children.length>0}return i},e.mergeLocalWithDisk=function(t,i){n.ok(t.resource.toString()===i.resource.toString(),"Merging only supported for stats with the same resource");var r=t.isDirectory||i.isDirectory;if((!r||!i.isDirectoryResolved||t.isDirectoryResolved)&&(i.resource=t.resource,i.name=t.name,i.isDirectory=t.isDirectory,i.hasChildren=t.isDirectory&&t.hasChildren,i.mtime=t.mtime,i.mime=t.mime,i.isDirectoryResolved=t.isDirectoryResolved,r&&t.isDirectoryResolved)){var o=Object.create(null);i.children.forEach(function(e){o[e.resource.toString()]=e}),i.children=[],t.children.forEach(function(t){var n=o[t.resource.toString()];n?(e.mergeLocalWithDisk(t,n),n.parent=i,i.children.push(n)):(t.parent=i,i.children.push(t))})}},e.prototype.clone=function(){var t=new e(r["default"].parse(this.resource.toString()),this.isDirectory,this.hasChildren,this.name,this.mtime,this.etag);return t.isDirectoryResolved=this.isDirectoryResolved,this.parent&&(t.parent=this.parent),this.isDirectory&&this.children.forEach(function(e){t.addChild(e.clone())}),t},e.prototype.addChild=function(e){n.ok(this.isDirectory,"Can only add a child to a folder"),this.removeChild(e),e.parent=this,e.updateResource(!1),this.children.push(e),this.hasChildren=this.children.length>0},e.prototype.hasChild=function(e,t,r){void 0===r&&(r=c.ANY),n.ok(this.isDirectory,"Can only call hasChild on a directory"),n.ok(i.isString(e),"Expected parameter of type String");for(var o=0;o<this.children.length;o++){var s=this.children[o];if(!(r===c.FILE&&s.isDirectory||r===c.FOLDER&&!s.isDirectory)){if(s.name===e)return!0;if(t&&s.name.toLowerCase()===e.toLowerCase())return!0}}return!1},e.prototype.removeChild=function(e){n.ok(this.isDirectory,"Can only remove a child from a directory"),n.ok(!!this.children,"Expected children for directory but found none: "+this.resource.fsPath);for(var t=0;t<this.children.length;t++)if(this.children[t].resource.toString()===e.resource.toString()){this.children.splice(t,1);break}this.hasChildren=this.children.length>0},e.prototype.move=function(e,t,i){var r=this;n.ok(e.isDirectory,"Can only move an element into a directory"),t||(t=function(e){e()}),this.parent.removeChild(this),t(function(){e.addChild(r),r.updateResource(!0),i&&i()})},e.prototype.updateResource=function(e){this.resource=r["default"].file(s.join(this.parent.resource.fsPath,this.name)),e&&this.isDirectory&&this.hasChildren&&this.children&&this.children.forEach(function(e){e.updateResource(!0)})},e.prototype.rename=function(e){this.name=e.name,this.mime=e.mime,this.mtime=e.mtime,this.updateResource(!0)},e.prototype.find=function(e){if(this.fileResourceEquals(e,this.resource))return this;if(!this.hasChildren)return null;for(var t=0;t<this.children.length;t++){var n=this.children[t];if(this.fileResourceEquals(e,n.resource))return n;if(n.isDirectory&&s.isEqualOrParent(e.fsPath,n.resource.fsPath))return n.find(e)}return null},e.prototype.fileResourceEquals=function(e,t){var n=e.toString()===t.toString();return o.isLinux||n?n:e.toString().toLowerCase()===t.toString().toLowerCase()},e}();t.FileStat=u;var l=function(e){function t(n){e.call(this,r["default"].file("")),this.id=t.ID++,this.isDirectoryResolved=n}return __extends(t,e),t.prototype.destroy=function(){this.parent.removeChild(this),delete this.isDirectoryResolved,delete this.name,delete this.isDirectory,delete this.hasChildren,delete this.mtime,delete this.mime},t.prototype.getId=function(){return"new-stat-placeholder:"+this.id+":"+this.parent.resource.toString()},t.prototype.clone=function(){var e=new t(this.isDirectory);return e.parent=this.parent,e},t.prototype.addChild=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.hasChild=function(e,t){return!1},t.prototype.removeChild=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.move=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.rename=function(e){throw new Error("Can't perform operations in NewStatPlaceholder.")},t.prototype.find=function(e){return null},t.addNewStatPlaceholder=function(e,i){n.ok(e.isDirectory,"Can only add a child to a folder");var r=new t(i);return r.parent=e,e.children.push(r),e.hasChildren=e.children.length>0,r},t.ID=0,t}(u);t.NewStatPlaceholder=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/common/files",["require","exports","vs/base/common/events","vs/base/common/mime","vs/workbench/common/editor","vs/platform/instantiation/common/instantiation","vs/workbench/parts/files/browser/views/explorerViewModel"],function(e,t,n,i,r,o,s){function a(e){if(e instanceof s.FileStat){var n=e;return{resource:n.resource,mimes:n.mime?n.mime.split(", "):[],isDirectory:n.isDirectory}}if(e&&e.CLASS_ID===t.WORKING_FILES_MODEL_ENTRY_CLASS_ID){var r=e;if(r.isFile)return{resource:r.resource,mimes:i.guessMimeTypes(r.resource.fsPath),isDirectory:!1}}return null}t.VIEWLET_ID="workbench.view.explorer",t.FILE_EDITOR_INPUT_ID="workbench.editors.files.fileEditorInput",t.TEXT_FILE_EDITOR_ID="workbench.editors.files.textFileEditor",t.BINARY_FILE_EDITOR_ID="workbench.editors.files.binaryFileEditor",t.WORKING_FILES_MODEL_ENTRY_CLASS_ID="workbench.workingFiles.model.entry.class";var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(r.EditorInput);t.FileEditorInput=c,t.asFileResource=a,t.EventType={FILE_DIRTY:"files:fileDirty",FILE_SAVING:"files:fileSaving",FILE_SAVE_ERROR:"files:fileSaveError",FILE_SAVED:"files:fileSaved",FILE_REVERTED:"files:fileReverted"};var u=function(e){function t(t,n,i){e.call(this,null,t,n,i)}return __extends(t,e),t.prototype.getBefore=function(){return this.oldValue},t.prototype.getAfter=function(){return this.newValue},t.prototype.gotAdded=function(){return!this.oldValue&&!!this.newValue},t.prototype.gotMoved=function(){return!!this.oldValue&&!!this.newValue&&this.oldValue.resource.toString()!==this.newValue.resource.toString()},t.prototype.gotUpdated=function(){return!!this.oldValue&&!!this.newValue&&!this.gotMoved()&&this.oldValue!==this.newValue},t.prototype.gotDeleted=function(){return!!this.oldValue&&!this.newValue},t}(n.PropertyChangeEvent);t.LocalFileChangeEvent=u;var l=function(e){function t(t,n,i,r){void 0===i&&(i=n),e.call(this,n,i,r),this._model=t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.setAutoSaved=function(e){this._isAutoSaved=e},Object.defineProperty(t.prototype,"isAutoSaved",{get:function(){return this._isAutoSaved},enumerable:!0,configurable:!0}),t}(u);t.TextFileChangeEvent=l,t.TEXT_FILE_SERVICE_ID="textFileService",function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"}(t.ConfirmResult||(t.ConfirmResult={}));t.ConfirmResult;t.ITextFileService=o.createDecorator(t.TEXT_FILE_SERVICE_ID)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/saveParticipant",["require","exports","vs/editor/common/services/codeEditorService","vs/base/common/errors","vs/workbench/parts/files/common/files","vs/editor/common/core/selection","vs/editor/common/commands/trimTrailingWhitespaceCommand","vs/platform/configuration/common/configuration","vs/platform/event/common/event"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e,t,n){this.configurationService=e,this.eventService=t,this.codeEditorService=n,this.toUnbind=[],this.trimTrailingWhitespace=!1,this.registerListeners(),this.loadConfiguration()}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(r.EventType.FILE_SAVING,function(t){return e.onTextFileSaving(t)})),this.toUnbind.push(this.configurationService.addListener(a.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)}))},e.prototype.loadConfiguration=function(){var e=this;this.configurationService.loadConfiguration().done(function(t){e.onConfigurationChange(t)},i.onUnexpectedError)},e.prototype.onConfigurationChange=function(e){this.trimTrailingWhitespace=e&&e.files&&e.files.trimTrailingWhitespace},e.prototype.getId=function(){return"vs.files.saveparticipant"},e.prototype.onTextFileSaving=function(e){this.trimTrailingWhitespace&&this.doTrimTrailingWhitespace(e.model,e.isAutoSaved)},e.prototype.doTrimTrailingWhitespace=function(e,t){var n=[o.Selection.createSelection(1,1,1,1)],i=[];if(t&&e.isAttachedToEditor())for(var r=this.codeEditorService.listCodeEditors(),a=0,c=r.length;c>a;a++){var u=r[a],l=u.getModel();l&&e===l&&(n=u.getSelections(),i.push.apply(i,n.map(function(e){return{lineNumber:e.positionLineNumber,column:e.positionColumn}})))}var d=s.trimTrailingWhitespace(e,i);d.length&&e.pushEditOperations(n,d,function(e){return n})},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e=__decorate([__param(0,a.IConfigurationService),__param(1,c.IEventService),__param(2,n.ICodeEditorService)],e)}();t.SaveParticipant=u}),define("vs/workbench/parts/git/common/git",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){function i(e){return!/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$/.test(e)}!function(e){e[e.INDEX=0]="INDEX",e[e.WORKING_TREE=1]="WORKING_TREE",e[e.MERGE=2]="MERGE"}(t.StatusType||(t.StatusType={}));t.StatusType;!function(e){e[e.INDEX_MODIFIED=0]="INDEX_MODIFIED",e[e.INDEX_ADDED=1]="INDEX_ADDED",e[e.INDEX_DELETED=2]="INDEX_DELETED",e[e.INDEX_RENAMED=3]="INDEX_RENAMED",e[e.INDEX_COPIED=4]="INDEX_COPIED",e[e.MODIFIED=5]="MODIFIED",e[e.DELETED=6]="DELETED",e[e.UNTRACKED=7]="UNTRACKED",e[e.IGNORED=8]="IGNORED",e[e.ADDED_BY_US=9]="ADDED_BY_US",e[e.ADDED_BY_THEM=10]="ADDED_BY_THEM",e[e.DELETED_BY_US=11]="DELETED_BY_US",e[e.DELETED_BY_THEM=12]="DELETED_BY_THEM",e[e.BOTH_ADDED=13]="BOTH_ADDED",e[e.BOTH_DELETED=14]="BOTH_DELETED",e[e.BOTH_MODIFIED=15]="BOTH_MODIFIED"}(t.Status||(t.Status={}));t.Status;t.ModelEvents={MODEL_UPDATED:"ModelUpdated",STATUS_MODEL_UPDATED:"StatusModelUpdated",HEAD_UPDATED:"HEADUpdated",HEADS_UPDATED:"HEADSUpdated",TAGS_UPDATED:"TagsUpdated",REMOTES_UPDATED:"RemotesUpdated"},function(e){e[e.NotInitialized=0]="NotInitialized",e[e.NotARepo=1]="NotARepo",e[e.NotAtRepoRoot=2]="NotAtRepoRoot",e[e.OK=3]="OK",e[e.NoGit=4]="NoGit",e[e.Disabled=5]="Disabled",e[e.NotAWorkspace=6]="NotAWorkspace"}(t.ServiceState||(t.ServiceState={}));t.ServiceState;!function(e){e[e.OK=0]="OK",e[e.GitNotFound=1]="GitNotFound",e[e.Disabled=2]="Disabled"}(t.RawServiceState||(t.RawServiceState={}));t.RawServiceState;t.GitErrorCodes={BadConfigFile:"BadConfigFile",AuthenticationFailed:"AuthenticationFailed",NoUserNameConfigured:"NoUserNameConfigured",NoUserEmailConfigured:"NoUserEmailConfigured",NoRemoteRepositorySpecified:"NoRemoteRepositorySpecified",NotAGitRepository:"NotAGitRepository",NotAtRepositoryRoot:"NotAtRepositoryRoot",Conflict:"Conflict",UnmergedChanges:"UnmergedChanges",PushRejected:"PushRejected",RemoteConnectionError:"RemoteConnectionError",DirtyWorkTree:"DirtyWorkTree",CantOpenResource:"CantOpenResource",GitNotFound:"GitNotFound",CantCreatePipe:"CantCreatePipe",CantAccessRemote:"CantAccessRemote",RepositoryNotFound:"RepositoryNotFound"},function(e){e[e.Disabled=0]="Disabled",e[e.Inactive=1]="Inactive",e[e.Active=2]="Active",e[e.Fetching=3]="Fetching"}(t.AutoFetcherState||(t.AutoFetcherState={}));t.AutoFetcherState;t.ServiceEvents={STATE_CHANGED:"stateChanged",REPO_CHANGED:"repoChanged",OPERATION_START:"operationStart",OPERATION_END:"operationEnd",OPERATION:"operation",ERROR:"error",DISPOSE:"dispose"},t.ServiceOperations={STATUS:"status",INIT:"init",ADD:"add",STAGE:"stage",BRANCH:"branch",CHECKOUT:"checkout",CLEAN:"clean",UNDO:"undo",RESET:"reset",COMMIT:"commit",COMMAND:"command",BACKGROUND_FETCH:"backgroundfetch",PULL:"pull",PUSH:"push",SYNC:"sync"},t.GIT_SERVICE_ID="gitService",t.IGitService=n.createDecorator(t.GIT_SERVICE_ID),t.isValidBranchName=i});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitEditorContributions",["require","exports","vs/editor/common/editorCommon","vs/workbench/parts/git/common/git","vs/platform/workspace/common/workspace"],function(e,t,n,i,r){var o=i.IGitService,s=function(){function e(e,t,i){this.gitService=t,this.contextService=i,this.editor=e,this.toUnbind=[this.editor.addListener(n.EventType.ModelChanged,this.onModelChanged.bind(this))],this.decorations=[],this.model=null,this.unbindModelListener=null}return e.prototype.getId=function(){return e.ID},e.prototype.onModelChanged=function(){if(this.model&&(this.decorations=this.model.deltaDecorations(this.decorations,[]),this.unbindModelListener(),this.unbindModelListener=null,this.model=null),this.contextService&&this.gitService){var e=this.editor.getModel();if(e){var t=e.getAssociatedResource();if(t){var r=this.contextService.toWorkspaceRelativePath(t);if(r){var o=this.gitService.getModel(),s=o.getStatus().find(r,i.StatusType.MERGE);s&&(this.model=e,this.redecorate(),this.unbindModelListener=this.model.addListener(n.EventType.ModelContentChanged,this.redecorate.bind(this)))}}}}},e.prototype.redecorate=function(){for(var t=[],n=this.model.getLineCount(),i=1;n>=i;i++){var r=this.model.getLineContent(i).substr(0,7);switch(r){case"<<<<<<<":case"=======":case">>>>>>>":t.push({range:{startLineNumber:i,startColumn:1,endLineNumber:i,endColumn:1},options:e.DECORATION_OPTIONS})}}this.decorations=this.model.deltaDecorations(this.decorations,t)},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Editor.MergeDecorator",e.DECORATION_OPTIONS={className:"git-merge-control-decoration",isWholeLine:!0,overviewRuler:{color:"rgb(197, 118, 0)",darkColor:"rgb(197, 118, 0)",position:n.OverviewRulerLane.Left}},e=__decorate([__param(1,o),__param(2,r.IWorkspaceContextService)],e)}();t.MergeDecorator=s}),define("vs/workbench/parts/git/browser/gitOperations",["require","exports","vs/workbench/parts/git/common/git","vs/base/common/winjs.base"],function(e,t,n,i){var r=function(){function e(e,t){this.id=e,this.fn=t}return e.prototype.run=function(){return this.fn()},e.prototype.dispose=function(){},e}();t.GitOperation=r;var o=function(){function e(e){this.input=e,this.id=n.ServiceOperations.COMMAND}return e.prototype.run=function(){return i.Promise.as(null)},e.prototype.dispose=function(){this.id=null,this.input=null},e}();t.CommandOperation=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/git/common/gitModel",["require","exports","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/eventEmitter","vs/workbench/parts/git/common/git"],function(e,t,n,i,r,o){var s=function(){function e(t,n,i,r,o){this.path=t,this.mimetype=n,this.status=i,
this.rename=r,this.id=e.typeOf(i)+":"+t+(r?":"+r:"")+(o?"$":""),this.pathComponents=t.split("/")}return e.prototype.getPath=function(){return this.path},e.prototype.getPathComponents=function(){return this.pathComponents.slice(0)},e.prototype.getMimetype=function(){return this.mimetype},e.prototype.getStatus=function(){return this.status},e.prototype.getRename=function(){return this.rename},e.prototype.getId=function(){return this.id},e.prototype.getType=function(){switch(e.typeOf(this.status)){case"index":return o.StatusType.INDEX;case"workingTree":return o.StatusType.WORKING_TREE;default:return o.StatusType.MERGE}},e.prototype.clone=function(){return new e(this.path,this.mimetype,this.status,this.rename)},e.prototype.update=function(e){this.status=e.getStatus(),this.rename=e.getRename()},e.typeOf=function(e){switch(e){case o.Status.INDEX_MODIFIED:case o.Status.INDEX_ADDED:case o.Status.INDEX_DELETED:case o.Status.INDEX_RENAMED:case o.Status.INDEX_COPIED:return"index";case o.Status.MODIFIED:case o.Status.DELETED:case o.Status.UNTRACKED:case o.Status.IGNORED:return"workingTree";default:return"merge"}},e}();t.FileStatus=s;var a=function(e){function t(t){e.call(this),this.type=t,this.statusSet=Object.create(null),this.statusList=[],this.statusByName=Object.create(null),this.statusByRename=Object.create(null)}return __extends(t,e),t.prototype.getType=function(){return this.type},t.prototype.update=function(e){var t,n,i,r,o=Object.create(null);for(t in this.statusSet)o[t]=this.statusSet[t];for(var s=0;s<e.length;s++)r=e[s],t=r.getId(),n=r.getPath(),i=r.getRename(),o[t]?(this.statusSet[t].update(r),o[t]=null):this.statusSet[t]=r;for(t in o)(r=o[t])&&(this.emit("fileStatus:dispose",r),delete this.statusSet[t]);this.statusList=[],this.statusByName=Object.create(null),this.statusByRename=Object.create(null);for(t in this.statusSet)r=this.statusSet[t],this.statusList.push(r),r.getRename()?this.statusByRename[r.getPath()]=r:this.statusByName[r.getPath()]=r},t.prototype.all=function(){return this.statusList},t.prototype.find=function(e){return this.statusByName[e]||this.statusByRename[e]||null},t.prototype.dispose=function(){this.type=null,this.statusSet=null,this.statusList=null,this.statusByName=null,this.statusByRename=null,e.prototype.dispose.call(this)},t}(r.EventEmitter);t.StatusGroup=a;var c=function(e){function t(){e.call(this),this.indexStatus=new a(o.StatusType.INDEX),this.workingTreeStatus=new a(o.StatusType.WORKING_TREE),this.mergeStatus=new a(o.StatusType.MERGE),this.toDispose=[this.addEmitter2(this.indexStatus),this.addEmitter2(this.workingTreeStatus),this.addEmitter2(this.mergeStatus)]}return __extends(t,e),t.prototype.getSummary=function(){return{hasWorkingTreeChanges:this.getWorkingTreeStatus().all().length>0,hasIndexChanges:this.getIndexStatus().all().length>0,hasMergeChanges:this.getMergeStatus().all().length>0}},t.prototype.update=function(e){var t=[],n=[],i=[];e.forEach(function(e){switch(e.x+e.y){case"??":return n.push(new s(e.path,e.mimetype,o.Status.UNTRACKED));case"!!":return n.push(new s(e.path,e.mimetype,o.Status.IGNORED));case"DD":return i.push(new s(e.path,e.mimetype,o.Status.BOTH_DELETED));case"AU":return i.push(new s(e.path,e.mimetype,o.Status.ADDED_BY_US));case"UD":return i.push(new s(e.path,e.mimetype,o.Status.DELETED_BY_THEM));case"UA":return i.push(new s(e.path,e.mimetype,o.Status.ADDED_BY_THEM));case"DU":return i.push(new s(e.path,e.mimetype,o.Status.DELETED_BY_US));case"AA":return i.push(new s(e.path,e.mimetype,o.Status.BOTH_ADDED));case"UU":return i.push(new s(e.path,e.mimetype,o.Status.BOTH_MODIFIED))}var r=!1;switch(e.x){case"M":t.push(new s(e.path,e.mimetype,o.Status.INDEX_MODIFIED)),r=!0;break;case"A":t.push(new s(e.path,e.mimetype,o.Status.INDEX_ADDED));break;case"D":t.push(new s(e.path,e.mimetype,o.Status.INDEX_DELETED));break;case"R":t.push(new s(e.path,e.mimetype,o.Status.INDEX_RENAMED,e.rename));break;case"C":t.push(new s(e.path,e.mimetype,o.Status.INDEX_COPIED))}switch(e.y){case"M":n.push(new s(e.path,e.mimetype,o.Status.MODIFIED,e.rename,r));break;case"D":n.push(new s(e.path,e.mimetype,o.Status.DELETED,e.rename))}}),this.indexStatus.update(t),this.workingTreeStatus.update(n),this.mergeStatus.update(i),this.emit(o.ModelEvents.STATUS_MODEL_UPDATED)},t.prototype.getIndexStatus=function(){return this.indexStatus},t.prototype.getWorkingTreeStatus=function(){return this.workingTreeStatus},t.prototype.getMergeStatus=function(){return this.mergeStatus},t.prototype.getGroups=function(){return[this.mergeStatus,this.indexStatus,this.workingTreeStatus]},t.prototype.find=function(e,t){var n;switch(t){case o.StatusType.INDEX:n=this.indexStatus;break;case o.StatusType.WORKING_TREE:n=this.workingTreeStatus;break;case o.StatusType.MERGE:n=this.mergeStatus;break;default:return null}return n.find(e)},t.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),this.indexStatus&&(this.indexStatus.dispose(),this.indexStatus=null),this.workingTreeStatus&&(this.workingTreeStatus.dispose(),this.workingTreeStatus=null),this.mergeStatus&&(this.mergeStatus.dispose(),this.mergeStatus=null),e.prototype.dispose.call(this)},t}(r.EventEmitter);t.StatusModel=c;var u=function(e){function t(){e.call(this),this.toDispose=[],this.repositoryRoot=null,this.status=new c,this.toDispose.push(this.addEmitter2(this.status)),this.HEAD=null,this.heads=[],this.tags=[],this.remotes=[]}return __extends(t,e),t.prototype.getRepositoryRoot=function(){return this.repositoryRoot},t.prototype.getStatus=function(){return this.status},t.prototype.getHEAD=function(){return this.HEAD},t.prototype.getHeads=function(){return this.heads},t.prototype.getTags=function(){return this.tags},t.prototype.getRemotes=function(){return this.remotes},t.prototype.update=function(e){e||(e={repositoryRoot:null,status:[],HEAD:null,heads:[],tags:[],remotes:[]}),this.repositoryRoot=e.repositoryRoot,this.status.update(e.status),this.HEAD=e.HEAD,this.emit(o.ModelEvents.HEAD_UPDATED),this.heads=e.heads,this.emit(o.ModelEvents.HEADS_UPDATED),this.tags=e.tags,this.emit(o.ModelEvents.TAGS_UPDATED),this.remotes=e.remotes,this.emit(o.ModelEvents.REMOTES_UPDATED),this.emit(o.ModelEvents.MODEL_UPDATED)},t.prototype.getStatusSummary=function(){var e=this.getStatus();return{hasWorkingTreeChanges:e.getWorkingTreeStatus().all().length>0,hasIndexChanges:e.getIndexStatus().all().length>0,hasMergeChanges:e.getMergeStatus().all().length>0}},t.prototype.getPS1=function(){if(!this.HEAD)return"";var e=this.HEAD.name||this.HEAD.commit.substr(0,8),t=this.getStatus().getSummary();return i.format("{0}{1}{2}{3}",e,t.hasWorkingTreeChanges?"*":"",t.hasIndexChanges?"+":"",t.hasMergeChanges?"!":"")},t.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(r.EventEmitter);t.Model=u}),define("vs/workbench/parts/git/common/noopGitService",["require","exports","vs/workbench/parts/git/common/git","vs/base/common/winjs.base"],function(e,t,n,i){var r=function(){function e(){}return e.prototype.serviceState=function(){return i.Promise.as(n.RawServiceState.OK)},e.prototype.status=function(){return i.Promise.as(e.STATUS)},e.prototype.init=function(){return i.Promise.as(e.STATUS)},e.prototype.add=function(t){return i.Promise.as(e.STATUS)},e.prototype.stage=function(t,n){return i.Promise.as(e.STATUS)},e.prototype.branch=function(t,n){return i.Promise.as(e.STATUS)},e.prototype.checkout=function(t,n){return i.Promise.as(e.STATUS)},e.prototype.clean=function(t){return i.Promise.as(e.STATUS)},e.prototype.undo=function(){return i.Promise.as(e.STATUS)},e.prototype.reset=function(t,n){return i.Promise.as(e.STATUS)},e.prototype.revertFiles=function(t,n){return i.Promise.as(e.STATUS)},e.prototype.fetch=function(){return i.Promise.as(e.STATUS)},e.prototype.pull=function(t){return i.Promise.as(e.STATUS)},e.prototype.push=function(){return i.Promise.as(e.STATUS)},e.prototype.sync=function(){return i.Promise.as(e.STATUS)},e.prototype.commit=function(t,n,r){return i.Promise.as(e.STATUS)},e.prototype.detectMimetypes=function(e,t){return i.Promise.as([])},e.prototype.show=function(e,t){return i.Promise.as(null)},e.prototype.onOutput=function(){return i.Promise.as(function(){return null})},e.STATUS={repositoryRoot:null,state:n.ServiceState.NotAWorkspace,status:[],HEAD:null,heads:[],tags:[],remotes:[]},e}();t.NoOpGitService=r}),define("vs/workbench/parts/git/common/stageRanges",["require","exports","vs/editor/common/core/range"],function(e,t,n){function i(e){e.sort(function(e,t){return e.originalStartLineNumber<t.originalStartLineNumber?-1:e.originalStartLineNumber>t.originalStartLineNumber?1:e.modifiedStartLineNumber<t.modifiedStartLineNumber?-1:1})}function r(e){e.sort(function(e,t){return e.getStartPosition().lineNumber<t.getStartPosition().lineNumber?-1:1})}function o(e){return e.originalEndLineNumber<=0}function s(e){return e.modifiedEndLineNumber<=0}function a(e){var t=e.getSelections(),n=u(e.getLineChanges(),t);return d(e.getModel().original,e.getModel().modified,n)}function c(e,t){var n={modifiedStartLineNumber:Math.max(e.modifiedStartLineNumber,t.startLineNumber),modifiedEndLineNumber:Math.min(e.modifiedEndLineNumber,t.endLineNumber),originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber},i=s(n)&&e.modifiedStartLineNumber>=t.startLineNumber&&e.modifiedStartLineNumber<=t.endLineNumber;return n.modifiedStartLineNumber<=n.modifiedEndLineNumber||i?n:null}function u(e,t){i(e),r(t);for(var n=[],o=0,a=-1,u=0;u<e.length;++u)for(o=Math.max(0,o-1);o<t.length&&(t[o].startLineNumber<=e[u].modifiedEndLineNumber||s(e[u]));){var l=c(e[u],t[o]);null!==l&&(a!==l.modifiedStartLineNumber?(n.push(l),a=l.modifiedEndLineNumber):(l.modifiedStartLineNumber++,l.modifiedStartLineNumber<=l.modifiedEndLineNumber&&(n.push(l),a=l.modifiedEndLineNumber))),o++}return n}function l(e,t,n){var i=e;return""!==i&&(i+=t.getEOL()),i+t.getValueInRange(n)}function d(e,t,r){i(r);for(var a="",c=1,u=0;u<r.length;++u){var d=o(r[u])?r[u].originalStartLineNumber+1:r[u].originalStartLineNumber;d>c&&(a=l(a,e,new n.Range(c,1,d-1,e.getLineMaxColumn(d-1))),c=d),s(r[u])||(a=l(a,t,new n.Range(r[u].modifiedStartLineNumber,1,r[u].modifiedEndLineNumber,t.getLineMaxColumn(r[u].modifiedEndLineNumber)))),o(r[u])||(c=r[u].originalEndLineNumber+1)}return c<=e.getLineCount()&&(a=l(a,e,new n.Range(c,1,e.getLineCount(),e.getLineMaxColumn(e.getLineCount())))),a}t.stageRanges=a,t.intersectChangeAndSelection=c,t.getSelectedChanges=u,t.appendValueFromRange=l,t.applyChangesToModel=d}),define("vs/workbench/parts/git/node/git.lib",["require","exports","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/mime","vs/base/common/lifecycle","vs/base/common/objects","vs/base/common/uuid","vs/nls!vs/workbench/parts/git/node/git.lib","vs/base/common/strings","vs/workbench/parts/git/common/git","vs/base/node/mime","vs/platform/files/common/files","child_process","iconv-lite"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){function m(e,t){void 0===t&&(t="utf8");var i=[],r=function(e,t,n){e.once(t,n),i.push(o.toDisposable(function(){return e.removeListener(t,n)}))},s=function(e,t,n){e.on(t,n),i.push(o.toDisposable(function(){return e.removeListener(t,n)}))};return n.TPromise.join([new n.TPromise(function(t,n){r(e,"error",n),r(e,"exit",t)}),new n.TPromise(function(n){var i=[];s(e.stdout,"data",function(e){return i.push(e)}),r(e.stdout,"close",function(){return n(Buffer.concat(i).toString(t))})}),new n.TPromise(function(n){var i=[];s(e.stderr,"data",function(e){return i.push(e)}),r(e.stderr,"close",function(){return n(Buffer.concat(i).toString(t))})})]).then(function(e){return o.disposeAll(i),{exitCode:e[0],stdout:e[1],stderr:e[2]}})}var v=function(){function e(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=null,this.message=this.message||e.message||"Git error",this.stdout=e.stdout||null,this.stderr=e.stderr||null,this.exitCode=e.exitCode||null,this.gitErrorCode=e.gitErrorCode||null,this.gitCommand=e.gitCommand||null}return e.prototype.toString=function(){var e=this.message+" "+JSON.stringify({exitCode:this.exitCode,gitErrorCode:this.gitErrorCode,gitCommand:this.gitCommand,stdout:this.stdout,stderr:this.stderr},null,2);return this.error&&(e+=this.error.stack),e},e}();t.GitError=v;var g=function(){function e(e){this.gitPath=e.gitPath,this.tmpPath=e.tmpPath;var t=e.defaultEncoding||"utf8";this.defaultEncoding=f.encodingExists(t)?t:"utf8",this.env=e.env||{},this.outputListeners=[]}return e.prototype.run=function(e,t,n){return void 0===n&&(n={}),n=s.assign({cwd:e},n||{}),this.exec(t,n)},e.prototype.stream=function(e,t,n){return void 0===n&&(n={}),n=s.assign({cwd:e},n||{}),this.spawn(t,n)},e.prototype.open=function(e,t){return void 0===t&&(t={}),new y(this,e,this.defaultEncoding,t)},e.prototype.clone=function(e,t){var r=this;return this.exec(["clone",t,e]).then(function(){return!0},function(t){return new n.TPromise(function(t,n){i.del(e,r.tmpPath,function(e){return e?n(e):void t(!0)})})})},e.prototype.config=function(e,t){return this.exec(["config","--global",e,t])},e.prototype.exec=function(e,t){var i=this;void 0===t&&(t={});var r=this.spawn(e,t);return t.input&&r.stdin.end(t.input,"utf8"),m(r).then(function(r){if(r.exitCode){var o=null;return/Authentication failed/.test(r.stderr)?o=l.GitErrorCodes.AuthenticationFailed:/Not a git repository/.test(r.stderr)?o=l.GitErrorCodes.NotAGitRepository:/bad config file/.test(r.stderr)?o=l.GitErrorCodes.BadConfigFile:/cannot make pipe for command substitution|cannot create standard input pipe/.test(r.stderr)?o=l.GitErrorCodes.CantCreatePipe:/Repository not found/.test(r.stderr)?o=l.GitErrorCodes.RepositoryNotFound:/unable to access/.test(r.stderr)&&(o=l.GitErrorCodes.CantAccessRemote),t.log!==!1&&i.log(r.stderr),n.TPromise.wrapError(new v({message:"Failed to execute git",stdout:r.stdout,stderr:r.stderr,exitCode:r.exitCode,gitErrorCode:o,gitCommand:e[0]}))}return r})},e.prototype.spawn=function(e,t){if(void 0===t&&(t={}),!this.gitPath)throw new Error("git could not be found in the system.");return t||(t={}),t.stdio||t.input||(t.stdio=["ignore",null,null]),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),t.env=s.assign(t.env,{MONACO_REQUEST_GUID:a.v4().asHex(),VSCODE_GIT_REQUEST_ID:a.v4().asHex(),MONACO_GIT_COMMAND:e[0]}),t.log!==!1&&this.log(u.format("git {0}\n",e.join(" "))),p.spawn(this.gitPath,e,t)},e.prototype.onOutput=function(e){var t=this;return this.outputListeners.push(e),function(){return t.outputListeners.splice(t.outputListeners.indexOf(e),1)}},e.prototype.log=function(e){this.outputListeners.forEach(function(t){return t(e)})},e}();t.Git=g;var y=function(){function e(e,t,n,i){void 0===i&&(i={}),this.git=e,this.repository=t,this.defaultEncoding=n,this.env=i}return Object.defineProperty(e.prototype,"path",{get:function(){return this.repository},enumerable:!0,configurable:!0}),e.prototype.run=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.run(this.repository,e,t)},e.prototype.stream=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.stream(this.repository,e,t)},e.prototype.spawn=function(e,t){return void 0===t&&(t={}),t.env=s.assign({},t.env||{}),t.env=s.assign(t.env,this.env),this.git.spawn(e,t)},e.prototype.init=function(){return this.run(["init"])},e.prototype.config=function(e,t,n,i){var r=["config"];return e&&r.push("--"+e),r.push(t),n&&r.push(n),this.run(r,i).then(function(e){return e.stdout})},e.prototype.show=function(e){return this.stream(["show",e])},e.prototype.buffer=function(e){var t=this,i=this.show(e);return new n.Promise(function(n,o){d.detectMimesFromStream(i.stdout,null,function(i,s){i?o(i):r.isBinaryMime(s.mimes)?o({message:c.localize(0,null),fileOperationResult:h.FileOperationResult.FILE_IS_BINARY}):n(t.doBuffer(e))})})},e.prototype.doBuffer=function(e){var t=this.show(e);return m(t,this.defaultEncoding).then(function(e){var t=e.exitCode,i=e.stdout;return t?n.TPromise.wrapError(new v({message:"Could not buffer object.",exitCode:t})):n.TPromise.as(i)})},e.prototype.add=function(e){var t=["add","-A","--"];return e&&e.length?t.push.apply(t,e):t.push("."),this.run(t)},e.prototype.stage=function(e,t){var i=this,r=this.stream(["hash-object","--stdin","-w"],{stdio:[null,null,null]});return r.stdin.end(t,"utf8"),m(r).then(function(t){var r=t.exitCode,o=t.stdout;return r?n.TPromise.wrapError(new v({message:"Could not hash object.",exitCode:r})):i.run(["update-index","--cacheinfo","100644",o,e])})},e.prototype.checkout=function(e,t){var i=["checkout","-q"];return e&&i.push(e),t&&t.length&&(i.push("--"),i.push.apply(i,t)),this.run(i).then(null,function(e){return/Please, commit your changes or stash them/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.DirtyWorkTree),n.Promise.wrapError(e)})},e.prototype.commit=function(e,t,i){var r=this,o=["commit","--quiet","--allow-empty-message","--file","-"];return t&&o.push("--all"),i&&o.push("--amend"),this.run(o,{input:e||""}).then(null,function(e){return/not possible because you have unmerged files/.test(e.stderr)?(e.gitErrorCode=l.GitErrorCodes.UnmergedChanges,n.Promise.wrapError(e)):r.run(["config","--get-all","user.name"]).then(null,function(e){return e.gitErrorCode=l.GitErrorCodes.NoUserNameConfigured,n.Promise.wrapError(e)}).then(function(){return r.run(["config","--get-all","user.email"]).then(null,function(e){return e.gitErrorCode=l.GitErrorCodes.NoUserEmailConfigured,n.Promise.wrapError(e)}).then(function(){return n.Promise.wrapError(e)})})})},e.prototype.branch=function(e,t){var n=t?["checkout","-q","-b",e]:["branch","-q",e];return this.run(n)},e.prototype.clean=function(e){var t=["clean","-f","-q","--"].concat(e);return this.run(t)},e.prototype.undo=function(){var e=this;return this.run(["clean","-fd"]).then(function(){return e.run(["checkout","--","."]).then(null,function(e){return/did not match any file\(s\) known to git\./.test(e.stderr)?n.Promise.as(null):n.Promise.wrapError(e)})})},e.prototype.reset=function(e,t){void 0===t&&(t=!1);var n=["reset"];return t&&n.push("--hard"),n.push(e),this.run(n)},e.prototype.revertFiles=function(e,t){var i=this;return this.run(["branch"]).then(function(r){var o;return o=r.stdout?["reset","-q",e,"--"]:["rm","--cached","-r","--"],t&&t.length?o.push.apply(o,t):o.push("."),i.run(o).then(null,function(e){return/([^:]+: needs merge\n)+/m.test(e.stdout)?n.Promise.as(null):n.Promise.wrapError(e)})})},e.prototype.fetch=function(){return this.run(["fetch"]).then(null,function(e){return/No remote repository specified\./.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.NoRemoteRepositorySpecified:/Could not read from remote repository/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError),n.Promise.wrapError(e)})},e.prototype.pull=function(e){var t=["pull"];return e&&t.push("-r"),this.run(t).then(null,function(e){return/^CONFLICT \([^)]+\): \b/m.test(e.stdout)?e.gitErrorCode=l.GitErrorCodes.Conflict:/Please tell me who you are\./.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.NoUserNameConfigured:/Could not read from remote repository/.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError:/Pull is not possible because you have unmerged files|Cannot pull with rebase: You have unstaged changes|Your local changes to the following files would be overwritten|Please, commit your changes before you can merge/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.DirtyWorkTree),n.Promise.wrapError(e)})},e.prototype.push=function(e,t,i){var r=["push"];return i&&i.setUpstream&&r.push("-u"),e&&r.push(e),t&&r.push(t),this.run(r).then(null,function(e){return/^error: failed to push some refs to\b/m.test(e.stderr)?e.gitErrorCode=l.GitErrorCodes.PushRejected:/Could not read from remote repository/.test(e.stderr)&&(e.gitErrorCode=l.GitErrorCodes.RemoteConnectionError),n.Promise.wrapError(e)})},e.prototype.sync=function(){var e=this;return this.pull().then(function(){return e.push()})},e.prototype.getRoot=function(){return this.run(["rev-parse","--show-toplevel"],{log:!1}).then(function(e){return e.stdout.trim()})},e.prototype.getStatus=function(){return this.run(["status","-z","-u"],{log:!1}).then(function(e){function t(){for(var e,t=a;"\x00"!==(e=o.charAt(a));)a++;return o.substring(t,a++)}for(var i,o=e.stdout,s=[],a=0;a<o.length;)i={x:o.charAt(a++),y:o.charAt(a++),path:null,mimetype:null},a++,"R"===i.x&&(i.rename=t()),i.path=t(),i.mimetype=r.guessMimeTypes(i.path)[0],"/"!==i.path[i.path.length-1]&&s.push(i);return n.TPromise.as(s)})},e.prototype.getHEAD=function(){var e=this;return this.run(["symbolic-ref","--short","HEAD"],{log:!1}).then(function(e){return e.stdout?n.TPromise.as({name:e.stdout.trim()}):n.TPromise.wrapError(new Error("Not in a branch"))},function(t){return e.run(["rev-parse","HEAD"],{log:!1}).then(function(e){return e.stdout?n.TPromise.as({commit:e.stdout.trim()}):n.TPromise.wrapError(new Error("Error parsing HEAD"))})})},e.prototype.getHeads=function(){return this.run(["for-each-ref","--format","%(refname:short) %(objectname)","refs/heads/"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return e.trim().split(" ")}).map(function(e){return{name:e[0],commit:e[1]}})})},e.prototype.getTags=function(){return this.run(["for-each-ref","--format","%(refname:short) %(objectname)","refs/tags/"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return e.trim().split(" ")}).map(function(e){return{name:e[0],commit:e[1]}})})},e.prototype.getRemotes=function(){return this.run(["remote"],{log:!1}).then(function(e){return e.stdout.trim().split("\n").filter(function(e){return!!e}).map(function(e){return{name:e}})})},e.prototype.getBranch=function(e){var t=this;return"HEAD"===e?this.getHEAD():this.run(["rev-parse",e],{log:!1}).then(function(i){if(!i.stdout)return n.TPromise.wrapError(new Error("No such branch"));var r=i.stdout.trim();return t.run(["rev-parse","--symbolic-full-name","--abbrev-ref",e+"@{u}"],{log:!1}).then(function(n){var i=n.stdout.trim();return t.run(["rev-list","--left-right",e+"..."+i],{log:!1}).then(function(t){for(var n=0,o=0,s=0;s<t.stdout.length;){switch(t.stdout.charAt(s)){case"<":n++;break;case">":o++;break;default:s++}for(;"\n"!==t.stdout.charAt(s++););}return{name:e,commit:r,upstream:i,ahead:n,behind:o}})},function(){return{name:e,commit:r}})})},e.prototype.onOutput=function(e){return this.git.onOutput(e)},e}();t.Repository=y}),define("vs/workbench/parts/git/node/rawGitService",["require","exports","path","vs/base/common/winjs.base","vs/base/node/mime","vs/base/node/pfs","vs/workbench/parts/git/node/git.lib","vs/workbench/parts/git/common/git"],function(e,t,n,i,r,o,s,a){var c=function(){function e(e){this.repo=e}return e.prototype.getRepositoryRoot=function(){return this._repositoryRoot||(this._repositoryRoot=o.realpath(this.repo.path))},e.prototype.serviceState=function(){return i.TPromise.as(this.repo?a.RawServiceState.OK:a.RawServiceState.GitNotFound)},e.prototype.status=function(){var e=this;return this.repo.getStatus().then(function(t){return e.repo.getHEAD().then(function(t){return t.name?e.repo.getBranch(t.name).then(null,function(){return t}):t},function(){return null}).then(function(n){return i.Promise.join([e.getRepositoryRoot(),e.repo.getHeads(),e.repo.getTags(),e.repo.getRemotes()]).then(function(e){return{repositoryRoot:e[0],status:t,HEAD:n,heads:e[1],tags:e[2],remotes:e[3]}})})}).then(null,function(e){return e.gitErrorCode===a.GitErrorCodes.BadConfigFile?i.Promise.wrapError(e):e.gitErrorCode===a.GitErrorCodes.NotAtRepositoryRoot?i.Promise.wrapError(e):null})},e.prototype.init=function(){var e=this;return this.repo.init().then(function(){return e.status()})},e.prototype.add=function(e){var t=this;return this.repo.add(e).then(function(){return t.status()})},e.prototype.stage=function(e,t){var n=this;return this.repo.stage(e,t).then(function(){return n.status()})},e.prototype.branch=function(e,t){var n=this;return this.repo.branch(e,t).then(function(){return n.status()})},e.prototype.checkout=function(e,t){var n=this;return this.repo.checkout(e,t).then(function(){return n.status()})},e.prototype.clean=function(e){var t=this;return this.repo.clean(e).then(function(){return t.status()})},e.prototype.undo=function(){var e=this;return this.repo.undo().then(function(){return e.status()})},e.prototype.reset=function(e,t){var n=this;return this.repo.reset(e,t).then(function(){return n.status()})},e.prototype.revertFiles=function(e,t){var n=this;return this.repo.revertFiles(e,t).then(function(){return n.status()})},e.prototype.fetch=function(){var e=this;return this.repo.fetch().then(null,function(e){return e.gitErrorCode===a.GitErrorCodes.NoRemoteRepositorySpecified?i.Promise.as(null):i.Promise.wrapError(e)}).then(function(){return e.status()})},e.prototype.pull=function(e){var t=this;return this.repo.pull(e).then(function(){return t.status()})},e.prototype.push=function(e,t,n){var i=this;return this.repo.push(e,t,n).then(function(){return i.status()})},e.prototype.sync=function(){var e=this;return this.repo.sync().then(function(){return e.status()})},e.prototype.commit=function(e,t,n){var r=this,o=i.Promise.as(null);return n&&(o=this.repo.add(null)),o.then(function(){return r.repo.commit(e,n,t)}).then(function(){return r.status()})},e.prototype.detectMimetypes=function(e,t){var s=this;return o.exists(n.join(this.repo.path,e)).then(function(o){if(o)return new i.TPromise(function(t,i){r.detectMimesFromFile(n.join(s.repo.path,e),function(e,n){e?i(e):t(n.mimes)})});var a=s.repo.show(t+":"+e);return new i.TPromise(function(t,n){r.detectMimesFromStream(a.stdout,e,function(e,i){e?n(e):t(i.mimes)})})})},e.prototype.show=function(e,t){return t="~"===t?"":t,this.repo.buffer(t+":"+e).then(null,function(e){return e instanceof s.GitError?"":i.TPromise.wrapError(e)})},e.prototype.onOutput=function(){var e,t=this;return new i.Promise(function(n,i,r){e=t.repo.onOutput(r)},function(){return e()})},e}();t.RawGitService=c;var u=function(){function e(e){this.raw=e}return e.prototype.serviceState=function(){return this.raw.then(function(e){return e.serviceState()})},e.prototype.status=function(){return this.raw.then(function(e){return e.status()})},e.prototype.init=function(){return this.raw.then(function(e){return e.init()})},e.prototype.add=function(e){return this.raw.then(function(t){return t.add(e)})},e.prototype.stage=function(e,t){return this.raw.then(function(n){return n.stage(e,t)})},e.prototype.branch=function(e,t){return this.raw.then(function(n){return n.branch(e,t)})},e.prototype.checkout=function(e,t){return this.raw.then(function(n){return n.checkout(e,t)})},e.prototype.clean=function(e){return this.raw.then(function(t){return t.clean(e)})},e.prototype.undo=function(){return this.raw.then(function(e){return e.undo()})},e.prototype.reset=function(e,t){return this.raw.then(function(n){return n.reset(e,t)})},e.prototype.revertFiles=function(e,t){return this.raw.then(function(n){return n.revertFiles(e,t)})},e.prototype.fetch=function(){return this.raw.then(function(e){return e.fetch()})},e.prototype.pull=function(e){return this.raw.then(function(t){return t.pull(e)})},e.prototype.push=function(e,t,n){return this.raw.then(function(i){return i.push(e,t,n)})},e.prototype.sync=function(){return this.raw.then(function(e){return e.sync()})},e.prototype.commit=function(e,t,n){return this.raw.then(function(i){return i.commit(e,t,n)})},e.prototype.detectMimetypes=function(e,t){return this.raw.then(function(n){return n.detectMimetypes(e,t)})},e.prototype.show=function(e,t){return this.raw.then(function(n){return n.show(e,t)})},e.prototype.onOutput=function(){return this.raw.then(function(e){return e.onOutput()})},e}();t.DelayedRawGitService=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/lib/node/systemVariables",["require","exports","vs/base/common/paths","vs/base/common/parsers","vs/workbench/common/editor"],function(e,t,n,i,r){var o=function(e){function t(t,i,r){var o=this;void 0===r&&(r=null),e.call(this),this.editorService=t;var s=r?r.fsPath:i.getWorkspace().resource.fsPath;this._workspaceRoot=n.normalize(s,!0),this._execPath=i?i.getConfiguration().env.execPath:null,Object.keys(process.env).forEach(function(e){o["env."+e]=process.env[e]})}return __extends(t,e),Object.defineProperty(t.prototype,"execPath",{get:function(){return this._execPath},set:function(e){this._execPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cwd",{get:function(){return this.workspaceRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workspaceRoot",{get:function(){return this._workspaceRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file",{get:function(){return this.getFilePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileBasename",{get:function(){return n.basename(this.getFilePath())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileDirname",{get:function(){return n.dirname(this.getFilePath())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileExtname",{get:function(){return n.extname(this.getFilePath())},enumerable:!0,configurable:!0}),t.prototype.getFilePath=function(){var e=this.editorService.getActiveEditorInput();if(!e)return"";var t=r.asFileEditorInput(e);if(!t)return"";var i=t.getResource();return n.normalize(i.fsPath,!0)},t}(i.AbstractSystemVariables);t.SystemVariables=o}),define("vs/workbench/parts/markdown/browser/markdown",["require","exports"],function(e,t){t.MARKDOWN_FILES=[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],t.MARKDOWN_MIME="text/x-web-markdown",t.MARKDOWN_MODE_ID="markdown"}),define("vs/workbench/parts/output/common/output",["require","exports","vs/platform/platform","vs/platform/instantiation/common/instantiation"],function(e,t,n,i){t.OUTPUT_MIME="text/x-monaco-output",t.OUTPUT_MODE_ID="Log",t.OUTPUT_EDITOR_INPUT_ID="vs.output",t.DEFAULT_OUTPUT_CHANNEL="",t.Extensions={OutputChannels:"workbench.contributions.outputChannels"},t.OUTPUT_SERVICE_ID="outputService",t.IOutputService=i.createDecorator(t.OUTPUT_SERVICE_ID);var r=function(){function e(){this.channels=[]}return e.prototype.registerChannel=function(e){-1===this.channels.indexOf(e)&&this.channels.push(e)},e.prototype.getChannels=function(){return this.channels.slice(0)},e}();n.Registry.add(t.Extensions.OutputChannels,new r)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitOutput",["require","exports","vs/workbench/parts/git/common/git","vs/workbench/parts/output/common/output"],function(e,t,n,i){var r=function(){function e(e,t){var i=this;this.gitService=e,this.outputService=t,e.addListener2(n.ServiceEvents.OPERATION_START,function(){return i.setup()})}return e.prototype.getId=function(){return e.ID},e.prototype.setup=function(){var e=this;this.promise||(this.promise=this.gitService.onOutput().then(function(){e.promise=null},function(t){t&&"Canceled"===t.name?e.promise=null:console.error(t)},function(t){return e.onOutput(t)}))},e.prototype.onOutput=function(e){this.outputService.append("Git",e)},e.prototype.dispose=function(){this.promise&&(this.promise.cancel(),this.promise=null)},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Workbench.GitOutput",e=__decorate([__param(0,n.IGitService),__param(1,i.IOutputService)],e);
}();t.GitOutput=r}),define("vs/workbench/parts/search/common/search",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/editor/common/editorCommonExtensions"],function(e,t,n,i,r){function o(e){var t=s.all().map(function(t){return t.getNavigateToItems(e).then(function(e){return e},i.onUnexpectedError)});return n.TPromise.join(t).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];Array.isArray(i)&&t.push.apply(t,i)}return t})}var s;!function(e){function t(e){return e&&i.push(e),{dispose:function(){if(e){var t=i.indexOf(e);t>=0&&(i.splice(t,1),e=void 0)}}}}function n(){return i.slice(0)}var i=[];e.register=t,e.all=n}(s=t.NavigateTypesSupportRegistry||(t.NavigateTypesSupportRegistry={})),t.getNavigateToItems=o,r.CommonEditorRegistry.registerLanguageCommand("_executeWorkspaceSymbolProvider",function(e,t){var n=t.query;if("string"!=typeof n)throw i.illegalArgument();return o(n)})});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/snippets/electron-browser/snippetsTracker",["require","exports","vs/base/common/paths","vs/base/common/async","vs/base/common/winjs.base","vs/base/node/extfs","vs/base/common/lifecycle","vs/editor/node/textMate/TMSnippets","vs/platform/files/common/files","vs/platform/lifecycle/common/lifecycle","vs/platform/workspace/common/workspace","fs"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e){return new r.TPromise(function(t,n,i){o.readdir(e,function(e,i){return e?n(e):void t(i)})})}function p(e){return new r.TPromise(function(t,n,i){d.stat(e,function(e,n){return e?t(!1):n.isFile()?t(!0):void t(!1)})})}function f(e,t){return void 0===t&&(t=null),h(e).then(function(i){return r.TPromise.join(i.map(function(i){return t&&!t.test(i)?r.Promise.as(null):p(n.join(e,i)).then(function(e){return e?i:null})})).then(function(e){return e.filter(function(e){return null!==e})})})}var m=function(){function e(t,r,o){var s=this;this.fileService=t,this.lifecycleService=r,this.snippetFolder=n.join(o.getConfiguration().env.appSettingsHome,"snippets"),this.toDispose=[],this.fileWatchDelayer=new i.ThrottledDelayer(e.FILE_WATCH_DELAY),d.existsSync(this.snippetFolder)||d.mkdirSync(this.snippetFolder),this.scanUserSnippets().then(function(e){s.registerListeners()})}return e.prototype.registerListeners=function(){var e=this,t=new i.RunOnceScheduler(function(){e.scanUserSnippets()},500);this.toDispose.push(t);try{this.watcher=d.watch(this.snippetFolder),this.watcher.on("change",function(n){return"delete"===n?void e.unregisterListener():void t.schedule()})}catch(n){}this.lifecycleService.onShutdown.add(this.dispose,this)},e.prototype.scanUserSnippets=function(){var e=this;return f(this.snippetFolder,/\.json$/).then(function(t){return r.TPromise.join(t.map(function(t){var i=t.replace(/\.json$/,"").toLowerCase(),r=n.join(e.snippetFolder,t);return a.snippetUpdated(i,r)}))})},e.prototype.unregisterListener=function(){this.watcher&&(this.watcher.close(),this.watcher=null)},e.prototype.getId=function(){return"vs.snippets.snippetsTracker"},e.prototype.dispose=function(){this.unregisterListener(),this.toDispose=s.disposeAll(this.toDispose)},e.FILE_WATCH_DELAY=200,e=__decorate([__param(0,c.IFileService),__param(1,u.ILifecycleService),__param(2,l.IWorkspaceContextService)],e)}();t.SnippetsTracker=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/common/problemCollectors",["require","exports","vs/base/common/eventEmitter","vs/platform/markers/common/problemMatcher"],function(e,t,n,i){var r;!function(e){e.WatchingBeginDetected="watchingBeginDetected",e.WatchingEndDetected="watchingEndDetected"}(r=t.ProblemCollectorEvents||(t.ProblemCollectorEvents={}));var o=function(e){function t(t,n){var r=this;e.call(this),this.modelService=n,this.matchers=Object.create(null),this.bufferLength=1,t.map(function(e){return i.createLineMatcher(e)}).forEach(function(e){var t=e.matchLength;t>r.bufferLength&&(r.bufferLength=t);var n=r.matchers[t];n||(n=[],r.matchers[t]=n),n.push(e)}),this.buffer=[],this.activeMatcher=null,this.openModels=Object.create(null),this.modelListeners=[],this.modelService.onModelAdded.add(function(e){r.openModels[e.getAssociatedResource().toString()]=!0},this,this.modelListeners),this.modelService.onModelRemoved.add(function(e){delete r.openModels[e.getAssociatedResource().toString()]},this,this.modelListeners),this.modelService.getModels().forEach(function(e){return r.openModels[e.getAssociatedResource().toString()]=!0})}return __extends(t,e),t.prototype.dispose=function(){this.modelListeners.forEach(function(e){return e.dispose()})},Object.defineProperty(t.prototype,"numberOfMatches",{get:function(){return this._numberOfMatches},enumerable:!0,configurable:!0}),t.prototype.tryFindMarker=function(e){var t=null;if(this.activeMatcher){if(t=this.activeMatcher.next(e))return this._numberOfMatches++,t;this.clearBuffer(),this.activeMatcher=null}if(this.buffer.length<this.bufferLength)this.buffer.push(e);else{for(var n=this.buffer.length-1,i=0;n>i;i++)this.buffer[i]=this.buffer[i+1];this.buffer[n]=e}return t=this.tryMatchers(),t&&this.clearBuffer(),t},t.prototype.isOpen=function(e){return!!this.openModels[e.toString()]},t.prototype.shouldApplyMatch=function(e){switch(e.description.applyTo){case i.ApplyToKind.allDocuments:return!0;case i.ApplyToKind.openDocuments:return this.openModels[e.resource.toString()];case i.ApplyToKind.closedDocuments:return!this.openModels[e.resource.toString()];default:return!0}},t.prototype.tryMatchers=function(){this.activeMatcher=null;for(var e=this.buffer.length,t=0;e>t;t++){var n=this.matchers[e-t];if(n)for(var i=0;i<n.length;i++){var r=n[i],o=r.handle(this.buffer,t);if(o.match)return this._numberOfMatches++,o["continue"]&&(this.activeMatcher=r),o.match}}return null},t.prototype.clearBuffer=function(){this.buffer.length>0&&(this.buffer=[])},t}(n.EventEmitter);t.AbstractProblemCollector=o,function(e){e[e.Clean=0]="Clean"}(t.ProblemHandlingStrategy||(t.ProblemHandlingStrategy={}));var s=t.ProblemHandlingStrategy,a=function(e){function t(t,n,i,r){var o=this;void 0===r&&(r=s.Clean),e.call(this,t,i),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null);var a=Object.create(null);t.forEach(function(e){return a[e.owner]=!0}),this.owners=Object.keys(a),this.markerService=n,this.strategy=r,this.currentResourcesWithMarkers=Object.create(null),this.reportedResourcesWithMarkers=Object.create(null),this.owners.forEach(function(e){o.currentResourcesWithMarkers[e]=o.markerService.read({owner:e}).map(function(e){return e.resource}),o.reportedResourcesWithMarkers[e]=Object.create(null)}),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)}return __extends(t,e),t.prototype.processLine=function(e){var t=this,n=this.tryFindMarker(e);if(n){var i=n.description.owner,r=n.resource,o=r.toString(),s=this.shouldApplyMatch(n);if(s){this.currentResourceAsString!==o&&(this.currentResource&&(Object.keys(this.markers).forEach(function(e){t.markerService.changeOne(e,t.currentResource,t.markers[e])}),this.markers=Object.create(null)),this.reportedResourcesWithMarkers[i][o]=r,this.currentResource=r,this.currentResourceAsString=o);var a=this.markers[i];a||(a=[],this.markers[i]=a),a.push(n.marker)}else this.reportedResourcesWithMarkers[i][o]=r}},t.prototype.done=function(){var e=this;this.currentResource&&Object.keys(this.markers).forEach(function(t){e.markerService.changeOne(t,e.currentResource,e.markers[t])}),this.strategy===s.Clean&&Object.keys(this.currentResourcesWithMarkers).forEach(function(t){var n=[],i=e.reportedResourcesWithMarkers[t];e.currentResourcesWithMarkers[t].forEach(function(e){i[e.toString()]||n.push(e)}),e.markerService.remove(t,n)}),this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)},t}(o);t.StartStopProblemCollector=a;var c=function(e){function t(t,n,i){var r=this;e.call(this,t,i),this.problemMatchers=t,this.markerService=n,this.resetCurrentResource(),this.resourcesToClean=Object.create(null),this.ignoreOpenResourcesByOwner=Object.create(null),this.watchingBeginsPatterns=[],this.watchingEndsPatterns=[],this.problemMatchers.forEach(function(e){e.watching&&(r.watchingBeginsPatterns.push({problemMatcher:e,pattern:e.watching.beginsPattern}),r.watchingEndsPatterns.push({problemMatcher:e,pattern:e.watching.endsPattern}))})}return __extends(t,e),t.prototype.aboutToStart=function(){var e=this;this.problemMatchers.forEach(function(t){t.watching&&t.watching.activeOnStart&&(e.emit(r.WatchingBeginDetected,{}),e.recordResourcesToClean(t.owner));var n=e.ignoreOpenResourcesByOwner[t.owner];if(n){var o=n&&t.applyTo===i.ApplyToKind.closedDocuments;o!=n&&(e.ignoreOpenResourcesByOwner[t.owner]=o)}else e.ignoreOpenResourcesByOwner[t.owner]=t.applyTo===i.ApplyToKind.closedDocuments})},t.prototype.processLine=function(e){if(!this.tryBegin(e)&&!this.tryFinish(e)){var t=this.tryFindMarker(e);if(t){var n=t.resource,i=t.description.owner,r=n.toString(),o=this.shouldApplyMatch(t);if(o){this.currentResourceAsString!==r&&(this.removeResourceToClean(i,r),this.currentResource&&this.deliverMarkersForCurrentResource(),this.currentResource=n,this.currentResourceAsString=r);var s=this.markers[i];s||(s=[],this.markers[i]=s),s.push(t.marker)}else this.removeResourceToClean(i,r)}}},t.prototype.forceDelivery=function(){var e=this;this.deliverMarkersForCurrentResource(!1),Object.keys(this.resourcesToClean).forEach(function(t){e.cleanMarkers(t,!1)}),this.resourcesToClean=Object.create(null)},t.prototype.tryBegin=function(e){for(var t=!1,n=0;n<this.watchingBeginsPatterns.length;n++){var o=this.watchingBeginsPatterns[n],s=o.pattern.regexp.exec(e);if(s){this.emit(r.WatchingBeginDetected,{}),t=!0;var a=o.problemMatcher.owner;if(s[1]){var c=i.getResource(s[1],o.problemMatcher);this.currentResourceAsString&&this.currentResourceAsString===c.toString()&&this.resetCurrentResource(),this.recordResourceToClean(a,c)}else this.recordResourcesToClean(a),this.resetCurrentResource()}}return t},t.prototype.tryFinish=function(e){for(var t=!1,n=0;n<this.watchingEndsPatterns.length;n++){var i=this.watchingEndsPatterns[n],o=i.pattern.regexp.exec(e);if(o){this.emit(r.WatchingEndDetected,{}),t=!0;var s=i.problemMatcher.owner;this.cleanMarkers(s),this.deliverMarkersForCurrentResource()}}return t},t.prototype.recordResourcesToClean=function(e){var t=this.getResourceSetToClean(e);this.markerService.read({owner:e}).forEach(function(e){return t[e.resource.toString()]=e.resource})},t.prototype.recordResourceToClean=function(e,t){this.getResourceSetToClean(e)[t.toString()]=t},t.prototype.removeResourceToClean=function(e,t){var n=this.resourcesToClean[e];n&&delete n[t]},t.prototype.cleanMarkers=function(e,t){var n=this;void 0===t&&(t=!0);var i=this.resourcesToClean[e];if(i){var r=Object.keys(i).map(function(e){return i[e]}).filter(function(t){return n.ignoreOpenResourcesByOwner[e]?!n.isOpen(t):!0});this.markerService.remove(e,r),t&&delete this.resourcesToClean[e]}},t.prototype.deliverMarkersForCurrentResource=function(e){var t=this;void 0===e&&(e=!0),this.currentResource&&Object.keys(this.markers).forEach(function(e){t.markerService.changeOne(e,t.currentResource,t.markers[e])}),e&&this.resetCurrentResource()},t.prototype.getResourceSetToClean=function(e){var t=this.resourcesToClean[e];return t||(t=Object.create(null),this.resourcesToClean[e]=t),t},t.prototype.resetCurrentResource=function(){this.currentResource=null,this.currentResourceAsString=null,this.markers=Object.create(null)},t}(o);t.WatchingProblemCollector=c}),define("vs/workbench/parts/tasks/common/taskSystem",["require","exports"],function(e,t){var n=function(){function e(e,t,n){void 0===n&&(n=-1),this.severity=e,this.message=t,this.code=n}return e}();t.TaskError=n;var i;!function(e){e.shortcut="shortcut",e.command="command"}(i=t.Triggers||(t.Triggers={})),function(e){e[e.Always=0]="Always",e[e.Silent=1]="Silent",e[e.Never=2]="Never"}(t.ShowOutput||(t.ShowOutput={}));var r,r=t.ShowOutput;!function(e){function t(t){return t=t.toLowerCase(),"always"===t?e.Always:"silent"===t?e.Silent:"never"===t?e.Never:void 0}e.fromString=t}(r=t.ShowOutput||(t.ShowOutput={}));var o;!function(e){e.Active="active",e.Inactive="inactive"}(o=t.TaskSystemEvents||(t.TaskSystemEvents={})),function(e){e[e.SingleRun=0]="SingleRun",e[e.Watching=1]="Watching"}(t.TaskType||(t.TaskType={}));t.TaskType});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/common/languageServiceTaskSystem",["require","exports","vs/base/common/winjs.base","vs/base/common/eventEmitter","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i,r){var o=function(e){function t(t,n,i){e.call(this),this.configuration=t,this.telemetryService=n,this.modeService=i}return __extends(t,e),t.prototype.build=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.build?e.taskSupport.build():null},"build",r.Triggers.shortcut)},t.prototype.rebuild=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.rebuild?e.taskSupport.rebuild():null},"rebuild",r.Triggers.shortcut)},t.prototype.clean=function(){return this.processMode(function(e){return e.taskSupport&&e.taskSupport.clean?e.taskSupport.clean():null},"clean",r.Triggers.shortcut)},t.prototype.runTest=function(){return{promise:n.TPromise.wrapError("Not implemented yet.")}},t.prototype.run=function(e){return{promise:n.TPromise.wrapError("Not implemented yet.")}},t.prototype.isActive=function(){return n.TPromise.as(!1)},t.prototype.isActiveSync=function(){return!1},t.prototype.canAutoTerminate=function(){return!1},t.prototype.terminate=function(){return n.TPromise.as({success:!0})},t.prototype.terminateSync=function(){return{success:!0}},t.prototype.tasks=function(){var e=[];return n.TPromise.as(e)},t.prototype.processMode=function(e,i,r){var o=this,s={trigger:r,command:"languageService",success:!0};return{promise:n.Promise.join(this.configuration.modes.map(function(e){return o.modeService.getOrCreateMode(e)})).then(function(t){var i=[];return t.forEach(function(t){var n=e(t);n&&i.push(n)}),n.Promise.join(i)}).then(function(e){return o.telemetryService.publicLog(t.TelemetryEventName,s),e},function(e){return s.success=!1,o.telemetryService.publicLog(t.TelemetryEventName,s),n.Promise.wrapError(e)})}},t.TelemetryEventName="taskService",t}(i.EventEmitter);t.LanguageServiceTaskSystem=o}),define("vs/workbench/parts/tasks/common/taskService",["require","exports","vs/platform/instantiation/common/instantiation","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i){t.TaskType=i.TaskType,t.ITaskService=n.createDecorator("taskService");var r;!function(e){e.Active="active",e.Inactive="inactive",e.ConfigChanged="configChanged",e.Terminated="terminated"}(r=t.TaskServiceEvents||(t.TaskServiceEvents={}))}),define("vs/workbench/parts/tasks/node/processRunnerConfiguration",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerConfiguration","vs/base/common/objects","vs/base/common/platform","vs/base/common/types","vs/base/common/uuid","vs/base/common/parsers","vs/platform/markers/common/problemMatcher","vs/workbench/parts/tasks/common/taskSystem"],function(e,t,n,i,r,o,s,a,c,u){function l(e,t){return new f(t).run(e)}var d=function(){function e(){}return e.clean="cleanMatcherMatchers",e}();t.ProblemHandling=d;var h;!function(e){}(h=t.ShowOutput||(t.ShowOutput={}));var p;!function(e){e[e.Unknown=0]="Unknown",e[e.String=1]="String",e[e.ProblemMatcher=2]="ProblemMatcher",e[e.Array=3]="Array"}(p||(p={}));var f=function(){function e(e){this.logger=e,this.validationStatus=new a.ValidationStatus,this.namedProblemMatchers=Object.create(null)}return e.prototype.log=function(e){this.logger.log(e)},e.prototype.run=function(e){return{validationStatus:this.validationStatus,configuration:this.createTaskRunnerConfiguration(e),defaultBuildTaskIdentifier:this.defaultBuildTaskIdentifier,defaultTestTaskIdentifier:this.defaultTestTaskIdentifier}},e.prototype.createTaskRunnerConfiguration=function(e){var t=this.createGlobals(e),i=this.createBaseTaskRunnerConfiguration(e,{isMain:!0,globals:t});if(!this.validationStatus.isFatal()){var s=null,c={isMain:!1,globals:t};e.windows&&r.platform===r.Platform.Windows?s=this.createBaseTaskRunnerConfiguration(e.windows,c):e.osx&&r.platform===r.Platform.Mac?s=this.createBaseTaskRunnerConfiguration(e.osx,c):e.linux&&r.platform===r.Platform.Linux&&(s=this.createBaseTaskRunnerConfiguration(e.linux,c)),this.validationStatus.isFatal()||(s&&this.mergeTaskRunnerConigurations(i,s),o.isUndefined(i.options.cwd)&&(i.options.cwd="${workspaceRoot}"))}return i.command?i:(this.validationStatus.state=a.ValidationState.Fatal,this.log(n.localize(0,null)),null)},e.prototype.createGlobals=function(e){var t=this.parseGlobals(e),n=null;return e.windows&&r.platform===r.Platform.Windows?n=this.parseGlobals(e.windows):e.osx&&r.platform===r.Platform.Mac?n=this.parseGlobals(e.osx):e.linux&&r.platform===r.Platform.Linux&&(n=this.parseGlobals(e.linux)),n&&i.mixin(t,n,!0),o.isUndefined(t.isShellCommand)&&(t.isShellCommand=!1),o.isUndefined(t.showOutput)&&(t.showOutput=u.ShowOutput.Always),o.isUndefined(t.echoCommand)&&(t.echoCommand=!1),o.isUndefined(t.suppressTaskName)&&(t.suppressTaskName=!1),t},e.prototype.parseGlobals=function(e){var t={};return o.isString(e.command)&&(t.command=e.command),o.isBoolean(e.isShellCommand)&&(t.isShellCommand=e.isShellCommand),o.isString(e.showOutput)&&(t.showOutput=u.ShowOutput.fromString(e.showOutput)),o.isUndefined(e.echoCommand)||(t.echoCommand=!!e.echoCommand),o.isUndefined(e.suppressTaskName)||(t.suppressTaskName=!!e.suppressTaskName),o.isString(e.taskSelector)&&(t.taskSelector=e.taskSelector),t},e.prototype.mergeTaskRunnerConigurations=function(e,t){if(t.command&&(e.command=t.command),t.args&&(e.args=e.args?e.args.concat(t.args):t.args),o.isUndefined(t.isShellCommand)||(e.isShellCommand=t.isShellCommand),t.options&&(o.isString(t.options.cwd)&&(e.options.cwd=t.options.cwd),t.options.env)){var n=t.options.env,i=e.options.env;i?Object.keys(n).forEach(function(e){i[e]=n[e]}):e.options.env=n}if(t.tasks){var r=Object.create(null);Object.keys(e.tasks).forEach(function(t){var n=e.tasks[t];r[n.name]=n.id});var s=Object.create(null);Object.keys(t.tasks).forEach(function(e){var n=t.tasks[e];s[n.name]=n.id}),Object.keys(s).forEach(function(n){var i=r[n],o=s[n];i&&delete e.tasks[i],e.tasks[o]=t.tasks[o]})}},e.prototype.createBaseTaskRunnerConfiguration=function(e,t){var i=t.globals,r={isShellCommand:i.isShellCommand,args:[]};o.isString(e.command)&&(r.command=e.command),o.isUndefined(e.isShellCommand)||(r.isShellCommand=e.isShellCommand);var c=o.isUndefined(e.args);o.isStringArray(e.args)&&(c=!0,r.args=e.args.slice()),c||(this.validationStatus.state=a.ValidationState.Fatal,this.log(n.localize(1,null,e.args?JSON.stringify(e.args,null,4):"undefined"))),r.options=this.createCommandOptions(e.options),t.isMain&&(this.namedProblemMatchers=this.createNamedProblemMatchers(e));var u=!o.isUndefined(e.problemMatcher),l=o.isArray(e.tasks);if(l)r.tasks=this.createTasks(e.tasks,t),u&&(this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(2,null)));else if(t.isMain){var d=!1;o.isUndefined(e.isWatching)||(d=!!e.isWatching);var h=!0;h=o.isUndefined(e.promptOnClose)?!d:!!e.promptOnClose;var p={id:s.generateUuid(),name:i.command,showOutput:i.showOutput,suppressTaskName:!0,isWatching:d,promptOnClose:h,echoCommand:i.echoCommand};if(u){var f=this.createProblemMatchers(e.problemMatcher);p.problemMatchers=f}else p.problemMatchers=[];for(var m=0,v=p.problemMatchers;m<v.length;m++){var g=v[m];if(g.tscWatch){p.tscWatch=!0;break}}this.defaultBuildTaskIdentifier=p.id,r.tasks=Object.create(null),r.tasks[p.id]=p}return r},e.prototype.createCommandOptions=function(e){var t={};return e&&(o.isUndefined(e.cwd)||(o.isString(e.cwd)?t.cwd=e.cwd:(this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(3,null,e.cwd)))),o.isUndefined(e.env)||(t.env=i.clone(e.env))),t},e.prototype.createNamedProblemMatchers=function(e){var t=this,n=Object.create(null);if(!o.isArray(e.declares))return n;var i=e.declares;return i.forEach(function(e){var i=t.createNamedProblemMatcher(e);i&&(n[i.name]=i)}),n},e.prototype.createNamedProblemMatcher=function(e){var t=new c.ProblemMatcherParser(c.registry,this.logger,this.validationStatus).parse(e);return c.isNamedProblemMatcher(t)?t:(this.validationStatus.state=a.ValidationState.Error,this.log(n.localize(4,null,JSON.stringify(e,null,4))),null)},e.prototype.createTasks=function(e,t){var i=this,r=Object.create(null);if(!e)return r;var c={id:null,exact:-1},l={id:null,exact:-1};return e.forEach(function(e){var d=e.taskName;if(!d)return i.validationStatus.state=a.ValidationState.Fatal,void i.log(n.localize(5,null,JSON.stringify(e,null,4)));var h=i.createProblemMatchers(e.problemMatcher),p={id:s.generateUuid(),name:d,showOutput:t.globals.showOutput};o.isStringArray(e.args)&&(p.args=e.args.slice()),p.isWatching=!1,o.isUndefined(e.isWatching)||(p.isWatching=!!e.isWatching),p.promptOnClose=!0,o.isUndefined(e.promptOnClose)?p.promptOnClose=!p.isWatching:p.promptOnClose=!!e.promptOnClose,o.isString(e.showOutput)&&(p.showOutput=u.ShowOutput.fromString(e.showOutput)),o.isUndefined(p.showOutput)&&(p.showOutput=t.globals.showOutput),p.echoCommand=t.globals.echoCommand,o.isUndefined(e.echoCommand)||(p.echoCommand=!!e.echoCommand),p.suppressTaskName=t.globals.suppressTaskName,o.isUndefined(e.suppressTaskName)||(p.suppressTaskName=!!e.suppressTaskName),h&&(p.problemMatchers=h);for(var f=0,m=p.problemMatchers;f<m.length;f++){var v=m[f];if(v.tscWatch){p.tscWatch=!0;break}}r[p.id]=p,!o.isUndefined(e.isBuildCommand)&&e.isBuildCommand&&c.exact<2?(c.id=p.id,c.exact=2):"build"===d&&c.exact<2&&(c.id=p.id,c.exact=1),!o.isUndefined(e.isTestCommand)&&e.isTestCommand&&l.exact<2?(l.id=p.id,l.exact=2):"test"===d&&l.exact<2&&(l.id=p.id,l.exact=1)}),c.exact>0&&(this.defaultBuildTaskIdentifier=c.id),l.exact>0&&(this.defaultTestTaskIdentifier=l.id),r},e.prototype.createProblemMatchers=function(e){var t=this,i=[];if(o.isUndefined(e))return i;var r=this.getProblemMatcherKind(e);if(r===p.Unknown)return this.validationStatus.state=a.ValidationState.Warning,this.log(n.localize(6,null,JSON.stringify(e,null,4))),i;if(r===p.String||r===p.ProblemMatcher){var s=this.resolveProblemMatcher(e);s&&i.push(s)}else if(r===p.Array){var c=e;c.forEach(function(e){var n=t.resolveProblemMatcher(e);n&&i.push(n)})}return i},e.prototype.getProblemMatcherKind=function(e){return o.isString(e)?p.String:o.isArray(e)?p.Array:o.isUndefined(e)?p.Unknown:p.ProblemMatcher},e.prototype.resolveProblemMatcher=function(e){if(o.isString(e)){var t=e;if(t.length>1&&"$"===t[0]){t=t.substring(1);var r=c.registry.get(t);if(r)return i.clone(r);var s=this.namedProblemMatchers[t];if(s)return s=i.clone(s),delete s.name,s}return this.validationStatus.state=a.ValidationState.Error,this.log(n.localize(7,null,e)),null}var u=e;return new c.ProblemMatcherParser(c.registry,this.logger,this.validationStatus).parse(u)},e}();t.parse=l}),define("vs/workbench/parts/tasks/node/processRunnerDetector",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerDetector","vs/base/common/strings","vs/base/common/processes","vs/base/node/processes"],function(e,t,n,i,r,o){var s="build",a="test",c=function(){function e(e){this.regexp=e}return e.prototype.init=function(){},e.prototype.match=function(e,t){var n=this.regexp.exec(t);n&&n.length>0&&e.push(n[1])},e}(),u=function(){function e(){}return e.prototype.init=function(){this.tasksStart=!1,this.tasksEnd=!1,this.descriptionOffset=null},e.prototype.match=function(e,t){if(this.tasksStart||this.tasksEnd){if(this.tasksStart&&!this.tasksEnd)if(0==t.indexOf("Tasks run in the order specified"))this.tasksEnd=!0;else{null===this.descriptionOffset&&(this.descriptionOffset=t.match(/\S  \S/).index+1);var n=t.substr(0,this.descriptionOffset).trim();n.length>0&&e.push(n)}}else 0==t.indexOf("Available tasks")&&(this.tasksStart=!0)},e}(),l=function(){function e(e,t,n,i){void 0===i&&(i=null),this.fileService=e,this.contextService=t,this.variables=n,this.taskConfiguration=i,this._stderr=[]}return e.supports=function(t){return e.SupportedRunners[t]},e.detectorConfig=function(t){return e.TaskMatchers[t]},Object.defineProperty(e.prototype,"stderr",{get:function(){return this._stderr},enumerable:!0,configurable:!0}),e.prototype.detect=function(t){var n=this;if(void 0===t&&(t=!1),this.taskConfiguration&&this.taskConfiguration.command&&e.supports(this.taskConfiguration.command)){var i=e.detectorConfig(this.taskConfiguration.command),s=(this.taskConfiguration.args||[]).concat(i.arg),a=this.taskConfiguration.options?r.resolveCommandOptions(this.taskConfiguration.options,this.variables):{cwd:this.variables.workspaceRoot},c=!!this.taskConfiguration.isShellCommand;return this.runDetection(new o.LineProcess(this.taskConfiguration.command,this.variables.resolve(s),c,a),this.taskConfiguration.command,c,i.matcher,e.DefaultProblemMatchers,t)}return this.tryDetectGulp(t).then(function(e){return e?e:n.tryDetectJake(t).then(function(e){return e?e:n.tryDetectGrunt(t).then(function(e){return e?e:{config:null,stderr:n.stderr}})})})},e.prototype.tryDetectGulp=function(t){var n=this;return this.fileService.resolveFile(this.contextService.toResource("gulpfile.js")).then(function(i){var r=e.detectorConfig("gulp"),s=new o.LineProcess("gulp",[r.arg,"--no-color"],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(s,"gulp",!0,r.matcher,e.DefaultProblemMatchers,t)},function(e){return null})},e.prototype.tryDetectGrunt=function(t){var n=this;return this.fileService.resolveFile(this.contextService.toResource("Gruntfile.js")).then(function(i){var r=e.detectorConfig("grunt"),s=new o.LineProcess("grunt",[r.arg,"--no-color"],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(s,"grunt",!0,r.matcher,e.DefaultProblemMatchers,t)},function(e){return null})},e.prototype.tryDetectJake=function(t){var n=this;return this.fileService.resolveFile(this.contextService.toResource("Jakefile")).then(function(i){var r=e.detectorConfig("jake"),s=new o.LineProcess("jake",[r.arg],!0,{cwd:n.variables.workspaceRoot});return n.runDetection(s,"jake",!0,r.matcher,e.DefaultProblemMatchers,t)},function(e){return null})},e.prototype.runDetection=function(t,o,s,a,c,u){var l=this,d=[];return a.init(),t.start().then(function(t){if(0===d.length)return 0!==t.cmdCode&&("gulp"===o?l._stderr.push(n.localize(0,null)):"jake"===o&&l._stderr.push(n.localize(1,null))),{config:null,stderr:l._stderr};var i={version:e.Version,command:o,isShellCommand:s};return"gulp"===o&&(i.args=["--no-color"]),i.tasks=l.createTaskDescriptions(d,c,u),{config:i,stderr:l._stderr}},function(e){var t=e.error;return"ENOENT"===t.code?"gulp"===o?l._stderr.push(n.localize(2,null)):"jake"===o?l._stderr.push(n.localize(3,null)):"grunt"===o&&l._stderr.push(n.localize(4,null)):l._stderr.push(n.localize(5,null,o,t.message)),{config:null,stderr:l._stderr}},function(e){if(e.source===r.Source.stderr)return void l._stderr.push(e.line);var t=i.removeAnsiEscapeCodes(e.line),n=a.match(d,t);n&&n.length>0&&d.push(n[1])})},e.prototype.createTaskDescriptions=function(e,t,n){var i=this,r=[];if(n)e.forEach(function(e){r.push({taskName:e,args:[],isWatching:!1})});else{var o={build:{index:-1,exact:-1},test:{index:-1,exact:-1}};e.forEach(function(e,t){i.testBuild(o.build,e,t),i.testTest(o.test,e,t)}),-1!==o.build.index&&r.push({taskName:e[o.build.index],args:[],isBuildCommand:!0,isWatching:!1,problemMatcher:t}),-1!==o.test.index&&r.push({taskName:e[o.test.index],args:[],isTestCommand:!0})}return r},e.prototype.testBuild=function(e,t,n){t===s?(e.index=n,e.exact=3):(i.startsWith(t,s)||i.endsWith(t,s))&&e.exact<3?(e.index=n,e.exact=2):-1!==t.indexOf(s)&&e.exact<2&&(e.index=n,e.exact=1)},e.prototype.testTest=function(e,t,n){t===a?(e.index=n,e.exact=3):(i.startsWith(t,a)||i.endsWith(t,a))&&e.exact<3?(e.index=n,e.exact=2):-1!==t.indexOf(a)&&e.exact<2&&(e.index=n,e.exact=1)},e.Version="0.1.0",e.SupportedRunners={gulp:!0,jake:!0,grunt:!0},e.TaskMatchers={gulp:{matcher:new c(/^(.*)$/),arg:"--tasks-simple"},jake:{matcher:new c(/^jake\s+([^\s]+)\s/),arg:"--tasks"},grunt:{matcher:new u,arg:"--help"}},e.DefaultProblemMatchers=["$lessCompile","$tsc","$jshint"],e}();t.ProcessRunnerDetector=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/tasks/node/processRunnerSystem",["require","exports","vs/nls!vs/workbench/parts/tasks/node/processRunnerSystem","vs/base/common/objects","vs/base/common/platform","vs/base/common/winjs.base","vs/base/common/async","vs/base/common/severity","vs/base/common/strings","vs/base/common/eventEmitter","vs/base/node/processes","vs/workbench/parts/tasks/common/problemCollectors","vs/workbench/parts/tasks/common/taskSystem","./processRunnerConfiguration"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(e){function t(t,n,i,r,o,s,a,c){void 0===c&&(c=!0),e.call(this),this.fileConfig=t,this.variables=n,this.markerService=i,this.modelService=r,this.outputChannel=a,this.outputService=s,this.telemetryService=o,this.defaultBuildTaskIdentifier=null,this.defaultTestTaskIdentifier=null,this.childProcess=null,this.activeTaskIdentifier=null,c&&this.clearOutput(),this.errorsShown=!1;var u=p.parse(t,this);this.validationStatus=u.validationStatus,this.configuration=u.configuration,this.defaultBuildTaskIdentifier=u.defaultBuildTaskIdentifier,this.defaultTestTaskIdentifier=u.defaultTestTaskIdentifier,this.validationStatus.isOK()||this.outputService.showOutput(this.outputChannel,!1,!0)}return __extends(t,e),t.prototype.build=function(){if(!this.defaultBuildTaskIdentifier)throw new h.TaskError(a["default"].Info,n.localize(0,null),1);return this.executeTask(this.defaultBuildTaskIdentifier,h.Triggers.shortcut)},t.prototype.rebuild=function(){throw new Error("Task - Rebuild: not implemented yet")},t.prototype.clean=function(){throw new Error("Task - Clean: not implemented yet")},t.prototype.runTest=function(){if(!this.defaultTestTaskIdentifier)throw new h.TaskError(a["default"].Info,n.localize(1,null),1);return this.executeTask(this.defaultTestTaskIdentifier,h.Triggers.shortcut)},t.prototype.run=function(e){return this.executeTask(e)},t.prototype.isActive=function(){return o.TPromise.as(!!this.childProcess)},t.prototype.isActiveSync=function(){return!!this.childProcess},t.prototype.canAutoTerminate=function(){if(this.childProcess){if(this.activeTaskIdentifier){var e=this.configuration.tasks[this.activeTaskIdentifier];if(e)return!e.promptOnClose}return!1}return!0},t.prototype.terminate=function(){return this.childProcess?this.childProcess.terminate():o.TPromise.as({success:!0})},t.prototype.tasks=function(){var e,t=this;return e=this.configuration&&this.configuration.tasks?Object.keys(this.configuration.tasks).map(function(e){return t.configuration.tasks[e]}):[],o.TPromise.as(e)},t.prototype.executeTask=function(e,i){var r=this;if(void 0===i&&(i=h.Triggers.command),this.validationStatus.isFatal())throw new h.TaskError(a["default"].Error,n.localize(2,null));var s=this.configuration.tasks[e];
if(!s)throw new h.TaskError(a["default"].Info,n.localize(3,null));var c={trigger:i,command:"other",success:!0};try{var u=this.doExecuteTask(s,c);return u.promise=u.promise.then(function(e){return r.telemetryService.publicLog(t.TelemetryEventName,c),e},function(e){return c.success=!1,r.telemetryService.publicLog(t.TelemetryEventName,c),o.TPromise.wrapError(e)}),u}catch(l){if(c.success=!1,this.telemetryService.publicLog(t.TelemetryEventName,c),l instanceof h.TaskError)throw l;if(l instanceof Error){var d=l;throw this.outputService.append(this.outputChannel,d.message),new h.TaskError(a["default"].Error,d.message)}throw this.outputService.append(this.outputChannel,l.toString()),new h.TaskError(a["default"].Error,n.localize(4,null))}},t.prototype.doExecuteTask=function(e,t){var i=this,o={},a=this.configuration;this.validationStatus.isOK()||this.errorsShown?this.clearOutput():(this.showOutput(),this.errorsShown=!0);var u=this.configuration.args?this.configuration.args.slice():[];e.suppressTaskName||(this.fileConfig.taskSelector?u.push(this.fileConfig.taskSelector+e.name):u.push(e.name)),e.args&&(u=u.concat(e.args)),u=this.resolveVariables(u);var p=this.resolveVariable(a.command);if(this.childProcess=new l.LineProcess(p,u,a.isShellCommand,this.resolveOptions(a.options)),t.command=this.childProcess.getSanitizedCommand(),(e.showOutput===h.ShowOutput.Always||e.showOutput===h.ShowOutput.Silent&&0===e.problemMatchers.length)&&this.showOutput(),e.echoCommand){var f=r.isWindows?">":"$";this.log("running command"+f+" "+p+" "+u.join(" "))}if(e.isWatching){var m=new d.WatchingProblemCollector(this.resolveMatchers(e.problemMatchers),this.markerService,this.modelService),v=[],g={taskId:e.id,taskName:e.name,type:h.TaskType.Watching},y=0;v.push(m.on(d.ProblemCollectorEvents.WatchingBeginDetected,function(){y++,i.emit(h.TaskSystemEvents.Active,g)})),v.push(m.on(d.ProblemCollectorEvents.WatchingEndDetected,function(){y--,i.emit(h.TaskSystemEvents.Inactive,g)})),m.aboutToStart();var _=null;this.activeTaskIdentifier=e.id;var b=this.childProcess.start().then(function(t){i.childProcessEnded(),m.dispose(),v.forEach(function(e){return e()}),v=null;for(var r=0;y>r;r++)i.emit(h.TaskSystemEvents.Inactive,g);return y=0,i.checkTerminated(e,t)||i.log(n.localize(5,null)),t.cmdCode&&1===t.cmdCode&&0===m.numberOfMatches&&e.showOutput!==h.ShowOutput.Never&&i.showOutput(),o},function(t){i.childProcessEnded(),m.dispose(),v.forEach(function(e){return e()}),v=null;for(var n=0;y>n;n++)i.emit(h.TaskSystemEvents.Inactive,g);return y=0,i.handleError(e,t)},function(e){var t=c.removeAnsiEscapeCodes(e.line);i.outputService.append(i.outputChannel,t+"\n"),m.processLine(t),null===_&&(_=new s.Delayer(3e3)),_.trigger(function(){return m.forceDelivery(),null}).then(function(){_=null})}),E=e.tscWatch?{restartOnFileChanges:"**/*.ts",promise:b}:{promise:b};return E}var S={taskId:e.id,taskName:e.name,type:h.TaskType.SingleRun};this.emit(h.TaskSystemEvents.Active,S);var w=new d.StartStopProblemCollector(this.resolveMatchers(e.problemMatchers),this.markerService,this.modelService);this.activeTaskIdentifier=e.id;var b=this.childProcess.start().then(function(t){return i.childProcessEnded(),w.done(),w.dispose(),i.checkTerminated(e,t),i.emit(h.TaskSystemEvents.Inactive,S),t.cmdCode&&1===t.cmdCode&&0===w.numberOfMatches&&e.showOutput!==h.ShowOutput.Never&&i.showOutput(),o},function(t){return i.childProcessEnded(),w.dispose(),i.emit(h.TaskSystemEvents.Inactive,S),i.handleError(e,t)},function(e){var t=c.removeAnsiEscapeCodes(e.line);i.outputService.append(i.outputChannel,t+"\n"),w.processLine(t)});return{promise:b}},t.prototype.childProcessEnded=function(){this.childProcess=null,this.activeTaskIdentifier=null},t.prototype.handleError=function(e,t){var i=!1;if(t.error&&!t.terminated){var r=this.configuration.args?this.configuration.args.join(" "):"";this.log(n.localize(6,null,this.configuration.command,r)),this.outputService.append(this.outputChannel,t.error.message),i=!0}return t.stdout&&(this.outputService.append(this.outputChannel,t.stdout),i=!0),t.stderr&&(this.outputService.append(this.outputChannel,t.stderr),i=!0),i=this.checkTerminated(e,t)||i,i&&this.showOutput(),o.Promise.wrapError(t)},t.prototype.checkTerminated=function(e,t){return t.terminated?(this.log(n.localize(7,null,e.name)),!0):!1},t.prototype.resolveOptions=function(e){var t=this,n={cwd:this.resolveVariable(e.cwd)};return e.env&&(n.env=Object.create(null),Object.keys(e.env).forEach(function(i){n.env[i]=t.resolveVariable(e.env[i])})),n},t.prototype.resolveVariables=function(e){var t=this;return e.map(function(e){return t.resolveVariable(e)})},t.prototype.resolveMatchers=function(e){var t=this;if(0===e.length)return e;var n=[];return e.forEach(function(e){if(e.filePrefix){var r=i.clone(e);r.filePrefix=t.resolveVariable(r.filePrefix),n.push(r)}else n.push(e)}),n},t.prototype.resolveVariable=function(e){var t=this,n=/\$\{(.*?)\}/g;return e.replace(n,function(e,n){var i=t.variables[n];return i?i:e})},t.prototype.log=function(e){this.outputService.append(this.outputChannel,e+"\n")},t.prototype.showOutput=function(){this.outputService.showOutput(this.outputChannel,!0,!0)},t.prototype.clearOutput=function(){this.outputService.clearOutput(this.outputChannel)},t.TelemetryEventName="taskService",t}(u.EventEmitter);t.ProcessRunnerSystem=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/activity/common/activityService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){var i=function(){function e(e){this.descriptorFn=e}return e.prototype.getDescription=function(){return this.descriptorFn(null)},e}();t.BaseBadge=i;var r=function(e){function t(t,n){e.call(this,n),this.number=t}return __extends(t,e),t.prototype.getDescription=function(){return this.descriptorFn(this.number)},t}(i);t.NumberBadge=r;var o=function(e){function t(t,n){e.call(this,n),this.text=t}return __extends(t,e),t}(i);t.TextBadge=o;var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i);t.ProgressBadge=s,t.IActivityService=n.createDecorator("activityService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/activitybar/activityAction",["require","exports","vs/nls!vs/workbench/browser/parts/activitybar/activityAction","vs/base/browser/builder","vs/base/browser/dnd","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/services/activity/common/activityService","vs/css!./media/activityaction"],function(e,t,n,i,r,o,s,a){var c=function(e){function t(t,n,i){e.call(this,t,n,i),this.badge=null}return __extends(t,e),t.prototype.activate=function(){this.checked||(this.checked=!0,this.emit("checked",{source:this}))},t.prototype.deactivate=function(){this.checked&&(this.checked=!1,this.emit("checked",{source:this}))},t.prototype.getBadge=function(){return this.badge},t.prototype.setBadge=function(e){this.badge=e,this.emit(t.BADGE,{source:this})},t.BADGE="badge",t}(o.Action);t.ActivityAction=c;var u=function(e){function t(t,n,i){void 0===n&&(n=t.label),void 0===i&&(i=null),e.call(this,null,t),this.cssClass=t["class"],this.name=n,this._keybinding=i}return __extends(t,e),t.prototype.render=function(t){var n=this;e.prototype.render.call(this,t),this.$e=i.$("a.action-label").attr({tabIndex:"0",role:"menuitem"}).appendTo(this.builder),this.cssClass&&this.$e.addClass(this.cssClass),this.$badge=this.builder.div({"class":"badge"},function(e){n.$badgeContent=e.div({"class":"badge-content",role:"presentation"})}),this.$badge.hide(),this.keybinding=this._keybinding,[this.$badge,this.$e].forEach(function(e){return new r.DelayedDragHandler(e.getHTMLElement(),function(){n.getAction().checked||n.getAction().run()})})},t.prototype.focus=function(){this.$e.domFocus()},t.prototype.setBadge=function(e){this.updateBadge(e)},Object.defineProperty(t.prototype,"keybinding",{set:function(e){if(this._keybinding=e,this.$e){var t;t=e?n.localize(0,null,this.name,e):this.name,this.$e.title(t),this.$badge.title(t)}},enumerable:!0,configurable:!0}),t.prototype.updateBadge=function(e){if(this.$badgeContent.empty(),this.$badge.hide(),e){if(e instanceof a.NumberBadge){var t=e.number;t&&(this.$badgeContent.text(t>99?"99+":t.toString()),this.$badge.show())}else e instanceof a.TextBadge?(this.$badgeContent.text(e.text),this.$badge.show()):e instanceof a.ProgressBadge&&this.$badge.show();this.$e.attr("aria-label",this.name+" - "+e.getDescription())}},t.prototype._updateClass=function(){this.cssClass&&this.$badge.removeClass(this.cssClass),this.cssClass=this.getAction()["class"],this.$badge.addClass(this.cssClass)},t.prototype._updateChecked=function(){this.getAction().checked?this.$e.addClass("active"):this.$e.removeClass("active")},t.prototype._updateUnknown=function(e){if(e.getType()===c.BADGE){var t=this.getAction();t instanceof c&&this.updateBadge(t.getBadge())}},t.prototype._updateEnabled=function(){this.getAction().enabled?this.builder.removeClass("disabled"):this.builder.addClass("disabled")},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.$badge.destroy(),this.$e.destroy()},t}(s.BaseActionItem);t.ActivityActionItem=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/configuration/node/configurationService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/strings","vs/base/common/platform","vs/base/common/paths","vs/base/node/extfs","vs/base/common/objects","vs/platform/configuration/common/configurationService","vs/workbench/common/events","vs/platform/configuration/common/configuration","fs"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t,n){e.call(this,t,n),this.serviceId=d.IConfigurationService,this.registerListeners()}return __extends(t,e),t.prototype.resolveContents=function(e){var t=this,i=[];return n.Promise.join(e.map(function(e){return t.resolveContent(e).then(function(e){i.push(e)})})).then(function(){return i})},t.prototype.resolveContent=function(e){return new n.TPromise(function(t,n){h.readFile(e.fsPath,function(i,r){i?n(i):t({resource:e,value:r.toString()})})})},t.prototype.resolveStat=function(e){return new n.TPromise(function(t,n){a.readdir(e.fsPath,function(a,c){a?"ENOTDIR"===a.code?t({resource:e,isDirectory:!1}):n(a):t({resource:e,isDirectory:!0,children:c.map(function(t){return o.isMacintosh&&(t=r.normalizeNFC(t)),{resource:i["default"].file(s.join(e.fsPath,t))}})})})})},t.prototype.registerListeners=function(){var e=this;this.toDispose=this.eventService.addListener(l.EventType.WORKBENCH_OPTIONS_CHANGED,function(t){return e.onOptionsChanged(t)})},t.prototype.onOptionsChanged=function(e){"globalSettings"===e.key&&this.reloadAndEmit()},t.prototype.loadWorkspaceConfiguration=function(t){return this.contextService.getWorkspace()?e.prototype.loadWorkspaceConfiguration.call(this,t):n.Promise.as({})},t.prototype.loadGlobalConfiguration=function(){var t=this;return e.prototype.loadGlobalConfiguration.call(this).then(function(e){var n=t.contextService.getOptions().globalSettings;return{contents:c.mixin(c.clone(e.contents),n.settings,!0),parseErrors:n.settingsParseErrors}})},t.prototype.dispose=function(){this.toDispose()},t}(u.ConfigurationService);t.ConfigurationService=p}),define("vs/workbench/services/contextview/electron-browser/contextmenuService",["require","exports","vs/base/common/winjs.base","vs/base/common/severity","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/dom","vs/base/browser/builder","vs/platform/contextview/browser/contextView","remote"],function(e,t,n,i,r,o,s,a,c){var u=c.require("menu"),l=c.require("menu-item"),d=function(){function e(e,t,n){this.serviceId=a.IContextMenuService,this.messageService=e,this.telemetryService=t,this.keybindingService=n}return e.prototype.showContextMenu=function(e){var t=this;e.getActions().then(function(i){if(!i.length)return n.TPromise.as(null);var a=new u,d=null;i.forEach(function(n){if(n instanceof r.Separator)a.append(new l({type:"separator"}));else{var i=e.getKeyBinding?e.getKeyBinding(n):void 0,o=i&&t.keybindingService.getElectronAcceleratorFor(i),s=new l({label:n.label,checked:n.checked,accelerator:o,click:function(){d=n}});s.enabled=n.enabled,a.append(s)}});var h,p,f=e.getAnchor();if(o.isHTMLElement(f)){var m=s.$(f),v=m.getPosition(),g=m.getTotalSize();h=v.left,p=v.top+g.height}else{var y=f;h=y.x,p=y.y}if(a.popup(c.getCurrentWindow(),Math.floor(h),Math.floor(p)),e.onHide&&e.onHide(!1),d){t.telemetryService.publicLog("workbenchActionExecuted",{id:d.id,from:"contextMenu"});var _=e.getActionsContext?e.getActionsContext():null;return d.run(_)||n.TPromise.as(null)}}).done(null,function(e){return t.messageService.show(i["default"].Error,e)})},e}();t.ContextMenuService=d}),define("vs/workbench/services/editor/common/editorService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){!function(e){e[e.MINIMIZE_OTHERS=0]="MINIMIZE_OTHERS",e[e.EVEN_WIDTH=1]="EVEN_WIDTH"}(t.EditorArrangement||(t.EditorArrangement={}));t.EditorArrangement;t.IWorkbenchEditorService=n.createDecorator("editorService")});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/extHostOutputService",["require","exports","vs/base/common/errors","vs/platform/thread/common/thread","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService","vs/workbench/api/common/pluginHostTypeConverters"],function(e,t,n,i,r,o,s){var a=function(){function e(e,t){this._name=e,this._proxy=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;this._disposed||this._proxy.clear(this._name).then(function(){e._disposed=!0})},e.prototype.append=function(e){this._proxy.append(this._name,e)},e.prototype.appendLine=function(e){this.append(e+"\n")},e.prototype.clear=function(){this._proxy.clear(this._name)},e.prototype.show=function(e){this._proxy.reveal(this._name,s.fromViewColumn(e))},e.prototype.hide=function(){this._proxy.close(this._name)},e}();t.ExtHostOutputChannel=a;var c=function(){function e(e){this._proxy=e.getRemotable(u)}return e.prototype.createOutputChannel=function(e){if(e=e.trim())return new a(e,this._proxy);throw new Error("illegal argument `name`. must not be falsy")},e}();t.ExtHostOutputService=c;var u=function(){function e(e,t){this._outputService=e,this._editorService=t}return e.prototype.append=function(e,t){this._outputService.append(e,t)},e.prototype.clear=function(e){this._outputService.clearOutput(e)},e.prototype.reveal=function(e,t){this._outputService.showOutput(e,t)},e.prototype.close=function(e){for(var t=this._editorService.getVisibleEditors(),i=0;i<t.length;i++){var o=t[i];if(o.input.getId()===r.OUTPUT_EDITOR_INPUT_ID)return void this._editorService.closeEditor(o).done(null,n.onUnexpectedError)}},e=__decorate([i.Remotable.MainContext("MainThreadOutputService"),__param(0,r.IOutputService),__param(1,o.IWorkbenchEditorService)],e)}();t.MainThreadOutputService=u});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostWorkspace",["require","exports","vs/platform/search/common/search","vs/platform/workspace/common/workspace","vs/platform/thread/common/thread","vs/platform/event/common/event","vs/workbench/services/editor/common/editorService","vs/workbench/parts/files/common/files","vs/editor/common/services/bulkEdit","vs/workbench/api/common/pluginHostTypeConverters"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e,t){this._proxy=e.getRemotable(d),this._workspacePath=t}return e.prototype.getPath=function(){return this._workspacePath},e.prototype.getRelativePath=function(e){var t;return t="string"==typeof e?e:e.fsPath,this._workspacePath&&this._workspacePath.length<t.length?t.substring(this._workspacePath.length):t},e.prototype.findFiles=function(e,t,n){return this._proxy.findFiles(e,t,n)},e.prototype.saveAll=function(e){return this._proxy.saveAll(e)},e.prototype.appyEdit=function(e){for(var t=[],n=e.entries(),i=0;i<n.length;i++)for(var r=n[i],o=r[0],s=r[1],a=0;a<s.length;a++){var c=s[a];t.push({resource:o,newText:c.newText,range:u.fromRange(c.range)})}return this._proxy.applyWorkspaceEdit(t)},e=__decorate([__param(0,r.IThreadService)],e)}();t.PluginHostWorkspace=l;var d=function(){function e(e,t,n,i,r){this._searchService=e,this._workspace=t.getWorkspace(),this._textFileService=n,this._editorService=i,this._eventService=r}return e.prototype.findFiles=function(e,t,i){if(this._workspace){return this._searchService.search({rootResources:[this._workspace.resource],type:n.QueryType.File,maxResults:i,includePattern:(r={},r[e]=!0,r),excludePattern:(o={},o[t]=!0,o)}).then(function(e){return e.results.map(function(e){return e.resource})});var r,o}},e.prototype.saveAll=function(e){return this._textFileService.saveAll(e).then(function(e){return e.results.every(function(e){return e.success===!0})})},e.prototype.applyWorkspaceEdit=function(e){var t,n=this._editorService.getActiveEditor();if(n){var i=n.getControl();"function"==typeof i.getEditorType&&(t=i)}return c.bulkEdit(this._eventService,this._editorService,t,e).then(function(){return!0})},e=__decorate([r.Remotable.MainContext("MainThreadWorkspace"),__param(0,n.ISearchService),__param(1,i.IWorkspaceContextService),__param(2,a.ITextFileService),__param(3,s.IWorkbenchEditorService),__param(4,o.IEventService)],e)}();t.MainThreadWorkspace=d});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorModelManager",["require","exports","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/workbench/parts/debug/common/debug","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modelService"],function(e,t,n,i,r,o,s){function a(e){for(var t={},n=0,i=e.length;i>n;n++)t[e[n]]=!0;return t}function c(e,t,n,i){return{startLineNumber:e,startColumn:t,endLineNumber:n,endColumn:i}}var u=function(){function e(e,t,n){this.modelService=e,this.editorService=t,this.debugService=n,this.modelData={},this.toDispose=[],this.registerListeners()}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.modelService.onModelAdded.remove(this.onModelAdded,this),this.modelService.onModelAdded.remove(this.onModelRemoved,this);var e;for(e in this.modelData)if(this.modelData.hasOwnProperty(e)){var t=this.modelData[e];n.disposeAll(t.toDispose),t.model.deltaDecorations(t.breakpointDecorationIds,[]),t.model.deltaDecorations(t.currentStackDecorations,[])}this.toDispose=n.disposeAll(this.toDispose),this.modelData=null},e.prototype.registerListeners=function(){var e=this;this.modelService.onModelAdded.add(this.onModelAdded,this),this.modelService.getModels().forEach(function(t){return e.onModelAdded(t)}),this.modelService.onModelRemoved.add(this.onModelRemoved,this),this.toDispose.push(this.debugService.getModel().addListener2(r.ModelEvents.BREAKPOINTS_UPDATED,function(){return e.onBreakpointsChanged()})),this.toDispose.push(this.debugService.getViewModel().addListener2(r.ViewModelEvents.FOCUSED_STACK_FRAME_UPDATED,function(){return e.onFocusedStackFrameUpdated()}))},e.prototype.onModelAdded=function(e){var t=this,n=e.getAssociatedResource().toString(),r=this.debugService.getModel().getBreakpoints().filter(function(e){return e.source.uri.toString()===n}),o=e.deltaDecorations([],this.createCallStackDecorations(n)),s=e.deltaDecorations([],this.createBreakpointDecorations(r)),c=[e.addListener2(i.EventType.ModelDecorationsChanged,function(e){return t.onModelDecorationsChanged(n,e)})];this.modelData[n]={model:e,toDispose:c,breakpointDecorationIds:s,breakpointLines:r.map(function(e){return e.lineNumber}),breakpointDecorationsAsMap:a(s),currentStackDecorations:o,topStackFrameRange:null}},e.prototype.onModelRemoved=function(e){var t=e.getAssociatedResource().toString();if(this.modelData.hasOwnProperty(t)){var i=this.modelData[t];delete this.modelData[t],n.disposeAll(i.toDispose)}},e.prototype.onFocusedStackFrameUpdated=function(){var e=this;Object.keys(this.modelData).forEach(function(t){var n=e.modelData[t];n.currentStackDecorations=n.model.deltaDecorations(n.currentStackDecorations,e.createCallStackDecorations(t))})},e.prototype.createCallStackDecorations=function(t){var n=this,i=[],r=this.debugService.getViewModel().getFocusedStackFrame(),o=this.debugService.getModel().getThreads();if(!r||!o[r.threadId]||!o[r.threadId].callStack)return i;var s=o[r.threadId];return s.callStack.filter(function(e){return e.source.uri.toString()===t}).forEach(function(o){var a=c(o.lineNumber,o.column,o.lineNumber,Number.MAX_VALUE);o===s.callStack[0]?(i.push({options:e.TOP_STACK_FRAME_MARGIN,range:c(o.lineNumber,o.column,o.lineNumber,o.column+1)}),s.exception?i.push({options:e.TOP_STACK_FRAME_EXCEPTION_DECORATION,range:a}):(i.push({options:e.TOP_STACK_FRAME_DECORATION,range:a}),n.modelData[t]&&(n.modelData[t].topStackFrameRange&&n.modelData[t].topStackFrameRange.startLineNumber===a.startLineNumber&&n.modelData[t].topStackFrameRange.startColumn!==a.startColumn&&i.push({options:e.TOP_STACK_FRAME_COLUMN_DECORATION,range:a}),n.modelData[t].topStackFrameRange=a))):o===r&&(i.push({options:e.FOCUSED_STACK_FRAME_MARGIN,range:c(o.lineNumber,o.column,o.lineNumber,o.column+1)}),i.push({options:e.FOCUSED_STACK_FRAME_DECORATION,range:a}))}),i},e.prototype.onModelDecorationsChanged=function(e,t){var n=this.modelData[e];if(t.addedOrChangedDecorations.some(function(e){return n.breakpointDecorationsAsMap.hasOwnProperty(e.id)})){var i=[],r={};this.debugService.getModel().getBreakpoints().filter(function(t){return t.source.uri.toString()===e}).forEach(function(e){r[e.lineNumber]={enabled:e.enabled,condition:e.condition}});for(var o=n.model.getAssociatedResource(),s=0,a=n.breakpointDecorationIds.length;a>s;s++){var c=n.model.getDecorationRange(n.breakpointDecorationIds[s]);c.endColumn-c.startColumn>0&&i.push({uri:o,lineNumber:c.startLineNumber,enabled:r[n.breakpointLines[s]].enabled,condition:r[n.breakpointLines[s]].condition})}this.debugService.setBreakpointsForModel(o,i)}},e.prototype.onBreakpointsChanged=function(){var e=this,t={};this.debugService.getModel().getBreakpoints().forEach(function(e){var n=e.source.uri.toString();t[n]?t[n].push(e):t[n]=[e]}),Object.keys(t).forEach(function(n){e.modelData.hasOwnProperty(n)&&e.updateBreakpoints(e.modelData[n],t[n])}),Object.keys(this.modelData).forEach(function(n){t.hasOwnProperty(n)||e.updateBreakpoints(e.modelData[n],[])})},e.prototype.updateBreakpoints=function(e,t){e.breakpointDecorationIds=e.model.deltaDecorations(e.breakpointDecorationIds,this.createBreakpointDecorations(t)),e.breakpointDecorationsAsMap=a(e.breakpointDecorationIds),e.breakpointLines=t.map(function(e){return e.lineNumber})},e.prototype.createBreakpointDecorations=function(t){var n=this.debugService.getModel().areBreakpointsActivated(),i=this.debugService.getState(),o=i===r.State.Running||i===r.State.Stopped||i===r.State.Initializing;return t.map(function(t){return{options:t.enabled&&n?o&&!t.verified?e.BREAKPOINT_UNVERIFIED_DECORATION:e.BREAKPOINT_DECORATION:e.BREAKPOINT_DISABLED_DECORATION,range:c(t.lineNumber,1,t.lineNumber,2)}})},e.ID="breakpointManager",e.BREAKPOINT_DECORATION={glyphMarginClassName:"debug-breakpoint-glyph",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_DISABLED_DECORATION={glyphMarginClassName:"debug-breakpoint-glyph-disabled",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.BREAKPOINT_UNVERIFIED_DECORATION={glyphMarginClassName:"debug-breakpoint-glyph-unverified",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_MARGIN={glyphMarginClassName:"debug-top-stack-frame-glyph",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.FOCUSED_STACK_FRAME_MARGIN={glyphMarginClassName:"debug-focused-stack-frame-glyph",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_DECORATION={isWholeLine:!0,className:"debug-top-stack-frame-line",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_EXCEPTION_DECORATION={isWholeLine:!0,className:"debug-top-stack-frame-exception-line",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.TOP_STACK_FRAME_COLUMN_DECORATION={isWholeLine:!1,className:"debug-top-stack-frame-column",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e.FOCUSED_STACK_FRAME_DECORATION={isWholeLine:!0,className:"debug-focused-stack-frame-line",stickiness:i.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e=__decorate([__param(0,s.IModelService),__param(1,o.IWorkbenchEditorService),__param(2,r.IDebugService)],e)}();t.DebugEditorModelManager=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/electronFileActions",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/nls!vs/workbench/parts/files/electron-browser/electronFileActions","vs/base/common/paths","vs/base/common/labels","vs/base/common/platform","vs/base/common/severity","vs/workbench/services/editor/common/editorService","vs/workbench/common/editor","vs/platform/message/common/message","vs/platform/instantiation/common/instantiation","remote","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=p.require("shell"),v=p.require("clipboard"),g=function(e){function t(t,n){e.call(this,"workbench.action.files.revealInWindows",a.isWindows?r.localize(0,null):a.isMacintosh?r.localize(1,null):r.localize(2,null)),this.resource=t,this.order=45}return __extends(t,e),t.prototype.run=function(){return m.showItemInFolder(o.normalize(this.resource.fsPath,!0)),n.Promise.as(!0)},t=__decorate([__param(1,h.INullService)],t)}(i.Action);t.RevealInOSAction=g;var y=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?m.showItemInFolder(o.normalize(e.getResource().fsPath,!0)):this.messageService.show(c["default"].Info,r.localize(6,null)),n.Promise.as(!0)},t.ID="workbench.action.files.revealActiveFileInWindows",t.LABEL=a.isWindows?r.localize(3,null):a.isMacintosh?r.localize(4,null):r.localize(5,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.GlobalRevealInOSAction=y;var _=function(e){function t(t,n){e.call(this,"workbench.action.files.copyPath",r.localize(7,null)),this.resource=t,this.order=140}return __extends(t,e),t.prototype.run=function(){return v.writeText(s.getPathLabel(this.resource)),n.Promise.as(!0)},t=__decorate([__param(1,h.INullService)],t)}(i.Action);t.CopyPathAction=_;var b=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?(v.writeText(s.getPathLabel(e.getResource())),this.editorService.focusEditor()):this.messageService.show(c["default"].Info,r.localize(9,null)),n.Promise.as(!0)},t.ID="workbench.action.files.copyPathOfActiveFile",t.LABEL=r.localize(8,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.GlobalCopyPathAction=b;var E=function(e){function t(t,n,i){e.call(this,t,n),this.ipcMsg=i}return __extends(t,e),t.prototype.run=function(){return f.send(this.ipcMsg),n.Promise.as(!0)},t}(i.Action);t.BaseOpenAction=E,t.OPEN_FILE_ID="workbench.action.files.openFile",t.OPEN_FILE_LABEL=r.localize(10,null);var S=function(e){function t(t,n,i){e.call(this,t,n,"vscode:openFilePicker")}return __extends(t,e),t=__decorate([__param(2,h.INullService)],t)}(E);t.OpenFileAction=S,t.OPEN_FOLDER_ID="workbench.action.files.openFolder",t.OPEN_FOLDER_LABEL=r.localize(11,null);var w=function(e){function t(t,n,i){e.call(this,t,n,"vscode:openFolderPicker")}return __extends(t,e),t=__decorate([__param(2,h.INullService)],t)}(E);t.OpenFolderAction=w,t.OPEN_FILE_FOLDER_ID="workbench.action.files.openFileFolder",t.OPEN_FILE_FOLDER_LABEL=r.localize(12,null);var C=function(e){function t(t,n,i){e.call(this,t,n,"vscode:openFileFolderPicker")}return __extends(t,e),t=__decorate([__param(2,h.INullService)],t)}(E);t.OpenFileFolderAction=C;var T=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.messageService=r}return __extends(t,e),t.prototype.run=function(){var e=l.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?f.send("vscode:windowOpen",[e.getResource().fsPath],!0):this.messageService.show(c["default"].Info,r.localize(14,null)),n.Promise.as(!0)},t.ID="workbench.action.files.showOpenedFileInNewWindow",t.LABEL=r.localize(13,null),t=__decorate([__param(2,u.IWorkbenchEditorService),__param(3,d.IMessageService)],t)}(i.Action);t.ShowOpenedFileInNewWindow=T});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitEditorInputs",["require","exports","vs/base/common/lifecycle","vs/base/common/async","vs/workbench/browser/parts/editor/stringEditorInput","vs/workbench/browser/parts/editor/diffEditorInput","vs/workbench/parts/git/common/git","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c){
function u(e){return e instanceof d||e instanceof f}var l=s.IGitService;t.isGitEditorInput=u;var d=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r),this.status=o}return __extends(t,e),t.prototype.getId=function(){throw new Error("To implement.")},t.prototype.getFileStatus=function(){return this.status},t.prototype.contains=function(e){if(this.matches(e))return!0;var t=this.getOriginalInput();if(t&&t.matches(e))return!0;var n=this.getModifiedInput();return n&&n.matches(e)?!0:!1},t}(o.DiffEditorInput);t.GitDiffEditorInput=d;var h=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.GitWorkingTreeDiffEditorInput",t}(d);t.GitWorkingTreeDiffEditorInput=h;var p=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r,o)}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.GitIndexDiffEditorInput",t}(d);t.GitIndexDiffEditorInput=p;var f=function(e){function t(t,n,r,o,a,c,u,l,d){var h=this;e.call(this,t,n,null,r,!1,d),this.gitService=u,this.editorService=l,this.status=o,this.path=a,this.treeish=c,this.delayer=new i.ThrottledDelayer(1e3),this.toDispose=[],this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.STATE_CHANGED,function(){return h.onGitServiceStateChange()})),this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.OPERATION_END,function(){return h.onGitServiceStateChange()}))}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getFileStatus=function(){return this.status},t.prototype.resolve=function(t){var n=this;return t||!this.getValue()?this.gitService.buffer(this.path,this.treeish).then(function(i){return n.getValue()!==i&&n.setValue(i),e.prototype.resolve.call(n,t)}):e.prototype.resolve.call(this,t)},t.prototype.onGitServiceStateChange=function(){var e=this,t=this.editorService.isVisible(this,!0);t&&this.delayer.trigger(function(){return e.resolve(!0)})},t.prototype.dispose=function(){this.delayer&&(this.delayer.cancel(),this.delayer=null),this.toDispose=n.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.ID="Monaco.IDE.UI.Viewlets.GitViewlet.NativeGitIndexStringEditorInput",t=__decorate([__param(6,l),__param(7,a.IWorkbenchEditorService),__param(8,c.IInstantiationService)],t)}(r.StringEditorInput);t.NativeGitIndexStringEditorInput=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitServices",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitServices","vs/base/common/platform","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/types","vs/base/common/actions","vs/base/common/errors","vs/base/common/mime","vs/base/common/paths","vs/base/common/eventEmitter","vs/workbench/browser/events","vs/workbench/parts/git/common/git","vs/workbench/parts/git/common/gitModel","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/parts/git/browser/gitOperations","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/base/common/async","vs/base/common/severity","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/platform/lifecycle/common/lifecycle","vs/base/common/uri"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A){function R(e){return i.isWindows?e.replace(/\//g,"\\"):e}var D=function(){function e(e,t,n,i,r,o){var s=this;this.instantiationService=t,this.fileService=n,this.eventService=i,this.editorService=r,this.contextService=o,this.gitService=e,this.cache={},this.toDispose=[],this.toDispose.push(this.gitService.getModel().addListener2("fileStatus:dispose",function(e){return s.onFileStatusDispose(e)}))}return e.prototype.getInput=function(e){var t=this.cache[e.getId()];return t?t:(t=this.createInput(e),this.cache[e.getId()]=t,t)},e.prototype.createInput=function(e){return r.TPromise.join([this.createLeftInput(e),this.createRightInput(e)]).then(function(t){var i,o,s=t[0],a=t[1];if(e.getStatus()===p.Status.INDEX_RENAMED){var c=e.getRename().split("/");i=c[c.length-1],o=R(c.slice(0,c.length-1).join("/"))}else{var c=e.getPathComponents();i=c[c.length-1],o=R(c.slice(0,c.length-1).join("/"))}if(!s){if(!a){var u=new Error(n.localize(0,null));return u.gitErrorCode=p.GitErrorCodes.CantOpenResource,r.Promise.wrapError(u)}return r.Promise.as(a)}switch(e.getStatus()){case p.Status.INDEX_MODIFIED:return r.Promise.as(new m.GitIndexDiffEditorInput(i,n.localize(1,null,o),s,a,e));case p.Status.INDEX_RENAMED:return r.Promise.as(new m.GitIndexDiffEditorInput(i,n.localize(2,null,o),s,a,e));case p.Status.MODIFIED:return r.Promise.as(new m.GitWorkingTreeDiffEditorInput(i,n.localize(3,null,o),s,a,e));default:return r.Promise.as(new m.GitDiffEditorInput(i,n.localize(4,null,o),s,a,e))}}).then(function(e){return e},function(e){return r.Promise.wrapError(s.isArray(e)?e[0]||e[1]:e)})},e.prototype.createLeftInput=function(e){var t=e.getPath(),n=this.gitService.getModel();switch(e.getStatus()){case p.Status.INDEX_MODIFIED:case p.Status.INDEX_RENAMED:return this.gitService.show(t,e,"HEAD",e.getMimetype());case p.Status.MODIFIED:var i=n.getStatus().find(t,p.StatusType.INDEX);return i&&i.getStatus()===p.Status.INDEX_RENAMED?this.gitService.show(i.getRename(),e,"~",e.getMimetype()):i?this.gitService.show(t,e,"~",e.getMimetype()):this.gitService.show(t,e,"HEAD",e.getMimetype());default:return r.Promise.as(null)}},e.prototype.createRightInput=function(e){var t=this.gitService.getModel(),n=e.getPath(),i=A["default"].file(l.join(t.getRepositoryRoot(),n));switch(e.getStatus()){case p.Status.INDEX_MODIFIED:case p.Status.INDEX_ADDED:case p.Status.INDEX_COPIED:return this.gitService.show(n,e,"~",e.getMimetype());case p.Status.INDEX_RENAMED:return this.gitService.show(e.getRename(),e,"~",e.getMimetype());case p.Status.INDEX_DELETED:case p.Status.DELETED:return this.gitService.show(n,e,"HEAD",e.getMimetype());case p.Status.MODIFIED:case p.Status.UNTRACKED:case p.Status.IGNORED:var o=t.getStatus().find(n,p.StatusType.INDEX);return o&&o.getStatus()===p.Status.INDEX_RENAMED&&(i=A["default"].file(l.join(t.getRepositoryRoot(),o.getRename()))),this.editorService.inputToType({resource:i});case p.Status.BOTH_MODIFIED:return this.editorService.inputToType({resource:i});default:return r.Promise.as(null)}},e.prototype.onFileStatusDispose=function(e){var t=this,n=e.getId(),i=this.cache[n];i&&(i.done(function(e){t.eventuallyDispose(e)}),delete this.cache[n])},e.prototype.eventuallyDispose=function(e){var t=this;if(!this.maybeDispose(e))var n=this.eventService.addListener2(h.EventType.EDITOR_INPUT_CHANGED,function(){t.maybeDispose(e)&&n.dispose()})},e.prototype.maybeDispose=function(e){return this.editorService.getVisibleEditors().some(function(t){return t.input&&t.input.matches(e)})?!1:(e.dispose(),!0)},e.prototype.dispose=function(){var e=this;Object.keys(this.cache).forEach(function(t){e.cache[t].done(function(e){e.dispose()}),delete e.cache[t]}),this.toDispose=o.disposeAll(this.toDispose)},e=__decorate([__param(1,T.IInstantiationService),__param(2,y.IFileService),__param(3,C.IEventService),__param(4,S.IWorkbenchEditorService),__param(5,k.IWorkspaceContextService)],e)}(),L=function(){function e(t,n,i,r,o,s){var a=this;this._state=p.AutoFetcherState.Disabled,this.gitService=t,this.eventService=n,this.messageService=i,this.configurationService=o,this.instantiationService=s,this.currentRequest=null,this.timeout=e.MIN_TIMEOUT,this.toDispose=[],this.toDispose.push(this.configurationService.addListener2(w.ConfigurationServiceEventTypes.UPDATED,function(e){return a.onConfiguration(e.config.git)})),o.loadConfiguration("git").done(function(e){return a.onConfiguration(e)})}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.onConfiguration=function(e){e.autofetch===!1?this.disable():this.enable()},e.prototype.enable=function(){var e=this;this._state===p.AutoFetcherState.Disabled&&(this.gitServiceStateDisposable=this.gitService.addListener2(p.ServiceEvents.STATE_CHANGED,function(t){return e.onGitServiceStateChange(t)}),this._state=p.AutoFetcherState.Active,this.onGitServiceStateChange(this.gitService.getState()))},e.prototype.disable=function(){this.gitServiceStateDisposable&&(this.gitServiceStateDisposable.dispose(),this.gitServiceStateDisposable=null),this.deactivate(),this._state=p.AutoFetcherState.Disabled},e.prototype.onGitServiceStateChange=function(e){e===p.ServiceState.OK?this.activate():this.deactivate()},e.prototype.activate=function(){this.currentRequest&&this.currentRequest.cancel(),this._state=p.AutoFetcherState.Active,this.loop()},e.prototype.deactivate=function(){this.currentRequest&&(this._state=p.AutoFetcherState.Inactive,this.currentRequest.cancel(),this.currentRequest=null)},e.prototype.loop=function(){var t=this;this._state=p.AutoFetcherState.Fetching,this.currentRequest=this.gitService.fetch().then(function(){t.timeout=e.MIN_TIMEOUT},function(n){return c.isPromiseCanceledError(n)?r.Promise.wrapError(n):n.gitErrorCode===p.GitErrorCodes.AuthenticationFailed?r.Promise.wrapError(n):void(t.timeout=Math.min(Math.round(1.2*t.timeout),e.MAX_TIMEOUT))}),this.currentRequest.then(function(){return t._state=p.AutoFetcherState.Active,t.currentRequest=r.Promise.timeout(t.timeout),t.currentRequest}).then(function(){return t.loop()},function(e){return t.deactivate()})},e.prototype.dispose=function(){this.disable()},e.MIN_TIMEOUT=12e4,e.MAX_TIMEOUT=3e5,e=__decorate([__param(1,C.IEventService),__param(2,I.IMessageService),__param(3,S.IWorkbenchEditorService),__param(4,w.IConfigurationService),__param(5,T.IInstantiationService)],e)}();t.AutoFetcher=L;var M=function(e){function t(t,n,i,r,o,s,a,c){e.call(this),this.serviceId=p.IGitService,this.instantiationService=n,this.eventService=i,this.messageService=r,this.editorService=o,this.outputService=s,this.contextService=a,this.lifecycleService=c,this.raw=t,this.state=p.ServiceState.NotInitialized,this.operations=[],this.model=new f.Model,this.toDispose=[],this.needsRefresh=!1,this.refreshDelayer=new _.PeriodThrottledDelayer(500,1e4),this.autoFetcher=this.instantiationService.createInstance(L,this),this.registerListeners(),this.inputCache=this.instantiationService.createInstance(D,this),this.triggerStatus(!0)}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)})),this.toDispose.push(this.eventService.addListener2(g.EventType.FILE_SAVED,function(t){return e.onLocalFileChange(t)})),this.toDispose.push(this.eventService.addListener2(g.EventType.FILE_REVERTED,function(t){return e.onLocalFileChange(t)})),this.lifecycleService.onShutdown.add(this.dispose,this)},t.prototype.triggerStatus=function(e){var t=this;if(void 0===e&&(e=!1),this.isInitialized()&&!this.isIdle()&&!e)return void this.refreshDelayer.cancel();var n=_.once(function(e){c.isPromiseCanceledError(e)||t.messageService.show(b["default"].Error,e)});this.refreshDelayer.trigger(function(){return t.status()}).done(null,n)},t.prototype.onLocalFileChange=function(e){var t=e.gotUpdated()&&".gitignore"===l.basename(e.getAfter().resource.fsPath);t&&this.triggerStatus()},t.prototype.onFileChanges=function(e){var t=this,n=this.isIdle(),i=e.changes.some(function(e){var i=t.contextService.toWorkspaceRelativePath(e.resource);return i?".git/index"===i?n:/^\.git/.test(i)?".git"===i?e.type===y.FileChangeType.ADDED||e.type===y.FileChangeType.DELETED:-1===[".git/index.lock",".git/FETCH_HEAD",".gitignore",".gitmodules"].indexOf(i):!0:!1});i&&this.triggerStatus()},t.prototype.onGitServiceOperationEnd=function(e){e.operation.id===p.ServiceOperations.COMMAND&&this.triggerStatus()},t.prototype.getState=function(){return this.state},t.prototype.getModel=function(){return this.model},t.prototype.status=function(){var e=this;return this.run(p.ServiceOperations.STATUS,function(){return e.raw.status()})},t.prototype.init=function(){var e=this;return this.run(p.ServiceOperations.INIT,function(){return e.raw.init()})},t.prototype.add=function(e){var n=this;return this.run(p.ServiceOperations.ADD,function(){return n.raw.add(t.toPaths(e))})},t.prototype.stage=function(e,t){var n=this;return this.run(p.ServiceOperations.STAGE,function(){return n.raw.stage(e,t)})},t.prototype.branch=function(e,t){var n=this;return void 0===t&&(t=!1),this.run(p.ServiceOperations.BRANCH,function(){return n.raw.branch(e,t)})},t.prototype.checkout=function(e,n){var i=this;return void 0===e&&(e=""),void 0===n&&(n=null),this.run(p.ServiceOperations.CHECKOUT,function(){return i.raw.checkout(e,t.toPaths(n))})},t.prototype.clean=function(e){var t=this;return this.run(p.ServiceOperations.CLEAN,function(){return t.raw.clean(e.map(function(e){return e.getPath()}))})},t.prototype.undo=function(){var e=this;return this.run(p.ServiceOperations.UNDO,function(){return e.raw.undo()})},t.prototype.reset=function(e,t){var n=this;return this.run(p.ServiceOperations.RESET,function(){return n.raw.reset(e,t)})},t.prototype.revertFiles=function(e,t){var n=this;return this.run(p.ServiceOperations.RESET,function(){return n.raw.revertFiles(e,(t||[]).map(function(e){return e.getPath()}))})},t.prototype.fetch=function(){var e=this;return this.run(p.ServiceOperations.BACKGROUND_FETCH,function(){return e.raw.fetch()})},t.prototype.pull=function(e){var t=this;return this.run(p.ServiceOperations.PULL,function(){return t.raw.pull(e)})},t.prototype.push=function(e,t,n){var i=this;return this.run(p.ServiceOperations.PUSH,function(){return i.raw.push(e,t,n)})},t.prototype.sync=function(){var e=this;return this.run(p.ServiceOperations.SYNC,function(){return e.raw.sync()})},t.prototype.commit=function(e,t,n){var i=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),this.run(p.ServiceOperations.COMMIT,function(){return i.raw.commit(e,t,n)})},t.prototype.detectMimetypes=function(e,t){return void 0===t&&(t="~"),this.raw.detectMimetypes(e,t)},t.prototype.run=function(e,t){var n=this;return this.raw.serviceState().then(function(i){return i===p.RawServiceState.GitNotFound?(n.transition(p.ServiceState.NoGit),r.Promise.as(null)):i===p.RawServiceState.Disabled?(n.transition(p.ServiceState.Disabled),r.Promise.as(null)):n._run(e,t)})},t.prototype._run=function(e,t){var i=this,o=new v.GitOperation(e,t);this.operations.push(o),this.emit(p.ServiceEvents.OPERATION_START,o),this.emit(p.ServiceEvents.OPERATION,o);var u=function(e){void 0===e&&(e=null);var t=i.operations.indexOf(o);t>-1&&i.operations.splice(t,1);var n={operation:o,error:e};i.emit(p.ServiceEvents.OPERATION_END,n),i.onGitServiceOperationEnd(n),i.emit(p.ServiceEvents.OPERATION,o)};return o.run().then(function(e){return i.model.update(e),u(),e?i.transition(s.isUndefinedOrNull(e.state)?p.ServiceState.OK:e.state):i.transition(p.ServiceState.NotARepo),i.model},function(e){if(u(e),c.isPromiseCanceledError(e))return r.Promise.wrapError(e);var t=e.gitErrorCode||null;if(t===p.GitErrorCodes.NotAtRepositoryRoot)return i.transition(p.ServiceState.NotAtRepoRoot),r.Promise.as(i.model);if(i.emit(p.ServiceEvents.ERROR,e),i.transition(p.ServiceState.OK),t===p.GitErrorCodes.NoUserNameConfigured||t===p.GitErrorCodes.NoUserEmailConfigured)return i.messageService.show(b["default"].Warning,n.localize(5,null)),r.Promise.as(null);if(t===p.GitErrorCodes.BadConfigFile)return i.messageService.show(b["default"].Error,n.localize(6,null,e.message)),r.Promise.as(null);if(t===p.GitErrorCodes.UnmergedChanges)return i.messageService.show(b["default"].Warning,n.localize(7,null)),r.Promise.as(null);var o,s=new a.Action("show.gitOutput",n.localize(8,null),null,!0,function(){return i.outputService.showOutput("Git")}),l=new a.Action("close.message",n.localize(9,null),null,!0,function(){return r.Promise.as(!0)});return o=c.create(n.localize(10,null),{actions:[s,l]}),o.gitErrorCode=t,r.Promise.wrapError(o)})},t.prototype.transition=function(e){var t=this.state;this.state=e,e!==t&&this.emit(p.ServiceEvents.STATE_CHANGED,e)},t.prototype.buffer=function(e,t){return void 0===t&&(t="~"),this.raw.show(e,t)},t.prototype.show=function(e,t,i,o){var s=this;return void 0===i&&(i="~"),void 0===o&&(o="text/plain"),this.detectMimetypes(e,i).then(function(o){var a,c=t.getPathComponents(),l=c[c.length-1],d=R(c.slice(0,c.length-1).join("/"));return a="~"===i?n.localize(11,null,d):n.localize(12,null,d,i),u.isUnspecific(o)&&(o=u.guessMimeTypes(e)),u.isBinaryMime(u.guessMimeTypes(e))||o.indexOf(u.MIME_BINARY)>=0?r.Promise.wrapError(new Error("The resource seems to be binary and cannot be displayed")):r.Promise.as(s.instantiationService.createInstance(m.NativeGitIndexStringEditorInput,l,a,o.join(", "),t,e,i))})},t.prototype.getInput=function(e){var t=this;return this.inputCache.getInput(e).then(null,function(e){return(e.gitErrorCode=p.GitErrorCodes.CantOpenResource)?(t.messageService.show(b["default"].Warning,n.localize(13,null)),r.Promise.as(null)):r.Promise.wrapError(e)})},t.prototype.isInitialized=function(){return this.state===p.ServiceState.OK},t.prototype.isIdle=function(){return this.isInitialized()&&!this.operations.some(function(e){return e.id!==p.ServiceOperations.BACKGROUND_FETCH})},t.prototype.getRunningOperations=function(){return this.operations},t.prototype.onOutput=function(){return this.raw.onOutput()},t.prototype.getAutoFetcher=function(){return this.autoFetcher},t.toPaths=function(e){return e?e.map(function(e){switch(e.getStatus()){case p.Status.MODIFIED:case p.Status.DELETED:if(e.getRename())return e.getRename();default:return e.getPath()}}):null},t.prototype.dispose=function(){this.emit(p.ServiceEvents.DISPOSE),this.model&&(this.model.dispose(),this.model=null),this.remoteListenerUnbind&&(this.remoteListenerUnbind(),this.remoteListenerUnbind=null),e.prototype.dispose.call(this)},t.ID="Monaco.IDE.UI.Services.GitService",t=__decorate([__param(1,T.IInstantiationService),__param(2,C.IEventService),__param(3,I.IMessageService),__param(4,S.IWorkbenchEditorService),__param(5,E.IOutputService),__param(6,k.IWorkspaceContextService),__param(7,x.ILifecycleService)],t)}(d.EventEmitter);t.GitService=M});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/electron-browser/electronGitService",["require","exports","vs/base/common/winjs.base","vs/workbench/parts/git/common/git","vs/workbench/parts/git/common/noopGitService","vs/workbench/parts/git/browser/gitServices","vs/platform/lifecycle/common/lifecycle","vs/workbench/parts/output/common/output","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/base/node/service.cp","vs/workbench/parts/git/node/rawGitService","vs/base/common/uri","child_process","path","remote"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_){function b(e){return new n.Promise(function(t,n){var i=g.spawn(e,["--version"]);i.on("error",n),i.on("exit",function(i){return i?n(new Error("Not found")):t(e)})})}function E(){return new n.Promise(function(e,t){g.exec("which git",function(n,i){if(n)return t("git not found");var r=i.toString().replace(/^\s+|\s+$/g,"");return"/usr/bin/git"!==r?e(r):void g.exec("xcode-select -p",function(n){return n&&2===n.code?t("git not found"):e(r)})})})}function S(e){return e?b(y.join(e,"Git","cmd","git.exe")):n.Promise.wrapError("Not found")}function w(){return S(process.env.ProgramW6432).then(null,function(){return S(process.env["ProgramFiles(x86)"])}).then(null,function(){return S(process.env.ProgramFiles)}).then(null,function(){return b("git")})}function C(e){var t=e?b(e):n.Promise.wrapError(null);return t.then(null,function(){switch(process.platform){case"darwin":return E();case"win32":return w();default:return b("git")}})}function T(t,n,i){return C(n).then(function(n){var r=new f.Client(v["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Git",timeout:6e4,args:[n,t,i,_.process.execPath],env:{ATOM_SHELL_INTERNAL_RUN_AS_NODE:1,AMD_ENTRYPOINT:"vs/workbench/parts/git/electron-browser/gitApp"}});return r.getService("GitService",m.RawGitService)},function(){return new I})}var I=function(e){function t(){e.call(this,null)}return __extends(t,e),t}(m.RawGitService),k=function(e){function t(){e.call(this,null)}return __extends(t,e),t.prototype.serviceState=function(){return n.TPromise.as(i.RawServiceState.Disabled)},t}(m.RawGitService);t.createNativeRawGitService=T;var x=function(e){function t(t,i){e.call(this,i.loadConfiguration().then(function(e){var i=e.git?e.git.enabled:!0;if(!i)return n.Promise.as(new k);var r=e.git&&e.git.path||null,o=e.files&&e.files.encoding||"utf8";return T(t,r,o)}))}return __extends(t,e),t=__decorate([__param(1,u.IConfigurationService)],t)}(m.DelayedRawGitService),A=function(e){function t(t,n,i,o,s,a,c){var u=a.getWorkspace(),l=u?t.createInstance(x,u.resource.fsPath):new r.NoOpGitService;e.call(this,l,t,n,i,o,s,a,c)}return __extends(t,e),t=__decorate([__param(0,d.IInstantiationService),__param(1,l.IEventService),__param(2,h.IMessageService),__param(3,c.IWorkbenchEditorService),__param(4,a.IOutputService),__param(5,p.IWorkspaceContextService),__param(6,s.ILifecycleService)],t)}(o.GitService);t.ElectronGitService=A});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownEditorModel",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/markdown/browser/markdownEditorModel","vs/base/common/paths","vs/workbench/browser/parts/editor/iframeEditorModel","vs/workbench/common/constants","vs/platform/theme/common/themes","vs/workbench/parts/markdown/browser/markdown","vs/workbench/services/editor/common/editorService","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(t){function o(e,n,i,r){t.call(this,e),this.editorService=n,this.contextService=i,this.storageService=r}return __extends(o,t),o.prototype.load=function(){var t,o=this,u=!1;return new n.TPromise(function(n,d){var h=function(e){try{var t=o.storageService.get(s.Preferences.THEME,l.StorageScope.GLOBAL,a.DEFAULT_THEME_ID),c=a.isLightTheme(t),u=i.localize(0,null,r.basename(o.resource.fsPath));o.setContents('<html><head><style type="text/css">body {color: '+(c?"black":"white")+'; font-family: "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback"; font-size: 13px; margin: 0; line-height: 1.4em; padding-left: 20px;}</style></head><body>',u,"</body></html>"),n(o)}catch(e){d(e)}},p=function(t){try{var i=t.getMode(),r=e.toUrl("vs/languages/markdown/common");i&&i.emitOutputSupport&&i.getId()===c.MARKDOWN_MODE_ID?i.emitOutputSupport.getEmitOutput(o.resource,r).then(function(e){o.setContents(e.head,e.body,e.tail),n(o)},h):h(null)}catch(s){h(s)}};o.editorService.resolveEditorModel({resource:o.resource,mime:c.MARKDOWN_MIME}).then(function(e){return u?void 0:(t=e.textEditorModel,t.whenModeIsReady())}).then(function(){u||p(t)},h)},function(){u=!0})},o=__decorate([__param(1,u.IWorkbenchEditorService),__param(2,d.IWorkspaceContextService),__param(3,l.IStorageService)],o)}(o.IFrameEditorModel);t.MarkdownEditorModel=h}),define("vs/workbench/services/files/node/watcher/common",["require","exports","vs/base/common/uri","vs/base/common/paths","vs/platform/files/common/files"],function(e,t,n,i,r){function o(e){return new r.FileChangesEvent(e.map(function(e){return{type:e.type,resource:n["default"].file(e.path)}}))}function s(e){for(var t=new a,n=0;n<e.length;n++){var i=e[n];t.processEvent(i)}return t.normalize()}t.toFileChangesEvent=o,t.normalize=s;var a=function(){function e(){this.normalized=[],this.mapPathToChange=Object.create(null)}return e.prototype.processEvent=function(e){var t=this.mapPathToChange[e.path];if(t){var n=t.type,i=e.type;n===r.FileChangeType.ADDED&&i===r.FileChangeType.DELETED?(delete this.mapPathToChange[e.path],this.normalized.splice(this.normalized.indexOf(t),1)):n===r.FileChangeType.DELETED&&i===r.FileChangeType.ADDED?t.type=r.FileChangeType.UPDATED:n===r.FileChangeType.ADDED&&i===r.FileChangeType.UPDATED||(t.type=i)}else this.normalized.push(e),this.mapPathToChange[e.path]=e},e.prototype.normalize=function(){var e=this,t=[],n=[];return this.normalized.filter(function(e){return 2!==e.type?(t.push(e),!1):!0}).sort(function(e,t){return e.path.length-t.path.length}).filter(function(t){return n.some(function(n){return e.isParent(t.path,n)})?!1:(n.push(t.path),!0)}).concat(t)},e.prototype.isParent=function(e,t){return 0===e.indexOf(t+i.nativeSep)},e}()}),define("vs/workbench/services/files/node/watcher/unix/watcherService",["require","exports","vs/base/common/winjs.base","vs/base/node/service.cp","vs/base/common/uri","vs/platform/files/common/files","vs/workbench/services/files/node/watcher/common"],function(e,t,n,i,r,o,s){var a=function(){function e(){}return e.prototype.watch=function(e){throw new Error("not implemented")},e}();t.WatcherService=a;var c=function(){function t(e,t,n,i,r){this.basePath=e,this.ignored=t,this.eventEmitter=n,this.errorLogger=i,this.verboseLogging=r,this.isDisposed=!1}return t.prototype.startWatching=function(){var t=this,o=new i.Client(r["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Watcher",args:["--type=watcherService"],env:{AMD_ENTRYPOINT:"vs/workbench/services/files/node/watcher/unix/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:this.verboseLogging}}),s=o.getService("WatcherService",a);return s.watch({basePath:this.basePath,ignored:this.ignored,verboseLogging:this.verboseLogging}).then(null,function(e){return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message?void 0:n.Promise.wrapError(e)},function(e){return t.onRawFileEvents(e)}).done(function(){t.isDisposed||t.startWatching()},this.errorLogger),function(){o.dispose(),t.isDisposed=!0}},t.prototype.onRawFileEvents=function(e){e.length>0&&this.eventEmitter.emit(o.EventType.FILE_CHANGES,s.toFileChangesEvent(e))},t}();t.FileWatcher=c}),define("vs/workbench/services/files/node/watcher/win32/csharpWatcherService",["require","exports","child_process","vs/platform/files/common/files","vs/base/node/decoder","vs/base/common/glob","vs/base/common/uri"],function(e,t,n,i,r,o,s){var a=function(){function t(e,t,n,i,r){this.watchedFolder=e,this.ignored=t,this.eventCallback=i,this.errorLogger=n,this.verboseLogging=r,this.startWatcher()}return t.prototype.startWatcher=function(){var i=this,a=[this.watchedFolder];this.verboseLogging&&a.push("-verbose"),this.handle=n.spawn(s["default"].parse(e.toUrl("vs/workbench/services/files/node/watcher/win32/CodeHelper.exe")).fsPath,a);var c=new r.LineDecoder;this.handle.stdout.on("data",function(e){var n=[];c.write(e).forEach(function(e){var r=e.split("|");if(2===r.length){var s=Number(r[0]),a=r[1];if(s>=0&&3>s){if(i.ignored&&i.ignored.some(function(e){return o.match(e,a)}))return;n.push({type:t.changeTypeMap[s],path:a})}else console.log("%c[File Watcher]","color: darkgreen",r[1])}}),n.length>0&&i.eventCallback(n)}),this.handle.on("error",function(e){return i.onError(e)}),this.handle.stderr.on("data",function(e){return i.onError(e)}),this.handle.on("exit",function(e,t){return i.onExit(e,t)})},t.prototype.onError=function(e){this.errorLogger("[FileWatcher] process error: "+e.toString())},t.prototype.onExit=function(e,t){this.handle&&(this.errorLogger("[FileWatcher] terminated unexpectedly (code: "+e+", signal: "+t+")"),this.startWatcher())},t.prototype.dispose=function(){this.handle&&(this.handle.kill(),this.handle=null)},t.changeTypeMap=[i.FileChangeType.UPDATED,i.FileChangeType.ADDED,i.FileChangeType.DELETED],t}();t.OutOfProcessWin32FolderWatcher=a}),define("vs/workbench/services/files/node/watcher/win32/watcherService",["require","exports","vs/platform/files/common/files","vs/workbench/services/files/node/watcher/common","vs/workbench/services/files/node/watcher/win32/csharpWatcherService"],function(e,t,n,i,r){var o=function(){function e(e,t,n,i,r){this.basePath=e,this.ignored=t,this.errorLogger=i,this.verboseLogging=r,this.eventEmitter=n}return e.prototype.startWatching=function(){var e=this,t=new r.OutOfProcessWin32FolderWatcher(this.basePath,this.ignored,this.errorLogger,function(t){return e.onRawFileEvents(t)},this.verboseLogging);return function(){return t.dispose()}},e.prototype.onRawFileEvents=function(e){e.length>0&&this.eventEmitter.emit(n.EventType.FILE_CHANGES,i.toFileChangesEvent(e))},e}();t.FileWatcher=o}),define("vs/workbench/services/files/node/fileService",["require","exports","path","fs","os","crypto","assert","iconv-lite","vs/platform/files/common/files","vs/base/common/strings","vs/base/common/arrays","vs/base/common/mime","vs/base/common/paths","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/objects","vs/base/node/extfs","vs/base/common/async","vs/base/common/uri","vs/nls!vs/workbench/services/files/node/fileService","vs/base/node/pfs","vs/base/node/encoding","vs/base/node/mime","vs/base/node/flow","vs/workbench/services/files/node/watcher/unix/watcherService","vs/workbench/services/files/node/watcher/win32/watcherService","vs/workbench/services/files/node/watcher/common"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I){function k(e,t){var n,i;return"number"==typeof t?(n=e,i=t):(n=e.size,i=e.mtime.getTime()),'"'+o.createHash("sha1").update(String(n)+String(i)).digest("hex")+'"'}var x=function(){function e(t,i,o){if(this.serviceId=c.IFileService,this.basePath=t?n.normalize(t):void 0,this.basePath&&0===this.basePath.indexOf("\\\\")&&u.endsWith(this.basePath,n.sep)&&(this.basePath=u.rtrim(this.basePath,n.sep)),this.basePath&&!n.isAbsolute(t))throw new Error("basePath has to be an absolute path");this.options=o||Object.create(null),this.eventEmitter=i,this.tmpPath=this.options.tmpDir||r.tmpdir(),this.options&&!this.options.errorLogger&&(this.options.errorLogger=console.error),
this.basePath&&!this.options.disableWatcher&&("win32"===process.platform?this.setupWin32WorkspaceWatching():this.setupUnixWorkspaceWatching()),this.activeFileChangesWatchers=Object.create(null),this.fileChangesWatchDelayer=new g.ThrottledDelayer(e.FS_EVENT_DELAY),this.undeliveredRawFileChangesEvents=[]}return e.prototype.updateOptions=function(e){e&&m.mixin(this.options,e)},e.prototype.setupWin32WorkspaceWatching=function(){this.workspaceWatcherToDispose=new T.FileWatcher(this.basePath,this.options.watcherIgnoredPatterns,this.eventEmitter,this.options.errorLogger,this.options.verboseLogging).startWatching()},e.prototype.setupUnixWorkspaceWatching=function(){this.workspaceWatcherToDispose=new C.FileWatcher(this.basePath,this.options.watcherIgnoredPatterns,this.eventEmitter,this.options.errorLogger,this.options.verboseLogging).startWatching()},e.prototype.resolveFile=function(e,t){return this.resolve(e,t)},e.prototype.resolveContent=function(e,t){var n=this,i=this.toAbsolutePath(e);return g.nfcall(S.detectMimesFromFile,i).then(function(i){var r=-1===i.mimes.indexOf(d.MIME_BINARY);if(t&&t.acceptTextOnly&&!r)return p.Promise.wrapError({message:_.localize(0,null),fileOperationResult:c.FileOperationResult.FILE_IS_BINARY});var o=t&&t.etag,s=t&&t.encoding;return n.resolveFileContent(e,o,s||i.encoding).then(function(e){return e.mime=i.mimes.join(", "),e})},function(e){return f.isUndefinedOrNull(e.fileOperationResult)?b.exists(i).then(function(t){return t?b.stat(i).then(function(t){return t.isDirectory()?p.Promise.wrapError({message:_.localize(2,null,i),fileOperationResult:c.FileOperationResult.FILE_IS_DIRECTORY}):p.Promise.wrapError(e)}):p.Promise.wrapError({message:_.localize(1,null,i),fileOperationResult:c.FileOperationResult.FILE_NOT_FOUND})}):p.Promise.wrapError(e)})},e.prototype.resolveContents=function(t){var n=this,i=new g.Limiter(e.MAX_DEGREE_OF_PARALLEL_FS_OPS),r=[];return t.forEach(function(e){r.push(i.queue(function(){return n.resolveFileContent(e).then(function(e){return e},function(e){return p.Promise.as(null)})}))}),p.TPromise.join(r).then(function(e){return l.coalesce(e)})},e.prototype.updateContent=function(e,t,i){var r=this;void 0===i&&(i=Object.create(null));var o=this.toAbsolutePath(e);return this.checkFile(o,i).then(function(s){var c;return c=s?p.Promise.as(null):b.mkdirp(n.dirname(o)),c.then(function(){var n=r.getEncoding(e,i.charset),c=p.TPromise.as(!1);return n===E.UTF16be||n===E.UTF16le?c=p.TPromise.as(!0):s&&n===E.UTF8&&(c=g.nfcall(E.detectEncodingByBOM,o).then(function(e){return e===E.UTF8})),c.then(function(i){var s;if(i||n!==E.UTF8){var c=a.encode(t,n,{addBOM:i});s=b.writeFile(o,c)}else s=b.writeFile(o,t,E.UTF8);return s.then(function(){return r.resolve(e)})})})})},e.prototype.createFile=function(e,t){return void 0===t&&(t=""),this.updateContent(e,t)},e.prototype.createFolder=function(e){var t=this,n=this.toAbsolutePath(e);return b.mkdirp(n).then(function(){return t.resolve(e)})},e.prototype.rename=function(e,t){var i=n.join(n.dirname(e.fsPath),t);return this.moveFile(e,y["default"].file(i))},e.prototype.moveFile=function(e,t,n){return this.moveOrCopyFile(e,t,!1,n)},e.prototype.copyFile=function(e,t,n){return this.moveOrCopyFile(e,t,!0,n)},e.prototype.moveOrCopyFile=function(e,t,n,i){var r=this,o=this.toAbsolutePath(e),s=this.toAbsolutePath(t);return this.doMoveOrCopyFile(o,s,n,i).then(function(){return r.resolve(t)})},e.prototype.doMoveOrCopyFile=function(e,t,i,r){var o=this;return b.exists(t).then(function(s){var a=e.toLowerCase()===t.toLowerCase();if(s&&!a&&!r)return p.Promise.wrapError({fileOperationResult:c.FileOperationResult.FILE_MOVE_CONFLICT});var u=p.Promise.as(null);if(s&&!a){if(h.isEqualOrParent(e,t))return p.Promise.wrapError(_.localize(3,null));u=o.del(y["default"].file(t))}return u.then(function(){return b.mkdirp(n.dirname(t)).then(function(){return i?g.nfcall(v.copy,e,t):g.nfcall(v.mv,e,t)}).then(function(){return s})})})},e.prototype.importFile=function(e,t){var i=this,r=this.toAbsolutePath(e),o=y["default"].file(n.join(t.fsPath,n.basename(e.fsPath))),s=this.toAbsolutePath(o);return b.stat(r).then(function(e){return e.isDirectory()?p.Promise.wrapError(_.localize(4,null)):i.doMoveOrCopyFile(r,s,!0,!0).then(function(e){return i.resolve(o).then(function(t){return{isNew:!e,stat:t}})})})},e.prototype.del=function(e){var t=this.toAbsolutePath(e);return g.nfcall(v.del,t,this.tmpPath)},e.prototype.toAbsolutePath=function(e){var t;return t=y["default"].isURI(e)?e:e.resource,s.ok(t&&"file"===t.scheme,"Invalid resource: "+t),n.normalize(t.fsPath)},e.prototype.resolve=function(e,t){return void 0===t&&(t=Object.create(null)),this.toStatResolver(e).then(function(e){return e.resolve(t)})},e.prototype.toStatResolver=function(e){var t=this.toAbsolutePath(e);return b.stat(t).then(function(t){return new A(e,t.isDirectory(),t.mtime.getTime(),t.size)})},e.prototype.resolveFileContent=function(t,n,i){var r=this,o=this.toAbsolutePath(t);return this.resolve(t).then(function(t){return n&&n===t.etag?p.Promise.wrapError({fileOperationResult:c.FileOperationResult.FILE_NOT_MODIFIED_SINCE}):f.isNumber(t.size)&&t.size>e.MAX_FILE_SIZE?p.Promise.wrapError({fileOperationResult:c.FileOperationResult.FILE_TOO_LARGE}):b.readFile(o).then(function(e){var n=r.getEncoding(t.resource,i),o=t;return o.value=a.decode(e,n),o.charset=n,o})})},e.prototype.getEncoding=function(e,t){var n,i=this.getEncodingOverride(e);return i?n=i:t?n=t:this.options&&(n=this.options.encoding),n&&a.encodingExists(n)||(n=E.UTF8),n},e.prototype.getEncodingOverride=function(e){if(e&&this.options.encodingOverride&&this.options.encodingOverride.length)for(var t=0;t<this.options.encodingOverride.length;t++){var n=this.options.encodingOverride[t];if(0===e.toString().indexOf(n.resource.toString()+"/"))return n.encoding}return null},e.prototype.checkFile=function(e,t){return b.exists(e).then(function(n){return n?b.stat(e).then(function(i){if(i.isDirectory())return p.Promise.wrapError(new Error("Expected file is actually a directory"));if("number"==typeof t.mtime&&"string"==typeof t.etag&&t.mtime<i.mtime.getTime()&&t.etag!==k(i.size,t.mtime))return p.Promise.wrapError({message:"File Modified Since",fileOperationResult:c.FileOperationResult.FILE_MODIFIED_SINCE});var r=i.mode,o=!(128&r);return o&&!t.overwriteReadonly?p.Promise.wrapError({message:_.localize(5,null),fileOperationResult:c.FileOperationResult.FILE_READ_ONLY}):o?(r=128|r,b.chmod(e,r).then(function(){return n})):p.TPromise.as(n)}):p.TPromise.as(n)})},e.prototype.watchFileChanges=function(e){var t=this;s.ok(e&&"file"===e.scheme,"Invalid resource for watching: "+e);var n=e.fsPath,r=this.activeFileChangesWatchers[e.toString()];if(!r){try{r=i.watch(n)}catch(o){return}this.activeFileChangesWatchers[e.toString()]=r,r.on("change",function(e){"change"===e&&(t.undeliveredRawFileChangesEvents.push({type:c.FileChangeType.UPDATED,path:n}),t.fileChangesWatchDelayer.trigger(function(){var e=t.undeliveredRawFileChangesEvents;t.undeliveredRawFileChangesEvents=[];var n=I.normalize(e);return t.eventEmitter.emit(c.EventType.FILE_CHANGES,I.toFileChangesEvent(n)),p.Promise.as(null)}))})}},e.prototype.unwatchFileChanges=function(e){var t="string"==typeof e?y["default"].parse(e):e,n=this.activeFileChangesWatchers[t.toString()];n&&(n.close(),delete this.activeFileChangesWatchers[t.toString()])},e.prototype.dispose=function(){this.workspaceWatcherToDispose&&(this.workspaceWatcherToDispose(),this.workspaceWatcherToDispose=null);for(var e in this.activeFileChangesWatchers){var t=this.activeFileChangesWatchers[e];t.close()}this.activeFileChangesWatchers=Object.create(null)},e.FS_EVENT_DELAY=50,e.MAX_FILE_SIZE=52428800,e.MAX_DEGREE_OF_PARALLEL_FS_OPS=10,e}();t.FileService=x;var A=function(){function e(e,t,i,r){s.ok(e&&"file"===e.scheme,"Invalid resource: "+e),this.resource=e,this.isDirectory=t,this.mtime=i,this.name=n.basename(e.fsPath),this.mime=this.isDirectory?null:d.guessMimeTypes(e.fsPath).join(", "),this.etag=k(r,i),this.size=r}return e.prototype.resolve=function(e){var t=this,n={resource:this.resource,isDirectory:this.isDirectory,hasChildren:void 0,name:this.name,etag:this.etag,size:this.size,mtime:this.mtime,mime:this.mime};if(this.isDirectory){var i=null;return e&&e.resolveTo&&(i=[],e.resolveTo.forEach(function(e){i.push(e.fsPath)})),new p.TPromise(function(r,o){t.resolveChildren(t.resource.fsPath,i,e&&e.resolveSingleChildDescendants,function(e){e=l.coalesce(e),n.hasChildren=e&&e.length>0,n.children=e||[],r(n)})})}return p.TPromise.as(n)},e.prototype.resolveChildren=function(e,t,r,o){var s=this;v.readdir(e,function(a,c){return a?(console.error(a),o(null)):void w.parallel(c,function(o,a){var u,p=y["default"].file(n.resolve(e,o)),f=s;w.sequence(function(e){console.error(e),a(null,null)},function(){i.stat(p.fsPath,this)},function(e){var t=this;u=e,u.isDirectory()?v.readdir(p.fsPath,function(e,n){t(null,n?n.length:0)}):this(null,0)},function(e){var n={resource:p,isDirectory:u.isDirectory(),hasChildren:e>0,name:o,mtime:u.mtime.getTime(),etag:k(u),size:u.size,mime:u.isDirectory()?void 0:d.guessMimeTypes(p.fsPath).join(", ")};if(!u.isDirectory())return a(null,n);var i=!1;1===c.length&&r?i=!0:e>0&&t&&t.some(function(e){return h.isEqualOrParent(e,p.fsPath)})&&(i=!0),i?f.resolveChildren(p.fsPath,t,r,function(e){e=l.coalesce(e),n.hasChildren=e&&e.length>0,n.children=e||[],a(null,n)}):a(null,n)})},function(e,t){o(t)})})},e}();t.StatResolver=A}),define("vs/workbench/services/files/electron-browser/fileService",["require","exports","vs/nls!vs/workbench/services/files/electron-browser/fileService","vs/base/common/winjs.base","vs/base/common/paths","vs/base/common/platform","vs/base/common/bits/encoding","vs/base/common/errors","vs/base/common/strings","vs/base/common/uri","vs/base/common/timer","vs/platform/files/common/files","vs/workbench/services/files/node/fileService","vs/platform/configuration/common/configuration","remote"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=f.require("shell"),v=function(){function e(e,t,n){var i=this;this.configurationService=e,this.eventService=t,this.contextService=n,this.serviceId=d.IFileService,this.raw=this.configurationService.loadConfiguration().then(function(e){var t=[];t.push({resource:u["default"].file(i.contextService.getConfiguration().env.appSettingsHome),encoding:s.UTF8}),i.contextService.getWorkspace()&&t.push({resource:u["default"].file(r.join(i.contextService.getWorkspace().resource.fsPath,".vscode")),encoding:s.UTF8});var n=["**/.git/objects/**"];o.isLinux&&n.push("**/node_modules/**");var c={errorLogger:function(e){return a.onUnexpectedError(e)},encoding:e.files&&e.files.encoding,encodingOverride:t,watcherIgnoredPatterns:n,verboseLogging:i.contextService.getConfiguration().env.verboseLogging},l=i.contextService.getWorkspace();return new h.FileService(l?l.resource.fsPath:void 0,i.eventService,c)}),this.raw.done(function(e){i.registerListeners()},a.onUnexpectedError)}return e.prototype.registerListeners=function(){var e=this;this.configurationChangeListenerUnbind=this.configurationService.addListener(p.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationChange(t.config)})},e.prototype.onConfigurationChange=function(e){this.updateOptions(e.files)},e.prototype.updateOptions=function(e){this.raw.done(function(t){t.updateOptions(e)},a.onUnexpectedError)},e.prototype.resolveFile=function(e,t){return this.raw.then(function(n){return n.resolveFile(e,t)})},e.prototype.resolveContent=function(e,t){var n=e.toString(),i=l.start(l.Topic.WORKBENCH,c.format("Load {0}",n));return this.raw.then(function(n){return n.resolveContent(e,t).then(function(e){return i.stop(),e})})},e.prototype.resolveContents=function(e){return this.raw.then(function(t){return t.resolveContents(e)})},e.prototype.updateContent=function(e,t,n){var r=l.start(l.Topic.WORKBENCH,c.format("Save {0}",e.toString()));return this.raw.then(function(o){return o.updateContent(e,t,n).then(function(e){return r.stop(),e},function(e){return r.stop(),i.Promise.wrapError(e)})})},e.prototype.moveFile=function(e,t,n){return this.raw.then(function(i){return i.moveFile(e,t,n)})},e.prototype.copyFile=function(e,t,n){return this.raw.then(function(i){return i.copyFile(e,t,n)})},e.prototype.createFile=function(e,t){return this.raw.then(function(n){return n.createFile(e,t)})},e.prototype.createFolder=function(e){return this.raw.then(function(t){return t.createFolder(e)})},e.prototype.rename=function(e,t){return this.raw.then(function(n){return n.rename(e,t)})},e.prototype.del=function(e,t){return t?this.doMoveItemToTrash(e):this.raw.then(function(t){return t.del(e)})},e.prototype.doMoveItemToTrash=function(e){var t=this.contextService.getWorkspace();if(!t)return i.Promise.wrapError("Need a workspace to use this");var o=e.fsPath,s=m.moveItemToTrash(o);return s?i.Promise.as(null):i.TPromise.wrapError(new Error(n.localize(0,null,r.basename(o))))},e.prototype.importFile=function(e,t){return this.raw.then(function(n){return n.importFile(e,t).then(function(e){return{isNew:e&&e.isNew,stat:e&&e.stat}})})},e.prototype.watchFileChanges=function(e){e&&"file"===e.scheme&&(this.contextService.isInsideWorkspace(e)||this.raw.then(function(t){t.watchFileChanges(e)}))},e.prototype.unwatchFileChanges=function(e){this.raw.then(function(t){t.unwatchFileChanges(e)})},e.prototype.dispose=function(){this.configurationChangeListenerUnbind&&(this.configurationChangeListenerUnbind(),this.configurationChangeListenerUnbind=null),this.raw.done(function(e){return e.dispose()})},e}();t.FileService=v}),define("vs/workbench/services/history/common/history",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IHistoryService=n.createDecorator("historyService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/keybinding/browser/keybindingService",["require","exports","vs/nls!vs/workbench/services/keybinding/browser/keybindingService","vs/platform/platform","vs/platform/keybinding/browser/keybindingServiceImpl","vs/workbench/common/events","vs/platform/keybinding/common/commonKeybindingResolver","vs/platform/jsonschemas/common/jsonContributionRegistry"],function(e,t,n,i,r,o,s,a){var c=function(e){function t(t,n,i,r){var s=this;this.contextService=t,e.call(this,r),this.eventService=n,this.telemetryService=i,this.toDispose=this.eventService.addListener(o.EventType.WORKBENCH_OPTIONS_CHANGED,function(e){return s.onOptionsChanged(e)})}return __extends(t,e),t.prototype.customKeybindingsCount=function(){var e=this.contextService.getOptions();return e.globalSettings&&e.globalSettings.keybindings&&Array.isArray(e.globalSettings.keybindings)?e.globalSettings.keybindings.length:0},t.prototype._getExtraKeybindings=function(e){var t=[],n=this.contextService.getOptions();if(n.globalSettings&&n.globalSettings.keybindings){if(!e){var i=0;Array.isArray(n.globalSettings.keybindings)&&(i=n.globalSettings.keybindings.length),this.telemetryService.publicLog("customKeybindingsChanged",{keyCount:i})}Array.isArray(n.globalSettings.keybindings)&&(t=n.globalSettings.keybindings)}return t.map(function(e,t){return s.IOSupport.readKeybindingItem(e,t)})},t.prototype.onOptionsChanged=function(e){"globalSettings"===e.key&&this.updateResolver()},t.prototype.dispose=function(){this.toDispose()},t}(r.KeybindingService);t.WorkbenchKeybindingService=c;var u="local://schemas/keybindings",l={id:u,type:"array",title:n.localize(0,null),items:{required:["key"],type:"object","default":{key:"{{_}}",command:"{{_}}",when:"{{_}}"},properties:{key:{type:"string",description:n.localize(1,null)},command:{description:n.localize(2,null)},when:{type:"string",description:n.localize(3,null)}}}},d=i.Registry.as(a.Extensions.JSONContribution);d.registerSchema(u,l),d.addSchemaFileAssociation("inmemory://defaults/keybindings.json",u),d.addSchemaFileAssociation("%APP_SETTINGS_HOME%/keybindings.json",u)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/keybinding/electron-browser/pluginKeybindingService",["require","exports","vs/nls!vs/workbench/services/keybinding/electron-browser/pluginKeybindingService","vs/platform/plugins/common/pluginsRegistry","vs/platform/keybinding/common/commonKeybindingResolver","vs/workbench/services/keybinding/browser/keybindingService","vs/platform/keybinding/common/keybindingsRegistry","vs/base/common/keyCodes","native-keymap","vs/base/common/platform","vs/base/browser/keyboardEvent"],function(e,t,n,i,r,o,s,a,c,u,l){function d(e){return Array.isArray(e)}function h(e,t){return e?"string"!=typeof e.command?(t.push(n.localize(1,null,"command")),!1):"string"!=typeof e.key?(t.push(n.localize(2,null,"key")),!1):e.when&&"string"!=typeof e.when?(t.push(n.localize(3,null,"when")),!1):e.mac&&"string"!=typeof e.mac?(t.push(n.localize(4,null,"mac")),!1):e.linux&&"string"!=typeof e.linux?(t.push(n.localize(5,null,"linux")),!1):e.win&&"string"!=typeof e.win?(t.push(n.localize(6,null,"win")),!1):!0:(t.push(n.localize(0,null)),!1)}var p={type:"object","default":{command:"",key:""},properties:{command:{description:n.localize(7,null),type:"string"},key:{description:n.localize(8,null),type:"string"},mac:{description:n.localize(9,null),type:"string"},linux:{description:n.localize(10,null),type:"string"},win:{description:n.localize(11,null),type:"string"},when:{description:n.localize(12,null),type:"string"}}},f=i.PluginsRegistry.registerExtensionPoint("keybindings",{description:n.localize(13,null),oneOf:[p,{type:"array",items:p}]}),m=function(){var e,t=!1;return function(){return t||(t=!0,e=c.getKeyMap()),e}}(),v={VKEY_BACK:a.KeyCode.Backspace,VKEY_TAB:a.KeyCode.Tab,VKEY_CLEAR:a.KeyCode.Unknown,VKEY_RETURN:a.KeyCode.Enter,VKEY_SHIFT:a.KeyCode.Shift,VKEY_CONTROL:a.KeyCode.Ctrl,VKEY_MENU:a.KeyCode.Alt,VKEY_PAUSE:a.KeyCode.PauseBreak,VKEY_CAPITAL:a.KeyCode.CapsLock,VKEY_KANA:a.KeyCode.Unknown,VKEY_HANGUL:a.KeyCode.Unknown,VKEY_JUNJA:a.KeyCode.Unknown,VKEY_FINAL:a.KeyCode.Unknown,VKEY_HANJA:a.KeyCode.Unknown,VKEY_KANJI:a.KeyCode.Unknown,VKEY_ESCAPE:a.KeyCode.Escape,VKEY_CONVERT:a.KeyCode.Unknown,VKEY_NONCONVERT:a.KeyCode.Unknown,VKEY_ACCEPT:a.KeyCode.Unknown,VKEY_MODECHANGE:a.KeyCode.Unknown,VKEY_SPACE:a.KeyCode.Space,VKEY_PRIOR:a.KeyCode.PageUp,VKEY_NEXT:a.KeyCode.PageDown,VKEY_END:a.KeyCode.End,VKEY_HOME:a.KeyCode.Home,VKEY_LEFT:a.KeyCode.LeftArrow,VKEY_UP:a.KeyCode.UpArrow,VKEY_RIGHT:a.KeyCode.RightArrow,VKEY_DOWN:a.KeyCode.DownArrow,VKEY_SELECT:a.KeyCode.Unknown,VKEY_PRINT:a.KeyCode.Unknown,VKEY_EXECUTE:a.KeyCode.Unknown,VKEY_SNAPSHOT:a.KeyCode.Unknown,VKEY_INSERT:a.KeyCode.Insert,VKEY_DELETE:a.KeyCode.Delete,VKEY_HELP:a.KeyCode.Unknown,VKEY_0:a.KeyCode.KEY_0,VKEY_1:a.KeyCode.KEY_1,VKEY_2:a.KeyCode.KEY_2,VKEY_3:a.KeyCode.KEY_3,VKEY_4:a.KeyCode.KEY_4,VKEY_5:a.KeyCode.KEY_5,VKEY_6:a.KeyCode.KEY_6,VKEY_7:a.KeyCode.KEY_7,VKEY_8:a.KeyCode.KEY_8,VKEY_9:a.KeyCode.KEY_9,VKEY_A:a.KeyCode.KEY_A,VKEY_B:a.KeyCode.KEY_B,VKEY_C:a.KeyCode.KEY_C,VKEY_D:a.KeyCode.KEY_D,VKEY_E:a.KeyCode.KEY_E,VKEY_F:a.KeyCode.KEY_F,VKEY_G:a.KeyCode.KEY_G,VKEY_H:a.KeyCode.KEY_H,VKEY_I:a.KeyCode.KEY_I,VKEY_J:a.KeyCode.KEY_J,VKEY_K:a.KeyCode.KEY_K,VKEY_L:a.KeyCode.KEY_L,VKEY_M:a.KeyCode.KEY_M,VKEY_N:a.KeyCode.KEY_N,VKEY_O:a.KeyCode.KEY_O,VKEY_P:a.KeyCode.KEY_P,VKEY_Q:a.KeyCode.KEY_Q,VKEY_R:a.KeyCode.KEY_R,VKEY_S:a.KeyCode.KEY_S,VKEY_T:a.KeyCode.KEY_T,VKEY_U:a.KeyCode.KEY_U,VKEY_V:a.KeyCode.KEY_V,VKEY_W:a.KeyCode.KEY_W,VKEY_X:a.KeyCode.KEY_X,VKEY_Y:a.KeyCode.KEY_Y,VKEY_Z:a.KeyCode.KEY_Z,VKEY_LWIN:a.KeyCode.Meta,VKEY_COMMAND:a.KeyCode.Meta,VKEY_RWIN:a.KeyCode.Meta,VKEY_APPS:a.KeyCode.Unknown,VKEY_SLEEP:a.KeyCode.Unknown,VKEY_NUMPAD0:a.KeyCode.NUMPAD_0,VKEY_NUMPAD1:a.KeyCode.NUMPAD_1,VKEY_NUMPAD2:a.KeyCode.NUMPAD_2,VKEY_NUMPAD3:a.KeyCode.NUMPAD_3,VKEY_NUMPAD4:a.KeyCode.NUMPAD_4,VKEY_NUMPAD5:a.KeyCode.NUMPAD_5,VKEY_NUMPAD6:a.KeyCode.NUMPAD_6,VKEY_NUMPAD7:a.KeyCode.NUMPAD_7,VKEY_NUMPAD8:a.KeyCode.NUMPAD_8,VKEY_NUMPAD9:a.KeyCode.NUMPAD_9,VKEY_MULTIPLY:a.KeyCode.NUMPAD_MULTIPLY,VKEY_ADD:a.KeyCode.NUMPAD_ADD,VKEY_SEPARATOR:a.KeyCode.NUMPAD_SEPARATOR,VKEY_SUBTRACT:a.KeyCode.NUMPAD_SUBTRACT,VKEY_DECIMAL:a.KeyCode.NUMPAD_DECIMAL,VKEY_DIVIDE:a.KeyCode.NUMPAD_DIVIDE,VKEY_F1:a.KeyCode.F1,VKEY_F2:a.KeyCode.F2,VKEY_F3:a.KeyCode.F3,VKEY_F4:a.KeyCode.F4,VKEY_F5:a.KeyCode.F5,VKEY_F6:a.KeyCode.F6,VKEY_F7:a.KeyCode.F7,VKEY_F8:a.KeyCode.F8,VKEY_F9:a.KeyCode.F9,VKEY_F10:a.KeyCode.F10,VKEY_F11:a.KeyCode.F11,VKEY_F12:a.KeyCode.F12,VKEY_F13:a.KeyCode.F13,VKEY_F14:a.KeyCode.F14,VKEY_F15:a.KeyCode.F15,VKEY_F16:a.KeyCode.F16,VKEY_F17:a.KeyCode.F17,VKEY_F18:a.KeyCode.F18,VKEY_F19:a.KeyCode.F19,VKEY_F20:a.KeyCode.Unknown,VKEY_F21:a.KeyCode.Unknown,VKEY_F22:a.KeyCode.Unknown,VKEY_F23:a.KeyCode.Unknown,VKEY_F24:a.KeyCode.Unknown,VKEY_NUMLOCK:a.KeyCode.NumLock,VKEY_SCROLL:a.KeyCode.ScrollLock,VKEY_LSHIFT:a.KeyCode.Shift,VKEY_RSHIFT:a.KeyCode.Shift,VKEY_LCONTROL:a.KeyCode.Ctrl,VKEY_RCONTROL:a.KeyCode.Ctrl,VKEY_LMENU:a.KeyCode.Unknown,VKEY_RMENU:a.KeyCode.Unknown,VKEY_BROWSER_BACK:a.KeyCode.Unknown,VKEY_BROWSER_FORWARD:a.KeyCode.Unknown,VKEY_BROWSER_REFRESH:a.KeyCode.Unknown,VKEY_BROWSER_STOP:a.KeyCode.Unknown,VKEY_BROWSER_SEARCH:a.KeyCode.Unknown,VKEY_BROWSER_FAVORITES:a.KeyCode.Unknown,VKEY_BROWSER_HOME:a.KeyCode.Unknown,VKEY_VOLUME_MUTE:a.KeyCode.Unknown,VKEY_VOLUME_DOWN:a.KeyCode.Unknown,VKEY_VOLUME_UP:a.KeyCode.Unknown,VKEY_MEDIA_NEXT_TRACK:a.KeyCode.Unknown,VKEY_MEDIA_PREV_TRACK:a.KeyCode.Unknown,VKEY_MEDIA_STOP:a.KeyCode.Unknown,VKEY_MEDIA_PLAY_PAUSE:a.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_MAIL:a.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_MEDIA_SELECT:a.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_APP1:a.KeyCode.Unknown,VKEY_MEDIA_LAUNCH_APP2:a.KeyCode.Unknown,VKEY_OEM_1:a.KeyCode.US_SEMICOLON,VKEY_OEM_PLUS:a.KeyCode.US_EQUAL,VKEY_OEM_COMMA:a.KeyCode.US_COMMA,VKEY_OEM_MINUS:a.KeyCode.US_MINUS,VKEY_OEM_PERIOD:a.KeyCode.US_DOT,VKEY_OEM_2:a.KeyCode.US_SLASH,VKEY_OEM_3:a.KeyCode.US_BACKTICK,VKEY_OEM_4:a.KeyCode.US_OPEN_SQUARE_BRACKET,VKEY_OEM_5:a.KeyCode.US_BACKSLASH,VKEY_OEM_6:a.KeyCode.US_CLOSE_SQUARE_BRACKET,VKEY_OEM_7:a.KeyCode.US_QUOTE,VKEY_OEM_8:a.KeyCode.Unknown,VKEY_OEM_102:a.KeyCode.Unknown,VKEY_PROCESSKEY:a.KeyCode.Unknown,VKEY_PACKET:a.KeyCode.Unknown,VKEY_DBE_SBCSCHAR:a.KeyCode.Unknown,VKEY_DBE_DBCSCHAR:a.KeyCode.Unknown,VKEY_ATTN:a.KeyCode.Unknown,VKEY_CRSEL:a.KeyCode.Unknown,VKEY_EXSEL:a.KeyCode.Unknown,VKEY_EREOF:a.KeyCode.Unknown,VKEY_PLAY:a.KeyCode.Unknown,VKEY_ZOOM:a.KeyCode.Unknown,VKEY_NONAME:a.KeyCode.Unknown,VKEY_PA1:a.KeyCode.Unknown,VKEY_OEM_CLEAR:a.KeyCode.Unknown,VKEY_UNKNOWN:a.KeyCode.Unknown,VKEY_ALTGR:a.KeyCode.Unknown},g=[{"char":";",virtualKeyCode:186},{"char":":",virtualKeyCode:186},{"char":"=",virtualKeyCode:187},{"char":"+",virtualKeyCode:187},{"char":",",virtualKeyCode:188},{"char":"<",virtualKeyCode:188},{"char":"-",virtualKeyCode:189},{"char":"_",virtualKeyCode:189},{"char":".",virtualKeyCode:190},{"char":">",virtualKeyCode:190},{"char":"/",virtualKeyCode:191},{"char":"?",virtualKeyCode:191},{"char":"`",virtualKeyCode:192},{"char":"~",virtualKeyCode:192},{"char":"[",virtualKeyCode:219},{"char":"{",virtualKeyCode:219},{"char":"\\",virtualKeyCode:220},{"char":"|",virtualKeyCode:220},{"char":"]",virtualKeyCode:221},{"char":"}",virtualKeyCode:221},{"char":"'",virtualKeyCode:222},{"char":'"',virtualKeyCode:222}],y=Object.create(null);g.forEach(function(e){return y[e["char"]]=!0});var _=Object.create(null);g.forEach(function(e){return _[e.virtualKeyCode]=!0});var b=function(){var e=null;return function(){if(!e){e=Object.create(null);for(var t=m(),n=0,i=t.length;i>n;n++){var r=t[n];if(r.value&&y[r.value]){var o=v[r.key_code];o&&o!==a.KeyCode.Unknown&&(!e[r.value]||e[r.value]>o)&&(e[r.value]=o)}if(r.withShift&&y[r.withShift]){var o=v[r.key_code];o&&o!==a.KeyCode.Unknown&&(!e[r.withShift]||e[r.withShift]>o)&&(e[r.withShift]=o)}}}return e}}();l.setExtractKeyCode(function(e){if(e.charCode){var t=String.fromCharCode(e.charCode).toUpperCase();return a.KeyCode.fromString(t)}if(u.isMacintosh&&_[e.keyCode]&&"string"==typeof e.keyIdentifier){var n=e.keyIdentifier,i=n.substr(2);try{var r=parseInt(i,16),t=String.fromCharCode(r),o=b();if(o[t])return o[t]}catch(s){}}return l.lookupKeyCode(e)});var E=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,i,r),this._gotNativeKeymap=!1,this._nativeLabelProvider=null,this._eventService=n,f.setHandler(function(e){for(var t=!1,n=0;n<e.length;n++){var i=e[n];t=o._handleKeybindingsExtensionPointUser(i.description.isBuiltin,i.value,i.collector)||t}t&&o.updateResolver()})}return __extends(t,e),t.prototype.setPluginService=function(e){this._pluginService=e},t.prototype.getLabelFor=function(e){return this._ensureNativeKeymap(),e.toCustomLabel(this._nativeLabelProvider)},t.prototype.getHTMLLabelFor=function(e){return this._ensureNativeKeymap(),e.toCustomHTMLLabel(this._nativeLabelProvider)},t.prototype.getElectronAcceleratorFor=function(t){if(u.isWindows)return e.prototype.getElectronAcceleratorFor.call(this,t);var n=t._toUSLabel(),i=this.getLabelFor(t);return n!==i?null:e.prototype.getElectronAcceleratorFor.call(this,t)},t.prototype._handleKeybindingsExtensionPointUser=function(e,t,n){if(d(t)){for(var i=!1,r=0,o=t.length;o>r;r++)i=this._handleKeybinding(e,r+1,t[r],n)||i;return i}return this._handleKeybinding(e,1,t,n)},t.prototype._handleKeybinding=function(e,t,i,r){var o=[],a=!1;if(h(i,o)){var c=this._asCommandRule(e,t++,i);c&&(s.KeybindingsRegistry.registerCommandRule(c),a=!0)}return o.length>0&&r.error(n.localize(14,null,f.name,o.join("\n"))),a},t.prototype._invokeHandler=function(t,n){var i=this;return this._pluginService.activateByEvent("onCommand:"+t).then(function(r){return e.prototype._invokeHandler.call(i,t,n)})},t.prototype._asCommandRule=function(e,t,n){var i,o=n.command,a=n.when,c=n.key,u=n.mac,l=n.linux,d=n.win;i=e?s.KeybindingsRegistry.WEIGHT.builtinExtension(t):s.KeybindingsRegistry.WEIGHT.externalExtension(t);var h={id:o,context:r.IOSupport.readKeybindingContexts(a),weight:i,primary:r.IOSupport.readKeybinding(c),mac:u&&{primary:r.IOSupport.readKeybinding(u)},linux:l&&{primary:r.IOSupport.readKeybinding(l)},win:d&&{primary:r.IOSupport.readKeybinding(d)}};return h.primary||h.mac||h.linux||h.win?h:void 0},t.prototype._ensureNativeKeymap=function(){if(!this._gotNativeKeymap){this._gotNativeKeymap=!0;for(var e={VKEY_OEM_1:!0,VKEY_OEM_PLUS:!0,VKEY_OEM_COMMA:!0,VKEY_OEM_MINUS:!0,VKEY_OEM_PERIOD:!0,VKEY_OEM_2:!0,VKEY_OEM_3:!0,VKEY_OEM_4:!0,VKEY_OEM_5:!0,VKEY_OEM_6:!0,VKEY_OEM_7:!0},t=[],n=0,i=a.KeyCode.MAX_VALUE;i>n;n++)t[n]=null;for(var r=m(),o=!1,n=0,i=r.length;i>n;n++){var s=r[n];if(e[s.key_code]){var c=s.value||s.withShift;c.length>0&&(o=!0,t[v[s.key_code]]=c)}}if(o)for(var l in e)if(e.hasOwnProperty(l)){var d=v[l];t[d]=t[d]||""}u.isMacintosh?this._nativeLabelProvider=new S(t):this._nativeLabelProvider=new w(t)}},t}(o.WorkbenchKeybindingService);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=E;var S=function(e){function t(t){e.call(this),this.remaps=t}return __extends(t,e),t.prototype.getLabelForKey=function(t){return null!==this.remaps[t]?this.remaps[t]:e.prototype.getLabelForKey.call(this,t)},t}(a.MacUIKeyLabelProvider),w=function(e){function t(t){e.call(this),this.remaps=t}return __extends(t,e),t.prototype.getLabelForKey=function(t){return null!==this.remaps[t]?this.remaps[t]:e.prototype.getLabelForKey.call(this,t)},t}(a.ClassicUIKeyLabelProvider)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/lifecycle/electron-browser/lifecycleService",["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/platform/lifecycle/common/baseLifecycleService","vs/base/common/severity","ipc"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,n){e.call(this),this.messageService=t,this.windowService=n,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this,t=this.windowService.getWindowId();s.on("vscode:beforeUnload",function(n){var i=e.beforeUnload();"boolean"==typeof i?s.send(i?n.cancelChannel:n.okChannel,t):i.done(function(e){return s.send(e?n.cancelChannel:n.okChannel,t)})})},t.prototype.beforeUnload=function(){var e=this,t=this.vetoShutdown();return"boolean"==typeof t?this.handleVeto(t):t.then(function(t){return e.handleVeto(t)})},t.prototype.handleVeto=function(e){if(!e)try{this.fireShutdown()}catch(t){return i.onUnexpectedError(t),!1}return e},t.prototype.vetoShutdown=function(){for(var e=this,t=this.beforeShutdownParticipants,r=[],s=!1,a=0;a<t.length;a++){var c=t[a].beforeShutdown();if(c===!0)return!0;if(c!==!1){var u=c.then(function(e){e&&(s=!0)},function(t){s=!0,e.messageService.show(o["default"].Error,i.toErrorMessage(t))});r.push(u)}}return 0===r.length?!1:n.Promise.join(r).then(function(){return s})},t}(r.BaseLifecycleService);t.LifecycleService=a}),define("vs/workbench/services/message/browser/messageService",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/browser/ui/messagelist/messageList","vs/workbench/common/constants","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/message/common/message"],function(e,t,n,i,r,o,s,a){var c=function(){function e(t,n){this.telemetryService=t,this.serviceId=a.IMessageService,this.messagesShowingContextKey=n.createKey(e.GLOBAL_MESSAGES_SHOWING_CONTEXT,!1),this.handler=new r.MessageList(o.Identifiers.WORKBENCH_CONTAINER,t),this.messageBuffer=[],this.canShowMessages=!0,this.registerListeners()}return e.prototype.setWorkbenchServices=function(e,t){this.statusbarService=t,this.quickOpenService=e,this.quickOpenService.onShow.add(this.onQuickOpenShowing,this),this.quickOpenService.onHide.add(this.onQuickOpenHiding,this)},e.prototype.registerListeners=function(){this.handler.onMessagesShowing.add(this.onMessagesShowing,this),this.handler.onMessagesCleared.add(this.onMessagesCleared,this)},e.prototype.onMessagesShowing=function(){this.messagesShowingContextKey.set(!0)},e.prototype.onMessagesCleared=function(){this.messagesShowingContextKey.reset()},e.prototype.onQuickOpenShowing=function(){this.canShowMessages=!1,this.handler.hide()},e.prototype.onQuickOpenHiding=function(){for(this.canShowMessages=!0,this.handler.show();this.messageBuffer.length;){var e=this.messageBuffer.pop();e.disposeFn=this.show(e.severity,e.message)}},e.prototype.toBaseSeverity=function(e){switch(e){case a.Severity.Info:return r.Severity.Info;case a.Severity.Warning:return r.Severity.Warning}return r.Severity.Error},e.prototype.show=function(e,t){var r=this;if(!t)return function(){};if(Array.isArray(t)){var o=[];return t.forEach(function(t){return o.push(r.show(e,t))}),function(){return o.forEach(function(e){return e()})}}return n.isPromiseCanceledError(t)?function(){}:(i.isNumber(t.severity)&&(e=t.severity),this.doShow(e,t))},e.prototype.doShow=function(e,t){var i=this;if(!this.canShowMessages){var r={severity:e,message:t,disposeFn:function(){return i.messageBuffer.splice(i.messageBuffer.indexOf(r),1)}};return this.messageBuffer.push(r),function(){return r.disposeFn()}}return e===a.Severity.Error&&console.error(n.toErrorMessage(t,!0)),this.handler.showMessage(this.toBaseSeverity(e),t)},e.prototype.setStatusMessage=function(e,t,n){var i=this;if(void 0===t&&(t=-1),void 0===n&&(n=0),this.statusbarService){this.statusMsgDispose&&this.statusMsgDispose.dispose();var r,o,a=setTimeout(function(){r=i.statusbarService.addEntry({text:e},s.StatusbarAlignment.LEFT,Number.MIN_VALUE),a=null},n),c={dispose:function(){a&&clearTimeout(a),o&&clearTimeout(o),r&&r.dispose()}};return this.statusMsgDispose=c,"number"==typeof t&&t>0&&(o=setTimeout(function(){return c.dispose()},t)),c}return{dispose:function(){}}},e.prototype.hideAll=function(){
this.handler&&this.handler.hideMessages()},e.prototype.confirm=function(e){var t=e.message;return e.detail&&(t=t+"\n\n"+e.detail),window.confirm(t)},e.prototype.dispose=function(){this.handler.onMessagesShowing.remove(this.onMessagesShowing,this),this.handler.onMessagesCleared.remove(this.onMessagesCleared,this),this.quickOpenService&&(this.quickOpenService.onShow.remove(this.onQuickOpenShowing,this),this.quickOpenService.onHide.remove(this.onQuickOpenHiding,this))},e.GLOBAL_MESSAGES_SHOWING_CONTEXT="globalMessageVisible",e}();t.WorkbenchMessageService=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/message/electron-browser/messageService",["require","exports","vs/nls!vs/workbench/services/message/electron-browser/messageService","vs/workbench/services/message/browser/messageService"],function(e,t,n,i){var r=function(e){function t(t,n,i,r){e.call(this,i,r),this.contextService=t,this.windowService=n}return __extends(t,e),t.prototype.confirm=function(e){e.primaryButton||(e.primaryButton=n.localize(0,null)),e.secondaryButton||(e.secondaryButton=n.localize(1,null));var t={title:e.title||this.contextService.getConfiguration().env.appName,message:e.message,buttons:[e.primaryButton,e.secondaryButton],noLink:!0,cancelId:1};e.detail&&(t.detail=e.detail);var i=this.windowService.getWindow().showMessageBox(t);return 0===i?!0:!1},t}(i.WorkbenchMessageService);t.MessageService=r}),define("vs/workbench/services/part/common/partService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){!function(e){e[e.ACTIVITYBAR_PART=0]="ACTIVITYBAR_PART",e[e.SIDEBAR_PART=1]="SIDEBAR_PART",e[e.EDITOR_PART=2]="EDITOR_PART",e[e.STATUSBAR_PART=3]="STATUSBAR_PART"}(t.Parts||(t.Parts={}));t.Parts;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(t.Position||(t.Position={}));t.Position;t.IPartService=n.createDecorator("partService")}),define("vs/workbench/browser/actionRegistry",["require","exports","vs/base/common/winjs.base","vs/base/common/collections","vs/platform/platform","vs/base/common/eventSource","vs/platform/keybinding/common/keybindingsRegistry","vs/workbench/services/part/common/partService","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/base/common/severity"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e){var t=e.keybindingContext,n="undefined"==typeof e.keybindingWeight?s.KeybindingsRegistry.WEIGHT.workbenchContrib():e.keybindingWeight,i=e.keybindings,r={id:e.id,handler:p(e),weight:n,context:t,primary:i&&i.primary,secondary:i&&i.secondary,win:i&&i.win,mac:i&&i.mac,linux:i&&i.linux};s.KeybindingsRegistry.registerCommandDesc(r)}function p(e){return function(t,i){var r=t.get(c.IMessageService),o=t.get(l.IInstantiationService),s=t.get(u.ITelemetryService),h=t.get(a.IPartService);n.TPromise.as(f(o,s,h,e,i)).done(null,function(e){r.show(d["default"].Error,e)})}}function f(e,t,i,r,o){var s=e.createInstance(r.syncDescriptor);return s.label=r.label||s.label,s.enabled?(t&&t.publicLog("workbenchActionExecuted",{id:s.id,from:o.from||"keybinding"}),i.joinCreation().then(function(){try{return n.TPromise.as(s.run()).then(function(){s.dispose()},function(e){return s.dispose(),n.TPromise.wrapError(e)})}catch(e){return s.dispose(),n.TPromise.wrapError(e)}})):void s.dispose()}t.Extensions={WorkbenchActions:"workbench.contributions.actions"};var m=function(){function e(){this.workbenchActions=Object.create(null),this.mapActionIdToCategory=Object.create(null),this.onActionRegister=new o.EventSource,this.onActionUnregister=new o.EventSource}return e.prototype.fireActionRegister=function(e){this.onActionRegister.fire(e)},e.prototype.fireActionUnregister=function(e){this.onActionUnregister.fire(e)},e.prototype.registerWorkbenchAction=function(e,t){this.workbenchActions[e.id]||(this.workbenchActions[e.id]=e,h(e),this.fireActionRegister(e),t&&(this.mapActionIdToCategory[e.id]=t))},e.prototype.unregisterWorkbenchAction=function(e){if(!this.workbenchActions[e])return!1;var t=this.workbenchActions[e];return delete this.workbenchActions[e],delete this.mapActionIdToCategory[e],this.fireActionUnregister(t),!0},e.prototype.getWorkbenchAction=function(e){return this.workbenchActions[e]||null},e.prototype.getCategory=function(e){return this.mapActionIdToCategory[e]||null},e.prototype.getWorkbenchActions=function(){return i.values(this.workbenchActions)},e.prototype.setWorkbenchActions=function(e){var t=this;this.workbenchActions=Object.create(null),this.mapActionIdToCategory=Object.create(null),e.forEach(function(e){return t.registerWorkbenchAction(e)},this)},Object.defineProperty(e.prototype,"onRegisterWorkbenchAction",{get:function(){return this.onActionRegister.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUnregisterWorkbenchAction",{get:function(){return this.onActionUnregister.value},enumerable:!0,configurable:!0}),e}();r.Registry.add(t.Extensions.WorkbenchActions,new m),t.createCommandHandler=p,t.triggerAndDisposeAction=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/showPerformanceBox",["require","exports","vs/base/common/winjs.base","vs/base/browser/ui/timer/timer","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c){var u=null,l=function(e){function t(t,n,i){e.call(this,t,n,null,!0)}return __extends(t,e),t.prototype.run=function(){return null===u&&(u=new i.TimeKeeperRenderer(function(){u.destroy(),u=null})),n.Promise.as(!0)},t=__decorate([__param(2,c.INullService)],t)}(o.Action);t.ShowPerformanceBox=l});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/toggleSidebarPosition",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/toggleSidebarPosition","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/workbench/services/part/common/partService"],function(e,t,n,i,r,o,s,a,c){var u="workbench.action.toggleSidebarPosition",l=i.localize(0,null),d=function(e){function t(t,n,i){e.call(this,t,n),this.partService=i,this.enabled=!!this.partService}return __extends(t,e),t.prototype.run=function(){var e=this.partService.getSideBarPosition();return this.partService.setSideBarPosition(e===c.Position.LEFT?c.Position.RIGHT:c.Position.LEFT),n.Promise.as(null)},t=__decorate([__param(2,c.IPartService)],t)}(o.Action);t.ToggleSidebarPositionAction=d;var h=r.Registry.as(a.Extensions.WorkbenchActions);h.registerWorkbenchAction(new s.SyncActionDescriptor(d,u,l),i.localize(1,null))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/toggleSidebarVisibility",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/toggleSidebarVisibility","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/workbench/services/part/common/partService","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u){var l="workbench.action.toggleSidebarVisibility",d=i.localize(0,null),h=function(e){function t(t,n,i){e.call(this,t,n),this.partService=i,this.enabled=!!this.partService}return __extends(t,e),t.prototype.run=function(){var e=!this.partService.isSideBarHidden();return this.partService.setSideBarHidden(e),n.Promise.as(null)},t=__decorate([__param(2,c.IPartService)],t)}(o.Action);t.ToggleSidebarVisibilityAction=h;var p=r.Registry.as(a.Extensions.WorkbenchActions);p.registerWorkbenchAction(new s.SyncActionDescriptor(h,l,d,{primary:u.KeyMod.CtrlCmd|u.KeyCode.KEY_B}),i.localize(1,null))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerNavigation",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/triggerNavigation","vs/platform/platform","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/base/common/keyCodes","vs/workbench/services/history/common/history"],function(e,t,n,i,r,o,s,a,c,u){var l="workbench.action.navigateForward",d=i.localize(0,null),h=function(e){function t(t,n,i){e.call(this,t,n),this.historyService=i}return __extends(t,e),t.prototype.run=function(){return this.historyService.forward(),n.Promise.as(null)},t=__decorate([__param(2,u.IHistoryService)],t)}(o.Action);t.NavigateForwardAction=h;var p="workbench.action.navigateBack",f=i.localize(1,null),m=function(e){function t(t,n,i){e.call(this,t,n),this.historyService=i}return __extends(t,e),t.prototype.run=function(){return this.historyService.back(),n.Promise.as(null)},t=__decorate([__param(2,u.IHistoryService)],t)}(o.Action);t.NavigateBackwardsAction=m;var v=r.Registry.as(a.Extensions.WorkbenchActions);v.registerWorkbenchAction(new s.SyncActionDescriptor(h,l,d,{primary:null,win:{primary:c.KeyMod.Alt|c.KeyCode.RightArrow},mac:{primary:c.KeyMod.WinCtrl|c.KeyMod.Shift|c.KeyCode.US_MINUS},linux:{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.US_MINUS}})),v.registerWorkbenchAction(new s.SyncActionDescriptor(m,p,f,{primary:null,win:{primary:c.KeyMod.Alt|c.KeyCode.LeftArrow},mac:{primary:c.KeyMod.WinCtrl|c.KeyCode.US_MINUS},linux:{primary:c.KeyMod.CtrlCmd|c.KeyMod.Alt|c.KeyCode.US_MINUS}}))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/emptyView",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/emptyView","vs/base/common/platform","vs/base/browser/dom","vs/base/common/winjs.base","vs/base/browser/ui/button/button","vs/base/browser/builder","vs/base/browser/ui/splitview/splitview","vs/platform/platform","vs/workbench/browser/actionRegistry","vs/platform/instantiation/common/instantiation","vs/platform/selection/common/selection"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t){e.call(this,{minimumSize:48}),this.instantiationService=t}return __extends(t,e),t.prototype.renderHeader=function(e){var t=a.$("div.title").appendTo(e);a.$("span").text(n.localize(0,null)).appendTo(t)},t.prototype.renderBody=function(e){var t=this;r.addClass(e,"explorer-empty-view");var o=a.$("div.section").appendTo(e);a.$("p").text(n.localize(1,null)).appendTo(o);var c=a.$("div.section").appendTo(e),u=new s.Button(c);u.label=n.localize(2,null),u.on("click",function(){t.runWorkbenchAction(i.isMacintosh?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder")})},t.prototype.runWorkbenchAction=function(e){var t=u.Registry.as(l.Extensions.WorkbenchActions),n=t.getWorkbenchAction(e),i=this.instantiationService.createInstance(n.syncDescriptor);return i.run().done(function(){return i.dispose()})},t.prototype.create=function(){return o.Promise.as(null)},t.prototype.refresh=function(e,t,n){return o.Promise.as(null)},t.prototype.setVisible=function(e){return o.Promise.as(null)},t.prototype.focus=function(){},t.prototype.getSelection=function(){return new h.StructuredSelection([])},t.prototype.reveal=function(e,t){return o.Promise.as(null)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t=__decorate([__param(0,d.IInstantiationService)],t)}(c.CollapsibleView);t.EmptyView=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/progress/browser/progressService",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/workbench/browser/services","vs/platform/progress/common/progress"],function(e,t,n,i,r,o){var s=function(e){function t(t,n,r,s){e.call(this,t,r),this.serviceId=o.IProgressService,this.progressbar=n,this.isActive=s||i.isUndefinedOrNull(r),this.progressState={}}return __extends(t,e),t.prototype.onScopeDeactivated=function(){this.isActive=!1},t.prototype.onScopeActivated=function(){this.isActive=!0,this.progressState.done||(this.progressState.whilePromise?this.doShowWhile():this.progressState.infinite?this.progressbar.infinite().getContainer().show():(this.progressState.total&&this.progressbar.total(this.progressState.total).getContainer().show(),this.progressState.worked&&this.progressbar.worked(this.progressState.worked).getContainer().show()))},t.prototype.clearProgressState=function(){delete this.progressState.infinite,delete this.progressState.done,delete this.progressState.worked,delete this.progressState.total,delete this.progressState.whilePromise},t.prototype.show=function(e,t){var n,r,o=this;return e===!1||e===!0?n=e:r=e,this.clearProgressState(),this.progressState.infinite=n,this.progressState.total=r,this.isActive&&(i.isUndefinedOrNull(n)?i.isUndefinedOrNull(r)||(i.isUndefinedOrNull(t)?this.progressbar.total(r).getContainer().show():this.progressbar.total(r).getContainer().showDelayed(t)):i.isUndefinedOrNull(t)?this.progressbar.infinite().getContainer().show():this.progressbar.infinite().getContainer().showDelayed(t)),{total:function(e){o.progressState.infinite=!1,o.progressState.total=e,o.isActive&&o.progressbar.total(e)},worked:function(e){!o.isActive||o.progressbar.hasTotal()?(o.progressState.infinite=!1,o.progressState.worked?o.progressState.worked+=e:o.progressState.worked=e,o.isActive&&o.progressbar.worked(e)):(o.progressState.infinite=!0,delete o.progressState.worked,delete o.progressState.total,o.progressbar.infinite().getContainer().show())},done:function(){o.progressState.infinite=!1,o.progressState.done=!0,o.isActive&&o.progressbar.stop().getContainer().hide()}}},t.prototype.showWhile=function(e,t){var i=this,r=!!this.progressState.whilePromise;r?e=n.Promise.join([e,this.progressState.whilePromise]):this.clearProgressState(),this.progressState.whilePromise=e;var o=function(){i.progressState.whilePromise&&i.progressState.whilePromise!==e||(i.clearProgressState(),i.isActive&&i.progressbar.stop().getContainer().hide())};return this.doShowWhile(t),e.then(o,o)},t.prototype.doShowWhile=function(e){this.isActive&&(i.isUndefinedOrNull(e)?this.progressbar.infinite().getContainer().show():this.progressbar.infinite().getContainer().showDelayed(e))},t}(r.ScopedService);t.WorkbenchProgressService=s}),define("vs/workbench/services/quickopen/browser/quickOpenService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IQuickOpenService=n.createDecorator("quickOpenService")});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/browser/pluginHostQuickOpen",["require","exports","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r){var o=function(){function e(e){this._proxy=e.getRemotable(s)}return e.prototype.show=function(e,t){var i,r=this;i=Array.isArray(e)?n.TPromise.as(e):e;var o=this._proxy._show({autoFocus:{autoFocusFirstEntry:!0},placeHolder:t&&t.placeHolder,matchOnDescription:t&&t.matchOnDescription});return i.then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],s=void 0,a=void 0;"string"==typeof i?s=i:(s=i.label,a=i.description),t.push({label:s,description:a,handle:n})}return r._proxy._setItems(t),o.then(function(t){return"number"==typeof t?e[t]:void 0})},function(e){return r._proxy._setError(e),n.TPromise.wrapError(e)})},e.prototype.input=function(e){return this._proxy._input(e)},e=__decorate([__param(0,i.IThreadService)],e)}();t.PluginHostQuickOpen=o;var s=function(){function e(e){this._token=0,this._quickOpenService=e}return e.prototype._show=function(e){var t=this,i=++this._token;return this._contents=new n.TPromise(function(e,n){t._doSetItems=function(n){i===t._token&&e(n)},t._doSetError=function(e){i===t._token&&n(e)}}),this._quickOpenService.pick(this._contents,e).then(function(e){return e?e.handle:void 0})},e.prototype._setItems=function(e){return this._doSetItems?void this._doSetItems(e):void 0},e.prototype._setError=function(e){return this._doSetError?void this._doSetError(e):void 0},e.prototype._input=function(e){return this._quickOpenService.input(e)},e=__decorate([i.Remotable.MainContext("MainThreadQuickOpen"),__param(0,r.IQuickOpenService)],e)}();t.MainThreadQuickOpen=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/quickOpenAction",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r){var o=function(e){function t(t,n,i,r){e.call(this,t,n),this.quickOpenService=r,this.prefix=i,this.enabled=!!this.quickOpenService}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show(this.prefix),n.Promise.as(null)},t=__decorate([__param(3,r.IQuickOpenService)],t)}(i.Action);t.QuickOpenAction=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerQuickOpen",["require","exports","vs/nls!vs/workbench/browser/actions/triggerQuickOpen","vs/workbench/browser/actionRegistry","vs/platform/platform","vs/base/common/actions","vs/base/common/winjs.base","vs/platform/keybinding/common/keybindingsRegistry","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/keybinding/common/keybindingService","vs/platform/actions/common/actions","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d){function h(e){return e?{primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_E,d.KeyMod.CtrlCmd|d.KeyMod.Shift|_],mac:{primary:d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KEY_E,d.KeyMod.WinCtrl|d.KeyMod.Shift|_]}}:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E,d.KeyMod.CtrlCmd|_],mac:{primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E,d.KeyMod.WinCtrl|_]}}}var p=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i,this.order=100,this["class"]="quickopen"}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show(null),s.Promise.as(!0)},t.ID="workbench.action.quickOpen",t.LABEL=n.localize(0,null),t=__decorate([__param(2,c.IQuickOpenService)],t)}(o.Action),f=function(e){function t(t,n,i,r){e.call(this,t,n),this.quickOpenService=i,this.keybindingService=r}return __extends(t,e),t.prototype.run=function(){var e=this.keybindingService.lookupKeybindings(this.id);return this.quickOpenService.show(null,{keybindings:e}),s.Promise.as(!0)},t.ID="workbench.action.openPreviousEditor",t.LABEL=n.localize(1,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(o.Action),m=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.quickOpenService=r,this.keybindingService=o,this.navigateNext=i}return __extends(t,e),t.prototype.run=function(e){var t=this.keybindingService.lookupKeybindings(this.id);return this.quickOpenService.quickNavigate({keybindings:t},this.navigateNext),s.Promise.as(!0)},t=__decorate([__param(3,c.IQuickOpenService),__param(4,u.IKeybindingService)],t)}(o.Action),v=function(e){function t(t,n,i,r){e.call(this,t,n,!0,i,r)}return __extends(t,e),t.ID="workbench.action.quickOpenNavigateNext",t.LABEL=n.localize(2,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(m),g=function(e){function t(t,n,i,r){e.call(this,t,n,!1,i,r)}return __extends(t,e),t.ID="workbench.action.quickOpenNavigatePrevious",t.LABEL=n.localize(3,null),t=__decorate([__param(2,c.IQuickOpenService),__param(3,u.IKeybindingService)],t)}(m),y={primary:d.KeyMod.CtrlCmd|d.KeyCode.KEY_P,secondary:[d.KeyMod.CtrlCmd|d.KeyCode.KEY_E]},_=d.KeyCode.Tab,b={primary:d.KeyMod.CtrlCmd|_,secondary:[d.KeyMod.CtrlCmd|d.KeyMod.Shift|_],mac:{primary:d.KeyMod.WinCtrl|_,secondary:[d.KeyMod.WinCtrl|d.KeyMod.Shift|_]}},E=r.Registry.as(i.Extensions.WorkbenchActions);E.registerWorkbenchAction(new l.SyncActionDescriptor(p,p.ID,p.LABEL,y)),E.registerWorkbenchAction(new l.SyncActionDescriptor(f,f.ID,f.LABEL,b)),E.registerWorkbenchAction(new l.SyncActionDescriptor(v,v.ID,v.LABEL,h(!1),[{key:"inQuickOpen"}])),E.registerWorkbenchAction(new l.SyncActionDescriptor(g,g.ID,g.LABEL,h(!0),[{key:"inQuickOpen"}],a.KeybindingsRegistry.WEIGHT.workbenchContrib(50)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/quickopen",["require","exports","vs/nls!vs/workbench/browser/quickopen","vs/base/common/winjs.base","vs/base/common/filters","vs/base/common/arrays","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/platform/platform","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/common/editor","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=function(){function e(){}return e.prototype.getResults=function(e){return i.TPromise.as(null)},e.prototype.getClass=function(){return null},e.prototype.canRun=function(){return!0},e.prototype.getAutoFocus=function(e){return{}},e.prototype.onClose=function(e){},e.prototype.getGroupLabel=function(){return null},e.prototype.getEmptyLabel=function(e){return e.length>0?n.localize(0,null):n.localize(1,null)},e}();t.QuickOpenHandler=m;var v=function(e){function t(t,n,i,r,o){void 0===o&&(o=!1),e.call(this,t,n),this.prefix=i,this.id=t+n,this.instantProgress=o,a.isString(r)?this.description=r:this.helpEntries=r}return __extends(t,e),t.prototype.getId=function(){return this.id},t}(f.AsyncDescriptor);t.QuickOpenHandlerDescriptor=v,t.Extensions={Quickopen:"workbench.contributions.quickopen"};var g=function(){function e(){this.handlers=[],this.defaultHandlers=[]}return e.prototype.registerQuickOpenHandler=function(e){this.handlers.push(e),this.handlers.sort(function(e,t){return t.prefix.length-e.prefix.length})},e.prototype.registerDefaultQuickOpenHandler=function(e){this.defaultHandlers.push(e)},e.prototype.getQuickOpenHandlers=function(){return this.handlers.slice(0)},e.prototype.getQuickOpenHandler=function(e){return e?o.first(this.handlers,function(t){return s.startsWith(e,t.prefix)},null):null},e.prototype.getDefaultQuickOpenHandlers=function(){return this.defaultHandlers},e}();u.Registry.add(t.Extensions.Quickopen,new g);var y=function(e){function t(t){e.call(this),this._editorService=t}return __extends(t,e),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),t.prototype.getInput=function(){return null},t.prototype.getOptions=function(){return null},t.prototype.run=function(e,t){if(e===l.Mode.OPEN){var n=t.event,i=n&&(n.ctrlKey||n.metaKey||n.payload&&n.payload.originalEvent&&(n.payload.originalEvent.ctrlKey||n.payload.originalEvent.metaKey)),r=this.getInput();return r instanceof h.EditorInput?this.editorService.openEditor(r,this.getOptions(),i).done(null,c.onUnexpectedError):this.editorService.openEditor(r,i).done(null,c.onUnexpectedError),!0}return!1},t}(d.QuickOpenEntry);t.EditorQuickOpenEntry=y;var _=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getInput=function(){return null},t.prototype.getOptions=function(){return null},t}(d.QuickOpenEntryGroup);t.EditorQuickOpenEntryGroup=_;var b=function(e){function t(t,n,i,r){e.call(this,r),this.quickOpenService=t,this.prefix=n,this.command=i,this.command=i}return __extends(t,e),t.prototype.getIcon=function(){return this.command.icon||null},t.prototype.getLabel=function(){return this.command.aliases[0]},t.prototype.run=function(e,t){return e===l.Mode.PREVIEW?!1:(this.quickOpenService.show(this.prefix+" "+this.command.aliases[0]+" "),!1)},t}(d.QuickOpenEntry),E=function(e){function t(t,n){e.call(this),this.quickOpenService=t,this.prefix=n.prefix,this.commands=n.commands.map(function(e){return{regexp:new RegExp("^("+e.aliases.join("|")+")\\b\\W+"),command:e}}),this.defaultCommand=n.defaultCommand||null}return __extends(t,e),t.prototype.getResults=function(e){var t,n,i=o.first(this.commands,function(n){return!!(t=e.match(n.regexp))});return n=i?i.command.getResults(e.substr(t[0].length)):this.defaultCommand?this.defaultCommand.getResults(e):this.getCommands(e),n.then(function(e){return new d.QuickOpenModel(e)})},t.prototype.getCommands=function(e){var t=this,n=this.commands.map(function(t){return{command:t.command,highlights:r.matchesFuzzy(e,t.command.aliases[0])}}).filter(function(t){var n=t.command,i=t.highlights;return!!i||n.aliases.some(function(t){return e===t})}).map(function(e){var n=e.command,i=e.highlights;return new b(t.quickOpenService,t.prefix,n,i)});return i.TPromise.as(n)},t.prototype.getClass=function(){return null},t.prototype.canRun=function(){return!0},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t.prototype.onClose=function(e){},t.prototype.getGroupLabel=function(){return null},t.prototype.getEmptyLabel=function(e){var t,i=o.first(this.commands,function(n){return!!(t=e.match(n.regexp))});return i?i.command.getEmptyLabel(e):n.localize(2,null)},t=__decorate([__param(0,p.IQuickOpenService)],t)}(m);t.CommandQuickOpenHandler=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/triggerEditorActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/triggerEditorActions","vs/base/common/types","vs/base/common/actions","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/platform/platform","vs/workbench/common/editor","vs/workbench/browser/actionBarRegistry","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/part/common/partService","vs/platform/editor/common/editor","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){
function _(e){if(e instanceof d.QuickOpenEntryGroup){var t=e;t.getEntry()&&(e=t.getEntry())}return e instanceof h.EditorQuickOpenEntry||e instanceof h.EditorQuickOpenEntryGroup?e:null}var b="workbench.action.splitEditor",E=i.localize(0,null),S=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!t)return n.Promise.as(!0);if(!t.supportsSplitEditor())return n.Promise.as(!0);var i,o=this.editorService.getVisibleEditors(),s=o.length;switch(s){case 1:i=v.Position.CENTER;break;case 2:if(t.position===v.Position.CENTER)i=v.Position.RIGHT;else if(t.position===v.Position.LEFT&&u.getUntitledOrFileResource(t.input)){var a=o[v.Position.CENTER].input,c=new u.TextEditorOptions;return c.preserveFocus=!0,this.editorService.openEditor(t.input,c,v.Position.CENTER).then(function(){return e.editorService.openEditor(a,c,v.Position.RIGHT).then(function(){return e.editorService.focusEditor(v.Position.CENTER)})})}}return!r.isUndefinedOrNull(i)&&u.getUntitledOrFileResource(t.input)?this.editorService.openEditor(t.input,null,i):n.Promise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.SplitEditorAction=S;var w="workbench.action.cycleEditor",C=i.localize(1,null),T=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(!e)return n.Promise.as(!1);var t=this.editorService.getVisibleEditors(),i=t.length,r=(e.position+1)%i;return this.editorService.focusEditor(r)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.CycleEditorAction=T;var I="workbench.action.focusFirstEditor",k=i.localize(2,null),x=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){for(var e=this,t=this.editorService.getVisibleEditors(),i=0;i<t.length;i++){var r=t[i];if(r.position===v.Position.LEFT)return this.editorService.focusEditor(r)}for(var o=this.quickOpenService.getEditorHistory(),s=0;s<o.length;s++){var a=o[s];if(u.getUntitledOrFileResource(a))return this.editorService.openEditor(a,null,v.Position.LEFT).then(function(){a.matches(e.editorService.getActiveEditorInput())||e.quickOpenService.removeEditorHistoryEntry(a)})}return n.Promise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(o.Action);t.FocusFirstEditorAction=x;var A=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){for(var e,t=this,i=this.editorService.getVisibleEditors(),r=0;r<i.length;r++){var o=i[r];if(o.position===this.getTargetEditorSide())return this.editorService.focusEditor(o);o.position===this.getReferenceEditorSide()&&(e=o)}if(e&&e.supportsSplitEditor())return this.editorService.openEditor(e.input,null,this.getTargetEditorSide());if(e)for(var s=this.quickOpenService.getEditorHistory(),a=0;a<s.length;a++){var c=s[a];if(u.getUntitledOrFileResource(c))return this.editorService.openEditor(c,null,this.getTargetEditorSide()).then(function(){c.matches(t.editorService.getActiveEditorInput())||t.quickOpenService.removeEditorHistoryEntry(c)})}return n.Promise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(o.Action);t.BaseFocusSideEditorAction=A;var R="workbench.action.focusSecondEditor",D=i.localize(3,null),L=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.getReferenceEditorSide=function(){return v.Position.LEFT},t.prototype.getTargetEditorSide=function(){return v.Position.CENTER},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(A);t.FocusSecondEditorAction=L;var M="workbench.action.focusThirdEditor",O=i.localize(4,null),P=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.getReferenceEditorSide=function(){return v.Position.CENTER},t.prototype.getTargetEditorSide=function(){return v.Position.RIGHT},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,f.IQuickOpenService)],t)}(A);t.FocusThirdEditorAction=P;var N="workbench.action.focusLeftEditor",F=i.localize(5,null),W=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(!e)return n.Promise.as(!0);var t=v.Position.LEFT;e.position===v.Position.RIGHT&&(t=v.Position.CENTER);var i=this.editorService.getVisibleEditors();return this.editorService.focusEditor(i[t])},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.NavigateToLeftEditorAction=W;var H="workbench.action.focusRightEditor",V=i.localize(6,null),B=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.navigateActions=[],this.navigateActions[v.Position.LEFT]=r.createInstance(x,I,k),this.navigateActions[v.Position.CENTER]=r.createInstance(L,R,D),this.navigateActions[v.Position.RIGHT]=r.createInstance(P,M,O)}return __extends(t,e),t.prototype.run=function(e){var t,i=this.editorService.getActiveEditor();return i?i.position===v.Position.LEFT?t=v.Position.CENTER:i.position===v.Position.CENTER&&(t=v.Position.RIGHT):t=v.Position.LEFT,!r.isUndefinedOrNull(t)&&this.navigateActions[t]?this.navigateActions[t].run(e):n.Promise.as(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,g.IInstantiationService)],t)}(o.Action);t.NavigateToRightEditorAction=B;var K=function(e){function t(n){e.call(this,t.OPEN_TO_SIDE_ID,t.OPEN_TO_SIDE_LABEL),this.editorService=n,this["class"]="quick-open-sidebyside",this.updateEnablement()}return __extends(t,e),t.prototype.updateEnablement=function(){var e=this.editorService.getActiveEditor();this.enabled=!e||e.position!==v.Position.RIGHT},t.prototype.run=function(e){var t=_(e);return t?this.editorService.openEditor(t.getInput(),t.getOptions(),!0):n.Promise.as(!1)},t.OPEN_TO_SIDE_ID="workbench.action.openToSide",t.OPEN_TO_SIDE_LABEL=i.localize(7,null),t=__decorate([__param(0,p.IWorkbenchEditorService)],t)}(o.Action);t.OpenToSideAction=K;var U=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActions=function(e){var t=this.getEntry(e);return!!t},t.prototype.getActions=function(e){var t=[],n=this.getEntry(e);return n&&(this.openToSideActionInstance||(this.openToSideActionInstance=this.instantiationService.createInstance(K)),t.push(this.openToSideActionInstance)),t},t.prototype.getEntry=function(e){return e&&e.element?_(e.element):null},t=__decorate([__param(0,g.IInstantiationService)],t)}(l.ActionBarContributor),z=(i.localize(8,null),function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();return e?this.editorService.closeEditor(e):n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action));t.CloseEditorAction=z;var j="workbench.action.closeAllEditors",q=i.localize(9,null),G=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.closeEditors()},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.CloseAllEditorsAction=G;var Y="workbench.action.closeOtherEditors",$=i.localize(10,null),X=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.closeEditors(!0)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.CloseOtherEditorsAction=X;var Q="workbench.action.moveActiveEditorLeft",Z=i.localize(11,null),J=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();if(e&&(e.position===v.Position.CENTER||e.position===v.Position.RIGHT)){var t=e.position===v.Position.CENTER?v.Position.LEFT:v.Position.CENTER;this.editorService.moveEditor(e.position,t)}return n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.MoveEditorLeftAction=J;var ee="workbench.action.moveActiveEditorRight",te=i.localize(12,null),ne=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getVisibleEditors(),t=this.editorService.getActiveEditor();if(2===e.length&&t.position===v.Position.LEFT||3===e.length&&t.position!==v.Position.RIGHT){var i=t.position===v.Position.LEFT?v.Position.CENTER:v.Position.RIGHT;this.editorService.moveEditor(t.position,i)}return n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.MoveEditorRightAction=ne;var ie="workbench.action.minimizeOtherEditors",re=i.localize(13,null),oe=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.arrangeEditors(p.EditorArrangement.MINIMIZE_OTHERS),n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.MinimizeOtherEditorsAction=oe;var se="workbench.action.evenEditorWidths",ae=i.localize(14,null),ce=function(e){function t(t,n,i){e.call(this,t,n),this.editorService=i}return __extends(t,e),t.prototype.run=function(){return this.editorService.arrangeEditors(p.EditorArrangement.EVEN_WIDTH),n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(o.Action);t.EvenEditorWidthsAction=ce;var ue="workbench.action.maximizeEditor",le=i.localize(15,null),de=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.partService=r}return __extends(t,e),t.prototype.run=function(){return this.editorService.getActiveEditor()&&(this.editorService.arrangeEditors(p.EditorArrangement.MINIMIZE_OTHERS),this.partService.setSideBarHidden(!0)),n.Promise.as(!1)},t=__decorate([__param(2,p.IWorkbenchEditorService),__param(3,m.IPartService)],t)}(o.Action);t.MaximizeEditorAction=de;var he=c.Registry.as(l.Extensions.Actionbar);he.registerActionBarContributor(l.Scope.VIEWER,U);var pe=i.localize(16,null),fe=c.Registry.as(a.Extensions.WorkbenchActions);fe.registerWorkbenchAction(new s.SyncActionDescriptor(G,j,q),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(X,Y,$),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(S,b,E,{primary:y.KeyMod.CtrlCmd|y.KeyCode.US_BACKSLASH}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(T,w,C,{primary:y.KeyMod.CtrlCmd|y.KeyCode.US_BACKTICK,mac:{primary:null}}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(x,I,k,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_1}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(L,R,D,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_2}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(P,M,O,{primary:y.KeyMod.CtrlCmd|y.KeyCode.KEY_3}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(ce,se,ae),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(de,ue,le),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(oe,ie,re),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(J,Q,Z,{primary:y.KeyMod.chord(y.KeyMod.CtrlCmd|y.KeyCode.KEY_K,y.KeyCode.LeftArrow)}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(ne,ee,te,{primary:y.KeyMod.chord(y.KeyMod.CtrlCmd|y.KeyCode.KEY_K,y.KeyCode.RightArrow)}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(W,N,F,{primary:y.KeyMod.CtrlCmd|y.KeyMod.Alt|y.KeyCode.LeftArrow,linux:{primary:y.KeyMod.CtrlCmd|y.KeyMod.Shift|y.KeyMod.Alt|y.KeyCode.LeftArrow}}),pe),fe.registerWorkbenchAction(new s.SyncActionDescriptor(B,H,V,{primary:y.KeyMod.CtrlCmd|y.KeyMod.Alt|y.KeyCode.RightArrow,linux:{primary:y.KeyMod.CtrlCmd|y.KeyMod.Shift|y.KeyMod.Alt|y.KeyCode.RightArrow}}),pe)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitQuickOpen",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitQuickOpen","vs/base/common/filters","vs/base/common/winjs.base","vs/base/common/severity","vs/workbench/parts/git/common/git","vs/workbench/browser/quickopen","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/message/common/message"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=s.IGitService,p=function(e){function t(t,n,i,r){e.call(this,r),this.gitService=t,this.messageService=n,this.head=i}return __extends(t,e),t.prototype.getIcon=function(){return"git"},t.prototype.getLabel=function(){return this.head.name},t.prototype.getDescription=function(){return""},t.prototype.run=function(e,t){return e===c.Mode.PREVIEW?!1:!0},t}(u.QuickOpenEntry),f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(0,null,this.head.commit.substr(0,8))},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.checkout(this.head.name).done(null,function(e){return n.messageService.show(o["default"].Error,e)}),!0)},t}(p),m=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(1,null,this.head.commit.substr(0,8))},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.checkout(this.head.name).done(null,function(e){return n.messageService.show(o["default"].Error,e)}),!0)},t}(p),v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getDescription=function(){return n.localize(2,null,this.head.name)},t}(p),g=function(e){function t(t,n,i){e.call(this,[{start:0,end:i.length}]),this.gitService=t,this.messageService=n,this.name=i}return __extends(t,e),t.prototype.getIcon=function(){return"git"},t.prototype.getLabel=function(){return this.name},t.prototype.getDescription=function(){return n.localize(3,null,this.name)},t.prototype.run=function(e,t){var n=this;return e===c.Mode.PREVIEW?!1:(this.gitService.branch(this.name,!0).done(null,function(e){return n.messageService.show(o["default"].Error,e)}),!0)},t}(u.QuickOpenEntry),y=function(){function e(e,t){this.gitService=e,this.messageService=t,this.aliases=["checkout","co"],this.icon="git"}return e.prototype.getResults=function(e){var t=this;e=e.trim();var n=this.gitService.getModel(),o=n.getHEAD(),a=n.getHeads().map(function(t){return{head:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),c=a.filter(function(e){var t=e.head;return t.name!==o.name}).map(function(e){var n=e.head,i=e.highlights;return new f(t.gitService,t.messageService,n,i)}),l=n.getTags().map(function(t){return{tag:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),d=l.filter(function(e){var t=e.tag;return t.name!==o.name}).map(function(e){var n=e.tag,i=e.highlights;return new m(t.gitService,t.messageService,n,i)}),h=c.concat(d).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel())});h.length>0&&(h[0]=new u.QuickOpenEntryGroup(h[0],"checkout",!1));var p=a.filter(function(t){var n=t.head;return n.name===e}),y=p.filter(function(e){var t=e.head;return t.name===o.name});if(y.length>0)h.unshift(new v(this.gitService,this.messageService,y[0].head,y[0].highlights));else if(0===p.length&&s.isValidBranchName(e)){var _=new g(this.gitService,this.messageService,e);h.push(new u.QuickOpenEntryGroup(_,"branch",!1))}return r.TPromise.as(h)},e.prototype.getEmptyLabel=function(e){return n.localize(4,null)},e}(),_=function(){function e(e,t){this.gitService=e,this.messageService=t,this.aliases=["branch"],this.icon="git"}return e.prototype.getResults=function(e){if(e=e.trim(),!s.isValidBranchName(e))return r.TPromise.as([]);var t=this.gitService.getModel(),n=t.getHEAD(),o=t.getHeads().map(function(t){return{head:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}),a=o.filter(function(t){var n=t.head;return n.name===e}),c=a.filter(function(e){var t=e.head;return t.name===n.name});if(c.length>0)return r.TPromise.as([new v(this.gitService,this.messageService,c[0].head,c[0].highlights)]);if(a.length>0)return r.TPromise.as([new f(this.gitService,this.messageService,a[0].head,a[0].highlights)]);var l=new g(this.gitService,this.messageService,e);return r.TPromise.as([new u.QuickOpenEntryGroup(l,"branch",!1)])},e.prototype.getEmptyLabel=function(e){return n.localize(5,null)},e}(),b=function(e){function t(t,n,i){e.call(this,t,{prefix:"git",commands:[new y(n,i),new _(n,i)]})}return __extends(t,e),t=__decorate([__param(0,l.IQuickOpenService),__param(1,h),__param(2,d.IMessageService)],t)}(a.CommandQuickOpenHandler);t.CommandQuickOpenHandler=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/commandsHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/commandsHandler","vs/base/common/arrays","vs/base/common/types","vs/base/common/strings","vs/base/common/errors","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/platform/platform","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/base/common/filters","vs/editor/common/editorAction","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybindingService","vs/workbench/services/quickopen/browser/quickOpenService","vs/css!./media/commandsHandler"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S){t.ALL_COMMANDS_PREFIX=">",t.EDITOR_COMMANDS_PREFIX="$";var w=function(e){function n(n,i,r){e.call(this,n,i,t.ALL_COMMANDS_PREFIX,r)}return __extends(n,e),n.ID="workbench.action.showCommands",n.LABEL=i.localize(0,null),n=__decorate([__param(2,S.IQuickOpenService)],n)}(f.QuickOpenAction);t.ShowAllCommandsAction=w;var C=function(e){function t(t,n,i,r,o){e.call(this),this.messageService=r,this.telemetryService=o,this.key=t,this.description=n,this.setHighlights(i)}return __extends(t,e),t.prototype.getLabel=function(){return this.description},t.prototype.getGroupLabel=function(){return this.key},t.prototype.onError=function(e){var t=e?a.toErrorMessage(e):i.localize(1,null,this.description);this.messageService.show(_.Severity.Error,t)},t.prototype.runAction=function(e){var t=this;n.Promise.timeout(50).done(function(){if(e&&e.enabled)try{t.telemetryService.publicLog("workbenchActionExecuted",{id:e.id,from:"quick open"}),(e.run()||n.Promise.as(null)).done(function(){e.dispose()},function(e){return t.onError(e)})}catch(r){t.onError(r)}else t.messageService.show(_.Severity.Info,i.localize(2,null,t.getLabel()))},function(e){return t.onError(e)})},t=__decorate([__param(3,_.IMessageService),__param(4,b.ITelemetryService)],t)}(u.QuickOpenEntryGroup),T=function(e){function t(t,n,i,r,o,s,a,c){e.call(this,t,n,i,a,c),this.editorService=o,this.instantiationService=s,this.actionDescriptor=r}return __extends(t,e),t.prototype.run=function(e,t){if(e===c.Mode.OPEN){var n=this.instantiationService.createInstance(this.actionDescriptor.syncDescriptor);return this.runAction(n),!0}return!1},t=__decorate([__param(4,g.IWorkbenchEditorService),__param(5,y.IInstantiationService),__param(6,_.IMessageService),__param(7,b.ITelemetryService)],t)}(C),I=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n,i,s,a),this.editorService=o,this.action=r}return __extends(t,e),t.prototype.run=function(e,t){return e===c.Mode.OPEN?(this.runAction(this.action),!0):!1},t=__decorate([__param(4,g.IWorkbenchEditorService),__param(5,_.IMessageService),__param(6,b.ITelemetryService)],t)}(C),k=function(e){function t(t,n,i,r,o,s){e.call(this,t,n,i,o,s),this.action=r}return __extends(t,e),t.prototype.run=function(e,t){return e===c.Mode.OPEN?(this.runAction(this.action),!0):!1},t=__decorate([__param(4,_.IMessageService),__param(5,b.ITelemetryService)],t)}(C),x=function(e){function t(t,n,i,r,o){e.call(this),this.editorService=t,this.instantiationService=n,this.messageService=i,this.keybindingService=r,this.actionsService=o}return __extends(t,e),t.prototype.includeWorkbenchCommands=function(){return!0},t.prototype.getResults=function(e){e=e.trim();var t=[];if(this.includeWorkbenchCommands()){var i=h.Registry.as(d.Extensions.WorkbenchActions).getWorkbenchActions();t=this.actionDescriptorsToEntries(i,e)}var s=this.editorService.getActiveEditor(),a=s?s.getControl():null,c=[];a&&o.isFunction(a.getActions)&&(c=a.getActions());var l=this.editorActionsToEntries(c,e),p=this.actionsService.getActions(),f=this.otherActionsToEntries(p,e),m=t.concat(l,f);return m=r.distinct(m,function(e){return e.getLabel()+e.getGroupLabel()}),m=m.sort(this.sort),n.TPromise.as(new u.QuickOpenModel(m))},t.prototype.actionDescriptorsToEntries=function(e,t){for(var n=this,r=[],o=h.Registry.as(d.Extensions.WorkbenchActions),s=0;s<e.length;s++){var a=e[s],c=this.keybindingService.lookupKeybindings(a.id).map(function(e){return n.keybindingService.getLabelFor(e)});if(a.label){var u=a.label,l=o.getCategory(a.id);l&&(u=i.localize(3,null,l,u));var p=m.matchesFuzzy(t,u);p&&r.push(this.instantiationService.createInstance(T,c.length>0?c.join(", "):"",u,p,a))}}return r},t.prototype.editorActionsToEntries=function(e,t){for(var n=this,i=[],r=0;r<e.length;r++){var o=e[r],s=o;if(s.isSupported()){var a=this.keybindingService.lookupKeybindings(s.id).map(function(e){return n.keybindingService.getLabelFor(e)});if(o.label){var c=m.matchesFuzzy(t,o.label);c&&i.push(this.instantiationService.createInstance(I,a.length>0?a.join(", "):"",o.label,c,o))}}}return i},t.prototype.otherActionsToEntries=function(e,t){for(var n=this,i=[],r=0;r<e.length;r++){var o=e[r],s=this.keybindingService.lookupKeybindings(o.id).map(function(e){return n.keybindingService.getLabelFor(e)}),a=m.matchesFuzzy(t,o.label);a&&i.push(this.instantiationService.createInstance(k,s.join(", "),o.label,a,o))}return i},t.prototype.sort=function(e,t){var n=e.getLabel().toLowerCase(),i=t.getLabel().toLowerCase();return s.localeCompare(n,i)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:e.trim()}},t.prototype.getClass=function(){return"commands-handler"},t.prototype.getEmptyLabel=function(e){return i.localize(4,null)},t=__decorate([__param(0,g.IWorkbenchEditorService),__param(1,y.IInstantiationService),__param(2,_.IMessageService),__param(3,E.IKeybindingService),__param(4,l.IActionsService)],t)}(p.QuickOpenHandler);t.CommandsHandler=x;var A=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.includeWorkbenchCommands=function(){return!1},t}(x);t.EditorCommandsHandler=A;var R=function(e){function t(t,n,r){e.call(this,t,n,v.Behaviour.WidgetFocus|v.Behaviour.ShowInContextMenu),this.quickOpenService=r,this.label=i.localize(5,null)}return __extends(t,e),t.prototype.getGroupId=function(){return"4_tools/1_commands"},t.prototype.run=function(){return this.editor.focus(),this.quickOpenService.show("$"),e.prototype.run.call(this)},t.ID="editor.action.quickCommand",t=__decorate([__param(2,S.IQuickOpenService)],t)}(v.EditorAction);t.QuickCommandsEditorAction=R});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/helpHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/helpHandler","vs/base/browser/builder","vs/base/common/types","vs/platform/platform","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r,o,s,a,c,u,l){t.HELP_PREFIX="?";var d=function(e){function t(t,n,i,r){e.call(this),this.prefix=t,this.description=n,this.quickOpenService=i,this.openOnPreview=r}return __extends(t,e),t.prototype.getLabel=function(){return this.prefix},t.prototype.getDescription=function(){return this.description},t.prototype.getHeight=function(){return 24},t.prototype.getGroupLabel=function(){return this.groupLabel},t.prototype.setGroupLabel=function(e){this.groupLabel=e},t.prototype.showBorder=function(){return this.useBorder},t.prototype.setShowBorder=function(e){this.useBorder=e},t.prototype.render=function(e,t,n){var i=this,o=r.$(t);o.addClass("quick-open-entry"),this.showBorder()?r.$(t).addClass("results-group-separator"):r.$(t).removeClass("results-group-separator"),this.getGroupLabel()&&r.$(t).div(function(e){e.addClass("results-group"),e.attr({text:i.getGroupLabel()})});var s=o.clone().div({text:this.prefix,"class":"quick-open-help-entry-label"});return this.prefix||s.text(""),o.span({text:this.description,"class":"quick-open-entry-description"}),null},t.prototype.run=function(e,t){return(e===a.Mode.OPEN||this.openOnPreview)&&this.quickOpenService.show(this.prefix),!1},t}(c.QuickOpenEntryItem),h=function(e){function r(t){e.call(this),this.quickOpenService=t}return __extends(r,e),r.prototype.getResults=function(e){e=e.trim();var r=s.Registry.as(u.Extensions.Quickopen),a=r.getQuickOpenHandlers(),l=r.getDefaultQuickOpenHandlers();l.length>0&&a.push.apply(a,l);for(var h,p=[],f=[],m=0;m<a.length;m++){var v=a[m];if(v.prefix!==t.HELP_PREFIX)if(o.isArray(v.helpEntries))for(var g=0;g<v.helpEntries.length;g++){var y=v.helpEntries[g];0===y.prefix.indexOf(e)&&(h=new d(y.prefix,y.description,this.quickOpenService,e.length>0),y.needsEditor?f.push(h):p.push(h))}else 0===v.prefix.indexOf(e)&&(h=new d(v.prefix,v.description,this.quickOpenService,e.length>0),p.push(h))}return p.length>0&&p[0].setGroupLabel(i.localize(0,null)),f.length>0&&(f[0].setGroupLabel(i.localize(1,null)),p.length>0&&f[0].setShowBorder(!0)),n.TPromise.as(new c.QuickOpenModel(p.concat(f)))},r.prototype.getAutoFocus=function(e){return e=e.trim(),{autoFocusFirstEntry:e.length>0,autoFocusPrefixMatch:e}},r=__decorate([__param(0,l.IQuickOpenService)],r)}(u.QuickOpenHandler);t.HelpHandler=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/markersHandler",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/network","vs/base/common/errors","vs/base/common/paths","vs/base/browser/dom","vs/nls!vs/workbench/parts/quickopen/browser/markersHandler","vs/base/common/labels","vs/base/common/severity","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/platform/editor/common/editor","vs/platform/markers/common/markers","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/browser/quickOpenService","vs/css!./media/markerHandler"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){var _=function(e){function t(t,n,i){e.call(this),this._editorService=t,this._lp=new u.PathLabelProvider(n),this._marker=i}return __extends(t,e),t.prototype.getHeight=function(){return 48},t.prototype.render=function(e,t,n){a.clearNode(t);var r=[],o=this._marker,c=o.severity,u=o.message,d=o.source,h=o.resource,p=o.startLineNumber,f=o.startColumn;return r.push('<div class="inline">'),r.push(i.format('<div class="severity {0}"></div>',l["default"].toString(c).toLowerCase())),r.push("</div>"),r.push('<div class="inline entry">'),r.push("<div>"),d&&r.push(i.format('<span class="source">[{0}]&nbsp;</span>',d)),r.push(i.format('<span class="message">{0}</span>',u)),r.push("</div>"),r.push("<div>"),r.push(i.format('<span class="path"><span class="basename">{0} ({1},{2})</span><span class="dirname">{3}</span></span>',s.basename(h.fsPath),p,f,this._lp.getLabel(s.dirname(h.fsPath)))),r.push("</div>"),r.push("<div>"),t.innerHTML=r.join(""),null},t.prototype.run=function(e,t){return e!==p.Mode.OPEN?!1:(this._editorService.openEditor({resource:this._marker.resource,options:{selection:{startLineNumber:this._marker.startLineNumber,startColumn:this._marker.startColumn,endLineNumber:this._marker.endLineNumber,endColumn:this._marker.endColumn}}}).done(null,o.onUnexpectedError),!0)},t}(f.QuickOpenEntryItem),b=function(e){function t(t,n,i){e.call(this),this._markerService=t,this._editorService=n,this._contextService=i}return __extends(t,e),t.prototype.getResults=function(e){var i=this;e=e.trim();var r=this._markerService.read({take:500});return n.TPromise.as(new f.QuickOpenModel(r.sort(t._sort).filter(function(t){return i._filter(t,e)}).map(function(e){return new _(i._editorService,i._contextService,e)})))},t._sort=function(e,t){var n;return n=l["default"].compare(e.severity,t.severity),0!==n?n:e.source&&t.source&&(n=e.source.localeCompare(t.source),0!==n)?n:(n=i.localeCompare(e.resource.fsPath,t.resource.fsPath),0!==n?n:(n=e.startLineNumber-t.startLineNumber,0!==n?n:(n=e.startColumn-t.startColumn,0!==n?n:0)))},t.prototype._filter=function(e,t){if(e.resource.scheme===r.schemas.inMemory)return!1;var n=new RegExp(i.convertSimple2RegExpPattern(t),"i"),o=[e.message,e.resource.fsPath,l["default"].toString(e.severity),String(e.startLineNumber),String(e.startColumn),String(e.endLineNumber),String(e.endColumn)];return o.some(function(e){return n.test(e)})},t.prototype.getClass=function(){return"marker-handler"},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!!e}},t.prototype.getEmptyLabel=function(e){return e.length>0?c.localize(0,null):c.localize(1,null);
},t=__decorate([__param(0,v.IMarkerService),__param(1,m.IEditorService),__param(2,g.IWorkspaceContextService)],t)}(d.QuickOpenHandler);t.MarkersHandler=b;var E=function(e){function t(n,i,r){e.call(this,n,i,t.Prefix,r)}return __extends(t,e),t.Prefix="!",t.Id="workbench.action.showErrorsWarnings",t.Label=c.localize(2,null),t=__decorate([__param(2,y.IQuickOpenService)],t)}(h.QuickOpenAction);t.GotoMarkerAction=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/snippets/electron-browser/snippets.contribution",["require","exports","vs/nls!vs/workbench/parts/snippets/electron-browser/snippets.contribution","vs/base/common/winjs.base","vs/base/common/paths","vs/base/common/actions","vs/platform/actions/common/actions","vs/platform/platform","vs/workbench/browser/actionRegistry","vs/workbench/common/contributions","./snippetsTracker","vs/editor/common/modes/modesRegistry","vs/base/common/errors","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/workspace/common/workspace","vs/platform/jsonschemas/common/jsonContributionRegistry","ipc","fs"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){function y(e){return new i.TPromise(function(t,n,i){g.stat(e,function(e,n){return e?t(!1):n.isFile()?t(!0):void t(!1)})})}function _(e,t){return new i.Promise(function(n,i,r){g.writeFile(e,t,function(e){e&&i(e),n(!0)})})}var b=function(e){function t(t,n,i,r){e.call(this,t,n),this.contextService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.openFile=function(e){v.send("vscode:windowOpen",[e],!1)},t.prototype.run=function(){var e=this,t=a.Registry.as(d.Extensions.EditorModes),o=t.getRegisteredModes(),s=[];return o.forEach(function(e){var n=t.getLanguageName(e);n&&s.push({label:n,id:e})}),s=s.sort(function(e,t){return e.label.localeCompare(t.label)}),this.quickOpenService.pick(s,{placeHolder:n.localize(1,null)}).then(function(t){if(t){var o=r.join(e.contextService.getConfiguration().env.appSettingsHome,"snippets",t.id+".json");return y(o).then(function(r){if(r)return e.openFile(o),i.Promise.as(null);var s=["{","/*","	 // Place your snippets for "+t.label+" here. Each snippet is defined under a snippet name and has a prefix, body and ","	 // description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:","	 // $1, $2 for tab stops, ${id} and ${id:label} and ${1:label} for variables. Variables with the same id are connected.","	 // Example:",'	 "Print to console": {','		"prefix": "log",','		"body": [',"			\"console.log('$1');\",",'			"$2"',"		],",'		"description": "Log output to console"',"	}","*/","}"].join("\n");return _(o,s).then(function(){e.openFile(o)},function(e){h.onUnexpectedError(n.localize(2,null,o))})})}return i.Promise.as(null)})},t.ID="workbench.action.openSnippets",t.LABEL=n.localize(0,null),t=__decorate([__param(2,f.IWorkspaceContextService),__param(3,p.IQuickOpenService)],t)}(o.Action),E=n.localize(3,null),S=a.Registry.as(c.Extensions.WorkbenchActions);S.registerWorkbenchAction(new s.SyncActionDescriptor(b,b.ID,b.LABEL),E),a.Registry.as(u.Extensions.Workbench).registerWorkbenchContribution(l.SnippetsTracker);var w="local://schemas/snippets",C={id:w,"default":{"{{snippetName}}":{prefix:"{{prefix}}",body:"{{snippet}}",description:"{{description}}"}},type:"object",description:n.localize(4,null),additionalProperties:{type:"object",required:["prefix","body"],properties:{prefix:{description:n.localize(5,null),type:"string"},body:{description:n.localize(6,null),type:["string","array"],items:{type:"string"}},description:{description:n.localize(7,null),type:"string"}},additionalProperties:!1}},T=a.Registry.as(m.Extensions.JSONContribution);T.registerSchema(w,C),T.addSchemaFileAssociation("%APP_SETTINGS_HOME%/snippets/*.json",w)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/tasks/browser/taskQuickOpen",["require","exports","vs/nls!vs/workbench/parts/tasks/browser/taskQuickOpen","vs/base/common/filters","vs/workbench/browser/quickopen","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/parts/tasks/common/taskService"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,n,i){void 0===i&&(i=[]),e.call(this,i),this.taskService=t,this.task=n}return __extends(t,e),t.prototype.getLabel=function(){return this.task.name},t.prototype.run=function(e,t){return e===o.Mode.PREVIEW?!1:(this.taskService.run(this.task.id),!0)},t}(s.QuickOpenEntry),l=function(e){function t(t,n){e.call(this),this.quickOpenService=t,this.taskService=n}return __extends(t,e),t.prototype.getResults=function(e){var t=this;return this.taskService.tasks().then(function(n){return n.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(t){return{task:t,highlights:i.matchesContiguousSubString(e,t.name)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var n=e.task,i=e.highlights;return new u(t.taskService,n,i)})},function(e){return[]}).then(function(e){return new s.QuickOpenModel(e)})},t.prototype.getClass=function(){return null},t.prototype.canRun=function(){return!0},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!!e}},t.prototype.onClose=function(e){},t.prototype.getGroupLabel=function(){return null},t.prototype.getEmptyLabel=function(e){return e.length>0?n.localize(0,null):n.localize(1,null)},t=__decorate([__param(0,a.IQuickOpenService),__param(1,c.ITaskService)],t)}(r.QuickOpenHandler);t.QuickOpenHandler=l}),define("vs/workbench/services/request/node/rawHttpService",["require","exports","vs/base/common/winjs.base","vs/base/common/objects","url","vs/base/node/request","http-proxy-agent","https-proxy-agent"],function(e,t,n,i,r,o,s,a){function c(e){h=e}function u(e){var t=h;return t||("http:"===e.protocol?t=process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol&&(t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null)),t}function l(e){var t=u(e);if(t){var n=r.parse(t);switch(n.protocol){case"http:":case"https:":return"http:"===e.protocol?new s(t):new a(t)}}}function d(e){var t=r.parse(e.url);return e=i.assign({},e),e=i.assign(e,{agent:l(t)}),o.request(e).then(function(t){return new n.TPromise(function(n,i,r){var o=t.res,s=[];o.on("data",function(e){return s.push(e)}),o.on("end",function(){if(e.followRedirects>0&&(o.statusCode>=300&&o.statusCode<=303||307===o.statusCode)){var t=o.headers.location;if(t){var a={type:e.type,url:t,user:e.user,password:e.password,responseType:e.responseType,headers:e.headers,timeout:e.timeout,followRedirects:e.followRedirects-1,data:e.data};return void d(a).done(n,i,r)}}var c={responseText:s.join(""),status:o.statusCode};o.statusCode>=200&&o.statusCode<300||1223===o.statusCode?n(c):i(c)})},function(t){var i,o=r.parse(e.url),s=l(o);return i=s?"Unable to to connect to "+e.url+" through proxy "+u(o)+". Error: "+t.message:"Unable to to connect to "+e.url+". Error: "+t.message,n.TPromise.wrapError({responseText:i,status:404})})})}var h=null;t.configure=c,t.xhr=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/request/node/requestService",["require","exports","vs/base/common/winjs.base","vs/platform/configuration/common/configurationRegistry","vs/base/common/strings","vs/nls!vs/workbench/services/request/node/requestService","vs/base/common/lifecycle","vs/base/common/timer","vs/platform/platform","vs/base/common/async","vs/platform/configuration/common/configuration","vs/platform/request/common/baseRequestService","vs/workbench/services/request/node/rawHttpService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t,n,i){var r=this;e.call(this,t,i),this.configurationService=n,this.callOnDispose=[];this.callOnDispose.push(n.addListener(l.ConfigurationServiceEventTypes.UPDATED,function(e){r.rawHttpServicePromise.then(function(t){t.configure(e.config.http&&e.config.http.proxy)})}))}return __extends(t,e),Object.defineProperty(t.prototype,"rawHttpServicePromise",{get:function(){return this._rawHttpServicePromise||(this._rawHttpServicePromise=this.configurationService.loadConfiguration().then(function(e){return h.configure(e.http&&e.http.proxy),h})),this._rawHttpServicePromise},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){s.cAll(this.callOnDispose)},t.prototype.getId=function(){return"NativeRequestService"},t.prototype.makeRequest=function(t){var i=t.url;if(!i)throw new Error("IRequestService.makeRequest: Url is required.");return r.startsWith(i,"file://")?n.xhr(t).then(null,function(e){return 0===e.status&&e.responseText?e:n.Promise.wrapError({status:404,responseText:o.localize(0,null)})}):e.prototype.makeRequest.call(this,t)},t.prototype.makeCrossOriginRequest=function(e){var t=a.nullEvent;return this.rawHttpServicePromise.then(function(n){return u.always(n.xhr(e),function(e){t.data&&(t.data.status=e.status),t.stop()})})},t}(d.BaseRequestService);t.RequestService=p;var f=c.Registry.as(i.Extensions.Configuration);f.registerConfiguration({id:"http",order:9,title:o.localize(1,null),type:"object",properties:{"http.proxy":{type:"string",description:o.localize(2,null)},"http.proxyStrictSSL":{type:"boolean","default":!0,description:o.localize(3,null)}}})}),define("vs/workbench/services/search/node/fileSearch",["require","exports","fs","path","vs/base/common/filters","vs/base/common/arrays","vs/base/common/strings","vs/base/common/glob","vs/base/node/extfs","vs/base/node/flow"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e){this.config=e,this.filePattern=e.filePattern,this.matchFuzzy=e.matchFuzzy,this.excludePattern=e.excludePattern,this.includePattern=e.includePattern,this.maxResults=e.maxResults||null,this.walkedPaths=Object.create(null),this.filePattern&&this.filePattern.indexOf(i.sep)>=0&&(this.filePattern=s.replaceAll(this.filePattern,"\\","/"),this.searchInPath=!0)}return e.prototype.resetState=function(){this.walkedPaths=Object.create(null),this.resultCount=0,this.isLimitHit=!1},e.prototype.cancel=function(){this.isCanceled=!0},e.prototype.walk=function(t,n,r){var o=this;this.resetState(),u.parallel(t,function(t,r){c.readdir(t,function(s,c){if(o.isCanceled||o.isLimitHit)return r(null,null);if(!s)return o.doWalk(t,"",c,n,r);if(s.code===e.ENOTDIR&&!o.isCanceled&&!o.isLimitHit){if(a.match(o.excludePattern,t))return r(null,null);!o.isFilePatternMatch(i.basename(t),t)||o.includePattern&&!a.match(o.includePattern,t)||(o.resultCount++,o.maxResults&&o.resultCount>o.maxResults&&(o.isLimitHit=!0),o.isLimitHit||n({path:t}))}return r(null,null)})},function(e,t){r(e?e[0]:null,o.isLimitHit)})},e.prototype.doWalk=function(t,n,r,l,d){var h=this;u.parallel(r,function(o,u){if(h.isCanceled||h.isLimitHit)return u(null);var d=r;h.config.filePattern===o&&(d=[]);var p=s.trim([n,o].join("/"),"/");if(a.match(h.excludePattern,p,d))return u(null);var f=i.join(t,o);c.readdir(f,function(t,n){return t?(t.code!==e.ENOTDIR||h.isCanceled||h.isLimitHit||!h.isFilePatternMatch(o,p)||h.includePattern&&!a.match(h.includePattern,p,n)||(h.resultCount++,h.maxResults&&h.resultCount>h.maxResults&&(h.isLimitHit=!0),h.isLimitHit||l({path:f})),u(null)):h.realPathLink(f,function(e,t){return e?u(null):h.walkedPaths[t]?u(null):(h.walkedPaths[t]=!0,void h.doWalk(f,p,n,l,u))})})},function(e){return e&&(e=o.coalesce(e)),d(e&&e.length>0?e[0]:null,null)})},e.prototype.isFilePatternMatch=function(e,t){if(this.filePattern){var n=r.matchesFuzzy(this.filePattern,this.matchFuzzy||this.searchInPath?t:e,this.matchFuzzy);return!!n&&n.length>0}return!0},e.prototype.realPathLink=function(e,t){return n.lstat(e,function(i,r){return i?t(i):r.isSymbolicLink()?n.realpath(e,function(e,n){return e?t(e):t(null,n)}):t(null,e)})},e.ENOTDIR="ENOTDIR",e}();t.FileWalker=l;var d=function(){function e(e){this.rootPaths=e.rootPaths,this.walker=new l(e)}return e.prototype.search=function(e,t,n){this.walker.walk(this.rootPaths,e,n)},e.prototype.cancel=function(){this.walker.cancel()},e}();t.Engine=d}),define("vs/workbench/services/search/node/textSearch",["require","exports","vs/base/common/strings","assert","fs","iconv-lite","vs/base/common/mime","vs/base/node/mime","vs/base/node/encoding"],function(e,t,n,i,r,o,s,a,c){function u(e,t,n,i){r.open(e,"r",null,function(e,s){function a(e){p+=o.decode(h.slice(l,d+e),n.encoding),t(p,f),p="",f++,l=d+e}function u(e){r.read(s,h,0,h.length,null,function(t,i,r){if(t)return e(t);if(0===i)return e(null);l=0,d=0;var s=c.detectEncodingByBOMFromBuffer(r,i);switch(s){case c.UTF8:l=d=3,n.encoding=c.UTF8;break;case c.UTF16be:l=d=2,n.encoding=c.UTF16be;break;case c.UTF16le:l=d=2,n.encoding=c.UTF16le}for(m&&(10===r[d]?(a(1),d++):a(0),m=!1);i>d;++d)10===r[d]?a(1):13===r[d]&&(d+1===i?m=!0:10===r[d+1]?(a(2),d++):a(1));p+=o.decode(r.slice(l,i),n.encoding),u(e)})}if(e)return i(e);var l,d,h=new Buffer(n.bufferLength),p="",f=0,m=!1;u(function(e){return e?i(e):(p.length&&t(p,f),void r.close(s,function(e){i(e)}))})})}var l=function(){function e(e,t){this.total=0,this.worked=0,this.rootPaths=e.rootPaths,this.walker=t,this.contentPattern=n.createRegExp(e.contentPattern.pattern,e.contentPattern.isRegExp,e.contentPattern.isCaseSensitive,e.contentPattern.isWordMatch),this.isCanceled=!1,this.maxResults=e.maxResults,this.worked=0,this.total=0,this.fileEncoding=o.encodingExists(e.fileEncoding)?e.fileEncoding:c.UTF8}return e.prototype.cancel=function(){this.isCanceled=!0,this.walker.cancel()},e.prototype.search=function(e,t,n){var i=this,r=0,o=!1,s=function(e){i.worked+=e,e&&!i.isDone&&t({total:i.total,worked:i.worked}),i.worked===i.total&&i.walkerIsDone&&!i.isDone&&(i.isDone=!0,n(i.walkerError,o))};this.walker.walk(this.rootPaths,function(n){return i.total++,t({total:i.total,worked:i.worked}),o||i.isCanceled?s(1):void i.isBinary(n.path,function(t){if(t)return s(1);var a=null,c=function(t){return t||!a||a.isEmpty()||i.isCanceled?s(1):(e(a.serialize()),s(1))},l=function(e,t){if(!o&&!i.isCanceled)for(var s=null,c=i.contentPattern.exec(e);null!==c&&c[0].length>0&&!o&&!i.isCanceled;)r++,i.maxResults&&r>=i.maxResults&&(o=!0),null===a&&(a=new d(n.path)),null===s&&(s=new h(e,t),a.addMatch(s)),s.addMatch(c.index,c[0].length),c=i.contentPattern.exec(e)};u(n.path,l,{bufferLength:8096,encoding:i.fileEncoding},c)})},function(e,t){i.walkerIsDone=!0,i.walkerError=e,s(0)})},e.prototype.isBinary=function(e,t){var n=s.guessMimeTypes(e);return n.indexOf(s.MIME_TEXT)>=0?t(!1):n.indexOf(s.MIME_BINARY)>=0?t(!0):a.detectMimesFromFile(e,function(e,n){t(!!e||n.mimes[n.mimes.length-1]!==s.MIME_TEXT)})},e}();t.Engine=l;var d=function(){function e(e){this.path=e,this.lineMatches=[]}return e.prototype.addMatch=function(e){i.ok(e,"Missing parameter (lineMatch = "+e+")"),this.lineMatches.push(e)},e.prototype.isEmpty=function(){return 0===this.lineMatches.length},e.prototype.serialize=function(){for(var e=[],t=0;t<this.lineMatches.length;t++)e.push(this.lineMatches[t].serialize());return{path:this.path,lineMatches:e}},e}(),h=function(){function e(e,t){i.ok(e,"Missing parameter (content = "+e+")"),i.ok(!isNaN(Number(t))&&t>=0,"LineNumber must be positive"),this.preview=e.replace(/(\r|\n)*$/,""),this.lineNumber=t,this.offsetAndLengths=[]}return e.prototype.getText=function(){return this.preview},e.prototype.getLineNumber=function(){return this.lineNumber},e.prototype.addMatch=function(e,t){i.ok(!isNaN(Number(e))&&e>=0,"Offset must be positive"),i.ok(!isNaN(Number(t))&&t>=0,"Length must be positive"),this.offsetAndLengths.push([e,t])},e.prototype.serialize=function(){var e={preview:this.preview,lineNumber:this.lineNumber,offsetAndLengths:this.offsetAndLengths};return e},e}()}),define("vs/workbench/services/search/node/rawSearchService",["require","exports","fs","graceful-fs","vs/base/common/winjs.base","vs/workbench/services/search/node/fileSearch","vs/workbench/services/search/node/textSearch"],function(e,t,n,i,r,o,s){i.gracefulify(n);var a=function(){function e(){}return e.prototype.fileSearch=function(e){var t=new o.Engine(e);return this.doSearch(t)},e.prototype.textSearch=function(e){var t=new s.Engine(e,new o.FileWalker({rootPaths:e.rootPaths,includePattern:e.includePattern,excludePattern:e.excludePattern,filePattern:e.filePattern}));return this.doSearch(t)},e.prototype.doSearch=function(e){return new r.PPromise(function(t,n,i){e.search(function(e){e&&i(e)},function(e){i(e)},function(e,i){e?n(e):t({limitHit:i})})},function(){return e.cancel()})},e}();t.SearchService=a}),define("vs/workbench/services/statusbar/statusbarService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IStatusbarService=n.createDecorator("statusbarService")});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/browser/pluginHostStatusBar",["require","exports","vs/platform/thread/common/thread","vs/workbench/services/statusbar/statusbarService","vs/workbench/browser/parts/statusbar/statusbar","../common/pluginHostTypes"],function(e,t,n,i,r,o){var s=function(){function e(t,n,i){void 0===n&&(n=o.StatusBarAlignment.Left),this._id=e.ID_GEN++,this._proxy=t,this._alignment=n,this._priority=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this._command},set:function(e){this._command=e,this.update()},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._visible=!0,this.update()},e.prototype.hide=function(){this._visible=!1,this._proxy.dispose(this.id)},e.prototype.update=function(){var e=this;!this._disposed&&this._visible&&(this._timeoutHandle&&clearTimeout(this._timeoutHandle),this._timeoutHandle=setTimeout(function(){delete e._timeoutHandle,e._proxy.setEntry(e.id,e.text,e.tooltip,e.command,e.color,e._alignment===o.StatusBarAlignment.Left?r.StatusbarAlignment.LEFT:r.StatusbarAlignment.RIGHT,e._priority)},0))},e.prototype.dispose=function(){this.hide(),this._disposed=!0},e.ID_GEN=0,e}();t.PluginHostStatusBarEntry=s;var a=function(){function e(e){this._messages=[],this._item=e.createStatusBarEntry(o.StatusBarAlignment.Left,Number.MIN_VALUE)}return e.prototype.dispose=function(){this._messages.length=0,this._item.dispose()},e.prototype.setMessage=function(e){var t=this,n={message:e};return this._messages.unshift(n),this._update(),new o.Disposable(function(){var e=t._messages.indexOf(n);e>=0&&(t._messages.splice(e,1),t._update())})},e.prototype._update=function(){this._messages.length>0?(this._item.text=this._messages[0].message,this._item.show()):this._item.hide()},e}(),c=function(){function e(e){this._proxy=e.getRemotable(u),this._statusMessage=new a(this)}return e.prototype.createStatusBarEntry=function(e,t){return new s(this._proxy,e,t)},e.prototype.setStatusBarMessage=function(e,t){var n,i=this._statusMessage.setMessage(e);return"number"==typeof t?n=setTimeout(function(){return i.dispose()},t):"undefined"!=typeof t&&t.then(function(){return i.dispose()},function(){return i.dispose()}),new o.Disposable(function(){i.dispose(),clearTimeout(n)})},e=__decorate([__param(0,n.IThreadService)],e)}();t.PluginHostStatusBar=c;var u=function(){function e(e){this.statusbarService=e,this.mapIdToDisposable=Object.create(null)}return e.prototype.setEntry=function(e,t,n,i,r,o,s){this.dispose(e);var a=this.statusbarService.addEntry({text:t,tooltip:n,command:i,color:r},o,s);this.mapIdToDisposable[e]=a},e.prototype.dispose=function(e){var t=this.mapIdToDisposable[e];t&&t.dispose(),delete this.mapIdToDisposable[e]},e=__decorate([n.Remotable.MainContext("MainThreadStatusBar"),__param(0,i.IStatusbarService)],e)}();t.MainThreadStatusBar=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/statusbar/statusbarPart",["require","exports","vs/base/browser/dom","vs/base/common/types","vs/nls!vs/workbench/browser/parts/statusbar/statusbarPart","vs/base/common/errors","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/browser/builder","vs/platform/platform","vs/platform/keybinding/common/keybindingService","vs/workbench/services/editor/common/editorService","vs/workbench/browser/part","vs/workbench/browser/actionRegistry","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/workbench/services/statusbar/statusbarService","vs/css!./media/statusbarPart"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){var _=function(e){function t(t){e.call(this,t),this.serviceId=y.IStatusbarService,this.toDispose=[]}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.addEntry=function(e,n,i){void 0===i&&(i=0);for(var r=this.doCreateStatusItem(n,i),o=this.instantiationService.createInstance(b,e),s=o.render(r),a=this.statusItemsContainer.getHTMLElement(),u=this.getEntries(n),l=!1,d=0;d<u.length;d++){var h=u[d],p=c.$(h).getProperty(t.PRIORITY_PROP);if(n===f.StatusbarAlignment.LEFT&&i>p||n===f.StatusbarAlignment.RIGHT&&p>i){a.insertBefore(r,h),l=!0;break}}return l||a.appendChild(r),{dispose:function(){c.$(r).destroy(),s&&s.dispose()}}},t.prototype.getEntries=function(e){for(var n=[],i=this.statusItemsContainer.getHTMLElement(),r=i.children,o=0;o<r.length;o++){var s=r.item(o);c.$(s).getProperty(t.ALIGNMENT_PROP)===e&&n.push(s)}return n},t.prototype.createContentArea=function(e){var t=this;this.statusItemsContainer=c.$(e);var n=u.Registry.as(f.Extensions.Statusbar),i=n.items.filter(function(e){return e.alignment===f.StatusbarAlignment.LEFT}).sort(function(e,t){return t.priority-e.priority}),r=n.items.filter(function(e){return e.alignment===f.StatusbarAlignment.RIGHT}).sort(function(e,t){return e.priority-t.priority}),o=r.concat(i);return(s=this.toDispose).push.apply(s,o.map(function(e){var n=t.instantiationService.createInstance(e.syncDescriptor),i=t.doCreateStatusItem(e.alignment,e.priority),r=n.render(i);return t.statusItemsContainer.append(i),r})),this.statusItemsContainer;var s},t.prototype.doCreateStatusItem=function(e,i){void 0===i&&(i=0);var r=document.createElement("div");return n.addClass(r,"statusbar-item"),e===f.StatusbarAlignment.RIGHT?n.addClass(r,"right"):n.addClass(r,"left"),c.$(r).setProperty(t.PRIORITY_PROP,i),c.$(r).setProperty(t.ALIGNMENT_PROP,e),r},t.prototype.dispose=function(){this.toDispose=a.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.PRIORITY_PROP="priority",t.ALIGNMENT_PROP="alignment",t}(h.Part);t.StatusbarPart=_;var b=function(){function e(e,t,n,i,r,o){this.keybindingService=t,this.instantiationService=n,this.messageService=i,this.telemetryService=r,this.editorService=o,this.entry=e}return e.prototype.render=function(e){var t=this,i=[];n.addClass(e,"statusbar-entry");var r;this.entry.command?(r=document.createElement("a"),c.$(r).on("click",function(){return t.executeCommand(t.entry.command)},i)):r=document.createElement("span");for(var o="",s="",a=!1,u=this.entry.text||"",l=0,d=u.length;d>l;l++)if("$"!==u[l]||"("!==u[l+1])if(a)if(")"===u[l]){o&&(r.appendChild(document.createTextNode(o)),o="");var h=document.createElement("span");n.addClass(h,"octicon octicon-"+s),r.appendChild(h),s="",a=!1}else s+=u[l];else o+=u[l];else a=!0,l++;return o&&r.appendChild(document.createTextNode(o)),this.entry.tooltip&&c.$(r).title(this.entry.tooltip),this.entry.color&&c.$(r).color(this.entry.color),e.appendChild(r),{dispose:function(){for(;i.length;)i.pop()()}}},e.prototype.executeCommand=function(e){var t,n=this,a=this.editorService.getActiveEditor(),c=u.Registry.as(p.Extensions.WorkbenchActions).getWorkbenchAction(e);if(c&&(t=this.instantiationService.createInstance(c.syncDescriptor)),!t){var l=a?a.getControl():null;l&&i.isFunction(l.getAction)&&(t=l.getAction(e))}a&&a.focus(),t?t.enabled?(this.telemetryService.publicLog("workbenchActionExecuted",{id:t.id,from:"status bar"}),(t.run()||s.Promise.as(null)).done(function(){t.dispose()},function(e){return n.messageService.show(g.Severity.Error,o.toErrorMessage(e))})):this.messageService.show(g.Severity.Warning,r.localize(0,null,t.label||e)):this.keybindingService.executeCommand(e).done(void 0,function(e){return n.messageService.show(g.Severity.Error,o.toErrorMessage(e))})},e=__decorate([__param(1,l.IKeybindingService),__param(2,m.IInstantiationService),__param(3,g.IMessageService),__param(4,v.ITelemetryService),__param(5,d.IWorkbenchEditorService)],e)}()}),define("vs/workbench/services/themes/node/themeService",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/services/themes/node/themeService","vs/base/common/paths","vs/platform/theme/common/themes","vs/platform/plugins/common/pluginsRegistry","vs/platform/instantiation/common/instantiation","vs/base/node/plist","vs/base/node/pfs"],function(e,t,n,i,r,o,s,a,c,u){function l(e){return e.replace(/[^_\-a-zA-Z0-9]/g,"-")}function d(e){return e.styleSheetContent&&f(e.styleSheetContent),u.readFile(e.path).then(function(t){var r=c.parse(t.toString());if(r.errors&&r.errors.length)return n.TPromise.wrapError(new Error(i.localize(7,null,r.errors.join(", "))));var o=h(e.id,r.value);return e.styleSheetContent=o,f(o),!0},function(t){return n.Promise.wrapError(i.localize(8,null,e.path))})}function h(e,t){var n=[],i=t.settings,r={background:void 0,foreground:void 0,caret:void 0,invisibles:void 0,lineHighlight:void 0,selection:void 0},s=o.getBaseThemeId(e)+"."+o.getSyntaxThemeId(e);if(Array.isArray(i)&&i.forEach(function(e,t,i){if(0!==t||e.scope){var o=e.scope,a=e.settings;if(o&&a){var c=o.split(","),u=p(a);c.forEach(function(e){e=e.trim().replace(/ /g,"."),n.push(".monaco-editor."+s+" .token."+e+" { "+u+" }")})}}else r=e.settings}),r.background){var a=new _(r.background);n.push(".monaco-editor."+s+" .monaco-editor-background { background-color: "+a+"; }"),n.push(".monaco-editor."+s+" .glyph-margin { background-color: "+a+"; }"),n.push(".monaco-workbench."+s+" .monaco-editor-background { background-color: "+a+"; }")}if(r.foreground){var c=new _(r.foreground);n.push(".monaco-editor."+s+" { color: "+c+"; }"),n.push(".monaco-editor."+s+" .token { color: "+c+"; }")}if(r.selection){var u=new _(r.selection);n.push(".monaco-editor."+s+" .focused .selected-text { background-color: "+u+"; }"),n.push(".monaco-editor."+s+" .selected-text { background-color: "+u.transparent(.5)+"; }")}if(r.lineHighlight){var l=new _(r.lineHighlight);n.push(".monaco-editor."+s+" .current-line { background-color: "+l+"; }")}if(r.caret){var d=new _(r.caret);n.push(".monaco-editor."+s+" .cursor { background-color: "+d+"; }")}if(r.invisibles){var h=new _(r.invisibles);n.push(".monaco-editor."+s+" .token.whitespace { color: "+h+" !important; }")}return n.join("\n")}function p(e){var t=[];for(var n in e){var i=e[n];switch(n){case"foreground":var r=new _(i);t.push("color: "+r+";");break;case"background":break;case"fontStyle":var o=i.split(" ");o.forEach(function(e){switch(i){case"italic":t.push("font-style: italic;");break;case"bold":t.push("font-weight: bold;");break;case"underline":t.push("text-decoration: underline;")}})}}return t.join(" ")}function f(e){var t=document.head.getElementsByClassName(y);if(0===t.length){var n=document.createElement("style");n.type="text/css",n.className=y,n.innerHTML=e,document.head.appendChild(n)}else t[0].innerHTML=e}t.IThemeService=a.createDecorator("themeService");var m=o.toId(o.BaseTheme.VS_DARK),v=s.PluginsRegistry.registerExtensionPoint("themes",{description:i.localize(0,null),type:"array","default":[{label:"{{label}}",uiTheme:"vs-dark",path:"./themes/{{id}}.tmTheme."}],items:{type:"object","default":{label:"{{label}}",uiTheme:"vs-dark",path:"./themes/{{id}}.tmTheme."},properties:{label:{description:i.localize(1,null),type:"string"},uiTheme:{description:i.localize(2,null),"enum":["vs","vs-dark"]},path:{description:i.localize(3,null),type:"string"}}}}),g=function(){function e(e){var n=this;this.pluginService=e,this.serviceId=t.IThemeService,this.knownThemes=[],v.setHandler(function(e){for(var t=0;t<e.length;t++){var i=e[t];n.onThemes(i.description.extensionFolderPath,i.description.id,i.value,i.collector)}})}return e.prototype.getTheme=function(e){return this.getThemes().then(function(t){var n=t.filter(function(t){return t.id===e});return n.length>0?n[0]:null})},e.prototype.loadThemeCSS=function(e){return this.getTheme(e).then(function(e){return e?d(e):null})},e.prototype.getThemes=function(){var e=this;return this.pluginService.onReady().then(function(t){return e.knownThemes})},e.prototype.onThemes=function(e,t,n,o){var s=this;return Array.isArray(n)?void n.forEach(function(n){if(!n.path||"string"!=typeof n.path)return void o.error(i.localize(5,null,v.name,String(n.path)));var a=r.normalize(r.join(e,n.path));0!==a.indexOf(e)&&o.warn(i.localize(6,null,v.name,a,e));var c=l(t+"-"+r.normalize(n.path));s.knownThemes.push({id:(n.uiTheme||m)+" "+c,label:n.label||r.basename(n.path),
description:n.description,path:a})}):void o.error(i.localize(4,null,v.name))},e}();t.ThemeService=g;var y="contributedColorTheme",_=function(){function e(t){"string"==typeof t?this.parsed=e.parse(t):this.parsed=t,this.str=null}return e.parse=function(e){function t(e){return parseInt("0x"+e)}if("#"===e.charAt(0)&&e.length>=7){var n=t(e.substr(1,2)),i=t(e.substr(3,2)),r=t(e.substr(5,2)),o=9===e.length?t(e.substr(7,2))/255:1;return{r:n,g:i,b:r,a:o}}return{r:255,g:0,b:0,a:1}},e.prototype.toString=function(){if(!this.str){var e=this.parsed;this.str="rgba("+e.r+", "+e.g+", "+e.b+", "+ +e.a.toFixed(2)+")"}return this.str},e.prototype.transparent=function(t){var n=this.parsed;return new e({r:n.r,g:n.g,b:n.b,a:n.a*t})},e}()});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/themes/electron-browser/themes.contribution",["require","exports","vs/nls!vs/workbench/parts/themes/electron-browser/themes.contribution","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/common/constants","vs/platform/actions/common/actions","vs/platform/message/common/message","vs/platform/storage/common/storage","vs/platform/platform","vs/base/common/platform","vs/workbench/browser/actionRegistry","vs/platform/theme/common/themes","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/workspace/common/workspace","vs/workbench/services/themes/node/themeService","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n),this.contextService=i,this.quickOpenService=r,this.storageService=o,this.messageService=s,this.themeService=a}return __extends(t,e),t.prototype.run=function(){var e=this;return this.themeService.getThemes().then(function(t){var r=e.storageService.get(o.Preferences.THEME,c.StorageScope.GLOBAL,h.DEFAULT_THEME_ID),s=[];h.getBaseThemes(l.isWindows).forEach(function(e){s.push({label:h.toLabel(e),id:h.toId(e),description:n.localize(1,null)})});var u={};t.forEach(function(e){s.push({id:e.id,label:e.label,description:e.description}),t[e.id]=e}),s=s.sort(function(e,t){return e.label.localeCompare(t.label)});var d;s.forEach(function(e,t){e.id===r&&(d=t)});var p=function(t){if(t){var s=t.id;if(u[s])return e.themeService.loadThemeCSS(s).then(function(e){v.send("vscode:changeTheme",s)},function(t){e.messageService.show(a.Severity.Info,n.localize(2,null,t.message))});v.send("vscode:changeTheme",s)}else e.storageService.get(o.Preferences.THEME,c.StorageScope.GLOBAL)!==r&&v.send("vscode:changeTheme",r);return i.Promise.as(null)};return e.quickOpenService.pick(s,{placeHolder:n.localize(3,null),autoFocus:{autoFocusIndex:d}}).then(p,null,p)})},t.ID="workbench.action.selectTheme",t.LABEL=n.localize(0,null),t=__decorate([__param(2,f.IWorkspaceContextService),__param(3,p.IQuickOpenService),__param(4,c.IStorageService),__param(5,a.IMessageService),__param(6,m.IThemeService)],t)}(r.Action),y=n.localize(4,null),_=u.Registry.as(d.Extensions.WorkbenchActions);_.registerWorkbenchAction(new s.SyncActionDescriptor(g,g.ID,g.LABEL),y)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/thread/electron-browser/threadService",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/services/thread/electron-browser/threadService","vs/platform/thread/common/mainThreadService","vs/platform/plugins/common/ipcRemoteCom","vs/base/common/marshalling","vs/base/common/strings","vs/base/common/objects","vs/base/common/uri","vs/base/common/errors","vs/platform/message/common/message","vs/base/node/ports","child_process","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){t.PLUGIN_LOG_BROADCAST_CHANNEL="vscode:pluginLog",t.PLUGIN_ATTACH_BROADCAST_CHANNEL="vscode:pluginAttach";var m=!1,v=function(e){function t(t,n,i){var r=this;e.call(this,t,"vs/editor/common/worker/editorWorkerServer"),this.pluginHostProcessManager=new g(t,n,i);var s=m||t.getConfiguration().env.logPluginHostCommunication;this.remoteCom=o.create(function(e){s&&console.log("%c[Window  Plugin]%c[len: "+a.pad(e.length,5," ")+"]","color: darkgreen","color: grey",JSON.parse(e)),r.pluginHostProcessManager.postMessage(e)}),this.pluginHostProcessManager.startPluginHostProcess(function(e){s&&console.log("%c[Plugin  Window]%c[len: "+a.pad(e.length,5," ")+"]","color: darkgreen","color: grey",JSON.parse(e)),r.remoteCom.handle(e)}),this.remoteCom.registerBigHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this.pluginHostProcessManager.terminate()},t.prototype._registerAndInstantiatePluginHostActor=function(e,t){return this._getOrCreateProxyInstance(this.remoteCom,e,t)},t}(r.MainThreadService);t.MainThreadService=v;var g=function(){function r(e,t,n){this.messageService=t,this.contextService=e,this.windowService=n,this.isPluginDevelopmentHost=!!this.contextService.getConfiguration().env.pluginDevelopmentPath,this.unsentMessages=[]}return r.prototype.startPluginHostProcess=function(r){var o=this,a=this.contextService.getConfiguration(),h=!a.env.isBuilt||!!a.env.pluginDevelopmentPath,m=!!a.env.pluginTestsPath&&!a.env.debugBrkPluginHost,v={env:c.mixin(c.clone(process.env),{AMD_ENTRYPOINT:"vs/workbench/node/pluginHostProcess",PIPE_LOGGING:"true",VERBOSE_LOGGING:!0})};h&&(this.initializeTimer=setTimeout(function(){var e=a.env.debugBrkPluginHost?i.localize(0,null):i.localize(1,null);o.messageService.show(d.Severity.Warning,e)},1e4)),this.initializePluginHostProcess=new n.TPromise(function(n,c){return o.resolveDebugPort(a,function(c){c&&(v.execArgv=["--nolazy",(a.env.debugBrkPluginHost?"--debug-brk=":"--debug=")+c]),o.pluginHostProcessHandle=p.fork(u["default"].parse(e.toUrl("bootstrap")).fsPath,["--type=pluginHost"],v),a.env.pluginDevelopmentPath&&c&&o.windowService.broadcast({channel:t.PLUGIN_ATTACH_BROADCAST_CHANNEL,payload:{port:c}},a.env.pluginDevelopmentPath),o.pluginHostProcessHandle.on("message",function(e){if("ready"===e){o.initializeTimer&&window.clearTimeout(o.initializeTimer);var i=s.serialize({parentPid:process.pid,contextService:{workspace:o.contextService.getWorkspace(),configuration:o.contextService.getConfiguration(),options:o.contextService.getOptions()}});o.pluginHostProcessHandle.send(i)}else if("initialized"===e)o.unsentMessages.forEach(function(e){return o.postMessage(e)}),o.unsentMessages=[],n(o.pluginHostProcessHandle);else if(e&&"__$console"===e.type){var c=e,u=[];try{var l=JSON.parse(c.arguments);u.push.apply(u,Object.getOwnPropertyNames(l).map(function(e){return l[e]}))}catch(d){u.push(c.arguments)}var p=[];p="string"==typeof u[0]&&u[0].indexOf("%")>=0?["%c[Plugin Host]%c "+u[0],"color: blue","color: black"].concat(u.slice(1)):["%c[Plugin Host]","color: blue"].concat(u),m||console[c.severity].apply(console,p),m?f.send("vscode:log",c):h&&o.windowService.broadcast({channel:t.PLUGIN_LOG_BROADCAST_CHANNEL,payload:c},a.env.pluginDevelopmentPath)}else r(e)});var g=function(){return o.terminate()};process.once("exit",g),o.pluginHostProcessHandle.on("error",function(e){var t=l.toErrorMessage(e);t!==o.lastPluginHostError&&(o.lastPluginHostError=t,o.messageService.show(d.Severity.Error,i.localize(2,null,t)))}),o.pluginHostProcessHandle.on("exit",function(e,t){process.removeListener("exit",g),o.terminating||(o.isPluginDevelopmentHost?m?f.send("vscode:exit",e):o.windowService.getWindow().close():(o.messageService.show(d.Severity.Error,i.localize(3,null)),console.error("Plugin host terminated unexpectedly. Code: ",e," Signal: ",t)))})})},function(){return o.terminate()})},r.prototype.resolveDebugPort=function(e,t){return"number"==typeof e.env.debugPluginHostPort?h.findFreePort(e.env.debugPluginHostPort,10,function(n){return n?(n!==e.env.debugPluginHostPort&&console.warn("%c[Plugin Host] %cProvided debugging port "+e.env.debugPluginHostPort+" is not free, using "+n+" instead.","color: blue","color: black"),e.env.debugBrkPluginHost?console.warn("%c[Plugin Host] %cSTOPPED on first line for debugging on port "+n,"color: blue","color: black"):console.info("%c[Plugin Host] %cdebugger listening on port "+n,"color: blue","color: black"),t(n)):(console.warn("%c[Plugin Host] %cCould not find a free port for debugging","color: blue","color: black"),t(void 0))}):t(void 0)},r.prototype.postMessage=function(e){this.initializePluginHostProcess?this.initializePluginHostProcess.done(function(t){return t.send(e)}):this.unsentMessages.push(e)},r.prototype.terminate=function(){this.terminating=!0,this.pluginHostProcessHandle&&this.pluginHostProcessHandle.send({type:"__$terminate"})},r}()}),define("vs/workbench/services/untitled/browser/untitledEditorService",["require","exports","vs/base/common/uri","vs/base/common/events","vs/base/common/arrays","vs/workbench/browser/parts/editor/untitledEditorInput","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s){t.IUntitledEditorService=s.createDecorator("untitledEditorService");var a=function(){function e(){this.serviceId=t.IUntitledEditorService}return e.prototype.setInstantiationService=function(e){this.instantiationService=e},e.prototype.get=function(t){return e.CACHE[t.toString()]},e.prototype.getAll=function(t){var n=this;return t?r.coalesce(t.map(function(e){return n.get(e)})):Object.keys(e.CACHE).map(function(t){return e.CACHE[t]})},e.prototype.isDirty=function(e){var t=this.get(e);return t&&t.isDirty()},e.prototype.getDirty=function(){return Object.keys(e.CACHE).map(function(t){return e.CACHE[t]}).filter(function(e){return e.isDirty()}).map(function(e){return e.getResource()})},e.prototype.createOrGet=function(t,n){var i=!1;return t&&(i="file"===t.scheme,t=this.resourceToUntitled(t),i&&(e.KNOWN_ASSOCIATED_FILE_PATHS[t.toString()]=!0)),t&&e.CACHE[t.toString()]?e.CACHE[t.toString()]:this.doCreate(t,i,n)},e.prototype.doCreate=function(t,r,s){if(!t){var a=Object.keys(e.CACHE).length+1;do t=n["default"].create(o.UntitledEditorInput.SCHEMA,null,"Untitled-"+a),a++;while(Object.keys(e.CACHE).indexOf(t.toString())>=0)}var c=this.instantiationService.createInstance(o.UntitledEditorInput,t,r,s);return c.addOneTimeListener(i.EventType.DISPOSE,function(){delete e.CACHE[c.getResource().toString()],delete e.KNOWN_ASSOCIATED_FILE_PATHS[c.getResource().toString()]}),e.CACHE[t.toString()]=c,c},e.prototype.resourceToUntitled=function(e){return e.scheme===o.UntitledEditorInput.SCHEMA?e:n["default"].create(o.UntitledEditorInput.SCHEMA,null,e.fsPath)},e.prototype.hasAssociatedFilePath=function(t){return!!e.KNOWN_ASSOCIATED_FILE_PATHS[t.toString()]},e.CACHE=Object.create(null),e.KNOWN_ASSOCIATED_FILE_PATHS=Object.create(null),e}();t.UntitledEditorService=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostDocuments",["require","exports","vs/base/common/errors","vs/editor/common/services/modelService","vs/editor/common/viewModel/prefixSumComputer","vs/editor/common/editorCommon","vs/platform/thread/common/thread","vs/base/common/event","vs/base/common/uri","vs/base/common/lifecycle","vs/workbench/api/common/pluginHostTypes","vs/platform/event/common/event","vs/platform/editor/common/editor","vs/workbench/parts/files/common/files","./pluginHostTypeConverters","vs/base/common/winjs.base","vs/editor/common/model/textModelWithTokensHelpers","vs/platform/files/common/files","vs/workbench/services/untitled/browser/untitledEditorService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){function _(e,t){E[e]=t}function b(e){return E[e]}var E=Object.create(null);t.setWordDefinitionFor=_,t.getWordDefinitionFor=b;var S=function(){function e(e){this._proxy=e.getRemotable(T),this._onDidAddDocumentEventEmitter=new a.Emitter,this.onDidAddDocument=this._onDidAddDocumentEventEmitter.event,this._onDidRemoveDocumentEventEmitter=new a.Emitter,this.onDidRemoveDocument=this._onDidRemoveDocumentEventEmitter.event,this._onDidChangeDocumentEventEmitter=new a.Emitter,this.onDidChangeDocument=this._onDidChangeDocumentEventEmitter.event,this._onDidSaveDocumentEventEmitter=new a.Emitter,this.onDidSaveDocument=this._onDidSaveDocumentEventEmitter.event,this._documents=Object.create(null)}return e.prototype.getDocuments=function(){var e=[];for(var t in this._documents)e.push(this._documents[t]);return e},e.prototype.getDocument=function(e){return e?this._documents[e.toString()]||null:null},e.prototype.openDocument=function(e){var t,n=this;if("string"==typeof e)t=c["default"].file(e);else{if(!(e instanceof c["default"]))throw new Error("illegal argument - uriOrFileName");t=e}var i=this._documents[t.toString()];return i?m.TPromise.as(i):this._proxy._tryOpenDocument(t).then(function(){return n._documents[t.toString()]})},e.prototype._acceptModelAdd=function(e){var t=new C(this._proxy,e.url,e.value.lines,e.value.EOL,e.modeId,e.versionId,e.isDirty),n=t.uri.toString();if(this._documents[n])throw new Error("Document `"+n+"` already exists.");this._documents[n]=t,this._onDidAddDocumentEventEmitter.fire(t)},e.prototype._acceptModelModeChanged=function(e,t,n){var i=this._documents[e.toString()];this._onDidRemoveDocumentEventEmitter.fire(i),i._acceptLanguageId(n),this._onDidAddDocumentEventEmitter.fire(i)},e.prototype._acceptModelSaved=function(e){var t=this._documents[e.toString()];t._acceptIsDirty(!1),this._onDidSaveDocumentEventEmitter.fire(t)},e.prototype._acceptModelDirty=function(e){var t=this._documents[e.toString()];t._acceptIsDirty(!0)},e.prototype._acceptModelReverted=function(e){var t=this._documents[e.toString()];t._acceptIsDirty(!1)},e.prototype._acceptModelRemoved=function(e){var t=e.toString();if(!this._documents[t])throw new Error("Document `"+t+"` does not exist.");var n=this._documents[t];delete this._documents[t],this._onDidRemoveDocumentEventEmitter.fire(n),n.dispose()},e.prototype._acceptModelChanged=function(e,t){var n=this._documents[e.toString()];n._acceptEvents(t),this._onDidChangeDocumentEventEmitter.fire({document:n,contentChanges:t.map(function(e){return{range:f.toRange(e.range),rangeLength:e.rangeLength,text:e.text}})})},e=__decorate([s.Remotable.PluginHostContext("PluginHostModelService"),__param(0,s.IThreadService)],e)}();t.PluginHostModelService=S;var w=function(){function e(e,t,n,i,r,o){this._uri=e,this._lines=t,this._textLines=[],this._eol=n,this._languageId=i,this._versionId=r,this._isDirty=o}return e.prototype.dispose=function(){this._lines.length=0,this._textLines.length=0,this._isDirty=!1},Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileName",{get:function(){return this._uri.fsPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUntitled",{get:function(){return"file"!==this._uri.scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._versionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),e.prototype.save=function(){return Promise.reject("Not implemented")},e.prototype.getText=function(e){return e?this._getTextInRange(e):this._lines.join(this._eol)},e.prototype._getTextInRange=function(e){var t=this.validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);var n=this._eol,i=t.start.line,r=t.end.line,o=[];o.push(this._lines[i].substring(t.start.character));for(var s=i+1;r>s;s++)o.push(this._lines[s]);return o.push(this._lines[r].substring(0,t.end.character)),o.join(n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this._lines.length},enumerable:!0,configurable:!0}),e.prototype.lineAt=function(e){var t;if(e instanceof l.Position?t=e.line:"number"==typeof e&&(t=e),0>t||t>=this._lines.length)throw new Error("Illegal value "+t+" for `line`");var n=this._textLines[t];if(!n||n.lineNumber!==t||n.text!==this._lines[t]){var i=this._lines[t],r=/^(\s*)/.exec(i)[1].length,o=new l.Range(t,0,t,i.length),s=new l.Range(t,0,t+1,0);n=Object.freeze({lineNumber:t,range:o,rangeIncludingLineBreak:s,text:i,firstNonWhitespaceCharacterIndex:r,isEmptyOrWhitespace:r===i.length}),this._textLines[t]=n}return n},e.prototype.offsetAt=function(e){return e=this.validatePosition(e),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(e.line-1)+e.character},e.prototype.positionAt=function(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();var t={index:0,remainder:0};this._lineStarts.getIndexOf(e,t);var n=this._lines[t.index].length;return new l.Position(t.index,Math.min(t.remainder,n))},e.prototype._ensureLineStarts=function(){if(!this._lineStarts){for(var e=[],t=this._eol.length,n=0,i=this._lines.length;i>n;n++)e.push(this._lines[n].length+t);this._lineStarts=new r.PrefixSumComputer(e)}},e.prototype.validateRange=function(e){if(!(e instanceof l.Range))throw new Error("Invalid argument");var t=this.validatePosition(e.start),n=this.validatePosition(e.end);return t===e.start&&n===e.end?e:new l.Range(t,n)},e.prototype.validatePosition=function(e){if(!(e instanceof l.Position))throw new Error("Invalid argument");var t=e.line,n=e.character,i=!1;0>t&&(t=0,i=!0),t>=this._lines.length&&(t=this._lines.length-1,i=!0),0>n&&(n=0,i=!0);var r=this._lines[t].length;return n>r&&(n=r,i=!0),i?new l.Position(t,n):e},e.prototype.getWordRangeAtPosition=function(e){var t=this.validatePosition(e),n=v.WordHelper._getWordAtText(t.character+1,v.WordHelper.ensureValidWordDefinition(b(this._languageId)),this._lines[t.line],0);return n?new l.Range(t.line,n.startColumn-1,t.line,n.endColumn-1):void 0},e}();t.BaseTextDocument=w;var C=function(e){function t(t,n,i,r,o,s,a){e.call(this,n,i,r,o,s,a),this._proxy=t}return __extends(t,e),t.prototype.save=function(){return this._proxy._trySaveDocument(this._uri)},t.prototype._acceptLanguageId=function(e){this._languageId=e},t.prototype._acceptIsDirty=function(e){this._isDirty=e},t.prototype._acceptEvents=function(e){for(var t=-1,n=0,i=e.length;i>n;n++){var r=e[n];this._acceptDeleteRange(r.range),this._acceptInsertText({lineNumber:r.range.startLineNumber,column:r.range.startColumn},r.text),t=Math.max(t,r.versionId)}-1!==t&&(this._versionId=t)},t.prototype._setLineText=function(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)},t.prototype._acceptDeleteRange=function(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)},t.prototype._acceptInsertText=function(e,t){if(0!==t.length){var n=t.split(/\r\n|\r|\n/);if(1===n.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);for(var i=new Array(n.length-1),r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),i[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}},t}(w);t.PluginHostDocument=C;var T=function(){function e(e,t,n,i,r,o,s){var a=this;this._textFileService=i,this._editorService=r,this._fileService=o,this._untitledEditorService=s,this._proxy=e.getRemotable(S),this._modelIsSynced={},this._toDispose=[],t.onModelAdded.add(this._onModelAdded,this,this._toDispose),t.onModelRemoved.add(this._onModelRemoved,this,this._toDispose),t.onModelModeChanged.add(this._onModelModeChanged,this,this._toDispose),this._toDispose.push(n.addListener2(p.EventType.FILE_SAVED,function(e){a._proxy._acceptModelSaved(e.getAfter().resource)})),this._toDispose.push(n.addListener2(p.EventType.FILE_REVERTED,function(e){a._proxy._acceptModelReverted(e.getAfter().resource)})),this._toDispose.push(n.addListener2(p.EventType.FILE_DIRTY,function(e){a._proxy._acceptModelDirty(e.getAfter().resource)})),this._modelToDisposeMap=Object.create(null)}return e.prototype.dispose=function(){var e=this;Object.keys(this._modelToDisposeMap).forEach(function(t){e._modelToDisposeMap[t].dispose()}),this._modelToDisposeMap=Object.create(null),this._toDispose=u.disposeAll(this._toDispose)},e.prototype._onModelAdded=function(e){var t=this;if(e.isTooLargeForHavingARichMode())return null;var n=e.getAssociatedResource();this._modelIsSynced[n.toString()]=!0,this._modelToDisposeMap[n.toString()]=e.addBulkListener2(function(e){return t._onModelEvents(n,e)}),this._proxy._acceptModelAdd({url:e.getAssociatedResource(),versionId:e.getVersionId(),value:e.toRawText(),modeId:e.getMode().getId(),isDirty:this._textFileService.isDirty(n)})},e.prototype._onModelModeChanged=function(e,t){var n=e.getAssociatedResource();this._modelIsSynced[n.toString()]&&this._proxy._acceptModelModeChanged(e.getAssociatedResource(),t,e.getMode().getId())},e.prototype._onModelRemoved=function(e){var t=e.getAssociatedResource();this._modelIsSynced[t.toString()]&&(delete this._modelIsSynced[t.toString()],this._modelToDisposeMap[t.toString()].dispose(),delete this._modelToDisposeMap[t.toString()],this._proxy._acceptModelRemoved(t))},e.prototype._onModelEvents=function(e,t){for(var n=[],i=0,r=t.length;r>i;i++){var s=t[i];switch(s.getType()){case o.EventType.ModelContentChanged2:n.push(s.getData())}}n.length>0&&this._proxy._acceptModelChanged(e,n)},e.prototype._trySaveDocument=function(e){return this._textFileService.save(e)},e.prototype._tryOpenDocument=function(e){if(!e.scheme||!e.fsPath)return m.TPromise.wrapError("Uri must have scheme and path. One or both are missing in: "+e.toString());var t;switch(e.scheme){case"file":t=this._handleFileScheme(e);break;case"untitled":t=this._handleUnititledScheme(e);break;default:t=m.TPromise.wrapError("unsupported URI-scheme: "+e.scheme)}return t.then(function(t){return t?void 0:m.TPromise.wrapError("cannot open "+e.toString())},function(t){return m.TPromise.wrapError("cannot open "+e.toString()+". Detail: "+n.toErrorMessage(t))})},e.prototype._handleFileScheme=function(e){return this._editorService.resolveEditorModel({resource:e}).then(function(e){return!!e})},e.prototype._handleUnititledScheme=function(e){var t=this,n=c["default"].file(e.fsPath);return this._fileService.resolveFile(n).then(function(e){return m.TPromise.wrapError("file already exists on disk")},function(i){var r=t._untitledEditorService.createOrGet(n);return r.resolve(!0).then(function(n){if(r.getResource().toString()!==e.toString())throw new Error("expected URI "+e.toString()+" BUT GOT "+r.getResource().toString());return t._proxy._acceptModelDirty(e)}).then(function(){return!0})})},e=__decorate([s.Remotable.MainContext("MainThreadDocuments"),__param(0,s.IThreadService),__param(1,i.IModelService),__param(2,d.IEventService),__param(3,p.ITextFileService),__param(4,h.IEditorService),__param(5,g.IFileService),__param(6,y.IUntitledEditorService)],e)}();t.MainThreadDocuments=T});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostEditors",["require","exports","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/workbench/api/common/pluginHostDocuments","./pluginHostTypes","vs/editor/common/editorCommon","vs/editor/common/services/codeEditorService","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modelService","vs/workbench/api/common/mainThreadEditors","./pluginHostTypeConverters","vs/workbench/browser/events","vs/platform/event/common/event","vs/base/common/arrays"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){function g(e,t){var n="The property '"+e+"' is readonly.";return t&&(n+=" Use '"+t+"' instead."),new Error(n)}function y(e){return new Error("illgeal argument '"+e+"'")}function _(e,t){return void 0===t&&(t="Refer to the documentation for further details."),function(n,i,r){var o=r.value;return r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];return console.warn("[Deprecation Warning] method '"+e+"' is deprecated and should no longer be used. "+t),o.apply(this,n)},r}}var b=function(){function e(e){this._onDidChangeTextEditorSelection=new n.Emitter,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this._onDidChangeTextEditorOptions=new n.Emitter,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this._modelService=e.getRemotable(s.PluginHostModelService),this._proxy=e.getRemotable(C),this._onDidChangeActiveTextEditor=new n.Emitter,this._editors=Object.create(null),this._visibleEditorIds=[]}return e.prototype.getActiveTextEditor=function(){return this._activeEditorId&&this._editors[this._activeEditorId]},e.prototype.getVisibleTextEditors=function(){var e=this;return this._visibleEditorIds.map(function(t){return e._editors[t]})},Object.defineProperty(e.prototype,"onDidChangeActiveTextEditor",{get:function(){return this._onDidChangeActiveTextEditor&&this._onDidChangeActiveTextEditor.event},enumerable:!0,configurable:!0}),e.prototype.showTextDocument=function(e,t){var n=this;return this._proxy._tryShowTextDocument(e.uri,p.fromViewColumn(t)).then(function(e){var t=n._editors[e];if(t)return t;throw new Error("Failed to create editor.")})},e.prototype.createTextEditorDecorationType=function(e){return new E(this._proxy,e)},e.prototype._acceptTextEditorAdd=function(e){var t=this._modelService.getDocument(e.document),n=new w(this._proxy,e.id,t,e.selections.map(p.toSelection),e.options);this._editors[e.id]=n},e.prototype._acceptOptionsChanged=function(e,t){var n=this._editors[e];n._acceptOptions(t),this._onDidChangeTextEditorOptions.fire({textEditor:n,options:t})},e.prototype._acceptSelectionsChanged=function(e,t){var n=t.map(p.toSelection),i=this._editors[e];i._acceptSelections(n),this._onDidChangeTextEditorSelection.fire({textEditor:i,selections:n})},e.prototype._acceptActiveEditorAndVisibleEditors=function(e,t){this._visibleEditorIds=t,this._activeEditorId!==e&&(this._activeEditorId=e,this._onDidChangeActiveTextEditor.fire(this.getActiveTextEditor()))},e.prototype._acceptTextEditorRemove=function(e){var t=this._visibleEditorIds.filter(function(t){return t!==e});this._activeEditorId===e?this._acceptActiveEditorAndVisibleEditors(void 0,t):this._acceptActiveEditorAndVisibleEditors(this._activeEditorId,t);var n=this._editors[e];n.dispose(),delete this._editors[e]},e=__decorate([o.Remotable.PluginHostContext("PluginHostEditors"),__param(0,o.IThreadService)],e)}();t.PluginHostEditors=b;var E=function(){function e(t,n){this.key="TextEditorDecorationType"+ ++e.LAST_ID,this._proxy=t,this._proxy._registerTextEditorDecorationType(this.key,n)}return e.prototype.dispose=function(){this._proxy._removeTextEditorDecorationType(this.key)},e.LAST_ID=0,e}(),S=function(){function e(e){this._documentVersionId=e.version,this._collectedEdits=[]}return e.prototype.finalize=function(){return{documentVersionId:this._documentVersionId,edits:this._collectedEdits}},e.prototype.replace=function(e,t){var n=null;if(e instanceof a.Position)n=new a.Range(e,e);else if(e instanceof a.Range)n=e;else{if(!(e instanceof a.Selection))throw new Error("Unrecognized location");n=new a.Range(e.start,e.end)}this._collectedEdits.push({range:n,text:t,forceMoveMarkers:!1})},e.prototype.insert=function(e,t){this._collectedEdits.push({range:new a.Range(e,e),text:t,forceMoveMarkers:!0})},e.prototype["delete"]=function(e){var t=null;if(e instanceof a.Range)t=e;else{if(!(e instanceof a.Selection))throw new Error("Unrecognized location");t=new a.Range(e.start,e.end)}this._collectedEdits.push({range:t,text:null,forceMoveMarkers:!0})},e}();t.TextEditorEdit=S;var w=function(){function e(e,t,n,i,r){this._proxy=e,this._id=t,this._document=n,this._selections=i,this._options=r}return e.prototype.dispose=function(){this._document=null},e.prototype.show=function(e){this._proxy._tryShowEditor(this._id,p.fromViewColumn(e))},e.prototype.hide=function(){this._proxy._tryHideEditor(this._id)},Object.defineProperty(e.prototype,"document",{get:function(){return this._document},set:function(e){throw g("document")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){var t=this;this._options=e,this._runOnProxy(function(){return t._proxy._trySetOptions(t._id,t._options)},!0)},enumerable:!0,configurable:!0}),e.prototype._acceptOptions=function(e){this._options=e},Object.defineProperty(e.prototype,"selection",{get:function(){return this._selections&&this._selections[0]},set:function(e){if(!(e instanceof a.Selection))throw y("selection");this._selections=[e],this._trySetSelection(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selections",{get:function(){return this._selections},set:function(e){if(!Array.isArray(e)||e.some(function(e){return!(e instanceof a.Selection)}))throw y("selections");this._selections=e,this._trySetSelection(!0)},enumerable:!0,configurable:!0}),e.prototype.setDecorations=function(e,t){var n=this;this._runOnProxy(function(){return n._proxy._trySetDecorations(n._id,e.key,p.fromRangeOrRangeWithMessage(t))},!0)},e.prototype.revealRange=function(e,t){var n=this;this._runOnProxy(function(){return n._proxy._tryRevealRange(n._id,p.fromRange(e),t||h.TextEditorRevealType.Default)},!0)},e.prototype._trySetSelection=function(e){var t=this,n=this._selections.map(p.fromSelection);return this._runOnProxy(function(){return t._proxy._trySetSelections(t._id,n)},e)},e.prototype._acceptSelections=function(e){this._selections=e},e.prototype.edit=function(e){var t=new S(this._document);return e(t),this._applyEdit(t)},e.prototype._applyEdit=function(e){var t=e.finalize(),n=t.edits.map(function(e){return{range:p.fromRange(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers
}});return this._proxy._tryApplyEdits(this._id,t.documentVersionId,n)},e.prototype._runOnProxy=function(e,t){var n=this;return e().then(function(){return n},function(e){return t?void console.warn(e):r.TPromise.wrapError(t)})},Object.defineProperty(e.prototype,"show",__decorate([_("TextEditor.show")],e.prototype,"show",Object.getOwnPropertyDescriptor(e.prototype,"show"))),Object.defineProperty(e.prototype,"hide",__decorate([_("TextEditor.hide")],e.prototype,"hide",Object.getOwnPropertyDescriptor(e.prototype,"hide"))),e}(),C=function(){function e(e,t,n,i,r){var o=this;this._proxy=e.getRemotable(b),this._workbenchEditorService=t,this._toDispose=[],this._textEditorsListenersMap=Object.create(null),this._textEditorsMap=Object.create(null),this._activeTextEditor=null,this._visibleEditors=[],this._editorTracker=new h.MainThreadEditorsTracker(n,r),this._toDispose.push(this._editorTracker),this._toDispose.push(this._editorTracker.onTextEditorAdd(function(e){return o._onTextEditorAdd(e)})),this._toDispose.push(this._editorTracker.onTextEditorRemove(function(e){return o._onTextEditorRemove(e)})),this._toDispose.push(this._editorTracker.onDidUpdateTextEditors(function(){return o._updateActiveAndVisibleTextEditors()})),this._toDispose.push(this._editorTracker.onChangedFocusedTextEditor(function(e){return o._updateActiveAndVisibleTextEditors()})),this._toDispose.push(i.addListener2(f.EventType.EDITOR_INPUT_CHANGED,function(){return o._updateActiveAndVisibleTextEditors()}))}return e.prototype.dispose=function(){var e=this;Object.keys(this._textEditorsListenersMap).forEach(function(t){i.disposeAll(e._textEditorsListenersMap[t])}),this._textEditorsListenersMap=Object.create(null),this._toDispose=i.disposeAll(this._toDispose)},e.prototype._onTextEditorAdd=function(e){var t=this,n=e.getId(),i=[];i.push(e.onConfigurationChanged(function(e){t._proxy._acceptOptionsChanged(n,e)})),i.push(e.onSelectionChanged(function(e){t._proxy._acceptSelectionsChanged(n,e)})),this._proxy._acceptTextEditorAdd({id:n,document:e.getModel().getAssociatedResource(),options:e.getConfiguration(),selections:e.getSelections()}),this._textEditorsListenersMap[n]=i,this._textEditorsMap[n]=e},e.prototype._onTextEditorRemove=function(e){var t=e.getId();i.disposeAll(this._textEditorsListenersMap[t]),delete this._textEditorsListenersMap[t],delete this._textEditorsMap[t],this._proxy._acceptTextEditorRemove(t)},e.prototype._updateActiveAndVisibleTextEditors=function(){var e=this._editorTracker.getVisibleTextEditorIds(),t=this._findActiveTextEditorId();t===this._activeTextEditor&&v.equals(this._visibleEditors,e,function(e,t){return e===t})||(this._activeTextEditor=t,this._visibleEditors=e,this._proxy._acceptActiveEditorAndVisibleEditors(this._activeTextEditor,this._visibleEditors))},e.prototype._findActiveTextEditorId=function(){var e=this._editorTracker.getFocusedTextEditorId();if(e)return e;var t=this._workbenchEditorService.getActiveEditor();if(!t)return null;var n=t.getControl();return n&&"function"==typeof n.getEditorType?n.getEditorType()===c.EditorType.ICodeEditor?this._editorTracker.findTextEditorIdFor(n):this._editorTracker.findTextEditorIdFor(n.getModifiedEditor()):null},e.prototype._tryShowTextDocument=function(e,t){var n=this,i={resource:e,options:{preserveFocus:!1}};return this._workbenchEditorService.openEditor(i,t).then(function(e){return new r.TPromise(function(e){function t(){i.dispose(),clearTimeout(r),e(void 0)}var i,r;i=n._editorTracker.onDidUpdateTextEditors(function(){t()}),r=setTimeout(function(){t()},100)}).then(function(){for(var t in n._textEditorsMap)if(n._textEditorsMap[t].matches(e))return t})})},e.prototype._tryShowEditor=function(e,t){var n=this._textEditorsMap[e];if(n){var i=n.getModel();return this._workbenchEditorService.openEditor({resource:i.getAssociatedResource(),options:{preserveFocus:!1}},t).then(function(){})}},e.prototype._tryHideEditor=function(e){var t=this._textEditorsMap[e];if(t)for(var n=this._workbenchEditorService.getVisibleEditors(),i=0;i<n.length;i++){var r=n[i];if(t.matches(r))return this._workbenchEditorService.closeEditor(r).then(function(){})}},e.prototype._trySetSelections=function(e,t){return this._textEditorsMap[e]?(this._textEditorsMap[e].setSelections(t),r.TPromise.as(null)):r.TPromise.wrapError("TextEditor disposed")},e.prototype._trySetDecorations=function(e,t,n){return this._textEditorsMap[e]?(this._textEditorsMap[e].setDecorations(t,n),r.TPromise.as(null)):r.TPromise.wrapError("TextEditor disposed")},e.prototype._tryRevealRange=function(e,t,n){return this._textEditorsMap[e]?void this._textEditorsMap[e].revealRange(t,n):r.TPromise.wrapError("TextEditor disposed")},e.prototype._trySetOptions=function(e,t){return this._textEditorsMap[e]?(this._textEditorsMap[e].setConfiguration(t),r.TPromise.as(null)):r.TPromise.wrapError("TextEditor disposed")},e.prototype._tryApplyEdits=function(e,t,n){return this._textEditorsMap[e]?r.TPromise.as(this._textEditorsMap[e].applyEdits(t,n)):r.TPromise.wrapError("TextEditor disposed")},e.prototype._registerTextEditorDecorationType=function(e,t){this._editorTracker.registerTextEditorDecorationType(e,t)},e.prototype._removeTextEditorDecorationType=function(e){this._editorTracker.removeTextEditorDecorationType(e)},e=__decorate([o.Remotable.MainContext("MainThreadEditors"),__param(0,o.IThreadService),__param(1,l.IWorkbenchEditorService),__param(2,u.ICodeEditorService),__param(3,m.IEventService),__param(4,d.IModelService)],e)}();t.MainThreadEditors=C});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/pluginHostCommands",["require","exports","vs/platform/thread/common/thread","vs/base/common/types","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybindingService","vs/base/common/winjs.base","vs/workbench/api/common/pluginHostEditors"],function(e,t,n,i,r,o,s,a){function c(e){if("string"==typeof e)return e;var t=[e.description];if(t.push("\n\n"),e.args)for(var n=0,i=e.args;n<i.length;n++){var r=i[n];t.push("* _"+r.name+"_ "+(r.description||"")+"\n")}return e.returns&&t.push("* _(returns)_ "+e.returns),t.push("\n\n"),t.join("")}var u=function(){function e(e){this._commands=Object.create(null),this._pluginHostEditors=e.getRemotable(a.PluginHostEditors),this._proxy=e.getRemotable(l)}return e.prototype.registerCommand=function(e,t,n,i){var r=this;if(!e.trim().length)throw new Error("invalid id");if(this._commands[e])throw new Error("command with id already exists");return this._commands[e]={callback:t,thisArg:n,description:i},this._proxy.$registerCommand(e),{dispose:function(){delete r._commands[e]}}},e.prototype.registerTextEditorCommand=function(e,t,n){var i=this,r=n?t.bind(n):t;return this.registerCommand(e,function(){var t=i._pluginHostEditors.getActiveTextEditor();return t?void t.edit(function(e){r(t,e)}).then(function(t){t||console.warn("Edits from command "+e+" were not applied.")},function(t){console.warn("An error occured while running command "+e,t)}):void console.warn("Cannot execute "+e+" because there is no active text editor.")})},e.prototype.executeCommand=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._commands[e]?this.$executeContributedCommand.apply(this,[e].concat(t)):this._proxy.$executeCommand(e,t)},e.prototype.$executeContributedCommand=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this._commands[e];if(!r)return Promise.reject(e);try{var o=r.callback,s=r.thisArg,a=r.description;if(a)for(var c=0;c<a.args.length;c++)i.validateConstraint(t[c],a.args[c].constraint);var u=o.apply(s,t);return Promise.resolve(u)}catch(l){return Promise.reject("Running the contributed command:'"+e+"' failed.")}},e.prototype.getCommands=function(e){return void 0===e&&(e=!1),this._proxy.$getCommands().then(function(t){return e&&(t=t.filter(function(e){return"_"!==e[0]})),t})},e.prototype.$getContributedCommandHandlerDescriptions=function(){var e=Object.create(null);for(var t in this._commands){var n=this._commands[t].description;n&&(e[t]=n)}return s.TPromise.as(e)},e=__decorate([n.Remotable.PluginHostContext("PluginHostCommands"),__param(0,n.IThreadService)],e)}();t.PluginHostCommands=u;var l=function(){function e(e,t){this._threadService=e,this._keybindingService=t,this._proxy=this._threadService.getRemotable(u)}return e.prototype.$registerCommand=function(e){var t=this;r.KeybindingsRegistry.registerCommandDesc({id:e,handler:function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return(o=t._proxy).$executeContributedCommand.apply(o,[e].concat(i));var o},weight:void 0,context:void 0,win:void 0,mac:void 0,linux:void 0,primary:void 0,secondary:void 0})},e.prototype.$executeCommand=function(e,t){return this._keybindingService.executeCommand(e,t)},e.prototype.$getCommands=function(){return s.TPromise.as(Object.keys(r.KeybindingsRegistry.getCommands()))},e.prototype.$getCommandHandlerDescriptions=function(){return this._proxy.$getContributedCommandHandlerDescriptions().then(function(e){var t=r.KeybindingsRegistry.getCommands();for(var n in t){var i=t[n].description;i&&(e[n]=i)}return e})},e=__decorate([n.Remotable.MainContext("MainThreadCommands"),__param(0,n.IThreadService),__param(1,o.IKeybindingService)],e)}();t.MainThreadCommands=l,r.KeybindingsRegistry.registerCommandDesc({id:"_generateCommandsDocumentation",handler:function(e){return e.get(n.IThreadService).getRemotable(l).$getCommandHandlerDescriptions().then(function(e){var t=[];for(var n in e)t.push("`"+n+"` - "+c(e[n]));console.log(t.join("\n"))})},context:void 0,weight:r.KeybindingsRegistry.WEIGHT.builtinExtension(0),primary:void 0})});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/common/extHostLanguageFeatures",["require","exports","vs/editor/common/modes/modesFilters","vs/base/common/winjs.base","vs/platform/thread/common/thread","vs/editor/common/core/range","vs/workbench/api/common/pluginHostTypeConverters","vs/workbench/api/common/pluginHostTypes","vs/base/common/cancellation","vs/workbench/api/common/pluginHostDocuments","vs/platform/markers/common/markers","vs/workbench/api/common/pluginHostCommands","vs/editor/contrib/goToDeclaration/common/goToDeclaration","vs/editor/contrib/hover/common/hover","vs/editor/contrib/wordHighlighter/common/wordHighlighter","vs/editor/contrib/referenceSearch/common/referenceSearch","vs/editor/contrib/quickFix/common/quickFix","vs/editor/contrib/quickOpen/common/quickOpen","vs/workbench/parts/search/common/search","vs/editor/contrib/rename/common/rename","vs/editor/contrib/format/common/format","vs/editor/contrib/codelens/common/codelens","vs/editor/contrib/parameterHints/common/parameterHints","vs/editor/contrib/suggest/common/suggest"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w){function C(e){return e&&"function"==typeof e.then}function T(e){var t=new c.CancellationTokenSource;return new i.TPromise(function(n,i){var r=e(t.token);C(r)?r.then(n,i):n(r)},function(){t.cancel()})}var I=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.getOutline=function(e){var t=this,n=this._documents.getDocument(e);return T(function(e){return t._provider.provideDocumentSymbols(n,e)}).then(function(e){return Array.isArray(e)?e.map(s.SymbolInformation.toOutlineEntry):void 0})},e}(),k=function(){function e(e,t){this._cache=Object.create(null),this._documents=e,this._provider=t}return e.prototype.findCodeLensSymbols=function(e){var t=this,n=this._documents.getDocument(e),i=e.toString();return delete this._cache[i],T(function(e){return t._provider.provideCodeLenses(n,e)}).then(function(e){return Array.isArray(e)?(t._cache[i]=e,e.map(function(e,t){return{id:String(t),range:s.fromRange(e.range),command:s.Command.from(e.command)}})):void 0})},e.prototype.resolveCodeLensSymbol=function(e,t){var n=this,r=this._cache[e.toString()];if(r){var o=r[Number(t.id)];if(o){var a;return a="function"!=typeof this._provider.resolveCodeLens||o.isResolved?i.TPromise.as(o):T(function(e){return n._provider.resolveCodeLens(o,e)}),a.then(function(e){o=e||o;var n=o.command;return n||(n={title:"<<MISSING COMMAND>>",command:"missing"}),t.command=s.Command.from(n),t})}}},e}(),x=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.canFindDeclaration=function(){return!0},e.prototype.findDeclaration=function(t,n){var i=this,r=this._documents.getDocument(t),o=s.toPosition(n);return T(function(e){return i._provider.provideDefinition(r,o,e)}).then(function(t){return Array.isArray(t)?t.map(e._convertLocation):t?e._convertLocation(t):void 0})},e._convertLocation=function(e){return e?{resource:e.uri,range:s.fromRange(e.range)}:void 0},e}(),A=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.computeInfo=function(e,t){var n=this,i=this._documents.getDocument(e),r=s.toPosition(t);return T(function(e){return n._provider.provideHover(i,r,e)}).then(function(e){return e?(e.range||(e.range=i.getWordRangeAtPosition(r)),e.range||(e.range=new a.Range(r,r)),s.fromHover(e)):void 0})},e}(),R=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.findOccurrences=function(t,n){var i=this,r=this._documents.getDocument(t),o=s.toPosition(n);return T(function(e){return i._provider.provideDocumentHighlights(r,o,e)}).then(function(t){return Array.isArray(t)?t.map(e._convertDocumentHighlight):void 0})},e._convertDocumentHighlight=function(e){return{range:s.fromRange(e.range),kind:a.DocumentHighlightKind[e.kind].toString().toLowerCase()}},e}(),D=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.canFindReferences=function(){return!0},e.prototype.findReferences=function(t,n,i){var r=this,o=this._documents.getDocument(t),a=s.toPosition(n);return T(function(e){return r._provider.provideReferences(o,a,{includeDeclaration:i},e)}).then(function(t){return Array.isArray(t)?t.map(e._convertLocation):void 0})},e._convertLocation=function(e){return{resource:e.uri,range:s.fromRange(e.range)}},e}(),L=function(){function e(e,t,n){this._documents=e,this._commands=t,this._provider=n}return e.prototype.getQuickFixes=function(e,t,n){var i=this,r=this._documents.getDocument(e),o=s.toRange(t),c=n.map(function(e){var t=new a.Diagnostic(s.toRange(e),e.message);return t.code=e.code,t.severity=s.toDiagnosticSeverty(e.severity),t});return T(function(e){return i._provider.provideCodeActions(r,o,{diagnostics:c},e)}).then(function(e){return Array.isArray(e)?e.map(function(e,t){return{command:s.Command.from(e),score:t}}):void 0})},e.prototype.runQuickFixAction=function(e,t,n){var i=n.command;return(r=this._commands).executeCommand.apply(r,[i.id].concat(i.arguments));var r},e}(),M=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.formatDocument=function(e,t){var n=this,i=this._documents.getDocument(e);return T(function(e){return n._provider.provideDocumentFormattingEdits(i,t,e)}).then(function(e){return Array.isArray(e)?e.map(s.TextEdit.from):void 0})},e}(),O=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.formatRange=function(e,t,n){var i=this,r=this._documents.getDocument(e),o=s.toRange(t);return T(function(e){return i._provider.provideDocumentRangeFormattingEdits(r,o,n,e)}).then(function(e){return Array.isArray(e)?e.map(s.TextEdit.from):void 0})},e}(),P=function(){function e(e,t){this.autoFormatTriggerCharacters=[],this._documents=e,this._provider=t}return e.prototype.formatAfterKeystroke=function(e,t,n,i){var r=this,o=this._documents.getDocument(e),a=s.toPosition(t);return T(function(e){return r._provider.provideOnTypeFormattingEdits(o,a,n,i,e)}).then(function(e){return Array.isArray(e)?e.map(s.TextEdit.from):void 0})},e}(),N=function(){function e(e){this._provider=e}return e.prototype.getNavigateToItems=function(e){var t=this;return T(function(n){return t._provider.provideWorkspaceSymbols(e,n)}).then(function(e){return Array.isArray(e)?e.map(s.fromSymbolInformation):void 0})},e}(),F=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.rename=function(e,t,n){var r=this,o=this._documents.getDocument(e),a=s.toPosition(t);return T(function(e){return r._provider.provideRenameEdits(o,a,n,e)}).then(function(e){if(e){for(var t={currentName:void 0,edits:[]},n=0,i=e.entries();n<i.length;n++)for(var r=i[n],o=r[0],a=r[1],c=0;c<a.length;c++){var u=a[c];t.edits.push({resource:o,newText:u.newText,range:s.fromRange(u.range)})}return t}},function(e){return"string"==typeof e?{currentName:void 0,edits:void 0,rejectReason:e}:i.TPromise.wrapError(e)})},e}(),W=function(){function e(e,t){this._cache=Object.create(null),this._documents=e,this._provider=t}return e.prototype.suggest=function(e,t){var n=this,i=this._documents.getDocument(e),r=s.toPosition(t),o=i.getWordRangeAtPosition(r),c=e.toString();return delete this._cache[c],T(function(e){return n._provider.provideCompletionItems(i,r,e)}).then(function(e){for(var t={suggestions:[],currentWord:o?i.getText(new a.Range(o.start,r)):""},u=[t],l=0;l<e.length;l++){var d=e[l],h=s.Suggest.from(d);if(d.textEdit){var p=d.textEdit.range;if(!p.isSingleLine||p.start.line!==r.line){console.warn("INVALID text edit, must be single line and on the same line");continue}h.codeSnippet=d.textEdit.newText,h.overwriteBefore=r.character-p.start.character,h.overwriteAfter=p.end.character-r.character,u.push({currentWord:i.getText(p),suggestions:[h]})}else t.suggestions.push(h);h.id=String(l)}return n._cache[c]=e,u})},e.prototype.getSuggestionDetails=function(e,t,n){var r=this;if("function"!=typeof this._provider.resolveCompletionItem)return i.TPromise.as(n);var o=this._cache[e.toString()];if(!o)return i.TPromise.as(n);var a=o[Number(n.id)];return a?T(function(e){return r._provider.resolveCompletionItem(a,e)}).then(function(e){return s.Suggest.from(e||a)}):i.TPromise.as(n)},e.prototype.getFilter=function(){throw new Error("illegal state")},e.prototype.getTriggerCharacters=function(){throw new Error("illegal state")},e.prototype.shouldShowEmptySuggestionList=function(){throw new Error("illegal state")},e.prototype.shouldAutotriggerSuggest=function(e,t,n){throw new Error("illegal state")},e}(),H=function(){function e(e,t){this._documents=e,this._provider=t}return e.prototype.getParameterHints=function(e,t,n){var i=this,r=this._documents.getDocument(e),o=s.toPosition(t);return T(function(e){return i._provider.provideSignatureHelp(r,o,e)}).then(function(e){return e instanceof a.SignatureHelp?s.SignatureHelp.from(e):void 0})},e.prototype.getParameterHintsTriggerCharacters=function(){throw new Error("illegal state")},e.prototype.shouldTriggerParameterHints=function(e,t){throw new Error("illegal state")},e}(),V=function(){function e(e){this._adapter=Object.create(null),this._proxy=e.getRemotable(B),this._documents=e.getRemotable(u.PluginHostModelService),this._commands=e.getRemotable(d.PluginHostCommands)}return e.prototype._createDisposable=function(e){var t=this;return new a.Disposable(function(){delete t._adapter[e],t._proxy.$unregister(e)})},e.prototype._nextHandle=function(){return e._handlePool++},e.prototype._withAdapter=function(e,t,n){var r=this._adapter[e];return r instanceof t?n(r):i.TPromise.wrapError(new Error("no adapter found"))},e.prototype.registerDocumentSymbolProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new I(this._documents,t),this._proxy.$registerOutlineSupport(n,e),this._createDisposable(n)},e.prototype.$getOutline=function(e,t){return this._withAdapter(e,I,function(e){return e.getOutline(t)})},e.prototype.registerCodeLensProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new k(this._documents,t),this._proxy.$registerCodeLensSupport(n,e),this._createDisposable(n)},e.prototype.$findCodeLensSymbols=function(e,t){return this._withAdapter(e,k,function(e){return e.findCodeLensSymbols(t)})},e.prototype.$resolveCodeLensSymbol=function(e,t,n){return this._withAdapter(e,k,function(e){return e.resolveCodeLensSymbol(t,n)})},e.prototype.registerDefinitionProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new x(this._documents,t),this._proxy.$registerDeclaractionSupport(n,e),this._createDisposable(n)},e.prototype.$findDeclaration=function(e,t,n){return this._withAdapter(e,x,function(e){return e.findDeclaration(t,n)})},e.prototype.registerHoverProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new A(this._documents,t),this._proxy.$registerExtraInfoSupport(n,e),this._createDisposable(n)},e.prototype.$computeInfo=function(e,t,n){return this._withAdapter(e,A,function(e){return e.computeInfo(t,n)})},e.prototype.registerDocumentHighlightProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new R(this._documents,t),this._proxy.$registerOccurrencesSupport(n,e),this._createDisposable(n)},e.prototype.$findOccurrences=function(e,t,n){return this._withAdapter(e,R,function(e){return e.findOccurrences(t,n)})},e.prototype.registerReferenceProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new D(this._documents,t),this._proxy.$registerReferenceSupport(n,e),this._createDisposable(n)},e.prototype.$findReferences=function(e,t,n,i){return this._withAdapter(e,D,function(e){return e.findReferences(t,n,i)})},e.prototype.registerCodeActionProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new L(this._documents,this._commands,t),this._proxy.$registerQuickFixSupport(n,e),this._createDisposable(n)},e.prototype.$getQuickFixes=function(e,t,n,i){return this._withAdapter(e,L,function(e){return e.getQuickFixes(t,n,i)})},e.prototype.$runQuickFixAction=function(e,t,n,i){return this._withAdapter(e,L,function(e){return e.runQuickFixAction(t,n,i)})},e.prototype.registerDocumentFormattingEditProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new M(this._documents,t),this._proxy.$registerDocumentFormattingSupport(n,e),this._createDisposable(n)},e.prototype.$formatDocument=function(e,t,n){return this._withAdapter(e,M,function(e){return e.formatDocument(t,n)})},e.prototype.registerDocumentRangeFormattingEditProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new O(this._documents,t),this._proxy.$registerRangeFormattingSupport(n,e),this._createDisposable(n)},e.prototype.$formatRange=function(e,t,n,i){return this._withAdapter(e,O,function(e){return e.formatRange(t,n,i)})},e.prototype.registerOnTypeFormattingEditProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new P(this._documents,t),this._proxy.$registerOnTypeFormattingSupport(i,e,n),this._createDisposable(i)},e.prototype.$formatAfterKeystroke=function(e,t,n,i,r){return this._withAdapter(e,P,function(e){return e.formatAfterKeystroke(t,n,i,r)})},e.prototype.registerWorkspaceSymbolProvider=function(e){var t=this._nextHandle();return this._adapter[t]=new N(e),this._proxy.$registerNavigateTypeSupport(t),this._createDisposable(t)},e.prototype.$getNavigateToItems=function(e,t){return this._withAdapter(e,N,function(e){return e.getNavigateToItems(t)})},e.prototype.registerRenameProvider=function(e,t){var n=this._nextHandle();return this._adapter[n]=new F(this._documents,t),this._proxy.$registerRenameSupport(n,e),this._createDisposable(n)},e.prototype.$rename=function(e,t,n,i){return this._withAdapter(e,F,function(e){return e.rename(t,n,i)})},e.prototype.registerCompletionItemProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new W(this._documents,t),this._proxy.$registerSuggestSupport(i,e,n),this._createDisposable(i)},e.prototype.$suggest=function(e,t,n){return this._withAdapter(e,W,function(e){return e.suggest(t,n)})},e.prototype.$getSuggestionDetails=function(e,t,n,i){return this._withAdapter(e,W,function(e){return e.getSuggestionDetails(t,n,i)})},e.prototype.registerSignatureHelpProvider=function(e,t,n){var i=this._nextHandle();return this._adapter[i]=new H(this._documents,t),this._proxy.$registerParameterHintsSupport(i,e,n),this._createDisposable(i)},e.prototype.$getParameterHints=function(e,t,n,i){return this._withAdapter(e,H,function(e){return e.getParameterHints(t,n,i)})},e._handlePool=0,e=__decorate([r.Remotable.PluginHostContext("ExtHostLanguageFeatures"),__param(0,r.IThreadService)],e)}();t.ExtHostLanguageFeatures=V;var B=function(){function e(e,t){this._registrations=Object.create(null),this._proxy=e.getRemotable(V),this._markerService=t}return e.prototype.$unregister=function(e){var t=this._registrations[e];t&&(t.dispose(),delete this._registrations[e])},e.prototype.$registerOutlineSupport=function(e,t){var n=this;this._registrations[e]=g.OutlineRegistry.register(t,{getOutline:function(t){return n._proxy.$getOutline(e,t)}})},e.prototype.$registerCodeLensSupport=function(e,t){var n=this;this._registrations[e]=E.CodeLensRegistry.register(t,{findCodeLensSymbols:function(t){return n._proxy.$findCodeLensSymbols(e,t)},resolveCodeLensSymbol:function(t,i){return n._proxy.$resolveCodeLensSymbol(e,t,i)}})},e.prototype.$registerDeclaractionSupport=function(e,t){var n=this;this._registrations[e]=h.DeclarationRegistry.register(t,{canFindDeclaration:function(){return!0},findDeclaration:function(t,i){return n._proxy.$findDeclaration(e,t,i)}})},e.prototype.$registerExtraInfoSupport=function(e,t){var n=this;this._registrations[e]=p.ExtraInfoRegistry.register(t,{computeInfo:function(t,i){return n._proxy.$computeInfo(e,t,i)}})},e.prototype.$registerOccurrencesSupport=function(e,t){var n=this;this._registrations[e]=f.OccurrencesRegistry.register(t,{findOccurrences:function(t,i){return n._proxy.$findOccurrences(e,t,i)}})},e.prototype.$registerReferenceSupport=function(e,t){var n=this;this._registrations[e]=m.ReferenceRegistry.register(t,{canFindReferences:function(){return!0},findReferences:function(t,i,r){return n._proxy.$findReferences(e,t,i,r)}})},e.prototype.$registerQuickFixSupport=function(e,t){var n=this;this._registrations[e]=v.QuickFixRegistry.register(t,{getQuickFixes:function(t,i){var r=[];return n._markerService.read({resource:t}).forEach(function(e){o.Range.lift(e).intersectRanges(i)&&r.push(e)}),n._proxy.$getQuickFixes(e,t,i,r)},runQuickFixAction:function(t,i,r){return n._proxy.$runQuickFixAction(e,t,i,r)}})},e.prototype.$registerDocumentFormattingSupport=function(e,t){var n=this;this._registrations[e]=b.FormatRegistry.register(t,{formatDocument:function(t,i){return n._proxy.$formatDocument(e,t,i)}})},e.prototype.$registerRangeFormattingSupport=function(e,t){var n=this;this._registrations[e]=b.FormatRegistry.register(t,{formatRange:function(t,i,r){return n._proxy.$formatRange(e,t,i,r)}})},e.prototype.$registerOnTypeFormattingSupport=function(e,t,n){var i=this;this._registrations[e]=b.FormatOnTypeRegistry.register(t,{autoFormatTriggerCharacters:n,formatAfterKeystroke:function(t,n,r,o){return i._proxy.$formatAfterKeystroke(e,t,n,r,o)}})},e.prototype.$registerNavigateTypeSupport=function(e){var t=this;this._registrations[e]=y.NavigateTypesSupportRegistry.register({getNavigateToItems:function(n){return t._proxy.$getNavigateToItems(e,n)}})},e.prototype.$registerRenameSupport=function(e,t){var n=this;this._registrations[e]=_.RenameRegistry.register(t,{rename:function(t,i,r){return n._proxy.$rename(e,t,i,r)}})},e.prototype.$registerSuggestSupport=function(e,t,i){var r=this;this._registrations[e]=w.SuggestRegistry.register(t,{suggest:function(t,n,i){return r._proxy.$suggest(e,t,n)},getSuggestionDetails:function(t,n,i){return r._proxy.$getSuggestionDetails(e,t,n,i)},getFilter:function(){return n.DefaultFilter},getTriggerCharacters:function(){return i},shouldShowEmptySuggestionList:function(){return!0},shouldAutotriggerSuggest:function(){return!0}})},e.prototype.$registerParameterHintsSupport=function(e,t,n){var i=this;this._registrations[e]=S.ParameterHintsRegistry.register(t,{getParameterHints:function(t,n,r){return i._proxy.$getParameterHints(e,t,n,r)},getParameterHintsTriggerCharacters:function(){return n},shouldTriggerParameterHints:function(e,t){return!0}})},e=__decorate([r.Remotable.MainContext("MainThreadLanguageFeatures"),__param(0,r.IThreadService),__param(1,l.IMarkerService)],e)}();t.MainThreadLanguageFeatures=B});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/api/browser/pluginHost.api.impl",["require","exports","vs/editor/common/modes/languageSelector","vs/platform/thread/common/thread","vs/base/common/errors","vs/workbench/api/common/pluginHostFileSystemEventService","vs/workbench/api/common/pluginHostDocuments","vs/workbench/api/common/pluginHostConfiguration","vs/workbench/api/common/pluginHostDiagnostics","vs/workbench/api/common/pluginHostWorkspace","vs/workbench/api/browser/pluginHostQuickOpen","vs/workbench/api/browser/pluginHostStatusBar","vs/workbench/api/common/pluginHostCommands","vs/workbench/api/common/extHostOutputService","vs/workbench/api/common/pluginHostMessageService","vs/workbench/api/common/pluginHostTelemetry","vs/workbench/api/common/pluginHostEditors","vs/workbench/api/common/extHostLanguages","vs/workbench/api/common/extHostLanguageFeatures","vs/workbench/api/common/extHostApiCommands","vs/workbench/api/common/pluginHostTypes","vs/editor/common/modes","vs/editor/common/services/modeService","vs/base/common/uri","vs/base/common/severity","vs/editor/common/editorCommon","vs/platform/plugins/common/plugins","vs/platform/plugins/common/pluginsRegistry","vs/platform/workspace/common/workspace","vs/base/common/cancellation","vs/workbench/api/common/mainThreadEditors","vs/base/common/paths","vs/workbench/api/common/pluginHostTypes.marshalling"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D){function L(t){var n=e.__$__nodeRequire("module"),i=n._load;n._load=function(e,n,r){return"vscode"===e?t:i.apply(this,arguments)},define("vscode",[],t)}var M=function(){function e(e,t,i){var S=this;this._pluginService=t,this._threadService=e,this._proxy=e.getRemotable(P),this.version=i.getConfiguration().env.version,this.Uri=w["default"],this.Location=b.Location,this.Diagnostic=b.Diagnostic,this.DiagnosticSeverity=b.DiagnosticSeverity,this.Disposable=b.Disposable,this.TextEdit=b.TextEdit,this.WorkspaceEdit=b.WorkspaceEdit,this.Position=b.Position,this.Range=b.Range,this.Selection=b.Selection,this.CancellationTokenSource=A.CancellationTokenSource,this.Hover=b.Hover,this.SymbolKind=b.SymbolKind,this.SymbolInformation=b.SymbolInformation,this.DocumentHighlightKind=b.DocumentHighlightKind,this.DocumentHighlight=b.DocumentHighlight,this.CodeLens=b.CodeLens,this.ParameterInformation=b.ParameterInformation,this.SignatureInformation=b.SignatureInformation,this.SignatureHelp=b.SignatureHelp,this.CompletionItem=b.CompletionItem,this.CompletionItemKind=b.CompletionItemKind,this.ViewColumn=b.ViewColumn,this.StatusBarAlignment=b.StatusBarAlignment,this.IndentAction=E.IndentAction,
this.OverviewRulerLane=T.OverviewRulerLane,this.TextEditorRevealType=R.TextEditorRevealType,r.setUnexpectedErrorHandler(function(e){S._proxy.onUnexpectedPluginHostError(r.transformErrorForSerialization(e))});var I=this._threadService.getRemotable(h.PluginHostCommands);this.commands={registerCommand:function(e,t,n){return I.registerCommand(e,t,n)},registerTextEditorCommand:function(e,t,n){return I.registerTextEditorCommand(e,t,n)},executeCommand:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return I.executeCommand(e,t)},getCommands:function(e){return void 0===e&&(e=!1),I.getCommands(e)}};var x=this._threadService.getRemotable(v.PluginHostEditors),D=new f.PluginHostMessageService(this._threadService,this.commands),M=new l.PluginHostQuickOpen(this._threadService),N=new d.PluginHostStatusBar(this._threadService),F=(new m.PluginHostTelemetryService(e),new p.ExtHostOutputService(this._threadService));this.window={get activeTextEditor(){return x.getActiveTextEditor()},get visibleTextEditors(){return x.getVisibleTextEditors()},showTextDocument:function(e,t){return x.showTextDocument(e,t)},createTextEditorDecorationType:function(e){return x.createTextEditorDecorationType(e)},onDidChangeActiveTextEditor:x.onDidChangeActiveTextEditor.bind(x),onDidChangeTextEditorSelection:function(e,t,n){return x.onDidChangeTextEditorSelection(e,t,n)},onDidChangeTextEditorOptions:function(e,t,n){return x.onDidChangeTextEditorOptions(e,t,n)},showInformationMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return D.showMessage(C["default"].Info,e,t)},showWarningMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return D.showMessage(C["default"].Warning,e,t)},showErrorMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return D.showMessage(C["default"].Error,e,t)},showQuickPick:function(e,t){return M.show(e,t)},showInputBox:M.input.bind(M),createStatusBarItem:function(e,t){return N.createStatusBarEntry(e,t)},setStatusBarMessage:function(e,t){return N.setStatusBarMessage(e,t)},createOutputChannel:function(e){return F.createOutputChannel(e)}};var W=i.getWorkspace()?i.getWorkspace().resource.fsPath:void 0,H=e.getRemotable(o.PluginHostFileSystemEventService),V=new u.PluginHostWorkspace(this._threadService,W),B=this._threadService.getRemotable(s.PluginHostModelService);this.workspace=Object.freeze({get rootPath(){return V.getPath()},set rootPath(e){throw r.readonly()},asRelativePath:function(e){return V.getRelativePath(e)},findFiles:function(e,t,n){return V.findFiles(e,t,n)},saveAll:function(e){return V.saveAll(e)},applyEdit:function(e){return V.appyEdit(e)},createFileSystemWatcher:function(e,t,n,i){return H.createFileSystemWatcher(e,t,n,i)},get textDocuments(){return B.getDocuments()},set textDocuments(e){throw r.readonly()},openTextDocument:function(e){return B.openDocument(e)},onDidOpenTextDocument:function(e,t,n){return B.onDidAddDocument(e,t,n)},onDidCloseTextDocument:function(e,t,n){return B.onDidRemoveDocument(e,t,n)},onDidChangeTextDocument:function(e,t,n){return B.onDidChangeDocument(e,t,n)},onDidSaveTextDocument:function(e,t,n){return B.onDidSaveDocument(e,t,n)},onDidChangeConfiguration:function(e,t,n){return j.onDidChangeConfiguration(e,t,n)},getConfiguration:function(e){return j.getConfiguration(e)}});var K=new g.ExtHostLanguages(this._threadService),U=new c.PluginHostDiagnostics(this._threadService),z=e.getRemotable(y.ExtHostLanguageFeatures);new _.ExtHostApiCommands(e.getRemotable(h.PluginHostCommands));this.languages={createDiagnosticCollection:function(e){return U.createDiagnosticCollection(e)},getLanguages:function(){return K.getLanguages()},match:function(e,t){return n.score(e,t.uri,t.languageId)},registerCodeActionsProvider:function(e,t){return z.registerCodeActionProvider(e,t)},registerCodeLensProvider:function(e,t){return z.registerCodeLensProvider(e,t)},registerDefinitionProvider:function(e,t){return z.registerDefinitionProvider(e,t)},registerHoverProvider:function(e,t){return z.registerHoverProvider(e,t)},registerDocumentHighlightProvider:function(e,t){return z.registerDocumentHighlightProvider(e,t)},registerReferenceProvider:function(e,t){return z.registerReferenceProvider(e,t)},registerRenameProvider:function(e,t){return z.registerRenameProvider(e,t)},registerDocumentSymbolProvider:function(e,t){return z.registerDocumentSymbolProvider(e,t)},registerWorkspaceSymbolProvider:function(e){return z.registerWorkspaceSymbolProvider(e)},registerDocumentFormattingEditProvider:function(e,t){return z.registerDocumentFormattingEditProvider(e,t)},registerDocumentRangeFormattingEditProvider:function(e,t){return z.registerDocumentRangeFormattingEditProvider(e,t)},registerOnTypeFormattingEditProvider:function(e,t,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];return z.registerOnTypeFormattingEditProvider(e,t,[n].concat(i))},registerSignatureHelpProvider:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return z.registerSignatureHelpProvider(e,t,n)},registerCompletionItemProvider:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return z.registerCompletionItemProvider(e,t,n)},setLanguageConfiguration:function(e,t){return S._setLanguageConfiguration(e,t)}};var j=e.getRemotable(a.PluginHostConfiguration);this.extensions={getExtension:function(e){var n=k.PluginsRegistry.getPluginDescription(e);return n?new O(t,n):void 0},get all(){return k.PluginsRegistry.getAllPluginDescriptions().map(function(e){return new O(t,e)})}},L(this)}return e.generateDisposeToken=function(){return String(++e._LAST_REGISTER_TOKEN)},e.prototype._disposableFromToken=function(e){var t=this;return new b.Disposable(function(){return t._proxy.disposeByToken(e)})},e.prototype._setLanguageConfiguration=function(e,t){var n=[],i=t.comments,r=t.wordPattern;if(i){var o=(i.lineComment,{commentsConfiguration:{}});if(i.lineComment&&(o.commentsConfiguration.lineCommentTokens=[i.lineComment]),i.blockComment){var a=i.blockComment,c=a[0],u=a[1];o.commentsConfiguration.blockCommentStartToken=c,o.commentsConfiguration.blockCommentEndToken=u}var l=this.Modes_CommentsSupport_register(e,o);n.push(l)}if(r){s.setWordDefinitionFor(e,r);var l=this.Modes_TokenTypeClassificationSupport_register(e,{wordDefinition:r});n.push(l)}else s.setWordDefinitionFor(e,null);var d={},h=!0,p=t.brackets,f=t.indentationRules,m=t.onEnterRules;if(p&&(h=!1,d.brackets=p.map(function(e){var t=e[0],n=e[1];return{open:t,close:n}})),f&&(h=!1,d.indentationRules=f),m&&(h=!1,d.regExpRules=m),!h){var l=this.Modes_OnEnterSupport_register(e,d);n.push(l)}return t.__electricCharacterSupport&&n.push(this.Modes_ElectricCharacterSupport_register(e,t.__electricCharacterSupport)),t.__characterPairSupport&&n.push(this.Modes_CharacterPairSupport_register(e,t.__characterPairSupport)),(v=b.Disposable).from.apply(v,n);var v},e.prototype.Modes_CommentsSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_CommentsSupport_register(i,t,n),this._disposableFromToken(i)},e.prototype.Modes_TokenTypeClassificationSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_TokenTypeClassificationSupport_register(i,t,n),this._disposableFromToken(i)},e.prototype.Modes_ElectricCharacterSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_ElectricCharacterSupport_register(i,t,n),this._disposableFromToken(i)},e.prototype.Modes_CharacterPairSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_CharacterPairSupport_register(i,t,n),this._disposableFromToken(i)},e.prototype.Modes_OnEnterSupport_register=function(t,n){var i=e.generateDisposeToken();return this._proxy.Modes_OnEnterSupport_register(i,t,n),this._disposableFromToken(i)},e._LAST_REGISTER_TOKEN=0,e=__decorate([__param(0,i.IThreadService),__param(1,I.IPluginService),__param(2,x.IWorkspaceContextService)],e)}();t.PluginHostAPIImplementation=M;var O=function(){function e(e,t){this._pluginService=e,this.id=t.id,this.extensionPath=D.normalize(t.extensionFolderPath,!0),this.packageJSON=t}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._pluginService.isActivated(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exports",{get:function(){return this._pluginService.get(this.id)},enumerable:!0,configurable:!0}),e.prototype.activate=function(){return this._pluginService.activateAndGet(this.id)},e}(),P=function(){function e(e){this._modeService=e,this._token2Dispose={}}return e.prototype.onUnexpectedPluginHostError=function(e){r.onUnexpectedError(e)},e.prototype.disposeByToken=function(e){this._token2Dispose[e]&&(this._token2Dispose[e].dispose(),delete this._token2Dispose[e])},e.prototype.Modes_CommentsSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerDeclarativeCommentsSupport(t,n)},e.prototype.Modes_TokenTypeClassificationSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerDeclarativeTokenTypeClassificationSupport(t,n)},e.prototype.Modes_ElectricCharacterSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerDeclarativeElectricCharacterSupport(t,n)},e.prototype.Modes_CharacterPairSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerDeclarativeCharacterPairSupport(t,n)},e.prototype.Modes_OnEnterSupport_register=function(e,t,n){this._token2Dispose[e]=this._modeService.registerDeclarativeOnEnterSupport(t,n)},e=__decorate([i.Remotable.MainContext("MainProcessVSCodeAPIHelper"),__param(0,S.IModeService)],e)}();t.MainProcessVSCodeAPIHelper=P});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/services/search/node/searchService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/glob","vs/base/common/objects","vs/base/common/filters","vs/base/node/service.cp","vs/platform/search/common/search","vs/workbench/services/untitled/browser/untitledEditorService","vs/editor/common/services/modelService","vs/platform/workspace/common/workspace","vs/platform/configuration/common/configuration","vs/workbench/services/search/node/rawSearchService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(){function e(e,t,n,i){this.modelService=e,this.untitledEditorService=t,this.contextService=n,this.configurationService=i,this.serviceId=c.ISearchService;var r=n.getConfiguration();this.diskSearch=new m(!r.env.isBuilt||r.env.verboseLogging)}return e.prototype.search=function(e){var t=this;return this.configurationService.loadConfiguration().then(function(i){if(!e.fileEncoding){var r=i&&i.files&&i.files.encoding;e.fileEncoding=r}var s=i&&i.files&&i.files.exclude;s&&(e.excludePattern?o.mixin(e.excludePattern,s,!1):e.excludePattern=s);var a;return new n.PPromise(function(n,i,r){var o=!1,s=t.getLocalResults(e),c=function(){o||(o=!0,Object.keys(s).map(function(e){return s[e]}).filter(function(e){return!!e}).forEach(r))};a=t.diskSearch.search(e).then(function(e){c(),n({results:e.results.filter(function(e){return"undefined"==typeof s[e.resource.toString()]}),limitHit:e.limitHit})},function(e){c(),i(e)},function(e){c(),e.resource?"undefined"==typeof s[e.resource.toString()]&&r(e):r(e)})},function(){return a&&a.cancel()})})},e.prototype.getLocalResults=function(e){var t=this,n=Object.create(null);if(e.type===c.QueryType.Text){var i=this.modelService.getModels();i.forEach(function(i){var r=i.getAssociatedResource();if(r){if("untitled"===r.scheme){if(!t.untitledEditorService.get(r))return}else if("file"!==r.scheme)return;if(t.matches(r,e.filePattern,e.includePattern,e.excludePattern)){var o=i.findMatches(e.contentPattern.pattern,!1,e.contentPattern.isRegExp,e.contentPattern.isCaseSensitive,e.contentPattern.isWordMatch);if(o.length){var s=new c.FileMatch(r);n[r.toString()]=s,o.forEach(function(e){s.lineMatches.push(new c.LineMatch(i.getLineContent(e.startLineNumber),e.startLineNumber-1,[[e.startColumn-1,e.endColumn-e.startColumn]]))})}else n[r.toString()]=!1}}})}return n},e.prototype.matches=function(e,t,n,i){var o=this.contextService.toWorkspaceRelativePath(e);if(t){if("file"!==e.scheme)return!1;var a=s.matchesFuzzy(t,e.fsPath);if(!a||0===a.length)return!1}if(n){if("file"!==e.scheme)return!1;if(!r.match(n,o||e.fsPath))return!1}if(i){if("file"!==e.scheme)return!0;if(r.match(i,o||e.fsPath))return!1}return!0},e=__decorate([__param(0,l.IModelService),__param(1,u.IUntitledEditorService),__param(2,d.IWorkspaceContextService),__param(3,h.IConfigurationService)],e)}();t.SearchService=f;var m=function(){function t(t){var n=new a.Client(i["default"].parse(e.toUrl("bootstrap")).fsPath,{serverName:"Search",timeout:6e4,args:["--type=searchService"],env:{AMD_ENTRYPOINT:"vs/workbench/services/search/node/searchApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:t}});this.raw=n.getService("SearchService",p.SearchService)}return t.prototype.search=function(e){var t,r=[],o=[];e.rootResources&&o.push.apply(o,e.rootResources);var s={rootPaths:o.map(function(e){return e.fsPath}),filePattern:e.filePattern,excludePattern:e.excludePattern,includePattern:e.includePattern,maxResults:e.maxResults,matchFuzzy:e.matchFuzzy};return e.type===c.QueryType.Text&&(s.contentPattern=e.contentPattern,s.fileEncoding=e.fileEncoding),t=e.type===c.QueryType.File?this.raw.fileSearch(s):this.raw.textSearch(s),new n.PPromise(function(e,n,o){t.done(function(t){e({limitHit:t.limitHit,results:r})},n,function(e){if(e.path){var t=new c.FileMatch(i["default"].file(e.path));if(r.push(t),e.lineMatches)for(var n=0;n<e.lineMatches.length;n++)t.lineMatches.push(new c.LineMatch(e.lineMatches[n].preview,e.lineMatches[n].lineNumber,e.lineMatches[n].offsetAndLengths));o(t)}else o(e)})},function(){return t.cancel()})},t}()}),define("vs/workbench/services/viewlet/common/viewletService",["require","exports","vs/platform/instantiation/common/instantiation"],function(e,t,n){t.IViewletService=n.createDecorator("viewletService")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/viewlet",["require","exports","vs/nls!vs/workbench/browser/viewlet","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/errors","vs/platform/platform","vs/base/browser/builder","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/component","vs/workbench/browser/events","vs/workbench/browser/actionBarRegistry","vs/base/browser/ui/toolbar/toolbar","vs/base/browser/dnd","vs/base/common/lifecycle","vs/base/browser/ui/splitview/splitview","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/descriptors","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/selection/common/selection","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){function T(e){var t=document.createElement("div");return r.addClass(t,"explorer-view-content"),e.appendChild(t),t}function I(e){if(e){var t=e.getSelection();t.length>0&&k(e,t[0],.5),e.DOMFocus()}}function k(e,t,n){return e?e.reveal(t,n):i.Promise.as(null)}t.EventType={INTERNAL_VIEWLET_TITLE_AREA_UPDATE:"internalViewletTitleAreaUpdate"};var x=function(e){function n(t,n){e.call(this,t),this._telemetryService=n,this._telemetryData={},this.visible=!1}return __extends(n,e),n.prototype.getTitle=function(){return null},Object.defineProperty(n.prototype,"telemetryService",{get:function(){return this._telemetryService},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"telemetryData",{get:function(){return this._telemetryData},enumerable:!0,configurable:!0}),n.prototype.create=function(e){return this.parent=e,i.Promise.as(null)},n.prototype.getContainer=function(){return this.parent},n.prototype.setVisible=function(e){if(this.visible=e,e)this._telemetryData={},this._telemetryData.startTime=new Date;else if(this._telemetryData.timeSpent=(Date.now()-this._telemetryData.startTime)/1e3,delete this._telemetryData.startTime,this._telemetryService&&this._telemetryService.publicLog){var t="viewletShown";this._telemetryData.viewlet=this.getId(),this._telemetryService.publicLog(t,this._telemetryData)}return i.TPromise.as(null)},n.prototype.focus=function(){},n.prototype.getActions=function(){return[]},n.prototype.getSecondaryActions=function(){return[]},n.prototype.getActionItem=function(e){return null},n.prototype.getActionRunner=function(){return this.actionRunner||(this.actionRunner=new c.ActionRunner),this.actionRunner},n.prototype.updateTitleArea=function(){this.emit(t.EventType.INTERNAL_VIEWLET_TITLE_AREA_UPDATE,new d.ViewletEvent(this.getId()))},n.prototype.getSelection=function(){return w.Selection.EMPTY},n.prototype.isVisible=function(){return this.visible},n.prototype.getControl=function(){return null},n=__decorate([__param(1,S.ITelemetryService)],n)}(l.WorkbenchComponent);t.Viewlet=x;var A=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.create=function(t){var n=this;return e.prototype.create.call(this,t),this.viewerContainer=t.div(),this.viewer=this.createViewer(this.viewerContainer),this.toUnbind.push(this.viewer.addListener("selection",function(e){return n.onSelection(e)})),this.toUnbind.push(this.viewer.addListener("focus",function(e){return n.onFocus(e)})),i.Promise.as(null)},t.prototype.getViewer=function(){return this.viewer},t.prototype.setVisible=function(t){var n;return t?(n=e.prototype.setVisible.call(this,t),this.getViewer().onVisible()):(this.getViewer().onHidden(),n=e.prototype.setVisible.call(this,t)),n},t.prototype.focus=function(){if(this.viewer){var e=this.viewer.getSelection();e.length>0&&this.reveal(e[0],.5).done(null,o.onUnexpectedError),this.viewer.DOMFocus()}},t.prototype.reveal=function(e,t){return this.viewer?(this.wasLayouted||this.viewer.layout(),this.viewer.reveal(e,t)):i.Promise.as(null)},t.prototype.layout=function(e){this.viewer&&(this.wasLayouted=!0,this.viewer.layout(e.height))},t.prototype.getControl=function(){return this.viewer},t.prototype.getSelection=function(){return this.viewer?new w.StructuredSelection(this.viewer.getSelection()):new w.StructuredSelection([])},t.prototype.dispose=function(){this.viewer&&this.viewer.dispose(),e.prototype.dispose.call(this)},t}(x);t.ViewerViewlet=A;var R=function(e){function t(t,n,i,r,o,s){e.call(this,t,n),this.id=i,this.name=r,this.cssClass=o,this.order=s}return __extends(t,e),t}(b.AsyncDescriptor);t.ViewletDescriptor=R,t.Extensions={Viewlets:"workbench.contributions.viewlets"};var D=function(){function e(){this.viewlets=[]}return e.prototype.registerViewlet=function(e){null===this.viewletById(e.id)&&this.viewlets.push(e)},e.prototype.getViewlet=function(e){return this.viewletById(e)},e.prototype.getViewlets=function(){return this.viewlets.slice(0)},e.prototype.setViewlets=function(e){this.viewlets=e},e.prototype.viewletById=function(e){for(var t=0;t<this.viewlets.length;t++)if(this.viewlets[t].id===e)return this.viewlets[t];return null},e.prototype.setDefaultViewletId=function(e){this.defaultViewletId=e},e.prototype.getDefaultViewletId=function(){return this.defaultViewletId},e}();s.Registry.add(t.Extensions.Viewlets,new D);var L=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.viewletService=r,this.editorService=o,this.viewletId=i,this.enabled=!!this.viewletService&&!!this.editorService}return __extends(t,e),t.prototype.run=function(){if(this.otherViewletShowing()||!this.sidebarHasFocus())return this.viewletService.openViewlet(this.viewletId,!0);var e=this.editorService.getActiveEditor();return e&&e.focus(),i.Promise.as(!0)},t.prototype.otherViewletShowing=function(){var e=this.viewletService.getActiveViewlet();return!e||e.getId()!==this.viewletId},t.prototype.sidebarHasFocus=function(){var e=this.viewletService.getActiveViewlet(),t=document.activeElement;return e&&t&&r.isAncestor(t,e.getContainer().getHTMLElement())},t=__decorate([__param(3,g.IViewletService),__param(4,y.IWorkbenchEditorService)],t)}(c.Action);t.ToggleViewletAction=L;var M=function(e){function t(t,r,o,s){e.call(this,"workbench.action.collapse",n.localize(0,null),o,r,function(e){return t.getHighlight()?i.Promise.as(null):(t.collapseAll(),t.clearSelection(),t.DOMFocus(),i.Promise.as(null))})}return __extends(t,e),t=__decorate([__param(3,C.INullService)],t)}(c.Action);t.CollapseAction=M;var O=function(e){function t(t,n,i,r,o,s){e.call(this,{expandedBodySize:n,headerSize:24,initialState:i?v.CollapsibleState.COLLAPSED:v.CollapsibleState.EXPANDED}),this.viewName=r,this.messageService=o,this.contextMenuService=s,this.actionRunner=t,this.toDispose=[]}return __extends(t,e),t.prototype.create=function(){return i.Promise.as(null)},t.prototype.renderHeader=function(e){var t=this;this.toolBar=new p.ToolBar(a.$("div.actions").appendTo(e).getHTMLElement(),this.contextMenuService,{orientation:u.ActionsOrientation.HORIZONTAL,actionItemProvider:function(e){return t.getActionItem(e)}}),this.toolBar.actionRunner=this.actionRunner,this.toolBar.setActions(h.prepareActions(this.getActions()),h.prepareActions(this.getSecondaryActions()))(),new f.DelayedDragHandler(e,function(){t.isExpanded()||t.expand()})},t.prototype.renderViewTree=function(e){return T(e)},t.prototype.getViewer=function(){return this.tree},t.prototype.refresh=function(e,t,n){return i.Promise.as(null)},t.prototype.setVisible=function(e){return this.isVisible=e,e?this.tree.onVisible():this.tree.onHidden(),i.Promise.as(null)},t.prototype.focus=function(){I(this.tree)},t.prototype.getSelection=function(){return new w.StructuredSelection(this.tree.getSelection())},t.prototype.reveal=function(e,t){return k(this.tree,e,t)},t.prototype.layoutBody=function(e){this.treeContainer.style.height=e+"px",this.tree.layout(e)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t.prototype.dispose=function(){this.isDisposed=!0,this.treeContainer=null,this.tree.dispose(),this.toDispose=m.disposeAll(this.toDispose),this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t=__decorate([__param(4,E.IMessageService),__param(5,_.IContextMenuService)],t)}(v.FixedCollapsibleView);t.AdaptiveCollapsibleViewletView=O;var P=function(e){function t(t,n,i,r,o){e.call(this,{minimumSize:48,initialState:n?v.CollapsibleState.COLLAPSED:v.CollapsibleState.EXPANDED}),this.viewName=i,this.messageService=r,this.contextMenuService=o,this.actionRunner=t,this.toDispose=[]}return __extends(t,e),t.prototype.create=function(){return i.Promise.as(null)},t.prototype.renderHeader=function(e){var t=this;this.toolBar=new p.ToolBar(a.$("div.actions").appendTo(e).getHTMLElement(),this.contextMenuService,{orientation:u.ActionsOrientation.HORIZONTAL,actionItemProvider:function(e){return t.getActionItem(e)}}),this.toolBar.actionRunner=this.actionRunner,this.toolBar.setActions(h.prepareActions(this.getActions()),h.prepareActions(this.getSecondaryActions()))(),new f.DelayedDragHandler(e,function(){t.isExpanded()||t.expand()})},t.prototype.renderViewTree=function(e){return T(e)},t.prototype.getViewer=function(){return this.tree},t.prototype.refresh=function(e,t,n){return i.Promise.as(null)},t.prototype.setVisible=function(e){return this.isVisible=e,e?this.tree.onVisible():this.tree.onHidden(),i.Promise.as(null)},t.prototype.focus=function(){I(this.tree)},t.prototype.getSelection=function(){return new w.StructuredSelection(this.tree.getSelection())},t.prototype.reveal=function(e,t){return k(this.tree,e,t)},t.prototype.layoutBody=function(e){this.treeContainer.style.height=e+"px",this.tree.layout(e)},t.prototype.getActions=function(){return[]},t.prototype.getSecondaryActions=function(){return[]},t.prototype.getActionItem=function(e){return null},t.prototype.shutdown=function(){},t.prototype.dispose=function(){this.isDisposed=!0,this.treeContainer=null,this.tree.dispose(),this.toDispose=m.disposeAll(this.toDispose),this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t=__decorate([__param(3,E.IMessageService),__param(4,_.IContextMenuService)],t)}(v.CollapsibleView);t.CollapsibleViewletView=P});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/activitybar/activitybarPart",["require","exports","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/common/errors","vs/base/common/events","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/base/browser/ui/toolbar/toolbar","vs/platform/platform","vs/workbench/browser/events","vs/workbench/browser/viewlet","vs/workbench/browser/part","vs/workbench/browser/parts/activitybar/activityAction","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/activity/common/activityService","vs/workbench/services/part/common/partService","vs/platform/message/common/message","vs/css!./media/activityBarPart"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){var y=function(e){function t(t,n,i,r,o,s,a){e.call(this,a),this.viewletService=t,this.messageService=n,this.telemetryService=i,this.eventService=r,this.contextMenuService=o,this.keybindingService=s,this.serviceId=m.IActivityService,this.activityActionItems={},this.viewletIdToActions={},this.registerListeners()}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(l.EventType.VIEWLET_OPENING,function(t){return e.onViewletOpening(t)})),this.toUnbind.push(this.eventService.addListener(l.EventType.VIEWLET_CLOSED,function(t){return e.onViewletClosed(t)}))},t.prototype.onViewletOpening=function(e){if(this.viewletIdToActions[e.viewletId]){this.viewletIdToActions[e.viewletId].activate();for(var t in this.viewletIdToActions)this.viewletIdToActions.hasOwnProperty(t)&&t!==e.viewletId&&this.viewletIdToActions[t].deactivate()}},t.prototype.onViewletClosed=function(e){this.viewletIdToActions[e.viewletId]&&this.viewletIdToActions[e.viewletId].deactivate()},t.prototype.showActivity=function(e,t,n){var i=this.viewletIdToActions[e];i&&(i.setBadge(t),n&&(i["class"]=n))},t.prototype.clearActivity=function(e){this.showActivity(e,null)},t.prototype.createContentArea=function(e){var t=i.$(e),n=i.$(".content").appendTo(t);return this.createViewletSwitcher(n.clone()),this.createGlobalToolBarArea(n.clone()),n},t.prototype.createViewletSwitcher=function(e){var t=this;this.viewletSwitcherBar=new s.ActionBar(e,{actionItemProvider:function(e){return t.activityActionItems[e.id]}}),this.viewletSwitcherBar.getContainer().removeAttribute("tabindex"),this.viewletSwitcherBar.getContainer().addClass("position-top");var n=this.viewletService.getActiveViewlet(),i=u.Registry.as(d.Extensions.Viewlets),r=i.getViewlets().sort(function(e,t){return e.order-t.order}).map(function(e){var i=t.instantiationService.createInstance(_,e.id+".activity-bar-action",e),r=null,o=t.keybindingService.lookupKeybindings(e.id).map(function(e){return t.keybindingService.getLabelFor(e)});return o&&o.length&&(r=o[0]),t.activityActionItems[i.id]=new p.ActivityActionItem(i,e.name,r),t.viewletIdToActions[e.id]=i,n&&n.getId()===e.id&&i.activate(),i});this.viewletSwitcherBar.push(r,{label:!0,icon:!0})},t.prototype.createGlobalToolBarArea=function(e){var t=this;this.globalToolBar=new c.ToolBar(e.getHTMLElement(),this.contextMenuService,{actionItemProvider:function(e){return t.activityActionItems[e.id]},orientation:s.ActionsOrientation.VERTICAL}),this.globalToolBar.getContainer().removeAttribute("tabindex"),this.globalToolBar.getContainer().addClass("global"),this.globalToolBar.actionRunner.addListener(o.EventType.RUN,function(e){e.error&&!r.isPromiseCanceledError(e.error)&&t.messageService.show(g.Severity.Error,e.error),t.telemetryService&&t.telemetryService.publicLog("workbenchActionExecuted",{id:e.action.id,from:"activityBar"})});var n=this.getGlobalActions(!0),i=this.getGlobalActions(!1);n.length+i.length>0&&this.globalToolBar.getContainer().addClass("position-bottom"),this.globalToolBar.setActions(a.prepareActions(n),a.prepareActions(i))()},t.prototype.getGlobalActions=function(e){var t,n=this,i=u.Registry.as(a.Extensions.Actionbar);return t=e?i.getActionBarActionsForContext(a.Scope.GLOBAL,c.CONTEXT):i.getSecondaryActionBarActionsForContext(a.Scope.GLOBAL,c.CONTEXT),t.map(function(t){if(e){var r=null,o=n.keybindingService.lookupKeybindings(t.id).map(function(e){return n.keybindingService.getLabelFor(e)});o&&o.length&&(r=o[0]);var s=i.getActionItemForContext(a.Scope.GLOBAL,c.CONTEXT,t);s||(s=new p.ActivityActionItem(t,t.label,r)),s instanceof p.ActivityActionItem&&(s.keybinding=r),n.activityActionItems[t.id]=s}return t})},t.prototype.dispose=function(){this.viewletSwitcherBar&&(this.viewletSwitcherBar.dispose(),this.viewletSwitcherBar=null),this.globalToolBar&&(this.globalToolBar.dispose(),this.globalToolBar=null),e.prototype.dispose.call(this)},t}(h.Part);t.ActivitybarPart=y;var _=function(e){function t(t,n,i,r){e.call(this,t,n.name,n.cssClass),this.viewletService=i,this.partService=r,this.viewlet=n}return __extends(t,e),t.prototype.run=function(){var e=(new Date).getTime();if(e-t.lastRun<t.preventDoubleClickDelay)return n.Promise.as(!0);t.lastRun=e;var i=this.partService.isSideBarHidden(),o=this.viewletService.getActiveViewlet();return!i&&o&&o.getId()===this.viewlet.id?this.partService.setSideBarHidden(!0):(this.viewletService.openViewlet(this.viewlet.id,!0).done(null,r.onUnexpectedError),this.activate()),n.Promise.as(!0)},t.preventDoubleClickDelay=300,t.lastRun=0,t=__decorate([__param(2,f.IViewletService),__param(3,v.IPartService)],t)}(p.ActivityAction)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/baseEditor",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/workbench/browser/actionBarRegistry","vs/base/common/types","vs/platform/platform","vs/workbench/browser/viewlet","vs/workbench/common/editor","vs/platform/editor/common/editor","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o,s,a,c,u,l){
var d=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),Object.defineProperty(t.prototype,"input",{get:function(){return this._input},enumerable:!0,configurable:!0}),t.prototype.getInput=function(){return this._input||null},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.getOptions=function(){return this._options||null},t.prototype.setInput=function(e,t){return this._input=e,this._options=t,n.TPromise.as(null)},t.prototype.clearInput=function(){this._input=null,this._options=null},t.prototype.create=function(t){var n=e.prototype.create.call(this,t);return this.createEditor(t),n},t.prototype.setVisible=function(t,n){void 0===n&&(n=null);var i=e.prototype.setVisible.call(this,t);return this._position=n,i},t.prototype.changePosition=function(e){this._position=e},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.supportsSplitEditor=function(){return!1},t.prototype.dispose=function(){this._input=null,this._options=null,e.prototype.dispose.call(this)},t}(a.Viewlet);t.BaseEditor=d;var h=function(e){function t(t,n,i,r){e.call(this,i,r),this.id=t,this.name=n}return __extends(t,e),t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.describes=function(e){return e instanceof d&&e.getId()===this.id},t}(l.AsyncDescriptor);t.EditorDescriptor=h,t.Extensions={Editors:"workbench.contributions.editors"};var p="__$inputDescriptors",f=function(){function e(){this.editorInputFactoryConstructors=Object.create(null),this.editorInputFactoryInstances=Object.create(null),this.editors=[]}return e.prototype.setInstantiationService=function(e){this.instantiationService=e;for(var t in this.editorInputFactoryConstructors){var n=this.editorInputFactoryConstructors[t];this.createEditorInputFactory(t,n)}this.editorInputFactoryConstructors={}},e.prototype.createEditorInputFactory=function(e,t){var n=this.instantiationService.createInstance(t);this.editorInputFactoryInstances[e]=n},e.prototype.registerEditor=function(e,t){var n=[];o.isArray(t)?n=t:n.push(t),e[p]=n,this.editors.push(e)},e.prototype.getEditor=function(e){var t=this,n=function(e,i){for(var r=[],o=0;o<t.editors.length;o++)for(var s=t.editors[o],a=s[p],c=0;c<a.length;c++){var u=a[c].ctor;if(!i&&e.constructor===u){r.push(s);break}if(i&&e instanceof u){r.push(s);break}}return i||0!==r.length?i?r:r:n(e,!0)},i=n(e);if(i&&i.length>0){var r=e.getPreferredEditorId(i.map(function(e){return e.getId()}));return r?this.getEditorById(r):i[0]}return null},e.prototype.getEditorById=function(e){for(var t=0;t<this.editors.length;t++){var n=this.editors[t];if(n.getId()===e)return n}return null},e.prototype.getEditors=function(){return this.editors.slice(0)},e.prototype.setEditors=function(e){this.editors=e},e.prototype.getEditorInputs=function(){for(var e=[],t=0;t<this.editors.length;t++){var n=this.editors[t],i=n[p];e.push.apply(e,i.map(function(e){return e.ctor}))}return e},e.prototype.registerDefaultFileInput=function(e){this.defaultFileInputDescriptor=e},e.prototype.getDefaultFileInput=function(){return this.defaultFileInputDescriptor},e.prototype.registerEditorInputFactory=function(e,t){this.instantiationService?this.createEditorInputFactory(e,t):this.editorInputFactoryConstructors[e]=t},e.prototype.getEditorInputFactory=function(e){return this.editorInputFactoryInstances[e]},e}();s.Registry.add(t.Extensions.Editors,new f);var m=function(e){function t(){e.call(this),this.mapEditorInputActionContextToPrimaryActions=this.createPositionArray(),this.mapEditorInputActionContextToSecondaryActions=this.createPositionArray()}return __extends(t,e),t.prototype.createPositionArray=function(){for(var e=[],t=0;t<u.POSITIONS.length;t++)e[t]={};return e},t.prototype.toId=function(e){return e.editor.getId()+e.input.getId()},t.prototype.clearInputsFromCache=function(e,t){t?this.doClearInputsFromCache(this.mapEditorInputActionContextToPrimaryActions[e]):this.doClearInputsFromCache(this.mapEditorInputActionContextToSecondaryActions[e])},t.prototype.doClearInputsFromCache=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n.forEach(function(e){e.input=null,e.position=null})}},t.prototype.hasActions=function(e){return this.checkEditorContext(e)?this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)]?!0:this.hasActionsForEditorInput(e):!1},t.prototype.getActions=function(e){if(!this.checkEditorContext(e))return[];this.clearInputsFromCache(e.position,!0);var t=e.input,n=e.position,i=this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)];if(i)return i.forEach(function(e){e.input=t,e.position=n}),i;var r=this.getActionsForEditorInput(e);return r.forEach(function(e){e.input=t,e.position=n}),this.mapEditorInputActionContextToPrimaryActions[e.position][this.toId(e)]=r,r},t.prototype.hasSecondaryActions=function(e){return this.checkEditorContext(e)?this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)]?!0:this.hasSecondaryActionsForEditorInput(e):!1},t.prototype.getSecondaryActions=function(e){if(!this.checkEditorContext(e))return[];this.clearInputsFromCache(e.position,!1);var t=e.input,n=e.position,i=this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)];if(i)return i.forEach(function(e){e.input=t,e.position=n}),i;var r=this.getSecondaryActionsForEditorInput(e);return r.forEach(function(e){e.input=t,e.position=n}),this.mapEditorInputActionContextToSecondaryActions[e.position][this.toId(e)]=r,r},t.prototype.checkEditorContext=function(e){return e&&e.input instanceof c.EditorInput&&e.editor instanceof d&&!o.isUndefinedOrNull(e.position)},t.prototype.hasActionsForEditorInput=function(e){return!1},t.prototype.getActionsForEditorInput=function(e){return[]},t.prototype.hasSecondaryActionsForEditorInput=function(e){return!1},t.prototype.getSecondaryActionsForEditorInput=function(e){return[]},t}(r.ActionBarContributor);t.EditorInputActionContributor=m;var v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"input",{get:function(){return this._input},set:function(e){this._input=e,this.enabled=this.isEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!0,configurable:!0}),t.prototype.isEnabled=function(){return!!this._input},t}(i.Action);t.EditorInputAction=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/binaryDiffEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/binaryDiffEditor","vs/base/browser/ui/sash/sash","vs/base/browser/builder","vs/base/browser/ui/resourceviewer/resourceViewer","vs/base/browser/ui/scrollbar/impl/scrollableElement","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/binaryEditorModel","vs/workbench/services/editor/common/editorService","vs/platform/telemetry/common/telemetry","vs/css!./media/binarydiffeditor"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(e){function t(n,i){e.call(this,t.ID,n),this.editorService=i}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():i.localize(0,null)},t.prototype.createEditor=function(e){var t=this,n=document.createElement("div");n.className="binary-container",this.leftBinaryContainer=o.$(n),this.leftBinaryContainer.tabindex(0),this.leftScrollbar=new a.ScrollableElement(n,{horizontal:"hidden",vertical:"hidden"}),e.getHTMLElement().appendChild(this.leftScrollbar.getDomNode()),o.$(this.leftScrollbar.getDomNode()).addClass("binarydiff-left"),this.sash=new r.Sash(e.getHTMLElement(),this),this.sash.addListener("start",function(){return t.onSashDragStart()}),this.sash.addListener("change",function(e){return t.onSashDrag(e)}),this.sash.addListener("end",function(){return t.onSashDragEnd()});var i=document.createElement("div");i.className="binary-container",this.rightBinaryContainer=o.$(i),this.rightBinaryContainer.tabindex(0),this.rightScrollbar=new a.ScrollableElement(i,{horizontal:"hidden",vertical:"hidden"}),e.getHTMLElement().appendChild(this.rightScrollbar.getDomNode()),o.$(this.rightScrollbar.getDomNode()).addClass("binarydiff-right")},t.prototype.setInput=function(t,r){var o=this,s=this.getInput();e.prototype.setInput.call(this,t,r);var a=r&&r.forceOpen;return!a&&t.matches(s)?n.TPromise.as(null):this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e.originalModel instanceof u.BinaryEditorModel&&e.modifiedModel instanceof u.BinaryEditorModel))return n.TPromise.wrapError(i.localize(1,null));if(!o.getInput()||o.getInput()!==t)return null;var r=e.originalModel;o.renderInput(r.getName(),r.getResource(),!0);var s=e.modifiedModel;o.renderInput(s.getName(),s.getResource(),!1)})},t.prototype.renderInput=function(e,t,n){this.leftContainerWidth&&this.dimension&&this.leftContainerWidth!==this.dimension.width/2&&(this.leftContainerWidth=this.dimension.width/2,this.layoutContainers(),this.sash.layout());var i=n?this.leftBinaryContainer:this.rightBinaryContainer,r=n?this.leftScrollbar:this.rightScrollbar;s.ResourceViewer.show(e,t,i,r)},t.prototype.clearInput=function(){o.$(this.leftBinaryContainer).empty(),o.$(this.rightBinaryContainer).empty(),e.prototype.clearInput.call(this)},t.prototype.layout=function(e){var t=this.dimension;if(this.dimension=e,this.leftContainerWidth&&t){var n=this.leftContainerWidth/t.width;this.leftContainerWidth=this.dimension.width*n}else this.leftContainerWidth=this.dimension.width/2;this.sash.layout(),this.layoutContainers()},t.prototype.layoutContainers=function(){this.leftBinaryContainer.size(this.leftContainerWidth,this.dimension.height),this.leftScrollbar.onElementDimensions(),this.leftScrollbar.onElementInternalDimensions(),this.rightBinaryContainer.size(this.dimension.width-this.leftContainerWidth,this.dimension.height),this.rightScrollbar.onElementDimensions(),this.rightScrollbar.onElementInternalDimensions()},t.prototype.onSashDragStart=function(){this.startLeftContainerWidth=this.leftContainerWidth},t.prototype.onSashDrag=function(e){var n=this.startLeftContainerWidth+e.currentX-e.startX;this.leftContainerWidth=Math.max(t.MIN_CONTAINER_WIDTH,n),this.dimension.width-this.leftContainerWidth<t.MIN_CONTAINER_WIDTH&&(this.leftContainerWidth=this.dimension.width-t.MIN_CONTAINER_WIDTH),this.layoutContainers()},t.prototype.onSashDragEnd=function(){this.sash.layout()},t.prototype.getVerticalSashTop=function(e){return 0},t.prototype.getVerticalSashLeft=function(e){return this.leftContainerWidth},t.prototype.getVerticalSashHeight=function(e){return this.dimension.height},t.prototype.focus=function(){this.rightBinaryContainer.domFocus()},t.prototype.dispose=function(){this.sash.dispose(),this.leftScrollbar.dispose(),this.rightScrollbar.dispose(),this.leftBinaryContainer.destroy(),this.rightBinaryContainer.destroy(),e.prototype.dispose.call(this)},t.ID="workbench.editors.binaryResourceDiffEditor",t.MIN_CONTAINER_WIDTH=100,t=__decorate([__param(0,d.ITelemetryService),__param(1,l.IWorkbenchEditorService)],t)}(c.BaseEditor);t.BinaryResourceDiffEditor=h});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/binaryEditor",["require","exports","vs/nls!vs/workbench/browser/parts/editor/binaryEditor","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/ui/resourceviewer/resourceViewer","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/binaryEditorModel","vs/workbench/services/editor/common/editorService","vs/platform/telemetry/common/telemetry","vs/css!./media/binaryeditor"],function(e,t,n,i,r,o,s,a,c,u){var l=function(e){function t(t,n,i){e.call(this,t,n),this._editorService=i}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),t.prototype.createEditor=function(e){var t=document.createElement("div");t.className="binary-container monaco-editor-background",this.binaryContainer=r.$(t),this.binaryContainer.tabindex(0),e.getHTMLElement().appendChild(this.binaryContainer.getHTMLElement())},t.prototype.setInput=function(t,n){var r=this,s=this.getInput();e.prototype.setInput.call(this,t,n);var c=n&&n.forceOpen;return!c&&t.matches(s)?i.TPromise.as(null):this._editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof a.BinaryEditorModel))return i.TPromise.wrapError("Invalid editor input. Binary resource editor requires a model instance of BinaryEditorModel.");if(!r.getInput()||r.getInput()!==t)return null;var n=e;return o.ResourceViewer.show(n.getName(),n.getResource(),r.binaryContainer),i.TPromise.as(null)})},t.prototype.clearInput=function(){r.$(this.binaryContainer).empty(),e.prototype.clearInput.call(this)},t.prototype.layout=function(e){this.binaryContainer.size(e.width,e.height)},t.prototype.focus=function(){this.binaryContainer.domFocus()},t.prototype.dispose=function(){this.binaryContainer.destroy(),e.prototype.dispose.call(this)},t}(s.BaseEditor);t.BaseBinaryResourceEditor=l;var d=function(e){function t(n,i){e.call(this,t.ID,n,i)}return __extends(t,e),t.ID="workbench.editors.binaryResourceEditor",t=__decorate([__param(0,u.ITelemetryService),__param(1,c.IWorkbenchEditorService)],t)}(l);t.BinaryResourceEditor=d});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/iframeEditorInput",["require","exports","vs/base/common/winjs.base","vs/workbench/common/editor","vs/platform/platform","vs/workbench/browser/parts/editor/baseEditor"],function(e,t,n,i,r,o){var s=function(e){function t(t,n,i){e.call(this),this.name=t,this.description=n,this.url=i}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getName=function(){return this.name},t.prototype.getDescription=function(){return this.description},t.prototype.resolve=function(e){var t,i=this;if(this.cachedModel&&!e)t=n.TPromise.as(this.cachedModel);else if(this.cachedModel&&e)t=this.cachedModel.load();else{var s=r.Registry.as(o.Extensions.Editors).getEditor(this);if(!s)throw new Error("Unable to find an editor in the registry for this input.");var a=this.createModel();t=a.load()}return t.then(function(e){return i.cachedModel=e,i.cachedModel})},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.url===this.url&&i.name===this.name&&i.description===this.description}return!1},t.prototype.dispose=function(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=null),e.prototype.dispose.call(this)},t.ID="workbench.editors.iFrameEditorInput",t}(i.EditorInput);t.IFrameEditorInput=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/iframeEditor",["require","exports","vs/nls!vs/workbench/browser/parts/editor/iframeEditor","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/dom","vs/base/common/errors","vs/workbench/common/editor","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/iframeEditorInput","vs/workbench/browser/parts/editor/iframeEditorModel","vs/platform/storage/common/storage","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/css!./media/iframeeditor"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(e){function t(n,i,r){e.call(this,t.ID,n),this.editorService=i,this.storageService=r}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},t.prototype.createEditor=function(e){var n=document.createElement("div");n.className="iframe-container monaco-editor-background",this.iframeContainer=r.$(n),this.iframeContainer.tabindex(0),this.iframeBuilder=r.$(this.iframeContainer).element("iframe").addClass("iframe"),this.iframeBuilder.attr({frameborder:"0"}),this.iframeBuilder.removeProperty(t.RESOURCE_PROPERTY),e.getHTMLElement().appendChild(n)},t.prototype.setInput=function(t,n){var r=this.getInput();e.prototype.setInput.call(this,t,n);var o=n&&n.forceOpen;return!o&&t.matches(r)?i.TPromise.as(null):t instanceof u.IFrameEditorInput?this.doSetInput(t,!0):i.TPromise.wrapError("Invalid editor input. IFrame editor requires an input instance of IFrameEditorInput.")},t.prototype.doSetInput=function(e,n){var r=this;return this.editorService.resolveEditorModel(e,!0).then(function(s){if(!(s instanceof l.IFrameEditorModel))return i.TPromise.wrapError("Invalid editor input. IFrame editor requires a model instance of IFrameEditorModel.");if(!r.getInput()||r.getInput()!==e)return null;var a=r.storageService.getBoolean(t.allowScriptExecutionSettingsKey,d.StorageScope.WORKSPACE,!1),c=s;if(c.hasContents()){var u=!n&&!!r.iframeBuilder.getProperty(t.RESOURCE_PROPERTY),h=c.getContents();a||(h.body=o.removeScriptTags(h.body)),h.body=h.body+r.enableKeybindings();try{r.setFrameContents(c.resource,u?h.body:[h.head,h.body,h.tail].join("\n"),u)}catch(p){setTimeout(function(){return r.reload(!0)},1e3)}}else a?r.iframeBuilder.removeAttribute("sandbox"):r.iframeBuilder.attr({sandbox:"allow-same-origin"}),r.iframeBuilder.src(c.getUrl()+"?etag="+(new Date).getTime())})},t.prototype.setFrameContents=function(e,n,i){var r=this.iframeBuilder.getHTMLElement().contentWindow;i?r.document.body.innerHTML=n:(r.document.open("text/html","replace"),r.document.write(n),r.document.close(),r.scrollTo(0,0),this.iframeBuilder.setProperty(t.RESOURCE_PROPERTY,e.toString()))},t.prototype.enableKeybindings=function(){return["<script>","var ignoredKeys = [32 /* space */, 33 /* page up */, 34 /* page down */, 38 /* up */, 40 /* down */];","var ignoredCtrlCmdKeys = [67 /* c */];",'window.document.body.addEventListener("keydown", function(event) {',"	try {","		if (ignoredKeys.some(function(i) { return i === event.keyCode; })) {","			if (!event.ctrlKey && !event.altKey && !event.shiftKey && !event.metaKey) {","				return;","			}","		}","","		if (ignoredCtrlCmdKeys.some(function(i) { return i === event.keyCode; })) {","			if (event.ctrlKey || event.metaKey) {","				return;","			}","		}","","		event.preventDefault();","",'		var fakeEvent = document.createEvent("KeyboardEvent");','		Object.defineProperty(fakeEvent, "keyCode", {',"			get : function() {","				return event.keyCode;","			}","		});",'		Object.defineProperty(fakeEvent, "which", {',"			get : function() {","				return event.keyCode;","			}","		});",'		Object.defineProperty(fakeEvent, "target", {',"			get : function() {","				return window && window.parent.document.body;","			}","		});","",'		fakeEvent.initKeyboardEvent("keydown", true, true, document.defaultView, null, null, event.ctrlKey, event.altKey, event.shiftKey, event.metaKey);',"","		window.parent.document.dispatchEvent(fakeEvent);","	} catch (error) {}","});",'window.document.addEventListener("dragover", function (e) {',"	e.preventDefault();","});",'window.document.addEventListener("drop", function (e) {',"	e.preventDefault();","});",'window.document.body.addEventListener("dragover", function (e) {',"	e.preventDefault();","});",'window.document.body.addEventListener("drop", function (e) {',"	e.preventDefault();","});","</script>"].join("\n")},t.prototype.clearInput=function(){this.clearIFrame(),e.prototype.clearInput.call(this)},t.prototype.clearIFrame=function(){this.iframeBuilder.src("about:blank"),this.iframeBuilder.removeProperty(t.RESOURCE_PROPERTY)},t.prototype.layout=function(e){this.iframeContainer.size(e.width,e.height),this.iframeBuilder.size(e.width,e.height)},t.prototype.focus=function(){this.iframeContainer.domFocus()},t.prototype.changePosition=function(t){var n=this;e.prototype.changePosition.call(this,t),setTimeout(function(){return n.reload(!0)})},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.reload=function(e){this.input&&(e&&this.clearIFrame(),this.doSetInput(this.input).done(null,s.onUnexpectedError))},t.prototype.dispose=function(){this.iframeContainer.destroy(),e.prototype.dispose.call(this)},t.ID="workbench.editors.iFrameEditor",t.allowScriptExecutionSettingsKey="workbench.editor.allowIframeScriptExecution",t.RESOURCE_PROPERTY="resource",t=__decorate([__param(0,h.ITelemetryService),__param(1,p.IWorkbenchEditorService),__param(2,d.IStorageService)],t)}(c.BaseEditor);t.IFrameEditor=f;var m=function(e){function t(t,i){e.call(this,"workbench.files.action.toggleJSInIFrameEditor",n.localize(1,null)),this.editorService=t,this.storageService=i}return __extends(t,e),Object.defineProperty(t.prototype,"label",{get:function(){var e=this.storageService.getBoolean(f.allowScriptExecutionSettingsKey,d.StorageScope.WORKSPACE,!1);return e?n.localize(2,null):n.localize(3,null)},enumerable:!0,configurable:!0}),t.prototype.run=function(e){this.storageService.swap(f.allowScriptExecutionSettingsKey,!0,!1,d.StorageScope.WORKSPACE,!1);var t=new a.EditorOptions;return t.forceOpen=!0,this.editorService.openEditor(this.input,t,this.position)},t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,d.IStorageService)],t)}(c.EditorInputAction);t.ToggleJavaScriptInIFrameEditorInputAction=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/quickopen/editorHistoryModel",["require","exports","vs/platform/platform","vs/base/common/filters","vs/base/common/types","vs/base/common/paths","vs/base/common/labels","vs/base/common/events","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/common/editor","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/quickopen"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=200,f=function(e){function t(t,n,i,o,s,a){e.call(this,t),this.contextService=n,this.input=i,this.model=a;var c=l.getUntitledOrFileResource(i);if(c)this.resource=c;else{var u=i;r.isFunction(u.getResource)&&(this.resource=u.getResource())}this.setHighlights(o,s)}return __extends(t,e),t.prototype.clone=function(e,n){return new t(this.editorService,this.contextService,this.input,e,n,this.model)},t.prototype.getPrefix=function(){var e=this.input.getStatus();return e&&e.decoration?e.decoration+" ":void 0},t.prototype.getLabel=function(){return this.input.getName()},t.prototype.getDescription=function(){return this.input.getDescription()},t.prototype.getResource=function(){return this.resource},t.prototype.getInput=function(){return this.input},t.prototype.matches=function(e){return this.input.matches(e)},t.prototype.run=function(e,t){var n=this;if(e===c.Mode.OPEN){var i=t.event,r=!t.quickNavigateConfiguration&&i&&(i.ctrlKey||i.metaKey||i.payload&&i.payload.originalEvent&&(i.payload.originalEvent.ctrlKey||i.payload.originalEvent.metaKey));return this.editorService.openEditor(this.input,null,r).done(function(){n.input.matches(n.editorService.getActiveEditorInput())||n.model.remove(n.input)}),!0}return!1},t}(h.EditorQuickOpenEntry);t.EditorHistoryEntry=f;var m=function(e){function t(t,n,i){e.call(this),this.editorService=t,this.instantiationService=n,this.contextService=i}return __extends(t,e),t.prototype.add=function(e){var t=this;if(e.getName()){var n=e.addListener(a.EventType.DISPOSE,function(){t.remove(e),n()});this.remove(e),this.entries.unshift(new f(this.editorService,this.contextService,e,null,null,this)),this.entries.length>p&&(this.entries=this.entries.slice(0,p))}},t.prototype.remove=function(e){var t=this.indexOf(e);t>=0&&this.entries.splice(t,1)},t.prototype.indexOf=function(e){for(var t=0;t<this.entries.length;t++){var n=this.entries[t];if(n.matches(e))return t}return-1},t.prototype.saveTo=function(e){for(var t=n.Registry.as(d.Extensions.Editors),i=[],o=this.entries.length-1;o>=0;o--){var s=this.entries[o],a=s.getInput(),c=t.getEditorInputFactory(a.getId());if(c){var u=c.serialize(a);r.isString(u)&&i.push({id:a.getId(),value:u})}}i.length>0&&(e.entries=i)},t.prototype.loadFrom=function(e){var t=n.Registry.as(d.Extensions.Editors),i=e.entries;if(i&&i.length>0)for(var o=0;o<i.length;o++){var s=i[o],a=t.getEditorInputFactory(s.id);if(a&&r.isString(s.value)){var c=a.deserialize(this.instantiationService,s.value);c&&this.add(c)}}},t.prototype.getEntries=function(){return this.entries.slice(0)},t.prototype.getResults=function(e){e=e.trim();for(var t=e.indexOf(o.nativeSep)>=0,n=[],r=0;r<this.entries.length;r++){var a=this.entries[r];if(a.getResource()){var c=t?s.getPathLabel(a.getResource(),this.contextService):a.getLabel();if(i.matchesFuzzy(e,c)){var l=u.QuickOpenEntry.highlight(a,e),d=l.labelHighlights,h=l.descriptionHighlights;n.push(a.clone(d,h))}}}return n.sort(function(t,n){return u.QuickOpenEntry.compare(t,n,e)})},t}(u.QuickOpenModel);t.EditorHistoryModel=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/quickopen/quickOpenController",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/quickopen/quickOpenController","vs/base/browser/builder","vs/base/common/strings","vs/base/common/filters","vs/base/common/uuid","vs/base/common/types","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/base/parts/quickopen/browser/quickOpenWidget","vs/workbench/browser/actionBarRegistry","vs/platform/platform","vs/workbench/browser/component","vs/workbench/browser/events","vs/base/common/eventSource","vs/workbench/common/constants","vs/workbench/common/memento","vs/workbench/browser/quickopen","vs/workbench/browser/parts/quickopen/editorHistoryModel","vs/base/common/errors","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/message/common/message","vs/css!./media/quickopen"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w){var C="workbench.component.quickopen",T="quickopen.editorhistory",I="?",k=5,x="inQuickOpen",A=function(e){function t(t,n,i,r,o,s,a,c){e.call(this,C),this.eventService=t,this.storageService=n,this.editorService=i,this.viewletService=r,this.messageService=o,this.telemetryService=s,this.contextService=a,this.serviceId=S.IQuickOpenService,this.actionProvider=new h.ContributableActionProvider,this.previousValue="",this.mapResolvedHandlersToPrefix={},this.autoSaveHistoryCounter=0,this.promisesToCompleteOnHide=[],this.inQuickOpenMode=c.createKey(x,!1),this._onShow=new v.EventSource,this._onHide=new v.EventSource}return __extends(t,e),Object.defineProperty(t.prototype,"onShow",{get:function(){return this._onShow.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide",{get:function(){return this._onHide.value},enumerable:!0,configurable:!0}),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.getEditorHistoryModel=function(){return this.editorHistoryModel},t.prototype.create=function(){var e=this;this.toUnbind.push(this.eventService.addListener(m.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)})),this.toUnbind.push(this.eventService.addListener(m.EventType.EDITOR_SET_INPUT_ERROR,function(t){return e.onEditorInputSetError(t)})),this.editorHistoryModel=new b.EditorHistoryModel(this.editorService,this.instantiationService,this.contextService),this.memento=this.getMemento(this.storageService,y.Scope.WORKSPACE),this.memento[T]&&this.editorHistoryModel.loadFrom(this.memento[T])},t.prototype.onEditorInputChanging=function(e){if(e.editorInput){var t=this.editorService.getActiveEditor();if(t&&e.editor&&t!==e.editor)return;this.editorHistoryModel.add(e.editorInput),this.autoSaveHistoryCounter++>=k&&(this.saveEditorHistory(!0),this.autoSaveHistoryCounter=0)}},t.prototype.onEditorInputSetError=function(e){e.editorInput&&this.removeEditorHistoryEntry(e.editorInput)},t.prototype.getEditorHistory=function(){return this.editorHistoryModel?this.editorHistoryModel.getEntries().map(function(e){return e.getInput()}):[]},t.prototype.removeEditorHistoryEntry=function(e){this.editorHistoryModel.remove(e)},t.prototype.quickNavigate=function(e,t){this.quickOpenWidget&&this.quickOpenWidget.quickNavigate(e,t)},t.prototype.input=function(e){return e||(e=Object.create(null)),this.pick([],{inputValue:e.value,placeHolder:e.placeHolder,inputPrompt:e.prompt,inputMode:!0,inputPassword:e.password,autoFocus:{autoFocusFirstEntry:!0}})},t.prototype.pick=function(e,t){var c=this;t||(t=Object.create(null));var u=t.autoFocus,h=a.generateUuid();this.currentPickerToken=h,this.pickOpenWidget?this.pickOpenWidget.setPlaceHolder(t.placeHolder||""):(this.pickOpenWidget=new d.QuickOpenWidget(r.withElementById(g.Identifiers.WORKBENCH_CONTAINER).getHTMLElement(),{onOk:function(){},onCancel:function(){},onType:function(e){},onShow:function(){return c.emitQuickOpenVisibilityChange(!0)},onHide:function(){c.restoreFocus(),c.emitQuickOpenVisibilityChange(!1)}},{inputPlaceHolder:t.placeHolder||""},this.telemetryService),this.pickOpenWidget.create()),t.inputMode&&t.inputValue&&this.pickOpenWidget.setValue(t.inputValue),this.pickOpenWidget.setPassword(t.inputMode&&t.inputPassword),this.layoutDimensions&&this.pickOpenWidget.layout(this.layoutDimensions);var p=e;return n.Promise.is(e)||(p=n.Promise.as(e)),new n.TPromise(function(e,r,a){var d=!1,f=t.inputValue||"";p.then(function(n){if(c.currentPickerToken===h){d=!0,c.pickOpenWidget.getProgressBar().stop().getContainer().hide();var r=new l.QuickOpenModel,p=n.map(function(e){if("string"==typeof e)return new D(e,null,function(){return a(e)});var t=e;return t.height&&t.render?new L(t.label,t.description,t.height,t.render.bind(t),function(){return a(e)}):new D(t.label,t.description,function(){
return a(e)})});0===n.length&&(t.inputMode?t.inputPrompt?p.push(new D(i.localize(0,null,t.inputPrompt))):p.push(new D(i.localize(1,null))):p.push(new D(i.localize(2,null)))),r.setEntries(p),c.pickOpenWidget.setCallbacks({onOk:function(){if(t.inputMode)return e(f);if(0===n.length)return null;var i=-1;p.forEach(function(e,t){e.selected&&(i=t)}),e(n[i]||null)},onCancel:function(){return e(void 0)},onFocusLost:function(){return!!t.inputMode},onType:function(e){f=e,0!==n.length&&(e=e?o.trim(e):e,e?p.forEach(function(n){var i=s.matchesFuzzy(e,n.getLabel()),r=null;t.matchOnDescription&&(r=s.matchesFuzzy(e,n.getDescription())),i||r?(n.setHighlights(i,r),n.setHidden(!1)):(n.setHighlights(null,null),n.setHidden(!0))}):p.forEach(function(e){e.setHighlights(null),e.setHidden(!1)}),c.pickOpenWidget.refresh(r,e?{autoFocusFirstEntry:!0}:u))},onShow:function(){c.emitQuickOpenVisibilityChange(!0)},onHide:function(){c.restoreFocus(),c.emitQuickOpenVisibilityChange(!1)}}),c.pickOpenWidget.isVisible()?c.pickOpenWidget.setInput(r,u):c.pickOpenWidget.show(r,u)}},function(e){c.pickOpenWidget.hide(),r(e)}),n.Promise.timeout(800).then(function(){d||c.currentPickerToken!==h||c.pickOpenWidget.getProgressBar().infinite().getContainer().show()}),d||c.pickOpenWidget.show(new l.QuickOpenModel)})},t.prototype.emitQuickOpenVisibilityChange=function(e){var t=this;this.visibilityChangeTimeoutHandle&&window.clearTimeout(this.visibilityChangeTimeoutHandle),this.visibilityChangeTimeoutHandle=setTimeout(function(){e?t._onShow.fire():t._onHide.fire(),t.visibilityChangeTimeoutHandle=void 0},100)},t.prototype.refresh=function(e){return this.quickOpenWidget.isVisible()?e&&this.previousValue!==e?n.TPromise.as(null):this.show(this.previousValue):n.TPromise.as(null)},t.prototype.show=function(e,t){var o=this;this.previousValue=e;var s=new n.Promise(function(e){o.promisesToCompleteOnHide.push(e)}),a=p.Registry.as(_.Extensions.Quickopen),c=a.getQuickOpenHandler(e);if(!c){var u=a.getDefaultQuickOpenHandlers();u.length>0&&(c=u[0])}if(c&&this.telemetryService.publicLog("quickOpenWidgetShown",{mode:c.getId(),quickNavigate:!!t}),this.quickOpenWidget||(this.quickOpenWidget=new d.QuickOpenWidget(r.withElementById(g.Identifiers.WORKBENCH_CONTAINER).getHTMLElement(),{onOk:function(){return o.onClose(!1)},onCancel:function(){return o.onCancel()},onType:function(e){return o.onType(e||"")},onShow:function(){o.inQuickOpenMode.set(!0),o.emitQuickOpenVisibilityChange(!0)},onHide:function(){for(o.inQuickOpenMode.reset();o.promisesToCompleteOnHide.length;)o.promisesToCompleteOnHide.pop()(!0);o.restoreFocus(),o.emitQuickOpenVisibilityChange(!1)}},{inputPlaceHolder:this.hasHandler(I)?i.localize(3,null):""},this.telemetryService),this.quickOpenWidget.create()),this.layoutDimensions&&this.quickOpenWidget.layout(this.layoutDimensions),!this.quickOpenWidget.isVisible()||t)if(e)this.quickOpenWidget.show(e);else{var l=this.getEditorHistoryModelWithGroupLabel();l.getEntries().length<2&&(t=null);var h;if(t){var f=this.editorService.getVisibleEditors().length;h={autoFocusFirstEntry:0===f,autoFocusSecondEntry:0!==f}}else h={autoFocusFirstEntry:!0};this.quickOpenWidget.show(l,h,t)}else this.quickOpenWidget.show(e||"");return s},t.prototype.hasHandler=function(e){return!!p.Registry.as(_.Extensions.Quickopen).getQuickOpenHandler(e)},t.prototype.getEditorHistoryModelWithGroupLabel=function(){var e=this.editorHistoryModel.getEntries();return e.length>0&&(e[0]=new l.QuickOpenEntryGroup(e[0],i.localize(4,null),!1)),new l.QuickOpenModel(e,this.actionProvider)},t.prototype.onCancel=function(e){void 0===e&&(e=!0),e&&this.onClose(!0)},t.prototype.onClose=function(e){this.previousActiveHandlerDescriptor=null;for(var t in this.mapResolvedHandlersToPrefix)if(this.mapResolvedHandlersToPrefix.hasOwnProperty(t)){var n=this.mapResolvedHandlersToPrefix[t];n.onClose(e)}},t.prototype.restoreFocus=function(){var e=this.editorService.getActiveEditor();if(e)return void e.focus();var t=this.viewletService.getActiveViewlet();t&&t.focus()},t.prototype.onType=function(e){var t=this;this.previousValue=e;var i=a.generateUuid();this.currentResultToken=i,this.quickOpenWidget.getProgressBar().stop().getContainer().hide(),this.quickOpenWidget.setExtraClass(null);var r=o.trim(e);if(!r)return void this.quickOpenWidget.setInput(this.getEditorHistoryModelWithGroupLabel(),{autoFocusFirstEntry:!0});var s,u=!1,l=p.Registry.as(_.Extensions.Quickopen),d=l.getQuickOpenHandler(e);if(d)s=this.handleSpecificHandler(d,e,i);else{var h=l.getDefaultQuickOpenHandlers();s=this.handleDefaultHandlers(h,e,i)}this.previousActiveHandlerDescriptor=d,n.Promise.timeout(d&&d.instantProgress?0:800).then(function(){u||i!==t.currentResultToken||t.quickOpenWidget.getProgressBar().infinite().getContainer().show()}),s.done(function(){u=!0,i===t.currentResultToken&&t.quickOpenWidget.getProgressBar().getContainer().hide()},function(e){u=!0,E.onUnexpectedError(e),t.messageService.show(w.Severity.Error,c.isString(e)?new Error(e):e)})},t.prototype.handleDefaultHandlers=function(e,t,r){var o=this,s=this.editorHistoryModel.getResults(t);s.length>0&&(s[0]=new l.QuickOpenEntryGroup(s[0],i.localize(5,null),!1));var a=new l.QuickOpenModel(s,this.actionProvider);if(this.quickOpenWidget.setInput(a,{autoFocusFirstEntry:!0}),0===e.length)return n.TPromise.as(null);var u=[];return e.forEach(function(e){u.push(o.resolveHandler(e))}),n.Promise.join(u).then(function(e){var i=[];return e.forEach(function(e){var n=e.canRun();c.isUndefinedOrNull(n)||"boolean"==typeof n&&!n||"string"==typeof n||i.push(e.getResults(t).then(function(t){if(o.currentResultToken===r){var n=t&&t.entries;n||(n=[]),o.mergeResults(a,n,e.getGroupLabel())}}))}),n.TPromise.join(i)})},t.prototype.mergeResults=function(e,t,n){for(var r=this.mapEntriesToResource(e),o=[],s=0;s<t.length;s++){var a=t[s],c=a.getResource();c&&r[c.toString()]||o.push(a)}if(o.length>0){var u=e.getEntries().length>0;o[0]=new l.QuickOpenEntryGroup(o[0],n,u),e.addEntries(o),this.quickOpenWidget.refresh(e,{autoFocusFirstEntry:!0})}else 0===e.getEntries().length&&(e.addEntries([new R(i.localize(6,null))]),this.quickOpenWidget.refresh(e,{autoFocusFirstEntry:!0}))},t.prototype.handleSpecificHandler=function(e,t,r){var o=this;return this.resolveHandler(e).then(function(s){t=t.substr(e.prefix.length);var a=s.canRun();if(c.isUndefinedOrNull(a)||"boolean"==typeof a&&!a||"string"==typeof a){var u="string"==typeof a?a:i.localize(7,null),d=new l.QuickOpenModel([new R(u)],o.actionProvider);return o.showModel(d,s.getAutoFocus(t)),n.TPromise.as(null)}var h=s.getClass();return h&&o.quickOpenWidget.setExtraClass(h),o.previousActiveHandlerDescriptor!==e&&o.clearModel(),s.getResults(t).then(function(e){if(o.currentResultToken===r)if(e&&e.entries.length)o.showModel(e,s.getAutoFocus(t));else{var n=new l.QuickOpenModel([new R(s.getEmptyLabel(t))]);o.showModel(n,s.getAutoFocus(t))}})})},t.prototype.showModel=function(e,t){return this.quickOpenWidget.getInput()===e?void this.quickOpenWidget.refresh(e,t):void this.quickOpenWidget.setInput(e,t)},t.prototype.clearModel=function(){this.showModel(new l.QuickOpenModel,null)},t.prototype.mapEntriesToResource=function(e){var t=e.getEntries(),n={};return t.forEach(function(e){e.getResource()&&(n[e.getResource().toString()]=e)}),n},t.prototype.resolveHandler=function(e){var t=this,i=e.getId();return this.mapResolvedHandlersToPrefix[i]?n.TPromise.as(this.mapResolvedHandlersToPrefix[i]):this.instantiationService.createInstance(e).then(function(e){return t.mapResolvedHandlersToPrefix[i]=e,e},function(t){return n.TPromise.wrapError("Unable to instanciate quick open handler "+e.moduleName+" - "+e.ctorName+": "+JSON.stringify(t))})},t.prototype.shutdown=function(){this.saveEditorHistory(!1),e.prototype.shutdown.call(this)},t.prototype.saveEditorHistory=function(e){this.memento[T]||(this.memento[T]={}),this.editorHistoryModel.saveTo(this.memento[T]),e&&this.saveMemento()},t.prototype.layout=function(e){this.layoutDimensions=e,this.quickOpenWidget&&this.quickOpenWidget.layout(this.layoutDimensions),this.pickOpenWidget&&this.pickOpenWidget.layout(this.layoutDimensions)},t.prototype.dispose=function(){this.quickOpenWidget&&this.quickOpenWidget.dispose(),this.pickOpenWidget&&this.pickOpenWidget.dispose(),e.prototype.dispose.call(this)},t}(f.WorkbenchComponent);t.QuickOpenController=A;var R=function(e){function t(t){e.call(this),this.placeHolderLabel=t}return __extends(t,e),t.prototype.getLabel=function(){return this.placeHolderLabel},t}(l.QuickOpenEntry),D=function(e){function t(t,n,i){e.call(this,t),this.onPreview=i,this.description=n}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),t.prototype.getDescription=function(){return this.description},t.prototype.run=function(e,t){return e===u.Mode.OPEN?(this._selected=!0,!0):(e===u.Mode.PREVIEW&&this.onPreview&&this.onPreview(),!1)},t}(R),L=function(e){function t(t,n,i,r,o){e.call(this),this.label=t,this.description=n,this.height=i,this.renderFn=r,this.onPreview=o}return __extends(t,e),t.prototype.getHeight=function(){return this.height},t.prototype.render=function(e,t,n){return this.renderFn(e,t,n)},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),t.prototype.getLabel=function(){return this.label},t.prototype.getDescription=function(){return this.description},t.prototype.run=function(e,t){return e===u.Mode.OPEN?(this._selected=!0,!0):(e===u.Mode.PREVIEW&&this.onPreview&&this.onPreview(),!1)},t}(l.QuickOpenEntryItem)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/sidebar/sidebarPart",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/sidebar/sidebarPart","vs/platform/platform","vs/base/browser/builder","vs/base/common/uuid","vs/base/common/events","vs/base/common/timer","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/base/browser/ui/toolbar/toolbar","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/progressbar/progressbar","vs/workbench/browser/actionBarRegistry","vs/base/common/actions","vs/workbench/browser/part","vs/workbench/browser/events","vs/workbench/browser/viewlet","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","vs/workbench/services/progress/browser/progressService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/platform/message/common/message","vs/base/common/keyCodes","vs/css!./media/sidebarpart"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I){var k=function(e){function t(t,n,i,o,s,a,c,u){e.call(this,u),this.messageService=t,this.storageService=n,this.eventService=i,this.telemetryService=o,this.contextMenuService=s,this.partService=a,this.keybindingService=c,this.serviceId=w.IViewletService,this.activeViewletListeners=[],this.instantiatedViewletListeners=[],this.mapViewletToViewletContainer={},this.mapActionsBindingToViewlet={},this.mapProgressServiceToViewlet={},this.activeViewlet=null,this.instantiatedViewlets=[],this.viewletLoaderPromises={},this.registry=r.Registry.as(_.Extensions.Viewlets)}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.openViewlet=function(e,t){if(this.blockOpeningViewlet)return n.TPromise.as(null);if(this.partService.isSideBarHidden())try{this.blockOpeningViewlet=!0,this.partService.setSideBarHidden(!1)}finally{this.blockOpeningViewlet=!1}return this.activeViewlet&&this.activeViewlet.getId()===e?(t&&this.activeViewlet.focus(),n.TPromise.as(this.activeViewlet)):this.doOpenViewlet(e,t)},t.prototype.doOpenViewlet=function(e,t){var i=this,r=c.start(c.Topic.WORKBENCH,u.format("Open Viewlet {0}",e.substr(e.lastIndexOf(".")+1))),o=s.generateUuid();this.currentViewletOpenToken=o,this.emit(y.EventType.VIEWLET_OPENING,new y.ViewletEvent(e));var a;return a=this.activeViewlet?this.hideActiveViewlet():n.TPromise.as(null),a.then(function(){return i.updateTitle(e),i.createViewlet(e,!0).then(function(e){return i.currentViewletOpenToken!==o||i.activeViewlet&&i.activeViewlet.getId()!==e.getId()?(r.stop(),n.TPromise.as(null)):i.activeViewlet&&i.activeViewlet.getId()===e.getId()?(t&&e.focus(),r.stop(),n.TPromise.as(e)):i.showViewlet(e).then(function(){return t&&e.focus(),r.stop(),e})})})},t.prototype.createViewlet=function(e,t){for(var i=this,r=0;r<this.instantiatedViewlets.length;r++)if(this.instantiatedViewlets[r].getId()===e)return n.TPromise.as(this.instantiatedViewlets[r]);var o=this.registry.getViewlet(e);if(o){var s=this.viewletLoaderPromises[e];if(!s){var a=new S.WorkbenchProgressService(this.eventService,this.progressBar,o.id,t),c={progressService:a},l=this.instantiationService.createChild(c);s=l.createInstance(o).then(function(t){return i.mapProgressServiceToViewlet[t.getId()]=a,i.instantiatedViewlets.push(t),i.instantiatedViewletListeners.push(t.addListener(_.EventType.INTERNAL_VIEWLET_TITLE_AREA_UPDATE,function(e){i.onTitleAreaUpdate(e)})),delete i.viewletLoaderPromises[e],t}),a.showWhile(s,this.partService.isCreated()?800:3200),this.viewletLoaderPromises[e]=s}return s}throw new Error(u.format("Unable to find viewlet with id {0}",e))},t.prototype.showViewlet=function(e){var t=this;this.activeViewlet=e,this.lastActiveViewletId=this.activeViewlet.getId(),this.activeViewletListeners.push(this.eventService.addEmitter(this.activeViewlet,this.activeViewlet.getId()));var i,r=this.mapViewletToViewletContainer[e.getId()];r?i=n.TPromise.as(null):(r=o.$().div({"class":"viewlet",id:e.getId()},function(t){i=e.create(t)}),this.mapViewletToViewletContainer[e.getId()]=r);var s=this.mapProgressServiceToViewlet[e.getId()];return s&&!r&&this.mapProgressServiceToViewlet[e.getId()].showWhile(i,this.partService.isCreated()?800:3200),i.then(function(){if(t.activeViewlet&&e.getId()===t.activeViewlet.getId()){r.build(t.getContentArea()),r.show(),t.toolBar.actionRunner=e.getActionRunner();var n=t.registry.getViewlet(e.getId());n&&n.name!==e.getTitle()&&t.updateTitle(e.getId(),e.getTitle());var i=t.mapActionsBindingToViewlet[e.getId()];return i||(i=t.collectViewletActions(e),t.mapActionsBindingToViewlet[e.getId()]=i),i(),t.telemetryActionsListener&&(t.telemetryActionsListener.dispose(),t.telemetryActionsListener=null),t.telemetryActionsListener=t.toolBar.actionRunner.addListener2(a.EventType.RUN,function(e){e.error&&!d.isPromiseCanceledError(e.error)&&t.messageService.show(T.Severity.Error,e.error),t.telemetryService&&t.telemetryService.publicLog("workbenchActionExecuted",{id:e.action.id,from:"sideBar"})}),e.setVisible(!0).then(function(){t.activeViewlet&&e.getId()===t.activeViewlet.getId()&&(t.contentAreaSize&&e.layout(t.contentAreaSize),t.emit(y.EventType.VIEWLET_OPENED,new y.ViewletEvent(t.activeViewlet.getId())))})}},function(e){return t.onError(e)})},t.prototype.onTitleAreaUpdate=function(e){if(this.activeViewlet&&this.activeViewlet.getId()===e.viewletId){this.updateTitle(this.activeViewlet.getId(),this.activeViewlet.getTitle());var t=this.collectViewletActions(this.activeViewlet);this.mapActionsBindingToViewlet[this.activeViewlet.getId()]=t,t()}else delete this.mapActionsBindingToViewlet[e.viewletId]},t.prototype.updateTitle=function(e,t){var n=this,r=this.registry.getViewlet(e);if(r){t||(t=r.name);var o=null,s=this.keybindingService.lookupKeybindings(e).map(function(e){return n.keybindingService.getLabelFor(e)});s&&s.length&&(o=s[0]),this.titleLabel.safeInnerHtml(t),this.titleLabel.title(o?i.localize(0,null,t,o):t)}},t.prototype.collectViewletActions=function(e){var t=e.getActions(),n=e.getSecondaryActions(),i=r.Registry.as(m.Extensions.Actionbar);return t.push.apply(t,i.getActionBarActionsForContext(m.Scope.VIEW,e)),n.push.apply(n,i.getSecondaryActionBarActionsForContext(m.Scope.VIEW,e)),this.toolBar.setActions(m.prepareActions(t),m.prepareActions(n))},t.prototype.getActiveViewlet=function(){return this.activeViewlet},t.prototype.getLastActiveViewletId=function(){return this.lastActiveViewletId},t.prototype.hideActiveViewlet=function(){var e=this;if(!this.activeViewlet)return n.TPromise.as(null);var t=this.activeViewlet;this.activeViewlet=null;var i=this.mapViewletToViewletContainer[t.getId()];return t.setVisible(!1).then(function(){for(i.offDOM(),i.hide(),e.progressBar.stop().getContainer().hide(),e.toolBar.setActions([])();e.activeViewletListeners.length;)e.activeViewletListeners.pop()();e.emit(y.EventType.VIEWLET_CLOSED,new y.ViewletEvent(t.getId()))})},t.prototype.createTitleArea=function(e){var t=this,n=o.$(e).div({"class":"title"});return o.$(n).div({"class":"title-actions"},function(e){t.toolBar=new h.ToolBar(e.getHTMLElement(),t.contextMenuService,{actionItemProvider:function(e){return t.actionItemProvider(e)},orientation:p.ActionsOrientation.HORIZONTAL})}),o.$(n).div({"class":"title-label"},function(e){t.titleLabel=e.span()}),n},t.prototype.actionItemProvider=function(e){var t;if(this.activeViewlet&&(t=this.activeViewlet.getActionItem(e)),!t){var n=r.Registry.as(m.Extensions.Actionbar);t=n.getActionItemForContext(m.Scope.VIEW,h.CONTEXT,e)}return t},t.prototype.createContentArea=function(e){var t=this;return o.$(e).div({"class":"content"},function(e){t.progressBar=new f.ProgressBar(e),t.progressBar.getContainer().hide()})},t.prototype.onError=function(e){this.messageService.show(T.Severity.Error,l.isString(e)?new Error(e):e)},t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.contentAreaSize=n[1],this.activeViewlet&&this.activeViewlet.layout(this.contentAreaSize),n},t.prototype.shutdown=function(){this.instantiatedViewlets.forEach(function(e){return e.shutdown()}),e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.mapViewletToViewletContainer=null,this.mapProgressServiceToViewlet=null,this.mapActionsBindingToViewlet=null;for(var t=0;t<this.instantiatedViewlets.length;t++)this.instantiatedViewlets[t].dispose();for(this.instantiatedViewlets=[];this.activeViewletListeners.length;)this.activeViewletListeners.pop()();for(;this.instantiatedViewletListeners.length;)this.instantiatedViewletListeners.pop()();this.progressBar.dispose(),this.toolBar.dispose(),e.prototype.dispose.call(this)},t}(g.Part);t.SidebarPart=k;var x=function(e){function t(t,n,i,r){e.call(this,t,n),this.viewletService=i,this.partService=r}return __extends(t,e),t.prototype.run=function(){if(this.partService.isSideBarHidden())this.partService.setSideBarHidden(!1);else{var e=this.viewletService.getActiveViewlet();e&&e.focus()}return n.TPromise.as(!0)},t.ID="workbench.action.focusSideBar",t.LABEL=i.localize(1,null),t=__decorate([__param(2,w.IViewletService),__param(3,C.IPartService)],t)}(v.Action);t.FocusSideBarAction=x;var A=r.Registry.as(b.Extensions.WorkbenchActions);A.registerWorkbenchAction(new E.SyncActionDescriptor(x,x.ID,x.LABEL,{primary:I.KeyMod.CtrlCmd|I.KeyCode.KEY_0}),i.localize(2,null))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/window",["require","exports","vs/base/common/platform","vs/base/common/paths","vs/base/common/uri","vs/workbench/common/constants","vs/workbench/browser/events","vs/workbench/common/editor","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/browser/dom","vs/platform/storage/common/storage","vs/platform/event/common/event","vs/platform/workspace/common/workspace","remote","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){var v=f.require("shell"),g=f.require("dialog"),y=function(){function e(e,t,n,i,r,o,s){this.contextService=n,this.eventService=i,this.storageService=r,this.editorService=o,this.viewletService=s,this.win=e,this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;n.platform===n.Platform.Mac&&this.eventService.addListener(s.EventType.EDITOR_INPUT_CHANGED,function(t){setTimeout(function(){var n=a.asFileEditorInput(t.editorInput,!0);n?e.win.setRepresentedFilename(n.getResource().fsPath):e.win.setRepresentedFilename("")},0)}),window.document.body.addEventListener("dragover",function(e){e.preventDefault()}),window.document.body.addEventListener("drop",function(t){t.preventDefault();var n=window.document.getElementById(o.Identifiers.EDITOR_PART);if(l.isAncestor(t.toElement,n)){var s=!1;if(t.dataTransfer&&t.dataTransfer.files){for(var a=[],c=0;c<t.dataTransfer.files.length;c++)t.dataTransfer.files[c]&&t.dataTransfer.files[c].path&&a.push(t.dataTransfer.files[c].path);a.length&&(s=!0,e.focus(),e.open(a))}if(!s&&t.dataTransfer&&t.dataTransfer.items){var u=t.dataTransfer.items;u.length&&"function"==typeof u[0].getAsString&&u[0].getAsString(function(t){try{var n=r["default"].parse(t);if("file"===n.scheme){var o=e.contextService.getWorkspace();if(o&&i.isEqualOrParent(n.fsPath,o.resource.fsPath))return;e.focus(),e.open([decodeURIComponent(n.fsPath)])}}catch(s){}})}}}),window.open=function(e,t,n,i){return v.openExternal(e),null}},e.prototype.open=function(e){var t;t=Array.isArray(e)?e:"string"==typeof e?[e]:[e.fsPath],m.send("vscode:windowOpen",t)},e.prototype.openNew=function(){m.send("vscode:openNewWindow")},e.prototype.close=function(){this.win.close()},e.prototype.showMessageBox=function(e){return g.showMessageBox(this.win,e)},e.prototype.setFullScreen=function(e){this.win.setFullScreen(e)},e.prototype.openDevTools=function(){this.win.openDevTools()},e.prototype.isFullScreen=function(){return this.win.isFullScreen()},e.prototype.setMenuBarVisibility=function(e){this.win.setMenuBarVisibility(e)},e.prototype.focus=function(){this.win.isFocused()||(n.isWindows||n.isLinux?this.win.show():this.win.focus())},e.prototype.flashFrame=function(){this.win.flashFrame(!this.win.isFocused())},e=__decorate([__param(2,p.IWorkspaceContextService),__param(3,h.IEventService),__param(4,d.IStorageService),__param(5,u.IWorkbenchEditorService),__param(6,c.IViewletService)],e)}();t.ElectronWindow=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debugActions",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debugActions","vs/base/common/actions","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/workbench/browser/parts/editor/baseEditor","vs/editor/common/editorAction","vs/platform/platform","vs/workbench/browser/actionRegistry","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/services/viewlet/common/viewletService","vs/platform/keybinding/common/keybindingService","remote"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=l.IDebugService,v=f.require("clipboard"),g=(c.Registry.as(u.Extensions.WorkbenchActions),function(e){function t(t,i,r,o,s){var a=this;e.call(this,t,i,r,!1),this.debugService=o,this.keybindingService=s,this.toDispose=[],this.toDispose.push(this.debugService.addListener2(l.ServiceEvents.STATE_CHANGED,function(){return a.updateEnablement()}));var c=null,u=this.keybindingService.lookupKeybindings(t).map(function(e){return a.keybindingService.getLabelFor(e)});u&&u.length&&(c=u[0]),c?this.label=n.localize(0,null,i,c):this.label=i,this.updateEnablement()}return __extends(t,e),t.prototype.run=function(e){throw new Error("implement me")},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t.prototype.isEnabled=function(){return this.debugService.getState()!==l.State.Disabled},t.prototype.dispose=function(){this.debugService=null,this.toDispose=r.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(3,m),__param(4,p.IKeybindingService)],t)}(i.Action));t.AbstractDebugAction=g;var y=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action configure",i,r)}return __extends(t,e),t.prototype.run=function(e){var t=!(!e||!e.ctrlKey&&!e.metaKey);return this.debugService.openConfigFile(t)},t.ID="workbench.action.debug.configure",t.LABEL=n.localize(1,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.ConfigureAction=y;var _=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action select-active-config",i,r)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.setConfiguration(e)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Inactive},t.ID="workbench.debug.action.setActiveConfig",t.LABEL=n.localize(2,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.SelectConfigAction=_;var b=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action start",i,r),this.updateEnablement()}return __extends(t,e),t.prototype.run=function(){return this.debugService.createSession()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Inactive},t.ID="workbench.action.debug.start",t.LABEL=n.localize(3,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.StartDebugAction=b;var E=function(e){function t(n,i,r,o){var s=this;e.call(this,n,i,"debug-action restart",r,o),this.updateEnablement(),this.toDispose.push(this.debugService.addListener2(l.ServiceEvents.STATE_CHANGED,function(){var e=s.debugService.getActiveSession();e&&(s.label=e.isAttach?t.RECONNECT_LABEL:t.LABEL)}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.restartSession()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()!==l.State.Inactive},t.ID="workbench.action.debug.restart",t.LABEL=n.localize(4,null),t.RECONNECT_LABEL=n.localize(5,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.RestartDebugAction=E;var S=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action step-over",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().next({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Stopped},t.ID="workbench.action.debug.stepOver",t.LABEL=n.localize(6,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.StepOverDebugAction=S;var w=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action step-into",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().stepIn({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Stopped},t.ID="workbench.action.debug.stepInto",t.LABEL=n.localize(7,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.StepIntoDebugAction=w;var C=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action step-out",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().stepOut({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Stopped},t.ID="workbench.action.debug.stepOut",t.LABEL=n.localize(8,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.StepOutDebugAction=C;var T=function(e){function t(n,i,r,o){var s=this;e.call(this,n,i,"debug-action stop",r,o),this.toDispose.push(this.debugService.addListener2(l.ServiceEvents.STATE_CHANGED,function(){var e=s.debugService.getActiveSession();e&&(s.label=e.isAttach?t.DISCONNECT_LABEL:t.LABEL)}))}return __extends(t,e),t.prototype.run=function(){var e=this.debugService.getActiveSession();return e?e.disconnect():o.Promise.as(null)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()!==l.State.Inactive},t.ID="workbench.action.debug.stop",t.LABEL=n.localize(9,null),t.DISCONNECT_LABEL=n.localize(10,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.StopDebugAction=T;var I=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action continue",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession()["continue"]({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Stopped},t.ID="workbench.action.debug.continue",t.LABEL=n.localize(11,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.ContinueAction=I;var k=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action pause",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.getActiveSession().pause({threadId:this.debugService.getViewModel().getFocusedThreadId()})},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getState()===l.State.Running},t.ID="workbench.action.debug.pause",t.LABEL=n.localize(12,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.PauseAction=k;var x=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action remove",i,r),this.updateEnablement()}return __extends(t,e),t.prototype.run=function(e){return e instanceof d.Breakpoint?this.debugService.toggleBreakpoint({uri:e.source.uri,lineNumber:e.lineNumber}):this.debugService.removeFunctionBreakpoints(e.getId())},t.ID="workbench.debug.viewlet.action.removeBreakpoint",t.LABEL=n.localize(13,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.RemoveBreakpointAction=x;var A=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action remove",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.BREAKPOINTS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return o.Promise.join([this.debugService.removeAllBreakpoints(),this.debugService.removeFunctionBreakpoints()])},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&(this.debugService.getModel().getBreakpoints().length>0||this.debugService.getModel().getFunctionBreakpoints().length>0)},t.ID="workbench.debug.viewlet.action.removeAllBreakpoints",t.LABEL=n.localize(14,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.RemoveAllBreakpointsAction=A;var R=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action toggle-enablement",i,r);
}return __extends(t,e),t.prototype.run=function(e){return this.debugService.toggleEnablement(e)},t.ID="workbench.debug.viewlet.action.toggleBreakpointEnablement",t.LABEL=n.localize(15,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.ToggleEnablementAction=R;var D=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action enable-all-breakpoints",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.BREAKPOINTS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.enableOrDisableAllBreakpoints(!0)},t.prototype.isEnabled=function(){var t=this.debugService.getModel();return e.prototype.isEnabled.call(this)&&t.getBreakpoints().concat(t.getFunctionBreakpoints()).concat(t.getExceptionBreakpoints()).some(function(e){return!e.enabled})},t.ID="workbench.debug.viewlet.action.enableAllBreakpoints",t.LABEL=n.localize(16,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.EnableAllBreakpointsAction=D;var L=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action disable-all-breakpoints",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.BREAKPOINTS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.enableOrDisableAllBreakpoints(!1)},t.prototype.isEnabled=function(){var t=this.debugService.getModel();return e.prototype.isEnabled.call(this)&&t.getBreakpoints().concat(t.getFunctionBreakpoints()).concat(t.getExceptionBreakpoints()).some(function(e){return e.enabled})},t.ID="workbench.debug.viewlet.action.disableAllBreakpoints",t.LABEL=n.localize(17,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.DisableAllBreakpointsAction=L;var M=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action breakpoints-activate",i,r),this.updateLabel(),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.BREAKPOINTS_UPDATED,function(){o.updateLabel()}))}return __extends(t,e),t.prototype.updateLabel=function(){this.label=this.debugService.getModel().areBreakpointsActivated()?t.DEACTIVATE_LABEL:t.ACTIVATE_LABEL},t.prototype.run=function(){return this.debugService.toggleBreakpointsActivated()},t.ID="workbench.debug.viewlet.action.toggleBreakpointsActivatedAction",t.ACTIVATE_LABEL=n.localize(18,null),t.DEACTIVATE_LABEL=n.localize(19,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.ToggleBreakpointsActivatedAction=M;var O=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action refresh",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.BREAKPOINTS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.sendAllBreakpoints()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.debugService.getActiveSession()&&this.debugService.getModel().getBreakpoints().length>0},t.ID="workbench.debug.viewlet.action.reapplyBreakpointsAction",t.LABEL=n.localize(20,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.ReapplyBreakpointsAction=O;var P=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action add-function-breakpoint",i,r)}return __extends(t,e),t.prototype.run=function(){return this.debugService.addFunctionBreakpoint(),o.Promise.as(null)},t.ID="workbench.debug.viewlet.action.addFunctionBreakpointAction",t.LABEL=n.localize(21,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.AddFunctionBreakpointAction=P;var N=function(e){function t(t,n,i){e.call(this,t,n,a.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){if(this.debugService.getState()!==l.State.Disabled){var e=this.editor.getPosition().lineNumber,t=this.editor.getModel().getAssociatedResource();if(this.debugService.canSetBreakpointsIn(this.editor.getModel(),e))return this.debugService.toggleBreakpoint({uri:t,lineNumber:e})}return o.TPromise.as(null)},t.ID="editor.debug.action.toggleBreakpoint",t=__decorate([__param(2,m)],t)}(a.EditorAction);t.ToggleBreakpointAction=N;var F=function(e){function t(t,n,i,r,o){e.call(this,t,n,"debug-action copy-value",r,o),this.value=i}return __extends(t,e),t.prototype.run=function(){var e=this;if(this.value instanceof d.Variable){var t=this.debugService.getViewModel().getFocusedStackFrame().frameId,n=this.debugService.getActiveSession();return n.evaluate({expression:d.getFullExpressionName(this.value,n.getType()),frameId:t}).then(function(e){v.writeText(e.body.result)},function(t){return v.writeText(e.value.value)})}return v.writeText(this.value),o.Promise.as(null)},t.ID="workbench.debug.viewlet.action.copyValue",t.LABEL=n.localize(22,null),t=__decorate([__param(3,m),__param(4,p.IKeybindingService)],t)}(g);t.CopyValueAction=F;var W=function(e){function t(t,n,i){e.call(this,t,n,a.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getPosition().lineNumber,n=this.editor.getModel().getAssociatedResource();return this.debugService.getActiveSession().addOneTimeListener(l.SessionEvents.STOPPED,function(){e.debugService.toggleBreakpoint({uri:n,lineNumber:t})}),this.debugService.toggleBreakpoint({uri:n,lineNumber:t}).then(function(){return e.debugService.getActiveSession()["continue"]({threadId:e.debugService.getViewModel().getFocusedThreadId()}).then(function(e){return e.success})})},t.prototype.getGroupId=function(){return"1_debug/1_continue"},t.prototype.shouldShowInContextMenu=function(){if(this.debugService.getState()!==l.State.Stopped)return!1;var e=this.editor.getPosition().lineNumber,t=this.editor.getModel().getAssociatedResource(),n=this.debugService.getModel().getBreakpoints().filter(function(n){return n.lineNumber===e&&n.source.uri.toString()===t.toString()});return 0===n.length},t.ID="editor.debug.action.runToCursor",t=__decorate([__param(2,m)],t)}(a.EditorAction);t.RunToCursorAction=W;var H=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action add-watch-expression",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.addWatchExpression()},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getModel().getWatchExpressions().every(function(e){return!!e.name})},t.ID="workbench.debug.viewlet.action.addWatchExpression",t.LABEL=n.localize(23,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.AddWatchExpressionAction=H;var V=function(e){function t(t,n,i,r){e.call(this,t,n,a.Behaviour.TextFocus),this.debugService=i,this.viewletService=r}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel().getValueInRange(this.editor.getSelection());return this.viewletService.openViewlet(l.VIEWLET_ID).then(function(){return e.debugService.addWatchExpression(t)})},t.prototype.getGroupId=function(){return"1_debug/3_selection_to_watch"},t.prototype.shouldShowInContextMenu=function(){var e=this.editor.getSelection(),t=this.editor.getModel().getValueInRange(e);return!!e&&!e.isEmpty()&&this.debugService.getState()!==l.State.Inactive&&t&&/\S/.test(t)},t.ID="editor.debug.action.selectionToWatch",t=__decorate([__param(2,m),__param(3,h.IViewletService)],t)}(a.EditorAction);t.SelectionToWatchExpressionsAction=V;var B=function(e){function t(t,n,i){e.call(this,t,n,a.Behaviour.TextFocus),this.debugService=i}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editor.getModel().getValueInRange(this.editor.getSelection());return this.debugService.addReplExpression(t).then(function(){return e.debugService.revealRepl()})},t.prototype.getGroupId=function(){return"1_debug/2_selection_to_repl"},t.prototype.shouldShowInContextMenu=function(){var e=this.editor.getSelection();this.editor.getModel().getValueInRange(e);return!!e&&!e.isEmpty()&&this.debugService.getState()===l.State.Stopped},t.ID="editor.debug.action.selectionToRepl",t=__decorate([__param(2,m)],t)}(a.EditorAction);t.SelectionToReplAction=B;var K=function(e){function t(t,n,i,r,o){e.call(this,t,n,"debug-action add-to-watch",r,o),this.expression=i}return __extends(t,e),t.prototype.run=function(){return this.debugService.addWatchExpression(d.getFullExpressionName(this.expression,this.debugService.getActiveSession().getType()))},t.ID="workbench.debug.viewlet.action.addToWatchExpressions",t.LABEL=n.localize(24,null),t=__decorate([__param(3,m),__param(4,p.IKeybindingService)],t)}(g);t.AddToWatchExpressionsAction=K;var U=function(e){function t(t,n,i,r,o){e.call(this,t,n,"debug-action rename",r,o),this.expression=i}return __extends(t,e),t.prototype.run=function(){return this.debugService.getViewModel().setSelectedExpression(this.expression),o.Promise.as(null)},t.ID="workbench.debug.viewlet.action.renameWatchExpression",t.LABEL=n.localize(25,null),t=__decorate([__param(3,m),__param(4,p.IKeybindingService)],t)}(g);t.RenameWatchExpressionAction=U;var z=function(e){function t(t,n,i,r){e.call(this,t,n,"debug-action remove",i,r)}return __extends(t,e),t.prototype.run=function(e){return this.debugService.clearWatchExpressions(e.getId()),o.Promise.as(null)},t.ID="workbench.debug.viewlet.action.removeWatchExpression",t.LABEL=n.localize(26,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.RemoveWatchExpressionAction=z;var j=function(e){function t(t,n,i,r){var o=this;e.call(this,t,n,"debug-action remove",i,r),this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.WATCH_EXPRESSIONS_UPDATED,function(){return o.updateEnablement()}))}return __extends(t,e),t.prototype.run=function(){return this.debugService.clearWatchExpressions(),o.Promise.as(null)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.debugService.getModel().getWatchExpressions().length>0},t.ID="workbench.debug.viewlet.action.removeAllWatchExpressions",t.LABEL=n.localize(27,null),t=__decorate([__param(2,m),__param(3,p.IKeybindingService)],t)}(g);t.RemoveAllWatchExpressionsAction=j;var q=function(e){function t(t,n,i){e.call(this,t,n,"debug-action open-repl",!0),this.debugService=i,this.enabled=this.debugService.getState()!==l.State.Disabled}return __extends(t,e),t.prototype.run=function(){return this.debugService.revealRepl()},t.ID="workbench.debug.action.openRepl",t.LABEL=n.localize(28,null),t=__decorate([__param(2,m)],t)}(i.Action);t.OpenReplAction=q;var G=function(e){function t(t){e.call(this,"editor.action.clearRepl",n.localize(29,null),"debug-action clear-repl"),this.debugService=t}return __extends(t,e),t.prototype.run=function(){return this.debugService.clearReplExpressions(),this.debugService.revealRepl(),o.Promise.as(null)},t=__decorate([__param(0,m)],t)}(s.EditorInputAction);t.ClearReplAction=G});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugActionsWidget",["require","exports","vs/base/common/lifecycle","vs/base/common/errors","vs/base/common/severity","vs/base/browser/builder","vs/base/common/events","vs/base/browser/ui/actionbar/actionbar","vs/workbench/common/constants","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/electron-browser/debugActions","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=u.IDebugService,m=o.$,v=function(){function e(e,t,n,i){this.messageService=e,this.telemetryService=t,this.debugService=n,this.instantiationService=i,this.$el=m().div().addClass("debug-actions-widget"),this.toDispose=[],this.actionBar=new a.ActionBar(this.$el,{orientation:a.ActionsOrientation.HORIZONTAL}),this.toDispose.push(this.actionBar),this.registerListeners(),this.hide(),this.isBuilt=!1}return e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.debugService.addListener2(u.ServiceEvents.STATE_CHANGED,function(){e.onDebugStateChange()})),this.toDispose.push(this.actionBar.actionRunner.addListener2(s.EventType.RUN,function(t){t.error&&!i.isPromiseCanceledError(t.error)&&e.messageService.show(r["default"].Error,t.error),e.telemetryService&&e.telemetryService.publicLog("workbenchActionExecuted",{id:t.action.id,from:"debugActionsWidget"})}))},e.prototype.getId=function(){return e.ID},e.prototype.onDebugStateChange=function(){return this.debugService.getState()===u.State.Inactive?this.hide():(this.actionBar.clear(),this.actionBar.push(this.getActions(this.instantiationService,this.debugService.getState()),{icon:!0,label:!1}),void this.show())},e.prototype.show=function(){this.isVisible||(this.isBuilt||(this.isBuilt=!0,this.$el.build(o.withElementById(c.Identifiers.WORKBENCH_CONTAINER).getHTMLElement())),this.isVisible=!0,this.$el.show())},e.prototype.hide=function(){this.isVisible=!1,this.$el.hide()},e.prototype.getActions=function(e,t){var n=this;return this.actions||(this.continueAction=e.createInstance(l.ContinueAction,l.ContinueAction.ID,l.ContinueAction.LABEL),this.pauseAction=e.createInstance(l.PauseAction,l.PauseAction.ID,l.PauseAction.LABEL),this.actions=[this.continueAction,e.createInstance(l.StepOverDebugAction,l.StepOverDebugAction.ID,l.StepOverDebugAction.LABEL),e.createInstance(l.StepIntoDebugAction,l.StepIntoDebugAction.ID,l.StepIntoDebugAction.LABEL),e.createInstance(l.StepOutDebugAction,l.StepOutDebugAction.ID,l.StepOutDebugAction.LABEL),e.createInstance(l.RestartDebugAction,l.RestartDebugAction.ID,l.RestartDebugAction.LABEL),e.createInstance(l.StopDebugAction,l.StopDebugAction.ID,l.StopDebugAction.LABEL)],this.actions.forEach(function(e){n.toDispose.push(e)}),this.toDispose.push(this.pauseAction)),this.actions[0]=t===u.State.Running?this.pauseAction:this.continueAction,this.actions},e.prototype.dispose=function(){this.toDispose=n.disposeAll(this.toDispose),this.$el&&(this.$el.destroy(),delete this.$el)},e.ID="debug.actionsWidget",e=__decorate([__param(0,h.IMessageService),__param(1,p.ITelemetryService),__param(2,f),__param(3,d.IInstantiationService)],e)}();t.DebugActionsWidget=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugViewer",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugViewer","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/paths","vs/base/common/async","vs/base/common/errors","vs/base/common/strings","vs/base/common/platform","vs/base/browser/dom","vs/base/common/labels","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/inputbox/inputBox","vs/base/parts/tree/browser/treeDefaults","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/common/debugViewModel","vs/workbench/parts/debug/electron-browser/debugActions","vs/platform/contextview/browser/contextView","vs/platform/workspace/common/workspace","vs/platform/message/common/message","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S){function w(e,t,n,i){var r="string"==typeof t?t:t.value;i.className="value",null===r||t instanceof v.Expression&&!t.available?(l.addClass(i,"unavailable"),n?l.removeClass(i,"error"):l.addClass(i,"error")):isNaN(+r)?k.test(r)?l.addClass(i,"boolean"):x.test(r)&&l.addClass(i,"string"):l.addClass(i,"number"),i.textContent=r,i.title=r}function C(e,t,n,i){n.name.textContent=t.name+":",t.value?w(e,t,i,n.value):(n.value.textContent="",n.value.title="")}function T(e,t,n,i,o,c){var u=l.append(o,I(".inputBoxContainer")),d=new p.InputBox(u,t,{validationOptions:{validation:null,showMessage:!1},placeholder:c});d.value=i.name?i.name:"",d.focus();var h=!1,f=[d],m=s.once(function(t){h||(h=!0,i instanceof v.Expression&&t&&d.value?e.renameWatchExpression(i.getId(),d.value).done(null,a.onUnexpectedError):i instanceof v.Expression&&!i.name?e.clearWatchExpressions(i.getId()):i instanceof v.FunctionBreakpoint&&t&&d.value?e.renameFunctionBreakpoint(i.getId(),d.value).done(null,a.onUnexpectedError):i instanceof v.FunctionBreakpoint&&!i.name&&e.removeFunctionBreakpoints(i.getId()).done(null,a.onUnexpectedError),n.clearHighlight(),n.DOMFocus(),o.removeChild(u),r.disposeAll(f))});f.push(l.addStandardDisposableListener(d.inputElement,"keydown",function(e){var t=e.equals(S.CommonKeybindings.ESCAPE),n=e.equals(S.CommonKeybindings.ENTER);(t||n)&&m(n)})),f.push(l.addDisposableListener(d.inputElement,"blur",function(){m(!0)}))}var I=l.emmet,k=/^true|false$/i,x=/^(['"]).*\1$/;t.renderExpressionValue=w,t.renderVariable=C;var A=function(){function e(){}return e.prototype.hasActions=function(e,t){return!1},e.prototype.getActions=function(e,t){var n=[];return i.Promise.as(n)},e.prototype.hasSecondaryActions=function(e,t){return!1},e.prototype.getSecondaryActions=function(e,t){var n=[];return i.Promise.as(n)},e.prototype.getActionItem=function(e,t,n){return null},e}();t.SimpleActionProvider=A;var R=function(e){function t(t,n,i,r){void 0===r&&(r=!0),e.call(this),this.debugService=t,this.contextMenuService=n,this.actionProvider=i,this.focusOnContextMenu=r,u.isMacintosh?this.downKeyBindingDispatcher.set(S.CommonKeybindings.CTRLCMD_BACKSPACE,this.onDelete.bind(this)):(this.downKeyBindingDispatcher.set(S.CommonKeybindings.DELETE,this.onDelete.bind(this)),this.downKeyBindingDispatcher.set(S.CommonKeybindings.SHIFT_DELETE,this.onDelete.bind(this)))}return __extends(t,e),t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(n.preventDefault(),n.stopPropagation(),this.focusOnContextMenu&&e.setFocus(t),this.actionProvider.hasSecondaryActions(e,t)){var r={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return r},getActions:function(){return i.actionProvider.getSecondaryActions(e,t)},onHide:function(t){t&&e.DOMFocus()},getActionsContext:function(){return t}}),!0}return!1},t.prototype.onDelete=function(e,t){return!1},t}(f.DefaultController);t.BaseDebugController=R;var D=function(){function e(){}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t instanceof v.Model||t instanceof v.Thread},e.prototype.getChildren=function(e,t){if(t instanceof v.Thread)return i.Promise.as(t.callStack);var n=t.getThreads(),r=[];for(var o in n)n.hasOwnProperty(o)&&r.push(n[o]);return 1===r.length?i.Promise.as(r[0].callStack):i.Promise.as(r)},e.prototype.getParent=function(e,t){return i.Promise.as(null)},e}();t.CallStackDataSource=D;var L=function(){function e(e){this.contextService=e}return e.prototype.getHeight=function(e,t){return 24},e.prototype.getTemplateId=function(t,n){return n instanceof v.Thread?e.THREAD_TEMPLATE_ID:n instanceof v.StackFrame?e.STACK_FRAME_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){if(n===e.THREAD_TEMPLATE_ID){var r=Object.create(null);return r.name=l.append(i,I(".thread")),r}var o=Object.create(null);return o.stackFrame=l.append(i,I(".stack-frame")),o.label=l.append(o.stackFrame,I("span.label")),o.file=l.append(o.stackFrame,I(".file")),o.fileName=l.append(o.file,I("span.file-name")),o.lineNumber=l.append(o.file,I("span.line-number")),o},e.prototype.renderElement=function(t,n,i,r){i===e.THREAD_TEMPLATE_ID?this.renderThread(n,r):this.renderStackFrame(n,r)},e.prototype.renderThread=function(e,t){t.name.textContent=e.name},e.prototype.renderStackFrame=function(e,t){e.source.available?l.removeClass(t.stackFrame,"disabled"):l.addClass(t.stackFrame,"disabled"),t.file.title=e.source.uri.fsPath,t.label.textContent=e.name,e.source.inMemory?t.fileName.textContent=e.source.name:t.fileName.textContent=d.getPathLabel(o.basename(e.source.uri.fsPath),this.contextService),t.lineNumber.textContent=void 0!==e.lineNumber?""+e.lineNumber:""},e.prototype.disposeTemplate=function(e,t,n){},e.THREAD_TEMPLATE_ID="thread",e.STACK_FRAME_TEMPLATE_ID="stackFrame",e=__decorate([__param(0,b.IWorkspaceContextService)],e)}();t.CallStackRenderer=L;var M=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActions=function(e,t){return!1},t.prototype.hasSecondaryActions=function(e,t){return t instanceof v.Variable},t.prototype.getSecondaryActions=function(e,t){var n=[],r=t;return n.push(this.instantiationService.createInstance(y.AddToWatchExpressionsAction,y.AddToWatchExpressionsAction.ID,y.AddToWatchExpressionsAction.LABEL,r)),0===r.reference&&n.push(this.instantiationService.createInstance(y.CopyValueAction,y.CopyValueAction.ID,y.CopyValueAction.LABEL,r)),i.Promise.as(n)},t}(A);t.VariablesActionProvider=M;var O=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){if(t instanceof g.ViewModel||t instanceof v.Scope)return!0;var n=t;return 0!==n.reference&&!c.equalsIgnoreCase(n.value,"null")},e.prototype.getChildren=function(e,t){if(t instanceof g.ViewModel){var n=t.getFocusedStackFrame();return n?n.getScopes(this.debugService):i.Promise.as([])}var r=t;return r.getChildren(this.debugService)},e.prototype.getParent=function(e,t){return i.Promise.as(null)},e}();t.VariablesDataSource=O;var P=function(){function e(e){this.debugService=e}return e.prototype.getHeight=function(e,t){return 24},e.prototype.getTemplateId=function(t,n){return n instanceof v.Scope?e.SCOPE_TEMPLATE_ID:n instanceof v.Expression?e.VARIABLE_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){if(n===e.SCOPE_TEMPLATE_ID){var r=Object.create(null);return r.name=l.append(i,I(".scope")),r}var o=Object.create(null);return o.expression=l.append(i,I(u.isMacintosh?".expression.mac":".expression.win-linux")),o.name=l.append(o.expression,I("span.name")),o.value=l.append(o.expression,I("span.value")),o},e.prototype.renderElement=function(t,n,i,r){i===e.SCOPE_TEMPLATE_ID?this.renderScope(n,r):C(t,n,r,this.debugService.getState()===m.State.Inactive)},e.prototype.renderScope=function(e,t){t.name.textContent=e.name},e.prototype.disposeTemplate=function(e,t,n){},e.SCOPE_TEMPLATE_ID="scope",e.VARIABLE_TEMPLATE_ID="variable",e=__decorate([__param(0,m.IDebugService)],e)}();t.VariablesRenderer=P;var N=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActions=function(e,t){return t instanceof v.Expression&&t.name},t.prototype.hasSecondaryActions=function(e,t){return!0},t.prototype.getActions=function(e,t){return i.Promise.as(this.getExpressionActions())},t.prototype.getExpressionActions=function(){return[this.instantiationService.createInstance(y.RemoveWatchExpressionAction,y.RemoveWatchExpressionAction.ID,y.RemoveWatchExpressionAction.LABEL)]},t.prototype.getSecondaryActions=function(e,t){var n=[];if(t instanceof v.Expression){var r=t;n.push(this.instantiationService.createInstance(y.AddWatchExpressionAction,y.AddWatchExpressionAction.ID,y.AddWatchExpressionAction.LABEL)),n.push(this.instantiationService.createInstance(y.RenameWatchExpressionAction,y.RenameWatchExpressionAction.ID,y.RenameWatchExpressionAction.LABEL,r)),0===r.reference&&n.push(this.instantiationService.createInstance(y.CopyValueAction,y.CopyValueAction.ID,y.CopyValueAction.LABEL,r.value)),n.push(new h.Separator),n.push(this.instantiationService.createInstance(y.RemoveWatchExpressionAction,y.RemoveWatchExpressionAction.ID,y.RemoveWatchExpressionAction.LABEL)),n.push(this.instantiationService.createInstance(y.RemoveAllWatchExpressionsAction,y.RemoveAllWatchExpressionsAction.ID,y.RemoveAllWatchExpressionsAction.LABEL))}else{if(n.push(this.instantiationService.createInstance(y.AddWatchExpressionAction,y.AddWatchExpressionAction.ID,y.AddWatchExpressionAction.LABEL)),t instanceof v.Variable){var o=t;0===o.reference&&n.push(this.instantiationService.createInstance(y.CopyValueAction,y.CopyValueAction.ID,y.CopyValueAction.LABEL,o.value)),n.push(new h.Separator)}n.push(this.instantiationService.createInstance(y.RemoveAllWatchExpressionsAction,y.RemoveAllWatchExpressionsAction.ID,y.RemoveAllWatchExpressionsAction.LABEL))}return i.Promise.as(n)},t}(A);t.WatchExpressionsActionProvider=N;var F=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){if(t instanceof v.Model)return!0;var n=t;return 0!==n.reference&&!c.equalsIgnoreCase(n.value,"null")},e.prototype.getChildren=function(e,t){if(t instanceof v.Model)return i.Promise.as(t.getWatchExpressions());var n=t;return n.getChildren(this.debugService)},e.prototype.getParent=function(e,t){return i.Promise.as(null)},e}();t.WatchExpressionsDataSource=F;var W=function(){function e(e,t,n,i,r){this.actionRunner=t,this.messageService=n,this.debugService=i,this.contextViewService=r,this.toDispose=[],this.actionProvider=e}return e.prototype.getHeight=function(e,t){return 24},e.prototype.getTemplateId=function(t,n){return n instanceof v.Expression?e.WATCH_EXPRESSION_TEMPLATE_ID:e.VARIABLE_TEMPLATE_ID},e.prototype.renderTemplate=function(t,n,i){var r=Object.create(null);return n===e.WATCH_EXPRESSION_TEMPLATE_ID&&(r.actionBar=new h.ActionBar(i,{actionRunner:this.actionRunner}),r.actionBar.push(this.actionProvider.getExpressionActions(),{icon:!0,label:!1})),r.expression=l.append(i,I(u.isMacintosh?".expression.mac":".expression.win-linux")),r.name=l.append(r.expression,I("span.name")),r.value=l.append(r.expression,I("span.value")),r},e.prototype.renderElement=function(t,n,i,r){i===e.WATCH_EXPRESSION_TEMPLATE_ID?this.renderWatchExpression(t,n,r):this.renderExpression(t,n,r)},e.prototype.renderWatchExpression=function(e,t,i){var r=this.debugService.getViewModel().getSelectedExpression();(r instanceof v.Expression&&r.getId()===t.getId()||t instanceof v.Expression&&!t.name)&&T(this.debugService,this.contextViewService,e,t,i.expression,n.localize(0,null)),i.actionBar.context=t,this.renderExpression(e,t,i)},e.prototype.renderExpression=function(e,t,n){n.name.textContent=t.name+":",t.value&&w(e,t,this.debugService.getState()===m.State.Inactive,n.value)},e.prototype.disposeTemplate=function(e,t,n){},e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose)},e.WATCH_EXPRESSION_TEMPLATE_ID="watchExpression",e.VARIABLE_TEMPLATE_ID="variables",e=__decorate([__param(2,E.IMessageService),__param(3,m.IDebugService),__param(4,_.IContextViewService)],e)}();t.WatchExpressionsRenderer=W;var H=function(e){function t(t,n,i){e.call(this,t,n,i),u.isMacintosh?this.downKeyBindingDispatcher.set(S.CommonKeybindings.ENTER,this.onRename.bind(this)):this.downKeyBindingDispatcher.set(S.CommonKeybindings.F2,this.onRename.bind(this))}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i){if(n instanceof v.Expression&&2===i.detail){var r=n;return 0===r.reference&&this.debugService.getViewModel().setSelectedExpression(r),!0}return e.prototype.onLeftClick.call(this,t,n,i)},t.prototype.onRename=function(e,t){var n=e.getFocus();if(n instanceof v.Expression){var i=n;return 0===i.reference&&this.debugService.getViewModel().setSelectedExpression(i),!0}return!1},t.prototype.onDelete=function(e,t){var n=e.getFocus();if(n instanceof v.Expression){var i=n;return this.debugService.clearWatchExpressions(i.getId()),!0}return!1},t}(R);t.WatchExpressionsController=H;var V=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActions=function(e,t){return t instanceof v.Breakpoint},t.prototype.hasSecondaryActions=function(e,t){return t instanceof v.Breakpoint||t instanceof v.ExceptionBreakpoint||t instanceof v.FunctionBreakpoint},t.prototype.getActions=function(e,t){return t instanceof v.Breakpoint?i.Promise.as(this.getBreakpointActions()):i.Promise.as([])},t.prototype.getBreakpointActions=function(){return[this.instantiationService.createInstance(y.RemoveBreakpointAction,y.RemoveBreakpointAction.ID,y.RemoveBreakpointAction.LABEL)]},t.prototype.getSecondaryActions=function(e,t){var n=[this.instantiationService.createInstance(y.ToggleEnablementAction,y.ToggleEnablementAction.ID,y.ToggleEnablementAction.LABEL)];return n.push(new h.Separator),n.push(this.instantiationService.createInstance(y.RemoveBreakpointAction,y.RemoveBreakpointAction.ID,y.RemoveBreakpointAction.LABEL)),n.push(this.instantiationService.createInstance(y.RemoveAllBreakpointsAction,y.RemoveAllBreakpointsAction.ID,y.RemoveAllBreakpointsAction.LABEL)),n.push(new h.Separator),n.push(this.instantiationService.createInstance(y.ToggleBreakpointsActivatedAction,y.ToggleBreakpointsActivatedAction.ID,y.ToggleBreakpointsActivatedAction.LABEL)),n.push(new h.Separator),n.push(this.instantiationService.createInstance(y.EnableAllBreakpointsAction,y.EnableAllBreakpointsAction.ID,y.EnableAllBreakpointsAction.LABEL)),n.push(this.instantiationService.createInstance(y.DisableAllBreakpointsAction,y.DisableAllBreakpointsAction.ID,y.DisableAllBreakpointsAction.LABEL)),n.push(new h.Separator),n.push(this.instantiationService.createInstance(y.ReapplyBreakpointsAction,y.ReapplyBreakpointsAction.ID,y.ReapplyBreakpointsAction.LABEL)),i.Promise.as(n)},t}(A);t.BreakpointsActionProvider=V;var B=function(){function e(){}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t instanceof v.Model},e.prototype.getChildren=function(e,t){var n=t,r=n.getExceptionBreakpoints();return i.Promise.as(r.concat(n.getFunctionBreakpoints()).concat(n.getBreakpoints()))},e.prototype.getParent=function(e,t){return i.Promise.as(null)},e}();t.BreakpointsDataSource=B;var K=function(){function e(e,t,n,i,r,o){this.actionProvider=e,this.actionRunner=t,this.messageService=n,this.contextService=i,this.debugService=r,this.contextViewService=o}return e.prototype.getHeight=function(e,t){return 24},e.prototype.getTemplateId=function(t,n){return n instanceof v.Breakpoint?e.BREAKPOINT_TEMPLATE_ID:n instanceof v.FunctionBreakpoint?e.FUNCTION_BREAKPOINT_TEMPLATE_ID:n instanceof v.ExceptionBreakpoint?e.EXCEPTION_BREAKPOINT_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){var r=Object.create(null);return(n===e.BREAKPOINT_TEMPLATE_ID||n===e.FUNCTION_BREAKPOINT_TEMPLATE_ID)&&(r.actionBar=new h.ActionBar(i,{actionRunner:this.actionRunner}),r.actionBar.push(this.actionProvider.getBreakpointActions(),{icon:!0,label:!1})),r.breakpoint=l.append(i,I(".breakpoint")),r.toDisposeBeforeRender=[],r.checkbox=I("input"),r.checkbox.type="checkbox",r.checkbox.className="checkbox",l.append(r.breakpoint,r.checkbox),r.name=l.append(r.breakpoint,I("span.name")),n===e.BREAKPOINT_TEMPLATE_ID&&(r.lineNumber=l.append(r.breakpoint,I("span.line-number")),r.filePath=l.append(r.breakpoint,I("span.file-path"))),r},e.prototype.renderElement=function(t,n,i,o){var s=this;o.toDisposeBeforeRender=r.disposeAll(o.toDisposeBeforeRender),o.toDisposeBeforeRender.push(l.addStandardDisposableListener(o.checkbox,"change",function(e){
s.debugService.toggleEnablement(n)})),i===e.EXCEPTION_BREAKPOINT_TEMPLATE_ID?this.renderExceptionBreakpoint(n,o):i===e.FUNCTION_BREAKPOINT_TEMPLATE_ID?this.renderFunctionBreakpoint(t,n,o):this.renderBreakpoint(t,n,o)},e.prototype.renderExceptionBreakpoint=function(e,t){var n=e.name.charAt(0).toUpperCase()+e.name.slice(1);t.name.textContent=n+" exceptions",t.checkbox.checked=e.enabled},e.prototype.renderFunctionBreakpoint=function(e,t,i){t.name?(this.debugService.getModel().areBreakpointsActivated()?e.removeTraits("disabled",[t]):e.addTraits("disabled",[t]),i.name.textContent=t.name,i.checkbox.checked=t.enabled):T(this.debugService,this.contextViewService,e,t,i.breakpoint,n.localize(1,null)),i.actionBar.context=t},e.prototype.renderBreakpoint=function(e,t,n){this.debugService.getModel().areBreakpointsActivated()?e.removeTraits("disabled",[t]):e.addTraits("disabled",[t]),n.name.textContent=d.getPathLabel(o.basename(t.source.uri.fsPath),this.contextService),n.lineNumber.textContent=t.desiredLineNumber!==t.lineNumber?t.desiredLineNumber+"  "+t.lineNumber:""+t.lineNumber,n.filePath.textContent=d.getPathLabel(o.dirname(t.source.uri.fsPath),this.contextService),n.checkbox.checked=t.enabled,n.actionBar.context=t},e.prototype.disposeTemplate=function(t,n,i){(n===e.BREAKPOINT_TEMPLATE_ID||n===e.FUNCTION_BREAKPOINT_TEMPLATE_ID)&&i.actionBar.dispose()},e.EXCEPTION_BREAKPOINT_TEMPLATE_ID="exceptionBreakpoint",e.FUNCTION_BREAKPOINT_TEMPLATE_ID="functionBreakpoint",e.BREAKPOINT_TEMPLATE_ID="breakpoint",e=__decorate([__param(2,E.IMessageService),__param(3,b.IWorkspaceContextService),__param(4,m.IDebugService),__param(5,_.IContextViewService)],e)}();t.BreakpointsRenderer=K;var U=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i,r){return void 0===r&&(r="mouse"),n instanceof v.ExceptionBreakpoint?!1:e.prototype.onLeftClick.call(this,t,n,i,r)},t.prototype.onUp=function(t,n){return this.doNotFocusExceptionBreakpoint(t,e.prototype.onUp.call(this,t,n))},t.prototype.onPageUp=function(t,n){return this.doNotFocusExceptionBreakpoint(t,e.prototype.onPageUp.call(this,t,n))},t.prototype.doNotFocusExceptionBreakpoint=function(e,t){if(t){var n=e.getFocus();n instanceof v.ExceptionBreakpoint&&e.focusNth(2)}return t},t.prototype.onDelete=function(e,t){var n=e.getFocus();if(n instanceof v.Breakpoint){var i=n;return this.debugService.toggleBreakpoint({uri:i.source.uri,lineNumber:i.lineNumber}).done(null,a.onUnexpectedError),!0}if(n instanceof v.FunctionBreakpoint){var r=n;return this.debugService.removeFunctionBreakpoints(r.getId()).done(null,a.onUnexpectedError),!0}return!1},t}(R);t.BreakpointsController=U});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/replViewer",["require","exports","vs/nls!vs/workbench/parts/debug/browser/replViewer","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/platform","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/dom","vs/base/common/errors","vs/base/common/severity","vs/base/browser/mouseEvent","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugViewer","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/services/editor/common/editorService","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){function g(){return o.isMacintosh?".expression.mac":".expression.win-linux"}var y=a.emmet,_=function(){function e(e){this.debugService=e}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t instanceof h.Model||t.reference>0||t instanceof h.KeyValueOutputElement&&t.getChildren().length>0},e.prototype.getChildren=function(e,t){return t instanceof h.Model?i.Promise.as(t.getReplElements()):t instanceof h.KeyValueOutputElement?i.Promise.as(t.getChildren()):t instanceof h.ValueOutputElement?i.Promise.as(null):t.getChildren(this.debugService)},e.prototype.getParent=function(e,t){return i.Promise.as(null)},e}();t.ReplExpressionsDataSource=_;var b=function(){function e(e,t,n){this.debugService=e,this.editorService=t,this.contextService=n}return e.prototype.getHeight=function(e,t){return this.getHeightForString(t.value)+(t instanceof h.Expression?this.getHeightForString(t.name):0)},e.prototype.getHeightForString=function(e){return!e||!e.length||this.width<=0||this.characterWidth<=0?24:24*Math.ceil(e.length*this.characterWidth/this.width)},e.prototype.setWidth=function(e,t){this.width=e,this.characterWidth=t},e.prototype.getTemplateId=function(t,n){return n instanceof h.Variable?e.VARIABLE_TEMPLATE_ID:n instanceof h.Expression?e.INPUT_OUTPUT_PAIR_TEMPLATE_ID:n instanceof h.ValueOutputElement?e.VALUE_OUTPUT_TEMPLATE_ID:n instanceof h.KeyValueOutputElement?e.KEY_VALUE_OUTPUT_TEMPLATE_ID:null},e.prototype.renderTemplate=function(t,n,i){if(n===e.VARIABLE_TEMPLATE_ID){var r=Object.create(null);return r.expression=a.append(i,y(g())),r.name=a.append(r.expression,y("span.name")),r.value=a.append(r.expression,y("span.value")),r}if(n===e.INPUT_OUTPUT_PAIR_TEMPLATE_ID){var r=Object.create(null);return a.addClass(i,"input-output-pair"),r.input=a.append(i,y(".input"+g())),r.output=a.append(i,y(".output"+g())),r.value=a.append(r.output,y("span.value")),r.annotation=a.append(r.output,y("span")),r}if(n===e.VALUE_OUTPUT_TEMPLATE_ID){var r=Object.create(null);a.addClass(i,"output");var o=a.append(i,y(".output"+g()));return r.container=i,r.counter=a.append(o,y("div.counter")),r.value=a.append(o,y("span.value")),r}if(n===e.KEY_VALUE_OUTPUT_TEMPLATE_ID){var r=Object.create(null);return a.addClass(i,"output"),r.container=i,r.expression=a.append(i,y(".output"+g())),r.key=a.append(r.expression,y("span.name")),r.value=a.append(r.expression,y("span.value")),r.annotation=a.append(r.expression,y("span")),r}},e.prototype.renderElement=function(t,n,i,r){i===e.VARIABLE_TEMPLATE_ID?p.renderVariable(t,n,r,this.debugService.getState()===d.State.Inactive):i===e.INPUT_OUTPUT_PAIR_TEMPLATE_ID?this.renderInputOutputPair(t,n,r):i===e.VALUE_OUTPUT_TEMPLATE_ID?this.renderOutputValue(n,r):i===e.KEY_VALUE_OUTPUT_TEMPLATE_ID&&this.renderOutputKeyValue(t,n,r)},e.prototype.renderInputOutputPair=function(e,t,i){i.input.textContent=t.name,p.renderExpressionValue(e,t,this.debugService.getState()===d.State.Inactive,i.value),t.reference>0&&(i.annotation.className="annotation octicon octicon-info",i.annotation.title=n.localize(0,null))},e.prototype.renderOutputValue=function(e,t){e.counter>1?(t.counter.textContent=String(e.counter),t.counter.className=e.severity===u["default"].Warning?"counter warn":e.severity===u["default"].Error?"counter error":"counter info"):(t.counter.textContent="",t.counter.className="counter"),e.grouped?a.addClass(t.container,"grouped"):a.removeClass(t.container,"grouped"),a.clearNode(t.value);var n=this.handleANSIOutput(e.value);"string"==typeof n?t.value.textContent=n:t.value.appendChild(n),t.value.className=e.severity===u["default"].Warning?"warn":e.severity===u["default"].Error?"error":"info"},e.prototype.handleANSIOutput=function(e){for(var t,n,i="",r=0,o=e.length;o>r;r++)if(27===e.charCodeAt(r)){var s=r,a=++s<o?e.charAt(s):null;if(a&&"["===a){var c=null;if(a=++s<o?e.charAt(s):null,a&&a>="0"&&"9">=a&&(c=a,a=++s<o?e.charAt(s):null),a&&a>="0"&&"9">=a&&(c+=a,a=++s<o?e.charAt(s):null),null===c&&(c="0"),"m"===a){var u=parseInt(c,10),l=document.createElement("span");u>=30&&37>=u||u>=90&&97>=u?l.className="code"+u:1===u&&(l.className="code-bold"),t||(t=document.createElement("span")),i&&(this.insert(this.handleLinks(i),n||t),i=""),n=l,t.appendChild(l),r=s}}}else i+=e[r];if(i){var d=this.handleLinks(i);("string"!=typeof d||n)&&(t||(t=document.createElement("span")),this.insert(d,n||t))}return t||i},e.prototype.insert=function(e,t){"string"==typeof e?t.textContent=e:t.appendChild(e)},e.prototype.handleLinks=function(t){for(var i,s=this,a=0,c=e.FILE_LOCATION_PATTERNS;a<c.length;a++){var u=c[a];u.lastIndex=0;var d=u.exec(t),h=d&&r["default"].file(d[1]);if(h){i=document.createElement("span");var p=t.substr(0,d.index);if(p){var f=document.createElement("span");f.textContent=p,i.appendChild(f)}var m=document.createElement("a");m.textContent=t.substr(d.index,d[0].length),m.title=o.isMacintosh?n.localize(1,null):n.localize(2,null),i.appendChild(m),m.onclick=function(e){return s.onLinkClick(new l.StandardMouseEvent(e),h,Number(d[3]),Number(d[4]))};var v=t.substr(d.index+d[0].length);if(v){var f=document.createElement("span");f.textContent=v,i.appendChild(f)}break}}return i||t},e.prototype.onLinkClick=function(e,t,n,i){var r=window.getSelection();"Range"!==r.type&&(e.preventDefault(),this.editorService.openEditor({resource:t,options:{selection:{startLineNumber:n,startColumn:i}}},e.ctrlKey||e.metaKey).done(null,c.onUnexpectedError))},e.prototype.renderOutputKeyValue=function(e,t,n){t.key?n.key.textContent=t.key+":":n.key.textContent="",p.renderExpressionValue(e,t.value,!1,n.value),t.annotation?(n.annotation.className="annotation octicon octicon-info",n.annotation.title=t.annotation):(n.annotation.className="",n.annotation.title=""),t.grouped?a.addClass(n.container,"grouped"):a.removeClass(n.container,"grouped")},e.prototype.disposeTemplate=function(e,t,n){},e.VARIABLE_TEMPLATE_ID="variable",e.INPUT_OUTPUT_PAIR_TEMPLATE_ID="inputOutputPair",e.VALUE_OUTPUT_TEMPLATE_ID="outputValue",e.KEY_VALUE_OUTPUT_TEMPLATE_ID="outputKeyValue",e.FILE_LOCATION_PATTERNS=[/((\/|[a-zA-Z]:\\)[^\(\)<>\'\"\[\]]+):(\d+):(\d+)/],e=__decorate([__param(0,d.IDebugService),__param(1,m.IWorkbenchEditorService),__param(2,v.IWorkspaceContextService)],e)}();t.ReplExpressionsRenderer=b;var E=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e,t){return!0},t.prototype.getSecondaryActions=function(e,t){var n=[];return t instanceof h.Variable||t instanceof h.Expression?(n.push(this.instantiationService.createInstance(f.AddToWatchExpressionsAction,f.AddToWatchExpressionsAction.ID,f.AddToWatchExpressionsAction.LABEL,t)),n.push(new s.Separator),0===t.reference&&n.push(this.instantiationService.createInstance(f.CopyValueAction,f.CopyValueAction.ID,f.CopyValueAction.LABEL,t.value))):t instanceof h.OutputElement&&n.push(this.instantiationService.createInstance(f.CopyValueAction,f.CopyValueAction.ID,f.CopyValueAction.LABEL,t.value)),n.push(this.instantiationService.createInstance(f.ClearReplAction)),i.Promise.as(n)},t}(p.SimpleActionProvider);t.ReplExpressionsActionProvider=E;var S=function(e){function t(t,n,i,r,o){void 0===o&&(o=!0),e.call(this,t,n,i,o),this.replInput=r,this.lastSelectedString=null}return __extends(t,e),t.prototype.onLeftClick=function(t,n,i,r){void 0===r&&(r="mouse");var o=i;(n.reference>0||n instanceof h.KeyValueOutputElement&&n.getChildren().length>0)&&-1===o.target.className.indexOf("input expression")&&(e.prototype.onLeftClick.call(this,t,n,i,r),t.clearFocus(),t.deselect(n));var s=window.getSelection();return("Range"!==s.type||this.lastSelectedString===s.toString())&&this.replInput.focus(),this.lastSelectedString=s.toString(),!0},t}(p.BaseDebugController);t.ReplExpressionsController=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/binaryFileEditor",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/binaryFileEditor","vs/workbench/browser/parts/editor/binaryEditor","vs/workbench/parts/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService"],function(e,t,n,i,r,o,s){var a=function(e){function t(n,i){e.call(this,t.ID,n,i)}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():n.localize(0,null)},t.prototype.supportsSplitEditor=function(){return!0},t.ID=r.BINARY_FILE_EDITOR_ID,t=__decorate([__param(0,o.ITelemetryService),__param(1,s.IWorkbenchEditorService)],t)}(i.BaseBinaryResourceEditor);t.BinaryFileEditor=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/browser/editors/derivedFrameEditorInput",["require","exports","vs/workbench/browser/parts/editor/iframeEditorInput"],function(e,t,n){var i=function(e){function t(t,n,i){e.call(this,n,i,null),this.resource=t}return __extends(t,e),t.prototype.getResource=function(){return this.resource},t.prototype.matches=function(n){if(e.prototype.matches.call(this,n)===!0)return!0;if(n instanceof t){var i=n;return i.resource.toString()===this.resource.toString()}return!1},t}(n.IFrameEditorInput);t.DerivedFrameEditorInput=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/htmlFrameEditorInput",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/htmlFrameEditorInput","vs/base/common/paths","vs/workbench/parts/files/browser/editors/derivedFrameEditorInput","vs/workbench/browser/parts/editor/iframeEditorModel","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s,a){var c=function(e){function t(t,r,o){e.call(this,t,n.localize(0,null,i.basename(t.fsPath))),this.instantiationService=r,this.contextService=o}return __extends(t,e),t.prototype.createNew=function(e){return this.instantiationService.createInstance(t,e)},t.prototype.getId=function(){return t.ID},t.prototype.createModel=function(){var e=new o.IFrameEditorModel(this.getResource());return e.setUrl(this.getResource().toString()),e},t.prototype.matches=function(n){return n instanceof t?e.prototype.matches.call(this,n):!1},t.ID="vs.html",t=__decorate([__param(1,s.IInstantiationService),__param(2,a.IWorkspaceContextService)],t)}(r.DerivedFrameEditorInput);t.HTMLFrameEditorInput=c});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/parts/files/browser/files",["require","exports","vs/base/common/strings","vs/workbench/parts/files/common/files","vs/workbench/browser/parts/editor/baseEditor"],function(e,t,n,i,r){var o=function(e){function t(t){e.call(this),this.mimes=t}return __extends(t,e),t.prototype.toId=function(t){var n=e.prototype.toId.call(this,t),i=this.getMimeFromContext(t);return i&&(n+=i),n},t.prototype.getMimeFromContext=function(e){if(e&&e.input&&e.input instanceof i.FileEditorInput){var t=e.input;return t.getMime()}return null},t.prototype.hasMime=function(e){var t=this.getMimeFromContext(e);if(t)for(var i=t.split(","),r=0;r<i.length;r++)if(this.mimes.indexOf(n.trim(i[r]))>=0)return!0;return!1},t.prototype.hasActions=function(t){return this.hasMime(t)?e.prototype.hasActions.call(this,t):!1},t.prototype.hasSecondaryActions=function(t){return this.hasMime(t)?e.prototype.hasSecondaryActions.call(this,t):!1},t}(r.EditorInputActionContributor);t.FileEditorInputActionContributor=o;var s=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r),this.mimetypes=o}return __extends(t,e),t.prototype.getMimeTypes=function(){return this.mimetypes},t}(r.EditorDescriptor);t.FileEditorDescriptor=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownEditorInput",["require","exports","vs/nls!vs/workbench/parts/markdown/browser/markdownEditorInput","vs/base/common/paths","vs/base/common/labels","vs/workbench/parts/files/browser/editors/derivedFrameEditorInput","vs/workbench/parts/markdown/browser/markdownEditorModel","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace"],function(e,t,n,i,r,o,s,a,c){var u=function(e){function t(t,o,s,a,c){e.call(this,t,o||n.localize(0,null,i.basename(t.fsPath)),s||r.getPathLabel(i.dirname(t.fsPath),c)),this.instantiationService=a,this.contextService=c}return __extends(t,e),t.prototype.createNew=function(e){return this.instantiationService.createInstance(t,e,void 0,void 0)},t.prototype.getId=function(){return t.ID},t.prototype.createModel=function(){return this.instantiationService.createInstance(s.MarkdownEditorModel,this.getResource())},t.prototype.matches=function(n){return n instanceof t?e.prototype.matches.call(this,n):!1},t.ID="vs.markdown",t=__decorate([__param(3,a.IInstantiationService),__param(4,c.IWorkspaceContextService)],t)}(o.DerivedFrameEditorInput);t.MarkdownEditorInput=u});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/search/browser/search.contribution",["require","exports","vs/platform/platform","vs/workbench/browser/viewlet","vs/platform/configuration/common/configurationRegistry","vs/nls!vs/workbench/parts/search/browser/search.contribution","vs/workbench/parts/files/common/files","vs/platform/actions/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/actionRegistry","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/descriptors","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/css!./media/search.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){t.VIEWLET_ID="workbench.view.search",p.KeybindingsRegistry.registerCommandDesc({id:"workbench.action.search.toggleQueryDetails",weight:p.KeybindingsRegistry.WEIGHT.workbenchContrib(),context:[{key:"searchViewletVisible"}],primary:b.KeyMod.CtrlCmd|b.KeyMod.Shift|b.KeyCode.KEY_J,handler:function(e){var n=e.viewletService;n.openViewlet(t.VIEWLET_ID,!0).then(function(e){return e.toggleFileTypes()})}});var E=function(e){function n(n,i,r,o){e.call(this,n,i,t.VIEWLET_ID,r,o)}return __extends(n,e),n.ID=t.VIEWLET_ID,n.LABEL=o.localize(0,null),n=__decorate([__param(2,y.IViewletService),__param(3,_.IWorkbenchEditorService)],n)}(i.ToggleViewletAction),S=function(e){function t(t,n){e.call(this),this._instantiationService=t,this._contextService=n}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element,n=s.asFileResource(t);return n?n.isDirectory:!1},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=s.asFileResource(e.element),i=new a.DeferredAction(this._instantiationService,new m.AsyncDescriptor("vs/workbench/parts/search/browser/searchViewlet","FindInFolderAction",n.resource),"workbench.search.action.findInFolder",o.localize(1,null));i.order=55,t.push(i),t.push(new c.Separator("",56))}return t},t=__decorate([__param(0,f.IInstantiationService),__param(1,v.IWorkspaceContextService)],t)}(u.ActionBarContributor),w="workbench.action.showAllSymbols",C=o.localize(2,null),T="#",I=function(e){function t(t,n,i){e.call(this,t,n,T,i)}return __extends(t,e),t=__decorate([__param(2,g.IQuickOpenService)],t)}(h.QuickOpenAction);n.Registry.as(i.Extensions.Viewlets).registerViewlet(new i.ViewletDescriptor("vs/workbench/parts/search/browser/searchViewlet","SearchViewlet",t.VIEWLET_ID,o.localize(3,null),"search",10));var k={primary:b.KeyMod.CtrlCmd|b.KeyMod.Shift|b.KeyCode.KEY_F};n.Registry.as(l.Extensions.WorkbenchActions).registerWorkbenchAction(new a.SyncActionDescriptor(E,E.ID,E.LABEL,k),o.localize(4,null));var x=n.Registry.as(u.Extensions.Actionbar);x.registerActionBarContributor(u.Scope.VIEWER,S),n.Registry.as(d.Extensions.Quickopen).registerDefaultQuickOpenHandler(new d.QuickOpenHandlerDescriptor("vs/workbench/parts/search/browser/openAnythingHandler","OpenAnythingHandler","",o.localize(5,null))),n.Registry.as(d.Extensions.Quickopen).registerQuickOpenHandler(new d.QuickOpenHandlerDescriptor("vs/workbench/parts/search/browser/openAnythingHandler","OpenSymbolHandler",T,[{prefix:T,needsEditor:!1,description:o.localize(6,null)}]));var A=n.Registry.as(l.Extensions.WorkbenchActions);A.registerWorkbenchAction(new a.SyncActionDescriptor(I,w,C,{primary:b.KeyMod.CtrlCmd|b.KeyCode.KEY_T}));var R=n.Registry.as(r.Extensions.Configuration);R.registerConfiguration({id:"search",order:10,title:o.localize(7,null),type:"object",properties:{"search.exclude":{id:"glob-pattern",type:"object",description:o.localize(8,null),"default":{"**/node_modules":!0,"**/bower_components":!0},additionalProperties:{anyOf:[{type:"boolean",description:o.localize(9,null)},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*","default":"$(basename).ext",description:o.localize(10,null)}}}]}},"filePicker.alternateFileNameMatching":{type:"boolean","default":!1,description:o.localize(11,null)}}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/services/editor/browser/editorService",["require","exports","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/network","vs/base/common/mime","vs/platform/platform","vs/base/common/types","vs/editor/common/editorCommon","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/untitledEditorInput","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=function(){function e(e,t,n){this.untitledEditorService=t,this.instantiationService=n,this.serviceId=p.IWorkbenchEditorService,this.editorPart=e,this.fileInputDescriptor=s.Registry.as(u.Extensions.Editors).getDefaultFileInput()}return e.prototype.setInstantiationService=function(e){this.instantiationService=e},e.prototype.getActiveEditor=function(){return this.editorPart.getActiveEditor()},e.prototype.getActiveEditorInput=function(){return this.editorPart.getActiveEditorInput()},e.prototype.getVisibleEditors=function(){return this.editorPart.getVisibleEditors()},e.prototype.isVisible=function(e,t){return e?this.getVisibleEditors().some(function(n){if(!n.input)return!1;if(e.matches(n.input))return!0;if(t){var i=n.input;if(a.isFunction(i.getOriginalInput)&&a.isFunction(i.getModifiedInput))return e.matches(i.getModifiedInput())||e.matches(i.getOriginalInput())}return!1}):!1},e.prototype.moveEditor=function(e,t){this.editorPart.moveEditor(e,t)},e.prototype.arrangeEditors=function(e){this.editorPart.arrangeEditors(e)},e.prototype.setEditors=function(e,t){var i=this;return n.Promise.join(e.map(function(e){return i.inputToType(e)})).then(function(n){return i.editorPart.setEditors(n,t||e.map(function(e){return e instanceof l.EditorInput?null:l.TextEditorOptions.from(e)}))})},e.prototype.openEditor=function(e,t,o){var s=this;if(null===e)return this.doOpenEditor(e,null,a.isNumber(t)||a.isBoolean(t)?t:o);if(e instanceof l.EditorInput)return this.doOpenEditor(e,t,o);var c=e;if(i["default"].isURI(c.resource)){var u=c.resource.scheme;if(u===r.schemas.http||u===r.schemas.https)return window.open(c.resource.toString()),n.TPromise.as(null)}var d=e;return this.inputToType(d).then(function(e){return e?s.doOpenEditor(e,l.TextEditorOptions.from(d),t):n.TPromise.as(null)})},e.prototype.doOpenEditor=function(e,t,n){return this.editorPart.openEditor(e,t,n)},e.prototype.closeEditor=function(e){var t=this.findEditor(e);return t?this.editorPart.openEditor(null,null,t.position):n.TPromise.as(null)},e.prototype.closeEditors=function(e){return this.editorPart.closeEditors(e)},e.prototype.focusEditor=function(e){var t=this.findEditor(e);return t?this.editorPart.openEditor(t.input,null,t.position):n.TPromise.as(null)},e.prototype.findEditor=function(e){if(e instanceof u.BaseEditor)return e;if(a.isUndefinedOrNull(e))return this.editorPart.getActiveEditor();if(a.isNumber(e))for(var t=e,n=this.editorPart.getVisibleEditors(),i=0;i<n.length;i++){var r=n[i];if(r.position===t)return r}return null},e.prototype.resolveEditorModel=function(e,t){return this.inputToType(e).then(function(e){return e&&e instanceof l.EditorInput?e.resolve(!!t):n.TPromise.as(null)})},e.prototype.inputToType=function(e){if(e instanceof l.EditorInput)return n.TPromise.as(e);var t=e;if(i["default"].isURI(t.resource)&&t.resource.scheme===r.schemas.inMemory){var o=this.getActiveEditor();if(o){var s=o.getControl();if(a.isFunction(s.getEditorType))if(s.getEditorType()===c.EditorType.ICodeEditor){var u=s,h=this.findModel(u,e);if(h)return n.TPromise.as(o.input)}else if(s.getEditorType()===c.EditorType.IDiffEditor){var p=o.input,f=s,m=this.findModel(f.getOriginalEditor(),e);if(m)return n.TPromise.as(p.getOriginalInput());var v=this.findModel(f.getModifiedEditor(),e);if(v)return n.TPromise.as(p.getModifiedInput())}}}else{if(i["default"].isURI(t.resource)&&t.resource.scheme===d.UntitledEditorInput.SCHEMA)return n.TPromise.as(this.untitledEditorService.createOrGet(t.resource));if(this.fileInputDescriptor&&i["default"].isURI(t.resource)&&t.resource.scheme===r.schemas.file)return this.createFileInput(t.resource,t.mime)}return n.TPromise.as(null)},e.prototype.createFileInput=function(e,t){return this.instantiationService.createInstance(this.fileInputDescriptor).then(function(n){return n.setResource(e),n.setMime(t||o.guessMimeTypes(e.fsPath).join(", ")),n})},e.prototype.findModel=function(e,t){var n=e.getModel();return n&&n.getAssociatedResource().toString()===t.resource.toString()?n:null},e=__decorate([__param(1,h.IUntitledEditorService),__param(2,f.IInstantiationService)],e)}();t.WorkbenchEditorService=m;var v=function(){function e(e){this.editorService=e}return e.prototype.setEditors=function(e){return this.editorService.setEditors(e)},e.prototype.openEditor=function(e,t,n){return this.editorService.openEditor(e,t,n)},e.prototype.getActiveEditor=function(){return this.editorService.getActiveEditor()},e.prototype.getActiveEditorInput=function(){return this.editorService.getActiveEditorInput()},e.prototype.getVisibleEditors=function(){return this.editorService.getVisibleEditors()},e.prototype.moveEditor=function(e,t){this.editorService.moveEditor(e,t)},e.prototype.arrangeEditors=function(e){this.editorService.arrangeEditors(e)},e.prototype.closeEditors=function(e){return this.editorService.closeEditors(e)},e}(),g=function(e){function t(t,n,i,r,o){e.call(this,new v(o),i,r),this.editor=t,this.handler=n}return __extends(t,e),t.prototype.doOpenEditor=function(t,i,r){var o=this;return this.handler(this.editor,t,i,r).then(function(s){return s?n.TPromise.as(o.editor):e.prototype.doOpenEditor.call(o,t,i,r)})},t=__decorate([__param(2,h.IUntitledEditorService),__param(3,f.IInstantiationService),__param(4,p.IWorkbenchEditorService)],t)}(m);t.DelegatingWorkbenchEditorService=g}),define("vs/workbench/services/window/electron-browser/windowService",["require","exports","vs/platform/instantiation/common/instantiation","vs/base/common/eventSource","remote","ipc"],function(e,t,n,i,r,o){t.IWindowService=n.createDecorator("windowService");var s=function(){function e(){this.serviceId=t.IWindowService,this._onBroadcast=new i.EventSource,this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;o.on("vscode:broadcast",function(t){e._onBroadcast.fire(t)})},Object.defineProperty(e.prototype,"onBroadcast",{get:function(){return this._onBroadcast.value},enumerable:!0,configurable:!0}),e.prototype.getWindowId=function(){return r.getCurrentWindow().id},e.prototype.getWindow=function(){return this.win},e.prototype.registerWindow=function(e){this.win=e},e.prototype.broadcast=function(e,t){o.send("vscode:broadcast",this.getWindowId(),t,{channel:e.channel,payload:e.payload})},e}();t.WindowService=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/workspace/common/contextService",["require","exports","vs/base/common/types","vs/workbench/common/events","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/baseWorkspaceContextService"],function(e,t,n,i,r,o){t.IWorkspaceContextService=r.createDecorator("contextService");var s=function(e){function r(n,i,r,o){void 0===o&&(o={}),e.call(this,i,r,o),
this.eventService=n,this.serviceId=t.IWorkspaceContextService}return __extends(r,e),r.prototype.updateOptions=function(e,t){var n=this.options[e];this.options[e]=t,this.eventService.emit(i.EventType.WORKBENCH_OPTIONS_CHANGED,new i.OptionsChangeEvent(e,n,t))},r.prototype.isAutoSaveEnabled=function(){var e=!0;return this.options&&n.isNumber(this.options.autoSaveDelay)&&(e=-1!==this.options.autoSaveDelay),e},r}(o.BaseWorkspaceContextService);t.WorkspaceContextService=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/actions/openSettings",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/actions/openSettings","vs/base/common/uri","vs/base/common/network","vs/base/common/labels","vs/platform/platform","vs/base/common/actions","vs/workbench/browser/actionRegistry","vs/workbench/browser/parts/editor/stringEditorInput","vs/platform/configuration/common/model","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/configuration/common/configuration","vs/platform/editor/common/editor","vs/platform/files/common/files","vs/platform/message/common/message","vs/platform/keybinding/common/keybindingService","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E){var S=function(e){function t(t,n,i,r,o,s,a,c,u){e.call(this,t,n),this.editorService=i,this.fileService=r,this.configurationService=o,this.messageService=s,this.contextService=a,this.keybindingService=c,this.instantiationService=u,this.enabled=!0}return __extends(t,e),t.prototype.createIfNotExists=function(e,t){var r=this;return this.fileService.resolveContent(e,{acceptTextOnly:!0}).then(null,function(o){return o.fileOperationResult===v.FileOperationResult.FILE_NOT_FOUND?r.fileService.updateContent(e,t).then(null,function(t){return n.Promise.wrapError(new Error(i.localize(0,null,s.getPathLabel(e,r.contextService),t)))}):n.Promise.wrapError(o)})},t.prototype.openTwoEditors=function(e,t,n){var i=this;return this.createIfNotExists(t,n).then(function(){return i.editorService.inputToType({resource:t}).then(function(t){return i.editorService.setEditors([e,t]).then(function(){return i.editorService.focusEditor(m.Position.CENTER)})})})},t=__decorate([__param(2,h.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,f.IConfigurationService),__param(5,g.IMessageService),__param(6,p.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(c.Action);t.BaseTwoEditorsAction=S;var w=function(e){function t(t,n,i,r,o,s,a,c,u){e.call(this,t,n,i,r,o,s,a,c,u)}return __extends(t,e),t.prototype.open=function(e,t){return this.openTwoEditors(k.getInstance(this.instantiationService),t,e)},t=__decorate([__param(2,h.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,f.IConfigurationService),__param(5,g.IMessageService),__param(6,p.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(S);t.BaseOpenSettingsAction=w;var C=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e){var t=this;if(this.configurationService.hasWorkspaceConfiguration()){var n=this.messageService.show(g.Severity.Info,{message:i.localize(2,null),actions:[g.CloseAction,new c.Action("open.workspaceSettings",i.localize(3,null),null,!0,function(){var e=t.editorService.getVisibleEditors().length;return t.editorService.inputToType({resource:t.contextService.toResource(".vscode/settings.json")}).then(function(n){return t.editorService.openEditor(n,null,2===e?m.Position.RIGHT:1===e?m.Position.CENTER:void 0)})})]});setTimeout(function(){return n()},1e4)}var o=i.localize(4,null);return this.open("// "+o+"\n{\n}",r["default"].file(this.contextService.getConfiguration().env.appSettingsPath))},t.ID="workbench.action.openGlobalSettings",t.LABEL=i.localize(1,null),t}(w);t.OpenGlobalSettingsAction=C;var T=function(e){function t(t,n,i,r,o,s,a,c,u){e.call(this,t,n,i,r,o,s,a,c,u)}return __extends(t,e),t.prototype.run=function(e){var t="// "+i.localize(6,null)+"\n[\n]";return this.openTwoEditors(x.getInstance(this.instantiationService,this.keybindingService),r["default"].file(this.contextService.getConfiguration().env.appKeybindingsPath),t)},t.ID="workbench.action.openGlobalKeybindings",t.LABEL=i.localize(5,null),t=__decorate([__param(2,h.IWorkbenchEditorService),__param(3,v.IFileService),__param(4,f.IConfigurationService),__param(5,g.IMessageService),__param(6,p.IWorkspaceContextService),__param(7,y.IKeybindingService),__param(8,b.IInstantiationService)],t)}(S);t.OpenGlobalKeybindingsAction=T;var I=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e){if(!this.contextService.getWorkspace())return void this.messageService.show(g.Severity.Info,i.localize(8,null));var t=["// "+i.localize(9,null),"{","}"].join("\n");return this.open(t,this.contextService.toResource(".vscode/settings.json"))},t.ID="workbench.action.openWorkspaceSettings",t.LABEL=i.localize(7,null),t}(w);t.OpenWorkspaceSettingsAction=I;var k=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e){if(!t.INSTANCE){var n=d.getDefaultValuesContent(),r="// "+i.localize(10,null);t.INSTANCE=e.createInstance(t,i.localize(11,null),null,r+"\n"+n,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return r["default"].create(o.schemas.inMemory,"defaults","/settings.json")},t}(l.StringEditorInput),x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e,n){if(!t.INSTANCE){var r="// "+i.localize(12,null),o=n.getDefaultKeybindings();t.INSTANCE=e.createInstance(t,i.localize(13,null),null,r+"\n"+o,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return r["default"].create(o.schemas.inMemory,"defaults","/keybindings.json")},t}(l.StringEditorInput),A=i.localize(14,null),R=a.Registry.as(u.Extensions.WorkbenchActions);R.registerWorkbenchAction(new _.SyncActionDescriptor(C,C.ID,C.LABEL,{primary:null,mac:{primary:E.KeyMod.CtrlCmd|E.KeyCode.US_COMMA}}),A),R.registerWorkbenchAction(new _.SyncActionDescriptor(T,T.ID,T.LABEL),A),R.registerWorkbenchAction(new _.SyncActionDescriptor(I,I.ID,I.LABEL),A)});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/layout",["require","exports","vs/base/browser/builder","vs/workbench/common/constants","vs/workbench/browser/events","vs/base/browser/ui/sash/sash","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/contextview/browser/contextView","vs/platform/event/common/event"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=170,p=50,f=[i.Preferences.THEME],m=function(){function e(){this.margin=new n.Box(0,0,0,0)}return e.prototype.setMargin=function(e){return this.margin=e,this},e}();t.LayoutOptions=m;var v=function(){function e(t,n,i,r,s,a,c,l,d,h,p,f,v,g){this.storageService=d,this.eventService=h,this.contextViewService=p,this.editorService=f,this.contextService=v,this.partService=g,this.parent=t,this.workbenchContainer=n,this.activitybar=i,this.editor=r,this.sidebar=s,this.statusbar=a,this.quickopen=c,this.options=l||new m,this.toUnbind=[],this.computedStyles=null,this.sash=new o.Sash(this.workbenchContainer.getHTMLElement(),this,{baseSize:5}),this.sidebarWidth=this.storageService.getInteger(e.sashWidthSettingsKey,u.StorageScope.GLOBAL,-1),this.registerListeners(),this.registerSashListeners()}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(u.StorageEventType.STORAGE,function(t){return e.onPreferenceChange(t)})),this.toUnbind.push(this.eventService.addListener(r.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)}))},e.prototype.registerSashListeners=function(){var t=this,n=0;this.sash.addListener("start",function(e){t.startSidebarWidth=t.sidebarWidth,n=e.startX}),this.sash.addListener("change",function(e){var i=!1,r=t.partService.getSideBarPosition(),o=t.partService.isSideBarHidden(),s=r===a.Position.LEFT?t.startSidebarWidth+e.currentX-n:t.startSidebarWidth-e.currentX+n;if(o)(r===a.Position.LEFT&&e.currentX-n>=t.computedStyles.sidebar.minWidth||r===a.Position.RIGHT&&n-e.currentX>=t.computedStyles.sidebar.minWidth)&&(t.startSidebarWidth=t.computedStyles.sidebar.minWidth-(r===a.Position.LEFT?e.currentX-n:n-e.currentX),t.sidebarWidth=t.computedStyles.sidebar.minWidth,t.partService.setSideBarHidden(!1));else if(s+p<t.computedStyles.sidebar.minWidth){var c=h-p;t.partService.setSideBarHidden(!0),n=r===a.Position.LEFT?Math.max(t.computedStyles.activitybar.minWidth,e.currentX-c):Math.min(e.currentX+c,t.workbenchSize.width-t.computedStyles.activitybar.minWidth),t.sidebarWidth=t.startSidebarWidth}else t.sidebarWidth=Math.max(t.computedStyles.sidebar.minWidth,s),i=s>=t.computedStyles.sidebar.minWidth;i&&t.layout()}),this.sash.addListener("end",function(){t.storageService.store(e.sashWidthSettingsKey,t.sidebarWidth,u.StorageScope.GLOBAL)})},e.prototype.onEditorInputChanging=function(e){if(this.workbenchSize&&this.sidebarWidth){var t=this.editorService.getVisibleEditors().length;t>1&&this.workbenchSize.width-this.sidebarWidth<t*h&&this.layout()}},e.prototype.onPreferenceChange=function(e){e.key&&f.indexOf(e.key)>=0&&(this.computeStyle(),this.editor.getLayout().computeStyle(),this.sidebar.getLayout().computeStyle(),this.layout())},e.prototype.computeStyle=function(){var e=this.sidebar.getContainer().getComputedStyle(),t=this.editor.getContainer().getComputedStyle(),n=this.activitybar.getContainer().getComputedStyle();if(this.computedStyles={activitybar:{minWidth:parseInt(n.getPropertyValue("min-width"),10)||0},sidebar:{minWidth:parseInt(e.getPropertyValue("min-width"),10)||h},editor:{minWidth:parseInt(t.getPropertyValue("min-width"),10)||h},statusbar:{height:0}},this.statusbar){var i=this.statusbar.getContainer().getComputedStyle();this.computedStyles.statusbar.height=parseInt(i.getPropertyValue("height"),10)||18}},e.prototype.layout=function(t){t&&(this.computeStyle(),this.editor.getLayout().computeStyle(),this.sidebar.getLayout().computeStyle()),this.computedStyles||this.computeStyle(),this.workbenchSize=this.getWorkbenchArea();var i,r=this.partService.isSideBarHidden(),o=this.partService.getSideBarPosition();r?i=0:-1!==this.sidebarWidth?i=Math.max(this.computedStyles.sidebar.minWidth,this.sidebarWidth):(i=this.workbenchSize.width/5,this.sidebarWidth=i);var s=new n.Dimension(i,this.workbenchSize.height-this.computedStyles.statusbar.height),c=this.computedStyles.activitybar.minWidth,l=new n.Dimension(c,s.height),d={width:0,height:0,remainderLeft:0,remainderRight:0},p=new n.Dimension(this.workbenchSize.width-s.width-l.width,s.height);d.width=p.width,d.height=this.editorHeight=p.height,r&&(d.width=Math.min(this.workbenchSize.width-l.width,this.workbenchSize.width-c),o===a.Position.LEFT?(d.remainderLeft=Math.round((this.workbenchSize.width-d.width+l.width)/2),d.remainderRight=this.workbenchSize.width-d.width-d.remainderLeft):(d.remainderRight=Math.round((this.workbenchSize.width-d.width+l.width)/2),d.remainderLeft=this.workbenchSize.width-d.width-d.remainderRight));var f=this.computedStyles.editor.minWidth,m=this.editorService.getVisibleEditors().length;if(m>1&&(f*=m),d.width<f){var v=f-d.width;d.width=f,s.width-=v,s.width=Math.max(h,s.width)}r||(this.sidebarWidth=s.width,this.storageService.store(e.sashWidthSettingsKey,this.sidebarWidth,u.StorageScope.GLOBAL)),this.workbenchContainer.position(this.options.margin.top,this.options.margin.right,this.options.margin.bottom,this.options.margin.left,"relative").size(this.workbenchSize.width,this.workbenchSize.height),this.workbenchContainer.getHTMLElement().scrollTop>0&&(this.workbenchContainer.getHTMLElement().scrollTop=0),this.editor.getContainer().size(d.width,d.height),r?this.editor.getContainer().position(0,d.remainderRight,0,d.remainderLeft):o===a.Position.LEFT?this.editor.getContainer().position(0,0,0,s.width+l.width):this.editor.getContainer().position(0,s.width,0,0),this.activitybar.getContainer().size(null,l.height),o===a.Position.LEFT?(this.activitybar.getContainer().getHTMLElement().style.right="",this.activitybar.getContainer().position(0,null,0,0)):(this.activitybar.getContainer().getHTMLElement().style.left="",this.activitybar.getContainer().position(0,0,0,null)),this.sidebar.getContainer().size(s.width,s.height),o===a.Position.LEFT?this.sidebar.getContainer().position(0,d.width,0,l.width):this.sidebar.getContainer().position(0,null,0,d.width),this.statusbar&&this.statusbar.getContainer().position(this.workbenchSize.height-this.computedStyles.statusbar.height),this.quickopen.layout(this.workbenchSize),this.sash.layout(),this.editor.layout(new n.Dimension(d.width,d.height)),this.sidebar.layout(s),this.contextViewService&&this.contextViewService.layout()},e.prototype.getWorkbenchArea=function(){var e=this.parent.getClientArea();return e.substract(this.options.margin)},e.prototype.getVerticalSashTop=function(e){return 0},e.prototype.getVerticalSashLeft=function(e){var t=this.partService.isSideBarHidden(),n=this.partService.getSideBarPosition(),i=this.computedStyles.activitybar.minWidth;return n===a.Position.LEFT?t?i:this.sidebarWidth+i:t?this.workbenchSize.width-i:this.workbenchSize.width-this.sidebarWidth-i},e.prototype.getVerticalSashHeight=function(e){return this.editorHeight},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e.sashWidthSettingsKey="workbench.sidebar.width",e=__decorate([__param(8,u.IStorageService),__param(9,d.IEventService),__param(10,l.IContextViewService),__param(11,s.IWorkbenchEditorService),__param(12,c.IWorkspaceContextService),__param(13,a.IPartService)],e)}();t.WorkbenchLayout=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/sideBySideEditorControl",["require","exports","vs/nls!vs/workbench/browser/parts/editor/sideBySideEditorControl","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/base/common/actions","vs/base/common/arrays","vs/base/common/eventEmitter","vs/base/browser/mouseEvent","vs/base/common/errors","vs/base/common/platform","vs/base/common/types","vs/base/browser/builder","vs/base/browser/ui/sash/sash","vs/base/browser/ui/progressbar/progressbar","vs/workbench/common/editor","vs/workbench/browser/parts/editor/diffEditorInput","vs/base/common/events","vs/workbench/browser/events","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/toolbar/toolbar","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/css!./media/sidebyside"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A){!function(e){e[e.NONE=0]="NONE",e[e.CENTER_TO_LEFT=1]="CENTER_TO_LEFT",e[e.RIGHT_TO_CENTER=2]="RIGHT_TO_CENTER",e[e.CENTER_AND_RIGHT_TO_LEFT=3]="CENTER_AND_RIGHT_TO_LEFT"}(t.Rochade||(t.Rochade={}));var R=t.Rochade;t.EventType={EDITOR_FOCUS_CHANGED:"editorFocusChanged"};var D=function(a){function D(e,t,n,i,r,o,s,c,u){var l=this;a.call(this),this.editorService=t,this.messageService=n,this.quickOpenService=i,this.telemetryService=r,this.contextViewService=o,this.contextMenuService=s,this.eventService=c,this.contextService=u,this.parent=e,this.dimension=new h.Dimension(0,0),this.containers=[],this.containerWidth=[],this.titleContainer=[],this.titleLabel=[],this.titleDescription=[],this.editorInputStateDescription=[],this.editorActionsToolbar=[],this.progressBar=[],this.visibleEditors=[],this.visibleEditorContainers=[],this.visibleEditorFocusTrackers=[],this.closeEditorAction=I.POSITIONS.map(function(e){return l.makeCloseEditorAction(e)}),this.splitEditorAction=this.makeSplitEditorAction(),this.initStyles(),this.registerListeners(),this.create(this.parent)}return __extends(D,a),D.prototype.registerListeners=function(){var e=this;this.editorInputStateChangeListener=this.eventService.addListener(y.EventType.EDITOR_INPUT_STATE_CHANGED,function(t){e.updateEditorInputStateIndicator(t)})},D.prototype.initStyles=function(){var t=l.isWindows?'cursor: url("'+e.toUrl("vs/workbench/browser/parts/editor/media/grab.cur")+'"), move;':"cursor: -webkit-grab;",n=l.isWindows?'cursor: url("'+e.toUrl("vs/workbench/browser/parts/editor/media/grabbing.cur")+'"), move;':"cursor: -webkit-grabbing;";_.createCSSRule(".monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title .title-label a, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container .title .title-label span",t),_.createCSSRule("#monaco-workbench-editor-move-overlay, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title .title-label a, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .title .title-label span, .monaco-workbench > .part.editor > .content.multiple-editors .one-editor-container.dragged .monaco-editor .view-lines",n)},D.prototype.makeCloseEditorAction=function(e){var t=this;return new o.Action("close.editor.action",n.localize(0,null),"close-editor-action",!0,function(){return t.editorService.closeEditor(e)})},D.prototype.makeSplitEditorAction=function(){var e=this;return new o.Action("split.editor.action",n.localize(1,null),"split-editor-action",!0,function(){var t=e.editorService.getActiveEditor(),n=e.getVisibleEditorCount();if(n>1&&t.position===I.Position.LEFT){var i=e.visibleEditors[I.Position.CENTER].input,r=new m.TextEditorOptions;return r.preserveFocus=!0,e.editorService.openEditor(t.input,r,I.Position.CENTER).then(function(){return e.editorService.openEditor(i,r,I.Position.RIGHT).then(function(){return e.editorService.focusEditor(I.Position.CENTER)})})}return e.editorService.openEditor(t.input,null,!0)})},D.prototype.show=function(e,t,n,i,r){var o=this.getVisibleEditorCount();this.visibleEditors[n]=e,this.visibleEditorContainers[n]=t,i&&this.lastActiveEditor||this.doSetActive(e,n),this.trackFocus(e,n);var s=this.containers[n];if(t.build(s),!r||2!==r.length&&3!==r.length)0===o&&this.dimension?(this.containerWidth[n]=this.dimension.width,this.layoutContainers()):n===I.Position.CENTER&&this.leftSash.isHidden()&&this.rightSash.isHidden()&&this.dimension?(this.containerWidth[I.Position.LEFT]=this.dimension.width/2,this.containerWidth[I.Position.CENTER]=this.dimension.width-this.containerWidth[I.Position.LEFT],this.leftSash.show(),this.leftSash.layout(),this.layoutContainers()):n===I.Position.RIGHT&&this.rightSash.isHidden()&&this.dimension&&(this.containerWidth[I.Position.LEFT]=this.dimension.width/3,this.containerWidth[I.Position.CENTER]=this.dimension.width/3,this.containerWidth[I.Position.RIGHT]=this.dimension.width-this.containerWidth[I.Position.LEFT]-this.containerWidth[I.Position.CENTER],this.leftSash.layout(),this.rightSash.show(),this.rightSash.layout(),this.layoutContainers());else{var a=this.dimension&&this.dimension.width;a||(this.containerInitialRatios=r),2===r.length?a&&(this.containerWidth[n]=this.dimension.width*r[n]):3===r.length&&(a&&(this.containerWidth[n]=this.dimension.width*r[n]),this.rightSash.isHidden()&&(this.rightSash.show(),this.rightSash.layout())),this.leftSash.isHidden()&&(this.leftSash.show(),this.leftSash.layout()),a&&this.layoutContainers()}t.show(),this.updateParentStyle()},D.prototype.getVisibleEditorCount=function(){var e=0;return this.visibleEditors.forEach(function(t){t&&e++}),e},D.prototype.indexOf=function(e){return this.visibleEditors.indexOf(e)},D.prototype.trackFocus=function(e,t){var n=this;this.globalFocusTracker||(this.globalFocusTracker=_.trackFocus(window.document.body),this.globalFocusTracker.addBlurListener(function(){var e=window.document.activeElement;if(e)for(var t=0;t<n.visibleEditorContainers.length;t++){var i=n.visibleEditorContainers[t];if(i&&_.isAncestor(e,i.getHTMLElement())){n.onFocusGained(n.visibleEditors[t]);break}}})),this.visibleEditorFocusTrackers[t]&&this.visibleEditorFocusTrackers[t].dispose(),this.visibleEditorFocusTrackers[t]=_.trackFocus(e.getContainer().getHTMLElement()),this.visibleEditorFocusTrackers[t].addFocusListener(function(){n.onFocusGained(e)})},D.prototype.onFocusGained=function(e){this.setActive(e)},D.prototype.setActive=function(e){var n=this;if(this.lastActiveEditor!==e){if(this.doSetActive(e,this.indexOf(e)),this.containerWidth[this.lastActivePosition]===D.MIN_EDITOR_WIDTH){this.telemetryService&&this.telemetryService.publicLog("workbenchEditorMaximized");var i=this.dimension.width;I.POSITIONS.forEach(function(e){n.lastActivePosition!==e&&n.visibleEditors[e]&&(n.containerWidth[e]=D.MIN_EDITOR_WIDTH,i-=n.containerWidth[e])}),i>D.MIN_EDITOR_WIDTH&&(this.containerWidth[this.lastActivePosition]=i,this.leftSash.isHidden()||this.leftSash.layout(),this.rightSash.isHidden()||this.rightSash.layout(),this.layoutContainers())}this.emit(t.EventType.EDITOR_FOCUS_CHANGED)}},D.prototype.focusNextNonMinimized=function(){var e=this;if(!d.isUndefinedOrNull(this.lastActivePosition)&&this.containerWidth[this.lastActivePosition]===D.MIN_EDITOR_WIDTH){var t=null,n=D.MIN_EDITOR_WIDTH;I.POSITIONS.forEach(function(i){i!==e.lastActivePosition&&e.visibleEditors[i]&&e.containerWidth[i]>n&&(t=i,n=e.containerWidth[i])}),d.isUndefinedOrNull(t)||this.editorService.focusEditor(this.visibleEditors[t]).done(null,u.onUnexpectedError)}},D.prototype.hide=function(e,t,n,i){var r=R.NONE,o=this.getVisibleEditorCount(),s=!!this.visibleEditors[I.Position.CENTER],a=!!this.visibleEditors[I.Position.RIGHT];if(e!==this.visibleEditors[n])return r;if(this.clearPosition(n),t.offDOM(),t.hide(),i&&(1===o?(this.containerWidth[n]=0,this.leftSash.hide(),this.rightSash.hide(),this.layoutContainers()):s&&!a?(this.containerWidth[I.Position.LEFT]=this.dimension.width,this.containerWidth[I.Position.CENTER]=0,this.leftSash.hide(),this.rightSash.hide(),n===I.Position.LEFT&&(this.rochade(I.Position.CENTER,I.Position.LEFT),r=R.CENTER_TO_LEFT,this.clearTitle(I.Position.CENTER)),this.layoutContainers()):s&&a&&(this.containerWidth[I.Position.LEFT]=this.dimension.width/2,this.containerWidth[I.Position.CENTER]=this.dimension.width-this.containerWidth[I.Position.LEFT],this.containerWidth[I.Position.RIGHT]=0,this.leftSash.layout(),this.rightSash.hide(),n===I.Position.CENTER?(this.rochade(I.Position.RIGHT,I.Position.CENTER),r=R.RIGHT_TO_CENTER,this.clearTitle(I.Position.RIGHT)):n===I.Position.LEFT&&(this.rochade(I.Position.CENTER,I.Position.LEFT),this.rochade(I.Position.RIGHT,I.Position.CENTER),r=R.CENTER_AND_RIGHT_TO_LEFT,this.clearTitle(I.Position.RIGHT)),this.layoutContainers())),this.lastActiveEditor===e&&(this.doSetActive(null,null),i)){var c;switch(n){case I.Position.LEFT:c=s?I.Position.LEFT:null;break;case I.Position.CENTER:c=I.Position.LEFT;break;case I.Position.RIGHT:c=I.Position.CENTER}d.isUndefinedOrNull(c)||this.doSetActive(this.visibleEditors[c],c)}return this.updateParentStyle(),r},D.prototype.updateParentStyle=function(){var e=this.getVisibleEditorCount();e>1?this.parent.addClass("multiple-editors"):this.parent.removeClass("multiple-editors")},D.prototype.doSetActive=function(e,t){var n=this.lastActivePosition;this.lastActivePosition=t,this.lastActiveEditor=e,d.isUndefinedOrNull(n)||(this.containers[n].addClass("inactive"),this.containers[n].removeClass("active")),d.isUndefinedOrNull(t)||(this.containers[t].removeClass("inactive"),this.containers[t].addClass("active"))},D.prototype.clearPosition=function(e){this.visibleEditorFocusTrackers[e]&&(this.visibleEditorFocusTrackers[e].dispose(),this.visibleEditorFocusTrackers[e]=null),this.visibleEditors[e]=null,this.visibleEditorContainers[e]=null},D.prototype.rochade=function(e,t){var n=this.visibleEditorContainers[e],i=this.visibleEditors[e];n.offDOM(),n.build(this.containers[t]),i.changePosition(t);var r=this.visibleEditorFocusTrackers[e];this.visibleEditorContainers[t]=n,this.visibleEditors[t]=i,this.visibleEditorFocusTrackers[t]=r,this.visibleEditorContainers[e]=null,this.visibleEditors[e]=null,this.visibleEditorFocusTrackers[e]=null,this.lastActivePosition===e&&this.doSetActive(this.lastActiveEditor,t)},D.prototype.move=function(e,t){var n,i,r,o;if(1===Math.abs(e-t))n=this.visibleEditorContainers[e],i=this.visibleEditors[e],n.offDOM(),n.build(this.containers[t]),i.changePosition(t),r=this.visibleEditorContainers[t],o=this.visibleEditors[t],r.offDOM(),r.build(this.containers[e]),o.changePosition(e),this.lastActivePosition===e?this.doSetActive(this.lastActiveEditor,t):this.lastActivePosition===t&&this.doSetActive(this.lastActiveEditor,e);else{var a,c,u;e===I.Position.LEFT?(a=I.Position.RIGHT,c=I.Position.LEFT,u=I.Position.CENTER):(a=I.Position.CENTER,c=I.Position.RIGHT,u=I.Position.LEFT),n=this.visibleEditorContainers[I.Position.LEFT],i=this.visibleEditors[I.Position.LEFT],n.offDOM(),n.build(this.containers[a]),i.changePosition(a),r=this.visibleEditorContainers[I.Position.CENTER],o=this.visibleEditors[I.Position.CENTER],r.offDOM(),r.build(this.containers[c]),o.changePosition(c);var l=this.visibleEditorContainers[I.Position.RIGHT],d=this.visibleEditors[I.Position.RIGHT];l.offDOM(),l.build(this.containers[u]),d.changePosition(u),this.lastActivePosition===I.Position.LEFT?this.doSetActive(this.lastActiveEditor,a):this.lastActivePosition===I.Position.CENTER?this.doSetActive(this.lastActiveEditor,c):this.lastActivePosition===I.Position.RIGHT&&this.doSetActive(this.lastActiveEditor,u)}s.move(this.visibleEditorContainers,e,t),s.move(this.visibleEditors,e,t),s.move(this.visibleEditorFocusTrackers,e,t),s.move(this.containerWidth,e,t),this.leftSash.isHidden()||this.leftSash.layout(),this.rightSash.isHidden()||this.rightSash.layout(),this.layoutContainers()},D.prototype.arrangeEditors=function(e){var t=this;if(this.dimension){var n=this.dimension.width,i=this.getVisibleEditorCount();1>=i||(e===S.EditorArrangement.MINIMIZE_OTHERS?(I.POSITIONS.forEach(function(e){t.visibleEditors[e]&&e!==t.lastActivePosition&&(t.containerWidth[e]=D.MIN_EDITOR_WIDTH,n-=D.MIN_EDITOR_WIDTH)}),this.containerWidth[this.lastActivePosition]=n):e===S.EditorArrangement.EVEN_WIDTH&&I.POSITIONS.forEach(function(e){t.visibleEditors[e]&&(t.containerWidth[e]=n/i)}),this.layoutControl(this.dimension))}},D.prototype.getWidthRatios=function(){var e=this,t=[];if(this.dimension){var n=this.dimension.width;I.POSITIONS.forEach(function(i){e.visibleEditors[i]&&t.push(e.containerWidth[i]/n)})}return t},D.prototype.getActiveEditor=function(){return this.lastActiveEditor},D.prototype.getActivePosition=function(){return this.lastActivePosition},D.prototype.create=function(e){var t=this;this.containers[I.Position.LEFT]=h.$(e).div({"class":"one-editor-container editor-left"}),this.leftSash=new p.Sash(e.getHTMLElement(),this,{baseSize:5}),this.leftSash.addListener("start",function(){return t.onLeftSashDragStart()}),this.leftSash.addListener("change",function(e){return t.onLeftSashDrag(e)}),this.leftSash.addListener("end",function(){return t.onLeftSashDragEnd()}),this.leftSash.hide(),this.containers[I.Position.CENTER]=h.$(e).div({"class":"one-editor-container editor-center"}),this.rightSash=new p.Sash(e.getHTMLElement(),this,{baseSize:5}),this.rightSash.addListener("start",function(){return t.onRightSashDragStart()}),this.rightSash.addListener("change",function(e){return t.onRightSashDrag(e)}),this.rightSash.addListener("end",function(){return t.onRightSashDragEnd()}),this.rightSash.hide(),this.containers[I.Position.RIGHT]=h.$(e).div({"class":"one-editor-container editor-right"}),I.POSITIONS.forEach(function(e){t.titleContainer[e]=h.$(t.containers[e]).div({"class":"title monaco-editor-background"}),t.fillTitleArea(h.$(t.titleContainer[e]),e)}),I.POSITIONS.forEach(function(e){t.progressBar[e]=new f.ProgressBar(h.$(t.containers[e])),t.progressBar[e].getContainer().hide()})},D.prototype.updateEditorInputStateIndicator=function(e){var t=this;I.POSITIONS.forEach(function(n){t.visibleEditors[n]&&t.isInputRelated(t.visibleEditors[n].input,e.editorInput)&&t.setEditorInputStateIndicator(e.editorInput,e.editorInput.getStatus(),n)})},D.prototype.setEditorInputStateIndicator=function(e,t,i){var r=e&&e.getName()||"";t&&t.decoration&&(r=n.localize(2,null,t.decoration,r)),this.titleLabel[i].safeInnerHtml(r)},D.prototype.isInputRelated=function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e instanceof v.DiffEditorInput){var n=e.getModifiedInput();if(n===t)return!0}return!1},D.prototype.fillTitleArea=function(e,t){var n=this,i=!1,r=!1;e.on(_.EventType.MOUSE_DOWN,function(e){if(i=!1,r=!1,!(n.getVisibleEditorCount()<=1||_.isAncestor(e.target||e.srcElement,n.editorActionsToolbar[t].getContainer().getHTMLElement()))&&0===e.button){_.EventHelper.stop(e);var o=h.$("div").style({position:"absolute",top:D.EDITOR_TITLE_HEIGHT+"px",left:0,width:"100%",height:"100%",zIndex:3e6}).id("monaco-workbench-editor-move-overlay");o.appendTo(n.parent),n.dragging=!0;var s=n.getVisibleEditorCount(),a=new c.StandardMouseEvent(e),l=a.posx,d=null;n.containers[t].style({zIndex:2e6});var p=h.$(window);p.on(_.EventType.MOUSE_MOVE,function(e){_.EventHelper.stop(e,!1);var i=new c.StandardMouseEvent(e),o=i.posx-l,a=null;switch(Math.abs(o)>5&&(r=!0),t){case I.Position.LEFT:a=Math.max(-1,Math.min(o,n.dimension.width-n.containerWidth[I.Position.LEFT]));break;case I.Position.CENTER:a=2===s?Math.min(n.containerWidth[I.Position.LEFT],Math.max(-1,n.containerWidth[I.Position.LEFT]+o)):Math.min(n.dimension.width-n.containerWidth[I.Position.CENTER],Math.max(-1,n.containerWidth[I.Position.LEFT]+o));break;case I.Position.RIGHT:a=Math.min(n.containerWidth[I.Position.LEFT]+n.containerWidth[I.Position.CENTER],Math.max(-1,n.containerWidth[I.Position.LEFT]+n.containerWidth[I.Position.CENTER]+o));
}if(d!==a){d=a;var u=n.findMoveTarget(t,o);switch(t){case I.Position.LEFT:u===I.Position.LEFT||null===u?(n.containers[I.Position.CENTER].style({left:n.containerWidth[I.Position.LEFT]+"px",right:"auto",borderLeftWidth:"1px"}),n.containers[I.Position.RIGHT].style({left:"auto",right:0})):u===I.Position.CENTER?(n.containers[I.Position.CENTER].style({left:0,right:"auto",borderLeftWidth:0}),n.containers[I.Position.CENTER].addClass("draggedunder"),n.containers[I.Position.RIGHT].style({left:"auto",right:0})):u===I.Position.RIGHT&&(n.containers[I.Position.CENTER].style({left:0,right:"auto"}),n.containers[I.Position.RIGHT].style({left:"auto",right:n.containerWidth[I.Position.LEFT]+"px"}),n.containers[I.Position.RIGHT].addClass("draggedunder"));break;case I.Position.CENTER:u===I.Position.LEFT?(n.containers[I.Position.LEFT].style({left:n.containerWidth[I.Position.CENTER]+"px",right:"auto"}),n.containers[I.Position.LEFT].addClass("draggedunder")):u===I.Position.CENTER||null===u?(n.containers[I.Position.LEFT].style({left:0,right:"auto"}),n.containers[I.Position.RIGHT].style({left:"auto",right:0})):u===I.Position.RIGHT&&(n.containers[I.Position.RIGHT].style({left:"auto",right:n.containerWidth[I.Position.CENTER]+"px"}),n.containers[I.Position.RIGHT].addClass("draggedunder"),n.containers[I.Position.LEFT].style({left:0,right:"auto"}));break;case I.Position.RIGHT:u===I.Position.LEFT?(n.containers[I.Position.LEFT].style({left:n.containerWidth[I.Position.RIGHT]+"px",right:"auto"}),n.containers[I.Position.LEFT].addClass("draggedunder")):u===I.Position.CENTER?(n.containers[I.Position.LEFT].style({left:0,right:"auto"}),n.containers[I.Position.CENTER].style({left:n.containerWidth[I.Position.LEFT]+n.containerWidth[I.Position.RIGHT]+"px",right:"auto"}),n.containers[I.Position.CENTER].addClass("draggedunder")):(u===I.Position.RIGHT||null===u)&&(n.containers[I.Position.LEFT].style({left:0,right:"auto"}),n.containers[I.Position.CENTER].style({left:n.containerWidth[I.Position.LEFT]+"px",right:"auto"}))}null!==a&&(n.containers[t].style({left:a+"px"}),n.containers[t].addClass("dragged"),n.parent.addClass("dragged"))}}).once(_.EventType.MOUSE_UP,function(e){_.EventHelper.stop(e,!1),o.destroy(),n.dragging=!1,n.parent.removeClass("dragged"),n.containers[t].removeClass("dragged"),n.containers[t].style({zIndex:"auto"}),I.POSITIONS.forEach(function(e){return n.containers[e].removeClass("draggedunder")}),n.containers[I.Position.LEFT].style({left:0,right:"auto"}),n.containers[I.Position.CENTER].style({left:"auto",right:"auto",borderLeftWidth:"1px"}),n.containers[I.Position.RIGHT].style({left:"auto",right:0,borderLeftWidth:"1px"});var s=new c.StandardMouseEvent(e),a=s.posx-l,d=n.findMoveTarget(t,a);null!==d?n.editorService.moveEditor(t,d):n.layoutContainers(),r?i=!0:t!==n.getActivePosition()&&n.editorService.focusEditor(n.visibleEditors[t]).done(null,u.onUnexpectedError),p.off("mousemove")})}}),e.on(_.EventType.MOUSE_UP,function(e){_.EventHelper.stop(e,!1),1===e.button?n.editorService.closeEditor(t).done(null,u.onUnexpectedError):1!==n.getVisibleEditorCount()||_.isAncestor(e.target||e.srcElement,n.editorActionsToolbar[t].getContainer().getHTMLElement())||n.editorService.focusEditor(n.visibleEditors[t]).done(null,u.onUnexpectedError)}),e.div({"class":"title-actions"},function(e){n.editorActionsToolbar[t]=new E.ToolBar(e.getHTMLElement(),n.contextMenuService,{actionItemProvider:function(e){return n.actionItemProvider(e,t)},orientation:b.ActionsOrientation.HORIZONTAL}),n.editorActionsToolbar[t].actionRunner.addListener(g.EventType.RUN,function(e){e.error&&!u.isPromiseCanceledError(e.error)&&n.messageService.show(x.Severity.Error,e.error),n.telemetryService&&n.telemetryService.publicLog("workbenchActionExecuted",{id:e.action.id,from:"editorPart"})})}),e.div({"class":"title-label"},function(e){var r=function(e){i||(_.EventHelper.stop(e,!0),n.quickOpenService.show())};n.titleLabel[t]=h.$(e).a().on(_.EventType.CLICK,r),n.titleDescription[t]=h.$(e).span().on(_.EventType.CLICK,r)})},D.prototype.findMoveTarget=function(e,t){var n=this.getVisibleEditorCount();switch(e){case I.Position.LEFT:if(2===n&&(t>=this.containerWidth[I.Position.LEFT]/2||t>=this.containerWidth[I.Position.CENTER]/2))return I.Position.CENTER;if(3===n&&(t>=this.containerWidth[I.Position.LEFT]/2+this.containerWidth[I.Position.CENTER]||t>=this.containerWidth[I.Position.RIGHT]/2+this.containerWidth[I.Position.CENTER]))return I.Position.RIGHT;if(3===n&&(t>=this.containerWidth[I.Position.LEFT]/2||t>=this.containerWidth[I.Position.CENTER]/2))return I.Position.CENTER;break;case I.Position.CENTER:if(2===n&&t>0)return null;if(2===n&&(Math.abs(t)>=this.containerWidth[I.Position.CENTER]/2||Math.abs(t)>=this.containerWidth[I.Position.LEFT]/2))return I.Position.LEFT;if(3===n&&(0>t&&Math.abs(t)>=this.containerWidth[I.Position.CENTER]/2||0>t&&Math.abs(t)>=this.containerWidth[I.Position.LEFT]/2))return I.Position.LEFT;if(3===n&&(t>0&&Math.abs(t)>=this.containerWidth[I.Position.CENTER]/2||t>0&&Math.abs(t)>=this.containerWidth[I.Position.RIGHT]/2))return I.Position.RIGHT;break;case I.Position.RIGHT:if(t>0)return null;if(Math.abs(t)>=this.containerWidth[I.Position.RIGHT]/2+this.containerWidth[I.Position.CENTER]||Math.abs(t)>=this.containerWidth[I.Position.LEFT]/2+this.containerWidth[I.Position.CENTER])return I.Position.LEFT;if(Math.abs(t)>=this.containerWidth[I.Position.RIGHT]/2||Math.abs(t)>=this.containerWidth[I.Position.CENTER]/2)return I.Position.CENTER}return null},D.prototype.actionItemProvider=function(e,t){var n,o=this.visibleEditors[t];if(o&&(n=o.getActionItem(e)),!n){var s=i.Registry.as(r.Extensions.Actionbar);n=s.getActionItemForContext(r.Scope.EDITOR,{input:o&&o.input,editor:o,position:t},e)}return n},D.prototype.setTitle=function(e,t,n,i,r){r?(this.containers[e].removeClass("inactive"),this.containers[e].addClass("active")):(this.containers[e].addClass("inactive"),this.containers[e].removeClass("active"));var o=t.getName()||"",s=r?t.getDescription()||"":"",a=r?t.getDescription(!0)||"":"";s===a&&(a=""),this.titleLabel[e].safeInnerHtml(o),this.titleLabel[e].title(a),this.titleDescription[e].safeInnerHtml(s),this.titleDescription[e].title(a),t?this.setEditorInputStateIndicator(t,t.getStatus(),e):this.setEditorInputStateIndicator(null,null,null),r&&this.getVisibleEditorCount()<3&&this.lastActiveEditor.supportsSplitEditor()&&n.unshift(this.splitEditorAction),this.editorActionsToolbar[e].setActions(n,i)(),t&&this.editorActionsToolbar[e].addPrimaryAction(this.closeEditorAction[e])()},D.prototype.setLoading=function(e,t){this.titleLabel[e].safeInnerHtml(t.getName()||""),this.titleDescription[e].safeInnerHtml(n.localize(3,null)),this.editorActionsToolbar[e].setActions([],[])(),t&&this.editorActionsToolbar[e].addPrimaryAction(this.closeEditorAction[e])()},D.prototype.clearTitle=function(e){this.titleLabel[e].safeInnerHtml(""),this.titleDescription[e].safeInnerHtml(""),this.editorActionsToolbar[e].setActions([],[])()},D.prototype.onLeftSashDragStart=function(){this.startLeftContainerWidth=this.containerWidth[I.Position.LEFT]},D.prototype.onLeftSashDrag=function(e){var t=this.containerWidth[I.Position.LEFT],n=this.startLeftContainerWidth+e.currentX-e.startX;this.rightSash.isHidden()?(n<D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-n<D.MIN_EDITOR_WIDTH?n=this.dimension.width-D.MIN_EDITOR_WIDTH:n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH&&(n=this.dimension.width-D.MIN_EDITOR_WIDTH),this.containerWidth[I.Position.LEFT]=n,this.containerWidth[I.Position.CENTER]=this.dimension.width-n):(n<D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-n-this.containerWidth[I.Position.RIGHT]<D.MIN_EDITOR_WIDTH?(this.dimension.width-n-this.containerWidth[I.Position.CENTER]<D.MIN_EDITOR_WIDTH?(n=this.dimension.width-2*D.MIN_EDITOR_WIDTH,this.containerWidth[I.Position.CENTER]=this.containerWidth[I.Position.RIGHT]=D.MIN_EDITOR_WIDTH):this.dimension.width-n-this.containerWidth[I.Position.CENTER]-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH?this.containerWidth[I.Position.RIGHT]=D.MIN_EDITOR_WIDTH:this.containerWidth[I.Position.RIGHT]=this.containerWidth[I.Position.RIGHT]-(n-t),this.rightSash.layout()):n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-this.containerWidth[I.Position.RIGHT]-n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH&&(n=this.dimension.width-this.containerWidth[I.Position.RIGHT]-D.MIN_EDITOR_WIDTH),this.containerWidth[I.Position.LEFT]=n,this.containerWidth[I.Position.CENTER]=this.dimension.width-this.containerWidth[I.Position.LEFT]-this.containerWidth[I.Position.RIGHT]),this.layoutContainers()},D.prototype.onLeftSashDragEnd=function(){this.leftSash.layout(),this.rightSash.layout(),this.focusNextNonMinimized()},D.prototype.onRightSashDragStart=function(){this.startRightContainerWidth=this.containerWidth[I.Position.RIGHT]},D.prototype.onRightSashDrag=function(e){var t=this.containerWidth[I.Position.RIGHT],n=this.startRightContainerWidth-e.currentX+e.startX;n<D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-n-this.containerWidth[I.Position.LEFT]<D.MIN_EDITOR_WIDTH?(this.dimension.width-n-this.containerWidth[I.Position.CENTER]<D.MIN_EDITOR_WIDTH?(n=this.dimension.width-2*D.MIN_EDITOR_WIDTH,this.containerWidth[I.Position.LEFT]=this.containerWidth[I.Position.CENTER]=D.MIN_EDITOR_WIDTH):this.dimension.width-n-this.containerWidth[I.Position.CENTER]-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH?this.containerWidth[I.Position.LEFT]=D.MIN_EDITOR_WIDTH:this.containerWidth[I.Position.LEFT]=this.containerWidth[I.Position.LEFT]-(n-t),this.leftSash.layout()):n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH?n=D.MIN_EDITOR_WIDTH:this.dimension.width-this.containerWidth[I.Position.LEFT]-n-D.SNAP_TO_MINIMIZED_THRESHOLD<=D.MIN_EDITOR_WIDTH&&(n=this.dimension.width-this.containerWidth[I.Position.LEFT]-D.MIN_EDITOR_WIDTH),this.containerWidth[I.Position.RIGHT]=n,this.containerWidth[I.Position.CENTER]=this.dimension.width-this.containerWidth[I.Position.LEFT]-this.containerWidth[I.Position.RIGHT],this.layoutContainers()},D.prototype.onRightSashDragEnd=function(){this.leftSash.layout(),this.rightSash.layout(),this.focusNextNonMinimized()},D.prototype.getVerticalSashTop=function(e){return 0},D.prototype.getVerticalSashLeft=function(e){return e===this.leftSash?this.containerWidth[I.Position.LEFT]:this.containerWidth[I.Position.CENTER]+this.containerWidth[I.Position.LEFT]},D.prototype.getVerticalSashHeight=function(e){return this.dimension.height},D.prototype.isDragging=function(){return this.dragging},D.prototype.layout=function(e){e instanceof h.Dimension?this.layoutControl(e):this.layoutEditor(e)},D.prototype.layoutControl=function(e){var t=this,n=this.dimension;this.dimension=e,n&&n.width&&n.height||(n=e);var i=0;if(I.POSITIONS.forEach(function(e){if(t.visibleEditors[e]){if(t.containerWidth[e]!==D.MIN_EDITOR_WIDTH){var r;t.containerInitialRatios&&d.isNumber(t.containerInitialRatios[e])?(r=t.containerInitialRatios[e],delete t.containerInitialRatios[e]):r=t.containerWidth[e]/n.width,t.containerWidth[e]=Math.max(Math.round(t.dimension.width*r),D.MIN_EDITOR_WIDTH)}i+=t.containerWidth[e]}}),i>0){var r=i-this.dimension.width;if(0>r){var o=null;I.POSITIONS.forEach(function(e){t.visibleEditors[e]&&null===o&&t.containerWidth[e]!==D.MIN_EDITOR_WIDTH&&(o=e)}),null===o&&(o=I.Position.LEFT),this.containerWidth[o]-=r}else r>0&&I.POSITIONS.forEach(function(e){var n=t.containerWidth[e]-D.MIN_EDITOR_WIDTH;if(n>=r)t.containerWidth[e]-=r,r=0;else if(n>0){var i=r-n;t.containerWidth[e]-=i,r-=i}})}this.leftSash.layout(),this.rightSash.layout(),this.layoutContainers()},D.prototype.layoutContainers=function(){var e=this;I.POSITIONS.forEach(function(t){e.containers[t].size(e.containerWidth[t],e.dimension.height)}),this.visibleEditors[I.Position.RIGHT]?this.containers[I.Position.CENTER].position(null,this.containerWidth[I.Position.RIGHT]):this.containers[I.Position.CENTER].position(null,this.dimension.width-this.containerWidth[I.Position.LEFT]-this.containerWidth[I.Position.CENTER]),I.POSITIONS.forEach(function(t){e.visibleEditors[t]&&e.containers[t].isHidden()?e.containers[t].show():e.visibleEditors[t]||e.containers[t].isHidden()||e.containers[t].hide()}),I.POSITIONS.forEach(function(t){e.layoutEditor(t)})},D.prototype.layoutEditor=function(e){var t=this.containerWidth[e];t&&this.visibleEditors[e]&&this.visibleEditors[e].layout(new h.Dimension(t,this.dimension.height-D.EDITOR_TITLE_HEIGHT))},D.prototype.getProgressBar=function(e){return this.progressBar[e]},D.prototype.dispose=function(){var e=this;I.POSITIONS.forEach(function(t){e.clearPosition(t)}),this.editorActionsToolbar.forEach(function(e){e.dispose()}),this.progressBar.forEach(function(e){e.dispose()}),this.closeEditorAction.forEach(function(e){e.dispose()}),this.leftSash.dispose(),this.rightSash.dispose(),this.containers.forEach(function(e){e.destroy()}),this.globalFocusTracker&&this.globalFocusTracker.dispose(),this.editorInputStateChangeListener&&this.editorInputStateChangeListener(),this.lastActiveEditor=null,this.lastActivePosition=null,this.visibleEditors=null,this.visibleEditorContainers=null,a.prototype.dispose.call(this)},D.MIN_EDITOR_WIDTH=170,D.EDITOR_TITLE_HEIGHT=35,D.SNAP_TO_MINIMIZED_THRESHOLD=50,D=__decorate([__param(1,S.IWorkbenchEditorService),__param(2,x.IMessageService),__param(3,w.IQuickOpenService),__param(4,A.ITelemetryService),__param(5,T.IContextViewService),__param(6,T.IContextMenuService),__param(7,k.IEventService),__param(8,C.IWorkspaceContextService)],D)}(a.EventEmitter);t.SideBySideEditorControl=D});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/textEditor",["require","exports","vs/base/common/objects","vs/base/common/errors","vs/editor/browser/widget/codeEditorWidget","vs/workbench/common/constants","vs/workbench/browser/events","vs/workbench/common/memento","vs/workbench/browser/parts/editor/baseEditor","vs/editor/common/config/commonEditorConfig","vs/editor/common/editorCommon","vs/workbench/services/workspace/common/contextService","vs/platform/theme/common/themes","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService","vs/css!./media/texteditor"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){var E="editorViewState",S=function(e){function t(t,n,i,r,o,a,c,u,l,d){var h=this;e.call(this,t,n),this._instantiationService=i,this._contextService=r,this._storageService=o,this._messageService=a,this.configurationService=c,this._eventService=u,this._editorService=l,this._modeService=d,this.toUnbind.push(this._eventService.addListener(p.StorageEventType.STORAGE,function(e){return h.onPreferencesChanged(e)})),this.toUnbind.push(this._eventService.addListener(s.EventType.WORKBENCH_OPTIONS_CHANGED,function(e){return h.onOptionsChanged(e)})),this.toUnbind.push(this.configurationService.addListener(f.ConfigurationServiceEventTypes.UPDATED,function(e){return h.applyConfiguration(e.config)}))}return __extends(t,e),Object.defineProperty(t.prototype,"instantiationService",{get:function(){return this._instantiationService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextService",{get:function(){return this._contextService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storageService",{get:function(){return this._storageService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"messageService",{get:function(){return this._messageService},enumerable:!0,configurable:!0}),t.prototype.applyConfiguration=function(e){if(this.editorControl){var t=this.getCodeEditorOptions();e=n.clone(e),n.assign(e[u.EditorConfiguration.EDITOR_SECTION],t),u.EditorConfiguration.apply(e,this.editorControl)}this._modeService.configureAllModes(e)},t.prototype.onOptionsChanged=function(e){this.editorControl&&this.editorControl.updateOptions(this.getCodeEditorOptions())},t.prototype.onPreferencesChanged=function(e){e.key===o.Preferences.THEME&&this.editorControl.updateOptions(this.getCodeEditorOptions())},t.prototype.getCodeEditorOptions=function(){var e={overviewRulerLanes:3,readOnly:this.contextService.getOptions().readOnly,glyphMargin:!0,lineNumbersMinChars:3,theme:this._storageService.get(o.Preferences.THEME,p.StorageScope.GLOBAL,h.DEFAULT_THEME_ID)};return n.mixin(e,this.contextService.getOptions().editor)},Object.defineProperty(t.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorContainer",{get:function(){return this._editorContainer},enumerable:!0,configurable:!0}),t.prototype.createEditor=function(e){var t=this;this._editorContainer=e,this.editorControl=this.createEditorControl(e),this.toUnbind.push(this.editorControl.addListener(l.EventType.CursorPositionChanged,function(e){var n=t.editorControl.getSelection();t.eventService.emit(s.EventType.TEXT_EDITOR_SELECTION_CHANGED,new s.TextEditorSelectionEvent(n,t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ModelModeChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_MODE_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ModelContentChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_CONTENT_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.toUnbind.push(this.editorControl.addListener(l.EventType.ConfigurationChanged,function(e){t.eventService.emit(s.EventType.TEXT_EDITOR_CONFIGURATION_CHANGED,new s.EditorEvent(t,t.getId(),t.input,null,t.position,e))})),this.configurationService.loadConfiguration().then(function(e){t.applyConfiguration(e)},i.onUnexpectedError)},t.prototype.createEditorControl=function(e){return this._instantiationService.createInstance(r.CodeEditorWidget,e.getHTMLElement(),this.getCodeEditorOptions())},t.prototype.setVisible=function(t,n){void 0===n&&(n=null);var i=e.prototype.setVisible.call(this,t,n);return t?this.editorControl.onVisible():this.editorControl.onHide(),i},t.prototype.focus=function(){this.editorControl.focus()},t.prototype.layout=function(e){this.editorControl.layout(e)},t.prototype.getControl=function(){return this.editorControl},t.prototype.getSelection=function(){return this.editorControl.getSelection()},t.prototype.saveTextEditorViewState=function(e,t){var n=this.editorControl.saveViewState(),i=this.getMemento(e,a.Scope.WORKSPACE),r=i[E];r||(r={},i[E]=r),r[t]=n},t.prototype.clearTextEditorViewState=function(e,t){var n=this.getMemento(e,a.Scope.WORKSPACE),i=n[E];i&&t.forEach(function(e){return delete i[e]})},t.prototype.loadTextEditorViewState=function(e,t){var n=this.getMemento(e,a.Scope.WORKSPACE),i=n[E];return i?i[t]:null},t.prototype.dispose=function(){this.editorControl.destroy(),e.prototype.dispose.call(this)},t=__decorate([__param(1,y.ITelemetryService),__param(2,v.IInstantiationService),__param(3,d.IWorkspaceContextService),__param(4,p.IStorageService),__param(5,g.IMessageService),__param(6,f.IConfigurationService),__param(7,m.IEventService),__param(8,_.IWorkbenchEditorService),__param(9,b.IModeService)],t)}(c.BaseEditor);t.BaseTextEditor=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/editorStatus",["require","exports","vs/nls!vs/workbench/browser/parts/editor/editorStatus","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/objects","vs/base/common/bits/encoding","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/base/common/actions","vs/editor/common/modes/modesRegistry","vs/platform/platform","vs/workbench/browser/parts/editor/untitledEditorInput","vs/workbench/common/editor","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/workbench/browser/events","vs/workbench/browser/parts/editor/textEditor","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modeService","vs/css!./media/editorstatus"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){function T(e){var t,n=e.getModel();return t=n&&n.modified?n.modified:n}function I(e){return e instanceof p.UntitledEditorInput?e:f.asFileEditorInput(e,!0)}function k(e){var t=e.getControl();return t.getEditorType()===v.EditorType.IDiffEditor&&(t=t.getModifiedEditor()),t.getEditorType()===v.EditorType.ICodeEditor&&t.getConfiguration().tabFocusMode}function x(e){var t=e.getControl();return t.getEditorType()===v.EditorType.IDiffEditor&&(t=t.getModifiedEditor()),t.getEditorType()===v.EditorType.ICodeEditor&&!t.getConfiguration().readOnly}var A=n.localize(0,null),R=n.localize(1,null),D=n.localize(2,null),L=n.localize(3,null),M=n.localize(4,null),O=n.localize(5,null),P=n.localize(6,null),N=function(){function e(e,t,n,i){this.editorService=e,this.quickOpenService=t,this.instantiationService=n,this.eventService=i,this.toDispose=[],this.state={selectionStatus:null,mode:null,encoding:null,EOL:null,tabFocusMode:!1}}return e.prototype.render=function(e){var t=this;return this.element=r.append(e,r.emmet(".editor-statusbar-item")),this.tabFocusModeElement=r.append(this.element,r.emmet("a.editor-status-tabfocusmode")),this.tabFocusModeElement.title=n.localize(7,null),this.tabFocusModeElement.onclick=function(){return t.onTabFocusModeClick()},this.tabFocusModeElement.textContent=P,this.selectionElement=r.append(this.element,r.emmet("a.editor-status-selection")),this.selectionElement.title=n.localize(8,null),this.selectionElement.onclick=function(){return t.onSelectionClick()},this.encodingElement=r.append(this.element,r.emmet("a.editor-status-encoding")),this.encodingElement.title=n.localize(9,null),this.encodingElement.onclick=function(){return t.onEncodingClick()},this.eolElement=r.append(this.element,r.emmet("a.editor-status-eol")),this.eolElement.title=n.localize(10,null),this.eolElement.onclick=function(){return t.onEOLClick()},this.modeElement=r.append(this.element,r.emmet("a.editor-status-mode")),this.modeElement.title=n.localize(11,null),this.modeElement.onclick=function(){return t.onModeClick()},this.setState(this.state),this.toDispose.push(this.eventService.addListener2(g.EventType.EDITOR_INPUT_CHANGED,function(e){return t.onEditorInputChange(e.editor)}),this.eventService.addListener2(g.EventType.RESOURCE_ENCODING_CHANGED,function(e){return t.onResourceEncodingChange(e.resource)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_SELECTION_CHANGED,function(e){return t.onSelectionChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_MODE_CHANGED,function(e){return t.onModeChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_CONTENT_CHANGED,function(e){return t.onEOLChange(e.editor)}),this.eventService.addListener2(g.EventType.TEXT_EDITOR_CONFIGURATION_CHANGED,function(e){return t.onTabFocusModeChange(e.editor)})),m.combinedDispose.apply(void 0,this.toDispose)},e.prototype.setState=function(e){this.state=e,e.tabFocusMode&&e.tabFocusMode===!0?r.show(this.tabFocusModeElement):r.hide(this.tabFocusModeElement);var t=this.getSelectionLabel();t?(this.selectionElement.textContent=t,r.show(this.selectionElement)):r.hide(this.selectionElement),e.encoding?(this.encodingElement.textContent=e.encoding,r.show(this.encodingElement)):r.hide(this.encodingElement),e.EOL?(this.eolElement.textContent="\r\n"===e.EOL?O:M,r.show(this.eolElement)):r.hide(this.eolElement),e.mode?(this.modeElement.textContent=e.mode,r.show(this.modeElement)):r.hide(this.modeElement)},e.prototype.updateState=function(e){this.setState(o.assign({},this.state,e))},e.prototype.getSelectionLabel=function(){var e=this.state.selectionStatus;return e&&e.selections?1===e.selections.length?e.charactersSelected?a.format(A,e.selections[0].positionLineNumber,e.selections[0].positionColumn,e.charactersSelected):a.format(R,e.selections[0].positionLineNumber,e.selections[0].positionColumn):e.charactersSelected?a.format(D,e.selections.length,e.charactersSelected):a.format(L,e.selections.length):null},e.prototype.onModeClick=function(){var e=this.instantiationService.createInstance(F,F.ID,F.LABEL);e.run().done(null,u.onUnexpectedError),e.dispose()},e.prototype.onSelectionClick=function(){this.quickOpenService.show(":")},e.prototype.onEOLClick=function(){var e=this.instantiationService.createInstance(W,W.ID,W.LABEL);e.run().done(null,u.onUnexpectedError),e.dispose()},e.prototype.onEncodingClick=function(){var e=this.instantiationService.createInstance(H,H.ID,H.LABEL);e.run().done(null,u.onUnexpectedError),e.dispose()},e.prototype.onTabFocusModeClick=function(){var e=this.editorService.getActiveEditor();e instanceof y.BaseTextEditor&&k(e)&&e.getControl().updateOptions({tabFocusMode:!1})},e.prototype.onEditorInputChange=function(e){this.onSelectionChange(e),this.onModeChange(e),this.onEOLChange(e),this.onEncodingChange(e),this.onTabFocusModeChange(e)},e.prototype.onModeChange=function(e){if(!e||this.isActiveEditor(e)){var t={mode:null};if(e instanceof y.BaseTextEditor){var n=e.getControl(),i=T(n);if(i){var r=h.Registry.as(d.Extensions.EditorModes);if(i.getMode){var o=i.getMode();o&&(t={mode:r.getLanguageName(o.getId())})}}}this.updateState(t)}},e.prototype.onSelectionChange=function(e){if(!e||this.isActiveEditor(e)){var t={};if(e instanceof y.BaseTextEditor){var n=e.getControl();t.selections=n.getSelections()||[],t.charactersSelected=0;var i=T(n);if(i&&t.selections.forEach(function(e){t.charactersSelected+=i.getValueLengthInRange(e)}),1===t.selections.length){var r=n.getVisibleColumnFromPosition(n.getPosition()),o=t.selections[0].clone();o.positionColumn=r,t.selections[0]=o}}this.updateState({selectionStatus:t})}},e.prototype.onEOLChange=function(e){if(!e||this.isActiveEditor(e)){var t={EOL:null};if(e instanceof y.BaseTextEditor&&x(e)){var n=e.getControl(),i=T(n);i&&(t={EOL:i.getEOL()})}this.updateState(t)}},e.prototype.onEncodingChange=function(e){if(!e||this.isActiveEditor(e)){var t={encoding:null};if(e instanceof y.BaseTextEditor){var n=I(e.input);if(n&&c.isFunction(n.getEncoding)){var i=n.getEncoding(),r=s.SUPPORTED_ENCODINGS[i];r?t.encoding=r.labelShort:t.encoding=i}}this.updateState(t)}},e.prototype.onResourceEncodingChange=function(e){var t=this.editorService.getActiveEditor();if(t){var n=f.getUntitledOrFileResource(t.input,!0);if(n&&n.toString()===e.toString())return this.onEncodingChange(t)}},e.prototype.onTabFocusModeChange=function(e){if(!e||this.isActiveEditor(e)){var t={tabFocusMode:!1};e instanceof y.BaseTextEditor&&k(e)&&(t={tabFocusMode:!0}),this.updateState(t)}},e.prototype.isActiveEditor=function(e){var t=this.editorService.getActiveEditor();return t&&e&&t===e},e=__decorate([__param(0,_.IWorkbenchEditorService),__param(1,b.IQuickOpenService),__param(2,w.IInstantiationService),__param(3,S.IEventService)],e)}();t.EditorStatus=N;var F=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.modeService=i,this.editorService=r,this.quickOpenService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=h.Registry.as(d.Extensions.EditorModes),i=t.getRegisteredLanguageNames(),r=this.editorService.getActiveEditor();if(!(r instanceof y.BaseTextEditor))return this.quickOpenService.pick([{label:n.localize(13,null)}]);var o,s=r.getControl(),a=T(s);if(a.getMode){var c=a.getMode();c&&(o=t.getLanguageName(c.getId()))}var u,l=i.sort().map(function(e,t){return o===e&&(u=t),{label:e}}),p={label:n.localize(14,null)};return f.asFileEditorInput(r.input,!0)&&(l.unshift(p),u++),this.quickOpenService.pick(l,{placeHolder:n.localize(15,null),autoFocus:{autoFocusIndex:u}}).then(function(t){if(t&&(r=e.editorService.getActiveEditor(),r instanceof y.BaseTextEditor)){var n=r.getControl(),i=T(n);if(i.getMode)if(t===p){var o=f.asFileEditorInput(r.input,!0).getResource();i.setMode(e.modeService.getOrCreateModeByFilenameOrFirstLine(o.fsPath,i.getLineContent(1)))}else i.setMode(e.modeService.getOrCreateModeByLanguageName(t.label))}})},t.ID="workbench.action.editor.changeLanguageMode",t.LABEL=n.localize(12,null),t=__decorate([__param(2,C.IModeService),__param(3,_.IWorkbenchEditorService),__param(4,b.IQuickOpenService)],t)}(l.Action);t.ChangeModeAction=F;var W=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!(t instanceof y.BaseTextEditor))return this.quickOpenService.pick([{label:n.localize(17,null)}]);if(!x(t))return this.quickOpenService.pick([{label:n.localize(18,null)}]);var i=t.getControl(),r=T(i),o=[{label:M,eol:v.EndOfLineSequence.LF},{label:O,eol:v.EndOfLineSequence.CRLF}],s="\n"===r.getEOL()?0:1;return this.quickOpenService.pick(o,{placeHolder:n.localize(19,null),autoFocus:{autoFocusIndex:s}}).then(function(n){if(n&&(t=e.editorService.getActiveEditor(),t instanceof y.BaseTextEditor&&x(t))){var i=t.getControl(),r=T(i);r.setEOL(n.eol)}})},t.ID="workbench.action.editor.changeEOL",t.LABEL=n.localize(16,null),t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,b.IQuickOpenService)],t)}(l.Action);t.ChangeEOLAction=W;var H=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.editorService=i,this.quickOpenService=r,this.configurationService=o}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getActiveEditor();if(!(t instanceof y.BaseTextEditor&&t.input))return this.quickOpenService.pick([{label:n.localize(21,null)}]);var r=I(t.input);if(!c.areFunctions(r.setEncoding,r.getEncoding))return this.quickOpenService.pick([{label:n.localize(22,null)}]);var o,a={label:n.localize(23,null)},u={label:n.localize(24,null)};return o=r instanceof p.UntitledEditorInput?i.Promise.as(a):x(t)?this.quickOpenService.pick([u,a],{placeHolder:n.localize(25,null)}):i.Promise.as(u),o.then(function(o){return o?i.Promise.timeout(50).then(function(){var i=o===u;return e.configurationService.loadConfiguration().then(function(o){var a,u=o&&o.files&&o.files.encoding,l=Object.keys(s.SUPPORTED_ENCODINGS).sort(function(e,t){return e===u?-1:t===u?1:s.SUPPORTED_ENCODINGS[e].order-s.SUPPORTED_ENCODINGS[t].order}).map(function(e,t){return e===r.getEncoding()&&(a=t),
{id:e,label:s.SUPPORTED_ENCODINGS[e].labelLong,description:e===u?n.localize(26,null):void 0}});return e.quickOpenService.pick(l,{placeHolder:i?n.localize(27,null):n.localize(28,null),autoFocus:{autoFocusIndex:a}}).then(function(n){n&&(t=e.editorService.getActiveEditor(),r=I(t.input),r&&c.areFunctions(r.setEncoding,r.getEncoding)&&r.getEncoding()!==n.id&&r.setEncoding(n.id,i?f.EncodingMode.Decode:f.EncodingMode.Encode))})})}):void 0})},t.ID="workbench.action.editor.changeEncoding",t.LABEL=n.localize(20,null),t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,b.IQuickOpenService),__param(4,E.IConfigurationService)],t)}(l.Action);t.ChangeEncodingAction=H});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/logEditorInput",["require","exports","vs/workbench/browser/parts/editor/stringEditorInput","vs/workbench/browser/parts/editor/textEditor","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o){var s=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n,i,r,o,s),this.editorService=a}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.append=function(t){e.prototype.append.call(this,t),this.revealLastLine()},t.prototype.trim=function(t){var n=e.prototype.trim.call(this,t);return null!==n&&this.revealLastLine(),n},t.prototype.revealLastLine=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(n.input===this&&n instanceof i.BaseTextEditor){var r=n,o=r.getControl();if(o){var s=o.getModel();if(s){var a=s.getLineCount();o.revealLine(a)}}}}},t.ID="workbench.editors.logEditorInput",t=__decorate([__param(5,o.IInstantiationService),__param(6,r.IWorkbenchEditorService)],t)}(n.StringEditorInput);t.LogEditorInput=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/stringEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/stringEditor","vs/base/common/types","vs/editor/common/config/defaultConfig","vs/editor/common/config/commonEditorConfig","vs/workbench/browser/parts/editor/textEditorModel","vs/workbench/browser/parts/editor/logEditorInput","vs/workbench/browser/parts/editor/untitledEditorInput","vs/workbench/browser/parts/editor/textEditor","vs/workbench/browser/events","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){var E=function(e){function t(n,i,r,s,a,c,u,l,h){var p=this;e.call(this,t.ID,n,i,r,s,a,c,u,l,h),this.defaultWrappingColumn=o.DefaultConfig.editor.wrappingColumn,this.defaultLineNumbers=o.DefaultConfig.editor.lineNumbers,this.mapResourceToEditorViewState=Object.create(null),this.toUnbind.push(this.eventService.addListener(d.EventType.UNTITLED_FILE_DELETED,function(e){return p.onUntitledDeletedEvent(e)}))}return __extends(t,e),t.prototype.onUntitledDeletedEvent=function(e){delete this.mapResourceToEditorViewState[e.resource.toString()]},t.prototype.getTitle=function(){return this.input?this.input.getName():i.localize(0,null)},t.prototype.setInput=function(t,i){var o=this,s=this.getInput();e.prototype.setInput.call(this,t,i);var l=i&&i.forceOpen;if(!l&&t.matches(s)){var d=i;return d&&r.isFunction(d.apply)&&d.apply(this.getControl()),n.TPromise.as(null)}return s instanceof u.UntitledEditorInput&&(this.mapResourceToEditorViewState[s.getResource().toString()]=this.getControl().saveViewState()),this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof a.BaseTextEditorModel))return n.TPromise.wrapError("Invalid editor input. String editor requires a model instance of BaseTextEditorModel.");if(!o.getInput()||o.getInput()!==t)return null;var s=o.getControl(),l=e.textEditorModel;s.setModel(l);var d=!1,h=i;if(h&&r.isFunction(h.apply)&&(d=h.apply(s)),!d&&t instanceof u.UntitledEditorInput){var p=o.mapResourceToEditorViewState[t.getResource().toString()];p&&s.restoreViewState(p)}s.updateOptions(o.getCodeEditorOptions()),t instanceof c.LogEditorInput&&o.revealLastLine()})},t.prototype.applyConfiguration=function(t){var n=t&&t[s.EditorConfiguration.EDITOR_SECTION];n&&(this.defaultWrappingColumn=n.wrappingColumn,this.defaultLineNumbers=n.lineNumbers),e.prototype.applyConfiguration.call(this,t)},t.prototype.getCodeEditorOptions=function(){var t=e.prototype.getCodeEditorOptions.call(this),n=this.getInput(),i=n instanceof c.LogEditorInput,r=n instanceof u.UntitledEditorInput;return t.readOnly=!r,i?(t.wrappingColumn=0,t.lineNumbers=!1):(t.wrappingColumn=this.defaultWrappingColumn,t.lineNumbers=this.defaultLineNumbers),t},t.prototype.revealLastLine=function(){var e=this.getControl(),t=e.getModel();if(t){var n=t.getLineCount();e.revealLine(n)}},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.focus=function(){e.prototype.focus.call(this),this.getInput()instanceof c.LogEditorInput&&this.revealLastLine()},t.prototype.clearInput=function(){this.input instanceof u.UntitledEditorInput&&(this.mapResourceToEditorViewState[this.input.getResource().toString()]=this.getControl().saveViewState()),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.ID="workbench.editors.stringEditor",t=__decorate([__param(0,h.ITelemetryService),__param(1,g.IInstantiationService),__param(2,p.IWorkspaceContextService),__param(3,f.IStorageService),__param(4,y.IMessageService),__param(5,m.IConfigurationService),__param(6,v.IEventService),__param(7,_.IWorkbenchEditorService),__param(8,b.IModeService)],t)}(l.BaseTextEditor);t.StringEditor=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/browser/parts/editor/textDiffEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/browser/parts/editor/textDiffEditor","vs/base/common/actions","vs/base/common/errors","vs/base/common/types","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/stringEditorInput","vs/workbench/browser/parts/editor/resourceEditorInput","vs/workbench/browser/parts/editor/diffEditorInput","vs/editor/contrib/diffNavigator/common/diffNavigator","vs/editor/browser/widget/diffEditorWidget","vs/workbench/browser/parts/editor/textDiffEditorModel","vs/workbench/services/editor/browser/editorService","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService","vs/css!./media/textdiffeditor"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T){var I=function(e){function t(n,i,r,o,s,a,c,u,l){e.call(this,t.ID,n,i,r,o,s,a,c,u,l)}return __extends(t,e),t.prototype.getTitle=function(){return this.input?this.input.getName():i.localize(0,null)},t.prototype.createEditorControl=function(e){var t=this;this.nextDiffAction=new k(this,!0),this.previousDiffAction=new k(this,!1);var i=this.instantiationService.createInstance(m.DelegatingWorkbenchEditorService,this,function(e,i,r,o){if(s.isUndefinedOrNull(o)||o===!1||o===t.position){var a=t.getInput();if(i&&r&&a){if(i.matches(a.getModifiedInput()))return t.setInput(t.getInput(),r).then(function(){return!0});if(i.matches(a.getOriginalInput())){var u=t.getControl().getOriginalEditor();if(r instanceof c.TextEditorOptions)return r.apply(u),n.TPromise.as(!0)}}}return n.TPromise.as(!1)}),r=this.instantiationService.createChild({editorService:i});return r.createInstance(p.DiffEditorWidget,e.getHTMLElement(),this.getCodeEditorOptions())},t.prototype.setInput=function(t,i){var r=this,o=this.getInput();e.prototype.setInput.call(this,t,i);var a=i&&i.forceOpen;if(!a&&t.matches(o)){var u=i;return u&&s.isFunction(u.apply)&&u.apply(this.getControl()),n.TPromise.as(null)}return this.diffNavigator&&this.diffNavigator.dispose(),this.editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof f.TextDiffEditorModel)&&r.openAsBinary(t,i))return null;if(!r.getInput()||r.getInput()!==t)return null;var n=r.getControl();n.setModel(e.textDiffEditorModel);var o=!0;if(i instanceof c.TextDiffEditorOptions){var a=i;o=s.isUndefinedOrNull(a.autoRevealFirstChange)?o:a.autoRevealFirstChange}r.diffNavigator=new h.DiffNavigator(n,{alwaysRevealFirst:o}),r.diffNavigator.addListener(h.DiffNavigator.Events.UPDATED,function(){r.nextDiffAction.updateEnablement(),r.previousDiffAction.updateEnablement()}),i&&s.isFunction(i.apply)&&i.apply(n),n.updateOptions(r.getCodeEditorOptions())},function(e){return r.isFileBinaryError(e)&&r.openAsBinary(t,i)?null:n.Promise.wrapError(e)})},t.prototype.openAsBinary=function(e,t){if(e instanceof d.DiffEditorInput){var n=e.originalInput,i=e.modifiedInput,r=new d.DiffEditorInput(e.getName(),e.getDescription(),n,i,!0);return this.editorService.openEditor(r,t,this.position).done(null,o.onUnexpectedError),!0}return!1},t.prototype.getCodeEditorOptions=function(){var t=e.prototype.getCodeEditorOptions.call(this),n=this.input;if(n&&s.isFunction(n.getModifiedInput)){var i=n.getModifiedInput(),r=i instanceof u.StringEditorInput||i instanceof l.ResourceEditorInput;t.readOnly=r}return t},t.prototype.isFileBinaryError=function(e){var t=this;if(s.isArray(e)){var n=e;return n.some(function(e){return t.isFileBinaryError(e)})}return e.fileOperationResult===v.FileOperationResult.FILE_IS_BINARY},t.prototype.clearInput=function(){this.diffNavigator&&this.diffNavigator.dispose(),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.prototype.getDiffNavigator=function(){return this.diffNavigator},t.prototype.getActions=function(){return[this.previousDiffAction,this.nextDiffAction]},t.prototype.getSecondaryActions=function(){var t=this,o=e.prototype.getSecondaryActions.call(this),s=this.getControl(),a=s&&!s.renderSideBySide,c=i.localize(1,null),u=i.localize(2,null),l=new r.Action("toggle.diff.editorMode",a?u:c,null,!0,function(){return t.getControl().updateOptions({renderSideBySide:a}),a=!a,l.label=a?u:c,n.Promise.as(!0)});return l.order=50,o.push.apply(o,[l]),o},t.prototype.getControl=function(){return e.prototype.getControl.call(this)},t.prototype.dispose=function(){this.diffNavigator&&this.diffNavigator.dispose(),e.prototype.dispose.call(this)},t.ID="workbench.editors.textDiffEditor",t=__decorate([__param(0,g.ITelemetryService),__param(1,S.IInstantiationService),__param(2,y.IWorkspaceContextService),__param(3,_.IStorageService),__param(4,w.IMessageService),__param(5,b.IConfigurationService),__param(6,E.IEventService),__param(7,C.IWorkbenchEditorService),__param(8,T.IModeService)],t)}(a.BaseTextEditor);t.TextDiffEditor=I;var k=function(e){function t(n,r){e.call(this,r?t.ID_NEXT:t.ID_PREV),this.editor=n,this.next=r,this.label=this.next?i.localize(3,null):i.localize(4,null),this["class"]=this.next?"textdiff-editor-action next":"textdiff-editor-action previous",this.enabled=!1}return __extends(t,e),t.prototype.run=function(){return this.next?this.editor.getDiffNavigator().next():this.editor.getDiffNavigator().previous(),null},t.prototype.updateEnablement=function(){this.enabled=this.editor.getDiffNavigator().canNavigate()},t.ID_NEXT="workbench.action.nextDiff",t.ID_PREV="workbench.action.previousDiff",t}(r.Action)}),define("vs/workbench/browser/parts/editor/editor.contribution",["require","exports","vs/platform/platform","vs/nls!vs/workbench/browser/parts/editor/editor.contribution","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/stringEditorInput","vs/workbench/browser/parts/editor/stringEditor","vs/workbench/browser/parts/editor/diffEditorInput","vs/workbench/browser/parts/editor/untitledEditorInput","vs/workbench/browser/parts/editor/resourceEditorInput","vs/workbench/browser/parts/editor/textDiffEditor","vs/workbench/browser/parts/editor/binaryDiffEditor","vs/workbench/browser/parts/editor/iframeEditor","vs/workbench/browser/parts/editor/iframeEditorInput","vs/workbench/browser/parts/editor/editorStatus","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","vs/platform/instantiation/common/descriptors","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_){n.Registry.as(o.Extensions.Editors).registerEditor(new o.EditorDescriptor(a.StringEditor.ID,i.localize(0,null),"vs/workbench/browser/parts/editor/stringEditor","StringEditor"),[new y.SyncDescriptor(s.StringEditorInput),new y.SyncDescriptor(u.UntitledEditorInput),new y.SyncDescriptor(l.ResourceEditorInput)]),n.Registry.as(o.Extensions.Editors).registerEditor(new o.EditorDescriptor(d.TextDiffEditor.ID,i.localize(1,null),"vs/workbench/browser/parts/editor/textDiffEditor","TextDiffEditor"),[new y.SyncDescriptor(c.DiffEditorInput)]),n.Registry.as(o.Extensions.Editors).registerEditor(new o.EditorDescriptor(h.BinaryResourceDiffEditor.ID,i.localize(2,null),"vs/workbench/browser/parts/editor/binaryDiffEditor","BinaryResourceDiffEditor"),[new y.SyncDescriptor(c.DiffEditorInput)]),n.Registry.as(o.Extensions.Editors).registerEditor(new o.EditorDescriptor(p.IFrameEditor.ID,i.localize(3,null),"vs/workbench/browser/parts/editor/iframeEditor","IFrameEditor"),[new y.SyncDescriptor(f.IFrameEditorInput)]);var b=n.Registry.as(r.Extensions.Statusbar);b.registerStatusbarItem(new r.StatusbarItemDescriptor(m.EditorStatus,r.StatusbarAlignment.RIGHT,100));var E=n.Registry.as(v.Extensions.WorkbenchActions);E.registerWorkbenchAction(new g.SyncActionDescriptor(m.ChangeModeAction,m.ChangeModeAction.ID,m.ChangeModeAction.LABEL,{primary:_.KeyMod.chord(_.KeyMod.CtrlCmd|_.KeyCode.KEY_K,_.KeyCode.KEY_M)})),E.registerWorkbenchAction(new g.SyncActionDescriptor(m.ChangeEOLAction,m.ChangeEOLAction.ID,m.ChangeEOLAction.LABEL)),E.registerWorkbenchAction(new g.SyncActionDescriptor(m.ChangeEncodingAction,m.ChangeEncodingAction.ID,m.ChangeEncodingAction.LABEL))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/browser/parts/editor/editorPart",["require","exports","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/timer","vs/base/common/events","vs/base/browser/builder","vs/nls!vs/workbench/browser/parts/editor/editorPart","vs/base/common/strings","vs/base/common/assert","vs/base/common/arrays","vs/base/common/types","vs/base/common/errors","vs/workbench/common/memento","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/part","vs/workbench/browser/events","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/browser/parts/editor/sideBySideEditorControl","vs/workbench/services/progress/browser/progressService","vs/platform/editor/common/editor","vs/platform/message/common/message","vs/css!./media/editorpart","vs/workbench/browser/parts/editor/editor.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w){var C="editorpart.editorState",T=function(e){function t(t,n,i,r,o,s){e.call(this,s),this.messageService=t,this.eventService=n,this.telemetryService=i,this.storageService=r,this.partService=o,this.visibleInputs=[],this.visibleInputListeners=[],this.visibleEditors=[],this.editorOpenToken=[];for(var a=0;a<S.POSITIONS.length;a++)this.editorOpenToken[a]=0;this.editorSetInputErrorCounter=[];for(var a=0;a<S.POSITIONS.length;a++)this.editorSetInputErrorCounter[a]=0;this.visibleEditorListeners=this.createPositionArray(!0),this.instantiatedEditors=this.createPositionArray(!0),this.mapEditorToEditorContainers=this.createPositionArray(!1),this.mapActionsToEditors=this.createPositionArray(!1),this.mapEditorLoadingPromiseToEditor=this.createPositionArray(!1),this.mapEditorCreationPromiseToEditor=this.createPositionArray(!1)}return __extends(t,e),t.prototype.setInstantiationService=function(e){this.instantiationService=e},t.prototype.createPositionArray=function(e){for(var t=[],n=0;n<S.POSITIONS.length;n++)t[n]=e?[]:{};return t},t.prototype.getActiveEditorInput=function(){var e=this.sideBySideControl.getActiveEditor();return e?e.input:null},t.prototype.getActiveEditor=function(){return this.sideBySideControl.getActiveEditor()},t.prototype.getVisibleEditors=function(){return this.visibleEditors?this.visibleEditors.filter(function(e){return!!e}):[]},t.prototype.setEditors=function(e,t){var n=this;return this.closeEditors().then(function(){return n.restoreEditorState(e,t)})},t.prototype.openEditor=function(e,t,l,d){var p=this;e||(e=null),t||(t=null);var f=this.findPosition(l,d);if(null===f)return n.TPromise.as(null);if(Object.keys(this.mapEditorLoadingPromiseToEditor[f]).length>0||Object.keys(this.mapEditorCreationPromiseToEditor[f]).length>0)return n.TPromise.as(null);if(this.sideBySideControl.isDragging())return n.TPromise.as(null);var m=new v.EditorEvent(this.visibleEditors[f],this.visibleEditors[f]&&this.visibleEditors[f].getId(),e,t,f);if(this.emit(v.EventType.EDITOR_INPUT_OPENING,m),m.isPrevented())return n.TPromise.as(null);this.editorOpenToken[f]++;var y=this.editorOpenToken[f];if(e&&f!==S.Position.LEFT&&this.telemetryService.publicLog("workbenchSideEditorOpened",{position:f}),e&&f!==S.Position.LEFT&&(t=this.findSideOptions(e,t,f)),this.visibleInputs[f]=e,this.visibleInputListeners[f]&&(this.visibleInputListeners[f](),this.visibleInputListeners[f]=null),e&&(this.visibleInputListeners[f]=e.addListener(o.EventType.DISPOSE,function(){setTimeout(function(){e===p.visibleInputs[f]&&p.closeEditors(!1,e).done(null,h.onUnexpectedError)},0)})),null===e)return this.visibleEditors[f]?(this.editorSetInputErrorCounter[f]=0,this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(null,null,null,null,f)),this.hideEditor(this.visibleEditors[f],f,!0).then(function(){p.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(null,null,null,null,f));var e=p.sideBySideControl.getActiveEditor();return e?p.openEditor(e.input,null,e.position).then(function(){return p.onEditorFocusChanged(),e}):n.TPromise.as(null)})):n.TPromise.as(null);var _=i.Registry.as(g.Extensions.Editors).getEditor(e);u.ok(_,c.format("Can not find a registered editor for the input {0}",e));var b,E=n.TPromise.timeout(this.partService.isCreated()?800:3200).then(function(){y===p.editorOpenToken[f]&&(p.sideBySideControl.getProgressBar(f).infinite().getContainer().show(),p.sideBySideControl.setLoading(f,e))});if(this.visibleEditors[f]){if(_.describes(this.visibleEditors[f])){var w=this.mapEditorCreationPromiseToEditor[f][_.getId()];return w||(w=n.TPromise.as(null)),w.then(function(){return p.setInput(p.visibleEditors[f],e,t,f,E)})}b=this.hideEditor(this.visibleEditors[f],f,!1)}else b=n.TPromise.as(null);return b.then(function(){var i,o=r.start(r.Topic.WORKBENCH,c.format("Creating Editor: {0}",_.getName())),u=p.mapEditorToEditorContainers[f][_.getId()];u||(u=s.$().div({"class":"editor-container",id:_.getId(),role:"presentation","aria-label":a.localize(0,null)},function(e){i=e}),p.mapEditorToEditorContainers[f][_.getId()]=u);var l,h=p.getEditorFromCache(_,f);if(null===h){var m=p.mapEditorLoadingPromiseToEditor[f][_.getId()];if(m)l=m;else{var g=!1;l=p.createEditor(_,i.getHTMLElement(),f).then(function(e){return g=!0,p.instantiatedEditors[f].push(e),delete p.mapEditorLoadingPromiseToEditor[f][_.getId()],e},function(e){return g=!0,delete p.mapEditorLoadingPromiseToEditor[f][_.getId()],n.Promise.wrapError(e)}),g||(p.mapEditorLoadingPromiseToEditor[f][_.getId()]=l)}}else l=n.TPromise.as(h);return l.then(function(r){if(y!==p.editorOpenToken[f])return o.stop(),E.cancel(),null;p.visibleEditors[f]=r,p.visibleEditorListeners[f].push(p.eventService.addEmitter(p.visibleEditors[f],p.visibleEditors[f].getId()));var s;if(i){var a=!1;s=r.create(i).then(function(){a=!0,delete p.mapEditorCreationPromiseToEditor[f][_.getId()]},function(e){return a=!0,delete p.mapEditorCreationPromiseToEditor[f][_.getId()],n.Promise.wrapError(e)}),a||(p.mapEditorCreationPromiseToEditor[f][_.getId()]=s)}else{var c=p.mapEditorCreationPromiseToEditor[f][_.getId()];s=c?c:n.TPromise.as(null)}return s.then(function(){return p.visibleEditors[f]&&r.getId()===p.visibleEditors[f].getId()?(p.sideBySideControl.show(r,u,f,t&&t.preserveFocus,d),r.setVisible(!0,f).then(function(){return p.sideBySideControl.layout(f),p.emit(v.EventType.EDITOR_OPENED,new v.EditorEvent(r,r.getId(),e,t,f)),o.stop(),p.setInput(r,e,t,f,E)})):(o.stop(),E.cancel(),null)},function(e){return p.showError(e)})})})},t.prototype.closeEditors=function(e,t){for(var i=[],r=this.getVisibleEditors().reverse(),o=0;o<r.length;o++){var s=r[o];e&&this.getActiveEditor()===s||t&&t!==s.input||i.push(this.openEditor(null,null,s.position))}return n.Promise.join(i)},t.prototype.findPosition=function(e,t){if(t&&d.isNumber(e))return e;var n=this.getVisibleEditors(),i=this.getActiveEditor();if(0===n.length||!i)return S.Position.LEFT;if(d.isUndefinedOrNull(e)||e===!1){var r=this.sideBySideControl.getActivePosition();return r||S.Position.LEFT}if(e===!0){switch(i.position){case S.Position.LEFT:return S.Position.CENTER;case S.Position.CENTER:return S.Position.RIGHT;case S.Position.RIGHT:return null}return null}return e===S.Position.RIGHT&&1===n.length?S.Position.CENTER:e},t.prototype.findSideOptions=function(e,t,n){if(this.visibleEditors[n]&&e.matches(this.visibleEditors[n].input))return t;if(t instanceof y.TextEditorOptions&&t.hasOptionsDefined())return t;for(var i=null,r=this.getVisibleEditors(),o=0;o<r.length;o++){var s=r[o];if(s instanceof _.BaseTextEditor&&e.matches(s.input)){var a=s.getControl();i=a.saveViewState();break}}if(i){var c=null;return t instanceof y.TextEditorOptions?(c=t,c.viewState(i),c):(c=new y.TextEditorOptions,c.viewState(i),t&&(c.forceOpen=t.forceOpen,c.preserveFocus=t.preserveFocus),c)}return t},t.prototype.rochade=function(e,t){if(d.isUndefinedOrNull(t)){var n=e;switch(n){case b.Rochade.CENTER_TO_LEFT:this.rochade(S.Position.CENTER,S.Position.LEFT);break;case b.Rochade.RIGHT_TO_CENTER:this.rochade(S.Position.RIGHT,S.Position.CENTER);break;case b.Rochade.CENTER_AND_RIGHT_TO_LEFT:this.rochade(S.Position.CENTER,S.Position.LEFT),this.rochade(S.Position.RIGHT,S.Position.CENTER)}}else{var i=e,r=t;this.doRochade(this.visibleInputs,i,r,null),this.doRochade(this.visibleInputListeners,i,r,null),this.doRochade(this.visibleEditors,i,r,null),this.doRochade(this.editorOpenToken,i,r,null),this.doRochade(this.mapEditorLoadingPromiseToEditor,i,r,{}),this.doRochade(this.mapEditorCreationPromiseToEditor,i,r,{}),this.doRochade(this.visibleEditorListeners,i,r,[]),this.doRochade(this.instantiatedEditors,i,r,[]),this.doRochade(this.mapEditorToEditorContainers,i,r,{}),this.doRochade(this.mapActionsToEditors,i,r,{})}},t.prototype.doRochade=function(e,t,n,i){e[n]=e[t],e[t]=i},t.prototype.moveEditor=function(e,t){if(this.visibleEditors[e]&&this.visibleEditors[t]&&e!==t){this.sideBySideControl.move(e,t),l.move(this.visibleInputs,e,t),l.move(this.visibleInputListeners,e,t),l.move(this.visibleEditors,e,t),l.move(this.visibleEditorListeners,e,t),l.move(this.editorOpenToken,e,t),l.move(this.mapEditorLoadingPromiseToEditor,e,t),l.move(this.mapEditorCreationPromiseToEditor,e,t),l.move(this.instantiatedEditors,e,t),l.move(this.mapEditorToEditorContainers,e,t),l.move(this.mapActionsToEditors,e,t),this.updateEditorTitleArea();var n=this.sideBySideControl.getActiveEditor();this.openEditor(n.input,null,n.position).done(null,h.onUnexpectedError)}},t.prototype.arrangeEditors=function(e){this.sideBySideControl.arrangeEditors(e)},t.prototype.setInput=function(e,t,n,i,o){var s=this,a=e.getInput(),u=e.getOptions(),l=!a||!a.matches(t)||n&&n.forceOpen;l?this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(e,e.getId(),t,n,i)):u&&u.matches(n)||this.emit(v.EventType.EDITOR_OPTIONS_CHANGING,new v.EditorEvent(e,e.getId(),t,n,i));var d=r.start(r.Topic.WORKBENCH,c.format("Set Editor Input: {0}",t.getName()));return e.setInput(t,n).then(function(){return s.editorSetInputErrorCounter[i]=0,o.cancel(),s.visibleInputs[i]!==t?(d.stop(),e):(n&&n.preserveFocus?n&&n.forceActive&&s.sideBySideControl.setActive(e):e.focus(),s.sideBySideControl.getProgressBar(i).done().getContainer().hide(),l&&s.updateEditorTitleArea(),l&&s.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(e,e.getId(),t,n,i)),d.stop(),e)},function(r){s.editorSetInputErrorCounter[i]++,o.cancel(),s.onSetInputError(r,e,t,n,i),!a&&s.visibleInputs[i]===t&&t?s.openEditor(null,null,i).done(null,h.onUnexpectedError):s.editorSetInputErrorCounter[i]>1?s.openEditor(null,null,i).done(null,h.onUnexpectedError):a&&s.openEditor(a,null,i).done(null,h.onUnexpectedError)})},t.prototype.getEditorFromCache=function(e,t){for(var n=0;n<this.instantiatedEditors[t].length;n++)if(e.describes(this.instantiatedEditors[t][n]))return this.instantiatedEditors[t][n];return null},t.prototype.createEditor=function(e,t,n){var i={progressService:new E.WorkbenchProgressService(this.eventService,this.sideBySideControl.getProgressBar(n),e.getId(),!0)},r=this.instantiationService.createChild(i);return r.createInstance(e)},t.prototype.hideEditor=function(e,t,n){var i=this,r=this.mapEditorToEditorContainers[t][e.getId()],o=this.sideBySideControl.hide(e,r,t,n);for(this.sideBySideControl.getProgressBar(t).stop().getContainer().hide();this.visibleEditorListeners[t].length;)this.visibleEditorListeners[t].pop()();return e.clearInput(),e.setVisible(!1).then(function(){return i.visibleEditors[t]=null,i.rochade(o),i.sideBySideControl.clearTitle(t),i.emit(v.EventType.EDITOR_CLOSED,new v.EditorEvent(e,e.getId(),null,null,t)),e})},t.prototype.updateEditorTitleArea=function(){for(var e=this.sideBySideControl.getActivePosition(),t=0;t<S.POSITIONS.length;t++){var n=this.visibleEditors[t],i=n?n.input:null;i&&n&&this.doUpdateEditorTitleArea(n,i,t,e===t)}},t.prototype.doUpdateEditorTitleArea=function(e,t,n,i){var r=[],o=[];if(i){var s=this.mapActionsToEditors[n][e.getId()];s||(s=this.getEditorActionsForContext(e,e,n),this.mapActionsToEditors[n][e.getId()]=s),r.push.apply(r,s.primary),o.push.apply(o,s.secondary);var a=this.getEditorActionsForContext({input:t,editor:e,position:n},e,n);r.push.apply(r,a.primary),o.push.apply(o,a.secondary)}this.sideBySideControl.setTitle(n,t,f.prepareActions(r),f.prepareActions(o),i)},t.prototype.getEditorActionsForContext=function(e,t,n){var r=[],o=[];e instanceof g.BaseEditor&&(r.push.apply(r,e.getActions()),o.push.apply(o,e.getSecondaryActions()));var s=i.Registry.as(f.Extensions.Actionbar);return r.push.apply(r,s.getActionBarActionsForContext(f.Scope.EDITOR,e)),o.push.apply(o,s.getSecondaryActionBarActionsForContext(f.Scope.EDITOR,e)),{primary:r,secondary:o}},t.prototype.createContentArea=function(e){var t=this,n=s.$(e).div().addClass("content");return this.sideBySideControl=this.instantiationService.createInstance(b.SideBySideEditorControl,n),this.toUnbind.push(this.sideBySideControl.addListener(b.EventType.EDITOR_FOCUS_CHANGED,function(){t.onEditorFocusChanged()})),this.memento=this.getMemento(this.storageService,p.Scope.WORKSPACE),n},t.prototype.restoreEditorState=function(e,t){var r,o,s,a=this;if(e&&e.length)e.length>3&&(e=e.slice(e.length-3)),o=e,s=3===o.length?[.33,.33,.34]:2===o.length?[.5,.5]:[1];else if(this.memento[C]){var c=this.memento[C];if(c&&c.editors){var u=i.Registry.as(g.Extensions.Editors),l=[];s=c.widthRatio;for(var p=0;p<c.editors.length;p++){var f=c.editors[p],m=u.getEditorInputFactory(f.inputId);if(m&&d.isString(f.inputValue)){var v=m.deserialize(this.instantiationService,f.inputValue);v&&(f.hasFocus&&(r=v),l.push(v))}}l.length&&(o=l)}}if(o&&o.length){!r&&o.length&&(r=o[0]),s&&s.length!==o.length&&(s=2===o.length?[.5,.5]:null);var _=[];return o.forEach(function(e,n){var i,o=e!==r;t&&t[n]?(i=t[n],i.preserveFocus=o):i=y.EditorOptions.create({preserveFocus:o}),_.push(a.openEditor(e,i,n,s))}),n.Promise.join(_).then(function(){a.getVisibleEditors().length!==o.length&&a.closeEditors().done(null,h.onUnexpectedError),a.sideBySideControl.layout(a.dimension)})}return n.TPromise.as(null)},t.prototype.onEditorFocusChanged=function(){var e=this.sideBySideControl.getActiveEditor();e&&(this.emit(v.EventType.EDITOR_INPUT_CHANGING,new v.EditorEvent(e,e.getId(),e.input,null,e.position)),this.emit(v.EventType.EDITOR_INPUT_CHANGED,new v.EditorEvent(e,e.getId(),e.input,null,e.position))),this.updateEditorTitleArea()},t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.dimension=n[1],this.sideBySideControl.layout(this.dimension),n},t.prototype.onSetInputError=function(e,t,n,i,r){if(this.partService.isCreated()&&!h.isPromiseCanceledError(e)){var o,s=a.localize(1,null,n.getName(),h.toErrorMessage(e));o=e&&e.actions&&e.actions.length?h.create(s,{actions:e.actions}):s,this.showError(o)}this.sideBySideControl.getProgressBar(r).done().getContainer().hide(),this.emit(v.EventType.EDITOR_SET_INPUT_ERROR,new v.EditorEvent(t,t.getId(),n,i,r))},t.prototype.showError=function(e){return this.messageService.show(w.Severity.Error,d.isString(e)?new Error(e):e)},t.prototype.shutdown=function(){this.saveEditorState();for(var t=0;t<this.instantiatedEditors.length;t++)for(var n=0;n<this.instantiatedEditors[t].length;n++)this.instantiatedEditors[t][n].shutdown();e.prototype.shutdown.call(this)},t.prototype.saveEditorState=function(){var e=i.Registry.as(g.Extensions.Editors),t=this.getVisibleEditors(),n=this.getActiveEditor(),r=this.sideBySideControl.getWidthRatios(),o={editors:[],widthRatio:r};this.memento[C]=o;for(var s=0;s<t.length;s++){var a=t[s],c=a.input;if(c){var u=e.getEditorInputFactory(c.getId());if(u){var l=u.serialize(c);o.editors.push({inputId:c.getId(),inputValue:l,hasFocus:n===a
})}}}},t.prototype.dispose=function(){var t=this;this.mapEditorToEditorContainers=null,this.mapActionsToEditors=null,this.editorOpenToken=[];for(var n=0;n<S.POSITIONS.length;n++)this.editorOpenToken[n]=0;this.sideBySideControl.dispose();for(var i=0;i<this.visibleEditorListeners.length;i++)for(;this.visibleEditorListeners[i].length;)this.visibleEditorListeners[i].pop()();for(var r=0;r<this.visibleInputListeners.length;r++){var o=this.visibleInputListeners[r];o&&o(),this.visibleInputListeners=[]}this.visibleEditors.forEach(function(e){e&&e.dispose()});for(var s=0;s<this.instantiatedEditors.length;s++)for(var a=0;a<this.instantiatedEditors[s].length;a++)this.visibleEditors.some(function(e){return e===t.instantiatedEditors[s][a]})||this.instantiatedEditors[s][a].dispose();this.visibleEditors=null,this.visibleInputs=null,e.prototype.dispose.call(this)},t}(m.Part);t.EditorPart=T});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/update",["require","exports","vs/nls!vs/workbench/electron-browser/update","vs/base/common/severity","vs/base/common/winjs.base","vs/base/common/actions","ipc","remote","vs/base/common/platform","vs/platform/message/common/message","vs/workbench/services/workspace/common/contextService","vs/platform/request/common/request"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=a.require("shell"),p=function(){function e(t,a,u){var l=this;this.contextService=t,this.messageService=a,this.requestService=u;var d=this.contextService.getConfiguration().env;s.on("vscode:update-downloaded",function(t){l.messageService.show(i["default"].Info,{message:n.localize(3,null,d.appName),actions:[e.ShowReleaseNotesAction(d.releaseNotesUrl),e.NotNowAction,e.ApplyUpdateAction]})}),s.on("vscode:update-not-available",function(){l.messageService.show(i["default"].Info,n.localize(4,null))});var p=d.updateFeedUrl;if(c.isLinux&&p){d.updateChannel,process.platform+"-"+process.arch;this.requestService.makeRequest({url:p}).done(function(e){200===e.status&&l.messageService.show(i["default"].Info,{message:n.localize(5,null,d.appName),actions:[new o.Action("pleaseUpdate",n.localize(6,null),"",!0,function(){return h.openExternal(d.productDownloadUrl),r.Promise.as(!0)}),new o.Action("releaseNotes",n.localize(7,null),"",!0,function(){return h.openExternal(d.releaseNotesUrl),r.Promise.as(!1)})]})})}}return e.ApplyUpdateAction=new o.Action("update.applyUpdate",n.localize(0,null),null,!0,function(){return s.send("vscode:update-apply"),r.Promise.as(!0)}),e.NotNowAction=new o.Action("update.later",n.localize(1,null),null,!0,function(){return r.Promise.as(!0)}),e.ShowReleaseNotesAction=function(e){return new o.Action("update.showReleaseNotes",n.localize(2,null),null,!0,function(){return h.openExternal(e),r.Promise.as(!1)})},e=__decorate([__param(0,l.IWorkspaceContextService),__param(1,u.IMessageService),__param(2,d.IRequestService)],e)}();t.Update=p});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/debugEditorContribution",["require","exports","vs/nls!vs/workbench/parts/debug/browser/debugEditorContribution","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/common/platform","vs/base/common/actions","vs/base/common/keyCodes","vs/editor/common/editorCommon","vs/workbench/parts/debug/browser/debugHoverWidget","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/common/debug","vs/workbench/services/workspace/common/contextService","vs/platform/instantiation/common/instantiation","vs/platform/contextview/browser/contextView"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=function(){function e(e,t,n,i,r){this.editor=e,this.debugService=t,this.contextService=n,this.contextMenuService=i,this.instantiationService=r,this.breakpointHintDecoration=[],this.toDispose=[],this.hoverWidget=new u.DebugHoverWidget(this.editor,this.debugService),this.registerListeners()}return e.prototype.getContextMenuActions=function(e,t,r){var o=this,a=[];return e?(a.push(this.instantiationService.createInstance(l.RemoveBreakpointAction,l.RemoveBreakpointAction.ID,l.RemoveBreakpointAction.LABEL)),a.push(this.instantiationService.createInstance(l.ToggleEnablementAction,l.ToggleEnablementAction.ID,l.ToggleEnablementAction.LABEL))):a.push(new s.Action("addBreakpoint",n.localize(0,null),null,!0,function(){return o.debugService.toggleBreakpoint({uri:t,lineNumber:r})})),i.TPromise.as(a)},e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.editor.addListener2(c.EventType.MouseDown,function(t){if(t.target.type===c.MouseTargetType.GUTTER_GLYPH_MARGIN&&!t.target.detail&&e.debugService.canSetBreakpointsIn(e.editor.getModel(),t.target.position.lineNumber)){var n=t.target.position.lineNumber,i=e.editor.getModel().getAssociatedResource();if(t.event.rightButton){var r={x:t.event.posx+1,y:t.event.posy},o=e.debugService.getModel().getBreakpoints().filter(function(e){return e.lineNumber===n&&e.source.uri.toString()===i.toString()}).pop();e.contextMenuService.showContextMenu({getAnchor:function(){return r},getActions:function(){return e.getContextMenuActions(o,i,n)},getActionsContext:function(){return o}})}else e.debugService.toggleBreakpoint({uri:i,lineNumber:n})}})),this.toDispose.push(this.editor.addListener2(c.EventType.MouseMove,function(t){var n=-1;t.target.type===c.MouseTargetType.GUTTER_GLYPH_MARGIN&&e.debugService.canSetBreakpointsIn(e.editor.getModel(),t.target.position.lineNumber)&&(t.target.detail||(n=t.target.position.lineNumber)),e.ensureBreakpointHintDecoration(n)})),this.toDispose.push(this.editor.addListener2(c.EventType.MouseLeave,function(t){e.ensureBreakpointHintDecoration(-1)})),this.toDispose.push(this.debugService.addListener2(d.ServiceEvents.STATE_CHANGED,function(){return e.onDebugStateUpdate()})),this.toDispose.push(this.editor.addListener2(c.EventType.MouseDown,function(t){return e.onEditorMouseDown(t)})),this.toDispose.push(this.editor.addListener2(c.EventType.MouseMove,function(t){return e.onEditorMouseMove(t)})),this.toDispose.push(this.editor.addListener2(c.EventType.MouseLeave,function(t){return e.hoverWidget.hide()})),this.toDispose.push(this.editor.addListener2(c.EventType.KeyDown,function(t){return e.onKeyDown(t)})),this.toDispose.push(this.editor.addListener2(c.EventType.ModelChanged,function(){return e.onModelChanged()})),this.toDispose.push(this.editor.addListener2("scroll",function(){return e.hoverWidget.hide()}))},e.prototype.getId=function(){return e.ID},e.prototype.ensureBreakpointHintDecoration=function(t){var n=[];-1!==t&&n.push({options:e.BREAKPOINT_HELPER_DECORATION,range:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1}}),this.breakpointHintDecoration=this.editor.deltaDecorations(this.breakpointHintDecoration,n)},e.prototype.onDebugStateUpdate=function(){this.debugService.getState()!==d.State.Stopped&&this.hoverWidget.hide(),this.contextService.updateOptions("editor",{hover:this.debugService.getState()!==d.State.Stopped})},e.prototype.onModelChanged=function(){this.hoverWidget.hide()},e.prototype.onEditorMouseDown=function(e){(e.target.type!==c.MouseTargetType.CONTENT_WIDGET||e.target.detail!==u.DebugHoverWidget.ID)&&this.hoverWidget.hide()},e.prototype.onEditorMouseMove=function(e){if(this.debugService.getState()===d.State.Stopped){var t=e.target.type,n=o.isMacintosh?"metaKey":"ctrlKey";(t!==c.MouseTargetType.CONTENT_WIDGET||e.target.detail!==u.DebugHoverWidget.ID||e.event[n])&&(t===c.MouseTargetType.CONTENT_TEXT?this.hoverWidget.showAt(e.target.range):this.hoverWidget.hide())}},e.prototype.onKeyDown=function(e){var t=o.isMacintosh?a.KeyCode.Meta:a.KeyCode.Ctrl;e.keyCode!==t&&this.hoverWidget.hide()},e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose)},e.ID="editor.contrib.debug",e.BREAKPOINT_HELPER_DECORATION={glyphMarginClassName:"debug-breakpoint-glyph-hint",stickiness:c.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges},e=__decorate([__param(1,d.IDebugService),__param(2,h.IWorkspaceContextService),__param(3,f.IContextMenuService),__param(4,p.IInstantiationService)],e)}();t.DebugEditorContribution=m});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/browser/replEditor",["require","exports","vs/base/common/errors","vs/base/common/lifecycle","vs/base/browser/dom","vs/base/common/platform","vs/base/parts/tree/browser/treeImpl","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/debug/browser/debugEditorInputs","vs/workbench/parts/debug/browser/replViewer","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/common/replHistory","vs/platform/telemetry/common/telemetry","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/lifecycle/common/lifecycle","vs/base/common/keyCodes","vs/css!./media/repl"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_){var b=r.emmet,E={indentPixels:8,twistiePixels:20,paddingOnRow:!1},S="debug.repl.history",w=function(e){function t(n,i,r,o,s,a,c,u){e.call(this,t.ID,o),this.debugService=n,this.contextMenuService=i,this.contextService=r,this.instantiationService=s,this.contextViewService=a,this.storageService=c,this.toDispose=[],this.registerListeners(u)}return __extends(t,e),t.prototype.registerListeners=function(e){var t=this;this.toDispose.push(this.debugService.getModel().addListener2(l.ModelEvents.REPL_ELEMENTS_UPDATED,function(e){t.onReplElementsUpdated(e)})),e.onShutdown.add(this.onShutdown,this)},t.prototype.onReplElementsUpdated=function(e){var i=this;if(this.tree){if(this.refreshTimeoutHandle)return;this.refreshTimeoutHandle=setTimeout(function(){delete i.refreshTimeoutHandle;var e=i.tree.getScrollPosition();i.tree.refresh().then(function(){return 0===e||1===e?i.tree.setScrollPosition(1):void 0},n.onUnexpectedError)},t.REFRESH_DELAY)}},t.prototype.createEditor=function(e){var n=this,i=r.append(e.getHTMLElement(),b(".repl"));r.addClass(i,"monaco-editor-background"),this.treeContainer=r.append(i,b(".repl-tree"));var a=r.append(i,b(o.isWindows?".repl-input-wrapper.windows":o.isMacintosh?".repl-input-wrapper.mac":".repl-input-wrapper.linux"));this.replInput=r.append(a,b("input.repl-input")),r.addStandardDisposableListener(this.replInput,"keydown",function(e){var i=n.replInput.value.trim();if(e.equals(_.CommonKeybindings.ENTER)&&i)n.debugService.addReplExpression(i),t.HISTORY.evaluated(i),n.replInput.value="";else if(e.equals(_.CommonKeybindings.UP_ARROW)||e.equals(_.CommonKeybindings.DOWN_ARROW)){var r=e.equals(_.CommonKeybindings.UP_ARROW)?t.HISTORY.previous():t.HISTORY.next();r&&(t.HISTORY.remember(n.replInput.value,e.equals(_.CommonKeybindings.UP_ARROW)),n.replInput.value=r,e.preventDefault())}}),this.characterWidthSurveyor=r.append(i,b(".surveyor")),this.characterWidthSurveyor.textContent="a";for(var c=0;10>c;c++)this.characterWidthSurveyor.textContent+=this.characterWidthSurveyor.textContent;this.characterWidthSurveyor.style.fontSize=o.isMacintosh?"12px":"14px",this.renderer=this.instantiationService.createInstance(u.ReplExpressionsRenderer),this.tree=new s.Tree(this.treeContainer,{dataSource:new u.ReplExpressionsDataSource(this.debugService),renderer:this.renderer,controller:new u.ReplExpressionsController(this.debugService,this.contextMenuService,new u.ReplExpressionsActionProvider(this.instantiationService),this.replInput,!1)},E),t.HISTORY||(t.HISTORY=new h.ReplHistory(JSON.parse(this.storageService.get(S,g.StorageScope.WORKSPACE,"[]"))))},t.prototype.setInput=function(t,n){var i=this;return e.prototype.setInput.call(this,t,n).then(function(){i.tree&&(i.tree.getInput()||i.tree.setInput(i.debugService.getModel()))})},t.prototype.layout=function(e){this.tree&&(this.renderer.setWidth(e.width-20,this.characterWidthSurveyor.clientWidth/this.characterWidthSurveyor.textContent.length),this.tree.layout(this.treeContainer.clientHeight),this.tree.refresh().done(null,n.onUnexpectedError))},t.prototype.focus=function(){this.replInput.focus()},t.prototype.reveal=function(e){return this.tree.reveal(e)},t.prototype.onShutdown=function(){this.storageService.store(S,JSON.stringify(t.HISTORY.save()),g.StorageScope.WORKSPACE)},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t.ID="workbench.editors.replEditor",t.REFRESH_DELAY=500,t=__decorate([__param(0,l.IDebugService),__param(1,f.IContextMenuService),__param(2,v.IWorkspaceContextService),__param(3,p.ITelemetryService),__param(4,m.IInstantiationService),__param(5,f.IContextViewService),__param(6,g.IStorageService),__param(7,y.ILifecycleService)],t)}(a.BaseEditor);t.Repl=w;var C=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof c.ReplEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(d.ClearReplAction)]},t=__decorate([__param(0,m.IInstantiationService)],t)}(a.EditorInputActionContributor);t.ReplEditorActionContributor=C;var T=function(){function e(e){}return e.prototype.serialize=function(e){return e.getId()},e.prototype.deserialize=function(e,t){return c.ReplEditorInput.getInstance()},e=__decorate([__param(0,m.INullService)],e)}();t.ReplInputFactory=T});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/node/debugConfigurationManager",["require","exports","path","vs/nls!vs/workbench/parts/debug/node/debugConfigurationManager","vs/base/common/winjs.base","vs/base/common/uri","vs/base/common/network","vs/base/common/paths","vs/platform/platform","vs/platform/plugins/common/pluginsRegistry","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/workbench/parts/lib/node/systemVariables","vs/workbench/parts/debug/node/debugAdapter","vs/workbench/services/workspace/common/contextService","vs/platform/configuration/common/configuration","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){t.debuggersExtPoint=u.PluginsRegistry.registerExtensionPoint("debuggers",{description:i.localize(0,null),type:"array","default":[{type:"",extensions:[]}],items:{type:"object","default":{type:"",program:"",runtime:"",enableBreakpointsFor:{languageIds:[""]}},properties:{type:{description:i.localize(1,null),type:"string"},label:{description:i.localize(2,null),type:"string"},enableBreakpointsFor:{description:i.localize(3,null),type:"object",properties:{languageIds:{description:i.localize(4,null),type:"array",items:{type:"string"}}}},program:{description:i.localize(5,null),type:"string"},runtime:{description:i.localize(6,null),type:"string"},runtimeArgs:{description:i.localize(7,null),type:"array"},initialConfigurations:{description:i.localize(8,null),type:"array"},configurationAttributes:{description:i.localize(9,null),type:"object"},windows:{description:i.localize(10,null),type:"object",properties:{runtime:{description:i.localize(11,null),type:"string"}}},osx:{description:i.localize(12,null),type:"object",properties:{runtime:{description:i.localize(13,null),type:"string"}}},linux:{description:i.localize(14,null),type:"object",properties:{runtime:{description:i.localize(15,null),type:"string"}}}}}}),t.schemaId="local://schemas/launch";var _={id:t.schemaId,type:"object",title:i.localize(16,null),required:["version","configurations"],properties:{version:{type:"string",description:i.localize(17,null),"default":"0.2.0"},configurations:{type:"array",description:i.localize(18,null),items:{oneOf:[]}}}},b=c.Registry.as(l.Extensions.JSONContribution);b.registerSchema(t.schemaId,_),b.addSchemaFileAssociation("/.vscode/launch.json",t.schemaId);var E=function(){function e(e,t,n,i,r,o,s){this.contextService=t,this.fileService=n,this.telemetryService=i,this.editorService=r,this.configurationService=o,this.quickOpenService=s,this.systemVariables=this.contextService.getWorkspace()?new d.SystemVariables(this.editorService,this.contextService):null,this.setConfiguration(e),this.adapters=[],this.registerListeners(),this.allModeIdsForBreakpoints={}}return e.prototype.registerListeners=function(){var e=this;t.debuggersExtPoint.setHandler(function(t){t.forEach(function(t){t.value.forEach(function(n){var r=new h.Adapter(n,e.systemVariables,t.description.extensionFolderPath),o=e.adapters.filter(function(e){return e.type===r.type})[0];n.type&&"string"==typeof n.type||t.collector.error(i.localize(19,null)),o?Object.keys(r).forEach(function(e){r[e]&&("enableBreakpointsFor"===e?Object.keys(r.enableBreakpointsFor).forEach(function(e){return o.enableBreakpointsFor[e]=!0}):o[e]&&"type"!==e?(o[e]=r[e],t.collector.error(i.localize(20,null,r.type,e))):o[e]=r[e])}):e.adapters.push(r),r.enableBreakpointsFor.languageIds.forEach(function(t){e.allModeIdsForBreakpoints[t]=!0})})}),e.adapters.forEach(function(e){var t=e.getSchemaAttributes();t&&(n=_.properties.configurations.items.oneOf).push.apply(n,t);var n})})},e.prototype.getConfiguration=function(){return this.configuration},e.prototype.getConfigurationName=function(){return this.configuration?this.configuration.name:null},e.prototype.getAdapter=function(){var e=this;return this.adapters.filter(function(t){return t.type===e.configuration.type}).pop()},e.prototype.setConfiguration=function(e){var t=this;return this.loadLaunchConfig().then(function(n){if(!n||!n.configurations)return void(t.configuration=null);var i=e?n.configurations.filter(function(t){return t.name===e}):[n.configurations[0]];t.configuration=1===i.length?i[0]:null,t.configuration&&t.systemVariables&&(t.configuration.debugServer=n.debugServer,t.configuration.outDir=t.resolvePath(t.systemVariables.resolve(t.configuration.outDir)),t.configuration.address=t.configuration.address||"localhost",t.configuration.program=t.resolvePath(t.systemVariables.resolve(t.configuration.program)),t.configuration.stopOnEntry=void 0===t.configuration.stopOnEntry?!1:t.configuration.stopOnEntry,t.configuration.args=t.configuration.args&&t.configuration.args.length>0?t.systemVariables.resolve(t.configuration.args):null,t.configuration.env=t.systemVariables.resolve(t.configuration.env),t.configuration.cwd=t.resolvePath(t.systemVariables.resolve(t.configuration.cwd)||".",!1),t.configuration.runtimeExecutable=t.resolvePath(t.systemVariables.resolve(t.configuration.runtimeExecutable)),t.configuration.runtimeArgs=t.configuration.runtimeArgs&&t.configuration.runtimeArgs.length>0?t.systemVariables.resolve(t.configuration.runtimeArgs):null,t.configuration.outDir=t.resolvePath(t.configuration.outDir))})},e.prototype.openConfigFile=function(e){var t=this,n=o["default"].file(a.join(this.contextService.getWorkspace().resource.fsPath,"/.vscode/launch.json"));return this.fileService.resolveContent(n).then(function(e){return!0},function(e){return t.getInitialConfigFileContent().then(function(e){return e?t.fileService.updateContent(n,e).then(function(){return!0}):!1})}).then(function(i){return i?(t.telemetryService.publicLog("debugConfigure"),t.editorService.openEditor({resource:n,options:{forceOpen:!0}},e).then(function(){return!0})):!1},function(e){throw new Error(i.localize(21,null,e))})},e.prototype.getInitialConfigFileContent=function(){var e=this;return this.quickOpenService.pick(this.adapters,{placeHolder:i.localize(22,null)}).then(function(t){return t?e.massageInitialConfigurations(t).then(function(){return JSON.stringify({version:"0.2.0",configurations:t.initialConfigurations?t.initialConfigurations:[]},null,"	")}):null})},e.prototype.massageInitialConfigurations=function(e){if(!e||!e.initialConfigurations||"node"!==e.type)return r.Promise.as(!0);var t=o["default"].file(a.join(this.contextService.getWorkspace().resource.fsPath,"/package.json"));return this.fileService.resolveContent(t).then(function(e){try{var t=JSON.parse(e.value);if(t.main)return t.main;if(t.scripts&&"string"==typeof t.scripts.start)return t.scripts.start.split(" ").pop()}catch(n){}return null},function(e){return null}).then(function(t){e.initialConfigurations.forEach(function(e){t&&e.program&&(e.program=t)})})},e.prototype.canSetBreakpointsIn=function(e,t){if(0===e.getLineLastNonWhitespaceColumn(t))return!1;if(e.getAssociatedResource().scheme===s.schemas.inMemory)return!1;var n=e?e.getMode():null,i=n?n.getId():null;return!!this.allModeIdsForBreakpoints[i]},e.prototype.resolvePath=function(e,t){return void 0===t&&(t=!0),e?n.isAbsolute(e)?a.normalize(e,!0):a.normalize(o["default"].file(a.join(this.contextService.getWorkspace().resource.fsPath,e)).fsPath,!0):null},e.prototype.loadLaunchConfig=function(){return this.configurationService.loadConfiguration("launch")},e=__decorate([__param(1,p.IWorkspaceContextService),__param(2,m.IFileService),__param(3,v.ITelemetryService),__param(4,g.IWorkbenchEditorService),__param(5,f.IConfigurationService),__param(6,y.IQuickOpenService)],e)}();t.ConfigurationManager=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debugService",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debugService","vs/base/common/lifecycle","vs/base/common/mime","vs/base/common/eventEmitter","vs/base/common/arrays","vs/base/common/types","vs/base/common/errors","vs/base/common/severity","vs/base/common/winjs.base","vs/workbench/common/editor","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/node/rawDebugSession","vs/workbench/parts/debug/common/debugModel","vs/workbench/parts/debug/browser/debugEditorInputs","vs/workbench/parts/debug/common/debugViewModel","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/node/debugConfigurationManager","vs/workbench/parts/debug/common/debugSource","vs/platform/editor/common/editor","vs/workbench/parts/tasks/common/taskService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/workbench/parts/files/common/files","vs/workbench/services/workspace/common/contextService","vs/platform/instantiation/common/instantiation","vs/platform/files/common/files","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/storage/common/storage","vs/workbench/services/editor/common/editorService","vs/platform/lifecycle/common/lifecycle","vs/platform/plugins/common/plugins","vs/workbench/parts/output/common/output","vs/platform/keybinding/common/keybindingService","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/thread/electron-browser/threadService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W){var H="debug.breakpoint",V="debug.breakpointactivated",B="debug.functionbreakpoint",K="debug.exceptionbreakpoint",U="debug.watchexpressions",z="debug.selectedconfigname",j=function(e){function t(t,n,i,r,o,s,a,c,u,l,d,p,m,g,_,b){e.call(this),this.storageService=t,this.editorService=n,this.textFileService=i,this.viewletService=r,this.fileService=o,this.messageService=s,this.partService=a,this.windowService=c,this.telemetryService=u,this.contextService=l,this.lifecycleService=m,this.instantiationService=g,this.pluginService=_,this.outputService=b,this.serviceId=h.IDebugService,this.toDispose=[],this.debugStringEditorInputs=[],this.session=null,this.state=h.State.Inactive,this.taskService=this.instantiationService.getInstance(E.ITaskService),this.contextService.getWorkspace()||(this.state=h.State.Disabled),this.configurationManager=this.instantiationService.createInstance(y.ConfigurationManager,this.storageService.get(z,D.StorageScope.WORKSPACE,"null")),this.inDebugMode=d.createKey(h.CONTEXT_IN_DEBUG_MODE,!1),this.model=new f.Model(this.loadBreakpoints(),this.storageService.getBoolean(V,D.StorageScope.WORKSPACE,!0),this.loadFunctionBreakpoints(),this.loadExceptionBreakpoints(),this.loadWatchExpressions()),this.viewModel=new v.ViewModel,this.registerListeners(p,m)}return __extends(t,e),t.prototype.registerListeners=function(e,t){var n=this;this.toDispose.push(e.addListener2(k.EventType.FILE_CHANGES,function(e){return n.onFileChanges(e)})),this.taskService&&(this.toDispose.push(this.taskService.addListener2(E.TaskServiceEvents.Active,function(e){n.lastTaskEvent=e})),this.toDispose.push(this.taskService.addListener2(E.TaskServiceEvents.Inactive,function(e){e.type===E.TaskType.SingleRun&&(n.lastTaskEvent=null)})),this.toDispose.push(this.taskService.addListener2(E.TaskServiceEvents.Terminated,function(e){n.lastTaskEvent=null}))),t.onShutdown.add(this.store,this),t.onShutdown.add(this.dispose,this),this.windowService.onBroadcast.add(this.onBroadcast,this)},t.prototype.onBroadcast=function(e){if(e.channel===W.PLUGIN_ATTACH_BROADCAST_CHANNEL)return void this.rawAttach(e.payload.port);var t=this.getActiveSession();if(t&&"extensionHost"===t.getType()&&e.channel===W.PLUGIN_LOG_BROADCAST_CHANNEL){var n=e.payload,i="warn"===n.severity?u["default"].Warning:"error"===n.severity?u["default"].Error:u["default"].Info,r=[];try{var o=JSON.parse(n.arguments);r.push.apply(r,Object.getOwnPropertyNames(o).map(function(e){return o[e]}))}catch(s){r.push(n.arguments)}for(var l=[],d=0;d<r.length;d++){var h=r[d];if("undefined"==typeof h)l.push("undefined");else if(null===h)l.push("null");else if(a.isObject(h)||Array.isArray(h))l.length&&(this.logToRepl(l.join(" "),i),l=[]),this.logToRepl(h,i);else if("string"==typeof h){for(var p="",f=0,m=h.length;m>f;f++)"%"!==h[f]||"s"!==h[f+1]&&"i"!==h[f+1]&&"d"!==h[f+1]?p+=h[f]:(d++,p+=a.isUndefinedOrNull(r[d])?"":r[d],f++);l.push(p)}else l.push(h)}l.length&&this.logToRepl(l.join(" "),i),this.revealRepl(!0).done(null,c.onUnexpectedError)}},t.prototype.registerSessionListeners=function(){var e=this;this.toDispose.push(this.session.addListener2(h.SessionEvents.INITIALIZED,function(t){e.sendAllBreakpoints().done(null,c.onUnexpectedError),e.sendExceptionBreakpoints().done(null,c.onUnexpectedError)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.STOPPED,function(t){e.setStateAndEmit(h.State.Stopped,t.body.reason);var n=t.body.threadId;e.getThreadData(n).then(function(){e.session.stackTrace({threadId:n,levels:20}).done(function(i){e.model.rawUpdate({threadId:n,callStack:i.body.stackFrames,exception:t.body&&"exception"===t.body.reason}),e.windowService.getWindow().focus();var r=e.model.getThreads()[n].callStack;r.length>0?(e.setFocusedStackFrameAndEvaluate(r[0]),e.openOrRevealEditor(r[0].source,r[0].lineNumber,!1,!1).done(null,c.onUnexpectedError)):e.setFocusedStackFrameAndEvaluate(null)})},c.onUnexpectedError)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.CONTINUED,function(){e.model.clearThreads(!1),e.setFocusedStackFrameAndEvaluate(null),e.setStateAndEmit(h.State.Running)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.THREAD,function(t){"started"===t.body.reason?e.session.threads().done(function(n){var i=n.body.threads.filter(function(e){return e.id===t.body.threadId}).pop();i&&e.model.rawUpdate({threadId:i.id,thread:i})},c.onUnexpectedError):"exited"===t.body.reason&&e.model.clearThreads(!0,t.body.threadId)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.DEBUGEE_TERMINATED,function(t){e.session&&e.session.getId()===t.sessionId&&e.session.disconnect().done(null,c.onUnexpectedError)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.OUTPUT,function(t){t.body&&"string"==typeof t.body.output&&t.body.output.length>0&&e.onOutput(t)})),this.toDispose.push(this.session.addListener2(h.SessionEvents.SERVER_EXIT,function(t){e.session&&e.session.getId()===t.sessionId&&e.onSessionEnd()}))},t.prototype.onOutput=function(e){var t="stderr"===e.body.category?u["default"].Error:u["default"].Info;this.appendReplOutput(e.body.output,t),this.revealRepl(!0).done(null,c.onUnexpectedError)},t.prototype.getThreadData=function(e){var t=this;return this.model.getThreads()[e]?l.Promise.as(!0):this.session.threads().then(function(n){var i=n.body.threads.filter(function(t){return t.id===e}).pop();if(!i)throw new Error("Did not get a thread from debug adapter with id "+e);t.model.rawUpdate({threadId:i.id,thread:i})})},t.prototype.loadBreakpoints=function(){try{return JSON.parse(this.storageService.get(H,D.StorageScope.WORKSPACE,"[]")).map(function(e){return new f.Breakpoint(new _.Source(e.source.name,e.source.uri,e.source.reference),e.desiredLineNumber||e.lineNumber,e.enabled,e.condition)})}catch(e){return[]}},t.prototype.loadFunctionBreakpoints=function(){try{return JSON.parse(this.storageService.get(B,D.StorageScope.WORKSPACE,"[]")).map(function(e){return new f.FunctionBreakpoint(e.name,e.enabled)})}catch(e){return[]}},t.prototype.loadExceptionBreakpoints=function(){var e=null;try{e=JSON.parse(this.storageService.get(K,D.StorageScope.WORKSPACE,"[]")).map(function(e){return new f.ExceptionBreakpoint(e.name,e.enabled)})}catch(t){e=[]}return e.length>0?e:[new f.ExceptionBreakpoint("all",!1),new f.ExceptionBreakpoint("uncaught",!0)]},t.prototype.loadWatchExpressions=function(){try{return JSON.parse(this.storageService.get(U,D.StorageScope.WORKSPACE,"[]")).map(function(e){return new f.Expression(e.name,!1,e.id)})}catch(e){return[]}},t.prototype.getState=function(){return this.state},t.prototype.setStateAndEmit=function(e,t){this.state=e,this.emit(h.ServiceEvents.STATE_CHANGED,t)},Object.defineProperty(t.prototype,"enabled",{
get:function(){return!!this.contextService.getWorkspace()},enumerable:!0,configurable:!0}),t.prototype.setFocusedStackFrameAndEvaluate=function(e){this.viewModel.setFocusedStackFrame(e),e?this.model.evaluateWatchExpressions(this.session,e):this.model.clearWatchExpressionValues()},t.prototype.setBreakpointsForModel=function(e,t){return this.model.removeBreakpoints(this.model.getBreakpoints().filter(function(t){return t.source.uri.toString()===e.toString()})),this.model.addBreakpoints(t),this.sendBreakpoints(e)},t.prototype.toggleBreakpoint=function(e){var t=this.model.getBreakpoints().filter(function(t){return t.lineNumber===e.lineNumber&&t.source.uri.toString()===e.uri.toString()}).pop();return t?this.model.removeBreakpoints([t]):this.model.addBreakpoints([e]),this.sendBreakpoints(e.uri)},t.prototype.enableOrDisableAllBreakpoints=function(e){return this.model.enableOrDisableAllBreakpoints(e),this.sendAllBreakpoints()},t.prototype.toggleEnablement=function(e){if(this.model.toggleEnablement(e),e instanceof f.Breakpoint){var t=e;return this.sendBreakpoints(t.source.uri)}return e instanceof f.FunctionBreakpoint,this.sendExceptionBreakpoints()},t.prototype.removeAllBreakpoints=function(){var e=this,t=s.distinct(this.model.getBreakpoints(),function(e){return e.source.uri.toString()}).map(function(e){return e.source.uri});return this.model.removeBreakpoints(this.model.getBreakpoints()),l.Promise.join(t.map(function(t){return e.sendBreakpoints(t)}))},t.prototype.toggleBreakpointsActivated=function(){return this.model.toggleBreakpointsActivated(),this.sendAllBreakpoints()},t.prototype.addFunctionBreakpoint=function(e){return this.model.addFunctionBreakpoint(e),l.Promise.as(!0)},t.prototype.renameFunctionBreakpoint=function(e,t){return this.model.renameFunctionBreakpoint(e,t),l.Promise.as(!0)},t.prototype.removeFunctionBreakpoints=function(e){return this.model.removeFunctionBreakpoints(e),l.Promise.as(!0)},t.prototype.addReplExpression=function(e){return this.model.addReplExpression(this.session,this.viewModel.getFocusedStackFrame(),e)},t.prototype.logToRepl=function(e,t){this.model.logToRepl(e,t)},t.prototype.appendReplOutput=function(e,t){this.model.appendReplOutput(e,t)},t.prototype.clearReplExpressions=function(){this.model.clearReplExpressions()},t.prototype.addWatchExpression=function(e){return this.model.addWatchExpression(this.session,this.viewModel.getFocusedStackFrame(),e)},t.prototype.renameWatchExpression=function(e,t){return this.model.renameWatchExpression(this.session,this.viewModel.getFocusedStackFrame(),e,t)},t.prototype.clearWatchExpressions=function(e){this.model.clearWatchExpressions(e)},t.prototype.createSession=function(e){var t=this;return void 0===e&&(e=!0),this.textFileService.saveAll().done(null,c.onUnexpectedError),this.clearReplExpressions(),this.pluginService.onReady().then(function(){return t.configurationManager.setConfiguration(t.configurationManager.getConfigurationName())}).then(function(){var i=t.configurationManager.getConfiguration();return i?t.configurationManager.getAdapter()?t.runPreLaunchTask(i).then(function(){return t.doCreateSession(i,e)}):l.Promise.wrapError(new Error("Configured debug type '"+i.type+"' is not supported.")):t.configurationManager.openConfigFile(!1).then(function(e){e&&t.messageService.show(u["default"].Info,n.localize(0,null))})})},t.prototype.doCreateSession=function(e,t){var i=this;return this.session=new p.RawDebugSession(this.messageService,this.telemetryService,e.debugServer,this.configurationManager.getAdapter()),this.registerSessionListeners(),this.session.initialize({adapterID:e.type,linesStartAt1:!0,pathFormat:"path"}).then(function(t){return i.session?(i.setStateAndEmit(h.State.Initializing),"attach"===e.request?i.session.attach(e):i.session.launch(e)):l.Promise.wrapError(new Error(n.localize(1,null)))}).then(function(n){t&&i.viewletService.openViewlet(h.VIEWLET_ID),i.partService.addClass("debugging"),i.contextService.updateOptions("editor",{glyphMargin:!0}),i.inDebugMode.set(!0),i.telemetryService.publicLog("debugSessionStart",{type:e.type,breakpointCount:i.model.getBreakpoints().length,exceptionBreakpoints:i.model.getExceptionBreakpoints()})}).then(void 0,function(t){return i.telemetryService.publicLog("debugMisconfiguration",{type:e?e.type:void 0}),i.session&&i.session.disconnect(),l.Promise.wrapError(c.create(t.message,{actions:[A.CloseAction,i.instantiationService.createInstance(g.ConfigureAction,g.ConfigureAction.ID,g.ConfigureAction.LABEL)]}))})},t.prototype.runPreLaunchTask=function(e){var t=this;return e.preLaunchTask?this.taskService.tasks().then(function(i){var r=i.filter(function(t){return t.name===e.preLaunchTask});if(1!==r.length)return t.messageService.show(u["default"].Warning,n.localize(2,null,e.preLaunchTask)),l.Promise.as(!0);if(t.lastTaskEvent&&t.lastTaskEvent.taskName===e.preLaunchTask)return l.Promise.as(!0);if(t.lastTaskEvent)return l.Promise.wrapError(c.create(n.localize(3,null,t.lastTaskEvent.taskName,e.preLaunchTask)));t.outputService.showOutput("Tasks",!0,!0);var o=t.taskService.run(r[0].id).then(function(e){t.lastTaskEvent=null},function(e){t.lastTaskEvent=null});return r[0].isWatching?l.Promise.as(!0):o}):l.Promise.as(!0)},t.prototype.rawAttach=function(e){if(this.session){if(!this.session.isAttach)return this.session.attach({port:e});this.session.disconnect().done(null,c.onUnexpectedError)}var t=this.configurationManager.getConfiguration();return this.doCreateSession({type:t.type,request:"attach",port:e,sourceMaps:t.sourceMaps,outDir:t.outDir,debugServer:t.debugServer},!0)},t.prototype.restartSession=function(){var e=this;return this.session?this.session.disconnect(!0).then(function(){new l.Promise(function(t){setTimeout(function(){e.createSession(!1).then(function(){return t(!0)})},300)})}):this.createSession(!1)},t.prototype.getActiveSession=function(){return this.session},t.prototype.onSessionEnd=function(){try{this.debugStringEditorInputs=i.disposeAll(this.debugStringEditorInputs)}catch(e){}if(this.session){var t=this.model.getBreakpoints().length>0;this.telemetryService.publicLog("debugSessionStop",{type:this.session.getType(),success:this.session.emittedStopped||!t,sessionLengthInSeconds:this.session.getLengthInSeconds(),breakpointCount:this.model.getBreakpoints().length})}this.session=null,this.partService.removeClass("debugging"),this.editorService.focusEditor(),this.model.clearThreads(!0),this.setFocusedStackFrameAndEvaluate(null),this.setStateAndEmit(h.State.Inactive);var n={};this.model.getBreakpoints().forEach(function(e){return n[e.getId()]={line:e.lineNumber,verified:!1}}),this.model.updateBreakpoints(n),this.inDebugMode.reset()},t.prototype.getModel=function(){return this.model},t.prototype.getViewModel=function(){return this.viewModel},t.prototype.openOrRevealEditor=function(e,t,n,i){for(var o=this,s=this.editorService.getVisibleEditors(),a=0;a<s.length;a++){var c=d.asFileEditorInput(s[a].input);if(c&&c.getResource().toString()===e.uri.toString()){var u=s[a].getControl();return u?(u.revealLineInCenterIfOutsideViewport(t),u.setSelection({startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1}),this.editorService.openEditor(s[a].input,d.TextEditorOptions.create({preserveFocus:n,forceActive:!0}),s[a].position)):l.Promise.as(null)}}return e.inMemory?0!==e.reference&&this.session?this.session.source({sourceReference:e.reference}).then(function(s){var a=o.getDebugStringEditorInput(e,s.body.content,r.guessMimeTypes(e.name)[0]);return o.editorService.openEditor(a,d.TextEditorOptions.create({selection:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1},preserveFocus:n}),i)}):this.sourceIsUnavailable(e,i):this.fileService.resolveFile(e.uri).then(function(){return o.editorService.openEditor({resource:e.uri,options:{selection:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1},preserveFocus:n}},i)},function(t){return o.sourceIsUnavailable(e,i)})},t.prototype.sourceIsUnavailable=function(e,t){this.model.sourceIsUnavailable(e);var n=this.getDebugStringEditorInput(e,"Source is not available.","text/plain");return this.editorService.openEditor(n,d.TextEditorOptions.create({preserveFocus:!0}),t)},t.prototype.revealRepl=function(e){var t=this;void 0===e&&(e=!1);for(var n=this.editorService.getVisibleEditors(),i=0;i<n.length;i++){var r=n[i];if(r.input instanceof m.ReplEditorInput)return e?l.Promise.as(null):this.editorService.focusEditor(r)}var o=b.Position.LEFT,s=n.length-1;return 3===n.length?o=d.asFileEditorInput(n[s].input,!0)?null:b.Position.RIGHT:2===n.length?o=d.asFileEditorInput(n[s].input,!0)?b.Position.RIGHT:b.Position.CENTER:n.length&&(o=d.asFileEditorInput(n[s].input,!0)?b.Position.CENTER:b.Position.LEFT),null===o?l.Promise.as(null):this.editorService.openEditor(m.ReplEditorInput.getInstance(),d.TextEditorOptions.create({preserveFocus:e}),o).then(function(n){var i=t.model.getReplElements();return!e&&i.length>0?n.reveal(i[i.length-1]):void 0})},t.prototype.canSetBreakpointsIn=function(e,t){return this.configurationManager.canSetBreakpointsIn(e,t)},t.prototype.getConfigurationName=function(){return this.configurationManager.getConfigurationName()},t.prototype.setConfiguration=function(e){return this.configurationManager.setConfiguration(e)},t.prototype.openConfigFile=function(e){return this.configurationManager.openConfigFile(e)},t.prototype.loadLaunchConfig=function(){return this.configurationManager.loadLaunchConfig()},t.prototype.getDebugStringEditorInput=function(e,t,n){var i=this.debugStringEditorInputs.filter(function(t){return t.getResource().toString()===e.uri.toString()});if(0===i.length){var r=this.instantiationService.createInstance(m.DebugStringEditorInput,e.name,e.uri,"internal module",t,n,void 0);return this.debugStringEditorInputs.push(r),r}return i[0]},t.prototype.sendAllBreakpoints=function(){var e=this;return l.Promise.join(s.distinct(this.model.getBreakpoints(),function(e){return e.source.uri.toString()}).map(function(t){return e.sendBreakpoints(t.source.uri)}))},t.prototype.sendBreakpoints=function(e){var t=this;if(!this.session)return l.Promise.as(null);var n=s.distinct(this.model.getBreakpoints().filter(function(n){return t.model.areBreakpointsActivated()&&n.enabled&&n.source.uri.toString()===e.toString()}),function(e){return""+e.desiredLineNumber});return this.session.setBreakpoints({source:_.Source.fromUri(e).toRawSource(),lines:n.map(function(e){return e.desiredLineNumber})}).then(function(e){for(var i={},r=0;r<n.length;r++)i[n[r].getId()]=e.body.breakpoints[r];t.model.updateBreakpoints(i)})},t.prototype.sendExceptionBreakpoints=function(){if(!this.session)return l.Promise.as(null);var e=this.model.getExceptionBreakpoints().filter(function(e){return e.enabled});return this.session.setExceptionBreakpoints({filters:e.map(function(e){return e.name})})},t.prototype.onFileChanges=function(e){this.model.removeBreakpoints(this.model.getBreakpoints().filter(function(t){return e.contains(t.source.uri,k.FileChangeType.DELETED)}))},t.prototype.store=function(){this.storageService.store(H,JSON.stringify(this.model.getBreakpoints()),D.StorageScope.WORKSPACE),this.storageService.store(V,this.model.areBreakpointsActivated()?"true":"false",D.StorageScope.WORKSPACE),this.storageService.store(B,JSON.stringify(this.model.getFunctionBreakpoints()),D.StorageScope.WORKSPACE),this.storageService.store(K,JSON.stringify(this.model.getExceptionBreakpoints()),D.StorageScope.WORKSPACE),this.storageService.store(z,this.configurationManager.getConfigurationName(),D.StorageScope.WORKSPACE),this.storageService.store(U,JSON.stringify(this.model.getWatchExpressions()),D.StorageScope.WORKSPACE)},t.prototype.dispose=function(){this.session&&(this.session.disconnect(),this.session=null),this.model.dispose(),this.toDispose=i.disposeAll(this.toDispose)},t=__decorate([__param(0,D.IStorageService),__param(1,L.IWorkbenchEditorService),__param(2,C.ITextFileService),__param(3,S.IViewletService),__param(4,k.IFileService),__param(5,A.IMessageService),__param(6,w.IPartService),__param(7,F.IWindowService),__param(8,R.ITelemetryService),__param(9,T.IWorkspaceContextService),__param(10,N.IKeybindingService),__param(11,x.IEventService),__param(12,M.ILifecycleService),__param(13,I.IInstantiationService),__param(14,O.IPluginService),__param(15,P.IOutputService)],t)}(o.EventEmitter);t.DebugService=j});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/debug/electron-browser/debug.contribution",["require","exports","vs/nls!vs/workbench/parts/debug/electron-browser/debug.contribution","vs/editor/common/editorCommonExtensions","vs/base/common/keyCodes","vs/platform/actions/common/actions","vs/platform/instantiation/common/descriptors","vs/platform/platform","vs/platform/instantiation/common/extensions","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/browser/editorBrowserExtensions","vs/workbench/browser/actionRegistry","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/viewlet","vs/workbench/common/contributions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/browser/debugEditorModelManager","vs/workbench/parts/debug/electron-browser/debugActions","vs/workbench/parts/debug/browser/debugEditorInputs","vs/workbench/parts/debug/browser/replEditor","vs/workbench/parts/debug/browser/debugActionsWidget","vs/workbench/parts/debug/electron-browser/debugService","vs/workbench/parts/debug/browser/debugEditorContribution","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/css!../browser/media/debug.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T){var I=v.IDebugService,k=function(e){function t(t,n,i,r){e.call(this,t,n,v.VIEWLET_ID,i,r)}return __extends(t,e),t.ID=v.VIEWLET_ID,t.LABEL=n.localize(0,null),t=__decorate([__param(2,C.IViewletService),__param(3,T.IWorkbenchEditorService)],t)}(p.ToggleViewletAction);l.EditorBrowserRegistry.registerEditorContribution(w.DebugEditorContribution),i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(y.ToggleBreakpointAction,y.ToggleBreakpointAction.ID,n.localize(1,null),{context:i.ContextKey.EditorTextFocus,primary:r.KeyCode.F9})),i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(y.SelectionToReplAction,y.SelectionToReplAction.ID,n.localize(2,null))),i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(y.SelectionToWatchExpressionsAction,y.SelectionToWatchExpressionsAction.ID,n.localize(3,null))),i.CommonEditorRegistry.registerEditorAction(new i.EditorActionDescriptor(y.RunToCursorAction,y.RunToCursorAction.ID,n.localize(4,null))),a.Registry.as(p.Extensions.Viewlets).registerViewlet(new p.ViewletDescriptor("vs/workbench/parts/debug/browser/debugViewlet","DebugViewlet",v.VIEWLET_ID,n.localize(5,null),"debug",40));var x={primary:r.KeyMod.CtrlCmd|r.KeyMod.Shift|r.KeyCode.KEY_D};a.Registry.as(m.Extensions.Editors).registerEditor(new m.EditorDescriptor(b.Repl.ID,"Repl","vs/workbench/parts/debug/browser/replEditor","Repl"),new s.SyncDescriptor(_.ReplEditorInput));var A=a.Registry.as(h.Extensions.Actionbar);A.registerActionBarContributor(h.Scope.EDITOR,b.ReplEditorActionContributor),a.Registry.as(m.Extensions.Editors).registerEditorInputFactory(_.ReplEditorInput.ID,b.ReplInputFactory);var R=a.Registry.as(d.Extensions.WorkbenchActions);R.registerWorkbenchAction(new o.SyncActionDescriptor(k,k.ID,k.LABEL,x),n.localize(6,null)),a.Registry.as(f.Extensions.Workbench).registerWorkbenchContribution(g.DebugEditorModelManager),a.Registry.as(f.Extensions.Workbench).registerWorkbenchContribution(E.DebugActionsWidget);var D=n.localize(7,null);R.registerWorkbenchAction(new o.SyncActionDescriptor(y.StartDebugAction,y.StartDebugAction.ID,y.StartDebugAction.LABEL,{primary:r.KeyCode.F5},[{key:v.CONTEXT_IN_DEBUG_MODE,operator:u.KeybindingsRegistry.KEYBINDING_CONTEXT_OPERATOR_NOT_EQUAL,operand:!0}]),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.StepOverDebugAction,y.StepOverDebugAction.ID,y.StepOverDebugAction.LABEL,{primary:r.KeyCode.F10},[{key:v.CONTEXT_IN_DEBUG_MODE}]),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.StepIntoDebugAction,y.StepIntoDebugAction.ID,y.StepIntoDebugAction.LABEL,{primary:r.KeyCode.F11},[{key:v.CONTEXT_IN_DEBUG_MODE}],u.KeybindingsRegistry.WEIGHT.workbenchContrib(1)),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.StepOutDebugAction,y.StepOutDebugAction.ID,y.StepOutDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyCode.F11},[{key:v.CONTEXT_IN_DEBUG_MODE}]),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.RestartDebugAction,y.RestartDebugAction.ID,y.RestartDebugAction.LABEL),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.StopDebugAction,y.StopDebugAction.ID,y.StopDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyCode.F5},[{key:v.CONTEXT_IN_DEBUG_MODE}]),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.ContinueAction,y.ContinueAction.ID,y.ContinueAction.LABEL,{primary:r.KeyCode.F5},[{key:v.CONTEXT_IN_DEBUG_MODE}]),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.PauseAction,y.PauseAction.ID,y.PauseAction.LABEL),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.ConfigureAction,y.ConfigureAction.ID,y.ConfigureAction.LABEL),D),R.registerWorkbenchAction(new o.SyncActionDescriptor(y.OpenReplAction,y.OpenReplAction.ID,y.OpenReplAction.LABEL),D),c.registerSingleton(I,S.DebugService)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/execution/electron-browser/terminal.contribution",["require","exports","vs/nls!vs/workbench/parts/execution/electron-browser/terminal.contribution","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/platform","vs/base/common/actions","vs/workbench/browser/actionRegistry","vs/base/common/paths","vs/workbench/browser/actionBarRegistry","vs/base/common/uri","vs/workbench/parts/files/common/files","vs/workbench/services/workspace/common/contextService","vs/workbench/parts/execution/common/execution","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(e){function t(t,n,i,r){e.call(this,t,n),this.terminalService=i,this.contextService=r,this.order=49}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e,this.enabled=!c.isUNC(this.resource.fsPath)},t.prototype.run=function(e){var t=this.contextService.getWorkspace(),n=this.resource?this.resource.fsPath:t&&t.resource.fsPath;return n?(this.terminalService.openTerminal(n),i.Promise.as(null)):i.Promise.as(null)},t.ID="workbench.action.terminal.openNativeConsole",t.Label=o.isWindows?n.localize(0,null):n.localize(1,null),t.ScopedLabel=o.isWindows?n.localize(2,null):n.localize(3,null),t=__decorate([__param(2,p.ITerminalService),__param(3,h.IWorkspaceContextService)],t)}(s.Action);t.OpenConsoleAction=g;var y=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){return!!d.asFileResource(e.element)},t.prototype.getSecondaryActions=function(e){var t=d.asFileResource(e.element),n=t.resource;t.isDirectory||(n=l["default"].file(c.dirname(n.fsPath)));var i=this.instantiationService.createInstance(g,g.ID,g.ScopedLabel);return i.setResource(n),[i]},t=__decorate([__param(0,m.IInstantiationService)],t)}(u.ActionBarContributor),_=r.Registry.as(u.Extensions.Actionbar);_.registerActionBarContributor(u.Scope.VIEWER,y),r.Registry.as(a.Extensions.WorkbenchActions).registerWorkbenchAction(new f.SyncActionDescriptor(g,g.ID,g.Label,{primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_C}))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/node/vsoGalleryService",["require","exports","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/platform/request/common/request","vs/workbench/services/workspace/common/contextService"],function(e,t,n,i,r,o){var s=function(){function e(e,t){this.requestService=e,this.serviceId=i.IGalleryService;var n=t.getConfiguration().env.extensionsGallery;this.extensionsGalleryUrl=n&&n.serviceUrl}return e.prototype.api=function(e){return void 0===e&&(e=""),""+this.extensionsGalleryUrl+e},e.prototype.isEnabled=function(){return!!this.extensionsGalleryUrl},e.prototype.query=function(){var e=this;if(!this.extensionsGalleryUrl)return n.TPromise.wrapError(new Error("No extension gallery service configured."));var t=JSON.stringify({filters:[{criteria:[{filterType:1,value:"vscode"}]}],flags:133}),i={type:"POST",url:this.api("/extensionquery"),data:t,headers:{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Content-Length":t.length}};return this.requestService.makeRequest(i).then(function(e){return JSON.parse(e.responseText).results[0].extensions||[]}).then(function(t){return t.map(function(t){return{name:t.extensionName,displayName:t.displayName||t.extensionName,publisher:t.publisher.publisherName,version:t.versions[0].version,description:t.shortDescription||"",galleryInformation:{galleryApiUrl:e.extensionsGalleryUrl,id:t.extensionId,downloadUrl:t.versions[0].assetUri+"/Microsoft.VisualStudio.Services.VSIXPackage?install=true",publisherId:t.publisher.publisherId,publisherDisplayName:t.publisher.displayName,date:t.versions[0].lastUpdated}}})})},e=__decorate([__param(0,r.IRequestService),__param(1,o.IWorkspaceContextService)],e)}();t.GalleryService=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/feedback/electron-browser/feedback",["require","exports","vs/nls!vs/workbench/parts/feedback/electron-browser/feedback","vs/base/common/platform","vs/base/browser/builder","vs/workbench/parts/feedback/browser/feedback","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/platform/request/common/request","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","os"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(){function e(e,t){this.requestService=e,this.contextService=t;var n=t.getConfiguration().env;n.sendASmile&&(this.serviceUrl=n.sendASmile.submitUrl),this.appName=n.appName,this.appVersion=n.version}return e.prototype.submitFeedback=function(e){var t=JSON.stringify({version:1,user:e.alias,userType:"External",text:e.feedback,source:"Send a smile",sentiment:e.sentiment,tags:[{type:"product",value:this.appName},{type:"product-version",value:this.appVersion}]});return this.requestService.makeRequest({type:"POST",url:this.serviceUrl,data:t,headers:{"Content-Type":"application/json; charset=utf8","Content-Length":t.length}})},e=__decorate([__param(0,c.IRequestService),__param(1,l.IWorkspaceContextService)],e)}(),p=function(e){function t(t,n,i,r){e.call(this,t,n,i),this.contextService=r;var o=r.getConfiguration().env;this.appVersion=o.version,this.requestFeatureLink=o.sendASmile.requestFeatureUrl,this.reportIssueLink=o.sendASmile.reportIssueUrl}return __extends(t,e),t.prototype.renderContents=function(e){var i=this,o=r.$("form.feedback-form").attr({action:"javascript:void(0);",tabIndex:"-1"}).appendTo(e);r.$(e).addClass("monaco-menu-container"),this.feedbackForm=o.getHTMLElement(),r.$("h2.title").text(n.localize(0,null)).appendTo(o),this.invoke(r.$("div.cancel"),function(){i.hide()}).appendTo(o);var s=r.$("div.content").appendTo(o),a=r.$("div").appendTo(s);r.$("span").text(n.localize(1,null)).appendTo(a);var c=r.$("div.feedback-sentiment").appendTo(a);this.smileyInput=r.$("div").addClass("sentiment smile").attr({"aria-checked":"false","aria-label":n.localize(2,null),tabindex:0,role:"checkbox"}),this.invoke(this.smileyInput,function(){i.setSentiment(!0)}).appendTo(c),this.frownyInput=r.$("div").addClass("sentiment frown").attr({"aria-checked":"false","aria-label":n.localize(3,null),tabindex:0,role:"checkbox"}),this.invoke(this.frownyInput,function(){i.setSentiment(!1)}).appendTo(c),1===this.sentiment?this.smileyInput.addClass("checked").attr("aria-checked","true"):this.frownyInput.addClass("checked").attr("aria-checked","true");var u=r.$("div.contactus").appendTo(s);r.$("span").text(n.localize(4,null)).appendTo(u);var l=r.$("div.channels").appendTo(u);r.$("div").append(r.$("a").attr("target","_blank").attr("href",this.getReportIssueLink()).text(n.localize(5,null))).appendTo(l),r.$("div").append(r.$("a").attr("target","_blank").attr("href",this.requestFeatureLink).text(n.localize(6,null))).appendTo(l);var d=r.$("span.char-counter").text("("+t.MAX_FEEDBACK_CHARS+" "+n.localize(7,null)+")");r.$("h3").text(n.localize(8,null)).append(d).appendTo(o),this.feedbackDescriptionInput=r.$("textarea.feedback-description").attr({rows:3,maxlength:t.MAX_FEEDBACK_CHARS,"aria-label":n.localize(9,null)}).text(this.feedback).attr("required","required").on("keyup",function(){d.text("("+(t.MAX_FEEDBACK_CHARS-i.feedbackDescriptionInput.value.length)+" "+n.localize(10,null)+")"),i.feedbackDescriptionInput.value?i.sendButton.removeAttribute("disabled"):i.sendButton.attr("disabled","")}).appendTo(o).domFocus().getHTMLElement();var h=n.localize(11,null);this.feedbackAliasInput=r.$("input.feedback-alias").type("text").text(h).attr("type","email").attr("placeholder",n.localize(12,null)).value(this.alias).attr("aria-label",h).appendTo(o).getHTMLElement();var p=r.$("div.form-buttons").appendTo(o);return this.sendButton=this.invoke(r.$("input.send").type("submit").attr("disabled","").value(n.localize(13,null)).appendTo(p),function(){i.isSendingFeedback||i.onSubmit().then(null,function(){})}),{dispose:function(){i.feedbackForm=null,i.feedbackDescriptionInput=null,i.feedbackAliasInput=null,i.smileyInput=null,i.frownyInput=null}}},t.prototype.getReportIssueLink=function(){var e=this.reportIssueLink,t=e+"&"+this.getReportIssuesQueryString()+"#vscode";return t},t.prototype.getReportIssuesQueryString=function(){var e=Object.create(null);e.version=this.appVersion;var t;switch(i.platform){case i.Platform.Windows:t=3;break;case i.Platform.Mac:t=2;break;case i.Platform.Linux:t=1;break;default:t=0}e.platform=t,e.osversion=d.release(),e.sessionid=this.telemetryService.getSessionId();var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));var o=n.join("&");return o},t.MAX_FEEDBACK_CHARS=140,t=__decorate([__param(2,u.ITelemetryService),__param(3,l.IWorkspaceContextService)],t)}(o.FeedbackDropdown),f=function(){function e(e,t){this.instantiationService=e,this.contextViewService=t}return e.prototype.render=function(e){return this.instantiationService.createInstance(p,e,{contextViewProvider:this.contextViewService,feedbackService:this.instantiationService.createInstance(h)})},e=__decorate([__param(0,a.IInstantiationService),__param(1,s.IContextViewService)],e)}();t.FeedbackStatusbarItem=f}),define("vs/workbench/parts/feedback/electron-browser/feedback.contribution",["require","exports","vs/platform/platform","vs/base/common/flags","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/parts/feedback/electron-browser/feedback"],function(e,t,n,i,r,o){i.enableSendASmile&&n.Registry.as(r.Extensions.Statusbar).registerStatusbarItem(new r.StatusbarItemDescriptor(o.FeedbackStatusbarItem,r.StatusbarAlignment.RIGHT,-100))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/textFileEditorModel",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/base/common/winjs.base","vs/base/common/errors","vs/base/common/uri","vs/base/common/paths","vs/base/common/diagnostics","vs/base/common/types","vs/editor/common/editorCommon","vs/workbench/browser/events","vs/workbench/parts/files/common/files","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditorModel","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/platform/telemetry/common/telemetry"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E){var S,w=function(){function e(e){this.messageService=e}return e.prototype.onSaveError=function(e,t){var i;i=412===r.getHttpStatus(e)?n.localize(0,null,s.basename(t.getResource().fsPath)):n.localize(1,null,s.basename(t.getResource().fsPath),r.toErrorMessage(e,!1)),this.messageService.show(y.Severity.Error,i)},e=__decorate([__param(0,y.IMessageService)],e)}();S||(S=a.register("TextFileEditorModelDiagnostics",function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log(e[1]+" - "+e[0]+" (time: "+e[2].getTime()+" ["+e[2].toUTCString()+"])")})),function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ERROR=4]="ERROR"}(t.State||(t.State={}));var C=t.State,T=function(e){function a(t,n,i,r,o,s,a,c,u,l){if(e.call(this,o,r),this.messageService=i,this.eventService=s,this.contextService=a,this.fileService=c,this.instantiationService=u,this.telemetryService=l,
this.resource=t,"file"!==this.resource.scheme)throw new Error("TextFileEditorModel can only handle file:// resources.");this.preferredEncoding=n,this.textModelChangeListener=null,this.dirty=!1,this.autoSavePromises=[],this.versionId=0,this.lastDirtyTime=0,this.mapPendingSaveToVersionId={},this.updateOptions()}return __extends(a,e),a.prototype.updateOptions=function(){var e=this.contextService.getOptions();e&&c.isNumber(e.autoSaveDelay)?this.autoSaveDelay=e.autoSaveDelay:this.autoSaveDelay=a.DEFAULT_AUTO_SAVE_DELAY,this.autoSaveEnabled=-1!==this.autoSaveDelay},a.setSaveErrorHandler=function(e){a.saveErrorHandler=e},a.prototype.setConflictResolutionMode=function(){S("setConflictResolutionMode() - enabled conflict resolution mode",this.resource,new Date),this.inConflictResolutionMode=!0},a.prototype.isInConflictResolutionMode=function(){return this.inConflictResolutionMode},a.prototype.revert=function(){var e=this;if(!this.isResolved())return i.TPromise.as(null);this.cancelAutoSavePromises();var t=this.cloneStat(this.versionOnDiskStat),n=this.setDirty(!1);return this.load(!0).then(function(){e.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(e.textEditorModel,t,e.versionOnDiskStat))},function(r){return r.fileOperationResult===m.FileOperationResult.FILE_NOT_FOUND?e.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(e.textEditorModel,t,e.versionOnDiskStat)):n(),i.Promise.wrapError(r)})},a.prototype.load=function(e){var t=this;if(S("load() - enter",this.resource,new Date),this.dirty)return S("load() - exit - without loading because model is dirty",this.resource,new Date),i.TPromise.as(this);var n;return e?n=void 0:this.versionOnDiskStat&&(n=this.versionOnDiskStat.etag),this.fileService.resolveContent(this.resource,{acceptTextOnly:!0,etag:n,encoding:this.preferredEncoding}).then(function(e){S("load() - resolved content",t.resource,new Date),t.telemetryService.publicLog("fileGet",{mimeType:e.mime,ext:s.extname(t.resource.fsPath),path:E.anonymize(t.resource.fsPath)});var n={resource:t.resource,name:e.name,mtime:e.mtime,etag:e.etag,mime:e.mime,isDirectory:!1,hasChildren:!1,children:void 0};t.updateVersionOnDiskStat(n);var r=t.contentEncoding;if(t.contentEncoding=e.charset,t.preferredEncoding?t.updatePreferredEncoding(t.contentEncoding):r!==t.contentEncoding&&t.eventService.emit(l.EventType.RESOURCE_ENCODING_CHANGED,new l.ResourceEvent(t.resource)),t.textEditorModel){S("load() - updated text editor model",t.resource,new Date),t.setDirty(!1),t.blockModelContentChange=!0;try{t.updateTextEditorModel(e.value)}finally{t.blockModelContentChange=!1}return i.TPromise.as(t)}return t.createTextEditorModelPromise?(S("load() - join existing text editor model promise",t.resource,new Date),t.createTextEditorModelPromise):(S("load() - created text editor model",t.resource,new Date),t.createTextEditorModelPromise=t.createTextEditorModel(e.value,e.resource).then(function(){return t.createTextEditorModelPromise=null,t.setDirty(!1),t.textModelChangeListener=t.textEditorModel.addListener(u.EventType.ModelContentChanged,function(e){return t.onModelContentChanged(e)}),t},function(e){return t.createTextEditorModelPromise=null,i.Promise.wrapError(e)}),t.createTextEditorModelPromise)},function(e){return e.fileOperationResult===m.FileOperationResult.FILE_NOT_MODIFIED_SINCE?(t.setDirty(!1),i.TPromise.as(t)):i.Promise.wrapError(e)})},a.prototype.getOrCreateMode=function(e,t,n){return e.getOrCreateModeByFilenameOrFirstLine(this.resource.fsPath,n)},a.prototype.onModelContentChanged=function(e){if(S("onModelContentChanged("+e.changeType+") - enter",this.resource,new Date),this.versionId++,S("onModelContentChanged() - new versionId "+this.versionId,this.resource,new Date),!this.blockModelContentChange){if(!this.autoSaveEnabled&&this.textEditorModel.getAlternativeVersionId()===this.bufferSavedVersionId)return S("onModelContentChanged() - model content changed back to last saved version",this.resource,new Date),this.setDirty(!1),void this.emitEvent(d.EventType.FILE_REVERTED,new d.TextFileChangeEvent(this.textEditorModel,this.versionOnDiskStat));S("onModelContentChanged() - model content changed and marked as dirty",this.resource,new Date),this.makeDirty(e),this.autoSaveEnabled&&(this.inConflictResolutionMode?S("makeDirty() - prevented save because we are in conflict resolution mode",this.resource,new Date):this.doAutoSave(this.versionId))}},a.prototype.makeDirty=function(e){var t=this.dirty;if(this.setDirty(!0),this.lastDirtyTime=(new Date).getTime(),!t){var n=this.cloneStat(this.versionOnDiskStat);this.emitEvent(d.EventType.FILE_DIRTY,new d.TextFileChangeEvent(this.textEditorModel,n,n,e))}},a.prototype.doAutoSave=function(e){var t=this;if(S("doAutoSave() - enter for versionId "+e,this.resource,new Date),this.cancelAutoSavePromises(),0===this.autoSaveDelay)return this.doSave(e,!0);var n=i.Promise.timeout(this.autoSaveDelay).then(function(){e===t.versionId&&t.doSave(e,!0)});return this.autoSavePromises.push(n),n},a.prototype.cancelAutoSavePromises=function(){for(;this.autoSavePromises.length;)this.autoSavePromises.pop().cancel()},a.prototype.save=function(e){return this.isResolved()?(S("save() - enter",this.resource,new Date),this.cancelAutoSavePromises(),this.doSave(this.versionId,!1,e)):i.TPromise.as(null)},a.prototype.doSave=function(e,t,n){var r=this;S("doSave("+e+") - enter with versionId "+e,this.resource,new Date);var o=this.mapPendingSaveToVersionId[e];if(o)return S("doSave("+e+") - exit - found a pending save for versionId "+e,this.resource,new Date),o;if(!this.dirty||e!==this.versionId)return S("doSave("+e+") - exit - because not dirty and/or versionId is different (this.isDirty: "+this.dirty+", this.versionId: "+this.versionId+")",this.resource,new Date),i.TPromise.as(null);if(this.isBusySaving()&&(S("doSave("+e+") - exit - because busy saving",this.resource,new Date),this.autoSaveDelay>0))return this.doAutoSave(e);this.autoSaveEnabled||this.textEditorModel.pushStackElement();var a=this.cloneStat(this.versionOnDiskStat);this.blockModelContentChange=!0;try{var c=new d.TextFileChangeEvent(this.textEditorModel,a);c.setAutoSaved(t),this.emitEvent(d.EventType.FILE_SAVING,c)}finally{this.blockModelContentChange=!1}return e=this.versionId,this.inErrorMode=!1,S("doSave("+e+") - before updateContent()",this.resource,new Date),this.mapPendingSaveToVersionId[e]=this.fileService.updateContent(this.versionOnDiskStat.resource,this.getValue(),{overwriteReadonly:n,mtime:this.versionOnDiskStat.mtime,charset:this.getEncoding(),etag:this.versionOnDiskStat.etag}).then(function(t){S("doSave("+e+") - after updateContent()",r.resource,new Date),r.telemetryService.publicLog("filePUT",{mimeType:t.mime,ext:s.extname(r.versionOnDiskStat.resource.fsPath)}),delete r.mapPendingSaveToVersionId[e],e===r.versionId?(S("doSave("+e+") - setting dirty to false because versionId did not change",r.resource,new Date),r.setDirty(!1)):S("doSave("+e+") - not setting dirty to false because versionId did change meanwhile",r.resource,new Date);var n=r.versionOnDiskStat;r.updateVersionOnDiskStat(t);var i=r.cloneStat(n),o=r.cloneStat(r.versionOnDiskStat);r.emitEvent("files.internal:fileChanged",new d.TextFileChangeEvent(r.textEditorModel,i,o)),r.emitEvent(d.EventType.FILE_SAVED,new d.TextFileChangeEvent(r.textEditorModel,i,o))},function(t){S("doSave("+e+") - exit - resulted in a save error: "+t.toString(),r.resource,new Date),delete r.mapPendingSaveToVersionId[e],r.inErrorMode=!0,r.onSaveError(t),r.emitEvent(d.EventType.FILE_SAVE_ERROR,new d.TextFileChangeEvent(r.textEditorModel,a))}),this.mapPendingSaveToVersionId[e]},a.prototype.setDirty=function(e){var t=this,n=this.dirty,i=this.inConflictResolutionMode,r=this.inErrorMode,o=this.bufferSavedVersionId;return e?this.dirty=!0:(this.dirty=!1,this.inConflictResolutionMode=!1,this.inErrorMode=!1,this.textEditorModel&&(this.bufferSavedVersionId=this.textEditorModel.getAlternativeVersionId())),function(){t.dirty=n,t.inConflictResolutionMode=i,t.inErrorMode=r,t.bufferSavedVersionId=o}},a.prototype.updateVersionOnDiskStat=function(e){this.versionOnDiskStat?this.versionOnDiskStat.mtime<=e.mtime&&(this.versionOnDiskStat=e):this.versionOnDiskStat=e},a.prototype.onSaveError=function(e){a.saveErrorHandler||a.setSaveErrorHandler(this.instantiationService.createInstance(w)),a.saveErrorHandler.onSaveError(e,this)},a.prototype.emitEvent=function(e,t){try{this.eventService.emit(e,t)}catch(i){i.friendlyMessage=n.localize(2,null,e),r.onUnexpectedError(i)}},a.prototype.isBusySaving=function(){return!c.isEmptyObject(this.mapPendingSaveToVersionId)},a.prototype.isDirty=function(){return this.dirty},a.prototype.getLastDirtyTime=function(){return this.lastDirtyTime},a.prototype.getLastModifiedTime=function(){return this.versionOnDiskStat?this.versionOnDiskStat.mtime:-1},a.prototype.getState=function(){return this.inConflictResolutionMode?C.CONFLICT:this.inErrorMode?C.ERROR:this.dirty?this.isBusySaving()?C.PENDING_SAVE:this.dirty?C.DIRTY:void 0:C.SAVED},a.prototype.getEncoding=function(){return this.preferredEncoding||this.contentEncoding},a.prototype.setEncoding=function(e,t){if(this.isNewEncoding(e))if(t===h.EncodingMode.Encode)this.updatePreferredEncoding(e),this.isDirty()||(this.versionId++,this.makeDirty()),this.inConflictResolutionMode||this.save().done(null,r.onUnexpectedError);else{if(this.isDirty())return void this.messageService.show(y.Severity.Info,n.localize(3,null));this.updatePreferredEncoding(e),this.load(!0).done(null,r.onUnexpectedError)}},a.prototype.updatePreferredEncoding=function(e){this.isNewEncoding(e)&&(this.preferredEncoding=e,this.eventService.emit(l.EventType.RESOURCE_ENCODING_CHANGED,new l.ResourceEvent(this.resource)))},a.prototype.isNewEncoding=function(e){return this.preferredEncoding===e?!1:this.preferredEncoding||this.contentEncoding!==e?!0:!1},a.prototype.isResolved=function(){return!c.isUndefinedOrNull(this.versionOnDiskStat)},a.prototype.isDisposed=function(){return this.disposed},a.prototype.getResource=function(){return this.resource},a.prototype.dispose=function(){this.disposed=!0,this.inConflictResolutionMode=!1,this.inErrorMode=!1,this.createTextEditorModelPromise=null,this.textModelChangeListener&&(this.textModelChangeListener(),this.textModelChangeListener=null),this.cancelAutoSavePromises(),t.CACHE.remove(this.resource),e.prototype.dispose.call(this)},a.prototype.cloneStat=function(e){return{resource:o["default"].parse(e.resource.toString()),name:e.name,mtime:e.mtime,etag:e.etag,mime:e.mime,isDirectory:e.isDirectory,hasChildren:e.hasChildren,children:e.children}},a.ID="workbench.editors.files.textFileEditorModel",a.DEFAULT_AUTO_SAVE_DELAY=1e3,a=__decorate([__param(2,y.IMessageService),__param(3,_.IModeService),__param(4,b.IModelService),__param(5,v.IEventService),__param(6,f.IWorkspaceContextService),__param(7,m.IFileService),__param(8,g.IInstantiationService),__param(9,E.ITelemetryService)],a)}(p.BaseTextEditorModel);t.TextFileEditorModel=T;var I=function(){function e(){this.mapResourcePathToModel=Object.create(null)}return e.prototype.dispose=function(e){var t=this.get(e);if(t){if(t.isDirty())return;t.dispose()}},e.prototype.get=function(e){return this.mapResourcePathToModel[e.toString()]},e.prototype.getAll=function(e){var t=this;return Object.keys(this.mapResourcePathToModel).filter(function(t){return!e||e.toString()===t}).map(function(e){return t.mapResourcePathToModel[e]})},e.prototype.add=function(e,t){this.mapResourcePathToModel[e.toString()]=t},e.prototype.clear=function(){this.mapResourcePathToModel=Object.create(null)},e.prototype.remove=function(e){delete this.mapResourcePathToModel[e.toString()]},e}();t.TextFileEditorModelCache=I,t.CACHE=new I});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/fileEditorInput",["require","exports","vs/nls!vs/workbench/parts/files/browser/editors/fileEditorInput","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/types","vs/base/common/paths","vs/base/common/mime","vs/base/common/labels","vs/base/common/strings","vs/base/common/assert","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/binaryEditorModel","vs/platform/files/common/files","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/services/workspace/common/contextService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){var y=function(e){function t(t,n,i,r,o){e.call(this),this.instantiationService=r,this.contextService=o,t&&(this.setResource(t),this.setMime(n||a.guessMimeTypes(this.resource.fsPath).join(", ")),this.preferredEncoding=i)}return __extends(t,e),t.prototype.setResource=function(e){if("file"!==e.scheme)throw new Error("FileEditorInput can only handle file:// resources.");this.resource=e,this.name=null,this.description=null,this.verboseDescription=null},t.prototype.getResource=function(){return this.resource},t.prototype.getMime=function(){return this.mime},t.prototype.setMime=function(e){l.ok(e,"Editor input needs mime type"),this.mime=e},t.prototype.getEncoding=function(){var e=m.CACHE.get(this.resource);return e?e.getEncoding():this.preferredEncoding},t.prototype.setEncoding=function(e,t){this.preferredEncoding=e;var n=m.CACHE.get(this.resource);n&&n.setEncoding(e,t)},t.prototype.getId=function(){return f.FILE_EDITOR_INPUT_ID},t.prototype.getName=function(){return this.name||(this.name=s.basename(this.resource.fsPath)),this.name},t.prototype.getDescription=function(e){return e?(this.verboseDescription||(this.verboseDescription=c.getPathLabel(this.resource.fsPath)),this.verboseDescription):(this.description||(this.description=c.getPathLabel(s.dirname(this.resource.fsPath),this.contextService)),this.description)},t.prototype.getStatus=function(){var e=m.CACHE.get(this.resource);if(e){var n=e.getState();switch(n){case m.State.SAVED:return{state:"saved",displayText:t.nlsSavedDisplay,description:t.nlsSavedMeta};case m.State.DIRTY:return{state:"dirty",decoration:this.contextService.isAutoSaveEnabled()?"":"",displayText:t.nlsDirtyDisplay,description:t.nlsDirtyMeta};case m.State.PENDING_SAVE:return{state:"saving",decoration:this.contextService.isAutoSaveEnabled()?"":"",displayText:t.nlsPendingSaveDisplay,description:t.nlsPendingSaveMeta};case m.State.ERROR:return{state:"error",decoration:"",displayText:t.nlsErrorDisplay,description:t.nlsErrorMeta};case m.State.CONFLICT:return{state:"conflict",decoration:"",displayText:t.nlsConflictDisplay,description:t.nlsConflictMeta}}}return null},t.prototype.getPreferredEditorId=function(e){for(var t,n=r.Registry.as(d.Extensions.Editors),i=this.mime.split(","),s=0;s<i.length;s++)for(var a=u.trim(i[s]),c=0;c<e.length;c++)if(t=n.getEditorById(e[c]),o.isFunction(t.getMimeTypes))for(var l=t.getMimeTypes(),h=0;h<l.length;h++){var p=l[h];if(a===p)return t.getId();if(u.endsWith(p,"/*")&&u.startsWith(a,p.substring(0,p.length-1)))return t.getId()}return f.BINARY_FILE_EDITOR_ID},t.prototype.resolve=function(e){var n,r=this,s=t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()];if(o.isUndefinedOrNull(s)?t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()]=[this]:-1===this.indexOfClient()&&t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].push(this),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()])return t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()];var a=m.CACHE.get(this.resource);return a&&!e?n=i.TPromise.as(a):a&&e?(n=a.load(),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()]=n):(n=this.createAndLoadModel(),t.FILE_EDITOR_MODEL_LOADERS[this.resource.toString()]=n),n.then(function(e){return e instanceof m.TextFileEditorModel&&m.CACHE.add(r.resource,e),t.FILE_EDITOR_MODEL_LOADERS[r.resource.toString()]=null,e},function(e){return t.FILE_EDITOR_MODEL_LOADERS[r.resource.toString()]=null,i.Promise.wrapError(e)})},t.prototype.indexOfClient=function(){if(!o.isUndefinedOrNull(t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()]))for(var e=0;e<t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].length;e++){var n=t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()][e];if(n===this)return e}return-1},t.prototype.createAndLoadModel=function(){var e=this,t=r.Registry.as(d.Extensions.Editors).getEditor(this);if(!t)throw new Error("Unable to find an editor in the registry for this input.");var n=this.instantiationService.createInstance(m.TextFileEditorModel,this.resource,this.preferredEncoding);return n.load().then(function(){return n},function(t){if(t.fileOperationResult===p.FileOperationResult.FILE_IS_BINARY){n.dispose();var r=new h.BinaryEditorModel(e.resource,e.getName());return r.load()}return i.Promise.wrapError(t)})},t.prototype.dispose=function(n){var i=m.CACHE.get(this.resource);if(i){var r=this.indexOfClient();if(r>=0){if(t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].splice(r,1),!n&&t.FILE_EDITOR_MODEL_CLIENTS[this.resource.toString()].length>0)return;if(!n)return;m.CACHE.dispose(this.resource)}}e.prototype.dispose.call(this)},t.prototype.matches=function(n){return e.prototype.matches.call(this,n)===!0?!0:n?n instanceof t&&n.resource.toString()===this.resource.toString():!1},t.getAll=function(e){var n=[],i=t.FILE_EDITOR_MODEL_CLIENTS;for(var r in i){var o=i[r];s.isEqualOrParent(r,e.toString())&&n.push.apply(n,o)}return n},t.FILE_EDITOR_MODEL_CLIENTS=Object.create(null),t.FILE_EDITOR_MODEL_LOADERS=Object.create(null),t.nlsSavedDisplay=n.localize(0,null),t.nlsSavedMeta=n.localize(1,null),t.nlsDirtyDisplay=n.localize(2,null),t.nlsDirtyMeta=n.localize(3,null),t.nlsPendingSaveDisplay=n.localize(4,null),t.nlsPendingSaveMeta=n.localize(5,null),t.nlsErrorDisplay=n.localize(6,null),t.nlsErrorMeta=n.localize(7,null),t.nlsConflictDisplay=n.localize(8,null),t.nlsConflictMeta=n.localize(9,null),t=__decorate([__param(3,g.IInstantiationService),__param(4,v.IWorkspaceContextService)],t)}(f.FileEditorInput);t.FileEditorInput=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/fileActions","vs/base/common/platform","vs/base/common/async","vs/base/common/mime","vs/base/common/paths","vs/base/common/uri","vs/base/common/errors","vs/base/common/strings","vs/base/common/events","vs/base/common/labels","vs/base/common/diagnostics","vs/base/common/actions","vs/base/browser/ui/inputbox/inputBox","vs/base/common/lifecycle","vs/workbench/browser/events","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/iframeEditor","vs/workbench/browser/parts/editor/diffEditorInput","vs/workbench/common/editor","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/views/explorerViewModel","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/parts/files/browser/editors/htmlFrameEditorInput","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/editor/common/editor","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/base/common/keyCodes","vs/css!./media/fileactions"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W,H,V){function B(e,t){var n=e.getActiveEditorInput();return e.getVisibleEditors().filter(function(e){if("file"===t.scheme&&n!==e.input)return!1;var i=w.getUntitledOrFileResource(e.input);return i&&i.toString()===t.toString()}).map(function(e){return e.position})}function K(e,t,n){for(var i=C.FileEditorInput.getAll(e),r=n.getEditorHistory(),o=0;o<r.length;o++){var s=r[o];s instanceof C.FileEditorInput&&s.getResource().toString()===e.toString()&&i.push(s)}var a=t.getVisibleEditors();return a.forEach(function(t){var n=t.input;n instanceof C.FileEditorInput&&n.getResource().toString()===e.toString()&&i.push(n)}),i}function U(e){switch(e){case te.ID:return new V.Keybinding(V.KeyMod.CtrlCmd|V.KeyCode.KEY_N);case Y.ID:return new V.Keybinding(r.isMacintosh?V.KeyCode.Enter:V.KeyCode.F2);case Te.ID:return new V.Keybinding(V.KeyMod.CtrlCmd|V.KeyCode.KEY_S);case ce.ID:case ae.ID:return new V.Keybinding(V.KeyCode.Delete);case fe.ID:return new V.Keybinding(V.KeyMod.CtrlCmd|V.KeyCode.KEY_C);case me.ID:return new V.Keybinding(V.KeyMod.CtrlCmd|V.KeyCode.KEY_V);case ge.ID:return r.isMacintosh?new V.Keybinding(V.KeyMod.WinCtrl|V.KeyCode.Enter):new V.Keybinding(V.KeyMod.CtrlCmd|V.KeyCode.Enter)}return null}function z(e,t,n){if(void 0===n&&(n=!1),t=j(t),!t||0===t.length||/^\s+$/.test(t))return i.localize(59,null);if(!n&&e.children&&e.children.some(function(e){return r.isLinux?e.name===t:e.name.toLowerCase()===t.toLowerCase()}))return i.localize(60,null,t);for(var o=0;o<Ve.length;o++)if(t.indexOf(Ve[o])>=0)return i.localize(61,null,t);if(r.isWindows){var s=t.length+e.resource.fsPath.length+1;if(s>255)return i.localize(62,null,t)}return null}function j(e){return e?(e=l.trim(l.trim(e," "),"	"),e=l.rtrim(e,".")):e}var q=y.ITextFileService,G=function(e){function t(t,n,i,r,o,s,a,c){var u=this;e.call(this,t,n),this._contextService=i,this._editorService=r,this._fileService=o,this._messageService=s,this._textFileService=a,this._eventService=c,this.enabled=!1,this.listenerToUnbind=this._eventService.addListener(g.EventType.WORKBENCH_OPTIONS_CHANGED,function(){return u._updateEnablement()})}return __extends(t,e),Object.defineProperty(t.prototype,"contextService",{get:function(){return this._contextService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"messageService",{get:function(){return this._messageService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileService",{get:function(){return this._fileService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventService",{get:function(){return this._eventService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFileService",{get:function(){return this._textFileService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),t.prototype._isEnabled=function(){return!0},t.prototype._updateEnablement=function(){this.enabled=!!(this._contextService&&this._fileService&&this._editorService&&!this._contextService.getOptions().readOnly&&this._isEnabled())},t.prototype.onError=function(e){this._messageService.show(F.Severity.Error,e)},t.prototype.onWarning=function(e){this._messageService.show(F.Severity.Warning,e)},t.prototype.onErrorWithRetry=function(e,t,n){var r=[F.CancelAction,new f.Action(this.id,i.localize(0,null),null,!0,function(){return t()})];n&&r.push(n);var o={actions:r,message:u.toErrorMessage(e,!1)};this._messageService.show(F.Severity.Error,o)},t.prototype.handleDirty=function(){if(this.textFileService.isDirty(this._element.resource)){var e=this.textFileService.confirmSave(this._element.resource);return e===y.ConfirmResult.SAVE?this.textFileService.save(this._element.resource).then(function(){return!1}):e===y.ConfirmResult.DONT_SAVE?this.textFileService.revert(this._element.resource).then(function(){return!1}):n.Promise.as(!0)}return n.Promise.as(!1)},t.prototype.dispose=function(){this.listenerToUnbind(),e.prototype.dispose.call(this)},t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService)],t)}(f.Action);t.BaseFileAction=G;var Y=function(e){function t(n,r,o,s,a,c,u,l,d){e.call(this,t.ID,i.localize(1,null),o,s,a,c,u,l),this.tree=n,this.element=r,this.renameAction=d.createInstance(X,r),this._updateEnablement()}return __extends(t,e),t.prototype.validateFileName=function(e,t){return this.renameAction.validateFileName(this.element.parent,t)},t.prototype.run=function(e){var t=this;if(!e)return n.Promise.wrapError("No context provided to BaseEnableFileRenameAction.");var i=e.viewletState;if(!i)return n.Promise.wrapError("Invalid viewlet state provided to BaseEnableFileRenameAction.");var r=e.stat;return r?(i.setEditable(r,{action:this.renameAction,validator:function(e){var n=t.validateFileName(t.element.parent,e);return n?{content:n,formatContent:!0,type:m.MessageType.ERROR}:null}}),void this.tree.refresh(r,!1).then(function(){t.tree.setHighlight(r);var e=t.tree.addListener(d.EventType.HIGHLIGHT,function(n){n.highlight||(i.clearEditable(r),t.tree.refresh(r).done(null,u.onUnexpectedError),e())})}).done(null,u.onUnexpectedError)):n.Promise.wrapError("Invalid stat provided to BaseEnableFileRenameAction.")},t.ID="workbench.files.action.triggerRename",t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService),__param(8,N.IInstantiationService)],t)}(G);t.TriggerRenameFileAction=Y;var $=function(e){function t(t,n,i,r,o,s,a,c,u,l){e.call(this,t,n,r,o,s,a,c,l),this.progressService=u,this.element=i}return __extends(t,e),t.prototype.run=function(e){var t=this;if(!e)return n.Promise.wrapError("No context provided to BaseRenameFileAction.");var i=e.value;if(!i)return n.Promise.wrapError("No new name provided to BaseRenameFileAction.");i=j(i);var r=j(this.element.name);if(i===r||this.validateFileName(this.element.parent,i))return n.Promise.as(null);var o=this.runAction(i).then(function(e){e&&t.onSuccess(e)},function(e){t.onError(e)});return this.progressService&&this.progressService.showWhile(o,800),o},t.prototype.validateFileName=function(e,t){var n=this.element.name,i=t;return r.isLinux||(n=n.toLowerCase(),i=i.toLowerCase()),j(n)===j(i)?null:z(e,t,!1)},t.prototype.onSuccess=function(e){var t=null;this.element instanceof T.NewStatPlaceholder||(t=this.element.clone()),this.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(t,e))},t=__decorate([__param(3,H.IWorkspaceContextService),__param(4,A.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,F.IMessageService),__param(7,q),__param(8,W.IProgressService),__param(9,P.IEventService)],t)}(G);t.BaseRenameAction=$;var X=function(e){function t(n,r,o,s,a,c,u,l){e.call(this,t.ID,i.localize(2,null),n,r,o,s,a,c,u,l),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.handleDirty().then(function(r){return r?n.Promise.as(null):t.textFileService.isDirty(t.element.resource)?(t.onWarning(i.localize(3,null,h.getPathLabel(t.element.resource))),n.Promise.as(null)):t.fileService.rename(t.element.resource,e).then(null,function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})})},t.ID="workbench.files.action.renameFile",t=__decorate([__param(1,H.IWorkspaceContextService),__param(2,A.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,F.IMessageService),__param(5,q),__param(6,W.IProgressService),__param(7,P.IEventService)],t)}($);t.RenameFileAction=X;var Q=function(e){function t(t,n,i,r,o,s,a,c,u,l,d,h){e.call(this,t,n,a,c,u,l,d,h),s&&(this.presetFolder=s.isDirectory?s:s.parent),this.tree=i,this.isFile=r,this.renameAction=o}return __extends(t,e),t.prototype.run=function(e){var t=this;if(!e)return n.Promise.wrapError("No context provided to BaseNewAction.");var i=e.viewletState;if(!i)return n.Promise.wrapError("Invalid viewlet state provided to BaseNewAction.");var r=this.presetFolder;if(!r){var o=this.tree.getFocus();r=o?o.isDirectory?o:o.parent:this.tree.getInput()}return r?this.tree.reveal(r,.5).then(function(){return t.tree.expand(r).then(function(){var e=T.NewStatPlaceholder.addNewStatPlaceholder(r,!t.isFile);return t.renameAction.element=e,i.setEditable(e,{action:t.renameAction,validator:function(e){var n=t.renameAction.validateFileName(r,e);return n?{content:n,formatContent:!0,type:m.MessageType.ERROR}:null}}),t.tree.refresh(r).then(function(){return t.tree.expand(r).then(function(){return t.tree.reveal(e,.5).then(function(){t.tree.setHighlight(e);var n=t.tree.addListener(d.EventType.HIGHLIGHT,function(i){i.highlight||(e.destroy(),t.tree.refresh(r).done(null,u.onUnexpectedError),n())})})})})})}):n.Promise.wrapError("Invalid parent folder to create.")},t=__decorate([__param(6,H.IWorkspaceContextService),__param(7,A.IWorkbenchEditorService),__param(8,_.IFileService),__param(9,F.IMessageService),__param(10,q),__param(11,P.IEventService)],t)}(G);t.BaseNewAction=Q;var Z=function(e){function t(t,n,r,o,s,a,c,u,l){e.call(this,"workbench.action.files.newFile",i.localize(4,null),t,!0,l.createInstance(re,n),null,r,o,s,a,c,u),this["class"]="explorer-action new-file",this._updateEnablement()}return __extends(t,e),t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService),__param(8,N.IInstantiationService)],t)}(Q);t.NewFileAction=Z;var J=function(e){function t(t,n,r,o,s,a,c,u,l){e.call(this,"workbench.action.files.newFolder",i.localize(5,null),t,!1,l.createInstance(oe,n),null,r,o,s,a,c,u),this["class"]="explorer-action new-folder",this._updateEnablement()}return __extends(t,e),t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService),__param(8,N.IInstantiationService)],t)}(Q);t.NewFolderAction=J;var ee=function(e){function t(t,n,i,r){e.call(this,t,n),this.viewletService=i,this.instantiationService=r}return __extends(t,e),t.prototype.run=function(){var e=this;return this.viewletService.openViewlet(y.VIEWLET_ID,!0).then(function(t){return n.Promise.timeout(100).then(function(){t.focus();var n=t,i=n.getExplorerView();i.isExpanded()||i.expand();var r=e.toDispose=e.instantiationService.createInstance(e.getAction(),i.getViewer(),null);return n.getActionRunner().run(r)})})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.toDispose&&(this.toDispose.dispose(),this.toDispose=null)},t=__decorate([__param(2,D.IViewletService),__param(3,N.IInstantiationService)],t)}(f.Action);t.BaseGlobalNewAction=ee;var te=function(e){function t(t,n,i,r,o,s){e.call(this,t,n),this.storageService=i,this.editorService=r,this.textFileService=o,this.untitledEditorService=s;
}return __extends(t,e),t.prototype.run=function(){var e=this.untitledEditorService.createOrGet();return this.textFileService.getWorkingFilesModel().addEntry(e.getResource()),this.editorService.openEditor(e)},t.ID="workbench.action.files.newUntitledFile",t.LABEL=i.localize(6,null),t=__decorate([__param(2,M.IStorageService),__param(3,A.IWorkbenchEditorService),__param(4,q),__param(5,x.IUntitledEditorService)],t)}(f.Action);t.GlobalNewFileAction=te;var ne=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getAction=function(){return J},t.ID="workbench.action.files.newFolder",t.LABEL=i.localize(7,null),t}(ee);t.GlobalNewFolderAction=ne;var ie=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.validateFileName=function(t,n){return this.element instanceof T.NewStatPlaceholder?z(t,n,!1):e.prototype.validateFileName.call(this,t,n)},t}($);t.BaseCreateAction=ie;var re=function(e){function t(n,i,r,o,s,a,c,u){e.call(this,t.ID,t.LABEL,n,i,r,o,s,a,c,u),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.fileService.createFile(c["default"].file(a.join(this.element.parent.resource.fsPath,e))).then(function(e){return t.textFileService.getWorkingFilesModel().addEntry(e.resource),e},function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})},t.ID="workbench.files.action.createFileFromExplorer",t.LABEL=i.localize(8,null),t=__decorate([__param(1,H.IWorkspaceContextService),__param(2,A.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,F.IMessageService),__param(5,q),__param(6,W.IProgressService),__param(7,P.IEventService)],t)}(ie);t.CreateFileAction=re;var oe=function(e){function t(n,i,r,o,s,a,c,u){e.call(this,t.ID,t.LABEL,null,i,r,o,s,a,c,u),this._updateEnablement()}return __extends(t,e),t.prototype.runAction=function(e){var t=this;return this.fileService.createFolder(c["default"].file(a.join(this.element.parent.resource.fsPath,e))).then(null,function(n){t.onErrorWithRetry(n,function(){return t.runAction(e)})})},t.ID="workbench.files.action.createFolderFromExplorer",t.LABEL=i.localize(9,null),t=__decorate([__param(1,H.IWorkspaceContextService),__param(2,A.IWorkbenchEditorService),__param(3,_.IFileService),__param(4,F.IMessageService),__param(5,q),__param(6,W.IProgressService),__param(7,P.IEventService)],t)}(ie);t.CreateFolderAction=oe;var se=function(e){function t(t,n,i,r,o,s,c,u,l,d,h){e.call(this,t,n,s,c,u,l,d,h),this.tree=i,this.element=r,this.useTrash=o&&!a.isUNC(r.resource.fsPath),this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){var e=this;this.tree&&this.tree.clearHighlight();var t;return t=this.useTrash?{message:this.element.isDirectory?i.localize(10,null,this.element.name):i.localize(11,null,this.element.name),detail:r.isWindows?i.localize(12,null):i.localize(13,null),primaryButton:r.isWindows?i.localize(14,null):i.localize(15,null)}:{message:this.element.isDirectory?i.localize(16,null,this.element.name):i.localize(17,null,this.element.name),detail:i.localize(18,null),primaryButton:i.localize(19,null)},this.messageService.confirm(t)?this.handleDirty().then(function(t){if(t)return n.Promise.as(null);if(e.textFileService.isDirty(e.element.resource))return e.onWarning(i.localize(20,null,h.getPathLabel(e.element.resource))),n.Promise.as(null);e.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(e.element.clone(),null));var r=e.fileService.del(e.element.resource,e.useTrash).then(function(){e.element.parent&&e.tree.setFocus(e.element.parent)},function(t){var n;e.useTrash&&(n=new f.Action("permanentDelete",i.localize(21,null),null,!0,function(){return e.useTrash=!1,e.run()})),e.onErrorWithRetry(t,function(){return e.run()},n);var r=new y.LocalFileChangeEvent(new T.FileStat(e.contextService.getWorkspace().resource,!0,!0),new T.FileStat(e.contextService.getWorkspace().resource,!0,!0));e.eventService.emit("files.internal:fileChanged",r),e.tree.DOMFocus()});return r}):n.Promise.as(null)},t=__decorate([__param(5,H.IWorkspaceContextService),__param(6,A.IWorkbenchEditorService),__param(7,_.IFileService),__param(8,F.IMessageService),__param(9,q),__param(10,P.IEventService)],t)}(G);t.BaseDeleteFileAction=se;var ae=function(e){function t(n,r,o,s,a,c,u,l){e.call(this,t.ID,i.localize(22,null),n,r,!0,o,s,a,c,u,l)}return __extends(t,e),t.ID="workbench.files.action.moveFileToTrash",t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService)],t)}(se);t.MoveFileToTrashAction=ae;var ce=function(e){function t(n,r,o,s,a,c,u,l){e.call(this,t.ID,i.localize(23,null),n,r,!1,o,s,a,c,u,l)}return __extends(t,e),t.ID="workbench.files.action.deleteFile",t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService)],t)}(se);t.DeleteFileAction=ce;var ue=function(e){function t(n,r,o,s,a,c,u,l,d,h){e.call(this,t.ID,i.localize(24,null),s,a,c,u,l,d),this.progressService=h,this.tree=n,this.element=r,o&&(this["class"]=o),this._updateEnablement()}return __extends(t,e),t.prototype.getViewer=function(){return this.tree},t.prototype.run=function(e){var t,s=this,a=n.Promise.as(null).then(function(){var n=e.input;if(n.files&&n.files.length>0){var a;a=s.element?s.element:s.tree.getFocus()||s.tree.getInput(),a.isDirectory||(a=a.parent);for(var u=[],l=0;l<n.files.length;l++){var d=n.files[l];u.push(d)}return s.fileService.resolveFile(a.resource).then(function(n){var l={};n.children.forEach(function(e){l[r.isLinux?e.name:e.name.toLowerCase()]=e});var d=!0;if(u.some(function(e){return!!l[r.isLinux?e.name:e.name.toLowerCase()]})){var h={message:i.localize(25,null),detail:i.localize(26,null),primaryButton:i.localize(27,null)};d=s.messageService.confirm(h)}if(d){u.length>1&&s.progressService&&(t=s.progressService.show(u.length));var p=[];return u.forEach(function(n){p.push(function(){return s.fileService.importFile(c["default"].file(n.path),a.resource).then(function(i){if(t&&t.worked(1),i.stat){var o=l[r.isLinux?n.name:n.name.toLowerCase()];o&&s.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(o,null)),s.eventService.emit("files.internal:fileChanged",new le(i.stat,i.isNew,e.event))}},function(e){s.messageService.show(F.Severity.Error,e)})})}),o.sequence(p)}})}});return this.progressService&&!t&&this.progressService.showWhile(a,800),a.then(function(){s.tree.clearHighlight()},function(e){s.onError(e),s.tree.clearHighlight()})},t.ID="workbench.files.action.importFile",t=__decorate([__param(3,H.IWorkspaceContextService),__param(4,A.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,F.IMessageService),__param(7,q),__param(8,P.IEventService),__param(9,W.IProgressService)],t)}(G);t.ImportFileAction=ue;var le=function(e){function t(t,n,i){e.call(this,null,t,i),this.isNew=n}return __extends(t,e),t.prototype.gotAdded=function(){return this.isNew},t.prototype.gotMoved=function(){return!1},t.prototype.gotUpdated=function(){return!this.isNew},t.prototype.gotDeleted=function(){return!1},t}(y.LocalFileChangeEvent);t.FileImportedEvent=le;var de=function(e){function t(t,n,r,o){e.call(this,"workbench.files.action.previewHTMLFromExplorer",i.localize(28,null)),this.editorService=n,this.instantiationService=r,this.textFileService=o,this.element=t,this.enabled=!0}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.instantiationService.createInstance(k.HTMLFrameEditorInput,this.element.resource),i=n.Promise.as(null);return this.textFileService.isDirty(this.element.resource)&&(i=this.textFileService.save(this.element.resource)),i.then(function(){return e.editorService.openEditor(t)})},t=__decorate([__param(1,A.IWorkbenchEditorService),__param(2,N.IInstantiationService),__param(3,q)],t)}(f.Action);t.PreviewHTMLAction=de;var he=function(e){function t(t,n,r){e.call(this,"workbench.files.action.previewHTMLFromEditor",i.localize(29,null)),this.editorService=t,this.instantiationService=n,this.textFileService=r,this["class"]="file-editor-action action-open-preview"}return __extends(t,e),t.prototype.run=function(e){var t=this,i=this.input,r=!(!e||!e.ctrlKey&&!e.metaKey),o=this.instantiationService.createInstance(k.HTMLFrameEditorInput,i.getResource()),s=n.Promise.as(null);return this.textFileService.isDirty(i.getResource())&&(s=this.textFileService.save(i.getResource())),s.then(function(){return t.editorService.openEditor(o,null,r)})},t=__decorate([__param(0,A.IWorkbenchEditorService),__param(1,N.IInstantiationService),__param(2,q)],t)}(b.EditorInputAction);t.PreviewHTMLEditorInputAction=he;var pe,fe=function(e){function t(n,r,o,s,a,c,u,l){e.call(this,t.ID,i.localize(30,null),o,s,a,c,u,l),this.tree=n,this.element=r,this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){return pe=this.element,this.tree&&this.tree.clearHighlight(),this.tree.DOMFocus(),n.Promise.as(null)},t.ID="workbench.files.action.copyFile",t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService)],t)}(G);t.CopyFileAction=fe;var me=function(e){function t(n,r,o,s,a,c,u,l,d){e.call(this,t.ID,i.localize(31,null),o,s,a,c,u,l),this.instantiationService=d,this.tree=n,this.element=r,this._updateEnablement()}return __extends(t,e),t.prototype._isEnabled=function(){if(!pe)return!1;var e=this.tree.getInput(),t=e.find(pe.resource);return t?this.element.resource.toString()!==pe.resource.toString()&&a.isEqualOrParent(this.element.resource.fsPath,pe.resource.fsPath)?!1:!0:(pe=null,!1)},t.prototype.run=function(){var e,t=this;e=this.element.resource.toString()===pe.resource.toString()?this.element.parent:this.element.isDirectory?this.element:this.element.parent;var n=this.instantiationService.createInstance(ve,this.tree,pe,e);return n.run().then(function(){t.tree.DOMFocus()})},t.ID="workbench.files.action.pasteFile",t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,A.IWorkbenchEditorService),__param(4,_.IFileService),__param(5,F.IMessageService),__param(6,q),__param(7,P.IEventService),__param(8,N.IInstantiationService)],t)}(G);t.PasteFileAction=me;var ve=function(e){function t(t,n,r,o,s,a,c,u,l,d){e.call(this,"workbench.files.action.duplicateFile",i.localize(32,null),o,s,a,c,u,l),this.progressService=d,this.tree=t,this.element=n,this.target=r&&r.isDirectory?r:n.parent,this._updateEnablement()}return __extends(t,e),t.prototype.run=function(){var e=this;this.tree&&this.tree.clearHighlight();var t=this.fileService.copyFile(this.element.resource,this.findTarget()).then(function(t){e.eventService.emit("files.internal:fileChanged",new y.LocalFileChangeEvent(null,t))},function(t){e.onError(t)});return this.progressService&&this.progressService.showWhile(t,800),t},t.prototype.onError=function(e){this.messageService.show(F.Severity.Error,e)},t.prototype.findTarget=function(){for(var e=this.tree.getInput(),t=this.element.name,n=c["default"].file(a.join(this.target.resource.fsPath,t));;){if(!e.find(n))break;t=this.toCopyName(t,this.element.isDirectory),n=c["default"].file(a.join(this.target.resource.fsPath,t))}return n},t.prototype.toCopyName=function(e,t){if(!t&&e.match(/(\d+)(\..*)$/))return e.replace(/(\d+)(\..*)$/,function(e,t,n){return parseInt(t)+1+n});var n=e.lastIndexOf(".");return!t&&n>=0?l.format("{0}.1{1}",e.substr(0,n),e.substr(n)):t&&e.match(/(\d+)$/)?e.replace(/(\d+)$/,function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return String(parseInt(t[0])+1)}):l.format("{0}.1",e)},t=__decorate([__param(3,H.IWorkspaceContextService),__param(4,A.IWorkbenchEditorService),__param(5,_.IFileService),__param(6,F.IMessageService),__param(7,q),__param(8,P.IEventService),__param(9,W.IProgressService)],t)}(G);t.DuplicateFileAction=ve;var ge=function(e){function t(n,i,r,o){e.call(this,t.ID,t.LABEL),this.editorService=o,this.tree=n,this.preserveFocus=r,this.resource=i,this.updateEnablement()}return __extends(t,e),t.prototype.updateEnablement=function(){var e=this.editorService.getActiveEditor();this.enabled=!e||e.position!==O.Position.RIGHT},t.prototype.run=function(){return this.tree.clearHighlight(),this.editorService.openEditor({resource:this.resource,options:{preserveFocus:this.preserveFocus}},!0)},t.ID="workbench.files.action.openToSide",t.LABEL=i.localize(33,null),t=__decorate([__param(3,A.IWorkbenchEditorService)],t)}(f.Action);t.OpenToSideAction=ge;var ye,_e=function(e){function t(t,n,r){e.call(this,"workbench.files.action.selectForCompare",i.localize(34,null)),this.tree=n,this.resource=t,this.enabled=!0}return __extends(t,e),t.prototype.run=function(){return ye=this.resource,this.tree&&(this.tree.clearHighlight(),this.tree.DOMFocus()),n.Promise.as(null)},t=__decorate([__param(2,N.INullService)],t)}(f.Action);t.SelectResourceForCompareAction=_e;var be=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n),this.quickOpenService=i,this.instantiationService=r,this.editorService=o,this.messageService=s,this.eventService=a}return __extends(t,e),t.prototype.run=function(){var e=this,t=w.asFileEditorInput(this.editorService.getActiveEditorInput());if(t){ye=t.getResource();var r=this.eventService.addListener(g.EventType.EDITOR_INPUT_OPENING,function(t){r();var n=w.asFileEditorInput(t.editorInput);if(n){var o=e.instantiationService.createInstance(Ee,n.getResource(),null);o._isEnabled()?(t.prevent(),o.run().done(function(){return o.dispose()})):e.messageService.show(F.Severity.Info,i.localize(36,null,a.basename(ye.fsPath)))}});this.quickOpenService.show().then(function(){r()})}else this.messageService.show(F.Severity.Info,i.localize(37,null));return n.Promise.as(!0)},t.ID="workbench.files.action.compareFileWith",t.LABEL=i.localize(35,null),t=__decorate([__param(2,R.IQuickOpenService),__param(3,N.IInstantiationService),__param(4,A.IWorkbenchEditorService),__param(5,F.IMessageService),__param(6,P.IEventService)],t)}(f.Action);t.GlobalCompareResourcesAction=be;var Ee=function(e){function t(n,i,r,o,s){e.call(this,"workbench.files.action.compareFiles",t.computeLabel()),this.contextService=r,this.instantiationService=o,this.editorService=s,this.tree=i,this.resource=n}return __extends(t,e),t.computeLabel=function(){return ye?i.localize(38,null,a.basename(ye.fsPath)):i.localize(39,null)},t.prototype.getLabel=function(){return t.computeLabel()},t.prototype._isEnabled=function(){if(!ye)return!1;if(this.tree){var e=this.tree.getInput();if(e instanceof T.FileStat){var t=e.find(ye);if(!t)return ye=null,!1}}if(this.resource.toString()===ye.toString())return!1;var n=s.guessMimeTypes(this.resource.fsPath).join(", "),i=s.guessMimeTypes(ye.fsPath).join(", ");if(n===i)return!0;var r=s.isBinaryMime(n),o=s.isBinaryMime(i);return r!==o?!1:!0},t.prototype.run=function(){this.tree&&this.tree.clearHighlight();var e=this.instantiationService.createInstance(C.FileEditorInput,ye,void 0,void 0),t=this.instantiationService.createInstance(C.FileEditorInput,this.resource,void 0,void 0),n=h.getPathLabel(ye.fsPath,this.contextService),r=h.getPathLabel(this.resource.fsPath,this.contextService);return this.editorService.openEditor(new S.DiffEditorInput(i.localize(40,null,n,r),null,e,t))},t=__decorate([__param(2,H.IWorkspaceContextService),__param(3,N.IInstantiationService),__param(4,A.IWorkbenchEditorService)],t)}(f.Action);t.CompareResourcesAction=Ee;var Se=function(e){function t(t,r,o){e.call(this,"workbench.files.action.refreshExplorer",i.localize(41,null),r,!0,function(e){return t.getViewer().getHighlight()?n.Promise.as(null):t.refresh(!0,!0,!0)})}return __extends(t,e),t=__decorate([__param(2,N.INullService)],t)}(f.Action);t.RefreshViewExplorerAction=Se;var we=function(e){function t(t,n,i){e.call(this,t,n),this.messageService=i}return __extends(t,e),t.prototype.run=function(){var e=this;return this.doRun().then(function(){return!0},function(t){e.messageService.show(F.Severity.Error,u.toErrorMessage(t,!1))})},t}(f.Action);t.BaseActionWithErrorReporting=we;var Ce=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n,a),this.editorService=i,this.textFileService=r,this.untitledEditorService=o,this.instantiationService=s,this.enabled=!0}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e},t.prototype.doRun=function(){var e,t=this;if(e=this.resource?this.resource:w.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0)){if(this.isSaveAs()||"untitled"===e.scheme){var i,r=B(this.editorService,e);if("untitled"===e.scheme){var o=this.untitledEditorService.get(e).getMime();s.isUnspecific(o)||(i=[o,s.MIME_TEXT].join(", "))}var a;if("untitled"===e.scheme)a=this.untitledEditorService.get(e).getEncoding();else if("file"===e.scheme){var u=I.CACHE.get(e);a=u&&u.getEncoding()}var l;return l=!this.isSaveAs()&&"untitled"===e.scheme&&this.untitledEditorService.hasAssociatedFilePath(e)?this.textFileService.save(e).then(function(t){return t?c["default"].file(e.fsPath):null}):this.textFileService.saveAs(e),l.then(function(o){if(o){var s=n.Promise.as(null);if(o.toString()!==e.toString()&&r.length){var c=t.instantiationService.createInstance(C.FileEditorInput,o,i,a);s=t.editorService.openEditor(c,null,r[0]).then(function(){return r.length>1?t.editorService.openEditor(c,null,r[1]).then(function(){return r.length>2?t.editorService.openEditor(c,null,r[2]):void 0}):void 0})}return s}})}return this.textFileService.save(e)}return n.Promise.as(!1)},t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q),__param(4,x.IUntitledEditorService),__param(5,N.IInstantiationService),__param(6,F.IMessageService)],t)}(we);t.BaseSaveFileAction=Ce;var Te=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.isSaveAs=function(){return!1},t.ID="workbench.action.files.save",t.LABEL=i.localize(42,null),t}(Ce);t.SaveFileAction=Te;var Ie=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.isSaveAs=function(){return!0},t.ID="workbench.action.files.saveAs",t.LABEL="Save As...",t}(Ce);t.SaveFileAsAction=Ie;var ke=function(e){function t(t,n,i,r,o,s,a,c){e.call(this,t,n,c),this.editorService=i,this.textFileService=r,this.untitledEditorService=o,this.instantiationService=s,this.eventService=a,this.toDispose=[],this.lastIsDirty=this.textFileService.isDirty(),this.enabled=this.lastIsDirty,this.registerListeners()}return __extends(t,e),t.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_DIRTY,function(t){return e.updateEnablement(!0)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_SAVED,function(t){return e.updateEnablement(!1)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_REVERTED,function(t){return e.updateEnablement(!1)})),this.toDispose.push(this.eventService.addListener2(y.EventType.FILE_SAVE_ERROR,function(t){return e.updateEnablement(!0)})),this.includeUntitled()&&(this.toDispose.push(this.eventService.addListener2(g.EventType.UNTITLED_FILE_DIRTY,function(){return e.updateEnablement(!0)})),this.toDispose.push(this.eventService.addListener2(g.EventType.UNTITLED_FILE_DELETED,function(){return e.updateEnablement(!1)})))},t.prototype.updateEnablement=function(e){this.lastIsDirty!==e&&(this.enabled=this.textFileService.isDirty(),this.lastIsDirty=this.enabled)},t.prototype.doRun=function(){var e=this,t=Object.create(null);return this.textFileService.getDirty().filter(function(e){return"untitled"===e.scheme}).map(function(t){return e.untitledEditorService.get(t)}).filter(function(e){return!!e}).forEach(function(e){return t[e.getResource().toString()]={mime:e.getMime(),encoding:e.getEncoding()}}),this.textFileService.saveAll(this.includeUntitled()).then(function(i){if(e.includeUntitled()){var r=i.results.filter(function(e){return"untitled"===e.source.scheme}),o=[];r.forEach(function(n){if(n.success){var i,r=B(e.editorService,n.source),a=t[n.source.toString()]&&t[n.source.toString()].mime;s.isUnspecific(a)||(i=[a,s.MIME_TEXT].join(", "));var c=t[n.source.toString()]&&t[n.source.toString()].encoding,u=e.instantiationService.createInstance(C.FileEditorInput,n.target,i,c),l=new w.EditorOptions;l.preserveFocus=!0,r.forEach(function(t){o.push(function(){return e.editorService.openEditor(u,l,t)})})}});var a=n.Promise.as(null);return o.length&&(a=o[0]().then(function(){return o.length>1?o[1]().then(function(){return o.length>2?o[2]():void 0}):void 0})),a}})},t.prototype.dispose=function(){this.toDispose=v.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q),__param(4,x.IUntitledEditorService),__param(5,N.IInstantiationService),__param(6,P.IEventService),__param(7,F.IMessageService)],t)}(we);t.BaseSaveAllAction=ke;var xe=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"class",{get:function(){return"explorer-action save-all"},enumerable:!0,configurable:!0}),t.prototype.includeUntitled=function(){return!0},t.ID="workbench.action.files.saveAll",t.LABEL=i.localize(43,null),t}(ke);t.SaveAllAction=xe;var Ae=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.includeUntitled=function(){return!1},t.ID="workbench.action.files.saveFiles",t.LABEL=i.localize(44,null),t}(ke);t.SaveFilesAction=Ae;var Re=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.textFileService=r,this.enabled=!0}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e},t.prototype.run=function(){var e;if(this.resource)e=this.resource;else{var t=w.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);t&&(e=t.getResource())}return e&&"untitled"!==e.scheme?this.textFileService.revert(e,!0):n.Promise.as(!0)},t.ID="workbench.action.files.revert",t.LABEL=i.localize(45,null),t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q)],t)}(f.Action);t.RevertFileAction=Re;var De=function(e){function t(t,n){e.call(this,"workbench.files.action.openDerivedResourceFromEditor",i.localize(46,null),"derived-frame-editor-action view-source"),this.editorService=t,this.contextService=n}return __extends(t,e),t.prototype.run=function(e){var t=this.input,n=!(!e||!e.ctrlKey&&!e.metaKey);return this.editorService.openEditor({resource:t.getResource()},n)},t=__decorate([__param(0,A.IWorkbenchEditorService),__param(1,H.IWorkspaceContextService)],t)}(b.EditorInputAction);t.ViewDerivedSourceEditorInputAction=De;var Le=function(e){function t(t){e.call(this,"workbench.files.action.refreshDerivedFrameEditor",i.localize(47,null),"derived-frame-editor-action refresh"),this.editorService=t}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditor();return t instanceof E.IFrameEditor&&t.reload(!0),n.Promise.as(null)},t=__decorate([__param(0,A.IWorkbenchEditorService)],t)}(b.EditorInputAction);t.RefreshDerivedFrameEditorInputAction=Le;var Me=function(e){function t(t,n,i,r,o,s){e.call(this,"workbench.files.action.openResourcesAction"),this.partService=n,this.editorService=i,this.viewletService=r,this.textFileService=o,this.contextService=s,this.filesToOpen=t}return __extends(t,e),t.prototype.run=function(){var e=this;return this.partService.joinCreation().then(function(){var t=n.Promise.as(null);return e.partService.isSideBarHidden()||(t=e.viewletService.openViewlet(y.VIEWLET_ID,!1)),t.then(function(){return e.filesToOpen.forEach(function(t){var n=t.resource,i=e.contextService.getWorkspace();i&&a.isEqualOrParent(n.fsPath,i.resource.fsPath)||e.textFileService.getWorkingFilesModel().addEntry(n)}),1===e.filesToOpen.length?e.editorService.openEditor(e.filesToOpen[0]):e.editorService.setEditors(e.filesToOpen)})})},t=__decorate([__param(1,L.IPartService),__param(2,A.IWorkbenchEditorService),__param(3,D.IViewletService),__param(4,q),__param(5,H.IWorkspaceContextService)],t)}(f.Action);t.OpenResourcesAction=Me;var Oe=function(e){function t(n,r,o,s,a,c,u){e.call(this,t.ID,r?i.localize(48,null):i.localize(49,null),r?r.dirty?"action-close-dirty-file":"action-close-file":"action-close-all-files"),this.untitledEditorService=o,this.editorService=s,this.textFileService=a,this.messageService=c,this.quickOpenService=u,this.model=n,this.element=r,this.model&&(this.enabled=this.model.count()>0,this.model.onModelChange.add(this.onModelChange,this))}return __extends(t,e),t.prototype.onModelChange=function(e){this.enabled=this.model.count()>0},t.prototype.run=function(){var e=this,t=this.model.getEntries().length,i=n.Promise.as(null);if(this.textFileService.isDirty(this.element?this.element.resource:void 0)){var r=this.textFileService.confirmSave(this.element?this.element.resource:void 0);switch(r){case y.ConfirmResult.SAVE:i=this.element?this.textFileService.saveAll([this.element.resource]):this.textFileService.saveAll(!0);break;case y.ConfirmResult.DONT_SAVE:i=this.element?this.textFileService.revertAll([this.element.resource]):this.textFileService.revertAll();break;case y.ConfirmResult.CANCEL:return n.Promise.as(null)}}return i.then(function(n){var i=[];if(e.element?i.push(e.element.resource):i=e.model.getEntries().map(function(e){return e.resource}),n){var r=n.results.filter(function(e){return!e.success}).map(function(e){return e.source.toString()});i=i.filter(function(e){return r.indexOf(e.toString())<0})}i.length===t?e.model.clear():i.forEach(function(t){return e.model.removeEntry(t)}),i.forEach(function(t){return e.disposeResource(t)})},function(t){e.messageService.show(F.Severity.Error,t)})},t.prototype.disposeResource=function(e){K(e,this.editorService,this.quickOpenService).forEach(function(e){e.isDisposed()||e.dispose(!0)});var t=this.untitledEditorService.get(e);t&&t.dispose()},t.prototype.dispose=function(){this.model&&this.model.onModelChange.remove(this.onModelChange,this),e.prototype.dispose.call(this)},t.ID="workbench.files.action.closeWorkingFiles",t=__decorate([__param(2,x.IUntitledEditorService),__param(3,A.IWorkbenchEditorService),__param(4,q),__param(5,F.IMessageService),__param(6,R.IQuickOpenService)],t)}(f.Action);t.CloseWorkingFileAction=Oe;var Pe=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n),this.instantiationService=i,this.editorService=r,this.textFileService=o,this.messageService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditorInput(),t=w.getUntitledOrFileResource(e,!0);if(t){var r=this.textFileService.getWorkingFilesModel(),o=r.findEntry(t);if(o){var s=this.instantiationService.createInstance(Oe,r,o);s.run().done(function(){return s.dispose()},u.onUnexpectedError)}else e instanceof S.DiffEditorInput&&(e=e.getModifiedInput()),e instanceof C.FileEditorInput?K(e.getResource(),this.editorService,this.quickOpenService).forEach(function(e){e.isDisposed()||e.dispose(!0)}):e.dispose()}else this.messageService.show(F.Severity.Info,i.localize(51,null));return n.Promise.as(!0)},t.ID="workbench.files.action.closeFile",t.LABEL=i.localize(50,null),t=__decorate([__param(2,N.IInstantiationService),__param(3,A.IWorkbenchEditorService),__param(4,q),__param(5,F.IMessageService),__param(6,R.IQuickOpenService)],t)}(f.Action);t.CloseFileAction=Pe;var Ne=function(e){function t(t,n,i,r,o,s,a){e.call(this,t,n),this.instantiationService=i,this.editorService=r,this.textFileService=o,this.messageService=s,this.quickOpenService=a}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.editorService.getVisibleEditors().map(function(e){return w.asFileEditorInput(e.input,!0)}).filter(function(e){return e instanceof C.FileEditorInput}),n=this.instantiationService.createInstance(Oe,this.textFileService.getWorkingFilesModel(),null);return n.run().then(function(){n.dispose(),t.forEach(function(t){e.textFileService.isDirty(t.getResource())||K(t.getResource(),e.editorService,e.quickOpenService).forEach(function(e){e.isDisposed()||e.dispose(!0)})})})},t.ID="workbench.files.action.closeAllFiles",t.LABEL=i.localize(52,null),t=__decorate([__param(2,N.IInstantiationService),__param(3,A.IWorkbenchEditorService),__param(4,q),__param(5,F.IMessageService),__param(6,R.IQuickOpenService)],t)}(f.Action);t.CloseAllFilesAction=Ne;var Fe=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.editorService=i,this.textFileService=r,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=this.textFileService.getWorkingFilesModel();if(0!==e.count()){var t=w.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0);return this.editorService.openEditor({resource:e.next(t).resource})}return this.messageService.show(F.Severity.Info,i.localize(54,null)),n.Promise.as(!0)},t.ID="workbench.files.action.openNextWorkingFile",t.LABEL=i.localize(53,null),t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q),__param(4,F.IMessageService)],t)}(f.Action);t.OpenNextWorkingFile=Fe;var We=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.editorService=i,this.textFileService=r,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=this.textFileService.getWorkingFilesModel();if(0!==e.count()){var t=w.getUntitledOrFileResource(this.editorService.getActiveEditorInput(),!0);return this.editorService.openEditor({resource:e.previous(t).resource})}return this.messageService.show(F.Severity.Info,i.localize(56,null)),n.Promise.as(!0)},t.ID="workbench.files.action.openPreviousWorkingFile",t.LABEL=i.localize(55,null),t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q),__param(4,F.IMessageService)],t)}(f.Action);t.OpenPreviousWorkingFile=We;var He=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.editorService=i,this.textFileService=r,this.messageService=o}return __extends(t,e),t.prototype.run=function(){var e=w.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);return e?this.textFileService.getWorkingFilesModel().addEntry(e.getResource()):this.messageService.show(F.Severity.Info,i.localize(58,null)),n.Promise.as(!0)},t.ID="workbench.files.action.addToWorkingFiles",t.LABEL=i.localize(57,null),t=__decorate([__param(2,A.IWorkbenchEditorService),__param(3,q),__param(4,F.IMessageService)],t)}(f.Action);t.AddToWorkingFiles=He,t.keybindingForAction=U;var Ve=r.isWindows?["/","\\",":","*","?","'","<",">","|"]:["/","\\"];t.validateFileName=z,t.getWellFormedFileName=j;var Be;Be||(Be=p.register("FileActionsDiagnostics",function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log(e[1]+" - "+e[0]+" (time: "+e[2].getTime()+" ["+e[2].toUTCString()+"])")}))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileTracker",["require","exports","vs/base/common/errors","vs/nls!vs/workbench/parts/files/browser/fileTracker","vs/base/common/mime","vs/base/common/uri","vs/base/common/paths","vs/workbench/browser/parts/editor/diffEditorInput","vs/workbench/common/editor","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/editors/derivedFrameEditorInput","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/browser/events","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/activity/common/activityService","vs/workbench/services/workspace/common/contextService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E){
var S=function(){function e(e,t,n,i,r,o,s,a){this.contextService=e,this.eventService=t,this.quickOpenService=n,this.editorService=i,this.activityService=r,this.textFileService=o,this.instantiationService=s,this.untitledEditorService=a,this.toUnbind=[],this.workingFiles=o.getWorkingFilesModel(),this.registerListeners()}return e.prototype.getId=function(){return"vs.files.filetracker"},e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(f.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)})),this.toUnbind.push(this.eventService.addListener(f.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledEditorDeleted(t)})),this.toUnbind.push(this.eventService.addListener(f.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledEditorDirty(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVING,function(t){return e.onTextFileSaving(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toUnbind.push(this.eventService.addListener(u.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toUnbind.push(this.eventService.addListener("files.internal:fileChanged",function(t){return e.onLocalFileChange(t)})),this.toUnbind.push(this.eventService.addListener(l.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)}))},e.prototype.onEditorInputChanged=function(e){this.disposeTextFileModels()},e.prototype.onTextFileDirty=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.contextService.isAutoSaveEnabled()||this.updateActivityBadge()},e.prototype.onTextFileSaving=function(e){this.emitInputStateChangeEvent(e.getAfter().resource)},e.prototype.onTextFileSaveError=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.updateActivityBadge()},e.prototype.onTextFileSaved=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.onTextFileReverted=function(e){this.emitInputStateChangeEvent(e.getAfter().resource),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.onUntitledEditorDirty=function(e){var t=this.untitledEditorService.get(e.resource);t&&this.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(t)),this.updateActivityBadge()},e.prototype.onUntitledEditorDeleted=function(e){var t=this.untitledEditorService.get(e.resource);t&&this.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(t)),this.lastDirtyCount>0&&this.updateActivityBadge()},e.prototype.updateActivityBadge=function(){var e=this.textFileService.getDirty().length;this.lastDirtyCount=e,e>0?this.activityService.showActivity(u.VIEWLET_ID,new y.NumberBadge(e,function(e){return i.localize(0,null)}),"explorer-viewlet-label"):this.activityService.clearActivity(u.VIEWLET_ID)},e.prototype.emitInputStateChangeEvent=function(e){var t=this,n=this.editorService.getVisibleEditors();n.forEach(function(n){var i=n.input;if(i instanceof a.DiffEditorInput&&(i=i.getModifiedInput()),i instanceof d.FileEditorInput){var r=i;r.getResource().toString()===e.toString()&&t.eventService.emit(f.EventType.EDITOR_INPUT_STATE_CHANGED,new f.EditorInputEvent(r))}})},e.prototype.onLocalFileChange=function(e){if(e.gotMoved()){var t=e.getBefore(),n=e.getAfter();this.handleMovedFileInVisibleEditors(t?t.resource:null,n?n.resource:null,n?n.mime:null)}var i=e.getBefore();(e.gotMoved()||e.gotDeleted())&&this.disposeAll(i.resource,this.quickOpenService.getEditorHistory())},e.prototype.onFileChanges=function(t){var i=this,r=t.getDeleted();r&&r.length>0&&r.forEach(function(e){i.disposeAll(e.resource,i.quickOpenService.getEditorHistory())}),t.getUpdated().map(function(e){return p.CACHE.get(e.resource)}).filter(function(t){var n=i.canDispose(t);return n?(new Date).getTime()-t.getLastDirtyTime()<e.FILE_CHANGE_UPDATE_DELAY?!1:!0:!1}).forEach(function(e){return p.CACHE.dispose(e.getResource())});var o=this.editorService.getVisibleEditors();o.forEach(function(r){var o=r.input;if(o instanceof a.DiffEditorInput&&(o=i.getMatchingFileEditorInputFromDiff(o,t)),o instanceof d.FileEditorInput){var s=o,u=s.getResource();if(t.contains(u,l.FileChangeType.UPDATED)||t.contains(u,l.FileChangeType.ADDED)){var f=p.CACHE.get(u);if(f){var m=f.getState();if(m===p.State.SAVED){var v=f.getLastDirtyTime();if((new Date).getTime()-v>e.FILE_CHANGE_UPDATE_DELAY){var g=r.getControl(),y=g.saveViewState(),_=f.getLastModifiedTime();f.load().done(function(){f.getLastModifiedTime()!==_&&i.isEditorShowingPath(r,f.getResource())&&g.restoreViewState(y)},n.onUnexpectedError)}}}else{var b=new c.EditorOptions;b.forceOpen=!0,b.preserveFocus=!0,i.editorService.openEditor(r.input,b,r.position).done(null,n.onUnexpectedError)}}}else if(o instanceof h.DerivedFrameEditorInput){var E=o;t.contains(E.getResource(),l.FileChangeType.UPDATED)&&r.reload()}})},e.prototype.isEditorShowingPath=function(e,t){if(!e.isVisible())return!1;var n=e.getInput();return n?(n instanceof a.DiffEditorInput&&(n=n.getModifiedInput()),n instanceof d.FileEditorInput&&n.getResource().toString()===t.toString()):!1},e.prototype.handleMovedFileInVisibleEditors=function(e,t,i){var u=this,l=this.editorService.getVisibleEditors();l.forEach(function(l){var p=l.input;p instanceof a.DiffEditorInput&&(p=p.getModifiedInput());var f;if(p instanceof d.FileEditorInput?f=p.getResource():p instanceof h.DerivedFrameEditorInput&&(f=p.getResource()),f){var m=!1;if(s.isEqualOrParent(f.fsPath,e.fsPath)&&(m=!0),m){var v;if(e.toString()===f.toString())v=t;else{var g=f.fsPath.indexOf(e.fsPath);v=o["default"].file(s.join(t.fsPath,f.fsPath.substr(g+e.fsPath.length+1)))}var y,_=new c.EditorOptions;if(_.preserveFocus=!0,p instanceof d.FileEditorInput)y=u.instantiationService.createInstance(d.FileEditorInput,v,i||r.MIME_UNKNOWN,void 0);else if(p instanceof h.DerivedFrameEditorInput){var b=p;y=b.createNew(v)}y&&u.editorService.openEditor(y,_,l.position).done(null,n.onUnexpectedError)}}})},e.prototype.getMatchingFileEditorInputFromDiff=function(e,t){var n=e.getModifiedInput(),i=this.getMatchingFileEditorInputFromInput(n,t);if(i)return i;var r=e.getOriginalInput();return this.getMatchingFileEditorInputFromInput(r,t)},e.prototype.getMatchingFileEditorInputFromInput=function(e,t){if(e instanceof d.FileEditorInput)if(o["default"].isURI(t)){var n=t;if(this.containsResource(e,n))return e}else{var i=t;if(i.contains(e.getResource(),l.FileChangeType.UPDATED))return e}return null},e.prototype.disposeAll=function(e,t){var n=this;if(!this.textFileService.isDirty(e)){for(var i=d.FileEditorInput.getAll(e),r=0;r<t.length;r++){var o=t[r];o instanceof d.FileEditorInput&&this.containsResource(o,e)?i.push(o):o instanceof h.DerivedFrameEditorInput&&this.containsResource(o,e)&&i.push(o)}var s=this.editorService.getVisibleEditors();s.forEach(function(t){var r=t.input;r instanceof a.DiffEditorInput?(r=n.getMatchingFileEditorInputFromDiff(r,e),r instanceof d.FileEditorInput&&i.push(r)):r instanceof d.FileEditorInput&&n.containsResource(r,e)?i.push(r):r instanceof h.DerivedFrameEditorInput&&n.containsResource(r,e)&&i.push(r)}),i.forEach(function(e){if(!e.isDisposed())if(e instanceof d.FileEditorInput){var t=e;t.dispose(!0)}else e.dispose()})}},e.prototype.containsResource=function(e,t){var n;return n=e instanceof d.FileEditorInput?e.getResource():e.getResource(),s.isEqualOrParent(n.fsPath,t.fsPath)?!0:!1},e.prototype.disposeTextFileModels=function(){var e=this;p.CACHE.getAll().filter(function(t){return!e.workingFiles.hasEntry(t.getResource())&&e.canDispose(t)}).forEach(function(e){return p.CACHE.dispose(e.getResource())})},e.prototype.canDispose=function(e){return e?e.textEditorModel&&e.textEditorModel.isAttachedToEditor()?!1:e.getState()!==p.State.SAVED?!1:this.editorService.getVisibleEditors().some(function(t){if(t.input instanceof h.DerivedFrameEditorInput){var n=t.input.getResource();return n&&n.toString()===e.getResource().toString()}return!1})?!1:!0:!1},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e.FILE_CHANGE_UPDATE_DELAY=2e3,e=__decorate([__param(0,_.IWorkspaceContextService),__param(1,b.IEventService),__param(2,g.IQuickOpenService),__param(3,v.IWorkbenchEditorService),__param(4,y.IActivityService),__param(5,u.ITextFileService),__param(6,E.IInstantiationService),__param(7,m.IUntitledEditorService)],e)}();t.FileTracker=S});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/saveErrorHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/saveErrorHandler","vs/base/common/errors","vs/base/common/paths","vs/base/common/actions","vs/base/common/uri","vs/base/common/mime","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/browser/parts/editor/resourceEditorInput","vs/workbench/browser/parts/editor/diffEditorInput","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/fileActions","vs/platform/files/common/files","vs/workbench/services/editor/common/editorService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/editor/common/services/modeService","vs/editor/common/services/modelService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E){var S=function(){function e(e,t){this.messageService=e,this.instantiationService=t}return e.prototype.onSaveError=function(e,t){var a,c=this;if(e.fileOperationResult===f.FileOperationResult.FILE_MODIFIED_SINCE)a=this.instantiationService.createInstance(T,t,null);else{var u=e.fileOperationResult===f.FileOperationResult.FILE_READ_ONLY,l=[];l.push(y.CancelAction),u?l.push(new s.Action("workbench.files.action.overwrite",i.localize(0,null),null,!0,function(){return t.isDisposed()?n.Promise.as(!0):t.save(!0).then(function(){return!0})})):l.push(new s.Action("workbench.files.action.retry",i.localize(1,null),null,!0,function(){var e=c.instantiationService.createInstance(p.SaveFileAction,p.SaveFileAction.ID,p.SaveFileAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})})),l.push(new s.Action("workbench.files.action.discard",i.localize(2,null),null,!0,function(){var e=c.instantiationService.createInstance(p.RevertFileAction,p.RevertFileAction.ID,p.RevertFileAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})})),l.push(new s.Action("workbench.files.action.saveAs",p.SaveFileAsAction.LABEL,null,!0,function(){var e=c.instantiationService.createInstance(p.SaveFileAsAction,p.SaveFileAsAction.ID,p.SaveFileAsAction.LABEL);return e.setResource(t.getResource()),e.run().then(function(){return e.dispose(),!0})}));var d;d=u?i.localize(3,null,o.basename(t.getResource().fsPath)):i.localize(4,null,o.basename(t.getResource().fsPath),r.toErrorMessage(e,!1)),a={message:d,actions:l}}this.messageService&&this.messageService.show(y.Severity.Error,a)},e=__decorate([__param(0,y.IMessageService),__param(1,g.IInstantiationService)],e)}();t.SaveErrorHandler=S;var w=function(e){function t(t,n,i,r,o,s,a,c,u){e.call(this,n,i,r,o),this.messageService=s,this.instantiationService=a,this.eventService=c,this.editorService=u,this.model=t}return __extends(t,e),t.prototype.getModel=function(){return this.model},t.prototype.getId=function(){return t.ID},t.ID="workbench.editors.files.conflictResolutionDiffEditorInput",t=__decorate([__param(5,y.IMessageService),__param(6,g.IInstantiationService),__param(7,v.IEventService),__param(8,m.IWorkbenchEditorService)],t)}(d.DiffEditorInput);t.ConflictResolutionDiffEditorInput=w;var C=function(e){function t(t,n,i,r,o,s,c,u){e.call(this,i,r,a["default"].create("disk",null,t.fsPath),o,c),this.modeService=s,this.fileService=u,this.fileResource=t,this.mime=n}return __extends(t,e),t.prototype.getLastModified=function(){return this.lastModified},t.prototype.resolve=function(t){var n=this;return this.fileService.resolveContent(this.fileResource).then(function(i){n.lastModified=i.mtime;var r=n.modelService.getModel(n.resource);return r?r.setValue(i.value):n.modelService.createModel(i.value,n.modeService.getOrCreateMode(n.mime),n.resource),e.prototype.resolve.call(n,t)})},t=__decorate([__param(4,E.IModelService),__param(5,b.IModeService),__param(6,g.IInstantiationService),__param(7,f.IFileService)],t)}(l.ResourceEditorInput);t.FileOnDiskEditorInput=C;var T=function(){function e(e,t,r,a,u,l){var d=this;this.messageService=r,this.instantiationService=a,this.contextService=u,this.editorService=l,this.model=e;var p=e.getResource();t?this.message=t:this.message=i.localize(5,null,o.basename(p.fsPath)),this.actions=[new s.Action("workbench.files.action.resolveConflict",i.localize(6,null),null,!0,function(){if(!d.model.isDisposed()){var e=c.guessMimeTypes(p.fsPath).join(", "),t=d.instantiationService.createInstance(C,p,e,o.basename(p.fsPath),p.fsPath),r=d.instantiationService.createInstance(h.FileEditorInput,p,e,void 0),s=d.instantiationService.createInstance(w,d.model,i.localize(7,null,r.getName(),d.contextService.getConfiguration().env.appName),i.localize(8,null,r.getDescription()),t,r);return d.editorService.openEditor(s).then(function(){d.model.setConflictResolutionMode(),d.messageService.show(y.Severity.Info,i.localize(9,null))})}return n.Promise.as(!0)})]}return e=__decorate([__param(2,y.IMessageService),__param(3,g.IInstantiationService),__param(4,_.IWorkspaceContextService),__param(5,m.IWorkbenchEditorService)],e)}(),I=function(e){function t(t,n,r){e.call(this,"workbench.files.action.acceptLocalChanges",i.localize(10,null),"conflict-editor-action accept-changes"),this.messageService=t,this.instantiationService=n,this.editorService=r,this.messagesToHide=[]}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.input,n=t.getModel(),r=n.getValue();return t.resolve(!1).then(function(o){var s=t.originalInput.getLastModified();return n.revert().then(function(){var o=n.getLastModifiedTime();return s>=o?(n.textEditorModel.setValue(r),n.save().then(function(){for(;e.messagesToHide.length;)e.messagesToHide.pop()();var i=e.instantiationService.createInstance(h.FileEditorInput,n.getResource(),c.guessMimeTypes(n.getResource().fsPath).join(", "),void 0);return e.editorService.openEditor(i,null,e.position).then(function(){t.dispose()})})):(n.setConflictResolutionMode(),n.textEditorModel.setValue(r),t.originalInput.resolve(!0).then(function(){e.messagesToHide.push(e.messageService.show(y.Severity.Info,i.localize(11,null)))}))})})},t=__decorate([__param(0,y.IMessageService),__param(1,g.IInstantiationService),__param(2,m.IWorkbenchEditorService)],t)}(u.EditorInputAction);t.AcceptLocalChangesAction=I;var k=function(e){function t(t,n){e.call(this,"workbench.action.files.revert",i.localize(12,null),"conflict-editor-action revert-changes"),this.instantiationService=t,this.editorService=n}return __extends(t,e),t.prototype.run=function(){var e=this,t=this.input,n=t.getModel();return n.revert().then(function(){var i=e.instantiationService.createInstance(h.FileEditorInput,n.getResource(),c.guessMimeTypes(n.getResource().fsPath).join(", "),void 0);return e.editorService.openEditor(i,null,e.position).then(function(){t.dispose()})})},t=__decorate([__param(0,g.IInstantiationService),__param(1,m.IWorkbenchEditorService)],t)}(u.EditorInputAction);t.RevertLocalChangesAction=k});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/editors/textFileEditor",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/editors/textFileEditor","vs/base/common/errors","vs/base/common/mime","vs/base/common/labels","vs/base/common/types","vs/base/common/actions","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/saveErrorHandler","vs/workbench/browser/parts/editor/textEditor","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/browser/parts/editor/binaryEditorModel","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/viewlet/common/viewletService","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/editor/common/editorService","vs/editor/common/services/modeService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I){var k=function(e){function t(n,i,r,o,s,a,c,u,d,p,f,m,v){var y=this;e.call(this,t.ID,n,a,c,u,d,p,f,m,v),this.fileService=i,this.textFileService=r,this.viewletService=o,this.quickOpenService=s,h.TextFileEditorModel.setSaveErrorHandler(a.createInstance(l.SaveErrorHandler)),this.toUnbind.push(this.eventService.addListener(g.EventType.FILE_CHANGES,function(e){return y.onFilesChanged(e)}))}return __extends(t,e),t.prototype.onFilesChanged=function(e){var t=e.getDeleted();t&&t.length&&this.clearTextEditorViewState(this.storageService,t.map(function(e){return e.resource.toString()}))},t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():i.localize(0,null)},t.prototype.setInput=function(t,s){var u=this,l=this.getInput();e.prototype.setInput.call(this,t,s);var d=s&&s.forceOpen;return!d&&t.matches(l)?(s&&a.isFunction(s.apply)&&s.apply(this.getControl()),n.TPromise.as(null)):(l&&this.saveTextEditorViewState(this.storageService,l.getResource().toString()),this.editorService.resolveEditorModel(t,!0).then(function(e){if(e instanceof p.BinaryEditorModel&&u.openAsBinary(t,s))return null;if(!(e instanceof h.TextFileEditorModel))return n.TPromise.wrapError("Invalid editor input. Text file editor requires a model instance of TextFileEditorModel.");var i=e,r=u.getControl();if(!i.textEditorModel)return n.TPromise.wrapError("Unable to open the file because the associated text model is undefined.");if(!u.getInput()||u.getInput().getResource().toString()!==i.getResource().toString())return null;var o=i.textEditorModel.getMode(),c=u.telemetryService.start("editorSetModel",{mode:o&&o.getId(),resource:i.textEditorModel.getAssociatedResource().toString()});r.setModel(i.textEditorModel),c.stop();var l=!1;if(s&&a.isFunction(s.apply)&&(l=s.apply(r)),!l){var d=u.loadTextEditorViewState(u.storageService,u.getInput().getResource().toString());d&&r.restoreViewState(d)}u.contextService.isInsideWorkspace(i.getResource())||u.textFileService.getWorkingFilesModel().addEntry(i.getResource())},function(e){return e.fileOperationResult===g.FileOperationResult.FILE_IS_BINARY&&u.openAsBinary(t,s)||e.fileOperationResult===g.FileOperationResult.FILE_IS_DIRECTORY&&u.openAsFolder(t)?void 0:e.fileOperationResult===g.FileOperationResult.FILE_NOT_FOUND?n.Promise.wrapError(r.create(r.toErrorMessage(e),{actions:[C.CancelAction,new c.Action("workbench.files.action.createMissingFile",i.localize(1,null),null,!0,function(){return u.fileService.updateContent(t.getResource(),"").then(function(){return u.textFileService.getWorkingFilesModel().addEntry(t.getResource()),u.editorService.openEditor({resource:t.getResource(),mime:o.MIME_TEXT})})})]})):e.fileOperationResult===g.FileOperationResult.FILE_TOO_LARGE?void u.messageService.show(C.Severity.Info,i.localize(2,null)):n.Promise.wrapError(e)}))},t.prototype.openAsBinary=function(e,t){if(e instanceof f.FileEditorInput){var n=e,i=this.instantiationService.createInstance(f.FileEditorInput,n.getResource(),o.MIME_BINARY,void 0);return this.editorService.openEditor(i,t,this.position).done(null,r.onUnexpectedError),!0}return!1},t.prototype.openAsFolder=function(e){var t,n=this,o=this.quickOpenService.getEditorHistory()[1];return t=o?this.editorService.openEditor(o,null,this.position):this.editorService.closeEditor(this),t.done(function(){if(e instanceof f.FileEditorInput){var t=e;n.contextService.isInsideWorkspace(t.getResource())?n.viewletService.openViewlet(u.VIEWLET_ID,!0).done(function(e){return e.getExplorerView().select(t.getResource(),!0)},r.onUnexpectedError):n.messageService.show(C.Severity.Info,i.localize(3,null,s.getPathLabel(t.getResource())))}},r.onUnexpectedError),!0},t.prototype.supportsSplitEditor=function(){return!0},t.prototype.clearInput=function(){this.input&&this.saveTextEditorViewState(this.storageService,this.input.getResource().toString()),this.getControl().setModel(null),e.prototype.clearInput.call(this)},t.prototype.shutdown=function(){this.input&&this.saveTextEditorViewState(this.storageService,this.input.getResource().toString()),e.prototype.shutdown.call(this)},t.ID=u.TEXT_FILE_EDITOR_ID,t=__decorate([__param(0,y.ITelemetryService),__param(1,g.IFileService),__param(2,u.ITextFileService),__param(3,v.IViewletService),__param(4,m.IQuickOpenService),__param(5,w.IInstantiationService),__param(6,_.IWorkspaceContextService),__param(7,b.IStorageService),__param(8,C.IMessageService),__param(9,E.IConfigurationService),__param(10,S.IEventService),__param(11,T.IWorkbenchEditorService),__param(12,I.IModeService)],t)}(d.BaseTextEditor);t.TextFileEditor=k});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/fileActions.contribution",["require","exports","vs/nls!vs/workbench/parts/files/browser/fileActions.contribution","vs/platform/platform","vs/base/common/paths","vs/base/browser/ui/actionbar/actionbar","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/saveErrorHandler","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/workbench/parts/files/browser/editors/derivedFrameEditorInput","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/platform/keybinding/common/keybindingService","vs/workbench/parts/files/browser/views/explorerViewModel","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){var y=function(e){function t(t,n,i){e.call(this),this.instantiationService=t,this.contextService=n,this.keybindingService=i}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element;return t instanceof v.FileStat},t.prototype.getSecondaryActions=function(e){var t=e.element,n=e.viewer,i=[],s=!1;t.isDirectory?null:r.extname(t.name);if(t.isDirectory||(i.push(this.instantiationService.createInstance(c.OpenToSideAction,n,t.resource,!1)),s=!0),s&&i.push(new o.Separator(null,50)),t.isDirectory)i.push(this.instantiationService.createInstance(c.NewFileAction,n,t)),i.push(this.instantiationService.createInstance(c.NewFolderAction,n,t)),i.push(new o.Separator(null,50));else if(!t.isDirectory){var a=this.instantiationService.createInstance(c.CompareResourcesAction,t.resource,n);a._isEnabled()&&i.push(a),i.push(this.instantiationService.createInstance(c.SelectResourceForCompareAction,t.resource,n)),i.push(new o.Separator(null,100))}var u=this.contextService.getWorkspace(),l=u&&t.resource.toString()===u.resource.toString();l||i.push(this.instantiationService.createInstance(c.CopyFileAction,n,t)),t.isDirectory&&i.push(this.instantiationService.createInstance(c.PasteFileAction,n,t)),l||(i.push(new o.Separator(null,150)),i.push(this.instantiationService.createInstance(c.TriggerRenameFileAction,n,t))),l||i.push(this.instantiationService.createInstance(c.MoveFileToTrashAction,n,t));for(var d=10,h=0;h<i.length;h++){var p=i[h];p.order?d=p.order:(d+=10,p.order=d)}return i},t.prototype.getActionItem=function(e,t){if(e&&e.element instanceof v.FileStat){var n=c.keybindingForAction(t.id);if(n)return new o.ActionItem(e,t,{label:!0,keybinding:this.keybindingService.getLabelFor(n)})}return null},t=__decorate([__param(0,p.IInstantiationService),__param(1,f.IWorkspaceContextService),__param(2,m.IKeybindingService)],t)}(s.ActionBarContributor),_=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof u.ConflictResolutionDiffEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(u.AcceptLocalChangesAction),this.instantiationService.createInstance(u.RevertLocalChangesAction)]},t=__decorate([__param(0,p.IInstantiationService)],t)}(a.EditorInputActionContributor),b=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof h.DerivedFrameEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(c.RefreshDerivedFrameEditorInputAction),this.instantiationService.createInstance(c.ViewDerivedSourceEditorInputAction)]},t=__decorate([__param(0,p.IInstantiationService)],t)}(a.EditorInputActionContributor),E=i.Registry.as(s.Extensions.Actionbar);E.registerActionBarContributor(s.Scope.VIEWER,y),E.registerActionBarContributor(s.Scope.EDITOR,_),E.registerActionBarContributor(s.Scope.EDITOR,b);var S=n.localize(0,null),w=i.Registry.as(d.Extensions.WorkbenchActions);w.registerWorkbenchAction(new l.SyncActionDescriptor(c.SaveFileAction,c.SaveFileAction.ID,c.SaveFileAction.LABEL,{primary:g.KeyMod.CtrlCmd|g.KeyCode.KEY_S}),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.SaveAllAction,c.SaveAllAction.ID,c.SaveAllAction.LABEL),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.SaveFilesAction,c.SaveFilesAction.ID,null)),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.RevertFileAction,c.RevertFileAction.ID,c.RevertFileAction.LABEL),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.GlobalNewFolderAction,c.GlobalNewFolderAction.ID,c.GlobalNewFolderAction.LABEL),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.GlobalCompareResourcesAction,c.GlobalCompareResourcesAction.ID,c.GlobalCompareResourcesAction.LABEL),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.CloseFileAction,c.CloseFileAction.ID,c.CloseFileAction.LABEL,{primary:g.KeyMod.chord(g.KeyMod.CtrlCmd|g.KeyCode.KEY_K,g.KeyCode.KEY_W)}),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.CloseAllFilesAction,c.CloseAllFilesAction.ID,c.CloseAllFilesAction.LABEL,{primary:g.KeyMod.chord(g.KeyMod.CtrlCmd|g.KeyCode.KEY_K,g.KeyMod.CtrlCmd|g.KeyCode.KEY_W)}),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.OpenNextWorkingFile,c.OpenNextWorkingFile.ID,c.OpenNextWorkingFile.LABEL,{primary:g.KeyMod.chord(g.KeyMod.CtrlCmd|g.KeyCode.KEY_K,g.KeyCode.DownArrow)}),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.OpenPreviousWorkingFile,c.OpenPreviousWorkingFile.ID,c.OpenPreviousWorkingFile.LABEL,{primary:g.KeyMod.chord(g.KeyMod.CtrlCmd|g.KeyCode.KEY_K,g.KeyCode.UpArrow)}),S),w.registerWorkbenchAction(new l.SyncActionDescriptor(c.AddToWorkingFiles,c.AddToWorkingFiles.ID,c.AddToWorkingFiles.LABEL,{primary:g.KeyMod.chord(g.KeyMod.CtrlCmd|g.KeyCode.KEY_K,g.KeyCode.Enter)}),S)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/files.contribution",["require","exports","vs/base/common/uri","vs/base/common/bits/encoding","vs/workbench/browser/viewlet","vs/nls!vs/workbench/parts/files/browser/files.contribution","vs/platform/actions/common/actions","vs/platform/platform","vs/platform/configuration/common/configurationRegistry","vs/workbench/browser/actionRegistry","vs/workbench/common/contributions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/files/browser/files","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/fileTracker","vs/workbench/parts/files/browser/saveParticipant","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/editors/htmlFrameEditorInput","vs/workbench/parts/files/browser/editors/textFileEditor","vs/workbench/parts/files/browser/editors/binaryFileEditor","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/descriptors","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/css!./media/files.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){var T=function(e){function t(t,n,i,r){e.call(this,t,n,p.VIEWLET_ID,i,r)}return __extends(t,e),t.ID=p.VIEWLET_ID,t.LABEL=o.localize(0,null),t=__decorate([__param(2,S.IViewletService),__param(3,w.IWorkbenchEditorService)],t)}(r.ToggleViewletAction);t.OpenExplorerViewletAction=T,a.Registry.as(r.Extensions.Viewlets).registerViewlet(new r.ViewletDescriptor("vs/workbench/parts/files/browser/explorerViewlet","ExplorerViewlet",p.VIEWLET_ID,o.localize(1,null),"explore",0)),a.Registry.as(r.Extensions.Viewlets).setDefaultViewletId(p.VIEWLET_ID);var I={primary:C.KeyMod.CtrlCmd|C.KeyMod.Shift|C.KeyCode.KEY_E};a.Registry.as(u.Extensions.WorkbenchActions).registerWorkbenchAction(new s.SyncActionDescriptor(T,T.ID,T.LABEL,I),o.localize(2,null)),a.Registry.as(d.Extensions.Editors).registerEditor(new h.FileEditorDescriptor(y.TextFileEditor.ID,o.localize(3,null),"vs/workbench/parts/files/browser/editors/textFileEditor","TextFileEditor",["text/*","application/unknown"]),[new E.SyncDescriptor(v.FileEditorInput)]),
a.Registry.as(d.Extensions.Editors).registerEditor(new h.FileEditorDescriptor(_.BinaryFileEditor.ID,o.localize(4,null),"vs/workbench/parts/files/browser/editors/binaryFileEditor","BinaryFileEditor",["image/*","application/pdf","audio/*","video/*","application/octet-stream"]),[new E.SyncDescriptor(v.FileEditorInput)]);var k=new E.AsyncDescriptor("vs/workbench/parts/files/browser/editors/fileEditorInput","FileEditorInput",void 0,void 0,void 0);a.Registry.as(d.Extensions.Editors).registerDefaultFileInput(k);var x=function(){function e(e){}return e.prototype.serialize=function(e){var t=e,n={resource:t.getResource().toString(),mime:t.getMime()};return JSON.stringify(n)},e.prototype.deserialize=function(e,t){var i=JSON.parse(t);return e.createInstance(v.FileEditorInput,n["default"].parse(i.resource),i.mime,void 0)},e=__decorate([__param(0,b.INullService)],e)}();a.Registry.as(d.Extensions.Editors).registerEditorInputFactory(p.FILE_EDITOR_INPUT_ID,x);var A=function(){function e(e){}return e.prototype.serialize=function(e){var t=e;return t.getResource().toString()},e.prototype.deserialize=function(e,t){return e.createInstance(g.HTMLFrameEditorInput,n["default"].parse(t))},e=__decorate([__param(0,b.INullService)],e)}();a.Registry.as(d.Extensions.Editors).registerEditorInputFactory(g.HTMLFrameEditorInput.ID,A),a.Registry.as(l.Extensions.Workbench).registerWorkbenchContribution(f.FileTracker),a.Registry.as(l.Extensions.Workbench).registerWorkbenchContribution(m.SaveParticipant);var R=a.Registry.as(c.Extensions.Configuration);R.registerConfiguration({id:"files",order:7,title:o.localize(5,null),type:"object",properties:{"files.exclude":{id:"glob-pattern",type:"object",description:o.localize(6,null),"default":{"**/.git":!0,"**/.DS_Store":!0},additionalProperties:{anyOf:[{type:"boolean",description:o.localize(7,null)},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*","default":"$(basename).ext",description:o.localize(8,null)}}}]}},"files.encoding":{type:"string","enum":Object.keys(i.SUPPORTED_ENCODINGS),"default":"utf8",description:o.localize(9,null)},"files.trimTrailingWhitespace":{type:"boolean","default":!1,description:o.localize(10,null)}}}),R.registerConfiguration({id:"explorer",order:8,title:o.localize(11,null),type:"object",properties:{"explorer.workingFiles.maxVisible":{type:"number",description:o.localize(12,null),"default":9},"explorer.workingFiles.dynamicHeight":{type:"boolean",description:o.localize(13,null),"default":!0}}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/explorerViewer",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/files/browser/views/explorerViewer","vs/base/common/lifecycle","vs/base/common/objects","vs/base/browser/dom","vs/base/common/uri","vs/base/common/mime","vs/base/common/async","vs/base/common/paths","vs/base/common/errors","vs/base/common/types","vs/base/common/actions","vs/base/common/comparers","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/builder","vs/base/common/platform","vs/base/common/glob","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/fileActions","vs/workbench/common/editor","vs/base/parts/tree/common/tree","vs/base/common/labels","vs/base/parts/tree/browser/treeDnd","vs/base/parts/tree/browser/treeDefaults","vs/base/parts/tree/browser/actionsRenderer","vs/workbench/parts/files/browser/views/explorerViewModel","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/progress/common/progress","vs/platform/telemetry/common/telemetry","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W,H,V){var B=function(){function e(e,t,n,i,r){this.progressService=e,this.messageService=t,this.fileService=n,this.partService=i,this.workspace=r.getWorkspace()}return e.prototype.getId=function(e,t){return t.getId()},e.prototype.hasChildren=function(e,t){return t.isDirectory},e.prototype.getChildren=function(e,t){var i=this;if(t.isDirectoryResolved)return n.Promise.as(t.children);var r=this.fileService.resolveFile(t.resource,{resolveSingleChildDescendants:!0}).then(function(e){for(var n=R.FileStat.create(e),i=0;i<n.children.length;i++)t.addChild(n.children[i]);return t.isDirectoryResolved=!0,t.children},function(e){return i.messageService.show(F.Severity.Error,e),[]});return this.progressService.showWhile(r,this.partService.isCreated()?800:3200),r},e.prototype.getParent=function(e,t){return t?this.workspace&&t.resource.toString()===this.workspace.resource.toString()?n.Promise.as(null):t.parent?n.Promise.as(t.parent):n.Promise.as(null):n.Promise.as(null)},e=__decorate([__param(0,W.IProgressService),__param(1,F.IMessageService),__param(2,E.IFileService),__param(3,L.IPartService),__param(4,M.IWorkspaceContextService)],e)}();t.FileDataSource=B;var K=function(e){function t(t){e.call(this),this.state=t}return __extends(t,e),t.prototype.hasActions=function(t,n){return n instanceof R.NewStatPlaceholder?!1:e.prototype.hasActions.call(this,t,n)},t.prototype.getActions=function(t,i){return i instanceof R.NewStatPlaceholder?n.Promise.as([]):e.prototype.getActions.call(this,t,i)},t.prototype.hasSecondaryActions=function(t,n){return n instanceof R.NewStatPlaceholder?!1:e.prototype.hasSecondaryActions.call(this,t,n)},t.prototype.getSecondaryActions=function(t,i){return i instanceof R.NewStatPlaceholder?n.Promise.as([]):e.prototype.getSecondaryActions.call(this,t,i)},t.prototype.runAction=function(e,t,i,r){var s=this;if(void 0===r&&(r={}),r=o.mixin({viewletState:this.state,stat:t},r),!h.isString(i)){var a=i;return a.enabled?a.run(r):null}var c=i,u=this.hasActions(e,t)?this.getActions(e,t):n.Promise.as([]);return u.then(function(i){for(var o=0,a=i.length;a>o;o++)if(i[o].id===c&&i[o].enabled)return i[o].run(r);return u=s.hasSecondaryActions(e,t)?s.getSecondaryActions(e,t):n.Promise.as([]),u.then(function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].id===c&&e[t].enabled)return e[t].run(r);return null})})},t}(_.ContributableActionProvider);t.FileActionProvider=K;var U=function(){function e(){this._actionProvider=new K(this),this.editableStats=Object.create(null)}return Object.defineProperty(e.prototype,"actionProvider",{get:function(){return this._actionProvider},enumerable:!0,configurable:!0}),e.prototype.getEditableData=function(e){return this.editableStats[e.resource&&e.resource.toString()]},e.prototype.setEditable=function(e,t){t&&(this.editableStats[e.resource&&e.resource.toString()]=t)},e.prototype.clearEditable=function(e){delete this.editableStats[e.resource&&e.resource.toString()]},e}();t.FileViewletState=U;var z=function(e){function t(t){e.call(this),this.viewletState=t}return __extends(t,e),t.prototype.run=function(t,n){return e.prototype.run.call(this,t,{viewletState:this.viewletState})},t}(p.ActionRunner);t.ActionRunner=z;var j=function(e){function t(t,n,i){e.call(this,{actionProvider:t.actionProvider,actionRunner:n}),this.contextViewService=i,this.state=t}return __extends(t,e),t.prototype.getContentHeight=function(e,t){return 24},t.prototype.renderContents=function(e,t,n,i){var o=this,a=v.$(n).clearChildren(),c=v.$(".explorer-item").addClass(this.iconClass(t)).appendTo(a),l=this.state.getEditableData(t);if(l){var d=new m.InputBox(c.getHTMLElement(),this.contextViewService,{validationOptions:{validation:l.validator,showMessage:!0}}),h=t.name||"",p=h.lastIndexOf(".");d.value=h,d.select({start:0,end:p>0&&!t.isDirectory?p:h.length}),d.focus();var f=!1,g=u.once(function(){f||(f=!0,e.clearHighlight(),e.DOMFocus(),r.disposeAll(_))}),y=u.once(function(){o.state.actionProvider.runAction(e,t,l.action,{value:d.value}),g()}),_=[d,s.addStandardDisposableListener(d.inputElement,"keydown",function(e){e.equals(V.CommonKeybindings.ENTER)?d.validate()&&!f&&y():e.equals(V.CommonKeybindings.ESCAPE)&&g()}),s.addDisposableListener(d.inputElement,"blur",function(){d.isInputValid()&&!f?y():g()})];return g}var b=v.$(".explorer-item-label").appendTo(c);return v.$("a.plain").text(t.name).appendTo(b),null},t.prototype.iconClass=function(e){return e.isDirectory?"folder-icon":"text-file-icon"},t=__decorate([__param(2,O.IContextViewService)],t)}(A.ActionsRenderer);t.FileRenderer=j;var q=function(e){function t(t,n,i,r,o,s,a,c){e.call(this,{clickBehavior:x.ClickBehavior.ON_MOUSE_DOWN}),this.editorService=n,this.textFileService=i,this.contextMenuService=r,this.eventService=o,this.instantiationService=s,this.telemetryService=a,this.contextService=c,this.workspace=c.getWorkspace(),this.didCatchEnterDown=!1,this.downKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.CTRLCMD_DOWN_ARROW:V.CommonKeybindings.ENTER,this.onEnterDown.bind(this)),this.upKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.CTRLCMD_DOWN_ARROW:V.CommonKeybindings.ENTER,this.onEnterUp.bind(this)),g.isMacintosh?this.upKeyBindingDispatcher.set(V.CommonKeybindings.WINCTRL_ENTER,this.onModifierEnterUp.bind(this)):this.upKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_ENTER,this.onModifierEnterUp.bind(this)),this.downKeyBindingDispatcher.set(g.isMacintosh?V.CommonKeybindings.ENTER:V.CommonKeybindings.F2,this.onF2.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_C,this.onCopy.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_V,this.onPaste.bind(this)),g.isMacintosh?(this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_UP_ARROW,this.onLeft.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.CTRLCMD_BACKSPACE,this.onDelete.bind(this))):(this.downKeyBindingDispatcher.set(V.CommonKeybindings.DELETE,this.onDelete.bind(this)),this.downKeyBindingDispatcher.set(V.CommonKeybindings.SHIFT_DELETE,this.onDelete.bind(this))),this.state=t}return __extends(t,e),t.prototype.onLeftClick=function(e,t,n,i){void 0===i&&(i="mouse");var r={origin:i},o="mouse"===i&&2===n.detail;if(e.getHighlight())return n.preventDefault(),n.stopPropagation(),e.clearHighlight(r),!1;if(this.workspace&&t.resource.toString()===this.workspace.resource.toString())return e.clearFocus(r),e.clearSelection(r),!1;var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;if(s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),e.toggleExpansion(t),!n.shiftKey||t instanceof R.NewStatPlaceholder){if(!(t instanceof R.NewStatPlaceholder)){var a=!o;e.setFocus(t,r),o&&n.preventDefault(),t.isDirectory||(e.setSelection([t],r),this.openEditor(t,a,n&&(n.ctrlKey||n.metaKey)),o&&this.textFileService.getWorkingFilesModel().addEntry(t))}}else{var c=e.getFocus(),u=e.getSelection();(u&&u.length>0&&u[0]===t||c===t)&&(e.clearSelection(r),e.clearFocus(r))}return!0},t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(n.preventDefault(),n.stopPropagation(),e.setFocus(t),!this.state.actionProvider.hasSecondaryActions(e,t))return!0;var r={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return r},getActions:function(){return i.state.actionProvider.getSecondaryActions(e,t)},getActionItem:this.state.actionProvider.getActionItem.bind(this.state.actionProvider,e,t),getKeyBinding:function(e){return w.keybindingForAction(e.id)},getActionsContext:function(){return{viewletState:i.state,stat:t}},onHide:function(t){t&&e.DOMFocus()}}),!0},t.prototype.onEnterDown=function(e,t){if(e.getHighlight())return!1;var n={origin:"keyboard"},i=e.getFocus();return i&&(i.isDirectory?e.toggleExpansion(i):(e.setFocus(i,n),this.openEditor(i,!1,!1))),this.didCatchEnterDown=!0,!0},t.prototype.onEnterUp=function(e,t){if(!this.didCatchEnterDown||e.getHighlight())return!1;var n=e.getFocus();return n&&!n.isDirectory&&this.openEditor(n,!1,!1),this.didCatchEnterDown=!1,!0},t.prototype.onModifierEnterUp=function(e,t){if(e.getHighlight())return!1;var n=e.getFocus();return n&&!n.isDirectory&&this.openEditor(n,!1,!0),this.didCatchEnterDown=!1,!0},t.prototype.onCopy=function(e,t){var n=e.getFocus();return n?(this.runAction(e,n,"workbench.files.action.copyFile").done(),!0):!1},t.prototype.onPaste=function(e,t){var n=e.getFocus()||e.getInput();if(n){var i=this.instantiationService.createInstance(w.PasteFileAction,e,n);if(i._isEnabled())return i.run().done(null,d.onUnexpectedError),!0}return!1},t.prototype.openEditor=function(e,t,n){if(e&&!e.isDirectory){var i=this.instantiationService.createInstance(S.FileEditorInput,e.resource,e.mime,void 0),r=new C.EditorOptions;t&&(r.preserveFocus=!0),this.telemetryService.publicLog("workbenchActionExecuted",{id:"workbench.files.openFile",from:"explorer"}),this.editorService.openEditor(i,r,n).done(null,d.onUnexpectedError)}},t.prototype.onF2=function(e,t){var n=e.getFocus();return n?(this.runAction(e,n,"workbench.files.action.triggerRename").done(),!0):!1},t.prototype.onDelete=function(e,t){var n=!t.shiftKey,i=e.getFocus();return i?(this.runAction(e,i,n?"workbench.files.action.moveFileToTrash":"workbench.files.action.deleteFile").done(),!0):!1},t.prototype.runAction=function(e,t,n){return this.state.actionProvider.runAction(e,t,n)},t=__decorate([__param(1,D.IWorkbenchEditorService),__param(2,b.ITextFileService),__param(3,O.IContextMenuService),__param(4,P.IEventService),__param(5,N.IInstantiationService),__param(6,H.ITelemetryService),__param(7,M.IWorkspaceContextService)],t)}(x.DefaultController);t.FileController=q;var G=function(){function e(){}return e.prototype.compare=function(e,t,n){return t.isDirectory&&!n.isDirectory?-1:n.isDirectory&&!t.isDirectory?1:t.isDirectory&&n.isDirectory?t.name.toLowerCase().localeCompare(n.name.toLowerCase()):t instanceof R.NewStatPlaceholder?-1:n instanceof R.NewStatPlaceholder?1:f.compareFileNames(t.name,n.name)},e}();t.FileSorter=G;var Y=function(){function e(e){this.contextService=e,this.hiddenExpression=Object.create(null)}return e.prototype.updateConfiguration=function(e){var t=e&&e.files&&e.files.exclude||Object.create(null),n=!o.equals(this.hiddenExpression,t);return this.hiddenExpression=o.clone(t),n},e.prototype.isVisible=function(e,t){return this.doIsVisible(t)},e.prototype.doIsVisible=function(e){if(e instanceof R.NewStatPlaceholder)return!0;var t=e.parent&&e.parent.children&&e.parent.children.map(function(e){return e.name});return y.match(this.hiddenExpression,this.contextService.toWorkspaceRelativePath(e.resource),t)?!1:!0},e=__decorate([__param(0,M.IWorkspaceContextService)],e)}();t.FileFilter=Y;var $=function(){function e(e,t,n,i,r,o,s){this.messageService=e,this.contextService=t,this.eventService=n,this.progressService=i,this.fileService=r,this.instantiationService=o,this.textFileService=s}return e.prototype.getDragURI=function(e,t){return t.resource&&t.resource.toString()},e.prototype.onDragStart=function(e,t,n){var i=t.getData(),r=null;i.length>0&&(r=i[0]),r&&r.isDirectory&&e.isExpanded(r)&&e.collapse(r,!1),t instanceof k.DesktopDragAndDropData||r&&!r.isDirectory&&n.dataTransfer.setData("DownloadURL",[c.MIME_BINARY,r.name,r.resource.toString()].join(":"))},e.prototype.onDragOver=function(e,t,n,i){var r=i&&(i.ctrlKey&&!g.isMacintosh||i.altKey&&g.isMacintosh),o=t instanceof k.DesktopDragAndDropData;if(this.contextService.getOptions().readOnly)return T.DRAG_OVER_REJECT;if(o){for(var s=t.getData(),a=s.types,c=[],u=0;u<a.length;u++)c.push(a[u]);if(0===c.length||!c.some(function(e){return"Files"===e}))return T.DRAG_OVER_REJECT}else{if(t instanceof k.ExternalElementsDragAndDropData)return T.DRAG_OVER_REJECT;var d=t.getData();if(!Array.isArray(d))return T.DRAG_OVER_REJECT;if(d.some(function(e){return e instanceof R.NewStatPlaceholder?!0:e.resource.toString()===n.resource.toString()?!0:r||l.dirname(e.resource.fsPath)!==n.resource.fsPath?l.isEqualOrParent(n.resource.fsPath,e.resource.fsPath)?!0:!1:!0}))return T.DRAG_OVER_REJECT}return n.isDirectory?o||r?T.DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY:T.DRAG_OVER_ACCEPT_BUBBLE_DOWN:n.resource.toString()!==this.contextService.getWorkspace().resource.toString()?o||r?T.DRAG_OVER_ACCEPT_BUBBLE_UP_COPY:T.DRAG_OVER_ACCEPT_BUBBLE_UP:T.DRAG_OVER_REJECT},e.prototype.drop=function(e,t,r,o){var s=this,c=n.Promise.as(null);if(t instanceof k.DesktopDragAndDropData){var u=this.instantiationService.createInstance(w.ImportFileAction,e,r,null);c=u.run({input:{files:t.getData().files}})}else{var h=t.getData()[0],p=o.ctrlKey&&!g.isMacintosh||o.altKey&&g.isMacintosh;c=e.expand(r).then(function(){if(p){var t=s.instantiationService.createInstance(w.DuplicateFileAction,e,h,r);return t.run()}var o=n.Promise.as(null);if(s.textFileService.isDirty(h.resource)){var c=s.textFileService.confirmSave(h.resource);if(c===b.ConfirmResult.SAVE)o=s.textFileService.save(h.resource);else if(c===b.ConfirmResult.DONT_SAVE)o=s.textFileService.revert(h.resource);else if(c===b.ConfirmResult.CANCEL)return n.Promise.as(null)}return o.then(function(){if(s.textFileService.isDirty(h.resource))return s.messageService.show(F.Severity.Warning,i.localize(0,null,I.getPathLabel(h.resource))),n.Promise.as(null);var e=a["default"].file(l.join(r.resource.fsPath,h.name)),t=!1,o=function(e){s.eventService.emit("files.internal:fileChanged",new b.LocalFileChangeEvent(h.clone(),e))};return s.fileService.moveFile(h.resource,e).then(o,function(n){if(n.fileOperationResult!==E.FileOperationResult.FILE_MOVE_CONFLICT)s.messageService.show(F.Severity.Error,n);else{t=!0;var r={message:i.localize(1,null,h.name),detail:i.localize(2,null),primaryButton:i.localize(3,null)};if(s.messageService.confirm(r))return s.fileService.moveFile(h.resource,e,!0).then(function(t){var n=new R.FileStat(e);s.eventService.emit("files.internal:fileChanged",new b.LocalFileChangeEvent(n,null)),o(t)},function(e){s.messageService.show(F.Severity.Error,e)})}})})},d.onUnexpectedError)}this.progressService.showWhile(c,800),c.done(null,d.onUnexpectedError)},e=__decorate([__param(0,F.IMessageService),__param(1,M.IWorkspaceContextService),__param(2,P.IEventService),__param(3,W.IProgressService),__param(4,E.IFileService),__param(5,N.IInstantiationService),__param(6,b.ITextFileService)],e)}();t.FileDragAndDrop=$});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/explorerView",["require","exports","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/common/uri","vs/base/common/async","vs/base/common/errors","vs/base/common/paths","vs/workbench/browser/actionBarRegistry","vs/base/parts/tree/browser/treeImpl","vs/workbench/browser/events","vs/platform/files/common/files","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/views/explorerViewer","vs/base/common/lifecycle","vs/base/browser/dom","vs/workbench/browser/viewlet","vs/workbench/parts/files/browser/views/explorerViewModel","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/progress/common/progress","vs/platform/workspace/common/workspace","vs/platform/contextview/browser/contextView","vs/platform/message/common/message"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x){var A=function(e){function t(n,i,r,s,a,c,u,l,d,h,p,f,m,v){e.call(this,i,!1,"explorerView",s,a),this.instantiationService=c,this.eventService=u,this.storageService=l,this.contextService=d,this.progressService=h,this.editorService=p,this.fileService=f,this.partService=m,this.configurationService=v,this.workspace=d.getWorkspace(),this.settings=r,this.viewletState=n,this.actionRunner=i,this.explorerRefreshDelayer=new o.ThrottledDelayer(t.EXPLORER_FILE_CHANGES_REFRESH_DELAY),this.explorerImportDelayer=new o.ThrottledDelayer(t.EXPLORER_IMPORT_REFRESH_DELAY)}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var n=i.$("div.title").appendTo(t);i.$("span").text(this.workspace.name).appendTo(n)},t.prototype.renderBody=function(t){this.treeContainer=e.prototype.renderViewTree.call(this,t),v.addClass(this.treeContainer,"explorer-folders-view"),this.tree=this.createViewer(i.$(this.treeContainer)),this.fillToolBar()},t.prototype.fillToolBar=function(){var e=[];e.push(this.instantiationService.createInstance(h.NewFileAction,this.getViewer(),null)),e.push(this.instantiationService.createInstance(h.NewFolderAction,this.getViewer(),null)),e.push(this.instantiationService.createInstance(h.RefreshViewExplorerAction,this,"explorer-action refresh-explorer")),e.push(this.instantiationService.createInstance(g.CollapseAction,this.getViewer(),!0,"explorer-action collapse-explorer"));for(var t=0;t<e.length;t++){var n=e[t];n.order=10*(t+1)}this.toolBar.setActions(c.prepareActions(e),[])()},t.prototype.create=function(){var e=this;return this.configurationService.loadConfiguration().then(function(t){return e.onConfigurationUpdated(t),e.refresh(!1,!1).then(function(){e.toDispose.push(e.eventService.addListener2(l.EventType.EDITOR_INPUT_CHANGING,function(t){return e.onEditorInputChanging(t)})),e.toDispose.push(e.configurationService.addListener2(S.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationUpdated(t.config,!0)}))})})},t.prototype.onEditorInputChanging=function(e){if(this.partService.isCreated()||!e.editorOptions||!e.editorOptions.preserveFocus){var n=!0;if(e.editorInput&&e.editorInput instanceof p.FileEditorInput){var i=e.editorInput;this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]=i.getResource().toString(),this.isVisible&&this.contextService.isInsideWorkspace(i.getResource())&&(this.select(i.getResource(),!1).done(null,s.onUnexpectedError),n=!1)}this.isVisible&&n&&(this.explorerViewer.setSelection([]),this.explorerViewer.setFocus())}},t.prototype.onConfigurationUpdated=function(e,t){var n=!1;this.filter&&(n=this.filter.updateConfiguration(e)),t&&n&&this.refresh(!1,!1).done(null,s.onUnexpectedError)},t.prototype.focus=function(){e.prototype.focus.call(this);var t=this.editorService.getActiveEditorInput();t&&t instanceof p.FileEditorInput||this.openFocusedElement()},t.prototype.setVisible=function(i){var o=this;return e.prototype.setVisible.call(this,i).then(function(){if(i){var e=n.Promise.as(null);o.shouldRefresh&&(e=o.refresh(!1,!1),o.shouldRefresh=!1);var a=o.getActiveEditorInputResource();if(a)return e.then(function(){return o.select(a)});if(!o.partService.isCreated())return n.Promise.as(null);var c,u=o.getInput();if(o.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]&&(c=r["default"].parse(o.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE])),c&&u&&u.find(c)){var l=o.instantiationService.createInstance(p.FileEditorInput,c,void 0,void 0);return o.openOrFocusEditor(l).done(null,s.onUnexpectedError),e}return e.then(function(){o.openFocusedElement()})}})},t.prototype.openFocusedElement=function(){var e=this.explorerViewer.getFocus();if(e&&!e.isDirectory){var t=this.instantiationService.createInstance(p.FileEditorInput,e.resource,e.mime,void 0);return this.openOrFocusEditor(t).done(null,s.onUnexpectedError),!0}return!1},t.prototype.openOrFocusEditor=function(e){var t=this.editorService.getVisibleEditors();if(t)for(var n=0;n<t.length;n++){var i=t[n];if(e.matches(i.input))return this.editorService.focusEditor(i)}return this.editorService.openEditor(e)},t.prototype.getActiveEditorInputResource=function(){var e=this.editorService.getActiveEditorInput();return e&&e instanceof p.FileEditorInput?e.getResource():null},t.prototype.getInput=function(){return this.explorerViewer?this.explorerViewer.getInput():null},t.prototype.createViewer=function(e){var t=this,n=this.instantiationService.createInstance(f.FileDataSource),i=this.instantiationService.createInstance(f.FileRenderer,this.viewletState,this.actionRunner),r=this.instantiationService.createInstance(f.FileController,this.viewletState),o=new f.FileSorter;this.filter=this.instantiationService.createInstance(f.FileFilter);var s=this.instantiationService.createInstance(f.FileDragAndDrop);return this.explorerViewer=new u.Tree(e.getHTMLElement(),{dataSource:n,renderer:i,controller:r,sorter:o,filter:this.filter,dnd:s},{autoExpandSingleChildren:!0}),this.toDispose.push(m.toDisposable(function(){return i.dispose()})),this.toDispose.push(this.eventService.addListener2("files.internal:fileChanged",function(e){return t.onLocalFileChange(e)})),this.toDispose.push(this.eventService.addListener2(d.EventType.FILE_CHANGES,function(e){return t.onFileChanges(e)})),this.explorerViewer},t.prototype.onLocalFileChange=function(e){var t,n,i,o,c=this;if(e.gotAdded()){var u=e.getAfter();if(i=r["default"].file(a.dirname(u.resource.fsPath)),o=this.getInput().find(i)){var l=y.FileStat.create(u);o.addChild(l);var d=function(){return c.explorerViewer.refresh(o).then(function(){return c.reveal(l,.5).then(function(){if(c.explorerViewer.setFocus(l),!l.isDirectory){var e=c.instantiationService.createInstance(p.FileEditorInput,l.resource,l.mime,void 0);return c.editorService.openEditor(e)}})})};e instanceof h.FileImportedEvent?this.explorerImportDelayer.trigger(d).done(null,s.onUnexpectedError):d().done(null,s.onUnexpectedError)}}else if(e.gotMoved()){var f=e.getBefore(),m=e.getAfter(),v=r["default"].file(a.dirname(f.resource.fsPath)),g=r["default"].file(a.dirname(m.resource.fsPath)),_=!1,b=this.explorerViewer.getFocus();if(b&&b.resource&&b.resource.toString()===f.resource.toString()&&(_=!0),v&&g&&v.toString()===g.toString()){if(t=this.getInput().find(f.resource)){if(!t.isDirectory&&!t.mime)return;t.rename(m),n=t.parent,n&&this.explorerViewer.refresh(n).done(function(){_&&c.explorerViewer.setFocus(t)},s.onUnexpectedError)}}else if(v&&g){var E=this.getInput().find(v),S=this.getInput().find(g);t=this.getInput().find(f.resource),E&&S&&t&&t.move(S,function(e){c.explorerViewer.refresh(E,!0).done(e,s.onUnexpectedError)},function(){c.explorerViewer.refresh(S,!0).done(function(){return c.explorerViewer.expand(S)},s.onUnexpectedError)})}}else if(e.gotDeleted()){var w=e.getBefore();t=this.getInput().find(w.resource),t&&t.parent&&(n=t.parent,n.removeChild(t),this.explorerViewer.refresh(n).done(function(){c.explorerViewer.DOMFocus()},s.onUnexpectedError))}else if(e instanceof h.FileImportedEvent){var C=e.getAfter();i=r["default"].file(a.dirname(C.resource.fsPath)),o=this.getInput().find(i),o&&this.explorerViewer.refresh(o).then(function(){var e=c.instantiationService.createInstance(p.FileEditorInput,C.resource,C.mime,void 0);return c.editorService.openEditor(e)}).done(null,s.onUnexpectedError)}else this.workspace&&e.gotUpdated()&&e.getAfter().resource.toString()===this.workspace.resource.toString()&&!this.explorerViewer.getHighlight()&&this.refreshFromEvent()},t.prototype.onFileChanges=function(e){var i=this,o=this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE];o&&e.contains(r["default"].parse(o),d.FileChangeType.DELETED)&&(this.settings[t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE]=null),n.Promise.timeout(t.EXPLORER_FILE_CHANGES_REACT_DELAY).then(function(){!i.shouldRefresh&&i.shouldRefreshFromEvent(e)&&i.refreshFromEvent()})},t.prototype.shouldRefreshFromEvent=function(e){if(e=this.filterToAddRemovedOnWorkspacePath(e,function(e,t){return".git"!==t[0]?!0:1===t.length}),e.gotAdded()||e.gotDeleted()){var t=e.getAdded(),n=e.getDeleted(),i=this.getInput();if(!i)return!1;for(var o={},s=0;s<t.length;s++){var c=t[s];if(this.contextService.isInsideWorkspace(c.resource)){var u=a.dirname(c.resource.fsPath);if(!o[u]){var l=i.find(r["default"].file(u));if(l&&l.isDirectoryResolved&&!i.find(c.resource))return!0;l&&l.isDirectoryResolved||(o[u]=!0)}}}for(var d=0;d<n.length;d++){var h=n[d];if(this.contextService.isInsideWorkspace(h.resource)&&i.find(h.resource))return!0}}return!1},t.prototype.filterToAddRemovedOnWorkspacePath=function(e,t){var n=this;return new d.FileChangesEvent(e.changes.filter(function(e){if(e.type===d.FileChangeType.UPDATED)return!1;var i=n.contextService.toWorkspaceRelativePath(e.resource);if(!i)return!1;var r=i.split(/\//);return t(e,r)}))},t.prototype.refreshFromEvent=function(){var e=this;this.isVisible?this.explorerRefreshDelayer.trigger(function(){return e.explorerViewer.getHighlight()?n.Promise.as(null):e.refresh(!1,!1)}).done(null,s.onUnexpectedError):this.shouldRefresh=!0},t.prototype.refresh=function(e,i,o){var s=this,a=this.getInput(),c=[],u=[];if(this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES]&&(u=this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES].map(function(e){return r["default"].parse(e)})),a)this.getResolvedDirectories(a,c);else{var l=this.getActiveEditorInputResource();l&&c.push(l),u.length&&c.push.apply(c,u)}var d;if(i&&(d=this.getActiveEditorInputResource(),!d)){var h=this.explorerViewer.getSelection();h&&1===h.length&&(d=h[0].resource)}var p={resolveTo:c},f=this.fileService.resolveFile(this.workspace.resource,p).then(function(t){var i,r=y.FileStat.create(t,p.resolveTo);return a?(y.FileStat.mergeLocalWithDisk(r,a),i=s.explorerViewer.refresh(a)):i=s.explorerViewer.setInput(r).then(function(){return u?s.explorerViewer.expandAll(u.map(function(e){return s.getInput().find(e)})):n.Promise.as(null)}),i.then(function(){var t;return t=d?s.select(d):n.Promise.as(null),t.then(function(){e&&s.explorerViewer.DOMFocus()})})},function(e){return n.Promise.wrapError(e)});return this.progressService.showWhile(f,o?0:this.partService.isCreated()?800:3200),f},t.prototype.getResolvedDirectories=function(e,t){if(e.isDirectoryResolved){if(e.resource.toString()!==this.workspace.resource.toString()){for(var n=t.length-1;n>=0;n--){var i=t[n];0===e.resource.toString().indexOf(i.toString())&&t.splice(n)}t.push(e.resource)}for(var n=0;n<e.children.length;n++){var r=e.children[n];this.getResolvedDirectories(r,t)}}},t.prototype.select=function(e,t){var i=this;if(void 0===t&&(t=!0),!e||e.toString()===this.workspace.resource.toString())return n.Promise.as(null);for(var r=this.explorerViewer.getSelection(),o=0;o<r.length;o++)if(r[o].resource.toString()===e.toString())return t?this.reveal(r[o],.5):n.Promise.as(null);var s=this.getInput();if(!s)return n.Promise.as(null);var a=s.find(e);if(a)return this.doRevealAndSelect(a);var c={resolveTo:[e]};return this.fileService.resolveFile(this.workspace.resource,c).then(function(t){var n=y.FileStat.create(t,c.resolveTo);return y.FileStat.mergeLocalWithDisk(n,s),i.explorerViewer.refresh(s).then(function(){return i.doRevealAndSelect(s.find(e))})},function(e){return i.messageService.show(x.Severity.Error,e);
})},t.prototype.doRevealAndSelect=function(e){var t=this;return e&&(this.filter.isVisible(this.tree,e)||(e=e.parent))?this.reveal(e,.5).then(function(){e.isDirectory||t.explorerViewer.setSelection([e]),t.explorerViewer.setFocus(e)}):n.Promise.as(null)},t.prototype.shutdown=function(){var n=this,i=this.getInput();if(i){var r=this.explorerViewer.getExpandedElements().filter(function(e){return e.resource.toString()!==n.workspace.resource.toString()}).map(function(e){return e.resource.toString()});this.settings[t.MEMENTO_EXPANDED_FOLDER_RESOURCES]=r}e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.toolBar&&this.toolBar.dispose(),e.prototype.dispose.call(this)},t.EXPLORER_FILE_CHANGES_REACT_DELAY=500,t.EXPLORER_FILE_CHANGES_REFRESH_DELAY=100,t.EXPLORER_IMPORT_REFRESH_DELAY=300,t.MEMENTO_LAST_ACTIVE_FILE_RESOURCE="explorer.memento.lastActiveFileResource",t.MEMENTO_EXPANDED_FOLDER_RESOURCES="explorer.memento.expandedFolderResources",t=__decorate([__param(3,x.IMessageService),__param(4,k.IContextMenuService),__param(5,C.IInstantiationService),__param(6,w.IEventService),__param(7,E.IStorageService),__param(8,I.IWorkspaceContextService),__param(9,T.IProgressService),__param(10,_.IWorkbenchEditorService),__param(11,d.IFileService),__param(12,b.IPartService),__param(13,S.IConfigurationService)],t)}(g.CollapsibleViewletView);t.ExplorerView=A});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/workingFilesModel",["require","exports","vs/base/common/arrays","vs/base/common/uri","vs/base/common/eventSource","vs/base/common/paths","vs/base/common/errors","vs/base/common/labels","vs/base/common/lifecycle","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/browser/events","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/workbench/common/editor","vs/platform/storage/common/storage","vs/platform/event/common/event"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y){var _=function(){function e(e,t,n,i,o,s){this.storageService=e,this.eventService=t,this.partService=n,this.contextService=i,this.editorService=o,this.untitledEditorService=s,this.pathLabelProvider=new a.PathLabelProvider(this.contextService),this.entries=[],this.toDispose=[],this.mapEntryToResource=Object.create(null),this._onModelChange=new r.EventSource,this._onWorkingFileChange=new r.EventSource,this.load(),this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.eventService.addListener2("files.internal:fileChanged",function(t){return e.onLocalFileChange(t)})),this.toDispose.push(this.eventService.addListener2(l.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledFileDeleted(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toDispose.push(this.eventService.addListener2(u.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toDispose.push(this.eventService.addListener2(d.EventType.EDITOR_SET_INPUT_ERROR,function(t){return e.onEditorInputSetError(t)}))},e.prototype.onUntitledFileDirty=function(e){this.updateDirtyState(e.resource,!0)},e.prototype.onUntitledFileDeleted=function(e){var t=this.mapEntryToResource[e.resource.toString()];t&&this.removeEntry(t)},e.prototype.onTextFileDirty=function(e){this.contextService.isAutoSaveEnabled()?this.addEntry(e.getAfter().resource):this.updateDirtyState(e.getAfter().resource,!0)},e.prototype.onTextFileSaveError=function(e){this.updateDirtyState(e.getAfter().resource,!0)},e.prototype.onTextFileSaved=function(e){this.updateDirtyState(e.getAfter().resource,!1)},e.prototype.onTextFileReverted=function(e){this.hasEntry(e.getAfter().resource)&&this.updateDirtyState(e.getAfter().resource,!1)},e.prototype.updateDirtyState=function(e,t){var n=this.addEntry(e),i=n.dirty;n.setDirty(t),i!==t&&this.fireWorkingFileChange(n)},e.prototype.onLocalFileChange=function(e){e.gotMoved()&&this.moveEntry(e.getBefore().resource,e.getAfter().resource)},e.prototype.onFileChanges=function(e){for(var t in this.mapEntryToResource){var n=this.mapEntryToResource[t];!n.dirty&&e.contains(i["default"].parse(t),l.FileChangeType.DELETED)&&this.removeEntry(n)}},e.prototype.onEditorInputSetError=function(e){var t=v.asFileEditorInput(e.editorInput);if(t){var n=this.mapEntryToResource[t.getResource().toString()];n&&!n.dirty&&this.removeEntry(t.getResource())}},Object.defineProperty(e.prototype,"onModelChange",{get:function(){return this._onModelChange.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onWorkingFileChange",{get:function(){return this._onWorkingFileChange.value},enumerable:!0,configurable:!0}),e.prototype.getEntries=function(e){return this.entries},e.prototype.first=function(){return this.entries.length?this.entries.slice(0).sort(e.compare)[0]:null},e.prototype.last=function(){return this.entries.length?this.entries.slice(0).sort(e.compare)[this.entries.length-1]:null},e.prototype.next=function(t){var n=t&&this.findEntry(t);if(n){var i=this.entries.slice(0).sort(e.compare),r=i.indexOf(n);if(r+1<i.length)return i[r+1]}return this.first()},e.prototype.previous=function(t){var n=t&&this.findEntry(t);if(n){var i=this.entries.slice(0).sort(e.compare),r=i.indexOf(n);if(r>0)return i[r-1]}return this.last()},e.prototype.getOutOfWorkspaceContextEntries=function(){var e=this;return this.entries.filter(function(t){return e.isOutOfWorkspace(t.resource)})},e.prototype.isOutOfWorkspace=function(e){if("file"!==e.scheme)return!1;var t=this.contextService.getWorkspace();return!t||!o.isEqualOrParent(e.fsPath,t.resource.fsPath)},e.prototype.count=function(){return this.entries.length},e.prototype.addEntry=function(e){var t;t=e instanceof b?e.resource:i["default"].isURI(e)?e:e.resource;var n=this.findEntry(t);if(n)return n;var r;return r=e instanceof b?e:this.createEntry(t),this.entries.push(r),this.mapEntryToResource[r.resource.toString()]=r,this.fireModelChange({added:[r]}),r},e.prototype.createEntry=function(e,t,n){return new b(e,"number"==typeof t?t:this.entries.length,n)},e.prototype.moveEntry=function(e,t){var n=this.findEntry(e);if(n&&!this.findEntry(t)){var i=this.createEntry(t,n.index,n.dirty);this.entries.push(i),this.mapEntryToResource[t.toString()]=i,this.entries.splice(this.entries.indexOf(n),1),delete this.mapEntryToResource[e.toString()],this.fireModelChange({added:[i],removed:[n]})}},e.prototype.removeEntry=function(t){var n=t instanceof b?t.resource:t,i=this.indexOf(n);if(i>=0){var r=this.entries.splice(i,1)[0];delete this.mapEntryToResource[n.toString()];for(var o=this.entries.slice(0).sort(e.compare),s=0,a=0;a<o.length;a++)o[a]!==r&&o[a].setIndex(s++);return this.fireModelChange({removed:[r]}),r}return null},e.prototype.reorder=function(t,i){var r=this.entries.slice(0).sort(e.compare),o=r.indexOf(t),s=r.indexOf(i);n.move(r,o,s);for(var a=0,c=0;c<r.length;c++)r[c].setIndex(a++);this.fireModelChange({})},e.prototype.clear=function(){var e=this.entries;this.entries=[],this.mapEntryToResource=Object.create(null),this.fireModelChange({removed:e})},e.prototype.hasEntry=function(e){return!!this.findEntry(e)},e.prototype.findEntry=function(e){return this.mapEntryToResource[e.toString()]},e.prototype.indexOf=function(e){var t=this.findEntry(e);return t?this.entries.indexOf(t):-1},e.prototype.shutdown=function(){var t=this.entries.slice(0).sort(e.compare),n=0,i=[];t.forEach(function(e){e.isUntitled||i.push({resource:e.resource.toString(),index:n++})}),this.storageService.store(e.STORAGE_KEY,JSON.stringify(i),g.StorageScope.WORKSPACE)},e.prototype.load=function(){var t=this,r=this.storageService.get(e.STORAGE_KEY,g.StorageScope.WORKSPACE);if(r){var o=JSON.parse(r);o.forEach(function(e){t.addEntry(new b(i["default"].parse(e.resource),e.index,!1))})}var a=this.contextService.getOptions(),c=a&&a.filesToOpen||[];n.distinct(c,function(e){return e.resource.toString()}).map(function(e){return e.resource}).filter(function(e){return"untitled"===e.scheme||t.isOutOfWorkspace(e)}).forEach(function(e){t.addEntry(e)}),this.partService.joinCreation().done(function(){t.untitledEditorService&&t.untitledEditorService.getAll().map(function(e){return e.getResource()}).filter(function(e){return!t.untitledEditorService.hasAssociatedFilePath(e)}).forEach(function(e){t.addEntry(e)})},s.onUnexpectedError)},e.prototype.dispose=function(){this.toDispose=c.disposeAll(this.toDispose)},e.prototype.fireModelChange=function(e){this._onModelChange.fire(e)},e.prototype.fireWorkingFileChange=function(e){this._onWorkingFileChange.fire(e)},e.compare=function(e,t){return e.index-t.index},e.STORAGE_KEY="workingFiles.model.entries",e=__decorate([__param(0,g.IStorageService),__param(1,y.IEventService),__param(2,f.IPartService),__param(3,m.IWorkspaceContextService),__param(4,p.IWorkbenchEditorService),__param(5,h.IUntitledEditorService)],e)}();t.WorkingFilesModel=_;var b=function(){function e(e,t,n){this._resource=e,this._index=t,this._dirty=n}return Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(e){this._index=e},Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),e.prototype.setDirty=function(e){this._dirty=e},Object.defineProperty(e.prototype,"CLASS_ID",{get:function(){return u.WORKING_FILES_MODEL_ENTRY_CLASS_ID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFile",{get:function(){return"file"===this._resource.scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUntitled",{get:function(){return"untitled"===this._resource.scheme},enumerable:!0,configurable:!0}),e}();t.WorkingFileEntry=b});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/textFileServices",["require","exports","vs/base/common/winjs.base","vs/workbench/parts/files/browser/editors/fileEditorInput","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/parts/files/common/files","vs/workbench/browser/events","vs/workbench/parts/files/browser/workingFilesModel","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(){function e(e,t,n,i){this.eventService=e,this.contextService=t,this.lifecycleService=i,this.serviceId=o.ITextFileService,this.workingFilesModel=n.createInstance(a.WorkingFilesModel),this.registerListeners()}return e.prototype.registerListeners=function(){var e=this;this.listenerToUnbind=this.eventService.addListener(s.EventType.WORKBENCH_OPTIONS_CHANGED,function(){return e.onOptionsChanged()}),this.lifecycleService&&(this.lifecycleService.addBeforeShutdownParticipant(this),this.lifecycleService.onShutdown.add(this.dispose,this))},e.prototype.onOptionsChanged=function(){r.CACHE.getAll().forEach(function(e){return e.updateOptions()})},e.prototype.getDirty=function(e){return this.getDirtyFileModels(e).map(function(e){return e.getResource()})},e.prototype.isDirty=function(e){return r.CACHE.getAll(e).some(function(e){return e.isDirty()})},e.prototype.save=function(e){return this.saveAll([e]).then(function(e){return 1===e.results.length&&e.results[0].success})},e.prototype.saveAll=function(e){var t=this.getDirtyFileModels(Array.isArray(e)?e:void 0),i=Object.create(null);return t.forEach(function(e){i[e.getResource().toString()]={source:e.getResource()}}),n.Promise.join(t.map(function(e){return e.save().then(function(){e.isDirty()||(i[e.getResource().toString()].success=!0)})})).then(function(e){return{results:Object.keys(i).map(function(e){return i[e]})}})},e.prototype.getFileModels=function(e){var t=this;if(Array.isArray(e)){var n=[];return e.forEach(function(e){n.push.apply(n,t.getFileModels(e))}),n}return r.CACHE.getAll(e)},e.prototype.getDirtyFileModels=function(e){return this.getFileModels(e).filter(function(e){return e.isDirty()})},e.prototype.confirmSave=function(e){throw new Error("Unsupported")},e.prototype.revert=function(e,t){return this.revertAll([e],t).then(function(e){return 1===e.results.length&&e.results[0].success})},e.prototype.revertAll=function(e,t){var r=this,o=t?this.getFileModels(e):this.getDirtyFileModels(e),s=Object.create(null);return o.forEach(function(e){s[e.getResource().toString()]={source:e.getResource()}}),n.Promise.join(o.map(function(e){return e.revert().then(function(){e.isDirty()||(s[e.getResource().toString()].success=!0)},function(t){if(t.fileOperationResult!==u.FileOperationResult.FILE_NOT_FOUND)return n.Promise.wrapError(t);var o=i.FileEditorInput.getAll(e.getResource());o.forEach(function(e){return e.dispose(!0)}),r.workingFilesModel.removeEntry(e.getResource()),s[e.getResource().toString()].success=!0})})).then(function(e){return{results:Object.keys(s).map(function(e){return s[e]})}})},e.prototype.beforeShutdown=function(){return this.workingFilesModel.shutdown(),!1},e.prototype.getWorkingFilesModel=function(){return this.workingFilesModel},e.prototype.dispose=function(){this.listenerToUnbind(),this.workingFilesModel.dispose(),r.CACHE.clear()},e=__decorate([__param(0,l.IEventService),__param(1,c.IWorkspaceContextService),__param(2,d.IInstantiationService),__param(3,h.ILifecycleService)],e)}();t.TextFileService=p});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/workingFilesViewer",["require","exports","vs/base/common/winjs.base","vs/base/common/platform","vs/base/browser/builder","vs/base/parts/tree/common/tree","vs/base/browser/ui/filelabel/fileLabel","vs/base/parts/tree/browser/treeDnd","vs/base/parts/tree/browser/treeDefaults","vs/base/common/errors","vs/base/common/mime","vs/base/common/paths","vs/base/browser/ui/actionbar/actionbar","vs/base/parts/tree/browser/actionsRenderer","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/common/files","vs/workbench/parts/files/browser/workingFilesModel","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/contextview/browser/contextView","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C){var T="__WORKING_FILES_ROOT",I=function(){function e(e){}return e.prototype.getId=function(e,t){return t instanceof g.WorkingFileEntry?t.resource.toString():T},e.prototype.hasChildren=function(e,t){return t instanceof g.WorkingFilesModel?t.count()>0:!1},e.prototype.getChildren=function(e,t){return t instanceof g.WorkingFilesModel?n.Promise.as(t.getEntries()):n.Promise.as([])},e.prototype.getParent=function(e,t){return n.Promise.as(null)},e=__decorate([__param(0,S.INullService)],e)}();t.WorkingFilesDataSource=I;var k=function(){function e(e){}return e.prototype.compare=function(e,t,n){return g.WorkingFilesModel.compare(t,n)},e=__decorate([__param(0,S.INullService)],e)}();t.WorkingFilesSorter=k;var x=function(e){function t(t,n,i,r){e.call(this,{actionProvider:n,actionRunner:i}),this.contextService=r}return __extends(t,e),t.prototype.getHeight=function(e,n){return t.FILE_ITEM_HEIGHT},t.prototype.renderContents=function(e,t,n){var i=t,o=r.$(n).clearChildren(),a=r.$(".working-files-item").appendTo(o),c=r.$(".working-files-item-label").appendTo(a);return new s.FileLabel(c.getHTMLElement(),i.resource,this.contextService),i.dirty?r.$(n.parentElement).addClass("working-file-dirty"):r.$(n.parentElement).removeClass("working-file-dirty"),null},t.FILE_ITEM_HEIGHT=24,t=__decorate([__param(3,b.IWorkspaceContextService)],t)}(p.ActionsRenderer);t.WorkingFilesRenderer=x;var A=function(e){function t(t,n,i,r){e.call(this),this.instantiationService=n,this.contextService=i,this.untitledEditorService=r,this.model=t}return __extends(t,e),t.prototype.hasActions=function(t,n){return n instanceof g.WorkingFileEntry||e.prototype.hasActions.call(this,t,n)},t.prototype.getActions=function(e,t){var i=[];return t instanceof g.WorkingFileEntry&&i.push(this.instantiationService.createInstance(m.CloseWorkingFileAction,this.model,t)),n.Promise.as(i)},t.prototype.hasSecondaryActions=function(t,n){return n instanceof g.WorkingFileEntry||e.prototype.hasActions.call(this,t,n)},t.prototype.getSecondaryActions=function(t,n){var i=this;return e.prototype.getSecondaryActions.call(this,t,n).then(function(e){if(n instanceof g.WorkingFileEntry){var r=i.instantiationService.createInstance(m.OpenToSideAction,t,n.resource,!1);e.unshift(r);var o=i.contextService.isAutoSaveEnabled();if((!o||n.dirty)&&n.isFile){e.push(new h.Separator);var s=i.instantiationService.createInstance(m.SaveFileAction,m.SaveFileAction.ID,m.SaveFileAction.LABEL);s.setResource(n.resource),e.push(s);var a=i.instantiationService.createInstance(m.RevertFileAction,m.RevertFileAction.ID,m.RevertFileAction.LABEL);a.setResource(n.resource),e.push(a)}if(n.isUntitled){if(e.push(new h.Separator),i.untitledEditorService.hasAssociatedFilePath(n.resource)){var c=i.instantiationService.createInstance(m.SaveFileAction,m.SaveFileAction.ID,m.SaveFileAction.LABEL);c.setResource(n.resource),e.push(c)}var u=i.instantiationService.createInstance(m.SaveFileAsAction,m.SaveFileAsAction.ID,m.SaveFileAsAction.LABEL);u.setResource(n.resource),e.push(u)}if(!n.isUntitled){e.push(new h.Separator);var l=i.instantiationService.createInstance(m.CompareResourcesAction,n.resource,t);l._isEnabled()&&e.push(l),e.push(i.instantiationService.createInstance(m.SelectResourceForCompareAction,n.resource,t))}e.push(new h.Separator),e.push(i.instantiationService.createInstance(m.CloseWorkingFileAction,i.model,n))}return e})},t=__decorate([__param(1,S.IInstantiationService),__param(2,b.IWorkspaceContextService),__param(3,y.IUntitledEditorService)],t)}(f.ContributableActionProvider);t.WorkingFilesActionProvider=A;var R=function(e){function t(t,n){e.call(this),this.contextService=n,this.model=t}return __extends(t,e),t.prototype.getDragURI=function(e,t){return t.resource.toString()},t.prototype.onDragStart=function(e,t,n){var i=t.getData(),r=null;if(Array.isArray(i)&&(r=i[0]),!(t instanceof a.DesktopDragAndDropData)&&r&&r.isFile){var o=d.basename(r.resource.fsPath);n.dataTransfer.setData("DownloadURL",[l.MIME_BINARY,o,r.resource.toString()].join(":"))}},t.prototype.onDragOver=function(e,t,n,i){if(!(n instanceof g.WorkingFileEntry))return o.DRAG_OVER_REJECT;if(t instanceof a.ExternalElementsDragAndDropData){var r=v.asFileResource(t.getData()[0]);return r?r.isDirectory?o.DRAG_OVER_REJECT:o.DRAG_OVER_ACCEPT:o.DRAG_OVER_REJECT}if(t instanceof a.DesktopDragAndDropData)return o.DRAG_OVER_REJECT;if(!(t instanceof a.ElementsDragAndDropData))return o.DRAG_OVER_REJECT;var s,c=n.resource,u=t.getData()[0];if(u instanceof g.WorkingFileEntry)s=u.resource;else{var l=v.asFileResource(u);if(!l)return o.DRAG_OVER_REJECT;s=l.resource}return c&&s?c.toString()===s.toString()?o.DRAG_OVER_REJECT:o.DRAG_OVER_ACCEPT:o.DRAG_OVER_REJECT},t.prototype.drop=function(e,t,n,i){var r;if(t instanceof a.ExternalElementsDragAndDropData){var o=v.asFileResource(t.getData()[0]);r=this.model.addEntry(o.resource)}else{var s=t.getData();Array.isArray(s)&&(r=s[0])}r&&this.model.reorder(r,n)},t=__decorate([__param(1,b.IWorkspaceContextService)],t)}(c.DefaultDragAndDrop);t.WorkingFilesDragAndDrop=R;var D=function(e){function t(t,n,r,o,s,a){e.call(this,{clickBehavior:c.ClickBehavior.ON_MOUSE_DOWN}),this.editorService=r,this.instantiationService=o,this.contextMenuService=s,this.telemetryService=a,this.didCatchEnterDown=!1,this.model=t,this.actionProvider=n,this.downKeyBindingDispatcher.set(C.CommonKeybindings.ENTER,this.onEnterDown.bind(this)),this.upKeyBindingDispatcher.set(C.CommonKeybindings.ENTER,this.onEnterUp.bind(this)),i.isMacintosh?this.upKeyBindingDispatcher.set(C.CommonKeybindings.WINCTRL_ENTER,this.onModifierEnterUp.bind(this)):this.upKeyBindingDispatcher.set(C.CommonKeybindings.CTRLCMD_ENTER,this.onModifierEnterUp.bind(this))}return __extends(t,e),t.prototype.onClick=function(t,n,i){if(n instanceof g.WorkingFileEntry&&i.browserEvent&&1===i.browserEvent.button){var r=this.instantiationService.createInstance(m.CloseWorkingFileAction,this.model,n);return r.run().done(function(){r.dispose()},u.onUnexpectedError),!0}return e.prototype.onClick.call(this,t,n,i)},t.prototype.onLeftClick=function(e,t,n,i){void 0===i&&(i="mouse");var r={origin:i},o="mouse"===i&&2===n.detail;if(t instanceof g.WorkingFilesModel)return e.clearFocus(r),e.clearSelection(r),!1;var s=n&&n.browserEvent&&"mousedown"===n.browserEvent.type;if(s||n.preventDefault(),n.stopPropagation(),e.DOMFocus(),n.shiftKey){var a=e.getFocus(),c=e.getSelection();(c&&c.length>0&&c[0]===t||a===t)&&(e.clearSelection(r),e.clearFocus(r))}else{var u=!o;e.setFocus(t,r),o&&n.preventDefault(),e.setSelection([t],r),this.openEditor(t,u,n&&(n.ctrlKey||n.metaKey))}return!0},t.prototype.onEnterDown=function(e,t){var n={origin:"keyboard"},i=e.getFocus();return i&&(e.setFocus(i,n),this.openEditor(i,!1,!1)),this.didCatchEnterDown=!0,!0},t.prototype.onEnterUp=function(e,t){if(!this.didCatchEnterDown)return!1;var n=e.getFocus();return n&&this.openEditor(n,!1,!1),this.didCatchEnterDown=!1,!0},t.prototype.onModifierEnterUp=function(e,t){var n=e.getFocus();return n&&this.openEditor(n,!1,!0),this.didCatchEnterDown=!1,!0},t.prototype.onContextMenu=function(e,t,n){var i=this;if(n.target&&n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;n.preventDefault(),n.stopPropagation(),e.setFocus(t);var r={x:n.posx+1,y:n.posy};return this.contextMenuService.showContextMenu({getAnchor:function(){return r},getActions:function(){return i.actionProvider.getSecondaryActions(e,t)},getKeyBinding:function(e){return i.getKeyBinding(e)},onHide:function(t){t&&e.DOMFocus()}}),!0},t.prototype.getKeyBinding=function(e){return m.keybindingForAction(e.id)},t.prototype.openEditor=function(e,t,n){e&&(this.telemetryService.publicLog("workbenchActionExecuted",{id:"workbench.files.openFile",from:"workingSet"}),this.editorService.openEditor({resource:e.resource,options:{preserveFocus:t}},n).done(null,u.onUnexpectedError))},t=__decorate([__param(2,_.IWorkbenchEditorService),__param(3,S.IInstantiationService),__param(4,E.IContextMenuService),__param(5,w.ITelemetryService)],t)}(c.DefaultController);t.WorkingFilesController=D});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/views/workingFilesView",["require","exports","vs/nls!vs/workbench/parts/files/browser/views/workingFilesView","vs/base/browser/builder","vs/base/parts/tree/browser/treeImpl","vs/workbench/common/editor","vs/base/browser/ui/splitview/splitview","vs/workbench/parts/files/common/files","vs/base/browser/dom","vs/base/common/errors","vs/workbench/browser/events","vs/workbench/browser/viewlet","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/browser/views/workingFilesViewer","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/configuration/common/configuration","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/contextview/browser/contextView","vs/platform/message/common/message"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){var E=function(e){function t(n,i,r,o,s,a,c,u,l,d){e.call(this,n,t.computeExpandedBodySize(u.getWorkingFilesModel()),!!i[t.MEMENTO_COLLAPSED],"workingFilesView",a,c),this.eventService=r,this.contextService=o,this.instantiationService=s,this.editorService=l,this.configurationService=d,this.textFileService=u,this.settings=i,this.model=this.textFileService.getWorkingFilesModel(),this.lastDirtyCount=0}return __extends(t,e),t.prototype.renderHeader=function(t){e.prototype.renderHeader.call(this,t);var r=i.$("div.title").appendTo(t);i.$("span").text(n.localize(0,null)).appendTo(r),this.dirtyCountElement=i.$("div.monaco-count-badge").appendTo(r).hide().getHTMLElement(),this.updateDirtyIndicator()},t.prototype.getActions=function(){return[this.instantiationService.createInstance(h.SaveAllAction,h.SaveAllAction.ID,h.SaveAllAction.LABEL),this.instantiationService.createInstance(h.CloseWorkingFileAction,this.model,null)]},t.prototype.renderBody=function(t){this.treeContainer=e.prototype.renderViewTree.call(this,t),c.addClass(this.treeContainer,"explorer-working-files"),this.createViewer(i.$(this.treeContainer))},t.prototype.create=function(){var t=this;return this.configurationService.loadConfiguration().then(function(n){return t.onConfigurationUpdated(n),t.registerListeners(),t.highlightInput(t.editorService.getActiveEditorInput()),e.prototype.create.call(t)})},t.prototype.onConfigurationUpdated=function(e){var n=e&&e.explorer&&e.explorer.workingFiles&&e.explorer.workingFiles.maxVisible;"number"==typeof n?this.maxVisibleWorkingFiles=n:this.maxVisibleWorkingFiles=t.DEFAULT_MAX_VISIBLE_FILES;var i=e&&e.explorer&&e.explorer.workingFiles&&e.explorer.workingFiles.dynamicHeight;"boolean"==typeof i?this.dynamicHeight=i:this.dynamicHeight=t.DEFAULT_DYNAMIC_HEIGHT,this.expandedBodySize=this.getExpandedBodySize(this.model)},t.prototype.registerListeners=function(){var e=this;this.model.onModelChange.add(this.onWorkingFilesModelChange,this),this.model.onWorkingFileChange.add(this.onWorkingFileChange,this),this.toDispose.push(this.eventService.addListener2(l.EventType.UNTITLED_FILE_DIRTY,function(t){return e.onUntitledFileDirty()})),this.toDispose.push(this.eventService.addListener2(l.EventType.UNTITLED_FILE_DELETED,function(t){return e.onUntitledFileDeleted()})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toDispose.push(this.eventService.addListener2(a.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.toDispose.push(this.eventService.addListener2(l.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)})),this.toDispose.push(this.configurationService.addListener2(v.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigurationUpdated(t.config)}))},t.prototype.onTextFileDirty=function(e){this.contextService.isAutoSaveEnabled()||this.updateDirtyIndicator()},t.prototype.onTextFileSaved=function(e){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.onTextFileSaveError=function(e){this.updateDirtyIndicator()},t.prototype.onTextFileReverted=function(e){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.onUntitledFileDirty=function(){this.updateDirtyIndicator()},t.prototype.onUntitledFileDeleted=function(){this.lastDirtyCount>0&&this.updateDirtyIndicator()},t.prototype.updateDirtyIndicator=function(){var e=this.textFileService.getDirty().length;this.lastDirtyCount=e,0===e?i.$(this.dirtyCountElement).hide():i.$(this.dirtyCountElement).show().text(n.localize(1,null,e))},t.prototype.onWorkingFilesModelChange=function(e){if(!this.isDisposed&&(this.expandedBodySize=this.getExpandedBodySize(this.model),this.tree)){this.tree.refresh();var t=this.editorService.getActiveEditorInput();this.highlightInput(t)}},t.prototype.onWorkingFileChange=function(e){this.isDisposed||this.tree&&this.tree.refresh(e)},t.prototype.getExpandedBodySize=function(e){return t.computeExpandedBodySize(e,this.maxVisibleWorkingFiles,this.dynamicHeight)},t.computeExpandedBodySize=function(e,n,i){var r=e.count(),o=n;"number"!=typeof o&&(o=t.DEFAULT_MAX_VISIBLE_FILES);var s=i;"boolean"!=typeof s&&(s=t.DEFAULT_DYNAMIC_HEIGHT);var a;return a=s?Math.min(Math.max(o,1),r):Math.max(o,1),a*p.WorkingFilesRenderer.FILE_ITEM_HEIGHT},t.prototype.onEditorInputChanged=function(e){var t=this.editorService.getActiveEditorInput();t===e.editorInput&&this.highlightInput(e.editorInput)},t.prototype.highlightInput=function(e){var t,n=o.getUntitledOrFileResource(e);n&&(t=this.model.findEntry(n)),t?this.highlightEntry(t):this.highlightEntry(null)},t.prototype.highlightEntry=function(e){this.tree.clearFocus(),this.tree.clearSelection(),e&&(this.tree.setFocus(e),this.tree.setSelection([e]),this.tree.reveal(e).done(null,u.onUnexpectedError))},t.prototype.createViewer=function(e){var t=this.instantiationService.createInstance(p.WorkingFilesActionProvider,this.model),n=this.instantiationService.createInstance(p.WorkingFilesRenderer,this.model,t,this.actionRunner),i=this.instantiationService.createInstance(p.WorkingFilesDataSource),o=this.instantiationService.createInstance(p.WorkingFilesController,this.model,t),s=this.instantiationService.createInstance(p.WorkingFilesSorter),a=this.instantiationService.createInstance(p.WorkingFilesDragAndDrop,this.model);return this.tree=new r.Tree(e.getHTMLElement(),{dataSource:i,renderer:n,sorter:s,controller:o,dnd:a},{indentPixels:0,
twistiePixels:8}),this.tree.setInput(this.model),this.tree},t.prototype.shutdown=function(){this.settings[t.MEMENTO_COLLAPSED]=this.state===s.CollapsibleState.COLLAPSED,e.prototype.shutdown.call(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.model.onModelChange.remove(this.onWorkingFilesModelChange,this),this.model.onWorkingFileChange.remove(this.onWorkingFileChange,this)},t.MEMENTO_COLLAPSED="workingFiles.memento.collapsed",t.DEFAULT_MAX_VISIBLE_FILES=9,t.DEFAULT_DYNAMIC_HEIGHT=!0,t=__decorate([__param(2,g.IEventService),__param(3,m.IWorkspaceContextService),__param(4,y.IInstantiationService),__param(5,b.IMessageService),__param(6,_.IContextMenuService),__param(7,a.ITextFileService),__param(8,f.IWorkbenchEditorService),__param(9,v.IConfigurationService)],t)}(d.AdaptiveCollapsibleViewletView);t.WorkingFilesView=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/browser/explorerViewlet",["require","exports","vs/base/common/winjs.base","vs/workbench/common/memento","vs/workbench/parts/files/common/files","vs/workbench/browser/viewlet","vs/base/browser/ui/splitview/splitview","vs/workbench/parts/files/browser/views/explorerViewer","vs/workbench/parts/files/browser/views/explorerView","vs/workbench/parts/files/browser/views/emptyView","vs/workbench/parts/files/browser/views/workingFilesView","vs/platform/storage/common/storage","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry","vs/css!./media/explorerviewlet"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=function(e){function t(t,n,o,s){e.call(this,r.VIEWLET_ID,t),this.contextService=n,this.storageService=o,this.instantiationService=s,this.views=[],this.viewletState=new a.FileViewletState,this.viewletSettings=this.getMemento(o,i.Scope.WORKSPACE)}return __extends(t,e),t.prototype.create=function(t){return e.prototype.create.call(this,t),this.viewletContainer=t.div().addClass("explorer-viewlet"),this.splitView=new s.SplitView(this.viewletContainer.getHTMLElement()),this.addWorkingFilesView(),this.addExplorerView(),n.Promise.join(this.views.map(function(e){return e.create()}))},t.prototype.addWorkingFilesView=function(){this.workingFilesView=this.instantiationService.createInstance(l.WorkingFilesView,this.getActionRunner(),this.viewletSettings),this.splitView.addView(this.workingFilesView),this.views.push(this.workingFilesView)},t.prototype.addExplorerView=function(){var e;this.contextService.getWorkspace()?this.explorerView=e=this.instantiationService.createInstance(c.ExplorerView,this.viewletState,this.getActionRunner(),this.viewletSettings):e=this.instantiationService.createInstance(u.EmptyView),this.splitView.addView(e),this.views.push(e)},t.prototype.refresh=function(e,t,i){return n.Promise.join(this.views.map(function(n){return n.refresh(e,t,i)}))},t.prototype.getExplorerView=function(){return this.explorerView},t.prototype.setVisible=function(t){var i=this;return e.prototype.setVisible.call(this,t).then(function(){return n.Promise.join(i.views.map(function(e){return e.setVisible(t)}))})},t.prototype.focus=function(){e.prototype.focus.call(this),this.explorerView&&this.explorerView.focus()},t.prototype.layout=function(e){this.splitView.layout(e.height)},t.prototype.getSelection=function(){return this.explorerView?this.explorerView.getSelection():this.workingFilesView.getSelection()},t.prototype.getActionRunner=function(){return this.actionRunner||(this.actionRunner=new a.ActionRunner(this.viewletState)),this.actionRunner},t.prototype.shutdown=function(){this.views.forEach(function(e){return e.shutdown()}),e.prototype.shutdown.call(this)},t.prototype.dispose=function(){this.splitView&&this.splitView.dispose()},t=__decorate([__param(0,f.ITelemetryService),__param(1,p.IWorkspaceContextService),__param(2,d.IStorageService),__param(3,h.IInstantiationService)],t)}(o.Viewlet);t.ExplorerViewlet=m});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/electronFileTracker",["require","exports","vs/workbench/parts/files/common/files","vs/platform/files/common/files","vs/workbench/parts/files/browser/fileActions","vs/base/common/platform","vs/base/common/errors","vs/base/common/uri","vs/workbench/browser/events","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/lifecycle/common/lifecycle","remote","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(){function e(e,t,n,i,r,s,a,c){if(this.contextService=e,this.eventService=t,this.partService=n,this.fileService=i,this.textFileService=r,this.instantiationService=s,this.untitledEditorService=a,this.lifecycleService=c,this.toUnbind=[],this.isDocumentedEdited=!1,this.activeOutOfWorkspaceWatchers=Object.create(null),o.platform===o.Platform.Mac){var u=m.getCurrentWindow();u.setDocumentEdited(!1)}this.registerListeners(),this.updateOutOfWorkspaceFileListeners({added:this.textFileService.getWorkingFilesModel().getEntries()})}return e.prototype.registerListeners=function(){var e=this;this.toUnbind.push(this.eventService.addListener(c.EventType.UNTITLED_FILE_DELETED,function(){return e.onUntitledDeletedEvent()})),this.toUnbind.push(this.eventService.addListener(c.EventType.UNTITLED_FILE_DIRTY,function(){return e.onUntitledDirtyEvent()})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_DIRTY,function(t){return e.onTextFileDirty(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_SAVED,function(t){return e.onTextFileSaved(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_SAVE_ERROR,function(t){return e.onTextFileSaveError(t)})),this.toUnbind.push(this.eventService.addListener(n.EventType.FILE_REVERTED,function(t){return e.onTextFileReverted(t)})),this.textFileService.getWorkingFilesModel().onModelChange.add(this.onWorkingFilesModelChange,this),this.toUnbind.push(function(){return e.textFileService.getWorkingFilesModel().onModelChange.remove(e.onWorkingFilesModelChange,e)}),v.on("vscode:openFiles",function(t){var n=[];if(t.filesToOpen&&n.push.apply(n,e.toInputs(t.filesToOpen,!1)),t.filesToCreate&&n.push.apply(n,e.toInputs(t.filesToCreate,!0)),n.length){var i=e.instantiationService.createInstance(r.OpenResourcesAction,n);i.run().done(null,s.onUnexpectedError),i.dispose()}}),this.lifecycleService.onShutdown.add(this.dispose,this)},e.prototype.toInputs=function(e,t){var n=this;return e.map(function(e){var i={resource:t?n.untitledEditorService.createOrGet(a["default"].file(e.filePath)).getResource():a["default"].file(e.filePath)};return!t&&e.lineNumber&&(i.options={selection:{startLineNumber:e.lineNumber,startColumn:e.columnNumber}}),i})},e.prototype.updateOutOfWorkspaceFileListeners=function(e){var t=this,n=e.added?e.added.map(function(e){return e.resource}).filter(function(e){return"file"===e.scheme&&!t.contextService.isInsideWorkspace(e)}):[],i=e.removed?e.removed.map(function(e){return e.resource}).filter(function(e){return"file"===e.scheme&&!t.contextService.isInsideWorkspace(e)}):[];n.forEach(function(e){t.activeOutOfWorkspaceWatchers[e.toString()]||(t.fileService.watchFileChanges(e),t.activeOutOfWorkspaceWatchers[e.toString()]=!0)}),i.forEach(function(e){t.activeOutOfWorkspaceWatchers[e.toString()]&&(t.fileService.unwatchFileChanges(e),delete t.activeOutOfWorkspaceWatchers[e.toString()])})},e.prototype.onWorkingFilesModelChange=function(e){this.updateOutOfWorkspaceFileListeners(e)},e.prototype.onUntitledDirtyEvent=function(){this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onUntitledDeletedEvent=function(){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.onTextFileDirty=function(e){this.contextService.isAutoSaveEnabled()||this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onTextFileSaved=function(e){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.onTextFileSaveError=function(e){this.isDocumentedEdited||this.updateDocumentEdited()},e.prototype.onTextFileReverted=function(e){this.isDocumentedEdited&&this.updateDocumentEdited()},e.prototype.updateDocumentEdited=function(){if(o.platform===o.Platform.Mac){var e=m.getCurrentWindow(),t=e.isDocumentEdited(),n=this.textFileService.isDirty();this.isDocumentedEdited=n,n!==t&&e.setDocumentEdited(n)}},e.prototype.getId=function(){return"vs.files.electronFileTracker"},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()();for(var e in this.activeOutOfWorkspaceWatchers)this.fileService.unwatchFileChanges(e);this.activeOutOfWorkspaceWatchers=Object.create(null)},e=__decorate([__param(0,d.IWorkspaceContextService),__param(1,h.IEventService),__param(2,l.IPartService),__param(3,i.IFileService),__param(4,n.ITextFileService),__param(5,p.IInstantiationService),__param(6,u.IUntitledEditorService),__param(7,f.ILifecycleService)],e)}();t.FileTracker=g});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/textFileServices",["require","exports","vs/nls!vs/workbench/parts/files/electron-browser/textFileServices","vs/base/common/winjs.base","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/base/common/paths","vs/base/common/strings","vs/base/common/platform","vs/base/common/uri","vs/base/common/actions","vs/workbench/parts/files/browser/textFileServices","vs/workbench/parts/files/browser/editors/textFileEditorModel","vs/workbench/parts/files/common/files","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","vs/workbench/services/untitled/browser/untitledEditorService","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/platform/event/common/event","vs/workbench/services/workspace/common/contextService","vs/platform/lifecycle/common/lifecycle","remote","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w){var C=S.require("dialog"),T=function(e){function t(t,n,i,r,o,s){e.call(this,t,n,i,s),this.instantiationService=i,this.fileService=r,this.untitledEditorService=o,this.registerAutoSaveActions()}return __extends(t,e),t.prototype.onOptionsChanged=function(){e.prototype.onOptionsChanged.call(this),this.registerAutoSaveActions()},t.prototype.registerAutoSaveActions=function(){var e=r.Registry.as(f.Extensions.WorkbenchActions);e.unregisterWorkbenchAction(I.ID),e.registerWorkbenchAction(new m.SyncActionDescriptor(I,I.ID,this.contextService.isAutoSaveEnabled()?n.localize(0,null):n.localize(1,null)),n.localize(2,null))},t.prototype.beforeShutdown=function(){if(e.prototype.beforeShutdown.call(this),this.getDirty().length){var t=this.confirmSave();if(t===p.ConfirmResult.SAVE)return this.saveAll(!0).then(function(e){return e.results.some(function(e){return!e.success})?!0:!1});if(t===p.ConfirmResult.DONT_SAVE)return!1;if(t===p.ConfirmResult.CANCEL)return!0}return!1},t.prototype.revertAll=function(t,n){var i=this;return e.prototype.revertAll.call(this,t,n).then(function(e){var n=i.untitledEditorService.getAll(t);return n.forEach(function(t){t&&(t.dispose(),e.results.push({source:t.getResource(),success:!0}))}),e})},t.prototype.getDirty=function(t){var n=e.prototype.getDirty.call(this,t);if(t){var i=this.untitledEditorService.get(t);i&&i.isDirty()&&n.push(i.getResource())}else n.push.apply(n,this.untitledEditorService.getDirty());return n},t.prototype.isDirty=function(t){return e.prototype.isDirty.call(this,t)?!0:this.untitledEditorService.getDirty().some(function(e){return!t||e.toString()===t.toString()})},t.prototype.confirmSave=function(e){if(this.contextService.getConfiguration().env.pluginDevelopmentPath)return p.ConfirmResult.DONT_SAVE;var t=this.getDirty(e);if(0===t.length)return p.ConfirmResult.DONT_SAVE;var i=[1===t.length?n.localize(3,null,s.basename(t[0].fsPath)):n.localize(4,null)];t.length>1&&(i.push(""),i.push.apply(i,t.map(function(e){return s.basename(e.fsPath)})),i.push(""));var r={label:t.length>1?n.localize(5,null):n.localize(6,null),result:p.ConfirmResult.SAVE},o={label:n.localize(7,null),result:p.ConfirmResult.DONT_SAVE},a={label:n.localize(8,null),result:p.ConfirmResult.CANCEL},u=[r];c.isWindows?u.push(o,a):u.push(a,o);var l={title:this.contextService.getConfiguration().env.appName,message:i.join("\n"),type:"warning",detail:n.localize(9,null),buttons:u.map(function(e){return e.label}),noLink:!0,cancelId:u.indexOf(a)},d=C.showMessageBox(S.getCurrentWindow(),l);return u[d].result},t.prototype.saveAll=function(e){var t=this,n=[];Array.isArray(e)?e.forEach(function(e){n.push.apply(n,t.getDirty(e))}):n=this.getDirty();var i=[],r=[];return n.forEach(function(t){"file"===t.scheme?i.push(t):!Array.isArray(e)&&e!==!0||"untitled"!==t.scheme||r.push(t)}),this.doSaveAll(i,r)},t.prototype.doSaveAll=function(t,n){for(var r=this,o=[],s=0;s<n.length;s++){var a=this.untitledEditorService.get(n[s]);if(a){var c=void 0;if(this.untitledEditorService.hasAssociatedFilePath(a.getResource()))c=a.getResource().fsPath;else if(c=this.promptForPathSync(this.suggestFileName(n[s])),!c)return i.Promise.as({results:t.concat(n).map(function(e){return{source:e}})});o.push(u["default"].file(c))}}return e.prototype.saveAll.call(this,t).then(function(e){var t=[];return o.forEach(function(i,o){var s=r.saveAs(n[o],i).then(function(t){e.results.push({source:n[o],target:t,success:!!t})});t.push(s)}),i.Promise.join(t).then(function(){return e})})},t.prototype.saveAs=function(e,t){var n,r=this;if(t)n=i.Promise.as(t);else{var o=e.fsPath;"untitled"===e.scheme&&(o=this.suggestFileName(e)),n=this.promptForPathAsync(o).then(function(e){return e?u["default"].file(e):null})}return n.then(function(t){return t?e.toString()===t.toString()?r.save(e).then(function(){return e}):r.doSaveAs(e,t):null})},t.prototype.doSaveAs=function(e,t){var n=this,r=i.TPromise.as(null);if("file"===e.scheme)r=i.TPromise.as(h.CACHE.get(e));else if("untitled"===e.scheme){var o=this.untitledEditorService.get(e);o&&(r=o.resolve())}return r.then(function(i){return i?n.fileService.updateContent(t,i.getValue(),{charset:i.getEncoding()}):n.fileService.copyFile(e,t)}).then(function(){return n.getWorkingFilesModel().addEntry(t),n.revert(e).then(function(){return t})})},t.prototype.suggestFileName=function(e){var t=this.contextService.getWorkspace();return t?u["default"].file(s.join(t.resource.fsPath,this.untitledEditorService.get(e).suggestFileName())).fsPath:this.untitledEditorService.get(e).suggestFileName()},t.prototype.promptForPathAsync=function(e){var t=this;return new i.TPromise(function(n,i){C.showSaveDialog(S.getCurrentWindow(),t.getSaveDialogOptions(e?s.normalize(e,!0):void 0),function(e){n(e)})})},t.prototype.promptForPathSync=function(e){return C.showSaveDialog(S.getCurrentWindow(),this.getSaveDialogOptions(e?s.normalize(e,!0):void 0))},t.prototype.getSaveDialogOptions=function(e){var t={defaultPath:e};return t},t=__decorate([__param(0,_.IEventService),__param(1,b.IWorkspaceContextService),__param(2,y.IInstantiationService),__param(3,g.IFileService),__param(4,v.IUntitledEditorService),__param(5,E.ILifecycleService)],t)}(d.TextFileService);t.TextFileService=T;var I=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){return w.send("vscode:toggleAutoSave"),i.Promise.as(!0)},t.ID="workbench.action.files.toggleAutoSave",t=__decorate([__param(2,y.INullService)],t)}(l.Action)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/files/electron-browser/files.electron.contribution",["require","exports","vs/nls!vs/workbench/parts/files/electron-browser/files.electron.contribution","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","vs/base/common/platform","vs/workbench/parts/files/common/files","vs/workbench/common/contributions","vs/workbench/parts/files/browser/fileActions","vs/workbench/parts/files/electron-browser/electronFileTracker","vs/workbench/parts/files/electron-browser/textFileServices","vs/workbench/parts/files/electron-browser/electronFileActions","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/extensions","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element;return!!c.asFileResource(t)},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=c.asFileResource(e.element);t.push(this.instantiationService.createInstance(p.RevealInOSAction,n.resource)),t.push(this.instantiationService.createInstance(p.CopyPathAction,n.resource))}return t},t=__decorate([__param(0,f.IInstantiationService)],t)}(r.ActionBarContributor),y=n.localize(0,null),_=i.Registry.as(o.Extensions.WorkbenchActions);_.registerWorkbenchAction(new s.SyncActionDescriptor(l.SaveFileAsAction,l.SaveFileAsAction.ID,l.SaveFileAsAction.LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyMod.Shift|v.KeyCode.KEY_S}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(l.GlobalNewFileAction,l.GlobalNewFileAction.ID,l.GlobalNewFileAction.LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_N}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.GlobalCopyPathAction,p.GlobalCopyPathAction.ID,p.GlobalCopyPathAction.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_P)}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.GlobalRevealInOSAction,p.GlobalRevealInOSAction.ID,p.GlobalRevealInOSAction.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_R)}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.ShowOpenedFileInNewWindow,p.ShowOpenedFileInNewWindow.ID,p.ShowOpenedFileInNewWindow.LABEL,{primary:v.KeyMod.chord(v.KeyMod.CtrlCmd|v.KeyCode.KEY_K,v.KeyCode.KEY_O)}),y),a.isMacintosh?_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFileFolderAction,p.OPEN_FILE_FOLDER_ID,p.OPEN_FILE_FOLDER_LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_O}),y):(_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFileAction,p.OPEN_FILE_ID,p.OPEN_FILE_LABEL,{primary:v.KeyMod.CtrlCmd|v.KeyCode.KEY_O}),y),_.registerWorkbenchAction(new s.SyncActionDescriptor(p.OpenFolderAction,p.OPEN_FOLDER_ID,p.OPEN_FOLDER_LABEL),y));var b=i.Registry.as(r.Extensions.Actionbar);b.registerActionBarContributor(r.Scope.VIEWER,g),i.Registry.as(u.Extensions.Workbench).registerWorkbenchContribution(d.FileTracker),m.registerSingleton(c.ITextFileService,h.TextFileService)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/git/browser/gitActions","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/types","vs/base/common/actions","vs/workbench/parts/git/common/gitModel","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/common/editor","vs/base/common/errors","vs/base/common/platform","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/event/common/event","vs/platform/files/common/files","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/parts/git/common/git","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){function E(e,t){if(void 0===t&&(t=!1),e){if(Array.isArray(e)){if(e.some(function(e){return!(e instanceof c.FileStatus)}))throw new Error("Invalid context.");return e}if(e instanceof c.FileStatus)return[e];if(e instanceof c.StatusGroup)return e.all();if(e.tree){var n=e.tree.getSelection();return n.indexOf(e.fileStatus)>-1?n:[e.fileStatus]}if(e.selection)return!t&&e.selection.indexOf(e.focus)>-1?e.selection:[e.focus];throw new Error("Invalid context.")}return e}var S=function(e){function t(t,n,i,r){var o=this;this.gitService=r,e.call(this,t,n,i,!1),this.toDispose=[this.gitService.addBulkListener2(function(){return o.onGitServiceChange()})],this.onGitServiceChange()}return __extends(t,e),t.prototype.onGitServiceChange=function(){this.updateEnablement()},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t.prototype.isEnabled=function(){return!!this.gitService},t.prototype.dispose=function(){this.gitService=null,this.toDispose=r.disposeAll(this.toDispose),e.prototype.dispose.call(this)},t}(a.Action);t.GitAction=S;var w=function(e){function t(n,r){this.editorService=n,e.call(this,t.ID,i.localize(0,null),"git-action open-change",r)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService},t.prototype.run=function(e){var t=this,n=E(e,!0);return this.gitService.getInput(n[0]).then(function(e){var n=new l.TextDiffEditorOptions;return n.forceOpen=!0,t.editorService.openEditor(e,n)})},t.ID="workbench.action.openChange",t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,_.IGitService)],t)}(S);t.OpenChangeAction=w;var C=function(e){function t(n,r,o,s){this.fileService=r,this.editorService=n,this.contextService=s,e.call(this,t.ID,i.localize(1,null),"git-action open-file",o)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService||!!this.fileService},t.prototype.getPath=function(e){if(e.getStatus()===_.Status.INDEX_RENAMED)return e.getRename();var t=this.gitService.getModel().getStatus().find(e.getPath(),_.StatusType.INDEX);return t&&t.getStatus()===_.Status.INDEX_RENAMED?e.getRename():e.getPath()},t.prototype.run=function(e){var i=this,r=E(e,!0),o=r[0];if(!(o instanceof c.FileStatus))return n.Promise.wrapError(new Error("Can't open file."));if(t.DELETED_STATES.indexOf(o.getStatus())>-1)return n.Promise.wrapError(new Error("Can't open file which is has been deleted."));var s=this.getPath(o);return this.fileService.resolveFile(this.contextService.toResource(s)).then(function(e){return i.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}})})},t.DELETED_STATES=[_.Status.BOTH_DELETED,_.Status.DELETED,_.Status.DELETED_BY_US,_.Status.INDEX_DELETED],t.ID="workbench.action.openFile",t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,v.IFileService),__param(2,_.IGitService),__param(3,f.IWorkspaceContextService)],t)}(S);t.OpenFileAction=C;var T=function(e){function t(n){e.call(this,t.ID,i.localize(2,null),"git-action init",n)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getState()===_.ServiceState.NotARepo},t.prototype.run=function(){return this.gitService.init()},t.ID="workbench.action.init",t=__decorate([__param(0,_.IGitService)],t)}(S);t.InitAction=T;var I=function(e){function t(n){e.call(this,t.ID,i.localize(3,null),"git-action refresh",n)}return __extends(t,e),t.prototype.run=function(){return this.gitService.status()},t.ID="workbench.action.refresh",t=__decorate([__param(0,_.IGitService)],t)}(S);t.RefreshAction=I;var k=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r),this.editorService=o}return __extends(t,e),t.prototype.run=function(e){var t=this,i=E(e);return this.gitService.add(E(e)).then(function(e){var r=t.findGitWorkingTreeEditor();if(!r)return n.Promise.as(e);var o=r.input,s=o.getFileStatus();if(i&&i.every(function(e){return e!==s}))return n.Promise.as(e);var a=o.getFileStatus().getPath(),c=e.getStatus().find(a,_.StatusType.INDEX);if(!c)return n.Promise.as(e);var u=r.getControl(),d=u?u.saveViewState():null;return t.gitService.getInput(c).then(function(n){var i=new l.TextDiffEditorOptions;return i.forceOpen=!0,t.editorService.openEditor(n,i,r.position).then(function(t){return d&&u.restoreViewState(d),e})})})},t.prototype.findGitWorkingTreeEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(u.isGitEditorInput(n.input))return n}return null},t.prototype.dispose=function(){this.editorService=null,e.prototype.dispose.call(this)},t}(S);t.BaseStageAction=k;var x=function(e){function t(n,i){e.call(this,t.ID,t.LABEL,"git-action stage",n,i)}return __extends(t,e),t.ID="workbench.action.stage",t.LABEL=i.localize(4,null),t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(k);t.StageAction=x;var A=function(e){function t(n,r){e.call(this,t.ID,i.localize(5,null),"git-action stage",n,r)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getWorkingTreeStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this)},t.ID="workbench.action.stageAll",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(k);t.GlobalStageAction=A;var R=function(e){function t(t,n,i,r,o,s,a,c,u){this.eventService=o,this.editorService=c,this.messageService=s,this.fileService=a,this.contextService=u,e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.eventService&&!!this.editorService&&!!this.fileService},t.prototype.run=function(e){var t=this;if(!this.messageService.confirm(this.getConfirm(e)))return n.Promise.as(null);var i=[];if(e instanceof c.StatusGroup)i=[this.gitService.undo()];else{for(var r=E(e),o=[],s=[],a=0;a<r.length;a++){var u=r[a].clone();switch(u.getStatus()){case _.Status.UNTRACKED:case _.Status.IGNORED:o.push(u);break;default:s.push(u)}}o.length>0&&i.push(this.gitService.clean(o)),s.length>0&&i.push(this.gitService.checkout("",s))}return n.Promise.join(i).then(function(e){if(0===e.length)return n.Promise.as(null);var i=e[e.length-1],o=t.findWorkingTreeDiffEditor();if(!o)return n.Promise.as(i);var s=o.input,a=s.getFileStatus();if(r&&r.every(function(e){return e!==a}))return n.Promise.as(i);var c=s.getFileStatus().getPath(),u=o.getControl(),l=u?u.getModifiedEditor():null,d=l?l.saveViewState():null;return t.fileService.resolveFile(t.contextService.toResource(c)).then(function(e){return t.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}},o.position).then(function(e){if(d){var t=o.getControl();t&&t.restoreViewState(d)}})})}).then(null,function(e){return console.error("One or more errors occurred",e),n.Promise.wrapError(e[0])})},t.prototype.findWorkingTreeDiffEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(n.input instanceof u.GitWorkingTreeDiffEditorInput)return n}return null},t.prototype.getConfirm=function(e){var t=E(e);if(t.length>1){var n=t.length;return{message:i.localize(6,null),detail:1===n?i.localize(7,null,n):i.localize(8,null,n),primaryButton:i.localize(9,null)}}var r=t[0].getPathComponents().reverse()[0];return{message:i.localize(10,null,r),detail:i.localize(11,null),primaryButton:i.localize(12,null)}},t.prototype.dispose=function(){this.eventService=null,this.editorService=null,this.fileService=null,e.prototype.dispose.call(this)},t}(S);t.BaseUndoAction=R;var D=function(e){function t(n,r,o,s,a,c){e.call(this,t.ID,i.localize(13,null),"git-action undo",n,r,o,s,a,c)}return __extends(t,e),t.ID="workbench.action.undo",t=__decorate([__param(0,_.IGitService),__param(1,m.IEventService),__param(2,g.IMessageService),__param(3,v.IFileService),__param(4,p.IWorkbenchEditorService),__param(5,f.IWorkspaceContextService)],t)}(R);t.UndoAction=D;var L=function(e){function t(n,r,o,s,a,c){e.call(this,t.ID,i.localize(14,null),"git-action undo",n,r,o,s,a,c)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getWorkingTreeStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this,this.gitService.getModel().getStatus().getWorkingTreeStatus())},t.ID="workbench.action.undoAll",t=__decorate([__param(0,_.IGitService),__param(1,m.IEventService),__param(2,g.IMessageService),__param(3,v.IFileService),__param(4,p.IWorkbenchEditorService),__param(5,f.IWorkspaceContextService)],t)}(R);t.GlobalUndoAction=L;var M=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r),this.editorService=o}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.editorService},t.prototype.run=function(e){var t=this,i=E(e);return this.gitService.revertFiles("HEAD",i).then(function(e){var r=t.findGitIndexEditor();if(!r)return n.Promise.as(e);var o=r.input,s=o.getFileStatus();if(i&&i.every(function(e){return e!==s}))return n.Promise.as(e);var a=o.getFileStatus().getPath(),c=e.getStatus().find(a,_.StatusType.WORKING_TREE);if(!c)return n.Promise.as(e);var u=r.getControl(),d=u?u.saveViewState():null;return t.gitService.getInput(c).then(function(n){var i=new l.TextDiffEditorOptions;return i.forceOpen=!0,t.editorService.openEditor(n,i,r.position).then(function(t){return d&&u.restoreViewState(d),e})})})},t.prototype.findGitIndexEditor=function(){for(var e=this.editorService.getVisibleEditors(),t=0;t<e.length;t++){var n=e[t];if(u.isGitEditorInput(n.input))return n;
}return null},t.prototype.dispose=function(){this.editorService=null,e.prototype.dispose.call(this)},t}(S);t.BaseUnstageAction=M;var O=function(e){function t(n,r){e.call(this,t.ID,i.localize(15,null),"git-action unstage",n,r)}return __extends(t,e),t.ID="workbench.action.unstage",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(M);t.UnstageAction=O;var P=function(e){function t(n,r){e.call(this,t.ID,i.localize(16,null),"git-action unstage",n,r)}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getIndexStatus().all().length>0},t.prototype.run=function(t){return e.prototype.run.call(this)},t.ID="workbench.action.unstageAll",t=__decorate([__param(0,_.IGitService),__param(1,p.IWorkbenchEditorService)],t)}(M);t.GlobalUnstageAction=P;var N;!function(e){e[e.Alive=0]="Alive",e[e.Disposing=1]="Disposing",e[e.Disposed=2]="Disposed"}(N||(N={}));var F=function(e){function t(n,i,r){this.editorService=r,this.branch=n,this.HEAD=null,this.state=N.Alive,this.runPromises=[],e.call(this,t.ID,n.name,"git-action checkout",i)}return __extends(t,e),t.prototype.onGitServiceChange=function(){this.gitService.getState()===_.ServiceState.OK&&(this.HEAD=this.gitService.getModel().getHEAD(),this.HEAD&&this.HEAD.name===this.branch.name?this["class"]="git-action checkout HEAD":this["class"]="git-action checkout"),e.prototype.onGitServiceChange.call(this)},t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&!!this.HEAD},t.prototype.run=function(e){var t=this;if(this.state!==N.Alive)return n.Promise.wrapError("action disposed");if(this.HEAD&&this.HEAD.name===this.branch.name)return n.Promise.as(null);var r=this.gitService.checkout(this.branch.name).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.DirtyWorkTree?n.Promise.wrapError(new Error(i.localize(17,null))):n.Promise.wrapError(e)});return this.runPromises.push(r),r.done(function(){return t.runPromises.splice(t.runPromises.indexOf(r),1)}),r},t.prototype.dispose=function(){var e=this;this.state===N.Alive&&(this.state=N.Disposing,n.Promise.join(this.runPromises).done(function(){return e.actuallyDispose()}))},t.prototype.actuallyDispose=function(){this.editorService=null,this.branch=null,this.HEAD=null,e.prototype.dispose.call(this),this.state=N.Disposed},t.ID="workbench.action.checkout",t=__decorate([__param(1,_.IGitService),__param(2,p.IWorkbenchEditorService)],t)}(S);t.CheckoutAction=F;var W=function(e){function t(n,r){e.call(this,t.ID,i.localize(18,null),"git-action checkout",r),this.checkout=n}return __extends(t,e),t.prototype.run=function(e){return s.isString(e)?this.gitService.branch(e,this.checkout):n.Promise.as(!1)},t.ID="workbench.action.branch",t=__decorate([__param(1,_.IGitService)],t)}(S);t.BranchAction=W;var H=function(e){function t(t,n,i,r,o){var s=this;e.call(this,n,i,r,o),this.commitState=t,this.toDispose.push(t.addListener2("change/commitInputBox",function(){s.updateEnablement()}))}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.gitService.getModel().getStatus().getIndexStatus().all().length>0},t.prototype.run=function(e){return this.commitState.getCommitMessage()?this.gitService.commit(this.commitState.getCommitMessage()):(this.commitState.onEmptyCommitMessage(),n.Promise.as(null))},t}(S);t.BaseCommitAction=H;var V=function(e){function t(n,r){e.call(this,n,t.ID,i.localize(19,null),"git-action commit",r)}return __extends(t,e),t.ID="workbench.action.commit",t=__decorate([__param(1,_.IGitService)],t)}(H);t.CommitAction=V;var B=function(e){function t(n,r){e.call(this,n,t.ID,i.localize(20,null),"git-action stage-and-commit",r)}return __extends(t,e),t.prototype.isEnabled=function(){if(!this.gitService)return!1;if(!this.gitService.isIdle())return!1;var e=this.gitService.getModel().getStatus();return e.getIndexStatus().all().length>0||e.getWorkingTreeStatus().all().length>0},t.prototype.run=function(e){return this.commitState.getCommitMessage()?this.gitService.commit(this.commitState.getCommitMessage(),!1,!0):(this.commitState.onEmptyCommitMessage(),n.Promise.as(null))},t.ID="workbench.action.stageAndCommit",t=__decorate([__param(1,_.IGitService)],t)}(H);t.StageAndCommitAction=B;var K=function(e){function t(n,i,r){this.messageService=r,e.call(this,n,t.ID,t.ALL,"git-action smart-commit",i)}return __extends(t,e),t.prototype.onGitServiceChange=function(){if(e.prototype.onGitServiceChange.call(this),!this.enabled)return void(this.label=t.ALL);var n=this.gitService.getModel().getStatus();n.getIndexStatus().all().length>0?this.label=t.STAGED:this.label=t.ALL,this.label+=" ("+(h.isMacintosh?"Cmd+Enter":"Ctrl+Enter")+")"},t.prototype.isEnabled=function(){if(!this.gitService)return!1;if(!this.gitService.isIdle())return!1;var e=this.gitService.getModel().getStatus();return e.getIndexStatus().all().length>0||e.getWorkingTreeStatus().all().length>0},t.prototype.run=function(e){if(!this.commitState.getCommitMessage())return this.commitState.onEmptyCommitMessage(),n.Promise.as(null);var t=this.gitService.getModel().getStatus();return this.gitService.commit(this.commitState.getCommitMessage(),!1,0===t.getIndexStatus().all().length)},t.ID="workbench.action.commitAll",t.ALL=i.localize(21,null),t.STAGED=i.localize(22,null),t=__decorate([__param(1,_.IGitService),__param(2,g.IMessageService)],t)}(H);t.SmartCommitAction=K;var U=function(e){function t(n,i,r){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action pull",r)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return n&&n.name&&n.upstream?!0:!1},t.prototype.run=function(e){return this.pull()},t.prototype.pull=function(e){return void 0===e&&(e=!1),this.gitService.pull(e).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.DirtyWorkTree?n.Promise.wrapError(d.create(i.localize(24,null),{severity:y["default"].Warning})):e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(25,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.pull",t.LABEL=i.localize(23,null),t=__decorate([__param(2,_.IGitService)],t)}(S);t.PullAction=U;var z=function(e){function t(n){e.call(this,t.ID,t.LABEL,n)}return __extends(t,e),t.prototype.run=function(e){return this.pull(!0)},t.ID="workbench.action.pull.rebase",t.LABEL=i.localize(26,null),t=__decorate([__param(0,_.IGitService)],t)}(U);t.PullWithRebaseAction=z;var j=function(e){function t(n,i,r){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action push",r)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return n&&n.name&&n.upstream&&n.ahead?!0:!1},t.prototype.run=function(e){return this.gitService.push().then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(28,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.push",t.LABEL=i.localize(27,null),t=__decorate([__param(2,_.IGitService)],t)}(S);t.PushAction=j;var q=function(e){function t(n,i,r,o,s){void 0===n&&(n=t.ID),void 0===i&&(i=t.LABEL),e.call(this,n,i,"git-action publish",r),this.quickOpenService=o,this.messageService=s}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel();if(0===t.getRemotes().length)return!1;var n=t.getHEAD();return n&&n.name&&!n.upstream?!0:!1},t.prototype.run=function(e){var t,r=this,o=this.gitService.getModel(),s=o.getRemotes(),a=o.getHEAD().name;if(1===s.length){var c=s[0].name,u=this.messageService.confirm({message:i.localize(30,null,a,c),primaryButton:i.localize(31,null)});t=n.TPromise.as(u?c:null)}else t=this.quickOpenService.pick(s.map(function(e){return e.name}),{placeHolder:i.localize(32,null,a)});return t.then(function(e){return e&&r.gitService.push(e,a,{setUpstream:!0})}).then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(33,null))):n.Promise.wrapError(e)})},t.ID="workbench.action.publish",t.LABEL=i.localize(29,null),t=__decorate([__param(2,_.IGitService),__param(3,b.IQuickOpenService),__param(4,g.IMessageService)],t)}(S);t.PublishAction=q;var G=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService.isIdle())return!1;var t=this.gitService.getModel(),n=t.getHEAD();return n&&n.name&&n.upstream?!0:!1},t.prototype.run=function(e){return this.enabled?this.gitService.sync().then(null,function(e){return e.gitErrorCode===_.GitErrorCodes.AuthenticationFailed?n.Promise.wrapError(d.create(i.localize(34,null))):n.Promise.wrapError(e)}):n.Promise.as(null)},t}(S);t.BaseSyncAction=G;var Y=function(e){function t(t,n,i){e.call(this,t,n,"git-action sync",i)}return __extends(t,e),t.ID="workbench.action.sync",t.LABEL=i.localize(35,null),t=__decorate([__param(2,_.IGitService)],t)}(G);t.SyncAction=Y;var $=function(e){function t(n){e.call(this,t.ID,i.localize(36,null),t.CLASS_NAME,n)}return __extends(t,e),t.prototype.onGitServiceChange=function(){if(e.prototype.onGitServiceChange.call(this),this.gitService.getRunningOperations().some(function(e){return e.id===_.ServiceOperations.SYNC||e.id===_.ServiceOperations.PULL||e.id===_.ServiceOperations.PUSH}))this.label="",this["class"]=t.CLASS_NAME_LOADING,this.tooltip=i.localize(37,null);else{this["class"]=t.CLASS_NAME;var n=this.gitService.getModel(),r=n.getHEAD();r?r.name?r.upstream?r.ahead||r.behind?(this.label=o.format("{0} {1}",r.behind,r.ahead),n.getStatus().getGroups().some(function(e){return e.all().length>0})?this.tooltip=i.localize(41,null):1===r.behind&&1===r.ahead?this.tooltip=i.localize(42,null,r.name,r.behind,r.ahead,r.upstream):1===r.behind?this.tooltip=i.localize(43,null,r.name,r.behind,r.ahead,r.upstream):1===r.ahead?this.tooltip=i.localize(44,null,r.name,r.behind,r.ahead,r.upstream):this.tooltip=i.localize(45,null,r.name,r.behind,r.ahead,r.upstream)):(this.label="",this.tooltip=i.localize(40,null,r.name)):(this.label="",this.tooltip=i.localize(39,null,r.name)):(this.label="",this.tooltip=i.localize(38,null)):(this.label="",this.tooltip="")}},t.ID="workbench.action.liveSync",t.CLASS_NAME="git-action live-sync",t.CLASS_NAME_LOADING="git-action live-sync loading",t=__decorate([__param(0,_.IGitService)],t)}(G);t.LiveSyncAction=$;var X=function(e){function t(n){e.call(this,t.ID,i.localize(46,null),"git-action undo-last-commit",n)}return __extends(t,e),t.prototype.run=function(){return this.gitService.reset("HEAD~")},t.ID="workbench.action.undoLastCommit",t=__decorate([__param(0,_.IGitService)],t)}(S);t.UndoLastCommitAction=X;var Q=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("git checkout "),n.Promise.as(null)},t.ID="workbench.action.git.startGitCheckout",t.LABEL=i.localize(47,null),t=__decorate([__param(2,b.IQuickOpenService)],t)}(a.Action);t.StartGitCheckoutAction=Q;var Z=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("git branch "),n.Promise.as(null)},t.ID="workbench.action.git.startGitBranch",t.LABEL=i.localize(48,null),t=__decorate([__param(2,b.IQuickOpenService)],t)}(a.Action);t.StartGitBranchAction=Z});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitWidgets",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitWidgets","vs/base/common/strings","vs/base/common/async","vs/base/browser/dom","vs/base/common/lifecycle","vs/workbench/parts/git/common/git","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/instantiation/common/instantiation","./gitActions","vs/base/common/severity","vs/platform/message/common/message"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=500,f=function(){function e(e,t,n,i){this.messageService=i,this.instantiationService=e,this.gitService=t,this.quickOpenService=n,this.disablementDelayer=new r.Delayer(p),this.syncAction=e.createInstance(l.SyncAction,l.SyncAction.ID,l.SyncAction.LABEL),this.publishAction=e.createInstance(l.PublishAction,l.PublishAction.ID,l.PublishAction.LABEL),this.toDispose=[this.syncAction,this.publishAction],this.state={serviceState:a.ServiceState.NotInitialized,isBusy:!1,isSyncing:!1,HEAD:null,remotes:[],ps1:""}}return e.prototype.render=function(e){var t=this;return this.element=o.append(e,o.emmet(".git-statusbar-group")),this.branchElement=o.append(this.element,o.emmet("a")),this.publishElement=o.append(this.element,o.emmet("a.octicon.octicon-cloud-upload")),this.publishElement.title=n.localize(0,null),this.publishElement.onclick=function(){return t.onPublishClick()},this.syncElement=o.append(this.element,o.emmet("a.git-statusbar-sync-item")),this.syncElement.title=n.localize(1,null),this.syncElement.onclick=function(){return t.onSyncClick()},o.append(this.syncElement,o.emmet("span.octicon.octicon-sync")),this.syncLabelElement=o.append(this.syncElement,o.emmet("span.ahead-behind")),this.setState(this.state),this.toDispose.push(this.gitService.addBulkListener2(function(){return t.onGitServiceChange()})),s.combinedDispose.apply(void 0,this.toDispose)},e.prototype.onGitServiceChange=function(){var e=this.gitService.getModel();this.setState({serviceState:this.gitService.getState(),isBusy:this.gitService.getRunningOperations().some(function(e){return e.id===a.ServiceOperations.CHECKOUT||e.id===a.ServiceOperations.BRANCH}),isSyncing:this.gitService.getRunningOperations().some(function(e){return e.id===a.ServiceOperations.SYNC}),HEAD:e.getHEAD(),remotes:e.getRemotes(),ps1:e.getPS1()})},e.prototype.setState=function(e){var t=this;this.state=e;var r,s=!1,c="git-statusbar-branch-item",u="",l="",d=null;if(e.serviceState!==a.ServiceState.OK)s=!0,c+=" disabled",l=n.localize(2,null),r="";else{var h=e.HEAD;e.isBusy?c+=" busy":d=function(){return t.onBranchClick()},h?h.name?h.commit&&h.upstream&&(h.ahead||h.behind)?(r=e.ps1,u=i.format("{0} {1}",h.behind,h.ahead)):r=e.ps1:(r=e.ps1,c+=" headless"):r=e.ps1}this.branchElement.className=c,this.branchElement.title=l,this.branchElement.textContent=r,this.branchElement.onclick=d,this.syncLabelElement.textContent=u,s?(o.hide(this.branchElement),o.hide(this.publishElement),o.hide(this.syncElement)):(o.show(this.branchElement),e.HEAD&&e.HEAD.upstream?(o.show(this.syncElement),o.toggleClass(this.syncElement,"syncing",this.state.isSyncing),o.toggleClass(this.syncElement,"empty",!u),this.disablementDelayer.trigger(function(){return o.toggleClass(t.syncElement,"disabled",!t.syncAction.enabled)},this.syncAction.enabled?0:p),o.hide(this.publishElement)):e.remotes.length>0?(o.hide(this.syncElement),o.show(this.publishElement),this.disablementDelayer.trigger(function(){return o.toggleClass(t.publishElement,"disabled",!t.publishAction.enabled)},this.publishAction.enabled?0:p)):(o.hide(this.syncElement),o.hide(this.publishElement)))},e.prototype.onBranchClick=function(){this.quickOpenService.show("git checkout ")},e.prototype.onPublishClick=function(){var e=this;this.publishAction.enabled&&this.publishAction.run().done(null,function(t){return e.messageService.show(d["default"].Error,t)})},e.prototype.onSyncClick=function(){var e=this;this.syncAction.enabled&&this.syncAction.run().done(null,function(t){return e.messageService.show(d["default"].Error,t)})},e=__decorate([__param(0,u.IInstantiationService),__param(1,a.IGitService),__param(2,c.IQuickOpenService),__param(3,h.IMessageService)],e)}();t.GitStatusbarItem=f});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitWorkbenchContributions",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/base/common/async","vs/base/common/errors","vs/base/common/paths","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/workbench/common/contributions","vs/workbench/parts/git/common/git","vs/workbench/browser/events","vs/editor/common/editorCommon","vs/editor/browser/widget/codeEditorWidget","vs/workbench/browser/viewlet","vs/workbench/browser/parts/statusbar/statusbar","vs/platform/platform","vs/workbench/parts/git/browser/gitWidgets","vs/workbench/browser/actionRegistry","vs/workbench/parts/git/browser/gitOutput","vs/workbench/parts/output/common/output","vs/platform/actions/common/actions","vs/editor/browser/editorBrowserExtensions","vs/platform/configuration/common/configurationRegistry","vs/workbench/browser/quickopen","vs/workbench/parts/git/browser/gitEditorContributions","vs/workbench/services/activity/common/activityService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/base/common/keyCodes","vs/css!./media/git.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L){function M(){m.Registry.as(f.Extensions.Statusbar).registerStatusbarItem(new f.StatusbarItemDescriptor(v.GitStatusbarItem,f.StatusbarAlignment.LEFT,100));var e=m.Registry.as(_.Extensions.OutputChannels);e.registerChannel("Git"),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(y.GitOutput),m.Registry.as(p.Extensions.Viewlets).registerViewlet(new p.ViewletDescriptor("vs/workbench/parts/git/browser/gitViewlet","GitViewlet",t.VIEWLET_ID,n.localize(3,null),"git",35)),m.Registry.as(g.Extensions.WorkbenchActions).registerWorkbenchAction(new b.SyncActionDescriptor(W,W.ID,W.LABEL,{primary:null,win:{primary:L.KeyMod.CtrlCmd|L.KeyMod.Shift|L.KeyCode.KEY_G},linux:{primary:L.KeyMod.CtrlCmd|L.KeyMod.Shift|L.KeyCode.KEY_G}}),n.localize(4,null)),E.EditorBrowserRegistry.registerEditorContribution(C.MergeDecorator),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(P),m.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(F),m.Registry.as(w.Extensions.Quickopen).registerQuickOpenHandler(new w.QuickOpenHandlerDescriptor("vs/workbench/parts/git/browser/gitQuickOpen","CommandQuickOpenHandler","git ",n.localize(5,null)));var i=m.Registry.as(S.Extensions.Configuration);i.registerConfiguration({id:"git",order:10,title:n.localize(6,null),type:"object",properties:{"git.enabled":{type:"boolean",description:n.localize(7,null),"default":!0},"git.path":{type:"string",description:n.localize(8,null),"default":null},"git.autofetch":{type:"boolean",description:n.localize(9,null),"default":!0}}})}var O=u.IGitService,P=function(){function e(e,t,n,r){var o=this;this.gitService=e,this.eventService=t,this.activityService=n,this.messageService=r,this.progressBadgeDelayer=new i.Delayer(200),this.toDispose=[],this.toDispose.push(this.gitService.addBulkListener2(function(e){return o.onGitServiceChange()}))}return e.prototype.onGitServiceChange=function(){var e=this;this.gitService.getState()!==u.ServiceState.OK?(this.progressBadgeDelayer.cancel(),this.activityService.showActivity("workbench.view.git",null,"git-viewlet-label")):this.gitService.isIdle()?this.showChangesBadge():this.progressBadgeDelayer.trigger(function(){e.activityService.showActivity("workbench.view.git",new T.ProgressBadge(function(){return n.localize(0,null)}),"git-viewlet-label-progress")})},e.prototype.showChangesBadge=function(){var e=this.gitService.getModel().getStatus().getGroups().map(function(e){return e.all().length}).reduce(function(e,t){return e+t},0),t=new T.NumberBadge(e,function(e){return n.localize(1,null,e)});this.progressBadgeDelayer.cancel(),this.activityService.showActivity("workbench.view.git",t,"git-viewlet-label")},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=s.disposeAll(this.toDispose)},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Workbench.StatusUpdater",e=__decorate([__param(0,O),__param(1,I.IEventService),__param(2,T.IActivityService),__param(3,x.IMessageService)],e)}();t.StatusUpdater=P;var N=function(){function e(e,t,n,r,o){var s=this;this.editorService=n,this.contextService=r,this.gitService=o,this.model=e,this.path=t,this.decorations=[],this.firstRun=!0,this.delayer=new i.ThrottledDelayer(500),this.diffDelayer=new i.ThrottledDelayer(200),this.toDispose=[],this.toDispose.push(e.addListener2(d.EventType.ModelContentChanged,function(){return s.triggerDiff()})),this.toDispose.push(this.gitService.addListener2(u.ServiceEvents.STATE_CHANGED,function(){return s.onChanges()})),this.toDispose.push(this.gitService.addListener2(u.ServiceEvents.OPERATION_END,function(e){e.operation.id!==u.ServiceOperations.BACKGROUND_FETCH&&s.onChanges()})),this.onChanges()}return e.prototype.onChanges=function(){this.gitService&&this.gitService.getState()===u.ServiceState.OK&&this.trigger()},e.prototype.trigger=function(){var e=this;this.delayer.trigger(function(){return e.diffOriginalContents()}).done(null,r.onUnexpectedError)},e.prototype.diffOriginalContents=function(){var e=this;return this.getOriginalContents().then(function(t){return e.model&&!e.model.isDisposed()?e.firstRun||e.model.getProperty("original")!==t?(e.firstRun=!1,e.model.setProperty("original",t),a.Promise.timeout(500).then(function(){return e.triggerDiff()})):a.Promise.as(null):void 0})},e.prototype.getOriginalContents=function(){var e=this.gitService.getModel(),t=e.getStatus().find(this.path,u.StatusType.INDEX)?"~":"HEAD";return this.gitService.buffer(this.path,t)},e.prototype.triggerDiff=function(){var t=this;return this.diffDelayer?this.diffDelayer.trigger(function(){if(!t.model||t.model.isDisposed())return a.Promise.as([]);var e=t.model.getMode();return e&&e.dirtyDiffSupport?e.dirtyDiffSupport.computeDirtyDiff(t.model.getAssociatedResource(),!0):a.Promise.as([])}).then(function(n){return t.model&&!t.model.isDisposed()?t.decorations=t.model.deltaDecorations(t.decorations,e.changesToDecorations(n||[])):void 0}):a.Promise.as(null)},e.changesToDecorations=function(t){return t.map(function(t){var n=t.modifiedStartLineNumber,i=t.modifiedEndLineNumber||n;return 0===t.originalEndLineNumber?{range:{startLineNumber:n,startColumn:1,endLineNumber:i,endColumn:1},options:e.ADDED_DECORATION_OPTIONS}:0===t.modifiedEndLineNumber?{range:{startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:1},options:e.DELETED_DECORATION_OPTIONS}:{range:{startLineNumber:n,startColumn:1,endLineNumber:i,endColumn:1},options:e.MODIFIED_DECORATION_OPTIONS}})},e.prototype.dispose=function(){this.toDispose=s.disposeAll(this.toDispose),this.model&&!this.model.isDisposed()&&this.model.deltaDecorations(this.decorations,[]),this.model=null,this.decorations=null,this.delayer&&(this.delayer.cancel(),this.delayer=null),this.diffDelayer&&(this.diffDelayer.cancel(),this.diffDelayer=null)},e.ID="Monaco.IDE.UI.Viewlets.GitViewlet.Editor.DirtyDiffDecorator",e.MODIFIED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-modified-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e.ADDED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-added-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e.DELETED_DECORATION_OPTIONS={linesDecorationsClassName:"git-dirty-deleted-diff-glyph",isWholeLine:!0,overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:d.OverviewRulerLane.Left}},e=__decorate([__param(2,D.IWorkbenchEditorService),__param(3,A.IWorkspaceContextService),__param(4,O)],e)}(),F=function(){function e(e,t,n,i,r,o){var s=this;this.gitService=e,this.messageService=t,this.editorService=n,this.eventService=i,this.contextService=r,this.instantiationService=o,this.models=[],this.decorators=Object.create(null),this.toDispose=[],this.toDispose.push(i.addListener2(l.EventType.EDITOR_INPUT_CHANGED,function(){return s.onEditorInputChange()})),this.toDispose.push(e.addListener2(u.ServiceEvents.DISPOSE,function(){return s.dispose()}))}return e.prototype.getId=function(){return"git.DirtyDiffModelDecorator"},e.prototype.onEditorInputChange=function(){var e=this,t=this.gitService.getModel().getRepositoryRoot();if("string"!=typeof t)return this.gitService.addOneTimeListener(u.ServiceEvents.STATE_CHANGED,function(){return e.onEditorInputChange()}),this.models.forEach(function(t){return e.onModelInvisible(t)}),void(this.models=[]);var n=this.editorService.getVisibleEditors().map(function(e){return e.getControl()}).filter(function(e){return e instanceof h.CodeEditorWidget}).map(function(e){return e.getModel()}).filter(function(e,t,n){return!!e&&-1===n.indexOf(e,t+1)}).map(function(e){return{model:e,resource:e.getAssociatedResource()}}).filter(function(e){return!!e.resource&&"file"===e.resource.scheme&&o.isEqualOrParent(e.resource.fsPath,t)}).map(function(e){return{model:e.model,path:o.normalize(o.relative(t,e.resource.fsPath))}}).filter(function(e){return!!e.path&&-1===e.path.indexOf(".git/")}),i=n.filter(function(t){return e.models.every(function(e){return t.model!==e})}),r=this.models.filter(function(e){return n.every(function(t){return t.model!==e})});i.forEach(function(t){return e.onModelVisible(t.model,t.path)}),r.forEach(function(t){return e.onModelInvisible(t)}),this.models=n.map(function(e){return e.model})},e.prototype.onModelVisible=function(e,t){this.decorators[e.id]=this.instantiationService.createInstance(N,e,t)},e.prototype.onModelInvisible=function(e){this.decorators[e.id].dispose(),delete this.decorators[e.id]},e.prototype.dispose=function(){var e=this;this.toDispose=s.disposeAll(this.toDispose),this.models.forEach(function(t){return e.decorators[t.id].dispose()}),this.models=null,this.decorators=null},e=__decorate([__param(0,O),__param(1,x.IMessageService),__param(2,D.IWorkbenchEditorService),__param(3,I.IEventService),__param(4,A.IWorkspaceContextService),__param(5,k.IInstantiationService)],e)}();t.DirtyDiffDecorator=F,t.VIEWLET_ID="workbench.view.git";var W=function(e){function i(n,i,r,o){e.call(this,n,i,t.VIEWLET_ID,r,o)}return __extends(i,e),i.ID=t.VIEWLET_ID,i.LABEL=n.localize(2,null),i=__decorate([__param(2,R.IViewletService),__param(3,D.IWorkbenchEditorService)],i)}(p.ToggleViewletAction);t.registerContributions=M});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/git/browser/gitActions.contribution",["require","exports","vs/nls!vs/workbench/parts/git/browser/gitActions.contribution","vs/base/common/lifecycle","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textDiffEditor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/parts/files/common/files","vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/workbench/parts/git/common/git","vs/workbench/parts/git/browser/gitEditorInputs","vs/workbench/parts/git/common/stageRanges","vs/workbench/services/editor/common/editorService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/part/common/partService","vs/workbench/services/workspace/common/contextService","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","./gitActions","vs/base/common/paths","vs/base/common/uri"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k){function x(e,t,n){var i=e.getModel(),r=i.getRepositoryRoot(),o=i.getStatus(),s=I.normalize(I.relative(r,n.getResource().fsPath));return o.getWorkingTreeStatus().find(s)||o.getIndexStatus().find(s)}var A=function(e){function t(n,i,r,o,s){var a=this;e.call(this,t.ID,t.Label),this["class"]="git-action open-in-diff",this.gitService=i,this.viewletService=r,this.editorService=n,this.partService=o,this.contextService=s,this.toDispose=[this.gitService.addBulkListener2(function(){return a.onGitStateChanged()})],this.enabled=this.isEnabled()}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if("string"!=typeof this.gitService.getModel().getRepositoryRoot())return!1;var t=this.getStatus();return t&&(t.getStatus()===f.Status.MODIFIED||t.getStatus()===f.Status.INDEX_MODIFIED||t.getStatus()===f.Status.INDEX_RENAMED)},t.prototype.onGitStateChanged=function(){this.gitService.isIdle()&&(this.enabled=this.isEnabled())},t.prototype.getStatus=function(){return x(this.gitService,this.contextService,this.input)},t.prototype.run=function(e){var t=this,n=!(!e||!e.ctrlKey&&!e.metaKey),i=this.editorService.getActiveEditor().getControl(),r=i?i.saveViewState():null;return this.gitService.getInput(this.getStatus()).then(function(e){var i=s.Promise.as(null);return t.partService.isVisible(_.Parts.SIDEBAR_PART)&&(i=t.viewletService.openViewlet(p.VIEWLET_ID,!1)),i.then(function(){var i=new u.TextDiffEditorOptions;return i.forceOpen=!0,i.autoRevealFirstChange=!1,t.editorService.openEditor(e,i,n).then(function(e){if(r){var n=t.editorService.getActiveEditor().getControl();n.restoreViewState({original:{},modified:r})}})})})},t.prototype.dispose=function(){this.toDispose=i.disposeAll(this.toDispose)},t.ID="workbench.git.action.openInDiff",t.Label=n.localize(0,null),t=__decorate([__param(0,g.IWorkbenchEditorService),__param(1,f.IGitService),__param(2,y.IViewletService),__param(3,_.IPartService),__param(4,b.IWorkspaceContextService)],t)}(c.EditorInputAction),R=function(e){function t(n,i,r,o,s,a){e.call(this,t.ID,t.LABEL),this["class"]="git-action open-in-editor",this.gitService=r,this.fileService=n,this.viewletService=o,this.editorService=i,this.partService=s,this.contextService=a,this.enabled=this.isEnabled()}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if("string"!=typeof this.gitService.getModel().getRepositoryRoot())return!1;var n=this.input.getFileStatus();return t.DELETED_STATES.indexOf(n.getStatus())>-1?!1:!0;
},t.prototype.run=function(e){var t=this,n=this.gitService.getModel(),i=k["default"].file(I.join(n.getRepositoryRoot(),this.getRepositoryRelativePath())),r=!(!e||!e.ctrlKey&&!e.metaKey),o=this.saveTextViewState();return this.fileService.resolveFile(i).then(function(e){return t.editorService.openEditor({resource:e.resource,mime:e.mime,options:{forceOpen:!0}},r).then(function(e){return t.restoreTextViewState(o),t.partService.isVisible(_.Parts.SIDEBAR_PART)?t.viewletService.openViewlet(h.VIEWLET_ID,!1):void 0})})},t.prototype.saveTextViewState=function(){var e=this.getTextEditor();return e?e.saveViewState():null},t.prototype.restoreTextViewState=function(e){var t=this.getTextEditor();return t?t.restoreViewState(e):void 0},t.prototype.getTextEditor=function(){var e=this.editorService.getActiveEditor();return e instanceof l.TextDiffEditor?e.getControl().getModifiedEditor():e instanceof d.BaseTextEditor?e.getControl():null},t.prototype.getRepositoryRelativePath=function(){var e=this.input.getFileStatus();if(e.getStatus()===f.Status.INDEX_RENAMED)return e.getRename();var t=this.gitService.getModel().getStatus().find(e.getPath(),f.StatusType.INDEX);return t&&t.getStatus()===f.Status.INDEX_RENAMED?t.getRename():e.getPath()},t.DELETED_STATES=[f.Status.BOTH_DELETED,f.Status.DELETED,f.Status.DELETED_BY_US,f.Status.INDEX_DELETED],t.ID="workbench.git.action.openInEditor",t.LABEL=n.localize(1,null),t=__decorate([__param(0,E.IFileService),__param(1,g.IWorkbenchEditorService),__param(2,f.IGitService),__param(3,y.IViewletService),__param(4,_.IPartService),__param(5,b.IWorkspaceContextService)],t)}(c.EditorInputAction),D=function(e){function t(t,i,r){e.call(this,"workbench.git.action.stageRanges",n.localize(2,null)),this.editorService=r,this.gitService=i,this.editor=t.getControl(),this.editor.addListener(a.EventType.CursorSelectionChanged,this.updateEnablement.bind(this)),this.editor.addListener(a.EventType.DiffUpdated,this.updateEnablement.bind(this)),this["class"]="git-action stage-ranges"}return __extends(t,e),t.prototype.isEnabled=function(){if(!e.prototype.isEnabled.call(this))return!1;if(!this.gitService||!this.editorService)return!1;var t=this.editor.getLineChanges(),n=this.editor.getSelections();return t&&n&&0!==n.length?v.getSelectedChanges(t,n).length>0:!1},t.prototype.run=function(){var e=this,t=v.stageRanges(this.editor),n=this.input.getFileStatus(),i=n.getPath(),r=this.editor.saveViewState();return this.gitService.stage(n.getPath(),t).then(function(){var t=e.gitService.getModel().getStatus();return n=t.getWorkingTreeStatus().find(i)||t.getIndexStatus().find(i),n?e.gitService.getInput(n).then(function(t){var n=new u.TextDiffEditorOptions;return n.forceOpen=!0,n.autoRevealFirstChange=!1,e.editorService.openEditor(t,n,e.position).then(function(){e.editor.restoreViewState(r)})}):void 0})},t.prototype.updateEnablement=function(){this.enabled=this.isEnabled()},t=__decorate([__param(1,f.IGitService),__param(2,g.IWorkbenchEditorService)],t)}(c.EditorInputAction);t.StageRangesAction=D;var L=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof h.FileEditorInput},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(A)]},t=__decorate([__param(0,S.IInstantiationService)],t)}(c.EditorInputActionContributor),M=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return m.isGitEditorInput(e.input)},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(R)]},t=__decorate([__param(0,S.IInstantiationService)],t)}(c.EditorInputActionContributor),O=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActionsForEditorInput=function(e){return e.input instanceof m.GitWorkingTreeDiffEditorInput&&e.editor instanceof l.TextDiffEditor},t.prototype.getSecondaryActionsForEditorInput=function(e){return[this.instantiationService.createInstance(D,e.editor)]},t=__decorate([__param(0,S.IInstantiationService)],t)}(c.EditorInputActionContributor),P=function(e){function t(t,n,i,r,o,s,a){e.call(this,i,r),this.contextService=o,this.viewletService=s,this.partService=a}return __extends(t,e),t.prototype.getInput=function(){return u.asFileEditorInput(this.editorService.getActiveEditorInput())},t.prototype.run=function(e){var t=this,n=this.getInput();if(!n)return s.Promise.as(null);var i=x(this.gitService,this.contextService,n);if(!i)return s.Promise.as(null);var r=!(!e||!e.ctrlKey&&!e.metaKey),o=this.editorService.getActiveEditor().getControl(),a=o?o.saveViewState():null;return this.gitService.getInput(i).then(function(e){var n=s.Promise.as(null);return t.partService.isVisible(_.Parts.SIDEBAR_PART)&&(n=t.viewletService.openViewlet(p.VIEWLET_ID,!1)),n.then(function(){var n=new u.TextDiffEditorOptions;return n.forceOpen=!0,n.autoRevealFirstChange=!1,t.editorService.openEditor(e,n,r).then(function(e){if(a){var n=t.editorService.getActiveEditor().getControl();n.restoreViewState({original:{},modified:a})}})})})},t.ID="workbench.git.action.globalOpenChange",t.LABEL=n.localize(3,null),t=__decorate([__param(2,g.IWorkbenchEditorService),__param(3,f.IGitService),__param(4,b.IWorkspaceContextService),__param(5,y.IViewletService),__param(6,_.IPartService)],t)}(T.OpenChangeAction),N=r.Registry.as(o.Extensions.Actionbar);N.registerActionBarContributor(o.Scope.EDITOR,L),N.registerActionBarContributor(o.Scope.EDITOR,M),N.registerActionBarContributor(o.Scope.EDITOR,O);var F=r.Registry.as(w.Extensions.WorkbenchActions),W=n.localize(4,null);F.registerWorkbenchAction(new C.SyncActionDescriptor(P,P.ID,P.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.PullAction,T.PullAction.ID,T.PullAction.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.PushAction,T.PushAction.ID,T.PushAction.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.SyncAction,T.SyncAction.ID,T.SyncAction.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.PublishAction,T.PublishAction.ID,T.PublishAction.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.StartGitBranchAction,T.StartGitBranchAction.ID,T.StartGitBranchAction.LABEL),W),F.registerWorkbenchAction(new C.SyncActionDescriptor(T.StartGitCheckoutAction,T.StartGitCheckoutAction.ID,T.StartGitCheckoutAction.LABEL),W)}),define("vs/workbench/parts/git/electron-browser/git.contribution",["require","exports","vs/workbench/parts/git/browser/gitWorkbenchContributions","vs/workbench/parts/git/electron-browser/electronGitService","vs/workbench/parts/git/common/git","vs/platform/instantiation/common/extensions"],function(e,t,n,i,r,o){n.registerContributions(),o.registerSingleton(r.IGitService,i.ElectronGitService)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownActions",["require","exports","vs/base/common/winjs.base","vs/base/common/actions","vs/base/common/uri","vs/base/common/errors","vs/base/common/paths","vs/nls!vs/workbench/parts/markdown/browser/markdownActions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/parts/markdown/browser/markdownEditorInput","vs/workbench/services/editor/common/editorService","vs/workbench/services/part/common/partService","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/services/workspace/common/contextService","vs/css!./media/markdownactions"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){var v=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.instantiationService=i,this.editorService=r,this.messageService=o}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditorInput();if(t instanceof l.MarkdownEditorInput)this.editorService.openEditor({resource:t.getResource()}).done(null,o.onUnexpectedError);else{var i,r=u.getUntitledOrFileResource(t);if(r){var s=this.instantiationService.createInstance(y,r);s.run().done(function(){return s.dispose()},o.onUnexpectedError)}else i=a.localize(1,null);i&&this.messageService.show(f.Severity.Info,i)}return n.Promise.as(!0)},t.ID="workbench.action.markdown.togglePreview",t.LABEL=a.localize(0,null),t=__decorate([__param(2,p.IInstantiationService),__param(3,d.IWorkbenchEditorService),__param(4,f.IMessageService)],t)}(i.Action);t.GlobalTogglePreviewMarkdownAction=v;var g=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.instantiationService=i,this.editorService=r,this.messageService=o}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditorInput();if(t instanceof l.MarkdownEditorInput)return n.Promise.as(!0);var i,r=u.getUntitledOrFileResource(t);if(r){var o=this.instantiationService.createInstance(l.MarkdownEditorInput,r,void 0,void 0);return this.editorService.openEditor(o,null,!0)}return i=a.localize(3,null),i&&this.messageService.show(f.Severity.Info,i),n.Promise.as(!0)},t.ID="workbench.action.markdown.openPreviewSideBySide",t.LABEL=a.localize(2,null),t=__decorate([__param(2,p.IInstantiationService),__param(3,d.IWorkbenchEditorService),__param(4,f.IMessageService)],t)}(i.Action);t.OpenPreviewToSideAction=g;var y=function(e){function t(t,n,i){e.call(this,"workbench.markdown.action.previewFromExplorer",a.localize(4,null)),this.instantiationService=n,this.editorService=i,this.markdownResource=t}return __extends(t,e),t.prototype.run=function(e){var t=this.instantiationService.createInstance(l.MarkdownEditorInput,this.markdownResource,void 0,void 0);return this.editorService.openEditor(t)},t=__decorate([__param(1,p.IInstantiationService),__param(2,d.IWorkbenchEditorService)],t)}(i.Action);t.PreviewMarkdownAction=y;var _=function(e){function t(t,n){e.call(this,"workbench.markdown.action.previewFromEditor",a.localize(5,null)),this.instantiationService=t,this.editorService=n,this["class"]="markdown-action action-preview",this.order=100}return __extends(t,e),t.prototype.run=function(e){var t=this.input,n=!(!e||!e.ctrlKey&&!e.metaKey),i=this.instantiationService.createInstance(l.MarkdownEditorInput,t.getResource(),void 0,void 0);return this.editorService.openEditor(i,null,n)},t=__decorate([__param(0,p.IInstantiationService),__param(1,d.IWorkbenchEditorService)],t)}(c.EditorInputAction);t.PreviewMarkdownEditorInputAction=_;var b=function(e){function t(t,n,i,o,a,c){e.call(this,t,n),this.instantiationService=i,this.editorService=o,this.partService=a,this.contextService=c,this.preserveFocus=!1;var u=c.getConfiguration().env;u.welcomePage&&(this.welcomePageResource=r["default"].file(s.join(u.appRoot,u.welcomePage))),this.enabled=!!this.welcomePageResource}return __extends(t,e),t.prototype.setPreserveFocus=function(e){this.preserveFocus=e},t.prototype.run=function(){var e=this;return this.partService.joinCreation().then(function(){var t=e.editorService.getVisibleEditors().length,n=e.instantiationService.createInstance(l.MarkdownEditorInput,e.welcomePageResource,a.localize(7,null),a.localize(8,null)),i=new u.EditorOptions;return i.preserveFocus=e.preserveFocus,e.editorService.openEditor(n,i,0!==t&&3!==t)})},t.ID="workbench.action.markdown.showWelcome",t.LABEL=a.localize(6,null),t=__decorate([__param(2,p.IInstantiationService),__param(3,d.IWorkbenchEditorService),__param(4,h.IPartService),__param(5,m.IWorkspaceContextService)],t)}(i.Action);t.ShowWelcomeAction=b});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownActions.contribution",["require","exports","vs/nls!vs/workbench/parts/markdown/browser/markdownActions.contribution","vs/platform/platform","vs/platform/actions/common/actions","vs/workbench/browser/actionBarRegistry","vs/workbench/parts/files/browser/files","vs/workbench/parts/files/common/files","vs/base/common/strings","vs/workbench/parts/markdown/browser/markdownActions","vs/workbench/parts/markdown/browser/markdown","vs/workbench/browser/actionRegistry","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element,n=a.asFileResource(t);return n?!n.isDirectory&&l.MARKDOWN_FILES.some(function(e){return c.endsWith(n.resource.fsPath,e)}):!1},t.prototype.getSecondaryActions=function(e){var t=[];if(this.hasSecondaryActions(e)){var n=a.asFileResource(e.element),i=this.instantiationService.createInstance(u.PreviewMarkdownAction,n.resource);i.order=0,t.push(i)}return t},t=__decorate([__param(0,h.IInstantiationService)],t)}(o.ActionBarContributor),m=function(e){function t(t){e.call(this,[l.MARKDOWN_MIME]),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return!0},t.prototype.getActionsForEditorInput=function(e){return[this.instantiationService.createInstance(u.PreviewMarkdownEditorInputAction)]},t=__decorate([__param(0,h.IInstantiationService)],t)}(s.FileEditorInputActionContributor),v=i.Registry.as(o.Extensions.Actionbar);v.registerActionBarContributor(o.Scope.VIEWER,f),v.registerActionBarContributor(o.Scope.EDITOR,m);var g=n.localize(0,null),y=i.Registry.as(d.Extensions.WorkbenchActions);y.registerWorkbenchAction(new r.SyncActionDescriptor(u.GlobalTogglePreviewMarkdownAction,u.GlobalTogglePreviewMarkdownAction.ID,u.GlobalTogglePreviewMarkdownAction.LABEL,{primary:p.KeyMod.CtrlCmd|p.KeyMod.Shift|p.KeyCode.KEY_V}),g),y.registerWorkbenchAction(new r.SyncActionDescriptor(u.OpenPreviewToSideAction,u.OpenPreviewToSideAction.ID,u.OpenPreviewToSideAction.LABEL,{primary:p.KeyMod.chord(p.KeyMod.CtrlCmd|p.KeyCode.KEY_K,p.KeyCode.KEY_V)}),g),y.registerWorkbenchAction(new r.SyncActionDescriptor(u.ShowWelcomeAction,u.ShowWelcomeAction.ID,u.ShowWelcomeAction.LABEL))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdownExtension",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/common/events","vs/platform/files/common/files","vs/base/common/paths","vs/editor/common/editorCommon","vs/workbench/common/constants","vs/platform/theme/common/themes","vs/workbench/browser/parts/editor/iframeEditor","vs/workbench/parts/markdown/browser/markdownEditorInput","vs/workbench/parts/markdown/browser/markdownActions","vs/workbench/browser/events","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/configuration/common/configuration","vs/editor/common/services/modelService","vs/platform/event/common/event","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modeService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E){var S=function(){function e(e,t,n,i,r,o,s,a){this.modeService=e,this.eventService=t,this.editorService=n,this.configurationService=i,this.storageService=r,this.contextService=o,this.modelService=s,this.instantiationService=a,this.markdownConfigurationPaths=[],this.hasModelListenerOnResourcePath=Object.create(null),this.configureMode(this.storageService.get(c.Preferences.THEME,v.StorageScope.GLOBAL)),this.registerListeners(),this.handleWelcome()}return e.prototype.registerListeners=function(){var e=this;this.fileChangeListener=this.eventService.addListener(o.EventType.FILE_CHANGES,function(t){return e.onFileChanges(t)}),this.configFileChangeListener=this.configurationService.addListener(g.ConfigurationServiceEventTypes.UPDATED,function(t){return e.onConfigFileChange(t)}),this.editorInputChangeListener=this.eventService.addListener(p.EventType.EDITOR_INPUT_CHANGED,function(t){return e.onEditorInputChanged(t)}),this.configurationService.loadConfiguration().done(function(t){e.readMarkdownConfiguration(t)},n.onUnexpectedError),this.themeChangeListener=this.storageService.addListener(v.StorageEventType.STORAGE,function(t){t.key===c.Preferences.THEME&&(e.configureMode(t.newValue),e.reloadMarkdownEditors(!0))})},e.prototype.onEditorInputChanged=function(t){var n=this,i=t.editorInput;if(i instanceof d.MarkdownEditorInput){var o=i.getResource(),s=this.modelService.getModel(o);if(s&&!this.hasModelListenerOnResourcePath[o.toString()]){var c=[],u=function(){for(;c.length;)c.pop()();n.hasModelListenerOnResourcePath[o.toString()]=!1};c.push(s.addListener(a.EventType.ModelContentChanged,function(t){n.reloadTimeout&&window.clearTimeout(n.reloadTimeout),n.reloadTimeout=setTimeout(function(){n.reloadMarkdownEditors(!1,o)||u()},e.RELOAD_MARKDOWN_DELAY)})),this.hasModelListenerOnResourcePath[o.toString()]=!0,c.push(i.addListener(r.EventType.DISPOSE,u)),c.push(s.addListener(a.EventType.ModelDispose,u))}}},e.prototype.handleWelcome=function(){var t=!this.storageService.get(e.hideWelcomeSettingskey),i=!(this.contextService.getWorkspace()||this.contextService.getOptions().filesToOpen&&0!==this.contextService.getOptions().filesToOpen.length||this.contextService.getOptions().filesToCreate&&0!==this.contextService.getOptions().filesToCreate.length);if(t&&i){this.storageService.store(e.hideWelcomeSettingskey,!0);var r=this.instantiationService.createInstance(h.ShowWelcomeAction,h.ShowWelcomeAction.ID,h.ShowWelcomeAction.LABEL);r.enabled&&(r.setPreserveFocus(!0),r.run().done(function(){return r.dispose()},n.onUnexpectedError))}},e.prototype.configureMode=function(e){if(e){var t=u.getBaseThemeId(e);this.modeService.configureMode("text/x-web-markdown",{theme:t})}},e.prototype.getId=function(){return"vs.markdown.filetracker"},e.prototype.onConfigFileChange=function(e){this.readMarkdownConfiguration(e.config)&&this.reloadMarkdownEditors(!0)},e.prototype.readMarkdownConfiguration=function(e){var t,n=this.markdownConfigurationThumbprint;if(this.markdownConfigurationThumbprint=null,this.markdownConfigurationPaths=[],e){var r=e.markdown;if(r&&i.isArray(r.styles)){t=r.styles.join("");var o=r.styles.map(function(e){return s.makeAbsolute(s.normalize(e))});this.markdownConfigurationPaths=o}}return this.markdownConfigurationThumbprint=t,n!==t},e.prototype.onFileChanges=function(e){var t=this;this.markdownConfigurationPaths.length&&e.containsAny(this.markdownConfigurationPaths.map(function(e){return t.contextService.toResource(e)}),o.FileChangeType.UPDATED)&&this.reloadMarkdownEditors(!0)},e.prototype.reloadMarkdownEditors=function(e,t){var n=!1,i=this.editorService.getVisibleEditors();return i.forEach(function(i){var r=i.input;r instanceof d.MarkdownEditorInput&&i instanceof l.IFrameEditor&&(t&&t.toString()!==r.getResource().toString()||(i.reload(e),n=!0))}),n},e.prototype.dispose=function(){this.fileChangeListener&&(this.fileChangeListener(),this.fileChangeListener=null),this.configFileChangeListener&&(this.configFileChangeListener(),this.configFileChangeListener=null),this.editorInputChangeListener&&(this.editorInputChangeListener(),this.editorInputChangeListener=null)},e.hideWelcomeSettingskey="workbench.hide.welcome",e.RELOAD_MARKDOWN_DELAY=300,e=__decorate([__param(0,E.IModeService),__param(1,_.IEventService),__param(2,f.IWorkbenchEditorService),__param(3,g.IConfigurationService),__param(4,v.IStorageService),__param(5,m.IWorkspaceContextService),__param(6,y.IModelService),__param(7,b.IInstantiationService)],e)}();t.MarkdownFileTracker=S});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/markdown/browser/markdown.contribution",["require","exports","vs/platform/platform","vs/base/common/uri","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/markdown/browser/markdownEditorInput","vs/workbench/parts/markdown/browser/markdownExtension","vs/workbench/common/contributions","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c){var u=function(){function e(e){}return e.prototype.serialize=function(e){var t=e;return t.getResource().toString()},e.prototype.deserialize=function(e,t){return e.createInstance(o.MarkdownEditorInput,i["default"].parse(t),void 0,void 0)},e=__decorate([__param(0,c.INullService)],e)}();n.Registry.as(r.Extensions.Editors).registerEditorInputFactory(o.MarkdownEditorInput.ID,u),n.Registry.as(a.Extensions.Workbench).registerWorkbenchContribution(s.MarkdownFileTracker)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/outputEditorInput",["require","exports","vs/nls!vs/workbench/parts/output/browser/outputEditorInput","vs/workbench/browser/parts/editor/logEditorInput","vs/workbench/parts/output/common/output","vs/platform/instantiation/common/instantiation","vs/workbench/services/editor/common/editorService"],function(e,t,n,i,r,o,s){var a=function(e){function t(t,i,o,s){e.call(this,n.localize(0,null),t?n.localize(1,null,t):"","",r.OUTPUT_MIME,!0,i,o),this.outputService=s,this.channel=t,this.toUnbind=[],this.outputService.onOutput.add(this.onOutputReceived,this)}return __extends(t,e),t.getInstances=function(){return Object.keys(t.instances).map(function(e){return t.instances[e]})},t.getInstance=function(e,n){return t.instances[n]?t.instances[n]:(t.instances[n]=e.createInstance(t,n),t.instances[n])},t.prototype.onOutputReceived=function(e){this.outputSet&&e.channel===this.channel&&(e.output?(this.append(e.output),this.trim(t.MAX_OUTPUT_LINES)):null===e.output&&this.clearValue())},t.prototype.getId=function(){return r.OUTPUT_EDITOR_INPUT_ID},t.prototype.resolve=function(t){var n=this;return e.prototype.resolve.call(this,t).then(function(e){return n.outputSet?e:(n.setValue(n.outputService.getOutput(n.channel)),n.outputSet=!0,e)})},t.prototype.clearOutput=function(){this.outputService&&this.outputService.clearOutput(this.channel)},t.prototype.getChannel=function(){return this.channel},t.prototype.matches=function(n){if(n instanceof t){var i=n;if(i.getChannel()===this.channel)return e.prototype.matches.call(this,n)}return!1},t.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()();this.outputService.onOutput.remove(this.onOutputReceived,this),e.prototype.dispose.call(this)},t.instances=Object.create(null),t.MAX_OUTPUT_LINES=1e4,t=__decorate([__param(1,o.IInstantiationService),__param(2,s.IWorkbenchEditorService),__param(3,r.IOutputService)],t)}(i.LogEditorInput);t.OutputEditorInput=a});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/outputActions",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/output/browser/outputActions","vs/platform/platform","vs/base/common/errors","vs/base/common/arrays","vs/base/common/actions","vs/editor/common/editorAction","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/output/common/output","vs/workbench/parts/output/browser/outputEditorInput","vs/base/browser/ui/actionbar/actionbar","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m){var v=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.outputService=i,this.editorService=r,this.quickOpenService=o,this.order=20,this["class"]="output-action showoutput"}return __extends(t,e),t.prototype.run=function(e){var t=this,i=null,o=this.quickOpenService.getEditorHistory().filter(function(e){return e instanceof d.OutputEditorInput});if(o.length>0){var s=this.editorService.getVisibleEditors();if(s.some(function(e){return e.input instanceof d.OutputEditorInput?(t.editorService.focusEditor(e),!0):!1}))return n.Promise.as(null);i=o[0].getChannel()}else i=r.Registry.as(l.Extensions.OutputChannels).getChannels()[0];var a=!(!e||!e.ctrlKey&&!e.metaKey);return this.outputService.showOutput(i,a,!1)},t.ID="workbench.action.output.showOutput",t.LABEL=i.localize(0,null),t=__decorate([__param(2,l.IOutputService),__param(3,p.IWorkbenchEditorService),__param(4,f.IQuickOpenService)],t)}(a.Action);t.GlobalShowOutputAction=v;var g=function(e){function t(t,n,i,r,o){e.call(this,t,n),this.quickOpenService=i,this.editorService=r,this.instantiationService=o}return __extends(t,e),t.prototype.run=function(e){var t=this.editorService.getActiveEditorInput();if(t instanceof d.OutputEditorInput){for(var i=this.quickOpenService.getEditorHistory(),r=1;r<i.length;r++)if(!(i[r]instanceof d.OutputEditorInput))return this.editorService.openEditor(i[r])}else{var s=this.instantiationService.createInstance(v,v.ID,v.LABEL);s.run().done(function(){return s.dispose()},o.onUnexpectedError)}return n.Promise.as(!0)},t.ID="workbench.action.output.toggleOutput",t.LABEL=i.localize(1,null),t=__decorate([__param(2,f.IQuickOpenService),__param(3,p.IWorkbenchEditorService),__param(4,m.IInstantiationService)],t)}(a.Action);t.ToggleOutputAction=g;var y=function(e){function t(t){e.call(this,"workbench.output.action.clearOutput",i.localize(2,null),"output-action clear-output")}return __extends(t,e),t.prototype.run=function(){var e=this.input;return e.clearOutput(),n.Promise.as(!0)},t=__decorate([__param(0,m.INullService)],t)}(u.EditorInputAction);t.ClearOutputAction=y;var _=function(e){function t(t,n,i){e.call(this,t,n,c.Behaviour.WidgetFocus|c.Behaviour.ShowInContextMenu),this.myEditorService=i}return __extends(t,e),t.prototype.getGroupId=function(){return"clear"},t.prototype.isSupported=function(){var t=this.editor.getModel(),n=t&&t.getMode();return n&&n.getId()===l.OUTPUT_MODE_ID&&e.prototype.isSupported.call(this)},t.prototype.run=function(){var e=this.myEditorService.getActiveEditorInput();if(e&&e.getId()===l.OUTPUT_EDITOR_INPUT_ID){var t=e;return t.clearOutput(),n.Promise.as(!0)}return n.TPromise.as(!1)},t.ID="editor.action.clearoutput",t=__decorate([__param(2,p.IWorkbenchEditorService)],t)}(c.EditorAction);t.ClearOutputEditorAction=_;var b=function(e){function t(n){e.call(this,t.ID,i.localize(3,null)),this.outputService=n,this["class"]="output-action switch-to-output"}return __extends(t,e),t.prototype.isEnabled=function(){return e.prototype.isEnabled.call(this)&&this.input instanceof d.OutputEditorInput},t.prototype.run=function(e){return this.outputService.showOutput(e)},t.ID="workbench.output.action.switchBetweenOutputs",t=__decorate([__param(0,l.IOutputService)],t)}(u.EditorInputAction);t.SwitchOutputAction=b;var E=function(e){function t(n,i,r){e.call(this,null,n,t.getChannels(r,i),t.getChannels(r,i).indexOf(i.getChannel())),this.outputService=r,this.input=i,this.outputService.onOutputChannel.add(this.onOutputChannel,this)}return __extends(t,e),t.prototype.onOutputChannel=function(){var e=t.getChannels(this.outputService,this.input),n=e.indexOf(this.input.getChannel());this.setOptions(e,n)},t.getChannels=function(e,t){var n=r.Registry.as(l.Extensions.OutputChannels).getChannels(),i=e.getChannels();return i.push(t.getChannel()),s.distinct(n.concat(i)).sort()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.outputService.onOutputChannel.remove(this.onOutputChannel,this),delete this.input},t=__decorate([__param(2,l.IOutputService)],t)}(h.SelectActionItem);t.SwitchOutputActionItem=E});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/outputActions.contribution",["require","exports","vs/nls!vs/workbench/parts/output/browser/outputActions.contribution","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/platform/platform","vs/editor/common/editorCommonExtensions","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/parts/output/browser/outputEditorInput","vs/workbench/parts/output/browser/outputActions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes","vs/css!./media/outputactions.contribution"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasActionsForEditorInput=function(e){return e.input instanceof u.OutputEditorInput},t.prototype.getActionsForEditorInput=function(e){var t=[];return t.push(this.instantiationService.createInstance(l.SwitchOutputAction)),t.push(this.instantiationService.createInstance(l.ClearOutputAction)),
t},t.prototype.getActionItem=function(t,n){return n.id===l.SwitchOutputAction.ID?this.instantiationService.createInstance(l.SwitchOutputActionItem,n,t.input):e.prototype.getActionItem.call(this,t,n)},t=__decorate([__param(0,d.IInstantiationService)],t)}(c.EditorInputActionContributor),f=o.Registry.as(r.Extensions.WorkbenchActions),m=o.Registry.as(a.Extensions.Actionbar);f.registerWorkbenchAction(new i.SyncActionDescriptor(l.GlobalShowOutputAction,l.GlobalShowOutputAction.ID,l.GlobalShowOutputAction.LABEL),n.localize(0,null)),f.registerWorkbenchAction(new i.SyncActionDescriptor(l.ToggleOutputAction,l.ToggleOutputAction.ID,l.ToggleOutputAction.LABEL,{primary:h.KeyMod.CtrlCmd|h.KeyMod.Shift|h.KeyCode.KEY_U,linux:{primary:h.KeyMod.CtrlCmd|h.KeyMod.Shift|h.KeyCode.KEY_H}}),n.localize(1,null)),m.registerActionBarContributor(a.Scope.EDITOR,p),s.CommonEditorRegistry.registerEditorAction(new s.EditorActionDescriptor(l.ClearOutputEditorAction,l.ClearOutputEditorAction.ID,n.localize(2,null)))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/outputServices",["require","exports","vs/base/common/winjs.base","vs/base/common/strings","vs/base/common/eventSource","vs/workbench/common/editor","vs/workbench/parts/output/common/output","vs/workbench/parts/output/browser/outputEditorInput","vs/workbench/services/editor/common/editorService","vs/platform/event/common/event","vs/platform/lifecycle/common/lifecycle","vs/platform/instantiation/common/instantiation"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(){function e(e,t,n,i){this.instantiationService=e,this.eventService=t,this.editorService=n,this.lifecycleService=i,this.serviceId=s.IOutputService,this._onOutput=new r.EventSource,this._onOutputChannel=new r.EventSource,this.receivedOutput=Object.create(null),this.bufferedOutput=Object.create(null),this.sendOutputEventsTimerId=-1,this.lastSentOutputEventsTime=-1,this.registerListeners()}return Object.defineProperty(e.prototype,"onOutput",{get:function(){return this._onOutput.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onOutputChannel",{get:function(){return this._onOutputChannel.value},enumerable:!0,configurable:!0}),e.prototype.registerListeners=function(){this.lifecycleService.onShutdown.add(this.dispose,this)},e.prototype.append=function(e,t){var n=s.DEFAULT_OUTPUT_CHANNEL;t?n=e:t=e,this.doAppend(n,t)},e.prototype.doAppend=function(t,n){if(this.receivedOutput[t]||(this.receivedOutput[t]="",this._onOutputChannel.fire(t)),n=i.removeAnsiEscapeCodes(n)){var r=this.receivedOutput[t].length,o=n.length;if(o+r<=e.MAX_OUTPUT)this.receivedOutput[t]+=n;else if(o>e.MAX_OUTPUT)this.receivedOutput[t]="..."+n.substr(o-e.MAX_OUTPUT);else{var s=e.MAX_OUTPUT-o;this.receivedOutput[t]="..."+this.receivedOutput[t].substr(r-s)+n}var a=this.bufferedOutput[t];a?a+=n:a=n,this.bufferedOutput[t]=a}this.scheduleSendOutputEvent()},e.prototype.scheduleSendOutputEvent=function(){var t=this;if(-1===this.sendOutputEventsTimerId){var n=Date.now()-this.lastSentOutputEventsTime;n>=e.OUTPUT_DELAY?this.sendOutputEvents():this.sendOutputEventsTimerId=setTimeout(function(){t.sendOutputEventsTimerId=-1,t.sendOutputEvents()},e.OUTPUT_DELAY-n)}},e.prototype.sendOutputEvents=function(){this.lastSentOutputEventsTime=Date.now();for(var e in this.bufferedOutput)this._onOutput.fire({output:this.bufferedOutput[e],channel:e});this.bufferedOutput=Object.create(null)},e.prototype.getOutput=function(e){return void 0===e&&(e=s.DEFAULT_OUTPUT_CHANNEL),this.receivedOutput[e]||""},e.prototype.getChannels=function(){return Object.keys(this.receivedOutput)},e.prototype.clearOutput=function(e){void 0===e&&(e=s.DEFAULT_OUTPUT_CHANNEL),this.receivedOutput[e]="",this._onOutput.fire({channel:e,output:null})},e.prototype.showOutput=function(e,t,i){void 0===e&&(e=s.DEFAULT_OUTPUT_CHANNEL);var r=this.findOutputEditor(e);return r?i?(r.revealLastLine(),n.Promise.as(r)):this.editorService.focusEditor(r):this.editorService.openEditor(a.OutputEditorInput.getInstance(this.instantiationService,e),i?o.EditorOptions.create({preserveFocus:!0}):null,t)},e.prototype.findOutputEditor=function(e){for(var t=this.editorService.getVisibleEditors(),n=0;n<t.length;n++){var i=t[n];if(i.input instanceof a.OutputEditorInput&&i.input.getChannel()===e&&i.input.getMime()===s.OUTPUT_MIME)return i}return null},e.prototype.dispose=function(){-1!==this.sendOutputEventsTimerId&&(clearTimeout(this.sendOutputEventsTimerId),this.sendOutputEventsTimerId=-1)},e.MAX_OUTPUT=1e6,e.OUTPUT_DELAY=300,e=__decorate([__param(0,d.IInstantiationService),__param(1,u.IEventService),__param(2,c.IWorkbenchEditorService),__param(3,l.ILifecycleService)],e)}();t.OutputService=h});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/output/browser/output.contribution",["require","exports","vs/platform/platform","vs/editor/common/modes/modesRegistry","vs/workbench/parts/output/browser/outputServices","vs/workbench/parts/output/common/output","vs/workbench/parts/output/browser/outputEditorInput","vs/workbench/browser/parts/editor/baseEditor","vs/platform/instantiation/common/instantiation","vs/platform/instantiation/common/extensions"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(e){}return e.prototype.serialize=function(e){var t=e;return t.getChannel()},e.prototype.deserialize=function(e,t){return s.OutputEditorInput.getInstance(e,t)},e=__decorate([__param(0,c.INullService)],e)}();u.registerSingleton(o.IOutputService,r.OutputService),n.Registry.as(a.Extensions.Editors).registerEditorInputFactory(o.OUTPUT_EDITOR_INPUT_ID,l),i.registerMode({id:o.OUTPUT_MODE_ID,extensions:[],aliases:[null],mimetypes:[o.OUTPUT_MIME],moduleId:"vs/workbench/parts/output/browser/outputMode",ctorName:"OutputMode"})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/gotoLineHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/gotoLineHandler","vs/base/common/types","vs/base/common/errors","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/editor/common/editorCommon","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f){t.GOTO_LINE_PREFIX=":";var m=function(e){function n(n,i,r){e.call(this,n,i,t.GOTO_LINE_PREFIX,r)}return __extends(n,e),n.ID="workbench.action.gotoLine",n.LABEL=i.localize(0,null),n=__decorate([__param(2,f.IQuickOpenService)],n)}(u.QuickOpenAction);t.GotoLineAction=m;var v=function(e){function t(t,n,i){e.call(this,n),this.parseInput(t),this.handler=i}return __extends(t,e),t.prototype.parseInput=function(e){var t=e.split(/,|:|#/).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)});this.line=t[0],this.column=t[1]},t.prototype.getLabel=function(){var e=this.getMaxLineNumber();return this.invalidRange(e)?e>0?i.localize(1,null,e):i.localize(2,null):this.column?i.localize(3,null,this.line,this.column):i.localize(4,null,this.line)},t.prototype.invalidRange=function(e){return void 0===e&&(e=this.getMaxLineNumber()),!this.line||!r.isNumber(this.line)||e>0&&r.isNumber(this.line)&&this.line>e},t.prototype.getMaxLineNumber=function(){var e=this.editorService.getActiveEditor(),t=e.getControl(),n=t.getModel();return n&&n.modified&&n.original&&(n=n.modified),n&&r.isFunction(n.getLineCount)?n.getLineCount():-1},t.prototype.run=function(e,t){return e===s.Mode.OPEN?this.runOpen(t):this.runPreview()},t.prototype.getInput=function(){return this.editorService.getActiveEditorInput()},t.prototype.getOptions=function(){var e=this.toSelection(),t=new l.TextEditorOptions;return t.selection(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn),t},t.prototype.runOpen=function(e){if(this.invalidRange())return!1;var t=e.event,n=t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey));n&&this.editorService.openEditor(this.getInput(),this.getOptions(),!0).done(null,o.onUnexpectedError);var i=this.toSelection(),r=this.editorService.getActiveEditor();if(r){var s=r.getControl();s.setSelection(i),s.revealRangeInCenter(i)}return!0},t.prototype.runPreview=function(){if(this.invalidRange())return this.handler.clearDecorations(),!1;var e=this.toSelection(),t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.revealRangeInCenter(e),r.isFunction(n.changeDecorations)&&this.handler.decorateOutline(e,n,t.position)}return!1},t.prototype.toSelection=function(){return{startLineNumber:this.line,startColumn:this.column||1,endLineNumber:this.line,endColumn:this.column||1}},t}(c.EditorQuickOpenEntry),g=function(e){function t(t){e.call(this),this.editorService=t}return __extends(t,e),t.prototype.getResults=function(e){if(e=e.trim(),!this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();this.lastKnownEditorViewState=t.getControl().saveViewState()}return n.TPromise.as(new a.QuickOpenModel([new v(e,this.editorService,this)]))},t.prototype.canRun=function(){var e=this.editorService.getActiveEditor()instanceof d.BaseTextEditor;return e?!0:i.localize(5,null)},t.prototype.decorateOutline=function(e,t,n){var i=this;t.changeDecorations(function(t){var r=[];i.lineHighlightDecorationId&&(r.push(i.lineHighlightDecorationId.lineDecorationId),r.push(i.lineHighlightDecorationId.lineHighlightId),i.lineHighlightDecorationId=null);var o=[{range:e,options:{className:"lineHighlight",isWholeLine:!0}},{range:e,options:{overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:h.OverviewRulerLane.Full}}}],s=t.deltaDecorations(r,o),a=s[0],c=s[1];i.lineHighlightDecorationId={lineHighlightId:a,lineDecorationId:c,position:n}})},t.prototype.clearDecorations=function(){var e=this;this.lineHighlightDecorationId&&(this.editorService.getVisibleEditors().forEach(function(t){if(t.position===e.lineHighlightDecorationId.position){var n=t.getControl();n.changeDecorations(function(t){t.deltaDecorations([e.lineHighlightDecorationId.lineDecorationId,e.lineHighlightDecorationId.lineHighlightId],[])})}}),this.lineHighlightDecorationId=null)},t.prototype.onClose=function(e){if(this.clearDecorations(),e&&this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.restoreViewState(this.lastKnownEditorViewState)}}this.lastKnownEditorViewState=null},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:e.trim().length>0}},t=__decorate([__param(0,p.IWorkbenchEditorService)],t)}(c.QuickOpenHandler);t.GotoLineHandler=g});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/quickopen/browser/gotoSymbolHandler",["require","exports","vs/base/common/winjs.base","vs/nls!vs/workbench/parts/quickopen/browser/gotoSymbolHandler","vs/base/common/arrays","vs/base/common/errors","vs/base/common/types","vs/base/common/strings","vs/base/parts/quickopen/browser/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/browser/actions/quickOpenAction","vs/workbench/browser/parts/editor/textEditor","vs/workbench/common/editor","vs/base/common/filters","vs/editor/common/editorCommon","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/workspace/common/workspace","vs/editor/contrib/quickOpen/common/quickOpen","vs/css!./media/gotoSymbolHandler"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_){t.GOTO_SYMBOL_PREFIX="@",t.SCOPE_PREFIX=":";var b=function(e){function n(n,i,r){e.call(this,n,i,t.GOTO_SYMBOL_PREFIX,r)}return __extends(n,e),n.ID="workbench.action.gotoSymbol",n.LABEL=i.localize(0,null),n=__decorate([__param(2,g.IQuickOpenService)],n)}(d.QuickOpenAction);t.GotoSymbolAction=b;var E=function(e){function n(t,n){e.call(this,n),this.outline=t}return __extends(n,e),n.prototype.dofilter=function(e){var n=e;0===e.indexOf(t.SCOPE_PREFIX)&&(n=n.substr(t.SCOPE_PREFIX.length)),this.entries.forEach(function(e){if(e.setGroupLabel(null),e.setShowBorder(!1),e.setHighlights(null),e.setHidden(!1),n){var t=f.matchesFuzzy(n,e.getLabel());t?(e.setHighlights(t),e.setHidden(!1)):e.isHidden()||e.setHidden(!0)}}),e?0===e.indexOf(t.SCOPE_PREFIX)?this.entries.sort(this.sortScoped.bind(this,e.toLowerCase())):this.entries.sort(this.sortNormal.bind(this,e.toLowerCase())):this.entries.sort(function(e,t){return e.getIndex()-t.getIndex()});var r=this.getEntries(!0);if(r.length>0&&0===e.indexOf(t.SCOPE_PREFIX)){for(var o=null,s=null,a=0,c=0;c<r.length;c++){var u=r[c];o!==u.getType()?(s&&s.setGroupLabel(this.renderGroupLabel(o,a,this.outline)),o=u.getType(),s=u,a=1,u.setShowBorder(c>0)):a++}s&&s.setGroupLabel(this.renderGroupLabel(o,a,this.outline))}else r.length>0&&r[0].setGroupLabel(i.localize(1,null,r.length))},n.prototype.sortNormal=function(e,t,n){if(t.isHidden()&&n.isHidden())return 0;if(t.isHidden())return 1;if(n.isHidden())return-1;var i=t.getLabel().toLowerCase(),r=n.getLabel().toLowerCase(),o=a.localeCompare(i,r);if(0!==o)return o;var s=t.getRange(),c=n.getRange();return s.startLineNumber-c.startLineNumber},n.prototype.sortScoped=function(e,n,i){if(n.isHidden()&&i.isHidden())return 0;if(n.isHidden())return 1;if(i.isHidden())return-1;e=e.substr(t.SCOPE_PREFIX.length);var r=n.getType(),o=i.getType(),s=a.localeCompare(r,o);if(0!==s)return s;if(e){var c=n.getLabel().toLowerCase(),u=i.getLabel().toLowerCase();if(s=a.localeCompare(c,u),0!==s)return s}var l=n.getRange(),d=i.getRange();return l.startLineNumber-d.startLineNumber},n.prototype.renderGroupLabel=function(e,t,n){if(n.outlineGroupLabel){var r=n.outlineGroupLabel[e];if(r)return i.localize(2,null,r,t)}switch(e){case"module":return i.localize(3,null,t);case"class":return i.localize(4,null,t);case"interface":return i.localize(5,null,t);case"method":return i.localize(6,null,t);case"function":return i.localize(7,null,t);case"property":return i.localize(8,null,t);case"variable":return i.localize(9,null,t);case"var":return i.localize(10,null,t);case"constructor":return i.localize(11,null,t);case"call":return i.localize(12,null,t)}return e},n}(u.QuickOpenModel),S=function(e){function t(t,n,i,r,o,s,a,c,u,l){e.call(this),this.index=t,this.name=n,this.meta=i,this.type=r,this.icon=s,this.description=o,this.range=a,this.setHighlights(c),this.editorService=u,this.handler=l}return __extends(t,e),t.prototype.getIndex=function(){return this.index},t.prototype.getLabel=function(){return this.name},t.prototype.getMeta=function(){return this.meta},t.prototype.getIcon=function(){return this.icon},t.prototype.getDescription=function(){return this.description},t.prototype.getType=function(){return this.type},t.prototype.getRange=function(){return this.range},t.prototype.getInput=function(){return this.editorService.getActiveEditorInput()},t.prototype.getOptions=function(){var e=new p.TextEditorOptions;return e.selection(this.range.startLineNumber,this.range.startColumn,this.range.startLineNumber,this.range.startColumn),e},t.prototype.run=function(e,t){return e===c.Mode.OPEN?this.runOpen(t):this.runPreview()},t.prototype.runOpen=function(e){var t=e.event,n=t&&(t.ctrlKey||t.metaKey||t.payload&&t.payload.originalEvent&&(t.payload.originalEvent.ctrlKey||t.payload.originalEvent.metaKey));if(n)this.editorService.openEditor(this.getInput(),this.getOptions(),!0).done(null,o.onUnexpectedError);else{var i=this.toSelection(),r=this.editorService.getActiveEditor();if(r){var s=r.getControl();s.setSelection(i),s.revealRangeInCenter(i)}}return!0},t.prototype.runPreview=function(){var e=this.toSelection(),t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.revealRangeInCenter(e),s.isFunction(n.changeDecorations)&&this.handler.decorateOutline(this.range,e,n,t.position)}return!1},t.prototype.toSelection=function(){return{startLineNumber:this.range.startLineNumber,startColumn:this.range.startColumn||1,endLineNumber:this.range.startLineNumber,endColumn:this.range.startColumn||1}},t}(l.EditorQuickOpenEntryGroup),w=function(e){function o(t,n){e.call(this),this.editorService=t,this.contextService=n,this.outlineToModelCache={}}return __extends(o,e),o.prototype.getResults=function(e){if(e=e.trim(),!this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();this.lastKnownEditorViewState=t.getControl().saveViewState()}return this.getActiveOutline().then(function(t){return t.dofilter(e),t})},o.prototype.getEmptyLabel=function(e){return e.length>0?i.localize(13,null):i.localize(14,null)},o.prototype.canRun=function(){var e=!1,t=this.editorService.getActiveEditor();if(t instanceof h.BaseTextEditor){var n=t.getControl(),r=n.getModel();r&&r.modified&&r.original&&(r=r.modified),r&&s.isFunction(r.getMode)&&(e=_.OutlineRegistry.has(r))}return e?!0:t instanceof h.BaseTextEditor?i.localize(15,null):i.localize(16,null)},o.prototype.getAutoFocus=function(e){return e=e.trim(),0===e.indexOf(t.SCOPE_PREFIX)&&(e=e.substr(t.SCOPE_PREFIX.length)),{autoFocusPrefixMatch:e,autoFocusFirstEntry:!!e}},o.prototype.toQuickOpenEntries=function(e){var t=[],n=[];e&&this.flatten(e.entries,n);for(var i=0;i<n.length;i++){var o=n[i],s=a.trim(o.label),c=null,u=o.containerLabel;o.parentScope&&(u=r.tail(o.parentScope));var l=o.icon||o.type;t.push(new S(i,s,c,o.type,u,l,o.range,null,this.editorService,this))}return t},o.prototype.flatten=function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.push(r),n&&(r.parentScope=n),r.children){var o=[];n&&(o=n.slice(0)),o.push(r.label),this.flatten(r.children,t,o)}}},o.prototype.getActiveOutline=function(){return this.activeOutlineRequest||(this.activeOutlineRequest=this.doGetActiveOutline()),this.activeOutlineRequest},o.prototype.doGetActiveOutline=function(){var e=this,t=this.editorService.getActiveEditor();if(t instanceof h.BaseTextEditor){var i=t.getControl(),r=i.getModel();if(r&&r.modified&&r.original&&(r=r.modified),r&&s.isFunction(r.getMode)){var o=r.id;return this.outlineToModelCache[o]?n.TPromise.as(this.outlineToModelCache[o]):_.getOutlineEntries(r).then(function(t){var n=new E(t,e.toQuickOpenEntries(t));return e.outlineToModelCache={},e.outlineToModelCache[o]=n,n})}}return n.TPromise.as(null)},o.prototype.decorateOutline=function(e,t,n,i){var r=this;n.changeDecorations(function(n){var o=[];r.lineHighlightDecorationId&&(o.push(r.lineHighlightDecorationId.lineDecorationId),o.push(r.lineHighlightDecorationId.lineHighlightId),r.lineHighlightDecorationId=null);var s=[{range:e,options:{className:"lineHighlight",isWholeLine:!0}},{range:t,options:{overviewRuler:{color:"rgba(0, 122, 204, 0.6)",darkColor:"rgba(0, 122, 204, 0.6)",position:m.OverviewRulerLane.Full}}}],a=n.deltaDecorations(o,s),c=a[0],u=a[1];r.lineHighlightDecorationId={lineHighlightId:c,lineDecorationId:u,position:i}})},o.prototype.clearDecorations=function(){var e=this;this.lineHighlightDecorationId&&(this.editorService.getVisibleEditors().forEach(function(t){if(t.position===e.lineHighlightDecorationId.position){var n=t.getControl();n.changeDecorations(function(t){t.deltaDecorations([e.lineHighlightDecorationId.lineDecorationId,e.lineHighlightDecorationId.lineHighlightId],[])})}}),this.lineHighlightDecorationId=null)},o.prototype.onClose=function(e){if(this.outlineToModelCache={},this.clearDecorations(),e&&this.lastKnownEditorViewState){var t=this.editorService.getActiveEditor();if(t){var n=t.getControl();n.restoreViewState(this.lastKnownEditorViewState)}}this.lastKnownEditorViewState=null,this.activeOutlineRequest=null},o=__decorate([__param(0,v.IWorkbenchEditorService),__param(1,y.IWorkspaceContextService)],o)}(l.QuickOpenHandler);t.GotoSymbolHandler=w}),define("vs/workbench/parts/quickopen/browser/quickopen.contribution",["require","exports","vs/base/common/platform","vs/nls!vs/workbench/parts/quickopen/browser/quickopen.contribution","vs/workbench/browser/quickopen","vs/platform/platform","vs/platform/actions/common/actions","vs/workbench/browser/actionRegistry","vs/base/common/keyCodes","vs/workbench/parts/quickopen/browser/gotoSymbolHandler","vs/workbench/parts/quickopen/browser/commandsHandler","vs/workbench/parts/quickopen/browser/gotoLineHandler","vs/workbench/parts/quickopen/browser/helpHandler","vs/workbench/parts/quickopen/browser/markersHandler"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){var f=o.Registry.as(a.Extensions.WorkbenchActions);f.registerWorkbenchAction(new s.SyncActionDescriptor(p.GotoMarkerAction,p.GotoMarkerAction.Id,p.GotoMarkerAction.Label,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_M})),f.registerWorkbenchAction(new s.SyncActionDescriptor(l.ShowAllCommandsAction,l.ShowAllCommandsAction.ID,l.ShowAllCommandsAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_P,secondary:[c.KeyCode.F1]})),f.registerWorkbenchAction(new s.SyncActionDescriptor(d.GotoLineAction,d.GotoLineAction.ID,d.GotoLineAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyCode.KEY_G,mac:{primary:c.KeyMod.WinCtrl|c.KeyCode.KEY_G}})),f.registerWorkbenchAction(new s.SyncActionDescriptor(u.GotoSymbolAction,u.GotoSymbolAction.ID,u.GotoSymbolAction.LABEL,{primary:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_O})),o.Registry.as(r.Extensions.Quickopen).registerQuickOpenHandler(new r.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/markersHandler","MarkersHandler",p.GotoMarkerAction.Prefix,[{prefix:p.GotoMarkerAction.Prefix,needsEditor:!1,description:n.isMacintosh?i.localize(0,null):i.localize(1,null)}])),o.Registry.as(r.Extensions.Quickopen).registerQuickOpenHandler(new r.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/commandsHandler","CommandsHandler",l.ALL_COMMANDS_PREFIX,i.localize(2,null))),o.Registry.as(r.Extensions.Quickopen).registerQuickOpenHandler(new r.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/gotoLineHandler","GotoLineHandler",d.GOTO_LINE_PREFIX,[{prefix:d.GOTO_LINE_PREFIX,needsEditor:!0,description:n.isMacintosh?i.localize(3,null):i.localize(4,null)}])),o.Registry.as(r.Extensions.Quickopen).registerQuickOpenHandler(new r.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/gotoSymbolHandler","GotoSymbolHandler",u.GOTO_SYMBOL_PREFIX,[{prefix:u.GOTO_SYMBOL_PREFIX,needsEditor:!0,description:n.isMacintosh?i.localize(5,null):i.localize(6,null)},{prefix:u.GOTO_SYMBOL_PREFIX+u.SCOPE_PREFIX,needsEditor:!0,description:i.localize(7,null)}])),o.Registry.as(r.Extensions.Quickopen).registerQuickOpenHandler(new r.QuickOpenHandlerDescriptor("vs/workbench/parts/quickopen/browser/helpHandler","HelpHandler",h.HELP_PREFIX,i.localize(8,null)))});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/tasks/electron-browser/task.contribution",["require","exports","vs/nls!vs/workbench/parts/tasks/electron-browser/task.contribution","vs/base/common/flags","vs/base/common/winjs.base","vs/base/common/severity","vs/base/common/objects","vs/base/common/actions","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/browser/builder","vs/base/common/uri","vs/base/common/types","vs/base/common/keyCodes","vs/base/common/glob","vs/base/common/platform","vs/platform/platform","vs/platform/lifecycle/common/lifecycle","vs/platform/actions/common/actions","vs/platform/instantiation/common/extensions","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/markers/common/markers","vs/platform/telemetry/common/telemetry","vs/platform/configuration/common/configuration","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/platform/plugins/common/plugins","vs/editor/common/services/modeService","vs/editor/common/services/modelService","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/workbench/common/contributions","vs/workbench/browser/actionRegistry","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/browser/quickopen","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/workbench/parts/lib/node/systemVariables","vs/workbench/parts/files/common/files","vs/workbench/parts/output/common/output","vs/workbench/parts/tasks/common/taskSystem","vs/workbench/parts/tasks/common/taskService","vs/workbench/parts/tasks/common/languageServiceTaskSystem","vs/workbench/parts/tasks/node/processRunnerSystem","vs/workbench/parts/tasks/node/processRunnerDetector","vs/css!./media/task.contribution","vs/workbench/parts/tasks/browser/taskQuickOpen"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W,H,V,B,K,U,z,j,q){var G=d.$,Y=function(e){function t(t,n,i,r){e.call(this,t,n),this.taskService=i,this.telemetryService=r}return __extends(t,e),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(a.Action),$=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.run=function(){return this.taskService.build()},t.ID="workbench.action.tasks.build",t.TEXT=n.localize(0,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(Y),X=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.run=function(){return this.taskService.runTest()},t.ID="workbench.action.tasks.test",t.TEXT=n.localize(1,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(Y),Q=(function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.run=function(){return this.taskService.rebuild()},t.ID="workbench.action.tasks.rebuild",t.TEXT=n.localize(2,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(Y),function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.run=function(){return this.taskService.clean()},t.ID="workbench.action.tasks.clean",t.TEXT=n.localize(3,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(Y),function(t){function i(e,n,i,r,o,s,a,c){t.call(this,e,n),this.configurationService=i,this.editorService=r,this.fileService=o,this.contextService=s,this.outputService=a,this.messageService=c}return __extends(i,t),i.prototype.run=function(t){var i=this,s=!(!t||!t.ctrlKey&&!t.metaKey),a=!1;return this.fileService.resolveFile(this.contextService.toResource(".vscode/tasks.json")).then(function(e){return e},function(t){var s=new q.ProcessRunnerDetector(i.fileService,i.contextService,new H.SystemVariables(i.editorService,i.contextService));return s.detect(!1).then(function(t){var s=t.config;t.stderr&&t.stderr.length>0&&(t.stderr.forEach(function(e){i.outputService.append(ie.OutputChannel,e+"\n")}),a=!0,i.messageService.show(o["default"].Error,n.localize(5,null)));var c;if(s)c=r.TPromise.as(JSON.stringify(s,null,4));else{var u=h["default"].parse(e.toUrl("vs/workbench/parts/tasks/common/taskSampleConfig.json"));c=i.fileService.resolveContent(u,{encoding:"utf8"}).then(function(e){return e.value},function(e){var t={version:"0.1.0",command:"msbuild.exe",args:["/property:GenerateFullPaths=true"],problemMatcher:"$msCompile"};return JSON.stringify(t,null,4)})}return c.then(function(e){return i.fileService.createFile(i.contextService.toResource(".vscode/tasks.json"),e)})})}).then(function(e){return i.editorService.openEditor({resource:e.resource,options:{forceOpen:!0}},s).then(function(e){return i.outputService.showOutput(ie.OutputChannel,!0,!0),e})},function(e){throw new Error(n.localize(6,null))})},i.ID="workbench.action.tasks.configureTaskRunner",i.TEXT=n.localize(4,null),i=__decorate([__param(2,T.IConfigurationService),__param(3,F.IWorkbenchEditorService),__param(4,I.IFileService),__param(5,W.IWorkspaceContextService),__param(6,B.IOutputService),__param(7,S.IMessageService)],i)}(a.Action)),Z=function(e){function t(){e.call(this,t.ID,t.TEXT)}return __extends(t,e),t.prototype.run=function(){return this.closeFunction&&this.closeFunction(),r.Promise.as(null)},t.ID="workbench.action.build.closeMessage",t.TEXT=n.localize(7,null),t}(a.Action),J=function(e){function t(t,n,i,r){e.call(this,t,n,i,r)}return __extends(t,e),t.prototype.run=function(){var e=this;return this.taskService.isActive().then(function(t){return t?e.taskService.terminate().then(function(e){return e.success?void 0:r.Promise.wrapError(n.localize(9,null))}):void 0})},t.ID="workbench.action.tasks.terminate",t.TEXT=n.localize(8,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService)],t)}(Y),ee=function(e){function t(t,n,i,r,o){e.call(this,t,n,i,r),this.outputService=o}return __extends(t,e),t.prototype.run=function(){return this.outputService.showOutput(ie.OutputChannel)},t.ID="workbench.action.tasks.showLog",t.TEXT=n.localize(10,null),t=__decorate([__param(2,U.ITaskService),__param(3,C.ITelemetryService),__param(4,B.IOutputService)],t)}(Y),te=function(e){function t(t,n,i){e.call(this,t,n),this.quickOpenService=i}return __extends(t,e),t.prototype.run=function(e){return this.quickOpenService.show("task "),r.Promise.as(null)},t.ID="workbench.action.tasks.runTask",t.TEXT=n.localize(11,null),t=__decorate([__param(2,N.IQuickOpenService)],t)}(a.Action),ne=function(){function e(e,t,n,i){this.quickOpenService=e,this.markerService=t,
this.outputService=n,this.taskService=i,this.activeCount=0}return e.prototype.render=function(t){var i=this,r=[],o=document.createElement("div"),s=document.createElement("div"),a=document.createElement("a"),l=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div");c.addClass(o,"task-statusbar-item"),c.addClass(s,"task-statusbar-item-progress"),o.appendChild(s),s.innerHTML=e.progressChars[0],G(s).hide(),c.addClass(a,"task-statusbar-item-label"),o.appendChild(a),c.addClass(l,"task-statusbar-item-label-error"),l.innerHTML="0",a.appendChild(l),c.addClass(d,"task-statusbar-item-label-warning"),d.innerHTML="0",a.appendChild(d),c.addClass(h,"task-statusbar-item-label-info"),a.appendChild(h),G(h).hide(),r.push(c.addListener(a,"click",function(e){i.quickOpenService.show("!")}));var p=function(e,t){return t>0?(e.innerHTML=t.toString(),G(e).show(),!0):(G(e).hide(),!1)},f=n.localize(12,null),m=function(e){l.innerHTML=e.errors<100?e.errors.toString():f,d.innerHTML=e.warnings<100?e.warnings.toString():f,p(h,e.infos)};return this.markerService.onMarkerChanged(function(e){m(i.markerService.getStatistics())}),r.push(this.taskService.addListener(U.TaskServiceEvents.Active,function(){if(i.activeCount++,1===i.activeCount){var t=1,n=e.progressChars;s.innerHTML=n[0],i.intervalToken=setInterval(function(){s.innerHTML=n[t],t++,t>=n.length&&(t=0)},50),G(s).show()}})),r.push(this.taskService.addListener(U.TaskServiceEvents.Inactive,function(e){i.activeCount--,0===i.activeCount&&(G(s).hide(),clearInterval(i.intervalToken),i.intervalToken=null)})),r.push(this.taskService.addListener(U.TaskServiceEvents.Terminated,function(){0!==i.activeCount&&(G(s).hide(),i.intervalToken&&(clearInterval(i.intervalToken),i.intervalToken=null),i.activeCount=0)})),t.appendChild(o),{dispose:function(){return u.cAll(r)}}},e.progressChars="|/-\\",e=__decorate([__param(0,N.IQuickOpenService),__param(1,w.IMarkerService),__param(2,B.IOutputService),__param(3,U.ITaskService)],e)}(),ie=function(e){function t(t,n,i,r,o,s,a,c,u,l,d,h,p,f){var m=this;e.call(this),this.serviceId=U.ITaskService,this.modeService=t,this.configurationService=n,this.markerService=i,this.outputService=r,this.messageService=o,this.editorService=s,this.fileService=a,this.contextService=c,this.telemetryService=u,this.textFileService=l,this.eventService=h,this.modelService=p,this.pluginService=f,this.taskSystemListeners=[],this.clearTaskSystemPromise=!1,this.configurationService.addListener(T.ConfigurationServiceEventTypes.UPDATED,function(){m.emit(U.TaskServiceEvents.ConfigChanged),m._taskSystem&&m._taskSystem.isActiveSync()?m.clearTaskSystemPromise=!0:(m._taskSystem=null,m._taskSystemPromise=null),m.disposeTaskSystemListeners()}),d.addBeforeShutdownParticipant(this)}return __extends(t,e),t.prototype.disposeTaskSystemListeners=function(){this.taskSystemListeners.forEach(function(e){return e()}),this.taskSystemListeners=[]},t.prototype.disposeFileChangesListener=function(){this.fileChangesListener&&(this.fileChangesListener(),this.fileChangesListener=null)},Object.defineProperty(t.prototype,"taskSystemPromise",{get:function(){var e=this;if(!this._taskSystemPromise){var i=new H.SystemVariables(this.editorService,this.contextService),a=!0;this._taskSystemPromise=this.configurationService.loadConfiguration("tasks").then(function(c){var u=c?c.$parseErrors:null;if(u){for(var l=!1,d=0;d<u.length;d++)if(/tasks\.json$/.test(u[d])){l=!0;break}if(l)return e.outputService.append(t.OutputChannel,n.localize(13,null)),e.outputService.showOutput(t.OutputChannel,!0,!0),r.TPromise.wrapError({})}var h;if(c)if(e.isRunnerConfig(c)&&e.hasDetectorSupport(c)){var p=c;h=new q.ProcessRunnerDetector(e.fileService,e.contextService,i,p).detect(!0).then(function(t){a=e.printStderr(t.stderr);var n=t.config;if(!n)return c;var i=s.clone(p),r=Object.create(null);return i.tasks?(i.tasks.forEach(function(e){return r[e.taskName]=e}),n.tasks.forEach(function(e){r[e.taskName]||i.tasks.push(e)})):n.tasks&&(i.tasks=n.tasks),i})}else h=r.TPromise.as(c);else h=new q.ProcessRunnerDetector(e.fileService,e.contextService,i).detect(!0).then(function(t){return a=e.printStderr(t.stderr),t.config});return h.then(function(r){if(!r)throw e._taskSystemPromise=null,new K.TaskError(o["default"].Info,n.localize(14,null),1);var s=null;if("service"===r.buildSystem?s=new z.LanguageServiceTaskSystem(r,e.telemetryService,e.modeService):e.isRunnerConfig(r)&&(s=new j.ProcessRunnerSystem(r,i,e.markerService,e.modelService,e.telemetryService,e.outputService,t.OutputChannel,a)),null===s)throw e._taskSystemPromise=null,new K.TaskError(o["default"].Info,n.localize(15,null));return e.taskSystemListeners.push(s.addListener(K.TaskSystemEvents.Active,function(t){return e.emit(U.TaskServiceEvents.Active,t)})),e.taskSystemListeners.push(s.addListener(K.TaskSystemEvents.Inactive,function(t){return e.emit(U.TaskServiceEvents.Inactive,t)})),e._taskSystem=s,s},function(t){return e.handleError(t),r.Promise.wrapError(t)})})}return this._taskSystemPromise},enumerable:!0,configurable:!0}),t.prototype.printStderr=function(e){var n=this,i=!0;return e&&e.length>0&&(e.forEach(function(e){i=!1,n.outputService.append(t.OutputChannel,e+"\n")}),this.outputService.showOutput(t.OutputChannel,!0,!0)),i},t.prototype.isRunnerConfig=function(e){return!e.buildSystem||"program"===e.buildSystem},t.prototype.hasDetectorSupport=function(e){return e.command?q.ProcessRunnerDetector.supports(e.command):!1},t.prototype.build=function(){return this.executeTarget(function(e){return e.build()})},t.prototype.rebuild=function(){return this.executeTarget(function(e){return e.rebuild()})},t.prototype.clean=function(){return this.executeTarget(function(e){return e.clean()})},t.prototype.runTest=function(){return this.executeTarget(function(e){return e.runTest()})},t.prototype.run=function(e){return this.executeTarget(function(t){return t.run(e)})},t.prototype.executeTarget=function(e){var t=this;return this.textFileService.saveAll().then(function(i){return t.taskSystemPromise.then(function(t){return t.isActive().then(function(i){if(i)throw new K.TaskError(o["default"].Warning,n.localize(16,null),2);return e(t)})}).then(function(n){if(n.restartOnFileChanges){var i=n.restartOnFileChanges;t.fileChangesListener=t.eventService.addListener(I.EventType.FILE_CHANGES,function(n){var r=n.changes.some(function(e){return(e.type===I.FileChangeType.ADDED||e.type===I.FileChangeType.DELETED)&&!!m.match(i,e.resource.fsPath)});r&&t.terminate().done(function(){v.setTimeout(function(){t.executeTarget(e)},2e3)})})}return n.promise.then(function(e){return t.clearTaskSystemPromise&&(t._taskSystemPromise=null,t.clearTaskSystemPromise=!1),e})},function(e){t.handleError(e)})})},t.prototype.isActive=function(){return this._taskSystemPromise?this.taskSystemPromise.then(function(e){return e.isActive()}):r.TPromise.as(!1)},t.prototype.terminate=function(){var e=this;return this._taskSystemPromise?this.taskSystemPromise.then(function(e){return e.terminate()}).then(function(t){return t.success&&(e.clearTaskSystemPromise&&(e._taskSystemPromise=null,e.clearTaskSystemPromise=!1),e.emit(U.TaskServiceEvents.Terminated,{}),e.disposeFileChangesListener()),t}):r.TPromise.as({success:!0})},t.prototype.tasks=function(){return this.taskSystemPromise.then(function(e){return e.tasks()})},t.prototype.beforeShutdown=function(){var e=this;return this._taskSystem&&this._taskSystem.isActiveSync()?this._taskSystem.canAutoTerminate()||this.messageService.confirm({message:n.localize(17,null),primaryButton:n.localize(18,null)})?this._taskSystem.terminate().then(function(t){return t.success?(e.emit(U.TaskServiceEvents.Terminated,{}),e._taskSystem=null,e.disposeFileChangesListener(),e.disposeTaskSystemListeners(),!1):!0},function(e){return!0}):!0:!1},t.prototype.handleError=function(e){var i=!0;if(e instanceof K.TaskError){var r=e;if(1===r.code||2===r.code){var s=new Z,a=1===r.code?new Q(Q.ID,Q.TEXT,this.configurationService,this.editorService,this.fileService,this.contextService,this.outputService,this.messageService):new J(J.ID,J.TEXT,this,this.telemetryService);s.closeFunction=this.messageService.show(r.severity,{message:r.message,actions:[s,a]})}else this.messageService.show(r.severity,r.message)}else if(e instanceof Error){var c=e;this.messageService.show(o["default"].Error,c.message)}else p.isString(e)?this.messageService.show(o["default"].Error,e):this.messageService.show(o["default"].Error,n.localize(19,null));i&&this.outputService.showOutput(t.OutputChannel,!1,!0)},t.SERVICE_ID="taskService",t.OutputChannel="Tasks",t=__decorate([__param(0,A.IModeService),__param(1,T.IConfigurationService),__param(2,w.IMarkerService),__param(3,B.IOutputService),__param(4,S.IMessageService),__param(5,F.IWorkbenchEditorService),__param(6,I.IFileService),__param(7,W.IWorkspaceContextService),__param(8,C.ITelemetryService),__param(9,V.ITextFileService),__param(10,y.ILifecycleService),__param(11,E.IEventService),__param(12,R.IModelService),__param(13,x.IPluginService)],t)}(l.EventEmitter),re=function(){function e(e){this.instantiationService=e,this.instantiationService.getInstance(U.ITaskService)}return e.prototype.getId=function(){return"vs.taskService"},e=__decorate([__param(0,k.IInstantiationService)],e)}();if(t.TaskServiceParticipant=re,i.enableTasks){b.registerSingleton(U.ITaskService,ie);var oe=n.localize(20,null),se=g.Registry.as(M.Extensions.WorkbenchActions);se.registerWorkbenchAction(new _.SyncActionDescriptor($,$.ID,$.TEXT,{primary:f.KeyMod.CtrlCmd|f.KeyMod.Shift|f.KeyCode.KEY_B}),oe),se.registerWorkbenchAction(new _.SyncActionDescriptor(X,X.ID,X.TEXT,{primary:f.KeyMod.CtrlCmd|f.KeyMod.Shift|f.KeyCode.KEY_T}),oe),se.registerWorkbenchAction(new _.SyncActionDescriptor(J,J.ID,J.TEXT),oe),se.registerWorkbenchAction(new _.SyncActionDescriptor(Q,Q.ID,Q.TEXT),oe),se.registerWorkbenchAction(new _.SyncActionDescriptor(ee,ee.ID,ee.TEXT),oe),se.registerWorkbenchAction(new _.SyncActionDescriptor(te,te.ID,te.TEXT),oe),g.Registry.as(P.Extensions.Quickopen).registerQuickOpenHandler(new P.QuickOpenHandlerDescriptor("vs/workbench/parts/tasks/browser/taskQuickOpen","QuickOpenHandler","task ",n.localize(21,null)));var ae=g.Registry.as(O.Extensions.Statusbar);ae.registerStatusbarItem(new O.StatusbarItemDescriptor(ne,O.StatusbarAlignment.LEFT,50));var ce=g.Registry.as(B.Extensions.OutputChannels);ce.registerChannel(ie.OutputChannel),g.Registry.as(L.Extensions.Workbench).registerWorkbenchContribution(re);var ue="local://schemas/tasks",le={id:ue,description:"Task definition file",type:"object","default":{version:"0.1.0",command:"myCommand",isShellCommand:!1,args:[],showOutput:"always",tasks:[{taskName:"build",showOutput:"silent",isBuildCommand:!0,problemMatcher:["$tsc","$lessCompile"]}]},definitions:{showOutputType:{type:"string","enum":["always","silent","never"],"default":"silent"},patternType:{anyOf:[{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$cpp","$csc","$vb","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]},{$ref:"#/definitions/pattern"},{type:"array",items:{$ref:"#/definitions/pattern"}}]},pattern:{"default":{regexp:"^([^\\\\s].*)\\\\((\\\\d+,\\\\d+)\\\\):\\\\s*(.*)$",file:1,location:2,message:3},additionalProperties:!1,properties:{regexp:{type:"string",description:n.localize(22,null)},file:{type:"integer",description:n.localize(23,null)},location:{type:"integer",description:n.localize(24,null)},line:{type:"integer",description:n.localize(25,null)},column:{type:"integer",description:n.localize(26,null)},endLine:{type:"integer",description:n.localize(27,null)},endColumn:{type:"integer",description:n.localize(28,null)},severity:{type:"integer",description:n.localize(29,null)},code:{type:"integer",description:n.localize(30,null)},message:{type:"integer",description:n.localize(31,null)},loop:{type:"boolean",description:n.localize(32,null)}}},problemMatcherType:{oneOf:[{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]},{$ref:"#/definitions/problemMatcher"},{type:"array",items:{anyOf:[{$ref:"#/definitions/problemMatcher"},{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"]}]}}]},watchingPattern:{type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:n.localize(33,null)},file:{type:"integer",description:n.localize(34,null)}}},problemMatcher:{type:"object",additionalProperties:!1,properties:{base:{type:"string","enum":["$tsc","$tsc-watch","$msCompile","$lessCompile","$gulp-tsc","$jshint","$jshint-stylish","$eslint-compact","$eslint-stylish"],description:n.localize(35,null)},owner:{type:"string",description:n.localize(36,null)},severity:{type:"string","enum":["error","warning","info"],description:n.localize(37,null)},pattern:{$ref:"#/definitions/patternType",description:n.localize(38,null)},fileLocation:{oneOf:[{type:"string","enum":["absolute","relative"]},{type:"array",items:{type:"string"}}],description:n.localize(39,null)},watching:{type:"object",additionalProperties:!1,properties:{activeOnStart:{type:"boolean",description:n.localize(40,null)},beginsPattern:{oneOf:[{type:"string"},{type:"#/definitions/watchingPattern"}],description:n.localize(41,null)},endsPattern:{oneOf:[{type:"string"},{type:"#/definitions/watchingPattern"}],description:n.localize(42,null)}}},watchedTaskBeginsRegExp:{type:"string",description:n.localize(43,null)},watchedTaskEndsRegExp:{type:"string",description:n.localize(44,null)}}},baseTaskRunnerConfiguration:{type:"object",properties:{command:{type:"string",description:n.localize(45,null)},isShellCommand:{type:"boolean","default":!0,description:n.localize(46,null)},args:{type:"array",description:n.localize(47,null),items:{type:"string"}},options:{type:"object",description:n.localize(48,null),properties:{cwd:{type:"string",description:n.localize(49,null)},env:{type:"object",description:n.localize(50,null)}},additionalProperties:{type:["string","array","object"]}},showOutput:{$ref:"#/definitions/showOutputType",description:n.localize(51,null)},isWatching:{type:"boolean",description:n.localize(52,null),"default":!0},promptOnClose:{type:"boolean",description:n.localize(53,null),"default":!1},echoCommand:{type:"boolean",description:n.localize(54,null),"default":!0},suppressTaskName:{type:"boolean",description:n.localize(55,null),"default":!0},taskSelector:{type:"string",description:n.localize(56,null)},problemMatcher:{$ref:"#/definitions/problemMatcherType",description:n.localize(57,null)},tasks:{type:"array",description:n.localize(58,null),items:{type:"object",$ref:"#/definitions/taskDescription"}}}},taskDescription:{type:"object",required:["taskName"],additionalProperties:!1,properties:{taskName:{type:"string",description:n.localize(59,null)},args:{type:"array",description:n.localize(60,null),items:{type:"string"}},suppressTaskName:{type:"boolean",description:n.localize(61,null),"default":!0},showOutput:{$ref:"#/definitions/showOutputType",description:n.localize(62,null)},echoCommand:{type:"boolean",description:n.localize(63,null),"default":!0},isWatching:{type:"boolean",description:n.localize(64,null),"default":!0},isBuildCommand:{type:"boolean",description:n.localize(65,null),"default":!0},isTestCommand:{type:"boolean",description:n.localize(66,null),"default":!0},problemMatcher:{$ref:"#/definitions/problemMatcherType",description:n.localize(67,null)}}}},allOf:[{type:"object",required:["version"],properties:{version:{type:"string","enum":["0.1.0"],description:n.localize(68,null)},windows:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(69,null)},osx:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(70,null)},linux:{$ref:"#/definitions/baseTaskRunnerConfiguration",description:n.localize(71,null)}}},{$ref:"#/definitions/baseTaskRunnerConfiguration"}]},de=g.Registry.as(D.Extensions.JSONContribution);de.registerSchema(ue,le),de.addSchemaFileAssociation("/.vscode/tasks.json",ue)}});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/workbench/services/history/browser/history",["require","exports","vs/base/common/errors","vs/base/common/platform","vs/nls!vs/workbench/services/history/browser/history","vs/base/common/events","vs/workbench/common/editor","vs/workbench/browser/parts/editor/textEditor","vs/workbench/browser/events","vs/workbench/services/history/common/history","vs/editor/common/core/selection"],function(e,t,n,i,r,o,s,a,c,u,l){var d=function(){function e(e,t){this._editorInput=e,this._selection=t}return Object.defineProperty(e.prototype,"editorInput",{get:function(){return this._editorInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},enumerable:!0,configurable:!0}),e.prototype.justifiesNewPushState=function(t){if(!this._editorInput.matches(t._editorInput))return!0;if(!l.Selection.isISelection(this._selection)||!l.Selection.isISelection(t._selection))return!0;var n=l.Selection.liftSelection(this._selection),i=l.Selection.liftSelection(t._selection);return Math.abs(n.getStartPosition().lineNumber-i.getStartPosition().lineNumber)<e.EDITOR_SELECTION_THRESHOLD?!1:!0},e.EDITOR_SELECTION_THRESHOLD=5,e}();t.EditorState=d;var h=function(){function e(e,t,n){var i=this;this.eventService=e,this.editorService=t,this.contextService=n,this.toUnbind=[],window.document.title=this.getWindowTitle(null),this.toUnbind.push(this.eventService.addListener(c.EventType.EDITOR_INPUT_CHANGED,function(e){return i.onEditorInputChanged(e)})),this.toUnbind.push(this.eventService.addListener(c.EventType.EDITOR_INPUT_STATE_CHANGED,function(e){return i.onEditorInputStateChanged(e.editorInput)})),this.toUnbind.push(this.eventService.addListener(c.EventType.TEXT_EDITOR_SELECTION_CHANGED,function(e){return i.onTextEditorSelectionChanged(e)}))}return e.prototype.onEditorInputStateChanged=function(e){var t=this.editorService.getActiveEditor();(!t||e.matches(t.input))&&this.updateWindowTitle(e)},e.prototype.onTextEditorSelectionChanged=function(e){var t=e.editor,n=this.editorService.getActiveEditor();n&&t&&n!==t||this.handleEditorSelectionChangeEvent(e.editor)},e.prototype.onEditorInputChanged=function(e){this.onEditorEvent(e.editor)},e.prototype.onEditorEvent=function(e){var t=e?e.input:null,n=this.editorService.getActiveEditor();n&&e&&n!==e||(this.updateWindowTitle(t),this.handleEditorInputChangeEvent(e))},e.prototype.updateWindowTitle=function(e){var t=null;t=e&&e.getName()?this.getWindowTitle(e):this.getWindowTitle(null),window.document.title=t},e.prototype.getWindowTitle=function(e){var t=this.doGetWindowTitle(e);return this.contextService.getConfiguration().env.pluginDevelopmentPath?r.localize(0,null,t):t},e.prototype.doGetWindowTitle=function(e){var t=this.contextService.getConfiguration().env.appName,n=e&&e.getName();if(n&&e){var o=e.getStatus();o&&o.decoration&&!i.isMacintosh&&(n=r.localize(1,null,o.decoration,n))}var s=this.contextService.getWorkspace();if(s){var a=s.name;return n?i.isMacintosh?r.localize(2,null,n,a):r.localize(3,null,n,a,t):i.isMacintosh?a:r.localize(4,null,a,t)}return n?i.isMacintosh?n:r.localize(5,null,n,t):t},e.prototype.findVisibleEditorPosition=function(e){var t=this.editorService.getActiveEditor();if(t&&e.matches(t.input))return t.position;for(var n=this.editorService.getVisibleEditors(),i=0;i<n.length;i++){var r=n[i];if(r!==t&&e.matches(r.input))return r.position}return null},e.prototype.dispose=function(){for(;this.toUnbind.length;)this.toUnbind.pop()()},e}();t.BaseHistoryService=h;var p=function(e){function t(t,n,i,r){e.call(this,t,n,i),this.serviceId=u.IHistoryService,this.quickOpenService=r,this.index=-1}return __extends(t,e),Object.defineProperty(t.prototype,"stack",{get:function(){if(!this._stack){this._stack=[];for(var e=this.quickOpenService.getEditorHistory(),t=e.length-1;t>=0;t--)this.addToStack(e[t])}return this._stack},enumerable:!0,configurable:!0}),t.prototype.forward=function(){this.stack.length>this.index+1&&(this.index++,this.navigate())},t.prototype.back=function(){this.index>0&&(this.index--,this.navigate())},t.prototype.navigate=function(){var e=this,t=this.stack[this.index];this.blockEditorEvent=!0,this.editorService.openEditor(t.input,t.options,this.findVisibleEditorPosition(t.input)).done(function(){e.blockEditorEvent=!1},function(t){e.blockEditorEvent=!1,n.onUnexpectedError(t)})},t.prototype.handleEditorSelectionChangeEvent=function(e){this.handleEditorEvent(e,!0)},t.prototype.handleEditorInputChangeEvent=function(e){this.handleEditorEvent(e,!1)},t.prototype.handleEditorEvent=function(e,t){if(!this.blockEditorEvent){if(e instanceof a.BaseTextEditor&&e.input)return void this.handleTextEditorEvent(e,t);this.currentFileEditorState=null,e&&e.input&&this.handleNonTextEditorEvent(e)}},t.prototype.handleTextEditorEvent=function(e,t){var n=new d(e.input,e.getSelection());if(!this.currentFileEditorState||this.currentFileEditorState.justifiesNewPushState(n)){this.currentFileEditorState=n;var i;t&&(i=new s.TextEditorOptions,i.selection(e.getSelection().startLineNumber,e.getSelection().startColumn)),this.addToStack(e.input,i)}},t.prototype.handleNonTextEditorEvent=function(e){var t=this.stack[this.index];t&&t.input.matches(e.input)||this.addToStack(e.input)},t.prototype.addToStack=function(e,t){var n=this,i=!1;if(this.stack[this.index]){var r=this.stack[this.index];r.input.matches(e)&&!r.options&&(i=!0)}var s={input:e,options:t};i?this.stack[this.index]=s:(this.index++,this.stack.splice(this.index,0,s)),e.addOneTimeListener(o.EventType.DISPOSE,function(){n.stack.forEach(function(t,i){t.input.matches(e)&&(n.stack.splice(i,1),n.index>=i&&n.index--)})})},t}(h);t.HistoryService=p}),define("vs/workbench/browser/workbench",["require","exports","vs/base/common/winjs.base","vs/base/common/types","vs/base/common/lifecycle","vs/base/common/strings","vs/base/browser/dom","vs/base/browser/builder","vs/base/common/async","vs/base/common/assert","vs/base/common/timer","vs/base/common/errors","vs/platform/platform","vs/workbench/common/constants","vs/workbench/browser/events","vs/workbench/common/contributions","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor","vs/workbench/services/history/browser/history","vs/workbench/browser/parts/activitybar/activitybarPart","vs/workbench/browser/parts/editor/editorPart","vs/workbench/browser/parts/sidebar/sidebarPart","vs/workbench/browser/parts/statusbar/statusbarPart","vs/workbench/browser/layout","vs/workbench/browser/actionBarRegistry","vs/workbench/browser/viewlet","vs/workbench/browser/parts/quickopen/quickOpenController","vs/platform/instantiation/common/extensions","vs/platform/keybinding/browser/keybindingServiceImpl","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/services/editor/browser/editorService","vs/workbench/services/part/common/partService","vs/platform/theme/common/themes","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/keybinding/common/keybindingService","vs/platform/contextview/browser/contextView","vs/workbench/services/activity/common/activityService","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/workbench/services/quickopen/browser/quickOpenService","vs/workbench/services/history/common/history","vs/platform/event/common/event","vs/platform/lifecycle/common/lifecycle","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/platform/plugins/common/plugins","vs/workbench/services/statusbar/statusbarService","vs/css!./media/workbench","vs/css!./media/octicons/octicons"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W,H,V,B,K,U,z,j,q,G,Y){var $=function(){function e(e,t,r,o,s){var u=this;if(this.serviceId=D.IPartService,this.validateParams(e,r,o),i.isString(e)){var l=a.withElementById(e.toString());this.container=l.getHTMLElement()}else this.container=e;this.workbenchParams={workspace:t,configuration:r,options:o||{},instantiationService:s},this.currentTheme=null,this.toDispose=[],this.toShutdown=[],this.editorBackgroundDelayer=new c.Delayer(50),this.creationPromise=new n.TPromise(function(e,t,n){u.creationPromiseComplete=e})}return e.prototype.validateParams=function(e,t,n){if(u.ok(e,"Workbench requires a container to be created with"),i.isString(e)){var r=a.withElementById(e.toString());u.ok(r,o.format("Can not find HTMLElement with id '{0}'.",e))}},e.prototype.startup=function(e){var t=this;u.ok(!this.workbenchStarted,"Can not start a workbench that was already started"),u.ok(!this.workbenchShutdown,"Can not start a workbench that was shutdown");try{this.workbenchStarted=!0,this.callbacks=e,this.createWorkbench(),this.initServices(),this.callbacks&&this.callbacks.onServicesCreated&&this.callbacks.onServicesCreated(),this.registerListeners(),this.initSettings(),this.renderWorkbench(),this.createWorkbenchLayout(),this.registerEmitters();var i=[],r=h.Registry.as(T.Extensions.Viewlets);if(!this.sideBarHidden&&r.getDefaultViewletId()){var s=l.start(l.Topic.STARTUP,o.format("Opening Viewlet: {0}",r.getDefaultViewletId()));i.push(this.sidebarPart.openViewlet(r.getDefaultViewletId(),!1).then(function(){return s.stop()}))}var a=l.start(l.Topic.STARTUP,o.format("Restoring Editor(s)")),c=n.Promise.as(null),p=[];if(this.workbenchParams.options.filesToCreate&&this.workbenchParams.options.filesToCreate.length||this.workbenchParams.options.filesToOpen&&this.workbenchParams.options.filesToOpen.length){var m=[],v=this.workbenchParams.options.filesToCreate||[],y=this.workbenchParams.options.filesToOpen||[];m.push.apply(m,v.map(function(e){return t.untitledEditorService.createOrGet(e.resource)})),p.push.apply(p,v.map(function(e){return null})),c=n.Promise.join(y.map(function(e){return t.editorService.inputToType(e)})).then(function(e){return m.push.apply(m,e),p.push.apply(p,y.map(function(e){return g.TextEditorOptions.from(e)})),m})}else this.workbenchParams.workspace||(c=n.Promise.as([this.untitledEditorService.createOrGet()]));i.push(c.then(function(e){return t.editorPart.restoreEditorState(e,p).then(function(){t.onEditorOpenedOrClosed(),a.stop()})})),n.Promise.join(i).then(function(){t.workbenchCreated=!0,t.eventService.emit(f.EventType.WORKBENCH_CREATED),t.creationPromiseComplete(!0),t.callbacks&&t.callbacks.onWorkbenchStarted&&t.callbacks.onWorkbenchStarted()},d.onUnexpectedError)}catch(_){throw console.error(d.toErrorMessage(_,!0)),_}},e.prototype.initServices=function(){this.instantiationService=this.workbenchParams.instantiationService,this.eventService=this.instantiationService.getInstance(K.IEventService),this.storageService=this.instantiationService.getInstance(O.IStorageService),this.keybindingService=this.instantiationService.getInstance(P.IKeybindingService),this.contextService=this.instantiationService.getInstance(M.IWorkspaceContextService),this.telemetryService=this.instantiationService.getInstance(j.ITelemetryService);var e=this.instantiationService.getInstance(z.IMessageService);this.keybindingService instanceof x.AbstractKeybindingService&&this.keybindingService.setMessageService(e);var t=this.instantiationService.getInstance(q.IThreadService);this.instantiationService.getInstance(G.IPluginService);this.lifecycleService=this.instantiationService.getInstance(U.ILifecycleService),this.lifecycleService.onShutdown.add(this.shutdownComponents,this);var n=this.instantiationService.getInstance(N.IContextMenuService);this.untitledEditorService=this.instantiationService.getInstance(A.IUntitledEditorService),this.instantiationService.addSingleton(D.IPartService,this),this.sidebarPart=new E.SidebarPart(e,this.storageService,this.eventService,this.telemetryService,n,this,this.keybindingService,p.Identifiers.SIDEBAR_PART),this.toDispose.push(this.sidebarPart),this.toShutdown.push(this.sidebarPart),this.instantiationService.addSingleton(W.IViewletService,this.sidebarPart),this.activitybarPart=new _.ActivitybarPart(this.sidebarPart,e,this.telemetryService,this.eventService,n,this.keybindingService,p.Identifiers.ACTIVITYBAR_PART),this.toDispose.push(this.activitybarPart),this.toShutdown.push(this.activitybarPart),this.instantiationService.addSingleton(F.IActivityService,this.activitybarPart),this.editorPart=new b.EditorPart(e,this.eventService,this.telemetryService,this.storageService,this,p.Identifiers.EDITOR_PART),this.toDispose.push(this.editorPart),this.toShutdown.push(this.editorPart),this.editorService=new R.WorkbenchEditorService(this.editorPart,this.untitledEditorService),this.instantiationService.addSingleton(H.IWorkbenchEditorService,this.editorService),this.quickOpen=new I.QuickOpenController(this.eventService,this.storageService,this.editorService,this.sidebarPart,e,this.telemetryService,this.contextService,this.keybindingService),this.toDispose.push(this.quickOpen),this.toShutdown.push(this.quickOpen),this.instantiationService.addSingleton(V.IQuickOpenService,this.quickOpen),this.statusbarPart=new S.StatusbarPart(p.Identifiers.STATUSBAR_PART),this.toDispose.push(this.statusbarPart),this.toShutdown.push(this.statusbarPart),this.instantiationService.addSingleton(Y.IStatusbarService,this.statusbarPart),this.instantiationService.addSingleton(B.IHistoryService,new y.HistoryService(this.eventService,this.editorService,this.contextService,this.quickOpen));for(var i=k.getServices(),r=0;r<i.length;r++){var o=i[r];this.instantiationService.addSingleton(o.id,o.descriptor)}t.setInstantiationService(this.instantiationService),this.telemetryService.setInstantiationService(this.instantiationService),e.setWorkbenchServices(this.quickOpen,this.statusbarPart),this.quickOpen.setInstantiationService(this.instantiationService),this.statusbarPart.setInstantiationService(this.instantiationService),this.activitybarPart.setInstantiationService(this.instantiationService),this.sidebarPart.setInstantiationService(this.instantiationService),this.editorPart.setInstantiationService(this.instantiationService),this.untitledEditorService.setInstantiationService(this.instantiationService),this.editorService.setInstantiationService(this.instantiationService),this.keybindingService.setInstantiationService(this.instantiationService),h.Registry.as(C.Extensions.Actionbar).setInstantiationService(this.instantiationService),h.Registry.as(m.Extensions.Workbench).setInstantiationService(this.instantiationService),h.Registry.as(v.Extensions.Editors).setInstantiationService(this.instantiationService)},e.prototype.initSettings=function(){this.sideBarHidden=this.storageService.getBoolean(e.sidebarHiddenSettingKey,O.StorageScope.WORKSPACE,!1),this.workbenchParams.options.singleFileMode&&(this.sideBarHidden=!0);var t=h.Registry.as(T.Extensions.Viewlets);t.getDefaultViewletId()||(this.sideBarHidden=!0);var n=this.storageService.get(e.sidebarPositionSettingKey,O.StorageScope.GLOBAL,"left");this.sideBarPosition="left"===n?D.Position.LEFT:D.Position.RIGHT},e.prototype.isStarted=function(){return this.workbenchStarted&&!this.workbenchShutdown},e.prototype.isCreated=function(){return this.workbenchCreated&&this.workbenchStarted},e.prototype.joinCreation=function(){return this.creationPromise},e.prototype.hasFocus=function(e){var t=document.activeElement;if(!t)return!1;var n=null;switch(e){case D.Parts.ACTIVITYBAR_PART:n=this.activitybarPart.getContainer();break;case D.Parts.SIDEBAR_PART:n=this.sidebarPart.getContainer();break;case D.Parts.EDITOR_PART:n=this.editorPart.getContainer();break;case D.Parts.STATUSBAR_PART:if(!this.statusbarPart)return!1;n=this.statusbarPart.getContainer()}return s.isAncestor(t,n.getHTMLElement())},e.prototype.isVisible=function(e){return e===D.Parts.SIDEBAR_PART?!this.sideBarHidden:!0;
},e.prototype.isSideBarHidden=function(){return this.sideBarHidden},e.prototype.setSideBarHidden=function(t,n){if(this.sideBarHidden=t,t?this.workbench.addClass("nosidebar"):this.workbench.removeClass("nosidebar"),n||this.workbenchLayout.layout(!0),t&&this.sidebarPart.getActiveViewlet()){this.sidebarPart.hideActiveViewlet();var i=this.editorPart.getActiveEditor();i&&i.focus()}else if(!t&&!this.sidebarPart.getActiveViewlet()){var r=h.Registry.as(T.Extensions.Viewlets),o=this.sidebarPart.getLastActiveViewletId()||r.getDefaultViewletId();o&&this.sidebarPart.openViewlet(o,!0).done(null,d.onUnexpectedError)}this.storageService.store(e.sidebarHiddenSettingKey,t?"true":"false",O.StorageScope.WORKSPACE)},e.prototype.getSideBarPosition=function(){return this.sideBarPosition},e.prototype.setSideBarPosition=function(t){this.sideBarHidden&&this.setSideBarHidden(!1,!0);var n=t===D.Position.LEFT?"left":"right",i=this.sideBarPosition===D.Position.LEFT?"left":"right";this.sideBarPosition=t,this.activitybarPart.getContainer().removeClass(i),this.sidebarPart.getContainer().removeClass(i),this.activitybarPart.getContainer().addClass(n),this.sidebarPart.getContainer().addClass(n),this.workbenchLayout.layout(!0),this.storageService.store(e.sidebarPositionSettingKey,t===D.Position.LEFT?"left":"right",O.StorageScope.GLOBAL)},e.prototype.shutdown=function(e){return this.isStarted()&&(e||this.shutdownComponents(),this.eventService.emit(f.EventType.WORKBENCH_DISPOSING),this.workbenchShutdown=!0,this.dispose()),null},e.prototype.dispose=function(){this.toDispose=r.disposeAll(this.toDispose),this.lifecycleService.onShutdown.remove(this.shutdownComponents,this),this.eventService.emit(f.EventType.WORKBENCH_DISPOSED)},e.prototype.layout=function(){this.isStarted()&&this.workbenchLayout.layout()},e.prototype.shutdownComponents=function(){this.toShutdown.forEach(function(e){return e.shutdown()})},e.prototype.registerEmitters=function(){this.hookPartListeners(this.activitybarPart),this.hookPartListeners(this.editorPart),this.hookPartListeners(this.sidebarPart),this.toDispose.push(this.toDisposable(this.eventService.addEmitter(this.storageService)))},e.prototype.hookPartListeners=function(e){this.toDispose.push(this.toDisposable(this.eventService.addEmitter(e,e.getId())))},e.prototype.registerListeners=function(){var e=this;this.toDispose.push(this.toDisposable(this.eventService.addListener(O.StorageEventType.STORAGE,function(t){switch(t.key){case p.Preferences.THEME:e.applyTheme(t.newValue)}}))),this.toDispose.push(this.toDisposable(this.eventService.addListener(f.EventType.EDITOR_CLOSED,function(){return e.onEditorOpenedOrClosed()}))),this.toDispose.push(this.toDisposable(this.eventService.addListener(f.EventType.EDITOR_OPENED,function(){return e.onEditorOpenedOrClosed()})))},e.prototype.onEditorOpenedOrClosed=function(){var e=this,t=this.editorService.getVisibleEditors().length;0===t?this.editorBackgroundDelayer.trigger(function(){return e.editorPart.getContainer().addClass("empty")}):this.editorBackgroundDelayer.trigger(function(){return e.editorPart.getContainer().removeClass("empty")})},e.prototype.toDisposable=function(e){return{dispose:function(){e()}}},e.prototype.createWorkbenchLayout=function(){var e=new w.LayoutOptions;e.setMargin(new a.Box(0,0,0,0)),this.workbenchLayout=this.instantiationService.createInstance(w.WorkbenchLayout,a.$(this.container),this.workbench,this.activitybarPart,this.editorPart,this.sidebarPart,this.statusbarPart,this.quickOpen,e),this.toDispose.push(this.workbenchLayout)},e.prototype.createWorkbench=function(){this.workbenchContainer=a.$(".monaco-workbench-container"),this.workbench=a.$().div({"class":"monaco-workbench",id:p.Identifiers.WORKBENCH_CONTAINER}).appendTo(this.workbenchContainer)},e.prototype.renderWorkbench=function(){this.sideBarHidden&&this.workbench.addClass("nosidebar"),this.workbenchParams.options.readOnly&&this.workbench.addClass("readonly"),this.workbenchParams.workspace||this.workbench.addClass("no-workspace"),this.createActivityBarPart(),this.createSidebarPart(),this.createEditorPart(),this.createStatusbarPart(),this.createQuickOpen();var e=this.storageService.get(p.Preferences.THEME,O.StorageScope.GLOBAL,L.DEFAULT_THEME_ID);this.applyTheme(e),this.workbenchContainer.build(this.container)},e.prototype.applyTheme=function(e){this.currentTheme&&this.workbench.removeClass(this.currentTheme),this.currentTheme=e||null,this.currentTheme&&this.workbench.addClass(this.currentTheme)},e.prototype.createActivityBarPart=function(){var e=a.$(this.workbench).div({"class":["part","activitybar",this.sideBarPosition===D.Position.LEFT?"left":"right"],id:p.Identifiers.ACTIVITYBAR_PART});this.activitybarPart.create(e)},e.prototype.createSidebarPart=function(){var e=a.$(this.workbench).div({"class":["part","sidebar",this.sideBarPosition===D.Position.LEFT?"left":"right"],id:p.Identifiers.SIDEBAR_PART});this.sidebarPart.create(e)},e.prototype.createEditorPart=function(){var e=a.$(this.workbench).div({"class":["part","editor","monaco-editor-background"],id:p.Identifiers.EDITOR_PART});this.editorPart.create(e)},e.prototype.createStatusbarPart=function(){var e=a.$(this.workbench).div({"class":["part","statusbar"],id:p.Identifiers.STATUSBAR_PART});this.statusbarPart.create(e)},e.prototype.createQuickOpen=function(){this.quickOpen.create()},e.prototype.getEditorPart=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.editorPart},e.prototype.getSidebarPart=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.sidebarPart},e.prototype.getInstantiationService=function(){return u.ok(this.workbenchStarted,"Workbench is not started. Call startup() first."),this.instantiationService},e.prototype.addClass=function(e){this.workbench&&this.workbench.addClass(e)},e.prototype.removeClass=function(e){this.workbench&&this.workbench.removeClass(e)},e.sidebarPositionSettingKey="workbench.sidebar.position",e.sidebarHiddenSettingKey="workbench.sidebar.hidden",e}();t.Workbench=$});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/editor/node/textMate/TMSyntax",["require","exports","vs/nls!vs/editor/node/textMate/TMSyntax","vs/base/common/paths","vs/base/common/errors","vs/editor/common/modes","vs/editor/common/modes/supports","vs/base/common/collections","vscode-textmate","vs/editor/common/modes/TMState","vs/editor/common/services/modeService","vs/platform/plugins/common/pluginsRegistry","vs/editor/common/modes/languageExtensionPoint"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){function p(e,t){var n=new y(e.getId(),t);return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new u.TMState(e,null,null)},tokenize:function(e,t,i,r){return n.tokenize(e,t,i,r)}}}function f(e,t){for(var n=[],i=1;i<t.scopes.length;++i)n=n.concat(t.scopes[i].split("."));var r="";if(t.scopes.length>0){var o=t.scopes[0].lastIndexOf(".");o>=0&&(r=t.scopes[0].substr(o+1))}var s=[],a=m(n,r,s);return{isOpaqueToken:a,tokenType:s.join("."),modeToken:e}}function m(e,t,n){e.sort();for(var i=null,r=null,o=!1,s=0,a=e.length;a>s;s++)i=r,r=e[s],r!==i&&r!==t&&(n.push(r),o||"comment"!==r&&"string"!==r&&"regexp"!==r||(o=!0));return n.push(t),o}var v=d.PluginsRegistry.registerExtensionPoint("grammars",{description:n.localize(0,null),type:"array","default":[{id:"",extensions:[]}],items:{type:"object","default":{language:"{{id}}",scopeName:"source.{{id}}",path:"./syntaxes/{{id}}.tmLanguage."},properties:{language:{description:n.localize(1,null),type:"string"},scopeName:{description:n.localize(2,null),type:"string"},path:{description:n.localize(3,null),type:"string"}}}}),g=function(){function e(e){var t=this;this._modeService=e,this._grammarRegistry=new c.Registry({getFilePath:function(e){return t._scopeNameToFilePath[e]}}),this._scopeNameToFilePath={},v.setHandler(function(e){for(var n=0;n<e.length;n++)for(var i=e[n].value,r=0;r<i.length;r++)t._handleGrammarExtensionPointUser(e[n].description.extensionFolderPath,i[r],e[n].collector)})}return e.prototype._handleGrammarExtensionPointUser=function(e,t,r){var o=this;if(t.language&&("string"!=typeof t.language||!h.LanguageExtensions.isRegisteredMode(t.language)))return void r.error(n.localize(4,null,v.name,String(t.language)));if(!t.scopeName||"string"!=typeof t.scopeName)return void r.error(n.localize(5,null,v.name,String(t.scopeName)));if(!t.path||"string"!=typeof t.path)return void r.error(n.localize(6,null,v.name,String(t.path)));var s=i.normalize(i.join(e,t.path));0!==s.indexOf(e)&&r.warn(n.localize(7,null,v.name,s,e)),this._scopeNameToFilePath[t.scopeName]=s;var a=t.language;a&&d.PluginsRegistry.registerOneTimeActivationEventListener("onLanguage:"+a,function(){o.registerDefinition(a,t.scopeName)})},e.prototype.registerDefinition=function(e,t){var n=this;this._grammarRegistry.loadGrammar(t,function(t,i){return t?void r.onUnexpectedError(t):void n._modeService.registerTokenizationSupport(e,function(e){return p(e,i)})})},e=__decorate([__param(0,l.IModeService)],e)}();t.MainProcessTextMateSyntax=g;var y=function(){function e(e,t){this._modeId=e,this._grammar=t}return e.prototype.tokenize=function(e,t,n,i){if(void 0===n&&(n=0),e.length>=2e4)return{tokens:[{startIndex:n,type:"",bracket:o.Bracket.None}],actualStopOffset:n,endState:t,modeTransitions:[{startIndex:n,mode:t.getMode()}]};var r=t.clone(),a=this._grammar.tokenizeLine(e,r.getRuleStack());r.setRuleStack(a.ruleStack);for(var c={tokens:[],actualStopOffset:n+e.length,endState:r,modeTransitions:[{startIndex:n,mode:r.getMode()}]},u=o.Bracket.None,l=o.Bracket.Open,d=o.Bracket.Close,h=0,p=a.tokens.length;p>h;h++){var m=a.tokens[h],v=m.startIndex,g=p>h+1?a.tokens[h+1].startIndex:e.length,y=f(this._modeId,m);if(y.isOpaqueToken)c.tokens.push(new s.Token(v+n,y.tokenType,u));else{var T=void 0,I=void 0,k=void 0,x=void 0;for(T=v;g>T;T++){switch(I=e.charCodeAt(T),k=null,x=u,I){case _:k="delimiter.paren",x=l;break;case b:k="delimiter.paren",x=d;break;case E:k="delimiter.curly",x=l;break;case S:k="delimiter.curly",x=d;break;case w:k="delimiter.square",x=l;break;case C:k="delimiter.square",x=d}k&&(T>v&&(c.tokens.push(new s.Token(v+n,y.tokenType,u)),v=T),c.tokens.push(new s.Token(v+n,k+"."+y.modeToken,x)),v=T+1)}g>v&&c.tokens.push(new s.Token(v+n,y.tokenType,u))}}return c},e}(),_="(".charCodeAt(0),b=")".charCodeAt(0),E="{".charCodeAt(0),S="}".charCodeAt(0),w="[".charCodeAt(0),C="]".charCodeAt(0),T=a.createNumberDictionary();T["(".charCodeAt(0)]=o.Bracket.Open,T[")".charCodeAt(0)]=o.Bracket.Close,T["{".charCodeAt(0)]=o.Bracket.Open,T["}".charCodeAt(0)]=o.Bracket.Close,T["[".charCodeAt(0)]=o.Bracket.Open,T["]".charCodeAt(0)]=o.Bracket.Close});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/actions",["require","exports","vs/base/common/winjs.base","vs/base/common/timer","vs/base/common/paths","vs/base/common/actions","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/editor/common/editorService","vs/nls!vs/workbench/electron-browser/actions","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/browser/quickOpenService","vs/platform/instantiation/common/instantiation","vs/platform/configuration/common/configuration","ipc","remote","web-frame"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(e){function t(t,n,i,r){e.call(this,t,n),this.editorService=i,this.windowService=r}return __extends(t,e),t.prototype.run=function(){var e=this.editorService.getActiveEditor();return e?this.editorService.closeEditor(e):(this.windowService.getWindow().close(),n.Promise.as(!1))},t.ID="workbench.action.closeActiveEditor",t.LABEL=c.localize(0,null),t=__decorate([__param(2,a.IWorkbenchEditorService),__param(3,s.IWindowService)],t)}(o.Action);t.CloseEditorAction=g;var y=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return this.windowService.getWindow().close(),n.Promise.as(!0)},t.ID="workbench.action.closeWindow",t.LABEL=c.localize(1,null),t=__decorate([__param(2,s.IWindowService)],t)}(o.Action);t.CloseWindowAction=y;var _=function(e){function t(t,n,i,r){e.call(this,t,n),this.contextService=i,this.messageService=r}return __extends(t,e),t.prototype.run=function(){return this.contextService.getWorkspace()?f.send("vscode:closeFolder",m.getCurrentWindow().id):this.messageService.show(u.Severity.Info,c.localize(3,null)),n.Promise.as(!0)},t.ID="workbench.action.closeFolder",t.LABEL=c.localize(2,null),t=__decorate([__param(2,l.IWorkspaceContextService),__param(3,u.IMessageService)],t)}(o.Action);t.CloseFolderAction=_;var b=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return this.windowService.getWindow().openNew(),n.Promise.as(!0)},t.ID="workbench.action.newWindow",t.LABEL=c.localize(4,null),t=__decorate([__param(2,s.IWindowService)],t)}(o.Action);t.NewWindowAction=b;var E=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return f.send("vscode:toggleFullScreen",this.windowService.getWindowId()),n.Promise.as(!0)},t.ID="workbench.action.toggleFullScreen",t.LABEL=c.localize(5,null),t=__decorate([__param(2,s.IWindowService)],t)}(o.Action);t.ToggleFullScreenAction=E;var S=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){return m.getCurrentWindow().toggleDevTools(),n.Promise.as(!0)},t.ID="workbench.action.toggleDevTools",t.LABEL=c.localize(6,null),t=__decorate([__param(2,h.INullService)],t)}(o.Action);t.ToggleDevToolsAction=S;var w=function(e){function t(t,n,i){e.call(this,t,n)}return __extends(t,e),t.prototype.run=function(){return v.setZoomLevel(v.getZoomLevel()+1),n.Promise.as(!0)},t.ID="workbench.action.zoomIn",t.LABEL=c.localize(7,null),t=__decorate([__param(2,h.INullService)],t)}(o.Action);t.ZoomInAction=w;var C=function(e){function t(t,n,i){e.call(this,t,n),this.configurationService=i}return __extends(t,e),t.prototype.run=function(){return n.Promise.as(!1)},t.prototype.loadConfiguredZoomLevel=function(){return this.configurationService.loadConfiguration().then(function(e){return e.window&&"number"==typeof e.window.zoomLevel?e.window.zoomLevel:0})},t=__decorate([__param(2,p.IConfigurationService)],t)}(o.Action);t.BaseZoomAction=C;var T=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){return this.loadConfiguredZoomLevel().then(function(e){var t=v.getZoomLevel()-1;0>t&&e>t&&(t=Math.min(e,0)),v.setZoomLevel(t)})},t.ID="workbench.action.zoomOut",t.LABEL=c.localize(8,null),t=__decorate([__param(2,p.IConfigurationService)],t)}(C);t.ZoomOutAction=T;var I=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.run=function(){return this.loadConfiguredZoomLevel().then(function(e){v.setZoomLevel(e)})},t.ID="workbench.action.zoomReset",t.LABEL=c.localize(9,null),t=__decorate([__param(2,p.IConfigurationService)],t)}(C);t.ZoomResetAction=I;var k;!function(e){e[e.LoaderAvailable=1]="LoaderAvailable",e[e.BeginLoadingScript=10]="BeginLoadingScript",e[e.EndLoadingScriptOK=11]="EndLoadingScriptOK",e[e.EndLoadingScriptError=12]="EndLoadingScriptError",e[e.BeginInvokeFactory=21]="BeginInvokeFactory",e[e.EndInvokeFactory=22]="EndInvokeFactory",e[e.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",e[e.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",e[e.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",e[e.NodeEndNativeRequire=34]="NodeEndNativeRequire"}(k||(k={}));var x=function(t){function r(e,n,i,r){t.call(this,e,n),this.windowService=i,this.contextService=r,this.enabled=r.getConfiguration().env.enablePerformance}return __extends(r,t),r.prototype._analyzeLoaderTimes=function(){for(var t=e.getStats(),n=[],i=0,r=0,o=t.length;o>r;r++)if(t[r].type===k.NodeEndNativeRequire&&t[r-1].type===k.NodeBeginNativeRequire&&t[r-1].detail===t[r].detail){var s={};s.Event="nodeRequire "+t[r].detail,s["Took (ms)"]=t[r].timestamp-t[r-1].timestamp,i+=t[r].timestamp-t[r-1].timestamp,s["Start (ms)"]="**"+t[r-1].timestamp,s["End (ms)"]="**"+t[r-1].timestamp,n.push(s)}if(i>0){var s={};s.Event="===nodeRequire TOTAL",s["Took (ms)"]=i,s["Start (ms)"]="**",s["End (ms)"]="**",n.push(s)}return n},r.prototype.run=function(){var e=[];e.push.apply(e,this._analyzeLoaderTimes());var t,r=Math.round(m.getGlobal("programStart")||m.getGlobal("vscodeStart")),o=Math.round(m.getGlobal("windowShow")),s=i.getTimeKeeper().getCollectedEvents();s.forEach(function(n){if("Startup"===n.topic){t=n;var i={};i.Event=n.name,i["Took (ms)"]=n.stopTime.getTime()-n.startTime.getTime(),i["Start (ms)"]=Math.max(n.startTime.getTime()-r,0),i["End (ms)"]=n.stopTime.getTime()-r,e.push(i)}}),e.push({Event:"---------------------------"});var a={};a.Event="Show Window at",a["Start (ms)"]=o-r,e.push(a);var c={};return c.Event="Total",c["Took (ms)"]=t.stopTime.getTime()-r,e.push(c),this.windowService.getWindow().openDevTools(),setTimeout(function(){console.warn("Run the action again if you do not see the numbers!"),console.table(e)},1e3),n.Promise.as(!0)},r.ID="workbench.action.appPerf",r.LABEL=c.localize(10,null),r=__decorate([__param(2,s.IWindowService),__param(3,l.IWorkspaceContextService)],r)}(o.Action);t.ShowStartupPerformance=x;var A=function(e){function t(t,n,i){e.call(this,t,n),this.windowService=i}return __extends(t,e),t.prototype.run=function(){return f.send("vscode:reloadWindow",this.windowService.getWindowId()),n.Promise.as(null)},t.ID="workbench.action.reloadWindow",t.LABEL=c.localize(11,null),t=__decorate([__param(2,s.IWindowService)],t)}(o.Action);t.ReloadWindowAction=A;var R=function(e){function t(t,n,i,r){e.call(this,t,n),this.contextService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){var e=this.contextService.getConfiguration().env.recentPaths.map(function(e){return{label:r.basename(e),description:r.dirname(e),path:e}});return this.quickOpenService.pick(e,{autoFocus:{autoFocusSecondEntry:!0},placeHolder:c.localize(13,null),matchOnDescription:!0}).then(function(e){e&&f.send("vscode:windowOpen",[e.path])})},t.ID="workbench.action.openRecent",t.LABEL=c.localize(12,null),t=__decorate([__param(2,l.IWorkspaceContextService),__param(3,d.IQuickOpenService)],t)}(o.Action);t.OpenRecentAction=R;var D=function(e){function t(t,n,i,r){e.call(this,t,n),this.messageService=i,this.editorService=r}return __extends(t,e),t.prototype.run=function(){this.messageService.hideAll();var e=this.editorService.getActiveEditor();return e&&e.focus(),n.Promise.as(null)},t.ID="workbench.action.closeMessages",t.LABEL=c.localize(14,null),t=__decorate([__param(2,u.IMessageService),__param(3,a.IWorkbenchEditorService)],t)}(o.Action);t.CloseMessagesAction=D});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/electron-browser/integration",["require","exports","vs/base/common/errors","vs/base/common/arrays","vs/base/common/severity","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/message/common/message","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybindingService","vs/workbench/services/workspace/common/contextService","vs/workbench/services/window/electron-browser/windowService","vs/platform/configuration/common/configuration","vs/workbench/electron-browser/window","remote","ipc","web-frame"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g){var y=function(){function e(e,t,n,i,r,o,s,a,c){this.instantiationService=e,this.windowService=t,this.partService=n,this.contextService=i,this.telemetryService=r,this.configurationService=o,this.keybindingService=s,this.storageService=a,this.messageService=c}return e.prototype.integrate=function(e){var t=this,i=this.instantiationService.createInstance(f.ElectronWindow,m.getCurrentWindow(),e);this.windowService.registerWindow(i),v.on("vscode:runAction",function(e){t.keybindingService.executeCommand(e,{from:"menu"}).done(void 0,function(e){return t.messageService.show(r["default"].Error,e)})}),v.on("vscode:optionsChange",function(e){var n=JSON.parse(e);for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];t.contextService.updateOptions(i,r)}}),v.on("vscode:resolveKeybindings",function(e){var i=[];try{i=JSON.parse(e)}catch(r){}t.resolveKeybindings(i).done(function(e){e.length&&v.send("vscode:keybindingsResolved",JSON.stringify(e))},function(){return n.onUnexpectedError})}),v.on("vscode:telemetry",function(e){var n=e.eventName,i=e.data;t.telemetryService.publicLog(n,i)}),v.on("vscode:reportError",function(e){if(e){var t=JSON.parse(e);t.mainProcess=!0,n.onUnexpectedError(t)}}),this.partService.joinCreation().then(function(){v.send("vscode:workbenchLoaded",t.windowService.getWindowId())}),v.on("vscode:changeTheme",function(e){t.storageService.store("workbench.theme",e,s.StorageScope.GLOBAL)}),this.configurationService.addListener(p.ConfigurationServiceEventTypes.UPDATED,function(e){var t=e.config,n=0;t.window&&"number"==typeof t.window.zoomLevel&&(n=t.window.zoomLevel),g.getZoomLevel()!==n&&g.setZoomLevel(n)})},e.prototype.resolveKeybindings=function(e){var t=this;return this.partService.joinCreation().then(function(){return i.coalesce(e.map(function(e){for(var n=t.keybindingService.lookupKeybindings(e),i=0;i<n.length;i++){var r=n[i],o=t.keybindingService.getElectronAcceleratorFor(r);if(o)return{id:e,binding:r.value}}return null}))})},e=__decorate([__param(0,c.IInstantiationService),__param(1,h.IWindowService),__param(2,o.IPartService),__param(3,d.IWorkspaceContextService),__param(4,u.ITelemetryService),__param(5,p.IConfigurationService),__param(6,l.IKeybindingService),__param(7,s.IStorageService),__param(8,a.IMessageService)],e)}();t.ElectronIntegration=y}),define("vs/workbench/electron-browser/main.contribution",["require","exports","vs/platform/platform","vs/nls!vs/workbench/electron-browser/main.contribution","vs/platform/actions/common/actions","vs/platform/configuration/common/configurationRegistry","vs/workbench/browser/actionRegistry","vs/base/common/keyCodes","vs/workbench/services/message/browser/messageService","vs/workbench/electron-browser/actions"],function(e,t,n,i,r,o,s,a,c,u){var l=i.localize(0,null),d=i.localize(1,null),h=i.localize(2,null),p=n.Registry.as(s.Extensions.WorkbenchActions);p.registerWorkbenchAction(new r.SyncActionDescriptor(u.NewWindowAction,u.NewWindowAction.ID,u.NewWindowAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.KEY_N})),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.CloseWindowAction,u.CloseWindowAction.ID,u.CloseWindowAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyMod.Shift|a.KeyCode.KEY_W})),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.CloseFolderAction,u.CloseFolderAction.ID,u.CloseFolderAction.LABEL,{primary:a.KeyMod.chord(a.KeyMod.CtrlCmd|a.KeyCode.KEY_K,a.KeyCode.KEY_F)}),h),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.OpenRecentAction,u.OpenRecentAction.ID,u.OpenRecentAction.LABEL),h),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ToggleDevToolsAction,u.ToggleDevToolsAction.ID,u.ToggleDevToolsAction.LABEL),d),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ZoomInAction,u.ZoomInAction.ID,u.ZoomInAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.US_EQUAL}),l),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ZoomOutAction,u.ZoomOutAction.ID,u.ZoomOutAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.US_MINUS}),l),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ZoomResetAction,u.ZoomResetAction.ID,u.ZoomResetAction.LABEL),l),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ShowStartupPerformance,u.ShowStartupPerformance.ID,u.ShowStartupPerformance.LABEL),d),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ReloadWindowAction,u.ReloadWindowAction.ID,u.ReloadWindowAction.LABEL)),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.CloseMessagesAction,u.CloseMessagesAction.ID,u.CloseMessagesAction.LABEL,{primary:a.KeyCode.Escape},[{key:c.WorkbenchMessageService.GLOBAL_MESSAGES_SHOWING_CONTEXT}])),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.CloseEditorAction,u.CloseEditorAction.ID,u.CloseEditorAction.LABEL,{primary:a.KeyMod.CtrlCmd|a.KeyCode.KEY_W,win:{primary:a.KeyMod.CtrlCmd|a.KeyCode.F4,secondary:[a.KeyMod.CtrlCmd|a.KeyCode.KEY_W]}}),l),p.registerWorkbenchAction(new r.SyncActionDescriptor(u.ToggleFullScreenAction,u.ToggleFullScreenAction.ID,u.ToggleFullScreenAction.LABEL,{primary:a.KeyCode.F11,mac:{primary:a.KeyMod.CtrlCmd|a.KeyMod.WinCtrl|a.KeyCode.KEY_F}}),l);var f=n.Registry.as(o.Extensions.Configuration);f.registerConfiguration({id:"window",order:6,title:i.localize(3,null),type:"object",properties:{"window.openFilesInNewWindow":{type:"boolean","default":!0,description:i.localize(4,null)},"window.reopenFolders":{type:"string","enum":["none","one","all"],"default":"one",description:i.localize(5,null)},"window.zoomLevel":{type:"number","default":0,description:i.localize(6,null)}}}),f.registerConfiguration({id:"update",order:10,title:i.localize(7,null),type:"object",properties:{"update.channel":{type:"string","default":"stable",description:i.localize(8,null)}}})});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsActions",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/base/common/winjs.base","vs/base/common/actions","vs/base/common/severity","vs/platform/instantiation/common/instantiation","vs/platform/telemetry/common/telemetry","vs/platform/message/common/message","vs/workbench/electron-browser/actions","vs/workbench/parts/extensions/common/extensions","vs/workbench/services/quickopen/browser/quickOpenService"],function(e,t,n,i,r,o,s,a,c,u,l,d){var h=function(e){function t(t,n,i,r){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listExtensions",t.LABEL=n.localize(0,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,d.IQuickOpenService)],t)}(r.Action);t.ListExtensionsAction=h;var p=function(e){function t(t,n,i,r){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext install ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.installExtension",t.LABEL=n.localize(1,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,d.IQuickOpenService)],t)}(r.Action);t.InstallExtensionAction=p;var f=function(e){function t(t,n,i,r){e.call(this,t,n,null,!0),this.extensionsService=i,this.quickOpenService=r}return __extends(t,e),t.prototype.run=function(){return this.quickOpenService.show("ext update ")},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listOutdatedExtensions",t.LABEL=n.localize(2,null),t=__decorate([__param(2,l.IExtensionsService),__param(3,d.IQuickOpenService)],t)}(r.Action);t.ListOutdatedExtensionsAction=f;var m=function(e){function t(t,n,i,r,o,s){e.call(this,"extensions.install",t,"octicon octicon-cloud-download",!0),this.quickOpenService=n,this.extensionsService=i,this.messageService=r,this.telemetryService=o,this.instantiationService=s}return __extends(t,e),t.prototype.run=function(e){var t=this;return this.enabled=!1,this.extensionsService.install(e).then(function(){return t.onSuccess(e)},function(n){return t.onError(n,e)}).then(function(){return t.enabled=!0}).then(function(){return null})},t.prototype.onSuccess=function(e){this.reportTelemetry(e,!0),this.messageService.show(o["default"].Info,{message:n.localize(3,null,e.displayName,e.version),actions:[this.instantiationService.createInstance(u.ReloadWindowAction,u.ReloadWindowAction.ID,n.localize(4,null))]})},t.prototype.onError=function(e,t){this.reportTelemetry(t,!1),this.messageService.show(o["default"].Error,e)},t.prototype.reportTelemetry=function(e,t){this.telemetryService.publicLog("extensionGallery:install",{success:t,id:e.galleryInformation?e.galleryInformation.id:null,name:e.name,publisherId:e.galleryInformation?e.galleryInformation.publisherId:null,publisherName:e.publisher,publisherDisplayName:e.galleryInformation?e.galleryInformation.publisherDisplayName:null})},t=__decorate([__param(1,d.IQuickOpenService),__param(2,l.IExtensionsService),__param(3,c.IMessageService),__param(4,a.ITelemetryService),__param(5,s.IInstantiationService)],t)}(r.Action);t.InstallAction=m;var v=function(e){function t(t,i,r,o,s){e.call(this,"extensions.uninstall",n.localize(5,null),"octicon octicon-x",!0),this.quickOpenService=t,this.extensionsService=i,this.messageService=r,this.telemetryService=o,this.instantiationService=s}return __extends(t,e),t.prototype.run=function(e){var t=this;return window.confirm(n.localize(6,null,e.displayName))?(this.enabled=!1,this.extensionsService.uninstall(e).then(function(){return t.onSuccess(e)},function(n){return t.onError(n,e)}).then(function(){return t.enabled=!0}).then(function(){return null})):i.TPromise.as(null)},t.prototype.onSuccess=function(e){this.reportTelemetry(e,!0),this.messageService.show(o["default"].Info,{message:n.localize(7,null,e.displayName),actions:[this.instantiationService.createInstance(u.ReloadWindowAction,u.ReloadWindowAction.ID,n.localize(8,null))]})},t.prototype.onError=function(e,t){this.reportTelemetry(t,!1),this.messageService.show(o["default"].Error,e)},t.prototype.reportTelemetry=function(e,t){this.telemetryService.publicLog("extensionGallery:uninstall",{success:t,id:e.galleryInformation?e.galleryInformation.id:null,name:e.name,publisherId:e.galleryInformation?e.galleryInformation.publisherId:null,publisherName:e.publisher,publisherDisplayName:e.galleryInformation?e.galleryInformation.publisherDisplayName:null
})},t=__decorate([__param(0,d.IQuickOpenService),__param(1,l.IExtensionsService),__param(2,c.IMessageService),__param(3,a.ITelemetryService),__param(4,s.IInstantiationService)],t)}(r.Action);t.UninstallAction=v});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","vs/base/common/lifecycle","vs/base/common/winjs.base","vs/base/browser/dom","vs/base/common/severity","vs/base/common/errors","vs/base/parts/quickopen/browser/quickOpen","vs/base/common/dates","vs/base/common/filters","vs/workbench/browser/quickopen","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/workbench/services/workspace/common/contextService","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/common/actions","semver","vs/base/browser/ui/actionbar/actionbar","remote","vs/css!./media/extensions"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S){function w(e,t){var n=l.matchesContiguousSubString(e,t.name)||[],i=l.matchesContiguousSubString(e,t.displayName)||[],r=l.matchesContiguousSubString(e,t.description)||[];return n.length||i.length||r.length?{name:n,displayName:i,description:r}:null}function C(e,t){return e.publisher===t.publisher&&e.name===t.name}var T=S.require("shell"),I=o.emmet,k=n.localize(0,null),x=n.localize(1,null);!function(e){e[e.Uninstalled=0]="Uninstalled",e[e.Installed=1]="Installed",e[e.Outdated=2]="Outdated"}(t.ExtensionState||(t.ExtensionState={}));var A=t.ExtensionState,R=function(e){function t(t,n,i){e.call(this,"extensions.open-in-gallery","Readme","",!0),this.messageService=t,this.contextService=n,this.instantiationService=i}return __extends(t,e),t.prototype.run=function(e){var t=this,i=this.contextService.getConfiguration().env.extensionsGallery.itemUrl+"/"+e.publisher+"."+e.name;T.openExternal(i);var o=this.messageService.show(s["default"].Info,{message:n.localize(2,null,e.displayName),actions:[new _.Action("cancelaction",n.localize(3,null)),new _.Action("installNow",n.localize(4,null),null,!0,function(){o();var i=t.messageService.show(s["default"].Info,n.localize(5,null,e.displayName)),a=t.instantiationService.createInstance(p.InstallAction,"");return a.run(e).then(function(e){return i(),r.TPromise.as(e)},function(e){return i(),r.TPromise.wrapError(e)})})]});return r.TPromise.as(null)},t=__decorate([__param(0,f.IMessageService),__param(1,g.IWorkspaceContextService),__param(2,v.IInstantiationService)],t)}(_.Action),D=function(){function e(e){this.instantiationService=e}return e.prototype.run=function(e,t,n){return t===c.Mode.PREVIEW?!1:e.state===A.Installed?!1:(this.action||(this.action=this.instantiationService.createInstance(p.InstallAction,k)),this.action.run(e.extension).done(null,a.onUnexpectedError),!0)},e=__decorate([__param(0,v.IInstantiationService)],e)}(),L=function(){function e(e,t){this.instantiationService=e,this.extensionsService=t}return e.prototype.getHeight=function(e){return 48},e.prototype.getTemplateId=function(e){return"extension"},e.prototype.renderTemplate=function(e,t){var n=o.append(t,I(".extension")),i=o.append(n,I(".row")),r=o.append(n,I(".row")),s=o.append(i,I(".published")),a=o.append(s,I("span.since")),c=o.append(s,I("span.author"));return{root:n,author:c,since:a,displayName:new y.HighlightedLabel(o.append(i,I("span.name"))),version:o.append(i,I("span.version")),actionbar:new E.ActionBar(o.append(r,I(".actions"))),description:new y.HighlightedLabel(o.append(r,I("span.description"))),disposables:[]}},e.prototype.renderElement=function(e,t,n){var r=this,o=e.extension,s=o.galleryInformation?o.galleryInformation.date:null,a=o.galleryInformation?o.galleryInformation.publisherDisplayName:o.publisher,c={icon:!0,label:!1},l=function(){switch(n.actionbar.clear(),e.extension.galleryInformation&&n.actionbar.push(r.instantiationService.createInstance(R),{label:!0,icon:!1}),e.state){case A.Uninstalled:e.extension.galleryInformation&&n.actionbar.push(r.instantiationService.createInstance(p.InstallAction,k),c);break;case A.Installed:n.actionbar.push(r.instantiationService.createInstance(p.UninstallAction),c);break;case A.Outdated:n.actionbar.push(r.instantiationService.createInstance(p.UninstallAction),c),n.actionbar.push(r.instantiationService.createInstance(p.InstallAction,x),c)}},d=function(t,n){C(t,o)&&(e.state=n,l())};n.actionbar.context=o,l(),n.disposables=i.disposeAll(n.disposables),n.disposables.push(this.extensionsService.onDidInstallExtension(function(e){return d(e,A.Installed)})),n.disposables.push(this.extensionsService.onDidUninstallExtension(function(e){return d(e,A.Uninstalled)})),n.displayName.set(o.displayName,e.highlights.displayName),n.version.textContent=o.version,n.since.textContent=s?u.since(new Date(s)):"",n.author.textContent=a,n.description.set(o.description,e.highlights.description),n.description.element.title=o.description},e.prototype.disposeTemplate=function(e,t){t.displayName.dispose(),t.description.dispose(),t.disposables=i.disposeAll(t.disposables)},e=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService)],e)}(),M=function(){function e(){}return e.prototype.getId=function(e){var t=e.extension;return t.galleryInformation?t.galleryInformation.id+"-"+t.version:"local@"+t.publisher+"."+t.name+"-"+t.version+"@"+(t.path||"")},e.prototype.getLabel=function(e){return e.extension.name},e}(),O=function(){function e(e,t){this.extensions=e,this.dataSource=new M,this.runner={run:function(){return!1}},this.renderer=t.createInstance(L),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){this.entries=this.extensions.map(function(t){return{extension:t,highlights:w(e,t)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var t=e.extension,n=e.highlights;return{extension:t,highlights:n,state:A.Installed}}).sort(function(e,t){return e.extension.name.localeCompare(t.extension.name)})},enumerable:!0,configurable:!0}),e=__decorate([__param(1,v.IInstantiationService)],e)}(),P=function(e){function t(t,n){e.call(this),this.instantiationService=t,this.extensionsService=n,this.modelPromise=null}return __extends(t,e),t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.modelPromise=this.extensionsService.getInstalled().then(function(e){return t.instantiationService.createInstance(O,e)})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.getEmptyLabel=function(e){return n.localize(6,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t.prototype.onClose=function(e){this.modelPromise=null},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService)],t)}(d.QuickOpenHandler);t.LocalExtensionsHandler=P;var N=function(){function e(e,t,n){this.galleryExtensions=e,this.localExtensions=t,this.dataSource=new M,this.renderer=n.createInstance(L),this.runner=n.createInstance(D),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){var t=this;this.entries=this.galleryExtensions.map(function(t){return{extension:t,highlights:w(e,t)}}).filter(function(e){var t=e.highlights;return!!t}).map(function(e){var n=e.extension,i=e.highlights,r=t.localExtensions.filter(function(e){return C(e,n)})[0];return{extension:n,highlights:i,state:r?r.version===n.version?A.Installed:A.Outdated:A.Uninstalled}}).sort(function(e,t){return e.extension.name.localeCompare(t.extension.name)})},enumerable:!0,configurable:!0}),e=__decorate([__param(2,v.IInstantiationService)],e)}(),F=function(e){function t(t,n,i,r){e.call(this),this.instantiationService=t,this.extensionsService=n,this.galleryService=i,this.telemetryService=r}return __extends(t,e),t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.telemetryService.publicLog("extensionGallery:open"),this.modelPromise=r.TPromise.join([this.galleryService.query(),this.extensionsService.getInstalled()]).then(function(e){return t.instantiationService.createInstance(N,e[0],e[1])})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.onClose=function(e){this.modelPromise=null},t.prototype.getEmptyLabel=function(e){return n.localize(7,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService),__param(2,h.IGalleryService),__param(3,m.ITelemetryService)],t)}(d.QuickOpenHandler);t.GalleryExtensionsHandler=F;var W=function(){function e(e,t,n){this.galleryExtensions=e,this.localExtensions=t,this.dataSource=new M,this.renderer=n.createInstance(L),this.runner=n.createInstance(D),this.entries=[]}return Object.defineProperty(e.prototype,"input",{set:function(e){var t=this;this.entries=this.galleryExtensions.map(function(t){return{extension:t,highlights:w(e,t)}}).filter(function(e){var n=e.extension,i=e.highlights,r=t.localExtensions.filter(function(e){return C(e,n)})[0];return r&&b.lt(r.version,n.version)&&!!i}).map(function(e){var t=e.extension,n=e.highlights;return{extension:t,highlights:n,state:A.Outdated}}).sort(function(e,t){return e.extension.name.localeCompare(t.extension.name)})},enumerable:!0,configurable:!0}),e=__decorate([__param(2,v.IInstantiationService)],e)}(),H=function(e){function t(t,n,i,r){e.call(this),this.instantiationService=t,this.extensionsService=n,this.galleryService=i,this.telemetryService=r}return __extends(t,e),t.prototype.getResults=function(e){var t=this;return this.modelPromise||(this.telemetryService.publicLog("extensionGallery:open"),this.modelPromise=r.TPromise.join([this.galleryService.query(),this.extensionsService.getInstalled()]).then(function(e){return t.instantiationService.createInstance(W,e[0],e[1])})),this.modelPromise.then(function(t){return t.input=e,t})},t.prototype.onClose=function(e){this.modelPromise=null},t.prototype.getEmptyLabel=function(e){return n.localize(8,null)},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,v.IInstantiationService),__param(1,h.IExtensionsService),__param(2,h.IGalleryService),__param(3,m.ITelemetryService)],t)}(d.QuickOpenHandler);t.OutdatedExtensionsHandler=H});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsWidgets",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWidgets","vs/base/common/severity","vs/base/common/errors","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/actions","vs/platform/plugins/common/plugins","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/workbench/parts/extensions/common/extensions"],function(e,t,n,i,r,o,s,a,c,u,l,d,h){var p=o.emmet,f=function(){function e(e,t,n,r){var o=this;this.messageService=t,this.extensionsService=n,this.instantiationService=r,this.toDispose=[],this.messageCount=0,e.onReady().then(function(){o.status=e.getPluginsStatus(),Object.keys(o.status).forEach(function(e){o.messageCount+=o.status[e].messages.filter(function(e){return e.type>i["default"].Info}).length}),o.render(o.container)})}return e.prototype.render=function(e){var t=this;if(this.container=e,this.messageCount>0){this.domNode=o.append(e,p("a.extensions-statusbar"));var c=this.messageCount>1?n.localize(0,null):n.localize(1,null),u=n.localize(2,null);this.domNode.title=this.messageCount+" "+u+" "+c,this.domNode.textContent=this.messageCount+" "+c,this.toDispose.push(o.addDisposableListener(this.domNode,"click",function(){t.extensionsService.getInstalled().done(function(e){Object.keys(t.status).forEach(function(r){t.status[r].messages.forEach(function(r){if(r.type>i["default"].Info){var o=e.filter(function(e){return e.path===r.source}).pop(),s=[l.CloseAction];if(o){var c=n.localize(3,null)+" "+(o.name?o.name:"Extension");s.push(new a.Action("extensions.uninstall2",c,null,!0,function(){return t.instantiationService.createInstance(d.UninstallAction).run(o)}))}t.messageService.show(r.type,{message:(r.source?"["+r.source+"]: ":"")+r.message,actions:s})}})})},r.onUnexpectedError)}))}return{dispose:function(){return s.disposeAll(t.toDispose)}}},e=__decorate([__param(0,c.IPluginService),__param(1,l.IMessageService),__param(2,h.IExtensionsService),__param(3,u.IInstantiationService)],e)}();t.ExtensionsStatusbarItem=f});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension",["require","exports","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension","vs/base/common/errors","vs/platform/platform","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/services/workspace/common/contextService","vs/workbench/electron-browser/actions","vs/workbench/browser/actionRegistry","vs/platform/actions/common/actions","./extensionsActions","vs/workbench/browser/quickopen","ipc"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v){var g=function(){function e(e,t,o,s,a){this.instantiationService=e,this.extensionsService=t,this.messageService=o,this.registerListeners();var c=s.getOptions();c.extensionsToInstall&&c.extensionsToInstall.length&&this.install(c.extensionsToInstall).done(null,i.onUnexpectedError);var u=n.localize(0,null),l=r.Registry.as(h.Extensions.WorkbenchActions);l.registerWorkbenchAction(new p.SyncActionDescriptor(f.ListExtensionsAction,f.ListExtensionsAction.ID,f.ListExtensionsAction.LABEL),u),r.Registry.as(m.Extensions.Quickopen).registerQuickOpenHandler(new m.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","LocalExtensionsHandler","ext ",n.localize(1,null))),a.isEnabled()&&(l.registerWorkbenchAction(new p.SyncActionDescriptor(f.InstallExtensionAction,f.InstallExtensionAction.ID,f.InstallExtensionAction.LABEL),u),r.Registry.as(m.Extensions.Quickopen).registerQuickOpenHandler(new m.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","GalleryExtensionsHandler","ext install ",n.localize(2,null),!0)),l.registerWorkbenchAction(new p.SyncActionDescriptor(f.ListOutdatedExtensionsAction,f.ListOutdatedExtensionsAction.ID,f.ListOutdatedExtensionsAction.LABEL),u),r.Registry.as(m.Extensions.Quickopen).registerQuickOpenHandler(new m.QuickOpenHandlerDescriptor("vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","OutdatedExtensionsHandler","ext update ",n.localize(3,null),!0)))}return e.prototype.registerListeners=function(){var e=this;v.on("vscode:installExtensions",function(t){t.extensionsToInstall&&e.install(t.extensionsToInstall).done(null,i.onUnexpectedError)})},e.prototype.install=function(e){var t=this;return o.Promise.join(e.map(function(e){return t.extensionsService.install(e)})).then(function(e){t.messageService.show(u["default"].Info,{message:e.length>1?n.localize(4,null):n.localize(5,null,e[0].displayName),actions:[t.instantiationService.createInstance(d.ReloadWindowAction,d.ReloadWindowAction.ID,n.localize(6,null))]})})},e.prototype.getId=function(){return"vs.extensions.workbenchextension"},e=__decorate([__param(0,a.IInstantiationService),__param(1,s.IExtensionsService),__param(2,c.IMessageService),__param(3,l.IWorkspaceContextService),__param(4,s.IGalleryService)],e)}();t.ExtensionsWorkbenchExtension=g}),define("vs/workbench/parts/extensions/electron-browser/extensions.contribution",["require","exports","vs/platform/platform","vs/platform/instantiation/common/extensions","vs/workbench/browser/parts/statusbar/statusbar","vs/workbench/parts/extensions/electron-browser/extensionsWidgets","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/node/vsoGalleryService","vs/workbench/common/contributions","vs/workbench/parts/extensions/electron-browser/extensionsWorkbenchExtension"],function(e,t,n,i,r,o,s,a,c,u){i.registerSingleton(s.IGalleryService,a.GalleryService),n.Registry.as(c.Extensions.Workbench).registerWorkbenchContribution(u.ExtensionsWorkbenchExtension),n.Registry.as(r.Extensions.Statusbar).registerStatusbarItem(new r.StatusbarItemDescriptor(o.ExtensionsStatusbarItem,r.StatusbarAlignment.LEFT,10))});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/telemetry/node/nodeAppInsightsTelemetryAppender",["require","exports","vs/base/common/errors","vs/base/common/types","vs/base/common/objects","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace","winreg","os","applicationinsights"],function(e,t,n,i,r,o,s,a,c,u){var l=function(){function e(){}return e.sqmUserId="telemetry.sqm.userId",e.sqmMachineId="telemetry.sqm.machineId",e.lastSessionDate="telemetry.lastSessionDate",e.firstSessionDate="telemetry.firstSessionDate",e}(),d=function(){function e(e,t,n){this.addCommonMetrics=function(e){for(var t in this.commonMetrics)e["common."+t]=this.commonMetrics[t];return e},this.commonProperties={},this.commonMetrics={},this.contextService=t,this.storageService=e;var i=this.contextService.getConfiguration().env.aiConfig,r=i?i.key:null,o=i?i.asimovKey:null;return n?(this.appInsights=n,void(o&&(this.appInsightsVortex=n))):(r&&(this.appInsights=u.setup(r).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setOfflineMode(!0).start().client,this.setupAIClient(this.appInsights)),o&&(this.appInsightsVortex=u.getClient(o),this.appInsightsVortex.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.setupAIClient(this.appInsightsVortex)),void this.loadAddtionaProperties())}return e.prototype.setupAIClient=function(e){if(e&&e.context&&e.context.keys&&e.context.tags){var t=e.context.keys.deviceMachineName;e.context.tags[t]=""}},e.prototype.loadAddtionaProperties=function(){var t=this;if(process.versions&&(this.commonProperties["version.shell"]=process.versions.electron,this.commonProperties["version.renderer"]=process.versions.chrome),"win32"===process.platform){var n=this.storageService.get(l.sqmUserId);n?this.commonProperties["sqm.userid"]=n:this.getWinRegKeyData(e.SQM_KEY,"UserId",a.HKCU,function(e,n){!e&&n&&(t.commonProperties["sqm.userid"]=n,t.storageService.store(l.sqmUserId,n))});var i=this.storageService.get(l.sqmMachineId);i?this.commonProperties["sqm.machineid"]=i:this.getWinRegKeyData(e.SQM_KEY,"MachineId",a.HKLM,function(e,n){!e&&n&&(t.commonProperties["sqm.machineid"]=n,t.storageService.store(l.sqmMachineId,n))})}var r=this.storageService.get(l.firstSessionDate);r||(r=(new Date).toUTCString(),this.storageService.store(l.firstSessionDate,r)),this.commonProperties.firstSessionDate=r;var o=this.storageService.get(l.lastSessionDate);o?(this.commonMetrics.isNewSession=0,this.commonProperties.lastSessionDate=o):this.commonMetrics.isNewSession=1,this.storageService.store(l.lastSessionDate,(new Date).toUTCString()),c&&(this.commonProperties.osVersion=c.release())},e.prototype.getWinRegKeyData=function(e,t,i,r){if("win32"===process.platform)try{var o=new a({hive:i,key:e});o.get(t,function(e,t){e||!t?r(e,null):r(null,t.value)})}catch(s){n.onUnexpectedError(s),r(s,null)}else r(null,null)},e.prototype.getData=function(e){var t={},n={},r=this.flaten(e);for(var o in r){var s=o&&o.length>150?o.substr(o.length-149):o,a=r[o];if(i.isNumber(a))n[s]=a;else if(i.isBoolean(a))n[s]=a?1:0;else if(i.isString(a)){var c=a&&a.length>1024?a.substring(0,1023):a;t[s]=c}else i.isUndefined(a)||null===a||(t[s]=a)}return t=this.addCommonProperties(t),n=this.addCommonMetrics(n),{properties:t,measurements:n}},e.prototype.flaten=function(e,t,n){void 0===t&&(t=0);for(var o={},s=e?Object.getOwnPropertyNames(e):[],a=0;a<s.length;a++){var c=s[a],u=n?n+c:c;if(i.isArray(e[c]))try{o[u]=r.safeStringify(e[c])}catch(l){o[u]="[Circular-Array]"}else if(e[c]instanceof Date)o[u]=e[c].toISOString();else if(i.isObject(e[c]))if(2>t){var d=this.flaten(e[c],t+1,u+".");for(var h in d)o[h]=d[h]}else try{o[u]=r.safeStringify(e[c])}catch(l){o[u]="[Circular]"}else o[u]=e[c]}return o},e.prototype.log=function(t,n){var i=this.getData(n);this.appInsights&&("UnhandledError"===t&&n&&this.appInsights.trackException(n),this.appInsights.trackEvent(e.EVENT_NAME_PREFIX+t,i.properties,i.measurements)),this.appInsightsVortex&&("UnhandledError"===t&&n&&this.appInsightsVortex.trackException(n),this.appInsightsVortex.trackEvent(e.EVENT_NAME_PREFIX+t,i.properties,i.measurements))},e.prototype.dispose=function(){this.appInsights=null,this.appInsightsVortex=null},e.prototype.addCommonProperties=function(e){for(var t in this.commonProperties)e["common."+t]=this.commonProperties[t];return e},e.EVENT_NAME_PREFIX="monacoworkbench/",e.SQM_KEY="\\Software\\Microsoft\\SQMClient",e=__decorate([__param(0,o.IStorageService),__param(1,s.IWorkspaceContextService)],e)}();t.NodeAppInsightsTelemetryAppender=d}),define("vs/workbench/parts/telemetry/node/appInsights.telemetry.contribution",["require","exports","vs/platform/platform","vs/platform/telemetry/common/abstractTelemetryService","vs/workbench/parts/telemetry/node/nodeAppInsightsTelemetryAppender","vs/platform/instantiation/common/descriptors"],function(e,t,n,i,r,o){var s=o.createSyncDescriptor(r.NodeAppInsightsTelemetryAppender);n.Registry.as(i.Extenstions.TelemetryAppenders).registerTelemetryAppenderDescriptor(s)}),define("vs/base/node/zip",["require","exports","vs/nls!vs/base/node/zip","path","fs","vs/base/common/async","vs/base/node/pfs","vs/base/common/winjs.base","yauzl"],function(e,t,n,i,r,o,s,a,c){function u(e){var t=e.externalFileAttributes>>16||33188;return[448,56,7].map(function(e){return t&e}).reduce(function(e,t){return e+t},61440&t)}function l(e,t,n,c){var l=t.fileName.replace(c.sourcePathRegex,""),d=i.dirname(l),h=i.join(n,d),p=i.join(n,l),f=u(t);return o.ninvoke(e,e.openReadStream,t).then(function(e){return s.mkdirp(h).then(function(){return new a.Promise(function(t,n){var i=r.createWriteStream(p,{mode:f});i.once("finish",function(){return t(null)}),i.once("error",n),e.once("error",n),e.pipe(i)})})})}function d(e,t,n){return new a.Promise(function(i,r){var o=[];e.once("error",r),e.on("entry",function(i){n.sourcePathRegex.test(i.fileName)&&o.push(l(e,i,t,n))}),e.once("close",function(){return a.Promise.join(o).done(i,r)})})}function h(e,t,n){var i=new RegExp(n.sourcePath?"^"+n.sourcePath:""),r=o.nfcall(c.open,e);return n.overwrite&&(r=r.then(function(e){return s.rimraf(t),e})),r.then(function(e){return d(e,t,{sourcePathRegex:i})})}function p(e,t){return o.nfcall(c.open,e).then(function(e){return new a.TPromise(function(i,r){e.on("entry",function(n){n.fileName===t&&o.ninvoke(e,e.openReadStream,n).done(function(e){return i(e)},function(e){return r(e)})}),e.once("close",function(){return r(new Error(n.localize(0,null,t)))})})})}function f(e,t){return p(e,t).then(function(e){return new a.TPromise(function(t,n){var i=[];e.once("error",n),e.on("data",function(e){return i.push(e)}),e.on("end",function(){return t(Buffer.concat(i))})})})}t.extract=h,t.buffer=f});var __decorate=this&&this.__decorate||function(e,t,n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,i);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,i){return void(i&&i(t,n))},void 0);case 4:return e.reduceRight(function(e,i){return i&&i(t,n,e)||e},i)}},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define("vs/workbench/parts/extensions/node/extensionsService",["require","exports","vs/nls!vs/workbench/parts/extensions/node/extensionsService","os","path","vs/base/common/types","vs/base/common/service","vs/base/node/pfs","vs/base/common/objects","vs/base/common/arrays","vs/base/node/zip","vs/base/common/winjs.base","vs/workbench/parts/extensions/common/extensions","vs/base/node/request","vs/workbench/node/proxy","vs/workbench/services/workspace/common/contextService","vs/base/common/async","vs/base/common/event","vs/workbench/node/userSettings","semver","vs/base/common/collections"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b){function E(e){return new d.Promise(function(t,i){try{t(JSON.parse(e))}catch(r){i(new Error(n.localize(0,null)))}})}function S(e,t){return l.buffer(e,"extension/package.json").then(function(e){return E(e.toString("utf8"))}).then(function(e){if(t){if(t.name!==e.name)return d.Promise.wrapError(Error(n.localize(1,null)));if(t.publisher!==e.publisher)return d.Promise.wrapError(Error(n.localize(2,null)));if(t.version!==e.version)return d.Promise.wrapError(Error(n.localize(3,null)))}return d.Promise.as(e)})}function w(e,t,n){var i={name:e.name,displayName:e.displayName||e.name,publisher:e.publisher,version:e.version,description:e.description||""};return t&&(i.galleryInformation=t),n&&(i.path=n),i}var C=function(){function e(e){this.contextService=e,this.serviceId=h.IExtensionsService,this._onInstallExtension=new g.Emitter,this.onInstallExtension=this._onInstallExtension.event,this._onDidInstallExtension=new g.Emitter,this.onDidInstallExtension=this._onDidInstallExtension.event,this._onUninstallExtension=new g.Emitter,this.onUninstallExtension=this._onUninstallExtension.event,this._onDidUninstallExtension=new g.Emitter,this.onDidUninstallExtension=this._onDidUninstallExtension.event;var t=e.getConfiguration().env;this.extensionsPath=t.userPluginsHome}return e.prototype.install=function(e){return o.isString(e)?this.installFromZip(e):this.installFromGallery(e)},e.prototype.installFromGallery=function(e){var t=this,o=e.galleryInformation;if(!o)return d.TPromise.wrapError(new Error(n.localize(4,null)));var s=o.downloadUrl,u=r.join(i.tmpdir(),o.id),h=r.join(this.extensionsPath,e.publisher+"."+e.name+"-"+e.version),m=r.join(h,"package.json"),v=d.TPromise.join([y.UserSettings.getValue(this.contextService,"http.proxy"),y.UserSettings.getValue(this.contextService,"http.proxy.strictSSL")]);return v.then(function(e){return{proxyUrl:e[0],strictSSL:e[1]}}).then(function(e){return f.getProxyAgent(s,e)}).then(function(e){return p.download(u,{url:s,agent:e})}).then(function(){return S(u,e)}).then(function(e){return t._onInstallExtension.fire(e),e}).then(function(e){return l.extract(u,h,{sourcePath:"extension",overwrite:!0}).then(function(){return e})}).then(function(e){return e=c.assign({__metadata:o},e),a.writeFile(m,JSON.stringify(e,null,"	"))}).then(function(){return t._onDidInstallExtension.fire(e),e})},e.prototype.installFromZip=function(e){var t=this;return S(e).then(function(n){var i=r.join(t.extensionsPath,n.publisher+"."+n.name+"-"+n.version);return t._onInstallExtension.fire(n),l.extract(e,i,{sourcePath:"extension",overwrite:!0}).then(function(){return w(n,n.__metadata,i)}).then(function(e){return t._onDidInstallExtension.fire(e),e})})},e.prototype.uninstall=function(e){var t=this,i=this.getInstallationPath(e);return a.exists(i).then(function(e){return e?null:d.Promise.wrapError(new Error(n.localize(5,null)))}).then(function(){return t._onUninstallExtension.fire(e)}).then(function(){return a.rimraf(i)}).then(function(){return t._onDidUninstallExtension.fire(e)})},e.prototype.getInstalled=function(e){void 0===e&&(e=!1);var t=this.getAllInstalled();return e?t:t.then(function(e){var t=b.values(b.groupBy(e,function(e){return e.publisher+"."+e.name}));return t.map(function(e){return e.sort(function(e,t){return _.rcompare(e.version,t.version)})[0]})})},e.prototype.getDeprecated=function(){return this.getAllInstalled().then(function(e){var t=b.values(b.groupBy(e,function(e){return e.publisher+"."+e.name}));return u.flatten(t.map(function(e){return e.sort(function(e,t){return _.rcompare(e.version,t.version)}).slice(1)}))})},e.prototype.getAllInstalled=function(){var e=this,t=new v.Limiter(10);return a.readdir(this.extensionsPath).then(function(n){return d.Promise.join(n.map(function(n){var i=r.join(e.extensionsPath,n);return t.queue(function(){return a.readFile(r.join(i,"package.json"),"utf8").then(function(e){return E(e)}).then(function(e){return w(e,e.__metadata,i)}).then(null,function(){return null})})}))}).then(function(e){return e.filter(function(e){return!!e})})},e.prototype.getInstallationPath=function(e){return e.path||r.join(this.extensionsPath,e.publisher+"."+e.name+"-"+e.version)},e.prototype.removeDeprecatedExtensions=function(){return this.getDeprecated().then(function(e){return d.TPromise.join(e.filter(function(e){return!!e.path}).map(function(e){return a.rimraf(e.path)}))})},__decorate([s.ServiceEvent],e.prototype,"onInstallExtension"),__decorate([s.ServiceEvent],e.prototype,"onDidInstallExtension"),__decorate([s.ServiceEvent],e.prototype,"onUninstallExtension"),__decorate([s.ServiceEvent],e.prototype,"onDidUninstallExtension"),e=__decorate([__param(0,m.IWorkspaceContextService)],e)}();t.ExtensionsService=C}),define("vs/workbench/electron-browser/shell",["require","exports","vs/base/browser/builder","vs/base/common/objects","vs/base/browser/dom","vs/base/common/event","vs/base/common/errors","vs/platform/contextview/browser/contextViewService","vs/workbench/services/contextview/electron-browser/contextmenuService","vs/workbench/common/constants","vs/base/common/timer","vs/workbench/browser/workbench","vs/workbench/browser/storage","vs/platform/telemetry/common/telemetry","vs/platform/telemetry/electron-browser/electronTelemetryService","vs/workbench/electron-browser/integration","vs/workbench/electron-browser/update","vs/platform/telemetry/common/workspaceStats","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/message/electron-browser/messageService","vs/workbench/services/request/node/requestService","vs/platform/configuration/common/configuration","vs/workbench/services/configuration/node/configurationService","vs/workbench/services/files/electron-browser/fileService","vs/workbench/services/search/node/searchService","vs/workbench/services/lifecycle/electron-browser/lifecycleService","vs/workbench/services/keybinding/electron-browser/pluginKeybindingService","vs/workbench/services/thread/electron-browser/threadService","vs/platform/markers/common/markerService","vs/platform/actions/common/actions","vs/platform/actions/common/actionsService","vs/editor/common/services/modelService","vs/editor/common/services/modelServiceImpl","vs/editor/browser/services/codeEditorServiceImpl","vs/editor/common/services/codeEditorService","vs/workbench/api/browser/pluginHost.api.impl","vs/platform/plugins/common/nativePluginService","vs/workbench/api/common/pluginHostDocuments","vs/editor/node/textMate/TMSyntax","vs/editor/node/textMate/TMSnippets","vs/platform/jsonschemas/common/jsonValidationExtensionPoint","vs/editor/node/languageConfiguration","vs/workbench/api/common/pluginHostFileSystemEventService","vs/workbench/api/browser/pluginHostQuickOpen","vs/workbench/api/browser/pluginHostStatusBar","vs/workbench/api/common/pluginHostCommands","vs/platform/telemetry/common/abstractRemoteTelemetryService","vs/workbench/api/common/pluginHostDiagnostics","vs/workbench/api/common/extHostOutputService","vs/workbench/api/common/pluginHostMessageService","vs/workbench/api/common/extHostLanguages","vs/workbench/api/common/pluginHostEditors","vs/workbench/api/common/pluginHostWorkspace","vs/workbench/api/common/pluginHostConfiguration","vs/workbench/api/common/extHostLanguageFeatures","vs/platform/event/common/eventService","vs/platform/theme/common/themes","vs/workbench/services/workspace/common/contextService","vs/platform/storage/common/storage","vs/platform/storage/common/remotable.storage","vs/platform/instantiation/common/instantiationService","vs/platform/contextview/browser/contextView","vs/platform/event/common/event","vs/platform/files/common/files","vs/platform/keybinding/common/keybindingService","vs/platform/lifecycle/common/lifecycle","vs/platform/markers/common/markers","vs/platform/message/common/message","vs/platform/request/common/request","vs/platform/search/common/search","vs/platform/thread/common/thread","vs/platform/workspace/common/workspace","vs/platform/plugins/common/plugins","vs/editor/common/services/modeServiceImpl","vs/editor/common/services/modeService","vs/workbench/services/untitled/browser/untitledEditorService","vs/workbench/electron-browser/crashReporter","vs/workbench/services/themes/node/themeService","vs/base/common/service","vs/base/node/service.net","vs/workbench/parts/extensions/common/extensions","vs/workbench/parts/extensions/node/extensionsService","vs/css!./media/shell","vs/css!vs/editor/css/vs-theme","vs/css!vs/editor/css/vs-dark-theme","vs/css!vs/editor/css/hc-black-theme","vs/css!vs/workbench/browser/media/vs-theme","vs/css!vs/workbench/browser/media/vs-dark-theme","vs/css!vs/workbench/browser/media/hc-black-theme"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p,f,m,v,g,y,_,b,E,S,w,C,T,I,k,x,A,R,D,L,M,O,P,N,F,W,H,V,B,K,U,z,j,q,G,Y,$,X,Q,Z,J,ee,te,ne,ie,re,oe,se,ae,ce,ue,le,de,he,pe,fe,me,ve,ge,ye,_e,be,Ee,Se,we,Ce,Te,Ie,ke){
function xe(e,t,n){var r,s=function(){return r||(r=e.then(function(e){return e.getService(t,n)})),r};return Object.keys(n.prototype).filter(function(e){return"constructor"!==e}).reduce(function(e,t){if(Ce.isServiceEvent(n.prototype[t])){var r,a,c=new o.Emitter({onFirstListenerAdd:function(){r=s().then(function(e){a=e[t](function(e){return c.fire(e)})})},onLastListenerRemove:function(){a&&(a.dispose(),a=null),r.cancel(),r=null}});return i.assign(e,(u={},u[t]=c.event,u))}return i.assign(e,(l={},l[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return s().then(function(n){return n[t].apply(n,e)})},l));var u,l},{})}t.getDelayedService=xe;var Ae=function(){function e(e,t,n,r){this.container=e,this.workspace=t,this.configuration=n,this.options=i.mixin({},r),this.toUnbind=[],this.previousErrorTime=0}return e.prototype.createContents=function(e){var t=this,i=n.$(e).div(),r=this.initInstantiationService();if(this.configuration.env.crashReporter){var o=r.createInstance(Se.CrashReporter,this.configuration.env.version,this.configuration.env.commitHash);o.start(this.configuration.env.crashReporter)}var a=Te.connect(process.env.VSCODE_SHARED_IPC_HOOK);a.done(null,s.onUnexpectedError),r.addSingleton(Ie.IExtensionsService,xe(a,"ExtensionService",ke.ExtensionsService)),this.workbench=new d.Workbench(i.getHTMLElement(),this.workspace,this.configuration,this.options,r),this.workbench.startup({onServicesCreated:function(){t.initPluginSystem()},onWorkbenchStarted:function(){t.onWorkbenchStarted()}}),this.workbench.getInstantiationService().createInstance(m.ElectronIntegration).integrate(this.container),this.workbench.getInstantiationService().createInstance(v.Update);var c=setTimeout(function(){console.warn("Workbench did not finish loading in 10 seconds, that might be a problem that should be reported.")},1e4);return this.workbench.joinCreation().then(function(){clearTimeout(c)}),i},e.prototype.onWorkbenchStarted=function(){var e={innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth};this.telemetryService.publicLog("workspaceLoad",{userAgent:navigator.userAgent,windowSize:e,autoSaveEnabled:this.contextService.isAutoSaveEnabled&&this.contextService.isAutoSaveEnabled(),emptyWorkbench:!this.contextService.getWorkspace(),customKeybindingsCount:this.keybindingService.customKeybindingsCount(),theme:this.currentTheme});var t=this.workbench.getInstantiationService().createInstance(g.WorkspaceStats);t.reportWorkspaceTags()},e.prototype.initInstantiationService=function(){var e=this,t=new te.EventService;this.contextService=new ie.WorkspaceContextService(t,this.workspace,this.configuration,this.options),this.contextService.getConfiguration().additionalWorkerServices=[{serviceId:"requestService",moduleName:"vs/workbench/services/request/common/requestService",ctorName:"WorkerRequestService"}],this.windowService=new y.WindowService,this.storageService=new h.Storage(this.contextService);var n=this.configuration.env.isBuilt&&!this.configuration.env.pluginDevelopmentPath?!!this.configuration.env.enableTelemetry:!1;this.telemetryService=new f.ElectronTelemetryService(this.storageService,{enableTelemetry:n,version:this.configuration.env.version,commitHash:this.configuration.env.commitHash}),this.keybindingService=new I["default"](this.contextService,t,this.telemetryService,window),this.messageService=new _.MessageService(this.contextService,this.windowService,this.telemetryService,this.keybindingService),this.keybindingService.setMessageService(this.messageService);var i=new S.ConfigurationService(this.contextService,t),r=new w.FileService(i,t,this.contextService);this.contextViewService=new a.ContextViewService(this.container,this.telemetryService,this.messageService);var o=new T.LifecycleService(this.messageService,this.windowService);o.onShutdown.add(function(){return r.dispose()}),this.threadService=new k.MainThreadService(this.contextService,this.messageService,this.windowService),o.onShutdown.add(function(){return e.threadService.dispose()});var s=new b.RequestService(this.contextService,i,this.telemetryService);this.threadService.registerInstance(s),o.onShutdown.add(function(){return s.dispose()});var u=new x.MarkerService(this.threadService),l=new N.MainProcessPluginService(this.contextService,this.threadService,this.messageService,this.telemetryService);this.keybindingService.setPluginService(l);var d=new L.ModelServiceImpl(this.threadService,u),m=new _e.MainThreadModeServiceImpl(this.threadService,l,d),v=new Ee.UntitledEditorService;this.themeService=new we.ThemeService(l);var g=se.create();return g.addSingleton(p.ITelemetryService,this.telemetryService),g.addSingleton(ce.IEventService,t),g.addSingleton(fe.IRequestService,s),g.addSingleton(ge.IWorkspaceContextService,this.contextService),g.addSingleton(ae.IContextViewService,this.contextViewService),g.addSingleton(ae.IContextMenuService,new c.ContextMenuService(this.messageService,this.telemetryService,this.keybindingService)),g.addSingleton(pe.IMessageService,this.messageService),g.addSingleton(re.IStorageService,this.storageService),g.addSingleton(de.ILifecycleService,o),g.addSingleton(ve.IThreadService,this.threadService),g.addSingleton(ye.IPluginService,l),g.addSingleton(be.IModeService,m),g.addSingleton(ue.IFileService,r),g.addSingleton(Ee.IUntitledEditorService,v),g.addSingleton(me.ISearchService,new C.SearchService(d,v,this.contextService,i)),g.addSingleton(y.IWindowService,this.windowService),g.addSingleton(E.IConfigurationService,i),g.addSingleton(le.IKeybindingService,this.keybindingService),g.addSingleton(he.IMarkerService,u),g.addSingleton(D.IModelService,d),g.addSingleton(O.ICodeEditorService,new M.CodeEditorServiceImpl),g.addSingleton(we.IThemeService,this.themeService),g.addSingleton(A.IActionsService,new R["default"](l,this.keybindingService)),g},e.prototype.initPluginSystem=function(){this.threadService.getRemotable(P.MainProcessVSCodeAPIHelper),this.threadService.getRemotable(F.MainThreadDocuments),this.threadService.getRemotable(q.RemoteTelemetryServiceHelper),this.workbench.getInstantiationService().createInstance(W.MainProcessTextMateSyntax),this.workbench.getInstantiationService().createInstance(H.MainProcessTextMateSnippet),this.workbench.getInstantiationService().createInstance(V.JSONValidationExtensionPoint),this.workbench.getInstantiationService().createInstance(B.LanguageConfigurationFileHandler),this.threadService.getRemotable(J.MainThreadConfiguration),this.threadService.getRemotable(U.MainThreadQuickOpen),this.threadService.getRemotable(z.MainThreadStatusBar),this.workbench.getInstantiationService().createInstance(K.MainThreadFileSystemEventService),this.threadService.getRemotable(j.MainThreadCommands),this.threadService.getRemotable(Y.MainThreadOutputService),this.threadService.getRemotable(G.MainThreadDiagnostics),this.threadService.getRemotable($.MainThreadMessageService),this.threadService.getRemotable(X.MainThreadLanguages),this.threadService.getRemotable(Z.MainThreadWorkspace),this.threadService.getRemotable(Q.MainThreadEditors),this.threadService.getRemotable(oe.MainThreadStorage),this.threadService.getRemotable(ee.MainThreadLanguageFeatures)},e.prototype.open=function(){var e=this;s.setUnexpectedErrorHandler(function(t){e.onUnexpectedError(t)}),n.$(this.container).addClass("monaco-shell"),this.content=n.$(".monaco-shell-content").appendTo(this.container).getHTMLElement(),this.writeTimers(),this.contentsContainer=this.createContents(n.$(this.content)),this.layout(),this.registerListeners();var t=this.storageService.get(u.Preferences.THEME,re.StorageScope.GLOBAL,null);t||(t=ne.toId(ne.BaseTheme.VS_DARK),this.storageService.store(u.Preferences.THEME,t,re.StorageScope.GLOBAL)),this.setTheme(t,!1),this.toUnbind.push(this.storageService.addListener(re.StorageEventType.STORAGE,function(t){t.key===u.Preferences.THEME&&e.setTheme(t.newValue)}))},e.prototype.setTheme=function(e,t){var i=this;if(void 0===t&&(t=!0),e){var r=function(){i.currentTheme&&n.$(i.container).removeClass(i.currentTheme),i.currentTheme=e,n.$(i.container).addClass(i.currentTheme),t&&i.layout()};ne.getSyntaxThemeId(e)?this.themeService.getTheme(e).then(function(t){t&&(i.themeService.loadThemeCSS(e),r())},function(e){s.onUnexpectedError(e)}):r()}},e.prototype.registerListeners=function(){var e=this;n.$(window).on(r.EventType.RESIZE,function(){return e.layout()},this.toUnbind)},e.prototype.writeTimers=function(){var e=window.MonacoEnvironment.timers;if(e){var t=[];e.beforeProgram&&t.push({startTime:e.beforeProgram,stopTime:e.afterProgram,topic:"Startup",name:"Program Start",description:"Time it takes to pass control to VSCodes main method"}),e.vscodeStart&&t.push({startTime:e.vscodeStart,stopTime:e.beforeLoad,topic:"Startup",name:"VSCode Startup",description:"Time it takes to create a window and startup VSCode"}),t.push({startTime:e.beforeLoad,stopTime:e.afterLoad,topic:"Startup",name:"Load Modules",description:"Time it takes to load VSCodes main modules"}),t.push({startTime:e.beforeReady,stopTime:e.afterReady,topic:"Startup",name:"Event DOMContentLoaded",description:"Time it takes for the DOM to emit DOMContentLoaded event"}),l.getTimeKeeper().setInitialCollectedEvents(t,e.start)}},e.prototype.onUnexpectedError=function(e){var t=s.toErrorMessage(e,!0);if(t){var n=(new Date).getTime();t===this.previousErrorValue&&n-this.previousErrorTime<=1e3||(this.previousErrorTime=n,this.previousErrorValue=t,console.error(t),e.friendlyMessage&&this.messageService&&this.messageService.show(pe.Severity.Error,e.friendlyMessage))}},e.prototype.layout=function(){var e=n.$(this.container).getClientArea(),t=new n.Dimension(e.width,e.height);this.contentsContainer.size(t.width,t.height),this.contextViewService.layout(),this.workbench.layout()},e.prototype.joinCreation=function(){return this.workbench.joinCreation()},e.prototype.dispose=function(e){if(this.workbench){var t=this.workbench.shutdown(e);if(t)return}for(this.contextViewService.dispose(),this.storageService.dispose();this.toUnbind.length;)this.toUnbind.pop()();n.$(this.container).empty()},e}();t.WorkbenchShell=Ae}),define("vs/workbench/electron-browser/main",["require","exports","vs/base/common/winjs.base","vs/workbench/electron-browser/shell","vs/base/common/errors","vs/base/common/platform","vs/base/common/paths","vs/base/common/timer","vs/base/common/objects","vs/base/common/uri","vs/base/common/strings","path","fs","graceful-fs"],function(e,t,n,i,r,o,s,a,c,u,l,d,h,p){function f(e,t){c.assign(process.env,e.userEnv);var n={env:e},i=e.filesToOpen&&e.filesToOpen.length?m(e.filesToOpen):null,r=e.filesToCreate&&e.filesToCreate.length?m(e.filesToCreate):null,o={singleFileMode:!e.workspacePath,filesToOpen:i,filesToCreate:r,extensionsToInstall:e.extensionsToInstall,autoSaveDelay:e.autoSaveDelay,globalSettings:t};return e.enablePerformance&&(a.ENABLE_TIMER=!0),g(v(e),n,o)}function m(e){return e.map(function(e){var t={resource:u["default"].file(e.filePath)};return e.lineNumber&&(t.options={selection:{startLineNumber:e.lineNumber,startColumn:e.columnNumber}}),t})}function v(e){if(!e.workspacePath)return null;var t=d.normalize(h.realpathSync(e.workspacePath));s.isUNC(t)&&l.endsWith(t,s.nativeSep)&&(t=l.rtrim(t,s.nativeSep));var n=u["default"].file(t),i=d.basename(t)||t,r=h.statSync(t),a={resource:n,id:o.isLinux?t:t.toLowerCase(),name:i,uid:o.isLinux?r.ino:r.birthtime.getTime(),mtime:r.mtime.getTime()};return a}function g(e,t,o){return window.MonacoEnvironment.timers.beforeReady=new Date,n.Utilities.ready(function(){window.MonacoEnvironment.timers.afterReady=new Date;var n=new Date,s=new i.WorkbenchShell(document.body,e,t,o);s.open(),s.joinCreation().then(function(){a.start(a.Topic.STARTUP,"Open Shell, Viewlet & Editor",n,"Workbench has opened after this event with viewlet and editor restored").stop()}),self.require.config({onError:function(e){"load"===e.errorCode&&s.onUnexpectedError(r.loaderError(e))}})},!0)}p.gracefulify(h),t.startup=f}),require.config({ignoreDuplicateModules:["vs/workbench/parts/search/common/searchModel","vs/workbench/parts/search/common/searchQuery"]}),define("vs/workbench/workbench.main",["vs/base/common/strings","vs/base/common/errors","vs/editor/browser/editor.all","vs/languages/languages.main","vs/languages/typescript.workbench/common/contribution","vs/workbench/browser/actions/toggleSidebarVisibility","vs/workbench/browser/actions/toggleSidebarPosition","vs/workbench/browser/actions/triggerQuickOpen","vs/workbench/browser/actions/triggerEditorActions","vs/workbench/browser/actions/triggerNavigation","vs/workbench/browser/actions/showPerformanceBox","vs/workbench/browser/actions/openSettings","vs/workbench/parts/quickopen/browser/quickopen.contribution","vs/workbench/parts/files/browser/explorerViewlet","vs/workbench/parts/files/browser/fileActions.contribution","vs/workbench/parts/files/browser/files.contribution","vs/workbench/parts/files/electron-browser/files.electron.contribution","vs/workbench/parts/search/browser/search.contribution","vs/workbench/parts/git/electron-browser/git.contribution","vs/workbench/parts/git/browser/gitQuickOpen","vs/workbench/parts/git/browser/gitActions.contribution","vs/workbench/parts/debug/electron-browser/debug.contribution","vs/workbench/parts/extensions/electron-browser/extensions.contribution","vs/workbench/parts/extensions/electron-browser/extensionsQuickOpen","vs/workbench/parts/output/browser/output.contribution","vs/workbench/parts/output/browser/outputActions.contribution","vs/workbench/parts/markdown/browser/markdown.contribution","vs/workbench/parts/markdown/browser/markdownActions.contribution","vs/workbench/browser/workbench","vs/workbench/parts/tasks/electron-browser/task.contribution","vs/workbench/parts/emmet/node/emmet.contribution","vs/workbench/parts/execution/electron-browser/execution.contribution","vs/workbench/parts/execution/electron-browser/terminal.contribution","vs/workbench/parts/snippets/electron-browser/snippets.contribution","vs/workbench/parts/telemetry/node/appInsights.telemetry.contribution","vs/workbench/parts/themes/electron-browser/themes.contribution","vs/workbench/parts/feedback/electron-browser/feedback.contribution","vs/workbench/electron-browser/main.contribution","vs/workbench/electron-browser/main"],function(){});